function qh(ve,Ce){const u=Object.create(null),q=ve.split(",");for(let W=0;W<q.length;W++)u[q[W]]=!0;return Ce?W=>!!u[W.toLowerCase()]:W=>!!u[W]}const K1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",$1=qh(K1);function _0(ve){return!!ve||ve===""}function Gh(ve){if(zi(ve)){const Ce={};for(let u=0;u<ve.length;u++){const q=ve[u],W=os(q)?tv(q):Gh(q);if(W)for(const o in W)Ce[o]=W[o]}return Ce}else{if(os(ve))return ve;if(Fo(ve))return ve}}const Q1=/;(?![^(]*\))/g,ev=/:(.+)/;function tv(ve){const Ce={};return ve.split(Q1).forEach(u=>{if(u){const q=u.split(ev);q.length>1&&(Ce[q[0].trim()]=q[1].trim())}}),Ce}function Yh(ve){let Ce="";if(os(ve))Ce=ve;else if(zi(ve))for(let u=0;u<ve.length;u++){const q=Yh(ve[u]);q&&(Ce+=q+" ")}else if(Fo(ve))for(const u in ve)ve[u]&&(Ce+=u+" ");return Ce.trim()}function rv(ve,Ce){if(ve.length!==Ce.length)return!1;let u=!0;for(let q=0;u&&q<ve.length;q++)u=bf(ve[q],Ce[q]);return u}function bf(ve,Ce){if(ve===Ce)return!0;let u=k0(ve),q=k0(Ce);if(u||q)return u&&q?ve.getTime()===Ce.getTime():!1;if(u=zi(ve),q=zi(Ce),u||q)return u&&q?rv(ve,Ce):!1;if(u=Fo(ve),q=Fo(Ce),u||q){if(!u||!q)return!1;const W=Object.keys(ve).length,o=Object.keys(Ce).length;if(W!==o)return!1;for(const p in ve){const x=ve.hasOwnProperty(p),y=Ce.hasOwnProperty(p);if(x&&!y||!x&&y||!bf(ve[p],Ce[p]))return!1}}return String(ve)===String(Ce)}function w0(ve,Ce){return ve.findIndex(u=>bf(u,Ce))}const Ub=ve=>ve==null?"":zi(ve)||Fo(ve)&&(ve.toString===M0||!Qi(ve.toString))?JSON.stringify(ve,T0,2):String(ve),T0=(ve,Ce)=>Ce&&Ce.__v_isRef?T0(ve,Ce.value):Vc(Ce)?{[`Map(${Ce.size})`]:[...Ce.entries()].reduce((u,[q,W])=>(u[`${q} =>`]=W,u),{})}:wf(Ce)?{[`Set(${Ce.size})`]:[...Ce.values()]}:Fo(Ce)&&!zi(Ce)&&!S0(Ce)?String(Ce):Ce,Ba={},Uc=[],el=()=>{},nv=()=>!1,iv=/^on[^a-z]/,_f=ve=>iv.test(ve),Wh=ve=>ve.startsWith("onUpdate:"),as=Object.assign,Zh=(ve,Ce)=>{const u=ve.indexOf(Ce);u>-1&&ve.splice(u,1)},av=Object.prototype.hasOwnProperty,ha=(ve,Ce)=>av.call(ve,Ce),zi=Array.isArray,Vc=ve=>Tf(ve)==="[object Map]",wf=ve=>Tf(ve)==="[object Set]",k0=ve=>ve instanceof Date,Qi=ve=>typeof ve=="function",os=ve=>typeof ve=="string",Xh=ve=>typeof ve=="symbol",Fo=ve=>ve!==null&&typeof ve=="object",A0=ve=>Fo(ve)&&Qi(ve.then)&&Qi(ve.catch),M0=Object.prototype.toString,Tf=ve=>M0.call(ve),ov=ve=>Tf(ve).slice(8,-1),S0=ve=>Tf(ve)==="[object Object]",Jh=ve=>os(ve)&&ve!=="NaN"&&ve[0]!=="-"&&""+parseInt(ve,10)===ve,kf=qh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Af=ve=>{const Ce=Object.create(null);return u=>Ce[u]||(Ce[u]=ve(u))},sv=/-(\w)/g,Hc=Af(ve=>ve.replace(sv,(Ce,u)=>u?u.toUpperCase():"")),lv=/\B([A-Z])/g,qc=Af(ve=>ve.replace(lv,"-$1").toLowerCase()),E0=Af(ve=>ve.charAt(0).toUpperCase()+ve.slice(1)),Kh=Af(ve=>ve?`on${E0(ve)}`:""),Au=(ve,Ce)=>!Object.is(ve,Ce),Mf=(ve,Ce)=>{for(let u=0;u<ve.length;u++)ve[u](Ce)},Sf=(ve,Ce,u)=>{Object.defineProperty(ve,Ce,{configurable:!0,enumerable:!1,value:u})},$h=ve=>{const Ce=parseFloat(ve);return isNaN(Ce)?ve:Ce};let L0;const cv=()=>L0||(L0=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let tc;const Ef=[];class uv{constructor(Ce=!1){this.active=!0,this.effects=[],this.cleanups=[],!Ce&&tc&&(this.parent=tc,this.index=(tc.scopes||(tc.scopes=[])).push(this)-1)}run(Ce){if(this.active)try{return this.on(),Ce()}finally{this.off()}}on(){this.active&&(Ef.push(this),tc=this)}off(){this.active&&(Ef.pop(),tc=Ef[Ef.length-1])}stop(Ce){if(this.active){if(this.effects.forEach(u=>u.stop()),this.cleanups.forEach(u=>u()),this.scopes&&this.scopes.forEach(u=>u.stop(!0)),this.parent&&!Ce){const u=this.parent.scopes.pop();u&&u!==this&&(this.parent.scopes[this.index]=u,u.index=this.index)}this.active=!1}}}function fv(ve,Ce){Ce=Ce||tc,Ce&&Ce.active&&Ce.effects.push(ve)}const Qh=ve=>{const Ce=new Set(ve);return Ce.w=0,Ce.n=0,Ce},C0=ve=>(ve.w&Fl)>0,P0=ve=>(ve.n&Fl)>0,hv=({deps:ve})=>{if(ve.length)for(let Ce=0;Ce<ve.length;Ce++)ve[Ce].w|=Fl},pv=ve=>{const{deps:Ce}=ve;if(Ce.length){let u=0;for(let q=0;q<Ce.length;q++){const W=Ce[q];C0(W)&&!P0(W)?W.delete(ve):Ce[u++]=W,W.w&=~Fl,W.n&=~Fl}Ce.length=u}},ep=new WeakMap;let Mu=0,Fl=1;const tp=30,Su=[];let rc;const nc=Symbol(""),rp=Symbol("");class np{constructor(Ce,u=null,q){this.fn=Ce,this.scheduler=u,this.active=!0,this.deps=[],fv(this,q)}run(){if(!this.active)return this.fn();if(!Su.includes(this))try{return Su.push(rc=this),dv(),Fl=1<<++Mu,Mu<=tp?hv(this):I0(this),this.fn()}finally{Mu<=tp&&pv(this),Fl=1<<--Mu,ic(),Su.pop();const Ce=Su.length;rc=Ce>0?Su[Ce-1]:void 0}}stop(){this.active&&(I0(this),this.onStop&&this.onStop(),this.active=!1)}}function I0(ve){const{deps:Ce}=ve;if(Ce.length){for(let u=0;u<Ce.length;u++)Ce[u].delete(ve);Ce.length=0}}let Gc=!0;const ip=[];function Yc(){ip.push(Gc),Gc=!1}function dv(){ip.push(Gc),Gc=!0}function ic(){const ve=ip.pop();Gc=ve===void 0?!0:ve}function Ls(ve,Ce,u){if(!O0())return;let q=ep.get(ve);q||ep.set(ve,q=new Map);let W=q.get(u);W||q.set(u,W=Qh()),D0(W)}function O0(){return Gc&&rc!==void 0}function D0(ve,Ce){let u=!1;Mu<=tp?P0(ve)||(ve.n|=Fl,u=!C0(ve)):u=!ve.has(rc),u&&(ve.add(rc),rc.deps.push(ve))}function kl(ve,Ce,u,q,W,o){const p=ep.get(ve);if(!p)return;let x=[];if(Ce==="clear")x=[...p.values()];else if(u==="length"&&zi(ve))p.forEach((y,e)=>{(e==="length"||e>=q)&&x.push(y)});else switch(u!==void 0&&x.push(p.get(u)),Ce){case"add":zi(ve)?Jh(u)&&x.push(p.get("length")):(x.push(p.get(nc)),Vc(ve)&&x.push(p.get(rp)));break;case"delete":zi(ve)||(x.push(p.get(nc)),Vc(ve)&&x.push(p.get(rp)));break;case"set":Vc(ve)&&x.push(p.get(nc));break}if(x.length===1)x[0]&&ap(x[0]);else{const y=[];for(const e of x)e&&y.push(...e);ap(Qh(y))}}function ap(ve,Ce){for(const u of zi(ve)?ve:[...ve])(u!==rc||u.allowRecurse)&&(u.scheduler?u.scheduler():u.run())}const mv=qh("__proto__,__v_isRef,__isVue"),z0=new Set(Object.getOwnPropertyNames(Symbol).map(ve=>Symbol[ve]).filter(Xh)),gv=op(),vv=op(!1,!0),yv=op(!0),R0=xv();function xv(){const ve={};return["includes","indexOf","lastIndexOf"].forEach(Ce=>{ve[Ce]=function(...u){const q=ya(this);for(let o=0,p=this.length;o<p;o++)Ls(q,"get",o+"");const W=q[Ce](...u);return W===-1||W===!1?q[Ce](...u.map(ya)):W}}),["push","pop","shift","unshift","splice"].forEach(Ce=>{ve[Ce]=function(...u){Yc();const q=ya(this)[Ce].apply(this,u);return ic(),q}}),ve}function op(ve=!1,Ce=!1){return function(q,W,o){if(W==="__v_isReactive")return!ve;if(W==="__v_isReadonly")return ve;if(W==="__v_raw"&&o===(ve?Ce?zv:G0:Ce?q0:H0).get(q))return q;const p=zi(q);if(!ve&&p&&ha(R0,W))return Reflect.get(R0,W,o);const x=Reflect.get(q,W,o);return(Xh(W)?z0.has(W):mv(W))||(ve||Ls(q,"get",W),Ce)?x:ms(x)?!p||!Jh(W)?x.value:x:Fo(x)?ve?Y0(x):cp(x):x}}const bv=F0(),_v=F0(!0);function F0(ve=!1){return function(u,q,W,o){let p=u[q];if(!ve&&!fp(W)&&(W=ya(W),p=ya(p),!zi(u)&&ms(p)&&!ms(W)))return p.value=W,!0;const x=zi(u)&&Jh(q)?Number(q)<u.length:ha(u,q),y=Reflect.set(u,q,W,o);return u===ya(o)&&(x?Au(W,p)&&kl(u,"set",q,W):kl(u,"add",q,W)),y}}function wv(ve,Ce){const u=ha(ve,Ce);ve[Ce];const q=Reflect.deleteProperty(ve,Ce);return q&&u&&kl(ve,"delete",Ce,void 0),q}function Tv(ve,Ce){const u=Reflect.has(ve,Ce);return(!Xh(Ce)||!z0.has(Ce))&&Ls(ve,"has",Ce),u}function kv(ve){return Ls(ve,"iterate",zi(ve)?"length":nc),Reflect.ownKeys(ve)}const B0={get:gv,set:bv,deleteProperty:wv,has:Tv,ownKeys:kv},Av={get:yv,set(ve,Ce){return!0},deleteProperty(ve,Ce){return!0}},Mv=as({},B0,{get:vv,set:_v}),sp=ve=>ve,Lf=ve=>Reflect.getPrototypeOf(ve);function Cf(ve,Ce,u=!1,q=!1){ve=ve.__v_raw;const W=ya(ve),o=ya(Ce);Ce!==o&&!u&&Ls(W,"get",Ce),!u&&Ls(W,"get",o);const{has:p}=Lf(W),x=q?sp:u?hp:Eu;if(p.call(W,Ce))return x(ve.get(Ce));if(p.call(W,o))return x(ve.get(o));ve!==W&&ve.get(Ce)}function Pf(ve,Ce=!1){const u=this.__v_raw,q=ya(u),W=ya(ve);return ve!==W&&!Ce&&Ls(q,"has",ve),!Ce&&Ls(q,"has",W),ve===W?u.has(ve):u.has(ve)||u.has(W)}function If(ve,Ce=!1){return ve=ve.__v_raw,!Ce&&Ls(ya(ve),"iterate",nc),Reflect.get(ve,"size",ve)}function N0(ve){ve=ya(ve);const Ce=ya(this);return Lf(Ce).has.call(Ce,ve)||(Ce.add(ve),kl(Ce,"add",ve,ve)),this}function j0(ve,Ce){Ce=ya(Ce);const u=ya(this),{has:q,get:W}=Lf(u);let o=q.call(u,ve);o||(ve=ya(ve),o=q.call(u,ve));const p=W.call(u,ve);return u.set(ve,Ce),o?Au(Ce,p)&&kl(u,"set",ve,Ce):kl(u,"add",ve,Ce),this}function U0(ve){const Ce=ya(this),{has:u,get:q}=Lf(Ce);let W=u.call(Ce,ve);W||(ve=ya(ve),W=u.call(Ce,ve)),q&&q.call(Ce,ve);const o=Ce.delete(ve);return W&&kl(Ce,"delete",ve,void 0),o}function V0(){const ve=ya(this),Ce=ve.size!==0,u=ve.clear();return Ce&&kl(ve,"clear",void 0,void 0),u}function Of(ve,Ce){return function(q,W){const o=this,p=o.__v_raw,x=ya(p),y=Ce?sp:ve?hp:Eu;return!ve&&Ls(x,"iterate",nc),p.forEach((e,r)=>q.call(W,y(e),y(r),o))}}function Df(ve,Ce,u){return function(...q){const W=this.__v_raw,o=ya(W),p=Vc(o),x=ve==="entries"||ve===Symbol.iterator&&p,y=ve==="keys"&&p,e=W[ve](...q),r=u?sp:Ce?hp:Eu;return!Ce&&Ls(o,"iterate",y?rp:nc),{next(){const{value:t,done:i}=e.next();return i?{value:t,done:i}:{value:x?[r(t[0]),r(t[1])]:r(t),done:i}},[Symbol.iterator](){return this}}}}function Bl(ve){return function(...Ce){return ve==="delete"?!1:this}}function Sv(){const ve={get(o){return Cf(this,o)},get size(){return If(this)},has:Pf,add:N0,set:j0,delete:U0,clear:V0,forEach:Of(!1,!1)},Ce={get(o){return Cf(this,o,!1,!0)},get size(){return If(this)},has:Pf,add:N0,set:j0,delete:U0,clear:V0,forEach:Of(!1,!0)},u={get(o){return Cf(this,o,!0)},get size(){return If(this,!0)},has(o){return Pf.call(this,o,!0)},add:Bl("add"),set:Bl("set"),delete:Bl("delete"),clear:Bl("clear"),forEach:Of(!0,!1)},q={get(o){return Cf(this,o,!0,!0)},get size(){return If(this,!0)},has(o){return Pf.call(this,o,!0)},add:Bl("add"),set:Bl("set"),delete:Bl("delete"),clear:Bl("clear"),forEach:Of(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{ve[o]=Df(o,!1,!1),u[o]=Df(o,!0,!1),Ce[o]=Df(o,!1,!0),q[o]=Df(o,!0,!0)}),[ve,u,Ce,q]}const[Ev,Lv,Cv,Pv]=Sv();function lp(ve,Ce){const u=Ce?ve?Pv:Cv:ve?Lv:Ev;return(q,W,o)=>W==="__v_isReactive"?!ve:W==="__v_isReadonly"?ve:W==="__v_raw"?q:Reflect.get(ha(u,W)&&W in q?u:q,W,o)}const Iv={get:lp(!1,!1)},Ov={get:lp(!1,!0)},Dv={get:lp(!0,!1)},H0=new WeakMap,q0=new WeakMap,G0=new WeakMap,zv=new WeakMap;function Rv(ve){switch(ve){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Fv(ve){return ve.__v_skip||!Object.isExtensible(ve)?0:Rv(ov(ve))}function cp(ve){return ve&&ve.__v_isReadonly?ve:up(ve,!1,B0,Iv,H0)}function Bv(ve){return up(ve,!1,Mv,Ov,q0)}function Y0(ve){return up(ve,!0,Av,Dv,G0)}function up(ve,Ce,u,q,W){if(!Fo(ve)||ve.__v_raw&&!(Ce&&ve.__v_isReactive))return ve;const o=W.get(ve);if(o)return o;const p=Fv(ve);if(p===0)return ve;const x=new Proxy(ve,p===2?q:u);return W.set(ve,x),x}function Wc(ve){return fp(ve)?Wc(ve.__v_raw):!!(ve&&ve.__v_isReactive)}function fp(ve){return!!(ve&&ve.__v_isReadonly)}function W0(ve){return Wc(ve)||fp(ve)}function ya(ve){const Ce=ve&&ve.__v_raw;return Ce?ya(Ce):ve}function Z0(ve){return Sf(ve,"__v_skip",!0),ve}const Eu=ve=>Fo(ve)?cp(ve):ve,hp=ve=>Fo(ve)?Y0(ve):ve;function X0(ve){O0()&&(ve=ya(ve),ve.dep||(ve.dep=Qh()),D0(ve.dep))}function J0(ve,Ce){ve=ya(ve),ve.dep&&ap(ve.dep)}function ms(ve){return Boolean(ve&&ve.__v_isRef===!0)}function Vb(ve){return Nv(ve,!1)}function Nv(ve,Ce){return ms(ve)?ve:new jv(ve,Ce)}class jv{constructor(Ce,u){this._shallow=u,this.dep=void 0,this.__v_isRef=!0,this._rawValue=u?Ce:ya(Ce),this._value=u?Ce:Eu(Ce)}get value(){return X0(this),this._value}set value(Ce){Ce=this._shallow?Ce:ya(Ce),Au(Ce,this._rawValue)&&(this._rawValue=Ce,this._value=this._shallow?Ce:Eu(Ce),J0(this))}}function Uv(ve){return ms(ve)?ve.value:ve}const Vv={get:(ve,Ce,u)=>Uv(Reflect.get(ve,Ce,u)),set:(ve,Ce,u,q)=>{const W=ve[Ce];return ms(W)&&!ms(u)?(W.value=u,!0):Reflect.set(ve,Ce,u,q)}};function K0(ve){return Wc(ve)?ve:new Proxy(ve,Vv)}class Hv{constructor(Ce,u,q){this._setter=u,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new np(Ce,()=>{this._dirty||(this._dirty=!0,J0(this))}),this.__v_isReadonly=q}get value(){const Ce=ya(this);return X0(Ce),Ce._dirty&&(Ce._dirty=!1,Ce._value=Ce.effect.run()),Ce._value}set value(Ce){this._setter(Ce)}}function qv(ve,Ce){let u,q;const W=Qi(ve);return W?(u=ve,q=el):(u=ve.get,q=ve.set),new Hv(u,q,W||!q)}Promise.resolve();function Gv(ve,Ce,...u){const q=ve.vnode.props||Ba;let W=u;const o=Ce.startsWith("update:"),p=o&&Ce.slice(7);if(p&&p in q){const r=`${p==="modelValue"?"model":p}Modifiers`,{number:t,trim:i}=q[r]||Ba;i?W=u.map(n=>n.trim()):t&&(W=u.map($h))}let x,y=q[x=Kh(Ce)]||q[x=Kh(Hc(Ce))];!y&&o&&(y=q[x=Kh(qc(Ce))]),y&&Bs(y,ve,6,W);const e=q[x+"Once"];if(e){if(!ve.emitted)ve.emitted={};else if(ve.emitted[x])return;ve.emitted[x]=!0,Bs(e,ve,6,W)}}function $0(ve,Ce,u=!1){const q=Ce.emitsCache,W=q.get(ve);if(W!==void 0)return W;const o=ve.emits;let p={},x=!1;if(!Qi(ve)){const y=e=>{const r=$0(e,Ce,!0);r&&(x=!0,as(p,r))};!u&&Ce.mixins.length&&Ce.mixins.forEach(y),ve.extends&&y(ve.extends),ve.mixins&&ve.mixins.forEach(y)}return!o&&!x?(q.set(ve,null),null):(zi(o)?o.forEach(y=>p[y]=null):as(p,o),q.set(ve,p),p)}function pp(ve,Ce){return!ve||!_f(Ce)?!1:(Ce=Ce.slice(2).replace(/Once$/,""),ha(ve,Ce[0].toLowerCase()+Ce.slice(1))||ha(ve,qc(Ce))||ha(ve,Ce))}let tl=null,zf=null;function Rf(ve){const Ce=tl;return tl=ve,zf=ve&&ve.type.__scopeId||null,Ce}function Hb(ve){zf=ve}function qb(){zf=null}function Yv(ve,Ce=tl,u){if(!Ce||ve._n)return ve;const q=(...W)=>{q._d&&wm(-1);const o=Rf(Ce),p=ve(...W);return Rf(o),q._d&&wm(1),p};return q._n=!0,q._c=!0,q._d=!0,q}function dp(ve){const{type:Ce,vnode:u,proxy:q,withProxy:W,props:o,propsOptions:[p],slots:x,attrs:y,emit:e,render:r,renderCache:t,data:i,setupState:n,ctx:h,inheritAttrs:s}=ve;let a,l;const f=Rf(ve);try{if(u.shapeFlag&4){const v=W||q;a=pl(r.call(v,v,t,o,n,i,h)),l=y}else{const v=Ce;a=pl(v.length>1?v(o,{attrs:y,slots:x,emit:e}):v(o,null)),l=Ce.props?y:Wv(y)}}catch(v){Lu.length=0,Yf(v,ve,1),a=hl(fl)}let d=a;if(l&&s!==!1){const v=Object.keys(l),{shapeFlag:m}=d;v.length&&m&(1|6)&&(p&&v.some(Wh)&&(l=Zv(l,p)),d=Zc(d,l))}return u.dirs&&(d.dirs=d.dirs?d.dirs.concat(u.dirs):u.dirs),u.transition&&(d.transition=u.transition),a=d,Rf(f),a}const Wv=ve=>{let Ce;for(const u in ve)(u==="class"||u==="style"||_f(u))&&((Ce||(Ce={}))[u]=ve[u]);return Ce},Zv=(ve,Ce)=>{const u={};for(const q in ve)(!Wh(q)||!(q.slice(9)in Ce))&&(u[q]=ve[q]);return u};function Xv(ve,Ce,u){const{props:q,children:W,component:o}=ve,{props:p,children:x,patchFlag:y}=Ce,e=o.emitsOptions;if(Ce.dirs||Ce.transition)return!0;if(u&&y>=0){if(y&1024)return!0;if(y&16)return q?Q0(q,p,e):!!p;if(y&8){const r=Ce.dynamicProps;for(let t=0;t<r.length;t++){const i=r[t];if(p[i]!==q[i]&&!pp(e,i))return!0}}}else return(W||x)&&(!x||!x.$stable)?!0:q===p?!1:q?p?Q0(q,p,e):!0:!!p;return!1}function Q0(ve,Ce,u){const q=Object.keys(Ce);if(q.length!==Object.keys(ve).length)return!0;for(let W=0;W<q.length;W++){const o=q[W];if(Ce[o]!==ve[o]&&!pp(u,o))return!0}return!1}function Jv({vnode:ve,parent:Ce},u){for(;Ce&&Ce.subTree===ve;)(ve=Ce.vnode).el=u,Ce=Ce.parent}const Kv=ve=>ve.__isSuspense;function $v(ve,Ce){Ce&&Ce.pendingBranch?zi(ve)?Ce.effects.push(...ve):Ce.effects.push(ve):Qy(ve)}function Qv(ve,Ce){if($o){let u=$o.provides;const q=$o.parent&&$o.parent.provides;q===u&&(u=$o.provides=Object.create(q)),u[ve]=Ce}}function mp(ve,Ce,u=!1){const q=$o||tl;if(q){const W=q.parent==null?q.vnode.appContext&&q.vnode.appContext.provides:q.parent.provides;if(W&&ve in W)return W[ve];if(arguments.length>1)return u&&Qi(Ce)?Ce.call(q.proxy):Ce}}function ey(){const ve={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return im(()=>{ve.isMounted=!0}),am(()=>{ve.isUnmounting=!0}),ve}const Fs=[Function,Array],ty={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Fs,onEnter:Fs,onAfterEnter:Fs,onEnterCancelled:Fs,onBeforeLeave:Fs,onLeave:Fs,onAfterLeave:Fs,onLeaveCancelled:Fs,onBeforeAppear:Fs,onAppear:Fs,onAfterAppear:Fs,onAppearCancelled:Fs},setup(ve,{slots:Ce}){const u=Vy(),q=ey();let W;return()=>{const o=Ce.default&&rm(Ce.default(),!0);if(!o||!o.length)return;const p=ya(ve),{mode:x}=p,y=o[0];if(q.isLeaving)return vp(y);const e=tm(y);if(!e)return vp(y);const r=gp(e,p,q,u);yp(e,r);const t=u.subTree,i=t&&tm(t);let n=!1;const{getTransitionKey:h}=e.type;if(h){const s=h();W===void 0?W=s:s!==W&&(W=s,n=!0)}if(i&&i.type!==fl&&(!cc(e,i)||n)){const s=gp(i,p,q,u);if(yp(i,s),x==="out-in")return q.isLeaving=!0,s.afterLeave=()=>{q.isLeaving=!1,u.update()},vp(y);x==="in-out"&&e.type!==fl&&(s.delayLeave=(a,l,f)=>{const d=em(q,i);d[String(i.key)]=i,a._leaveCb=()=>{l(),a._leaveCb=void 0,delete r.delayedLeave},r.delayedLeave=f})}return y}}},ry=ty;function em(ve,Ce){const{leavingVNodes:u}=ve;let q=u.get(Ce.type);return q||(q=Object.create(null),u.set(Ce.type,q)),q}function gp(ve,Ce,u,q){const{appear:W,mode:o,persisted:p=!1,onBeforeEnter:x,onEnter:y,onAfterEnter:e,onEnterCancelled:r,onBeforeLeave:t,onLeave:i,onAfterLeave:n,onLeaveCancelled:h,onBeforeAppear:s,onAppear:a,onAfterAppear:l,onAppearCancelled:f}=Ce,d=String(ve.key),v=em(u,ve),m=(b,g)=>{b&&Bs(b,q,9,g)},c={mode:o,persisted:p,beforeEnter(b){let g=x;if(!u.isMounted)if(W)g=s||x;else return;b._leaveCb&&b._leaveCb(!0);const w=v[d];w&&cc(ve,w)&&w.el._leaveCb&&w.el._leaveCb(),m(g,[b])},enter(b){let g=y,w=e,_=r;if(!u.isMounted)if(W)g=a||y,w=l||e,_=f||r;else return;let T=!1;const k=b._enterCb=L=>{T||(T=!0,L?m(_,[b]):m(w,[b]),c.delayedLeave&&c.delayedLeave(),b._enterCb=void 0)};g?(g(b,k),g.length<=1&&k()):k()},leave(b,g){const w=String(ve.key);if(b._enterCb&&b._enterCb(!0),u.isUnmounting)return g();m(t,[b]);let _=!1;const T=b._leaveCb=k=>{_||(_=!0,g(),k?m(h,[b]):m(n,[b]),b._leaveCb=void 0,v[w]===ve&&delete v[w])};v[w]=ve,i?(i(b,T),i.length<=1&&T()):T()},clone(b){return gp(b,Ce,u,q)}};return c}function vp(ve){if(Ff(ve))return ve=Zc(ve),ve.children=null,ve}function tm(ve){return Ff(ve)?ve.children?ve.children[0]:void 0:ve}function yp(ve,Ce){ve.shapeFlag&6&&ve.component?yp(ve.component.subTree,Ce):ve.shapeFlag&128?(ve.ssContent.transition=Ce.clone(ve.ssContent),ve.ssFallback.transition=Ce.clone(ve.ssFallback)):ve.transition=Ce}function rm(ve,Ce=!1){let u=[],q=0;for(let W=0;W<ve.length;W++){const o=ve[W];o.type===ul?(o.patchFlag&128&&q++,u=u.concat(rm(o.children,Ce))):(Ce||o.type!==fl)&&u.push(o)}if(q>1)for(let W=0;W<u.length;W++)u[W].patchFlag=-2;return u}const xp=ve=>!!ve.type.__asyncLoader,Ff=ve=>ve.type.__isKeepAlive;function ny(ve,Ce){nm(ve,"a",Ce)}function iy(ve,Ce){nm(ve,"da",Ce)}function nm(ve,Ce,u=$o){const q=ve.__wdc||(ve.__wdc=()=>{let W=u;for(;W;){if(W.isDeactivated)return;W=W.parent}return ve()});if(Bf(Ce,q,u),u){let W=u.parent;for(;W&&W.parent;)Ff(W.parent.vnode)&&ay(q,Ce,u,W),W=W.parent}}function ay(ve,Ce,u,q){const W=Bf(Ce,ve,q,!0);om(()=>{Zh(q[Ce],W)},u)}function Bf(ve,Ce,u=$o,q=!1){if(u){const W=u[ve]||(u[ve]=[]),o=Ce.__weh||(Ce.__weh=(...p)=>{if(u.isUnmounted)return;Yc(),Xc(u);const x=Bs(Ce,u,ve,p);return uc(),ic(),x});return q?W.unshift(o):W.push(o),o}}const Al=ve=>(Ce,u=$o)=>(!Gf||ve==="sp")&&Bf(ve,Ce,u),oy=Al("bm"),im=Al("m"),sy=Al("bu"),ly=Al("u"),am=Al("bum"),om=Al("um"),cy=Al("sp"),uy=Al("rtg"),fy=Al("rtc");function hy(ve,Ce=$o){Bf("ec",ve,Ce)}let bp=!0;function py(ve){const Ce=cm(ve),u=ve.proxy,q=ve.ctx;bp=!1,Ce.beforeCreate&&sm(Ce.beforeCreate,ve,"bc");const{data:W,computed:o,methods:p,watch:x,provide:y,inject:e,created:r,beforeMount:t,mounted:i,beforeUpdate:n,updated:h,activated:s,deactivated:a,beforeDestroy:l,beforeUnmount:f,destroyed:d,unmounted:v,render:m,renderTracked:c,renderTriggered:b,errorCaptured:g,serverPrefetch:w,expose:_,inheritAttrs:T,components:k,directives:L,filters:M}=Ce;if(e&&dy(e,q,null,ve.appContext.config.unwrapInjectedRef),p)for(const S in p){const E=p[S];Qi(E)&&(q[S]=E.bind(u))}if(W){const S=W.call(u,u);Fo(S)&&(ve.data=cp(S))}if(bp=!0,o)for(const S in o){const E=o[S],D=Qi(E)?E.bind(u,u):Qi(E.get)?E.get.bind(u,u):el,F=!Qi(E)&&Qi(E.set)?E.set.bind(u):el,H=qv({get:D,set:F});Object.defineProperty(q,S,{enumerable:!0,configurable:!0,get:()=>H.value,set:V=>H.value=V})}if(x)for(const S in x)lm(x[S],q,u,S);if(y){const S=Qi(y)?y.call(u):y;Reflect.ownKeys(S).forEach(E=>{Qv(E,S[E])})}r&&sm(r,ve,"c");function P(S,E){zi(E)?E.forEach(D=>S(D.bind(u))):E&&S(E.bind(u))}if(P(oy,t),P(im,i),P(sy,n),P(ly,h),P(ny,s),P(iy,a),P(hy,g),P(fy,c),P(uy,b),P(am,f),P(om,v),P(cy,w),zi(_))if(_.length){const S=ve.exposed||(ve.exposed={});_.forEach(E=>{Object.defineProperty(S,E,{get:()=>u[E],set:D=>u[E]=D})})}else ve.exposed||(ve.exposed={});m&&ve.render===el&&(ve.render=m),T!=null&&(ve.inheritAttrs=T),k&&(ve.components=k),L&&(ve.directives=L)}function dy(ve,Ce,u=el,q=!1){zi(ve)&&(ve=_p(ve));for(const W in ve){const o=ve[W];let p;Fo(o)?"default"in o?p=mp(o.from||W,o.default,!0):p=mp(o.from||W):p=mp(o),ms(p)&&q?Object.defineProperty(Ce,W,{enumerable:!0,configurable:!0,get:()=>p.value,set:x=>p.value=x}):Ce[W]=p}}function sm(ve,Ce,u){Bs(zi(ve)?ve.map(q=>q.bind(Ce.proxy)):ve.bind(Ce.proxy),Ce,u)}function lm(ve,Ce,u,q){const W=q.includes(".")?Bm(u,q):()=>u[q];if(os(ve)){const o=Ce[ve];Qi(o)&&Op(W,o)}else if(Qi(ve))Op(W,ve.bind(u));else if(Fo(ve))if(zi(ve))ve.forEach(o=>lm(o,Ce,u,q));else{const o=Qi(ve.handler)?ve.handler.bind(u):Ce[ve.handler];Qi(o)&&Op(W,o,ve)}}function cm(ve){const Ce=ve.type,{mixins:u,extends:q}=Ce,{mixins:W,optionsCache:o,config:{optionMergeStrategies:p}}=ve.appContext,x=o.get(Ce);let y;return x?y=x:!W.length&&!u&&!q?y=Ce:(y={},W.length&&W.forEach(e=>Nf(y,e,p,!0)),Nf(y,Ce,p)),o.set(Ce,y),y}function Nf(ve,Ce,u,q=!1){const{mixins:W,extends:o}=Ce;o&&Nf(ve,o,u,!0),W&&W.forEach(p=>Nf(ve,p,u,!0));for(const p in Ce)if(!(q&&p==="expose")){const x=my[p]||u&&u[p];ve[p]=x?x(ve[p],Ce[p]):Ce[p]}return ve}const my={data:um,props:ac,emits:ac,methods:ac,computed:ac,beforeCreate:gs,created:gs,beforeMount:gs,mounted:gs,beforeUpdate:gs,updated:gs,beforeDestroy:gs,beforeUnmount:gs,destroyed:gs,unmounted:gs,activated:gs,deactivated:gs,errorCaptured:gs,serverPrefetch:gs,components:ac,directives:ac,watch:vy,provide:um,inject:gy};function um(ve,Ce){return Ce?ve?function(){return as(Qi(ve)?ve.call(this,this):ve,Qi(Ce)?Ce.call(this,this):Ce)}:Ce:ve}function gy(ve,Ce){return ac(_p(ve),_p(Ce))}function _p(ve){if(zi(ve)){const Ce={};for(let u=0;u<ve.length;u++)Ce[ve[u]]=ve[u];return Ce}return ve}function gs(ve,Ce){return ve?[...new Set([].concat(ve,Ce))]:Ce}function ac(ve,Ce){return ve?as(as(Object.create(null),ve),Ce):Ce}function vy(ve,Ce){if(!ve)return Ce;if(!Ce)return ve;const u=as(Object.create(null),ve);for(const q in Ce)u[q]=gs(ve[q],Ce[q]);return u}function yy(ve,Ce,u,q=!1){const W={},o={};Sf(o,Vf,1),ve.propsDefaults=Object.create(null),fm(ve,Ce,W,o);for(const p in ve.propsOptions[0])p in W||(W[p]=void 0);u?ve.props=q?W:Bv(W):ve.type.props?ve.props=W:ve.props=o,ve.attrs=o}function xy(ve,Ce,u,q){const{props:W,attrs:o,vnode:{patchFlag:p}}=ve,x=ya(W),[y]=ve.propsOptions;let e=!1;if((q||p>0)&&!(p&16)){if(p&8){const r=ve.vnode.dynamicProps;for(let t=0;t<r.length;t++){let i=r[t];const n=Ce[i];if(y)if(ha(o,i))n!==o[i]&&(o[i]=n,e=!0);else{const h=Hc(i);W[h]=wp(y,x,h,n,ve,!1)}else n!==o[i]&&(o[i]=n,e=!0)}}}else{fm(ve,Ce,W,o)&&(e=!0);let r;for(const t in x)(!Ce||!ha(Ce,t)&&((r=qc(t))===t||!ha(Ce,r)))&&(y?u&&(u[t]!==void 0||u[r]!==void 0)&&(W[t]=wp(y,x,t,void 0,ve,!0)):delete W[t]);if(o!==x)for(const t in o)(!Ce||!ha(Ce,t))&&(delete o[t],e=!0)}e&&kl(ve,"set","$attrs")}function fm(ve,Ce,u,q){const[W,o]=ve.propsOptions;let p=!1,x;if(Ce)for(let y in Ce){if(kf(y))continue;const e=Ce[y];let r;W&&ha(W,r=Hc(y))?!o||!o.includes(r)?u[r]=e:(x||(x={}))[r]=e:pp(ve.emitsOptions,y)||(!(y in q)||e!==q[y])&&(q[y]=e,p=!0)}if(o){const y=ya(u),e=x||Ba;for(let r=0;r<o.length;r++){const t=o[r];u[t]=wp(W,y,t,e[t],ve,!ha(e,t))}}return p}function wp(ve,Ce,u,q,W,o){const p=ve[u];if(p!=null){const x=ha(p,"default");if(x&&q===void 0){const y=p.default;if(p.type!==Function&&Qi(y)){const{propsDefaults:e}=W;u in e?q=e[u]:(Xc(W),q=e[u]=y.call(null,Ce),uc())}else q=y}p[0]&&(o&&!x?q=!1:p[1]&&(q===""||q===qc(u))&&(q=!0))}return q}function hm(ve,Ce,u=!1){const q=Ce.propsCache,W=q.get(ve);if(W)return W;const o=ve.props,p={},x=[];let y=!1;if(!Qi(ve)){const r=t=>{y=!0;const[i,n]=hm(t,Ce,!0);as(p,i),n&&x.push(...n)};!u&&Ce.mixins.length&&Ce.mixins.forEach(r),ve.extends&&r(ve.extends),ve.mixins&&ve.mixins.forEach(r)}if(!o&&!y)return q.set(ve,Uc),Uc;if(zi(o))for(let r=0;r<o.length;r++){const t=Hc(o[r]);pm(t)&&(p[t]=Ba)}else if(o)for(const r in o){const t=Hc(r);if(pm(t)){const i=o[r],n=p[t]=zi(i)||Qi(i)?{type:i}:i;if(n){const h=gm(Boolean,n.type),s=gm(String,n.type);n[0]=h>-1,n[1]=s<0||h<s,(h>-1||ha(n,"default"))&&x.push(t)}}}const e=[p,x];return q.set(ve,e),e}function pm(ve){return ve[0]!=="$"}function dm(ve){const Ce=ve&&ve.toString().match(/^\s*function (\w+)/);return Ce?Ce[1]:ve===null?"null":""}function mm(ve,Ce){return dm(ve)===dm(Ce)}function gm(ve,Ce){return zi(Ce)?Ce.findIndex(u=>mm(u,ve)):Qi(Ce)&&mm(Ce,ve)?0:-1}const vm=ve=>ve[0]==="_"||ve==="$stable",Tp=ve=>zi(ve)?ve.map(pl):[pl(ve)],by=(ve,Ce,u)=>{const q=Yv((...W)=>Tp(Ce(...W)),u);return q._c=!1,q},ym=(ve,Ce,u)=>{const q=ve._ctx;for(const W in ve){if(vm(W))continue;const o=ve[W];if(Qi(o))Ce[W]=by(W,o,q);else if(o!=null){const p=Tp(o);Ce[W]=()=>p}}},xm=(ve,Ce)=>{const u=Tp(Ce);ve.slots.default=()=>u},_y=(ve,Ce)=>{if(ve.vnode.shapeFlag&32){const u=Ce._;u?(ve.slots=ya(Ce),Sf(Ce,"_",u)):ym(Ce,ve.slots={})}else ve.slots={},Ce&&xm(ve,Ce);Sf(ve.slots,Vf,1)},wy=(ve,Ce,u)=>{const{vnode:q,slots:W}=ve;let o=!0,p=Ba;if(q.shapeFlag&32){const x=Ce._;x?u&&x===1?o=!1:(as(W,Ce),!u&&x===1&&delete W._):(o=!Ce.$stable,ym(Ce,W)),p=Ce}else Ce&&(xm(ve,Ce),p={default:1});if(o)for(const x in W)!vm(x)&&!(x in p)&&delete W[x]};function Gb(ve,Ce){const u=tl;if(u===null)return ve;const q=u.proxy,W=ve.dirs||(ve.dirs=[]);for(let o=0;o<Ce.length;o++){let[p,x,y,e=Ba]=Ce[o];Qi(p)&&(p={mounted:p,updated:p}),p.deep&&fc(x),W.push({dir:p,instance:q,value:x,oldValue:void 0,arg:y,modifiers:e})}return ve}function oc(ve,Ce,u,q){const W=ve.dirs,o=Ce&&Ce.dirs;for(let p=0;p<W.length;p++){const x=W[p];o&&(x.oldValue=o[p].value);let y=x.dir[q];y&&(Yc(),Bs(y,u,8,[ve.el,x,ve,Ce]),ic())}}function bm(){return{app:null,config:{isNativeTag:nv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ty=0;function ky(ve,Ce){return function(q,W=null){W!=null&&!Fo(W)&&(W=null);const o=bm(),p=new Set;let x=!1;const y=o.app={_uid:Ty++,_component:q,_props:W,_container:null,_context:o,_instance:null,version:tx,get config(){return o.config},set config(e){},use(e,...r){return p.has(e)||(e&&Qi(e.install)?(p.add(e),e.install(y,...r)):Qi(e)&&(p.add(e),e(y,...r))),y},mixin(e){return o.mixins.includes(e)||o.mixins.push(e),y},component(e,r){return r?(o.components[e]=r,y):o.components[e]},directive(e,r){return r?(o.directives[e]=r,y):o.directives[e]},mount(e,r,t){if(!x){const i=hl(q,W);return i.appContext=o,r&&Ce?Ce(i,e):ve(i,e,t),x=!0,y._container=e,e.__vue_app__=y,Ep(i.component)||i.component.proxy}},unmount(){x&&(ve(null,y._container),delete y._container.__vue_app__)},provide(e,r){return o.provides[e]=r,y}};return y}}function kp(ve,Ce,u,q,W=!1){if(zi(ve)){ve.forEach((i,n)=>kp(i,Ce&&(zi(Ce)?Ce[n]:Ce),u,q,W));return}if(xp(q)&&!W)return;const o=q.shapeFlag&4?Ep(q.component)||q.component.proxy:q.el,p=W?null:o,{i:x,r:y}=ve,e=Ce&&Ce.r,r=x.refs===Ba?x.refs={}:x.refs,t=x.setupState;if(e!=null&&e!==y&&(os(e)?(r[e]=null,ha(t,e)&&(t[e]=null)):ms(e)&&(e.value=null)),Qi(y))jl(y,x,12,[p,r]);else{const i=os(y),n=ms(y);if(i||n){const h=()=>{if(ve.f){const s=i?r[y]:y.value;W?zi(s)&&Zh(s,o):zi(s)?s.includes(o)||s.push(o):i?r[y]=[o]:(y.value=[o],ve.k&&(r[ve.k]=y.value))}else i?(r[y]=p,ha(t,y)&&(t[y]=p)):ms(y)&&(y.value=p,ve.k&&(r[ve.k]=p))};p?(h.id=-1,ws(h,u)):h()}}}const ws=$v;function Ay(ve){return My(ve)}function My(ve,Ce){const u=cv();u.__VUE__=!0;const{insert:q,remove:W,patchProp:o,createElement:p,createText:x,createComment:y,setText:e,setElementText:r,parentNode:t,nextSibling:i,setScopeId:n=el,cloneNode:h,insertStaticContent:s}=ve,a=(Y,J,ee,ne=null,se=null,oe=null,he=!1,le=null,de=!!J.dynamicChildren)=>{if(Y===J)return;Y&&!cc(Y,J)&&(ne=R(Y),Q(Y,se,oe,!0),Y=null),J.patchFlag===-2&&(de=!1,J.dynamicChildren=null);const{type:xe,ref:we,shapeFlag:be}=J;switch(xe){case Ap:l(Y,J,ee,ne);break;case fl:f(Y,J,ee,ne);break;case jf:Y==null&&d(J,ee,ne,he);break;case ul:L(Y,J,ee,ne,se,oe,he,le,de);break;default:be&1?c(Y,J,ee,ne,se,oe,he,le,de):be&6?M(Y,J,ee,ne,se,oe,he,le,de):(be&64||be&128)&&xe.process(Y,J,ee,ne,se,oe,he,le,de,U)}we!=null&&se&&kp(we,Y&&Y.ref,oe,J||Y,!J)},l=(Y,J,ee,ne)=>{if(Y==null)q(J.el=x(J.children),ee,ne);else{const se=J.el=Y.el;J.children!==Y.children&&e(se,J.children)}},f=(Y,J,ee,ne)=>{Y==null?q(J.el=y(J.children||""),ee,ne):J.el=Y.el},d=(Y,J,ee,ne)=>{[Y.el,Y.anchor]=s(Y.children,J,ee,ne)},v=({el:Y,anchor:J},ee,ne)=>{let se;for(;Y&&Y!==J;)se=i(Y),q(Y,ee,ne),Y=se;q(J,ee,ne)},m=({el:Y,anchor:J})=>{let ee;for(;Y&&Y!==J;)ee=i(Y),W(Y),Y=ee;W(J)},c=(Y,J,ee,ne,se,oe,he,le,de)=>{he=he||J.type==="svg",Y==null?b(J,ee,ne,se,oe,he,le,de):_(Y,J,se,oe,he,le,de)},b=(Y,J,ee,ne,se,oe,he,le)=>{let de,xe;const{type:we,props:be,shapeFlag:Ae,transition:fe,patchFlag:me,dirs:ke}=Y;if(Y.el&&h!==void 0&&me===-1)de=Y.el=h(Y.el);else{if(de=Y.el=p(Y.type,oe,be&&be.is,be),Ae&8?r(de,Y.children):Ae&16&&w(Y.children,de,null,ne,se,oe&&we!=="foreignObject",he,le),ke&&oc(Y,null,ne,"created"),be){for(const Me in be)Me!=="value"&&!kf(Me)&&o(de,Me,null,be[Me],oe,Y.children,ne,se,re);"value"in be&&o(de,"value",null,be.value),(xe=be.onVnodeBeforeMount)&&dl(xe,ne,Y)}g(de,Y,Y.scopeId,he,ne)}ke&&oc(Y,null,ne,"beforeMount");const Te=(!se||se&&!se.pendingBranch)&&fe&&!fe.persisted;Te&&fe.beforeEnter(de),q(de,J,ee),((xe=be&&be.onVnodeMounted)||Te||ke)&&ws(()=>{xe&&dl(xe,ne,Y),Te&&fe.enter(de),ke&&oc(Y,null,ne,"mounted")},se)},g=(Y,J,ee,ne,se)=>{if(ee&&n(Y,ee),ne)for(let oe=0;oe<ne.length;oe++)n(Y,ne[oe]);if(se){let oe=se.subTree;if(J===oe){const he=se.vnode;g(Y,he,he.scopeId,he.slotScopeIds,se.parent)}}},w=(Y,J,ee,ne,se,oe,he,le,de=0)=>{for(let xe=de;xe<Y.length;xe++){const we=Y[xe]=le?Nl(Y[xe]):pl(Y[xe]);a(null,we,J,ee,ne,se,oe,he,le)}},_=(Y,J,ee,ne,se,oe,he)=>{const le=J.el=Y.el;let{patchFlag:de,dynamicChildren:xe,dirs:we}=J;de|=Y.patchFlag&16;const be=Y.props||Ba,Ae=J.props||Ba;let fe;ee&&sc(ee,!1),(fe=Ae.onVnodeBeforeUpdate)&&dl(fe,ee,J,Y),we&&oc(J,Y,ee,"beforeUpdate"),ee&&sc(ee,!0);const me=se&&J.type!=="foreignObject";if(xe?T(Y.dynamicChildren,xe,le,ee,ne,me,oe):he||D(Y,J,le,null,ee,ne,me,oe,!1),de>0){if(de&16)k(le,J,be,Ae,ee,ne,se);else if(de&2&&be.class!==Ae.class&&o(le,"class",null,Ae.class,se),de&4&&o(le,"style",be.style,Ae.style,se),de&8){const ke=J.dynamicProps;for(let Te=0;Te<ke.length;Te++){const Me=ke[Te],Oe=be[Me],Fe=Ae[Me];(Fe!==Oe||Me==="value")&&o(le,Me,Oe,Fe,se,Y.children,ee,ne,re)}}de&1&&Y.children!==J.children&&r(le,J.children)}else!he&&xe==null&&k(le,J,be,Ae,ee,ne,se);((fe=Ae.onVnodeUpdated)||we)&&ws(()=>{fe&&dl(fe,ee,J,Y),we&&oc(J,Y,ee,"updated")},ne)},T=(Y,J,ee,ne,se,oe,he)=>{for(let le=0;le<J.length;le++){const de=Y[le],xe=J[le],we=de.el&&(de.type===ul||!cc(de,xe)||de.shapeFlag&(6|64))?t(de.el):ee;a(de,xe,we,null,ne,se,oe,he,!0)}},k=(Y,J,ee,ne,se,oe,he)=>{if(ee!==ne){for(const le in ne){if(kf(le))continue;const de=ne[le],xe=ee[le];de!==xe&&le!=="value"&&o(Y,le,xe,de,he,J.children,se,oe,re)}if(ee!==Ba)for(const le in ee)!kf(le)&&!(le in ne)&&o(Y,le,ee[le],null,he,J.children,se,oe,re);"value"in ne&&o(Y,"value",ee.value,ne.value)}},L=(Y,J,ee,ne,se,oe,he,le,de)=>{const xe=J.el=Y?Y.el:x(""),we=J.anchor=Y?Y.anchor:x("");let{patchFlag:be,dynamicChildren:Ae,slotScopeIds:fe}=J;fe&&(le=le?le.concat(fe):fe),Y==null?(q(xe,ee,ne),q(we,ee,ne),w(J.children,ee,we,se,oe,he,le,de)):be>0&&be&64&&Ae&&Y.dynamicChildren?(T(Y.dynamicChildren,Ae,ee,se,oe,he,le),(J.key!=null||se&&J===se.subTree)&&_m(Y,J,!0)):D(Y,J,ee,we,se,oe,he,le,de)},M=(Y,J,ee,ne,se,oe,he,le,de)=>{J.slotScopeIds=le,Y==null?J.shapeFlag&512?se.ctx.activate(J,ee,ne,he,de):I(J,ee,ne,se,oe,he,de):P(Y,J,de)},I=(Y,J,ee,ne,se,oe,he)=>{const le=Y.component=Uy(Y,ne,se);if(Ff(Y)&&(le.ctx.renderer=U),Hy(le),le.asyncDep){if(se&&se.registerDep(le,S),!Y.el){const de=le.subTree=hl(fl);f(null,de,J,ee)}return}S(le,Y,J,ee,se,oe,he)},P=(Y,J,ee)=>{const ne=J.component=Y.component;if(Xv(Y,J,ee))if(ne.asyncDep&&!ne.asyncResolved){E(ne,J,ee);return}else ne.next=J,Ky(ne.update),ne.update();else J.component=Y.component,J.el=Y.el,ne.vnode=J},S=(Y,J,ee,ne,se,oe,he)=>{const le=()=>{if(Y.isMounted){let{next:we,bu:be,u:Ae,parent:fe,vnode:me}=Y,ke=we,Te;sc(Y,!1),we?(we.el=me.el,E(Y,we,he)):we=me,be&&Mf(be),(Te=we.props&&we.props.onVnodeBeforeUpdate)&&dl(Te,fe,we,me),sc(Y,!0);const Me=dp(Y),Oe=Y.subTree;Y.subTree=Me,a(Oe,Me,t(Oe.el),R(Oe),Y,se,oe),we.el=Me.el,ke===null&&Jv(Y,Me.el),Ae&&ws(Ae,se),(Te=we.props&&we.props.onVnodeUpdated)&&ws(()=>dl(Te,fe,we,me),se)}else{let we;const{el:be,props:Ae}=J,{bm:fe,m:me,parent:ke}=Y,Te=xp(J);if(sc(Y,!1),fe&&Mf(fe),!Te&&(we=Ae&&Ae.onVnodeBeforeMount)&&dl(we,ke,J),sc(Y,!0),be&&j){const Me=()=>{Y.subTree=dp(Y),j(be,Y.subTree,Y,se,null)};Te?J.type.__asyncLoader().then(()=>!Y.isUnmounted&&Me()):Me()}else{const Me=Y.subTree=dp(Y);a(null,Me,ee,ne,Y,se,oe),J.el=Me.el}if(me&&ws(me,se),!Te&&(we=Ae&&Ae.onVnodeMounted)){const Me=J;ws(()=>dl(we,ke,Me),se)}J.shapeFlag&256&&Y.a&&ws(Y.a,se),Y.isMounted=!0,J=ee=ne=null}},de=Y.effect=new np(le,()=>Pm(Y.update),Y.scope),xe=Y.update=de.run.bind(de);xe.id=Y.uid,sc(Y,!0),xe()},E=(Y,J,ee)=>{J.component=Y;const ne=Y.vnode.props;Y.vnode=J,Y.next=null,xy(Y,J.props,ne,ee),wy(Y,J.children,ee),Yc(),Ip(void 0,Y.update),ic()},D=(Y,J,ee,ne,se,oe,he,le,de=!1)=>{const xe=Y&&Y.children,we=Y?Y.shapeFlag:0,be=J.children,{patchFlag:Ae,shapeFlag:fe}=J;if(Ae>0){if(Ae&128){H(xe,be,ee,ne,se,oe,he,le,de);return}else if(Ae&256){F(xe,be,ee,ne,se,oe,he,le,de);return}}fe&8?(we&16&&re(xe,se,oe),be!==xe&&r(ee,be)):we&16?fe&16?H(xe,be,ee,ne,se,oe,he,le,de):re(xe,se,oe,!0):(we&8&&r(ee,""),fe&16&&w(be,ee,ne,se,oe,he,le,de))},F=(Y,J,ee,ne,se,oe,he,le,de)=>{Y=Y||Uc,J=J||Uc;const xe=Y.length,we=J.length,be=Math.min(xe,we);let Ae;for(Ae=0;Ae<be;Ae++){const fe=J[Ae]=de?Nl(J[Ae]):pl(J[Ae]);a(Y[Ae],fe,ee,null,se,oe,he,le,de)}xe>we?re(Y,se,oe,!0,!1,be):w(J,ee,ne,se,oe,he,le,de,be)},H=(Y,J,ee,ne,se,oe,he,le,de)=>{let xe=0;const we=J.length;let be=Y.length-1,Ae=we-1;for(;xe<=be&&xe<=Ae;){const fe=Y[xe],me=J[xe]=de?Nl(J[xe]):pl(J[xe]);if(cc(fe,me))a(fe,me,ee,null,se,oe,he,le,de);else break;xe++}for(;xe<=be&&xe<=Ae;){const fe=Y[be],me=J[Ae]=de?Nl(J[Ae]):pl(J[Ae]);if(cc(fe,me))a(fe,me,ee,null,se,oe,he,le,de);else break;be--,Ae--}if(xe>be){if(xe<=Ae){const fe=Ae+1,me=fe<we?J[fe].el:ne;for(;xe<=Ae;)a(null,J[xe]=de?Nl(J[xe]):pl(J[xe]),ee,me,se,oe,he,le,de),xe++}}else if(xe>Ae)for(;xe<=be;)Q(Y[xe],se,oe,!0),xe++;else{const fe=xe,me=xe,ke=new Map;for(xe=me;xe<=Ae;xe++){const Ue=J[xe]=de?Nl(J[xe]):pl(J[xe]);Ue.key!=null&&ke.set(Ue.key,xe)}let Te,Me=0;const Oe=Ae-me+1;let Fe=!1,qe=0;const et=new Array(Oe);for(xe=0;xe<Oe;xe++)et[xe]=0;for(xe=fe;xe<=be;xe++){const Ue=Y[xe];if(Me>=Oe){Q(Ue,se,oe,!0);continue}let We;if(Ue.key!=null)We=ke.get(Ue.key);else for(Te=me;Te<=Ae;Te++)if(et[Te-me]===0&&cc(Ue,J[Te])){We=Te;break}We===void 0?Q(Ue,se,oe,!0):(et[We-me]=xe+1,We>=qe?qe=We:Fe=!0,a(Ue,J[We],ee,null,se,oe,he,le,de),Me++)}const ze=Fe?Sy(et):Uc;for(Te=ze.length-1,xe=Oe-1;xe>=0;xe--){const Ue=me+xe,We=J[Ue],Ze=Ue+1<we?J[Ue+1].el:ne;et[xe]===0?a(null,We,ee,Ze,se,oe,he,le,de):Fe&&(Te<0||xe!==ze[Te]?V(We,ee,Ze,2):Te--)}}},V=(Y,J,ee,ne,se=null)=>{const{el:oe,type:he,transition:le,children:de,shapeFlag:xe}=Y;if(xe&6){V(Y.component.subTree,J,ee,ne);return}if(xe&128){Y.suspense.move(J,ee,ne);return}if(xe&64){he.move(Y,J,ee,U);return}if(he===ul){q(oe,J,ee);for(let be=0;be<de.length;be++)V(de[be],J,ee,ne);q(Y.anchor,J,ee);return}if(he===jf){v(Y,J,ee);return}if(ne!==2&&xe&1&&le)if(ne===0)le.beforeEnter(oe),q(oe,J,ee),ws(()=>le.enter(oe),se);else{const{leave:be,delayLeave:Ae,afterLeave:fe}=le,me=()=>q(oe,J,ee),ke=()=>{be(oe,()=>{me(),fe&&fe()})};Ae?Ae(oe,me,ke):ke()}else q(oe,J,ee)},Q=(Y,J,ee,ne=!1,se=!1)=>{const{type:oe,props:he,ref:le,children:de,dynamicChildren:xe,shapeFlag:we,patchFlag:be,dirs:Ae}=Y;if(le!=null&&kp(le,null,ee,Y,!0),we&256){J.ctx.deactivate(Y);return}const fe=we&1&&Ae,me=!xp(Y);let ke;if(me&&(ke=he&&he.onVnodeBeforeUnmount)&&dl(ke,J,Y),we&6)$(Y.component,ee,ne);else{if(we&128){Y.suspense.unmount(ee,ne);return}fe&&oc(Y,null,J,"beforeUnmount"),we&64?Y.type.remove(Y,J,ee,se,U,ne):xe&&(oe!==ul||be>0&&be&64)?re(xe,J,ee,!1,!0):(oe===ul&&be&(128|256)||!se&&we&16)&&re(de,J,ee),ne&&K(Y)}(me&&(ke=he&&he.onVnodeUnmounted)||fe)&&ws(()=>{ke&&dl(ke,J,Y),fe&&oc(Y,null,J,"unmounted")},ee)},K=Y=>{const{type:J,el:ee,anchor:ne,transition:se}=Y;if(J===ul){Z(ee,ne);return}if(J===jf){m(Y);return}const oe=()=>{W(ee),se&&!se.persisted&&se.afterLeave&&se.afterLeave()};if(Y.shapeFlag&1&&se&&!se.persisted){const{leave:he,delayLeave:le}=se,de=()=>he(ee,oe);le?le(Y.el,oe,de):de()}else oe()},Z=(Y,J)=>{let ee;for(;Y!==J;)ee=i(Y),W(Y),Y=ee;W(J)},$=(Y,J,ee)=>{const{bum:ne,scope:se,update:oe,subTree:he,um:le}=Y;ne&&Mf(ne),se.stop(),oe&&(oe.active=!1,Q(he,Y,J,ee)),le&&ws(le,J),ws(()=>{Y.isUnmounted=!0},J),J&&J.pendingBranch&&!J.isUnmounted&&Y.asyncDep&&!Y.asyncResolved&&Y.suspenseId===J.pendingId&&(J.deps--,J.deps===0&&J.resolve())},re=(Y,J,ee,ne=!1,se=!1,oe=0)=>{for(let he=oe;he<Y.length;he++)Q(Y[he],J,ee,ne,se)},R=Y=>Y.shapeFlag&6?R(Y.component.subTree):Y.shapeFlag&128?Y.suspense.next():i(Y.anchor||Y.el),N=(Y,J,ee)=>{Y==null?J._vnode&&Q(J._vnode,null,null,!0):a(J._vnode||null,Y,J,null,null,null,ee),Dm(),J._vnode=Y},U={p:a,um:Q,m:V,r:K,mt:I,mc:w,pc:D,pbc:T,n:R,o:ve};let te,j;return Ce&&([te,j]=Ce(U)),{render:N,hydrate:te,createApp:ky(N,te)}}function sc({effect:ve,update:Ce},u){ve.allowRecurse=Ce.allowRecurse=u}function _m(ve,Ce,u=!1){const q=ve.children,W=Ce.children;if(zi(q)&&zi(W))for(let o=0;o<q.length;o++){const p=q[o];let x=W[o];x.shapeFlag&1&&!x.dynamicChildren&&((x.patchFlag<=0||x.patchFlag===32)&&(x=W[o]=Nl(W[o]),x.el=p.el),u||_m(p,x))}}function Sy(ve){const Ce=ve.slice(),u=[0];let q,W,o,p,x;const y=ve.length;for(q=0;q<y;q++){const e=ve[q];if(e!==0){if(W=u[u.length-1],ve[W]<e){Ce[q]=W,u.push(q);continue}for(o=0,p=u.length-1;o<p;)x=o+p>>1,ve[u[x]]<e?o=x+1:p=x;e<ve[u[o]]&&(o>0&&(Ce[q]=u[o-1]),u[o]=q)}}for(o=u.length,p=u[o-1];o-- >0;)u[o]=p,p=Ce[p];return u}const Ey=ve=>ve.__isTeleport,Ly=Symbol(),ul=Symbol(void 0),Ap=Symbol(void 0),fl=Symbol(void 0),jf=Symbol(void 0),Lu=[];let lc=null;function Cy(ve=!1){Lu.push(lc=ve?null:[])}function Py(){Lu.pop(),lc=Lu[Lu.length-1]||null}let Uf=1;function wm(ve){Uf+=ve}function Tm(ve){return ve.dynamicChildren=Uf>0?lc||Uc:null,Py(),Uf>0&&lc&&lc.push(ve),ve}function Yb(ve,Ce,u,q,W,o){return Tm(Am(ve,Ce,u,q,W,o,!0))}function Iy(ve,Ce,u,q,W){return Tm(hl(ve,Ce,u,q,W,!0))}function Oy(ve){return ve?ve.__v_isVNode===!0:!1}function cc(ve,Ce){return ve.type===Ce.type&&ve.key===Ce.key}const Vf="__vInternal",km=({key:ve})=>ve!=null?ve:null,Hf=({ref:ve,ref_key:Ce,ref_for:u})=>ve!=null?os(ve)||ms(ve)||Qi(ve)?{i:tl,r:ve,k:Ce,f:!!u}:ve:null;function Am(ve,Ce=null,u=null,q=0,W=null,o=ve===ul?0:1,p=!1,x=!1){const y={__v_isVNode:!0,__v_skip:!0,type:ve,props:Ce,key:Ce&&km(Ce),ref:Ce&&Hf(Ce),scopeId:zf,slotScopeIds:null,children:u,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:q,dynamicProps:W,dynamicChildren:null,appContext:null};return x?(Mp(y,u),o&128&&ve.normalize(y)):u&&(y.shapeFlag|=os(u)?8:16),Uf>0&&!p&&lc&&(y.patchFlag>0||o&6)&&y.patchFlag!==32&&lc.push(y),y}const hl=Dy;function Dy(ve,Ce=null,u=null,q=0,W=null,o=!1){if((!ve||ve===Ly)&&(ve=fl),Oy(ve)){const x=Zc(ve,Ce,!0);return u&&Mp(x,u),x}if(Wy(ve)&&(ve=ve.__vccOpts),Ce){Ce=zy(Ce);let{class:x,style:y}=Ce;x&&!os(x)&&(Ce.class=Yh(x)),Fo(y)&&(W0(y)&&!zi(y)&&(y=as({},y)),Ce.style=Gh(y))}const p=os(ve)?1:Kv(ve)?128:Ey(ve)?64:Fo(ve)?4:Qi(ve)?2:0;return Am(ve,Ce,u,q,W,p,o,!0)}function zy(ve){return ve?W0(ve)||Vf in ve?as({},ve):ve:null}function Zc(ve,Ce,u=!1){const{props:q,ref:W,patchFlag:o,children:p}=ve,x=Ce?Fy(q||{},Ce):q;return{__v_isVNode:!0,__v_skip:!0,type:ve.type,props:x,key:x&&km(x),ref:Ce&&Ce.ref?u&&W?zi(W)?W.concat(Hf(Ce)):[W,Hf(Ce)]:Hf(Ce):W,scopeId:ve.scopeId,slotScopeIds:ve.slotScopeIds,children:p,target:ve.target,targetAnchor:ve.targetAnchor,staticCount:ve.staticCount,shapeFlag:ve.shapeFlag,patchFlag:Ce&&ve.type!==ul?o===-1?16:o|16:o,dynamicProps:ve.dynamicProps,dynamicChildren:ve.dynamicChildren,appContext:ve.appContext,dirs:ve.dirs,transition:ve.transition,component:ve.component,suspense:ve.suspense,ssContent:ve.ssContent&&Zc(ve.ssContent),ssFallback:ve.ssFallback&&Zc(ve.ssFallback),el:ve.el,anchor:ve.anchor}}function Ry(ve=" ",Ce=0){return hl(Ap,null,ve,Ce)}function Wb(ve,Ce){const u=hl(jf,null,ve);return u.staticCount=Ce,u}function Zb(ve="",Ce=!1){return Ce?(Cy(),Iy(fl,null,ve)):hl(fl,null,ve)}function pl(ve){return ve==null||typeof ve=="boolean"?hl(fl):zi(ve)?hl(ul,null,ve.slice()):typeof ve=="object"?Nl(ve):hl(Ap,null,String(ve))}function Nl(ve){return ve.el===null||ve.memo?ve:Zc(ve)}function Mp(ve,Ce){let u=0;const{shapeFlag:q}=ve;if(Ce==null)Ce=null;else if(zi(Ce))u=16;else if(typeof Ce=="object")if(q&(1|64)){const W=Ce.default;W&&(W._c&&(W._d=!1),Mp(ve,W()),W._c&&(W._d=!0));return}else{u=32;const W=Ce._;!W&&!(Vf in Ce)?Ce._ctx=tl:W===3&&tl&&(tl.slots._===1?Ce._=1:(Ce._=2,ve.patchFlag|=1024))}else Qi(Ce)?(Ce={default:Ce,_ctx:tl},u=32):(Ce=String(Ce),q&64?(u=16,Ce=[Ry(Ce)]):u=8);ve.children=Ce,ve.shapeFlag|=u}function Fy(...ve){const Ce={};for(let u=0;u<ve.length;u++){const q=ve[u];for(const W in q)if(W==="class")Ce.class!==q.class&&(Ce.class=Yh([Ce.class,q.class]));else if(W==="style")Ce.style=Gh([Ce.style,q.style]);else if(_f(W)){const o=Ce[W],p=q[W];o!==p&&!(zi(o)&&o.includes(p))&&(Ce[W]=o?[].concat(o,p):p)}else W!==""&&(Ce[W]=q[W])}return Ce}function dl(ve,Ce,u,q=null){Bs(ve,Ce,7,[u,q])}const Sp=ve=>ve?Mm(ve)?Ep(ve)||ve.proxy:Sp(ve.parent):null,qf=as(Object.create(null),{$:ve=>ve,$el:ve=>ve.vnode.el,$data:ve=>ve.data,$props:ve=>ve.props,$attrs:ve=>ve.attrs,$slots:ve=>ve.slots,$refs:ve=>ve.refs,$parent:ve=>Sp(ve.parent),$root:ve=>Sp(ve.root),$emit:ve=>ve.emit,$options:ve=>cm(ve),$forceUpdate:ve=>()=>Pm(ve.update),$nextTick:ve=>Xy.bind(ve.proxy),$watch:ve=>ex.bind(ve)}),By={get({_:ve},Ce){const{ctx:u,setupState:q,data:W,props:o,accessCache:p,type:x,appContext:y}=ve;let e;if(Ce[0]!=="$"){const n=p[Ce];if(n!==void 0)switch(n){case 1:return q[Ce];case 2:return W[Ce];case 4:return u[Ce];case 3:return o[Ce]}else{if(q!==Ba&&ha(q,Ce))return p[Ce]=1,q[Ce];if(W!==Ba&&ha(W,Ce))return p[Ce]=2,W[Ce];if((e=ve.propsOptions[0])&&ha(e,Ce))return p[Ce]=3,o[Ce];if(u!==Ba&&ha(u,Ce))return p[Ce]=4,u[Ce];bp&&(p[Ce]=0)}}const r=qf[Ce];let t,i;if(r)return Ce==="$attrs"&&Ls(ve,"get",Ce),r(ve);if((t=x.__cssModules)&&(t=t[Ce]))return t;if(u!==Ba&&ha(u,Ce))return p[Ce]=4,u[Ce];if(i=y.config.globalProperties,ha(i,Ce))return i[Ce]},set({_:ve},Ce,u){const{data:q,setupState:W,ctx:o}=ve;if(W!==Ba&&ha(W,Ce))W[Ce]=u;else if(q!==Ba&&ha(q,Ce))q[Ce]=u;else if(ha(ve.props,Ce))return!1;return Ce[0]==="$"&&Ce.slice(1)in ve?!1:(o[Ce]=u,!0)},has({_:{data:ve,setupState:Ce,accessCache:u,ctx:q,appContext:W,propsOptions:o}},p){let x;return!!u[p]||ve!==Ba&&ha(ve,p)||Ce!==Ba&&ha(Ce,p)||(x=o[0])&&ha(x,p)||ha(q,p)||ha(qf,p)||ha(W.config.globalProperties,p)}},Ny=bm();let jy=0;function Uy(ve,Ce,u){const q=ve.type,W=(Ce?Ce.appContext:ve.appContext)||Ny,o={uid:jy++,vnode:ve,type:q,parent:Ce,appContext:W,root:null,next:null,subTree:null,effect:null,update:null,scope:new uv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:Ce?Ce.provides:Object.create(W.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:hm(q,W),emitsOptions:$0(q,W),emit:null,emitted:null,propsDefaults:Ba,inheritAttrs:q.inheritAttrs,ctx:Ba,data:Ba,props:Ba,attrs:Ba,slots:Ba,refs:Ba,setupState:Ba,setupContext:null,suspense:u,suspenseId:u?u.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=Ce?Ce.root:o,o.emit=Gv.bind(null,o),ve.ce&&ve.ce(o),o}let $o=null;const Vy=()=>$o||tl,Xc=ve=>{$o=ve,ve.scope.on()},uc=()=>{$o&&$o.scope.off(),$o=null};function Mm(ve){return ve.vnode.shapeFlag&4}let Gf=!1;function Hy(ve,Ce=!1){Gf=Ce;const{props:u,children:q}=ve.vnode,W=Mm(ve);yy(ve,u,W,Ce),_y(ve,q);const o=W?qy(ve,Ce):void 0;return Gf=!1,o}function qy(ve,Ce){const u=ve.type;ve.accessCache=Object.create(null),ve.proxy=Z0(new Proxy(ve.ctx,By));const{setup:q}=u;if(q){const W=ve.setupContext=q.length>1?Yy(ve):null;Xc(ve),Yc();const o=jl(q,ve,0,[ve.props,W]);if(ic(),uc(),A0(o)){if(o.then(uc,uc),Ce)return o.then(p=>{Sm(ve,p,Ce)}).catch(p=>{Yf(p,ve,0)});ve.asyncDep=o}else Sm(ve,o,Ce)}else Lm(ve,Ce)}function Sm(ve,Ce,u){Qi(Ce)?ve.type.__ssrInlineRender?ve.ssrRender=Ce:ve.render=Ce:Fo(Ce)&&(ve.setupState=K0(Ce)),Lm(ve,u)}let Em;function Lm(ve,Ce,u){const q=ve.type;if(!ve.render){if(!Ce&&Em&&!q.render){const W=q.template;if(W){const{isCustomElement:o,compilerOptions:p}=ve.appContext.config,{delimiters:x,compilerOptions:y}=q,e=as(as({isCustomElement:o,delimiters:x},p),y);q.render=Em(W,e)}}ve.render=q.render||el}Xc(ve),Yc(),py(ve),ic(),uc()}function Gy(ve){return new Proxy(ve.attrs,{get(Ce,u){return Ls(ve,"get","$attrs"),Ce[u]}})}function Yy(ve){const Ce=q=>{ve.exposed=q||{}};let u;return{get attrs(){return u||(u=Gy(ve))},slots:ve.slots,emit:ve.emit,expose:Ce}}function Ep(ve){if(ve.exposed)return ve.exposeProxy||(ve.exposeProxy=new Proxy(K0(Z0(ve.exposed)),{get(Ce,u){if(u in Ce)return Ce[u];if(u in qf)return qf[u](ve)}}))}function Wy(ve){return Qi(ve)&&"__vccOpts"in ve}function jl(ve,Ce,u,q){let W;try{W=q?ve(...q):ve()}catch(o){Yf(o,Ce,u)}return W}function Bs(ve,Ce,u,q){if(Qi(ve)){const o=jl(ve,Ce,u,q);return o&&A0(o)&&o.catch(p=>{Yf(p,Ce,u)}),o}const W=[];for(let o=0;o<ve.length;o++)W.push(Bs(ve[o],Ce,u,q));return W}function Yf(ve,Ce,u,q=!0){const W=Ce?Ce.vnode:null;if(Ce){let o=Ce.parent;const p=Ce.proxy,x=u;for(;o;){const e=o.ec;if(e){for(let r=0;r<e.length;r++)if(e[r](ve,p,x)===!1)return}o=o.parent}const y=Ce.appContext.config.errorHandler;if(y){jl(y,null,10,[ve,p,x]);return}}Zy(ve,u,W,q)}function Zy(ve,Ce,u,q=!0){console.error(ve)}let Wf=!1,Lp=!1;const Cs=[];let Ml=0;const Cu=[];let Pu=null,Jc=0;const Iu=[];let Ul=null,Kc=0;const Cm=Promise.resolve();let Cp=null,Pp=null;function Xy(ve){const Ce=Cp||Cm;return ve?Ce.then(this?ve.bind(this):ve):Ce}function Jy(ve){let Ce=Ml+1,u=Cs.length;for(;Ce<u;){const q=Ce+u>>>1;Ou(Cs[q])<ve?Ce=q+1:u=q}return Ce}function Pm(ve){(!Cs.length||!Cs.includes(ve,Wf&&ve.allowRecurse?Ml+1:Ml))&&ve!==Pp&&(ve.id==null?Cs.push(ve):Cs.splice(Jy(ve.id),0,ve),Im())}function Im(){!Wf&&!Lp&&(Lp=!0,Cp=Cm.then(zm))}function Ky(ve){const Ce=Cs.indexOf(ve);Ce>Ml&&Cs.splice(Ce,1)}function Om(ve,Ce,u,q){zi(ve)?u.push(...ve):(!Ce||!Ce.includes(ve,ve.allowRecurse?q+1:q))&&u.push(ve),Im()}function $y(ve){Om(ve,Pu,Cu,Jc)}function Qy(ve){Om(ve,Ul,Iu,Kc)}function Ip(ve,Ce=null){if(Cu.length){for(Pp=Ce,Pu=[...new Set(Cu)],Cu.length=0,Jc=0;Jc<Pu.length;Jc++)Pu[Jc]();Pu=null,Jc=0,Pp=null,Ip(ve,Ce)}}function Dm(ve){if(Iu.length){const Ce=[...new Set(Iu)];if(Iu.length=0,Ul){Ul.push(...Ce);return}for(Ul=Ce,Ul.sort((u,q)=>Ou(u)-Ou(q)),Kc=0;Kc<Ul.length;Kc++)Ul[Kc]();Ul=null,Kc=0}}const Ou=ve=>ve.id==null?1/0:ve.id;function zm(ve){Lp=!1,Wf=!0,Ip(ve),Cs.sort((u,q)=>Ou(u)-Ou(q));const Ce=el;try{for(Ml=0;Ml<Cs.length;Ml++){const u=Cs[Ml];u&&u.active!==!1&&jl(u,null,14)}}finally{Ml=0,Cs.length=0,Dm(),Wf=!1,Cp=null,(Cs.length||Cu.length||Iu.length)&&zm(ve)}}const Rm={};function Op(ve,Ce,u){return Fm(ve,Ce,u)}function Fm(ve,Ce,{immediate:u,deep:q,flush:W,onTrack:o,onTrigger:p}=Ba){const x=$o;let y,e=!1,r=!1;if(ms(ve)?(y=()=>ve.value,e=!!ve._shallow):Wc(ve)?(y=()=>ve,q=!0):zi(ve)?(r=!0,e=ve.some(Wc),y=()=>ve.map(l=>{if(ms(l))return l.value;if(Wc(l))return fc(l);if(Qi(l))return jl(l,x,2)})):Qi(ve)?Ce?y=()=>jl(ve,x,2):y=()=>{if(!(x&&x.isUnmounted))return t&&t(),Bs(ve,x,3,[i])}:y=el,Ce&&q){const l=y;y=()=>fc(l())}let t,i=l=>{t=a.onStop=()=>{jl(l,x,4)}};if(Gf)return i=el,Ce?u&&Bs(Ce,x,3,[y(),r?[]:void 0,i]):y(),el;let n=r?[]:Rm;const h=()=>{if(!!a.active)if(Ce){const l=a.run();(q||e||(r?l.some((f,d)=>Au(f,n[d])):Au(l,n)))&&(t&&t(),Bs(Ce,x,3,[l,n===Rm?void 0:n,i]),n=l)}else a.run()};h.allowRecurse=!!Ce;let s;W==="sync"?s=h:W==="post"?s=()=>ws(h,x&&x.suspense):s=()=>{!x||x.isMounted?$y(h):h()};const a=new np(y,s);return Ce?u?h():n=a.run():W==="post"?ws(a.run.bind(a),x&&x.suspense):a.run(),()=>{a.stop(),x&&x.scope&&Zh(x.scope.effects,a)}}function ex(ve,Ce,u){const q=this.proxy,W=os(ve)?ve.includes(".")?Bm(q,ve):()=>q[ve]:ve.bind(q,q);let o;Qi(Ce)?o=Ce:(o=Ce.handler,u=Ce);const p=$o;Xc(this);const x=Fm(W,o.bind(q),u);return p?Xc(p):uc(),x}function Bm(ve,Ce){const u=Ce.split(".");return()=>{let q=ve;for(let W=0;W<u.length&&q;W++)q=q[u[W]];return q}}function fc(ve,Ce){if(!Fo(ve)||ve.__v_skip||(Ce=Ce||new Set,Ce.has(ve)))return ve;if(Ce.add(ve),ms(ve))fc(ve.value,Ce);else if(zi(ve))for(let u=0;u<ve.length;u++)fc(ve[u],Ce);else if(wf(ve)||Vc(ve))ve.forEach(u=>{fc(u,Ce)});else if(S0(ve))for(const u in ve)fc(ve[u],Ce);return ve}const tx="3.2.26",rx="http://www.w3.org/2000/svg",$c=typeof document!="undefined"?document:null,Nm=new Map,nx={insert:(ve,Ce,u)=>{Ce.insertBefore(ve,u||null)},remove:ve=>{const Ce=ve.parentNode;Ce&&Ce.removeChild(ve)},createElement:(ve,Ce,u,q)=>{const W=Ce?$c.createElementNS(rx,ve):$c.createElement(ve,u?{is:u}:void 0);return ve==="select"&&q&&q.multiple!=null&&W.setAttribute("multiple",q.multiple),W},createText:ve=>$c.createTextNode(ve),createComment:ve=>$c.createComment(ve),setText:(ve,Ce)=>{ve.nodeValue=Ce},setElementText:(ve,Ce)=>{ve.textContent=Ce},parentNode:ve=>ve.parentNode,nextSibling:ve=>ve.nextSibling,querySelector:ve=>$c.querySelector(ve),setScopeId(ve,Ce){ve.setAttribute(Ce,"")},cloneNode(ve){const Ce=ve.cloneNode(!0);return"_value"in ve&&(Ce._value=ve._value),Ce},insertStaticContent(ve,Ce,u,q){const W=u?u.previousSibling:Ce.lastChild;let o=Nm.get(ve);if(!o){const p=$c.createElement("template");if(p.innerHTML=q?`<svg>${ve}</svg>`:ve,o=p.content,q){const x=o.firstChild;for(;x.firstChild;)o.appendChild(x.firstChild);o.removeChild(x)}Nm.set(ve,o)}return Ce.insertBefore(o.cloneNode(!0),u),[W?W.nextSibling:Ce.firstChild,u?u.previousSibling:Ce.lastChild]}};function ix(ve,Ce,u){const q=ve._vtc;q&&(Ce=(Ce?[Ce,...q]:[...q]).join(" ")),Ce==null?ve.removeAttribute("class"):u?ve.setAttribute("class",Ce):ve.className=Ce}function ax(ve,Ce,u){const q=ve.style,W=os(u);if(u&&!W){for(const o in u)Dp(q,o,u[o]);if(Ce&&!os(Ce))for(const o in Ce)u[o]==null&&Dp(q,o,"")}else{const o=q.display;W?Ce!==u&&(q.cssText=u):Ce&&ve.removeAttribute("style"),"_vod"in ve&&(q.display=o)}}const jm=/\s*!important$/;function Dp(ve,Ce,u){if(zi(u))u.forEach(q=>Dp(ve,Ce,q));else if(Ce.startsWith("--"))ve.setProperty(Ce,u);else{const q=ox(ve,Ce);jm.test(u)?ve.setProperty(qc(q),u.replace(jm,""),"important"):ve[q]=u}}const Um=["Webkit","Moz","ms"],zp={};function ox(ve,Ce){const u=zp[Ce];if(u)return u;let q=Hc(Ce);if(q!=="filter"&&q in ve)return zp[Ce]=q;q=E0(q);for(let W=0;W<Um.length;W++){const o=Um[W]+q;if(o in ve)return zp[Ce]=o}return Ce}const Vm="http://www.w3.org/1999/xlink";function sx(ve,Ce,u,q,W){if(q&&Ce.startsWith("xlink:"))u==null?ve.removeAttributeNS(Vm,Ce.slice(6,Ce.length)):ve.setAttributeNS(Vm,Ce,u);else{const o=$1(Ce);u==null||o&&!_0(u)?ve.removeAttribute(Ce):ve.setAttribute(Ce,o?"":u)}}function lx(ve,Ce,u,q,W,o,p){if(Ce==="innerHTML"||Ce==="textContent"){q&&p(q,W,o),ve[Ce]=u==null?"":u;return}if(Ce==="value"&&ve.tagName!=="PROGRESS"&&!ve.tagName.includes("-")){ve._value=u;const x=u==null?"":u;(ve.value!==x||ve.tagName==="OPTION")&&(ve.value=x),u==null&&ve.removeAttribute(Ce);return}if(u===""||u==null){const x=typeof ve[Ce];if(x==="boolean"){ve[Ce]=_0(u);return}else if(u==null&&x==="string"){ve[Ce]="",ve.removeAttribute(Ce);return}else if(x==="number"){try{ve[Ce]=0}catch{}ve.removeAttribute(Ce);return}}try{ve[Ce]=u}catch{}}let Zf=Date.now,Hm=!1;if(typeof window!="undefined"){Zf()>document.createEvent("Event").timeStamp&&(Zf=()=>performance.now());const ve=navigator.userAgent.match(/firefox\/(\d+)/i);Hm=!!(ve&&Number(ve[1])<=53)}let Rp=0;const cx=Promise.resolve(),ux=()=>{Rp=0},fx=()=>Rp||(cx.then(ux),Rp=Zf());function hc(ve,Ce,u,q){ve.addEventListener(Ce,u,q)}function hx(ve,Ce,u,q){ve.removeEventListener(Ce,u,q)}function px(ve,Ce,u,q,W=null){const o=ve._vei||(ve._vei={}),p=o[Ce];if(q&&p)p.value=q;else{const[x,y]=dx(Ce);if(q){const e=o[Ce]=mx(q,W);hc(ve,x,e,y)}else p&&(hx(ve,x,p,y),o[Ce]=void 0)}}const qm=/(?:Once|Passive|Capture)$/;function dx(ve){let Ce;if(qm.test(ve)){Ce={};let u;for(;u=ve.match(qm);)ve=ve.slice(0,ve.length-u[0].length),Ce[u[0].toLowerCase()]=!0}return[qc(ve.slice(2)),Ce]}function mx(ve,Ce){const u=q=>{const W=q.timeStamp||Zf();(Hm||W>=u.attached-1)&&Bs(gx(q,u.value),Ce,5,[q])};return u.value=ve,u.attached=fx(),u}function gx(ve,Ce){if(zi(Ce)){const u=ve.stopImmediatePropagation;return ve.stopImmediatePropagation=()=>{u.call(ve),ve._stopped=!0},Ce.map(q=>W=>!W._stopped&&q(W))}else return Ce}const Gm=/^on[a-z]/,vx=(ve,Ce,u,q,W=!1,o,p,x,y)=>{Ce==="class"?ix(ve,q,W):Ce==="style"?ax(ve,u,q):_f(Ce)?Wh(Ce)||px(ve,Ce,u,q,p):(Ce[0]==="."?(Ce=Ce.slice(1),!0):Ce[0]==="^"?(Ce=Ce.slice(1),!1):yx(ve,Ce,q,W))?lx(ve,Ce,q,o,p,x,y):(Ce==="true-value"?ve._trueValue=q:Ce==="false-value"&&(ve._falseValue=q),sx(ve,Ce,q,W))};function yx(ve,Ce,u,q){return q?!!(Ce==="innerHTML"||Ce==="textContent"||Ce in ve&&Gm.test(Ce)&&Qi(u)):Ce==="spellcheck"||Ce==="draggable"||Ce==="form"||Ce==="list"&&ve.tagName==="INPUT"||Ce==="type"&&ve.tagName==="TEXTAREA"||Gm.test(Ce)&&os(u)?!1:Ce in ve}const xx={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};ry.props;const Xf=ve=>{const Ce=ve.props["onUpdate:modelValue"];return zi(Ce)?u=>Mf(Ce,u):Ce};function bx(ve){ve.target.composing=!0}function Ym(ve){const Ce=ve.target;Ce.composing&&(Ce.composing=!1,_x(Ce,"input"))}function _x(ve,Ce){const u=document.createEvent("HTMLEvents");u.initEvent(Ce,!0,!0),ve.dispatchEvent(u)}const Xb={created(ve,{modifiers:{lazy:Ce,trim:u,number:q}},W){ve._assign=Xf(W);const o=q||W.props&&W.props.type==="number";hc(ve,Ce?"change":"input",p=>{if(p.target.composing)return;let x=ve.value;u?x=x.trim():o&&(x=$h(x)),ve._assign(x)}),u&&hc(ve,"change",()=>{ve.value=ve.value.trim()}),Ce||(hc(ve,"compositionstart",bx),hc(ve,"compositionend",Ym),hc(ve,"change",Ym))},mounted(ve,{value:Ce}){ve.value=Ce==null?"":Ce},beforeUpdate(ve,{value:Ce,modifiers:{lazy:u,trim:q,number:W}},o){if(ve._assign=Xf(o),ve.composing||document.activeElement===ve&&(u||q&&ve.value.trim()===Ce||(W||ve.type==="number")&&$h(ve.value)===Ce))return;const p=Ce==null?"":Ce;ve.value!==p&&(ve.value=p)}},Jb={deep:!0,created(ve,Ce,u){ve._assign=Xf(u),hc(ve,"change",()=>{const q=ve._modelValue,W=wx(ve),o=ve.checked,p=ve._assign;if(zi(q)){const x=w0(q,W),y=x!==-1;if(o&&!y)p(q.concat(W));else if(!o&&y){const e=[...q];e.splice(x,1),p(e)}}else if(wf(q)){const x=new Set(q);o?x.add(W):x.delete(W),p(x)}else p(Zm(ve,o))})},mounted:Wm,beforeUpdate(ve,Ce,u){ve._assign=Xf(u),Wm(ve,Ce,u)}};function Wm(ve,{value:Ce,oldValue:u},q){ve._modelValue=Ce,zi(Ce)?ve.checked=w0(Ce,q.props.value)>-1:wf(Ce)?ve.checked=Ce.has(q.props.value):Ce!==u&&(ve.checked=bf(Ce,Zm(ve,!0)))}function wx(ve){return"_value"in ve?ve._value:ve.value}function Zm(ve,Ce){const u=Ce?"_trueValue":"_falseValue";return u in ve?ve[u]:Ce}const Tx=as({patchProp:vx},nx);let Xm;function kx(){return Xm||(Xm=Ay(Tx))}const Kb=(...ve)=>{const Ce=kx().createApp(...ve),{mount:u}=Ce;return Ce.mount=q=>{const W=Ax(q);if(!W)return;const o=Ce._component;!Qi(o)&&!o.render&&!o.template&&(o.template=W.innerHTML),W.innerHTML="";const p=u(W,!1,W instanceof SVGElement);return W instanceof Element&&(W.removeAttribute("v-cloak"),W.setAttribute("data-v-app","")),p},Ce};function Ax(ve){return os(ve)?document.querySelector(ve):ve}var Ga=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Mx(ve){return ve&&ve.__esModule&&Object.prototype.hasOwnProperty.call(ve,"default")?ve.default:ve}function Jf(ve){throw new Error('Could not dynamically require "'+ve+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Jm={exports:{}};(function(ve,Ce){(function(u){ve.exports=u()})(function(){return function u(q,W,o){function p(e,r){if(!W[e]){if(!q[e]){var t=typeof Jf=="function"&&Jf;if(!r&&t)return t(e,!0);if(x)return x(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var n=W[e]={exports:{}};q[e][0].call(n.exports,function(h){return p(q[e][1][h]||h)},n,n.exports,u,q,W,o)}return W[e].exports}for(var x=typeof Jf=="function"&&Jf,y=0;y<o.length;y++)p(o[y]);return p}({1:[function(u,q,W){var o=u("../src/lib"),p={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var x in p){var y=x.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");o.addStyleRule(y,p[x])}},{"../src/lib":503}],2:[function(u,q,W){q.exports=u("../src/transforms/aggregate")},{"../src/transforms/aggregate":1114}],3:[function(u,q,W){q.exports=u("../src/traces/bar")},{"../src/traces/bar":656}],4:[function(u,q,W){q.exports=u("../src/traces/barpolar")},{"../src/traces/barpolar":669}],5:[function(u,q,W){q.exports=u("../src/traces/box")},{"../src/traces/box":679}],6:[function(u,q,W){q.exports=u("../src/components/calendars")},{"../src/components/calendars":364}],7:[function(u,q,W){q.exports=u("../src/traces/candlestick")},{"../src/traces/candlestick":688}],8:[function(u,q,W){q.exports=u("../src/traces/carpet")},{"../src/traces/carpet":707}],9:[function(u,q,W){q.exports=u("../src/traces/choropleth")},{"../src/traces/choropleth":721}],10:[function(u,q,W){q.exports=u("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":728}],11:[function(u,q,W){q.exports=u("../src/traces/cone")},{"../src/traces/cone":734}],12:[function(u,q,W){q.exports=u("../src/traces/contour")},{"../src/traces/contour":749}],13:[function(u,q,W){q.exports=u("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":760}],14:[function(u,q,W){q.exports=u("../src/core")},{"../src/core":481}],15:[function(u,q,W){q.exports=u("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":768}],16:[function(u,q,W){q.exports=u("../src/transforms/filter")},{"../src/transforms/filter":1115}],17:[function(u,q,W){q.exports=u("../src/traces/funnel")},{"../src/traces/funnel":778}],18:[function(u,q,W){q.exports=u("../src/traces/funnelarea")},{"../src/traces/funnelarea":787}],19:[function(u,q,W){q.exports=u("../src/transforms/groupby")},{"../src/transforms/groupby":1116}],20:[function(u,q,W){q.exports=u("../src/traces/heatmap")},{"../src/traces/heatmap":800}],21:[function(u,q,W){q.exports=u("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":811}],22:[function(u,q,W){q.exports=u("../src/traces/histogram")},{"../src/traces/histogram":823}],23:[function(u,q,W){q.exports=u("../src/traces/histogram2d")},{"../src/traces/histogram2d":829}],24:[function(u,q,W){q.exports=u("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":833}],25:[function(u,q,W){q.exports=u("../src/traces/icicle")},{"../src/traces/icicle":839}],26:[function(u,q,W){q.exports=u("../src/traces/image")},{"../src/traces/image":852}],27:[function(u,q,W){var o=u("./core");o.register([u("./bar"),u("./box"),u("./heatmap"),u("./histogram"),u("./histogram2d"),u("./histogram2dcontour"),u("./contour"),u("./scatterternary"),u("./violin"),u("./funnel"),u("./waterfall"),u("./image"),u("./pie"),u("./sunburst"),u("./treemap"),u("./icicle"),u("./funnelarea"),u("./scatter3d"),u("./surface"),u("./isosurface"),u("./volume"),u("./mesh3d"),u("./cone"),u("./streamtube"),u("./scattergeo"),u("./choropleth"),u("./scattergl"),u("./splom"),u("./pointcloud"),u("./heatmapgl"),u("./parcoords"),u("./parcats"),u("./scattermapbox"),u("./choroplethmapbox"),u("./densitymapbox"),u("./sankey"),u("./indicator"),u("./table"),u("./carpet"),u("./scattercarpet"),u("./contourcarpet"),u("./ohlc"),u("./candlestick"),u("./scatterpolar"),u("./scatterpolargl"),u("./barpolar"),u("./scattersmith"),u("./aggregate"),u("./filter"),u("./groupby"),u("./sort"),u("./calendars")]),q.exports=o},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(u,q,W){q.exports=u("../src/traces/indicator")},{"../src/traces/indicator":860}],29:[function(u,q,W){q.exports=u("../src/traces/isosurface")},{"../src/traces/isosurface":866}],30:[function(u,q,W){q.exports=u("../src/traces/mesh3d")},{"../src/traces/mesh3d":871}],31:[function(u,q,W){q.exports=u("../src/traces/ohlc")},{"../src/traces/ohlc":876}],32:[function(u,q,W){q.exports=u("../src/traces/parcats")},{"../src/traces/parcats":885}],33:[function(u,q,W){q.exports=u("../src/traces/parcoords")},{"../src/traces/parcoords":895}],34:[function(u,q,W){q.exports=u("../src/traces/pie")},{"../src/traces/pie":906}],35:[function(u,q,W){q.exports=u("../src/traces/pointcloud")},{"../src/traces/pointcloud":915}],36:[function(u,q,W){q.exports=u("../src/traces/sankey")},{"../src/traces/sankey":921}],37:[function(u,q,W){q.exports=u("../src/traces/scatter3d")},{"../src/traces/scatter3d":959}],38:[function(u,q,W){q.exports=u("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":966}],39:[function(u,q,W){q.exports=u("../src/traces/scattergeo")},{"../src/traces/scattergeo":974}],40:[function(u,q,W){q.exports=u("../src/traces/scattergl")},{"../src/traces/scattergl":987}],41:[function(u,q,W){q.exports=u("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":997}],42:[function(u,q,W){q.exports=u("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1005}],43:[function(u,q,W){q.exports=u("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1012}],44:[function(u,q,W){q.exports=u("../src/traces/scattersmith")},{"../src/traces/scattersmith":1019}],45:[function(u,q,W){q.exports=u("../src/traces/scatterternary")},{"../src/traces/scatterternary":1027}],46:[function(u,q,W){q.exports=u("../src/transforms/sort")},{"../src/transforms/sort":1118}],47:[function(u,q,W){q.exports=u("../src/traces/splom")},{"../src/traces/splom":1036}],48:[function(u,q,W){q.exports=u("../src/traces/streamtube")},{"../src/traces/streamtube":1044}],49:[function(u,q,W){q.exports=u("../src/traces/sunburst")},{"../src/traces/sunburst":1052}],50:[function(u,q,W){q.exports=u("../src/traces/surface")},{"../src/traces/surface":1061}],51:[function(u,q,W){q.exports=u("../src/traces/table")},{"../src/traces/table":1069}],52:[function(u,q,W){q.exports=u("../src/traces/treemap")},{"../src/traces/treemap":1080}],53:[function(u,q,W){q.exports=u("../src/traces/violin")},{"../src/traces/violin":1093}],54:[function(u,q,W){q.exports=u("../src/traces/volume")},{"../src/traces/volume":1101}],55:[function(u,q,W){q.exports=u("../src/traces/waterfall")},{"../src/traces/waterfall":1109}],56:[function(u,q,W){(function(o,p){typeof W=="object"&&q!==void 0?p(W,u("d3-array"),u("d3-collection"),u("d3-shape"),u("elementary-circuits-directed-graph")):p(o.d3=o.d3||{},o.d3,o.d3,o.d3,null)})(this,function(o,p,x,y,e){function r(ee){return ee.target.depth}function t(ee,ne){return ee.sourceLinks.length?ee.depth:ne-1}function i(ee){return function(){return ee}}e=e&&e.hasOwnProperty("default")?e.default:e;var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee};function h(ee,ne){return a(ee.source,ne.source)||ee.index-ne.index}function s(ee,ne){return a(ee.target,ne.target)||ee.index-ne.index}function a(ee,ne){return ee.partOfCycle===ne.partOfCycle?ee.y0-ne.y0:ee.circularLinkType==="top"||ne.circularLinkType==="bottom"?-1:1}function l(ee){return ee.value}function f(ee){return(ee.y0+ee.y1)/2}function d(ee){return f(ee.source)}function v(ee){return f(ee.target)}function m(ee){return ee.index}function c(ee){return ee.nodes}function b(ee){return ee.links}function g(ee,ne){var se=ee.get(ne);if(!se)throw new Error("missing: "+ne);return se}function w(ee,ne){return ne(ee)}function _(ee,ne,se){var oe=0;if(se===null){for(var he=[],le=0;le<ee.links.length;le++){var de=ee.links[le],xe=de.source.index,we=de.target.index;he[xe]||(he[xe]=[]),he[we]||(he[we]=[]),he[xe].indexOf(we)===-1&&he[xe].push(we)}var be=e(he);be.sort(function(me,ke){return me.length-ke.length});var Ae={};for(le=0;le<be.length;le++){var fe=be[le].slice(-2);Ae[fe[0]]||(Ae[fe[0]]={}),Ae[fe[0]][fe[1]]=!0}ee.links.forEach(function(me){var ke=me.target.index,Te=me.source.index;ke===Te||Ae[Te]&&Ae[Te][ke]?(me.circular=!0,me.circularLinkID=oe,oe+=1):me.circular=!1})}else ee.links.forEach(function(me){me.source[se]<me.target[se]?me.circular=!1:(me.circular=!0,me.circularLinkID=oe,oe+=1)})}function T(ee,ne){var se=0,oe=0;ee.links.forEach(function(he){he.circular&&(he.source.circularLinkType||he.target.circularLinkType?he.circularLinkType=he.source.circularLinkType?he.source.circularLinkType:he.target.circularLinkType:he.circularLinkType=se<oe?"top":"bottom",he.circularLinkType=="top"?se+=1:oe+=1,ee.nodes.forEach(function(le){w(le,ne)!=w(he.source,ne)&&w(le,ne)!=w(he.target,ne)||(le.circularLinkType=he.circularLinkType)}))}),ee.links.forEach(function(he){he.circular&&(he.source.circularLinkType==he.target.circularLinkType&&(he.circularLinkType=he.source.circularLinkType),Y(he,ne)&&(he.circularLinkType=he.source.circularLinkType))})}function k(ee){var ne=Math.abs(ee.y1-ee.y0),se=Math.abs(ee.target.x0-ee.source.x1);return Math.atan(se/ne)}function L(ee,ne){var se=0;ee.sourceLinks.forEach(function(he){se=he.circular&&!Y(he,ne)?se+1:se});var oe=0;return ee.targetLinks.forEach(function(he){oe=he.circular&&!Y(he,ne)?oe+1:oe}),se+oe}function M(ee){var ne=ee.source.sourceLinks,se=0;ne.forEach(function(le){se=le.circular?se+1:se});var oe=ee.target.targetLinks,he=0;return oe.forEach(function(le){he=le.circular?he+1:he}),!(se>1||he>1)}function I(ee,ne,se){return ee.sort(S),ee.forEach(function(oe,he){var le,de,xe=0;if(Y(oe,se)&&M(oe))oe.circularPathData.verticalBuffer=xe+oe.width/2;else{for(var we=0;we<he;we++)if(le=ee[he],de=ee[we],!(le.source.column<de.target.column||le.target.column>de.source.column)){var be=ee[we].circularPathData.verticalBuffer+ee[we].width/2+ne;xe=be>xe?be:xe}oe.circularPathData.verticalBuffer=xe+oe.width/2}}),ee}function P(ee,ne,se,oe){var he=p.min(ee.links,function(le){return le.source.y0});ee.links.forEach(function(le){le.circular&&(le.circularPathData={})}),I(ee.links.filter(function(le){return le.circularLinkType=="top"}),ne,oe),I(ee.links.filter(function(le){return le.circularLinkType=="bottom"}),ne,oe),ee.links.forEach(function(le){if(le.circular){if(le.circularPathData.arcRadius=le.width+10,le.circularPathData.leftNodeBuffer=5,le.circularPathData.rightNodeBuffer=5,le.circularPathData.sourceWidth=le.source.x1-le.source.x0,le.circularPathData.sourceX=le.source.x0+le.circularPathData.sourceWidth,le.circularPathData.targetX=le.target.x0,le.circularPathData.sourceY=le.y0,le.circularPathData.targetY=le.y1,Y(le,oe)&&M(le))le.circularPathData.leftSmallArcRadius=10+le.width/2,le.circularPathData.leftLargeArcRadius=10+le.width/2,le.circularPathData.rightSmallArcRadius=10+le.width/2,le.circularPathData.rightLargeArcRadius=10+le.width/2,le.circularLinkType=="bottom"?(le.circularPathData.verticalFullExtent=le.source.y1+25+le.circularPathData.verticalBuffer,le.circularPathData.verticalLeftInnerExtent=le.circularPathData.verticalFullExtent-le.circularPathData.leftLargeArcRadius,le.circularPathData.verticalRightInnerExtent=le.circularPathData.verticalFullExtent-le.circularPathData.rightLargeArcRadius):(le.circularPathData.verticalFullExtent=le.source.y0-25-le.circularPathData.verticalBuffer,le.circularPathData.verticalLeftInnerExtent=le.circularPathData.verticalFullExtent+le.circularPathData.leftLargeArcRadius,le.circularPathData.verticalRightInnerExtent=le.circularPathData.verticalFullExtent+le.circularPathData.rightLargeArcRadius);else{var de=le.source.column,xe=le.circularLinkType,we=ee.links.filter(function(fe){return fe.source.column==de&&fe.circularLinkType==xe});le.circularLinkType=="bottom"?we.sort(D):we.sort(E);var be=0;we.forEach(function(fe,me){fe.circularLinkID==le.circularLinkID&&(le.circularPathData.leftSmallArcRadius=10+le.width/2+be,le.circularPathData.leftLargeArcRadius=10+le.width/2+me*ne+be),be+=fe.width}),de=le.target.column,we=ee.links.filter(function(fe){return fe.target.column==de&&fe.circularLinkType==xe}),le.circularLinkType=="bottom"?we.sort(H):we.sort(F),be=0,we.forEach(function(fe,me){fe.circularLinkID==le.circularLinkID&&(le.circularPathData.rightSmallArcRadius=10+le.width/2+be,le.circularPathData.rightLargeArcRadius=10+le.width/2+me*ne+be),be+=fe.width}),le.circularLinkType=="bottom"?(le.circularPathData.verticalFullExtent=Math.max(se,le.source.y1,le.target.y1)+25+le.circularPathData.verticalBuffer,le.circularPathData.verticalLeftInnerExtent=le.circularPathData.verticalFullExtent-le.circularPathData.leftLargeArcRadius,le.circularPathData.verticalRightInnerExtent=le.circularPathData.verticalFullExtent-le.circularPathData.rightLargeArcRadius):(le.circularPathData.verticalFullExtent=he-25-le.circularPathData.verticalBuffer,le.circularPathData.verticalLeftInnerExtent=le.circularPathData.verticalFullExtent+le.circularPathData.leftLargeArcRadius,le.circularPathData.verticalRightInnerExtent=le.circularPathData.verticalFullExtent+le.circularPathData.rightLargeArcRadius)}le.circularPathData.leftInnerExtent=le.circularPathData.sourceX+le.circularPathData.leftNodeBuffer,le.circularPathData.rightInnerExtent=le.circularPathData.targetX-le.circularPathData.rightNodeBuffer,le.circularPathData.leftFullExtent=le.circularPathData.sourceX+le.circularPathData.leftLargeArcRadius+le.circularPathData.leftNodeBuffer,le.circularPathData.rightFullExtent=le.circularPathData.targetX-le.circularPathData.rightLargeArcRadius-le.circularPathData.rightNodeBuffer}if(le.circular)le.path=function(fe){var me="";return me=fe.circularLinkType=="top"?"M"+fe.circularPathData.sourceX+" "+fe.circularPathData.sourceY+" L"+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.sourceY+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftSmallArcRadius+" 0 0 0 "+fe.circularPathData.leftFullExtent+" "+(fe.circularPathData.sourceY-fe.circularPathData.leftSmallArcRadius)+" L"+fe.circularPathData.leftFullExtent+" "+fe.circularPathData.verticalLeftInnerExtent+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftLargeArcRadius+" 0 0 0 "+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.verticalFullExtent+" L"+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.verticalFullExtent+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightLargeArcRadius+" 0 0 0 "+fe.circularPathData.rightFullExtent+" "+fe.circularPathData.verticalRightInnerExtent+" L"+fe.circularPathData.rightFullExtent+" "+(fe.circularPathData.targetY-fe.circularPathData.rightSmallArcRadius)+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightSmallArcRadius+" 0 0 0 "+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.targetY+" L"+fe.circularPathData.targetX+" "+fe.circularPathData.targetY:"M"+fe.circularPathData.sourceX+" "+fe.circularPathData.sourceY+" L"+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.sourceY+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftSmallArcRadius+" 0 0 1 "+fe.circularPathData.leftFullExtent+" "+(fe.circularPathData.sourceY+fe.circularPathData.leftSmallArcRadius)+" L"+fe.circularPathData.leftFullExtent+" "+fe.circularPathData.verticalLeftInnerExtent+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftLargeArcRadius+" 0 0 1 "+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.verticalFullExtent+" L"+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.verticalFullExtent+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightLargeArcRadius+" 0 0 1 "+fe.circularPathData.rightFullExtent+" "+fe.circularPathData.verticalRightInnerExtent+" L"+fe.circularPathData.rightFullExtent+" "+(fe.circularPathData.targetY+fe.circularPathData.rightSmallArcRadius)+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightSmallArcRadius+" 0 0 1 "+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.targetY+" L"+fe.circularPathData.targetX+" "+fe.circularPathData.targetY,me}(le);else{var Ae=y.linkHorizontal().source(function(fe){return[fe.source.x0+(fe.source.x1-fe.source.x0),fe.y0]}).target(function(fe){return[fe.target.x0,fe.y1]});le.path=Ae(le)}})}function S(ee,ne){return V(ee)==V(ne)?ee.circularLinkType=="bottom"?D(ee,ne):E(ee,ne):V(ne)-V(ee)}function E(ee,ne){return ee.y0-ne.y0}function D(ee,ne){return ne.y0-ee.y0}function F(ee,ne){return ee.y1-ne.y1}function H(ee,ne){return ne.y1-ee.y1}function V(ee){return ee.target.column-ee.source.column}function Q(ee){return ee.target.x0-ee.source.x1}function K(ee,ne){var se=k(ee),oe=Q(ne)/Math.tan(se);return j(ee)=="up"?ee.y1+oe:ee.y1-oe}function Z(ee,ne){var se=k(ee),oe=Q(ne)/Math.tan(se);return j(ee)=="up"?ee.y1-oe:ee.y1+oe}function $(ee,ne,se,oe){ee.links.forEach(function(he){if(!he.circular&&he.target.column-he.source.column>1){var le=he.source.column+1,de=he.target.column-1,xe=1,we=de-le+1;for(xe=1;le<=de;le++,xe++)ee.nodes.forEach(function(be){if(be.column==le){var Ae,fe=xe/(we+1),me=Math.pow(1-fe,3),ke=3*fe*Math.pow(1-fe,2),Te=3*Math.pow(fe,2)*(1-fe),Me=Math.pow(fe,3),Oe=me*he.y0+ke*he.y0+Te*he.y1+Me*he.y1,Fe=Oe-he.width/2,qe=Oe+he.width/2;Fe>be.y0&&Fe<be.y1?(Ae=be.y1-Fe+10,Ae=be.circularLinkType=="bottom"?Ae:-Ae,be=R(be,Ae,ne,se),ee.nodes.forEach(function(et){w(et,oe)!=w(be,oe)&&et.column==be.column&&re(be,et)&&R(et,Ae,ne,se)})):(qe>be.y0&&qe<be.y1||Fe<be.y0&&qe>be.y1)&&(Ae=qe-be.y0+10,be=R(be,Ae,ne,se),ee.nodes.forEach(function(et){w(et,oe)!=w(be,oe)&&et.column==be.column&&et.y0<be.y1&&et.y1>be.y1&&R(et,Ae,ne,se)}))}})}})}function re(ee,ne){return ee.y0>ne.y0&&ee.y0<ne.y1||ee.y1>ne.y0&&ee.y1<ne.y1||ee.y0<ne.y0&&ee.y1>ne.y1}function R(ee,ne,se,oe){return ee.y0+ne>=se&&ee.y1+ne<=oe&&(ee.y0=ee.y0+ne,ee.y1=ee.y1+ne,ee.targetLinks.forEach(function(he){he.y1=he.y1+ne}),ee.sourceLinks.forEach(function(he){he.y0=he.y0+ne})),ee}function N(ee,ne,se,oe){ee.nodes.forEach(function(he){oe&&he.y+(he.y1-he.y0)>ne&&(he.y=he.y-(he.y+(he.y1-he.y0)-ne));var le=ee.links.filter(function(we){return w(we.source,se)==w(he,se)}),de=le.length;de>1&&le.sort(function(we,be){if(!we.circular&&!be.circular){if(we.target.column==be.target.column||!te(we,be))return we.y1-be.y1;if(we.target.column>be.target.column){var Ae=Z(be,we);return we.y1-Ae}if(be.target.column>we.target.column)return Z(we,be)-be.y1}return we.circular&&!be.circular?we.circularLinkType=="top"?-1:1:be.circular&&!we.circular?be.circularLinkType=="top"?1:-1:we.circular&&be.circular?we.circularLinkType===be.circularLinkType&&we.circularLinkType=="top"?we.target.column===be.target.column?we.target.y1-be.target.y1:be.target.column-we.target.column:we.circularLinkType===be.circularLinkType&&we.circularLinkType=="bottom"?we.target.column===be.target.column?be.target.y1-we.target.y1:we.target.column-be.target.column:we.circularLinkType=="top"?-1:1:void 0});var xe=he.y0;le.forEach(function(we){we.y0=xe+we.width/2,xe+=we.width}),le.forEach(function(we,be){if(we.circularLinkType=="bottom"){for(var Ae=be+1,fe=0;Ae<de;Ae++)fe+=le[Ae].width;we.y0=he.y1-fe-we.width/2}})})}function U(ee,ne,se){ee.nodes.forEach(function(oe){var he=ee.links.filter(function(xe){return w(xe.target,se)==w(oe,se)}),le=he.length;le>1&&he.sort(function(xe,we){if(!xe.circular&&!we.circular){if(xe.source.column==we.source.column||!te(xe,we))return xe.y0-we.y0;if(we.source.column<xe.source.column){var be=K(we,xe);return xe.y0-be}if(xe.source.column<we.source.column)return K(xe,we)-we.y0}return xe.circular&&!we.circular?xe.circularLinkType=="top"?-1:1:we.circular&&!xe.circular?we.circularLinkType=="top"?1:-1:xe.circular&&we.circular?xe.circularLinkType===we.circularLinkType&&xe.circularLinkType=="top"?xe.source.column===we.source.column?xe.source.y1-we.source.y1:xe.source.column-we.source.column:xe.circularLinkType===we.circularLinkType&&xe.circularLinkType=="bottom"?xe.source.column===we.source.column?xe.source.y1-we.source.y1:we.source.column-xe.source.column:xe.circularLinkType=="top"?-1:1:void 0});var de=oe.y0;he.forEach(function(xe){xe.y1=de+xe.width/2,de+=xe.width}),he.forEach(function(xe,we){if(xe.circularLinkType=="bottom"){for(var be=we+1,Ae=0;be<le;be++)Ae+=he[be].width;xe.y1=oe.y1-Ae-xe.width/2}})})}function te(ee,ne){return j(ee)==j(ne)}function j(ee){return ee.y0-ee.y1>0?"up":"down"}function Y(ee,ne){return w(ee.source,ne)==w(ee.target,ne)}function J(ee,ne,se){var oe=ee.nodes,he=ee.links,le=!1,de=!1;if(he.forEach(function(be){be.circularLinkType=="top"?le=!0:be.circularLinkType=="bottom"&&(de=!0)}),le==0||de==0){var xe=p.min(oe,function(be){return be.y0}),we=(se-ne)/(p.max(oe,function(be){return be.y1})-xe);oe.forEach(function(be){var Ae=(be.y1-be.y0)*we;be.y0=(be.y0-xe)*we,be.y1=be.y0+Ae}),he.forEach(function(be){be.y0=(be.y0-xe)*we,be.y1=(be.y1-xe)*we,be.width=be.width*we})}}o.sankeyCircular=function(){var ee,ne,se=0,oe=0,he=1,le=1,de=24,xe=m,we=t,be=c,Ae=b,fe=32,me=2,ke=null;function Te(){var ze={nodes:be.apply(null,arguments),links:Ae.apply(null,arguments)};Me(ze),_(ze,xe,ke),Oe(ze),Fe(ze),T(ze,xe),qe(ze,fe,xe),et(ze);for(var Ue=4,We=0;We<Ue;We++)N(ze,le,xe),U(ze,le,xe),$(ze,oe,le,xe),N(ze,le,xe),U(ze,le,xe);return J(ze,oe,le),P(ze,me,le,xe),ze}function Me(ze){ze.nodes.forEach(function(We,Ze){We.index=Ze,We.sourceLinks=[],We.targetLinks=[]});var Ue=x.map(ze.nodes,xe);return ze.links.forEach(function(We,Ze){We.index=Ze;var nt=We.source,ft=We.target;(nt===void 0?"undefined":n(nt))!=="object"&&(nt=We.source=g(Ue,nt)),(ft===void 0?"undefined":n(ft))!=="object"&&(ft=We.target=g(Ue,ft)),nt.sourceLinks.push(We),ft.targetLinks.push(We)}),ze}function Oe(ze){ze.nodes.forEach(function(Ue){Ue.partOfCycle=!1,Ue.value=Math.max(p.sum(Ue.sourceLinks,l),p.sum(Ue.targetLinks,l)),Ue.sourceLinks.forEach(function(We){We.circular&&(Ue.partOfCycle=!0,Ue.circularLinkType=We.circularLinkType)}),Ue.targetLinks.forEach(function(We){We.circular&&(Ue.partOfCycle=!0,Ue.circularLinkType=We.circularLinkType)})})}function Fe(ze){var Ue,We,Ze;for(Ue=ze.nodes,We=[],Ze=0;Ue.length;++Ze,Ue=We,We=[])Ue.forEach(function(nt){nt.depth=Ze,nt.sourceLinks.forEach(function(ft){We.indexOf(ft.target)<0&&!ft.circular&&We.push(ft.target)})});for(Ue=ze.nodes,We=[],Ze=0;Ue.length;++Ze,Ue=We,We=[])Ue.forEach(function(nt){nt.height=Ze,nt.targetLinks.forEach(function(ft){We.indexOf(ft.source)<0&&!ft.circular&&We.push(ft.source)})});ze.nodes.forEach(function(nt){nt.column=Math.floor(we.call(null,nt,Ze))})}function qe(ze,Ue,We){var Ze=x.nest().key(function(Et){return Et.column}).sortKeys(p.ascending).entries(ze.nodes).map(function(Et){return Et.values});(function(Et){if(ne){var it=1/0;Ze.forEach(function(Qt){var Ve=le*ne/(Qt.length+1);it=Ve<it?Ve:it}),ee=it}var rt=p.min(Ze,function(Qt){return(le-oe-(Qt.length-1)*ee)/p.sum(Qt,l)});rt*=.3,ze.links.forEach(function(Qt){Qt.width=Qt.value*rt});var At=function(Qt){var Ve=0,Ye=0,Be=0,Je=0,Se=p.max(Qt.nodes,function(Pe){return Pe.column});return Qt.links.forEach(function(Pe){Pe.circular&&(Pe.circularLinkType=="top"?Ve+=Pe.width:Ye+=Pe.width,Pe.target.column==0&&(Je+=Pe.width),Pe.source.column==Se&&(Be+=Pe.width))}),{top:Ve=Ve>0?Ve+25+10:Ve,bottom:Ye=Ye>0?Ye+25+10:Ye,left:Je=Je>0?Je+25+10:Je,right:Be=Be>0?Be+25+10:Be}}(ze),Gt=function(Qt,Ve){var Ye=p.max(Qt.nodes,function(De){return De.column}),Be=he-se,Je=le-oe,Se=Be/(Be+Ve.right+Ve.left),Pe=Je/(Je+Ve.top+Ve.bottom);return se=se*Se+Ve.left,he=Ve.right==0?he:he*Se,oe=oe*Pe+Ve.top,le*=Pe,Qt.nodes.forEach(function(De){De.x0=se+De.column*((he-se-de)/Ye),De.x1=De.x0+de}),Pe}(ze,At);rt*=Gt,ze.links.forEach(function(Qt){Qt.width=Qt.value*rt}),Ze.forEach(function(Qt){var Ve=Qt.length;Qt.forEach(function(Ye,Be){Ye.depth==Ze.length-1&&Ve==1||Ye.depth==0&&Ve==1?(Ye.y0=le/2-Ye.value*rt,Ye.y1=Ye.y0+Ye.value*rt):Ye.partOfCycle?L(Ye,Et)==0?(Ye.y0=le/2+Be,Ye.y1=Ye.y0+Ye.value*rt):Ye.circularLinkType=="top"?(Ye.y0=oe+Be,Ye.y1=Ye.y0+Ye.value*rt):(Ye.y0=le-Ye.value*rt-Be,Ye.y1=Ye.y0+Ye.value*rt):At.top==0||At.bottom==0?(Ye.y0=(le-oe)/Ve*Be,Ye.y1=Ye.y0+Ye.value*rt):(Ye.y0=(le-oe)/2-Ve/2+Be,Ye.y1=Ye.y0+Ye.value*rt)})})})(We),It();for(var nt=1,ft=Ue;ft>0;--ft)xt(nt*=.99,We),It();function xt(Et,it){var rt=Ze.length;Ze.forEach(function(At){var Gt=At.length,Qt=At[0].depth;At.forEach(function(Ve){var Ye;if((Ve.sourceLinks.length||Ve.targetLinks.length)&&!(Ve.partOfCycle&&L(Ve,it)>0))if(Qt==0&&Gt==1)Ye=Ve.y1-Ve.y0,Ve.y0=le/2-Ye/2,Ve.y1=le/2+Ye/2;else if(Qt==rt-1&&Gt==1)Ye=Ve.y1-Ve.y0,Ve.y0=le/2-Ye/2,Ve.y1=le/2+Ye/2;else{var Be=p.mean(Ve.sourceLinks,v),Je=p.mean(Ve.targetLinks,d),Se=((Be&&Je?(Be+Je)/2:Be||Je)-f(Ve))*Et;Ve.y0+=Se,Ve.y1+=Se}})})}function It(){Ze.forEach(function(Et){var it,rt,At,Gt=oe,Qt=Et.length;for(Et.sort(a),At=0;At<Qt;++At)(rt=Gt-(it=Et[At]).y0)>0&&(it.y0+=rt,it.y1+=rt),Gt=it.y1+ee;if((rt=Gt-ee-le)>0)for(Gt=it.y0-=rt,it.y1-=rt,At=Qt-2;At>=0;--At)(rt=(it=Et[At]).y1+ee-Gt)>0&&(it.y0-=rt,it.y1-=rt),Gt=it.y0})}}function et(ze){ze.nodes.forEach(function(Ue){Ue.sourceLinks.sort(s),Ue.targetLinks.sort(h)}),ze.nodes.forEach(function(Ue){var We=Ue.y0,Ze=We,nt=Ue.y1,ft=nt;Ue.sourceLinks.forEach(function(xt){xt.circular?(xt.y0=nt-xt.width/2,nt-=xt.width):(xt.y0=We+xt.width/2,We+=xt.width)}),Ue.targetLinks.forEach(function(xt){xt.circular?(xt.y1=ft-xt.width/2,ft-=xt.width):(xt.y1=Ze+xt.width/2,Ze+=xt.width)})})}return Te.nodeId=function(ze){return arguments.length?(xe=typeof ze=="function"?ze:i(ze),Te):xe},Te.nodeAlign=function(ze){return arguments.length?(we=typeof ze=="function"?ze:i(ze),Te):we},Te.nodeWidth=function(ze){return arguments.length?(de=+ze,Te):de},Te.nodePadding=function(ze){return arguments.length?(ee=+ze,Te):ee},Te.nodes=function(ze){return arguments.length?(be=typeof ze=="function"?ze:i(ze),Te):be},Te.links=function(ze){return arguments.length?(Ae=typeof ze=="function"?ze:i(ze),Te):Ae},Te.size=function(ze){return arguments.length?(se=oe=0,he=+ze[0],le=+ze[1],Te):[he-se,le-oe]},Te.extent=function(ze){return arguments.length?(se=+ze[0][0],he=+ze[1][0],oe=+ze[0][1],le=+ze[1][1],Te):[[se,oe],[he,le]]},Te.iterations=function(ze){return arguments.length?(fe=+ze,Te):fe},Te.circularLinkGap=function(ze){return arguments.length?(me=+ze,Te):me},Te.nodePaddingRatio=function(ze){return arguments.length?(ne=+ze,Te):ne},Te.sortNodes=function(ze){return arguments.length?(ke=ze,Te):ke},Te.update=function(ze){return T(ze,xe),et(ze),ze.links.forEach(function(Ue){Ue.circular&&(Ue.circularLinkType=Ue.y0+Ue.y1<le?"top":"bottom",Ue.source.circularLinkType=Ue.circularLinkType,Ue.target.circularLinkType=Ue.circularLinkType)}),N(ze,le,xe,!1),U(ze,le,xe),P(ze,me,le,xe),ze},Te},o.sankeyCenter=function(ee){return ee.targetLinks.length?ee.depth:ee.sourceLinks.length?p.min(ee.sourceLinks,r)-1:0},o.sankeyLeft=function(ee){return ee.depth},o.sankeyRight=function(ee,ne){return ne-1-ee.height},o.sankeyJustify=t,Object.defineProperty(o,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(u,q,W){(function(o,p){typeof W=="object"&&q!==void 0?p(W,u("d3-array"),u("d3-collection"),u("d3-shape")):p(o.d3=o.d3||{},o.d3,o.d3,o.d3)})(this,function(o,p,x,y){function e(w){return w.target.depth}function r(w,_){return w.sourceLinks.length?w.depth:_-1}function t(w){return function(){return w}}function i(w,_){return h(w.source,_.source)||w.index-_.index}function n(w,_){return h(w.target,_.target)||w.index-_.index}function h(w,_){return w.y0-_.y0}function s(w){return w.value}function a(w){return(w.y0+w.y1)/2}function l(w){return a(w.source)*w.value}function f(w){return a(w.target)*w.value}function d(w){return w.index}function v(w){return w.nodes}function m(w){return w.links}function c(w,_){var T=w.get(_);if(!T)throw new Error("missing: "+_);return T}function b(w){return[w.source.x1,w.y0]}function g(w){return[w.target.x0,w.y1]}o.sankey=function(){var w=0,_=0,T=1,k=1,L=24,M=8,I=d,P=r,S=v,E=m,D=32;function F(){var $={nodes:S.apply(null,arguments),links:E.apply(null,arguments)};return H($),V($),Q($),K($),Z($),$}function H($){$.nodes.forEach(function(R,N){R.index=N,R.sourceLinks=[],R.targetLinks=[]});var re=x.map($.nodes,I);$.links.forEach(function(R,N){R.index=N;var U=R.source,te=R.target;typeof U!="object"&&(U=R.source=c(re,U)),typeof te!="object"&&(te=R.target=c(re,te)),U.sourceLinks.push(R),te.targetLinks.push(R)})}function V($){$.nodes.forEach(function(re){re.value=Math.max(p.sum(re.sourceLinks,s),p.sum(re.targetLinks,s))})}function Q($){var re,R,N;for(re=$.nodes,R=[],N=0;re.length;++N,re=R,R=[])re.forEach(function(te){te.depth=N,te.sourceLinks.forEach(function(j){R.indexOf(j.target)<0&&R.push(j.target)})});for(re=$.nodes,R=[],N=0;re.length;++N,re=R,R=[])re.forEach(function(te){te.height=N,te.targetLinks.forEach(function(j){R.indexOf(j.source)<0&&R.push(j.source)})});var U=(T-w-L)/(N-1);$.nodes.forEach(function(te){te.x1=(te.x0=w+Math.max(0,Math.min(N-1,Math.floor(P.call(null,te,N))))*U)+L})}function K($){var re=x.nest().key(function(Y){return Y.x0}).sortKeys(p.ascending).entries($.nodes).map(function(Y){return Y.values});(function(){var Y=p.max(re,function(ne){return ne.length}),J=2/3*(k-_)/(Y-1);M>J&&(M=J);var ee=p.min(re,function(ne){return(k-_-(ne.length-1)*M)/p.sum(ne,s)});re.forEach(function(ne){ne.forEach(function(se,oe){se.y1=(se.y0=oe)+se.value*ee})}),$.links.forEach(function(ne){ne.width=ne.value*ee})})(),j();for(var R=1,N=D;N>0;--N)te(R*=.99),j(),U(R),j();function U(Y){re.forEach(function(J){J.forEach(function(ee){if(ee.targetLinks.length){var ne=(p.sum(ee.targetLinks,l)/p.sum(ee.targetLinks,s)-a(ee))*Y;ee.y0+=ne,ee.y1+=ne}})})}function te(Y){re.slice().reverse().forEach(function(J){J.forEach(function(ee){if(ee.sourceLinks.length){var ne=(p.sum(ee.sourceLinks,f)/p.sum(ee.sourceLinks,s)-a(ee))*Y;ee.y0+=ne,ee.y1+=ne}})})}function j(){re.forEach(function(Y){var J,ee,ne,se=_,oe=Y.length;for(Y.sort(h),ne=0;ne<oe;++ne)(ee=se-(J=Y[ne]).y0)>0&&(J.y0+=ee,J.y1+=ee),se=J.y1+M;if((ee=se-M-k)>0)for(se=J.y0-=ee,J.y1-=ee,ne=oe-2;ne>=0;--ne)(ee=(J=Y[ne]).y1+M-se)>0&&(J.y0-=ee,J.y1-=ee),se=J.y0})}}function Z($){$.nodes.forEach(function(re){re.sourceLinks.sort(n),re.targetLinks.sort(i)}),$.nodes.forEach(function(re){var R=re.y0,N=R;re.sourceLinks.forEach(function(U){U.y0=R+U.width/2,R+=U.width}),re.targetLinks.forEach(function(U){U.y1=N+U.width/2,N+=U.width})})}return F.update=function($){return Z($),$},F.nodeId=function($){return arguments.length?(I=typeof $=="function"?$:t($),F):I},F.nodeAlign=function($){return arguments.length?(P=typeof $=="function"?$:t($),F):P},F.nodeWidth=function($){return arguments.length?(L=+$,F):L},F.nodePadding=function($){return arguments.length?(M=+$,F):M},F.nodes=function($){return arguments.length?(S=typeof $=="function"?$:t($),F):S},F.links=function($){return arguments.length?(E=typeof $=="function"?$:t($),F):E},F.size=function($){return arguments.length?(w=_=0,T=+$[0],k=+$[1],F):[T-w,k-_]},F.extent=function($){return arguments.length?(w=+$[0][0],T=+$[1][0],_=+$[0][1],k=+$[1][1],F):[[w,_],[T,k]]},F.iterations=function($){return arguments.length?(D=+$,F):D},F},o.sankeyCenter=function(w){return w.targetLinks.length?w.depth:w.sourceLinks.length?p.min(w.sourceLinks,e)-1:0},o.sankeyLeft=function(w){return w.depth},o.sankeyRight=function(w,_){return _-1-w.height},o.sankeyJustify=r,o.sankeyLinkHorizontal=function(){return y.linkHorizontal().source(b).target(g)},Object.defineProperty(o,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(u,q,W){(function(){var o={version:"3.8.0"},p=[].slice,x=function(ce){return p.call(ce)},y=self.document;function e(ce){return ce&&(ce.ownerDocument||ce.document||ce).documentElement}function r(ce){return ce&&(ce.ownerDocument&&ce.ownerDocument.defaultView||ce.document&&ce||ce.defaultView)}if(y)try{x(y.documentElement.childNodes)[0].nodeType}catch{x=function(C){for(var z=C.length,B=new Array(z);z--;)B[z]=C[z];return B}}if(Date.now||(Date.now=function(){return+new Date}),y)try{y.createElement("DIV").style.setProperty("opacity",0,"")}catch{var t=this.Element.prototype,i=t.setAttribute,n=t.setAttributeNS,h=this.CSSStyleDeclaration.prototype,s=h.setProperty;t.setAttribute=function(C,z){i.call(this,C,z+"")},t.setAttributeNS=function(C,z,B){n.call(this,C,z,B+"")},h.setProperty=function(C,z,B){s.call(this,C,z+"",B)}}function a(ce,C){return ce<C?-1:ce>C?1:ce>=C?0:NaN}function l(ce){return ce===null?NaN:+ce}function f(ce){return!isNaN(ce)}function d(ce){return{left:function(C,z,B,G){for(arguments.length<3&&(B=0),arguments.length<4&&(G=C.length);B<G;){var ae=B+G>>>1;ce(C[ae],z)<0?B=ae+1:G=ae}return B},right:function(C,z,B,G){for(arguments.length<3&&(B=0),arguments.length<4&&(G=C.length);B<G;){var ae=B+G>>>1;ce(C[ae],z)>0?G=ae:B=ae+1}return B}}}o.ascending=a,o.descending=function(ce,C){return C<ce?-1:C>ce?1:C>=ce?0:NaN},o.min=function(ce,C){var z,B,G=-1,ae=ce.length;if(arguments.length===1){for(;++G<ae;)if((B=ce[G])!=null&&B>=B){z=B;break}for(;++G<ae;)(B=ce[G])!=null&&z>B&&(z=B)}else{for(;++G<ae;)if((B=C.call(ce,ce[G],G))!=null&&B>=B){z=B;break}for(;++G<ae;)(B=C.call(ce,ce[G],G))!=null&&z>B&&(z=B)}return z},o.max=function(ce,C){var z,B,G=-1,ae=ce.length;if(arguments.length===1){for(;++G<ae;)if((B=ce[G])!=null&&B>=B){z=B;break}for(;++G<ae;)(B=ce[G])!=null&&B>z&&(z=B)}else{for(;++G<ae;)if((B=C.call(ce,ce[G],G))!=null&&B>=B){z=B;break}for(;++G<ae;)(B=C.call(ce,ce[G],G))!=null&&B>z&&(z=B)}return z},o.extent=function(ce,C){var z,B,G,ae=-1,ue=ce.length;if(arguments.length===1){for(;++ae<ue;)if((B=ce[ae])!=null&&B>=B){z=G=B;break}for(;++ae<ue;)(B=ce[ae])!=null&&(z>B&&(z=B),G<B&&(G=B))}else{for(;++ae<ue;)if((B=C.call(ce,ce[ae],ae))!=null&&B>=B){z=G=B;break}for(;++ae<ue;)(B=C.call(ce,ce[ae],ae))!=null&&(z>B&&(z=B),G<B&&(G=B))}return[z,G]},o.sum=function(ce,C){var z,B=0,G=ce.length,ae=-1;if(arguments.length===1)for(;++ae<G;)f(z=+ce[ae])&&(B+=z);else for(;++ae<G;)f(z=+C.call(ce,ce[ae],ae))&&(B+=z);return B},o.mean=function(ce,C){var z,B=0,G=ce.length,ae=-1,ue=G;if(arguments.length===1)for(;++ae<G;)f(z=l(ce[ae]))?B+=z:--ue;else for(;++ae<G;)f(z=l(C.call(ce,ce[ae],ae)))?B+=z:--ue;if(ue)return B/ue},o.quantile=function(ce,C){var z=(ce.length-1)*C+1,B=Math.floor(z),G=+ce[B-1],ae=z-B;return ae?G+ae*(ce[B]-G):G},o.median=function(ce,C){var z,B=[],G=ce.length,ae=-1;if(arguments.length===1)for(;++ae<G;)f(z=l(ce[ae]))&&B.push(z);else for(;++ae<G;)f(z=l(C.call(ce,ce[ae],ae)))&&B.push(z);if(B.length)return o.quantile(B.sort(a),.5)},o.variance=function(ce,C){var z,B,G=ce.length,ae=0,ue=0,ge=-1,_e=0;if(arguments.length===1)for(;++ge<G;)f(z=l(ce[ge]))&&(ue+=(B=z-ae)*(z-(ae+=B/++_e)));else for(;++ge<G;)f(z=l(C.call(ce,ce[ge],ge)))&&(ue+=(B=z-ae)*(z-(ae+=B/++_e)));if(_e>1)return ue/(_e-1)},o.deviation=function(){var ce=o.variance.apply(this,arguments);return ce&&Math.sqrt(ce)};var v=d(a);function m(ce){return ce.length}o.bisectLeft=v.left,o.bisect=o.bisectRight=v.right,o.bisector=function(ce){return d(ce.length===1?function(C,z){return a(ce(C),z)}:ce)},o.shuffle=function(ce,C,z){(ae=arguments.length)<3&&(z=ce.length,ae<2&&(C=0));for(var B,G,ae=z-C;ae;)G=Math.random()*ae--|0,B=ce[ae+C],ce[ae+C]=ce[G+C],ce[G+C]=B;return ce},o.permute=function(ce,C){for(var z=C.length,B=new Array(z);z--;)B[z]=ce[C[z]];return B},o.pairs=function(ce){for(var C=0,z=ce.length-1,B=ce[0],G=new Array(z<0?0:z);C<z;)G[C]=[B,B=ce[++C]];return G},o.transpose=function(ce){if(!(G=ce.length))return[];for(var C=-1,z=o.min(ce,m),B=new Array(z);++C<z;)for(var G,ae=-1,ue=B[C]=new Array(G);++ae<G;)ue[ae]=ce[ae][C];return B},o.zip=function(){return o.transpose(arguments)},o.keys=function(ce){var C=[];for(var z in ce)C.push(z);return C},o.values=function(ce){var C=[];for(var z in ce)C.push(ce[z]);return C},o.entries=function(ce){var C=[];for(var z in ce)C.push({key:z,value:ce[z]});return C},o.merge=function(ce){for(var C,z,B,G=ce.length,ae=-1,ue=0;++ae<G;)ue+=ce[ae].length;for(z=new Array(ue);--G>=0;)for(C=(B=ce[G]).length;--C>=0;)z[--ue]=B[C];return z};var c=Math.abs;function b(ce){for(var C=1;ce*C%1;)C*=10;return C}function g(ce,C){for(var z in C)Object.defineProperty(ce.prototype,z,{value:C[z],enumerable:!1})}function w(){this._=Object.create(null)}o.range=function(ce,C,z){if(arguments.length<3&&(z=1,arguments.length<2&&(C=ce,ce=0)),(C-ce)/z==1/0)throw new Error("infinite range");var B,G=[],ae=b(c(z)),ue=-1;if(ce*=ae,C*=ae,(z*=ae)<0)for(;(B=ce+z*++ue)>C;)G.push(B/ae);else for(;(B=ce+z*++ue)<C;)G.push(B/ae);return G},o.map=function(ce,C){var z=new w;if(ce instanceof w)ce.forEach(function(ge,_e){z.set(ge,_e)});else if(Array.isArray(ce)){var B,G=-1,ae=ce.length;if(arguments.length===1)for(;++G<ae;)z.set(G,ce[G]);else for(;++G<ae;)z.set(C.call(ce,B=ce[G],G),B)}else for(var ue in ce)z.set(ue,ce[ue]);return z};function _(ce){return(ce+="")=="__proto__"||ce[0]==="\0"?"\0"+ce:ce}function T(ce){return(ce+="")[0]==="\0"?ce.slice(1):ce}function k(ce){return _(ce)in this._}function L(ce){return(ce=_(ce))in this._&&delete this._[ce]}function M(){var ce=[];for(var C in this._)ce.push(T(C));return ce}function I(){var ce=0;for(var C in this._)++ce;return ce}function P(){for(var ce in this._)return!1;return!0}function S(){this._=Object.create(null)}function E(ce){return ce}function D(ce,C,z){return function(){var B=z.apply(C,arguments);return B===C?ce:B}}function F(ce,C){if(C in ce)return C;C=C.charAt(0).toUpperCase()+C.slice(1);for(var z=0,B=H.length;z<B;++z){var G=H[z]+C;if(G in ce)return G}}g(w,{has:k,get:function(ce){return this._[_(ce)]},set:function(ce,C){return this._[_(ce)]=C},remove:L,keys:M,values:function(){var ce=[];for(var C in this._)ce.push(this._[C]);return ce},entries:function(){var ce=[];for(var C in this._)ce.push({key:T(C),value:this._[C]});return ce},size:I,empty:P,forEach:function(ce){for(var C in this._)ce.call(this,T(C),this._[C])}}),o.nest=function(){var ce,C,z={},B=[],G=[];function ae(ue,ge,_e){if(_e>=B.length)return C?C.call(z,ge):ce?ge.sort(ce):ge;for(var Ee,He,Xe,at,_t=-1,St=ge.length,Tt=B[_e++],kt=new w;++_t<St;)(at=kt.get(Ee=Tt(He=ge[_t])))?at.push(He):kt.set(Ee,[He]);return ue?(He=ue(),Xe=function(bt,Nt){He.set(bt,ae(ue,Nt,_e))}):(He={},Xe=function(bt,Nt){He[bt]=ae(ue,Nt,_e)}),kt.forEach(Xe),He}return z.map=function(ue,ge){return ae(ge,ue,0)},z.entries=function(ue){return function ge(_e,Ee){if(Ee>=B.length)return _e;var He=[],Xe=G[Ee++];return _e.forEach(function(at,_t){He.push({key:at,values:ge(_t,Ee)})}),Xe?He.sort(function(at,_t){return Xe(at.key,_t.key)}):He}(ae(o.map,ue,0),0)},z.key=function(ue){return B.push(ue),z},z.sortKeys=function(ue){return G[B.length-1]=ue,z},z.sortValues=function(ue){return ce=ue,z},z.rollup=function(ue){return C=ue,z},z},o.set=function(ce){var C=new S;if(ce)for(var z=0,B=ce.length;z<B;++z)C.add(ce[z]);return C},g(S,{has:k,add:function(ce){return this._[_(ce+="")]=!0,ce},remove:L,values:M,size:I,empty:P,forEach:function(ce){for(var C in this._)ce.call(this,T(C))}}),o.behavior={},o.rebind=function(ce,C){for(var z,B=1,G=arguments.length;++B<G;)ce[z=arguments[B]]=D(ce,C,C[z]);return ce};var H=["webkit","ms","moz","Moz","o","O"];function V(){}function Q(){}function K(ce){var C=[],z=new w;function B(){for(var G,ae=C,ue=-1,ge=ae.length;++ue<ge;)(G=ae[ue].on)&&G.apply(this,arguments);return ce}return B.on=function(G,ae){var ue,ge=z.get(G);return arguments.length<2?ge&&ge.on:(ge&&(ge.on=null,C=C.slice(0,ue=C.indexOf(ge)).concat(C.slice(ue+1)),z.remove(G)),ae&&C.push(z.set(G,{on:ae})),ce)},B}function Z(){o.event.preventDefault()}function $(){for(var ce,C=o.event;ce=C.sourceEvent;)C=ce;return C}function re(ce){for(var C=new Q,z=0,B=arguments.length;++z<B;)C[arguments[z]]=K(C);return C.of=function(G,ae){return function(ue){try{var ge=ue.sourceEvent=o.event;ue.target=ce,o.event=ue,C[ue.type].apply(G,ae)}finally{o.event=ge}}},C}o.dispatch=function(){for(var ce=new Q,C=-1,z=arguments.length;++C<z;)ce[arguments[C]]=K(ce);return ce},Q.prototype.on=function(ce,C){var z=ce.indexOf("."),B="";if(z>=0&&(B=ce.slice(z+1),ce=ce.slice(0,z)),ce)return arguments.length<2?this[ce].on(B):this[ce].on(B,C);if(arguments.length===2){if(C==null)for(ce in this)this.hasOwnProperty(ce)&&this[ce].on(B,null);return this}},o.event=null,o.requote=function(ce){return ce.replace(R,"\\$&")};var R=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,N=function(ce,C){for(var z in C)ce[z]=C[z]};function U(ce){return N(ce,J),ce}var te=function(ce,C){return C.querySelector(ce)},j=function(ce,C){return C.querySelectorAll(ce)},Y=function(ce,C){var z=ce.matches||ce[F(ce,"matchesSelector")];return(Y=function(B,G){return z.call(B,G)})(ce,C)};typeof Sizzle=="function"&&(te=function(ce,C){return Sizzle(ce,C)[0]||null},j=Sizzle,Y=Sizzle.matchesSelector),o.selection=function(){return o.select(y.documentElement)};var J=o.selection.prototype=[];function ee(ce){return typeof ce=="function"?ce:function(){return te(ce,this)}}function ne(ce){return typeof ce=="function"?ce:function(){return j(ce,this)}}J.select=function(ce){var C,z,B,G,ae=[];ce=ee(ce);for(var ue=-1,ge=this.length;++ue<ge;){ae.push(C=[]),C.parentNode=(B=this[ue]).parentNode;for(var _e=-1,Ee=B.length;++_e<Ee;)(G=B[_e])?(C.push(z=ce.call(G,G.__data__,_e,ue)),z&&"__data__"in G&&(z.__data__=G.__data__)):C.push(null)}return U(ae)},J.selectAll=function(ce){var C,z,B=[];ce=ne(ce);for(var G=-1,ae=this.length;++G<ae;)for(var ue=this[G],ge=-1,_e=ue.length;++ge<_e;)(z=ue[ge])&&(B.push(C=x(ce.call(z,z.__data__,ge,G))),C.parentNode=z);return U(B)};var se="http://www.w3.org/1999/xhtml",oe={svg:"http://www.w3.org/2000/svg",xhtml:se,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function he(ce,C){return ce=o.ns.qualify(ce),C==null?ce.local?function(){this.removeAttributeNS(ce.space,ce.local)}:function(){this.removeAttribute(ce)}:typeof C=="function"?ce.local?function(){var z=C.apply(this,arguments);z==null?this.removeAttributeNS(ce.space,ce.local):this.setAttributeNS(ce.space,ce.local,z)}:function(){var z=C.apply(this,arguments);z==null?this.removeAttribute(ce):this.setAttribute(ce,z)}:ce.local?function(){this.setAttributeNS(ce.space,ce.local,C)}:function(){this.setAttribute(ce,C)}}function le(ce){return ce.trim().replace(/\s+/g," ")}function de(ce){return new RegExp("(?:^|\\s+)"+o.requote(ce)+"(?:\\s+|$)","g")}function xe(ce){return(ce+"").trim().split(/^|\s+/)}function we(ce,C){var z=(ce=xe(ce).map(be)).length;return typeof C=="function"?function(){for(var B=-1,G=C.apply(this,arguments);++B<z;)ce[B](this,G)}:function(){for(var B=-1;++B<z;)ce[B](this,C)}}function be(ce){var C=de(ce);return function(z,B){if(G=z.classList)return B?G.add(ce):G.remove(ce);var G=z.getAttribute("class")||"";B?(C.lastIndex=0,C.test(G)||z.setAttribute("class",le(G+" "+ce))):z.setAttribute("class",le(G.replace(C," ")))}}function Ae(ce,C,z){return C==null?function(){this.style.removeProperty(ce)}:typeof C=="function"?function(){var B=C.apply(this,arguments);B==null?this.style.removeProperty(ce):this.style.setProperty(ce,B,z)}:function(){this.style.setProperty(ce,C,z)}}function fe(ce,C){return C==null?function(){delete this[ce]}:typeof C=="function"?function(){var z=C.apply(this,arguments);z==null?delete this[ce]:this[ce]=z}:function(){this[ce]=C}}function me(ce){return typeof ce=="function"?ce:(ce=o.ns.qualify(ce)).local?function(){return this.ownerDocument.createElementNS(ce.space,ce.local)}:function(){var C=this.ownerDocument,z=this.namespaceURI;return z===se&&C.documentElement.namespaceURI===se?C.createElement(ce):C.createElementNS(z,ce)}}function ke(){var ce=this.parentNode;ce&&ce.removeChild(this)}function Te(ce){return{__data__:ce}}function Me(ce){return function(){return Y(this,ce)}}function Oe(ce){return arguments.length||(ce=a),function(C,z){return C&&z?ce(C.__data__,z.__data__):!C-!z}}function Fe(ce,C){for(var z=0,B=ce.length;z<B;z++)for(var G,ae=ce[z],ue=0,ge=ae.length;ue<ge;ue++)(G=ae[ue])&&C(G,ue,z);return ce}function qe(ce){return N(ce,et),ce}o.ns={prefix:oe,qualify:function(ce){var C=ce.indexOf(":"),z=ce;return C>=0&&(z=ce.slice(0,C))!=="xmlns"&&(ce=ce.slice(C+1)),oe.hasOwnProperty(z)?{space:oe[z],local:ce}:ce}},J.attr=function(ce,C){if(arguments.length<2){if(typeof ce=="string"){var z=this.node();return(ce=o.ns.qualify(ce)).local?z.getAttributeNS(ce.space,ce.local):z.getAttribute(ce)}for(C in ce)this.each(he(C,ce[C]));return this}return this.each(he(ce,C))},J.classed=function(ce,C){if(arguments.length<2){if(typeof ce=="string"){var z=this.node(),B=(ce=xe(ce)).length,G=-1;if(C=z.classList){for(;++G<B;)if(!C.contains(ce[G]))return!1}else for(C=z.getAttribute("class");++G<B;)if(!de(ce[G]).test(C))return!1;return!0}for(C in ce)this.each(we(C,ce[C]));return this}return this.each(we(ce,C))},J.style=function(ce,C,z){var B=arguments.length;if(B<3){if(typeof ce!="string"){for(z in B<2&&(C=""),ce)this.each(Ae(z,ce[z],C));return this}if(B<2){var G=this.node();return r(G).getComputedStyle(G,null).getPropertyValue(ce)}z=""}return this.each(Ae(ce,C,z))},J.property=function(ce,C){if(arguments.length<2){if(typeof ce=="string")return this.node()[ce];for(C in ce)this.each(fe(C,ce[C]));return this}return this.each(fe(ce,C))},J.text=function(ce){return arguments.length?this.each(typeof ce=="function"?function(){var C=ce.apply(this,arguments);this.textContent=C==null?"":C}:ce==null?function(){this.textContent=""}:function(){this.textContent=ce}):this.node().textContent},J.html=function(ce){return arguments.length?this.each(typeof ce=="function"?function(){var C=ce.apply(this,arguments);this.innerHTML=C==null?"":C}:ce==null?function(){this.innerHTML=""}:function(){this.innerHTML=ce}):this.node().innerHTML},J.append=function(ce){return ce=me(ce),this.select(function(){return this.appendChild(ce.apply(this,arguments))})},J.insert=function(ce,C){return ce=me(ce),C=ee(C),this.select(function(){return this.insertBefore(ce.apply(this,arguments),C.apply(this,arguments)||null)})},J.remove=function(){return this.each(ke)},J.data=function(ce,C){var z,B,G=-1,ae=this.length;if(!arguments.length){for(ce=new Array(ae=(z=this[0]).length);++G<ae;)(B=z[G])&&(ce[G]=B.__data__);return ce}function ue(He,Xe){var at,_t,St,Tt=He.length,kt=Xe.length,bt=Math.min(Tt,kt),Nt=new Array(kt),zt=new Array(kt),Ut=new Array(Tt);if(C){var nr,pr=new w,Mr=new Array(Tt);for(at=-1;++at<Tt;)(_t=He[at])&&(pr.has(nr=C.call(_t,_t.__data__,at))?Ut[at]=_t:pr.set(nr,_t),Mr[at]=nr);for(at=-1;++at<kt;)(_t=pr.get(nr=C.call(Xe,St=Xe[at],at)))?_t!==!0&&(Nt[at]=_t,_t.__data__=St):zt[at]=Te(St),pr.set(nr,!0);for(at=-1;++at<Tt;)at in Mr&&pr.get(Mr[at])!==!0&&(Ut[at]=He[at])}else{for(at=-1;++at<bt;)_t=He[at],St=Xe[at],_t?(_t.__data__=St,Nt[at]=_t):zt[at]=Te(St);for(;at<kt;++at)zt[at]=Te(Xe[at]);for(;at<Tt;++at)Ut[at]=He[at]}zt.update=Nt,zt.parentNode=Nt.parentNode=Ut.parentNode=He.parentNode,ge.push(zt),_e.push(Nt),Ee.push(Ut)}var ge=qe([]),_e=U([]),Ee=U([]);if(typeof ce=="function")for(;++G<ae;)ue(z=this[G],ce.call(z,z.parentNode.__data__,G));else for(;++G<ae;)ue(z=this[G],ce);return _e.enter=function(){return ge},_e.exit=function(){return Ee},_e},J.datum=function(ce){return arguments.length?this.property("__data__",ce):this.property("__data__")},J.filter=function(ce){var C,z,B,G=[];typeof ce!="function"&&(ce=Me(ce));for(var ae=0,ue=this.length;ae<ue;ae++){G.push(C=[]),C.parentNode=(z=this[ae]).parentNode;for(var ge=0,_e=z.length;ge<_e;ge++)(B=z[ge])&&ce.call(B,B.__data__,ge,ae)&&C.push(B)}return U(G)},J.order=function(){for(var ce=-1,C=this.length;++ce<C;)for(var z,B=this[ce],G=B.length-1,ae=B[G];--G>=0;)(z=B[G])&&(ae&&ae!==z.nextSibling&&ae.parentNode.insertBefore(z,ae),ae=z);return this},J.sort=function(ce){ce=Oe.apply(this,arguments);for(var C=-1,z=this.length;++C<z;)this[C].sort(ce);return this.order()},J.each=function(ce){return Fe(this,function(C,z,B){ce.call(C,C.__data__,z,B)})},J.call=function(ce){var C=x(arguments);return ce.apply(C[0]=this,C),this},J.empty=function(){return!this.node()},J.node=function(){for(var ce=0,C=this.length;ce<C;ce++)for(var z=this[ce],B=0,G=z.length;B<G;B++){var ae=z[B];if(ae)return ae}return null},J.size=function(){var ce=0;return Fe(this,function(){++ce}),ce};var et=[];function ze(ce){var C,z;return function(B,G,ae){var ue,ge=ce[ae].update,_e=ge.length;for(ae!=z&&(z=ae,C=0),G>=C&&(C=G+1);!(ue=ge[C])&&++C<_e;);return ue}}function Ue(ce,C,z){var B="__on"+ce,G=ce.indexOf("."),ae=Ze;G>0&&(ce=ce.slice(0,G));var ue=We.get(ce);function ge(){var _e=this[B];_e&&(this.removeEventListener(ce,_e,_e.$),delete this[B])}return ue&&(ce=ue,ae=nt),G?C?function(){var _e=ae(C,x(arguments));ge.call(this),this.addEventListener(ce,this[B]=_e,_e.$=z),_e._=C}:ge:C?V:function(){var _e,Ee=new RegExp("^__on([^.]+)"+o.requote(ce)+"$");for(var He in this)if(_e=He.match(Ee)){var Xe=this[He];this.removeEventListener(_e[1],Xe,Xe.$),delete this[He]}}}o.selection.enter=qe,o.selection.enter.prototype=et,et.append=J.append,et.empty=J.empty,et.node=J.node,et.call=J.call,et.size=J.size,et.select=function(ce){for(var C,z,B,G,ae,ue=[],ge=-1,_e=this.length;++ge<_e;){B=(G=this[ge]).update,ue.push(C=[]),C.parentNode=G.parentNode;for(var Ee=-1,He=G.length;++Ee<He;)(ae=G[Ee])?(C.push(B[Ee]=z=ce.call(G.parentNode,ae.__data__,Ee,ge)),z.__data__=ae.__data__):C.push(null)}return U(ue)},et.insert=function(ce,C){return arguments.length<2&&(C=ze(this)),J.insert.call(this,ce,C)},o.select=function(ce){var C;return typeof ce=="string"?(C=[te(ce,y)]).parentNode=y.documentElement:(C=[ce]).parentNode=e(ce),U([C])},o.selectAll=function(ce){var C;return typeof ce=="string"?(C=x(j(ce,y))).parentNode=y.documentElement:(C=x(ce)).parentNode=null,U([C])},J.on=function(ce,C,z){var B=arguments.length;if(B<3){if(typeof ce!="string"){for(z in B<2&&(C=!1),ce)this.each(Ue(z,ce[z],C));return this}if(B<2)return(B=this.node()["__on"+ce])&&B._;z=!1}return this.each(Ue(ce,C,z))};var We=o.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ze(ce,C){return function(z){var B=o.event;o.event=z,C[0]=this.__data__;try{ce.apply(this,C)}finally{o.event=B}}}function nt(ce,C){var z=Ze(ce,C);return function(B){var G=B.relatedTarget;G&&(G===this||8&G.compareDocumentPosition(this))||z.call(this,B)}}y&&We.forEach(function(ce){"on"+ce in y&&We.remove(ce)});var ft,xt=0;function It(ce){var C=".dragsuppress-"+ ++xt,z="click"+C,B=o.select(r(ce)).on("touchmove"+C,Z).on("dragstart"+C,Z).on("selectstart"+C,Z);if(ft==null&&(ft=!("onselectstart"in ce)&&F(ce.style,"userSelect")),ft){var G=e(ce).style,ae=G[ft];G[ft]="none"}return function(ue){if(B.on(C,null),ft&&(G[ft]=ae),ue){var ge=function(){B.on(z,null)};B.on(z,function(){Z(),ge()},!0),setTimeout(ge,0)}}}o.mouse=function(ce){return it(ce,$())};var Et=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function it(ce,C){C.changedTouches&&(C=C.changedTouches[0]);var z=ce.ownerSVGElement||ce;if(z.createSVGPoint){var B=z.createSVGPoint();if(Et<0){var G=r(ce);if(G.scrollX||G.scrollY){var ae=(z=o.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Et=!(ae.f||ae.e),z.remove()}}return Et?(B.x=C.pageX,B.y=C.pageY):(B.x=C.clientX,B.y=C.clientY),[(B=B.matrixTransform(ce.getScreenCTM().inverse())).x,B.y]}var ue=ce.getBoundingClientRect();return[C.clientX-ue.left-ce.clientLeft,C.clientY-ue.top-ce.clientTop]}function rt(){return o.event.changedTouches[0].identifier}o.touch=function(ce,C,z){if(arguments.length<3&&(z=C,C=$().changedTouches),C){for(var B,G=0,ae=C.length;G<ae;++G)if((B=C[G]).identifier===z)return it(ce,B)}},o.behavior.drag=function(){var ce=re(G,"drag","dragstart","dragend"),C=null,z=ae(V,o.mouse,r,"mousemove","mouseup"),B=ae(rt,o.touch,E,"touchmove","touchend");function G(){this.on("mousedown.drag",z).on("touchstart.drag",B)}function ae(ue,ge,_e,Ee,He){return function(){var Xe,at=this,_t=o.event.target.correspondingElement||o.event.target,St=at.parentNode,Tt=ce.of(at,arguments),kt=0,bt=ue(),Nt=".drag"+(bt==null?"":"-"+bt),zt=o.select(_e(_t)).on(Ee+Nt,pr).on(He+Nt,Mr),Ut=It(_t),nr=ge(St,bt);function pr(){var kr,Qr,$r=ge(St,bt);$r&&(kr=$r[0]-nr[0],Qr=$r[1]-nr[1],kt|=kr|Qr,nr=$r,Tt({type:"drag",x:$r[0]+Xe[0],y:$r[1]+Xe[1],dx:kr,dy:Qr}))}function Mr(){ge(St,bt)&&(zt.on(Ee+Nt,null).on(He+Nt,null),Ut(kt),Tt({type:"dragend"}))}Xe=C?[(Xe=C.apply(at,arguments)).x-nr[0],Xe.y-nr[1]]:[0,0],Tt({type:"dragstart"})}}return G.origin=function(ue){return arguments.length?(C=ue,G):C},o.rebind(G,ce,"on")},o.touches=function(ce,C){return arguments.length<2&&(C=$().touches),C?x(C).map(function(z){var B=it(ce,z);return B.identifier=z.identifier,B}):[]};var At=1e-6,Gt=Math.PI,Qt=2*Gt,Ve=Qt-At,Ye=Gt/2,Be=Gt/180,Je=180/Gt;function Se(ce){return ce>1?Ye:ce<-1?-Ye:Math.asin(ce)}function Pe(ce){return((ce=Math.exp(ce))+1/ce)/2}var De=Math.SQRT2;o.interpolateZoom=function(ce,C){var z,B,G=ce[0],ae=ce[1],ue=ce[2],ge=C[0],_e=C[1],Ee=C[2],He=ge-G,Xe=_e-ae,at=He*He+Xe*Xe;if(at<1e-12)B=Math.log(Ee/ue)/De,z=function(Nt){return[G+Nt*He,ae+Nt*Xe,ue*Math.exp(De*Nt*B)]};else{var _t=Math.sqrt(at),St=(Ee*Ee-ue*ue+4*at)/(2*ue*2*_t),Tt=(Ee*Ee-ue*ue-4*at)/(2*Ee*2*_t),kt=Math.log(Math.sqrt(St*St+1)-St),bt=Math.log(Math.sqrt(Tt*Tt+1)-Tt);B=(bt-kt)/De,z=function(Nt){var zt,Ut=Nt*B,nr=Pe(kt),pr=ue/(2*_t)*(nr*(zt=De*Ut+kt,((zt=Math.exp(2*zt))-1)/(zt+1))-function(Mr){return((Mr=Math.exp(Mr))-1/Mr)/2}(kt));return[G+pr*He,ae+pr*Xe,ue*nr/Pe(De*Ut+kt)]}}return z.duration=1e3*B,z},o.behavior.zoom=function(){var ce,C,z,B,G,ae,ue,ge,_e,Ee={x:0,y:0,k:1},He=[960,500],Xe=st,at=250,_t=0,St="mousedown.zoom",Tt="mousemove.zoom",kt="mouseup.zoom",bt="touchstart.zoom",Nt=re(zt,"zoomstart","zoom","zoomend");function zt(Hr){Hr.on(St,sn).on($e+".zoom",Wn).on("dblclick.zoom",li).on(bt,Un)}function Ut(Hr){return[(Hr[0]-Ee.x)/Ee.k,(Hr[1]-Ee.y)/Ee.k]}function nr(Hr){Ee.k=Math.max(Xe[0],Math.min(Xe[1],Hr))}function pr(Hr,kn){kn=function(Zn){return[Zn[0]*Ee.k+Ee.x,Zn[1]*Ee.k+Ee.y]}(kn),Ee.x+=Hr[0]-kn[0],Ee.y+=Hr[1]-kn[1]}function Mr(Hr,kn,Zn,qn){Hr.__chart__={x:Ee.x,y:Ee.y,k:Ee.k},nr(Math.pow(2,qn)),pr(C=kn,Zn),Hr=o.select(Hr),at>0&&(Hr=Hr.transition().duration(at)),Hr.call(zt.event)}function kr(){ue&&ue.domain(ae.range().map(function(Hr){return(Hr-Ee.x)/Ee.k}).map(ae.invert)),_e&&_e.domain(ge.range().map(function(Hr){return(Hr-Ee.y)/Ee.k}).map(ge.invert))}function Qr(Hr){_t++||Hr({type:"zoomstart"})}function $r(Hr){kr(),Hr({type:"zoom",scale:Ee.k,translate:[Ee.x,Ee.y]})}function pn(Hr){--_t||(Hr({type:"zoomend"}),C=null)}function sn(){var Hr=this,kn=Nt.of(Hr,arguments),Zn=0,qn=o.select(r(Hr)).on(Tt,ki).on(kt,Jn),ei=Ut(o.mouse(Hr)),ui=It(Hr);function ki(){Zn=1,pr(o.mouse(Hr),ei),$r(kn)}function Jn(){qn.on(Tt,null).on(kt,null),ui(Zn),pn(kn)}Hs.call(Hr),Qr(kn)}function Un(){var Hr,kn=this,Zn=Nt.of(kn,arguments),qn={},ei=0,ui=".zoom-"+o.event.changedTouches[0].identifier,ki="touchmove"+ui,Jn="touchend"+ui,yi=[],mi=o.select(kn),Ei=It(kn);function xi(){var Ia=o.touches(kn);return Hr=Ee.k,Ia.forEach(function(Oa){Oa.identifier in qn&&(qn[Oa.identifier]=Ut(Oa))}),Ia}function Li(){var Ia=o.event.target;o.select(Ia).on(ki,Bi).on(Jn,ca),yi.push(Ia);for(var Oa=o.event.changedTouches,la=0,Aa=Oa.length;la<Aa;++la)qn[Oa[la].identifier]=null;var ma=xi(),_o=Date.now();if(ma.length===1){if(_o-G<500){var Wa=ma[0];Mr(kn,Wa,qn[Wa.identifier],Math.floor(Math.log(Ee.k)/Math.LN2)+1),Z()}G=_o}else if(ma.length>1){Wa=ma[0];var No=ma[1],Rs=Wa[0]-No[0],ol=Wa[1]-No[1];ei=Rs*Rs+ol*ol}}function Bi(){var Ia,Oa,la,Aa,ma=o.touches(kn);Hs.call(kn);for(var _o=0,Wa=ma.length;_o<Wa;++_o,Aa=null)if(la=ma[_o],Aa=qn[la.identifier]){if(Oa)break;Ia=la,Oa=Aa}if(Aa){var No=(No=la[0]-Ia[0])*No+(No=la[1]-Ia[1])*No,Rs=ei&&Math.sqrt(No/ei);Ia=[(Ia[0]+la[0])/2,(Ia[1]+la[1])/2],Oa=[(Oa[0]+Aa[0])/2,(Oa[1]+Aa[1])/2],nr(Rs*Hr)}G=null,pr(Ia,Oa),$r(Zn)}function ca(){if(o.event.touches.length){for(var Ia=o.event.changedTouches,Oa=0,la=Ia.length;Oa<la;++Oa)delete qn[Ia[Oa].identifier];for(var Aa in qn)return void xi()}o.selectAll(yi).on(ui,null),mi.on(St,sn).on(bt,Un),Ei(),pn(Zn)}Li(),Qr(Zn),mi.on(St,null).on(bt,Li)}function Wn(){var Hr=Nt.of(this,arguments);B?clearTimeout(B):(Hs.call(this),ce=Ut(C=z||o.mouse(this)),Qr(Hr)),B=setTimeout(function(){B=null,pn(Hr)},50),Z(),nr(Math.pow(2,.002*Ie())*Ee.k),pr(C,ce),$r(Hr)}function li(){var Hr=o.mouse(this),kn=Math.log(Ee.k)/Math.LN2;Mr(this,Hr,Ut(Hr),o.event.shiftKey?Math.ceil(kn)-1:Math.floor(kn)+1)}return $e||($e="onwheel"in y?(Ie=function(){return-o.event.deltaY*(o.event.deltaMode?120:1)},"wheel"):"onmousewheel"in y?(Ie=function(){return o.event.wheelDelta},"mousewheel"):(Ie=function(){return-o.event.detail},"MozMousePixelScroll")),zt.event=function(Hr){Hr.each(function(){var kn=Nt.of(this,arguments),Zn=Ee;Ms?o.select(this).transition().each("start.zoom",function(){Ee=this.__chart__||{x:0,y:0,k:1},Qr(kn)}).tween("zoom:zoom",function(){var qn=He[0],ei=He[1],ui=C?C[0]:qn/2,ki=C?C[1]:ei/2,Jn=o.interpolateZoom([(ui-Ee.x)/Ee.k,(ki-Ee.y)/Ee.k,qn/Ee.k],[(ui-Zn.x)/Zn.k,(ki-Zn.y)/Zn.k,qn/Zn.k]);return function(yi){var mi=Jn(yi),Ei=qn/mi[2];this.__chart__=Ee={x:ui-mi[0]*Ei,y:ki-mi[1]*Ei,k:Ei},$r(kn)}}).each("interrupt.zoom",function(){pn(kn)}).each("end.zoom",function(){pn(kn)}):(this.__chart__=Ee,Qr(kn),$r(kn),pn(kn))})},zt.translate=function(Hr){return arguments.length?(Ee={x:+Hr[0],y:+Hr[1],k:Ee.k},kr(),zt):[Ee.x,Ee.y]},zt.scale=function(Hr){return arguments.length?(Ee={x:Ee.x,y:Ee.y,k:null},nr(+Hr),kr(),zt):Ee.k},zt.scaleExtent=function(Hr){return arguments.length?(Xe=Hr==null?st:[+Hr[0],+Hr[1]],zt):Xe},zt.center=function(Hr){return arguments.length?(z=Hr&&[+Hr[0],+Hr[1]],zt):z},zt.size=function(Hr){return arguments.length?(He=Hr&&[+Hr[0],+Hr[1]],zt):He},zt.duration=function(Hr){return arguments.length?(at=+Hr,zt):at},zt.x=function(Hr){return arguments.length?(ue=Hr,ae=Hr.copy(),Ee={x:0,y:0,k:1},zt):ue},zt.y=function(Hr){return arguments.length?(_e=Hr,ge=Hr.copy(),Ee={x:0,y:0,k:1},zt):_e},o.rebind(zt,Nt,"on")};var Ie,$e,st=[0,1/0];function dt(){}function ut(ce,C,z){return this instanceof ut?(this.h=+ce,this.s=+C,void(this.l=+z)):arguments.length<2?ce instanceof ut?new ut(ce.h,ce.s,ce.l):gr(""+ce,dr,ut):new ut(ce,C,z)}o.color=dt,dt.prototype.toString=function(){return this.rgb()+""},o.hsl=ut;var Lt=ut.prototype=new dt;function lt(ce,C,z){var B,G;function ae(ue){return Math.round(255*function(ge){return ge>360?ge-=360:ge<0&&(ge+=360),ge<60?B+(G-B)*ge/60:ge<180?G:ge<240?B+(G-B)*(240-ge)/60:B}(ue))}return ce=isNaN(ce)?0:(ce%=360)<0?ce+360:ce,C=isNaN(C)||C<0?0:C>1?1:C,B=2*(z=z<0?0:z>1?1:z)-(G=z<=.5?z*(1+C):z+C-z*C),new Vt(ae(ce+120),ae(ce),ae(ce-120))}function Ct(ce,C,z){return this instanceof Ct?(this.h=+ce,this.c=+C,void(this.l=+z)):arguments.length<2?ce instanceof Ct?new Ct(ce.h,ce.c,ce.l):Re(ce instanceof mt?ce.l:(ce=ur((ce=o.rgb(ce)).r,ce.g,ce.b)).l,ce.a,ce.b):new Ct(ce,C,z)}Lt.brighter=function(ce){return ce=Math.pow(.7,arguments.length?ce:1),new ut(this.h,this.s,this.l/ce)},Lt.darker=function(ce){return ce=Math.pow(.7,arguments.length?ce:1),new ut(this.h,this.s,ce*this.l)},Lt.rgb=function(){return lt(this.h,this.s,this.l)},o.hcl=Ct;var Pt=Ct.prototype=new dt;function Ke(ce,C,z){return isNaN(ce)&&(ce=0),isNaN(C)&&(C=0),new mt(z,Math.cos(ce*=Be)*C,Math.sin(ce)*C)}function mt(ce,C,z){return this instanceof mt?(this.l=+ce,this.a=+C,void(this.b=+z)):arguments.length<2?ce instanceof mt?new mt(ce.l,ce.a,ce.b):ce instanceof Ct?Ke(ce.h,ce.c,ce.l):ur((ce=Vt(ce)).r,ce.g,ce.b):new mt(ce,C,z)}Pt.brighter=function(ce){return new Ct(this.h,this.c,Math.min(100,this.l+Dt*(arguments.length?ce:1)))},Pt.darker=function(ce){return new Ct(this.h,this.c,Math.max(0,this.l-Dt*(arguments.length?ce:1)))},Pt.rgb=function(){return Ke(this.h,this.c,this.l).rgb()},o.lab=mt;var Dt=18,Bt=mt.prototype=new dt;function Zt(ce,C,z){var B=(ce+16)/116,G=B+C/500,ae=B-z/200;return new Vt(Rt(3.2404542*(G=.95047*ct(G))-1.5371385*(B=1*ct(B))-.4985314*(ae=1.08883*ct(ae))),Rt(-.969266*G+1.8760108*B+.041556*ae),Rt(.0556434*G-.2040259*B+1.0572252*ae))}function Re(ce,C,z){return ce>0?new Ct(Math.atan2(z,C)*Je,Math.sqrt(C*C+z*z),ce):new Ct(NaN,NaN,ce)}function ct(ce){return ce>.206893034?ce*ce*ce:(ce-4/29)/7.787037}function wt(ce){return ce>.008856?Math.pow(ce,1/3):7.787037*ce+4/29}function Rt(ce){return Math.round(255*(ce<=.00304?12.92*ce:1.055*Math.pow(ce,1/2.4)-.055))}function Vt(ce,C,z){return this instanceof Vt?(this.r=~~ce,this.g=~~C,void(this.b=~~z)):arguments.length<2?ce instanceof Vt?new Vt(ce.r,ce.g,ce.b):gr(""+ce,Vt,lt):new Vt(ce,C,z)}function rr(ce){return new Vt(ce>>16,ce>>8&255,255&ce)}function qt(ce){return rr(ce)+""}Bt.brighter=function(ce){return new mt(Math.min(100,this.l+Dt*(arguments.length?ce:1)),this.a,this.b)},Bt.darker=function(ce){return new mt(Math.max(0,this.l-Dt*(arguments.length?ce:1)),this.a,this.b)},Bt.rgb=function(){return Zt(this.l,this.a,this.b)},o.rgb=Vt;var Jt=Vt.prototype=new dt;function or(ce){return ce<16?"0"+Math.max(0,ce).toString(16):Math.min(255,ce).toString(16)}function gr(ce,C,z){var B,G,ae,ue=0,ge=0,_e=0;if(B=/([a-z]+)\((.*)\)/.exec(ce=ce.toLowerCase()))switch(G=B[2].split(","),B[1]){case"hsl":return z(parseFloat(G[0]),parseFloat(G[1])/100,parseFloat(G[2])/100);case"rgb":return C(mr(G[0]),mr(G[1]),mr(G[2]))}return(ae=Dr.get(ce))?C(ae.r,ae.g,ae.b):(ce==null||ce.charAt(0)!=="#"||isNaN(ae=parseInt(ce.slice(1),16))||(ce.length===4?(ue=(3840&ae)>>4,ue|=ue>>4,ge=240&ae,ge|=ge>>4,_e=15&ae,_e|=_e<<4):ce.length===7&&(ue=(16711680&ae)>>16,ge=(65280&ae)>>8,_e=255&ae)),C(ue,ge,_e))}function dr(ce,C,z){var B,G,ae=Math.min(ce/=255,C/=255,z/=255),ue=Math.max(ce,C,z),ge=ue-ae,_e=(ue+ae)/2;return ge?(G=_e<.5?ge/(ue+ae):ge/(2-ue-ae),B=ce==ue?(C-z)/ge+(C<z?6:0):C==ue?(z-ce)/ge+2:(ce-C)/ge+4,B*=60):(B=NaN,G=_e>0&&_e<1?0:B),new ut(B,G,_e)}function ur(ce,C,z){var B=wt((.4124564*(ce=cr(ce))+.3575761*(C=cr(C))+.1804375*(z=cr(z)))/.95047),G=wt((.2126729*ce+.7151522*C+.072175*z)/1);return mt(116*G-16,500*(B-G),200*(G-wt((.0193339*ce+.119192*C+.9503041*z)/1.08883)))}function cr(ce){return(ce/=255)<=.04045?ce/12.92:Math.pow((ce+.055)/1.055,2.4)}function mr(ce){var C=parseFloat(ce);return ce.charAt(ce.length-1)==="%"?Math.round(2.55*C):C}Jt.brighter=function(ce){ce=Math.pow(.7,arguments.length?ce:1);var C=this.r,z=this.g,B=this.b,G=30;return C||z||B?(C&&C<G&&(C=G),z&&z<G&&(z=G),B&&B<G&&(B=G),new Vt(Math.min(255,C/ce),Math.min(255,z/ce),Math.min(255,B/ce))):new Vt(G,G,G)},Jt.darker=function(ce){return new Vt((ce=Math.pow(.7,arguments.length?ce:1))*this.r,ce*this.g,ce*this.b)},Jt.hsl=function(){return dr(this.r,this.g,this.b)},Jt.toString=function(){return"#"+or(this.r)+or(this.g)+or(this.b)};var Dr=o.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function yr(ce){return typeof ce=="function"?ce:function(){return ce}}function Br(ce){return function(C,z,B){return arguments.length===2&&typeof z=="function"&&(B=z,z=null),Kr(C,z,ce,B)}}function Kr(ce,C,z,B){var G={},ae=o.dispatch("beforesend","progress","load","error"),ue={},ge=new XMLHttpRequest,_e=null;function Ee(){var He,Xe=ge.status;if(!Xe&&function(at){var _t=at.responseType;return _t&&_t!=="text"?at.response:at.responseText}(ge)||Xe>=200&&Xe<300||Xe===304){try{He=z.call(G,ge)}catch(at){return void ae.error.call(G,at)}ae.load.call(G,He)}else ae.error.call(G,ge)}return self.XDomainRequest&&!("withCredentials"in ge)&&/^(http(s)?:)?\/\//.test(ce)&&(ge=new XDomainRequest),"onload"in ge?ge.onload=ge.onerror=Ee:ge.onreadystatechange=function(){ge.readyState>3&&Ee()},ge.onprogress=function(He){var Xe=o.event;o.event=He;try{ae.progress.call(G,ge)}finally{o.event=Xe}},G.header=function(He,Xe){return He=(He+"").toLowerCase(),arguments.length<2?ue[He]:(Xe==null?delete ue[He]:ue[He]=Xe+"",G)},G.mimeType=function(He){return arguments.length?(C=He==null?null:He+"",G):C},G.responseType=function(He){return arguments.length?(_e=He,G):_e},G.response=function(He){return z=He,G},["get","post"].forEach(function(He){G[He]=function(){return G.send.apply(G,[He].concat(x(arguments)))}}),G.send=function(He,Xe,at){if(arguments.length===2&&typeof Xe=="function"&&(at=Xe,Xe=null),ge.open(He,ce,!0),C==null||"accept"in ue||(ue.accept=C+",*/*"),ge.setRequestHeader)for(var _t in ue)ge.setRequestHeader(_t,ue[_t]);return C!=null&&ge.overrideMimeType&&ge.overrideMimeType(C),_e!=null&&(ge.responseType=_e),at!=null&&G.on("error",at).on("load",function(St){at(null,St)}),ae.beforesend.call(G,ge),ge.send(Xe==null?null:Xe),G},G.abort=function(){return ge.abort(),G},o.rebind(G,ae,"on"),B==null?G:G.get(function(He){return He.length===1?function(Xe,at){He(Xe==null?at:null)}:He}(B))}Dr.forEach(function(ce,C){Dr.set(ce,rr(C))}),o.functor=yr,o.xhr=Br(E),o.dsv=function(ce,C){var z=new RegExp('["'+ce+`
]`),B=ce.charCodeAt(0);function G(Ee,He,Xe){arguments.length<3&&(Xe=He,He=null);var at=Kr(Ee,C,He==null?ae:ue(He),Xe);return at.row=function(_t){return arguments.length?at.response((He=_t)==null?ae:ue(_t)):He},at}function ae(Ee){return G.parse(Ee.responseText)}function ue(Ee){return function(He){return G.parse(He.responseText,Ee)}}function ge(Ee){return Ee.map(_e).join(ce)}function _e(Ee){return z.test(Ee)?'"'+Ee.replace(/\"/g,'""')+'"':Ee}return G.parse=function(Ee,He){var Xe;return G.parseRows(Ee,function(at,_t){if(Xe)return Xe(at,_t-1);var St=function(Tt){for(var kt={},bt=at.length,Nt=0;Nt<bt;++Nt)kt[at[Nt]]=Tt[Nt];return kt};Xe=He?function(Tt,kt){return He(St(Tt),kt)}:St})},G.parseRows=function(Ee,He){var Xe,at,_t={},St={},Tt=[],kt=Ee.length,bt=0,Nt=0;function zt(){if(bt>=kt)return St;if(at)return at=!1,_t;var nr=bt;if(Ee.charCodeAt(nr)===34){for(var pr=nr;pr++<kt;)if(Ee.charCodeAt(pr)===34){if(Ee.charCodeAt(pr+1)!==34)break;++pr}return bt=pr+2,(Mr=Ee.charCodeAt(pr+1))===13?(at=!0,Ee.charCodeAt(pr+2)===10&&++bt):Mr===10&&(at=!0),Ee.slice(nr+1,pr).replace(/""/g,'"')}for(;bt<kt;){var Mr,kr=1;if((Mr=Ee.charCodeAt(bt++))===10)at=!0;else if(Mr===13)at=!0,Ee.charCodeAt(bt)===10&&(++bt,++kr);else if(Mr!==B)continue;return Ee.slice(nr,bt-kr)}return Ee.slice(nr)}for(;(Xe=zt())!==St;){for(var Ut=[];Xe!==_t&&Xe!==St;)Ut.push(Xe),Xe=zt();He&&(Ut=He(Ut,Nt++))==null||Tt.push(Ut)}return Tt},G.format=function(Ee){if(Array.isArray(Ee[0]))return G.formatRows(Ee);var He=new S,Xe=[];return Ee.forEach(function(at){for(var _t in at)He.has(_t)||Xe.push(He.add(_t))}),[Xe.map(_e).join(ce)].concat(Ee.map(function(at){return Xe.map(function(_t){return _e(at[_t])}).join(ce)})).join(`
`)},G.formatRows=function(Ee){return Ee.map(ge).join(`
`)},G},o.csv=o.dsv(",","text/csv"),o.tsv=o.dsv("	","text/tab-separated-values");var an,Ln,Pn,An,tn=this[F(this,"requestAnimationFrame")]||function(ce){setTimeout(ce,17)};function zr(ce,C,z){var B=arguments.length;B<2&&(C=0),B<3&&(z=Date.now());var G=z+C,ae={c:ce,t:G,n:null};return Ln?Ln.n=ae:an=ae,Ln=ae,Pn||(An=clearTimeout(An),Pn=1,tn(Ar)),ae}function Ar(){var ce=qr(),C=On()-ce;C>24?(isFinite(C)&&(clearTimeout(An),An=setTimeout(Ar,C)),Pn=0):(Pn=1,tn(Ar))}function qr(){for(var ce=Date.now(),C=an;C;)ce>=C.t&&C.c(ce-C.t)&&(C.c=null),C=C.n;return ce}function On(){for(var ce,C=an,z=1/0;C;)C.c?(C.t<z&&(z=C.t),C=(ce=C).n):C=ce?ce.n=C.n:an=C.n;return Ln=ce,z}function Fr(ce){return ce[0]}function on(ce){return ce[1]}function Mn(ce){for(var C,z,B,G=ce.length,ae=[0,1],ue=2,ge=2;ge<G;ge++){for(;ue>1&&(C=ce[ae[ue-2]],z=ce[ae[ue-1]],B=ce[ge],(z[0]-C[0])*(B[1]-C[1])-(z[1]-C[1])*(B[0]-C[0])<=0);)--ue;ae[ue++]=ge}return ae.slice(0,ue)}function bn(ce,C){return ce[0]-C[0]||ce[1]-C[1]}o.timer=function(){zr.apply(this,arguments)},o.timer.flush=function(){qr(),On()},o.round=function(ce,C){return C?Math.round(ce*(C=Math.pow(10,C)))/C:Math.round(ce)},o.geom={},o.geom.hull=function(ce){var C=Fr,z=on;if(arguments.length)return B(ce);function B(G){if(G.length<3)return[];var ae,ue=yr(C),ge=yr(z),_e=G.length,Ee=[],He=[];for(ae=0;ae<_e;ae++)Ee.push([+ue.call(this,G[ae],ae),+ge.call(this,G[ae],ae),ae]);for(Ee.sort(bn),ae=0;ae<_e;ae++)He.push([Ee[ae][0],-Ee[ae][1]]);var Xe=Mn(Ee),at=Mn(He),_t=at[0]===Xe[0],St=at[at.length-1]===Xe[Xe.length-1],Tt=[];for(ae=Xe.length-1;ae>=0;--ae)Tt.push(G[Ee[Xe[ae]][2]]);for(ae=+_t;ae<at.length-St;++ae)Tt.push(G[Ee[at[ae]][2]]);return Tt}return B.x=function(G){return arguments.length?(C=G,B):C},B.y=function(G){return arguments.length?(z=G,B):z},B},o.geom.polygon=function(ce){return N(ce,Dn),ce};var Dn=o.geom.polygon.prototype=[];function tr(ce,C,z){return(z[0]-C[0])*(ce[1]-C[1])<(z[1]-C[1])*(ce[0]-C[0])}function Ot(ce,C,z,B){var G=ce[0],ae=z[0],ue=C[0]-G,ge=B[0]-ae,_e=ce[1],Ee=z[1],He=C[1]-_e,Xe=B[1]-Ee,at=(ge*(_e-Ee)-Xe*(G-ae))/(Xe*ue-ge*He);return[G+at*ue,_e+at*He]}function Ht(ce){var C=ce[0],z=ce[ce.length-1];return!(C[0]-z[0]||C[1]-z[1])}Dn.area=function(){for(var ce,C=-1,z=this.length,B=this[z-1],G=0;++C<z;)ce=B,B=this[C],G+=ce[1]*B[0]-ce[0]*B[1];return .5*G},Dn.centroid=function(ce){var C,z,B=-1,G=this.length,ae=0,ue=0,ge=this[G-1];for(arguments.length||(ce=-1/(6*this.area()));++B<G;)C=ge,ge=this[B],z=C[0]*ge[1]-ge[0]*C[1],ae+=(C[0]+ge[0])*z,ue+=(C[1]+ge[1])*z;return[ae*ce,ue*ce]},Dn.clip=function(ce){for(var C,z,B,G,ae,ue,ge=Ht(ce),_e=-1,Ee=this.length-Ht(this),He=this[Ee-1];++_e<Ee;){for(C=ce.slice(),ce.length=0,G=this[_e],ae=C[(B=C.length-ge)-1],z=-1;++z<B;)tr(ue=C[z],He,G)?(tr(ae,He,G)||ce.push(Ot(ae,ue,He,G)),ce.push(ue)):tr(ae,He,G)&&ce.push(Ot(ae,ue,He,G)),ae=ue;ge&&ce.push(ce[0]),He=G}return ce};var fr,Tr,Wr,Gr,wr,br=[],Sr=[];function Ir(){ia(this),this.edge=this.site=this.circle=null}function Er(ce){var C=br.pop()||new Ir;return C.site=ce,C}function Xr(ce){Sn(ce),Wr.remove(ce),br.push(ce),ia(ce)}function fn(ce){var C=ce.circle,z=C.x,B=C.cy,G={x:z,y:B},ae=ce.P,ue=ce.N,ge=[ce];Xr(ce);for(var _e=ae;_e.circle&&c(z-_e.circle.x)<At&&c(B-_e.circle.cy)<At;)ae=_e.P,ge.unshift(_e),Xr(_e),_e=ae;ge.unshift(_e),Sn(_e);for(var Ee=ue;Ee.circle&&c(z-Ee.circle.x)<At&&c(B-Ee.circle.cy)<At;)ue=Ee.N,ge.push(Ee),Xr(Ee),Ee=ue;ge.push(Ee),Sn(Ee);var He,Xe=ge.length;for(He=1;He<Xe;++He)Ee=ge[He],_e=ge[He-1],hi(Ee.edge,_e.site,Ee.site,G);_e=ge[0],(Ee=ge[Xe-1]).edge=vn(_e.site,Ee.site,null,G),gn(_e),gn(Ee)}function _n(ce){for(var C,z,B,G,ae=ce.x,ue=ce.y,ge=Wr._;ge;)if((B=en(ge,ue)-ae)>At)ge=ge.L;else{if(!((G=ae-yn(ge,ue))>At)){B>-At?(C=ge.P,z=ge):G>-At?(C=ge,z=ge.N):C=z=ge;break}if(!ge.R){C=ge;break}ge=ge.R}var _e=Er(ce);if(Wr.insert(C,_e),C||z){if(C===z)return Sn(C),z=Er(C.site),Wr.insert(_e,z),_e.edge=z.edge=vn(C.site,_e.site),gn(C),void gn(z);if(z){Sn(C),Sn(z);var Ee=C.site,He=Ee.x,Xe=Ee.y,at=ce.x-He,_t=ce.y-Xe,St=z.site,Tt=St.x-He,kt=St.y-Xe,bt=2*(at*kt-_t*Tt),Nt=at*at+_t*_t,zt=Tt*Tt+kt*kt,Ut={x:(kt*Nt-_t*zt)/bt+He,y:(at*zt-Tt*Nt)/bt+Xe};hi(z.edge,Ee,St,Ut),_e.edge=vn(Ee,ce,null,Ut),z.edge=vn(ce,St,null,Ut),gn(C),gn(z)}else _e.edge=vn(C.site,_e.site)}}function en(ce,C){var z=ce.site,B=z.x,G=z.y,ae=G-C;if(!ae)return B;var ue=ce.P;if(!ue)return-1/0;var ge=(z=ue.site).x,_e=z.y,Ee=_e-C;if(!Ee)return ge;var He=ge-B,Xe=1/ae-1/Ee,at=He/Ee;return Xe?(-at+Math.sqrt(at*at-2*Xe*(He*He/(-2*Ee)-_e+Ee/2+G-ae/2)))/Xe+B:(B+ge)/2}function yn(ce,C){var z=ce.N;if(z)return en(z,C);var B=ce.site;return B.y===C?B.x:1/0}function Vr(ce){this.site=ce,this.edges=[]}function Ur(ce,C){return C.angle-ce.angle}function ln(){ia(this),this.x=this.y=this.arc=this.site=this.cy=null}function gn(ce){var C=ce.P,z=ce.N;if(C&&z){var B=C.site,G=ce.site,ae=z.site;if(B!==ae){var ue=G.x,ge=G.y,_e=B.x-ue,Ee=B.y-ge,He=ae.x-ue,Xe=2*(_e*(kt=ae.y-ge)-Ee*He);if(!(Xe>=-1e-12)){var at=_e*_e+Ee*Ee,_t=He*He+kt*kt,St=(kt*at-Ee*_t)/Xe,Tt=(_e*_t-He*at)/Xe,kt=Tt+ge,bt=Sr.pop()||new ln;bt.arc=ce,bt.site=G,bt.x=St+ue,bt.y=kt+Math.sqrt(St*St+Tt*Tt),bt.cy=kt,ce.circle=bt;for(var Nt=null,zt=wr._;zt;)if(bt.y<zt.y||bt.y===zt.y&&bt.x<=zt.x){if(!zt.L){Nt=zt.P;break}zt=zt.L}else{if(!zt.R){Nt=zt;break}zt=zt.R}wr.insert(Nt,bt),Nt||(Gr=bt)}}}}function Sn(ce){var C=ce.circle;C&&(C.P||(Gr=C.N),wr.remove(C),Sr.push(C),ia(C),ce.circle=null)}function oi(ce,C){var z=ce.b;if(z)return!0;var B,G,ae=ce.a,ue=C[0][0],ge=C[1][0],_e=C[0][1],Ee=C[1][1],He=ce.l,Xe=ce.r,at=He.x,_t=He.y,St=Xe.x,Tt=Xe.y,kt=(at+St)/2,bt=(_t+Tt)/2;if(Tt===_t){if(kt<ue||kt>=ge)return;if(at>St){if(ae){if(ae.y>=Ee)return}else ae={x:kt,y:_e};z={x:kt,y:Ee}}else{if(ae){if(ae.y<_e)return}else ae={x:kt,y:Ee};z={x:kt,y:_e}}}else if(G=bt-(B=(at-St)/(Tt-_t))*kt,B<-1||B>1)if(at>St){if(ae){if(ae.y>=Ee)return}else ae={x:(_e-G)/B,y:_e};z={x:(Ee-G)/B,y:Ee}}else{if(ae){if(ae.y<_e)return}else ae={x:(Ee-G)/B,y:Ee};z={x:(_e-G)/B,y:_e}}else if(_t<Tt){if(ae){if(ae.x>=ge)return}else ae={x:ue,y:B*ue+G};z={x:ge,y:B*ge+G}}else{if(ae){if(ae.x<ue)return}else ae={x:ge,y:B*ge+G};z={x:ue,y:B*ue+G}}return ce.a=ae,ce.b=z,!0}function Yn(ce,C){this.l=ce,this.r=C,this.a=this.b=null}function vn(ce,C,z,B){var G=new Yn(ce,C);return fr.push(G),z&&hi(G,ce,C,z),B&&hi(G,C,ce,B),Tr[ce.i].edges.push(new Xi(G,ce,C)),Tr[C.i].edges.push(new Xi(G,C,ce)),G}function ri(ce,C,z){var B=new Yn(ce,null);return B.a=C,B.b=z,fr.push(B),B}function hi(ce,C,z,B){ce.a||ce.b?ce.l===z?ce.b=B:ce.a=B:(ce.a=B,ce.l=C,ce.r=z)}function Xi(ce,C,z){var B=ce.a,G=ce.b;this.edge=ce,this.site=C,this.angle=z?Math.atan2(z.y-C.y,z.x-C.x):ce.l===C?Math.atan2(G.x-B.x,B.y-G.y):Math.atan2(B.x-G.x,G.y-B.y)}function Da(){this._=null}function ia(ce){ce.U=ce.C=ce.L=ce.R=ce.P=ce.N=null}function _a(ce,C){var z=C,B=C.R,G=z.U;G?G.L===z?G.L=B:G.R=B:ce._=B,B.U=G,z.U=B,z.R=B.L,z.R&&(z.R.U=z),B.L=z}function Mi(ce,C){var z=C,B=C.L,G=z.U;G?G.L===z?G.L=B:G.R=B:ce._=B,B.U=G,z.U=B,z.L=B.R,z.L&&(z.L.U=z),B.R=z}function ji(ce){for(;ce.L;)ce=ce.L;return ce}function mo(ce,C){var z,B,G,ae=ce.sort(Ho).pop();for(fr=[],Tr=new Array(ce.length),Wr=new Da,wr=new Da;;)if(G=Gr,ae&&(!G||ae.y<G.y||ae.y===G.y&&ae.x<G.x))ae.x===z&&ae.y===B||(Tr[ae.i]=new Vr(ae),_n(ae),z=ae.x,B=ae.y),ae=ce.pop();else{if(!G)break;fn(G.arc)}C&&(function(ge){for(var _e,Ee,He,Xe,at,_t=fr,St=(Ee=ge[0][0],He=ge[0][1],Xe=ge[1][0],at=ge[1][1],function(kt){var bt,Nt=kt.a,zt=kt.b,Ut=Nt.x,nr=Nt.y,pr=0,Mr=1,kr=zt.x-Ut,Qr=zt.y-nr;if(bt=Ee-Ut,kr||!(bt>0)){if(bt/=kr,kr<0){if(bt<pr)return;bt<Mr&&(Mr=bt)}else if(kr>0){if(bt>Mr)return;bt>pr&&(pr=bt)}if(bt=Xe-Ut,kr||!(bt<0)){if(bt/=kr,kr<0){if(bt>Mr)return;bt>pr&&(pr=bt)}else if(kr>0){if(bt<pr)return;bt<Mr&&(Mr=bt)}if(bt=He-nr,Qr||!(bt>0)){if(bt/=Qr,Qr<0){if(bt<pr)return;bt<Mr&&(Mr=bt)}else if(Qr>0){if(bt>Mr)return;bt>pr&&(pr=bt)}if(bt=at-nr,Qr||!(bt<0)){if(bt/=Qr,Qr<0){if(bt>Mr)return;bt>pr&&(pr=bt)}else if(Qr>0){if(bt<pr)return;bt<Mr&&(Mr=bt)}return pr>0&&(kt.a={x:Ut+pr*kr,y:nr+pr*Qr}),Mr<1&&(kt.b={x:Ut+Mr*kr,y:nr+Mr*Qr}),kt}}}}}),Tt=_t.length;Tt--;)(!oi(_e=_t[Tt],ge)||!St(_e)||c(_e.a.x-_e.b.x)<At&&c(_e.a.y-_e.b.y)<At)&&(_e.a=_e.b=null,_t.splice(Tt,1))}(C),function(ge){for(var _e,Ee,He,Xe,at,_t,St,Tt,kt,bt,Nt=ge[0][0],zt=ge[1][0],Ut=ge[0][1],nr=ge[1][1],pr=Tr,Mr=pr.length;Mr--;)if((at=pr[Mr])&&at.prepare())for(Tt=(St=at.edges).length,_t=0;_t<Tt;)He=(bt=St[_t].end()).x,Xe=bt.y,_e=(kt=St[++_t%Tt].start()).x,Ee=kt.y,(c(He-_e)>At||c(Xe-Ee)>At)&&(St.splice(_t,0,new Xi(ri(at.site,bt,c(He-Nt)<At&&nr-Xe>At?{x:Nt,y:c(_e-Nt)<At?Ee:nr}:c(Xe-nr)<At&&zt-He>At?{x:c(Ee-nr)<At?_e:zt,y:nr}:c(He-zt)<At&&Xe-Ut>At?{x:zt,y:c(_e-zt)<At?Ee:Ut}:c(Xe-Ut)<At&&He-Nt>At?{x:c(Ee-Ut)<At?_e:Nt,y:Ut}:null),at.site,null)),++Tt)}(C));var ue={cells:Tr,edges:fr};return Wr=wr=fr=Tr=null,ue}function Ho(ce,C){return C.y-ce.y||C.x-ce.x}Vr.prototype.prepare=function(){for(var ce,C=this.edges,z=C.length;z--;)(ce=C[z].edge).b&&ce.a||C.splice(z,1);return C.sort(Ur),C.length},Xi.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Da.prototype={insert:function(ce,C){var z,B,G;if(ce){if(C.P=ce,C.N=ce.N,ce.N&&(ce.N.P=C),ce.N=C,ce.R){for(ce=ce.R;ce.L;)ce=ce.L;ce.L=C}else ce.R=C;z=ce}else this._?(ce=ji(this._),C.P=null,C.N=ce,ce.P=ce.L=C,z=ce):(C.P=C.N=null,this._=C,z=null);for(C.L=C.R=null,C.U=z,C.C=!0,ce=C;z&&z.C;)z===(B=z.U).L?(G=B.R)&&G.C?(z.C=G.C=!1,B.C=!0,ce=B):(ce===z.R&&(_a(this,z),z=(ce=z).U),z.C=!1,B.C=!0,Mi(this,B)):(G=B.L)&&G.C?(z.C=G.C=!1,B.C=!0,ce=B):(ce===z.L&&(Mi(this,z),z=(ce=z).U),z.C=!1,B.C=!0,_a(this,B)),z=ce.U;this._.C=!1},remove:function(ce){ce.N&&(ce.N.P=ce.P),ce.P&&(ce.P.N=ce.N),ce.N=ce.P=null;var C,z,B,G=ce.U,ae=ce.L,ue=ce.R;if(z=ae?ue?ji(ue):ae:ue,G?G.L===ce?G.L=z:G.R=z:this._=z,ae&&ue?(B=z.C,z.C=ce.C,z.L=ae,ae.U=z,z!==ue?(G=z.U,z.U=ce.U,ce=z.R,G.L=ce,z.R=ue,ue.U=z):(z.U=G,G=z,ce=z.R)):(B=ce.C,ce=z),ce&&(ce.U=G),!B)if(ce&&ce.C)ce.C=!1;else{do{if(ce===this._)break;if(ce===G.L){if((C=G.R).C&&(C.C=!1,G.C=!0,_a(this,G),C=G.R),C.L&&C.L.C||C.R&&C.R.C){C.R&&C.R.C||(C.L.C=!1,C.C=!0,Mi(this,C),C=G.R),C.C=G.C,G.C=C.R.C=!1,_a(this,G),ce=this._;break}}else if((C=G.L).C&&(C.C=!1,G.C=!0,Mi(this,G),C=G.L),C.L&&C.L.C||C.R&&C.R.C){C.L&&C.L.C||(C.R.C=!1,C.C=!0,_a(this,C),C=G.L),C.C=G.C,G.C=C.L.C=!1,Mi(this,G),ce=this._;break}C.C=!0,ce=G,G=G.U}while(!ce.C);ce&&(ce.C=!1)}}},o.geom.voronoi=function(ce){var C=Fr,z=on,B=C,G=z,ae=es;if(ce)return ue(ce);function ue(_e){var Ee=new Array(_e.length),He=ae[0][0],Xe=ae[0][1],at=ae[1][0],_t=ae[1][1];return mo(ge(_e),ae).cells.forEach(function(St,Tt){var kt=St.edges,bt=St.site;(Ee[Tt]=kt.length?kt.map(function(Nt){var zt=Nt.start();return[zt.x,zt.y]}):bt.x>=He&&bt.x<=at&&bt.y>=Xe&&bt.y<=_t?[[He,_t],[at,_t],[at,Xe],[He,Xe]]:[]).point=_e[Tt]}),Ee}function ge(_e){return _e.map(function(Ee,He){return{x:Math.round(B(Ee,He)/At)*At,y:Math.round(G(Ee,He)/At)*At,i:He}})}return ue.links=function(_e){return mo(ge(_e)).edges.filter(function(Ee){return Ee.l&&Ee.r}).map(function(Ee){return{source:_e[Ee.l.i],target:_e[Ee.r.i]}})},ue.triangles=function(_e){var Ee=[];return mo(ge(_e)).cells.forEach(function(He,Xe){for(var at,_t,St,Tt,kt=He.site,bt=He.edges.sort(Ur),Nt=-1,zt=bt.length,Ut=bt[zt-1].edge,nr=Ut.l===kt?Ut.r:Ut.l;++Nt<zt;)at=nr,nr=(Ut=bt[Nt].edge).l===kt?Ut.r:Ut.l,Xe<at.i&&Xe<nr.i&&(St=at,Tt=nr,((_t=kt).x-Tt.x)*(St.y-_t.y)-(_t.x-St.x)*(Tt.y-_t.y)<0)&&Ee.push([_e[Xe],_e[at.i],_e[nr.i]])}),Ee},ue.x=function(_e){return arguments.length?(B=yr(C=_e),ue):C},ue.y=function(_e){return arguments.length?(G=yr(z=_e),ue):z},ue.clipExtent=function(_e){return arguments.length?(ae=_e==null?es:_e,ue):ae===es?null:ae},ue.size=function(_e){return arguments.length?ue.clipExtent(_e&&[[0,0],_e]):ae===es?null:ae&&ae[1]},ue};var es=[[-1e6,-1e6],[1e6,1e6]];function Xa(ce){return ce.x}function $a(ce){return ce.y}function qo(ce,C,z,B,G,ae){if(!ce(C,z,B,G,ae)){var ue=.5*(z+G),ge=.5*(B+ae),_e=C.nodes;_e[0]&&qo(ce,_e[0],z,B,ue,ge),_e[1]&&qo(ce,_e[1],ue,B,G,ge),_e[2]&&qo(ce,_e[2],z,ge,ue,ae),_e[3]&&qo(ce,_e[3],ue,ge,G,ae)}}function Hi(ce,C,z,B,G,ae,ue){var ge,_e=1/0;return function Ee(He,Xe,at,_t,St){if(!(Xe>ae||at>ue||_t<B||St<G)){if(Tt=He.point){var Tt,kt=C-He.x,bt=z-He.y,Nt=kt*kt+bt*bt;if(Nt<_e){var zt=Math.sqrt(_e=Nt);B=C-zt,G=z-zt,ae=C+zt,ue=z+zt,ge=Tt}}for(var Ut=He.nodes,nr=.5*(Xe+_t),pr=.5*(at+St),Mr=(z>=pr)<<1|C>=nr,kr=Mr+4;Mr<kr;++Mr)if(He=Ut[3&Mr])switch(3&Mr){case 0:Ee(He,Xe,at,nr,pr);break;case 1:Ee(He,nr,at,_t,pr);break;case 2:Ee(He,Xe,pr,nr,St);break;case 3:Ee(He,nr,pr,_t,St)}}}(ce,B,G,ae,ue),ge}function Lo(ce,C){ce=o.rgb(ce),C=o.rgb(C);var z=ce.r,B=ce.g,G=ce.b,ae=C.r-z,ue=C.g-B,ge=C.b-G;return function(_e){return"#"+or(Math.round(z+ae*_e))+or(Math.round(B+ue*_e))+or(Math.round(G+ge*_e))}}function go(ce,C){var z,B={},G={};for(z in ce)z in C?B[z]=Na(ce[z],C[z]):G[z]=ce[z];for(z in C)z in ce||(G[z]=C[z]);return function(ae){for(z in B)G[z]=B[z](ae);return G}}function wa(ce,C){return ce=+ce,C=+C,function(z){return ce*(1-z)+C*z}}function Qa(ce,C){var z,B,G,ae=vo.lastIndex=Mo.lastIndex=0,ue=-1,ge=[],_e=[];for(ce+="",C+="";(z=vo.exec(ce))&&(B=Mo.exec(C));)(G=B.index)>ae&&(G=C.slice(ae,G),ge[ue]?ge[ue]+=G:ge[++ue]=G),(z=z[0])===(B=B[0])?ge[ue]?ge[ue]+=B:ge[++ue]=B:(ge[++ue]=null,_e.push({i:ue,x:wa(z,B)})),ae=Mo.lastIndex;return ae<C.length&&(G=C.slice(ae),ge[ue]?ge[ue]+=G:ge[++ue]=G),ge.length<2?_e[0]?(C=_e[0].x,function(Ee){return C(Ee)+""}):function(){return C}:(C=_e.length,function(Ee){for(var He,Xe=0;Xe<C;++Xe)ge[(He=_e[Xe]).i]=He.x(Ee);return ge.join("")})}o.geom.delaunay=function(ce){return o.geom.voronoi().triangles(ce)},o.geom.quadtree=function(ce,C,z,B,G){var ae,ue=Fr,ge=on;if(ae=arguments.length)return ue=Xa,ge=$a,ae===3&&(G=z,B=C,z=C=0),_e(ce);function _e(Ee){var He,Xe,at,_t,St,Tt,kt,bt,Nt,zt=yr(ue),Ut=yr(ge);if(C!=null)Tt=C,kt=z,bt=B,Nt=G;else if(bt=Nt=-(Tt=kt=1/0),Xe=[],at=[],St=Ee.length,ae)for(_t=0;_t<St;++_t)(He=Ee[_t]).x<Tt&&(Tt=He.x),He.y<kt&&(kt=He.y),He.x>bt&&(bt=He.x),He.y>Nt&&(Nt=He.y),Xe.push(He.x),at.push(He.y);else for(_t=0;_t<St;++_t){var nr=+zt(He=Ee[_t],_t),pr=+Ut(He,_t);nr<Tt&&(Tt=nr),pr<kt&&(kt=pr),nr>bt&&(bt=nr),pr>Nt&&(Nt=pr),Xe.push(nr),at.push(pr)}var Mr=bt-Tt,kr=Nt-kt;function Qr(sn,Un,Wn,li,Hr,kn,Zn,qn){if(!isNaN(Wn)&&!isNaN(li))if(sn.leaf){var ei=sn.x,ui=sn.y;if(ei!=null)if(c(ei-Wn)+c(ui-li)<.01)$r(sn,Un,Wn,li,Hr,kn,Zn,qn);else{var ki=sn.point;sn.x=sn.y=sn.point=null,$r(sn,ki,ei,ui,Hr,kn,Zn,qn),$r(sn,Un,Wn,li,Hr,kn,Zn,qn)}else sn.x=Wn,sn.y=li,sn.point=Un}else $r(sn,Un,Wn,li,Hr,kn,Zn,qn)}function $r(sn,Un,Wn,li,Hr,kn,Zn,qn){var ei=.5*(Hr+Zn),ui=.5*(kn+qn),ki=Wn>=ei,Jn=li>=ui,yi=Jn<<1|ki;sn.leaf=!1,ki?Hr=ei:Zn=ei,Jn?kn=ui:qn=ui,Qr(sn=sn.nodes[yi]||(sn.nodes[yi]={leaf:!0,nodes:[],point:null,x:null,y:null}),Un,Wn,li,Hr,kn,Zn,qn)}Mr>kr?Nt=kt+Mr:bt=Tt+kr;var pn={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(sn){Qr(pn,sn,+zt(sn,++_t),+Ut(sn,_t),Tt,kt,bt,Nt)},visit:function(sn){qo(sn,pn,Tt,kt,bt,Nt)},find:function(sn){return Hi(pn,sn[0],sn[1],Tt,kt,bt,Nt)}};if(_t=-1,C==null){for(;++_t<St;)Qr(pn,Ee[_t],Xe[_t],at[_t],Tt,kt,bt,Nt);--_t}else Ee.forEach(pn.add);return Xe=at=Ee=He=null,pn}return _e.x=function(Ee){return arguments.length?(ue=Ee,_e):ue},_e.y=function(Ee){return arguments.length?(ge=Ee,_e):ge},_e.extent=function(Ee){return arguments.length?(Ee==null?C=z=B=G=null:(C=+Ee[0][0],z=+Ee[0][1],B=+Ee[1][0],G=+Ee[1][1]),_e):C==null?null:[[C,z],[B,G]]},_e.size=function(Ee){return arguments.length?(Ee==null?C=z=B=G=null:(C=z=0,B=+Ee[0],G=+Ee[1]),_e):C==null?null:[B-C,G-z]},_e},o.interpolateRgb=Lo,o.interpolateObject=go,o.interpolateNumber=wa,o.interpolateString=Qa;var vo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mo=new RegExp(vo.source,"g");function Na(ce,C){for(var z,B=o.interpolators.length;--B>=0&&!(z=o.interpolators[B](ce,C)););return z}function pa(ce,C){var z,B=[],G=[],ae=ce.length,ue=C.length,ge=Math.min(ce.length,C.length);for(z=0;z<ge;++z)B.push(Na(ce[z],C[z]));for(;z<ae;++z)G[z]=ce[z];for(;z<ue;++z)G[z]=C[z];return function(_e){for(z=0;z<ge;++z)G[z]=B[z](_e);return G}}o.interpolate=Na,o.interpolators=[function(ce,C){var z=typeof C;return(z==="string"?Dr.has(C.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(C)?Lo:Qa:C instanceof dt?Lo:Array.isArray(C)?pa:z==="object"&&isNaN(C)?go:wa)(ce,C)}],o.interpolateArray=pa;var Ja=function(){return E},Os=o.map({linear:Ja,poly:function(ce){return function(C){return Math.pow(C,ce)}},quad:function(){return js},cubic:function(){return Us},sin:function(){return Vs},exp:function(){return Co},circle:function(){return Po},elastic:function(ce,C){var z;return arguments.length<2&&(C=.45),arguments.length?z=C/Qt*Math.asin(1/ce):(ce=1,z=C/4),function(B){return 1+ce*Math.pow(2,-10*B)*Math.sin((B-z)*Qt/C)}},back:function(ce){return ce||(ce=1.70158),function(C){return C*C*((ce+1)*C-ce)}},bounce:function(){return Go}}),Ns=o.map({in:E,out:Ts,"in-out":ss,"out-in":function(ce){return ss(Ts(ce))}});function qi(ce){return function(C){return C<=0?0:C>=1?1:ce(C)}}function Ts(ce){return function(C){return 1-ce(1-C)}}function ss(ce){return function(C){return .5*(C<.5?ce(2*C):2-ce(2-2*C))}}function js(ce){return ce*ce}function Us(ce){return ce*ce*ce}function Ds(ce){if(ce<=0)return 0;if(ce>=1)return 1;var C=ce*ce,z=C*ce;return 4*(ce<.5?z:3*(ce-C)+z-.75)}function Vs(ce){return 1-Math.cos(ce*Ye)}function Co(ce){return Math.pow(2,10*(ce-1))}function Po(ce){return 1-Math.sqrt(1-ce*ce)}function Go(ce){return ce<1/2.75?7.5625*ce*ce:ce<2/2.75?7.5625*(ce-=1.5/2.75)*ce+.75:ce<2.5/2.75?7.5625*(ce-=2.25/2.75)*ce+.9375:7.5625*(ce-=2.625/2.75)*ce+.984375}function Yo(ce,C){return C-=ce,function(z){return Math.round(ce+C*z)}}function Wo(ce){var C,z,B,G=[ce.a,ce.b],ae=[ce.c,ce.d],ue=yo(G),ge=ls(G,ae),_e=yo(((C=ae)[0]+=(B=-ge)*(z=G)[0],C[1]+=B*z[1],C))||0;G[0]*ae[1]<ae[0]*G[1]&&(G[0]*=-1,G[1]*=-1,ue*=-1,ge*=-1),this.rotate=(ue?Math.atan2(G[1],G[0]):Math.atan2(-ae[0],ae[1]))*Je,this.translate=[ce.e,ce.f],this.scale=[ue,_e],this.skew=_e?Math.atan2(ge,_e)*Je:0}function ls(ce,C){return ce[0]*C[0]+ce[1]*C[1]}function yo(ce){var C=Math.sqrt(ls(ce,ce));return C&&(ce[0]/=C,ce[1]/=C),C}o.ease=function(ce){var C=ce.indexOf("-"),z=C>=0?ce.slice(0,C):ce,B=C>=0?ce.slice(C+1):"in";return z=Os.get(z)||Ja,qi((B=Ns.get(B)||E)(z.apply(null,p.call(arguments,1))))},o.interpolateHcl=function(ce,C){ce=o.hcl(ce),C=o.hcl(C);var z=ce.h,B=ce.c,G=ce.l,ae=C.h-z,ue=C.c-B,ge=C.l-G;return isNaN(ue)&&(ue=0,B=isNaN(B)?C.c:B),isNaN(ae)?(ae=0,z=isNaN(z)?C.h:z):ae>180?ae-=360:ae<-180&&(ae+=360),function(_e){return Ke(z+ae*_e,B+ue*_e,G+ge*_e)+""}},o.interpolateHsl=function(ce,C){ce=o.hsl(ce),C=o.hsl(C);var z=ce.h,B=ce.s,G=ce.l,ae=C.h-z,ue=C.s-B,ge=C.l-G;return isNaN(ue)&&(ue=0,B=isNaN(B)?C.s:B),isNaN(ae)?(ae=0,z=isNaN(z)?C.h:z):ae>180?ae-=360:ae<-180&&(ae+=360),function(_e){return lt(z+ae*_e,B+ue*_e,G+ge*_e)+""}},o.interpolateLab=function(ce,C){ce=o.lab(ce),C=o.lab(C);var z=ce.l,B=ce.a,G=ce.b,ae=C.l-z,ue=C.a-B,ge=C.b-G;return function(_e){return Zt(z+ae*_e,B+ue*_e,G+ge*_e)+""}},o.interpolateRound=Yo,o.transform=function(ce){var C=y.createElementNS(o.ns.prefix.svg,"g");return(o.transform=function(z){if(z!=null){C.setAttribute("transform",z);var B=C.transform.baseVal.consolidate()}return new Wo(B?B.matrix:ks)})(ce)},Wo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ks={a:1,b:0,c:0,d:1,e:0,f:0};function fo(ce){return ce.length?ce.pop()+",":""}function Zo(ce,C){var z=[],B=[];return ce=o.transform(ce),C=o.transform(C),function(G,ae,ue,ge){if(G[0]!==ae[0]||G[1]!==ae[1]){var _e=ue.push("translate(",null,",",null,")");ge.push({i:_e-4,x:wa(G[0],ae[0])},{i:_e-2,x:wa(G[1],ae[1])})}else(ae[0]||ae[1])&&ue.push("translate("+ae+")")}(ce.translate,C.translate,z,B),function(G,ae,ue,ge){G!==ae?(G-ae>180?ae+=360:ae-G>180&&(G+=360),ge.push({i:ue.push(fo(ue)+"rotate(",null,")")-2,x:wa(G,ae)})):ae&&ue.push(fo(ue)+"rotate("+ae+")")}(ce.rotate,C.rotate,z,B),function(G,ae,ue,ge){G!==ae?ge.push({i:ue.push(fo(ue)+"skewX(",null,")")-2,x:wa(G,ae)}):ae&&ue.push(fo(ue)+"skewX("+ae+")")}(ce.skew,C.skew,z,B),function(G,ae,ue,ge){if(G[0]!==ae[0]||G[1]!==ae[1]){var _e=ue.push(fo(ue)+"scale(",null,",",null,")");ge.push({i:_e-4,x:wa(G[0],ae[0])},{i:_e-2,x:wa(G[1],ae[1])})}else ae[0]===1&&ae[1]===1||ue.push(fo(ue)+"scale("+ae+")")}(ce.scale,C.scale,z,B),ce=C=null,function(G){for(var ae,ue=-1,ge=B.length;++ue<ge;)z[(ae=B[ue]).i]=ae.x(G);return z.join("")}}function As(ce,C){return C=(C-=ce=+ce)||1/C,function(z){return(z-ce)/C}}function Io(ce,C){return C=(C-=ce=+ce)||1/C,function(z){return Math.max(0,Math.min(1,(z-ce)/C))}}function Ui(ce){for(var C=ce.source,z=ce.target,B=function(ue,ge){if(ue===ge)return ue;for(var _e=je(ue),Ee=je(ge),He=_e.pop(),Xe=Ee.pop(),at=null;He===Xe;)at=He,He=_e.pop(),Xe=Ee.pop();return at}(C,z),G=[C];C!==B;)C=C.parent,G.push(C);for(var ae=G.length;z!==B;)G.splice(ae,0,z),z=z.parent;return G}function je(ce){for(var C=[],z=ce.parent;z!=null;)C.push(ce),ce=z,z=z.parent;return C.push(ce),C}function Ge(ce){ce.fixed|=2}function tt(ce){ce.fixed&=-7}function ot(ce){ce.fixed|=4,ce.px=ce.x,ce.py=ce.y}function yt(ce){ce.fixed&=-5}o.interpolateTransform=Zo,o.layout={},o.layout.bundle=function(){return function(ce){for(var C=[],z=-1,B=ce.length;++z<B;)C.push(Ui(ce[z]));return C}},o.layout.chord=function(){var ce,C,z,B,G,ae,ue,ge={},_e=0;function Ee(){var Xe,at,_t,St,Tt,kt={},bt=[],Nt=o.range(B),zt=[];for(ce=[],C=[],Xe=0,St=-1;++St<B;){for(at=0,Tt=-1;++Tt<B;)at+=z[St][Tt];bt.push(at),zt.push(o.range(B)),Xe+=at}for(G&&Nt.sort(function(pn,sn){return G(bt[pn],bt[sn])}),ae&&zt.forEach(function(pn,sn){pn.sort(function(Un,Wn){return ae(z[sn][Un],z[sn][Wn])})}),Xe=(Qt-_e*B)/Xe,at=0,St=-1;++St<B;){for(_t=at,Tt=-1;++Tt<B;){var Ut=Nt[St],nr=zt[Ut][Tt],pr=z[Ut][nr],Mr=at,kr=at+=pr*Xe;kt[Ut+"-"+nr]={index:Ut,subindex:nr,startAngle:Mr,endAngle:kr,value:pr}}C[Ut]={index:Ut,startAngle:_t,endAngle:at,value:bt[Ut]},at+=_e}for(St=-1;++St<B;)for(Tt=St-1;++Tt<B;){var Qr=kt[St+"-"+Tt],$r=kt[Tt+"-"+St];(Qr.value||$r.value)&&ce.push(Qr.value<$r.value?{source:$r,target:Qr}:{source:Qr,target:$r})}ue&&He()}function He(){ce.sort(function(Xe,at){return ue((Xe.source.value+Xe.target.value)/2,(at.source.value+at.target.value)/2)})}return ge.matrix=function(Xe){return arguments.length?(B=(z=Xe)&&z.length,ce=C=null,ge):z},ge.padding=function(Xe){return arguments.length?(_e=Xe,ce=C=null,ge):_e},ge.sortGroups=function(Xe){return arguments.length?(G=Xe,ce=C=null,ge):G},ge.sortSubgroups=function(Xe){return arguments.length?(ae=Xe,ce=null,ge):ae},ge.sortChords=function(Xe){return arguments.length?(ue=Xe,ce&&He(),ge):ue},ge.chords=function(){return ce||Ee(),ce},ge.groups=function(){return C||Ee(),C},ge},o.layout.force=function(){var ce,C,z,B,G,ae,ue={},ge=o.dispatch("start","tick","end"),_e=[1,1],Ee=.9,He=gt,Xe=Mt,at=-30,_t=$t,St=.1,Tt=.64,kt=[],bt=[];function Nt(Ut){return function(nr,pr,Mr,kr){if(nr.point!==Ut){var Qr=nr.cx-Ut.x,$r=nr.cy-Ut.y,pn=kr-pr,sn=Qr*Qr+$r*$r;if(pn*pn/Tt<sn){if(sn<_t){var Un=nr.charge/sn;Ut.px-=Qr*Un,Ut.py-=$r*Un}return!0}nr.point&&sn&&sn<_t&&(Un=nr.pointCharge/sn,Ut.px-=Qr*Un,Ut.py-=$r*Un)}return!nr.charge}}function zt(Ut){Ut.px=o.event.x,Ut.py=o.event.y,ue.resume()}return ue.tick=function(){if((z*=.99)<.005)return ce=null,ge.end({type:"end",alpha:z=0}),!0;var Ut,nr,pr,Mr,kr,Qr,$r,pn,sn,Un=kt.length,Wn=bt.length;for(nr=0;nr<Wn;++nr)Mr=(pr=bt[nr]).source,(Qr=(pn=(kr=pr.target).x-Mr.x)*pn+(sn=kr.y-Mr.y)*sn)&&(pn*=Qr=z*G[nr]*((Qr=Math.sqrt(Qr))-B[nr])/Qr,sn*=Qr,kr.x-=pn*($r=Mr.weight+kr.weight?Mr.weight/(Mr.weight+kr.weight):.5),kr.y-=sn*$r,Mr.x+=pn*($r=1-$r),Mr.y+=sn*$r);if(($r=z*St)&&(pn=_e[0]/2,sn=_e[1]/2,nr=-1,$r))for(;++nr<Un;)(pr=kt[nr]).x+=(pn-pr.x)*$r,pr.y+=(sn-pr.y)*$r;if(at)for(function li(Hr,kn,Zn){var qn=0,ei=0;if(Hr.charge=0,!Hr.leaf)for(var ui,ki=Hr.nodes,Jn=ki.length,yi=-1;++yi<Jn;)(ui=ki[yi])!=null&&(li(ui,kn,Zn),Hr.charge+=ui.charge,qn+=ui.charge*ui.cx,ei+=ui.charge*ui.cy);if(Hr.point){Hr.leaf||(Hr.point.x+=Math.random()-.5,Hr.point.y+=Math.random()-.5);var mi=kn*Zn[Hr.point.index];Hr.charge+=Hr.pointCharge=mi,qn+=mi*Hr.point.x,ei+=mi*Hr.point.y}Hr.cx=qn/Hr.charge,Hr.cy=ei/Hr.charge}(Ut=o.geom.quadtree(kt),z,ae),nr=-1;++nr<Un;)(pr=kt[nr]).fixed||Ut.visit(Nt(pr));for(nr=-1;++nr<Un;)(pr=kt[nr]).fixed?(pr.x=pr.px,pr.y=pr.py):(pr.x-=(pr.px-(pr.px=pr.x))*Ee,pr.y-=(pr.py-(pr.py=pr.y))*Ee);ge.tick({type:"tick",alpha:z})},ue.nodes=function(Ut){return arguments.length?(kt=Ut,ue):kt},ue.links=function(Ut){return arguments.length?(bt=Ut,ue):bt},ue.size=function(Ut){return arguments.length?(_e=Ut,ue):_e},ue.linkDistance=function(Ut){return arguments.length?(He=typeof Ut=="function"?Ut:+Ut,ue):He},ue.distance=ue.linkDistance,ue.linkStrength=function(Ut){return arguments.length?(Xe=typeof Ut=="function"?Ut:+Ut,ue):Xe},ue.friction=function(Ut){return arguments.length?(Ee=+Ut,ue):Ee},ue.charge=function(Ut){return arguments.length?(at=typeof Ut=="function"?Ut:+Ut,ue):at},ue.chargeDistance=function(Ut){return arguments.length?(_t=Ut*Ut,ue):Math.sqrt(_t)},ue.gravity=function(Ut){return arguments.length?(St=+Ut,ue):St},ue.theta=function(Ut){return arguments.length?(Tt=Ut*Ut,ue):Math.sqrt(Tt)},ue.alpha=function(Ut){return arguments.length?(Ut=+Ut,z?Ut>0?z=Ut:(ce.c=null,ce.t=NaN,ce=null,ge.end({type:"end",alpha:z=0})):Ut>0&&(ge.start({type:"start",alpha:z=Ut}),ce=zr(ue.tick)),ue):z},ue.start=function(){var Ut,nr,pr,Mr=kt.length,kr=bt.length,Qr=_e[0],$r=_e[1];for(Ut=0;Ut<Mr;++Ut)(pr=kt[Ut]).index=Ut,pr.weight=0;for(Ut=0;Ut<kr;++Ut)typeof(pr=bt[Ut]).source=="number"&&(pr.source=kt[pr.source]),typeof pr.target=="number"&&(pr.target=kt[pr.target]),++pr.source.weight,++pr.target.weight;for(Ut=0;Ut<Mr;++Ut)pr=kt[Ut],isNaN(pr.x)&&(pr.x=pn("x",Qr)),isNaN(pr.y)&&(pr.y=pn("y",$r)),isNaN(pr.px)&&(pr.px=pr.x),isNaN(pr.py)&&(pr.py=pr.y);if(B=[],typeof He=="function")for(Ut=0;Ut<kr;++Ut)B[Ut]=+He.call(this,bt[Ut],Ut);else for(Ut=0;Ut<kr;++Ut)B[Ut]=He;if(G=[],typeof Xe=="function")for(Ut=0;Ut<kr;++Ut)G[Ut]=+Xe.call(this,bt[Ut],Ut);else for(Ut=0;Ut<kr;++Ut)G[Ut]=Xe;if(ae=[],typeof at=="function")for(Ut=0;Ut<Mr;++Ut)ae[Ut]=+at.call(this,kt[Ut],Ut);else for(Ut=0;Ut<Mr;++Ut)ae[Ut]=at;function pn(sn,Un){if(!nr){for(nr=new Array(Mr),kn=0;kn<Mr;++kn)nr[kn]=[];for(kn=0;kn<kr;++kn){var Wn=bt[kn];nr[Wn.source.index].push(Wn.target),nr[Wn.target.index].push(Wn.source)}}for(var li,Hr=nr[Ut],kn=-1,Zn=Hr.length;++kn<Zn;)if(!isNaN(li=Hr[kn][sn]))return li;return Math.random()*Un}return ue.resume()},ue.resume=function(){return ue.alpha(.1)},ue.stop=function(){return ue.alpha(0)},ue.drag=function(){if(C||(C=o.behavior.drag().origin(E).on("dragstart.force",Ge).on("drag.force",zt).on("dragend.force",tt)),!arguments.length)return C;this.on("mouseover.force",ot).on("mouseout.force",yt).call(C)},o.rebind(ue,ge,"on")};var gt=20,Mt=1,$t=1/0;function er(ce,C){return o.rebind(ce,C,"sort","children","value"),ce.nodes=ce,ce.links=Or,ce}function Xt(ce,C){for(var z=[ce];(ce=z.pop())!=null;)if(C(ce),(G=ce.children)&&(B=G.length))for(var B,G;--B>=0;)z.push(G[B])}function ir(ce,C){for(var z=[ce],B=[];(ce=z.pop())!=null;)if(B.push(ce),(ae=ce.children)&&(G=ae.length))for(var G,ae,ue=-1;++ue<G;)z.push(ae[ue]);for(;(ce=B.pop())!=null;)C(ce)}function hr(ce){return ce.children}function xr(ce){return ce.value}function _r(ce,C){return C.value-ce.value}function Or(ce){return o.merge(ce.map(function(C){return(C.children||[]).map(function(z){return{source:C,target:z}})}))}o.layout.hierarchy=function(){var ce=_r,C=hr,z=xr;function B(G){var ae,ue=[G],ge=[];for(G.depth=0;(ae=ue.pop())!=null;)if(ge.push(ae),(Ee=C.call(B,ae,ae.depth))&&(_e=Ee.length)){for(var _e,Ee,He;--_e>=0;)ue.push(He=Ee[_e]),He.parent=ae,He.depth=ae.depth+1;z&&(ae.value=0),ae.children=Ee}else z&&(ae.value=+z.call(B,ae,ae.depth)||0),delete ae.children;return ir(G,function(Xe){var at,_t;ce&&(at=Xe.children)&&at.sort(ce),z&&(_t=Xe.parent)&&(_t.value+=Xe.value)}),ge}return B.sort=function(G){return arguments.length?(ce=G,B):ce},B.children=function(G){return arguments.length?(C=G,B):C},B.value=function(G){return arguments.length?(z=G,B):z},B.revalue=function(G){return z&&(Xt(G,function(ae){ae.children&&(ae.value=0)}),ir(G,function(ae){var ue;ae.children||(ae.value=+z.call(B,ae,ae.depth)||0),(ue=ae.parent)&&(ue.value+=ae.value)})),G},B},o.layout.partition=function(){var ce=o.layout.hierarchy(),C=[1,1];function z(B,G){var ae=ce.call(this,B,G);return function ue(ge,_e,Ee,He){var Xe=ge.children;if(ge.x=_e,ge.y=ge.depth*He,ge.dx=Ee,ge.dy=He,Xe&&(at=Xe.length)){var at,_t,St,Tt=-1;for(Ee=ge.value?Ee/ge.value:0;++Tt<at;)ue(_t=Xe[Tt],_e,St=_t.value*Ee,He),_e+=St}}(ae[0],0,C[0],C[1]/function ue(ge){var _e=ge.children,Ee=0;if(_e&&(He=_e.length))for(var He,Xe=-1;++Xe<He;)Ee=Math.max(Ee,ue(_e[Xe]));return 1+Ee}(ae[0])),ae}return z.size=function(B){return arguments.length?(C=B,z):C},er(z,ce)},o.layout.pie=function(){var ce=Number,C=rn,z=0,B=Qt,G=0;function ae(ue){var ge,_e=ue.length,Ee=ue.map(function(Nt,zt){return+ce.call(ae,Nt,zt)}),He=+(typeof z=="function"?z.apply(this,arguments):z),Xe=(typeof B=="function"?B.apply(this,arguments):B)-He,at=Math.min(Math.abs(Xe)/_e,+(typeof G=="function"?G.apply(this,arguments):G)),_t=at*(Xe<0?-1:1),St=o.sum(Ee),Tt=St?(Xe-_e*_t)/St:0,kt=o.range(_e),bt=[];return C!=null&&kt.sort(C===rn?function(Nt,zt){return Ee[zt]-Ee[Nt]}:function(Nt,zt){return C(ue[Nt],ue[zt])}),kt.forEach(function(Nt){bt[Nt]={data:ue[Nt],value:ge=Ee[Nt],startAngle:He,endAngle:He+=ge*Tt+_t,padAngle:at}}),bt}return ae.value=function(ue){return arguments.length?(ce=ue,ae):ce},ae.sort=function(ue){return arguments.length?(C=ue,ae):C},ae.startAngle=function(ue){return arguments.length?(z=ue,ae):z},ae.endAngle=function(ue){return arguments.length?(B=ue,ae):B},ae.padAngle=function(ue){return arguments.length?(G=ue,ae):G},ae};var rn={};function dn(ce){return ce.x}function Cn(ce){return ce.y}function zn(ce,C,z){ce.y0=C,ce.y=z}o.layout.stack=function(){var ce=E,C=di,z=wi,B=zn,G=dn,ae=Cn;function ue(ge,_e){if(!(at=ge.length))return ge;var Ee=ge.map(function(Nt,zt){return ce.call(ue,Nt,zt)}),He=Ee.map(function(Nt){return Nt.map(function(zt,Ut){return[G.call(ue,zt,Ut),ae.call(ue,zt,Ut)]})}),Xe=C.call(ue,He,_e);Ee=o.permute(Ee,Xe),He=o.permute(He,Xe);var at,_t,St,Tt,kt=z.call(ue,He,_e),bt=Ee[0].length;for(St=0;St<bt;++St)for(B.call(ue,Ee[0][St],Tt=kt[St],He[0][St][1]),_t=1;_t<at;++_t)B.call(ue,Ee[_t][St],Tt+=He[_t-1][St][1],He[_t][St][1]);return ge}return ue.values=function(ge){return arguments.length?(ce=ge,ue):ce},ue.order=function(ge){return arguments.length?(C=typeof ge=="function"?ge:Hn.get(ge)||di,ue):C},ue.offset=function(ge){return arguments.length?(z=typeof ge=="function"?ge:Rn.get(ge)||wi,ue):z},ue.x=function(ge){return arguments.length?(G=ge,ue):G},ue.y=function(ge){return arguments.length?(ae=ge,ue):ae},ue.out=function(ge){return arguments.length?(B=ge,ue):B},ue};var Hn=o.map({"inside-out":function(ce){var C,z,B=ce.length,G=ce.map(Ri),ae=ce.map(Di),ue=o.range(B).sort(function(Xe,at){return G[Xe]-G[at]}),ge=0,_e=0,Ee=[],He=[];for(C=0;C<B;++C)z=ue[C],ge<_e?(ge+=ae[z],Ee.push(z)):(_e+=ae[z],He.push(z));return He.reverse().concat(Ee)},reverse:function(ce){return o.range(ce.length).reverse()},default:di}),Rn=o.map({silhouette:function(ce){var C,z,B,G=ce.length,ae=ce[0].length,ue=[],ge=0,_e=[];for(z=0;z<ae;++z){for(C=0,B=0;C<G;C++)B+=ce[C][z][1];B>ge&&(ge=B),ue.push(B)}for(z=0;z<ae;++z)_e[z]=(ge-ue[z])/2;return _e},wiggle:function(ce){var C,z,B,G,ae,ue,ge,_e,Ee,He=ce.length,Xe=ce[0],at=Xe.length,_t=[];for(_t[0]=_e=Ee=0,z=1;z<at;++z){for(C=0,G=0;C<He;++C)G+=ce[C][z][1];for(C=0,ae=0,ge=Xe[z][0]-Xe[z-1][0];C<He;++C){for(B=0,ue=(ce[C][z][1]-ce[C][z-1][1])/(2*ge);B<C;++B)ue+=(ce[B][z][1]-ce[B][z-1][1])/ge;ae+=ue*ce[C][z][1]}_t[z]=_e-=G?ae/G*ge:0,_e<Ee&&(Ee=_e)}for(z=0;z<at;++z)_t[z]-=Ee;return _t},expand:function(ce){var C,z,B,G=ce.length,ae=ce[0].length,ue=1/G,ge=[];for(z=0;z<ae;++z){for(C=0,B=0;C<G;C++)B+=ce[C][z][1];if(B)for(C=0;C<G;C++)ce[C][z][1]/=B;else for(C=0;C<G;C++)ce[C][z][1]=ue}for(z=0;z<ae;++z)ge[z]=0;return ge},zero:wi});function di(ce){return o.range(ce.length)}function wi(ce){for(var C=-1,z=ce[0].length,B=[];++C<z;)B[C]=0;return B}function Ri(ce){for(var C,z=1,B=0,G=ce[0][1],ae=ce.length;z<ae;++z)(C=ce[z][1])>G&&(B=z,G=C);return B}function Di(ce){return ce.reduce(Fi,0)}function Fi(ce,C){return ce+C[1]}function Ta(ce,C){return xa(ce,Math.ceil(Math.log(C.length)/Math.LN2+1))}function xa(ce,C){for(var z=-1,B=+ce[0],G=(ce[1]-B)/C,ae=[];++z<=C;)ae[z]=G*z+B;return ae}function aa(ce){return[o.min(ce),o.max(ce)]}function oa(ce,C){return ce.value-C.value}function ba(ce,C){var z=ce._pack_next;ce._pack_next=C,C._pack_prev=ce,C._pack_next=z,z._pack_prev=C}function ja(ce,C){ce._pack_next=C,C._pack_prev=ce}function eo(ce,C){var z=C.x-ce.x,B=C.y-ce.y,G=ce.r+C.r;return .999*G*G>z*z+B*B}function to(ce){if((C=ce.children)&&(_e=C.length)){var C,z,B,G,ae,ue,ge,_e,Ee=1/0,He=-1/0,Xe=1/0,at=-1/0;if(C.forEach(ro),(z=C[0]).x=-z.r,z.y=0,zt(z),_e>1&&((B=C[1]).x=B.r,B.y=0,zt(B),_e>2))for(Ci(z,B,G=C[2]),zt(G),ba(z,G),z._pack_prev=G,ba(G,B),B=z._pack_next,ae=3;ae<_e;ae++){Ci(z,B,G=C[ae]);var _t=0,St=1,Tt=1;for(ue=B._pack_next;ue!==B;ue=ue._pack_next,St++)if(eo(ue,G)){_t=1;break}if(_t==1)for(ge=z._pack_prev;ge!==ue._pack_prev&&!eo(ge,G);ge=ge._pack_prev,Tt++);_t?(St<Tt||St==Tt&&B.r<z.r?ja(z,B=ue):ja(z=ge,B),ae--):(ba(z,G),B=G,zt(G))}var kt=(Ee+He)/2,bt=(Xe+at)/2,Nt=0;for(ae=0;ae<_e;ae++)(G=C[ae]).x-=kt,G.y-=bt,Nt=Math.max(Nt,G.r+Math.sqrt(G.x*G.x+G.y*G.y));ce.r=Nt,C.forEach(no)}function zt(Ut){Ee=Math.min(Ut.x-Ut.r,Ee),He=Math.max(Ut.x+Ut.r,He),Xe=Math.min(Ut.y-Ut.r,Xe),at=Math.max(Ut.y+Ut.r,at)}}function ro(ce){ce._pack_next=ce._pack_prev=ce}function no(ce){delete ce._pack_next,delete ce._pack_prev}function Ci(ce,C,z){var B=ce.r+z.r,G=C.x-ce.x,ae=C.y-ce.y;if(B&&(G||ae)){var ue=C.r+z.r,ge=G*G+ae*ae,_e=.5+((B*=B)-(ue*=ue))/(2*ge),Ee=Math.sqrt(Math.max(0,2*ue*(B+ge)-(B-=ge)*B-ue*ue))/(2*ge);z.x=ce.x+_e*G+Ee*ae,z.y=ce.y+_e*ae-Ee*G}else z.x=ce.x+B,z.y=ce.y}function pt(ce,C){return ce.parent==C.parent?1:2}function Ft(ce){var C=ce.children;return C.length?C[0]:ce.t}function sr(ce){var C,z=ce.children;return(C=z.length)?z[C-1]:ce.t}function Yt(ce,C,z){var B=z/(C.i-ce.i);C.c-=B,C.s+=z,ce.c+=B,C.z+=z,C.m+=z}function lr(ce,C,z){return ce.a.parent===C.parent?ce.a:z}function Pr(ce){return{x:ce.x,y:ce.y,dx:ce.dx,dy:ce.dy}}function Rr(ce,C){var z=ce.x+C[3],B=ce.y+C[0],G=ce.dx-C[1]-C[3],ae=ce.dy-C[0]-C[2];return G<0&&(z+=G/2,G=0),ae<0&&(B+=ae/2,ae=0),{x:z,y:B,dx:G,dy:ae}}function Zr(ce){var C=ce[0],z=ce[ce.length-1];return C<z?[C,z]:[z,C]}function cn(ce){return ce.rangeExtent?ce.rangeExtent():Zr(ce.range())}function nn(ce,C,z,B){var G=z(ce[0],ce[1]),ae=B(C[0],C[1]);return function(ue){return ae(G(ue))}}function mn(ce,C){var z,B=0,G=ce.length-1,ae=ce[B],ue=ce[G];return ue<ae&&(z=B,B=G,G=z,z=ae,ae=ue,ue=z),ce[B]=C.floor(ae),ce[G]=C.ceil(ue),ce}function wn(ce){return ce?{floor:function(C){return Math.floor(C/ce)*ce},ceil:function(C){return Math.ceil(C/ce)*ce}}:un}o.layout.histogram=function(){var ce=!0,C=Number,z=aa,B=Ta;function G(ae,ue){for(var ge,_e,Ee=[],He=ae.map(C,this),Xe=z.call(this,He,ue),at=B.call(this,Xe,He,ue),_t=(ue=-1,He.length),St=at.length-1,Tt=ce?1:1/_t;++ue<St;)(ge=Ee[ue]=[]).dx=at[ue+1]-(ge.x=at[ue]),ge.y=0;if(St>0)for(ue=-1;++ue<_t;)(_e=He[ue])>=Xe[0]&&_e<=Xe[1]&&((ge=Ee[o.bisect(at,_e,1,St)-1]).y+=Tt,ge.push(ae[ue]));return Ee}return G.value=function(ae){return arguments.length?(C=ae,G):C},G.range=function(ae){return arguments.length?(z=yr(ae),G):z},G.bins=function(ae){return arguments.length?(B=typeof ae=="number"?function(ue){return xa(ue,ae)}:yr(ae),G):B},G.frequency=function(ae){return arguments.length?(ce=!!ae,G):ce},G},o.layout.pack=function(){var ce,C=o.layout.hierarchy().sort(oa),z=0,B=[1,1];function G(ae,ue){var ge=C.call(this,ae,ue),_e=ge[0],Ee=B[0],He=B[1],Xe=ce==null?Math.sqrt:typeof ce=="function"?ce:function(){return ce};if(_e.x=_e.y=0,ir(_e,function(_t){_t.r=+Xe(_t.value)}),ir(_e,to),z){var at=z*(ce?1:Math.max(2*_e.r/Ee,2*_e.r/He))/2;ir(_e,function(_t){_t.r+=at}),ir(_e,to),ir(_e,function(_t){_t.r-=at})}return function _t(St,Tt,kt,bt){var Nt=St.children;if(St.x=Tt+=bt*St.x,St.y=kt+=bt*St.y,St.r*=bt,Nt)for(var zt=-1,Ut=Nt.length;++zt<Ut;)_t(Nt[zt],Tt,kt,bt)}(_e,Ee/2,He/2,ce?1:1/Math.max(2*_e.r/Ee,2*_e.r/He)),ge}return G.size=function(ae){return arguments.length?(B=ae,G):B},G.radius=function(ae){return arguments.length?(ce=ae==null||typeof ae=="function"?ae:+ae,G):ce},G.padding=function(ae){return arguments.length?(z=+ae,G):z},er(G,C)},o.layout.tree=function(){var ce=o.layout.hierarchy().sort(null).value(null),C=pt,z=[1,1],B=null;function G(_e,Ee){var He=ce.call(this,_e,Ee),Xe=He[0],at=function(zt){for(var Ut,nr={A:null,children:[zt]},pr=[nr];(Ut=pr.pop())!=null;)for(var Mr,kr=Ut.children,Qr=0,$r=kr.length;Qr<$r;++Qr)pr.push((kr[Qr]=Mr={_:kr[Qr],parent:Ut,children:(Mr=kr[Qr].children)&&Mr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Qr}).a=Mr);return nr.children[0]}(Xe);if(ir(at,ae),at.parent.m=-at.z,Xt(at,ue),B)Xt(Xe,ge);else{var _t=Xe,St=Xe,Tt=Xe;Xt(Xe,function(zt){zt.x<_t.x&&(_t=zt),zt.x>St.x&&(St=zt),zt.depth>Tt.depth&&(Tt=zt)});var kt=C(_t,St)/2-_t.x,bt=z[0]/(St.x+C(St,_t)/2+kt),Nt=z[1]/(Tt.depth||1);Xt(Xe,function(zt){zt.x=(zt.x+kt)*bt,zt.y=zt.depth*Nt})}return He}function ae(_e){var Ee=_e.children,He=_e.parent.children,Xe=_e.i?He[_e.i-1]:null;if(Ee.length){(function(_t){for(var St,Tt=0,kt=0,bt=_t.children,Nt=bt.length;--Nt>=0;)(St=bt[Nt]).z+=Tt,St.m+=Tt,Tt+=St.s+(kt+=St.c)})(_e);var at=(Ee[0].z+Ee[Ee.length-1].z)/2;Xe?(_e.z=Xe.z+C(_e._,Xe._),_e.m=_e.z-at):_e.z=at}else Xe&&(_e.z=Xe.z+C(_e._,Xe._));_e.parent.A=function(_t,St,Tt){if(St){for(var kt,bt=_t,Nt=_t,zt=St,Ut=bt.parent.children[0],nr=bt.m,pr=Nt.m,Mr=zt.m,kr=Ut.m;zt=sr(zt),bt=Ft(bt),zt&&bt;)Ut=Ft(Ut),(Nt=sr(Nt)).a=_t,(kt=zt.z+Mr-bt.z-nr+C(zt._,bt._))>0&&(Yt(lr(zt,_t,Tt),_t,kt),nr+=kt,pr+=kt),Mr+=zt.m,nr+=bt.m,kr+=Ut.m,pr+=Nt.m;zt&&!sr(Nt)&&(Nt.t=zt,Nt.m+=Mr-pr),bt&&!Ft(Ut)&&(Ut.t=bt,Ut.m+=nr-kr,Tt=_t)}return Tt}(_e,Xe,_e.parent.A||He[0])}function ue(_e){_e._.x=_e.z+_e.parent.m,_e.m+=_e.parent.m}function ge(_e){_e.x*=z[0],_e.y=_e.depth*z[1]}return G.separation=function(_e){return arguments.length?(C=_e,G):C},G.size=function(_e){return arguments.length?(B=(z=_e)==null?ge:null,G):B?null:z},G.nodeSize=function(_e){return arguments.length?(B=(z=_e)==null?null:ge,G):B?z:null},er(G,ce)},o.layout.cluster=function(){var ce=o.layout.hierarchy().sort(null).value(null),C=pt,z=[1,1],B=!1;function G(ae,ue){var ge,_e=ce.call(this,ae,ue),Ee=_e[0],He=0;ir(Ee,function(Tt){var kt=Tt.children;kt&&kt.length?(Tt.x=function(bt){return bt.reduce(function(Nt,zt){return Nt+zt.x},0)/bt.length}(kt),Tt.y=function(bt){return 1+o.max(bt,function(Nt){return Nt.y})}(kt)):(Tt.x=ge?He+=C(Tt,ge):0,Tt.y=0,ge=Tt)});var Xe=function Tt(kt){var bt=kt.children;return bt&&bt.length?Tt(bt[0]):kt}(Ee),at=function Tt(kt){var bt,Nt=kt.children;return Nt&&(bt=Nt.length)?Tt(Nt[bt-1]):kt}(Ee),_t=Xe.x-C(Xe,at)/2,St=at.x+C(at,Xe)/2;return ir(Ee,B?function(Tt){Tt.x=(Tt.x-Ee.x)*z[0],Tt.y=(Ee.y-Tt.y)*z[1]}:function(Tt){Tt.x=(Tt.x-_t)/(St-_t)*z[0],Tt.y=(1-(Ee.y?Tt.y/Ee.y:1))*z[1]}),_e}return G.separation=function(ae){return arguments.length?(C=ae,G):C},G.size=function(ae){return arguments.length?(B=(z=ae)==null,G):B?null:z},G.nodeSize=function(ae){return arguments.length?(B=(z=ae)!=null,G):B?z:null},er(G,ce)},o.layout.treemap=function(){var ce,C=o.layout.hierarchy(),z=Math.round,B=[1,1],G=null,ae=Pr,ue=!1,ge="squarify",_e=.5*(1+Math.sqrt(5));function Ee(Tt,kt){for(var bt,Nt,zt=-1,Ut=Tt.length;++zt<Ut;)Nt=(bt=Tt[zt]).value*(kt<0?0:kt),bt.area=isNaN(Nt)||Nt<=0?0:Nt}function He(Tt){var kt=Tt.children;if(kt&&kt.length){var bt,Nt,zt,Ut=ae(Tt),nr=[],pr=kt.slice(),Mr=1/0,kr=ge==="slice"?Ut.dx:ge==="dice"?Ut.dy:ge==="slice-dice"?1&Tt.depth?Ut.dy:Ut.dx:Math.min(Ut.dx,Ut.dy);for(Ee(pr,Ut.dx*Ut.dy/Tt.value),nr.area=0;(zt=pr.length)>0;)nr.push(bt=pr[zt-1]),nr.area+=bt.area,ge!=="squarify"||(Nt=at(nr,kr))<=Mr?(pr.pop(),Mr=Nt):(nr.area-=nr.pop().area,_t(nr,kr,Ut,!1),kr=Math.min(Ut.dx,Ut.dy),nr.length=nr.area=0,Mr=1/0);nr.length&&(_t(nr,kr,Ut,!0),nr.length=nr.area=0),kt.forEach(He)}}function Xe(Tt){var kt=Tt.children;if(kt&&kt.length){var bt,Nt=ae(Tt),zt=kt.slice(),Ut=[];for(Ee(zt,Nt.dx*Nt.dy/Tt.value),Ut.area=0;bt=zt.pop();)Ut.push(bt),Ut.area+=bt.area,bt.z!=null&&(_t(Ut,bt.z?Nt.dx:Nt.dy,Nt,!zt.length),Ut.length=Ut.area=0);kt.forEach(Xe)}}function at(Tt,kt){for(var bt,Nt=Tt.area,zt=0,Ut=1/0,nr=-1,pr=Tt.length;++nr<pr;)(bt=Tt[nr].area)&&(bt<Ut&&(Ut=bt),bt>zt&&(zt=bt));return kt*=kt,(Nt*=Nt)?Math.max(kt*zt*_e/Nt,Nt/(kt*Ut*_e)):1/0}function _t(Tt,kt,bt,Nt){var zt,Ut=-1,nr=Tt.length,pr=bt.x,Mr=bt.y,kr=kt?z(Tt.area/kt):0;if(kt==bt.dx){for((Nt||kr>bt.dy)&&(kr=bt.dy);++Ut<nr;)(zt=Tt[Ut]).x=pr,zt.y=Mr,zt.dy=kr,pr+=zt.dx=Math.min(bt.x+bt.dx-pr,kr?z(zt.area/kr):0);zt.z=!0,zt.dx+=bt.x+bt.dx-pr,bt.y+=kr,bt.dy-=kr}else{for((Nt||kr>bt.dx)&&(kr=bt.dx);++Ut<nr;)(zt=Tt[Ut]).x=pr,zt.y=Mr,zt.dx=kr,Mr+=zt.dy=Math.min(bt.y+bt.dy-Mr,kr?z(zt.area/kr):0);zt.z=!1,zt.dy+=bt.y+bt.dy-Mr,bt.x+=kr,bt.dx-=kr}}function St(Tt){var kt=ce||C(Tt),bt=kt[0];return bt.x=bt.y=0,bt.value?(bt.dx=B[0],bt.dy=B[1]):bt.dx=bt.dy=0,ce&&C.revalue(bt),Ee([bt],bt.dx*bt.dy/bt.value),(ce?Xe:He)(bt),ue&&(ce=kt),kt}return St.size=function(Tt){return arguments.length?(B=Tt,St):B},St.padding=function(Tt){if(!arguments.length)return G;function kt(zt){var Ut=Tt.call(St,zt,zt.depth);return Ut==null?Pr(zt):Rr(zt,typeof Ut=="number"?[Ut,Ut,Ut,Ut]:Ut)}function bt(zt){return Rr(zt,Tt)}var Nt;return ae=(G=Tt)==null?Pr:(Nt=typeof Tt)=="function"?kt:(Nt==="number"&&(Tt=[Tt,Tt,Tt,Tt]),bt),St},St.round=function(Tt){return arguments.length?(z=Tt?Math.round:Number,St):z!=Number},St.sticky=function(Tt){return arguments.length?(ue=Tt,ce=null,St):ue},St.ratio=function(Tt){return arguments.length?(_e=Tt,St):_e},St.mode=function(Tt){return arguments.length?(ge=Tt+"",St):ge},er(St,C)},o.random={normal:function(ce,C){var z=arguments.length;return z<2&&(C=1),z<1&&(ce=0),function(){var B,G,ae;do ae=(B=2*Math.random()-1)*B+(G=2*Math.random()-1)*G;while(!ae||ae>1);return ce+C*B*Math.sqrt(-2*Math.log(ae)/ae)}},logNormal:function(){var ce=o.random.normal.apply(o,arguments);return function(){return Math.exp(ce())}},bates:function(ce){var C=o.random.irwinHall(ce);return function(){return C()/ce}},irwinHall:function(ce){return function(){for(var C=0,z=0;z<ce;z++)C+=Math.random();return C}}},o.scale={};var un={floor:E,ceil:E};function Tn(ce,C,z,B){var G=[],ae=[],ue=0,ge=Math.min(ce.length,C.length)-1;for(ce[ge]<ce[0]&&(ce=ce.slice().reverse(),C=C.slice().reverse());++ue<=ge;)G.push(z(ce[ue-1],ce[ue])),ae.push(B(C[ue-1],C[ue]));return function(_e){var Ee=o.bisect(ce,_e,1,ge)-1;return ae[Ee](G[Ee](_e))}}function Fn(ce,C){return o.rebind(ce,C,"range","rangeRound","interpolate","clamp")}function Vn(ce,C){return mn(ce,wn(ti(ce,C)[2])),mn(ce,wn(ti(ce,C)[2])),ce}function ti(ce,C){C==null&&(C=10);var z=Zr(ce),B=z[1]-z[0],G=Math.pow(10,Math.floor(Math.log(B/C)/Math.LN10)),ae=C/B*G;return ae<=.15?G*=10:ae<=.35?G*=5:ae<=.75&&(G*=2),z[0]=Math.ceil(z[0]/G)*G,z[1]=Math.floor(z[1]/G)*G+.5*G,z[2]=G,z}function Jr(ce,C){return o.range.apply(o,ti(ce,C))}o.scale.linear=function(){return function ce(C,z,B,G){var ae,ue;function ge(){var Ee=Math.min(C.length,z.length)>2?Tn:nn,He=G?Io:As;return ae=Ee(C,z,He,B),ue=Ee(z,C,He,Na),_e}function _e(Ee){return ae(Ee)}return _e.invert=function(Ee){return ue(Ee)},_e.domain=function(Ee){return arguments.length?(C=Ee.map(Number),ge()):C},_e.range=function(Ee){return arguments.length?(z=Ee,ge()):z},_e.rangeRound=function(Ee){return _e.range(Ee).interpolate(Yo)},_e.clamp=function(Ee){return arguments.length?(G=Ee,ge()):G},_e.interpolate=function(Ee){return arguments.length?(B=Ee,ge()):B},_e.ticks=function(Ee){return Jr(C,Ee)},_e.tickFormat=function(Ee,He){return d3_scale_linearTickFormat(C,Ee,He)},_e.nice=function(Ee){return Vn(C,Ee),ge()},_e.copy=function(){return ce(C,z,B,G)},ge()}([0,1],[0,1],Na,!1)},o.scale.log=function(){return function ce(C,z,B,G){function ae(_e){return(B?Math.log(_e<0?0:_e):-Math.log(_e>0?0:-_e))/Math.log(z)}function ue(_e){return B?Math.pow(z,_e):-Math.pow(z,-_e)}function ge(_e){return C(ae(_e))}return ge.invert=function(_e){return ue(C.invert(_e))},ge.domain=function(_e){return arguments.length?(B=_e[0]>=0,C.domain((G=_e.map(Number)).map(ae)),ge):G},ge.base=function(_e){return arguments.length?(z=+_e,C.domain(G.map(ae)),ge):z},ge.nice=function(){var _e=mn(G.map(ae),B?Math:$n);return C.domain(_e),G=_e.map(ue),ge},ge.ticks=function(){var _e=Zr(G),Ee=[],He=_e[0],Xe=_e[1],at=Math.floor(ae(He)),_t=Math.ceil(ae(Xe)),St=z%1?2:z;if(isFinite(_t-at)){if(B){for(;at<_t;at++)for(var Tt=1;Tt<St;Tt++)Ee.push(ue(at)*Tt);Ee.push(ue(at))}else for(Ee.push(ue(at));at++<_t;)for(Tt=St-1;Tt>0;Tt--)Ee.push(ue(at)*Tt);for(at=0;Ee[at]<He;at++);for(_t=Ee.length;Ee[_t-1]>Xe;_t--);Ee=Ee.slice(at,_t)}return Ee},ge.copy=function(){return ce(C.copy(),z,B,G)},Fn(ge,C)}(o.scale.linear().domain([0,1]),10,!0,[1,10])};var $n={floor:function(ce){return-Math.ceil(-ce)},ceil:function(ce){return-Math.floor(-ce)}};function In(ce){return function(C){return C<0?-Math.pow(-C,ce):Math.pow(C,ce)}}o.scale.pow=function(){return function ce(C,z,B){var G=In(z),ae=In(1/z);function ue(ge){return C(G(ge))}return ue.invert=function(ge){return ae(C.invert(ge))},ue.domain=function(ge){return arguments.length?(C.domain((B=ge.map(Number)).map(G)),ue):B},ue.ticks=function(ge){return Jr(B,ge)},ue.tickFormat=function(ge,_e){return d3_scale_linearTickFormat(B,ge,_e)},ue.nice=function(ge){return ue.domain(Vn(B,ge))},ue.exponent=function(ge){return arguments.length?(G=In(z=ge),ae=In(1/z),C.domain(B.map(G)),ue):z},ue.copy=function(){return ce(C.copy(),z,B)},Fn(ue,C)}(o.scale.linear(),1,[0,1])},o.scale.sqrt=function(){return o.scale.pow().exponent(.5)},o.scale.ordinal=function(){return function ce(C,z){var B,G,ae;function ue(_e){return G[((B.get(_e)||(z.t==="range"?B.set(_e,C.push(_e)):NaN))-1)%G.length]}function ge(_e,Ee){return o.range(C.length).map(function(He){return _e+Ee*He})}return ue.domain=function(_e){if(!arguments.length)return C;C=[],B=new w;for(var Ee,He=-1,Xe=_e.length;++He<Xe;)B.has(Ee=_e[He])||B.set(Ee,C.push(Ee));return ue[z.t].apply(ue,z.a)},ue.range=function(_e){return arguments.length?(G=_e,ae=0,z={t:"range",a:arguments},ue):G},ue.rangePoints=function(_e,Ee){arguments.length<2&&(Ee=0);var He=_e[0],Xe=_e[1],at=C.length<2?(He=(He+Xe)/2,0):(Xe-He)/(C.length-1+Ee);return G=ge(He+at*Ee/2,at),ae=0,z={t:"rangePoints",a:arguments},ue},ue.rangeRoundPoints=function(_e,Ee){arguments.length<2&&(Ee=0);var He=_e[0],Xe=_e[1],at=C.length<2?(He=Xe=Math.round((He+Xe)/2),0):(Xe-He)/(C.length-1+Ee)|0;return G=ge(He+Math.round(at*Ee/2+(Xe-He-(C.length-1+Ee)*at)/2),at),ae=0,z={t:"rangeRoundPoints",a:arguments},ue},ue.rangeBands=function(_e,Ee,He){arguments.length<2&&(Ee=0),arguments.length<3&&(He=Ee);var Xe=_e[1]<_e[0],at=_e[Xe-0],_t=_e[1-Xe],St=(_t-at)/(C.length-Ee+2*He);return G=ge(at+St*He,St),Xe&&G.reverse(),ae=St*(1-Ee),z={t:"rangeBands",a:arguments},ue},ue.rangeRoundBands=function(_e,Ee,He){arguments.length<2&&(Ee=0),arguments.length<3&&(He=Ee);var Xe=_e[1]<_e[0],at=_e[Xe-0],_t=_e[1-Xe],St=Math.floor((_t-at)/(C.length-Ee+2*He));return G=ge(at+Math.round((_t-at-(C.length-Ee)*St)/2),St),Xe&&G.reverse(),ae=Math.round(St*(1-Ee)),z={t:"rangeRoundBands",a:arguments},ue},ue.rangeBand=function(){return ae},ue.rangeExtent=function(){return Zr(z.a[0])},ue.copy=function(){return ce(C,z)},ue.domain(C)}([],{t:"range",a:[[]]})},o.scale.category10=function(){return o.scale.ordinal().range(jn)},o.scale.category20=function(){return o.scale.ordinal().range(Kn)},o.scale.category20b=function(){return o.scale.ordinal().range(_i)},o.scale.category20c=function(){return o.scale.ordinal().range(Si)};var jn=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(qt),Kn=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(qt),_i=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(qt),Si=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(qt);function En(){return 0}o.scale.quantile=function(){return function ce(C,z){var B;function G(){var ue=0,ge=z.length;for(B=[];++ue<ge;)B[ue-1]=o.quantile(C,ue/ge);return ae}function ae(ue){if(!isNaN(ue=+ue))return z[o.bisect(B,ue)]}return ae.domain=function(ue){return arguments.length?(C=ue.map(l).filter(f).sort(a),G()):C},ae.range=function(ue){return arguments.length?(z=ue,G()):z},ae.quantiles=function(){return B},ae.invertExtent=function(ue){return(ue=z.indexOf(ue))<0?[NaN,NaN]:[ue>0?B[ue-1]:C[0],ue<B.length?B[ue]:C[C.length-1]]},ae.copy=function(){return ce(C,z)},G()}([],[])},o.scale.quantize=function(){return function ce(C,z,B){var G,ae;function ue(_e){return B[Math.max(0,Math.min(ae,Math.floor(G*(_e-C))))]}function ge(){return G=B.length/(z-C),ae=B.length-1,ue}return ue.domain=function(_e){return arguments.length?(C=+_e[0],z=+_e[_e.length-1],ge()):[C,z]},ue.range=function(_e){return arguments.length?(B=_e,ge()):B},ue.invertExtent=function(_e){return[_e=(_e=B.indexOf(_e))<0?NaN:_e/G+C,_e+1/G]},ue.copy=function(){return ce(C,z,B)},ge()}(0,1,[0,1])},o.scale.threshold=function(){return function ce(C,z){function B(G){if(G<=G)return z[o.bisect(C,G)]}return B.domain=function(G){return arguments.length?(C=G,B):C},B.range=function(G){return arguments.length?(z=G,B):z},B.invertExtent=function(G){return G=z.indexOf(G),[C[G-1],C[G]]},B.copy=function(){return ce(C,z)},B}([.5],[0,1])},o.scale.identity=function(){return function ce(C){function z(B){return+B}return z.invert=z,z.domain=z.range=function(B){return arguments.length?(C=B.map(z),z):C},z.ticks=function(B){return Jr(C,B)},z.tickFormat=function(B,G){return d3_scale_linearTickFormat(C,B,G)},z.copy=function(){return ce(C)},z}([0,1])},o.svg={},o.svg.arc=function(){var ce=Ai,C=pi,z=En,B=Pi,G=Ii,ae=Ti,ue=Ki;function ge(){var Ee=Math.max(0,+ce.apply(this,arguments)),He=Math.max(0,+C.apply(this,arguments)),Xe=G.apply(this,arguments)-Ye,at=ae.apply(this,arguments)-Ye,_t=Math.abs(at-Xe),St=Xe>at?0:1;if(He<Ee&&(Tt=He,He=Ee,Ee=Tt),_t>=Ve)return _e(He,St)+(Ee?_e(Ee,1-St):"")+"Z";var Tt,kt,bt,Nt,zt,Ut,nr,pr,Mr,kr,Qr,$r,pn=0,sn=0,Un=[];if((Nt=(+ue.apply(this,arguments)||0)/2)&&(bt=B===Pi?Math.sqrt(Ee*Ee+He*He):+B.apply(this,arguments),St||(sn*=-1),He&&(sn=Se(bt/He*Math.sin(Nt))),Ee&&(pn=Se(bt/Ee*Math.sin(Nt)))),He){zt=He*Math.cos(Xe+sn),Ut=He*Math.sin(Xe+sn),nr=He*Math.cos(at-sn),pr=He*Math.sin(at-sn);var Wn=Math.abs(at-Xe-2*sn)<=Gt?0:1;if(sn&&Qn(zt,Ut,nr,pr)===St^Wn){var li=(Xe+at)/2;zt=He*Math.cos(li),Ut=He*Math.sin(li),nr=pr=null}}else zt=Ut=0;if(Ee){Mr=Ee*Math.cos(at-pn),kr=Ee*Math.sin(at-pn),Qr=Ee*Math.cos(Xe+pn),$r=Ee*Math.sin(Xe+pn);var Hr=Math.abs(Xe-at+2*pn)<=Gt?0:1;if(pn&&Qn(Mr,kr,Qr,$r)===1-St^Hr){var kn=(Xe+at)/2;Mr=Ee*Math.cos(kn),kr=Ee*Math.sin(kn),Qr=$r=null}}else Mr=kr=0;if(_t>At&&(Tt=Math.min(Math.abs(He-Ee)/2,+z.apply(this,arguments)))>.001){kt=Ee<He^St?0:1;var Zn=Tt,qn=Tt;if(_t<Gt){var ei=Qr==null?[Mr,kr]:nr==null?[zt,Ut]:Ot([zt,Ut],[Qr,$r],[nr,pr],[Mr,kr]),ui=zt-ei[0],ki=Ut-ei[1],Jn=nr-ei[0],yi=pr-ei[1],mi=1/Math.sin(Math.acos((ui*Jn+ki*yi)/(Math.sqrt(ui*ui+ki*ki)*Math.sqrt(Jn*Jn+yi*yi)))/2),Ei=Math.sqrt(ei[0]*ei[0]+ei[1]*ei[1]);qn=Math.min(Tt,(Ee-Ei)/(mi-1)),Zn=Math.min(Tt,(He-Ei)/(mi+1))}if(nr!=null){var xi=Gi(Qr==null?[Mr,kr]:[Qr,$r],[zt,Ut],He,Zn,St),Li=Gi([nr,pr],[Mr,kr],He,Zn,St);Tt===Zn?Un.push("M",xi[0],"A",Zn,",",Zn," 0 0,",kt," ",xi[1],"A",He,",",He," 0 ",1-St^Qn(xi[1][0],xi[1][1],Li[1][0],Li[1][1]),",",St," ",Li[1],"A",Zn,",",Zn," 0 0,",kt," ",Li[0]):Un.push("M",xi[0],"A",Zn,",",Zn," 0 1,",kt," ",Li[0])}else Un.push("M",zt,",",Ut);if(Qr!=null){var Bi=Gi([zt,Ut],[Qr,$r],Ee,-qn,St),ca=Gi([Mr,kr],nr==null?[zt,Ut]:[nr,pr],Ee,-qn,St);Tt===qn?Un.push("L",ca[0],"A",qn,",",qn," 0 0,",kt," ",ca[1],"A",Ee,",",Ee," 0 ",St^Qn(ca[1][0],ca[1][1],Bi[1][0],Bi[1][1]),",",1-St," ",Bi[1],"A",qn,",",qn," 0 0,",kt," ",Bi[0]):Un.push("L",ca[0],"A",qn,",",qn," 0 0,",kt," ",Bi[0])}else Un.push("L",Mr,",",kr)}else Un.push("M",zt,",",Ut),nr!=null&&Un.push("A",He,",",He," 0 ",Wn,",",St," ",nr,",",pr),Un.push("L",Mr,",",kr),Qr!=null&&Un.push("A",Ee,",",Ee," 0 ",Hr,",",1-St," ",Qr,",",$r);return Un.push("Z"),Un.join("")}function _e(Ee,He){return"M0,"+Ee+"A"+Ee+","+Ee+" 0 1,"+He+" 0,"+-Ee+"A"+Ee+","+Ee+" 0 1,"+He+" 0,"+Ee}return ge.innerRadius=function(Ee){return arguments.length?(ce=yr(Ee),ge):ce},ge.outerRadius=function(Ee){return arguments.length?(C=yr(Ee),ge):C},ge.cornerRadius=function(Ee){return arguments.length?(z=yr(Ee),ge):z},ge.padRadius=function(Ee){return arguments.length?(B=Ee==Pi?Pi:yr(Ee),ge):B},ge.startAngle=function(Ee){return arguments.length?(G=yr(Ee),ge):G},ge.endAngle=function(Ee){return arguments.length?(ae=yr(Ee),ge):ae},ge.padAngle=function(Ee){return arguments.length?(ue=yr(Ee),ge):ue},ge.centroid=function(){var Ee=(+ce.apply(this,arguments)+ +C.apply(this,arguments))/2,He=(+G.apply(this,arguments)+ +ae.apply(this,arguments))/2-Ye;return[Math.cos(He)*Ee,Math.sin(He)*Ee]},ge};var Pi="auto";function Ai(ce){return ce.innerRadius}function pi(ce){return ce.outerRadius}function Ii(ce){return ce.startAngle}function Ti(ce){return ce.endAngle}function Ki(ce){return ce&&ce.padAngle}function Qn(ce,C,z,B){return(ce-z)*C-(C-B)*ce>0?0:1}function Gi(ce,C,z,B,G){var ae=ce[0]-C[0],ue=ce[1]-C[1],ge=(G?B:-B)/Math.sqrt(ae*ae+ue*ue),_e=ge*ue,Ee=-ge*ae,He=ce[0]+_e,Xe=ce[1]+Ee,at=C[0]+_e,_t=C[1]+Ee,St=(He+at)/2,Tt=(Xe+_t)/2,kt=at-He,bt=_t-Xe,Nt=kt*kt+bt*bt,zt=z-B,Ut=He*_t-at*Xe,nr=(bt<0?-1:1)*Math.sqrt(Math.max(0,zt*zt*Nt-Ut*Ut)),pr=(Ut*bt-kt*nr)/Nt,Mr=(-Ut*kt-bt*nr)/Nt,kr=(Ut*bt+kt*nr)/Nt,Qr=(-Ut*kt+bt*nr)/Nt,$r=pr-St,pn=Mr-Tt,sn=kr-St,Un=Qr-Tt;return $r*$r+pn*pn>sn*sn+Un*Un&&(pr=kr,Mr=Qr),[[pr-_e,Mr-Ee],[pr*z/zt,Mr*z/zt]]}function Ua(){return!0}function ts(ce){var C=Fr,z=on,B=Ua,G=xo,ae=G.key,ue=.7;function ge(_e){var Ee,He=[],Xe=[],at=-1,_t=_e.length,St=yr(C),Tt=yr(z);function kt(){He.push("M",G(ce(Xe),ue))}for(;++at<_t;)B.call(this,Ee=_e[at],at)?Xe.push([+St.call(this,Ee,at),+Tt.call(this,Ee,at)]):Xe.length&&(kt(),Xe=[]);return Xe.length&&kt(),He.length?He.join(""):null}return ge.x=function(_e){return arguments.length?(C=_e,ge):C},ge.y=function(_e){return arguments.length?(z=_e,ge):z},ge.defined=function(_e){return arguments.length?(B=_e,ge):B},ge.interpolate=function(_e){return arguments.length?(ae=typeof _e=="function"?G=_e:(G=Bo.get(_e)||xo).key,ge):ae},ge.tension=function(_e){return arguments.length?(ue=_e,ge):ue},ge}o.svg.line=function(){return ts(E)};var Bo=o.map({linear:xo,"linear-closed":gi,step:function(ce){for(var C=0,z=ce.length,B=ce[0],G=[B[0],",",B[1]];++C<z;)G.push("H",(B[0]+(B=ce[C])[0])/2,"V",B[1]);return z>1&&G.push("H",B[0]),G.join("")},"step-before":da,"step-after":bo,basis:Ya,"basis-open":function(ce){if(ce.length<4)return xo(ce);for(var C,z=[],B=-1,G=ce.length,ae=[0],ue=[0];++B<3;)C=ce[B],ae.push(C[0]),ue.push(C[1]);for(z.push(ea(io,ae)+","+ea(io,ue)),--B;++B<G;)C=ce[B],ae.shift(),ae.push(C[0]),ue.shift(),ue.push(C[1]),vs(z,ae,ue);return z.join("")},"basis-closed":function(ce){for(var C,z,B=-1,G=ce.length,ae=G+4,ue=[],ge=[];++B<4;)z=ce[B%G],ue.push(z[0]),ge.push(z[1]);for(C=[ea(io,ue),",",ea(io,ge)],--B;++B<ae;)z=ce[B%G],ue.shift(),ue.push(z[0]),ge.shift(),ge.push(z[1]),vs(C,ue,ge);return C.join("")},bundle:function(ce,C){var z=ce.length-1;if(z)for(var B,G,ae=ce[0][0],ue=ce[0][1],ge=ce[z][0]-ae,_e=ce[z][1]-ue,Ee=-1;++Ee<=z;)B=ce[Ee],G=Ee/z,B[0]=C*B[0]+(1-C)*(ae+G*ge),B[1]=C*B[1]+(1-C)*(ue+G*_e);return Ya(ce)},cardinal:function(ce,C){return ce.length<3?xo(ce):ce[0]+Yi(ce,ka(ce,C))},"cardinal-open":function(ce,C){return ce.length<4?xo(ce):ce[1]+Yi(ce.slice(1,-1),ka(ce,C))},"cardinal-closed":function(ce,C){return ce.length<3?gi(ce):ce[0]+Yi((ce.push(ce[0]),ce),ka([ce[ce.length-2]].concat(ce,[ce[1]]),C))},monotone:function(ce){return ce.length<3?xo(ce):ce[0]+Yi(ce,function(C){for(var z,B,G,ae,ue=[],ge=function(He){for(var Xe=0,at=He.length-1,_t=[],St=He[0],Tt=He[1],kt=_t[0]=cs(St,Tt);++Xe<at;)_t[Xe]=(kt+(kt=cs(St=Tt,Tt=He[Xe+1])))/2;return _t[Xe]=kt,_t}(C),_e=-1,Ee=C.length-1;++_e<Ee;)z=cs(C[_e],C[_e+1]),c(z)<At?ge[_e]=ge[_e+1]=0:(B=ge[_e]/z,G=ge[_e+1]/z,(ae=B*B+G*G)>9&&(ae=3*z/Math.sqrt(ae),ge[_e]=ae*B,ge[_e+1]=ae*G));for(_e=-1;++_e<=Ee;)ae=(C[Math.min(Ee,_e+1)][0]-C[Math.max(0,_e-1)][0])/(6*(1+ge[_e]*ge[_e])),ue.push([ae||0,ge[_e]*ae||0]);return ue}(ce))}});function xo(ce){return ce.length>1?ce.join("L"):ce+"Z"}function gi(ce){return ce.join("L")+"Z"}function da(ce){for(var C=0,z=ce.length,B=ce[0],G=[B[0],",",B[1]];++C<z;)G.push("V",(B=ce[C])[1],"H",B[0]);return G.join("")}function bo(ce){for(var C=0,z=ce.length,B=ce[0],G=[B[0],",",B[1]];++C<z;)G.push("H",(B=ce[C])[0],"V",B[1]);return G.join("")}function Yi(ce,C){if(C.length<1||ce.length!=C.length&&ce.length!=C.length+2)return xo(ce);var z=ce.length!=C.length,B="",G=ce[0],ae=ce[1],ue=C[0],ge=ue,_e=1;if(z&&(B+="Q"+(ae[0]-2*ue[0]/3)+","+(ae[1]-2*ue[1]/3)+","+ae[0]+","+ae[1],G=ce[1],_e=2),C.length>1){ge=C[1],ae=ce[_e],_e++,B+="C"+(G[0]+ue[0])+","+(G[1]+ue[1])+","+(ae[0]-ge[0])+","+(ae[1]-ge[1])+","+ae[0]+","+ae[1];for(var Ee=2;Ee<C.length;Ee++,_e++)ae=ce[_e],ge=C[Ee],B+="S"+(ae[0]-ge[0])+","+(ae[1]-ge[1])+","+ae[0]+","+ae[1]}if(z){var He=ce[_e];B+="Q"+(ae[0]+2*ge[0]/3)+","+(ae[1]+2*ge[1]/3)+","+He[0]+","+He[1]}return B}function ka(ce,C){for(var z,B=[],G=(1-C)/2,ae=ce[0],ue=ce[1],ge=1,_e=ce.length;++ge<_e;)z=ae,ae=ue,ue=ce[ge],B.push([G*(ue[0]-z[0]),G*(ue[1]-z[1])]);return B}function Ya(ce){if(ce.length<3)return xo(ce);var C=1,z=ce.length,B=ce[0],G=B[0],ae=B[1],ue=[G,G,G,(B=ce[1])[0]],ge=[ae,ae,ae,B[1]],_e=[G,",",ae,"L",ea(io,ue),",",ea(io,ge)];for(ce.push(ce[z-1]);++C<=z;)B=ce[C],ue.shift(),ue.push(B[0]),ge.shift(),ge.push(B[1]),vs(_e,ue,ge);return ce.pop(),_e.push("L",B),_e.join("")}function ea(ce,C){return ce[0]*C[0]+ce[1]*C[1]+ce[2]*C[2]+ce[3]*C[3]}Bo.forEach(function(ce,C){C.key=ce,C.closed=/-closed$/.test(ce)});var ho=[0,2/3,1/3,0],ta=[0,1/3,2/3,0],io=[0,1/6,2/3,1/6];function vs(ce,C,z){ce.push("C",ea(ho,C),",",ea(ho,z),",",ea(ta,C),",",ea(ta,z),",",ea(io,C),",",ea(io,z))}function cs(ce,C){return(C[1]-ce[1])/(C[0]-ce[0])}function rl(ce){for(var C,z,B,G=-1,ae=ce.length;++G<ae;)z=(C=ce[G])[0],B=C[1]-Ye,C[0]=z*Math.cos(B),C[1]=z*Math.sin(B);return ce}function za(ce){var C=Fr,z=Fr,B=0,G=on,ae=Ua,ue=xo,ge=ue.key,_e=ue,Ee="L",He=.7;function Xe(at){var _t,St,Tt,kt=[],bt=[],Nt=[],zt=-1,Ut=at.length,nr=yr(C),pr=yr(B),Mr=C===z?function(){return St}:yr(z),kr=B===G?function(){return Tt}:yr(G);function Qr(){kt.push("M",ue(ce(Nt),He),Ee,_e(ce(bt.reverse()),He),"Z")}for(;++zt<Ut;)ae.call(this,_t=at[zt],zt)?(bt.push([St=+nr.call(this,_t,zt),Tt=+pr.call(this,_t,zt)]),Nt.push([+Mr.call(this,_t,zt),+kr.call(this,_t,zt)])):bt.length&&(Qr(),bt=[],Nt=[]);return bt.length&&Qr(),kt.length?kt.join(""):null}return Xe.x=function(at){return arguments.length?(C=z=at,Xe):z},Xe.x0=function(at){return arguments.length?(C=at,Xe):C},Xe.x1=function(at){return arguments.length?(z=at,Xe):z},Xe.y=function(at){return arguments.length?(B=G=at,Xe):G},Xe.y0=function(at){return arguments.length?(B=at,Xe):B},Xe.y1=function(at){return arguments.length?(G=at,Xe):G},Xe.defined=function(at){return arguments.length?(ae=at,Xe):ae},Xe.interpolate=function(at){return arguments.length?(ge=typeof at=="function"?ue=at:(ue=Bo.get(at)||xo).key,_e=ue.reverse||ue,Ee=ue.closed?"M":"L",Xe):ge},Xe.tension=function(at){return arguments.length?(He=at,Xe):He},Xe}function nl(ce){return ce.source}function Ra(ce){return ce.target}function us(ce){return ce.radius}function si(ce){return[ce.x,ce.y]}function vi(ce){return function(){var C=ce.apply(this,arguments),z=C[0],B=C[1]-Ye;return[z*Math.cos(B),z*Math.sin(B)]}}function il(){return 64}function al(){return"circle"}function fs(ce){var C=Math.sqrt(ce/Gt);return"M0,"+C+"A"+C+","+C+" 0 1,1 0,"+-C+"A"+C+","+C+" 0 1,1 0,"+C+"Z"}o.svg.line.radial=function(){var ce=ts(rl);return ce.radius=ce.x,delete ce.x,ce.angle=ce.y,delete ce.y,ce},da.reverse=bo,bo.reverse=da,o.svg.area=function(){return za(E)},o.svg.area.radial=function(){var ce=za(rl);return ce.radius=ce.x,delete ce.x,ce.innerRadius=ce.x0,delete ce.x0,ce.outerRadius=ce.x1,delete ce.x1,ce.angle=ce.y,delete ce.y,ce.startAngle=ce.y0,delete ce.y0,ce.endAngle=ce.y1,delete ce.y1,ce},o.svg.chord=function(){var ce=nl,C=Ra,z=us,B=Ii,G=Ti;function ae(Ee,He){var Xe,at,_t=ue(this,ce,Ee,He),St=ue(this,C,Ee,He);return"M"+_t.p0+ge(_t.r,_t.p1,_t.a1-_t.a0)+(at=St,((Xe=_t).a0==at.a0&&Xe.a1==at.a1?_e(_t.r,_t.p1,_t.r,_t.p0):_e(_t.r,_t.p1,St.r,St.p0)+ge(St.r,St.p1,St.a1-St.a0)+_e(St.r,St.p1,_t.r,_t.p0))+"Z")}function ue(Ee,He,Xe,at){var _t=He.call(Ee,Xe,at),St=z.call(Ee,_t,at),Tt=B.call(Ee,_t,at)-Ye,kt=G.call(Ee,_t,at)-Ye;return{r:St,a0:Tt,a1:kt,p0:[St*Math.cos(Tt),St*Math.sin(Tt)],p1:[St*Math.cos(kt),St*Math.sin(kt)]}}function ge(Ee,He,Xe){return"A"+Ee+","+Ee+" 0 "+ +(Xe>Gt)+",1 "+He}function _e(Ee,He,Xe,at){return"Q 0,0 "+at}return ae.radius=function(Ee){return arguments.length?(z=yr(Ee),ae):z},ae.source=function(Ee){return arguments.length?(ce=yr(Ee),ae):ce},ae.target=function(Ee){return arguments.length?(C=yr(Ee),ae):C},ae.startAngle=function(Ee){return arguments.length?(B=yr(Ee),ae):B},ae.endAngle=function(Ee){return arguments.length?(G=yr(Ee),ae):G},ae},o.svg.diagonal=function(){var ce=nl,C=Ra,z=si;function B(G,ae){var ue=ce.call(this,G,ae),ge=C.call(this,G,ae),_e=(ue.y+ge.y)/2,Ee=[ue,{x:ue.x,y:_e},{x:ge.x,y:_e},ge];return"M"+(Ee=Ee.map(z))[0]+"C"+Ee[1]+" "+Ee[2]+" "+Ee[3]}return B.source=function(G){return arguments.length?(ce=yr(G),B):ce},B.target=function(G){return arguments.length?(C=yr(G),B):C},B.projection=function(G){return arguments.length?(z=G,B):z},B},o.svg.diagonal.radial=function(){var ce=o.svg.diagonal(),C=si,z=ce.projection;return ce.projection=function(B){return arguments.length?z(vi(C=B)):C},ce},o.svg.symbol=function(){var ce=al,C=il;function z(B,G){return(Oo.get(ce.call(this,B,G))||fs)(C.call(this,B,G))}return z.type=function(B){return arguments.length?(ce=yr(B),z):ce},z.size=function(B){return arguments.length?(C=yr(B),z):C},z};var Oo=o.map({circle:fs,cross:function(ce){var C=Math.sqrt(ce/5)/2;return"M"+-3*C+","+-C+"H"+-C+"V"+-3*C+"H"+C+"V"+-C+"H"+3*C+"V"+C+"H"+C+"V"+3*C+"H"+-C+"V"+C+"H"+-3*C+"Z"},diamond:function(ce){var C=Math.sqrt(ce/(2*Sl)),z=C*Sl;return"M0,"+-C+"L"+z+",0 0,"+C+" "+-z+",0Z"},square:function(ce){var C=Math.sqrt(ce)/2;return"M"+-C+","+-C+"L"+C+","+-C+" "+C+","+C+" "+-C+","+C+"Z"},"triangle-down":function(ce){var C=Math.sqrt(ce/Xo),z=C*Xo/2;return"M0,"+z+"L"+C+","+-z+" "+-C+","+-z+"Z"},"triangle-up":function(ce){var C=Math.sqrt(ce/Xo),z=C*Xo/2;return"M0,"+-z+"L"+C+","+z+" "+-C+","+z+"Z"}});o.svg.symbolTypes=Oo.keys();var Xo=Math.sqrt(3),Sl=Math.tan(30*Be);J.transition=function(ce){for(var C,z,B=Ms||++Ss,G=Gs(ce),ae=[],ue=ys||{time:Date.now(),ease:Ds,delay:0,duration:250},ge=-1,_e=this.length;++ge<_e;){ae.push(C=[]);for(var Ee=this[ge],He=-1,Xe=Ee.length;++He<Xe;)(z=Ee[He])&&xs(z,He,G,B,ue),C.push(z)}return ra(ae,G,B)},J.interrupt=function(ce){return this.each(ce==null?Hs:Wi(Gs(ce)))};var Hs=Wi(Gs());function Wi(ce){return function(){var C,z,B;(C=this[ce])&&(B=C[z=C.active])&&(B.timer.c=null,B.timer.t=NaN,--C.count?delete C[z]:delete this[ce],C.active+=.5,B.event&&B.event.interrupt.call(this,this.__data__,B.index))}}function ra(ce,C,z){return N(ce,Pa),ce.namespace=C,ce.id=z,ce}var Ms,ys,Pa=[],Ss=0;function qs(ce,C,z,B){var G=ce.id,ae=ce.namespace;return Fe(ce,typeof z=="function"?function(ue,ge,_e){ue[ae][G].tween.set(C,B(z.call(ue,ue.__data__,ge,_e)))}:(z=B(z),function(ue){ue[ae][G].tween.set(C,z)}))}function zs(ce){return ce==null&&(ce=""),function(){this.textContent=ce}}function Gs(ce){return ce==null?"__transition__":"__transition_"+ce+"__"}function xs(ce,C,z,B,G){var ae,ue,ge,_e,Ee,He=ce[z]||(ce[z]={active:0,count:0}),Xe=He[B];function at(St){var Tt=He.active,kt=He[Tt];for(var bt in kt&&(kt.timer.c=null,kt.timer.t=NaN,--He.count,delete He[Tt],kt.event&&kt.event.interrupt.call(ce,ce.__data__,kt.index)),He)if(+bt<B){var Nt=He[bt];Nt.timer.c=null,Nt.timer.t=NaN,--He.count,delete He[bt]}ue.c=_t,zr(function(){return ue.c&&_t(St||1)&&(ue.c=null,ue.t=NaN),1},0,ae),He.active=B,Xe.event&&Xe.event.start.call(ce,ce.__data__,C),Ee=[],Xe.tween.forEach(function(zt,Ut){(Ut=Ut.call(ce,ce.__data__,C))&&Ee.push(Ut)}),_e=Xe.ease,ge=Xe.duration}function _t(St){for(var Tt=St/ge,kt=_e(Tt),bt=Ee.length;bt>0;)Ee[--bt].call(ce,kt);if(Tt>=1)return Xe.event&&Xe.event.end.call(ce,ce.__data__,C),--He.count?delete He[B]:delete ce[z],1}Xe||(ae=G.time,ue=zr(function(St){var Tt=Xe.delay;if(ue.t=Tt+ae,Tt<=St)return at(St-Tt);ue.c=at},0,ae),Xe=He[B]={tween:new w,time:ae,timer:ue,delay:G.delay,duration:G.duration,ease:G.ease,index:C},G=null,++He.count)}Pa.call=J.call,Pa.empty=J.empty,Pa.node=J.node,Pa.size=J.size,o.transition=function(ce,C){return ce&&ce.transition?Ms?ce.transition(C):ce:o.selection().transition(ce)},o.transition.prototype=Pa,Pa.select=function(ce){var C,z,B,G=this.id,ae=this.namespace,ue=[];ce=ee(ce);for(var ge=-1,_e=this.length;++ge<_e;){ue.push(C=[]);for(var Ee=this[ge],He=-1,Xe=Ee.length;++He<Xe;)(B=Ee[He])&&(z=ce.call(B,B.__data__,He,ge))?("__data__"in B&&(z.__data__=B.__data__),xs(z,He,ae,G,B[ae][G]),C.push(z)):C.push(null)}return ra(ue,ae,G)},Pa.selectAll=function(ce){var C,z,B,G,ae,ue=this.id,ge=this.namespace,_e=[];ce=ne(ce);for(var Ee=-1,He=this.length;++Ee<He;)for(var Xe=this[Ee],at=-1,_t=Xe.length;++at<_t;)if(B=Xe[at]){ae=B[ge][ue],z=ce.call(B,B.__data__,at,Ee),_e.push(C=[]);for(var St=-1,Tt=z.length;++St<Tt;)(G=z[St])&&xs(G,St,ge,ue,ae),C.push(G)}return ra(_e,ge,ue)},Pa.filter=function(ce){var C,z,B=[];typeof ce!="function"&&(ce=Me(ce));for(var G=0,ae=this.length;G<ae;G++){B.push(C=[]);for(var ue,ge=0,_e=(ue=this[G]).length;ge<_e;ge++)(z=ue[ge])&&ce.call(z,z.__data__,ge,G)&&C.push(z)}return ra(B,this.namespace,this.id)},Pa.tween=function(ce,C){var z=this.id,B=this.namespace;return arguments.length<2?this.node()[B][z].tween.get(ce):Fe(this,C==null?function(G){G[B][z].tween.remove(ce)}:function(G){G[B][z].tween.set(ce,C)})},Pa.attr=function(ce,C){if(arguments.length<2){for(C in ce)this.attr(C,ce[C]);return this}var z=ce=="transform"?Zo:Na,B=o.ns.qualify(ce);function G(){this.removeAttribute(B)}function ae(){this.removeAttributeNS(B.space,B.local)}function ue(_e){return _e==null?G:(_e+="",function(){var Ee,He=this.getAttribute(B);return He!==_e&&(Ee=z(He,_e),function(Xe){this.setAttribute(B,Ee(Xe))})})}function ge(_e){return _e==null?ae:(_e+="",function(){var Ee,He=this.getAttributeNS(B.space,B.local);return He!==_e&&(Ee=z(He,_e),function(Xe){this.setAttributeNS(B.space,B.local,Ee(Xe))})})}return qs(this,"attr."+ce,C,B.local?ge:ue)},Pa.attrTween=function(ce,C){var z=o.ns.qualify(ce);return this.tween("attr."+ce,z.local?function(B,G){var ae=C.call(this,B,G,this.getAttributeNS(z.space,z.local));return ae&&function(ue){this.setAttributeNS(z.space,z.local,ae(ue))}}:function(B,G){var ae=C.call(this,B,G,this.getAttribute(z));return ae&&function(ue){this.setAttribute(z,ae(ue))}})},Pa.style=function(ce,C,z){var B=arguments.length;if(B<3){if(typeof ce!="string"){for(z in B<2&&(C=""),ce)this.style(z,ce[z],C);return this}z=""}function G(){this.style.removeProperty(ce)}function ae(ue){return ue==null?G:(ue+="",function(){var ge,_e=r(this).getComputedStyle(this,null).getPropertyValue(ce);return _e!==ue&&(ge=Na(_e,ue),function(Ee){this.style.setProperty(ce,ge(Ee),z)})})}return qs(this,"style."+ce,C,ae)},Pa.styleTween=function(ce,C,z){function B(G,ae){var ue=C.call(this,G,ae,r(this).getComputedStyle(this,null).getPropertyValue(ce));return ue&&function(ge){this.style.setProperty(ce,ue(ge),z)}}return arguments.length<3&&(z=""),this.tween("style."+ce,B)},Pa.text=function(ce){return qs(this,"text",ce,zs)},Pa.remove=function(){var ce=this.namespace;return this.each("end.transition",function(){var C;this[ce].count<2&&(C=this.parentNode)&&C.removeChild(this)})},Pa.ease=function(ce){var C=this.id,z=this.namespace;return arguments.length<1?this.node()[z][C].ease:(typeof ce!="function"&&(ce=o.ease.apply(o,arguments)),Fe(this,function(B){B[z][C].ease=ce}))},Pa.delay=function(ce){var C=this.id,z=this.namespace;return arguments.length<1?this.node()[z][C].delay:Fe(this,typeof ce=="function"?function(B,G,ae){B[z][C].delay=+ce.call(B,B.__data__,G,ae)}:(ce=+ce,function(B){B[z][C].delay=ce}))},Pa.duration=function(ce){var C=this.id,z=this.namespace;return arguments.length<1?this.node()[z][C].duration:Fe(this,typeof ce=="function"?function(B,G,ae){B[z][C].duration=Math.max(1,ce.call(B,B.__data__,G,ae))}:(ce=Math.max(1,ce),function(B){B[z][C].duration=ce}))},Pa.each=function(ce,C){var z=this.id,B=this.namespace;if(arguments.length<2){var G=ys,ae=Ms;try{Ms=z,Fe(this,function(ue,ge,_e){ys=ue[B][z],ce.call(ue,ue.__data__,ge,_e)})}finally{ys=G,Ms=ae}}else Fe(this,function(ue){var ge=ue[B][z];(ge.event||(ge.event=o.dispatch("start","end","interrupt"))).on(ce,C)});return this},Pa.transition=function(){for(var ce,C,z,B=this.id,G=++Ss,ae=this.namespace,ue=[],ge=0,_e=this.length;ge<_e;ge++){ue.push(ce=[]);for(var Ee,He=0,Xe=(Ee=this[ge]).length;He<Xe;He++)(C=Ee[He])&&xs(C,He,ae,G,{time:(z=C[ae][B]).time,ease:z.ease,delay:z.delay+z.duration,duration:z.duration}),ce.push(C)}return ra(ue,ae,G)},o.svg.axis=function(){var ce,C=o.scale.linear(),z=El,B=6,G=6,ae=3,ue=[10],ge=null;function _e(Ee){Ee.each(function(){var He,Xe=o.select(this),at=this.__chart__||C,_t=this.__chart__=C.copy(),St=ge==null?_t.ticks?_t.ticks.apply(_t,ue):_t.domain():ge,Tt=ce==null?_t.tickFormat?_t.tickFormat.apply(_t,ue):E:ce,kt=Xe.selectAll(".tick").data(St,_t),bt=kt.enter().insert("g",".domain").attr("class","tick").style("opacity",At),Nt=o.transition(kt.exit()).style("opacity",At).remove(),zt=o.transition(kt.order()).style("opacity",1),Ut=Math.max(B,0)+ae,nr=cn(_t),pr=Xe.selectAll(".domain").data([0]),Mr=(pr.enter().append("path").attr("class","domain"),o.transition(pr));bt.append("line"),bt.append("text");var kr,Qr,$r,pn,sn=bt.select("line"),Un=zt.select("line"),Wn=kt.select("text").text(Tt),li=bt.select("text"),Hr=zt.select("text"),kn=z==="top"||z==="left"?-1:1;if(z==="bottom"||z==="top"?(He=Es,kr="x",$r="y",Qr="x2",pn="y2",Wn.attr("dy",kn<0?"0em":".71em").style("text-anchor","middle"),Mr.attr("d","M"+nr[0]+","+kn*G+"V0H"+nr[1]+"V"+kn*G)):(He=Ll,kr="y",$r="x",Qr="y2",pn="x2",Wn.attr("dy",".32em").style("text-anchor",kn<0?"end":"start"),Mr.attr("d","M"+kn*G+","+nr[0]+"H0V"+nr[1]+"H"+kn*G)),sn.attr(pn,kn*B),li.attr($r,kn*Ut),Un.attr(Qr,0).attr(pn,kn*B),Hr.attr(kr,0).attr($r,kn*Ut),_t.rangeBand){var Zn=_t,qn=Zn.rangeBand()/2;at=_t=function(ei){return Zn(ei)+qn}}else at.rangeBand?at=_t:Nt.call(He,_t,at);bt.call(He,at,_t),zt.call(He,_t,_t)})}return _e.scale=function(Ee){return arguments.length?(C=Ee,_e):C},_e.orient=function(Ee){return arguments.length?(z=Ee in Vl?Ee+"":El,_e):z},_e.ticks=function(){return arguments.length?(ue=x(arguments),_e):ue},_e.tickValues=function(Ee){return arguments.length?(ge=Ee,_e):ge},_e.tickFormat=function(Ee){return arguments.length?(ce=Ee,_e):ce},_e.tickSize=function(Ee){var He=arguments.length;return He?(B=+Ee,G=+arguments[He-1],_e):B},_e.innerTickSize=function(Ee){return arguments.length?(B=+Ee,_e):B},_e.outerTickSize=function(Ee){return arguments.length?(G=+Ee,_e):G},_e.tickPadding=function(Ee){return arguments.length?(ae=+Ee,_e):ae},_e.tickSubdivide=function(){return arguments.length&&_e},_e};var El="bottom",Vl={top:1,right:1,bottom:1,left:1};function Es(ce,C,z){ce.attr("transform",function(B){var G=C(B);return"translate("+(isFinite(G)?G:z(B))+",0)"})}function Ll(ce,C,z){ce.attr("transform",function(B){var G=C(B);return"translate(0,"+(isFinite(G)?G:z(B))+")"})}o.svg.brush=function(){var ce,C,z=re(He,"brushstart","brush","brushend"),B=null,G=null,ae=[0,0],ue=[0,0],ge=!0,_e=!0,Ee=ao[0];function He(Tt){Tt.each(function(){var kt=o.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",St).on("touchstart.brush",St),bt=kt.selectAll(".background").data([0]);bt.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),kt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Nt=kt.selectAll(".resize").data(Ee,E);Nt.exit().remove(),Nt.enter().append("g").attr("class",function(pr){return"resize "+pr}).style("cursor",function(pr){return Ys[pr]}).append("rect").attr("x",function(pr){return/[ew]$/.test(pr)?-3:null}).attr("y",function(pr){return/^[ns]/.test(pr)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Nt.style("display",He.empty()?"none":null);var zt,Ut=o.transition(kt),nr=o.transition(bt);B&&(zt=cn(B),nr.attr("x",zt[0]).attr("width",zt[1]-zt[0]),at(Ut)),G&&(zt=cn(G),nr.attr("y",zt[0]).attr("height",zt[1]-zt[0]),_t(Ut)),Xe(Ut)})}function Xe(Tt){Tt.selectAll(".resize").attr("transform",function(kt){return"translate("+ae[+/e$/.test(kt)]+","+ue[+/^s/.test(kt)]+")"})}function at(Tt){Tt.select(".extent").attr("x",ae[0]),Tt.selectAll(".extent,.n>rect,.s>rect").attr("width",ae[1]-ae[0])}function _t(Tt){Tt.select(".extent").attr("y",ue[0]),Tt.selectAll(".extent,.e>rect,.w>rect").attr("height",ue[1]-ue[0])}function St(){var Tt,kt,bt=this,Nt=o.select(o.event.target),zt=z.of(bt,arguments),Ut=o.select(bt),nr=Nt.datum(),pr=!/^(n|s)$/.test(nr)&&B,Mr=!/^(e|w)$/.test(nr)&&G,kr=Nt.classed("extent"),Qr=It(bt),$r=o.mouse(bt),pn=o.select(r(bt)).on("keydown.brush",Wn).on("keyup.brush",li);if(o.event.changedTouches?pn.on("touchmove.brush",Hr).on("touchend.brush",Zn):pn.on("mousemove.brush",Hr).on("mouseup.brush",Zn),Ut.interrupt().selectAll("*").interrupt(),kr)$r[0]=ae[0]-$r[0],$r[1]=ue[0]-$r[1];else if(nr){var sn=+/w$/.test(nr),Un=+/^n/.test(nr);kt=[ae[1-sn]-$r[0],ue[1-Un]-$r[1]],$r[0]=ae[sn],$r[1]=ue[Un]}else o.event.altKey&&(Tt=$r.slice());function Wn(){o.event.keyCode==32&&(kr||(Tt=null,$r[0]-=ae[1],$r[1]-=ue[1],kr=2),Z())}function li(){o.event.keyCode==32&&kr==2&&($r[0]+=ae[1],$r[1]+=ue[1],kr=0,Z())}function Hr(){var qn=o.mouse(bt),ei=!1;kt&&(qn[0]+=kt[0],qn[1]+=kt[1]),kr||(o.event.altKey?(Tt||(Tt=[(ae[0]+ae[1])/2,(ue[0]+ue[1])/2]),$r[0]=ae[+(qn[0]<Tt[0])],$r[1]=ue[+(qn[1]<Tt[1])]):Tt=null),pr&&kn(qn,B,0)&&(at(Ut),ei=!0),Mr&&kn(qn,G,1)&&(_t(Ut),ei=!0),ei&&(Xe(Ut),zt({type:"brush",mode:kr?"move":"resize"}))}function kn(qn,ei,ui){var ki,Jn,yi=cn(ei),mi=yi[0],Ei=yi[1],xi=$r[ui],Li=ui?ue:ae,Bi=Li[1]-Li[0];if(kr&&(mi-=xi,Ei-=Bi+xi),ki=(ui?_e:ge)?Math.max(mi,Math.min(Ei,qn[ui])):qn[ui],kr?Jn=(ki+=xi)+Bi:(Tt&&(xi=Math.max(mi,Math.min(Ei,2*Tt[ui]-ki))),xi<ki?(Jn=ki,ki=xi):Jn=xi),Li[0]!=ki||Li[1]!=Jn)return ui?C=null:ce=null,Li[0]=ki,Li[1]=Jn,!0}function Zn(){Hr(),Ut.style("pointer-events","all").selectAll(".resize").style("display",He.empty()?"none":null),o.select("body").style("cursor",null),pn.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Qr(),zt({type:"brushend"})}Ut.style("pointer-events","none").selectAll(".resize").style("display",null),o.select("body").style("cursor",Nt.style("cursor")),zt({type:"brushstart"}),Hr()}return He.event=function(Tt){Tt.each(function(){var kt=z.of(this,arguments),bt={x:ae,y:ue,i:ce,j:C},Nt=this.__chart__||bt;this.__chart__=bt,Ms?o.select(this).transition().each("start.brush",function(){ce=Nt.i,C=Nt.j,ae=Nt.x,ue=Nt.y,kt({type:"brushstart"})}).tween("brush:brush",function(){var zt=pa(ae,bt.x),Ut=pa(ue,bt.y);return ce=C=null,function(nr){ae=bt.x=zt(nr),ue=bt.y=Ut(nr),kt({type:"brush",mode:"resize"})}}).each("end.brush",function(){ce=bt.i,C=bt.j,kt({type:"brush",mode:"resize"}),kt({type:"brushend"})}):(kt({type:"brushstart"}),kt({type:"brush",mode:"resize"}),kt({type:"brushend"}))})},He.x=function(Tt){return arguments.length?(Ee=ao[!(B=Tt)<<1|!G],He):B},He.y=function(Tt){return arguments.length?(Ee=ao[!B<<1|!(G=Tt)],He):G},He.clamp=function(Tt){return arguments.length?(B&&G?(ge=!!Tt[0],_e=!!Tt[1]):B?ge=!!Tt:G&&(_e=!!Tt),He):B&&G?[ge,_e]:B?ge:G?_e:null},He.extent=function(Tt){var kt,bt,Nt,zt,Ut;return arguments.length?(B&&(kt=Tt[0],bt=Tt[1],G&&(kt=kt[0],bt=bt[0]),ce=[kt,bt],B.invert&&(kt=B(kt),bt=B(bt)),bt<kt&&(Ut=kt,kt=bt,bt=Ut),kt==ae[0]&&bt==ae[1]||(ae=[kt,bt])),G&&(Nt=Tt[0],zt=Tt[1],B&&(Nt=Nt[1],zt=zt[1]),C=[Nt,zt],G.invert&&(Nt=G(Nt),zt=G(zt)),zt<Nt&&(Ut=Nt,Nt=zt,zt=Ut),Nt==ue[0]&&zt==ue[1]||(ue=[Nt,zt])),He):(B&&(ce?(kt=ce[0],bt=ce[1]):(kt=ae[0],bt=ae[1],B.invert&&(kt=B.invert(kt),bt=B.invert(bt)),bt<kt&&(Ut=kt,kt=bt,bt=Ut))),G&&(C?(Nt=C[0],zt=C[1]):(Nt=ue[0],zt=ue[1],G.invert&&(Nt=G.invert(Nt),zt=G.invert(zt)),zt<Nt&&(Ut=Nt,Nt=zt,zt=Ut))),B&&G?[[kt,Nt],[bt,zt]]:B?[kt,bt]:G&&[Nt,zt])},He.clear=function(){return He.empty()||(ae=[0,0],ue=[0,0],ce=C=null),He},He.empty=function(){return!!B&&ae[0]==ae[1]||!!G&&ue[0]==ue[1]},o.rebind(He,z,"on")};var Ys={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ao=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function Hl(ce){return JSON.parse(ce.responseText)}function ql(ce){var C=y.createRange();return C.selectNode(y.body),C.createContextualFragment(ce.responseText)}o.text=Br(function(ce){return ce.responseText}),o.json=function(ce,C){return Kr(ce,"application/json",Hl,C)},o.html=function(ce,C){return Kr(ce,"text/html",ql,C)},o.xml=Br(function(ce){return ce.responseXML}),typeof q=="object"&&q.exports?q.exports=o:this.d3=o}).apply(self)},{}],59:[function(u,q,W){q.exports=u("./quad")},{"./quad":60}],60:[function(u,q,W){var o=u("binary-search-bounds"),p=u("clamp"),x=u("parse-rect"),y=u("array-bounds"),e=u("pick-by-alias"),r=u("defined"),t=u("flatten-vertex-data"),i=u("is-obj"),n=u("dtype"),h=u("math-log2");function s(a,l){for(var f=l[0],d=l[1],v=1/(l[2]-f),m=1/(l[3]-d),c=new Array(a.length),b=0,g=a.length/2;b<g;b++)c[2*b]=p((a[2*b]-f)*v,0,1),c[2*b+1]=p((a[2*b+1]-d)*m,0,1);return c}q.exports=function(a,l){l||(l={}),a=t(a,"float64"),l=e(l,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var f=r(l.maxDepth,255),d=r(l.bounds,y(a,2));d[0]===d[2]&&d[2]++,d[1]===d[3]&&d[3]++;var v,m=s(a,d),c=a.length>>>1;l.dtype||(l.dtype="array"),typeof l.dtype=="string"?v=new(n(l.dtype))(c):l.dtype&&(v=l.dtype,Array.isArray(v)&&(v.length=c));for(var b=0;b<c;++b)v[b]=b;var g=[],w=[],_=[],T=[];(function F(H,V,Q,K,Z,$){if(!K.length)return null;var re=g[Z]||(g[Z]=[]),R=_[Z]||(_[Z]=[]),N=w[Z]||(w[Z]=[]),U=re.length;if(++Z>f||$>1073741824){for(var te=0;te<K.length;te++)re.push(K[te]),R.push($),N.push(null,null,null,null);return U}if(re.push(K[0]),R.push($),K.length<=1)return N.push(null,null,null,null),U;for(var j=.5*Q,Y=H+j,J=V+j,ee=[],ne=[],se=[],oe=[],he=1,le=K.length;he<le;he++){var de=K[he],xe=m[2*de],we=m[2*de+1];xe<Y?we<J?ee.push(de):ne.push(de):we<J?se.push(de):oe.push(de)}return $<<=2,N.push(F(H,V,j,ee,Z,$),F(H,J,j,ne,Z,$+1),F(Y,V,j,se,Z,$+2),F(Y,J,j,oe,Z,$+3)),U})(0,0,1,v,0,1);for(var k=0,L=0;L<g.length;L++){var M=g[L];if(v.set)v.set(M,k);else for(var I=0,P=M.length;I<P;I++)v[I+k]=M[I];var S=k+g[L].length;T[L]=[k,S],k=S}return v.range=function(){for(var F,H=[],V=arguments.length;V--;)H[V]=arguments[V];if(i(H[H.length-1])){var Q=H.pop();H.length||Q.x==null&&Q.l==null&&Q.left==null||(H=[Q],F={}),F=e(Q,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else F={};H.length||(H=d);var K=x.apply(void 0,H),Z=[Math.min(K.x,K.x+K.width),Math.min(K.y,K.y+K.height),Math.max(K.x,K.x+K.width),Math.max(K.y,K.y+K.height)],$=Z[0],re=Z[1],R=Z[2],N=Z[3],U=s([$,re,R,N],d),te=U[0],j=U[1],Y=U[2],J=U[3],ee=r(F.level,g.length);if(F.d!=null){var ne;typeof F.d=="number"?ne=[F.d,F.d]:F.d.length&&(ne=F.d),ee=Math.min(Math.max(Math.ceil(-h(Math.abs(ne[0])/(d[2]-d[0]))),Math.ceil(-h(Math.abs(ne[1])/(d[3]-d[1])))),ee)}if(ee=Math.min(ee,g.length),F.lod)return E(te,j,Y,J,ee);var se=[];function oe(le,de,xe,we,be,Ae){if(be!==null&&Ae!==null&&!(te>le+xe||j>de+xe||Y<le||J<de||we>=ee||be===Ae)){var fe=g[we];Ae===void 0&&(Ae=fe.length);for(var me=be;me<Ae;me++){var ke=fe[me],Te=a[2*ke],Me=a[2*ke+1];Te>=$&&Te<=R&&Me>=re&&Me<=N&&se.push(ke)}var Oe=w[we],Fe=Oe[4*be+0],qe=Oe[4*be+1],et=Oe[4*be+2],ze=Oe[4*be+3],Ue=he(Oe,be+1),We=.5*xe,Ze=we+1;oe(le,de,We,Ze,Fe,qe||et||ze||Ue),oe(le,de+We,We,Ze,qe,et||ze||Ue),oe(le+We,de,We,Ze,et,ze||Ue),oe(le+We,de+We,We,Ze,ze,Ue)}}function he(le,de){for(var xe=null,we=0;xe===null;)if(xe=le[4*de+we],++we>le.length)return null;return xe}return oe(0,0,1,0,0,1),se},v;function E(F,H,V,Q,K){for(var Z=[],$=0;$<K;$++){var re=_[$],R=T[$][0],N=D(F,H,$),U=D(V,Q,$),te=o.ge(re,N),j=o.gt(re,U,te,re.length-1);Z[$]=[te+R,j+R]}return Z}function D(F,H,V){for(var Q=1,K=.5,Z=.5,$=.5,re=0;re<V;re++)Q<<=2,Q+=F<K?H<Z?0:1:H<Z?2:3,$*=.5,K+=F<K?-$:$,Z+=H<Z?-$:$;return Q}}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(u,q,W){Object.defineProperty(W,"__esModule",{value:!0});var o=u("@turf/meta");function p(e){var r=0;if(e&&e.length>0){r+=Math.abs(x(e[0]));for(var t=1;t<e.length;t++)r-=Math.abs(x(e[t]))}return r}function x(e){var r,t,i,n,h,s,a=0,l=e.length;if(l>2){for(s=0;s<l;s++)s===l-2?(i=l-2,n=l-1,h=0):s===l-1?(i=l-1,n=0,h=1):(i=s,n=s+1,h=s+2),r=e[i],t=e[n],a+=(y(e[h][0])-y(r[0]))*Math.sin(y(t[1]));a=6378137*a*6378137/2}return a}function y(e){return e*Math.PI/180}W.default=function(e){return o.geomReduce(e,function(r,t){return r+function(i){var n,h=0;switch(i.type){case"Polygon":return p(i.coordinates);case"MultiPolygon":for(n=0;n<i.coordinates.length;n++)h+=p(i.coordinates[n]);return h;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},{"@turf/meta":63}],62:[function(u,q,W){function o(l,f,d){d===void 0&&(d={});var v={type:"Feature"};return(d.id===0||d.id)&&(v.id=d.id),d.bbox&&(v.bbox=d.bbox),v.properties=f||{},v.geometry=l,v}function p(l,f,d){if(d===void 0&&(d={}),!l)throw new Error("coordinates is required");if(!Array.isArray(l))throw new Error("coordinates must be an Array");if(l.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!a(l[0])||!a(l[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:l},f,d)}function x(l,f,d){d===void 0&&(d={});for(var v=0,m=l;v<m.length;v++){var c=m[v];if(c.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var b=0;b<c[c.length-1].length;b++)if(c[c.length-1][b]!==c[0][b])throw new Error("First and last Position are not equivalent.")}return o({type:"Polygon",coordinates:l},f,d)}function y(l,f,d){if(d===void 0&&(d={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:l},f,d)}function e(l,f){f===void 0&&(f={});var d={type:"FeatureCollection"};return f.id&&(d.id=f.id),f.bbox&&(d.bbox=f.bbox),d.features=l,d}function r(l,f,d){return d===void 0&&(d={}),o({type:"MultiLineString",coordinates:l},f,d)}function t(l,f,d){return d===void 0&&(d={}),o({type:"MultiPoint",coordinates:l},f,d)}function i(l,f,d){return d===void 0&&(d={}),o({type:"MultiPolygon",coordinates:l},f,d)}function n(l,f){f===void 0&&(f="kilometers");var d=W.factors[f];if(!d)throw new Error(f+" units is invalid");return l*d}function h(l,f){f===void 0&&(f="kilometers");var d=W.factors[f];if(!d)throw new Error(f+" units is invalid");return l/d}function s(l){return 180*(l%(2*Math.PI))/Math.PI}function a(l){return!isNaN(l)&&l!==null&&!Array.isArray(l)}Object.defineProperty(W,"__esModule",{value:!0}),W.earthRadius=63710088e-1,W.factors={centimeters:100*W.earthRadius,centimetres:100*W.earthRadius,degrees:W.earthRadius/111325,feet:3.28084*W.earthRadius,inches:39.37*W.earthRadius,kilometers:W.earthRadius/1e3,kilometres:W.earthRadius/1e3,meters:W.earthRadius,metres:W.earthRadius,miles:W.earthRadius/1609.344,millimeters:1e3*W.earthRadius,millimetres:1e3*W.earthRadius,nauticalmiles:W.earthRadius/1852,radians:1,yards:1.0936*W.earthRadius},W.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/W.earthRadius,yards:1.0936133},W.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},W.feature=o,W.geometry=function(l,f,d){switch(l){case"Point":return p(f).geometry;case"LineString":return y(f).geometry;case"Polygon":return x(f).geometry;case"MultiPoint":return t(f).geometry;case"MultiLineString":return r(f).geometry;case"MultiPolygon":return i(f).geometry;default:throw new Error(l+" is invalid")}},W.point=p,W.points=function(l,f,d){return d===void 0&&(d={}),e(l.map(function(v){return p(v,f)}),d)},W.polygon=x,W.polygons=function(l,f,d){return d===void 0&&(d={}),e(l.map(function(v){return x(v,f)}),d)},W.lineString=y,W.lineStrings=function(l,f,d){return d===void 0&&(d={}),e(l.map(function(v){return y(v,f)}),d)},W.featureCollection=e,W.multiLineString=r,W.multiPoint=t,W.multiPolygon=i,W.geometryCollection=function(l,f,d){return d===void 0&&(d={}),o({type:"GeometryCollection",geometries:l},f,d)},W.round=function(l,f){if(f===void 0&&(f=0),f&&!(f>=0))throw new Error("precision must be a positive number");var d=Math.pow(10,f||0);return Math.round(l*d)/d},W.radiansToLength=n,W.lengthToRadians=h,W.lengthToDegrees=function(l,f){return s(h(l,f))},W.bearingToAzimuth=function(l){var f=l%360;return f<0&&(f+=360),f},W.radiansToDegrees=s,W.degreesToRadians=function(l){return l%360*Math.PI/180},W.convertLength=function(l,f,d){if(f===void 0&&(f="kilometers"),d===void 0&&(d="kilometers"),!(l>=0))throw new Error("length must be a positive number");return n(h(l,f),d)},W.convertArea=function(l,f,d){if(f===void 0&&(f="meters"),d===void 0&&(d="kilometers"),!(l>=0))throw new Error("area must be a positive number");var v=W.areaFactors[f];if(!v)throw new Error("invalid original units");var m=W.areaFactors[d];if(!m)throw new Error("invalid final units");return l/v*m},W.isNumber=a,W.isObject=function(l){return!!l&&l.constructor===Object},W.validateBBox=function(l){if(!l)throw new Error("bbox is required");if(!Array.isArray(l))throw new Error("bbox must be an Array");if(l.length!==4&&l.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");l.forEach(function(f){if(!a(f))throw new Error("bbox must only contain numbers")})},W.validateId=function(l){if(!l)throw new Error("id is required");if(["string","number"].indexOf(typeof l)===-1)throw new Error("id must be a number or a string")}},{}],63:[function(u,q,W){Object.defineProperty(W,"__esModule",{value:!0});var o=u("@turf/helpers");function p(n,h,s){if(n!==null)for(var a,l,f,d,v,m,c,b,g=0,w=0,_=n.type,T=_==="FeatureCollection",k=_==="Feature",L=T?n.features.length:1,M=0;M<L;M++){v=(b=!!(c=T?n.features[M].geometry:k?n.geometry:n)&&c.type==="GeometryCollection")?c.geometries.length:1;for(var I=0;I<v;I++){var P=0,S=0;if((d=b?c.geometries[I]:c)!==null){m=d.coordinates;var E=d.type;switch(g=!s||E!=="Polygon"&&E!=="MultiPolygon"?0:1,E){case null:break;case"Point":if(h(m,w,M,P,S)===!1)return!1;w++,P++;break;case"LineString":case"MultiPoint":for(a=0;a<m.length;a++){if(h(m[a],w,M,P,S)===!1)return!1;w++,E==="MultiPoint"&&P++}E==="LineString"&&P++;break;case"Polygon":case"MultiLineString":for(a=0;a<m.length;a++){for(l=0;l<m[a].length-g;l++){if(h(m[a][l],w,M,P,S)===!1)return!1;w++}E==="MultiLineString"&&P++,E==="Polygon"&&S++}E==="Polygon"&&P++;break;case"MultiPolygon":for(a=0;a<m.length;a++){for(S=0,l=0;l<m[a].length;l++){for(f=0;f<m[a][l].length-g;f++){if(h(m[a][l][f],w,M,P,S)===!1)return!1;w++}S++}P++}break;case"GeometryCollection":for(a=0;a<d.geometries.length;a++)if(p(d.geometries[a],h,s)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function x(n,h){var s;switch(n.type){case"FeatureCollection":for(s=0;s<n.features.length&&h(n.features[s].properties,s)!==!1;s++);break;case"Feature":h(n.properties,0)}}function y(n,h){if(n.type==="Feature")h(n,0);else if(n.type==="FeatureCollection")for(var s=0;s<n.features.length&&h(n.features[s],s)!==!1;s++);}function e(n,h){var s,a,l,f,d,v,m,c,b,g,w=0,_=n.type==="FeatureCollection",T=n.type==="Feature",k=_?n.features.length:1;for(s=0;s<k;s++){for(v=_?n.features[s].geometry:T?n.geometry:n,c=_?n.features[s].properties:T?n.properties:{},b=_?n.features[s].bbox:T?n.bbox:void 0,g=_?n.features[s].id:T?n.id:void 0,d=(m=!!v&&v.type==="GeometryCollection")?v.geometries.length:1,l=0;l<d;l++)if((f=m?v.geometries[l]:v)!==null)switch(f.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(h(f,w,c,b,g)===!1)return!1;break;case"GeometryCollection":for(a=0;a<f.geometries.length;a++)if(h(f.geometries[a],w,c,b,g)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(h(null,w,c,b,g)===!1)return!1;w++}}function r(n,h){e(n,function(s,a,l,f,d){var v,m=s===null?null:s.type;switch(m){case null:case"Point":case"LineString":case"Polygon":return h(o.feature(s,l,{bbox:f,id:d}),a,0)!==!1&&void 0}switch(m){case"MultiPoint":v="Point";break;case"MultiLineString":v="LineString";break;case"MultiPolygon":v="Polygon"}for(var c=0;c<s.coordinates.length;c++){var b={type:v,coordinates:s.coordinates[c]};if(h(o.feature(b,l),a,c)===!1)return!1}})}function t(n,h){r(n,function(s,a,l){var f=0;if(s.geometry){var d=s.geometry.type;if(d!=="Point"&&d!=="MultiPoint"){var v,m=0,c=0,b=0;return p(s,function(g,w,_,T,k){if(v===void 0||a>m||T>c||k>b)return v=g,m=a,c=T,b=k,void(f=0);var L=o.lineString([v,g],s.properties);if(h(L,a,l,k,f)===!1)return!1;f++,v=g})!==!1&&void 0}}})}function i(n,h){if(!n)throw new Error("geojson is required");r(n,function(s,a,l){if(s.geometry!==null){var f=s.geometry.type,d=s.geometry.coordinates;switch(f){case"LineString":if(h(s,a,l,0,0)===!1)return!1;break;case"Polygon":for(var v=0;v<d.length;v++)if(h(o.lineString(d[v],s.properties),a,l,v)===!1)return!1}}})}W.coordEach=p,W.coordReduce=function(n,h,s,a){var l=s;return p(n,function(f,d,v,m,c){l=d===0&&s===void 0?f:h(l,f,d,v,m,c)},a),l},W.propEach=x,W.propReduce=function(n,h,s){var a=s;return x(n,function(l,f){a=f===0&&s===void 0?l:h(a,l,f)}),a},W.featureEach=y,W.featureReduce=function(n,h,s){var a=s;return y(n,function(l,f){a=f===0&&s===void 0?l:h(a,l,f)}),a},W.coordAll=function(n){var h=[];return p(n,function(s){h.push(s)}),h},W.geomEach=e,W.geomReduce=function(n,h,s){var a=s;return e(n,function(l,f,d,v,m){a=f===0&&s===void 0?l:h(a,l,f,d,v,m)}),a},W.flattenEach=r,W.flattenReduce=function(n,h,s){var a=s;return r(n,function(l,f,d){a=f===0&&d===0&&s===void 0?l:h(a,l,f,d)}),a},W.segmentEach=t,W.segmentReduce=function(n,h,s){var a=s,l=!1;return t(n,function(f,d,v,m,c){a=l===!1&&s===void 0?f:h(a,f,d,v,m,c),l=!0}),a},W.lineEach=i,W.lineReduce=function(n,h,s){var a=s;return i(n,function(l,f,d,v){a=f===0&&s===void 0?l:h(a,l,f,d,v)}),a},W.findSegment=function(n,h){if(h=h||{},!o.isObject(h))throw new Error("options is invalid");var s,a=h.featureIndex||0,l=h.multiFeatureIndex||0,f=h.geometryIndex||0,d=h.segmentIndex||0,v=h.properties;switch(n.type){case"FeatureCollection":a<0&&(a=n.features.length+a),v=v||n.features[a].properties,s=n.features[a].geometry;break;case"Feature":v=v||n.properties,s=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=n;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var m=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return d<0&&(d=m.length+d-1),o.lineString([m[d],m[d+1]],v,h);case"Polygon":return f<0&&(f=m.length+f),d<0&&(d=m[f].length+d-1),o.lineString([m[f][d],m[f][d+1]],v,h);case"MultiLineString":return l<0&&(l=m.length+l),d<0&&(d=m[l].length+d-1),o.lineString([m[l][d],m[l][d+1]],v,h);case"MultiPolygon":return l<0&&(l=m.length+l),f<0&&(f=m[l].length+f),d<0&&(d=m[l][f].length-d-1),o.lineString([m[l][f][d],m[l][f][d+1]],v,h)}throw new Error("geojson is invalid")},W.findPoint=function(n,h){if(h=h||{},!o.isObject(h))throw new Error("options is invalid");var s,a=h.featureIndex||0,l=h.multiFeatureIndex||0,f=h.geometryIndex||0,d=h.coordIndex||0,v=h.properties;switch(n.type){case"FeatureCollection":a<0&&(a=n.features.length+a),v=v||n.features[a].properties,s=n.features[a].geometry;break;case"Feature":v=v||n.properties,s=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=n;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var m=s.coordinates;switch(s.type){case"Point":return o.point(m,v,h);case"MultiPoint":return l<0&&(l=m.length+l),o.point(m[l],v,h);case"LineString":return d<0&&(d=m.length+d),o.point(m[d],v,h);case"Polygon":return f<0&&(f=m.length+f),d<0&&(d=m[f].length+d),o.point(m[f][d],v,h);case"MultiLineString":return l<0&&(l=m.length+l),d<0&&(d=m[l].length+d),o.point(m[l][d],v,h);case"MultiPolygon":return l<0&&(l=m.length+l),f<0&&(f=m[l].length+f),d<0&&(d=m[l][f].length-d),o.point(m[l][f][d],v,h)}throw new Error("geojson is invalid")}},{"@turf/helpers":62}],64:[function(u,q,W){Object.defineProperty(W,"__esModule",{value:!0});var o=u("@turf/meta");function p(x){var y=[1/0,1/0,-1/0,-1/0];return o.coordEach(x,function(e){y[0]>e[0]&&(y[0]=e[0]),y[1]>e[1]&&(y[1]=e[1]),y[2]<e[0]&&(y[2]=e[0]),y[3]<e[1]&&(y[3]=e[1])}),y}p.default=p,W.default=p},{"@turf/meta":66}],65:[function(u,q,W){arguments[4][62][0].apply(W,arguments)},{dup:62}],66:[function(u,q,W){arguments[4][63][0].apply(W,arguments)},{"@turf/helpers":65,dup:63}],67:[function(u,q,W){Object.defineProperty(W,"__esModule",{value:!0});var o=u("@turf/meta"),p=u("@turf/helpers");W.default=function(x,y){y===void 0&&(y={});var e=0,r=0,t=0;return o.coordEach(x,function(i){e+=i[0],r+=i[1],t++}),p.point([e/t,r/t],y.properties)}},{"@turf/helpers":68,"@turf/meta":69}],68:[function(u,q,W){function o(l,f,d){d===void 0&&(d={});var v={type:"Feature"};return(d.id===0||d.id)&&(v.id=d.id),d.bbox&&(v.bbox=d.bbox),v.properties=f||{},v.geometry=l,v}function p(l,f,d){return d===void 0&&(d={}),o({type:"Point",coordinates:l},f,d)}function x(l,f,d){d===void 0&&(d={});for(var v=0,m=l;v<m.length;v++){var c=m[v];if(c.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var b=0;b<c[c.length-1].length;b++)if(c[c.length-1][b]!==c[0][b])throw new Error("First and last Position are not equivalent.")}return o({type:"Polygon",coordinates:l},f,d)}function y(l,f,d){if(d===void 0&&(d={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:l},f,d)}function e(l,f){f===void 0&&(f={});var d={type:"FeatureCollection"};return f.id&&(d.id=f.id),f.bbox&&(d.bbox=f.bbox),d.features=l,d}function r(l,f,d){return d===void 0&&(d={}),o({type:"MultiLineString",coordinates:l},f,d)}function t(l,f,d){return d===void 0&&(d={}),o({type:"MultiPoint",coordinates:l},f,d)}function i(l,f,d){return d===void 0&&(d={}),o({type:"MultiPolygon",coordinates:l},f,d)}function n(l,f){f===void 0&&(f="kilometers");var d=W.factors[f];if(!d)throw new Error(f+" units is invalid");return l*d}function h(l,f){f===void 0&&(f="kilometers");var d=W.factors[f];if(!d)throw new Error(f+" units is invalid");return l/d}function s(l){return 180*(l%(2*Math.PI))/Math.PI}function a(l){return!isNaN(l)&&l!==null&&!Array.isArray(l)&&!/^\s*$/.test(l)}Object.defineProperty(W,"__esModule",{value:!0}),W.earthRadius=63710088e-1,W.factors={centimeters:100*W.earthRadius,centimetres:100*W.earthRadius,degrees:W.earthRadius/111325,feet:3.28084*W.earthRadius,inches:39.37*W.earthRadius,kilometers:W.earthRadius/1e3,kilometres:W.earthRadius/1e3,meters:W.earthRadius,metres:W.earthRadius,miles:W.earthRadius/1609.344,millimeters:1e3*W.earthRadius,millimetres:1e3*W.earthRadius,nauticalmiles:W.earthRadius/1852,radians:1,yards:W.earthRadius/1.0936},W.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/W.earthRadius,yards:1/1.0936},W.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},W.feature=o,W.geometry=function(l,f,d){switch(l){case"Point":return p(f).geometry;case"LineString":return y(f).geometry;case"Polygon":return x(f).geometry;case"MultiPoint":return t(f).geometry;case"MultiLineString":return r(f).geometry;case"MultiPolygon":return i(f).geometry;default:throw new Error(l+" is invalid")}},W.point=p,W.points=function(l,f,d){return d===void 0&&(d={}),e(l.map(function(v){return p(v,f)}),d)},W.polygon=x,W.polygons=function(l,f,d){return d===void 0&&(d={}),e(l.map(function(v){return x(v,f)}),d)},W.lineString=y,W.lineStrings=function(l,f,d){return d===void 0&&(d={}),e(l.map(function(v){return y(v,f)}),d)},W.featureCollection=e,W.multiLineString=r,W.multiPoint=t,W.multiPolygon=i,W.geometryCollection=function(l,f,d){return d===void 0&&(d={}),o({type:"GeometryCollection",geometries:l},f,d)},W.round=function(l,f){if(f===void 0&&(f=0),f&&!(f>=0))throw new Error("precision must be a positive number");var d=Math.pow(10,f||0);return Math.round(l*d)/d},W.radiansToLength=n,W.lengthToRadians=h,W.lengthToDegrees=function(l,f){return s(h(l,f))},W.bearingToAzimuth=function(l){var f=l%360;return f<0&&(f+=360),f},W.radiansToDegrees=s,W.degreesToRadians=function(l){return l%360*Math.PI/180},W.convertLength=function(l,f,d){if(f===void 0&&(f="kilometers"),d===void 0&&(d="kilometers"),!(l>=0))throw new Error("length must be a positive number");return n(h(l,f),d)},W.convertArea=function(l,f,d){if(f===void 0&&(f="meters"),d===void 0&&(d="kilometers"),!(l>=0))throw new Error("area must be a positive number");var v=W.areaFactors[f];if(!v)throw new Error("invalid original units");var m=W.areaFactors[d];if(!m)throw new Error("invalid final units");return l/v*m},W.isNumber=a,W.isObject=function(l){return!!l&&l.constructor===Object},W.validateBBox=function(l){if(!l)throw new Error("bbox is required");if(!Array.isArray(l))throw new Error("bbox must be an Array");if(l.length!==4&&l.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");l.forEach(function(f){if(!a(f))throw new Error("bbox must only contain numbers")})},W.validateId=function(l){if(!l)throw new Error("id is required");if(["string","number"].indexOf(typeof l)===-1)throw new Error("id must be a number or a string")},W.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},W.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},W.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},W.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},W.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},W.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},W.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},{}],69:[function(u,q,W){Object.defineProperty(W,"__esModule",{value:!0});var o=u("@turf/helpers");function p(n,h,s){if(n!==null)for(var a,l,f,d,v,m,c,b,g=0,w=0,_=n.type,T=_==="FeatureCollection",k=_==="Feature",L=T?n.features.length:1,M=0;M<L;M++){v=(b=!!(c=T?n.features[M].geometry:k?n.geometry:n)&&c.type==="GeometryCollection")?c.geometries.length:1;for(var I=0;I<v;I++){var P=0,S=0;if((d=b?c.geometries[I]:c)!==null){m=d.coordinates;var E=d.type;switch(g=!s||E!=="Polygon"&&E!=="MultiPolygon"?0:1,E){case null:break;case"Point":if(h(m,w,M,P,S)===!1)return!1;w++,P++;break;case"LineString":case"MultiPoint":for(a=0;a<m.length;a++){if(h(m[a],w,M,P,S)===!1)return!1;w++,E==="MultiPoint"&&P++}E==="LineString"&&P++;break;case"Polygon":case"MultiLineString":for(a=0;a<m.length;a++){for(l=0;l<m[a].length-g;l++){if(h(m[a][l],w,M,P,S)===!1)return!1;w++}E==="MultiLineString"&&P++,E==="Polygon"&&S++}E==="Polygon"&&P++;break;case"MultiPolygon":for(a=0;a<m.length;a++){for(S=0,l=0;l<m[a].length;l++){for(f=0;f<m[a][l].length-g;f++){if(h(m[a][l][f],w,M,P,S)===!1)return!1;w++}S++}P++}break;case"GeometryCollection":for(a=0;a<d.geometries.length;a++)if(p(d.geometries[a],h,s)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function x(n,h){var s;switch(n.type){case"FeatureCollection":for(s=0;s<n.features.length&&h(n.features[s].properties,s)!==!1;s++);break;case"Feature":h(n.properties,0)}}function y(n,h){if(n.type==="Feature")h(n,0);else if(n.type==="FeatureCollection")for(var s=0;s<n.features.length&&h(n.features[s],s)!==!1;s++);}function e(n,h){var s,a,l,f,d,v,m,c,b,g,w=0,_=n.type==="FeatureCollection",T=n.type==="Feature",k=_?n.features.length:1;for(s=0;s<k;s++){for(v=_?n.features[s].geometry:T?n.geometry:n,c=_?n.features[s].properties:T?n.properties:{},b=_?n.features[s].bbox:T?n.bbox:void 0,g=_?n.features[s].id:T?n.id:void 0,d=(m=!!v&&v.type==="GeometryCollection")?v.geometries.length:1,l=0;l<d;l++)if((f=m?v.geometries[l]:v)!==null)switch(f.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(h(f,w,c,b,g)===!1)return!1;break;case"GeometryCollection":for(a=0;a<f.geometries.length;a++)if(h(f.geometries[a],w,c,b,g)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(h(null,w,c,b,g)===!1)return!1;w++}}function r(n,h){e(n,function(s,a,l,f,d){var v,m=s===null?null:s.type;switch(m){case null:case"Point":case"LineString":case"Polygon":return h(o.feature(s,l,{bbox:f,id:d}),a,0)!==!1&&void 0}switch(m){case"MultiPoint":v="Point";break;case"MultiLineString":v="LineString";break;case"MultiPolygon":v="Polygon"}for(var c=0;c<s.coordinates.length;c++){var b={type:v,coordinates:s.coordinates[c]};if(h(o.feature(b,l),a,c)===!1)return!1}})}function t(n,h){r(n,function(s,a,l){var f=0;if(s.geometry){var d=s.geometry.type;if(d!=="Point"&&d!=="MultiPoint"){var v,m=0,c=0,b=0;return p(s,function(g,w,_,T,k){if(v===void 0||a>m||T>c||k>b)return v=g,m=a,c=T,b=k,void(f=0);var L=o.lineString([v,g],s.properties);if(h(L,a,l,k,f)===!1)return!1;f++,v=g})!==!1&&void 0}}})}function i(n,h){if(!n)throw new Error("geojson is required");r(n,function(s,a,l){if(s.geometry!==null){var f=s.geometry.type,d=s.geometry.coordinates;switch(f){case"LineString":if(h(s,a,l,0,0)===!1)return!1;break;case"Polygon":for(var v=0;v<d.length;v++)if(h(o.lineString(d[v],s.properties),a,l,v)===!1)return!1}}})}W.coordEach=p,W.coordReduce=function(n,h,s,a){var l=s;return p(n,function(f,d,v,m,c){l=d===0&&s===void 0?f:h(l,f,d,v,m,c)},a),l},W.propEach=x,W.propReduce=function(n,h,s){var a=s;return x(n,function(l,f){a=f===0&&s===void 0?l:h(a,l,f)}),a},W.featureEach=y,W.featureReduce=function(n,h,s){var a=s;return y(n,function(l,f){a=f===0&&s===void 0?l:h(a,l,f)}),a},W.coordAll=function(n){var h=[];return p(n,function(s){h.push(s)}),h},W.geomEach=e,W.geomReduce=function(n,h,s){var a=s;return e(n,function(l,f,d,v,m){a=f===0&&s===void 0?l:h(a,l,f,d,v,m)}),a},W.flattenEach=r,W.flattenReduce=function(n,h,s){var a=s;return r(n,function(l,f,d){a=f===0&&d===0&&s===void 0?l:h(a,l,f,d)}),a},W.segmentEach=t,W.segmentReduce=function(n,h,s){var a=s,l=!1;return t(n,function(f,d,v,m,c){a=l===!1&&s===void 0?f:h(a,f,d,v,m,c),l=!0}),a},W.lineEach=i,W.lineReduce=function(n,h,s){var a=s;return i(n,function(l,f,d,v){a=f===0&&s===void 0?l:h(a,l,f,d,v)}),a},W.findSegment=function(n,h){if(h=h||{},!o.isObject(h))throw new Error("options is invalid");var s,a=h.featureIndex||0,l=h.multiFeatureIndex||0,f=h.geometryIndex||0,d=h.segmentIndex||0,v=h.properties;switch(n.type){case"FeatureCollection":a<0&&(a=n.features.length+a),v=v||n.features[a].properties,s=n.features[a].geometry;break;case"Feature":v=v||n.properties,s=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=n;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var m=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return d<0&&(d=m.length+d-1),o.lineString([m[d],m[d+1]],v,h);case"Polygon":return f<0&&(f=m.length+f),d<0&&(d=m[f].length+d-1),o.lineString([m[f][d],m[f][d+1]],v,h);case"MultiLineString":return l<0&&(l=m.length+l),d<0&&(d=m[l].length+d-1),o.lineString([m[l][d],m[l][d+1]],v,h);case"MultiPolygon":return l<0&&(l=m.length+l),f<0&&(f=m[l].length+f),d<0&&(d=m[l][f].length-d-1),o.lineString([m[l][f][d],m[l][f][d+1]],v,h)}throw new Error("geojson is invalid")},W.findPoint=function(n,h){if(h=h||{},!o.isObject(h))throw new Error("options is invalid");var s,a=h.featureIndex||0,l=h.multiFeatureIndex||0,f=h.geometryIndex||0,d=h.coordIndex||0,v=h.properties;switch(n.type){case"FeatureCollection":a<0&&(a=n.features.length+a),v=v||n.features[a].properties,s=n.features[a].geometry;break;case"Feature":v=v||n.properties,s=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=n;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var m=s.coordinates;switch(s.type){case"Point":return o.point(m,v,h);case"MultiPoint":return l<0&&(l=m.length+l),o.point(m[l],v,h);case"LineString":return d<0&&(d=m.length+d),o.point(m[d],v,h);case"Polygon":return f<0&&(f=m.length+f),d<0&&(d=m[f].length+d),o.point(m[f][d],v,h);case"MultiLineString":return l<0&&(l=m.length+l),d<0&&(d=m[l].length+d),o.point(m[l][d],v,h);case"MultiPolygon":return l<0&&(l=m.length+l),f<0&&(f=m[l].length+f),d<0&&(d=m[l][f].length-d),o.point(m[l][f][d],v,h)}throw new Error("geojson is invalid")}},{"@turf/helpers":68}],70:[function(u,q,W){q.exports=function(o){var p=0,x=0,y=0,e=0;return o.map(function(r){var t=(r=r.slice())[0],i=t.toUpperCase();if(t!=i)switch(r[0]=i,t){case"a":r[6]+=y,r[7]+=e;break;case"v":r[1]+=e;break;case"h":r[1]+=y;break;default:for(var n=1;n<r.length;)r[n++]+=y,r[n++]+=e}switch(i){case"Z":y=p,e=x;break;case"H":y=r[1];break;case"V":e=r[1];break;case"M":y=p=r[1],e=x=r[2];break;default:y=r[r.length-2],e=r[r.length-1]}return r})}},{}],71:[function(u,q,W){q.exports=function(o,p){if(!o||o.length==null)throw Error("Argument should be an array");p=p==null?1:Math.floor(p);for(var x=Array(2*p),y=0;y<p;y++){for(var e=-1/0,r=1/0,t=y,i=o.length;t<i;t+=p)o[t]>e&&(e=o[t]),o[t]<r&&(r=o[t]);x[y]=r,x[p+y]=e}return x}},{}],72:[function(u,q,W){q.exports=function(o,p,x){if(typeof Array.prototype.findIndex=="function")return o.findIndex(p,x);if(typeof p!="function")throw new TypeError("predicate must be a function");var y=Object(o),e=y.length;if(e===0)return-1;for(var r=0;r<e;r++)if(p.call(x,y[r],r,y))return r;return-1}},{}],73:[function(u,q,W){var o=u("array-bounds");q.exports=function(p,x,y){if(!p||p.length==null)throw Error("Argument should be an array");x==null&&(x=1),y==null&&(y=o(p,x));for(var e=0;e<x;e++){var r=y[x+e],t=y[e],i=e,n=p.length;if(r===1/0&&t===-1/0)for(i=e;i<n;i+=x)p[i]=p[i]===r?1:p[i]===t?0:.5;else if(r===1/0)for(i=e;i<n;i+=x)p[i]=p[i]===r?1:0;else if(t===-1/0)for(i=e;i<n;i+=x)p[i]=p[i]===t?0:1;else{var h=r-t;for(i=e;i<n;i+=x)isNaN(p[i])||(p[i]=h===0?.5:(p[i]-t)/h)}}return p}},{"array-bounds":71}],74:[function(u,q,W){q.exports=function(o,p){var x=typeof o=="number",y=typeof p=="number";x&&!y?(p=o,o=0):x||y||(o=0,p=0);var e=(p|=0)-(o|=0);if(e<0)throw new Error("array length must be positive");for(var r=new Array(e),t=0,i=o;t<e;t++,i++)r[t]=i;return r}},{}],75:[function(u,q,W){(function(o){(function(){var p=u("object-assign");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function x(T,k){if(T===k)return 0;for(var L=T.length,M=k.length,I=0,P=Math.min(L,M);I<P;++I)if(T[I]!==k[I]){L=T[I],M=k[I];break}return L<M?-1:M<L?1:0}function y(T){return o.Buffer&&typeof o.Buffer.isBuffer=="function"?o.Buffer.isBuffer(T):!(T==null||!T._isBuffer)}var e=u("util/"),r=Object.prototype.hasOwnProperty,t=Array.prototype.slice,i=function(){}.name==="foo";function n(T){return Object.prototype.toString.call(T)}function h(T){return!y(T)&&typeof o.ArrayBuffer=="function"&&(typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(T):!!T&&(T instanceof DataView||!!(T.buffer&&T.buffer instanceof ArrayBuffer)))}var s=q.exports=m,a=/\s*function\s+([^\(\s]*)\s*/;function l(T){if(e.isFunction(T)){if(i)return T.name;var k=T.toString().match(a);return k&&k[1]}}function f(T,k){return typeof T=="string"?T.length<k?T:T.slice(0,k):T}function d(T){if(i||!e.isFunction(T))return e.inspect(T);var k=l(T);return"[Function"+(k?": "+k:"")+"]"}function v(T,k,L,M,I){throw new s.AssertionError({message:L,actual:T,expected:k,operator:M,stackStartFunction:I})}function m(T,k){T||v(T,!0,k,"==",s.ok)}function c(T,k,L,M){if(T===k)return!0;if(y(T)&&y(k))return x(T,k)===0;if(e.isDate(T)&&e.isDate(k))return T.getTime()===k.getTime();if(e.isRegExp(T)&&e.isRegExp(k))return T.source===k.source&&T.global===k.global&&T.multiline===k.multiline&&T.lastIndex===k.lastIndex&&T.ignoreCase===k.ignoreCase;if(T!==null&&typeof T=="object"||k!==null&&typeof k=="object"){if(h(T)&&h(k)&&n(T)===n(k)&&!(T instanceof Float32Array||T instanceof Float64Array))return x(new Uint8Array(T.buffer),new Uint8Array(k.buffer))===0;if(y(T)!==y(k))return!1;var I=(M=M||{actual:[],expected:[]}).actual.indexOf(T);return I!==-1&&I===M.expected.indexOf(k)||(M.actual.push(T),M.expected.push(k),function(P,S,E,D){if(P==null||S==null)return!1;if(e.isPrimitive(P)||e.isPrimitive(S))return P===S;if(E&&Object.getPrototypeOf(P)!==Object.getPrototypeOf(S))return!1;var F=b(P),H=b(S);if(F&&!H||!F&&H)return!1;if(F)return P=t.call(P),S=t.call(S),c(P,S,E);var V,Q,K=_(P),Z=_(S);if(K.length!==Z.length)return!1;for(K.sort(),Z.sort(),Q=K.length-1;Q>=0;Q--)if(K[Q]!==Z[Q])return!1;for(Q=K.length-1;Q>=0;Q--)if(V=K[Q],!c(P[V],S[V],E,D))return!1;return!0}(T,k,L,M))}return L?T===k:T==k}function b(T){return Object.prototype.toString.call(T)=="[object Arguments]"}function g(T,k){if(!T||!k)return!1;if(Object.prototype.toString.call(k)=="[object RegExp]")return k.test(T);try{if(T instanceof k)return!0}catch{}return!Error.isPrototypeOf(k)&&k.call({},T)===!0}function w(T,k,L,M){var I;if(typeof k!="function")throw new TypeError('"block" argument must be a function');typeof L=="string"&&(M=L,L=null),I=function(E){var D;try{E()}catch(F){D=F}return D}(k),M=(L&&L.name?" ("+L.name+").":".")+(M?" "+M:"."),T&&!I&&v(I,L,"Missing expected exception"+M);var P=typeof M=="string",S=!T&&I&&!L;if((!T&&e.isError(I)&&P&&g(I,L)||S)&&v(I,L,"Got unwanted exception"+M),T&&I&&L&&!g(I,L)||!T&&I)throw I}s.AssertionError=function(T){this.name="AssertionError",this.actual=T.actual,this.expected=T.expected,this.operator=T.operator,T.message?(this.message=T.message,this.generatedMessage=!1):(this.message=function(E){return f(d(E.actual),128)+" "+E.operator+" "+f(d(E.expected),128)}(this),this.generatedMessage=!0);var k=T.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,k);else{var L=new Error;if(L.stack){var M=L.stack,I=l(k),P=M.indexOf(`
`+I);if(P>=0){var S=M.indexOf(`
`,P+1);M=M.substring(S+1)}this.stack=M}}},e.inherits(s.AssertionError,Error),s.fail=v,s.ok=m,s.equal=function(T,k,L){T!=k&&v(T,k,L,"==",s.equal)},s.notEqual=function(T,k,L){T==k&&v(T,k,L,"!=",s.notEqual)},s.deepEqual=function(T,k,L){c(T,k,!1)||v(T,k,L,"deepEqual",s.deepEqual)},s.deepStrictEqual=function(T,k,L){c(T,k,!0)||v(T,k,L,"deepStrictEqual",s.deepStrictEqual)},s.notDeepEqual=function(T,k,L){c(T,k,!1)&&v(T,k,L,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=function T(k,L,M){c(k,L,!0)&&v(k,L,M,"notDeepStrictEqual",T)},s.strictEqual=function(T,k,L){T!==k&&v(T,k,L,"===",s.strictEqual)},s.notStrictEqual=function(T,k,L){T===k&&v(T,k,L,"!==",s.notStrictEqual)},s.throws=function(T,k,L){w(!0,T,k,L)},s.doesNotThrow=function(T,k,L){w(!1,T,k,L)},s.ifError=function(T){if(T)throw T},s.strict=p(function T(k,L){k||v(k,!0,L,"==",T)},s,{equal:s.strictEqual,deepEqual:s.deepStrictEqual,notEqual:s.notStrictEqual,notDeepEqual:s.notDeepStrictEqual}),s.strict.strict=s.strict;var _=Object.keys||function(T){var k=[];for(var L in T)r.call(T,L)&&k.push(L);return k}}).call(this)}).call(this,typeof Ga!="undefined"?Ga:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"object-assign":247,"util/":78}],76:[function(u,q,W){typeof Object.create=="function"?q.exports=function(o,p){o.super_=p,o.prototype=Object.create(p.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}})}:q.exports=function(o,p){o.super_=p;var x=function(){};x.prototype=p.prototype,o.prototype=new x,o.prototype.constructor=o}},{}],77:[function(u,q,W){q.exports=function(o){return o&&typeof o=="object"&&typeof o.copy=="function"&&typeof o.fill=="function"&&typeof o.readUInt8=="function"}},{}],78:[function(u,q,W){(function(o,p){(function(){var x=/%[sdj%]/g;W.format=function(P){if(!v(P)){for(var S=[],E=0;E<arguments.length;E++)S.push(r(arguments[E]));return S.join(" ")}E=1;for(var D=arguments,F=D.length,H=String(P).replace(x,function(Q){if(Q==="%%")return"%";if(E>=F)return Q;switch(Q){case"%s":return String(D[E++]);case"%d":return Number(D[E++]);case"%j":try{return JSON.stringify(D[E++])}catch{return"[Circular]"}default:return Q}}),V=D[E];E<F;V=D[++E])f(V)||!b(V)?H+=" "+V:H+=" "+r(V);return H},W.deprecate=function(P,S){if(m(p.process))return function(){return W.deprecate(P,S).apply(this,arguments)};if(o.noDeprecation===!0)return P;var E=!1;return function(){if(!E){if(o.throwDeprecation)throw new Error(S);o.traceDeprecation?console.trace(S):console.error(S),E=!0}return P.apply(this,arguments)}};var y,e={};function r(P,S){var E={seen:[],stylize:i};return arguments.length>=3&&(E.depth=arguments[2]),arguments.length>=4&&(E.colors=arguments[3]),l(S)?E.showHidden=S:S&&W._extend(E,S),m(E.showHidden)&&(E.showHidden=!1),m(E.depth)&&(E.depth=2),m(E.colors)&&(E.colors=!1),m(E.customInspect)&&(E.customInspect=!0),E.colors&&(E.stylize=t),n(E,P,E.depth)}function t(P,S){var E=r.styles[S];return E?"["+r.colors[E][0]+"m"+P+"["+r.colors[E][1]+"m":P}function i(P,S){return P}function n(P,S,E){if(P.customInspect&&S&&_(S.inspect)&&S.inspect!==W.inspect&&(!S.constructor||S.constructor.prototype!==S)){var D=S.inspect(E,P);return v(D)||(D=n(P,D,E)),D}var F=function(R,N){if(m(N))return R.stylize("undefined","undefined");if(v(N)){var U="'"+JSON.stringify(N).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return R.stylize(U,"string")}if(d(N))return R.stylize(""+N,"number");if(l(N))return R.stylize(""+N,"boolean");if(f(N))return R.stylize("null","null")}(P,S);if(F)return F;var H=Object.keys(S),V=function(R){var N={};return R.forEach(function(U,te){N[U]=!0}),N}(H);if(P.showHidden&&(H=Object.getOwnPropertyNames(S)),w(S)&&(H.indexOf("message")>=0||H.indexOf("description")>=0))return h(S);if(H.length===0){if(_(S)){var Q=S.name?": "+S.name:"";return P.stylize("[Function"+Q+"]","special")}if(c(S))return P.stylize(RegExp.prototype.toString.call(S),"regexp");if(g(S))return P.stylize(Date.prototype.toString.call(S),"date");if(w(S))return h(S)}var K,Z="",$=!1,re=["{","}"];return a(S)&&($=!0,re=["[","]"]),_(S)&&(Z=" [Function"+(S.name?": "+S.name:"")+"]"),c(S)&&(Z=" "+RegExp.prototype.toString.call(S)),g(S)&&(Z=" "+Date.prototype.toUTCString.call(S)),w(S)&&(Z=" "+h(S)),H.length!==0||$&&S.length!=0?E<0?c(S)?P.stylize(RegExp.prototype.toString.call(S),"regexp"):P.stylize("[Object]","special"):(P.seen.push(S),K=$?function(R,N,U,te,j){for(var Y=[],J=0,ee=N.length;J<ee;++J)I(N,String(J))?Y.push(s(R,N,U,te,String(J),!0)):Y.push("");return j.forEach(function(ne){ne.match(/^\d+$/)||Y.push(s(R,N,U,te,ne,!0))}),Y}(P,S,E,V,H):H.map(function(R){return s(P,S,E,V,R,$)}),P.seen.pop(),function(R,N,U){return R.reduce(function(te,j){return j.indexOf(`
`)>=0,te+j.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?U[0]+(N===""?"":N+`
 `)+" "+R.join(`,
  `)+" "+U[1]:U[0]+N+" "+R.join(", ")+" "+U[1]}(K,Z,re)):re[0]+Z+re[1]}function h(P){return"["+Error.prototype.toString.call(P)+"]"}function s(P,S,E,D,F,H){var V,Q,K;if((K=Object.getOwnPropertyDescriptor(S,F)||{value:S[F]}).get?Q=K.set?P.stylize("[Getter/Setter]","special"):P.stylize("[Getter]","special"):K.set&&(Q=P.stylize("[Setter]","special")),I(D,F)||(V="["+F+"]"),Q||(P.seen.indexOf(K.value)<0?(Q=f(E)?n(P,K.value,null):n(P,K.value,E-1)).indexOf(`
`)>-1&&(Q=H?Q.split(`
`).map(function(Z){return"  "+Z}).join(`
`).substr(2):`
`+Q.split(`
`).map(function(Z){return"   "+Z}).join(`
`)):Q=P.stylize("[Circular]","special")),m(V)){if(H&&F.match(/^\d+$/))return Q;(V=JSON.stringify(""+F)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(V=V.substr(1,V.length-2),V=P.stylize(V,"name")):(V=V.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),V=P.stylize(V,"string"))}return V+": "+Q}function a(P){return Array.isArray(P)}function l(P){return typeof P=="boolean"}function f(P){return P===null}function d(P){return typeof P=="number"}function v(P){return typeof P=="string"}function m(P){return P===void 0}function c(P){return b(P)&&T(P)==="[object RegExp]"}function b(P){return typeof P=="object"&&P!==null}function g(P){return b(P)&&T(P)==="[object Date]"}function w(P){return b(P)&&(T(P)==="[object Error]"||P instanceof Error)}function _(P){return typeof P=="function"}function T(P){return Object.prototype.toString.call(P)}function k(P){return P<10?"0"+P.toString(10):P.toString(10)}W.debuglog=function(P){if(m(y)&&(y=o.env.NODE_DEBUG||""),P=P.toUpperCase(),!e[P])if(new RegExp("\\b"+P+"\\b","i").test(y)){var S=o.pid;e[P]=function(){var E=W.format.apply(W,arguments);console.error("%s %d: %s",P,S,E)}}else e[P]=function(){};return e[P]},W.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},W.isArray=a,W.isBoolean=l,W.isNull=f,W.isNullOrUndefined=function(P){return P==null},W.isNumber=d,W.isString=v,W.isSymbol=function(P){return typeof P=="symbol"},W.isUndefined=m,W.isRegExp=c,W.isObject=b,W.isDate=g,W.isError=w,W.isFunction=_,W.isPrimitive=function(P){return P===null||typeof P=="boolean"||typeof P=="number"||typeof P=="string"||typeof P=="symbol"||P===void 0},W.isBuffer=u("./support/isBuffer");var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function M(){var P=new Date,S=[k(P.getHours()),k(P.getMinutes()),k(P.getSeconds())].join(":");return[P.getDate(),L[P.getMonth()],S].join(" ")}function I(P,S){return Object.prototype.hasOwnProperty.call(P,S)}W.log=function(){console.log("%s - %s",M(),W.format.apply(W,arguments))},W.inherits=u("inherits"),W._extend=function(P,S){if(!S||!b(S))return P;for(var E=Object.keys(S),D=E.length;D--;)P[E[D]]=S[E[D]];return P}}).call(this)}).call(this,u("_process"),typeof Ga!="undefined"?Ga:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./support/isBuffer":77,_process:277,inherits:76}],79:[function(u,q,W){W.byteLength=function(n){var h=t(n),s=h[0],a=h[1];return 3*(s+a)/4-a},W.toByteArray=function(n){var h,s,a=t(n),l=a[0],f=a[1],d=new x(function(c,b,g){return 3*(b+g)/4-g}(0,l,f)),v=0,m=f>0?l-4:l;for(s=0;s<m;s+=4)h=p[n.charCodeAt(s)]<<18|p[n.charCodeAt(s+1)]<<12|p[n.charCodeAt(s+2)]<<6|p[n.charCodeAt(s+3)],d[v++]=h>>16&255,d[v++]=h>>8&255,d[v++]=255&h;return f===2&&(h=p[n.charCodeAt(s)]<<2|p[n.charCodeAt(s+1)]>>4,d[v++]=255&h),f===1&&(h=p[n.charCodeAt(s)]<<10|p[n.charCodeAt(s+1)]<<4|p[n.charCodeAt(s+2)]>>2,d[v++]=h>>8&255,d[v++]=255&h),d},W.fromByteArray=function(n){for(var h,s=n.length,a=s%3,l=[],f=0,d=s-a;f<d;f+=16383)l.push(i(n,f,f+16383>d?d:f+16383));return a===1?(h=n[s-1],l.push(o[h>>2]+o[h<<4&63]+"==")):a===2&&(h=(n[s-2]<<8)+n[s-1],l.push(o[h>>10]+o[h>>4&63]+o[h<<2&63]+"=")),l.join("")};for(var o=[],p=[],x=typeof Uint8Array!="undefined"?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=y.length;e<r;++e)o[e]=y[e],p[y.charCodeAt(e)]=e;function t(n){var h=n.length;if(h%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=n.indexOf("=");return s===-1&&(s=h),[s,s===h?0:4-s%4]}function i(n,h,s){for(var a,l,f=[],d=h;d<s;d+=3)a=(n[d]<<16&16711680)+(n[d+1]<<8&65280)+(255&n[d+2]),f.push(o[(l=a)>>18&63]+o[l>>12&63]+o[l>>6&63]+o[63&l]);return f.join("")}p["-".charCodeAt(0)]=62,p["_".charCodeAt(0)]=63},{}],80:[function(u,q,W){function o(t,i,n,h,s){for(var a=s+1;h<=s;){var l=h+s>>>1,f=t[l];(n!==void 0?n(f,i):f-i)>=0?(a=l,s=l-1):h=l+1}return a}function p(t,i,n,h,s){for(var a=s+1;h<=s;){var l=h+s>>>1,f=t[l];(n!==void 0?n(f,i):f-i)>0?(a=l,s=l-1):h=l+1}return a}function x(t,i,n,h,s){for(var a=h-1;h<=s;){var l=h+s>>>1,f=t[l];(n!==void 0?n(f,i):f-i)<0?(a=l,h=l+1):s=l-1}return a}function y(t,i,n,h,s){for(var a=h-1;h<=s;){var l=h+s>>>1,f=t[l];(n!==void 0?n(f,i):f-i)<=0?(a=l,h=l+1):s=l-1}return a}function e(t,i,n,h,s){for(;h<=s;){var a=h+s>>>1,l=t[a],f=n!==void 0?n(l,i):l-i;if(f===0)return a;f<=0?h=a+1:s=a-1}return-1}function r(t,i,n,h,s,a){return typeof n=="function"?a(t,i,n,h===void 0?0:0|h,s===void 0?t.length-1:0|s):a(t,i,void 0,n===void 0?0:0|n,h===void 0?t.length-1:0|h)}q.exports={ge:function(t,i,n,h,s){return r(t,i,n,h,s,o)},gt:function(t,i,n,h,s){return r(t,i,n,h,s,p)},lt:function(t,i,n,h,s){return r(t,i,n,h,s,x)},le:function(t,i,n,h,s){return r(t,i,n,h,s,y)},eq:function(t,i,n,h,s){return r(t,i,n,h,s,e)}}},{}],81:[function(u,q,W){function o(x){var y=32;return(x&=-x)&&y--,65535&x&&(y-=16),16711935&x&&(y-=8),252645135&x&&(y-=4),858993459&x&&(y-=2),1431655765&x&&(y-=1),y}W.INT_BITS=32,W.INT_MAX=2147483647,W.INT_MIN=-1<<31,W.sign=function(x){return(x>0)-(x<0)},W.abs=function(x){var y=x>>31;return(x^y)-y},W.min=function(x,y){return y^(x^y)&-(x<y)},W.max=function(x,y){return x^(x^y)&-(x<y)},W.isPow2=function(x){return!(x&x-1||!x)},W.log2=function(x){var y,e;return y=(x>65535)<<4,y|=e=((x>>>=y)>255)<<3,y|=e=((x>>>=e)>15)<<2,(y|=e=((x>>>=e)>3)<<1)|(x>>>=e)>>1},W.log10=function(x){return x>=1e9?9:x>=1e8?8:x>=1e7?7:x>=1e6?6:x>=1e5?5:x>=1e4?4:x>=1e3?3:x>=100?2:x>=10?1:0},W.popCount=function(x){return 16843009*((x=(858993459&(x-=x>>>1&1431655765))+(x>>>2&858993459))+(x>>>4)&252645135)>>>24},W.countTrailingZeros=o,W.nextPow2=function(x){return x+=x===0,--x,x|=x>>>1,x|=x>>>2,x|=x>>>4,x|=x>>>8,(x|=x>>>16)+1},W.prevPow2=function(x){return x|=x>>>1,x|=x>>>2,x|=x>>>4,x|=x>>>8,(x|=x>>>16)-(x>>>1)},W.parity=function(x){return x^=x>>>16,x^=x>>>8,x^=x>>>4,27030>>>(x&=15)&1};var p=new Array(256);(function(x){for(var y=0;y<256;++y){var e=y,r=y,t=7;for(e>>>=1;e;e>>>=1)r<<=1,r|=1&e,--t;x[y]=r<<t&255}})(p),W.reverse=function(x){return p[255&x]<<24|p[x>>>8&255]<<16|p[x>>>16&255]<<8|p[x>>>24&255]},W.interleave2=function(x,y){return(x=1431655765&((x=858993459&((x=252645135&((x=16711935&((x&=65535)|x<<8))|x<<4))|x<<2))|x<<1))|(y=1431655765&((y=858993459&((y=252645135&((y=16711935&((y&=65535)|y<<8))|y<<4))|y<<2))|y<<1))<<1},W.deinterleave2=function(x,y){return(x=65535&((x=16711935&((x=252645135&((x=858993459&((x=x>>>y&1431655765)|x>>>1))|x>>>2))|x>>>4))|x>>>16))<<16>>16},W.interleave3=function(x,y,e){return x=1227133513&((x=3272356035&((x=251719695&((x=4278190335&((x&=1023)|x<<16))|x<<8))|x<<4))|x<<2),(x|=(y=1227133513&((y=3272356035&((y=251719695&((y=4278190335&((y&=1023)|y<<16))|y<<8))|y<<4))|y<<2))<<1)|(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<2},W.deinterleave3=function(x,y){return(x=1023&((x=4278190335&((x=251719695&((x=3272356035&((x=x>>>y&1227133513)|x>>>2))|x>>>4))|x>>>8))|x>>>16))<<22>>22},W.nextCombination=function(x){var y=x|x-1;return y+1|(~y&-~y)-1>>>o(x)+1}},{}],82:[function(u,q,W){var o=u("clamp");q.exports=function(e,r){r||(r={});var t,i,n,h,s,a,l,f,d,v,m,c=r.cutoff==null?.25:r.cutoff,b=r.radius==null?8:r.radius,g=r.channel||0;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!r.width||!r.height)throw Error("For raw data width and height should be provided by options");t=r.width,i=r.height,h=e,a=r.stride?r.stride:Math.floor(e.length/t/i)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(l=(f=e).getContext("2d"),t=f.width,i=f.height,d=l.getImageData(0,0,t,i),h=d.data,a=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(f=e.canvas,l=e,t=f.width,i=f.height,d=l.getImageData(0,0,t,i),h=d.data,a=4):window.ImageData&&e instanceof window.ImageData&&(d=e,t=e.width,i=e.height,h=d.data,a=4);if(n=Math.max(t,i),window.Uint8ClampedArray&&h instanceof window.Uint8ClampedArray||window.Uint8Array&&h instanceof window.Uint8Array)for(s=h,h=Array(t*i),v=0,m=s.length;v<m;v++)h[v]=s[v*a+g]/255;else if(a!==1)throw Error("Raw data can have only 1 value per pixel");var w=Array(t*i),_=Array(t*i),T=Array(n),k=Array(n),L=Array(n+1),M=Array(n);for(v=0,m=t*i;v<m;v++){var I=h[v];w[v]=I===1?0:I===0?p:Math.pow(Math.max(0,.5-I),2),_[v]=I===1?p:I===0?0:Math.pow(Math.max(0,I-.5),2)}x(w,t,i,T,k,M,L),x(_,t,i,T,k,M,L);var P=window.Float32Array?new Float32Array(t*i):new Array(t*i);for(v=0,m=t*i;v<m;v++)P[v]=o(1-((w[v]-_[v])/b+c),0,1);return P};var p=1e20;function x(e,r,t,i,n,h,s){for(var a=0;a<r;a++){for(var l=0;l<t;l++)i[l]=e[l*r+a];for(y(i,n,h,s,t),l=0;l<t;l++)e[l*r+a]=n[l]}for(l=0;l<t;l++){for(a=0;a<r;a++)i[a]=e[l*r+a];for(y(i,n,h,s,r),a=0;a<r;a++)e[l*r+a]=Math.sqrt(n[a])}}function y(e,r,t,i,n){t[0]=0,i[0]=-p,i[1]=+p;for(var h=1,s=0;h<n;h++){for(var a=(e[h]+h*h-(e[t[s]]+t[s]*t[s]))/(2*h-2*t[s]);a<=i[s];)s--,a=(e[h]+h*h-(e[t[s]]+t[s]*t[s]))/(2*h-2*t[s]);t[++s]=h,i[s]=a,i[s+1]=+p}for(h=0,s=0;h<n;h++){for(;i[s+1]<h;)s++;r[h]=(h-t[s])*(h-t[s])+e[t[s]]}}},{clamp:86}],83:[function(u,q,W){},{}],84:[function(u,q,W){var o,p=typeof Reflect=="object"?Reflect:null,x=p&&typeof p.apply=="function"?p.apply:function(d,v,m){return Function.prototype.apply.call(d,v,m)};o=p&&typeof p.ownKeys=="function"?p.ownKeys:Object.getOwnPropertySymbols?function(d){return Object.getOwnPropertyNames(d).concat(Object.getOwnPropertySymbols(d))}:function(d){return Object.getOwnPropertyNames(d)};var y=Number.isNaN||function(d){return d!=d};function e(){e.init.call(this)}q.exports=e,q.exports.once=function(d,v){return new Promise(function(m,c){function b(){g!==void 0&&d.removeListener("error",g),m([].slice.call(arguments))}var g;v!=="error"&&(g=function(w){d.removeListener(v,b),c(w)},d.once("error",g)),d.once(v,b)})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var r=10;function t(d){if(typeof d!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof d)}function i(d){return d._maxListeners===void 0?e.defaultMaxListeners:d._maxListeners}function n(d,v,m,c){var b,g,w,_;if(t(m),(g=d._events)===void 0?(g=d._events=Object.create(null),d._eventsCount=0):(g.newListener!==void 0&&(d.emit("newListener",v,m.listener?m.listener:m),g=d._events),w=g[v]),w===void 0)w=g[v]=m,++d._eventsCount;else if(typeof w=="function"?w=g[v]=c?[m,w]:[w,m]:c?w.unshift(m):w.push(m),(b=i(d))>0&&w.length>b&&!w.warned){w.warned=!0;var T=new Error("Possible EventEmitter memory leak detected. "+w.length+" "+String(v)+" listeners added. Use emitter.setMaxListeners() to increase limit");T.name="MaxListenersExceededWarning",T.emitter=d,T.type=v,T.count=w.length,_=T,console&&console.warn&&console.warn(_)}return d}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function s(d,v,m){var c={fired:!1,wrapFn:void 0,target:d,type:v,listener:m},b=h.bind(c);return b.listener=m,c.wrapFn=b,b}function a(d,v,m){var c=d._events;if(c===void 0)return[];var b=c[v];return b===void 0?[]:typeof b=="function"?m?[b.listener||b]:[b]:m?function(g){for(var w=new Array(g.length),_=0;_<w.length;++_)w[_]=g[_].listener||g[_];return w}(b):f(b,b.length)}function l(d){var v=this._events;if(v!==void 0){var m=v[d];if(typeof m=="function")return 1;if(m!==void 0)return m.length}return 0}function f(d,v){for(var m=new Array(v),c=0;c<v;++c)m[c]=d[c];return m}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(d){if(typeof d!="number"||d<0||y(d))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+d+".");r=d}}),e.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(d){if(typeof d!="number"||d<0||y(d))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+d+".");return this._maxListeners=d,this},e.prototype.getMaxListeners=function(){return i(this)},e.prototype.emit=function(d){for(var v=[],m=1;m<arguments.length;m++)v.push(arguments[m]);var c=d==="error",b=this._events;if(b!==void 0)c=c&&b.error===void 0;else if(!c)return!1;if(c){var g;if(v.length>0&&(g=v[0]),g instanceof Error)throw g;var w=new Error("Unhandled error."+(g?" ("+g.message+")":""));throw w.context=g,w}var _=b[d];if(_===void 0)return!1;if(typeof _=="function")x(_,this,v);else{var T=_.length,k=f(_,T);for(m=0;m<T;++m)x(k[m],this,v)}return!0},e.prototype.addListener=function(d,v){return n(this,d,v,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(d,v){return n(this,d,v,!0)},e.prototype.once=function(d,v){return t(v),this.on(d,s(this,d,v)),this},e.prototype.prependOnceListener=function(d,v){return t(v),this.prependListener(d,s(this,d,v)),this},e.prototype.removeListener=function(d,v){var m,c,b,g,w;if(t(v),(c=this._events)===void 0)return this;if((m=c[d])===void 0)return this;if(m===v||m.listener===v)--this._eventsCount==0?this._events=Object.create(null):(delete c[d],c.removeListener&&this.emit("removeListener",d,m.listener||v));else if(typeof m!="function"){for(b=-1,g=m.length-1;g>=0;g--)if(m[g]===v||m[g].listener===v){w=m[g].listener,b=g;break}if(b<0)return this;b===0?m.shift():function(_,T){for(;T+1<_.length;T++)_[T]=_[T+1];_.pop()}(m,b),m.length===1&&(c[d]=m[0]),c.removeListener!==void 0&&this.emit("removeListener",d,w||v)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(d){var v,m,c;if((m=this._events)===void 0)return this;if(m.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):m[d]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete m[d]),this;if(arguments.length===0){var b,g=Object.keys(m);for(c=0;c<g.length;++c)(b=g[c])!=="removeListener"&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(v=m[d])=="function")this.removeListener(d,v);else if(v!==void 0)for(c=v.length-1;c>=0;c--)this.removeListener(d,v[c]);return this},e.prototype.listeners=function(d){return a(this,d,!0)},e.prototype.rawListeners=function(d){return a(this,d,!1)},e.listenerCount=function(d,v){return typeof d.listenerCount=="function"?d.listenerCount(v):l.call(d,v)},e.prototype.listenerCount=l,e.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]}},{}],85:[function(u,q,W){(function(o){(function(){var p=u("base64-js"),x=u("ieee754");W.Buffer=e,W.SlowBuffer=function(R){return+R!=R&&(R=0),e.alloc(+R)},W.INSPECT_MAX_BYTES=50;function y(R){if(R>2147483647)throw new RangeError('The value "'+R+'" is invalid for option "size"');var N=new Uint8Array(R);return N.__proto__=e.prototype,N}function e(R,N,U){if(typeof R=="number"){if(typeof N=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return i(R)}return r(R,N,U)}function r(R,N,U){if(typeof R=="string")return function(Y,J){if(typeof J=="string"&&J!==""||(J="utf8"),!e.isEncoding(J))throw new TypeError("Unknown encoding: "+J);var ee=0|s(Y,J),ne=y(ee),se=ne.write(Y,J);return se!==ee&&(ne=ne.slice(0,se)),ne}(R,N);if(ArrayBuffer.isView(R))return n(R);if(R==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R);if($(R,ArrayBuffer)||R&&$(R.buffer,ArrayBuffer))return function(Y,J,ee){if(J<0||Y.byteLength<J)throw new RangeError('"offset" is outside of buffer bounds');if(Y.byteLength<J+(ee||0))throw new RangeError('"length" is outside of buffer bounds');var ne;return ne=J===void 0&&ee===void 0?new Uint8Array(Y):ee===void 0?new Uint8Array(Y,J):new Uint8Array(Y,J,ee),ne.__proto__=e.prototype,ne}(R,N,U);if(typeof R=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var te=R.valueOf&&R.valueOf();if(te!=null&&te!==R)return e.from(te,N,U);var j=function(Y){if(e.isBuffer(Y)){var J=0|h(Y.length),ee=y(J);return ee.length===0||Y.copy(ee,0,0,J),ee}if(Y.length!==void 0)return typeof Y.length!="number"||re(Y.length)?y(0):n(Y);if(Y.type==="Buffer"&&Array.isArray(Y.data))return n(Y.data)}(R);if(j)return j;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof R[Symbol.toPrimitive]=="function")return e.from(R[Symbol.toPrimitive]("string"),N,U);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R)}function t(R){if(typeof R!="number")throw new TypeError('"size" argument must be of type number');if(R<0)throw new RangeError('The value "'+R+'" is invalid for option "size"')}function i(R){return t(R),y(R<0?0:0|h(R))}function n(R){for(var N=R.length<0?0:0|h(R.length),U=y(N),te=0;te<N;te+=1)U[te]=255&R[te];return U}function h(R){if(R>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes");return 0|R}function s(R,N){if(e.isBuffer(R))return R.length;if(ArrayBuffer.isView(R)||$(R,ArrayBuffer))return R.byteLength;if(typeof R!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof R);var U=R.length,te=arguments.length>2&&arguments[2]===!0;if(!te&&U===0)return 0;for(var j=!1;;)switch(N){case"ascii":case"latin1":case"binary":return U;case"utf8":case"utf-8":return Q(R).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*U;case"hex":return U>>>1;case"base64":return K(R).length;default:if(j)return te?-1:Q(R).length;N=(""+N).toLowerCase(),j=!0}}function a(R,N,U){var te=!1;if((N===void 0||N<0)&&(N=0),N>this.length||((U===void 0||U>this.length)&&(U=this.length),U<=0)||(U>>>=0)<=(N>>>=0))return"";for(R||(R="utf8");;)switch(R){case"hex":return M(this,N,U);case"utf8":case"utf-8":return T(this,N,U);case"ascii":return k(this,N,U);case"latin1":case"binary":return L(this,N,U);case"base64":return _(this,N,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,N,U);default:if(te)throw new TypeError("Unknown encoding: "+R);R=(R+"").toLowerCase(),te=!0}}function l(R,N,U){var te=R[N];R[N]=R[U],R[U]=te}function f(R,N,U,te,j){if(R.length===0)return-1;if(typeof U=="string"?(te=U,U=0):U>2147483647?U=2147483647:U<-2147483648&&(U=-2147483648),re(U=+U)&&(U=j?0:R.length-1),U<0&&(U=R.length+U),U>=R.length){if(j)return-1;U=R.length-1}else if(U<0){if(!j)return-1;U=0}if(typeof N=="string"&&(N=e.from(N,te)),e.isBuffer(N))return N.length===0?-1:d(R,N,U,te,j);if(typeof N=="number")return N&=255,typeof Uint8Array.prototype.indexOf=="function"?j?Uint8Array.prototype.indexOf.call(R,N,U):Uint8Array.prototype.lastIndexOf.call(R,N,U):d(R,[N],U,te,j);throw new TypeError("val must be string, number or Buffer")}function d(R,N,U,te,j){var Y,J=1,ee=R.length,ne=N.length;if(te!==void 0&&((te=String(te).toLowerCase())==="ucs2"||te==="ucs-2"||te==="utf16le"||te==="utf-16le")){if(R.length<2||N.length<2)return-1;J=2,ee/=2,ne/=2,U/=2}function se(de,xe){return J===1?de[xe]:de.readUInt16BE(xe*J)}if(j){var oe=-1;for(Y=U;Y<ee;Y++)if(se(R,Y)===se(N,oe===-1?0:Y-oe)){if(oe===-1&&(oe=Y),Y-oe+1===ne)return oe*J}else oe!==-1&&(Y-=Y-oe),oe=-1}else for(U+ne>ee&&(U=ee-ne),Y=U;Y>=0;Y--){for(var he=!0,le=0;le<ne;le++)if(se(R,Y+le)!==se(N,le)){he=!1;break}if(he)return Y}return-1}function v(R,N,U,te){U=Number(U)||0;var j=R.length-U;te?(te=Number(te))>j&&(te=j):te=j;var Y=N.length;te>Y/2&&(te=Y/2);for(var J=0;J<te;++J){var ee=parseInt(N.substr(2*J,2),16);if(re(ee))return J;R[U+J]=ee}return J}function m(R,N,U,te){return Z(Q(N,R.length-U),R,U,te)}function c(R,N,U,te){return Z(function(j){for(var Y=[],J=0;J<j.length;++J)Y.push(255&j.charCodeAt(J));return Y}(N),R,U,te)}function b(R,N,U,te){return c(R,N,U,te)}function g(R,N,U,te){return Z(K(N),R,U,te)}function w(R,N,U,te){return Z(function(j,Y){for(var J,ee,ne,se=[],oe=0;oe<j.length&&!((Y-=2)<0);++oe)J=j.charCodeAt(oe),ee=J>>8,ne=J%256,se.push(ne),se.push(ee);return se}(N,R.length-U),R,U,te)}function _(R,N,U){return N===0&&U===R.length?p.fromByteArray(R):p.fromByteArray(R.slice(N,U))}function T(R,N,U){U=Math.min(R.length,U);for(var te=[],j=N;j<U;){var Y,J,ee,ne,se=R[j],oe=null,he=se>239?4:se>223?3:se>191?2:1;if(j+he<=U)switch(he){case 1:se<128&&(oe=se);break;case 2:(192&(Y=R[j+1]))==128&&(ne=(31&se)<<6|63&Y)>127&&(oe=ne);break;case 3:Y=R[j+1],J=R[j+2],(192&Y)==128&&(192&J)==128&&(ne=(15&se)<<12|(63&Y)<<6|63&J)>2047&&(ne<55296||ne>57343)&&(oe=ne);break;case 4:Y=R[j+1],J=R[j+2],ee=R[j+3],(192&Y)==128&&(192&J)==128&&(192&ee)==128&&(ne=(15&se)<<18|(63&Y)<<12|(63&J)<<6|63&ee)>65535&&ne<1114112&&(oe=ne)}oe===null?(oe=65533,he=1):oe>65535&&(oe-=65536,te.push(oe>>>10&1023|55296),oe=56320|1023&oe),te.push(oe),j+=he}return function(le){var de=le.length;if(de<=4096)return String.fromCharCode.apply(String,le);for(var xe="",we=0;we<de;)xe+=String.fromCharCode.apply(String,le.slice(we,we+=4096));return xe}(te)}W.kMaxLength=2147483647,e.TYPED_ARRAY_SUPPORT=function(){try{var R=new Uint8Array(1);return R.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},R.foo()===42}catch{return!1}}(),e.TYPED_ARRAY_SUPPORT||typeof console=="undefined"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),typeof Symbol!="undefined"&&Symbol.species!=null&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(R,N,U){return r(R,N,U)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(R,N,U){return function(te,j,Y){return t(te),te<=0?y(te):j!==void 0?typeof Y=="string"?y(te).fill(j,Y):y(te).fill(j):y(te)}(R,N,U)},e.allocUnsafe=function(R){return i(R)},e.allocUnsafeSlow=function(R){return i(R)},e.isBuffer=function(R){return R!=null&&R._isBuffer===!0&&R!==e.prototype},e.compare=function(R,N){if($(R,Uint8Array)&&(R=e.from(R,R.offset,R.byteLength)),$(N,Uint8Array)&&(N=e.from(N,N.offset,N.byteLength)),!e.isBuffer(R)||!e.isBuffer(N))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===N)return 0;for(var U=R.length,te=N.length,j=0,Y=Math.min(U,te);j<Y;++j)if(R[j]!==N[j]){U=R[j],te=N[j];break}return U<te?-1:te<U?1:0},e.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(R,N){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return e.alloc(0);var U;if(N===void 0)for(N=0,U=0;U<R.length;++U)N+=R[U].length;var te=e.allocUnsafe(N),j=0;for(U=0;U<R.length;++U){var Y=R[U];if($(Y,Uint8Array)&&(Y=e.from(Y)),!e.isBuffer(Y))throw new TypeError('"list" argument must be an Array of Buffers');Y.copy(te,j),j+=Y.length}return te},e.byteLength=s,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var R=this.length;if(R%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var N=0;N<R;N+=2)l(this,N,N+1);return this},e.prototype.swap32=function(){var R=this.length;if(R%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var N=0;N<R;N+=4)l(this,N,N+3),l(this,N+1,N+2);return this},e.prototype.swap64=function(){var R=this.length;if(R%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var N=0;N<R;N+=8)l(this,N,N+7),l(this,N+1,N+6),l(this,N+2,N+5),l(this,N+3,N+4);return this},e.prototype.toString=function(){var R=this.length;return R===0?"":arguments.length===0?T(this,0,R):a.apply(this,arguments)},e.prototype.toLocaleString=e.prototype.toString,e.prototype.equals=function(R){if(!e.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R||e.compare(this,R)===0},e.prototype.inspect=function(){var R="",N=W.INSPECT_MAX_BYTES;return R=this.toString("hex",0,N).replace(/(.{2})/g,"$1 ").trim(),this.length>N&&(R+=" ... "),"<Buffer "+R+">"},e.prototype.compare=function(R,N,U,te,j){if($(R,Uint8Array)&&(R=e.from(R,R.offset,R.byteLength)),!e.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(N===void 0&&(N=0),U===void 0&&(U=R?R.length:0),te===void 0&&(te=0),j===void 0&&(j=this.length),N<0||U>R.length||te<0||j>this.length)throw new RangeError("out of range index");if(te>=j&&N>=U)return 0;if(te>=j)return-1;if(N>=U)return 1;if(this===R)return 0;for(var Y=(j>>>=0)-(te>>>=0),J=(U>>>=0)-(N>>>=0),ee=Math.min(Y,J),ne=this.slice(te,j),se=R.slice(N,U),oe=0;oe<ee;++oe)if(ne[oe]!==se[oe]){Y=ne[oe],J=se[oe];break}return Y<J?-1:J<Y?1:0},e.prototype.includes=function(R,N,U){return this.indexOf(R,N,U)!==-1},e.prototype.indexOf=function(R,N,U){return f(this,R,N,U,!0)},e.prototype.lastIndexOf=function(R,N,U){return f(this,R,N,U,!1)},e.prototype.write=function(R,N,U,te){if(N===void 0)te="utf8",U=this.length,N=0;else if(U===void 0&&typeof N=="string")te=N,U=this.length,N=0;else{if(!isFinite(N))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");N>>>=0,isFinite(U)?(U>>>=0,te===void 0&&(te="utf8")):(te=U,U=void 0)}var j=this.length-N;if((U===void 0||U>j)&&(U=j),R.length>0&&(U<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");for(var Y=!1;;)switch(te){case"hex":return v(this,R,N,U);case"utf8":case"utf-8":return m(this,R,N,U);case"ascii":return c(this,R,N,U);case"latin1":case"binary":return b(this,R,N,U);case"base64":return g(this,R,N,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,R,N,U);default:if(Y)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),Y=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function k(R,N,U){var te="";U=Math.min(R.length,U);for(var j=N;j<U;++j)te+=String.fromCharCode(127&R[j]);return te}function L(R,N,U){var te="";U=Math.min(R.length,U);for(var j=N;j<U;++j)te+=String.fromCharCode(R[j]);return te}function M(R,N,U){var te=R.length;(!N||N<0)&&(N=0),(!U||U<0||U>te)&&(U=te);for(var j="",Y=N;Y<U;++Y)j+=V(R[Y]);return j}function I(R,N,U){for(var te=R.slice(N,U),j="",Y=0;Y<te.length;Y+=2)j+=String.fromCharCode(te[Y]+256*te[Y+1]);return j}function P(R,N,U){if(R%1!=0||R<0)throw new RangeError("offset is not uint");if(R+N>U)throw new RangeError("Trying to access beyond buffer length")}function S(R,N,U,te,j,Y){if(!e.isBuffer(R))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>j||N<Y)throw new RangeError('"value" argument is out of bounds');if(U+te>R.length)throw new RangeError("Index out of range")}function E(R,N,U,te,j,Y){if(U+te>R.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("Index out of range")}function D(R,N,U,te,j){return N=+N,U>>>=0,j||E(R,0,U,4),x.write(R,N,U,te,23,4),U+4}function F(R,N,U,te,j){return N=+N,U>>>=0,j||E(R,0,U,8),x.write(R,N,U,te,52,8),U+8}e.prototype.slice=function(R,N){var U=this.length;(R=~~R)<0?(R+=U)<0&&(R=0):R>U&&(R=U),(N=N===void 0?U:~~N)<0?(N+=U)<0&&(N=0):N>U&&(N=U),N<R&&(N=R);var te=this.subarray(R,N);return te.__proto__=e.prototype,te},e.prototype.readUIntLE=function(R,N,U){R>>>=0,N>>>=0,U||P(R,N,this.length);for(var te=this[R],j=1,Y=0;++Y<N&&(j*=256);)te+=this[R+Y]*j;return te},e.prototype.readUIntBE=function(R,N,U){R>>>=0,N>>>=0,U||P(R,N,this.length);for(var te=this[R+--N],j=1;N>0&&(j*=256);)te+=this[R+--N]*j;return te},e.prototype.readUInt8=function(R,N){return R>>>=0,N||P(R,1,this.length),this[R]},e.prototype.readUInt16LE=function(R,N){return R>>>=0,N||P(R,2,this.length),this[R]|this[R+1]<<8},e.prototype.readUInt16BE=function(R,N){return R>>>=0,N||P(R,2,this.length),this[R]<<8|this[R+1]},e.prototype.readUInt32LE=function(R,N){return R>>>=0,N||P(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+16777216*this[R+3]},e.prototype.readUInt32BE=function(R,N){return R>>>=0,N||P(R,4,this.length),16777216*this[R]+(this[R+1]<<16|this[R+2]<<8|this[R+3])},e.prototype.readIntLE=function(R,N,U){R>>>=0,N>>>=0,U||P(R,N,this.length);for(var te=this[R],j=1,Y=0;++Y<N&&(j*=256);)te+=this[R+Y]*j;return te>=(j*=128)&&(te-=Math.pow(2,8*N)),te},e.prototype.readIntBE=function(R,N,U){R>>>=0,N>>>=0,U||P(R,N,this.length);for(var te=N,j=1,Y=this[R+--te];te>0&&(j*=256);)Y+=this[R+--te]*j;return Y>=(j*=128)&&(Y-=Math.pow(2,8*N)),Y},e.prototype.readInt8=function(R,N){return R>>>=0,N||P(R,1,this.length),128&this[R]?-1*(255-this[R]+1):this[R]},e.prototype.readInt16LE=function(R,N){R>>>=0,N||P(R,2,this.length);var U=this[R]|this[R+1]<<8;return 32768&U?4294901760|U:U},e.prototype.readInt16BE=function(R,N){R>>>=0,N||P(R,2,this.length);var U=this[R+1]|this[R]<<8;return 32768&U?4294901760|U:U},e.prototype.readInt32LE=function(R,N){return R>>>=0,N||P(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},e.prototype.readInt32BE=function(R,N){return R>>>=0,N||P(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},e.prototype.readFloatLE=function(R,N){return R>>>=0,N||P(R,4,this.length),x.read(this,R,!0,23,4)},e.prototype.readFloatBE=function(R,N){return R>>>=0,N||P(R,4,this.length),x.read(this,R,!1,23,4)},e.prototype.readDoubleLE=function(R,N){return R>>>=0,N||P(R,8,this.length),x.read(this,R,!0,52,8)},e.prototype.readDoubleBE=function(R,N){return R>>>=0,N||P(R,8,this.length),x.read(this,R,!1,52,8)},e.prototype.writeUIntLE=function(R,N,U,te){R=+R,N>>>=0,U>>>=0,te||S(this,R,N,U,Math.pow(2,8*U)-1,0);var j=1,Y=0;for(this[N]=255&R;++Y<U&&(j*=256);)this[N+Y]=R/j&255;return N+U},e.prototype.writeUIntBE=function(R,N,U,te){R=+R,N>>>=0,U>>>=0,te||S(this,R,N,U,Math.pow(2,8*U)-1,0);var j=U-1,Y=1;for(this[N+j]=255&R;--j>=0&&(Y*=256);)this[N+j]=R/Y&255;return N+U},e.prototype.writeUInt8=function(R,N,U){return R=+R,N>>>=0,U||S(this,R,N,1,255,0),this[N]=255&R,N+1},e.prototype.writeUInt16LE=function(R,N,U){return R=+R,N>>>=0,U||S(this,R,N,2,65535,0),this[N]=255&R,this[N+1]=R>>>8,N+2},e.prototype.writeUInt16BE=function(R,N,U){return R=+R,N>>>=0,U||S(this,R,N,2,65535,0),this[N]=R>>>8,this[N+1]=255&R,N+2},e.prototype.writeUInt32LE=function(R,N,U){return R=+R,N>>>=0,U||S(this,R,N,4,4294967295,0),this[N+3]=R>>>24,this[N+2]=R>>>16,this[N+1]=R>>>8,this[N]=255&R,N+4},e.prototype.writeUInt32BE=function(R,N,U){return R=+R,N>>>=0,U||S(this,R,N,4,4294967295,0),this[N]=R>>>24,this[N+1]=R>>>16,this[N+2]=R>>>8,this[N+3]=255&R,N+4},e.prototype.writeIntLE=function(R,N,U,te){if(R=+R,N>>>=0,!te){var j=Math.pow(2,8*U-1);S(this,R,N,U,j-1,-j)}var Y=0,J=1,ee=0;for(this[N]=255&R;++Y<U&&(J*=256);)R<0&&ee===0&&this[N+Y-1]!==0&&(ee=1),this[N+Y]=(R/J>>0)-ee&255;return N+U},e.prototype.writeIntBE=function(R,N,U,te){if(R=+R,N>>>=0,!te){var j=Math.pow(2,8*U-1);S(this,R,N,U,j-1,-j)}var Y=U-1,J=1,ee=0;for(this[N+Y]=255&R;--Y>=0&&(J*=256);)R<0&&ee===0&&this[N+Y+1]!==0&&(ee=1),this[N+Y]=(R/J>>0)-ee&255;return N+U},e.prototype.writeInt8=function(R,N,U){return R=+R,N>>>=0,U||S(this,R,N,1,127,-128),R<0&&(R=255+R+1),this[N]=255&R,N+1},e.prototype.writeInt16LE=function(R,N,U){return R=+R,N>>>=0,U||S(this,R,N,2,32767,-32768),this[N]=255&R,this[N+1]=R>>>8,N+2},e.prototype.writeInt16BE=function(R,N,U){return R=+R,N>>>=0,U||S(this,R,N,2,32767,-32768),this[N]=R>>>8,this[N+1]=255&R,N+2},e.prototype.writeInt32LE=function(R,N,U){return R=+R,N>>>=0,U||S(this,R,N,4,2147483647,-2147483648),this[N]=255&R,this[N+1]=R>>>8,this[N+2]=R>>>16,this[N+3]=R>>>24,N+4},e.prototype.writeInt32BE=function(R,N,U){return R=+R,N>>>=0,U||S(this,R,N,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[N]=R>>>24,this[N+1]=R>>>16,this[N+2]=R>>>8,this[N+3]=255&R,N+4},e.prototype.writeFloatLE=function(R,N,U){return D(this,R,N,!0,U)},e.prototype.writeFloatBE=function(R,N,U){return D(this,R,N,!1,U)},e.prototype.writeDoubleLE=function(R,N,U){return F(this,R,N,!0,U)},e.prototype.writeDoubleBE=function(R,N,U){return F(this,R,N,!1,U)},e.prototype.copy=function(R,N,U,te){if(!e.isBuffer(R))throw new TypeError("argument should be a Buffer");if(U||(U=0),te||te===0||(te=this.length),N>=R.length&&(N=R.length),N||(N=0),te>0&&te<U&&(te=U),te===U||R.length===0||this.length===0)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if(U<0||U>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),R.length-N<te-U&&(te=R.length-N+U);var j=te-U;if(this===R&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(N,U,te);else if(this===R&&U<N&&N<te)for(var Y=j-1;Y>=0;--Y)R[Y+N]=this[Y+U];else Uint8Array.prototype.set.call(R,this.subarray(U,te),N);return j},e.prototype.fill=function(R,N,U,te){if(typeof R=="string"){if(typeof N=="string"?(te=N,N=0,U=this.length):typeof U=="string"&&(te=U,U=this.length),te!==void 0&&typeof te!="string")throw new TypeError("encoding must be a string");if(typeof te=="string"&&!e.isEncoding(te))throw new TypeError("Unknown encoding: "+te);if(R.length===1){var j=R.charCodeAt(0);(te==="utf8"&&j<128||te==="latin1")&&(R=j)}}else typeof R=="number"&&(R&=255);if(N<0||this.length<N||this.length<U)throw new RangeError("Out of range index");if(U<=N)return this;var Y;if(N>>>=0,U=U===void 0?this.length:U>>>0,R||(R=0),typeof R=="number")for(Y=N;Y<U;++Y)this[Y]=R;else{var J=e.isBuffer(R)?R:e.from(R,te),ee=J.length;if(ee===0)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(Y=0;Y<U-N;++Y)this[Y+N]=J[Y%ee]}return this};var H=/[^+/0-9A-Za-z-_]/g;function V(R){return R<16?"0"+R.toString(16):R.toString(16)}function Q(R,N){var U;N=N||1/0;for(var te=R.length,j=null,Y=[],J=0;J<te;++J){if((U=R.charCodeAt(J))>55295&&U<57344){if(!j){if(U>56319){(N-=3)>-1&&Y.push(239,191,189);continue}if(J+1===te){(N-=3)>-1&&Y.push(239,191,189);continue}j=U;continue}if(U<56320){(N-=3)>-1&&Y.push(239,191,189),j=U;continue}U=65536+(j-55296<<10|U-56320)}else j&&(N-=3)>-1&&Y.push(239,191,189);if(j=null,U<128){if((N-=1)<0)break;Y.push(U)}else if(U<2048){if((N-=2)<0)break;Y.push(U>>6|192,63&U|128)}else if(U<65536){if((N-=3)<0)break;Y.push(U>>12|224,U>>6&63|128,63&U|128)}else{if(!(U<1114112))throw new Error("Invalid code point");if((N-=4)<0)break;Y.push(U>>18|240,U>>12&63|128,U>>6&63|128,63&U|128)}}return Y}function K(R){return p.toByteArray(function(N){if((N=(N=N.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;N.length%4!=0;)N+="=";return N}(R))}function Z(R,N,U,te){for(var j=0;j<te&&!(j+U>=N.length||j>=R.length);++j)N[j+U]=R[j];return j}function $(R,N){return R instanceof N||R!=null&&R.constructor!=null&&R.constructor.name!=null&&R.constructor.name===N.name}function re(R){return R!=R}}).call(this)}).call(this,u("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(u,q,W){q.exports=function(o,p,x){return p<x?o<p?p:o>x?x:o:o<x?x:o>p?p:o}},{}],87:[function(u,q,W){var o=u("clamp");function p(x,y){y==null&&(y=!0);var e=x[0],r=x[1],t=x[2],i=x[3];return i==null&&(i=y?1:255),y&&(e*=255,r*=255,t*=255,i*=255),16777216*(e=255&o(e,0,255))+((r=255&o(r,0,255))<<16)+((t=255&o(t,0,255))<<8)+(i=255&o(i,0,255))}q.exports=p,q.exports.to=p,q.exports.from=function(x,y){var e=(x=+x)>>>24,r=(16711680&x)>>>16,t=(65280&x)>>>8,i=255&x;return y===!1?[e,r,t,i]:[e/255,r/255,t/255,i/255]}},{clamp:86}],88:[function(u,q,W){q.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(u,q,W){var o=u("color-rgba"),p=u("clamp"),x=u("dtype");q.exports=function(y,e){e!=="float"&&e||(e="array"),e==="uint"&&(e="uint8"),e==="uint_clamped"&&(e="uint8_clamped");var r=new(x(e))(4),t=e!=="uint8"&&e!=="uint8_clamped";return y.length&&typeof y!="string"||((y=o(y))[0]/=255,y[1]/=255,y[2]/=255),function(i){return i instanceof Uint8Array||i instanceof Uint8ClampedArray||!!(Array.isArray(i)&&(i[0]>1||i[0]===0)&&(i[1]>1||i[1]===0)&&(i[2]>1||i[2]===0)&&(!i[3]||i[3]>1))}(y)?(r[0]=y[0],r[1]=y[1],r[2]=y[2],r[3]=y[3]!=null?y[3]:255,t&&(r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255),r):(t?(r[0]=y[0],r[1]=y[1],r[2]=y[2],r[3]=y[3]!=null?y[3]:1):(r[0]=p(Math.floor(255*y[0]),0,255),r[1]=p(Math.floor(255*y[1]),0,255),r[2]=p(Math.floor(255*y[2]),0,255),r[3]=y[3]==null?255:p(Math.floor(255*y[3]),0,255)),r)}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(u,q,W){(function(o){(function(){var p=u("color-name"),x=u("is-plain-obj"),y=u("defined");q.exports=function(r){var t,i,n=[],h=1;if(typeof r=="string")if(p[r])n=p[r].slice(),i="rgb";else if(r==="transparent")h=0,i="rgb",n=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(r)){var s=(f=r.slice(1)).length;h=1,s<=4?(n=[parseInt(f[0]+f[0],16),parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16)],s===4&&(h=parseInt(f[3]+f[3],16)/255)):(n=[parseInt(f[0]+f[1],16),parseInt(f[2]+f[3],16),parseInt(f[4]+f[5],16)],s===8&&(h=parseInt(f[6]+f[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),i="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(r)){var a=t[1],l=a==="rgb",f=a.replace(/a$/,"");i=f,s=f==="cmyk"?4:f==="gray"?1:3,n=t[2].trim().split(/\s*,\s*/).map(function(v,m){if(/%$/.test(v))return m===s?parseFloat(v)/100:f==="rgb"?255*parseFloat(v)/100:parseFloat(v);if(f[m]==="h"){if(/deg$/.test(v))return parseFloat(v);if(e[v]!==void 0)return e[v]}return parseFloat(v)}),a===f&&n.push(1),h=l||n[s]===void 0?1:n[s],n=n.slice(0,s)}else r.length>10&&/[0-9](?:\s|\/)/.test(r)&&(n=r.match(/([0-9]+)/g).map(function(v){return parseFloat(v)}),i=r.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(r))if(x(r)){var d=y(r.r,r.red,r.R,null);d!==null?(i="rgb",n=[d,y(r.g,r.green,r.G),y(r.b,r.blue,r.B)]):(i="hsl",n=[y(r.h,r.hue,r.H),y(r.s,r.saturation,r.S),y(r.l,r.lightness,r.L,r.b,r.brightness)]),h=y(r.a,r.alpha,r.opacity,1),r.opacity!=null&&(h/=100)}else(Array.isArray(r)||o.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(r))&&(n=[r[0],r[1],r[2]],i="rgb",h=r.length===4?r[3]:1);else i="rgb",n=[r>>>16,(65280&r)>>>8,255&r];return{space:i,values:n,alpha:h}};var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this)}).call(this,typeof Ga!="undefined"?Ga:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(u,q,W){var o=u("color-parse"),p=u("color-space/hsl"),x=u("clamp");q.exports=function(y){var e,r=o(y);return r.space?((e=Array(3))[0]=x(r.values[0],0,255),e[1]=x(r.values[1],0,255),e[2]=x(r.values[2],0,255),r.space[0]==="h"&&(e=p.rgb(e)),e.push(x(r.alpha,0,1)),e):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(u,q,W){var o=u("./rgb");q.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(p){var x,y,e,r,t,i=p[0]/360,n=p[1]/100,h=p[2]/100;if(n===0)return[t=255*h,t,t];x=2*h-(y=h<.5?h*(1+n):h+n-h*n),r=[0,0,0];for(var s=0;s<3;s++)(e=i+1/3*-(s-1))<0?e++:e>1&&e--,t=6*e<1?x+6*(y-x)*e:2*e<1?y:3*e<2?x+(y-x)*(2/3-e)*6:x,r[s]=255*t;return r}},o.hsl=function(p){var x,y,e=p[0]/255,r=p[1]/255,t=p[2]/255,i=Math.min(e,r,t),n=Math.max(e,r,t),h=n-i;return n===i?x=0:e===n?x=(r-t)/h:r===n?x=2+(t-e)/h:t===n&&(x=4+(e-r)/h),(x=Math.min(60*x,360))<0&&(x+=360),y=(i+n)/2,[x,100*(n===i?0:y<=.5?h/(n+i):h/(2-n-i)),100*y]}},{"./rgb":93}],93:[function(u,q,W){q.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(u,q,W){q.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(u,q,W){q.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(u,q,W){q.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(u,q,W){q.exports=["normal","italic","oblique"]},{}],98:[function(u,q,W){q.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(u,q,W){q.exports={parse:u("./parse"),stringify:u("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(u,q,W){var o=u("css-font-size-keywords");q.exports={isSize:function(p){return/^[\d\.]/.test(p)||p.indexOf("/")!==-1||o.indexOf(p)!==-1}}},{"css-font-size-keywords":95}],101:[function(u,q,W){var o=u("unquote"),p=u("css-global-keywords"),x=u("css-system-font-keywords"),y=u("css-font-weight-keywords"),e=u("css-font-style-keywords"),r=u("css-font-stretch-keywords"),t=u("string-split-by"),i=u("./lib/util").isSize;q.exports=h;var n=h.cache={};function h(a){if(typeof a!="string")throw new Error("Font argument must be a string.");if(n[a])return n[a];if(a==="")throw new Error("Cannot parse an empty string.");if(x.indexOf(a)!==-1)return n[a]={system:a};for(var l,f={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},d=t(a,/\s+/);l=d.shift();){if(p.indexOf(l)!==-1)return["style","variant","weight","stretch"].forEach(function(m){f[m]=l}),n[a]=f;if(e.indexOf(l)===-1)if(l!=="normal"&&l!=="small-caps")if(r.indexOf(l)===-1){if(y.indexOf(l)===-1){if(i(l)){var v=t(l,"/");if(f.size=v[0],v[1]!=null?f.lineHeight=s(v[1]):d[0]==="/"&&(d.shift(),f.lineHeight=s(d.shift())),!d.length)throw new Error("Missing required font-family.");return f.family=t(d.join(" "),/\s*,\s*/).map(o),n[a]=f}throw new Error("Unknown or unsupported font token: "+l)}f.weight=l}else f.stretch=l;else f.variant=l;else f.style=l}throw new Error("Missing required font-size.")}function s(a){var l=parseFloat(a);return l.toString()===a?l:a}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":305,unquote:328}],102:[function(u,q,W){var o=u("pick-by-alias"),p=u("./lib/util").isSize,x=l(u("css-global-keywords")),y=l(u("css-system-font-keywords")),e=l(u("css-font-weight-keywords")),r=l(u("css-font-style-keywords")),t=l(u("css-font-stretch-keywords")),i={normal:1,"small-caps":1},n={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},h="1rem",s="serif";function a(f,d){if(f&&!d[f]&&!x[f])throw Error("Unknown keyword `"+f+"`");return f}function l(f){for(var d={},v=0;v<f.length;v++)d[f[v]]=1;return d}q.exports=function(f){if((f=o(f,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return f.system&&a(f.system,y),f.system;if(a(f.style,r),a(f.variant,i),a(f.weight,e),a(f.stretch,t),f.size==null&&(f.size=h),typeof f.size=="number"&&(f.size+="px"),!p)throw Error("Bad size value `"+f.size+"`");f.family||(f.family=s),Array.isArray(f.family)&&(f.family.length||(f.family=[s]),f.family=f.family.map(function(v){return n[v]?v:'"'+v+'"'}).join(", "));var d=[];return d.push(f.style),f.variant!==f.style&&d.push(f.variant),f.weight!==f.variant&&f.weight!==f.style&&d.push(f.weight),f.stretch!==f.weight&&f.stretch!==f.variant&&f.stretch!==f.style&&d.push(f.stretch),d.push(f.size+(f.lineHeight==null||f.lineHeight==="normal"||f.lineHeight+""=="1"?"":"/"+f.lineHeight)),d.push(f.family),d.filter(Boolean).join(" ")}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(u,q,W){q.exports=["inherit","initial","unset"]},{}],104:[function(u,q,W){q.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(u,q,W){var o,p=u("type/value/is"),x=u("type/value/ensure"),y=u("type/plain-function/ensure"),e=u("es5-ext/object/copy"),r=u("es5-ext/object/normalize-options"),t=u("es5-ext/object/map"),i=Function.prototype.bind,n=Object.defineProperty,h=Object.prototype.hasOwnProperty;o=function(s,a,l){var f,d=x(a)&&y(a.value);return delete(f=e(a)).writable,delete f.value,f.get=function(){return!l.overwriteDefinition&&h.call(this,s)?d:(a.value=i.call(d,l.resolveContext?l.resolveContext(this):this),n(this,s,a),this[s])},f},q.exports=function(s){var a=r(arguments[1]);return p(a.resolveContext)&&y(a.resolveContext),t(s,function(l,f){return o(f,l,a)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":321,"type/value/ensure":325,"type/value/is":326}],106:[function(u,q,W){var o=u("type/value/is"),p=u("type/plain-function/is"),x=u("es5-ext/object/assign"),y=u("es5-ext/object/normalize-options"),e=u("es5-ext/string/#/contains");(q.exports=function(r,t){var i,n,h,s,a;return arguments.length<2||typeof r!="string"?(s=t,t=r,r=null):s=arguments[2],o(r)?(i=e.call(r,"c"),n=e.call(r,"e"),h=e.call(r,"w")):(i=h=!0,n=!1),a={value:t,configurable:i,enumerable:n,writable:h},s?x(y(s),a):a}).gs=function(r,t,i){var n,h,s,a;return typeof r!="string"?(s=i,i=t,t=r,r=null):s=arguments[3],o(t)?p(t)?o(i)?p(i)||(s=i,i=void 0):i=void 0:(s=t,t=i=void 0):t=void 0,o(r)?(n=e.call(r,"c"),h=e.call(r,"e")):(n=!0,h=!1),a={get:t,set:i,configurable:n,enumerable:h},s?x(y(s),a):a}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":322,"type/value/is":326}],107:[function(u,q,W){(function(o,p){p(typeof W=="object"&&q!==void 0?W:o.d3=o.d3||{})})(this,function(o){function p(P,S){return P<S?-1:P>S?1:P>=S?0:NaN}function x(P){var S;return P.length===1&&(S=P,P=function(E,D){return p(S(E),D)}),{left:function(E,D,F,H){for(F==null&&(F=0),H==null&&(H=E.length);F<H;){var V=F+H>>>1;P(E[V],D)<0?F=V+1:H=V}return F},right:function(E,D,F,H){for(F==null&&(F=0),H==null&&(H=E.length);F<H;){var V=F+H>>>1;P(E[V],D)>0?H=V:F=V+1}return F}}}var y=x(p),e=y.right,r=y.left;function t(P,S){return[P,S]}function i(P){return P===null?NaN:+P}function n(P,S){var E,D,F=P.length,H=0,V=-1,Q=0,K=0;if(S==null)for(;++V<F;)isNaN(E=i(P[V]))||(K+=(D=E-Q)*(E-(Q+=D/++H)));else for(;++V<F;)isNaN(E=i(S(P[V],V,P)))||(K+=(D=E-Q)*(E-(Q+=D/++H)));if(H>1)return K/(H-1)}function h(P,S){var E=n(P,S);return E&&Math.sqrt(E)}function s(P,S){var E,D,F,H=P.length,V=-1;if(S==null){for(;++V<H;)if((E=P[V])!=null&&E>=E)for(D=F=E;++V<H;)(E=P[V])!=null&&(D>E&&(D=E),F<E&&(F=E))}else for(;++V<H;)if((E=S(P[V],V,P))!=null&&E>=E)for(D=F=E;++V<H;)(E=S(P[V],V,P))!=null&&(D>E&&(D=E),F<E&&(F=E));return[D,F]}var a=Array.prototype,l=a.slice,f=a.map;function d(P){return function(){return P}}function v(P){return P}function m(P,S,E){P=+P,S=+S,E=(F=arguments.length)<2?(S=P,P=0,1):F<3?1:+E;for(var D=-1,F=0|Math.max(0,Math.ceil((S-P)/E)),H=new Array(F);++D<F;)H[D]=P+D*E;return H}var c=Math.sqrt(50),b=Math.sqrt(10),g=Math.sqrt(2);function w(P,S,E){var D=(S-P)/Math.max(0,E),F=Math.floor(Math.log(D)/Math.LN10),H=D/Math.pow(10,F);return F>=0?(H>=c?10:H>=b?5:H>=g?2:1)*Math.pow(10,F):-Math.pow(10,-F)/(H>=c?10:H>=b?5:H>=g?2:1)}function _(P,S,E){var D=Math.abs(S-P)/Math.max(0,E),F=Math.pow(10,Math.floor(Math.log(D)/Math.LN10)),H=D/F;return H>=c?F*=10:H>=b?F*=5:H>=g&&(F*=2),S<P?-F:F}function T(P){return Math.ceil(Math.log(P.length)/Math.LN2)+1}function k(P,S,E){if(E==null&&(E=i),D=P.length){if((S=+S)<=0||D<2)return+E(P[0],0,P);if(S>=1)return+E(P[D-1],D-1,P);var D,F=(D-1)*S,H=Math.floor(F),V=+E(P[H],H,P);return V+(+E(P[H+1],H+1,P)-V)*(F-H)}}function L(P,S){var E,D,F=P.length,H=-1;if(S==null){for(;++H<F;)if((E=P[H])!=null&&E>=E)for(D=E;++H<F;)(E=P[H])!=null&&D>E&&(D=E)}else for(;++H<F;)if((E=S(P[H],H,P))!=null&&E>=E)for(D=E;++H<F;)(E=S(P[H],H,P))!=null&&D>E&&(D=E);return D}function M(P){if(!(F=P.length))return[];for(var S=-1,E=L(P,I),D=new Array(E);++S<E;)for(var F,H=-1,V=D[S]=new Array(F);++H<F;)V[H]=P[H][S];return D}function I(P){return P.length}o.bisect=e,o.bisectRight=e,o.bisectLeft=r,o.ascending=p,o.bisector=x,o.cross=function(P,S,E){var D,F,H,V,Q=P.length,K=S.length,Z=new Array(Q*K);for(E==null&&(E=t),D=H=0;D<Q;++D)for(V=P[D],F=0;F<K;++F,++H)Z[H]=E(V,S[F]);return Z},o.descending=function(P,S){return S<P?-1:S>P?1:S>=P?0:NaN},o.deviation=h,o.extent=s,o.histogram=function(){var P=v,S=s,E=T;function D(F){var H,V,Q=F.length,K=new Array(Q);for(H=0;H<Q;++H)K[H]=P(F[H],H,F);var Z=S(K),$=Z[0],re=Z[1],R=E(K,$,re);Array.isArray(R)||(R=_($,re,R),R=m(Math.ceil($/R)*R,re,R));for(var N=R.length;R[0]<=$;)R.shift(),--N;for(;R[N-1]>re;)R.pop(),--N;var U,te=new Array(N+1);for(H=0;H<=N;++H)(U=te[H]=[]).x0=H>0?R[H-1]:$,U.x1=H<N?R[H]:re;for(H=0;H<Q;++H)$<=(V=K[H])&&V<=re&&te[e(R,V,0,N)].push(F[H]);return te}return D.value=function(F){return arguments.length?(P=typeof F=="function"?F:d(F),D):P},D.domain=function(F){return arguments.length?(S=typeof F=="function"?F:d([F[0],F[1]]),D):S},D.thresholds=function(F){return arguments.length?(E=typeof F=="function"?F:Array.isArray(F)?d(l.call(F)):d(F),D):E},D},o.thresholdFreedmanDiaconis=function(P,S,E){return P=f.call(P,i).sort(p),Math.ceil((E-S)/(2*(k(P,.75)-k(P,.25))*Math.pow(P.length,-1/3)))},o.thresholdScott=function(P,S,E){return Math.ceil((E-S)/(3.5*h(P)*Math.pow(P.length,-1/3)))},o.thresholdSturges=T,o.max=function(P,S){var E,D,F=P.length,H=-1;if(S==null){for(;++H<F;)if((E=P[H])!=null&&E>=E)for(D=E;++H<F;)(E=P[H])!=null&&E>D&&(D=E)}else for(;++H<F;)if((E=S(P[H],H,P))!=null&&E>=E)for(D=E;++H<F;)(E=S(P[H],H,P))!=null&&E>D&&(D=E);return D},o.mean=function(P,S){var E,D=P.length,F=D,H=-1,V=0;if(S==null)for(;++H<D;)isNaN(E=i(P[H]))?--F:V+=E;else for(;++H<D;)isNaN(E=i(S(P[H],H,P)))?--F:V+=E;if(F)return V/F},o.median=function(P,S){var E,D=P.length,F=-1,H=[];if(S==null)for(;++F<D;)isNaN(E=i(P[F]))||H.push(E);else for(;++F<D;)isNaN(E=i(S(P[F],F,P)))||H.push(E);return k(H.sort(p),.5)},o.merge=function(P){for(var S,E,D,F=P.length,H=-1,V=0;++H<F;)V+=P[H].length;for(E=new Array(V);--F>=0;)for(S=(D=P[F]).length;--S>=0;)E[--V]=D[S];return E},o.min=L,o.pairs=function(P,S){S==null&&(S=t);for(var E=0,D=P.length-1,F=P[0],H=new Array(D<0?0:D);E<D;)H[E]=S(F,F=P[++E]);return H},o.permute=function(P,S){for(var E=S.length,D=new Array(E);E--;)D[E]=P[S[E]];return D},o.quantile=k,o.range=m,o.scan=function(P,S){if(E=P.length){var E,D,F=0,H=0,V=P[H];for(S==null&&(S=p);++F<E;)(S(D=P[F],V)<0||S(V,V)!==0)&&(V=D,H=F);return S(V,V)===0?H:void 0}},o.shuffle=function(P,S,E){for(var D,F,H=(E==null?P.length:E)-(S=S==null?0:+S);H;)F=Math.random()*H--|0,D=P[H+S],P[H+S]=P[F+S],P[F+S]=D;return P},o.sum=function(P,S){var E,D=P.length,F=-1,H=0;if(S==null)for(;++F<D;)(E=+P[F])&&(H+=E);else for(;++F<D;)(E=+S(P[F],F,P))&&(H+=E);return H},o.ticks=function(P,S,E){var D,F,H,V,Q=-1;if(E=+E,(P=+P)==(S=+S)&&E>0)return[P];if((D=S<P)&&(F=P,P=S,S=F),(V=w(P,S,E))===0||!isFinite(V))return[];if(V>0)for(P=Math.ceil(P/V),S=Math.floor(S/V),H=new Array(F=Math.ceil(S-P+1));++Q<F;)H[Q]=(P+Q)*V;else for(P=Math.floor(P*V),S=Math.ceil(S*V),H=new Array(F=Math.ceil(P-S+1));++Q<F;)H[Q]=(P-Q)/V;return D&&H.reverse(),H},o.tickIncrement=w,o.tickStep=_,o.transpose=M,o.variance=n,o.zip=function(){return M(arguments)},Object.defineProperty(o,"__esModule",{value:!0})})},{}],108:[function(u,q,W){(function(o,p){p(typeof W=="object"&&q!==void 0?W:o.d3=o.d3||{})})(this,function(o){function p(){}function x(s,a){var l=new p;if(s instanceof p)s.each(function(c,b){l.set(b,c)});else if(Array.isArray(s)){var f,d=-1,v=s.length;if(a==null)for(;++d<v;)l.set(d,s[d]);else for(;++d<v;)l.set(a(f=s[d],d,s),f)}else if(s)for(var m in s)l.set(m,s[m]);return l}function y(){return{}}function e(s,a,l){s[a]=l}function r(){return x()}function t(s,a,l){s.set(a,l)}function i(){}p.prototype=x.prototype={constructor:p,has:function(s){return"$"+s in this},get:function(s){return this["$"+s]},set:function(s,a){return this["$"+s]=a,this},remove:function(s){var a="$"+s;return a in this&&delete this[a]},clear:function(){for(var s in this)s[0]==="$"&&delete this[s]},keys:function(){var s=[];for(var a in this)a[0]==="$"&&s.push(a.slice(1));return s},values:function(){var s=[];for(var a in this)a[0]==="$"&&s.push(this[a]);return s},entries:function(){var s=[];for(var a in this)a[0]==="$"&&s.push({key:a.slice(1),value:this[a]});return s},size:function(){var s=0;for(var a in this)a[0]==="$"&&++s;return s},empty:function(){for(var s in this)if(s[0]==="$")return!1;return!0},each:function(s){for(var a in this)a[0]==="$"&&s(this[a],a.slice(1),this)}};var n=x.prototype;function h(s,a){var l=new i;if(s instanceof i)s.each(function(v){l.add(v)});else if(s){var f=-1,d=s.length;if(a==null)for(;++f<d;)l.add(s[f]);else for(;++f<d;)l.add(a(s[f],f,s))}return l}i.prototype=h.prototype={constructor:i,has:n.has,add:function(s){return this["$"+(s+="")]=s,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each},o.nest=function(){var s,a,l,f=[],d=[];function v(m,c,b,g){if(c>=f.length)return s!=null&&m.sort(s),a!=null?a(m):m;for(var w,_,T,k=-1,L=m.length,M=f[c++],I=x(),P=b();++k<L;)(T=I.get(w=M(_=m[k])+""))?T.push(_):I.set(w,[_]);return I.each(function(S,E){g(P,E,v(S,c,b,g))}),P}return l={object:function(m){return v(m,0,y,e)},map:function(m){return v(m,0,r,t)},entries:function(m){return function c(b,g){if(++g>f.length)return b;var w,_=d[g-1];return a!=null&&g>=f.length?w=b.entries():(w=[],b.each(function(T,k){w.push({key:k,values:c(T,g)})})),_!=null?w.sort(function(T,k){return _(T.key,k.key)}):w}(v(m,0,r,t),0)},key:function(m){return f.push(m),l},sortKeys:function(m){return d[f.length-1]=m,l},sortValues:function(m){return s=m,l},rollup:function(m){return a=m,l}}},o.set=h,o.map=x,o.keys=function(s){var a=[];for(var l in s)a.push(l);return a},o.values=function(s){var a=[];for(var l in s)a.push(s[l]);return a},o.entries=function(s){var a=[];for(var l in s)a.push({key:l,value:s[l]});return a},Object.defineProperty(o,"__esModule",{value:!0})})},{}],109:[function(u,q,W){(function(o,p){p(typeof W=="object"&&q!==void 0?W:(o=o||self).d3=o.d3||{})})(this,function(o){function p(fe,me,ke){fe.prototype=me.prototype=ke,ke.constructor=fe}function x(fe,me){var ke=Object.create(fe.prototype);for(var Te in me)ke[Te]=me[Te];return ke}function y(){}var e="\\s*([+-]?\\d+)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",i=/^#([0-9a-f]{3,8})$/,n=new RegExp("^rgb\\("+[e,e,e]+"\\)$"),h=new RegExp("^rgb\\("+[t,t,t]+"\\)$"),s=new RegExp("^rgba\\("+[e,e,e,r]+"\\)$"),a=new RegExp("^rgba\\("+[t,t,t,r]+"\\)$"),l=new RegExp("^hsl\\("+[r,t,t]+"\\)$"),f=new RegExp("^hsla\\("+[r,t,t,r]+"\\)$"),d={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function v(){return this.rgb().formatHex()}function m(){return this.rgb().formatRgb()}function c(fe){var me,ke;return fe=(fe+"").trim().toLowerCase(),(me=i.exec(fe))?(ke=me[1].length,me=parseInt(me[1],16),ke===6?b(me):ke===3?new T(me>>8&15|me>>4&240,me>>4&15|240&me,(15&me)<<4|15&me,1):ke===8?g(me>>24&255,me>>16&255,me>>8&255,(255&me)/255):ke===4?g(me>>12&15|me>>8&240,me>>8&15|me>>4&240,me>>4&15|240&me,((15&me)<<4|15&me)/255):null):(me=n.exec(fe))?new T(me[1],me[2],me[3],1):(me=h.exec(fe))?new T(255*me[1]/100,255*me[2]/100,255*me[3]/100,1):(me=s.exec(fe))?g(me[1],me[2],me[3],me[4]):(me=a.exec(fe))?g(255*me[1]/100,255*me[2]/100,255*me[3]/100,me[4]):(me=l.exec(fe))?I(me[1],me[2]/100,me[3]/100,1):(me=f.exec(fe))?I(me[1],me[2]/100,me[3]/100,me[4]):d.hasOwnProperty(fe)?b(d[fe]):fe==="transparent"?new T(NaN,NaN,NaN,0):null}function b(fe){return new T(fe>>16&255,fe>>8&255,255&fe,1)}function g(fe,me,ke,Te){return Te<=0&&(fe=me=ke=NaN),new T(fe,me,ke,Te)}function w(fe){return fe instanceof y||(fe=c(fe)),fe?new T((fe=fe.rgb()).r,fe.g,fe.b,fe.opacity):new T}function _(fe,me,ke,Te){return arguments.length===1?w(fe):new T(fe,me,ke,Te==null?1:Te)}function T(fe,me,ke,Te){this.r=+fe,this.g=+me,this.b=+ke,this.opacity=+Te}function k(){return"#"+M(this.r)+M(this.g)+M(this.b)}function L(){var fe=this.opacity;return((fe=isNaN(fe)?1:Math.max(0,Math.min(1,fe)))===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(fe===1?")":", "+fe+")")}function M(fe){return((fe=Math.max(0,Math.min(255,Math.round(fe)||0)))<16?"0":"")+fe.toString(16)}function I(fe,me,ke,Te){return Te<=0?fe=me=ke=NaN:ke<=0||ke>=1?fe=me=NaN:me<=0&&(fe=NaN),new E(fe,me,ke,Te)}function P(fe){if(fe instanceof E)return new E(fe.h,fe.s,fe.l,fe.opacity);if(fe instanceof y||(fe=c(fe)),!fe)return new E;if(fe instanceof E)return fe;var me=(fe=fe.rgb()).r/255,ke=fe.g/255,Te=fe.b/255,Me=Math.min(me,ke,Te),Oe=Math.max(me,ke,Te),Fe=NaN,qe=Oe-Me,et=(Oe+Me)/2;return qe?(Fe=me===Oe?(ke-Te)/qe+6*(ke<Te):ke===Oe?(Te-me)/qe+2:(me-ke)/qe+4,qe/=et<.5?Oe+Me:2-Oe-Me,Fe*=60):qe=et>0&&et<1?0:Fe,new E(Fe,qe,et,fe.opacity)}function S(fe,me,ke,Te){return arguments.length===1?P(fe):new E(fe,me,ke,Te==null?1:Te)}function E(fe,me,ke,Te){this.h=+fe,this.s=+me,this.l=+ke,this.opacity=+Te}function D(fe,me,ke){return 255*(fe<60?me+(ke-me)*fe/60:fe<180?ke:fe<240?me+(ke-me)*(240-fe)/60:me)}p(y,c,{copy:function(fe){return Object.assign(new this.constructor,this,fe)},displayable:function(){return this.rgb().displayable()},hex:v,formatHex:v,formatHsl:function(){return P(this).formatHsl()},formatRgb:m,toString:m}),p(T,_,x(y,{brighter:function(fe){return fe=fe==null?1/.7:Math.pow(1/.7,fe),new T(this.r*fe,this.g*fe,this.b*fe,this.opacity)},darker:function(fe){return fe=fe==null?.7:Math.pow(.7,fe),new T(this.r*fe,this.g*fe,this.b*fe,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:k,formatHex:k,formatRgb:L,toString:L})),p(E,S,x(y,{brighter:function(fe){return fe=fe==null?1/.7:Math.pow(1/.7,fe),new E(this.h,this.s,this.l*fe,this.opacity)},darker:function(fe){return fe=fe==null?.7:Math.pow(.7,fe),new E(this.h,this.s,this.l*fe,this.opacity)},rgb:function(){var fe=this.h%360+360*(this.h<0),me=isNaN(fe)||isNaN(this.s)?0:this.s,ke=this.l,Te=ke+(ke<.5?ke:1-ke)*me,Me=2*ke-Te;return new T(D(fe>=240?fe-240:fe+120,Me,Te),D(fe,Me,Te),D(fe<120?fe+240:fe-120,Me,Te),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var fe=this.opacity;return((fe=isNaN(fe)?1:Math.max(0,Math.min(1,fe)))===1?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(fe===1?")":", "+fe+")")}}));var F=Math.PI/180,H=180/Math.PI,V=6/29,Q=3*V*V;function K(fe){if(fe instanceof $)return new $(fe.l,fe.a,fe.b,fe.opacity);if(fe instanceof Y)return J(fe);fe instanceof T||(fe=w(fe));var me,ke,Te=U(fe.r),Me=U(fe.g),Oe=U(fe.b),Fe=re((.2225045*Te+.7168786*Me+.0606169*Oe)/1);return Te===Me&&Me===Oe?me=ke=Fe:(me=re((.4360747*Te+.3850649*Me+.1430804*Oe)/.96422),ke=re((.0139322*Te+.0971045*Me+.7141733*Oe)/.82521)),new $(116*Fe-16,500*(me-Fe),200*(Fe-ke),fe.opacity)}function Z(fe,me,ke,Te){return arguments.length===1?K(fe):new $(fe,me,ke,Te==null?1:Te)}function $(fe,me,ke,Te){this.l=+fe,this.a=+me,this.b=+ke,this.opacity=+Te}function re(fe){return fe>.008856451679035631?Math.pow(fe,1/3):fe/Q+4/29}function R(fe){return fe>V?fe*fe*fe:Q*(fe-4/29)}function N(fe){return 255*(fe<=.0031308?12.92*fe:1.055*Math.pow(fe,1/2.4)-.055)}function U(fe){return(fe/=255)<=.04045?fe/12.92:Math.pow((fe+.055)/1.055,2.4)}function te(fe){if(fe instanceof Y)return new Y(fe.h,fe.c,fe.l,fe.opacity);if(fe instanceof $||(fe=K(fe)),fe.a===0&&fe.b===0)return new Y(NaN,0<fe.l&&fe.l<100?0:NaN,fe.l,fe.opacity);var me=Math.atan2(fe.b,fe.a)*H;return new Y(me<0?me+360:me,Math.sqrt(fe.a*fe.a+fe.b*fe.b),fe.l,fe.opacity)}function j(fe,me,ke,Te){return arguments.length===1?te(fe):new Y(fe,me,ke,Te==null?1:Te)}function Y(fe,me,ke,Te){this.h=+fe,this.c=+me,this.l=+ke,this.opacity=+Te}function J(fe){if(isNaN(fe.h))return new $(fe.l,0,0,fe.opacity);var me=fe.h*F;return new $(fe.l,Math.cos(me)*fe.c,Math.sin(me)*fe.c,fe.opacity)}p($,Z,x(y,{brighter:function(fe){return new $(this.l+18*(fe==null?1:fe),this.a,this.b,this.opacity)},darker:function(fe){return new $(this.l-18*(fe==null?1:fe),this.a,this.b,this.opacity)},rgb:function(){var fe=(this.l+16)/116,me=isNaN(this.a)?fe:fe+this.a/500,ke=isNaN(this.b)?fe:fe-this.b/200;return new T(N(3.1338561*(me=.96422*R(me))-1.6168667*(fe=1*R(fe))-.4906146*(ke=.82521*R(ke))),N(-.9787684*me+1.9161415*fe+.033454*ke),N(.0719453*me-.2289914*fe+1.4052427*ke),this.opacity)}})),p(Y,j,x(y,{brighter:function(fe){return new Y(this.h,this.c,this.l+18*(fe==null?1:fe),this.opacity)},darker:function(fe){return new Y(this.h,this.c,this.l-18*(fe==null?1:fe),this.opacity)},rgb:function(){return J(this).rgb()}}));var ee=-.14861,ne=1.78277,se=-.29227,oe=-.90649,he=1.97294,le=he*oe,de=he*ne,xe=ne*se-oe*ee;function we(fe){if(fe instanceof Ae)return new Ae(fe.h,fe.s,fe.l,fe.opacity);fe instanceof T||(fe=w(fe));var me=fe.r/255,ke=fe.g/255,Te=fe.b/255,Me=(xe*Te+le*me-de*ke)/(xe+le-de),Oe=Te-Me,Fe=(he*(ke-Me)-se*Oe)/oe,qe=Math.sqrt(Fe*Fe+Oe*Oe)/(he*Me*(1-Me)),et=qe?Math.atan2(Fe,Oe)*H-120:NaN;return new Ae(et<0?et+360:et,qe,Me,fe.opacity)}function be(fe,me,ke,Te){return arguments.length===1?we(fe):new Ae(fe,me,ke,Te==null?1:Te)}function Ae(fe,me,ke,Te){this.h=+fe,this.s=+me,this.l=+ke,this.opacity=+Te}p(Ae,be,x(y,{brighter:function(fe){return fe=fe==null?1/.7:Math.pow(1/.7,fe),new Ae(this.h,this.s,this.l*fe,this.opacity)},darker:function(fe){return fe=fe==null?.7:Math.pow(.7,fe),new Ae(this.h,this.s,this.l*fe,this.opacity)},rgb:function(){var fe=isNaN(this.h)?0:(this.h+120)*F,me=+this.l,ke=isNaN(this.s)?0:this.s*me*(1-me),Te=Math.cos(fe),Me=Math.sin(fe);return new T(255*(me+ke*(ee*Te+ne*Me)),255*(me+ke*(se*Te+oe*Me)),255*(me+ke*(he*Te)),this.opacity)}})),o.color=c,o.cubehelix=be,o.gray=function(fe,me){return new $(fe,0,0,me==null?1:me)},o.hcl=j,o.hsl=S,o.lab=Z,o.lch=function(fe,me,ke,Te){return arguments.length===1?te(fe):new Y(ke,me,fe,Te==null?1:Te)},o.rgb=_,Object.defineProperty(o,"__esModule",{value:!0})})},{}],110:[function(u,q,W){(function(o,p){p(typeof W=="object"&&q!==void 0?W:(o=o||self).d3=o.d3||{})})(this,function(o){var p={value:function(){}};function x(){for(var i,n=0,h=arguments.length,s={};n<h;++n){if(!(i=arguments[n]+"")||i in s||/[\s.]/.test(i))throw new Error("illegal type: "+i);s[i]=[]}return new y(s)}function y(i){this._=i}function e(i,n){return i.trim().split(/^|\s+/).map(function(h){var s="",a=h.indexOf(".");if(a>=0&&(s=h.slice(a+1),h=h.slice(0,a)),h&&!n.hasOwnProperty(h))throw new Error("unknown type: "+h);return{type:h,name:s}})}function r(i,n){for(var h,s=0,a=i.length;s<a;++s)if((h=i[s]).name===n)return h.value}function t(i,n,h){for(var s=0,a=i.length;s<a;++s)if(i[s].name===n){i[s]=p,i=i.slice(0,s).concat(i.slice(s+1));break}return h!=null&&i.push({name:n,value:h}),i}y.prototype=x.prototype={constructor:y,on:function(i,n){var h,s=this._,a=e(i+"",s),l=-1,f=a.length;if(!(arguments.length<2)){if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++l<f;)if(h=(i=a[l]).type)s[h]=t(s[h],i.name,n);else if(n==null)for(h in s)s[h]=t(s[h],i.name,null);return this}for(;++l<f;)if((h=(i=a[l]).type)&&(h=r(s[h],i.name)))return h},copy:function(){var i={},n=this._;for(var h in n)i[h]=n[h].slice();return new y(i)},call:function(i,n){if((h=arguments.length-2)>0)for(var h,s,a=new Array(h),l=0;l<h;++l)a[l]=arguments[l+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(l=0,h=(s=this._[i]).length;l<h;++l)s[l].value.apply(n,a)},apply:function(i,n,h){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var s=this._[i],a=0,l=s.length;a<l;++a)s[a].value.apply(n,h)}},o.dispatch=x,Object.defineProperty(o,"__esModule",{value:!0})})},{}],111:[function(u,q,W){(function(o,p){typeof W=="object"&&q!==void 0?p(W,u("d3-quadtree"),u("d3-collection"),u("d3-dispatch"),u("d3-timer")):p(o.d3=o.d3||{},o.d3,o.d3,o.d3,o.d3)})(this,function(o,p,x,y,e){function r(d){return function(){return d}}function t(){return 1e-6*(Math.random()-.5)}function i(d){return d.x+d.vx}function n(d){return d.y+d.vy}function h(d){return d.index}function s(d,v){var m=d.get(v);if(!m)throw new Error("missing: "+v);return m}function a(d){return d.x}function l(d){return d.y}var f=Math.PI*(3-Math.sqrt(5));o.forceCenter=function(d,v){var m;function c(){var b,g,w=m.length,_=0,T=0;for(b=0;b<w;++b)_+=(g=m[b]).x,T+=g.y;for(_=_/w-d,T=T/w-v,b=0;b<w;++b)(g=m[b]).x-=_,g.y-=T}return d==null&&(d=0),v==null&&(v=0),c.initialize=function(b){m=b},c.x=function(b){return arguments.length?(d=+b,c):d},c.y=function(b){return arguments.length?(v=+b,c):v},c},o.forceCollide=function(d){var v,m,c=1,b=1;function g(){for(var T,k,L,M,I,P,S,E=v.length,D=0;D<b;++D)for(k=p.quadtree(v,i,n).visitAfter(w),T=0;T<E;++T)L=v[T],P=m[L.index],S=P*P,M=L.x+L.vx,I=L.y+L.vy,k.visit(F);function F(H,V,Q,K,Z){var $=H.data,re=H.r,R=P+re;if(!$)return V>M+R||K<M-R||Q>I+R||Z<I-R;if($.index>L.index){var N=M-$.x-$.vx,U=I-$.y-$.vy,te=N*N+U*U;te<R*R&&(N===0&&(te+=(N=t())*N),U===0&&(te+=(U=t())*U),te=(R-(te=Math.sqrt(te)))/te*c,L.vx+=(N*=te)*(R=(re*=re)/(S+re)),L.vy+=(U*=te)*R,$.vx-=N*(R=1-R),$.vy-=U*R)}}}function w(T){if(T.data)return T.r=m[T.data.index];for(var k=T.r=0;k<4;++k)T[k]&&T[k].r>T.r&&(T.r=T[k].r)}function _(){if(v){var T,k,L=v.length;for(m=new Array(L),T=0;T<L;++T)k=v[T],m[k.index]=+d(k,T,v)}}return typeof d!="function"&&(d=r(d==null?1:+d)),g.initialize=function(T){v=T,_()},g.iterations=function(T){return arguments.length?(b=+T,g):b},g.strength=function(T){return arguments.length?(c=+T,g):c},g.radius=function(T){return arguments.length?(d=typeof T=="function"?T:r(+T),_(),g):d},g},o.forceLink=function(d){var v,m,c,b,g,w=h,_=function(S){return 1/Math.min(b[S.source.index],b[S.target.index])},T=r(30),k=1;function L(S){for(var E=0,D=d.length;E<k;++E)for(var F,H,V,Q,K,Z,$,re=0;re<D;++re)H=(F=d[re]).source,Q=(V=F.target).x+V.vx-H.x-H.vx||t(),K=V.y+V.vy-H.y-H.vy||t(),Q*=Z=((Z=Math.sqrt(Q*Q+K*K))-m[re])/Z*S*v[re],K*=Z,V.vx-=Q*($=g[re]),V.vy-=K*$,H.vx+=Q*($=1-$),H.vy+=K*$}function M(){if(c){var S,E,D=c.length,F=d.length,H=x.map(c,w);for(S=0,b=new Array(D);S<F;++S)(E=d[S]).index=S,typeof E.source!="object"&&(E.source=s(H,E.source)),typeof E.target!="object"&&(E.target=s(H,E.target)),b[E.source.index]=(b[E.source.index]||0)+1,b[E.target.index]=(b[E.target.index]||0)+1;for(S=0,g=new Array(F);S<F;++S)E=d[S],g[S]=b[E.source.index]/(b[E.source.index]+b[E.target.index]);v=new Array(F),I(),m=new Array(F),P()}}function I(){if(c)for(var S=0,E=d.length;S<E;++S)v[S]=+_(d[S],S,d)}function P(){if(c)for(var S=0,E=d.length;S<E;++S)m[S]=+T(d[S],S,d)}return d==null&&(d=[]),L.initialize=function(S){c=S,M()},L.links=function(S){return arguments.length?(d=S,M(),L):d},L.id=function(S){return arguments.length?(w=S,L):w},L.iterations=function(S){return arguments.length?(k=+S,L):k},L.strength=function(S){return arguments.length?(_=typeof S=="function"?S:r(+S),I(),L):_},L.distance=function(S){return arguments.length?(T=typeof S=="function"?S:r(+S),P(),L):T},L},o.forceManyBody=function(){var d,v,m,c,b=r(-30),g=1,w=1/0,_=.81;function T(I){var P,S=d.length,E=p.quadtree(d,a,l).visitAfter(L);for(m=I,P=0;P<S;++P)v=d[P],E.visit(M)}function k(){if(d){var I,P,S=d.length;for(c=new Array(S),I=0;I<S;++I)P=d[I],c[P.index]=+b(P,I,d)}}function L(I){var P,S,E,D,F,H=0,V=0;if(I.length){for(E=D=F=0;F<4;++F)(P=I[F])&&(S=Math.abs(P.value))&&(H+=P.value,V+=S,E+=S*P.x,D+=S*P.y);I.x=E/V,I.y=D/V}else{(P=I).x=P.data.x,P.y=P.data.y;do H+=c[P.data.index];while(P=P.next)}I.value=H}function M(I,P,S,E){if(!I.value)return!0;var D=I.x-v.x,F=I.y-v.y,H=E-P,V=D*D+F*F;if(H*H/_<V)return V<w&&(D===0&&(V+=(D=t())*D),F===0&&(V+=(F=t())*F),V<g&&(V=Math.sqrt(g*V)),v.vx+=D*I.value*m/V,v.vy+=F*I.value*m/V),!0;if(!(I.length||V>=w)){(I.data!==v||I.next)&&(D===0&&(V+=(D=t())*D),F===0&&(V+=(F=t())*F),V<g&&(V=Math.sqrt(g*V)));do I.data!==v&&(H=c[I.data.index]*m/V,v.vx+=D*H,v.vy+=F*H);while(I=I.next)}}return T.initialize=function(I){d=I,k()},T.strength=function(I){return arguments.length?(b=typeof I=="function"?I:r(+I),k(),T):b},T.distanceMin=function(I){return arguments.length?(g=I*I,T):Math.sqrt(g)},T.distanceMax=function(I){return arguments.length?(w=I*I,T):Math.sqrt(w)},T.theta=function(I){return arguments.length?(_=I*I,T):Math.sqrt(_)},T},o.forceRadial=function(d,v,m){var c,b,g,w=r(.1);function _(k){for(var L=0,M=c.length;L<M;++L){var I=c[L],P=I.x-v||1e-6,S=I.y-m||1e-6,E=Math.sqrt(P*P+S*S),D=(g[L]-E)*b[L]*k/E;I.vx+=P*D,I.vy+=S*D}}function T(){if(c){var k,L=c.length;for(b=new Array(L),g=new Array(L),k=0;k<L;++k)g[k]=+d(c[k],k,c),b[k]=isNaN(g[k])?0:+w(c[k],k,c)}}return typeof d!="function"&&(d=r(+d)),v==null&&(v=0),m==null&&(m=0),_.initialize=function(k){c=k,T()},_.strength=function(k){return arguments.length?(w=typeof k=="function"?k:r(+k),T(),_):w},_.radius=function(k){return arguments.length?(d=typeof k=="function"?k:r(+k),T(),_):d},_.x=function(k){return arguments.length?(v=+k,_):v},_.y=function(k){return arguments.length?(m=+k,_):m},_},o.forceSimulation=function(d){var v,m=1,c=.001,b=1-Math.pow(c,1/300),g=0,w=.6,_=x.map(),T=e.timer(L),k=y.dispatch("tick","end");function L(){M(),k.call("tick",v),m<c&&(T.stop(),k.call("end",v))}function M(S){var E,D,F=d.length;S===void 0&&(S=1);for(var H=0;H<S;++H)for(m+=(g-m)*b,_.each(function(V){V(m)}),E=0;E<F;++E)(D=d[E]).fx==null?D.x+=D.vx*=w:(D.x=D.fx,D.vx=0),D.fy==null?D.y+=D.vy*=w:(D.y=D.fy,D.vy=0);return v}function I(){for(var S,E=0,D=d.length;E<D;++E){if((S=d[E]).index=E,S.fx!=null&&(S.x=S.fx),S.fy!=null&&(S.y=S.fy),isNaN(S.x)||isNaN(S.y)){var F=10*Math.sqrt(E),H=E*f;S.x=F*Math.cos(H),S.y=F*Math.sin(H)}(isNaN(S.vx)||isNaN(S.vy))&&(S.vx=S.vy=0)}}function P(S){return S.initialize&&S.initialize(d),S}return d==null&&(d=[]),I(),v={tick:M,restart:function(){return T.restart(L),v},stop:function(){return T.stop(),v},nodes:function(S){return arguments.length?(d=S,I(),_.each(P),v):d},alpha:function(S){return arguments.length?(m=+S,v):m},alphaMin:function(S){return arguments.length?(c=+S,v):c},alphaDecay:function(S){return arguments.length?(b=+S,v):+b},alphaTarget:function(S){return arguments.length?(g=+S,v):g},velocityDecay:function(S){return arguments.length?(w=1-S,v):1-w},force:function(S,E){return arguments.length>1?(E==null?_.remove(S):_.set(S,P(E)),v):_.get(S)},find:function(S,E,D){var F,H,V,Q,K,Z=0,$=d.length;for(D==null?D=1/0:D*=D,Z=0;Z<$;++Z)(V=(F=S-(Q=d[Z]).x)*F+(H=E-Q.y)*H)<D&&(K=Q,D=V);return K},on:function(S,E){return arguments.length>1?(k.on(S,E),v):k.on(S)}}},o.forceX=function(d){var v,m,c,b=r(.1);function g(_){for(var T,k=0,L=v.length;k<L;++k)(T=v[k]).vx+=(c[k]-T.x)*m[k]*_}function w(){if(v){var _,T=v.length;for(m=new Array(T),c=new Array(T),_=0;_<T;++_)m[_]=isNaN(c[_]=+d(v[_],_,v))?0:+b(v[_],_,v)}}return typeof d!="function"&&(d=r(d==null?0:+d)),g.initialize=function(_){v=_,w()},g.strength=function(_){return arguments.length?(b=typeof _=="function"?_:r(+_),w(),g):b},g.x=function(_){return arguments.length?(d=typeof _=="function"?_:r(+_),w(),g):d},g},o.forceY=function(d){var v,m,c,b=r(.1);function g(_){for(var T,k=0,L=v.length;k<L;++k)(T=v[k]).vy+=(c[k]-T.y)*m[k]*_}function w(){if(v){var _,T=v.length;for(m=new Array(T),c=new Array(T),_=0;_<T;++_)m[_]=isNaN(c[_]=+d(v[_],_,v))?0:+b(v[_],_,v)}}return typeof d!="function"&&(d=r(d==null?0:+d)),g.initialize=function(_){v=_,w()},g.strength=function(_){return arguments.length?(b=typeof _=="function"?_:r(+_),w(),g):b},g.y=function(_){return arguments.length?(d=typeof _=="function"?_:r(+_),w(),g):d},g},Object.defineProperty(o,"__esModule",{value:!0})})},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(u,q,W){(function(o,p){p(typeof W=="object"&&q!==void 0?W:(o=typeof globalThis!="undefined"?globalThis:o||self).d3=o.d3||{})})(this,function(o){function p(v,m){if((c=(v=m?v.toExponential(m-1):v.toExponential()).indexOf("e"))<0)return null;var c,b=v.slice(0,c);return[b.length>1?b[0]+b.slice(2):b,+v.slice(c+1)]}function x(v){return(v=p(Math.abs(v)))?v[1]:NaN}var y,e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function r(v){if(!(m=e.exec(v)))throw new Error("invalid format: "+v);var m;return new t({fill:m[1],align:m[2],sign:m[3],symbol:m[4],zero:m[5],width:m[6],comma:m[7],precision:m[8]&&m[8].slice(1),trim:m[9],type:m[10]})}function t(v){this.fill=v.fill===void 0?" ":v.fill+"",this.align=v.align===void 0?">":v.align+"",this.sign=v.sign===void 0?"-":v.sign+"",this.symbol=v.symbol===void 0?"":v.symbol+"",this.zero=!!v.zero,this.width=v.width===void 0?void 0:+v.width,this.comma=!!v.comma,this.precision=v.precision===void 0?void 0:+v.precision,this.trim=!!v.trim,this.type=v.type===void 0?"":v.type+""}function i(v,m){var c=p(v,m);if(!c)return v+"";var b=c[0],g=c[1];return g<0?"0."+new Array(-g).join("0")+b:b.length>g+1?b.slice(0,g+1)+"."+b.slice(g+1):b+new Array(g-b.length+2).join("0")}r.prototype=t.prototype,t.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var n={"%":function(v,m){return(100*v).toFixed(m)},b:function(v){return Math.round(v).toString(2)},c:function(v){return v+""},d:function(v){return Math.abs(v=Math.round(v))>=1e21?v.toLocaleString("en").replace(/,/g,""):v.toString(10)},e:function(v,m){return v.toExponential(m)},f:function(v,m){return v.toFixed(m)},g:function(v,m){return v.toPrecision(m)},o:function(v){return Math.round(v).toString(8)},p:function(v,m){return i(100*v,m)},r:i,s:function(v,m){var c=p(v,m);if(!c)return v+"";var b=c[0],g=c[1],w=g-(y=3*Math.max(-8,Math.min(8,Math.floor(g/3))))+1,_=b.length;return w===_?b:w>_?b+new Array(w-_+1).join("0"):w>0?b.slice(0,w)+"."+b.slice(w):"0."+new Array(1-w).join("0")+p(v,Math.max(0,m+w-1))[0]},X:function(v){return Math.round(v).toString(16).toUpperCase()},x:function(v){return Math.round(v).toString(16)}};function h(v){return v}var s,a=Array.prototype.map,l=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function f(v){var m,c,b=v.grouping===void 0||v.thousands===void 0?h:(m=a.call(v.grouping,Number),c=v.thousands+"",function(P,S){for(var E=P.length,D=[],F=0,H=m[0],V=0;E>0&&H>0&&(V+H+1>S&&(H=Math.max(1,S-V)),D.push(P.substring(E-=H,E+H)),!((V+=H+1)>S));)H=m[F=(F+1)%m.length];return D.reverse().join(c)}),g=v.currency===void 0?"":v.currency[0]+"",w=v.currency===void 0?"":v.currency[1]+"",_=v.decimal===void 0?".":v.decimal+"",T=v.numerals===void 0?h:function(P){return function(S){return S.replace(/[0-9]/g,function(E){return P[+E]})}}(a.call(v.numerals,String)),k=v.percent===void 0?"%":v.percent+"",L=v.minus===void 0?"-":v.minus+"",M=v.nan===void 0?"NaN":v.nan+"";function I(P){var S=(P=r(P)).fill,E=P.align,D=P.sign,F=P.symbol,H=P.zero,V=P.width,Q=P.comma,K=P.precision,Z=P.trim,$=P.type;$==="n"?(Q=!0,$="g"):n[$]||(K===void 0&&(K=12),Z=!0,$="g"),(H||S==="0"&&E==="=")&&(H=!0,S="0",E="=");var re=F==="$"?g:F==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",R=F==="$"?w:/[%p]/.test($)?k:"",N=n[$],U=/[defgprs%]/.test($);function te(j){var Y,J,ee,ne=re,se=R;if($==="c")se=N(j)+se,j="";else{var oe=(j=+j)<0||1/j<0;if(j=isNaN(j)?M:N(Math.abs(j),K),Z&&(j=function(de){e:for(var xe,we=de.length,be=1,Ae=-1;be<we;++be)switch(de[be]){case".":Ae=xe=be;break;case"0":Ae===0&&(Ae=be),xe=be;break;default:if(!+de[be])break e;Ae>0&&(Ae=0)}return Ae>0?de.slice(0,Ae)+de.slice(xe+1):de}(j)),oe&&+j==0&&D!=="+"&&(oe=!1),ne=(oe?D==="("?D:L:D==="-"||D==="("?"":D)+ne,se=($==="s"?l[8+y/3]:"")+se+(oe&&D==="("?")":""),U){for(Y=-1,J=j.length;++Y<J;)if(48>(ee=j.charCodeAt(Y))||ee>57){se=(ee===46?_+j.slice(Y+1):j.slice(Y))+se,j=j.slice(0,Y);break}}}Q&&!H&&(j=b(j,1/0));var he=ne.length+j.length+se.length,le=he<V?new Array(V-he+1).join(S):"";switch(Q&&H&&(j=b(le+j,le.length?V-se.length:1/0),le=""),E){case"<":j=ne+j+se+le;break;case"=":j=ne+le+j+se;break;case"^":j=le.slice(0,he=le.length>>1)+ne+j+se+le.slice(he);break;default:j=le+ne+j+se}return T(j)}return K=K===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,K)):Math.max(0,Math.min(20,K)),te.toString=function(){return P+""},te}return{format:I,formatPrefix:function(P,S){var E=I(((P=r(P)).type="f",P)),D=3*Math.max(-8,Math.min(8,Math.floor(x(S)/3))),F=Math.pow(10,-D),H=l[8+D/3];return function(V){return E(F*V)+H}}}}function d(v){return s=f(v),o.format=s.format,o.formatPrefix=s.formatPrefix,s}d({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),o.FormatSpecifier=t,o.formatDefaultLocale=d,o.formatLocale=f,o.formatSpecifier=r,o.precisionFixed=function(v){return Math.max(0,-x(Math.abs(v)))},o.precisionPrefix=function(v,m){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(x(m)/3)))-x(Math.abs(v)))},o.precisionRound=function(v,m){return v=Math.abs(v),m=Math.abs(m)-v,Math.max(0,x(m)-x(v))+1},Object.defineProperty(o,"__esModule",{value:!0})})},{}],113:[function(u,q,W){(function(o,p){typeof W=="object"&&q!==void 0?p(W,u("d3-geo"),u("d3-array")):p(o.d3=o.d3||{},o.d3,o.d3)})(this,function(o,p,x){var y=Math.abs,e=Math.atan,r=Math.atan2,t=Math.cos,i=Math.exp,n=Math.floor,h=Math.log,s=Math.max,a=Math.min,l=Math.pow,f=Math.round,d=Math.sign||function(je){return je>0?1:je<0?-1:0},v=Math.sin,m=Math.tan,c=1e-6,b=Math.PI,g=b/2,w=b/4,_=Math.SQRT1_2,T=E(2),k=E(b),L=2*b,M=180/b,I=b/180;function P(je){return je>1?g:je<-1?-g:Math.asin(je)}function S(je){return je>1?0:je<-1?b:Math.acos(je)}function E(je){return je>0?Math.sqrt(je):0}function D(je){return(i(je)-i(-je))/2}function F(je){return(i(je)+i(-je))/2}function H(je){var Ge=m(je/2),tt=2*h(t(je/2))/(Ge*Ge);function ot(yt,gt){var Mt=t(yt),$t=t(gt),er=v(gt),Xt=$t*Mt,ir=-((1-Xt?h((1+Xt)/2)/(1-Xt):-.5)+tt/(1+Xt));return[ir*$t*v(yt),ir*er]}return ot.invert=function(yt,gt){var Mt,$t=E(yt*yt+gt*gt),er=-je/2,Xt=50;if(!$t)return[0,0];do{var ir=er/2,hr=t(ir),xr=v(ir),_r=xr/hr,Or=-h(y(hr));er-=Mt=(2/_r*Or-tt*_r-$t)/(-Or/(xr*xr)+1-tt/(2*hr*hr))*(hr<0?.7:1)}while(y(Mt)>c&&--Xt>0);var rn=v(er);return[r(yt*rn,$t*t(er)),P(gt*rn/$t)]},ot}function V(je,Ge){var tt=t(Ge),ot=function(yt){return yt?yt/Math.sin(yt):1}(S(tt*t(je/=2)));return[2*tt*v(je)*ot,v(Ge)*ot]}function Q(je){var Ge=v(je),tt=t(je),ot=je>=0?1:-1,yt=m(ot*je),gt=(1+Ge-tt)/2;function Mt($t,er){var Xt=t(er),ir=t($t/=2);return[(1+Xt)*v($t),(ot*er>-r(ir,yt)-.001?0:10*-ot)+gt+v(er)*tt-(1+Xt)*Ge*ir]}return Mt.invert=function($t,er){var Xt=0,ir=0,hr=50;do{var xr=t(Xt),_r=v(Xt),Or=t(ir),rn=v(ir),dn=1+Or,Cn=dn*_r-$t,zn=gt+rn*tt-dn*Ge*xr-er,Hn=dn*xr/2,Rn=-_r*rn,di=Ge*dn*_r/2,wi=tt*Or+Ge*xr*rn,Ri=Rn*di-wi*Hn,Di=(zn*Rn-Cn*wi)/Ri/2,Fi=(Cn*di-zn*Hn)/Ri;y(Fi)>2&&(Fi/=2),Xt-=Di,ir-=Fi}while((y(Di)>c||y(Fi)>c)&&--hr>0);return ot*ir>-r(t(Xt),yt)-.001?[2*Xt,ir]:null},Mt}function K(je,Ge){var tt=m(Ge/2),ot=E(1-tt*tt),yt=1+ot*t(je/=2),gt=v(je)*ot/yt,Mt=tt/yt,$t=gt*gt,er=Mt*Mt;return[4/3*gt*(3+$t-3*er),4/3*Mt*(3+3*$t-er)]}V.invert=function(je,Ge){if(!(je*je+4*Ge*Ge>b*b+c)){var tt=je,ot=Ge,yt=25;do{var gt,Mt=v(tt),$t=v(tt/2),er=t(tt/2),Xt=v(ot),ir=t(ot),hr=v(2*ot),xr=Xt*Xt,_r=ir*ir,Or=$t*$t,rn=1-_r*er*er,dn=rn?S(ir*er)*E(gt=1/rn):gt=0,Cn=2*dn*ir*$t-je,zn=dn*Xt-Ge,Hn=gt*(_r*Or+dn*ir*er*xr),Rn=gt*(.5*Mt*hr-2*dn*Xt*$t),di=.25*gt*(hr*$t-dn*Xt*_r*Mt),wi=gt*(xr*er+dn*Or*ir),Ri=Rn*di-wi*Hn;if(!Ri)break;var Di=(zn*Rn-Cn*wi)/Ri,Fi=(Cn*di-zn*Hn)/Ri;tt-=Di,ot-=Fi}while((y(Di)>c||y(Fi)>c)&&--yt>0);return[tt,ot]}},K.invert=function(je,Ge){if(Ge*=3/8,!(je*=3/8)&&y(Ge)>1)return null;var tt=1+je*je+Ge*Ge,ot=E((tt-E(tt*tt-4*Ge*Ge))/2),yt=P(ot)/3,gt=ot?function(Xt){return h(Xt+E(Xt*Xt-1))}(y(Ge/ot))/3:function(Xt){return h(Xt+E(Xt*Xt+1))}(y(je))/3,Mt=t(yt),$t=F(gt),er=$t*$t-Mt*Mt;return[2*d(je)*r(D(gt)*Mt,.25-er),2*d(Ge)*r($t*v(yt),.25+er)]};var Z=E(8),$=h(1+T);function re(je,Ge){var tt=y(Ge);return tt<w?[je,h(m(w+Ge/2))]:[je*t(tt)*(2*T-1/v(tt)),d(Ge)*(2*T*(tt-w)-h(m(tt/2)))]}function R(je){var Ge=2*b/je;function tt(ot,yt){var gt=p.geoAzimuthalEquidistantRaw(ot,yt);if(y(ot)>g){var Mt=r(gt[1],gt[0]),$t=E(gt[0]*gt[0]+gt[1]*gt[1]),er=Ge*f((Mt-g)/Ge)+g,Xt=r(v(Mt-=er),2-t(Mt));Mt=er+P(b/$t*v(Xt))-Xt,gt[0]=$t*t(Mt),gt[1]=$t*v(Mt)}return gt}return tt.invert=function(ot,yt){var gt=E(ot*ot+yt*yt);if(gt>g){var Mt=r(yt,ot),$t=Ge*f((Mt-g)/Ge)+g,er=Mt>$t?-1:1,Xt=gt*t($t-Mt),ir=1/m(er*S((Xt-b)/E(b*(b-2*Xt)+gt*gt)));Mt=$t+2*e((ir+er*E(ir*ir-3))/3),ot=gt*t(Mt),yt=gt*v(Mt)}return p.geoAzimuthalEquidistantRaw.invert(ot,yt)},tt}function N(je,Ge){if(arguments.length<2&&(Ge=je),Ge===1)return p.geoAzimuthalEqualAreaRaw;if(Ge===1/0)return U;function tt(ot,yt){var gt=p.geoAzimuthalEqualAreaRaw(ot/Ge,yt);return gt[0]*=je,gt}return tt.invert=function(ot,yt){var gt=p.geoAzimuthalEqualAreaRaw.invert(ot/je,yt);return gt[0]*=Ge,gt},tt}function U(je,Ge){return[je*t(Ge)/t(Ge/=2),2*v(Ge)]}function te(je,Ge,tt){var ot,yt,gt,Mt=100;tt=tt===void 0?0:+tt,Ge=+Ge;do(yt=je(tt))===(gt=je(tt+c))&&(gt=yt+c),tt-=ot=-1*c*(yt-Ge)/(yt-gt);while(Mt-- >0&&y(ot)>c);return Mt<0?NaN:tt}function j(je,Ge,tt){return Ge===void 0&&(Ge=40),tt===void 0&&(tt=1e-12),function(ot,yt,gt,Mt){var $t,er,Xt;gt=gt===void 0?0:+gt,Mt=Mt===void 0?0:+Mt;for(var ir=0;ir<Ge;ir++){var hr=je(gt,Mt),xr=hr[0]-ot,_r=hr[1]-yt;if(y(xr)<tt&&y(_r)<tt)break;var Or=xr*xr+_r*_r;if(Or>$t)gt-=er/=2,Mt-=Xt/=2;else{$t=Or;var rn=(gt>0?-1:1)*tt,dn=(Mt>0?-1:1)*tt,Cn=je(gt+rn,Mt),zn=je(gt,Mt+dn),Hn=(Cn[0]-hr[0])/rn,Rn=(Cn[1]-hr[1])/rn,di=(zn[0]-hr[0])/dn,wi=(zn[1]-hr[1])/dn,Ri=wi*Hn-Rn*di,Di=(y(Ri)<.5?.5:1)/Ri;if(gt+=er=(_r*di-xr*wi)*Di,Mt+=Xt=(xr*Rn-_r*Hn)*Di,y(er)<tt&&y(Xt)<tt)break}}return[gt,Mt]}}function Y(){var je=N(1.68,2);function Ge(tt,ot){if(tt+ot<-1.4){var yt=(tt-ot+1.6)*(tt+ot+1.4)/8;tt+=yt,ot-=.8*yt*v(ot+b/2)}var gt=je(tt,ot),Mt=(1-t(tt*ot))/12;return gt[1]<0&&(gt[0]*=1+Mt),gt[1]>0&&(gt[1]*=1+Mt/1.5*gt[0]*gt[0]),gt}return Ge.invert=j(Ge),Ge}function J(je,Ge){var tt,ot=je*v(Ge),yt=30;do Ge-=tt=(Ge+v(Ge)-ot)/(1+t(Ge));while(y(tt)>c&&--yt>0);return Ge/2}function ee(je,Ge,tt){function ot(yt,gt){return[je*yt*t(gt=J(tt,gt)),Ge*v(gt)]}return ot.invert=function(yt,gt){return gt=P(gt/Ge),[yt/(je*t(gt)),P((2*gt+v(2*gt))/tt)]},ot}re.invert=function(je,Ge){if((ot=y(Ge))<$)return[je,2*e(i(Ge))-g];var tt,ot,yt=w,gt=25;do{var Mt=t(yt/2),$t=m(yt/2);yt-=tt=(Z*(yt-w)-h($t)-ot)/(Z-Mt*Mt/(2*$t))}while(y(tt)>1e-12&&--gt>0);return[je/(t(yt)*(Z-1/v(yt))),d(Ge)*yt]},U.invert=function(je,Ge){var tt=2*P(Ge/2);return[je*t(tt/2)/t(tt),tt]};var ne=ee(T/g,T,b),se=2.00276,oe=1.11072;function he(je,Ge){var tt=J(b,Ge);return[se*je/(1/t(Ge)+oe/t(tt)),(Ge+T*v(tt))/se]}function le(je){var Ge=0,tt=p.geoProjectionMutator(je),ot=tt(Ge);return ot.parallel=function(yt){return arguments.length?tt(Ge=yt*I):Ge*M},ot}function de(je,Ge){return[je*t(Ge),Ge]}function xe(je){if(!je)return de;var Ge=1/m(je);function tt(ot,yt){var gt=Ge+je-yt,Mt=gt&&ot*t(yt)/gt;return[gt*v(Mt),Ge-gt*t(Mt)]}return tt.invert=function(ot,yt){var gt=E(ot*ot+(yt=Ge-yt)*yt),Mt=Ge+je-gt;return[gt/t(Mt)*r(ot,yt),Mt]},tt}function we(je){function Ge(tt,ot){var yt=g-ot,gt=yt&&tt*je*v(yt)/yt;return[yt*v(gt)/je,g-yt*t(gt)]}return Ge.invert=function(tt,ot){var yt=tt*je,gt=g-ot,Mt=E(yt*yt+gt*gt),$t=r(yt,gt);return[(Mt?Mt/v(Mt):1)*$t/je,g-Mt]},Ge}he.invert=function(je,Ge){var tt,ot,yt=se*Ge,gt=Ge<0?-w:w,Mt=25;do ot=yt-T*v(gt),gt-=tt=(v(2*gt)+2*gt-b*v(ot))/(2*t(2*gt)+2+b*t(ot)*T*t(gt));while(y(tt)>c&&--Mt>0);return ot=yt-T*v(gt),[je*(1/t(ot)+oe/t(gt))/se,ot]},de.invert=function(je,Ge){return[je/t(Ge),Ge]};var be=ee(1,4/b,b);function Ae(je,Ge,tt,ot,yt,gt){var Mt,$t=t(gt);if(y(je)>1||y(gt)>1)Mt=S(tt*yt+Ge*ot*$t);else{var er=v(je/2),Xt=v(gt/2);Mt=2*P(E(er*er+Ge*ot*Xt*Xt))}return y(Mt)>c?[Mt,r(ot*v(gt),Ge*yt-tt*ot*$t)]:[0,0]}function fe(je,Ge,tt){return S((je*je+Ge*Ge-tt*tt)/(2*je*Ge))}function me(je){return je-2*b*n((je+b)/(2*b))}function ke(je,Ge,tt){for(var ot,yt=[[je[0],je[1],v(je[1]),t(je[1])],[Ge[0],Ge[1],v(Ge[1]),t(Ge[1])],[tt[0],tt[1],v(tt[1]),t(tt[1])]],gt=yt[2],Mt=0;Mt<3;++Mt,gt=ot)ot=yt[Mt],gt.v=Ae(ot[1]-gt[1],gt[3],gt[2],ot[3],ot[2],ot[0]-gt[0]),gt.point=[0,0];var $t=fe(yt[0].v[0],yt[2].v[0],yt[1].v[0]),er=fe(yt[0].v[0],yt[1].v[0],yt[2].v[0]),Xt=b-$t;yt[2].point[1]=0,yt[0].point[0]=-(yt[1].point[0]=yt[0].v[0]/2);var ir=[yt[2].point[0]=yt[0].point[0]+yt[2].v[0]*t($t),2*(yt[0].point[1]=yt[1].point[1]=yt[2].v[0]*v($t))];return function(hr,xr){var _r,Or=v(xr),rn=t(xr),dn=new Array(3);for(_r=0;_r<3;++_r){var Cn=yt[_r];if(dn[_r]=Ae(xr-Cn[1],Cn[3],Cn[2],rn,Or,hr-Cn[0]),!dn[_r][0])return Cn.point;dn[_r][1]=me(dn[_r][1]-Cn.v[1])}var zn=ir.slice();for(_r=0;_r<3;++_r){var Hn=_r==2?0:_r+1,Rn=fe(yt[_r].v[0],dn[_r][0],dn[Hn][0]);dn[_r][1]<0&&(Rn=-Rn),_r?_r==1?(Rn=er-Rn,zn[0]-=dn[_r][0]*t(Rn),zn[1]-=dn[_r][0]*v(Rn)):(Rn=Xt-Rn,zn[0]+=dn[_r][0]*t(Rn),zn[1]+=dn[_r][0]*v(Rn)):(zn[0]+=dn[_r][0]*t(Rn),zn[1]-=dn[_r][0]*v(Rn))}return zn[0]/=3,zn[1]/=3,zn}}function Te(je){return je[0]*=I,je[1]*=I,je}function Me(je,Ge,tt){var ot=p.geoCentroid({type:"MultiPoint",coordinates:[je,Ge,tt]}),yt=[-ot[0],-ot[1]],gt=p.geoRotation(yt),Mt=ke(Te(gt(je)),Te(gt(Ge)),Te(gt(tt)));Mt.invert=j(Mt);var $t=p.geoProjection(Mt).rotate(yt),er=$t.center;return delete $t.rotate,$t.center=function(Xt){return arguments.length?er(gt(Xt)):gt.invert(er())},$t.clipAngle(90)}function Oe(je,Ge){var tt=E(1-v(Ge));return[2/k*je*tt,k*(1-tt)]}function Fe(je){var Ge=m(je);function tt(ot,yt){return[ot,(ot?ot/v(ot):1)*(v(yt)*t(ot)-Ge*t(yt))]}return tt.invert=Ge?function(ot,yt){ot&&(yt*=v(ot)/ot);var gt=t(ot);return[ot,2*r(E(gt*gt+Ge*Ge-yt*yt)-gt,Ge-yt)]}:function(ot,yt){return[ot,P(ot?yt*m(ot)/ot:yt)]},tt}Oe.invert=function(je,Ge){var tt=(tt=Ge/k-1)*tt;return[tt>0?je*E(b/tt)/2:0,P(1-tt)]};var qe=E(3);function et(je,Ge){return[qe*je*(2*t(2*Ge/3)-1)/k,qe*k*v(Ge/3)]}function ze(je){var Ge=t(je);function tt(ot,yt){return[ot*Ge,v(yt)/Ge]}return tt.invert=function(ot,yt){return[ot/Ge,P(yt*Ge)]},tt}function Ue(je){var Ge=t(je);function tt(ot,yt){return[ot*Ge,(1+Ge)*m(yt/2)]}return tt.invert=function(ot,yt){return[ot/Ge,2*e(yt/(1+Ge))]},tt}function We(je,Ge){var tt=E(8/(3*b));return[tt*je*(1-y(Ge)/b),tt*Ge]}function Ze(je,Ge){var tt=E(4-3*v(y(Ge)));return[2/E(6*b)*je*tt,d(Ge)*E(2*b/3)*(2-tt)]}function nt(je,Ge){var tt=E(b*(4+b));return[2/tt*je*(1+E(1-4*Ge*Ge/(b*b))),4/tt*Ge]}function ft(je,Ge){var tt=(2+g)*v(Ge);Ge/=2;for(var ot=0,yt=1/0;ot<10&&y(yt)>c;ot++){var gt=t(Ge);Ge-=yt=(Ge+v(Ge)*(gt+2)-tt)/(2*gt*(1+gt))}return[2/E(b*(4+b))*je*(1+t(Ge)),2*E(b/(4+b))*v(Ge)]}function xt(je,Ge){return[je*(1+t(Ge))/E(2+b),2*Ge/E(2+b)]}function It(je,Ge){for(var tt=(1+g)*v(Ge),ot=0,yt=1/0;ot<10&&y(yt)>c;ot++)Ge-=yt=(Ge+v(Ge)-tt)/(1+t(Ge));return tt=E(2+b),[je*(1+t(Ge))/tt,2*Ge/tt]}et.invert=function(je,Ge){var tt=3*P(Ge/(qe*k));return[k*je/(qe*(2*t(2*tt/3)-1)),tt]},We.invert=function(je,Ge){var tt=E(8/(3*b)),ot=Ge/tt;return[je/(tt*(1-y(ot)/b)),ot]},Ze.invert=function(je,Ge){var tt=2-y(Ge)/E(2*b/3);return[je*E(6*b)/(2*tt),d(Ge)*P((4-tt*tt)/3)]},nt.invert=function(je,Ge){var tt=E(b*(4+b))/2;return[je*tt/(1+E(1-Ge*Ge*(4+b)/(4*b))),Ge*tt/2]},ft.invert=function(je,Ge){var tt=Ge*E((4+b)/b)/2,ot=P(tt),yt=t(ot);return[je/(2/E(b*(4+b))*(1+yt)),P((ot+tt*(yt+2))/(2+g))]},xt.invert=function(je,Ge){var tt=E(2+b),ot=Ge*tt/2;return[tt*je/(1+t(ot)),ot]},It.invert=function(je,Ge){var tt=1+g,ot=E(tt/2);return[2*je*ot/(1+t(Ge*=ot)),P((Ge+v(Ge))/tt)]};var Et=3+2*T;function it(je,Ge){var tt=v(je/=2),ot=t(je),yt=E(t(Ge)),gt=t(Ge/=2),Mt=v(Ge)/(gt+T*ot*yt),$t=E(2/(1+Mt*Mt)),er=E((T*gt+(ot+tt)*yt)/(T*gt+(ot-tt)*yt));return[Et*($t*(er-1/er)-2*h(er)),Et*($t*Mt*(er+1/er)-2*e(Mt))]}it.invert=function(je,Ge){if(!(tt=K.invert(je/1.2,1.065*Ge)))return null;var tt,ot=tt[0],yt=tt[1],gt=20;je/=Et,Ge/=Et;do{var Mt=ot/2,$t=yt/2,er=v(Mt),Xt=t(Mt),ir=v($t),hr=t($t),xr=t(yt),_r=E(xr),Or=ir/(hr+T*Xt*_r),rn=Or*Or,dn=E(2/(1+rn)),Cn=(T*hr+(Xt+er)*_r)/(T*hr+(Xt-er)*_r),zn=E(Cn),Hn=zn-1/zn,Rn=zn+1/zn,di=dn*Hn-2*h(zn)-je,wi=dn*Or*Rn-2*e(Or)-Ge,Ri=ir&&_*_r*er*rn/ir,Di=(T*Xt*hr+_r)/(2*(hr+T*Xt*_r)*(hr+T*Xt*_r)*_r),Fi=-.5*Or*dn*dn*dn,Ta=Fi*Ri,xa=Fi*Di,aa=(aa=2*hr+T*_r*(Xt-er))*aa*zn,oa=(T*Xt*hr*_r+xr)/aa,ba=-T*er*ir/(_r*aa),ja=Hn*Ta-2*oa/zn+dn*(oa+oa/Cn),eo=Hn*xa-2*ba/zn+dn*(ba+ba/Cn),to=Or*Rn*Ta-2*Ri/(1+rn)+dn*Rn*Ri+dn*Or*(oa-oa/Cn),ro=Or*Rn*xa-2*Di/(1+rn)+dn*Rn*Di+dn*Or*(ba-ba/Cn),no=eo*to-ro*ja;if(!no)break;var Ci=(wi*eo-di*ro)/no,pt=(di*to-wi*ja)/no;ot-=Ci,yt=s(-g,a(g,yt-pt))}while((y(Ci)>c||y(pt)>c)&&--gt>0);return y(y(yt)-g)<c?[0,yt]:gt&&[ot,yt]};var rt=t(35*I);function At(je,Ge){var tt=m(Ge/2);return[je*rt*E(1-tt*tt),(1+rt)*tt]}function Gt(je,Ge){var tt=Ge/2,ot=t(tt);return[2*je/k*t(Ge)*ot*ot,k*m(tt)]}function Qt(je){var Ge=1-je,tt=yt(b,0)[0]-yt(-b,0)[0],ot=E(2*(yt(0,g)[1]-yt(0,-g)[1])/tt);function yt($t,er){var Xt=t(er),ir=v(er);return[Xt/(Ge+je*Xt)*$t,Ge*er+je*ir]}function gt($t,er){var Xt=yt($t,er);return[Xt[0]*ot,Xt[1]/ot]}function Mt($t){return gt(0,$t)[1]}return gt.invert=function($t,er){var Xt=te(Mt,er);return[$t/ot*(je+Ge/t(Xt)),Xt]},gt}function Ve(je){return[je[0]/2,P(m(je[1]/2*I))*M]}function Ye(je){return[2*je[0],2*e(v(je[1]*I))*M]}function Be(je,Ge){var tt=2*b/Ge,ot=je*je;function yt(gt,Mt){var $t=p.geoAzimuthalEquidistantRaw(gt,Mt),er=$t[0],Xt=$t[1],ir=er*er+Xt*Xt;if(ir>ot){var hr=E(ir),xr=r(Xt,er),_r=tt*f(xr/tt),Or=xr-_r,rn=je*t(Or),dn=(je*v(Or)-Or*v(rn))/(g-rn),Cn=Je(Or,dn),zn=(b-je)/Se(Cn,rn,b);er=hr;var Hn,Rn=50;do er-=Hn=(je+Se(Cn,rn,er)*zn-hr)/(Cn(er)*zn);while(y(Hn)>c&&--Rn>0);Xt=Or*v(er),er<g&&(Xt-=dn*(er-g));var di=v(_r),wi=t(_r);$t[0]=er*wi-Xt*di,$t[1]=er*di+Xt*wi}return $t}return yt.invert=function(gt,Mt){var $t=gt*gt+Mt*Mt;if($t>ot){var er=E($t),Xt=r(Mt,gt),ir=tt*f(Xt/tt),hr=Xt-ir;gt=er*t(hr),Mt=er*v(hr);for(var xr=gt-g,_r=v(gt),Or=Mt/_r,rn=gt<g?1/0:0,dn=10;;){var Cn=je*v(Or),zn=je*t(Or),Hn=v(zn),Rn=g-zn,di=(Cn-Or*Hn)/Rn,wi=Je(Or,di);if(y(rn)<1e-12||!--dn)break;Or-=rn=(Or*_r-di*xr-Mt)/(_r-2*xr*(Rn*(zn+Or*Cn*t(zn)-Hn)-Cn*(Cn-Or*Hn))/(Rn*Rn))}gt=(er=je+Se(wi,zn,gt)*(b-je)/Se(wi,zn,b))*t(Xt=ir+Or),Mt=er*v(Xt)}return p.geoAzimuthalEquidistantRaw.invert(gt,Mt)},yt}function Je(je,Ge){return function(tt){var ot=je*t(tt);return tt<g&&(ot-=Ge),E(1+ot*ot)}}function Se(je,Ge,tt){for(var ot=(tt-Ge)/50,yt=je(Ge)+je(tt),gt=1,Mt=Ge;gt<50;++gt)yt+=2*je(Mt+=ot);return .5*yt*ot}function Pe(je,Ge,tt,ot,yt,gt,Mt,$t){function er(Xt,ir){if(!ir)return[je*Xt/b,0];var hr=ir*ir,xr=je+hr*(Ge+hr*(tt+hr*ot)),_r=ir*(yt-1+hr*(gt-$t+hr*Mt)),Or=(xr*xr+_r*_r)/(2*_r),rn=Xt*P(xr/Or)/b;return[Or*v(rn),ir*(1+hr*$t)+Or*(1-t(rn))]}return arguments.length<8&&($t=0),er.invert=function(Xt,ir){var hr,xr,_r=b*Xt/je,Or=ir,rn=50;do{var dn=Or*Or,Cn=je+dn*(Ge+dn*(tt+dn*ot)),zn=Or*(yt-1+dn*(gt-$t+dn*Mt)),Hn=Cn*Cn+zn*zn,Rn=2*zn,di=Hn/Rn,wi=di*di,Ri=P(Cn/di)/b,Di=_r*Ri,Fi=Cn*Cn,Ta=(2*Ge+dn*(4*tt+6*dn*ot))*Or,xa=yt+dn*(3*gt+5*dn*Mt),aa=(2*(Cn*Ta+zn*(xa-1))*Rn-Hn*(2*(xa-1)))/(Rn*Rn),oa=t(Di),ba=v(Di),ja=di*oa,eo=di*ba,to=_r/b*(1/E(1-Fi/wi))*(Ta*di-Cn*aa)/wi,ro=eo-Xt,no=Or*(1+dn*$t)+di-ja-ir,Ci=aa*ba+ja*to,pt=ja*Ri,Ft=1+aa-(aa*oa-eo*to),sr=eo*Ri,Yt=Ci*sr-Ft*pt;if(!Yt)break;_r-=hr=(no*Ci-ro*Ft)/Yt,Or-=xr=(ro*sr-no*pt)/Yt}while((y(hr)>c||y(xr)>c)&&--rn>0);return[_r,Or]},er}At.invert=function(je,Ge){var tt=Ge/(1+rt);return[je&&je/(rt*E(1-tt*tt)),2*e(tt)]},Gt.invert=function(je,Ge){var tt=e(Ge/k),ot=t(tt),yt=2*tt;return[je*k/2/(t(yt)*ot*ot),yt]};var De=Pe(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),Ie=Pe(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),$e=Pe(5/6*b,-.62636,-.0344,0,1.3493,-.05524,0,.045);function st(je,Ge){var tt=je*je,ot=Ge*Ge;return[je*(1-.162388*ot)*(.87-952426e-9*tt*tt),Ge*(1+ot/12)]}st.invert=function(je,Ge){var tt,ot=je,yt=Ge,gt=50;do{var Mt=yt*yt;yt-=tt=(yt*(1+Mt/12)-Ge)/(1+Mt/4)}while(y(tt)>c&&--gt>0);gt=50,je/=1-.162388*Mt;do{var $t=($t=ot*ot)*$t;ot-=tt=(ot*(.87-952426e-9*$t)-je)/(.87-.00476213*$t)}while(y(tt)>c&&--gt>0);return[ot,yt]};var dt=Pe(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function ut(je){var Ge=je(g,0)[0]-je(-g,0)[0];function tt(ot,yt){var gt=ot>0?-.5:.5,Mt=je(ot+gt*b,yt);return Mt[0]-=gt*Ge,Mt}return je.invert&&(tt.invert=function(ot,yt){var gt=ot>0?-.5:.5,Mt=je.invert(ot+gt*Ge,yt),$t=Mt[0]-gt*b;return $t<-b?$t+=2*b:$t>b&&($t-=2*b),Mt[0]=$t,Mt}),tt}function Lt(je,Ge){var tt=d(je),ot=d(Ge),yt=t(Ge),gt=t(je)*yt,Mt=v(je)*yt,$t=v(ot*Ge);je=y(r(Mt,$t)),Ge=P(gt),y(je-g)>c&&(je%=g);var er=function(Xt,ir){if(ir===g)return[0,0];var hr,xr,_r=v(ir),Or=_r*_r,rn=Or*Or,dn=1+rn,Cn=1+3*rn,zn=1-rn,Hn=P(1/E(dn)),Rn=zn+Or*dn*Hn,di=(1-_r)/Rn,wi=E(di),Ri=di*dn,Di=E(Ri),Fi=wi*zn;if(Xt===0)return[0,-(Fi+Or*Di)];var Ta,xa=t(ir),aa=1/xa,oa=2*_r*xa,ba=(-Rn*xa-(-3*Or+Hn*Cn)*oa*(1-_r))/(Rn*Rn),ja=-aa*oa,eo=-aa*(Or*dn*ba+di*Cn*oa),to=-2*aa*(zn*(.5*ba/wi)-2*Or*wi*oa),ro=4*Xt/b;if(Xt>.222*b||ir<b/4&&Xt>.175*b){if(hr=(Fi+Or*E(Ri*(1+rn)-Fi*Fi))/(1+rn),Xt>b/4)return[hr,hr];var no=hr,Ci=.5*hr;hr=.5*(Ci+no),xr=50;do{var pt=E(Ri-hr*hr),Ft=hr*(to+ja*pt)+eo*P(hr/Di)-ro;if(!Ft)break;Ft<0?Ci=hr:no=hr,hr=.5*(Ci+no)}while(y(no-Ci)>c&&--xr>0)}else{hr=c,xr=25;do{var sr=hr*hr,Yt=E(Ri-sr),lr=to+ja*Yt,Pr=hr*lr+eo*P(hr/Di)-ro,Rr=lr+(eo-ja*sr)/Yt;hr-=Ta=Yt?Pr/Rr:0}while(y(Ta)>c&&--xr>0)}return[hr,-Fi-Or*E(Ri-hr*hr)]}(je>b/4?g-je:je,Ge);return je>b/4&&($t=er[0],er[0]=-er[1],er[1]=-$t),er[0]*=tt,er[1]*=-ot,er}function lt(je,Ge){var tt,ot,yt,gt,Mt,$t;if(Ge<c)return[(gt=v(je))-(tt=Ge*(je-gt*(ot=t(je)))/4)*ot,ot+tt*gt,1-Ge*gt*gt/2,je-tt];if(Ge>=1-c)return tt=(1-Ge)/4,yt=1/(ot=F(je)),[(gt=(($t=i(2*($t=je)))-1)/($t+1))+tt*((Mt=ot*D(je))-je)/(ot*ot),yt-tt*gt*yt*(Mt-je),yt+tt*gt*yt*(Mt+je),2*e(i(je))-g+tt*(Mt-je)/ot];var er=[1,0,0,0,0,0,0,0,0],Xt=[E(Ge),0,0,0,0,0,0,0,0],ir=0;for(ot=E(1-Ge),Mt=1;y(Xt[ir]/er[ir])>c&&ir<8;)tt=er[ir++],Xt[ir]=(tt-ot)/2,er[ir]=(tt+ot)/2,ot=E(tt*ot),Mt*=2;yt=Mt*er[ir]*je;do yt=(P(gt=Xt[ir]*v(ot=yt)/er[ir])+yt)/2;while(--ir);return[v(yt),gt=t(yt),gt/t(yt-ot),yt]}function Ct(je,Ge){if(!Ge)return je;if(Ge===1)return h(m(je/2+w));for(var tt=1,ot=E(1-Ge),yt=E(Ge),gt=0;y(yt)>c;gt++){if(je%b){var Mt=e(ot*m(je)/tt);Mt<0&&(Mt+=b),je+=Mt+~~(je/b)*b}else je+=je;yt=(tt+ot)/2,ot=E(tt*ot),yt=((tt=yt)-ot)/2}return je/(l(2,gt)*tt)}function Pt(je,Ge){var tt=(T-1)/(T+1),ot=E(1-tt*tt),yt=Ct(g,ot*ot),gt=h(m(b/4+y(Ge)/2)),Mt=i(-1*gt)/E(tt),$t=function(Xt,ir){var hr=Xt*Xt,xr=ir+1,_r=1-hr-ir*ir;return[.5*((Xt>=0?g:-g)-r(_r,2*Xt)),-.25*h(_r*_r+4*hr)+.5*h(xr*xr+hr)]}(Mt*t(-1*je),Mt*v(-1*je)),er=function(Xt,ir,hr){var xr=y(Xt),_r=D(y(ir));if(xr){var Or=1/v(xr),rn=1/(m(xr)*m(xr)),dn=-(rn+hr*(_r*_r*Or*Or)-1+hr),Cn=(-dn+E(dn*dn-4*((hr-1)*rn)))/2;return[Ct(e(1/E(Cn)),hr)*d(Xt),Ct(e(E((Cn/rn-1)/hr)),1-hr)*d(ir)]}return[0,Ct(e(_r),1-hr)*d(ir)]}($t[0],$t[1],ot*ot);return[-er[1],(Ge>=0?1:-1)*(.5*yt-er[0])]}function Ke(je){var Ge=v(je),tt=t(je),ot=mt(je);function yt(gt,Mt){var $t=ot(gt,Mt);gt=$t[0],Mt=$t[1];var er=v(Mt),Xt=t(Mt),ir=t(gt),hr=S(Ge*er+tt*Xt*ir),xr=v(hr),_r=y(xr)>c?hr/xr:1;return[_r*tt*v(gt),(y(gt)>g?_r:-_r)*(Ge*Xt-tt*er*ir)]}return ot.invert=mt(-je),yt.invert=function(gt,Mt){var $t=E(gt*gt+Mt*Mt),er=-v($t),Xt=t($t),ir=$t*Xt,hr=-Mt*er,xr=$t*Ge,_r=E(ir*ir+hr*hr-xr*xr),Or=r(ir*xr+hr*_r,hr*xr-ir*_r),rn=($t>g?-1:1)*r(gt*er,$t*t(Or)*Xt+Mt*v(Or)*er);return ot.invert(rn,Or)},yt}function mt(je){var Ge=v(je),tt=t(je);return function(ot,yt){var gt=t(yt),Mt=t(ot)*gt,$t=v(ot)*gt,er=v(yt);return[r($t,Mt*tt-er*Ge),P(er*tt+Mt*Ge)]}}Lt.invert=function(je,Ge){y(je)>1&&(je=2*d(je)-je),y(Ge)>1&&(Ge=2*d(Ge)-Ge);var tt=d(je),ot=d(Ge),yt=-tt*je,gt=-ot*Ge,Mt=gt/yt<1,$t=function(hr,xr){for(var _r=0,Or=1,rn=.5,dn=50;;){var Cn=rn*rn,zn=E(rn),Hn=P(1/E(1+Cn)),Rn=1-Cn+rn*(1+Cn)*Hn,di=(1-zn)/Rn,wi=E(di),Ri=di*(1+Cn),Di=wi*(1-Cn),Fi=E(Ri-hr*hr),Ta=xr+Di+rn*Fi;if(y(Or-_r)<1e-12||--dn==0||Ta===0)break;Ta>0?_r=rn:Or=rn,rn=.5*(_r+Or)}if(!dn)return null;var xa=P(zn),aa=t(xa),oa=1/aa,ba=2*zn*aa,ja=(-Rn*aa-(-3*rn+Hn*(1+3*Cn))*ba*(1-zn))/(Rn*Rn);return[b/4*(hr*(-2*oa*(.5*ja/wi*(1-Cn)-2*rn*wi*ba)+-oa*ba*Fi)+-oa*(rn*(1+Cn)*ja+di*(1+3*Cn)*ba)*P(hr/E(Ri))),xa]}(Mt?gt:yt,Mt?yt:gt),er=$t[0],Xt=$t[1],ir=t(Xt);return Mt&&(er=-g-er),[tt*(r(v(er)*ir,-v(Xt))+b),ot*P(t(er)*ir)]},Pt.invert=function(je,Ge){var tt,ot,yt,gt,Mt,$t,er=(T-1)/(T+1),Xt=E(1-er*er),ir=Ct(g,Xt*Xt),hr=(ot=-je,yt=Xt*Xt,(tt=.5*ir-Ge)?(gt=lt(tt,yt),ot?($t=(Mt=lt(ot,1-yt))[1]*Mt[1]+yt*gt[0]*gt[0]*Mt[0]*Mt[0],[[gt[0]*Mt[2]/$t,gt[1]*gt[2]*Mt[0]*Mt[1]/$t],[gt[1]*Mt[1]/$t,-gt[0]*gt[2]*Mt[0]*Mt[2]/$t],[gt[2]*Mt[1]*Mt[2]/$t,-yt*gt[0]*gt[1]*Mt[0]/$t]]):[[gt[0],0],[gt[1],0],[gt[2],0]]):[[0,(Mt=lt(ot,1-yt))[0]/Mt[1]],[1/Mt[1],0],[Mt[2]/Mt[1],0]]),xr=function(_r,Or){var rn=Or[0]*Or[0]+Or[1]*Or[1];return[(_r[0]*Or[0]+_r[1]*Or[1])/rn,(_r[1]*Or[0]-_r[0]*Or[1])/rn]}(hr[0],hr[1]);return[r(xr[1],xr[0])/-1,2*e(i(-.5*h(er*xr[0]*xr[0]+er*xr[1]*xr[1])))-g]};var Dt=P(1-1/3)*M,Bt=ze(0);function Zt(je){var Ge=Dt*I,tt=Oe(b,Ge)[0]-Oe(-b,Ge)[0],ot=Bt(0,Ge)[1],yt=Oe(0,Ge)[1],gt=k-yt,Mt=L/je,$t=4/L,er=ot+gt*gt*4/L;function Xt(ir,hr){var xr,_r=y(hr);if(_r>Ge){var Or=a(je-1,s(0,n((ir+b)/Mt)));(xr=Oe(ir+=b*(je-1)/je-Or*Mt,_r))[0]=xr[0]*L/tt-L*(je-1)/(2*je)+Or*L/je,xr[1]=ot+4*(xr[1]-yt)*gt/L,hr<0&&(xr[1]=-xr[1])}else xr=Bt(ir,hr);return xr[0]*=$t,xr[1]/=er,xr}return Xt.invert=function(ir,hr){ir/=$t;var xr=y(hr*=er);if(xr>ot){var _r=a(je-1,s(0,n((ir+b)/Mt)));ir=(ir+b*(je-1)/je-_r*Mt)*tt/L;var Or=Oe.invert(ir,.25*(xr-ot)*L/gt+yt);return Or[0]-=b*(je-1)/je-_r*Mt,hr<0&&(Or[1]=-Or[1]),Or}return Bt.invert(ir,hr)},Xt}function Re(je,Ge){return[je,1&Ge?90-c:Dt]}function ct(je,Ge){return[je,1&Ge?-90+c:-Dt]}function wt(je){return[je[0]*(1-c),je[1]]}function Rt(je){var Ge,tt=1+je,ot=P(v(1/tt)),yt=2*E(b/(Ge=b+4*ot*tt)),gt=.5*yt*(tt+E(je*(2+je))),Mt=je*je,$t=tt*tt;function er(Xt,ir){var hr,xr,_r=1-v(ir);if(_r&&_r<2){var Or,rn=g-ir,dn=25;do{var Cn=v(rn),zn=t(rn),Hn=ot+r(Cn,tt-zn),Rn=1+$t-2*tt*zn;rn-=Or=(rn-Mt*ot-tt*Cn+Rn*Hn-.5*_r*Ge)/(2*tt*Cn*Hn)}while(y(Or)>1e-12&&--dn>0);hr=yt*E(Rn),xr=Xt*Hn/b}else hr=yt*(je+_r),xr=Xt*ot/b;return[hr*v(xr),gt-hr*t(xr)]}return er.invert=function(Xt,ir){var hr=Xt*Xt+(ir-=gt)*ir,xr=(1+$t-hr/(yt*yt))/(2*tt),_r=S(xr),Or=v(_r),rn=ot+r(Or,tt-xr);return[P(Xt/E(hr))*b/rn,P(1-2*(_r-Mt*ot-tt*Or+(1+$t-2*tt*xr)*rn)/Ge)]},er}function Vt(je,Ge){return Ge>-.7109889596207567?((je=ne(je,Ge))[1]+=.0528035274542,je):de(je,Ge)}function rr(je,Ge){return y(Ge)>.7109889596207567?((je=ne(je,Ge))[1]-=Ge>0?.0528035274542:-.0528035274542,je):de(je,Ge)}function qt(je,Ge,tt,ot){var yt=E(4*b/(2*tt+(1+je-Ge/2)*v(2*tt)+(je+Ge)/2*v(4*tt)+Ge/2*v(6*tt))),gt=E(ot*v(tt)*E((1+je*t(2*tt)+Ge*t(4*tt))/(1+je+Ge))),Mt=tt*er(1);function $t(hr){return E(1+je*t(2*hr)+Ge*t(4*hr))}function er(hr){var xr=hr*tt;return(2*xr+(1+je-Ge/2)*v(2*xr)+(je+Ge)/2*v(4*xr)+Ge/2*v(6*xr))/tt}function Xt(hr){return $t(hr)*v(hr)}var ir=function(hr,xr){var _r=tt*te(er,Mt*v(xr)/tt,xr/b);isNaN(_r)&&(_r=tt*d(xr));var Or=yt*$t(_r);return[Or*gt*hr/b*t(_r),Or/gt*v(_r)]};return ir.invert=function(hr,xr){var _r=te(Xt,xr*gt/yt);return[hr*b/(t(_r)*yt*gt*$t(_r)),P(tt*er(_r/tt)/Mt)]},tt===0&&(yt=E(ot/b),(ir=function(hr,xr){return[hr*yt,v(xr)/yt]}).invert=function(hr,xr){return[hr/yt,P(xr*yt)]}),ir}function Jt(je,Ge,tt,ot,yt){ot===void 0&&(ot=1e-8),yt===void 0&&(yt=20);var gt=je(Ge),Mt=je(.5*(Ge+tt)),$t=je(tt);return function er(Xt,ir,hr,xr,_r,Or,rn,dn,Cn,zn,Hn){if(Hn.nanEncountered)return NaN;var Rn,di,wi,Ri,Di,Fi,Ta,xa,aa,oa;if(di=Xt(ir+.25*(Rn=hr-ir)),wi=Xt(hr-.25*Rn),isNaN(di))Hn.nanEncountered=!0;else{if(!isNaN(wi))return oa=((Fi=(Ri=Rn*(xr+4*di+_r)/12)+(Di=Rn*(_r+4*wi+Or)/12))-rn)/15,zn>Cn?(Hn.maxDepthCount++,Fi+oa):Math.abs(oa)<dn?Fi+oa:(xa=er(Xt,ir,Ta=ir+.5*Rn,xr,di,_r,Ri,.5*dn,Cn,zn+1,Hn),isNaN(xa)?(Hn.nanEncountered=!0,NaN):(aa=er(Xt,Ta,hr,_r,wi,Or,Di,.5*dn,Cn,zn+1,Hn),isNaN(aa)?(Hn.nanEncountered=!0,NaN):xa+aa));Hn.nanEncountered=!0}}(je,Ge,tt,gt,Mt,$t,(gt+4*Mt+$t)*(tt-Ge)/6,ot,yt,1,{maxDepthCount:0,nanEncountered:!1})}function or(je,Ge,tt){function ot(_r){return je+(1-je)*l(1-l(_r,Ge),1/Ge)}function yt(_r){return Jt(ot,0,_r,1e-4)}for(var gt=1/yt(1),Mt=1e3,$t=(1+1e-8)*gt,er=[],Xt=0;Xt<=Mt;Xt++)er.push(yt(Xt/Mt)*$t);function ir(_r){var Or=0,rn=Mt,dn=500;do er[dn]>_r?rn=dn:Or=dn,dn=Or+rn>>1;while(dn>Or);var Cn=er[dn+1]-er[dn];return Cn&&(Cn=(_r-er[dn+1])/Cn),(dn+1+Cn)/Mt}var hr=2*ir(1)/b*gt/tt,xr=function(_r,Or){var rn=ir(y(v(Or))),dn=ot(rn)*_r;return rn/=hr,[dn,Or>=0?rn:-rn]};return xr.invert=function(_r,Or){var rn;return y(Or*=hr)<1&&(rn=d(Or)*P(yt(y(Or))*gt)),[_r/ot(y(Or)),rn]},xr}function gr(je,Ge){return y(je[0]-Ge[0])<c&&y(je[1]-Ge[1])<c}function dr(je,Ge){for(var tt,ot,yt,gt=-1,Mt=je.length,$t=je[0],er=[];++gt<Mt;){ot=((tt=je[gt])[0]-$t[0])/Ge,yt=(tt[1]-$t[1])/Ge;for(var Xt=0;Xt<Ge;++Xt)er.push([$t[0]+Xt*ot,$t[1]+Xt*yt]);$t=tt}return er.push(tt),er}function ur(je){var Ge,tt,ot,yt,gt,Mt,$t,er=[],Xt=je[0].length;for($t=0;$t<Xt;++$t)tt=(Ge=je[0][$t])[0][0],ot=Ge[0][1],yt=Ge[1][1],gt=Ge[2][0],Mt=Ge[2][1],er.push(dr([[tt+c,ot+c],[tt+c,yt-c],[gt-c,yt-c],[gt-c,Mt+c]],30));for($t=je[1].length-1;$t>=0;--$t)tt=(Ge=je[1][$t])[0][0],ot=Ge[0][1],yt=Ge[1][1],gt=Ge[2][0],Mt=Ge[2][1],er.push(dr([[gt-c,Mt-c],[gt-c,yt+c],[tt+c,yt+c],[tt+c,ot-c]],30));return{type:"Polygon",coordinates:[x.merge(er)]}}function cr(je,Ge,tt){var ot,yt;function gt(er,Xt){for(var ir=Xt<0?-1:1,hr=Ge[+(Xt<0)],xr=0,_r=hr.length-1;xr<_r&&er>hr[xr][2][0];++xr);var Or=je(er-hr[xr][1][0],Xt);return Or[0]+=je(hr[xr][1][0],ir*Xt>ir*hr[xr][0][1]?hr[xr][0][1]:Xt)[0],Or}tt?gt.invert=tt(gt):je.invert&&(gt.invert=function(er,Xt){for(var ir=yt[+(Xt<0)],hr=Ge[+(Xt<0)],xr=0,_r=ir.length;xr<_r;++xr){var Or=ir[xr];if(Or[0][0]<=er&&er<Or[1][0]&&Or[0][1]<=Xt&&Xt<Or[1][1]){var rn=je.invert(er-je(hr[xr][1][0],0)[0],Xt);return rn[0]+=hr[xr][1][0],gr(gt(rn[0],rn[1]),[er,Xt])?rn:null}}});var Mt=p.geoProjection(gt),$t=Mt.stream;return Mt.stream=function(er){var Xt=Mt.rotate(),ir=$t(er),hr=(Mt.rotate([0,0]),$t(er));return Mt.rotate(Xt),ir.sphere=function(){p.geoStream(ot,hr)},ir},Mt.lobes=function(er){return arguments.length?(ot=ur(er),Ge=er.map(function(Xt){return Xt.map(function(ir){return[[ir[0][0]*I,ir[0][1]*I],[ir[1][0]*I,ir[1][1]*I],[ir[2][0]*I,ir[2][1]*I]]})}),yt=Ge.map(function(Xt){return Xt.map(function(ir){var hr,xr=je(ir[0][0],ir[0][1])[0],_r=je(ir[2][0],ir[2][1])[0],Or=je(ir[1][0],ir[0][1])[1],rn=je(ir[1][0],ir[1][1])[1];return Or>rn&&(hr=Or,Or=rn,rn=hr),[[xr,Or],[_r,rn]]})}),Mt):Ge.map(function(Xt){return Xt.map(function(ir){return[[ir[0][0]*M,ir[0][1]*M],[ir[1][0]*M,ir[1][1]*M],[ir[2][0]*M,ir[2][1]*M]]})})},Ge!=null&&Mt.lobes(Ge),Mt}Vt.invert=function(je,Ge){return Ge>-.7109889596207567?ne.invert(je,Ge-.0528035274542):de.invert(je,Ge)},rr.invert=function(je,Ge){return y(Ge)>.7109889596207567?ne.invert(je,Ge+(Ge>0?.0528035274542:-.0528035274542)):de.invert(je,Ge)};var mr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Dr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],yr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Br=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],Kr=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],an=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Ln(je,Ge){return[3/L*je*E(b*b/3-Ge*Ge),Ge]}function Pn(je){function Ge(tt,ot){if(y(y(ot)-g)<c)return[0,ot<0?-2:2];var yt=v(ot),gt=l((1+yt)/(1-yt),je/2),Mt=.5*(gt+1/gt)+t(tt*=je);return[2*v(tt)/Mt,(gt-1/gt)/Mt]}return Ge.invert=function(tt,ot){var yt=y(ot);if(y(yt-2)<c)return tt?null:[0,d(ot)*g];if(yt>2)return null;var gt=(tt/=2)*tt,Mt=(ot/=2)*ot,$t=2*ot/(1+gt+Mt);return $t=l((1+$t)/(1-$t),1/je),[r(2*tt,1-gt-Mt)/je,P(($t-1)/($t+1))]},Ge}Ln.invert=function(je,Ge){return[L/3*je/E(b*b/3-Ge*Ge),Ge]};var An=b/T;function tn(je,Ge){return[je*(1+E(t(Ge)))/2,Ge/(t(Ge/2)*t(je/6))]}function zr(je,Ge){var tt=je*je,ot=Ge*Ge;return[je*(.975534+ot*(-.0143059*tt-.119161+-.0547009*ot)),Ge*(1.00384+tt*(.0802894+-.02855*ot+199025e-9*tt)+ot*(.0998909+-.0491032*ot))]}function Ar(je,Ge){return[v(je)/t(Ge),m(Ge)*t(je)]}function qr(je){var Ge=t(je),tt=m(w+je/2);function ot(yt,gt){var Mt=gt-je,$t=y(Mt)<c?yt*Ge:y($t=w+gt/2)<c||y(y($t)-g)<c?0:yt*Mt/h(m($t)/tt);return[$t,Mt]}return ot.invert=function(yt,gt){var Mt,$t=gt+je;return[y(gt)<c?yt/Ge:y(Mt=w+$t/2)<c||y(y(Mt)-g)<c?0:yt*h(m(Mt)/tt)/gt,$t]},ot}function On(je,Ge){return[je,1.25*h(m(w+.4*Ge))]}function Fr(je){var Ge=je.length-1;function tt(ot,yt){for(var gt,Mt=t(yt),$t=2/(1+Mt*t(ot)),er=$t*Mt*v(ot),Xt=$t*v(yt),ir=Ge,hr=je[ir],xr=hr[0],_r=hr[1];--ir>=0;)xr=(hr=je[ir])[0]+er*(gt=xr)-Xt*_r,_r=hr[1]+er*_r+Xt*gt;return[xr=er*(gt=xr)-Xt*_r,_r=er*_r+Xt*gt]}return tt.invert=function(ot,yt){var gt=20,Mt=ot,$t=yt;do{for(var er,Xt=Ge,ir=je[Xt],hr=ir[0],xr=ir[1],_r=0,Or=0;--Xt>=0;)_r=hr+Mt*(er=_r)-$t*Or,Or=xr+Mt*Or+$t*er,hr=(ir=je[Xt])[0]+Mt*(er=hr)-$t*xr,xr=ir[1]+Mt*xr+$t*er;var rn,dn,Cn=(_r=hr+Mt*(er=_r)-$t*Or)*_r+(Or=xr+Mt*Or+$t*er)*Or;Mt-=rn=((hr=Mt*(er=hr)-$t*xr-ot)*_r+(xr=Mt*xr+$t*er-yt)*Or)/Cn,$t-=dn=(xr*_r-hr*Or)/Cn}while(y(rn)+y(dn)>1e-12&&--gt>0);if(gt){var zn=E(Mt*Mt+$t*$t),Hn=2*e(.5*zn),Rn=v(Hn);return[r(Mt*Rn,zn*t(Hn)),zn?P($t*Rn/zn):0]}},tt}tn.invert=function(je,Ge){var tt=y(je),ot=y(Ge),yt=c,gt=g;ot<An?gt*=ot/An:yt+=6*S(An/ot);for(var Mt=0;Mt<25;Mt++){var $t=v(gt),er=E(t(gt)),Xt=v(gt/2),ir=t(gt/2),hr=v(yt/6),xr=t(yt/6),_r=.5*yt*(1+er)-tt,Or=gt/(ir*xr)-ot,rn=er?-.25*yt*$t/er:0,dn=.5*(1+er),Cn=(1+.5*gt*Xt/ir)/(ir*xr),zn=gt/ir*(hr/6)/(xr*xr),Hn=rn*zn-Cn*dn,Rn=(_r*zn-Or*dn)/Hn,di=(Or*rn-_r*Cn)/Hn;if(gt-=Rn,yt-=di,y(Rn)<c&&y(di)<c)break}return[je<0?-yt:yt,Ge<0?-gt:gt]},zr.invert=function(je,Ge){var tt=d(je)*b,ot=Ge/2,yt=50;do{var gt=tt*tt,Mt=ot*ot,$t=tt*ot,er=tt*(.975534+Mt*(-.0143059*gt-.119161+-.0547009*Mt))-je,Xt=ot*(1.00384+gt*(.0802894+-.02855*Mt+199025e-9*gt)+Mt*(.0998909+-.0491032*Mt))-Ge,ir=.975534-Mt*(.119161+3*gt*.0143059+.0547009*Mt),hr=-$t*(.238322+.2188036*Mt+.0286118*gt),xr=$t*(.1605788+7961e-7*gt+-.0571*Mt),_r=1.00384+gt*(.0802894+199025e-9*gt)+Mt*(3*(.0998909-.02855*gt)-.245516*Mt),Or=hr*xr-_r*ir,rn=(Xt*hr-er*_r)/Or,dn=(er*xr-Xt*ir)/Or;tt-=rn,ot-=dn}while((y(rn)>c||y(dn)>c)&&--yt>0);return yt&&[tt,ot]},Ar.invert=function(je,Ge){var tt=je*je,ot=Ge*Ge+1,yt=tt+ot,gt=je?_*E((yt-E(yt*yt-4*tt))/tt):1/E(ot);return[P(je*gt),d(Ge)*S(gt)]},On.invert=function(je,Ge){return[je,2.5*e(i(.8*Ge))-.625*b]};var on=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Mn=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],bn=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Dn=[[.9245,0],[0,0],[.01943,0]],tr=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Ot(je,Ge){var tt=p.geoProjection(Fr(je)).rotate(Ge).clipAngle(90),ot=p.geoRotation(Ge),yt=tt.center;return delete tt.rotate,tt.center=function(gt){return arguments.length?yt(ot(gt)):ot.invert(yt())},tt}var Ht=E(6),fr=E(7);function Tr(je,Ge){var tt=P(7*v(Ge)/(3*Ht));return[Ht*je*(2*t(2*tt/3)-1)/fr,9*v(tt/3)/fr]}function Wr(je,Ge){for(var tt,ot=(1+_)*v(Ge),yt=Ge,gt=0;gt<25&&(yt-=tt=(v(yt/2)+v(yt)-ot)/(.5*t(yt/2)+t(yt)),!(y(tt)<c));gt++);return[je*(1+2*t(yt)/t(yt/2))/(3*T),2*E(3)*v(yt/2)/E(2+T)]}function Gr(je,Ge){for(var tt,ot=E(6/(4+b)),yt=(1+b/4)*v(Ge),gt=Ge/2,Mt=0;Mt<25&&(gt-=tt=(gt/2+v(gt)-yt)/(.5+t(gt)),!(y(tt)<c));Mt++);return[ot*(.5+t(gt))*je/1.5,ot*gt]}function wr(je,Ge){var tt=Ge*Ge,ot=tt*tt,yt=tt*ot;return[je*(.84719-.13063*tt+yt*yt*(.05494*tt-.04515-.02326*ot+.00331*yt)),Ge*(1.01183+ot*ot*(.01926*tt-.02625-.00396*ot))]}function br(je,Ge){return[je*(1+t(Ge))/2,2*(Ge-m(Ge/2))]}Tr.invert=function(je,Ge){var tt=3*P(Ge*fr/9);return[je*fr/(Ht*(2*t(2*tt/3)-1)),P(3*v(tt)*Ht/7)]},Wr.invert=function(je,Ge){var tt=Ge*E(2+T)/(2*E(3)),ot=2*P(tt);return[3*T*je/(1+2*t(ot)/t(ot/2)),P((tt+v(ot))/(1+_))]},Gr.invert=function(je,Ge){var tt=E(6/(4+b)),ot=Ge/tt;return y(y(ot)-g)<c&&(ot=ot<0?-g:g),[1.5*je/(tt*(.5+t(ot))),P((ot/2+v(ot))/(1+b/4))]},wr.invert=function(je,Ge){var tt,ot,yt,gt,Mt=Ge,$t=25;do Mt-=tt=(Mt*(1.01183+(yt=(ot=Mt*Mt)*ot)*yt*(.01926*ot-.02625-.00396*yt))-Ge)/(1.01183+yt*yt*(.21186*ot-.23625+-.05148*yt));while(y(tt)>1e-12&&--$t>0);return[je/(.84719-.13063*(ot=Mt*Mt)+(gt=ot*(yt=ot*ot))*gt*(.05494*ot-.04515-.02326*yt+.00331*gt)),Mt]},br.invert=function(je,Ge){for(var tt=Ge/2,ot=0,yt=1/0;ot<10&&y(yt)>c;++ot){var gt=t(Ge/2);Ge-=yt=(Ge-m(Ge/2)-tt)/(1-.5/(gt*gt))}return[2*je/(1+t(Ge)),Ge]};var Sr=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Ir(je,Ge){var tt=v(Ge),ot=t(Ge),yt=d(je);if(je===0||y(Ge)===g)return[0,Ge];if(Ge===0)return[je,0];if(y(je)===g)return[je*ot,g*tt];var gt=b/(2*je)-2*je/b,Mt=2*Ge/b,$t=(1-Mt*Mt)/(tt-Mt),er=gt*gt,Xt=$t*$t,ir=1+er/Xt,hr=1+Xt/er,xr=(gt*tt/$t-gt/2)/ir,_r=(Xt*tt/er+$t/2)/hr,Or=_r*_r-(Xt*tt*tt/er+$t*tt-1)/hr;return[g*(xr+E(xr*xr+ot*ot/ir)*yt),g*(_r+E(Or<0?0:Or)*d(-Ge*gt)*yt)]}Ir.invert=function(je,Ge){var tt=(je/=g)*je,ot=tt+(Ge/=g)*Ge,yt=b*b;return[je?(ot-1+E((1-ot)*(1-ot)+4*tt))/(2*je)*g:0,te(function(gt){return ot*(b*v(gt)-2*gt)*b+4*gt*gt*(Ge-v(gt))+2*b*gt-yt*Ge},0)]};function Er(je,Ge){var tt=Ge*Ge;return[je,Ge*(1.0148+tt*tt*(.23185+tt*(.02406*tt-.14499)))]}function Xr(je,Ge){if(y(Ge)<c)return[je,0];var tt=m(Ge),ot=je*v(Ge);return[v(ot)/tt,Ge+(1-t(ot))/tt]}function fn(je,Ge){var tt=en(je[1],je[0]),ot=en(Ge[1],Ge[0]),yt=function(Mt,$t){return r(Mt[0]*$t[1]-Mt[1]*$t[0],Mt[0]*$t[0]+Mt[1]*$t[1])}(tt,ot),gt=yn(tt)/yn(ot);return _n([1,0,je[0][0],0,1,je[0][1]],_n([gt,0,0,0,gt,0],_n([t(yt),v(yt),0,-v(yt),t(yt),0],[1,0,-Ge[0][0],0,1,-Ge[0][1]])))}function _n(je,Ge){return[je[0]*Ge[0]+je[1]*Ge[3],je[0]*Ge[1]+je[1]*Ge[4],je[0]*Ge[2]+je[1]*Ge[5]+je[2],je[3]*Ge[0]+je[4]*Ge[3],je[3]*Ge[1]+je[4]*Ge[4],je[3]*Ge[2]+je[4]*Ge[5]+je[5]]}function en(je,Ge){return[je[0]-Ge[0],je[1]-Ge[1]]}function yn(je){return E(je[0]*je[0]+je[1]*je[1])}function Vr(je,Ge,tt){function ot(Mt,$t){var er,Xt=Ge(Mt,$t),ir=Xt.project([Mt*M,$t*M]);return(er=Xt.transform)?[er[0]*ir[0]+er[1]*ir[1]+er[2],-(er[3]*ir[0]+er[4]*ir[1]+er[5])]:(ir[1]=-ir[1],ir)}(function Mt($t,er){if($t.edges=function(Or){for(var rn=Or.length,dn=[],Cn=Or[rn-1],zn=0;zn<rn;++zn)dn.push([Cn,Cn=Or[zn]]);return dn}($t.face),er.face){var Xt=$t.shared=function(Or,rn){for(var dn,Cn,zn=Or.length,Hn=null,Rn=0;Rn<zn;++Rn){dn=Or[Rn];for(var di=rn.length;--di>=0;)if(Cn=rn[di],dn[0]===Cn[0]&&dn[1]===Cn[1]){if(Hn)return[Hn,dn];Hn=dn}}}($t.face,er.face),ir=fn(Xt.map(er.project),Xt.map($t.project));$t.transform=er.transform?_n(er.transform,ir):ir;for(var hr=er.edges,xr=0,_r=hr.length;xr<_r;++xr)Ur(Xt[0],hr[xr][1])&&Ur(Xt[1],hr[xr][0])&&(hr[xr]=$t),Ur(Xt[0],hr[xr][0])&&Ur(Xt[1],hr[xr][1])&&(hr[xr]=$t);for(hr=$t.edges,xr=0,_r=hr.length;xr<_r;++xr)Ur(Xt[0],hr[xr][0])&&Ur(Xt[1],hr[xr][1])&&(hr[xr]=er),Ur(Xt[0],hr[xr][1])&&Ur(Xt[1],hr[xr][0])&&(hr[xr]=er)}else $t.transform=er.transform;return $t.children&&$t.children.forEach(function(Or){Mt(Or,$t)}),$t})(je,{transform:null}),ln(je)&&(ot.invert=function(Mt,$t){var er=function Xt(ir,hr){var xr=ir.project.invert,_r=ir.transform,Or=hr;if(_r&&(_r=function(Hn){var Rn=1/(Hn[0]*Hn[4]-Hn[1]*Hn[3]);return[Rn*Hn[4],-Rn*Hn[1],Rn*(Hn[1]*Hn[5]-Hn[2]*Hn[4]),-Rn*Hn[3],Rn*Hn[0],Rn*(Hn[2]*Hn[3]-Hn[0]*Hn[5])]}(_r),Or=[_r[0]*Or[0]+_r[1]*Or[1]+_r[2],_r[3]*Or[0]+_r[4]*Or[1]+_r[5]]),xr&&ir===function(Hn){return Ge(Hn[0]*I,Hn[1]*I)}(rn=xr(Or)))return rn;for(var rn,dn=ir.children,Cn=0,zn=dn&&dn.length;Cn<zn;++Cn)if(rn=Xt(dn[Cn],hr))return rn}(je,[Mt,-$t]);return er&&(er[0]*=I,er[1]*=I,er)});var yt=p.geoProjection(ot),gt=yt.stream;return yt.stream=function(Mt){var $t=yt.rotate(),er=gt(Mt),Xt=(yt.rotate([0,0]),gt(Mt));return yt.rotate($t),er.sphere=function(){Xt.polygonStart(),Xt.lineStart(),function ir(hr,xr,_r){var Or,rn,dn=xr.edges,Cn=dn.length,zn={type:"MultiPoint",coordinates:xr.face},Hn=xr.face.filter(function(Ta){return y(Ta[1])!==90}),Rn=p.geoBounds({type:"MultiPoint",coordinates:Hn}),di=!1,wi=-1,Ri=Rn[1][0]-Rn[0][0],Di=Ri===180||Ri===360?[(Rn[0][0]+Rn[1][0])/2,(Rn[0][1]+Rn[1][1])/2]:p.geoCentroid(zn);if(_r)for(;++wi<Cn&&dn[wi]!==_r;);++wi;for(var Fi=0;Fi<Cn;++Fi)rn=dn[(Fi+wi)%Cn],Array.isArray(rn)?(di||(hr.point((Or=p.geoInterpolate(rn[0],Di)(c))[0],Or[1]),di=!0),hr.point((Or=p.geoInterpolate(rn[1],Di)(c))[0],Or[1])):(di=!1,rn!==_r&&ir(hr,rn,xr))}(Xt,je),Xt.lineEnd(),Xt.polygonEnd()},er},yt.angle(tt==null?-30:tt*M)}function Ur(je,Ge){return je&&Ge&&je[0]===Ge[0]&&je[1]===Ge[1]}function ln(je){return je.project.invert||je.children&&je.children.some(ln)}Er.invert=function(je,Ge){Ge>1.790857183?Ge=1.790857183:Ge<-1.790857183&&(Ge=-1.790857183);var tt,ot=Ge;do{var yt=ot*ot;ot-=tt=(ot*(1.0148+yt*yt*(.23185+yt*(.02406*yt-.14499)))-Ge)/(1.0148+yt*yt*(5*.23185+yt*(.21654*yt-1.01493)))}while(y(tt)>c);return[je,ot]},Xr.invert=function(je,Ge){if(y(Ge)<c)return[je,0];var tt,ot=je*je+Ge*Ge,yt=.5*Ge,gt=10;do{var Mt=m(yt),$t=1/t(yt),er=ot-2*Ge*yt+yt*yt;yt-=tt=(Mt*er+2*(yt-Ge))/(2+er*$t*$t+2*(yt-Ge)*Mt)}while(y(tt)>c&&--gt>0);return Mt=m(yt),[(y(Ge)<y(yt+1/Mt)?P(je*Mt):d(Ge)*d(je)*(S(y(je*Mt))+g))/v(yt),yt]};var gn=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Sn=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(je){return je.map(function(Ge){return gn[Ge]})}),oi=2/E(3);function Yn(je,Ge){var tt=Oe(je,Ge);return[tt[0]*oi,tt[1]]}function vn(je,Ge){for(var tt=0,ot=je.length,yt=0;tt<ot;++tt)yt+=je[tt]*Ge[tt];return yt}function ri(je){return[r(je[1],je[0])*M,P(s(-1,a(1,je[2])))*M]}function hi(je){var Ge=je[0]*I,tt=je[1]*I,ot=t(tt);return[ot*t(Ge),ot*v(Ge),v(tt)]}function Xi(){}function Da(je,Ge){return{type:"FeatureCollection",features:je.features.map(function(tt){return ia(tt,Ge)})}}function ia(je,Ge){return{type:"Feature",id:je.id,properties:je.properties,geometry:_a(je.geometry,Ge)}}function _a(je,Ge){if(!je)return null;if(je.type==="GeometryCollection")return function(ot,yt){return{type:"GeometryCollection",geometries:ot.geometries.map(function(gt){return _a(gt,yt)})}}(je,Ge);var tt;switch(je.type){case"Point":case"MultiPoint":tt=mo;break;case"LineString":case"MultiLineString":tt=Ho;break;case"Polygon":case"MultiPolygon":case"Sphere":tt=es;break;default:return null}return p.geoStream(je,Ge(tt)),tt.result()}Yn.invert=function(je,Ge){return Oe.invert(je/oi,Ge)};var Mi=[],ji=[],mo={point:function(je,Ge){Mi.push([je,Ge])},result:function(){var je=Mi.length?Mi.length<2?{type:"Point",coordinates:Mi[0]}:{type:"MultiPoint",coordinates:Mi}:null;return Mi=[],je}},Ho={lineStart:Xi,point:function(je,Ge){Mi.push([je,Ge])},lineEnd:function(){Mi.length&&(ji.push(Mi),Mi=[])},result:function(){var je=ji.length?ji.length<2?{type:"LineString",coordinates:ji[0]}:{type:"MultiLineString",coordinates:ji}:null;return ji=[],je}},es={polygonStart:Xi,lineStart:Xi,point:function(je,Ge){Mi.push([je,Ge])},lineEnd:function(){var je=Mi.length;if(je){do Mi.push(Mi[0].slice());while(++je<4);ji.push(Mi),Mi=[]}},polygonEnd:Xi,result:function(){if(!ji.length)return null;var je=[],Ge=[];return ji.forEach(function(tt){(function(ot){if((yt=ot.length)<4)return!1;for(var yt,gt=0,Mt=ot[yt-1][1]*ot[0][0]-ot[yt-1][0]*ot[0][1];++gt<yt;)Mt+=ot[gt-1][1]*ot[gt][0]-ot[gt-1][0]*ot[gt][1];return Mt<=0})(tt)?je.push([tt]):Ge.push(tt)}),Ge.forEach(function(tt){var ot=tt[0];je.some(function(yt){if(function(gt,Mt){for(var $t=Mt[0],er=Mt[1],Xt=!1,ir=0,hr=gt.length,xr=hr-1;ir<hr;xr=ir++){var _r=gt[ir],Or=_r[0],rn=_r[1],dn=gt[xr],Cn=dn[0],zn=dn[1];rn>er^zn>er&&$t<(Cn-Or)*(er-rn)/(zn-rn)+Or&&(Xt=!Xt)}return Xt}(yt[0],ot))return yt.push(tt),!0})||je.push([tt])}),ji=[],je.length?je.length>1?{type:"MultiPolygon",coordinates:je}:{type:"Polygon",coordinates:je[0]}:null}};function Xa(je){var Ge=je(g,0)[0]-je(-g,0)[0];function tt(ot,yt){var gt=y(ot)<g,Mt=je(gt?ot:ot>0?ot-b:ot+b,yt),$t=(Mt[0]-Mt[1])*_,er=(Mt[0]+Mt[1])*_;if(gt)return[$t,er];var Xt=Ge*_,ir=$t>0^er>0?-1:1;return[ir*$t-d(er)*Xt,ir*er-d($t)*Xt]}return je.invert&&(tt.invert=function(ot,yt){var gt=(ot+yt)*_,Mt=(yt-ot)*_,$t=y(gt)<.5*Ge&&y(Mt)<.5*Ge;if(!$t){var er=Ge*_,Xt=gt>0^Mt>0?-1:1,ir=-Xt*ot+(Mt>0?1:-1)*er,hr=-Xt*yt+(gt>0?1:-1)*er;gt=(-ir-hr)*_,Mt=(ir-hr)*_}var xr=je.invert(gt,Mt);return $t||(xr[0]+=gt>0?b:-b),xr}),p.geoProjection(tt).rotate([-90,-90,45]).clipAngle(179.999)}function $a(){return Xa(Pt).scale(111.48)}function qo(je){var Ge=v(je);function tt(ot,yt){var gt=Ge?m(ot*Ge/2)/Ge:ot/2;if(!yt)return[2*gt,-je];var Mt=2*e(gt*v(yt)),$t=1/m(yt);return[v(Mt)*$t,yt+(1-t(Mt))*$t-je]}return tt.invert=function(ot,yt){if(y(yt+=je)<c)return[Ge?2*e(Ge*ot/2)/Ge:ot,0];var gt,Mt=ot*ot+yt*yt,$t=0,er=10;do{var Xt=m($t),ir=1/t($t),hr=Mt-2*yt*$t+$t*$t;$t-=gt=(Xt*hr+2*($t-yt))/(2+hr*ir*ir+2*($t-yt)*Xt)}while(y(gt)>c&&--er>0);var xr=ot*(Xt=m($t)),_r=m(y(yt)<y($t+1/Xt)?.5*P(xr):.5*S(xr)+b/4)/v($t);return[Ge?2*e(Ge*_r)/Ge:2*_r,$t]},tt}var Hi=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Lo(je,Ge){var tt,ot=a(18,36*y(Ge)/b),yt=n(ot),gt=ot-yt,Mt=(tt=Hi[yt])[0],$t=tt[1],er=(tt=Hi[++yt])[0],Xt=tt[1],ir=(tt=Hi[a(19,++yt)])[0],hr=tt[1];return[je*(er+gt*(ir-Mt)/2+gt*gt*(ir-2*er+Mt)/2),(Ge>0?g:-g)*(Xt+gt*(hr-$t)/2+gt*gt*(hr-2*Xt+$t)/2)]}function go(je,Ge){var tt=function(Mt){function $t(er,Xt){var ir=t(Xt),hr=(Mt-1)/(Mt-ir*t(er));return[hr*ir*v(er),hr*v(Xt)]}return $t.invert=function(er,Xt){var ir=er*er+Xt*Xt,hr=E(ir),xr=(Mt-E(1-ir*(Mt+1)/(Mt-1)))/((Mt-1)/hr+hr/(Mt-1));return[r(er*xr,hr*E(1-xr*xr)),hr?P(Xt*xr/hr):0]},$t}(je);if(!Ge)return tt;var ot=t(Ge),yt=v(Ge);function gt(Mt,$t){var er=tt(Mt,$t),Xt=er[1],ir=Xt*yt/(je-1)+ot;return[er[0]*ot/ir,Xt/ir]}return gt.invert=function(Mt,$t){var er=(je-1)/(je-1-$t*yt);return tt.invert(er*Mt,er*$t*ot)},gt}Hi.forEach(function(je){je[1]*=1.0144}),Lo.invert=function(je,Ge){var tt=Ge/g,ot=90*tt,yt=a(18,y(ot/5)),gt=s(0,n(yt));do{var Mt=Hi[gt][1],$t=Hi[gt+1][1],er=Hi[a(19,gt+2)][1],Xt=er-Mt,ir=er-2*$t+Mt,hr=2*(y(tt)-$t)/Xt,xr=ir/Xt,_r=hr*(1-xr*hr*(1-2*xr*hr));if(_r>=0||gt===1){ot=(Ge>=0?5:-5)*(_r+yt);var Or,rn=50;do _r=(yt=a(18,y(ot)/5))-(gt=n(yt)),Mt=Hi[gt][1],$t=Hi[gt+1][1],er=Hi[a(19,gt+2)][1],ot-=(Or=(Ge>=0?g:-g)*($t+_r*(er-Mt)/2+_r*_r*(er-2*$t+Mt)/2)-Ge)*M;while(y(Or)>1e-12&&--rn>0);break}}while(--gt>=0);var dn=Hi[gt][0],Cn=Hi[gt+1][0],zn=Hi[a(19,gt+2)][0];return[je/(Cn+_r*(zn-dn)/2+_r*_r*(zn-2*Cn+dn)/2),ot*I]};var wa=-179.9999,Qa=179.9999,vo=-89.9999;function Mo(je){return je.length>0}function Na(je){return je===-90||je===90?[0,je]:[-180,(Ge=je,Math.floor(1e4*Ge)/1e4)];var Ge}function pa(je){var Ge=je[0],tt=je[1],ot=!1;return Ge<=wa?(Ge=-180,ot=!0):Ge>=Qa&&(Ge=180,ot=!0),tt<=vo?(tt=-90,ot=!0):tt>=89.9999&&(tt=90,ot=!0),ot?[Ge,tt]:je}function Ja(je){return je.map(pa)}function Os(je,Ge,tt){for(var ot=0,yt=je.length;ot<yt;++ot){var gt=je[ot].slice();tt.push({index:-1,polygon:Ge,ring:gt});for(var Mt=0,$t=gt.length;Mt<$t;++Mt){var er=gt[Mt],Xt=er[0],ir=er[1];if(Xt<=wa||Xt>=Qa||ir<=vo||ir>=89.9999){gt[Mt]=pa(er);for(var hr=Mt+1;hr<$t;++hr){var xr=gt[hr],_r=xr[0],Or=xr[1];if(_r>wa&&_r<Qa&&Or>vo&&Or<89.9999)break}if(hr===Mt+1)continue;if(Mt){var rn={index:-1,polygon:Ge,ring:gt.slice(0,Mt+1)};rn.ring[rn.ring.length-1]=Na(ir),tt[tt.length-1]=rn}else tt.pop();if(hr>=$t)break;tt.push({index:-1,polygon:Ge,ring:gt=gt.slice(hr-1)}),gt[0]=Na(gt[0][1]),Mt=-1,$t=gt.length}}}}function Ns(je){var Ge,tt,ot,yt,gt,Mt,$t=je.length,er={},Xt={};for(Ge=0;Ge<$t;++Ge)ot=(tt=je[Ge]).ring[0],gt=tt.ring[tt.ring.length-1],ot[0]!==gt[0]||ot[1]!==gt[1]?(tt.index=Ge,er[ot]=Xt[gt]=tt):(tt.polygon.push(tt.ring),je[Ge]=null);for(Ge=0;Ge<$t;++Ge)if(tt=je[Ge]){if(ot=tt.ring[0],gt=tt.ring[tt.ring.length-1],yt=Xt[ot],Mt=er[gt],delete er[ot],delete Xt[gt],ot[0]===gt[0]&&ot[1]===gt[1]){tt.polygon.push(tt.ring);continue}yt?(delete Xt[ot],delete er[yt.ring[0]],yt.ring.pop(),je[yt.index]=null,tt={index:-1,polygon:yt.polygon,ring:yt.ring.concat(tt.ring)},yt===Mt?tt.polygon.push(tt.ring):(tt.index=$t++,je.push(er[tt.ring[0]]=Xt[tt.ring[tt.ring.length-1]]=tt))):Mt?(delete er[gt],delete Xt[Mt.ring[Mt.ring.length-1]],tt.ring.pop(),tt={index:$t++,polygon:Mt.polygon,ring:tt.ring.concat(Mt.ring)},je[Mt.index]=null,je.push(er[tt.ring[0]]=Xt[tt.ring[tt.ring.length-1]]=tt)):(tt.ring.push(tt.ring[0]),tt.polygon.push(tt.ring))}}function qi(je){var Ge={type:"Feature",geometry:Ts(je.geometry)};return je.id!=null&&(Ge.id=je.id),je.bbox!=null&&(Ge.bbox=je.bbox),je.properties!=null&&(Ge.properties=je.properties),Ge}function Ts(je){if(je==null)return je;var Ge,tt,ot,yt;switch(je.type){case"GeometryCollection":Ge={type:"GeometryCollection",geometries:je.geometries.map(Ts)};break;case"Point":Ge={type:"Point",coordinates:pa(je.coordinates)};break;case"MultiPoint":case"LineString":Ge={type:je.type,coordinates:Ja(je.coordinates)};break;case"MultiLineString":Ge={type:"MultiLineString",coordinates:je.coordinates.map(Ja)};break;case"Polygon":var gt=[];Os(je.coordinates,gt,tt=[]),Ns(tt),Ge={type:"Polygon",coordinates:gt};break;case"MultiPolygon":tt=[],ot=-1,yt=je.coordinates.length;for(var Mt=new Array(yt);++ot<yt;)Os(je.coordinates[ot],Mt[ot]=[],tt);Ns(tt),Ge={type:"MultiPolygon",coordinates:Mt.filter(Mo)};break;default:return je}return je.bbox!=null&&(Ge.bbox=je.bbox),Ge}function ss(je,Ge){var tt=m(Ge/2),ot=v(w*tt);return[je*(.74482-.34588*ot*ot),1.70711*tt]}function js(je,Ge,tt){var ot=p.geoInterpolate(Ge,tt),yt=ot(.5),gt=p.geoRotation([-yt[0],-yt[1]])(Ge),Mt=ot.distance/2,$t=-P(v(gt[1]*I)/v(Mt)),er=[-yt[0],-yt[1],-(gt[0]>0?b-$t:$t)*M],Xt=p.geoProjection(je(Mt)).rotate(er),ir=p.geoRotation(er),hr=Xt.center;return delete Xt.rotate,Xt.center=function(xr){return arguments.length?hr(ir(xr)):ir.invert(hr())},Xt.clipAngle(90)}function Us(je){var Ge=t(je);function tt(ot,yt){var gt=p.geoGnomonicRaw(ot,yt);return gt[0]*=Ge,gt}return tt.invert=function(ot,yt){return p.geoGnomonicRaw.invert(ot/Ge,yt)},tt}function Ds(je,Ge){return js(Us,je,Ge)}function Vs(je){if(!(je*=2))return p.geoAzimuthalEquidistantRaw;var Ge=-je/2,tt=-Ge,ot=je*je,yt=m(tt),gt=.5/v(tt);function Mt($t,er){var Xt=S(t(er)*t($t-Ge)),ir=S(t(er)*t($t-tt));return[((Xt*=Xt)-(ir*=ir))/(2*je),(er<0?-1:1)*E(4*ot*ir-(ot-Xt+ir)*(ot-Xt+ir))/(2*je)]}return Mt.invert=function($t,er){var Xt,ir,hr=er*er,xr=t(E(hr+(Xt=$t+Ge)*Xt)),_r=t(E(hr+(Xt=$t+tt)*Xt));return[r(ir=xr-_r,Xt=(xr+_r)*yt),(er<0?-1:1)*S(E(Xt*Xt+ir*ir)*gt)]},Mt}function Co(je,Ge){return js(Vs,je,Ge)}function Po(je,Ge){if(y(Ge)<c)return[je,0];var tt=y(Ge/g),ot=P(tt);if(y(je)<c||y(y(Ge)-g)<c)return[0,d(Ge)*b*m(ot/2)];var yt=t(ot),gt=y(b/je-je/b)/2,Mt=gt*gt,$t=yt/(tt+yt-1),er=$t*(2/tt-1),Xt=er*er,ir=Xt+Mt,hr=$t-Xt,xr=Mt+$t;return[d(je)*b*(gt*hr+E(Mt*hr*hr-ir*($t*$t-Xt)))/ir,d(Ge)*b*(er*xr-gt*E((Mt+1)*ir-xr*xr))/ir]}function Go(je,Ge){if(y(Ge)<c)return[je,0];var tt=y(Ge/g),ot=P(tt);if(y(je)<c||y(y(Ge)-g)<c)return[0,d(Ge)*b*m(ot/2)];var yt=t(ot),gt=y(b/je-je/b)/2,Mt=gt*gt,$t=yt*(E(1+Mt)-gt*yt)/(1+Mt*tt*tt);return[d(je)*b*$t,d(Ge)*b*E(1-$t*(2*gt+$t))]}function Yo(je,Ge){if(y(Ge)<c)return[je,0];var tt=Ge/g,ot=P(tt);if(y(je)<c||y(y(Ge)-g)<c)return[0,b*m(ot/2)];var yt=(b/je-je/b)/2,gt=tt/(1+t(ot));return[b*(d(je)*E(yt*yt+1-gt*gt)-yt),b*gt]}function Wo(je,Ge){if(!Ge)return[je,0];var tt=y(Ge);if(!je||tt===g)return[0,Ge];var ot=tt/g,yt=ot*ot,gt=(8*ot-yt*(yt+2)-5)/(2*yt*(ot-1)),Mt=gt*gt,$t=ot*gt,er=yt+Mt+2*$t,Xt=ot+3*gt,ir=je/g,hr=ir+1/ir,xr=d(y(je)-g)*E(hr*hr-4),_r=xr*xr,Or=(xr*(er+Mt-1)+2*E(er*(yt+Mt*_r-1)+(1-yt)*(yt*(Xt*Xt+4*Mt)+12*$t*Mt+4*Mt*Mt)))/(4*er+_r);return[d(je)*g*Or,d(Ge)*g*E(1+xr*y(Or)-Or*Or)]}function ls(je,Ge,tt,ot){var yt=b/3;je=s(je,c),Ge=s(Ge,c),je=a(je,g),Ge=a(Ge,b-c),tt=s(tt,0),tt=a(tt,100-c);var gt=(ot=s(ot,c))/100,Mt=S((tt/100+1)*t(yt))/yt,$t=v(je)/v(Mt*g),er=Ge/b,Xt=E(gt*v(je/2)/v(Ge/2));return function(ir,hr,xr,_r,Or){function rn(dn,Cn){var zn=xr*v(_r*Cn),Hn=E(1-zn*zn),Rn=E(2/(1+Hn*t(dn*=Or)));return[ir*Hn*Rn*v(dn),hr*zn*Rn]}return rn.invert=function(dn,Cn){var zn=dn/ir,Hn=Cn/hr,Rn=E(zn*zn+Hn*Hn),di=2*P(Rn/2);return[r(dn*m(di),ir*Rn)/Or,Rn&&P(Cn*v(di)/(hr*xr*Rn))/_r]},rn}(Xt/E(er*$t*Mt),1/(Xt*E(er*$t*Mt)),$t,Mt,er)}function yo(){var je=65*I,Ge=60*I,tt=20,ot=200,yt=p.geoProjectionMutator(ls),gt=yt(je,Ge,tt,ot);return gt.poleline=function(Mt){return arguments.length?yt(je=+Mt*I,Ge,tt,ot):je*M},gt.parallels=function(Mt){return arguments.length?yt(je,Ge=+Mt*I,tt,ot):Ge*M},gt.inflation=function(Mt){return arguments.length?yt(je,Ge,tt=+Mt,ot):tt},gt.ratio=function(Mt){return arguments.length?yt(je,Ge,tt,ot=+Mt):ot},gt.scale(163.775)}ss.invert=function(je,Ge){var tt=Ge/1.70711,ot=v(w*tt);return[je/(.74482-.34588*ot*ot),2*e(tt)]},Po.invert=function(je,Ge){if(y(Ge)<c)return[je,0];if(y(je)<c)return[0,g*v(2*e(Ge/b))];var tt=(je/=b)*je,ot=(Ge/=b)*Ge,yt=tt+ot,gt=yt*yt,Mt=-y(Ge)*(1+yt),$t=Mt-2*ot+tt,er=-2*Mt+1+2*ot+gt,Xt=ot/er+(2*$t*$t*$t/(er*er*er)-9*Mt*$t/(er*er))/27,ir=(Mt-$t*$t/(3*er))/er,hr=2*E(-ir/3),xr=S(3*Xt/(ir*hr))/3;return[b*(yt-1+E(1+2*(tt-ot)+gt))/(2*je),d(Ge)*b*(-hr*t(xr+b/3)-$t/(3*er))]},Go.invert=function(je,Ge){if(!je)return[0,g*v(2*e(Ge/b))];var tt=y(je/b),ot=(1-tt*tt-(Ge/=b)*Ge)/(2*tt),yt=E(ot*ot+1);return[d(je)*b*(yt-ot),d(Ge)*g*v(2*r(E((1-2*ot*tt)*(ot+yt)-tt),E(yt+ot+tt)))]},Yo.invert=function(je,Ge){if(!Ge)return[je,0];var tt=Ge/b,ot=(b*b*(1-tt*tt)-je*je)/(2*b*je);return[je?b*(d(je)*E(ot*ot+1)-ot):0,g*v(2*e(tt))]},Wo.invert=function(je,Ge){var tt;if(!je||!Ge)return[je,Ge];Ge/=b;var ot=d(je)*je/g,yt=(ot*ot-1+4*Ge*Ge)/y(ot),gt=yt*yt,Mt=2*Ge,$t=50;do{var er=Mt*Mt,Xt=(8*Mt-er*(er+2)-5)/(2*er*(Mt-1)),ir=(3*Mt-er*Mt-10)/(2*er*Mt),hr=Xt*Xt,xr=Mt*Xt,_r=Mt+Xt,Or=_r*_r,rn=Mt+3*Xt,dn=-2*_r*(4*xr*hr+(1-4*er+3*er*er)*(1+ir)+hr*(14*er-6-gt+(8*er-8-2*gt)*ir)+xr*(12*er-8+(10*er-10-gt)*ir)),Cn=E(Or*(er+hr*gt-1)+(1-er)*(er*(rn*rn+4*hr)+hr*(12*xr+4*hr)));Mt-=tt=(yt*(Or+hr-1)+2*Cn-ot*(4*Or+gt))/(yt*(2*Xt*ir+2*_r*(1+ir))+dn/Cn-8*_r*(yt*(-1+hr+Or)+2*Cn)*(1+ir)/(gt+4*Or))}while(tt>c&&--$t>0);return[d(je)*(E(yt*yt+4)+yt)*b/4,g*Mt]};var ks=4*b+3*E(3),fo=2*E(2*b*E(3)/ks),Zo=ee(fo*E(3)/b,fo,ks/6);function As(je,Ge){return[je*E(1-3*Ge*Ge/(b*b)),Ge]}function Io(je,Ge){var tt=t(Ge),ot=t(je)*tt,yt=1-ot,gt=t(je=r(v(je)*tt,-v(Ge))),Mt=v(je);return[Mt*(tt=E(1-ot*ot))-gt*yt,-gt*tt-Mt*yt]}function Ui(je,Ge){var tt=V(je,Ge);return[(tt[0]+je/g)/2,(tt[1]+Ge)/2]}As.invert=function(je,Ge){return[je/E(1-3*Ge*Ge/(b*b)),Ge]},Io.invert=function(je,Ge){var tt=(je*je+Ge*Ge)/-2,ot=E(-tt*(2+tt)),yt=Ge*tt+je*ot,gt=je*tt-Ge*ot,Mt=E(gt*gt+yt*yt);return[r(ot*yt,Mt*(1+tt)),Mt?-P(ot*gt/Mt):0]},Ui.invert=function(je,Ge){var tt=je,ot=Ge,yt=25;do{var gt,Mt=t(ot),$t=v(ot),er=v(2*ot),Xt=$t*$t,ir=Mt*Mt,hr=v(tt),xr=t(tt/2),_r=v(tt/2),Or=_r*_r,rn=1-ir*xr*xr,dn=rn?S(Mt*xr)*E(gt=1/rn):gt=0,Cn=.5*(2*dn*Mt*_r+tt/g)-je,zn=.5*(dn*$t+ot)-Ge,Hn=.5*gt*(ir*Or+dn*Mt*xr*Xt)+.5/g,Rn=gt*(hr*er/4-dn*$t*_r),di=.125*gt*(er*_r-dn*$t*ir*hr),wi=.5*gt*(Xt*xr+dn*Or*Mt)+.5,Ri=Rn*di-wi*Hn,Di=(zn*Rn-Cn*wi)/Ri,Fi=(Cn*di-zn*Hn)/Ri;tt-=Di,ot-=Fi}while((y(Di)>c||y(Fi)>c)&&--yt>0);return[tt,ot]},o.geoNaturalEarth=p.geoNaturalEarth1,o.geoNaturalEarthRaw=p.geoNaturalEarth1Raw,o.geoAiry=function(){var je=g,Ge=p.geoProjectionMutator(H),tt=Ge(je);return tt.radius=function(ot){return arguments.length?Ge(je=ot*I):je*M},tt.scale(179.976).clipAngle(147)},o.geoAiryRaw=H,o.geoAitoff=function(){return p.geoProjection(V).scale(152.63)},o.geoAitoffRaw=V,o.geoArmadillo=function(){var je=20*I,Ge=je>=0?1:-1,tt=m(Ge*je),ot=p.geoProjectionMutator(Q),yt=ot(je),gt=yt.stream;return yt.parallel=function(Mt){return arguments.length?(tt=m((Ge=(je=Mt*I)>=0?1:-1)*je),ot(je)):je*M},yt.stream=function(Mt){var $t=yt.rotate(),er=gt(Mt),Xt=(yt.rotate([0,0]),gt(Mt)),ir=yt.precision();return yt.rotate($t),er.sphere=function(){Xt.polygonStart(),Xt.lineStart();for(var hr=-180*Ge;Ge*hr<180;hr+=90*Ge)Xt.point(hr,90*Ge);if(je)for(;Ge*(hr-=3*Ge*ir)>=-180;)Xt.point(hr,Ge*-r(t(hr*I/2),tt)*M);Xt.lineEnd(),Xt.polygonEnd()},er},yt.scale(218.695).center([0,28.0974])},o.geoArmadilloRaw=Q,o.geoAugust=function(){return p.geoProjection(K).scale(66.1603)},o.geoAugustRaw=K,o.geoBaker=function(){return p.geoProjection(re).scale(112.314)},o.geoBakerRaw=re,o.geoBerghaus=function(){var je=5,Ge=p.geoProjectionMutator(R),tt=Ge(je),ot=tt.stream,yt=-t(.01*I),gt=v(.01*I);return tt.lobes=function(Mt){return arguments.length?Ge(je=+Mt):je},tt.stream=function(Mt){var $t=tt.rotate(),er=ot(Mt),Xt=(tt.rotate([0,0]),ot(Mt));return tt.rotate($t),er.sphere=function(){Xt.polygonStart(),Xt.lineStart();for(var ir=0,hr=360/je,xr=2*b/je,_r=90-180/je,Or=g;ir<je;++ir,_r-=hr,Or-=xr)Xt.point(r(gt*t(Or),yt)*M,P(gt*v(Or))*M),_r<-90?(Xt.point(-90,-180-_r-.01),Xt.point(-90,-180-_r+.01)):(Xt.point(90,_r+.01),Xt.point(90,_r-.01));Xt.lineEnd(),Xt.polygonEnd()},er},tt.scale(87.8076).center([0,17.1875]).clipAngle(179.999)},o.geoBerghausRaw=R,o.geoBertin1953=function(){return p.geoProjection(Y()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])},o.geoBertin1953Raw=Y,o.geoBoggs=function(){return p.geoProjection(he).scale(160.857)},o.geoBoggsRaw=he,o.geoBonne=function(){return le(xe).scale(123.082).center([0,26.1441]).parallel(45)},o.geoBonneRaw=xe,o.geoBottomley=function(){var je=.5,Ge=p.geoProjectionMutator(we),tt=Ge(je);return tt.fraction=function(ot){return arguments.length?Ge(je=+ot):je},tt.scale(158.837)},o.geoBottomleyRaw=we,o.geoBromley=function(){return p.geoProjection(be).scale(152.63)},o.geoBromleyRaw=be,o.geoChamberlin=Me,o.geoChamberlinRaw=ke,o.geoChamberlinAfrica=function(){return Me([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])},o.geoCollignon=function(){return p.geoProjection(Oe).scale(95.6464).center([0,30])},o.geoCollignonRaw=Oe,o.geoCraig=function(){return le(Fe).scale(249.828).clipAngle(90)},o.geoCraigRaw=Fe,o.geoCraster=function(){return p.geoProjection(et).scale(156.19)},o.geoCrasterRaw=et,o.geoCylindricalEqualArea=function(){return le(ze).parallel(38.58).scale(195.044)},o.geoCylindricalEqualAreaRaw=ze,o.geoCylindricalStereographic=function(){return le(Ue).scale(124.75)},o.geoCylindricalStereographicRaw=Ue,o.geoEckert1=function(){return p.geoProjection(We).scale(165.664)},o.geoEckert1Raw=We,o.geoEckert2=function(){return p.geoProjection(Ze).scale(165.664)},o.geoEckert2Raw=Ze,o.geoEckert3=function(){return p.geoProjection(nt).scale(180.739)},o.geoEckert3Raw=nt,o.geoEckert4=function(){return p.geoProjection(ft).scale(180.739)},o.geoEckert4Raw=ft,o.geoEckert5=function(){return p.geoProjection(xt).scale(173.044)},o.geoEckert5Raw=xt,o.geoEckert6=function(){return p.geoProjection(It).scale(173.044)},o.geoEckert6Raw=It,o.geoEisenlohr=function(){return p.geoProjection(it).scale(62.5271)},o.geoEisenlohrRaw=it,o.geoFahey=function(){return p.geoProjection(At).scale(137.152)},o.geoFaheyRaw=At,o.geoFoucaut=function(){return p.geoProjection(Gt).scale(135.264)},o.geoFoucautRaw=Gt,o.geoFoucautSinusoidal=function(){var je=.5,Ge=p.geoProjectionMutator(Qt),tt=Ge(je);return tt.alpha=function(ot){return arguments.length?Ge(je=+ot):je},tt.scale(168.725)},o.geoFoucautSinusoidalRaw=Qt,o.geoGilbert=function(je){je==null&&(je=p.geoOrthographic);var Ge=je(),tt=p.geoEquirectangular().scale(M).precision(0).clipAngle(null).translate([0,0]);function ot(gt){return Ge(Ve(gt))}function yt(gt){ot[gt]=function(){return arguments.length?(Ge[gt].apply(Ge,arguments),ot):Ge[gt]()}}return Ge.invert&&(ot.invert=function(gt){return Ye(Ge.invert(gt))}),ot.stream=function(gt){var Mt=Ge.stream(gt),$t=tt.stream({point:function(er,Xt){Mt.point(er/2,P(m(-Xt/2*I))*M)},lineStart:function(){Mt.lineStart()},lineEnd:function(){Mt.lineEnd()},polygonStart:function(){Mt.polygonStart()},polygonEnd:function(){Mt.polygonEnd()}});return $t.sphere=Mt.sphere,$t},ot.rotate=function(gt){return arguments.length?(tt.rotate(gt),ot):tt.rotate()},ot.center=function(gt){return arguments.length?(Ge.center(Ve(gt)),ot):Ye(Ge.center())},yt("angle"),yt("clipAngle"),yt("clipExtent"),yt("fitExtent"),yt("fitHeight"),yt("fitSize"),yt("fitWidth"),yt("scale"),yt("translate"),yt("precision"),ot.scale(249.5)},o.geoGingery=function(){var je=6,Ge=30*I,tt=t(Ge),ot=v(Ge),yt=p.geoProjectionMutator(Be),gt=yt(Ge,je),Mt=gt.stream,$t=-t(.01*I),er=v(.01*I);return gt.radius=function(Xt){return arguments.length?(tt=t(Ge=Xt*I),ot=v(Ge),yt(Ge,je)):Ge*M},gt.lobes=function(Xt){return arguments.length?yt(Ge,je=+Xt):je},gt.stream=function(Xt){var ir=gt.rotate(),hr=Mt(Xt),xr=(gt.rotate([0,0]),Mt(Xt));return gt.rotate(ir),hr.sphere=function(){xr.polygonStart(),xr.lineStart();for(var _r=0,Or=2*b/je,rn=0;_r<je;++_r,rn-=Or)xr.point(r(er*t(rn),$t)*M,P(er*v(rn))*M),xr.point(r(ot*t(rn-Or/2),tt)*M,P(ot*v(rn-Or/2))*M);xr.lineEnd(),xr.polygonEnd()},hr},gt.rotate([90,-40]).scale(91.7095).clipAngle(179.999)},o.geoGingeryRaw=Be,o.geoGinzburg4=function(){return p.geoProjection(De).scale(149.995)},o.geoGinzburg4Raw=De,o.geoGinzburg5=function(){return p.geoProjection(Ie).scale(153.93)},o.geoGinzburg5Raw=Ie,o.geoGinzburg6=function(){return p.geoProjection($e).scale(130.945)},o.geoGinzburg6Raw=$e,o.geoGinzburg8=function(){return p.geoProjection(st).scale(131.747)},o.geoGinzburg8Raw=st,o.geoGinzburg9=function(){return p.geoProjection(dt).scale(131.087)},o.geoGinzburg9Raw=dt,o.geoGringorten=function(){return p.geoProjection(ut(Lt)).scale(239.75)},o.geoGringortenRaw=Lt,o.geoGuyou=function(){return p.geoProjection(ut(Pt)).scale(151.496)},o.geoGuyouRaw=Pt,o.geoHammer=function(){var je=2,Ge=p.geoProjectionMutator(N),tt=Ge(je);return tt.coefficient=function(ot){return arguments.length?Ge(je=+ot):je},tt.scale(169.529)},o.geoHammerRaw=N,o.geoHammerRetroazimuthal=function(){var je=0,Ge=p.geoProjectionMutator(Ke),tt=Ge(je),ot=tt.rotate,yt=tt.stream,gt=p.geoCircle();return tt.parallel=function(Mt){if(!arguments.length)return je*M;var $t=tt.rotate();return Ge(je=Mt*I).rotate($t)},tt.rotate=function(Mt){return arguments.length?(ot.call(tt,[Mt[0],Mt[1]-je*M]),gt.center([-Mt[0],-Mt[1]]),tt):((Mt=ot.call(tt))[1]+=je*M,Mt)},tt.stream=function(Mt){return(Mt=yt(Mt)).sphere=function(){Mt.polygonStart();var $t,er=gt.radius(89.99)().coordinates[0],Xt=er.length-1,ir=-1;for(Mt.lineStart();++ir<Xt;)Mt.point(($t=er[ir])[0],$t[1]);for(Mt.lineEnd(),Xt=(er=gt.radius(90.01)().coordinates[0]).length-1,Mt.lineStart();--ir>=0;)Mt.point(($t=er[ir])[0],$t[1]);Mt.lineEnd(),Mt.polygonEnd()},Mt},tt.scale(79.4187).parallel(45).clipAngle(179.999)},o.geoHammerRetroazimuthalRaw=Ke,o.geoHealpix=function(){var je=4,Ge=p.geoProjectionMutator(Zt),tt=Ge(je),ot=tt.stream;return tt.lobes=function(yt){return arguments.length?Ge(je=+yt):je},tt.stream=function(yt){var gt=tt.rotate(),Mt=ot(yt),$t=(tt.rotate([0,0]),ot(yt));return tt.rotate(gt),Mt.sphere=function(){var er,Xt;p.geoStream((er=180/je,Xt=[].concat(x.range(-180,180+er/2,er).map(Re),x.range(180,-180-er/2,-er).map(ct)),{type:"Polygon",coordinates:[er===180?Xt.map(wt):Xt]}),$t)},Mt},tt.scale(239.75)},o.geoHealpixRaw=Zt,o.geoHill=function(){var je=1,Ge=p.geoProjectionMutator(Rt),tt=Ge(je);return tt.ratio=function(ot){return arguments.length?Ge(je=+ot):je},tt.scale(167.774).center([0,18.67])},o.geoHillRaw=Rt,o.geoHomolosine=function(){return p.geoProjection(rr).scale(152.63)},o.geoHomolosineRaw=rr,o.geoHufnagel=function(){var je=1,Ge=0,tt=45*I,ot=2,yt=p.geoProjectionMutator(qt),gt=yt(je,Ge,tt,ot);return gt.a=function(Mt){return arguments.length?yt(je=+Mt,Ge,tt,ot):je},gt.b=function(Mt){return arguments.length?yt(je,Ge=+Mt,tt,ot):Ge},gt.psiMax=function(Mt){return arguments.length?yt(je,Ge,tt=+Mt*I,ot):tt*M},gt.ratio=function(Mt){return arguments.length?yt(je,Ge,tt,ot=+Mt):ot},gt.scale(180.739)},o.geoHufnagelRaw=qt,o.geoHyperelliptical=function(){var je=0,Ge=2.5,tt=1.183136,ot=p.geoProjectionMutator(or),yt=ot(je,Ge,tt);return yt.alpha=function(gt){return arguments.length?ot(je=+gt,Ge,tt):je},yt.k=function(gt){return arguments.length?ot(je,Ge=+gt,tt):Ge},yt.gamma=function(gt){return arguments.length?ot(je,Ge,tt=+gt):tt},yt.scale(152.63)},o.geoHyperellipticalRaw=or,o.geoInterrupt=cr,o.geoInterruptedBoggs=function(){return cr(he,mr).scale(160.857)},o.geoInterruptedHomolosine=function(){return cr(rr,Dr).scale(152.63)},o.geoInterruptedMollweide=function(){return cr(ne,yr).scale(169.529)},o.geoInterruptedMollweideHemispheres=function(){return cr(ne,Br).scale(169.529).rotate([20,0])},o.geoInterruptedSinuMollweide=function(){return cr(Vt,Kr,j).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},o.geoInterruptedSinusoidal=function(){return cr(de,an).scale(152.63).rotate([-20,0])},o.geoKavrayskiy7=function(){return p.geoProjection(Ln).scale(158.837)},o.geoKavrayskiy7Raw=Ln,o.geoLagrange=function(){var je=.5,Ge=p.geoProjectionMutator(Pn),tt=Ge(je);return tt.spacing=function(ot){return arguments.length?Ge(je=+ot):je},tt.scale(124.75)},o.geoLagrangeRaw=Pn,o.geoLarrivee=function(){return p.geoProjection(tn).scale(97.2672)},o.geoLarriveeRaw=tn,o.geoLaskowski=function(){return p.geoProjection(zr).scale(139.98)},o.geoLaskowskiRaw=zr,o.geoLittrow=function(){return p.geoProjection(Ar).scale(144.049).clipAngle(89.999)},o.geoLittrowRaw=Ar,o.geoLoximuthal=function(){return le(qr).parallel(40).scale(158.837)},o.geoLoximuthalRaw=qr,o.geoMiller=function(){return p.geoProjection(On).scale(108.318)},o.geoMillerRaw=On,o.geoModifiedStereographic=Ot,o.geoModifiedStereographicRaw=Fr,o.geoModifiedStereographicAlaska=function(){return Ot(on,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)},o.geoModifiedStereographicGs48=function(){return Ot(Mn,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])},o.geoModifiedStereographicGs50=function(){return Ot(bn,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])},o.geoModifiedStereographicMiller=function(){return Ot(Dn,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)},o.geoModifiedStereographicLee=function(){return Ot(tr,[165,10]).scale(250).clipAngle(130).center([-165,-10])},o.geoMollweide=function(){return p.geoProjection(ne).scale(169.529)},o.geoMollweideRaw=ne,o.geoMtFlatPolarParabolic=function(){return p.geoProjection(Tr).scale(164.859)},o.geoMtFlatPolarParabolicRaw=Tr,o.geoMtFlatPolarQuartic=function(){return p.geoProjection(Wr).scale(188.209)},o.geoMtFlatPolarQuarticRaw=Wr,o.geoMtFlatPolarSinusoidal=function(){return p.geoProjection(Gr).scale(166.518)},o.geoMtFlatPolarSinusoidalRaw=Gr,o.geoNaturalEarth2=function(){return p.geoProjection(wr).scale(175.295)},o.geoNaturalEarth2Raw=wr,o.geoNellHammer=function(){return p.geoProjection(br).scale(152.63)},o.geoNellHammerRaw=br,o.geoInterruptedQuarticAuthalic=function(){return cr(N(1/0),Sr).rotate([20,0]).scale(152.63)},o.geoNicolosi=function(){return p.geoProjection(Ir).scale(127.267)},o.geoNicolosiRaw=Ir,o.geoPatterson=function(){return p.geoProjection(Er).scale(139.319)},o.geoPattersonRaw=Er,o.geoPolyconic=function(){return p.geoProjection(Xr).scale(103.74)},o.geoPolyconicRaw=Xr,o.geoPolyhedral=Vr,o.geoPolyhedralButterfly=function(je){je=je||function(tt){var ot=p.geoCentroid({type:"MultiPoint",coordinates:tt});return p.geoGnomonic().scale(1).translate([0,0]).rotate([-ot[0],-ot[1]])};var Ge=Sn.map(function(tt){return{face:tt,project:je(tt)}});return[-1,0,0,1,0,1,4,5].forEach(function(tt,ot){var yt=Ge[tt];yt&&(yt.children||(yt.children=[])).push(Ge[ot])}),Vr(Ge[0],function(tt,ot){return Ge[tt<-b/2?ot<0?6:4:tt<0?ot<0?2:0:tt<b/2?ot<0?3:1:ot<0?7:5]}).angle(-30).scale(101.858).center([0,45])},o.geoPolyhedralCollignon=function(je){je=je||function(tt){var ot=p.geoCentroid({type:"MultiPoint",coordinates:tt});return p.geoProjection(Yn).translate([0,0]).scale(1).rotate(ot[1]>0?[-ot[0],0]:[180-ot[0],180])};var Ge=Sn.map(function(tt){return{face:tt,project:je(tt)}});return[-1,0,0,1,0,1,4,5].forEach(function(tt,ot){var yt=Ge[tt];yt&&(yt.children||(yt.children=[])).push(Ge[ot])}),Vr(Ge[0],function(tt,ot){return Ge[tt<-b/2?ot<0?6:4:tt<0?ot<0?2:0:tt<b/2?ot<0?3:1:ot<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])},o.geoPolyhedralWaterman=function(je){je=je||function(gt){var Mt=gt.length===6?p.geoCentroid({type:"MultiPoint",coordinates:gt}):gt[0];return p.geoGnomonic().scale(1).translate([0,0]).rotate([-Mt[0],-Mt[1]])};var Ge=Sn.map(function(gt){for(var Mt,$t=gt.map(hi),er=$t.length,Xt=$t[er-1],ir=[],hr=0;hr<er;++hr)Mt=$t[hr],ir.push(ri([.9486832980505138*Xt[0]+.31622776601683794*Mt[0],.9486832980505138*Xt[1]+.31622776601683794*Mt[1],.9486832980505138*Xt[2]+.31622776601683794*Mt[2]]),ri([.9486832980505138*Mt[0]+.31622776601683794*Xt[0],.9486832980505138*Mt[1]+.31622776601683794*Xt[1],.9486832980505138*Mt[2]+.31622776601683794*Xt[2]])),Xt=Mt;return ir}),tt=[],ot=[-1,0,0,1,0,1,4,5];Ge.forEach(function(gt,Mt){for(var $t,er,Xt=Sn[Mt],ir=Xt.length,hr=tt[Mt]=[],xr=0;xr<ir;++xr)Ge.push([Xt[xr],gt[(2*xr+2)%(2*ir)],gt[(2*xr+1)%(2*ir)]]),ot.push(Mt),hr.push(($t=hi(gt[(2*xr+2)%(2*ir)]),er=hi(gt[(2*xr+1)%(2*ir)]),[$t[1]*er[2]-$t[2]*er[1],$t[2]*er[0]-$t[0]*er[2],$t[0]*er[1]-$t[1]*er[0]]))});var yt=Ge.map(function(gt){return{project:je(gt),face:gt}});return ot.forEach(function(gt,Mt){var $t=yt[gt];$t&&($t.children||($t.children=[])).push(yt[Mt])}),Vr(yt[0],function(gt,Mt){var $t=t(Mt),er=[$t*t(gt),$t*v(gt),v(Mt)],Xt=gt<-b/2?Mt<0?6:4:gt<0?Mt<0?2:0:gt<b/2?Mt<0?3:1:Mt<0?7:5,ir=tt[Xt];return yt[vn(ir[0],er)<0?8+3*Xt:vn(ir[1],er)<0?8+3*Xt+1:vn(ir[2],er)<0?8+3*Xt+2:Xt]}).angle(-30).scale(110.625).center([0,45])},o.geoProject=function(je,Ge){var tt,ot=Ge.stream;if(!ot)throw new Error("invalid projection");switch(je&&je.type){case"Feature":tt=ia;break;case"FeatureCollection":tt=Da;break;default:tt=_a}return tt(je,ot)},o.geoGringortenQuincuncial=function(){return Xa(Lt).scale(176.423)},o.geoPeirceQuincuncial=$a,o.geoPierceQuincuncial=$a,o.geoQuantize=function(je,Ge){if(!(0<=(Ge=+Ge)&&Ge<=20))throw new Error("invalid digits");function tt(Xt){var ir=Xt.length,hr=2,xr=new Array(ir);for(xr[0]=+Xt[0].toFixed(Ge),xr[1]=+Xt[1].toFixed(Ge);hr<ir;)xr[hr]=Xt[hr],++hr;return xr}function ot(Xt){return Xt.map(tt)}function yt(Xt){for(var ir=tt(Xt[0]),hr=[ir],xr=1;xr<Xt.length;xr++){var _r=tt(Xt[xr]);(_r.length>2||_r[0]!=ir[0]||_r[1]!=ir[1])&&(hr.push(_r),ir=_r)}return hr.length===1&&Xt.length>1&&hr.push(tt(Xt[Xt.length-1])),hr}function gt(Xt){return Xt.map(yt)}function Mt(Xt){if(Xt==null)return Xt;var ir;switch(Xt.type){case"GeometryCollection":ir={type:"GeometryCollection",geometries:Xt.geometries.map(Mt)};break;case"Point":ir={type:"Point",coordinates:tt(Xt.coordinates)};break;case"MultiPoint":ir={type:Xt.type,coordinates:ot(Xt.coordinates)};break;case"LineString":ir={type:Xt.type,coordinates:yt(Xt.coordinates)};break;case"MultiLineString":case"Polygon":ir={type:Xt.type,coordinates:gt(Xt.coordinates)};break;case"MultiPolygon":ir={type:"MultiPolygon",coordinates:Xt.coordinates.map(gt)};break;default:return Xt}return Xt.bbox!=null&&(ir.bbox=Xt.bbox),ir}function $t(Xt){var ir={type:"Feature",properties:Xt.properties,geometry:Mt(Xt.geometry)};return Xt.id!=null&&(ir.id=Xt.id),Xt.bbox!=null&&(ir.bbox=Xt.bbox),ir}if(je!=null)switch(je.type){case"Feature":return $t(je);case"FeatureCollection":var er={type:"FeatureCollection",features:je.features.map($t)};return je.bbox!=null&&(er.bbox=je.bbox),er;default:return Mt(je)}return je},o.geoQuincuncial=Xa,o.geoRectangularPolyconic=function(){return le(qo).scale(131.215)},o.geoRectangularPolyconicRaw=qo,o.geoRobinson=function(){return p.geoProjection(Lo).scale(152.63)},o.geoRobinsonRaw=Lo,o.geoSatellite=function(){var je=2,Ge=0,tt=p.geoProjectionMutator(go),ot=tt(je,Ge);return ot.distance=function(yt){return arguments.length?tt(je=+yt,Ge):je},ot.tilt=function(yt){return arguments.length?tt(je,Ge=yt*I):Ge*M},ot.scale(432.147).clipAngle(S(1/je)*M-1e-6)},o.geoSatelliteRaw=go,o.geoSinuMollweide=function(){return p.geoProjection(Vt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},o.geoSinuMollweideRaw=Vt,o.geoSinusoidal=function(){return p.geoProjection(de).scale(152.63)},o.geoSinusoidalRaw=de,o.geoStitch=function(je){if(je==null)return je;switch(je.type){case"Feature":return qi(je);case"FeatureCollection":var Ge={type:"FeatureCollection",features:je.features.map(qi)};return je.bbox!=null&&(Ge.bbox=je.bbox),Ge;default:return Ts(je)}},o.geoTimes=function(){return p.geoProjection(ss).scale(146.153)},o.geoTimesRaw=ss,o.geoTwoPointAzimuthal=Ds,o.geoTwoPointAzimuthalRaw=Us,o.geoTwoPointAzimuthalUsa=function(){return Ds([-158,21.5],[-77,39]).clipAngle(60).scale(400)},o.geoTwoPointEquidistant=Co,o.geoTwoPointEquidistantRaw=Vs,o.geoTwoPointEquidistantUsa=function(){return Co([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)},o.geoVanDerGrinten=function(){return p.geoProjection(Po).scale(79.4183)},o.geoVanDerGrintenRaw=Po,o.geoVanDerGrinten2=function(){return p.geoProjection(Go).scale(79.4183)},o.geoVanDerGrinten2Raw=Go,o.geoVanDerGrinten3=function(){return p.geoProjection(Yo).scale(79.4183)},o.geoVanDerGrinten3Raw=Yo,o.geoVanDerGrinten4=function(){return p.geoProjection(Wo).scale(127.16)},o.geoVanDerGrinten4Raw=Wo,o.geoWagner=yo,o.geoWagner7=function(){return yo().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)},o.geoWagnerRaw=ls,o.geoWagner4=function(){return p.geoProjection(Zo).scale(176.84)},o.geoWagner4Raw=Zo,o.geoWagner6=function(){return p.geoProjection(As).scale(152.63)},o.geoWagner6Raw=As,o.geoWiechel=function(){return p.geoProjection(Io).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)},o.geoWiechelRaw=Io,o.geoWinkel3=function(){return p.geoProjection(Ui).scale(158.837)},o.geoWinkel3Raw=Ui,Object.defineProperty(o,"__esModule",{value:!0})})},{"d3-array":107,"d3-geo":114}],114:[function(u,q,W){(function(o,p){typeof W=="object"&&q!==void 0?p(W,u("d3-array")):p((o=o||self).d3=o.d3||{},o.d3)})(this,function(o,p){function x(){return new y}function y(){this.reset()}y.prototype={constructor:y,reset:function(){this.s=this.t=0},add:function(pt){r(e,pt,this.t),r(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new y;function r(pt,Ft,sr){var Yt=pt.s=Ft+sr,lr=Yt-Ft,Pr=Yt-lr;pt.t=Ft-Pr+(sr-lr)}var t=1e-6,i=Math.PI,n=i/2,h=i/4,s=2*i,a=180/i,l=i/180,f=Math.abs,d=Math.atan,v=Math.atan2,m=Math.cos,c=Math.ceil,b=Math.exp,g=Math.log,w=Math.pow,_=Math.sin,T=Math.sign||function(pt){return pt>0?1:pt<0?-1:0},k=Math.sqrt,L=Math.tan;function M(pt){return pt>1?0:pt<-1?i:Math.acos(pt)}function I(pt){return pt>1?n:pt<-1?-n:Math.asin(pt)}function P(pt){return(pt=_(pt/2))*pt}function S(){}function E(pt,Ft){pt&&F.hasOwnProperty(pt.type)&&F[pt.type](pt,Ft)}var D={Feature:function(pt,Ft){E(pt.geometry,Ft)},FeatureCollection:function(pt,Ft){for(var sr=pt.features,Yt=-1,lr=sr.length;++Yt<lr;)E(sr[Yt].geometry,Ft)}},F={Sphere:function(pt,Ft){Ft.sphere()},Point:function(pt,Ft){pt=pt.coordinates,Ft.point(pt[0],pt[1],pt[2])},MultiPoint:function(pt,Ft){for(var sr=pt.coordinates,Yt=-1,lr=sr.length;++Yt<lr;)pt=sr[Yt],Ft.point(pt[0],pt[1],pt[2])},LineString:function(pt,Ft){H(pt.coordinates,Ft,0)},MultiLineString:function(pt,Ft){for(var sr=pt.coordinates,Yt=-1,lr=sr.length;++Yt<lr;)H(sr[Yt],Ft,0)},Polygon:function(pt,Ft){V(pt.coordinates,Ft)},MultiPolygon:function(pt,Ft){for(var sr=pt.coordinates,Yt=-1,lr=sr.length;++Yt<lr;)V(sr[Yt],Ft)},GeometryCollection:function(pt,Ft){for(var sr=pt.geometries,Yt=-1,lr=sr.length;++Yt<lr;)E(sr[Yt],Ft)}};function H(pt,Ft,sr){var Yt,lr=-1,Pr=pt.length-sr;for(Ft.lineStart();++lr<Pr;)Yt=pt[lr],Ft.point(Yt[0],Yt[1],Yt[2]);Ft.lineEnd()}function V(pt,Ft){var sr=-1,Yt=pt.length;for(Ft.polygonStart();++sr<Yt;)H(pt[sr],Ft,1);Ft.polygonEnd()}function Q(pt,Ft){pt&&D.hasOwnProperty(pt.type)?D[pt.type](pt,Ft):E(pt,Ft)}var K,Z,$,re,R,N=x(),U=x(),te={point:S,lineStart:S,lineEnd:S,polygonStart:function(){N.reset(),te.lineStart=j,te.lineEnd=Y},polygonEnd:function(){var pt=+N;U.add(pt<0?s+pt:pt),this.lineStart=this.lineEnd=this.point=S},sphere:function(){U.add(s)}};function j(){te.point=J}function Y(){ee(K,Z)}function J(pt,Ft){te.point=ee,K=pt,Z=Ft,$=pt*=l,re=m(Ft=(Ft*=l)/2+h),R=_(Ft)}function ee(pt,Ft){var sr=(pt*=l)-$,Yt=sr>=0?1:-1,lr=Yt*sr,Pr=m(Ft=(Ft*=l)/2+h),Rr=_(Ft),Zr=R*Rr,cn=re*Pr+Zr*m(lr),nn=Zr*Yt*_(lr);N.add(v(nn,cn)),$=pt,re=Pr,R=Rr}function ne(pt){return[v(pt[1],pt[0]),I(pt[2])]}function se(pt){var Ft=pt[0],sr=pt[1],Yt=m(sr);return[Yt*m(Ft),Yt*_(Ft),_(sr)]}function oe(pt,Ft){return pt[0]*Ft[0]+pt[1]*Ft[1]+pt[2]*Ft[2]}function he(pt,Ft){return[pt[1]*Ft[2]-pt[2]*Ft[1],pt[2]*Ft[0]-pt[0]*Ft[2],pt[0]*Ft[1]-pt[1]*Ft[0]]}function le(pt,Ft){pt[0]+=Ft[0],pt[1]+=Ft[1],pt[2]+=Ft[2]}function de(pt,Ft){return[pt[0]*Ft,pt[1]*Ft,pt[2]*Ft]}function xe(pt){var Ft=k(pt[0]*pt[0]+pt[1]*pt[1]+pt[2]*pt[2]);pt[0]/=Ft,pt[1]/=Ft,pt[2]/=Ft}var we,be,Ae,fe,me,ke,Te,Me,Oe,Fe,qe,et,ze,Ue,We,Ze,nt,ft,xt,It,Et,it,rt,At,Gt,Qt,Ve=x(),Ye={point:Be,lineStart:Se,lineEnd:Pe,polygonStart:function(){Ye.point=De,Ye.lineStart=Ie,Ye.lineEnd=$e,Ve.reset(),te.polygonStart()},polygonEnd:function(){te.polygonEnd(),Ye.point=Be,Ye.lineStart=Se,Ye.lineEnd=Pe,N<0?(we=-(Ae=180),be=-(fe=90)):Ve>t?fe=90:Ve<-t&&(be=-90),Fe[0]=we,Fe[1]=Ae},sphere:function(){we=-(Ae=180),be=-(fe=90)}};function Be(pt,Ft){Oe.push(Fe=[we=pt,Ae=pt]),Ft<be&&(be=Ft),Ft>fe&&(fe=Ft)}function Je(pt,Ft){var sr=se([pt*l,Ft*l]);if(Me){var Yt=he(Me,sr),lr=he([Yt[1],-Yt[0],0],Yt);xe(lr),lr=ne(lr);var Pr,Rr=pt-me,Zr=Rr>0?1:-1,cn=lr[0]*a*Zr,nn=f(Rr)>180;nn^(Zr*me<cn&&cn<Zr*pt)?(Pr=lr[1]*a)>fe&&(fe=Pr):nn^(Zr*me<(cn=(cn+360)%360-180)&&cn<Zr*pt)?(Pr=-lr[1]*a)<be&&(be=Pr):(Ft<be&&(be=Ft),Ft>fe&&(fe=Ft)),nn?pt<me?st(we,pt)>st(we,Ae)&&(Ae=pt):st(pt,Ae)>st(we,Ae)&&(we=pt):Ae>=we?(pt<we&&(we=pt),pt>Ae&&(Ae=pt)):pt>me?st(we,pt)>st(we,Ae)&&(Ae=pt):st(pt,Ae)>st(we,Ae)&&(we=pt)}else Oe.push(Fe=[we=pt,Ae=pt]);Ft<be&&(be=Ft),Ft>fe&&(fe=Ft),Me=sr,me=pt}function Se(){Ye.point=Je}function Pe(){Fe[0]=we,Fe[1]=Ae,Ye.point=Be,Me=null}function De(pt,Ft){if(Me){var sr=pt-me;Ve.add(f(sr)>180?sr+(sr>0?360:-360):sr)}else ke=pt,Te=Ft;te.point(pt,Ft),Je(pt,Ft)}function Ie(){te.lineStart()}function $e(){De(ke,Te),te.lineEnd(),f(Ve)>t&&(we=-(Ae=180)),Fe[0]=we,Fe[1]=Ae,Me=null}function st(pt,Ft){return(Ft-=pt)<0?Ft+360:Ft}function dt(pt,Ft){return pt[0]-Ft[0]}function ut(pt,Ft){return pt[0]<=pt[1]?pt[0]<=Ft&&Ft<=pt[1]:Ft<pt[0]||pt[1]<Ft}var Lt={sphere:S,point:lt,lineStart:Pt,lineEnd:Dt,polygonStart:function(){Lt.lineStart=Bt,Lt.lineEnd=Zt},polygonEnd:function(){Lt.lineStart=Pt,Lt.lineEnd=Dt}};function lt(pt,Ft){pt*=l;var sr=m(Ft*=l);Ct(sr*m(pt),sr*_(pt),_(Ft))}function Ct(pt,Ft,sr){++qe,ze+=(pt-ze)/qe,Ue+=(Ft-Ue)/qe,We+=(sr-We)/qe}function Pt(){Lt.point=Ke}function Ke(pt,Ft){pt*=l;var sr=m(Ft*=l);At=sr*m(pt),Gt=sr*_(pt),Qt=_(Ft),Lt.point=mt,Ct(At,Gt,Qt)}function mt(pt,Ft){pt*=l;var sr=m(Ft*=l),Yt=sr*m(pt),lr=sr*_(pt),Pr=_(Ft),Rr=v(k((Rr=Gt*Pr-Qt*lr)*Rr+(Rr=Qt*Yt-At*Pr)*Rr+(Rr=At*lr-Gt*Yt)*Rr),At*Yt+Gt*lr+Qt*Pr);et+=Rr,Ze+=Rr*(At+(At=Yt)),nt+=Rr*(Gt+(Gt=lr)),ft+=Rr*(Qt+(Qt=Pr)),Ct(At,Gt,Qt)}function Dt(){Lt.point=lt}function Bt(){Lt.point=Re}function Zt(){ct(it,rt),Lt.point=lt}function Re(pt,Ft){it=pt,rt=Ft,pt*=l,Ft*=l,Lt.point=ct;var sr=m(Ft);At=sr*m(pt),Gt=sr*_(pt),Qt=_(Ft),Ct(At,Gt,Qt)}function ct(pt,Ft){pt*=l;var sr=m(Ft*=l),Yt=sr*m(pt),lr=sr*_(pt),Pr=_(Ft),Rr=Gt*Pr-Qt*lr,Zr=Qt*Yt-At*Pr,cn=At*lr-Gt*Yt,nn=k(Rr*Rr+Zr*Zr+cn*cn),mn=I(nn),wn=nn&&-mn/nn;xt+=wn*Rr,It+=wn*Zr,Et+=wn*cn,et+=mn,Ze+=mn*(At+(At=Yt)),nt+=mn*(Gt+(Gt=lr)),ft+=mn*(Qt+(Qt=Pr)),Ct(At,Gt,Qt)}function wt(pt){return function(){return pt}}function Rt(pt,Ft){function sr(Yt,lr){return Yt=pt(Yt,lr),Ft(Yt[0],Yt[1])}return pt.invert&&Ft.invert&&(sr.invert=function(Yt,lr){return(Yt=Ft.invert(Yt,lr))&&pt.invert(Yt[0],Yt[1])}),sr}function Vt(pt,Ft){return[f(pt)>i?pt+Math.round(-pt/s)*s:pt,Ft]}function rr(pt,Ft,sr){return(pt%=s)?Ft||sr?Rt(Jt(pt),or(Ft,sr)):Jt(pt):Ft||sr?or(Ft,sr):Vt}function qt(pt){return function(Ft,sr){return[(Ft+=pt)>i?Ft-s:Ft<-i?Ft+s:Ft,sr]}}function Jt(pt){var Ft=qt(pt);return Ft.invert=qt(-pt),Ft}function or(pt,Ft){var sr=m(pt),Yt=_(pt),lr=m(Ft),Pr=_(Ft);function Rr(Zr,cn){var nn=m(cn),mn=m(Zr)*nn,wn=_(Zr)*nn,un=_(cn),Tn=un*sr+mn*Yt;return[v(wn*lr-Tn*Pr,mn*sr-un*Yt),I(Tn*lr+wn*Pr)]}return Rr.invert=function(Zr,cn){var nn=m(cn),mn=m(Zr)*nn,wn=_(Zr)*nn,un=_(cn),Tn=un*lr-wn*Pr;return[v(wn*lr+un*Pr,mn*sr+Tn*Yt),I(Tn*sr-mn*Yt)]},Rr}function gr(pt){function Ft(sr){return(sr=pt(sr[0]*l,sr[1]*l))[0]*=a,sr[1]*=a,sr}return pt=rr(pt[0]*l,pt[1]*l,pt.length>2?pt[2]*l:0),Ft.invert=function(sr){return(sr=pt.invert(sr[0]*l,sr[1]*l))[0]*=a,sr[1]*=a,sr},Ft}function dr(pt,Ft,sr,Yt,lr,Pr){if(sr){var Rr=m(Ft),Zr=_(Ft),cn=Yt*sr;lr==null?(lr=Ft+Yt*s,Pr=Ft-cn/2):(lr=ur(Rr,lr),Pr=ur(Rr,Pr),(Yt>0?lr<Pr:lr>Pr)&&(lr+=Yt*s));for(var nn,mn=lr;Yt>0?mn>Pr:mn<Pr;mn-=cn)nn=ne([Rr,-Zr*m(mn),-Zr*_(mn)]),pt.point(nn[0],nn[1])}}function ur(pt,Ft){(Ft=se(Ft))[0]-=pt,xe(Ft);var sr=M(-Ft[1]);return((-Ft[2]<0?-sr:sr)+s-t)%s}function cr(){var pt,Ft=[];return{point:function(sr,Yt,lr){pt.push([sr,Yt,lr])},lineStart:function(){Ft.push(pt=[])},lineEnd:S,rejoin:function(){Ft.length>1&&Ft.push(Ft.pop().concat(Ft.shift()))},result:function(){var sr=Ft;return Ft=[],pt=null,sr}}}function mr(pt,Ft){return f(pt[0]-Ft[0])<t&&f(pt[1]-Ft[1])<t}function Dr(pt,Ft,sr,Yt){this.x=pt,this.z=Ft,this.o=sr,this.e=Yt,this.v=!1,this.n=this.p=null}function yr(pt,Ft,sr,Yt,lr){var Pr,Rr,Zr=[],cn=[];if(pt.forEach(function(Fn){if(!((Vn=Fn.length-1)<=0)){var Vn,ti,Jr=Fn[0],$n=Fn[Vn];if(mr(Jr,$n)){if(!Jr[2]&&!$n[2]){for(lr.lineStart(),Pr=0;Pr<Vn;++Pr)lr.point((Jr=Fn[Pr])[0],Jr[1]);return void lr.lineEnd()}$n[0]+=2*t}Zr.push(ti=new Dr(Jr,Fn,null,!0)),cn.push(ti.o=new Dr(Jr,null,ti,!1)),Zr.push(ti=new Dr($n,Fn,null,!1)),cn.push(ti.o=new Dr($n,null,ti,!0))}}),Zr.length){for(cn.sort(Ft),Br(Zr),Br(cn),Pr=0,Rr=cn.length;Pr<Rr;++Pr)cn[Pr].e=sr=!sr;for(var nn,mn,wn=Zr[0];;){for(var un=wn,Tn=!0;un.v;)if((un=un.n)===wn)return;nn=un.z,lr.lineStart();do{if(un.v=un.o.v=!0,un.e){if(Tn)for(Pr=0,Rr=nn.length;Pr<Rr;++Pr)lr.point((mn=nn[Pr])[0],mn[1]);else Yt(un.x,un.n.x,1,lr);un=un.n}else{if(Tn)for(nn=un.p.z,Pr=nn.length-1;Pr>=0;--Pr)lr.point((mn=nn[Pr])[0],mn[1]);else Yt(un.x,un.p.x,-1,lr);un=un.p}nn=(un=un.o).z,Tn=!Tn}while(!un.v);lr.lineEnd()}}}function Br(pt){if(Ft=pt.length){for(var Ft,sr,Yt=0,lr=pt[0];++Yt<Ft;)lr.n=sr=pt[Yt],sr.p=lr,lr=sr;lr.n=sr=pt[0],sr.p=lr}}Vt.invert=Vt;var Kr=x();function an(pt){return f(pt[0])<=i?pt[0]:T(pt[0])*((f(pt[0])+i)%s-i)}function Ln(pt,Ft){var sr=an(Ft),Yt=Ft[1],lr=_(Yt),Pr=[_(sr),-m(sr),0],Rr=0,Zr=0;Kr.reset(),lr===1?Yt=n+t:lr===-1&&(Yt=-n-t);for(var cn=0,nn=pt.length;cn<nn;++cn)if(wn=(mn=pt[cn]).length)for(var mn,wn,un=mn[wn-1],Tn=an(un),Fn=un[1]/2+h,Vn=_(Fn),ti=m(Fn),Jr=0;Jr<wn;++Jr,Tn=In,Vn=Kn,ti=_i,un=$n){var $n=mn[Jr],In=an($n),jn=$n[1]/2+h,Kn=_(jn),_i=m(jn),Si=In-Tn,En=Si>=0?1:-1,Pi=En*Si,Ai=Pi>i,pi=Vn*Kn;if(Kr.add(v(pi*En*_(Pi),ti*_i+pi*m(Pi))),Rr+=Ai?Si+En*s:Si,Ai^Tn>=sr^In>=sr){var Ii=he(se(un),se($n));xe(Ii);var Ti=he(Pr,Ii);xe(Ti);var Ki=(Ai^Si>=0?-1:1)*I(Ti[2]);(Yt>Ki||Yt===Ki&&(Ii[0]||Ii[1]))&&(Zr+=Ai^Si>=0?1:-1)}}return(Rr<-t||Rr<t&&Kr<-t)^1&Zr}function Pn(pt,Ft,sr,Yt){return function(lr){var Pr,Rr,Zr,cn=Ft(lr),nn=cr(),mn=Ft(nn),wn=!1,un={point:Tn,lineStart:Vn,lineEnd:ti,polygonStart:function(){un.point=Jr,un.lineStart=$n,un.lineEnd=In,Rr=[],Pr=[]},polygonEnd:function(){un.point=Tn,un.lineStart=Vn,un.lineEnd=ti,Rr=p.merge(Rr);var jn=Ln(Pr,Yt);Rr.length?(wn||(lr.polygonStart(),wn=!0),yr(Rr,tn,jn,sr,lr)):jn&&(wn||(lr.polygonStart(),wn=!0),lr.lineStart(),sr(null,null,1,lr),lr.lineEnd()),wn&&(lr.polygonEnd(),wn=!1),Rr=Pr=null},sphere:function(){lr.polygonStart(),lr.lineStart(),sr(null,null,1,lr),lr.lineEnd(),lr.polygonEnd()}};function Tn(jn,Kn){pt(jn,Kn)&&lr.point(jn,Kn)}function Fn(jn,Kn){cn.point(jn,Kn)}function Vn(){un.point=Fn,cn.lineStart()}function ti(){un.point=Tn,cn.lineEnd()}function Jr(jn,Kn){Zr.push([jn,Kn]),mn.point(jn,Kn)}function $n(){mn.lineStart(),Zr=[]}function In(){Jr(Zr[0][0],Zr[0][1]),mn.lineEnd();var jn,Kn,_i,Si,En=mn.clean(),Pi=nn.result(),Ai=Pi.length;if(Zr.pop(),Pr.push(Zr),Zr=null,Ai)if(1&En){if((Kn=(_i=Pi[0]).length-1)>0){for(wn||(lr.polygonStart(),wn=!0),lr.lineStart(),jn=0;jn<Kn;++jn)lr.point((Si=_i[jn])[0],Si[1]);lr.lineEnd()}}else Ai>1&&2&En&&Pi.push(Pi.pop().concat(Pi.shift())),Rr.push(Pi.filter(An))}return un}}function An(pt){return pt.length>1}function tn(pt,Ft){return((pt=pt.x)[0]<0?pt[1]-n-t:n-pt[1])-((Ft=Ft.x)[0]<0?Ft[1]-n-t:n-Ft[1])}var zr=Pn(function(){return!0},function(pt){var Ft,sr=NaN,Yt=NaN,lr=NaN;return{lineStart:function(){pt.lineStart(),Ft=1},point:function(Pr,Rr){var Zr=Pr>0?i:-i,cn=f(Pr-sr);f(cn-i)<t?(pt.point(sr,Yt=(Yt+Rr)/2>0?n:-n),pt.point(lr,Yt),pt.lineEnd(),pt.lineStart(),pt.point(Zr,Yt),pt.point(Pr,Yt),Ft=0):lr!==Zr&&cn>=i&&(f(sr-lr)<t&&(sr-=lr*t),f(Pr-Zr)<t&&(Pr-=Zr*t),Yt=function(nn,mn,wn,un){var Tn,Fn,Vn=_(nn-wn);return f(Vn)>t?d((_(mn)*(Fn=m(un))*_(wn)-_(un)*(Tn=m(mn))*_(nn))/(Tn*Fn*Vn)):(mn+un)/2}(sr,Yt,Pr,Rr),pt.point(lr,Yt),pt.lineEnd(),pt.lineStart(),pt.point(Zr,Yt),Ft=0),pt.point(sr=Pr,Yt=Rr),lr=Zr},lineEnd:function(){pt.lineEnd(),sr=Yt=NaN},clean:function(){return 2-Ft}}},function(pt,Ft,sr,Yt){var lr;if(pt==null)lr=sr*n,Yt.point(-i,lr),Yt.point(0,lr),Yt.point(i,lr),Yt.point(i,0),Yt.point(i,-lr),Yt.point(0,-lr),Yt.point(-i,-lr),Yt.point(-i,0),Yt.point(-i,lr);else if(f(pt[0]-Ft[0])>t){var Pr=pt[0]<Ft[0]?i:-i;lr=sr*Pr/2,Yt.point(-Pr,lr),Yt.point(0,lr),Yt.point(Pr,lr)}else Yt.point(Ft[0],Ft[1])},[-i,-n]);function Ar(pt){var Ft=m(pt),sr=6*l,Yt=Ft>0,lr=f(Ft)>t;function Pr(cn,nn){return m(cn)*m(nn)>Ft}function Rr(cn,nn,mn){var wn=[1,0,0],un=he(se(cn),se(nn)),Tn=oe(un,un),Fn=un[0],Vn=Tn-Fn*Fn;if(!Vn)return!mn&&cn;var ti=Ft*Tn/Vn,Jr=-Ft*Fn/Vn,$n=he(wn,un),In=de(wn,ti);le(In,de(un,Jr));var jn=$n,Kn=oe(In,jn),_i=oe(jn,jn),Si=Kn*Kn-_i*(oe(In,In)-1);if(!(Si<0)){var En=k(Si),Pi=de(jn,(-Kn-En)/_i);if(le(Pi,In),Pi=ne(Pi),!mn)return Pi;var Ai,pi=cn[0],Ii=nn[0],Ti=cn[1],Ki=nn[1];Ii<pi&&(Ai=pi,pi=Ii,Ii=Ai);var Qn=Ii-pi,Gi=f(Qn-i)<t;if(!Gi&&Ki<Ti&&(Ai=Ti,Ti=Ki,Ki=Ai),Gi||Qn<t?Gi?Ti+Ki>0^Pi[1]<(f(Pi[0]-pi)<t?Ti:Ki):Ti<=Pi[1]&&Pi[1]<=Ki:Qn>i^(pi<=Pi[0]&&Pi[0]<=Ii)){var Ua=de(jn,(-Kn+En)/_i);return le(Ua,In),[Pi,ne(Ua)]}}}function Zr(cn,nn){var mn=Yt?pt:i-pt,wn=0;return cn<-mn?wn|=1:cn>mn&&(wn|=2),nn<-mn?wn|=4:nn>mn&&(wn|=8),wn}return Pn(Pr,function(cn){var nn,mn,wn,un,Tn;return{lineStart:function(){un=wn=!1,Tn=1},point:function(Fn,Vn){var ti,Jr=[Fn,Vn],$n=Pr(Fn,Vn),In=Yt?$n?0:Zr(Fn,Vn):$n?Zr(Fn+(Fn<0?i:-i),Vn):0;if(!nn&&(un=wn=$n)&&cn.lineStart(),$n!==wn&&(!(ti=Rr(nn,Jr))||mr(nn,ti)||mr(Jr,ti))&&(Jr[2]=1),$n!==wn)Tn=0,$n?(cn.lineStart(),ti=Rr(Jr,nn),cn.point(ti[0],ti[1])):(ti=Rr(nn,Jr),cn.point(ti[0],ti[1],2),cn.lineEnd()),nn=ti;else if(lr&&nn&&Yt^$n){var jn;In&mn||!(jn=Rr(Jr,nn,!0))||(Tn=0,Yt?(cn.lineStart(),cn.point(jn[0][0],jn[0][1]),cn.point(jn[1][0],jn[1][1]),cn.lineEnd()):(cn.point(jn[1][0],jn[1][1]),cn.lineEnd(),cn.lineStart(),cn.point(jn[0][0],jn[0][1],3)))}!$n||nn&&mr(nn,Jr)||cn.point(Jr[0],Jr[1]),nn=Jr,wn=$n,mn=In},lineEnd:function(){wn&&cn.lineEnd(),nn=null},clean:function(){return Tn|(un&&wn)<<1}}},function(cn,nn,mn,wn){dr(wn,pt,sr,mn,cn,nn)},Yt?[0,-pt]:[-i,pt-i])}function qr(pt,Ft,sr,Yt){function lr(nn,mn){return pt<=nn&&nn<=sr&&Ft<=mn&&mn<=Yt}function Pr(nn,mn,wn,un){var Tn=0,Fn=0;if(nn==null||(Tn=Rr(nn,wn))!==(Fn=Rr(mn,wn))||cn(nn,mn)<0^wn>0)do un.point(Tn===0||Tn===3?pt:sr,Tn>1?Yt:Ft);while((Tn=(Tn+wn+4)%4)!==Fn);else un.point(mn[0],mn[1])}function Rr(nn,mn){return f(nn[0]-pt)<t?mn>0?0:3:f(nn[0]-sr)<t?mn>0?2:1:f(nn[1]-Ft)<t?mn>0?1:0:mn>0?3:2}function Zr(nn,mn){return cn(nn.x,mn.x)}function cn(nn,mn){var wn=Rr(nn,1),un=Rr(mn,1);return wn!==un?wn-un:wn===0?mn[1]-nn[1]:wn===1?nn[0]-mn[0]:wn===2?nn[1]-mn[1]:mn[0]-nn[0]}return function(nn){var mn,wn,un,Tn,Fn,Vn,ti,Jr,$n,In,jn,Kn=nn,_i=cr(),Si={point:En,lineStart:function(){Si.point=Pi,wn&&wn.push(un=[]),In=!0,$n=!1,ti=Jr=NaN},lineEnd:function(){mn&&(Pi(Tn,Fn),Vn&&$n&&_i.rejoin(),mn.push(_i.result())),Si.point=En,$n&&Kn.lineEnd()},polygonStart:function(){Kn=_i,mn=[],wn=[],jn=!0},polygonEnd:function(){var Ai=function(){for(var Ti=0,Ki=0,Qn=wn.length;Ki<Qn;++Ki)for(var Gi,Ua,ts=wn[Ki],Bo=1,xo=ts.length,gi=ts[0],da=gi[0],bo=gi[1];Bo<xo;++Bo)Gi=da,Ua=bo,gi=ts[Bo],da=gi[0],bo=gi[1],Ua<=Yt?bo>Yt&&(da-Gi)*(Yt-Ua)>(bo-Ua)*(pt-Gi)&&++Ti:bo<=Yt&&(da-Gi)*(Yt-Ua)<(bo-Ua)*(pt-Gi)&&--Ti;return Ti}(),pi=jn&&Ai,Ii=(mn=p.merge(mn)).length;(pi||Ii)&&(nn.polygonStart(),pi&&(nn.lineStart(),Pr(null,null,1,nn),nn.lineEnd()),Ii&&yr(mn,Zr,Ai,Pr,nn),nn.polygonEnd()),Kn=nn,mn=wn=un=null}};function En(Ai,pi){lr(Ai,pi)&&Kn.point(Ai,pi)}function Pi(Ai,pi){var Ii=lr(Ai,pi);if(wn&&un.push([Ai,pi]),In)Tn=Ai,Fn=pi,Vn=Ii,In=!1,Ii&&(Kn.lineStart(),Kn.point(Ai,pi));else if(Ii&&$n)Kn.point(Ai,pi);else{var Ti=[ti=Math.max(-1e9,Math.min(1e9,ti)),Jr=Math.max(-1e9,Math.min(1e9,Jr))],Ki=[Ai=Math.max(-1e9,Math.min(1e9,Ai)),pi=Math.max(-1e9,Math.min(1e9,pi))];(function(Qn,Gi,Ua,ts,Bo,xo){var gi,da=Qn[0],bo=Qn[1],Yi=0,ka=1,Ya=Gi[0]-da,ea=Gi[1]-bo;if(gi=Ua-da,Ya||!(gi>0)){if(gi/=Ya,Ya<0){if(gi<Yi)return;gi<ka&&(ka=gi)}else if(Ya>0){if(gi>ka)return;gi>Yi&&(Yi=gi)}if(gi=Bo-da,Ya||!(gi<0)){if(gi/=Ya,Ya<0){if(gi>ka)return;gi>Yi&&(Yi=gi)}else if(Ya>0){if(gi<Yi)return;gi<ka&&(ka=gi)}if(gi=ts-bo,ea||!(gi>0)){if(gi/=ea,ea<0){if(gi<Yi)return;gi<ka&&(ka=gi)}else if(ea>0){if(gi>ka)return;gi>Yi&&(Yi=gi)}if(gi=xo-bo,ea||!(gi<0)){if(gi/=ea,ea<0){if(gi>ka)return;gi>Yi&&(Yi=gi)}else if(ea>0){if(gi<Yi)return;gi<ka&&(ka=gi)}return Yi>0&&(Qn[0]=da+Yi*Ya,Qn[1]=bo+Yi*ea),ka<1&&(Gi[0]=da+ka*Ya,Gi[1]=bo+ka*ea),!0}}}}})(Ti,Ki,pt,Ft,sr,Yt)?($n||(Kn.lineStart(),Kn.point(Ti[0],Ti[1])),Kn.point(Ki[0],Ki[1]),Ii||Kn.lineEnd(),jn=!1):Ii&&(Kn.lineStart(),Kn.point(Ai,pi),jn=!1)}ti=Ai,Jr=pi,$n=Ii}return Si}}var On,Fr,on,Mn=x(),bn={sphere:S,point:S,lineStart:function(){bn.point=tr,bn.lineEnd=Dn},lineEnd:S,polygonStart:S,polygonEnd:S};function Dn(){bn.point=bn.lineEnd=S}function tr(pt,Ft){On=pt*=l,Fr=_(Ft*=l),on=m(Ft),bn.point=Ot}function Ot(pt,Ft){pt*=l;var sr=_(Ft*=l),Yt=m(Ft),lr=f(pt-On),Pr=m(lr),Rr=Yt*_(lr),Zr=on*sr-Fr*Yt*Pr,cn=Fr*sr+on*Yt*Pr;Mn.add(v(k(Rr*Rr+Zr*Zr),cn)),On=pt,Fr=sr,on=Yt}function Ht(pt){return Mn.reset(),Q(pt,bn),+Mn}var fr=[null,null],Tr={type:"LineString",coordinates:fr};function Wr(pt,Ft){return fr[0]=pt,fr[1]=Ft,Ht(Tr)}var Gr={Feature:function(pt,Ft){return br(pt.geometry,Ft)},FeatureCollection:function(pt,Ft){for(var sr=pt.features,Yt=-1,lr=sr.length;++Yt<lr;)if(br(sr[Yt].geometry,Ft))return!0;return!1}},wr={Sphere:function(){return!0},Point:function(pt,Ft){return Sr(pt.coordinates,Ft)},MultiPoint:function(pt,Ft){for(var sr=pt.coordinates,Yt=-1,lr=sr.length;++Yt<lr;)if(Sr(sr[Yt],Ft))return!0;return!1},LineString:function(pt,Ft){return Ir(pt.coordinates,Ft)},MultiLineString:function(pt,Ft){for(var sr=pt.coordinates,Yt=-1,lr=sr.length;++Yt<lr;)if(Ir(sr[Yt],Ft))return!0;return!1},Polygon:function(pt,Ft){return Er(pt.coordinates,Ft)},MultiPolygon:function(pt,Ft){for(var sr=pt.coordinates,Yt=-1,lr=sr.length;++Yt<lr;)if(Er(sr[Yt],Ft))return!0;return!1},GeometryCollection:function(pt,Ft){for(var sr=pt.geometries,Yt=-1,lr=sr.length;++Yt<lr;)if(br(sr[Yt],Ft))return!0;return!1}};function br(pt,Ft){return!(!pt||!wr.hasOwnProperty(pt.type))&&wr[pt.type](pt,Ft)}function Sr(pt,Ft){return Wr(pt,Ft)===0}function Ir(pt,Ft){for(var sr,Yt,lr,Pr=0,Rr=pt.length;Pr<Rr;Pr++){if((Yt=Wr(pt[Pr],Ft))===0||Pr>0&&(lr=Wr(pt[Pr],pt[Pr-1]))>0&&sr<=lr&&Yt<=lr&&(sr+Yt-lr)*(1-Math.pow((sr-Yt)/lr,2))<1e-12*lr)return!0;sr=Yt}return!1}function Er(pt,Ft){return!!Ln(pt.map(Xr),fn(Ft))}function Xr(pt){return(pt=pt.map(fn)).pop(),pt}function fn(pt){return[pt[0]*l,pt[1]*l]}function _n(pt,Ft,sr){var Yt=p.range(pt,Ft-t,sr).concat(Ft);return function(lr){return Yt.map(function(Pr){return[lr,Pr]})}}function en(pt,Ft,sr){var Yt=p.range(pt,Ft-t,sr).concat(Ft);return function(lr){return Yt.map(function(Pr){return[Pr,lr]})}}function yn(){var pt,Ft,sr,Yt,lr,Pr,Rr,Zr,cn,nn,mn,wn,un=10,Tn=un,Fn=90,Vn=360,ti=2.5;function Jr(){return{type:"MultiLineString",coordinates:$n()}}function $n(){return p.range(c(Yt/Fn)*Fn,sr,Fn).map(mn).concat(p.range(c(Zr/Vn)*Vn,Rr,Vn).map(wn)).concat(p.range(c(Ft/un)*un,pt,un).filter(function(In){return f(In%Fn)>t}).map(cn)).concat(p.range(c(Pr/Tn)*Tn,lr,Tn).filter(function(In){return f(In%Vn)>t}).map(nn))}return Jr.lines=function(){return $n().map(function(In){return{type:"LineString",coordinates:In}})},Jr.outline=function(){return{type:"Polygon",coordinates:[mn(Yt).concat(wn(Rr).slice(1),mn(sr).reverse().slice(1),wn(Zr).reverse().slice(1))]}},Jr.extent=function(In){return arguments.length?Jr.extentMajor(In).extentMinor(In):Jr.extentMinor()},Jr.extentMajor=function(In){return arguments.length?(Yt=+In[0][0],sr=+In[1][0],Zr=+In[0][1],Rr=+In[1][1],Yt>sr&&(In=Yt,Yt=sr,sr=In),Zr>Rr&&(In=Zr,Zr=Rr,Rr=In),Jr.precision(ti)):[[Yt,Zr],[sr,Rr]]},Jr.extentMinor=function(In){return arguments.length?(Ft=+In[0][0],pt=+In[1][0],Pr=+In[0][1],lr=+In[1][1],Ft>pt&&(In=Ft,Ft=pt,pt=In),Pr>lr&&(In=Pr,Pr=lr,lr=In),Jr.precision(ti)):[[Ft,Pr],[pt,lr]]},Jr.step=function(In){return arguments.length?Jr.stepMajor(In).stepMinor(In):Jr.stepMinor()},Jr.stepMajor=function(In){return arguments.length?(Fn=+In[0],Vn=+In[1],Jr):[Fn,Vn]},Jr.stepMinor=function(In){return arguments.length?(un=+In[0],Tn=+In[1],Jr):[un,Tn]},Jr.precision=function(In){return arguments.length?(ti=+In,cn=_n(Pr,lr,90),nn=en(Ft,pt,ti),mn=_n(Zr,Rr,90),wn=en(Yt,sr,ti),Jr):ti},Jr.extentMajor([[-180,-90+t],[180,90-t]]).extentMinor([[-180,-80-t],[180,80+t]])}function Vr(pt){return pt}var Ur,ln,gn,Sn,oi=x(),Yn=x(),vn={point:S,lineStart:S,lineEnd:S,polygonStart:function(){vn.lineStart=ri,vn.lineEnd=Da},polygonEnd:function(){vn.lineStart=vn.lineEnd=vn.point=S,oi.add(f(Yn)),Yn.reset()},result:function(){var pt=oi/2;return oi.reset(),pt}};function ri(){vn.point=hi}function hi(pt,Ft){vn.point=Xi,Ur=gn=pt,ln=Sn=Ft}function Xi(pt,Ft){Yn.add(Sn*pt-gn*Ft),gn=pt,Sn=Ft}function Da(){Xi(Ur,ln)}var ia=1/0,_a=ia,Mi=-ia,ji=Mi,mo={point:function(pt,Ft){pt<ia&&(ia=pt),pt>Mi&&(Mi=pt),Ft<_a&&(_a=Ft),Ft>ji&&(ji=Ft)},lineStart:S,lineEnd:S,polygonStart:S,polygonEnd:S,result:function(){var pt=[[ia,_a],[Mi,ji]];return Mi=ji=-(_a=ia=1/0),pt}},Ho,es,Xa,$a,qo=0,Hi=0,Lo=0,go=0,wa=0,Qa=0,vo=0,Mo=0,Na=0,pa={point:Ja,lineStart:Os,lineEnd:Ts,polygonStart:function(){pa.lineStart=ss,pa.lineEnd=js},polygonEnd:function(){pa.point=Ja,pa.lineStart=Os,pa.lineEnd=Ts},result:function(){var pt=Na?[vo/Na,Mo/Na]:Qa?[go/Qa,wa/Qa]:Lo?[qo/Lo,Hi/Lo]:[NaN,NaN];return qo=Hi=Lo=go=wa=Qa=vo=Mo=Na=0,pt}};function Ja(pt,Ft){qo+=pt,Hi+=Ft,++Lo}function Os(){pa.point=Ns}function Ns(pt,Ft){pa.point=qi,Ja(Xa=pt,$a=Ft)}function qi(pt,Ft){var sr=pt-Xa,Yt=Ft-$a,lr=k(sr*sr+Yt*Yt);go+=lr*(Xa+pt)/2,wa+=lr*($a+Ft)/2,Qa+=lr,Ja(Xa=pt,$a=Ft)}function Ts(){pa.point=Ja}function ss(){pa.point=Us}function js(){Ds(Ho,es)}function Us(pt,Ft){pa.point=Ds,Ja(Ho=Xa=pt,es=$a=Ft)}function Ds(pt,Ft){var sr=pt-Xa,Yt=Ft-$a,lr=k(sr*sr+Yt*Yt);go+=lr*(Xa+pt)/2,wa+=lr*($a+Ft)/2,Qa+=lr,vo+=(lr=$a*pt-Xa*Ft)*(Xa+pt),Mo+=lr*($a+Ft),Na+=3*lr,Ja(Xa=pt,$a=Ft)}function Vs(pt){this._context=pt}Vs.prototype={_radius:4.5,pointRadius:function(pt){return this._radius=pt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(pt,Ft){switch(this._point){case 0:this._context.moveTo(pt,Ft),this._point=1;break;case 1:this._context.lineTo(pt,Ft);break;default:this._context.moveTo(pt+this._radius,Ft),this._context.arc(pt,Ft,this._radius,0,s)}},result:S};var Co,Po,Go,Yo,Wo,ls=x(),yo={point:S,lineStart:function(){yo.point=ks},lineEnd:function(){Co&&fo(Po,Go),yo.point=S},polygonStart:function(){Co=!0},polygonEnd:function(){Co=null},result:function(){var pt=+ls;return ls.reset(),pt}};function ks(pt,Ft){yo.point=fo,Po=Yo=pt,Go=Wo=Ft}function fo(pt,Ft){Yo-=pt,Wo-=Ft,ls.add(k(Yo*Yo+Wo*Wo)),Yo=pt,Wo=Ft}function Zo(){this._string=[]}function As(pt){return"m0,"+pt+"a"+pt+","+pt+" 0 1,1 0,"+-2*pt+"a"+pt+","+pt+" 0 1,1 0,"+2*pt+"z"}function Io(pt){return function(Ft){var sr=new Ui;for(var Yt in pt)sr[Yt]=pt[Yt];return sr.stream=Ft,sr}}function Ui(){}function je(pt,Ft,sr){var Yt=pt.clipExtent&&pt.clipExtent();return pt.scale(150).translate([0,0]),Yt!=null&&pt.clipExtent(null),Q(sr,pt.stream(mo)),Ft(mo.result()),Yt!=null&&pt.clipExtent(Yt),pt}function Ge(pt,Ft,sr){return je(pt,function(Yt){var lr=Ft[1][0]-Ft[0][0],Pr=Ft[1][1]-Ft[0][1],Rr=Math.min(lr/(Yt[1][0]-Yt[0][0]),Pr/(Yt[1][1]-Yt[0][1])),Zr=+Ft[0][0]+(lr-Rr*(Yt[1][0]+Yt[0][0]))/2,cn=+Ft[0][1]+(Pr-Rr*(Yt[1][1]+Yt[0][1]))/2;pt.scale(150*Rr).translate([Zr,cn])},sr)}function tt(pt,Ft,sr){return Ge(pt,[[0,0],Ft],sr)}function ot(pt,Ft,sr){return je(pt,function(Yt){var lr=+Ft,Pr=lr/(Yt[1][0]-Yt[0][0]),Rr=(lr-Pr*(Yt[1][0]+Yt[0][0]))/2,Zr=-Pr*Yt[0][1];pt.scale(150*Pr).translate([Rr,Zr])},sr)}function yt(pt,Ft,sr){return je(pt,function(Yt){var lr=+Ft,Pr=lr/(Yt[1][1]-Yt[0][1]),Rr=-Pr*Yt[0][0],Zr=(lr-Pr*(Yt[1][1]+Yt[0][1]))/2;pt.scale(150*Pr).translate([Rr,Zr])},sr)}Zo.prototype={_radius:4.5,_circle:As(4.5),pointRadius:function(pt){return(pt=+pt)!==this._radius&&(this._radius=pt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(pt,Ft){switch(this._point){case 0:this._string.push("M",pt,",",Ft),this._point=1;break;case 1:this._string.push("L",pt,",",Ft);break;default:this._circle==null&&(this._circle=As(this._radius)),this._string.push("M",pt,",",Ft,this._circle)}},result:function(){if(this._string.length){var pt=this._string.join("");return this._string=[],pt}return null}},Ui.prototype={constructor:Ui,point:function(pt,Ft){this.stream.point(pt,Ft)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var gt=m(30*l);function Mt(pt,Ft){return+Ft?function(sr,Yt){function lr(Pr,Rr,Zr,cn,nn,mn,wn,un,Tn,Fn,Vn,ti,Jr,$n){var In=wn-Pr,jn=un-Rr,Kn=In*In+jn*jn;if(Kn>4*Yt&&Jr--){var _i=cn+Fn,Si=nn+Vn,En=mn+ti,Pi=k(_i*_i+Si*Si+En*En),Ai=I(En/=Pi),pi=f(f(En)-1)<t||f(Zr-Tn)<t?(Zr+Tn)/2:v(Si,_i),Ii=sr(pi,Ai),Ti=Ii[0],Ki=Ii[1],Qn=Ti-Pr,Gi=Ki-Rr,Ua=jn*Qn-In*Gi;(Ua*Ua/Kn>Yt||f((In*Qn+jn*Gi)/Kn-.5)>.3||cn*Fn+nn*Vn+mn*ti<gt)&&(lr(Pr,Rr,Zr,cn,nn,mn,Ti,Ki,pi,_i/=Pi,Si/=Pi,En,Jr,$n),$n.point(Ti,Ki),lr(Ti,Ki,pi,_i,Si,En,wn,un,Tn,Fn,Vn,ti,Jr,$n))}}return function(Pr){var Rr,Zr,cn,nn,mn,wn,un,Tn,Fn,Vn,ti,Jr,$n={point:In,lineStart:jn,lineEnd:_i,polygonStart:function(){Pr.polygonStart(),$n.lineStart=Si},polygonEnd:function(){Pr.polygonEnd(),$n.lineStart=jn}};function In(Ai,pi){Ai=sr(Ai,pi),Pr.point(Ai[0],Ai[1])}function jn(){Tn=NaN,$n.point=Kn,Pr.lineStart()}function Kn(Ai,pi){var Ii=se([Ai,pi]),Ti=sr(Ai,pi);lr(Tn,Fn,un,Vn,ti,Jr,Tn=Ti[0],Fn=Ti[1],un=Ai,Vn=Ii[0],ti=Ii[1],Jr=Ii[2],16,Pr),Pr.point(Tn,Fn)}function _i(){$n.point=In,Pr.lineEnd()}function Si(){jn(),$n.point=En,$n.lineEnd=Pi}function En(Ai,pi){Kn(Rr=Ai,pi),Zr=Tn,cn=Fn,nn=Vn,mn=ti,wn=Jr,$n.point=Kn}function Pi(){lr(Tn,Fn,un,Vn,ti,Jr,Zr,cn,Rr,nn,mn,wn,16,Pr),$n.lineEnd=_i,_i()}return $n}}(pt,Ft):function(sr){return Io({point:function(Yt,lr){Yt=sr(Yt,lr),this.stream.point(Yt[0],Yt[1])}})}(pt)}var $t=Io({point:function(pt,Ft){this.stream.point(pt*l,Ft*l)}});function er(pt,Ft,sr,Yt,lr){function Pr(Rr,Zr){return[Ft+pt*(Rr*=Yt),sr-pt*(Zr*=lr)]}return Pr.invert=function(Rr,Zr){return[(Rr-Ft)/pt*Yt,(sr-Zr)/pt*lr]},Pr}function Xt(pt,Ft,sr,Yt,lr,Pr){var Rr=m(Pr),Zr=_(Pr),cn=Rr*pt,nn=Zr*pt,mn=Rr/pt,wn=Zr/pt,un=(Zr*sr-Rr*Ft)/pt,Tn=(Zr*Ft+Rr*sr)/pt;function Fn(Vn,ti){return[cn*(Vn*=Yt)-nn*(ti*=lr)+Ft,sr-nn*Vn-cn*ti]}return Fn.invert=function(Vn,ti){return[Yt*(mn*Vn-wn*ti+un),lr*(Tn-wn*Vn-mn*ti)]},Fn}function ir(pt){return hr(function(){return pt})()}function hr(pt){var Ft,sr,Yt,lr,Pr,Rr,Zr,cn,nn,mn,wn=150,un=480,Tn=250,Fn=0,Vn=0,ti=0,Jr=0,$n=0,In=0,jn=1,Kn=1,_i=null,Si=zr,En=null,Pi=Vr,Ai=.5;function pi(Qn){return cn(Qn[0]*l,Qn[1]*l)}function Ii(Qn){return(Qn=cn.invert(Qn[0],Qn[1]))&&[Qn[0]*a,Qn[1]*a]}function Ti(){var Qn=Xt(wn,0,0,jn,Kn,In).apply(null,Ft(Fn,Vn)),Gi=(In?Xt:er)(wn,un-Qn[0],Tn-Qn[1],jn,Kn,In);return sr=rr(ti,Jr,$n),Zr=Rt(Ft,Gi),cn=Rt(sr,Zr),Rr=Mt(Zr,Ai),Ki()}function Ki(){return nn=mn=null,pi}return pi.stream=function(Qn){return nn&&mn===Qn?nn:nn=$t(function(Gi){return Io({point:function(Ua,ts){var Bo=Gi(Ua,ts);return this.stream.point(Bo[0],Bo[1])}})}(sr)(Si(Rr(Pi(mn=Qn)))))},pi.preclip=function(Qn){return arguments.length?(Si=Qn,_i=void 0,Ki()):Si},pi.postclip=function(Qn){return arguments.length?(Pi=Qn,En=Yt=lr=Pr=null,Ki()):Pi},pi.clipAngle=function(Qn){return arguments.length?(Si=+Qn?Ar(_i=Qn*l):(_i=null,zr),Ki()):_i*a},pi.clipExtent=function(Qn){return arguments.length?(Pi=Qn==null?(En=Yt=lr=Pr=null,Vr):qr(En=+Qn[0][0],Yt=+Qn[0][1],lr=+Qn[1][0],Pr=+Qn[1][1]),Ki()):En==null?null:[[En,Yt],[lr,Pr]]},pi.scale=function(Qn){return arguments.length?(wn=+Qn,Ti()):wn},pi.translate=function(Qn){return arguments.length?(un=+Qn[0],Tn=+Qn[1],Ti()):[un,Tn]},pi.center=function(Qn){return arguments.length?(Fn=Qn[0]%360*l,Vn=Qn[1]%360*l,Ti()):[Fn*a,Vn*a]},pi.rotate=function(Qn){return arguments.length?(ti=Qn[0]%360*l,Jr=Qn[1]%360*l,$n=Qn.length>2?Qn[2]%360*l:0,Ti()):[ti*a,Jr*a,$n*a]},pi.angle=function(Qn){return arguments.length?(In=Qn%360*l,Ti()):In*a},pi.reflectX=function(Qn){return arguments.length?(jn=Qn?-1:1,Ti()):jn<0},pi.reflectY=function(Qn){return arguments.length?(Kn=Qn?-1:1,Ti()):Kn<0},pi.precision=function(Qn){return arguments.length?(Rr=Mt(Zr,Ai=Qn*Qn),Ki()):k(Ai)},pi.fitExtent=function(Qn,Gi){return Ge(pi,Qn,Gi)},pi.fitSize=function(Qn,Gi){return tt(pi,Qn,Gi)},pi.fitWidth=function(Qn,Gi){return ot(pi,Qn,Gi)},pi.fitHeight=function(Qn,Gi){return yt(pi,Qn,Gi)},function(){return Ft=pt.apply(this,arguments),pi.invert=Ft.invert&&Ii,Ti()}}function xr(pt){var Ft=0,sr=i/3,Yt=hr(pt),lr=Yt(Ft,sr);return lr.parallels=function(Pr){return arguments.length?Yt(Ft=Pr[0]*l,sr=Pr[1]*l):[Ft*a,sr*a]},lr}function _r(pt,Ft){var sr=_(pt),Yt=(sr+_(Ft))/2;if(f(Yt)<t)return function(Zr){var cn=m(Zr);function nn(mn,wn){return[mn*cn,_(wn)/cn]}return nn.invert=function(mn,wn){return[mn/cn,I(wn*cn)]},nn}(pt);var lr=1+sr*(2*Yt-sr),Pr=k(lr)/Yt;function Rr(Zr,cn){var nn=k(lr-2*Yt*_(cn))/Yt;return[nn*_(Zr*=Yt),Pr-nn*m(Zr)]}return Rr.invert=function(Zr,cn){var nn=Pr-cn,mn=v(Zr,f(nn))*T(nn);return nn*Yt<0&&(mn-=i*T(Zr)*T(nn)),[mn/Yt,I((lr-(Zr*Zr+nn*nn)*Yt*Yt)/(2*Yt))]},Rr}function Or(){return xr(_r).scale(155.424).center([0,33.6442])}function rn(){return Or().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function dn(pt){return function(Ft,sr){var Yt=m(Ft),lr=m(sr),Pr=pt(Yt*lr);return[Pr*lr*_(Ft),Pr*_(sr)]}}function Cn(pt){return function(Ft,sr){var Yt=k(Ft*Ft+sr*sr),lr=pt(Yt),Pr=_(lr),Rr=m(lr);return[v(Ft*Pr,Yt*Rr),I(Yt&&sr*Pr/Yt)]}}var zn=dn(function(pt){return k(2/(1+pt))});zn.invert=Cn(function(pt){return 2*I(pt/2)});var Hn=dn(function(pt){return(pt=M(pt))&&pt/_(pt)});function Rn(pt,Ft){return[pt,g(L((n+Ft)/2))]}function di(pt){var Ft,sr,Yt,lr=ir(pt),Pr=lr.center,Rr=lr.scale,Zr=lr.translate,cn=lr.clipExtent,nn=null;function mn(){var wn=i*Rr(),un=lr(gr(lr.rotate()).invert([0,0]));return cn(nn==null?[[un[0]-wn,un[1]-wn],[un[0]+wn,un[1]+wn]]:pt===Rn?[[Math.max(un[0]-wn,nn),Ft],[Math.min(un[0]+wn,sr),Yt]]:[[nn,Math.max(un[1]-wn,Ft)],[sr,Math.min(un[1]+wn,Yt)]])}return lr.scale=function(wn){return arguments.length?(Rr(wn),mn()):Rr()},lr.translate=function(wn){return arguments.length?(Zr(wn),mn()):Zr()},lr.center=function(wn){return arguments.length?(Pr(wn),mn()):Pr()},lr.clipExtent=function(wn){return arguments.length?(wn==null?nn=Ft=sr=Yt=null:(nn=+wn[0][0],Ft=+wn[0][1],sr=+wn[1][0],Yt=+wn[1][1]),mn()):nn==null?null:[[nn,Ft],[sr,Yt]]},mn()}function wi(pt){return L((n+pt)/2)}function Ri(pt,Ft){var sr=m(pt),Yt=pt===Ft?_(pt):g(sr/m(Ft))/g(wi(Ft)/wi(pt)),lr=sr*w(wi(pt),Yt)/Yt;if(!Yt)return Rn;function Pr(Rr,Zr){lr>0?Zr<-n+t&&(Zr=-n+t):Zr>n-t&&(Zr=n-t);var cn=lr/w(wi(Zr),Yt);return[cn*_(Yt*Rr),lr-cn*m(Yt*Rr)]}return Pr.invert=function(Rr,Zr){var cn=lr-Zr,nn=T(Yt)*k(Rr*Rr+cn*cn),mn=v(Rr,f(cn))*T(cn);return cn*Yt<0&&(mn-=i*T(Rr)*T(cn)),[mn/Yt,2*d(w(lr/nn,1/Yt))-n]},Pr}function Di(pt,Ft){return[pt,Ft]}function Fi(pt,Ft){var sr=m(pt),Yt=pt===Ft?_(pt):(sr-m(Ft))/(Ft-pt),lr=sr/Yt+pt;if(f(Yt)<t)return Di;function Pr(Rr,Zr){var cn=lr-Zr,nn=Yt*Rr;return[cn*_(nn),lr-cn*m(nn)]}return Pr.invert=function(Rr,Zr){var cn=lr-Zr,nn=v(Rr,f(cn))*T(cn);return cn*Yt<0&&(nn-=i*T(Rr)*T(cn)),[nn/Yt,lr-T(Yt)*k(Rr*Rr+cn*cn)]},Pr}Hn.invert=Cn(function(pt){return pt}),Rn.invert=function(pt,Ft){return[pt,2*d(b(Ft))-n]},Di.invert=Di;var Ta=1.340264,xa=-.081106,aa=893e-6,oa=.003796,ba=k(3)/2;function ja(pt,Ft){var sr=I(ba*_(Ft)),Yt=sr*sr,lr=Yt*Yt*Yt;return[pt*m(sr)/(ba*(Ta+3*xa*Yt+lr*(7*aa+9*oa*Yt))),sr*(Ta+xa*Yt+lr*(aa+oa*Yt))]}function eo(pt,Ft){var sr=m(Ft),Yt=m(pt)*sr;return[sr*_(pt)/Yt,_(Ft)/Yt]}function to(pt,Ft){var sr=Ft*Ft,Yt=sr*sr;return[pt*(.8707-.131979*sr+Yt*(Yt*(.003971*sr-.001529*Yt)-.013791)),Ft*(1.007226+sr*(.015085+Yt*(.028874*sr-.044475-.005916*Yt)))]}function ro(pt,Ft){return[m(Ft)*_(pt),_(Ft)]}function no(pt,Ft){var sr=m(Ft),Yt=1+m(pt)*sr;return[sr*_(pt)/Yt,_(Ft)/Yt]}function Ci(pt,Ft){return[g(L((n+Ft)/2)),-pt]}ja.invert=function(pt,Ft){for(var sr,Yt=Ft,lr=Yt*Yt,Pr=lr*lr*lr,Rr=0;Rr<12&&(Pr=(lr=(Yt-=sr=(Yt*(Ta+xa*lr+Pr*(aa+oa*lr))-Ft)/(Ta+3*xa*lr+Pr*(7*aa+9*oa*lr)))*Yt)*lr*lr,!(f(sr)<1e-12));++Rr);return[ba*pt*(Ta+3*xa*lr+Pr*(7*aa+9*oa*lr))/m(Yt),I(_(Yt)/ba)]},eo.invert=Cn(d),to.invert=function(pt,Ft){var sr,Yt=Ft,lr=25;do{var Pr=Yt*Yt,Rr=Pr*Pr;Yt-=sr=(Yt*(1.007226+Pr*(.015085+Rr*(.028874*Pr-.044475-.005916*Rr)))-Ft)/(1.007226+Pr*(.045255+Rr*(.259866*Pr-.311325-.005916*11*Rr)))}while(f(sr)>t&&--lr>0);return[pt/(.8707+(Pr=Yt*Yt)*(Pr*(Pr*Pr*Pr*(.003971-.001529*Pr)-.013791)-.131979)),Yt]},ro.invert=Cn(I),no.invert=Cn(function(pt){return 2*d(pt)}),Ci.invert=function(pt,Ft){return[-Ft,2*d(b(pt))-n]},o.geoAlbers=rn,o.geoAlbersUsa=function(){var pt,Ft,sr,Yt,lr,Pr,Rr=rn(),Zr=Or().rotate([154,0]).center([-2,58.5]).parallels([55,65]),cn=Or().rotate([157,0]).center([-3,19.9]).parallels([8,18]),nn={point:function(un,Tn){Pr=[un,Tn]}};function mn(un){var Tn=un[0],Fn=un[1];return Pr=null,sr.point(Tn,Fn),Pr||(Yt.point(Tn,Fn),Pr)||(lr.point(Tn,Fn),Pr)}function wn(){return pt=Ft=null,mn}return mn.invert=function(un){var Tn=Rr.scale(),Fn=Rr.translate(),Vn=(un[0]-Fn[0])/Tn,ti=(un[1]-Fn[1])/Tn;return(ti>=.12&&ti<.234&&Vn>=-.425&&Vn<-.214?Zr:ti>=.166&&ti<.234&&Vn>=-.214&&Vn<-.115?cn:Rr).invert(un)},mn.stream=function(un){return pt&&Ft===un?pt:(Tn=[Rr.stream(Ft=un),Zr.stream(un),cn.stream(un)],Fn=Tn.length,pt={point:function(Vn,ti){for(var Jr=-1;++Jr<Fn;)Tn[Jr].point(Vn,ti)},sphere:function(){for(var Vn=-1;++Vn<Fn;)Tn[Vn].sphere()},lineStart:function(){for(var Vn=-1;++Vn<Fn;)Tn[Vn].lineStart()},lineEnd:function(){for(var Vn=-1;++Vn<Fn;)Tn[Vn].lineEnd()},polygonStart:function(){for(var Vn=-1;++Vn<Fn;)Tn[Vn].polygonStart()},polygonEnd:function(){for(var Vn=-1;++Vn<Fn;)Tn[Vn].polygonEnd()}});var Tn,Fn},mn.precision=function(un){return arguments.length?(Rr.precision(un),Zr.precision(un),cn.precision(un),wn()):Rr.precision()},mn.scale=function(un){return arguments.length?(Rr.scale(un),Zr.scale(.35*un),cn.scale(un),mn.translate(Rr.translate())):Rr.scale()},mn.translate=function(un){if(!arguments.length)return Rr.translate();var Tn=Rr.scale(),Fn=+un[0],Vn=+un[1];return sr=Rr.translate(un).clipExtent([[Fn-.455*Tn,Vn-.238*Tn],[Fn+.455*Tn,Vn+.238*Tn]]).stream(nn),Yt=Zr.translate([Fn-.307*Tn,Vn+.201*Tn]).clipExtent([[Fn-.425*Tn+t,Vn+.12*Tn+t],[Fn-.214*Tn-t,Vn+.234*Tn-t]]).stream(nn),lr=cn.translate([Fn-.205*Tn,Vn+.212*Tn]).clipExtent([[Fn-.214*Tn+t,Vn+.166*Tn+t],[Fn-.115*Tn-t,Vn+.234*Tn-t]]).stream(nn),wn()},mn.fitExtent=function(un,Tn){return Ge(mn,un,Tn)},mn.fitSize=function(un,Tn){return tt(mn,un,Tn)},mn.fitWidth=function(un,Tn){return ot(mn,un,Tn)},mn.fitHeight=function(un,Tn){return yt(mn,un,Tn)},mn.scale(1070)},o.geoArea=function(pt){return U.reset(),Q(pt,te),2*U},o.geoAzimuthalEqualArea=function(){return ir(zn).scale(124.75).clipAngle(179.999)},o.geoAzimuthalEqualAreaRaw=zn,o.geoAzimuthalEquidistant=function(){return ir(Hn).scale(79.4188).clipAngle(179.999)},o.geoAzimuthalEquidistantRaw=Hn,o.geoBounds=function(pt){var Ft,sr,Yt,lr,Pr,Rr,Zr;if(fe=Ae=-(we=be=1/0),Oe=[],Q(pt,Ye),sr=Oe.length){for(Oe.sort(dt),Ft=1,Pr=[Yt=Oe[0]];Ft<sr;++Ft)ut(Yt,(lr=Oe[Ft])[0])||ut(Yt,lr[1])?(st(Yt[0],lr[1])>st(Yt[0],Yt[1])&&(Yt[1]=lr[1]),st(lr[0],Yt[1])>st(Yt[0],Yt[1])&&(Yt[0]=lr[0])):Pr.push(Yt=lr);for(Rr=-1/0,Ft=0,Yt=Pr[sr=Pr.length-1];Ft<=sr;Yt=lr,++Ft)lr=Pr[Ft],(Zr=st(Yt[1],lr[0]))>Rr&&(Rr=Zr,we=lr[0],Ae=Yt[1])}return Oe=Fe=null,we===1/0||be===1/0?[[NaN,NaN],[NaN,NaN]]:[[we,be],[Ae,fe]]},o.geoCentroid=function(pt){qe=et=ze=Ue=We=Ze=nt=ft=xt=It=Et=0,Q(pt,Lt);var Ft=xt,sr=It,Yt=Et,lr=Ft*Ft+sr*sr+Yt*Yt;return lr<1e-12&&(Ft=Ze,sr=nt,Yt=ft,et<t&&(Ft=ze,sr=Ue,Yt=We),(lr=Ft*Ft+sr*sr+Yt*Yt)<1e-12)?[NaN,NaN]:[v(sr,Ft)*a,I(Yt/k(lr))*a]},o.geoCircle=function(){var pt,Ft,sr=wt([0,0]),Yt=wt(90),lr=wt(6),Pr={point:function(Zr,cn){pt.push(Zr=Ft(Zr,cn)),Zr[0]*=a,Zr[1]*=a}};function Rr(){var Zr=sr.apply(this,arguments),cn=Yt.apply(this,arguments)*l,nn=lr.apply(this,arguments)*l;return pt=[],Ft=rr(-Zr[0]*l,-Zr[1]*l,0).invert,dr(Pr,cn,nn,1),Zr={type:"Polygon",coordinates:[pt]},pt=Ft=null,Zr}return Rr.center=function(Zr){return arguments.length?(sr=typeof Zr=="function"?Zr:wt([+Zr[0],+Zr[1]]),Rr):sr},Rr.radius=function(Zr){return arguments.length?(Yt=typeof Zr=="function"?Zr:wt(+Zr),Rr):Yt},Rr.precision=function(Zr){return arguments.length?(lr=typeof Zr=="function"?Zr:wt(+Zr),Rr):lr},Rr},o.geoClipAntimeridian=zr,o.geoClipCircle=Ar,o.geoClipExtent=function(){var pt,Ft,sr,Yt=0,lr=0,Pr=960,Rr=500;return sr={stream:function(Zr){return pt&&Ft===Zr?pt:pt=qr(Yt,lr,Pr,Rr)(Ft=Zr)},extent:function(Zr){return arguments.length?(Yt=+Zr[0][0],lr=+Zr[0][1],Pr=+Zr[1][0],Rr=+Zr[1][1],pt=Ft=null,sr):[[Yt,lr],[Pr,Rr]]}}},o.geoClipRectangle=qr,o.geoConicConformal=function(){return xr(Ri).scale(109.5).parallels([30,30])},o.geoConicConformalRaw=Ri,o.geoConicEqualArea=Or,o.geoConicEqualAreaRaw=_r,o.geoConicEquidistant=function(){return xr(Fi).scale(131.154).center([0,13.9389])},o.geoConicEquidistantRaw=Fi,o.geoContains=function(pt,Ft){return(pt&&Gr.hasOwnProperty(pt.type)?Gr[pt.type]:br)(pt,Ft)},o.geoDistance=Wr,o.geoEqualEarth=function(){return ir(ja).scale(177.158)},o.geoEqualEarthRaw=ja,o.geoEquirectangular=function(){return ir(Di).scale(152.63)},o.geoEquirectangularRaw=Di,o.geoGnomonic=function(){return ir(eo).scale(144.049).clipAngle(60)},o.geoGnomonicRaw=eo,o.geoGraticule=yn,o.geoGraticule10=function(){return yn()()},o.geoIdentity=function(){var pt,Ft,sr,Yt,lr,Pr,Rr,Zr=1,cn=0,nn=0,mn=1,wn=1,un=0,Tn=null,Fn=1,Vn=1,ti=Io({point:function(jn,Kn){var _i=In([jn,Kn]);this.stream.point(_i[0],_i[1])}}),Jr=Vr;function $n(){return Fn=Zr*mn,Vn=Zr*wn,Pr=Rr=null,In}function In(jn){var Kn=jn[0]*Fn,_i=jn[1]*Vn;if(un){var Si=_i*pt-Kn*Ft;Kn=Kn*pt+_i*Ft,_i=Si}return[Kn+cn,_i+nn]}return In.invert=function(jn){var Kn=jn[0]-cn,_i=jn[1]-nn;if(un){var Si=_i*pt+Kn*Ft;Kn=Kn*pt-_i*Ft,_i=Si}return[Kn/Fn,_i/Vn]},In.stream=function(jn){return Pr&&Rr===jn?Pr:Pr=ti(Jr(Rr=jn))},In.postclip=function(jn){return arguments.length?(Jr=jn,Tn=sr=Yt=lr=null,$n()):Jr},In.clipExtent=function(jn){return arguments.length?(Jr=jn==null?(Tn=sr=Yt=lr=null,Vr):qr(Tn=+jn[0][0],sr=+jn[0][1],Yt=+jn[1][0],lr=+jn[1][1]),$n()):Tn==null?null:[[Tn,sr],[Yt,lr]]},In.scale=function(jn){return arguments.length?(Zr=+jn,$n()):Zr},In.translate=function(jn){return arguments.length?(cn=+jn[0],nn=+jn[1],$n()):[cn,nn]},In.angle=function(jn){return arguments.length?(Ft=_(un=jn%360*l),pt=m(un),$n()):un*a},In.reflectX=function(jn){return arguments.length?(mn=jn?-1:1,$n()):mn<0},In.reflectY=function(jn){return arguments.length?(wn=jn?-1:1,$n()):wn<0},In.fitExtent=function(jn,Kn){return Ge(In,jn,Kn)},In.fitSize=function(jn,Kn){return tt(In,jn,Kn)},In.fitWidth=function(jn,Kn){return ot(In,jn,Kn)},In.fitHeight=function(jn,Kn){return yt(In,jn,Kn)},In},o.geoInterpolate=function(pt,Ft){var sr=pt[0]*l,Yt=pt[1]*l,lr=Ft[0]*l,Pr=Ft[1]*l,Rr=m(Yt),Zr=_(Yt),cn=m(Pr),nn=_(Pr),mn=Rr*m(sr),wn=Rr*_(sr),un=cn*m(lr),Tn=cn*_(lr),Fn=2*I(k(P(Pr-Yt)+Rr*cn*P(lr-sr))),Vn=_(Fn),ti=Fn?function(Jr){var $n=_(Jr*=Fn)/Vn,In=_(Fn-Jr)/Vn,jn=In*mn+$n*un,Kn=In*wn+$n*Tn,_i=In*Zr+$n*nn;return[v(Kn,jn)*a,v(_i,k(jn*jn+Kn*Kn))*a]}:function(){return[sr*a,Yt*a]};return ti.distance=Fn,ti},o.geoLength=Ht,o.geoMercator=function(){return di(Rn).scale(961/s)},o.geoMercatorRaw=Rn,o.geoNaturalEarth1=function(){return ir(to).scale(175.295)},o.geoNaturalEarth1Raw=to,o.geoOrthographic=function(){return ir(ro).scale(249.5).clipAngle(90+t)},o.geoOrthographicRaw=ro,o.geoPath=function(pt,Ft){var sr,Yt,lr=4.5;function Pr(Rr){return Rr&&(typeof lr=="function"&&Yt.pointRadius(+lr.apply(this,arguments)),Q(Rr,sr(Yt))),Yt.result()}return Pr.area=function(Rr){return Q(Rr,sr(vn)),vn.result()},Pr.measure=function(Rr){return Q(Rr,sr(yo)),yo.result()},Pr.bounds=function(Rr){return Q(Rr,sr(mo)),mo.result()},Pr.centroid=function(Rr){return Q(Rr,sr(pa)),pa.result()},Pr.projection=function(Rr){return arguments.length?(sr=Rr==null?(pt=null,Vr):(pt=Rr).stream,Pr):pt},Pr.context=function(Rr){return arguments.length?(Yt=Rr==null?(Ft=null,new Zo):new Vs(Ft=Rr),typeof lr!="function"&&Yt.pointRadius(lr),Pr):Ft},Pr.pointRadius=function(Rr){return arguments.length?(lr=typeof Rr=="function"?Rr:(Yt.pointRadius(+Rr),+Rr),Pr):lr},Pr.projection(pt).context(Ft)},o.geoProjection=ir,o.geoProjectionMutator=hr,o.geoRotation=gr,o.geoStereographic=function(){return ir(no).scale(250).clipAngle(142)},o.geoStereographicRaw=no,o.geoStream=Q,o.geoTransform=function(pt){return{stream:Io(pt)}},o.geoTransverseMercator=function(){var pt=di(Ci),Ft=pt.center,sr=pt.rotate;return pt.center=function(Yt){return arguments.length?Ft([-Yt[1],Yt[0]]):[(Yt=Ft())[1],-Yt[0]]},pt.rotate=function(Yt){return arguments.length?sr([Yt[0],Yt[1],Yt.length>2?Yt[2]+90:90]):[(Yt=sr())[0],Yt[1],Yt[2]-90]},sr([0,0,90]).scale(159.155)},o.geoTransverseMercatorRaw=Ci,Object.defineProperty(o,"__esModule",{value:!0})})},{"d3-array":107}],115:[function(u,q,W){(function(o,p){p(typeof W=="object"&&q!==void 0?W:(o=o||self).d3=o.d3||{})})(this,function(o){function p(oe,he){return oe.parent===he.parent?1:2}function x(oe,he){return oe+he.x}function y(oe,he){return Math.max(oe,he.y)}function e(oe){var he=0,le=oe.children,de=le&&le.length;if(de)for(;--de>=0;)he+=le[de].value;else he=1;oe.value=he}function r(oe,he){var le,de,xe,we,be,Ae=new h(oe),fe=+oe.value&&(Ae.value=oe.value),me=[Ae];for(he==null&&(he=t);le=me.pop();)if(fe&&(le.value=+le.data.value),(xe=he(le.data))&&(be=xe.length))for(le.children=new Array(be),we=be-1;we>=0;--we)me.push(de=le.children[we]=new h(xe[we])),de.parent=le,de.depth=le.depth+1;return Ae.eachBefore(n)}function t(oe){return oe.children}function i(oe){oe.data=oe.data.data}function n(oe){var he=0;do oe.height=he;while((oe=oe.parent)&&oe.height<++he)}function h(oe){this.data=oe,this.depth=this.height=0,this.parent=null}h.prototype=r.prototype={constructor:h,count:function(){return this.eachAfter(e)},each:function(oe){var he,le,de,xe,we=this,be=[we];do for(he=be.reverse(),be=[];we=he.pop();)if(oe(we),le=we.children)for(de=0,xe=le.length;de<xe;++de)be.push(le[de]);while(be.length);return this},eachAfter:function(oe){for(var he,le,de,xe=this,we=[xe],be=[];xe=we.pop();)if(be.push(xe),he=xe.children)for(le=0,de=he.length;le<de;++le)we.push(he[le]);for(;xe=be.pop();)oe(xe);return this},eachBefore:function(oe){for(var he,le,de=this,xe=[de];de=xe.pop();)if(oe(de),he=de.children)for(le=he.length-1;le>=0;--le)xe.push(he[le]);return this},sum:function(oe){return this.eachAfter(function(he){for(var le=+oe(he.data)||0,de=he.children,xe=de&&de.length;--xe>=0;)le+=de[xe].value;he.value=le})},sort:function(oe){return this.eachBefore(function(he){he.children&&he.children.sort(oe)})},path:function(oe){for(var he=this,le=function(we,be){if(we===be)return we;var Ae=we.ancestors(),fe=be.ancestors(),me=null;for(we=Ae.pop(),be=fe.pop();we===be;)me=we,we=Ae.pop(),be=fe.pop();return me}(he,oe),de=[he];he!==le;)he=he.parent,de.push(he);for(var xe=de.length;oe!==le;)de.splice(xe,0,oe),oe=oe.parent;return de},ancestors:function(){for(var oe=this,he=[oe];oe=oe.parent;)he.push(oe);return he},descendants:function(){var oe=[];return this.each(function(he){oe.push(he)}),oe},leaves:function(){var oe=[];return this.eachBefore(function(he){he.children||oe.push(he)}),oe},links:function(){var oe=this,he=[];return oe.each(function(le){le!==oe&&he.push({source:le.parent,target:le})}),he},copy:function(){return r(this).eachBefore(i)}};var s=Array.prototype.slice;function a(oe){for(var he,le,de=0,xe=(oe=function(be){for(var Ae,fe,me=be.length;me;)fe=Math.random()*me--|0,Ae=be[me],be[me]=be[fe],be[fe]=Ae;return be}(s.call(oe))).length,we=[];de<xe;)he=oe[de],le&&d(le,he)?++de:(le=m(we=l(we,he)),de=0);return le}function l(oe,he){var le,de;if(v(he,oe))return[he];for(le=0;le<oe.length;++le)if(f(he,oe[le])&&v(c(oe[le],he),oe))return[oe[le],he];for(le=0;le<oe.length-1;++le)for(de=le+1;de<oe.length;++de)if(f(c(oe[le],oe[de]),he)&&f(c(oe[le],he),oe[de])&&f(c(oe[de],he),oe[le])&&v(b(oe[le],oe[de],he),oe))return[oe[le],oe[de],he];throw new Error}function f(oe,he){var le=oe.r-he.r,de=he.x-oe.x,xe=he.y-oe.y;return le<0||le*le<de*de+xe*xe}function d(oe,he){var le=oe.r-he.r+1e-6,de=he.x-oe.x,xe=he.y-oe.y;return le>0&&le*le>de*de+xe*xe}function v(oe,he){for(var le=0;le<he.length;++le)if(!d(oe,he[le]))return!1;return!0}function m(oe){switch(oe.length){case 1:return{x:(he=oe[0]).x,y:he.y,r:he.r};case 2:return c(oe[0],oe[1]);case 3:return b(oe[0],oe[1],oe[2])}var he}function c(oe,he){var le=oe.x,de=oe.y,xe=oe.r,we=he.x,be=he.y,Ae=he.r,fe=we-le,me=be-de,ke=Ae-xe,Te=Math.sqrt(fe*fe+me*me);return{x:(le+we+fe/Te*ke)/2,y:(de+be+me/Te*ke)/2,r:(Te+xe+Ae)/2}}function b(oe,he,le){var de=oe.x,xe=oe.y,we=oe.r,be=he.x,Ae=he.y,fe=he.r,me=le.x,ke=le.y,Te=le.r,Me=de-be,Oe=de-me,Fe=xe-Ae,qe=xe-ke,et=fe-we,ze=Te-we,Ue=de*de+xe*xe-we*we,We=Ue-be*be-Ae*Ae+fe*fe,Ze=Ue-me*me-ke*ke+Te*Te,nt=Oe*Fe-Me*qe,ft=(Fe*Ze-qe*We)/(2*nt)-de,xt=(qe*et-Fe*ze)/nt,It=(Oe*We-Me*Ze)/(2*nt)-xe,Et=(Me*ze-Oe*et)/nt,it=xt*xt+Et*Et-1,rt=2*(we+ft*xt+It*Et),At=ft*ft+It*It-we*we,Gt=-(it?(rt+Math.sqrt(rt*rt-4*it*At))/(2*it):At/rt);return{x:de+ft+xt*Gt,y:xe+It+Et*Gt,r:Gt}}function g(oe,he,le){var de,xe,we,be,Ae=oe.x-he.x,fe=oe.y-he.y,me=Ae*Ae+fe*fe;me?(xe=he.r+le.r,xe*=xe,be=oe.r+le.r,xe>(be*=be)?(de=(me+be-xe)/(2*me),we=Math.sqrt(Math.max(0,be/me-de*de)),le.x=oe.x-de*Ae-we*fe,le.y=oe.y-de*fe+we*Ae):(de=(me+xe-be)/(2*me),we=Math.sqrt(Math.max(0,xe/me-de*de)),le.x=he.x+de*Ae-we*fe,le.y=he.y+de*fe+we*Ae)):(le.x=he.x+le.r,le.y=he.y)}function w(oe,he){var le=oe.r+he.r-1e-6,de=he.x-oe.x,xe=he.y-oe.y;return le>0&&le*le>de*de+xe*xe}function _(oe){var he=oe._,le=oe.next._,de=he.r+le.r,xe=(he.x*le.r+le.x*he.r)/de,we=(he.y*le.r+le.y*he.r)/de;return xe*xe+we*we}function T(oe){this._=oe,this.next=null,this.previous=null}function k(oe){if(!(xe=oe.length))return 0;var he,le,de,xe,we,be,Ae,fe,me,ke,Te;if((he=oe[0]).x=0,he.y=0,!(xe>1))return he.r;if(le=oe[1],he.x=-le.r,le.x=he.r,le.y=0,!(xe>2))return he.r+le.r;g(le,he,de=oe[2]),he=new T(he),le=new T(le),de=new T(de),he.next=de.previous=le,le.next=he.previous=de,de.next=le.previous=he;e:for(Ae=3;Ae<xe;++Ae){g(he._,le._,de=oe[Ae]),de=new T(de),fe=le.next,me=he.previous,ke=le._.r,Te=he._.r;do if(ke<=Te){if(w(fe._,de._)){le=fe,he.next=le,le.previous=he,--Ae;continue e}ke+=fe._.r,fe=fe.next}else{if(w(me._,de._)){(he=me).next=le,le.previous=he,--Ae;continue e}Te+=me._.r,me=me.previous}while(fe!==me.next);for(de.previous=he,de.next=le,he.next=le.previous=le=de,we=_(he);(de=de.next)!==le;)(be=_(de))<we&&(he=de,we=be);le=he.next}for(he=[le._],de=le;(de=de.next)!==le;)he.push(de._);for(de=a(he),Ae=0;Ae<xe;++Ae)(he=oe[Ae]).x-=de.x,he.y-=de.y;return de.r}function L(oe){return oe==null?null:M(oe)}function M(oe){if(typeof oe!="function")throw new Error;return oe}function I(){return 0}function P(oe){return function(){return oe}}function S(oe){return Math.sqrt(oe.value)}function E(oe){return function(he){he.children||(he.r=Math.max(0,+oe(he)||0))}}function D(oe,he){return function(le){if(de=le.children){var de,xe,we,be=de.length,Ae=oe(le)*he||0;if(Ae)for(xe=0;xe<be;++xe)de[xe].r+=Ae;if(we=k(de),Ae)for(xe=0;xe<be;++xe)de[xe].r-=Ae;le.r=we+Ae}}}function F(oe){return function(he){var le=he.parent;he.r*=oe,le&&(he.x=le.x+oe*he.x,he.y=le.y+oe*he.y)}}function H(oe){oe.x0=Math.round(oe.x0),oe.y0=Math.round(oe.y0),oe.x1=Math.round(oe.x1),oe.y1=Math.round(oe.y1)}function V(oe,he,le,de,xe){for(var we,be=oe.children,Ae=-1,fe=be.length,me=oe.value&&(de-he)/oe.value;++Ae<fe;)(we=be[Ae]).y0=le,we.y1=xe,we.x0=he,we.x1=he+=we.value*me}var Q={depth:-1},K={};function Z(oe){return oe.id}function $(oe){return oe.parentId}function re(oe,he){return oe.parent===he.parent?1:2}function R(oe){var he=oe.children;return he?he[0]:oe.t}function N(oe){var he=oe.children;return he?he[he.length-1]:oe.t}function U(oe,he,le){var de=le/(he.i-oe.i);he.c-=de,he.s+=le,oe.c+=de,he.z+=le,he.m+=le}function te(oe,he,le){return oe.a.parent===he.parent?oe.a:le}function j(oe,he){this._=oe,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=he}function Y(oe,he,le,de,xe){for(var we,be=oe.children,Ae=-1,fe=be.length,me=oe.value&&(xe-le)/oe.value;++Ae<fe;)(we=be[Ae]).x0=he,we.x1=de,we.y0=le,we.y1=le+=we.value*me}j.prototype=Object.create(h.prototype);var J=(1+Math.sqrt(5))/2;function ee(oe,he,le,de,xe,we){for(var be,Ae,fe,me,ke,Te,Me,Oe,Fe,qe,et,ze=[],Ue=he.children,We=0,Ze=0,nt=Ue.length,ft=he.value;We<nt;){fe=xe-le,me=we-de;do ke=Ue[Ze++].value;while(!ke&&Ze<nt);for(Te=Me=ke,et=ke*ke*(qe=Math.max(me/fe,fe/me)/(ft*oe)),Fe=Math.max(Me/et,et/Te);Ze<nt;++Ze){if(ke+=Ae=Ue[Ze].value,Ae<Te&&(Te=Ae),Ae>Me&&(Me=Ae),et=ke*ke*qe,(Oe=Math.max(Me/et,et/Te))>Fe){ke-=Ae;break}Fe=Oe}ze.push(be={value:ke,dice:fe<me,children:Ue.slice(We,Ze)}),be.dice?V(be,le,de,xe,ft?de+=me*ke/ft:we):Y(be,le,de,ft?le+=fe*ke/ft:xe,we),ft-=ke,We=Ze}return ze}var ne=function oe(he){function le(de,xe,we,be,Ae){ee(he,de,xe,we,be,Ae)}return le.ratio=function(de){return oe((de=+de)>1?de:1)},le}(J),se=function oe(he){function le(de,xe,we,be,Ae){if((fe=de._squarify)&&fe.ratio===he)for(var fe,me,ke,Te,Me,Oe=-1,Fe=fe.length,qe=de.value;++Oe<Fe;){for(ke=(me=fe[Oe]).children,Te=me.value=0,Me=ke.length;Te<Me;++Te)me.value+=ke[Te].value;me.dice?V(me,xe,we,be,we+=(Ae-we)*me.value/qe):Y(me,xe,we,xe+=(be-xe)*me.value/qe,Ae),qe-=me.value}else de._squarify=fe=ee(he,de,xe,we,be,Ae),fe.ratio=he}return le.ratio=function(de){return oe((de=+de)>1?de:1)},le}(J);o.cluster=function(){var oe=p,he=1,le=1,de=!1;function xe(we){var be,Ae=0;we.eachAfter(function(Me){var Oe=Me.children;Oe?(Me.x=function(Fe){return Fe.reduce(x,0)/Fe.length}(Oe),Me.y=function(Fe){return 1+Fe.reduce(y,0)}(Oe)):(Me.x=be?Ae+=oe(Me,be):0,Me.y=0,be=Me)});var fe=function(Me){for(var Oe;Oe=Me.children;)Me=Oe[0];return Me}(we),me=function(Me){for(var Oe;Oe=Me.children;)Me=Oe[Oe.length-1];return Me}(we),ke=fe.x-oe(fe,me)/2,Te=me.x+oe(me,fe)/2;return we.eachAfter(de?function(Me){Me.x=(Me.x-we.x)*he,Me.y=(we.y-Me.y)*le}:function(Me){Me.x=(Me.x-ke)/(Te-ke)*he,Me.y=(1-(we.y?Me.y/we.y:1))*le})}return xe.separation=function(we){return arguments.length?(oe=we,xe):oe},xe.size=function(we){return arguments.length?(de=!1,he=+we[0],le=+we[1],xe):de?null:[he,le]},xe.nodeSize=function(we){return arguments.length?(de=!0,he=+we[0],le=+we[1],xe):de?[he,le]:null},xe},o.hierarchy=r,o.pack=function(){var oe=null,he=1,le=1,de=I;function xe(we){return we.x=he/2,we.y=le/2,oe?we.eachBefore(E(oe)).eachAfter(D(de,.5)).eachBefore(F(1)):we.eachBefore(E(S)).eachAfter(D(I,1)).eachAfter(D(de,we.r/Math.min(he,le))).eachBefore(F(Math.min(he,le)/(2*we.r))),we}return xe.radius=function(we){return arguments.length?(oe=L(we),xe):oe},xe.size=function(we){return arguments.length?(he=+we[0],le=+we[1],xe):[he,le]},xe.padding=function(we){return arguments.length?(de=typeof we=="function"?we:P(+we),xe):de},xe},o.packEnclose=a,o.packSiblings=function(oe){return k(oe),oe},o.partition=function(){var oe=1,he=1,le=0,de=!1;function xe(we){var be=we.height+1;return we.x0=we.y0=le,we.x1=oe,we.y1=he/be,we.eachBefore(function(Ae,fe){return function(me){me.children&&V(me,me.x0,Ae*(me.depth+1)/fe,me.x1,Ae*(me.depth+2)/fe);var ke=me.x0,Te=me.y0,Me=me.x1-le,Oe=me.y1-le;Me<ke&&(ke=Me=(ke+Me)/2),Oe<Te&&(Te=Oe=(Te+Oe)/2),me.x0=ke,me.y0=Te,me.x1=Me,me.y1=Oe}}(he,be)),de&&we.eachBefore(H),we}return xe.round=function(we){return arguments.length?(de=!!we,xe):de},xe.size=function(we){return arguments.length?(oe=+we[0],he=+we[1],xe):[oe,he]},xe.padding=function(we){return arguments.length?(le=+we,xe):le},xe},o.stratify=function(){var oe=Z,he=$;function le(de){var xe,we,be,Ae,fe,me,ke,Te=de.length,Me=new Array(Te),Oe={};for(we=0;we<Te;++we)xe=de[we],fe=Me[we]=new h(xe),(me=oe(xe,we,de))!=null&&(me+="")&&(Oe[ke="$"+(fe.id=me)]=ke in Oe?K:fe);for(we=0;we<Te;++we)if(fe=Me[we],(me=he(de[we],we,de))!=null&&(me+="")){if(!(Ae=Oe["$"+me]))throw new Error("missing: "+me);if(Ae===K)throw new Error("ambiguous: "+me);Ae.children?Ae.children.push(fe):Ae.children=[fe],fe.parent=Ae}else{if(be)throw new Error("multiple roots");be=fe}if(!be)throw new Error("no root");if(be.parent=Q,be.eachBefore(function(Fe){Fe.depth=Fe.parent.depth+1,--Te}).eachBefore(n),be.parent=null,Te>0)throw new Error("cycle");return be}return le.id=function(de){return arguments.length?(oe=M(de),le):oe},le.parentId=function(de){return arguments.length?(he=M(de),le):he},le},o.tree=function(){var oe=re,he=1,le=1,de=null;function xe(fe){var me=function(ze){for(var Ue,We,Ze,nt,ft,xt=new j(ze,0),It=[xt];Ue=It.pop();)if(Ze=Ue._.children)for(Ue.children=new Array(ft=Ze.length),nt=ft-1;nt>=0;--nt)It.push(We=Ue.children[nt]=new j(Ze[nt],nt)),We.parent=Ue;return(xt.parent=new j(null,0)).children=[xt],xt}(fe);if(me.eachAfter(we),me.parent.m=-me.z,me.eachBefore(be),de)fe.eachBefore(Ae);else{var ke=fe,Te=fe,Me=fe;fe.eachBefore(function(ze){ze.x<ke.x&&(ke=ze),ze.x>Te.x&&(Te=ze),ze.depth>Me.depth&&(Me=ze)});var Oe=ke===Te?1:oe(ke,Te)/2,Fe=Oe-ke.x,qe=he/(Te.x+Oe+Fe),et=le/(Me.depth||1);fe.eachBefore(function(ze){ze.x=(ze.x+Fe)*qe,ze.y=ze.depth*et})}return fe}function we(fe){var me=fe.children,ke=fe.parent.children,Te=fe.i?ke[fe.i-1]:null;if(me){(function(Oe){for(var Fe,qe=0,et=0,ze=Oe.children,Ue=ze.length;--Ue>=0;)(Fe=ze[Ue]).z+=qe,Fe.m+=qe,qe+=Fe.s+(et+=Fe.c)})(fe);var Me=(me[0].z+me[me.length-1].z)/2;Te?(fe.z=Te.z+oe(fe._,Te._),fe.m=fe.z-Me):fe.z=Me}else Te&&(fe.z=Te.z+oe(fe._,Te._));fe.parent.A=function(Oe,Fe,qe){if(Fe){for(var et,ze=Oe,Ue=Oe,We=Fe,Ze=ze.parent.children[0],nt=ze.m,ft=Ue.m,xt=We.m,It=Ze.m;We=N(We),ze=R(ze),We&&ze;)Ze=R(Ze),(Ue=N(Ue)).a=Oe,(et=We.z+xt-ze.z-nt+oe(We._,ze._))>0&&(U(te(We,Oe,qe),Oe,et),nt+=et,ft+=et),xt+=We.m,nt+=ze.m,It+=Ze.m,ft+=Ue.m;We&&!N(Ue)&&(Ue.t=We,Ue.m+=xt-ft),ze&&!R(Ze)&&(Ze.t=ze,Ze.m+=nt-It,qe=Oe)}return qe}(fe,Te,fe.parent.A||ke[0])}function be(fe){fe._.x=fe.z+fe.parent.m,fe.m+=fe.parent.m}function Ae(fe){fe.x*=he,fe.y=fe.depth*le}return xe.separation=function(fe){return arguments.length?(oe=fe,xe):oe},xe.size=function(fe){return arguments.length?(de=!1,he=+fe[0],le=+fe[1],xe):de?null:[he,le]},xe.nodeSize=function(fe){return arguments.length?(de=!0,he=+fe[0],le=+fe[1],xe):de?[he,le]:null},xe},o.treemap=function(){var oe=ne,he=!1,le=1,de=1,xe=[0],we=I,be=I,Ae=I,fe=I,me=I;function ke(Me){return Me.x0=Me.y0=0,Me.x1=le,Me.y1=de,Me.eachBefore(Te),xe=[0],he&&Me.eachBefore(H),Me}function Te(Me){var Oe=xe[Me.depth],Fe=Me.x0+Oe,qe=Me.y0+Oe,et=Me.x1-Oe,ze=Me.y1-Oe;et<Fe&&(Fe=et=(Fe+et)/2),ze<qe&&(qe=ze=(qe+ze)/2),Me.x0=Fe,Me.y0=qe,Me.x1=et,Me.y1=ze,Me.children&&(Oe=xe[Me.depth+1]=we(Me)/2,Fe+=me(Me)-Oe,qe+=be(Me)-Oe,(et-=Ae(Me)-Oe)<Fe&&(Fe=et=(Fe+et)/2),(ze-=fe(Me)-Oe)<qe&&(qe=ze=(qe+ze)/2),oe(Me,Fe,qe,et,ze))}return ke.round=function(Me){return arguments.length?(he=!!Me,ke):he},ke.size=function(Me){return arguments.length?(le=+Me[0],de=+Me[1],ke):[le,de]},ke.tile=function(Me){return arguments.length?(oe=M(Me),ke):oe},ke.padding=function(Me){return arguments.length?ke.paddingInner(Me).paddingOuter(Me):ke.paddingInner()},ke.paddingInner=function(Me){return arguments.length?(we=typeof Me=="function"?Me:P(+Me),ke):we},ke.paddingOuter=function(Me){return arguments.length?ke.paddingTop(Me).paddingRight(Me).paddingBottom(Me).paddingLeft(Me):ke.paddingTop()},ke.paddingTop=function(Me){return arguments.length?(be=typeof Me=="function"?Me:P(+Me),ke):be},ke.paddingRight=function(Me){return arguments.length?(Ae=typeof Me=="function"?Me:P(+Me),ke):Ae},ke.paddingBottom=function(Me){return arguments.length?(fe=typeof Me=="function"?Me:P(+Me),ke):fe},ke.paddingLeft=function(Me){return arguments.length?(me=typeof Me=="function"?Me:P(+Me),ke):me},ke},o.treemapBinary=function(oe,he,le,de,xe){var we,be,Ae=oe.children,fe=Ae.length,me=new Array(fe+1);for(me[0]=be=we=0;we<fe;++we)me[we+1]=be+=Ae[we].value;(function ke(Te,Me,Oe,Fe,qe,et,ze){if(Te>=Me-1){var Ue=Ae[Te];return Ue.x0=Fe,Ue.y0=qe,Ue.x1=et,void(Ue.y1=ze)}for(var We=me[Te],Ze=Oe/2+We,nt=Te+1,ft=Me-1;nt<ft;){var xt=nt+ft>>>1;me[xt]<Ze?nt=xt+1:ft=xt}Ze-me[nt-1]<me[nt]-Ze&&Te+1<nt&&--nt;var It=me[nt]-We,Et=Oe-It;if(et-Fe>ze-qe){var it=(Fe*Et+et*It)/Oe;ke(Te,nt,It,Fe,qe,it,ze),ke(nt,Me,Et,it,qe,et,ze)}else{var rt=(qe*Et+ze*It)/Oe;ke(Te,nt,It,Fe,qe,et,rt),ke(nt,Me,Et,Fe,rt,et,ze)}})(0,fe,oe.value,he,le,de,xe)},o.treemapDice=V,o.treemapResquarify=se,o.treemapSlice=Y,o.treemapSliceDice=function(oe,he,le,de,xe){(1&oe.depth?Y:V)(oe,he,le,de,xe)},o.treemapSquarify=ne,Object.defineProperty(o,"__esModule",{value:!0})})},{}],116:[function(u,q,W){(function(o,p){typeof W=="object"&&q!==void 0?p(W,u("d3-color")):p((o=o||self).d3=o.d3||{},o.d3)})(this,function(o,p){function x(J,ee,ne,se,oe){var he=J*J,le=he*J;return((1-3*J+3*he-le)*ee+(4-6*he+3*le)*ne+(1+3*J+3*he-3*le)*se+le*oe)/6}function y(J){var ee=J.length-1;return function(ne){var se=ne<=0?ne=0:ne>=1?(ne=1,ee-1):Math.floor(ne*ee),oe=J[se],he=J[se+1],le=se>0?J[se-1]:2*oe-he,de=se<ee-1?J[se+2]:2*he-oe;return x((ne-se/ee)*ee,le,oe,he,de)}}function e(J){var ee=J.length;return function(ne){var se=Math.floor(((ne%=1)<0?++ne:ne)*ee),oe=J[(se+ee-1)%ee],he=J[se%ee],le=J[(se+1)%ee],de=J[(se+2)%ee];return x((ne-se/ee)*ee,oe,he,le,de)}}function r(J){return function(){return J}}function t(J,ee){return function(ne){return J+ne*ee}}function i(J,ee){var ne=ee-J;return ne?t(J,ne>180||ne<-180?ne-360*Math.round(ne/360):ne):r(isNaN(J)?ee:J)}function n(J){return(J=+J)==1?h:function(ee,ne){return ne-ee?function(se,oe,he){return se=Math.pow(se,he),oe=Math.pow(oe,he)-se,he=1/he,function(le){return Math.pow(se+le*oe,he)}}(ee,ne,J):r(isNaN(ee)?ne:ee)}}function h(J,ee){var ne=ee-J;return ne?t(J,ne):r(isNaN(J)?ee:J)}var s=function J(ee){var ne=n(ee);function se(oe,he){var le=ne((oe=p.rgb(oe)).r,(he=p.rgb(he)).r),de=ne(oe.g,he.g),xe=ne(oe.b,he.b),we=h(oe.opacity,he.opacity);return function(be){return oe.r=le(be),oe.g=de(be),oe.b=xe(be),oe.opacity=we(be),oe+""}}return se.gamma=J,se}(1);function a(J){return function(ee){var ne,se,oe=ee.length,he=new Array(oe),le=new Array(oe),de=new Array(oe);for(ne=0;ne<oe;++ne)se=p.rgb(ee[ne]),he[ne]=se.r||0,le[ne]=se.g||0,de[ne]=se.b||0;return he=J(he),le=J(le),de=J(de),se.opacity=1,function(xe){return se.r=he(xe),se.g=le(xe),se.b=de(xe),se+""}}}var l=a(y),f=a(e);function d(J,ee){ee||(ee=[]);var ne,se=J?Math.min(ee.length,J.length):0,oe=ee.slice();return function(he){for(ne=0;ne<se;++ne)oe[ne]=J[ne]*(1-he)+ee[ne]*he;return oe}}function v(J){return ArrayBuffer.isView(J)&&!(J instanceof DataView)}function m(J,ee){var ne,se=ee?ee.length:0,oe=J?Math.min(se,J.length):0,he=new Array(oe),le=new Array(se);for(ne=0;ne<oe;++ne)he[ne]=k(J[ne],ee[ne]);for(;ne<se;++ne)le[ne]=ee[ne];return function(de){for(ne=0;ne<oe;++ne)le[ne]=he[ne](de);return le}}function c(J,ee){var ne=new Date;return J=+J,ee=+ee,function(se){return ne.setTime(J*(1-se)+ee*se),ne}}function b(J,ee){return J=+J,ee=+ee,function(ne){return J*(1-ne)+ee*ne}}function g(J,ee){var ne,se={},oe={};for(ne in J!==null&&typeof J=="object"||(J={}),ee!==null&&typeof ee=="object"||(ee={}),ee)ne in J?se[ne]=k(J[ne],ee[ne]):oe[ne]=ee[ne];return function(he){for(ne in se)oe[ne]=se[ne](he);return oe}}var w=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_=new RegExp(w.source,"g");function T(J,ee){var ne,se,oe,he=w.lastIndex=_.lastIndex=0,le=-1,de=[],xe=[];for(J+="",ee+="";(ne=w.exec(J))&&(se=_.exec(ee));)(oe=se.index)>he&&(oe=ee.slice(he,oe),de[le]?de[le]+=oe:de[++le]=oe),(ne=ne[0])===(se=se[0])?de[le]?de[le]+=se:de[++le]=se:(de[++le]=null,xe.push({i:le,x:b(ne,se)})),he=_.lastIndex;return he<ee.length&&(oe=ee.slice(he),de[le]?de[le]+=oe:de[++le]=oe),de.length<2?xe[0]?function(we){return function(be){return we(be)+""}}(xe[0].x):function(we){return function(){return we}}(ee):(ee=xe.length,function(we){for(var be,Ae=0;Ae<ee;++Ae)de[(be=xe[Ae]).i]=be.x(we);return de.join("")})}function k(J,ee){var ne,se=typeof ee;return ee==null||se==="boolean"?r(ee):(se==="number"?b:se==="string"?(ne=p.color(ee))?(ee=ne,s):T:ee instanceof p.color?s:ee instanceof Date?c:v(ee)?d:Array.isArray(ee)?m:typeof ee.valueOf!="function"&&typeof ee.toString!="function"||isNaN(ee)?g:b)(J,ee)}var L,M,I,P,S=180/Math.PI,E={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function D(J,ee,ne,se,oe,he){var le,de,xe;return(le=Math.sqrt(J*J+ee*ee))&&(J/=le,ee/=le),(xe=J*ne+ee*se)&&(ne-=J*xe,se-=ee*xe),(de=Math.sqrt(ne*ne+se*se))&&(ne/=de,se/=de,xe/=de),J*se<ee*ne&&(J=-J,ee=-ee,xe=-xe,le=-le),{translateX:oe,translateY:he,rotate:Math.atan2(ee,J)*S,skewX:Math.atan(xe)*S,scaleX:le,scaleY:de}}function F(J,ee,ne,se){function oe(he){return he.length?he.pop()+" ":""}return function(he,le){var de=[],xe=[];return he=J(he),le=J(le),function(we,be,Ae,fe,me,ke){if(we!==Ae||be!==fe){var Te=me.push("translate(",null,ee,null,ne);ke.push({i:Te-4,x:b(we,Ae)},{i:Te-2,x:b(be,fe)})}else(Ae||fe)&&me.push("translate("+Ae+ee+fe+ne)}(he.translateX,he.translateY,le.translateX,le.translateY,de,xe),function(we,be,Ae,fe){we!==be?(we-be>180?be+=360:be-we>180&&(we+=360),fe.push({i:Ae.push(oe(Ae)+"rotate(",null,se)-2,x:b(we,be)})):be&&Ae.push(oe(Ae)+"rotate("+be+se)}(he.rotate,le.rotate,de,xe),function(we,be,Ae,fe){we!==be?fe.push({i:Ae.push(oe(Ae)+"skewX(",null,se)-2,x:b(we,be)}):be&&Ae.push(oe(Ae)+"skewX("+be+se)}(he.skewX,le.skewX,de,xe),function(we,be,Ae,fe,me,ke){if(we!==Ae||be!==fe){var Te=me.push(oe(me)+"scale(",null,",",null,")");ke.push({i:Te-4,x:b(we,Ae)},{i:Te-2,x:b(be,fe)})}else Ae===1&&fe===1||me.push(oe(me)+"scale("+Ae+","+fe+")")}(he.scaleX,he.scaleY,le.scaleX,le.scaleY,de,xe),he=le=null,function(we){for(var be,Ae=-1,fe=xe.length;++Ae<fe;)de[(be=xe[Ae]).i]=be.x(we);return de.join("")}}}var H=F(function(J){return J==="none"?E:(L||(L=document.createElement("DIV"),M=document.documentElement,I=document.defaultView),L.style.transform=J,J=I.getComputedStyle(M.appendChild(L),null).getPropertyValue("transform"),M.removeChild(L),D(+(J=J.slice(7,-1).split(","))[0],+J[1],+J[2],+J[3],+J[4],+J[5]))},"px, ","px)","deg)"),V=F(function(J){return J==null?E:(P||(P=document.createElementNS("http://www.w3.org/2000/svg","g")),P.setAttribute("transform",J),(J=P.transform.baseVal.consolidate())?D((J=J.matrix).a,J.b,J.c,J.d,J.e,J.f):E)},", ",")",")"),Q=Math.SQRT2;function K(J){return((J=Math.exp(J))+1/J)/2}function Z(J){return function(ee,ne){var se=J((ee=p.hsl(ee)).h,(ne=p.hsl(ne)).h),oe=h(ee.s,ne.s),he=h(ee.l,ne.l),le=h(ee.opacity,ne.opacity);return function(de){return ee.h=se(de),ee.s=oe(de),ee.l=he(de),ee.opacity=le(de),ee+""}}}var $=Z(i),re=Z(h);function R(J){return function(ee,ne){var se=J((ee=p.hcl(ee)).h,(ne=p.hcl(ne)).h),oe=h(ee.c,ne.c),he=h(ee.l,ne.l),le=h(ee.opacity,ne.opacity);return function(de){return ee.h=se(de),ee.c=oe(de),ee.l=he(de),ee.opacity=le(de),ee+""}}}var N=R(i),U=R(h);function te(J){return function ee(ne){function se(oe,he){var le=J((oe=p.cubehelix(oe)).h,(he=p.cubehelix(he)).h),de=h(oe.s,he.s),xe=h(oe.l,he.l),we=h(oe.opacity,he.opacity);return function(be){return oe.h=le(be),oe.s=de(be),oe.l=xe(Math.pow(be,ne)),oe.opacity=we(be),oe+""}}return ne=+ne,se.gamma=ee,se}(1)}var j=te(i),Y=te(h);o.interpolate=k,o.interpolateArray=function(J,ee){return(v(ee)?d:m)(J,ee)},o.interpolateBasis=y,o.interpolateBasisClosed=e,o.interpolateCubehelix=j,o.interpolateCubehelixLong=Y,o.interpolateDate=c,o.interpolateDiscrete=function(J){var ee=J.length;return function(ne){return J[Math.max(0,Math.min(ee-1,Math.floor(ne*ee)))]}},o.interpolateHcl=N,o.interpolateHclLong=U,o.interpolateHsl=$,o.interpolateHslLong=re,o.interpolateHue=function(J,ee){var ne=i(+J,+ee);return function(se){var oe=ne(se);return oe-360*Math.floor(oe/360)}},o.interpolateLab=function(J,ee){var ne=h((J=p.lab(J)).l,(ee=p.lab(ee)).l),se=h(J.a,ee.a),oe=h(J.b,ee.b),he=h(J.opacity,ee.opacity);return function(le){return J.l=ne(le),J.a=se(le),J.b=oe(le),J.opacity=he(le),J+""}},o.interpolateNumber=b,o.interpolateNumberArray=d,o.interpolateObject=g,o.interpolateRgb=s,o.interpolateRgbBasis=l,o.interpolateRgbBasisClosed=f,o.interpolateRound=function(J,ee){return J=+J,ee=+ee,function(ne){return Math.round(J*(1-ne)+ee*ne)}},o.interpolateString=T,o.interpolateTransformCss=H,o.interpolateTransformSvg=V,o.interpolateZoom=function(J,ee){var ne,se,oe=J[0],he=J[1],le=J[2],de=ee[0],xe=ee[1],we=ee[2],be=de-oe,Ae=xe-he,fe=be*be+Ae*Ae;if(fe<1e-12)se=Math.log(we/le)/Q,ne=function(Fe){return[oe+Fe*be,he+Fe*Ae,le*Math.exp(Q*Fe*se)]};else{var me=Math.sqrt(fe),ke=(we*we-le*le+4*fe)/(2*le*2*me),Te=(we*we-le*le-4*fe)/(2*we*2*me),Me=Math.log(Math.sqrt(ke*ke+1)-ke),Oe=Math.log(Math.sqrt(Te*Te+1)-Te);se=(Oe-Me)/Q,ne=function(Fe){var qe,et=Fe*se,ze=K(Me),Ue=le/(2*me)*(ze*(qe=Q*et+Me,((qe=Math.exp(2*qe))-1)/(qe+1))-function(We){return((We=Math.exp(We))-1/We)/2}(Me));return[oe+Ue*be,he+Ue*Ae,le*ze/K(Q*et+Me)]}}return ne.duration=1e3*se,ne},o.piecewise=function(J,ee){for(var ne=0,se=ee.length-1,oe=ee[0],he=new Array(se<0?0:se);ne<se;)he[ne]=J(oe,oe=ee[++ne]);return function(le){var de=Math.max(0,Math.min(se-1,Math.floor(le*=se)));return he[de](le-de)}},o.quantize=function(J,ee){for(var ne=new Array(ee),se=0;se<ee;++se)ne[se]=J(se/(ee-1));return ne},Object.defineProperty(o,"__esModule",{value:!0})})},{"d3-color":109}],117:[function(u,q,W){(function(o,p){p(typeof W=="object"&&q!==void 0?W:(o=o||self).d3=o.d3||{})})(this,function(o){var p=Math.PI,x=2*p,y=x-1e-6;function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function r(){return new e}e.prototype=r.prototype={constructor:e,moveTo:function(t,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,i){this._+="L"+(this._x1=+t)+","+(this._y1=+i)},quadraticCurveTo:function(t,i,n,h){this._+="Q"+ +t+","+ +i+","+(this._x1=+n)+","+(this._y1=+h)},bezierCurveTo:function(t,i,n,h,s,a){this._+="C"+ +t+","+ +i+","+ +n+","+ +h+","+(this._x1=+s)+","+(this._y1=+a)},arcTo:function(t,i,n,h,s){t=+t,i=+i,n=+n,h=+h,s=+s;var a=this._x1,l=this._y1,f=n-t,d=h-i,v=a-t,m=l-i,c=v*v+m*m;if(s<0)throw new Error("negative radius: "+s);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=i);else if(c>1e-6)if(Math.abs(m*f-d*v)>1e-6&&s){var b=n-a,g=h-l,w=f*f+d*d,_=b*b+g*g,T=Math.sqrt(w),k=Math.sqrt(c),L=s*Math.tan((p-Math.acos((w+c-_)/(2*T*k)))/2),M=L/k,I=L/T;Math.abs(M-1)>1e-6&&(this._+="L"+(t+M*v)+","+(i+M*m)),this._+="A"+s+","+s+",0,0,"+ +(m*b>v*g)+","+(this._x1=t+I*f)+","+(this._y1=i+I*d)}else this._+="L"+(this._x1=t)+","+(this._y1=i)},arc:function(t,i,n,h,s,a){t=+t,i=+i,a=!!a;var l=(n=+n)*Math.cos(h),f=n*Math.sin(h),d=t+l,v=i+f,m=1^a,c=a?h-s:s-h;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+d+","+v:(Math.abs(this._x1-d)>1e-6||Math.abs(this._y1-v)>1e-6)&&(this._+="L"+d+","+v),n&&(c<0&&(c=c%x+x),c>y?this._+="A"+n+","+n+",0,1,"+m+","+(t-l)+","+(i-f)+"A"+n+","+n+",0,1,"+m+","+(this._x1=d)+","+(this._y1=v):c>1e-6&&(this._+="A"+n+","+n+",0,"+ +(c>=p)+","+m+","+(this._x1=t+n*Math.cos(s))+","+(this._y1=i+n*Math.sin(s))))},rect:function(t,i,n,h){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)+"h"+ +n+"v"+ +h+"h"+-n+"Z"},toString:function(){return this._}},o.path=r,Object.defineProperty(o,"__esModule",{value:!0})})},{}],118:[function(u,q,W){(function(o,p){p(typeof W=="object"&&q!==void 0?W:(o=o||self).d3=o.d3||{})})(this,function(o){function p(h,s,a,l){if(isNaN(s)||isNaN(a))return h;var f,d,v,m,c,b,g,w,_,T=h._root,k={data:l},L=h._x0,M=h._y0,I=h._x1,P=h._y1;if(!T)return h._root=k,h;for(;T.length;)if((b=s>=(d=(L+I)/2))?L=d:I=d,(g=a>=(v=(M+P)/2))?M=v:P=v,f=T,!(T=T[w=g<<1|b]))return f[w]=k,h;if(m=+h._x.call(null,T.data),c=+h._y.call(null,T.data),s===m&&a===c)return k.next=T,f?f[w]=k:h._root=k,h;do f=f?f[w]=new Array(4):h._root=new Array(4),(b=s>=(d=(L+I)/2))?L=d:I=d,(g=a>=(v=(M+P)/2))?M=v:P=v;while((w=g<<1|b)==(_=(c>=v)<<1|m>=d));return f[_]=T,f[w]=k,h}function x(h,s,a,l,f){this.node=h,this.x0=s,this.y0=a,this.x1=l,this.y1=f}function y(h){return h[0]}function e(h){return h[1]}function r(h,s,a){var l=new t(s==null?y:s,a==null?e:a,NaN,NaN,NaN,NaN);return h==null?l:l.addAll(h)}function t(h,s,a,l,f,d){this._x=h,this._y=s,this._x0=a,this._y0=l,this._x1=f,this._y1=d,this._root=void 0}function i(h){for(var s={data:h.data},a=s;h=h.next;)a=a.next={data:h.data};return s}var n=r.prototype=t.prototype;n.copy=function(){var h,s,a=new t(this._x,this._y,this._x0,this._y0,this._x1,this._y1),l=this._root;if(!l)return a;if(!l.length)return a._root=i(l),a;for(h=[{source:l,target:a._root=new Array(4)}];l=h.pop();)for(var f=0;f<4;++f)(s=l.source[f])&&(s.length?h.push({source:s,target:l.target[f]=new Array(4)}):l.target[f]=i(s));return a},n.add=function(h){var s=+this._x.call(null,h),a=+this._y.call(null,h);return p(this.cover(s,a),s,a,h)},n.addAll=function(h){var s,a,l,f,d=h.length,v=new Array(d),m=new Array(d),c=1/0,b=1/0,g=-1/0,w=-1/0;for(a=0;a<d;++a)isNaN(l=+this._x.call(null,s=h[a]))||isNaN(f=+this._y.call(null,s))||(v[a]=l,m[a]=f,l<c&&(c=l),l>g&&(g=l),f<b&&(b=f),f>w&&(w=f));if(c>g||b>w)return this;for(this.cover(c,b).cover(g,w),a=0;a<d;++a)p(this,v[a],m[a],h[a]);return this},n.cover=function(h,s){if(isNaN(h=+h)||isNaN(s=+s))return this;var a=this._x0,l=this._y0,f=this._x1,d=this._y1;if(isNaN(a))f=(a=Math.floor(h))+1,d=(l=Math.floor(s))+1;else{for(var v,m,c=f-a,b=this._root;a>h||h>=f||l>s||s>=d;)switch(m=(s<l)<<1|h<a,(v=new Array(4))[m]=b,b=v,c*=2,m){case 0:f=a+c,d=l+c;break;case 1:a=f-c,d=l+c;break;case 2:f=a+c,l=d-c;break;case 3:a=f-c,l=d-c}this._root&&this._root.length&&(this._root=b)}return this._x0=a,this._y0=l,this._x1=f,this._y1=d,this},n.data=function(){var h=[];return this.visit(function(s){if(!s.length)do h.push(s.data);while(s=s.next)}),h},n.extent=function(h){return arguments.length?this.cover(+h[0][0],+h[0][1]).cover(+h[1][0],+h[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(h,s,a){var l,f,d,v,m,c,b,g=this._x0,w=this._y0,_=this._x1,T=this._y1,k=[],L=this._root;for(L&&k.push(new x(L,g,w,_,T)),a==null?a=1/0:(g=h-a,w=s-a,_=h+a,T=s+a,a*=a);c=k.pop();)if(!(!(L=c.node)||(f=c.x0)>_||(d=c.y0)>T||(v=c.x1)<g||(m=c.y1)<w))if(L.length){var M=(f+v)/2,I=(d+m)/2;k.push(new x(L[3],M,I,v,m),new x(L[2],f,I,M,m),new x(L[1],M,d,v,I),new x(L[0],f,d,M,I)),(b=(s>=I)<<1|h>=M)&&(c=k[k.length-1],k[k.length-1]=k[k.length-1-b],k[k.length-1-b]=c)}else{var P=h-+this._x.call(null,L.data),S=s-+this._y.call(null,L.data),E=P*P+S*S;if(E<a){var D=Math.sqrt(a=E);g=h-D,w=s-D,_=h+D,T=s+D,l=L.data}}return l},n.remove=function(h){if(isNaN(d=+this._x.call(null,h))||isNaN(v=+this._y.call(null,h)))return this;var s,a,l,f,d,v,m,c,b,g,w,_,T=this._root,k=this._x0,L=this._y0,M=this._x1,I=this._y1;if(!T)return this;if(T.length)for(;;){if((b=d>=(m=(k+M)/2))?k=m:M=m,(g=v>=(c=(L+I)/2))?L=c:I=c,s=T,!(T=T[w=g<<1|b]))return this;if(!T.length)break;(s[w+1&3]||s[w+2&3]||s[w+3&3])&&(a=s,_=w)}for(;T.data!==h;)if(l=T,!(T=T.next))return this;return(f=T.next)&&delete T.next,l?(f?l.next=f:delete l.next,this):s?(f?s[w]=f:delete s[w],(T=s[0]||s[1]||s[2]||s[3])&&T===(s[3]||s[2]||s[1]||s[0])&&!T.length&&(a?a[_]=T:this._root=T),this):(this._root=f,this)},n.removeAll=function(h){for(var s=0,a=h.length;s<a;++s)this.remove(h[s]);return this},n.root=function(){return this._root},n.size=function(){var h=0;return this.visit(function(s){if(!s.length)do++h;while(s=s.next)}),h},n.visit=function(h){var s,a,l,f,d,v,m=[],c=this._root;for(c&&m.push(new x(c,this._x0,this._y0,this._x1,this._y1));s=m.pop();)if(!h(c=s.node,l=s.x0,f=s.y0,d=s.x1,v=s.y1)&&c.length){var b=(l+d)/2,g=(f+v)/2;(a=c[3])&&m.push(new x(a,b,g,d,v)),(a=c[2])&&m.push(new x(a,l,g,b,v)),(a=c[1])&&m.push(new x(a,b,f,d,g)),(a=c[0])&&m.push(new x(a,l,f,b,g))}return this},n.visitAfter=function(h){var s,a=[],l=[];for(this._root&&a.push(new x(this._root,this._x0,this._y0,this._x1,this._y1));s=a.pop();){var f=s.node;if(f.length){var d,v=s.x0,m=s.y0,c=s.x1,b=s.y1,g=(v+c)/2,w=(m+b)/2;(d=f[0])&&a.push(new x(d,v,m,g,w)),(d=f[1])&&a.push(new x(d,g,m,c,w)),(d=f[2])&&a.push(new x(d,v,w,g,b)),(d=f[3])&&a.push(new x(d,g,w,c,b))}l.push(s)}for(;s=l.pop();)h(s.node,s.x0,s.y0,s.x1,s.y1);return this},n.x=function(h){return arguments.length?(this._x=h,this):this._x},n.y=function(h){return arguments.length?(this._y=h,this):this._y},o.quadtree=r,Object.defineProperty(o,"__esModule",{value:!0})})},{}],119:[function(u,q,W){(function(o,p){typeof W=="object"&&q!==void 0?p(W,u("d3-path")):p((o=o||self).d3=o.d3||{},o.d3)})(this,function(o,p){function x(Re){return function(){return Re}}var y=Math.abs,e=Math.atan2,r=Math.cos,t=Math.max,i=Math.min,n=Math.sin,h=Math.sqrt,s=Math.PI,a=s/2,l=2*s;function f(Re){return Re>1?0:Re<-1?s:Math.acos(Re)}function d(Re){return Re>=1?a:Re<=-1?-a:Math.asin(Re)}function v(Re){return Re.innerRadius}function m(Re){return Re.outerRadius}function c(Re){return Re.startAngle}function b(Re){return Re.endAngle}function g(Re){return Re&&Re.padAngle}function w(Re,ct,wt,Rt,Vt,rr,qt,Jt){var or=wt-Re,gr=Rt-ct,dr=qt-Vt,ur=Jt-rr,cr=ur*or-dr*gr;if(!(cr*cr<1e-12))return[Re+(cr=(dr*(ct-rr)-ur*(Re-Vt))/cr)*or,ct+cr*gr]}function _(Re,ct,wt,Rt,Vt,rr,qt){var Jt=Re-wt,or=ct-Rt,gr=(qt?rr:-rr)/h(Jt*Jt+or*or),dr=gr*or,ur=-gr*Jt,cr=Re+dr,mr=ct+ur,Dr=wt+dr,yr=Rt+ur,Br=(cr+Dr)/2,Kr=(mr+yr)/2,an=Dr-cr,Ln=yr-mr,Pn=an*an+Ln*Ln,An=Vt-rr,tn=cr*yr-Dr*mr,zr=(Ln<0?-1:1)*h(t(0,An*An*Pn-tn*tn)),Ar=(tn*Ln-an*zr)/Pn,qr=(-tn*an-Ln*zr)/Pn,On=(tn*Ln+an*zr)/Pn,Fr=(-tn*an+Ln*zr)/Pn,on=Ar-Br,Mn=qr-Kr,bn=On-Br,Dn=Fr-Kr;return on*on+Mn*Mn>bn*bn+Dn*Dn&&(Ar=On,qr=Fr),{cx:Ar,cy:qr,x01:-dr,y01:-ur,x11:Ar*(Vt/An-1),y11:qr*(Vt/An-1)}}function T(Re){this._context=Re}function k(Re){return new T(Re)}function L(Re){return Re[0]}function M(Re){return Re[1]}function I(){var Re=L,ct=M,wt=x(!0),Rt=null,Vt=k,rr=null;function qt(Jt){var or,gr,dr,ur=Jt.length,cr=!1;for(Rt==null&&(rr=Vt(dr=p.path())),or=0;or<=ur;++or)!(or<ur&&wt(gr=Jt[or],or,Jt))===cr&&((cr=!cr)?rr.lineStart():rr.lineEnd()),cr&&rr.point(+Re(gr,or,Jt),+ct(gr,or,Jt));if(dr)return rr=null,dr+""||null}return qt.x=function(Jt){return arguments.length?(Re=typeof Jt=="function"?Jt:x(+Jt),qt):Re},qt.y=function(Jt){return arguments.length?(ct=typeof Jt=="function"?Jt:x(+Jt),qt):ct},qt.defined=function(Jt){return arguments.length?(wt=typeof Jt=="function"?Jt:x(!!Jt),qt):wt},qt.curve=function(Jt){return arguments.length?(Vt=Jt,Rt!=null&&(rr=Vt(Rt)),qt):Vt},qt.context=function(Jt){return arguments.length?(Jt==null?Rt=rr=null:rr=Vt(Rt=Jt),qt):Rt},qt}function P(){var Re=L,ct=null,wt=x(0),Rt=M,Vt=x(!0),rr=null,qt=k,Jt=null;function or(dr){var ur,cr,mr,Dr,yr,Br=dr.length,Kr=!1,an=new Array(Br),Ln=new Array(Br);for(rr==null&&(Jt=qt(yr=p.path())),ur=0;ur<=Br;++ur){if(!(ur<Br&&Vt(Dr=dr[ur],ur,dr))===Kr)if(Kr=!Kr)cr=ur,Jt.areaStart(),Jt.lineStart();else{for(Jt.lineEnd(),Jt.lineStart(),mr=ur-1;mr>=cr;--mr)Jt.point(an[mr],Ln[mr]);Jt.lineEnd(),Jt.areaEnd()}Kr&&(an[ur]=+Re(Dr,ur,dr),Ln[ur]=+wt(Dr,ur,dr),Jt.point(ct?+ct(Dr,ur,dr):an[ur],Rt?+Rt(Dr,ur,dr):Ln[ur]))}if(yr)return Jt=null,yr+""||null}function gr(){return I().defined(Vt).curve(qt).context(rr)}return or.x=function(dr){return arguments.length?(Re=typeof dr=="function"?dr:x(+dr),ct=null,or):Re},or.x0=function(dr){return arguments.length?(Re=typeof dr=="function"?dr:x(+dr),or):Re},or.x1=function(dr){return arguments.length?(ct=dr==null?null:typeof dr=="function"?dr:x(+dr),or):ct},or.y=function(dr){return arguments.length?(wt=typeof dr=="function"?dr:x(+dr),Rt=null,or):wt},or.y0=function(dr){return arguments.length?(wt=typeof dr=="function"?dr:x(+dr),or):wt},or.y1=function(dr){return arguments.length?(Rt=dr==null?null:typeof dr=="function"?dr:x(+dr),or):Rt},or.lineX0=or.lineY0=function(){return gr().x(Re).y(wt)},or.lineY1=function(){return gr().x(Re).y(Rt)},or.lineX1=function(){return gr().x(ct).y(wt)},or.defined=function(dr){return arguments.length?(Vt=typeof dr=="function"?dr:x(!!dr),or):Vt},or.curve=function(dr){return arguments.length?(qt=dr,rr!=null&&(Jt=qt(rr)),or):qt},or.context=function(dr){return arguments.length?(dr==null?rr=Jt=null:Jt=qt(rr=dr),or):rr},or}function S(Re,ct){return ct<Re?-1:ct>Re?1:ct>=Re?0:NaN}function E(Re){return Re}T.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Re,ct){switch(Re=+Re,ct=+ct,this._point){case 0:this._point=1,this._line?this._context.lineTo(Re,ct):this._context.moveTo(Re,ct);break;case 1:this._point=2;default:this._context.lineTo(Re,ct)}}};var D=H(k);function F(Re){this._curve=Re}function H(Re){function ct(wt){return new F(Re(wt))}return ct._curve=Re,ct}function V(Re){var ct=Re.curve;return Re.angle=Re.x,delete Re.x,Re.radius=Re.y,delete Re.y,Re.curve=function(wt){return arguments.length?ct(H(wt)):ct()._curve},Re}function Q(){return V(I().curve(D))}function K(){var Re=P().curve(D),ct=Re.curve,wt=Re.lineX0,Rt=Re.lineX1,Vt=Re.lineY0,rr=Re.lineY1;return Re.angle=Re.x,delete Re.x,Re.startAngle=Re.x0,delete Re.x0,Re.endAngle=Re.x1,delete Re.x1,Re.radius=Re.y,delete Re.y,Re.innerRadius=Re.y0,delete Re.y0,Re.outerRadius=Re.y1,delete Re.y1,Re.lineStartAngle=function(){return V(wt())},delete Re.lineX0,Re.lineEndAngle=function(){return V(Rt())},delete Re.lineX1,Re.lineInnerRadius=function(){return V(Vt())},delete Re.lineY0,Re.lineOuterRadius=function(){return V(rr())},delete Re.lineY1,Re.curve=function(qt){return arguments.length?ct(H(qt)):ct()._curve},Re}function Z(Re,ct){return[(ct=+ct)*Math.cos(Re-=Math.PI/2),ct*Math.sin(Re)]}F.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(Re,ct){this._curve.point(ct*Math.sin(Re),ct*-Math.cos(Re))}};var $=Array.prototype.slice;function re(Re){return Re.source}function R(Re){return Re.target}function N(Re){var ct=re,wt=R,Rt=L,Vt=M,rr=null;function qt(){var Jt,or=$.call(arguments),gr=ct.apply(this,or),dr=wt.apply(this,or);if(rr||(rr=Jt=p.path()),Re(rr,+Rt.apply(this,(or[0]=gr,or)),+Vt.apply(this,or),+Rt.apply(this,(or[0]=dr,or)),+Vt.apply(this,or)),Jt)return rr=null,Jt+""||null}return qt.source=function(Jt){return arguments.length?(ct=Jt,qt):ct},qt.target=function(Jt){return arguments.length?(wt=Jt,qt):wt},qt.x=function(Jt){return arguments.length?(Rt=typeof Jt=="function"?Jt:x(+Jt),qt):Rt},qt.y=function(Jt){return arguments.length?(Vt=typeof Jt=="function"?Jt:x(+Jt),qt):Vt},qt.context=function(Jt){return arguments.length?(rr=Jt==null?null:Jt,qt):rr},qt}function U(Re,ct,wt,Rt,Vt){Re.moveTo(ct,wt),Re.bezierCurveTo(ct=(ct+Rt)/2,wt,ct,Vt,Rt,Vt)}function te(Re,ct,wt,Rt,Vt){Re.moveTo(ct,wt),Re.bezierCurveTo(ct,wt=(wt+Vt)/2,Rt,wt,Rt,Vt)}function j(Re,ct,wt,Rt,Vt){var rr=Z(ct,wt),qt=Z(ct,wt=(wt+Vt)/2),Jt=Z(Rt,wt),or=Z(Rt,Vt);Re.moveTo(rr[0],rr[1]),Re.bezierCurveTo(qt[0],qt[1],Jt[0],Jt[1],or[0],or[1])}var Y={draw:function(Re,ct){var wt=Math.sqrt(ct/s);Re.moveTo(wt,0),Re.arc(0,0,wt,0,l)}},J={draw:function(Re,ct){var wt=Math.sqrt(ct/5)/2;Re.moveTo(-3*wt,-wt),Re.lineTo(-wt,-wt),Re.lineTo(-wt,-3*wt),Re.lineTo(wt,-3*wt),Re.lineTo(wt,-wt),Re.lineTo(3*wt,-wt),Re.lineTo(3*wt,wt),Re.lineTo(wt,wt),Re.lineTo(wt,3*wt),Re.lineTo(-wt,3*wt),Re.lineTo(-wt,wt),Re.lineTo(-3*wt,wt),Re.closePath()}},ee=Math.sqrt(1/3),ne=2*ee,se={draw:function(Re,ct){var wt=Math.sqrt(ct/ne),Rt=wt*ee;Re.moveTo(0,-wt),Re.lineTo(Rt,0),Re.lineTo(0,wt),Re.lineTo(-Rt,0),Re.closePath()}},oe=Math.sin(s/10)/Math.sin(7*s/10),he=Math.sin(l/10)*oe,le=-Math.cos(l/10)*oe,de={draw:function(Re,ct){var wt=Math.sqrt(.8908130915292852*ct),Rt=he*wt,Vt=le*wt;Re.moveTo(0,-wt),Re.lineTo(Rt,Vt);for(var rr=1;rr<5;++rr){var qt=l*rr/5,Jt=Math.cos(qt),or=Math.sin(qt);Re.lineTo(or*wt,-Jt*wt),Re.lineTo(Jt*Rt-or*Vt,or*Rt+Jt*Vt)}Re.closePath()}},xe={draw:function(Re,ct){var wt=Math.sqrt(ct),Rt=-wt/2;Re.rect(Rt,Rt,wt,wt)}},we=Math.sqrt(3),be={draw:function(Re,ct){var wt=-Math.sqrt(ct/(3*we));Re.moveTo(0,2*wt),Re.lineTo(-we*wt,-wt),Re.lineTo(we*wt,-wt),Re.closePath()}},Ae=-.5,fe=Math.sqrt(3)/2,me=1/Math.sqrt(12),ke=3*(me/2+1),Te={draw:function(Re,ct){var wt=Math.sqrt(ct/ke),Rt=wt/2,Vt=wt*me,rr=Rt,qt=wt*me+wt,Jt=-rr,or=qt;Re.moveTo(Rt,Vt),Re.lineTo(rr,qt),Re.lineTo(Jt,or),Re.lineTo(Ae*Rt-fe*Vt,fe*Rt+Ae*Vt),Re.lineTo(Ae*rr-fe*qt,fe*rr+Ae*qt),Re.lineTo(Ae*Jt-fe*or,fe*Jt+Ae*or),Re.lineTo(Ae*Rt+fe*Vt,Ae*Vt-fe*Rt),Re.lineTo(Ae*rr+fe*qt,Ae*qt-fe*rr),Re.lineTo(Ae*Jt+fe*or,Ae*or-fe*Jt),Re.closePath()}},Me=[Y,J,se,xe,de,be,Te];function Oe(){}function Fe(Re,ct,wt){Re._context.bezierCurveTo((2*Re._x0+Re._x1)/3,(2*Re._y0+Re._y1)/3,(Re._x0+2*Re._x1)/3,(Re._y0+2*Re._y1)/3,(Re._x0+4*Re._x1+ct)/6,(Re._y0+4*Re._y1+wt)/6)}function qe(Re){this._context=Re}function et(Re){this._context=Re}function ze(Re){this._context=Re}function Ue(Re,ct){this._basis=new qe(Re),this._beta=ct}qe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Fe(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Re,ct){switch(Re=+Re,ct=+ct,this._point){case 0:this._point=1,this._line?this._context.lineTo(Re,ct):this._context.moveTo(Re,ct);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Fe(this,Re,ct)}this._x0=this._x1,this._x1=Re,this._y0=this._y1,this._y1=ct}},et.prototype={areaStart:Oe,areaEnd:Oe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(Re,ct){switch(Re=+Re,ct=+ct,this._point){case 0:this._point=1,this._x2=Re,this._y2=ct;break;case 1:this._point=2,this._x3=Re,this._y3=ct;break;case 2:this._point=3,this._x4=Re,this._y4=ct,this._context.moveTo((this._x0+4*this._x1+Re)/6,(this._y0+4*this._y1+ct)/6);break;default:Fe(this,Re,ct)}this._x0=this._x1,this._x1=Re,this._y0=this._y1,this._y1=ct}},ze.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(Re,ct){switch(Re=+Re,ct=+ct,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var wt=(this._x0+4*this._x1+Re)/6,Rt=(this._y0+4*this._y1+ct)/6;this._line?this._context.lineTo(wt,Rt):this._context.moveTo(wt,Rt);break;case 3:this._point=4;default:Fe(this,Re,ct)}this._x0=this._x1,this._x1=Re,this._y0=this._y1,this._y1=ct}},Ue.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var Re=this._x,ct=this._y,wt=Re.length-1;if(wt>0)for(var Rt,Vt=Re[0],rr=ct[0],qt=Re[wt]-Vt,Jt=ct[wt]-rr,or=-1;++or<=wt;)Rt=or/wt,this._basis.point(this._beta*Re[or]+(1-this._beta)*(Vt+Rt*qt),this._beta*ct[or]+(1-this._beta)*(rr+Rt*Jt));this._x=this._y=null,this._basis.lineEnd()},point:function(Re,ct){this._x.push(+Re),this._y.push(+ct)}};var We=function Re(ct){function wt(Rt){return ct===1?new qe(Rt):new Ue(Rt,ct)}return wt.beta=function(Rt){return Re(+Rt)},wt}(.85);function Ze(Re,ct,wt){Re._context.bezierCurveTo(Re._x1+Re._k*(Re._x2-Re._x0),Re._y1+Re._k*(Re._y2-Re._y0),Re._x2+Re._k*(Re._x1-ct),Re._y2+Re._k*(Re._y1-wt),Re._x2,Re._y2)}function nt(Re,ct){this._context=Re,this._k=(1-ct)/6}nt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ze(this,this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Re,ct){switch(Re=+Re,ct=+ct,this._point){case 0:this._point=1,this._line?this._context.lineTo(Re,ct):this._context.moveTo(Re,ct);break;case 1:this._point=2,this._x1=Re,this._y1=ct;break;case 2:this._point=3;default:Ze(this,Re,ct)}this._x0=this._x1,this._x1=this._x2,this._x2=Re,this._y0=this._y1,this._y1=this._y2,this._y2=ct}};var ft=function Re(ct){function wt(Rt){return new nt(Rt,ct)}return wt.tension=function(Rt){return Re(+Rt)},wt}(0);function xt(Re,ct){this._context=Re,this._k=(1-ct)/6}xt.prototype={areaStart:Oe,areaEnd:Oe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Re,ct){switch(Re=+Re,ct=+ct,this._point){case 0:this._point=1,this._x3=Re,this._y3=ct;break;case 1:this._point=2,this._context.moveTo(this._x4=Re,this._y4=ct);break;case 2:this._point=3,this._x5=Re,this._y5=ct;break;default:Ze(this,Re,ct)}this._x0=this._x1,this._x1=this._x2,this._x2=Re,this._y0=this._y1,this._y1=this._y2,this._y2=ct}};var It=function Re(ct){function wt(Rt){return new xt(Rt,ct)}return wt.tension=function(Rt){return Re(+Rt)},wt}(0);function Et(Re,ct){this._context=Re,this._k=(1-ct)/6}Et.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(Re,ct){switch(Re=+Re,ct=+ct,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ze(this,Re,ct)}this._x0=this._x1,this._x1=this._x2,this._x2=Re,this._y0=this._y1,this._y1=this._y2,this._y2=ct}};var it=function Re(ct){function wt(Rt){return new Et(Rt,ct)}return wt.tension=function(Rt){return Re(+Rt)},wt}(0);function rt(Re,ct,wt){var Rt=Re._x1,Vt=Re._y1,rr=Re._x2,qt=Re._y2;if(Re._l01_a>1e-12){var Jt=2*Re._l01_2a+3*Re._l01_a*Re._l12_a+Re._l12_2a,or=3*Re._l01_a*(Re._l01_a+Re._l12_a);Rt=(Rt*Jt-Re._x0*Re._l12_2a+Re._x2*Re._l01_2a)/or,Vt=(Vt*Jt-Re._y0*Re._l12_2a+Re._y2*Re._l01_2a)/or}if(Re._l23_a>1e-12){var gr=2*Re._l23_2a+3*Re._l23_a*Re._l12_a+Re._l12_2a,dr=3*Re._l23_a*(Re._l23_a+Re._l12_a);rr=(rr*gr+Re._x1*Re._l23_2a-ct*Re._l12_2a)/dr,qt=(qt*gr+Re._y1*Re._l23_2a-wt*Re._l12_2a)/dr}Re._context.bezierCurveTo(Rt,Vt,rr,qt,Re._x2,Re._y2)}function At(Re,ct){this._context=Re,this._alpha=ct}At.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Re,ct){if(Re=+Re,ct=+ct,this._point){var wt=this._x2-Re,Rt=this._y2-ct;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(wt*wt+Rt*Rt,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Re,ct):this._context.moveTo(Re,ct);break;case 1:this._point=2;break;case 2:this._point=3;default:rt(this,Re,ct)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Re,this._y0=this._y1,this._y1=this._y2,this._y2=ct}};var Gt=function Re(ct){function wt(Rt){return ct?new At(Rt,ct):new nt(Rt,0)}return wt.alpha=function(Rt){return Re(+Rt)},wt}(.5);function Qt(Re,ct){this._context=Re,this._alpha=ct}Qt.prototype={areaStart:Oe,areaEnd:Oe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Re,ct){if(Re=+Re,ct=+ct,this._point){var wt=this._x2-Re,Rt=this._y2-ct;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(wt*wt+Rt*Rt,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=Re,this._y3=ct;break;case 1:this._point=2,this._context.moveTo(this._x4=Re,this._y4=ct);break;case 2:this._point=3,this._x5=Re,this._y5=ct;break;default:rt(this,Re,ct)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Re,this._y0=this._y1,this._y1=this._y2,this._y2=ct}};var Ve=function Re(ct){function wt(Rt){return ct?new Qt(Rt,ct):new xt(Rt,0)}return wt.alpha=function(Rt){return Re(+Rt)},wt}(.5);function Ye(Re,ct){this._context=Re,this._alpha=ct}Ye.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(Re,ct){if(Re=+Re,ct=+ct,this._point){var wt=this._x2-Re,Rt=this._y2-ct;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(wt*wt+Rt*Rt,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:rt(this,Re,ct)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Re,this._y0=this._y1,this._y1=this._y2,this._y2=ct}};var Be=function Re(ct){function wt(Rt){return ct?new Ye(Rt,ct):new Et(Rt,0)}return wt.alpha=function(Rt){return Re(+Rt)},wt}(.5);function Je(Re){this._context=Re}function Se(Re){return Re<0?-1:1}function Pe(Re,ct,wt){var Rt=Re._x1-Re._x0,Vt=ct-Re._x1,rr=(Re._y1-Re._y0)/(Rt||Vt<0&&-0),qt=(wt-Re._y1)/(Vt||Rt<0&&-0),Jt=(rr*Vt+qt*Rt)/(Rt+Vt);return(Se(rr)+Se(qt))*Math.min(Math.abs(rr),Math.abs(qt),.5*Math.abs(Jt))||0}function De(Re,ct){var wt=Re._x1-Re._x0;return wt?(3*(Re._y1-Re._y0)/wt-ct)/2:ct}function Ie(Re,ct,wt){var Rt=Re._x0,Vt=Re._y0,rr=Re._x1,qt=Re._y1,Jt=(rr-Rt)/3;Re._context.bezierCurveTo(Rt+Jt,Vt+Jt*ct,rr-Jt,qt-Jt*wt,rr,qt)}function $e(Re){this._context=Re}function st(Re){this._context=new dt(Re)}function dt(Re){this._context=Re}function ut(Re){this._context=Re}function Lt(Re){var ct,wt,Rt=Re.length-1,Vt=new Array(Rt),rr=new Array(Rt),qt=new Array(Rt);for(Vt[0]=0,rr[0]=2,qt[0]=Re[0]+2*Re[1],ct=1;ct<Rt-1;++ct)Vt[ct]=1,rr[ct]=4,qt[ct]=4*Re[ct]+2*Re[ct+1];for(Vt[Rt-1]=2,rr[Rt-1]=7,qt[Rt-1]=8*Re[Rt-1]+Re[Rt],ct=1;ct<Rt;++ct)wt=Vt[ct]/rr[ct-1],rr[ct]-=wt,qt[ct]-=wt*qt[ct-1];for(Vt[Rt-1]=qt[Rt-1]/rr[Rt-1],ct=Rt-2;ct>=0;--ct)Vt[ct]=(qt[ct]-Vt[ct+1])/rr[ct];for(rr[Rt-1]=(Re[Rt]+Vt[Rt-1])/2,ct=0;ct<Rt-1;++ct)rr[ct]=2*Re[ct+1]-Vt[ct+1];return[Vt,rr]}function lt(Re,ct){this._context=Re,this._t=ct}function Ct(Re,ct){if((Vt=Re.length)>1)for(var wt,Rt,Vt,rr=1,qt=Re[ct[0]],Jt=qt.length;rr<Vt;++rr)for(Rt=qt,qt=Re[ct[rr]],wt=0;wt<Jt;++wt)qt[wt][1]+=qt[wt][0]=isNaN(Rt[wt][1])?Rt[wt][0]:Rt[wt][1]}function Pt(Re){for(var ct=Re.length,wt=new Array(ct);--ct>=0;)wt[ct]=ct;return wt}function Ke(Re,ct){return Re[ct]}function mt(Re){var ct=Re.map(Dt);return Pt(Re).sort(function(wt,Rt){return ct[wt]-ct[Rt]})}function Dt(Re){for(var ct,wt=-1,Rt=0,Vt=Re.length,rr=-1/0;++wt<Vt;)(ct=+Re[wt][1])>rr&&(rr=ct,Rt=wt);return Rt}function Bt(Re){var ct=Re.map(Zt);return Pt(Re).sort(function(wt,Rt){return ct[wt]-ct[Rt]})}function Zt(Re){for(var ct,wt=0,Rt=-1,Vt=Re.length;++Rt<Vt;)(ct=+Re[Rt][1])&&(wt+=ct);return wt}Je.prototype={areaStart:Oe,areaEnd:Oe,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(Re,ct){Re=+Re,ct=+ct,this._point?this._context.lineTo(Re,ct):(this._point=1,this._context.moveTo(Re,ct))}},$e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ie(this,this._t0,De(this,this._t0))}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Re,ct){var wt=NaN;if(ct=+ct,(Re=+Re)!==this._x1||ct!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Re,ct):this._context.moveTo(Re,ct);break;case 1:this._point=2;break;case 2:this._point=3,Ie(this,De(this,wt=Pe(this,Re,ct)),wt);break;default:Ie(this,this._t0,wt=Pe(this,Re,ct))}this._x0=this._x1,this._x1=Re,this._y0=this._y1,this._y1=ct,this._t0=wt}}},(st.prototype=Object.create($e.prototype)).point=function(Re,ct){$e.prototype.point.call(this,ct,Re)},dt.prototype={moveTo:function(Re,ct){this._context.moveTo(ct,Re)},closePath:function(){this._context.closePath()},lineTo:function(Re,ct){this._context.lineTo(ct,Re)},bezierCurveTo:function(Re,ct,wt,Rt,Vt,rr){this._context.bezierCurveTo(ct,Re,Rt,wt,rr,Vt)}},ut.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var Re=this._x,ct=this._y,wt=Re.length;if(wt)if(this._line?this._context.lineTo(Re[0],ct[0]):this._context.moveTo(Re[0],ct[0]),wt===2)this._context.lineTo(Re[1],ct[1]);else for(var Rt=Lt(Re),Vt=Lt(ct),rr=0,qt=1;qt<wt;++rr,++qt)this._context.bezierCurveTo(Rt[0][rr],Vt[0][rr],Rt[1][rr],Vt[1][rr],Re[qt],ct[qt]);(this._line||this._line!==0&&wt===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(Re,ct){this._x.push(+Re),this._y.push(+ct)}},lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(Re,ct){switch(Re=+Re,ct=+ct,this._point){case 0:this._point=1,this._line?this._context.lineTo(Re,ct):this._context.moveTo(Re,ct);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,ct),this._context.lineTo(Re,ct);else{var wt=this._x*(1-this._t)+Re*this._t;this._context.lineTo(wt,this._y),this._context.lineTo(wt,ct)}}this._x=Re,this._y=ct}},o.arc=function(){var Re=v,ct=m,wt=x(0),Rt=null,Vt=c,rr=b,qt=g,Jt=null;function or(){var gr,dr,ur=+Re.apply(this,arguments),cr=+ct.apply(this,arguments),mr=Vt.apply(this,arguments)-a,Dr=rr.apply(this,arguments)-a,yr=y(Dr-mr),Br=Dr>mr;if(Jt||(Jt=gr=p.path()),cr<ur&&(dr=cr,cr=ur,ur=dr),cr>1e-12)if(yr>l-1e-12)Jt.moveTo(cr*r(mr),cr*n(mr)),Jt.arc(0,0,cr,mr,Dr,!Br),ur>1e-12&&(Jt.moveTo(ur*r(Dr),ur*n(Dr)),Jt.arc(0,0,ur,Dr,mr,Br));else{var Kr,an,Ln=mr,Pn=Dr,An=mr,tn=Dr,zr=yr,Ar=yr,qr=qt.apply(this,arguments)/2,On=qr>1e-12&&(Rt?+Rt.apply(this,arguments):h(ur*ur+cr*cr)),Fr=i(y(cr-ur)/2,+wt.apply(this,arguments)),on=Fr,Mn=Fr;if(On>1e-12){var bn=d(On/ur*n(qr)),Dn=d(On/cr*n(qr));(zr-=2*bn)>1e-12?(An+=bn*=Br?1:-1,tn-=bn):(zr=0,An=tn=(mr+Dr)/2),(Ar-=2*Dn)>1e-12?(Ln+=Dn*=Br?1:-1,Pn-=Dn):(Ar=0,Ln=Pn=(mr+Dr)/2)}var tr=cr*r(Ln),Ot=cr*n(Ln),Ht=ur*r(tn),fr=ur*n(tn);if(Fr>1e-12){var Tr,Wr=cr*r(Pn),Gr=cr*n(Pn),wr=ur*r(An),br=ur*n(An);if(yr<s&&(Tr=w(tr,Ot,wr,br,Wr,Gr,Ht,fr))){var Sr=tr-Tr[0],Ir=Ot-Tr[1],Er=Wr-Tr[0],Xr=Gr-Tr[1],fn=1/n(f((Sr*Er+Ir*Xr)/(h(Sr*Sr+Ir*Ir)*h(Er*Er+Xr*Xr)))/2),_n=h(Tr[0]*Tr[0]+Tr[1]*Tr[1]);on=i(Fr,(ur-_n)/(fn-1)),Mn=i(Fr,(cr-_n)/(fn+1))}}Ar>1e-12?Mn>1e-12?(Kr=_(wr,br,tr,Ot,cr,Mn,Br),an=_(Wr,Gr,Ht,fr,cr,Mn,Br),Jt.moveTo(Kr.cx+Kr.x01,Kr.cy+Kr.y01),Mn<Fr?Jt.arc(Kr.cx,Kr.cy,Mn,e(Kr.y01,Kr.x01),e(an.y01,an.x01),!Br):(Jt.arc(Kr.cx,Kr.cy,Mn,e(Kr.y01,Kr.x01),e(Kr.y11,Kr.x11),!Br),Jt.arc(0,0,cr,e(Kr.cy+Kr.y11,Kr.cx+Kr.x11),e(an.cy+an.y11,an.cx+an.x11),!Br),Jt.arc(an.cx,an.cy,Mn,e(an.y11,an.x11),e(an.y01,an.x01),!Br))):(Jt.moveTo(tr,Ot),Jt.arc(0,0,cr,Ln,Pn,!Br)):Jt.moveTo(tr,Ot),ur>1e-12&&zr>1e-12?on>1e-12?(Kr=_(Ht,fr,Wr,Gr,ur,-on,Br),an=_(tr,Ot,wr,br,ur,-on,Br),Jt.lineTo(Kr.cx+Kr.x01,Kr.cy+Kr.y01),on<Fr?Jt.arc(Kr.cx,Kr.cy,on,e(Kr.y01,Kr.x01),e(an.y01,an.x01),!Br):(Jt.arc(Kr.cx,Kr.cy,on,e(Kr.y01,Kr.x01),e(Kr.y11,Kr.x11),!Br),Jt.arc(0,0,ur,e(Kr.cy+Kr.y11,Kr.cx+Kr.x11),e(an.cy+an.y11,an.cx+an.x11),Br),Jt.arc(an.cx,an.cy,on,e(an.y11,an.x11),e(an.y01,an.x01),!Br))):Jt.arc(0,0,ur,tn,An,Br):Jt.lineTo(Ht,fr)}else Jt.moveTo(0,0);if(Jt.closePath(),gr)return Jt=null,gr+""||null}return or.centroid=function(){var gr=(+Re.apply(this,arguments)+ +ct.apply(this,arguments))/2,dr=(+Vt.apply(this,arguments)+ +rr.apply(this,arguments))/2-s/2;return[r(dr)*gr,n(dr)*gr]},or.innerRadius=function(gr){return arguments.length?(Re=typeof gr=="function"?gr:x(+gr),or):Re},or.outerRadius=function(gr){return arguments.length?(ct=typeof gr=="function"?gr:x(+gr),or):ct},or.cornerRadius=function(gr){return arguments.length?(wt=typeof gr=="function"?gr:x(+gr),or):wt},or.padRadius=function(gr){return arguments.length?(Rt=gr==null?null:typeof gr=="function"?gr:x(+gr),or):Rt},or.startAngle=function(gr){return arguments.length?(Vt=typeof gr=="function"?gr:x(+gr),or):Vt},or.endAngle=function(gr){return arguments.length?(rr=typeof gr=="function"?gr:x(+gr),or):rr},or.padAngle=function(gr){return arguments.length?(qt=typeof gr=="function"?gr:x(+gr),or):qt},or.context=function(gr){return arguments.length?(Jt=gr==null?null:gr,or):Jt},or},o.area=P,o.areaRadial=K,o.curveBasis=function(Re){return new qe(Re)},o.curveBasisClosed=function(Re){return new et(Re)},o.curveBasisOpen=function(Re){return new ze(Re)},o.curveBundle=We,o.curveCardinal=ft,o.curveCardinalClosed=It,o.curveCardinalOpen=it,o.curveCatmullRom=Gt,o.curveCatmullRomClosed=Ve,o.curveCatmullRomOpen=Be,o.curveLinear=k,o.curveLinearClosed=function(Re){return new Je(Re)},o.curveMonotoneX=function(Re){return new $e(Re)},o.curveMonotoneY=function(Re){return new st(Re)},o.curveNatural=function(Re){return new ut(Re)},o.curveStep=function(Re){return new lt(Re,.5)},o.curveStepAfter=function(Re){return new lt(Re,1)},o.curveStepBefore=function(Re){return new lt(Re,0)},o.line=I,o.lineRadial=Q,o.linkHorizontal=function(){return N(U)},o.linkRadial=function(){var Re=N(j);return Re.angle=Re.x,delete Re.x,Re.radius=Re.y,delete Re.y,Re},o.linkVertical=function(){return N(te)},o.pie=function(){var Re=E,ct=S,wt=null,Rt=x(0),Vt=x(l),rr=x(0);function qt(Jt){var or,gr,dr,ur,cr,mr=Jt.length,Dr=0,yr=new Array(mr),Br=new Array(mr),Kr=+Rt.apply(this,arguments),an=Math.min(l,Math.max(-l,Vt.apply(this,arguments)-Kr)),Ln=Math.min(Math.abs(an)/mr,rr.apply(this,arguments)),Pn=Ln*(an<0?-1:1);for(or=0;or<mr;++or)(cr=Br[yr[or]=or]=+Re(Jt[or],or,Jt))>0&&(Dr+=cr);for(ct!=null?yr.sort(function(An,tn){return ct(Br[An],Br[tn])}):wt!=null&&yr.sort(function(An,tn){return wt(Jt[An],Jt[tn])}),or=0,dr=Dr?(an-mr*Pn)/Dr:0;or<mr;++or,Kr=ur)gr=yr[or],ur=Kr+((cr=Br[gr])>0?cr*dr:0)+Pn,Br[gr]={data:Jt[gr],index:or,value:cr,startAngle:Kr,endAngle:ur,padAngle:Ln};return Br}return qt.value=function(Jt){return arguments.length?(Re=typeof Jt=="function"?Jt:x(+Jt),qt):Re},qt.sortValues=function(Jt){return arguments.length?(ct=Jt,wt=null,qt):ct},qt.sort=function(Jt){return arguments.length?(wt=Jt,ct=null,qt):wt},qt.startAngle=function(Jt){return arguments.length?(Rt=typeof Jt=="function"?Jt:x(+Jt),qt):Rt},qt.endAngle=function(Jt){return arguments.length?(Vt=typeof Jt=="function"?Jt:x(+Jt),qt):Vt},qt.padAngle=function(Jt){return arguments.length?(rr=typeof Jt=="function"?Jt:x(+Jt),qt):rr},qt},o.pointRadial=Z,o.radialArea=K,o.radialLine=Q,o.stack=function(){var Re=x([]),ct=Pt,wt=Ct,Rt=Ke;function Vt(rr){var qt,Jt,or=Re.apply(this,arguments),gr=rr.length,dr=or.length,ur=new Array(dr);for(qt=0;qt<dr;++qt){for(var cr,mr=or[qt],Dr=ur[qt]=new Array(gr),yr=0;yr<gr;++yr)Dr[yr]=cr=[0,+Rt(rr[yr],mr,yr,rr)],cr.data=rr[yr];Dr.key=mr}for(qt=0,Jt=ct(ur);qt<dr;++qt)ur[Jt[qt]].index=qt;return wt(ur,Jt),ur}return Vt.keys=function(rr){return arguments.length?(Re=typeof rr=="function"?rr:x($.call(rr)),Vt):Re},Vt.value=function(rr){return arguments.length?(Rt=typeof rr=="function"?rr:x(+rr),Vt):Rt},Vt.order=function(rr){return arguments.length?(ct=rr==null?Pt:typeof rr=="function"?rr:x($.call(rr)),Vt):ct},Vt.offset=function(rr){return arguments.length?(wt=rr==null?Ct:rr,Vt):wt},Vt},o.stackOffsetDiverging=function(Re,ct){if((Jt=Re.length)>0)for(var wt,Rt,Vt,rr,qt,Jt,or=0,gr=Re[ct[0]].length;or<gr;++or)for(rr=qt=0,wt=0;wt<Jt;++wt)(Vt=(Rt=Re[ct[wt]][or])[1]-Rt[0])>0?(Rt[0]=rr,Rt[1]=rr+=Vt):Vt<0?(Rt[1]=qt,Rt[0]=qt+=Vt):(Rt[0]=0,Rt[1]=Vt)},o.stackOffsetExpand=function(Re,ct){if((Rt=Re.length)>0){for(var wt,Rt,Vt,rr=0,qt=Re[0].length;rr<qt;++rr){for(Vt=wt=0;wt<Rt;++wt)Vt+=Re[wt][rr][1]||0;if(Vt)for(wt=0;wt<Rt;++wt)Re[wt][rr][1]/=Vt}Ct(Re,ct)}},o.stackOffsetNone=Ct,o.stackOffsetSilhouette=function(Re,ct){if((wt=Re.length)>0){for(var wt,Rt=0,Vt=Re[ct[0]],rr=Vt.length;Rt<rr;++Rt){for(var qt=0,Jt=0;qt<wt;++qt)Jt+=Re[qt][Rt][1]||0;Vt[Rt][1]+=Vt[Rt][0]=-Jt/2}Ct(Re,ct)}},o.stackOffsetWiggle=function(Re,ct){if((Vt=Re.length)>0&&(Rt=(wt=Re[ct[0]]).length)>0){for(var wt,Rt,Vt,rr=0,qt=1;qt<Rt;++qt){for(var Jt=0,or=0,gr=0;Jt<Vt;++Jt){for(var dr=Re[ct[Jt]],ur=dr[qt][1]||0,cr=(ur-(dr[qt-1][1]||0))/2,mr=0;mr<Jt;++mr){var Dr=Re[ct[mr]];cr+=(Dr[qt][1]||0)-(Dr[qt-1][1]||0)}or+=ur,gr+=cr*ur}wt[qt-1][1]+=wt[qt-1][0]=rr,or&&(rr-=gr/or)}wt[qt-1][1]+=wt[qt-1][0]=rr,Ct(Re,ct)}},o.stackOrderAppearance=mt,o.stackOrderAscending=Bt,o.stackOrderDescending=function(Re){return Bt(Re).reverse()},o.stackOrderInsideOut=function(Re){var ct,wt,Rt=Re.length,Vt=Re.map(Zt),rr=mt(Re),qt=0,Jt=0,or=[],gr=[];for(ct=0;ct<Rt;++ct)wt=rr[ct],qt<Jt?(qt+=Vt[wt],or.push(wt)):(Jt+=Vt[wt],gr.push(wt));return gr.reverse().concat(or)},o.stackOrderNone=Pt,o.stackOrderReverse=function(Re){return Pt(Re).reverse()},o.symbol=function(){var Re=x(Y),ct=x(64),wt=null;function Rt(){var Vt;if(wt||(wt=Vt=p.path()),Re.apply(this,arguments).draw(wt,+ct.apply(this,arguments)),Vt)return wt=null,Vt+""||null}return Rt.type=function(Vt){return arguments.length?(Re=typeof Vt=="function"?Vt:x(Vt),Rt):Re},Rt.size=function(Vt){return arguments.length?(ct=typeof Vt=="function"?Vt:x(+Vt),Rt):ct},Rt.context=function(Vt){return arguments.length?(wt=Vt==null?null:Vt,Rt):wt},Rt},o.symbolCircle=Y,o.symbolCross=J,o.symbolDiamond=se,o.symbolSquare=xe,o.symbolStar=de,o.symbolTriangle=be,o.symbolWye=Te,o.symbols=Me,Object.defineProperty(o,"__esModule",{value:!0})})},{"d3-path":117}],120:[function(u,q,W){(function(o,p){typeof W=="object"&&q!==void 0?p(W,u("d3-time")):p((o=o||self).d3=o.d3||{},o.d3)})(this,function(o,p){function x(it){if(0<=it.y&&it.y<100){var rt=new Date(-1,it.m,it.d,it.H,it.M,it.S,it.L);return rt.setFullYear(it.y),rt}return new Date(it.y,it.m,it.d,it.H,it.M,it.S,it.L)}function y(it){if(0<=it.y&&it.y<100){var rt=new Date(Date.UTC(-1,it.m,it.d,it.H,it.M,it.S,it.L));return rt.setUTCFullYear(it.y),rt}return new Date(Date.UTC(it.y,it.m,it.d,it.H,it.M,it.S,it.L))}function e(it,rt,At){return{y:it,m:rt,d:At,H:0,M:0,S:0,L:0}}function r(it){var rt=it.dateTime,At=it.date,Gt=it.time,Qt=it.periods,Ve=it.days,Ye=it.shortDays,Be=it.months,Je=it.shortMonths,Se=f(Qt),Pe=d(Qt),De=f(Ve),Ie=d(Ve),$e=f(Ye),st=d(Ye),dt=f(Be),ut=d(Be),Lt=f(Je),lt=d(Je),Ct={a:function(Zt){return Ye[Zt.getDay()]},A:function(Zt){return Ve[Zt.getDay()]},b:function(Zt){return Je[Zt.getMonth()]},B:function(Zt){return Be[Zt.getMonth()]},c:null,d:K,e:K,f:N,H:Z,I:$,j:re,L:R,m:U,M:te,p:function(Zt){return Qt[+(Zt.getHours()>=12)]},q:function(Zt){return 1+~~(Zt.getMonth()/3)},Q:nt,s:ft,S:j,u:Y,U:J,V:ee,w:ne,W:se,x:null,X:null,y:oe,Y:he,Z:le,"%":Ze},Pt={a:function(Zt){return Ye[Zt.getUTCDay()]},A:function(Zt){return Ve[Zt.getUTCDay()]},b:function(Zt){return Je[Zt.getUTCMonth()]},B:function(Zt){return Be[Zt.getUTCMonth()]},c:null,d:de,e:de,f:fe,H:xe,I:we,j:be,L:Ae,m:me,M:ke,p:function(Zt){return Qt[+(Zt.getUTCHours()>=12)]},q:function(Zt){return 1+~~(Zt.getUTCMonth()/3)},Q:nt,s:ft,S:Te,u:Me,U:Oe,V:Fe,w:qe,W:et,x:null,X:null,y:ze,Y:Ue,Z:We,"%":Ze},Ke={a:function(Zt,Re,ct){var wt=$e.exec(Re.slice(ct));return wt?(Zt.w=st[wt[0].toLowerCase()],ct+wt[0].length):-1},A:function(Zt,Re,ct){var wt=De.exec(Re.slice(ct));return wt?(Zt.w=Ie[wt[0].toLowerCase()],ct+wt[0].length):-1},b:function(Zt,Re,ct){var wt=Lt.exec(Re.slice(ct));return wt?(Zt.m=lt[wt[0].toLowerCase()],ct+wt[0].length):-1},B:function(Zt,Re,ct){var wt=dt.exec(Re.slice(ct));return wt?(Zt.m=ut[wt[0].toLowerCase()],ct+wt[0].length):-1},c:function(Zt,Re,ct){return Bt(Zt,rt,Re,ct)},d:M,e:M,f:F,H:P,I:P,j:I,L:D,m:L,M:S,p:function(Zt,Re,ct){var wt=Se.exec(Re.slice(ct));return wt?(Zt.p=Pe[wt[0].toLowerCase()],ct+wt[0].length):-1},q:k,Q:V,s:Q,S:E,u:m,U:c,V:b,w:v,W:g,x:function(Zt,Re,ct){return Bt(Zt,At,Re,ct)},X:function(Zt,Re,ct){return Bt(Zt,Gt,Re,ct)},y:_,Y:w,Z:T,"%":H};function mt(Zt,Re){return function(ct){var wt,Rt,Vt,rr=[],qt=-1,Jt=0,or=Zt.length;for(ct instanceof Date||(ct=new Date(+ct));++qt<or;)Zt.charCodeAt(qt)===37&&(rr.push(Zt.slice(Jt,qt)),(Rt=i[wt=Zt.charAt(++qt)])!=null?wt=Zt.charAt(++qt):Rt=wt==="e"?" ":"0",(Vt=Re[wt])&&(wt=Vt(ct,Rt)),rr.push(wt),Jt=qt+1);return rr.push(Zt.slice(Jt,qt)),rr.join("")}}function Dt(Zt,Re){return function(ct){var wt,Rt,Vt=e(1900,void 0,1);if(Bt(Vt,Zt,ct+="",0)!=ct.length)return null;if("Q"in Vt)return new Date(Vt.Q);if("s"in Vt)return new Date(1e3*Vt.s+("L"in Vt?Vt.L:0));if(Re&&!("Z"in Vt)&&(Vt.Z=0),"p"in Vt&&(Vt.H=Vt.H%12+12*Vt.p),Vt.m===void 0&&(Vt.m="q"in Vt?Vt.q:0),"V"in Vt){if(Vt.V<1||Vt.V>53)return null;"w"in Vt||(Vt.w=1),"Z"in Vt?(Rt=(wt=y(e(Vt.y,0,1))).getUTCDay(),wt=Rt>4||Rt===0?p.utcMonday.ceil(wt):p.utcMonday(wt),wt=p.utcDay.offset(wt,7*(Vt.V-1)),Vt.y=wt.getUTCFullYear(),Vt.m=wt.getUTCMonth(),Vt.d=wt.getUTCDate()+(Vt.w+6)%7):(Rt=(wt=x(e(Vt.y,0,1))).getDay(),wt=Rt>4||Rt===0?p.timeMonday.ceil(wt):p.timeMonday(wt),wt=p.timeDay.offset(wt,7*(Vt.V-1)),Vt.y=wt.getFullYear(),Vt.m=wt.getMonth(),Vt.d=wt.getDate()+(Vt.w+6)%7)}else("W"in Vt||"U"in Vt)&&("w"in Vt||(Vt.w="u"in Vt?Vt.u%7:"W"in Vt?1:0),Rt="Z"in Vt?y(e(Vt.y,0,1)).getUTCDay():x(e(Vt.y,0,1)).getDay(),Vt.m=0,Vt.d="W"in Vt?(Vt.w+6)%7+7*Vt.W-(Rt+5)%7:Vt.w+7*Vt.U-(Rt+6)%7);return"Z"in Vt?(Vt.H+=Vt.Z/100|0,Vt.M+=Vt.Z%100,y(Vt)):x(Vt)}}function Bt(Zt,Re,ct,wt){for(var Rt,Vt,rr=0,qt=Re.length,Jt=ct.length;rr<qt;){if(wt>=Jt)return-1;if((Rt=Re.charCodeAt(rr++))===37){if(Rt=Re.charAt(rr++),!(Vt=Ke[Rt in i?Re.charAt(rr++):Rt])||(wt=Vt(Zt,ct,wt))<0)return-1}else if(Rt!=ct.charCodeAt(wt++))return-1}return wt}return Ct.x=mt(At,Ct),Ct.X=mt(Gt,Ct),Ct.c=mt(rt,Ct),Pt.x=mt(At,Pt),Pt.X=mt(Gt,Pt),Pt.c=mt(rt,Pt),{format:function(Zt){var Re=mt(Zt+="",Ct);return Re.toString=function(){return Zt},Re},parse:function(Zt){var Re=Dt(Zt+="",!1);return Re.toString=function(){return Zt},Re},utcFormat:function(Zt){var Re=mt(Zt+="",Pt);return Re.toString=function(){return Zt},Re},utcParse:function(Zt){var Re=Dt(Zt+="",!0);return Re.toString=function(){return Zt},Re}}}var t,i={"-":"",_:" ",0:"0"},n=/^\s*\d+/,h=/^%/,s=/[\\^$*+?|[\]().{}]/g;function a(it,rt,At){var Gt=it<0?"-":"",Qt=(Gt?-it:it)+"",Ve=Qt.length;return Gt+(Ve<At?new Array(At-Ve+1).join(rt)+Qt:Qt)}function l(it){return it.replace(s,"\\$&")}function f(it){return new RegExp("^(?:"+it.map(l).join("|")+")","i")}function d(it){for(var rt={},At=-1,Gt=it.length;++At<Gt;)rt[it[At].toLowerCase()]=At;return rt}function v(it,rt,At){var Gt=n.exec(rt.slice(At,At+1));return Gt?(it.w=+Gt[0],At+Gt[0].length):-1}function m(it,rt,At){var Gt=n.exec(rt.slice(At,At+1));return Gt?(it.u=+Gt[0],At+Gt[0].length):-1}function c(it,rt,At){var Gt=n.exec(rt.slice(At,At+2));return Gt?(it.U=+Gt[0],At+Gt[0].length):-1}function b(it,rt,At){var Gt=n.exec(rt.slice(At,At+2));return Gt?(it.V=+Gt[0],At+Gt[0].length):-1}function g(it,rt,At){var Gt=n.exec(rt.slice(At,At+2));return Gt?(it.W=+Gt[0],At+Gt[0].length):-1}function w(it,rt,At){var Gt=n.exec(rt.slice(At,At+4));return Gt?(it.y=+Gt[0],At+Gt[0].length):-1}function _(it,rt,At){var Gt=n.exec(rt.slice(At,At+2));return Gt?(it.y=+Gt[0]+(+Gt[0]>68?1900:2e3),At+Gt[0].length):-1}function T(it,rt,At){var Gt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(rt.slice(At,At+6));return Gt?(it.Z=Gt[1]?0:-(Gt[2]+(Gt[3]||"00")),At+Gt[0].length):-1}function k(it,rt,At){var Gt=n.exec(rt.slice(At,At+1));return Gt?(it.q=3*Gt[0]-3,At+Gt[0].length):-1}function L(it,rt,At){var Gt=n.exec(rt.slice(At,At+2));return Gt?(it.m=Gt[0]-1,At+Gt[0].length):-1}function M(it,rt,At){var Gt=n.exec(rt.slice(At,At+2));return Gt?(it.d=+Gt[0],At+Gt[0].length):-1}function I(it,rt,At){var Gt=n.exec(rt.slice(At,At+3));return Gt?(it.m=0,it.d=+Gt[0],At+Gt[0].length):-1}function P(it,rt,At){var Gt=n.exec(rt.slice(At,At+2));return Gt?(it.H=+Gt[0],At+Gt[0].length):-1}function S(it,rt,At){var Gt=n.exec(rt.slice(At,At+2));return Gt?(it.M=+Gt[0],At+Gt[0].length):-1}function E(it,rt,At){var Gt=n.exec(rt.slice(At,At+2));return Gt?(it.S=+Gt[0],At+Gt[0].length):-1}function D(it,rt,At){var Gt=n.exec(rt.slice(At,At+3));return Gt?(it.L=+Gt[0],At+Gt[0].length):-1}function F(it,rt,At){var Gt=n.exec(rt.slice(At,At+6));return Gt?(it.L=Math.floor(Gt[0]/1e3),At+Gt[0].length):-1}function H(it,rt,At){var Gt=h.exec(rt.slice(At,At+1));return Gt?At+Gt[0].length:-1}function V(it,rt,At){var Gt=n.exec(rt.slice(At));return Gt?(it.Q=+Gt[0],At+Gt[0].length):-1}function Q(it,rt,At){var Gt=n.exec(rt.slice(At));return Gt?(it.s=+Gt[0],At+Gt[0].length):-1}function K(it,rt){return a(it.getDate(),rt,2)}function Z(it,rt){return a(it.getHours(),rt,2)}function $(it,rt){return a(it.getHours()%12||12,rt,2)}function re(it,rt){return a(1+p.timeDay.count(p.timeYear(it),it),rt,3)}function R(it,rt){return a(it.getMilliseconds(),rt,3)}function N(it,rt){return R(it,rt)+"000"}function U(it,rt){return a(it.getMonth()+1,rt,2)}function te(it,rt){return a(it.getMinutes(),rt,2)}function j(it,rt){return a(it.getSeconds(),rt,2)}function Y(it){var rt=it.getDay();return rt===0?7:rt}function J(it,rt){return a(p.timeSunday.count(p.timeYear(it)-1,it),rt,2)}function ee(it,rt){var At=it.getDay();return it=At>=4||At===0?p.timeThursday(it):p.timeThursday.ceil(it),a(p.timeThursday.count(p.timeYear(it),it)+(p.timeYear(it).getDay()===4),rt,2)}function ne(it){return it.getDay()}function se(it,rt){return a(p.timeMonday.count(p.timeYear(it)-1,it),rt,2)}function oe(it,rt){return a(it.getFullYear()%100,rt,2)}function he(it,rt){return a(it.getFullYear()%1e4,rt,4)}function le(it){var rt=it.getTimezoneOffset();return(rt>0?"-":(rt*=-1,"+"))+a(rt/60|0,"0",2)+a(rt%60,"0",2)}function de(it,rt){return a(it.getUTCDate(),rt,2)}function xe(it,rt){return a(it.getUTCHours(),rt,2)}function we(it,rt){return a(it.getUTCHours()%12||12,rt,2)}function be(it,rt){return a(1+p.utcDay.count(p.utcYear(it),it),rt,3)}function Ae(it,rt){return a(it.getUTCMilliseconds(),rt,3)}function fe(it,rt){return Ae(it,rt)+"000"}function me(it,rt){return a(it.getUTCMonth()+1,rt,2)}function ke(it,rt){return a(it.getUTCMinutes(),rt,2)}function Te(it,rt){return a(it.getUTCSeconds(),rt,2)}function Me(it){var rt=it.getUTCDay();return rt===0?7:rt}function Oe(it,rt){return a(p.utcSunday.count(p.utcYear(it)-1,it),rt,2)}function Fe(it,rt){var At=it.getUTCDay();return it=At>=4||At===0?p.utcThursday(it):p.utcThursday.ceil(it),a(p.utcThursday.count(p.utcYear(it),it)+(p.utcYear(it).getUTCDay()===4),rt,2)}function qe(it){return it.getUTCDay()}function et(it,rt){return a(p.utcMonday.count(p.utcYear(it)-1,it),rt,2)}function ze(it,rt){return a(it.getUTCFullYear()%100,rt,2)}function Ue(it,rt){return a(it.getUTCFullYear()%1e4,rt,4)}function We(){return"+0000"}function Ze(){return"%"}function nt(it){return+it}function ft(it){return Math.floor(+it/1e3)}function xt(it){return t=r(it),o.timeFormat=t.format,o.timeParse=t.parse,o.utcFormat=t.utcFormat,o.utcParse=t.utcParse,t}xt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var It=Date.prototype.toISOString?function(it){return it.toISOString()}:o.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Et=+new Date("2000-01-01T00:00:00.000Z")?function(it){var rt=new Date(it);return isNaN(rt)?null:rt}:o.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");o.isoFormat=It,o.isoParse=Et,o.timeFormatDefaultLocale=xt,o.timeFormatLocale=r,Object.defineProperty(o,"__esModule",{value:!0})})},{"d3-time":121}],121:[function(u,q,W){(function(o,p){p(typeof W=="object"&&q!==void 0?W:(o=o||self).d3=o.d3||{})})(this,function(o){var p=new Date,x=new Date;function y(me,ke,Te,Me){function Oe(Fe){return me(Fe=arguments.length===0?new Date:new Date(+Fe)),Fe}return Oe.floor=function(Fe){return me(Fe=new Date(+Fe)),Fe},Oe.ceil=function(Fe){return me(Fe=new Date(Fe-1)),ke(Fe,1),me(Fe),Fe},Oe.round=function(Fe){var qe=Oe(Fe),et=Oe.ceil(Fe);return Fe-qe<et-Fe?qe:et},Oe.offset=function(Fe,qe){return ke(Fe=new Date(+Fe),qe==null?1:Math.floor(qe)),Fe},Oe.range=function(Fe,qe,et){var ze,Ue=[];if(Fe=Oe.ceil(Fe),et=et==null?1:Math.floor(et),!(Fe<qe&&et>0))return Ue;do Ue.push(ze=new Date(+Fe)),ke(Fe,et),me(Fe);while(ze<Fe&&Fe<qe);return Ue},Oe.filter=function(Fe){return y(function(qe){if(qe>=qe)for(;me(qe),!Fe(qe);)qe.setTime(qe-1)},function(qe,et){if(qe>=qe)if(et<0)for(;++et<=0;)for(;ke(qe,-1),!Fe(qe););else for(;--et>=0;)for(;ke(qe,1),!Fe(qe););})},Te&&(Oe.count=function(Fe,qe){return p.setTime(+Fe),x.setTime(+qe),me(p),me(x),Math.floor(Te(p,x))},Oe.every=function(Fe){return Fe=Math.floor(Fe),isFinite(Fe)&&Fe>0?Fe>1?Oe.filter(Me?function(qe){return Me(qe)%Fe==0}:function(qe){return Oe.count(0,qe)%Fe==0}):Oe:null}),Oe}var e=y(function(){},function(me,ke){me.setTime(+me+ke)},function(me,ke){return ke-me});e.every=function(me){return me=Math.floor(me),isFinite(me)&&me>0?me>1?y(function(ke){ke.setTime(Math.floor(ke/me)*me)},function(ke,Te){ke.setTime(+ke+Te*me)},function(ke,Te){return(Te-ke)/me}):e:null};var r=e.range,t=y(function(me){me.setTime(me-me.getMilliseconds())},function(me,ke){me.setTime(+me+1e3*ke)},function(me,ke){return(ke-me)/1e3},function(me){return me.getUTCSeconds()}),i=t.range,n=y(function(me){me.setTime(me-me.getMilliseconds()-1e3*me.getSeconds())},function(me,ke){me.setTime(+me+6e4*ke)},function(me,ke){return(ke-me)/6e4},function(me){return me.getMinutes()}),h=n.range,s=y(function(me){me.setTime(me-me.getMilliseconds()-1e3*me.getSeconds()-6e4*me.getMinutes())},function(me,ke){me.setTime(+me+36e5*ke)},function(me,ke){return(ke-me)/36e5},function(me){return me.getHours()}),a=s.range,l=y(function(me){me.setHours(0,0,0,0)},function(me,ke){me.setDate(me.getDate()+ke)},function(me,ke){return(ke-me-6e4*(ke.getTimezoneOffset()-me.getTimezoneOffset()))/864e5},function(me){return me.getDate()-1}),f=l.range;function d(me){return y(function(ke){ke.setDate(ke.getDate()-(ke.getDay()+7-me)%7),ke.setHours(0,0,0,0)},function(ke,Te){ke.setDate(ke.getDate()+7*Te)},function(ke,Te){return(Te-ke-6e4*(Te.getTimezoneOffset()-ke.getTimezoneOffset()))/6048e5})}var v=d(0),m=d(1),c=d(2),b=d(3),g=d(4),w=d(5),_=d(6),T=v.range,k=m.range,L=c.range,M=b.range,I=g.range,P=w.range,S=_.range,E=y(function(me){me.setDate(1),me.setHours(0,0,0,0)},function(me,ke){me.setMonth(me.getMonth()+ke)},function(me,ke){return ke.getMonth()-me.getMonth()+12*(ke.getFullYear()-me.getFullYear())},function(me){return me.getMonth()}),D=E.range,F=y(function(me){me.setMonth(0,1),me.setHours(0,0,0,0)},function(me,ke){me.setFullYear(me.getFullYear()+ke)},function(me,ke){return ke.getFullYear()-me.getFullYear()},function(me){return me.getFullYear()});F.every=function(me){return isFinite(me=Math.floor(me))&&me>0?y(function(ke){ke.setFullYear(Math.floor(ke.getFullYear()/me)*me),ke.setMonth(0,1),ke.setHours(0,0,0,0)},function(ke,Te){ke.setFullYear(ke.getFullYear()+Te*me)}):null};var H=F.range,V=y(function(me){me.setUTCSeconds(0,0)},function(me,ke){me.setTime(+me+6e4*ke)},function(me,ke){return(ke-me)/6e4},function(me){return me.getUTCMinutes()}),Q=V.range,K=y(function(me){me.setUTCMinutes(0,0,0)},function(me,ke){me.setTime(+me+36e5*ke)},function(me,ke){return(ke-me)/36e5},function(me){return me.getUTCHours()}),Z=K.range,$=y(function(me){me.setUTCHours(0,0,0,0)},function(me,ke){me.setUTCDate(me.getUTCDate()+ke)},function(me,ke){return(ke-me)/864e5},function(me){return me.getUTCDate()-1}),re=$.range;function R(me){return y(function(ke){ke.setUTCDate(ke.getUTCDate()-(ke.getUTCDay()+7-me)%7),ke.setUTCHours(0,0,0,0)},function(ke,Te){ke.setUTCDate(ke.getUTCDate()+7*Te)},function(ke,Te){return(Te-ke)/6048e5})}var N=R(0),U=R(1),te=R(2),j=R(3),Y=R(4),J=R(5),ee=R(6),ne=N.range,se=U.range,oe=te.range,he=j.range,le=Y.range,de=J.range,xe=ee.range,we=y(function(me){me.setUTCDate(1),me.setUTCHours(0,0,0,0)},function(me,ke){me.setUTCMonth(me.getUTCMonth()+ke)},function(me,ke){return ke.getUTCMonth()-me.getUTCMonth()+12*(ke.getUTCFullYear()-me.getUTCFullYear())},function(me){return me.getUTCMonth()}),be=we.range,Ae=y(function(me){me.setUTCMonth(0,1),me.setUTCHours(0,0,0,0)},function(me,ke){me.setUTCFullYear(me.getUTCFullYear()+ke)},function(me,ke){return ke.getUTCFullYear()-me.getUTCFullYear()},function(me){return me.getUTCFullYear()});Ae.every=function(me){return isFinite(me=Math.floor(me))&&me>0?y(function(ke){ke.setUTCFullYear(Math.floor(ke.getUTCFullYear()/me)*me),ke.setUTCMonth(0,1),ke.setUTCHours(0,0,0,0)},function(ke,Te){ke.setUTCFullYear(ke.getUTCFullYear()+Te*me)}):null};var fe=Ae.range;o.timeDay=l,o.timeDays=f,o.timeFriday=w,o.timeFridays=P,o.timeHour=s,o.timeHours=a,o.timeInterval=y,o.timeMillisecond=e,o.timeMilliseconds=r,o.timeMinute=n,o.timeMinutes=h,o.timeMonday=m,o.timeMondays=k,o.timeMonth=E,o.timeMonths=D,o.timeSaturday=_,o.timeSaturdays=S,o.timeSecond=t,o.timeSeconds=i,o.timeSunday=v,o.timeSundays=T,o.timeThursday=g,o.timeThursdays=I,o.timeTuesday=c,o.timeTuesdays=L,o.timeWednesday=b,o.timeWednesdays=M,o.timeWeek=v,o.timeWeeks=T,o.timeYear=F,o.timeYears=H,o.utcDay=$,o.utcDays=re,o.utcFriday=J,o.utcFridays=de,o.utcHour=K,o.utcHours=Z,o.utcMillisecond=e,o.utcMilliseconds=r,o.utcMinute=V,o.utcMinutes=Q,o.utcMonday=U,o.utcMondays=se,o.utcMonth=we,o.utcMonths=be,o.utcSaturday=ee,o.utcSaturdays=xe,o.utcSecond=t,o.utcSeconds=i,o.utcSunday=N,o.utcSundays=ne,o.utcThursday=Y,o.utcThursdays=le,o.utcTuesday=te,o.utcTuesdays=oe,o.utcWednesday=j,o.utcWednesdays=he,o.utcWeek=N,o.utcWeeks=ne,o.utcYear=Ae,o.utcYears=fe,Object.defineProperty(o,"__esModule",{value:!0})})},{}],122:[function(u,q,W){arguments[4][121][0].apply(W,arguments)},{dup:121}],123:[function(u,q,W){(function(o,p){p(typeof W=="object"&&q!==void 0?W:(o=o||self).d3=o.d3||{})})(this,function(o){var p,x,y=0,e=0,r=0,t=0,i=0,n=0,h=typeof performance=="object"&&performance.now?performance:Date,s=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(g){setTimeout(g,17)};function a(){return i||(s(l),i=h.now()+n)}function l(){i=0}function f(){this._call=this._time=this._next=null}function d(g,w,_){var T=new f;return T.restart(g,w,_),T}function v(){a(),++y;for(var g,w=p;w;)(g=i-w._time)>=0&&w._call.call(null,g),w=w._next;--y}function m(){i=(t=h.now())+n,y=e=0;try{v()}finally{y=0,function(){for(var g,w,_=p,T=1/0;_;)_._call?(T>_._time&&(T=_._time),g=_,_=_._next):(w=_._next,_._next=null,_=g?g._next=w:p=w);x=g,b(T)}(),i=0}}function c(){var g=h.now(),w=g-t;w>1e3&&(n-=w,t=g)}function b(g){y||(e&&(e=clearTimeout(e)),g-i>24?(g<1/0&&(e=setTimeout(m,g-h.now()-n)),r&&(r=clearInterval(r))):(r||(t=h.now(),r=setInterval(c,1e3)),y=1,s(m)))}f.prototype=d.prototype={constructor:f,restart:function(g,w,_){if(typeof g!="function")throw new TypeError("callback is not a function");_=(_==null?a():+_)+(w==null?0:+w),this._next||x===this||(x?x._next=this:p=this,x=this),this._call=g,this._time=_,b()},stop:function(){this._call&&(this._call=null,this._time=1/0,b())}},o.interval=function(g,w,_){var T=new f,k=w;return w==null?(T.restart(g,w,_),T):(w=+w,_=_==null?a():+_,T.restart(function L(M){M+=k,T.restart(L,k+=w,_),g(M)},w,_),T)},o.now=a,o.timeout=function(g,w,_){var T=new f;return w=w==null?0:+w,T.restart(function(k){T.stop(),g(k+w)},w,_),T},o.timer=d,o.timerFlush=v,Object.defineProperty(o,"__esModule",{value:!0})})},{}],124:[function(u,q,W){q.exports=function(){for(var o=0;o<arguments.length;o++)if(arguments[o]!==void 0)return arguments[o]}},{}],125:[function(u,q,W){q.exports=x;var o=(x.canvas=document.createElement("canvas")).getContext("2d"),p=y([32,126]);function x(e,r){Array.isArray(e)&&(e=e.join(", "));var t,i={},n=16,h=.05;r&&(r.length===2&&typeof r[0]=="number"?t=y(r):Array.isArray(r)?t=r:(r.o?t=y(r.o):r.pairs&&(t=r.pairs),r.fontSize&&(n=r.fontSize),r.threshold!=null&&(h=r.threshold))),t||(t=p),o.font=n+"px "+e;for(var s=0;s<t.length;s++){var a=t[s],l=o.measureText(a[0]).width+o.measureText(a[1]).width,f=o.measureText(a).width;if(Math.abs(l-f)>n*h){var d=(f-l)/n;i[a]=1e3*d}}return i}function y(e){for(var r=[],t=e[0];t<=e[1];t++)for(var i=String.fromCharCode(t),n=e[0];n<e[1];n++){var h=i+String.fromCharCode(n);r.push(h)}return r}x.createPairs=y,x.ascii=p},{}],126:[function(u,q,W){var o=u("abs-svg-path"),p=u("normalize-svg-path"),x={M:"moveTo",C:"bezierCurveTo"};q.exports=function(y,e){y.beginPath(),p(o(e)).forEach(function(r){var t=r[0],i=r.slice(1);y[x[t]].apply(y,i)}),y.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(u,q,W){q.exports=function(o){switch(o){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(u,q,W){q.exports=function(o,p){switch(p===void 0&&(p=0),typeof o){case"number":if(o>0)return function(x,y){var e,r;for(e=new Array(x),r=0;r<x;++r)e[r]=y;return e}(0|o,p);break;case"object":if(typeof o.length=="number")return function x(y,e,r){var t=0|y[r];if(t<=0)return[];var i,n=new Array(t);if(r===y.length-1)for(i=0;i<t;++i)n[i]=e;else for(i=0;i<t;++i)n[i]=x(y,e,r+1);return n}(o,p,0)}return[]}},{}],129:[function(u,q,W){function o(I,P,S){S=S||2;var E,D,F,H,V,Q,K,Z=P&&P.length,$=Z?P[0]*S:I.length,re=p(I,0,$,S,!0),R=[];if(!re||re.next===re.prev)return R;if(Z&&(re=function(U,te,j,Y){var J,ee,ne,se,oe,he=[];for(J=0,ee=te.length;J<ee;J++)ne=te[J]*Y,se=J<ee-1?te[J+1]*Y:U.length,(oe=p(U,ne,se,Y,!1))===oe.next&&(oe.steiner=!0),he.push(l(oe));for(he.sort(n),J=0;J<he.length;J++)h(he[J],j),j=x(j,j.next);return j}(I,P,re,S)),I.length>80*S){E=F=I[0],D=H=I[1];for(var N=S;N<$;N+=S)(V=I[N])<E&&(E=V),(Q=I[N+1])<D&&(D=Q),V>F&&(F=V),Q>H&&(H=Q);K=(K=Math.max(F-E,H-D))!==0?1/K:0}return y(re,R,S,E,D,K),R}function p(I,P,S,E,D){var F,H;if(D===M(I,P,S,E)>0)for(F=P;F<S;F+=E)H=T(F,I[F],I[F+1],H);else for(F=S-E;F>=P;F-=E)H=T(F,I[F],I[F+1],H);return H&&m(H,H.next)&&(k(H),H=H.next),H}function x(I,P){if(!I)return I;P||(P=I);var S,E=I;do if(S=!1,E.steiner||!m(E,E.next)&&v(E.prev,E,E.next)!==0)E=E.next;else{if(k(E),(E=P=E.prev)===E.next)break;S=!0}while(S||E!==P);return P}function y(I,P,S,E,D,F,H){if(I){!H&&F&&function(Z,$,re,R){var N=Z;do N.z===null&&(N.z=a(N.x,N.y,$,re,R)),N.prevZ=N.prev,N.nextZ=N.next,N=N.next;while(N!==Z);N.prevZ.nextZ=null,N.prevZ=null,function(U){var te,j,Y,J,ee,ne,se,oe,he=1;do{for(j=U,U=null,ee=null,ne=0;j;){for(ne++,Y=j,se=0,te=0;te<he&&(se++,Y=Y.nextZ);te++);for(oe=he;se>0||oe>0&&Y;)se!==0&&(oe===0||!Y||j.z<=Y.z)?(J=j,j=j.nextZ,se--):(J=Y,Y=Y.nextZ,oe--),ee?ee.nextZ=J:U=J,J.prevZ=ee,ee=J;j=Y}ee.nextZ=null,he*=2}while(ne>1)}(N)}(I,E,D,F);for(var V,Q,K=I;I.prev!==I.next;)if(V=I.prev,Q=I.next,F?r(I,E,D,F):e(I))P.push(V.i/S),P.push(I.i/S),P.push(Q.i/S),k(I),I=Q.next,K=Q.next;else if((I=Q)===K){H?H===1?y(I=t(x(I),P,S),P,S,E,D,F,2):H===2&&i(I,P,S,E,D,F):y(x(I),P,S,E,D,F,1);break}}}function e(I){var P=I.prev,S=I,E=I.next;if(v(P,S,E)>=0)return!1;for(var D=I.next.next;D!==I.prev;){if(f(P.x,P.y,S.x,S.y,E.x,E.y,D.x,D.y)&&v(D.prev,D,D.next)>=0)return!1;D=D.next}return!0}function r(I,P,S,E){var D=I.prev,F=I,H=I.next;if(v(D,F,H)>=0)return!1;for(var V=D.x<F.x?D.x<H.x?D.x:H.x:F.x<H.x?F.x:H.x,Q=D.y<F.y?D.y<H.y?D.y:H.y:F.y<H.y?F.y:H.y,K=D.x>F.x?D.x>H.x?D.x:H.x:F.x>H.x?F.x:H.x,Z=D.y>F.y?D.y>H.y?D.y:H.y:F.y>H.y?F.y:H.y,$=a(V,Q,P,S,E),re=a(K,Z,P,S,E),R=I.prevZ,N=I.nextZ;R&&R.z>=$&&N&&N.z<=re;){if(R!==I.prev&&R!==I.next&&f(D.x,D.y,F.x,F.y,H.x,H.y,R.x,R.y)&&v(R.prev,R,R.next)>=0||(R=R.prevZ,N!==I.prev&&N!==I.next&&f(D.x,D.y,F.x,F.y,H.x,H.y,N.x,N.y)&&v(N.prev,N,N.next)>=0))return!1;N=N.nextZ}for(;R&&R.z>=$;){if(R!==I.prev&&R!==I.next&&f(D.x,D.y,F.x,F.y,H.x,H.y,R.x,R.y)&&v(R.prev,R,R.next)>=0)return!1;R=R.prevZ}for(;N&&N.z<=re;){if(N!==I.prev&&N!==I.next&&f(D.x,D.y,F.x,F.y,H.x,H.y,N.x,N.y)&&v(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function t(I,P,S){var E=I;do{var D=E.prev,F=E.next.next;!m(D,F)&&c(D,E,E.next,F)&&w(D,F)&&w(F,D)&&(P.push(D.i/S),P.push(E.i/S),P.push(F.i/S),k(E),k(E.next),E=I=F),E=E.next}while(E!==I);return x(E)}function i(I,P,S,E,D,F){var H=I;do{for(var V=H.next.next;V!==H.prev;){if(H.i!==V.i&&d(H,V)){var Q=_(H,V);return H=x(H,H.next),Q=x(Q,Q.next),y(H,P,S,E,D,F),void y(Q,P,S,E,D,F)}V=V.next}H=H.next}while(H!==I)}function n(I,P){return I.x-P.x}function h(I,P){if(P=function(E,D){var F,H=D,V=E.x,Q=E.y,K=-1/0;do{if(Q<=H.y&&Q>=H.next.y&&H.next.y!==H.y){var Z=H.x+(Q-H.y)*(H.next.x-H.x)/(H.next.y-H.y);if(Z<=V&&Z>K){if(K=Z,Z===V){if(Q===H.y)return H;if(Q===H.next.y)return H.next}F=H.x<H.next.x?H:H.next}}H=H.next}while(H!==D);if(!F)return null;if(V===K)return F;var $,re=F,R=F.x,N=F.y,U=1/0;H=F;do V>=H.x&&H.x>=R&&V!==H.x&&f(Q<N?V:K,Q,R,N,Q<N?K:V,Q,H.x,H.y)&&($=Math.abs(Q-H.y)/(V-H.x),w(H,E)&&($<U||$===U&&(H.x>F.x||H.x===F.x&&s(F,H)))&&(F=H,U=$)),H=H.next;while(H!==re);return F}(I,P)){var S=_(P,I);x(P,P.next),x(S,S.next)}}function s(I,P){return v(I.prev,I,P.prev)<0&&v(P.next,I,I.next)<0}function a(I,P,S,E,D){return(I=1431655765&((I=858993459&((I=252645135&((I=16711935&((I=32767*(I-S)*D)|I<<8))|I<<4))|I<<2))|I<<1))|(P=1431655765&((P=858993459&((P=252645135&((P=16711935&((P=32767*(P-E)*D)|P<<8))|P<<4))|P<<2))|P<<1))<<1}function l(I){var P=I,S=I;do(P.x<S.x||P.x===S.x&&P.y<S.y)&&(S=P),P=P.next;while(P!==I);return S}function f(I,P,S,E,D,F,H,V){return(D-H)*(P-V)-(I-H)*(F-V)>=0&&(I-H)*(E-V)-(S-H)*(P-V)>=0&&(S-H)*(F-V)-(D-H)*(E-V)>=0}function d(I,P){return I.next.i!==P.i&&I.prev.i!==P.i&&!function(S,E){var D=S;do{if(D.i!==S.i&&D.next.i!==S.i&&D.i!==E.i&&D.next.i!==E.i&&c(D,D.next,S,E))return!0;D=D.next}while(D!==S);return!1}(I,P)&&(w(I,P)&&w(P,I)&&function(S,E){var D=S,F=!1,H=(S.x+E.x)/2,V=(S.y+E.y)/2;do D.y>V!=D.next.y>V&&D.next.y!==D.y&&H<(D.next.x-D.x)*(V-D.y)/(D.next.y-D.y)+D.x&&(F=!F),D=D.next;while(D!==S);return F}(I,P)&&(v(I.prev,I,P.prev)||v(I,P.prev,P))||m(I,P)&&v(I.prev,I,I.next)>0&&v(P.prev,P,P.next)>0)}function v(I,P,S){return(P.y-I.y)*(S.x-P.x)-(P.x-I.x)*(S.y-P.y)}function m(I,P){return I.x===P.x&&I.y===P.y}function c(I,P,S,E){var D=g(v(I,P,S)),F=g(v(I,P,E)),H=g(v(S,E,I)),V=g(v(S,E,P));return D!==F&&H!==V||!(D!==0||!b(I,S,P))||!(F!==0||!b(I,E,P))||!(H!==0||!b(S,I,E))||!(V!==0||!b(S,P,E))}function b(I,P,S){return P.x<=Math.max(I.x,S.x)&&P.x>=Math.min(I.x,S.x)&&P.y<=Math.max(I.y,S.y)&&P.y>=Math.min(I.y,S.y)}function g(I){return I>0?1:I<0?-1:0}function w(I,P){return v(I.prev,I,I.next)<0?v(I,P,I.next)>=0&&v(I,I.prev,P)>=0:v(I,P,I.prev)<0||v(I,I.next,P)<0}function _(I,P){var S=new L(I.i,I.x,I.y),E=new L(P.i,P.x,P.y),D=I.next,F=P.prev;return I.next=P,P.prev=I,S.next=D,D.prev=S,E.next=S,S.prev=E,F.next=E,E.prev=F,E}function T(I,P,S,E){var D=new L(I,P,S);return E?(D.next=E.next,D.prev=E,E.next.prev=D,E.next=D):(D.prev=D,D.next=D),D}function k(I){I.next.prev=I.prev,I.prev.next=I.next,I.prevZ&&(I.prevZ.nextZ=I.nextZ),I.nextZ&&(I.nextZ.prevZ=I.prevZ)}function L(I,P,S){this.i=I,this.x=P,this.y=S,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function M(I,P,S,E){for(var D=0,F=P,H=S-E;F<S;F+=E)D+=(I[H]-I[F])*(I[F+1]+I[H+1]),H=F;return D}q.exports=o,q.exports.default=o,o.deviation=function(I,P,S,E){var D=P&&P.length,F=D?P[0]*S:I.length,H=Math.abs(M(I,0,F,S));if(D)for(var V=0,Q=P.length;V<Q;V++){var K=P[V]*S,Z=V<Q-1?P[V+1]*S:I.length;H-=Math.abs(M(I,K,Z,S))}var $=0;for(V=0;V<E.length;V+=3){var re=E[V]*S,R=E[V+1]*S,N=E[V+2]*S;$+=Math.abs((I[re]-I[N])*(I[R+1]-I[re+1])-(I[re]-I[R])*(I[N+1]-I[re+1]))}return H===0&&$===0?0:Math.abs(($-H)/H)},o.flatten=function(I){for(var P=I[0][0].length,S={vertices:[],holes:[],dimensions:P},E=0,D=0;D<I.length;D++){for(var F=0;F<I[D].length;F++)for(var H=0;H<P;H++)S.vertices.push(I[D][F][H]);D>0&&(E+=I[D-1].length,S.holes.push(E))}return S}},{}],130:[function(u,q,W){var o=u("strongly-connected-components");q.exports=function(p,x){var y,e=[],r=[],t=[],i={},n=[];function h(c){var b,g,w=!1;for(r.push(c),t[c]=!0,b=0;b<n[c].length;b++)(g=n[c][b])===y?(s(y,r),w=!0):t[g]||(w=h(g));if(w)(function T(k){t[k]=!1,i.hasOwnProperty(k)&&Object.keys(i[k]).forEach(function(L){delete i[k][L],t[L]&&T(L)})})(c);else for(b=0;b<n[c].length;b++){g=n[c][b];var _=i[g];_||(_={},i[g]=_),_[g]=!0}return r.pop(),w}function s(c,b){var g=[].concat(b).concat(c);x?x(h):e.push(g)}function a(c){(function(L){for(var M=0;M<p.length;M++)M<L&&(p[M]=[]),p[M]=p[M].filter(function(I){return I>=L})})(c);for(var b,g=o(p).components.filter(function(L){return L.length>1}),w=1/0,_=0;_<g.length;_++)for(var T=0;T<g[_].length;T++)g[_][T]<w&&(w=g[_][T],b=_);var k=g[b];return!!k&&{leastVertex:w,adjList:p.map(function(L,M){return k.indexOf(M)===-1?[]:L.filter(function(I){return k.indexOf(I)!==-1})})}}y=0;for(var l=p.length;y<l;){var f=a(y);if(y=f.leastVertex,n=f.adjList){for(var d=0;d<n.length;d++)for(var v=0;v<n[d].length;v++){var m=n[d][v];t[+m]=!1,i[m]={}}h(y),y+=1}else y=l}return x?void 0:e}},{"strongly-connected-components":306}],131:[function(u,q,W){var o=u("../../object/valid-value");q.exports=function(){return o(this).length=0,this}},{"../../object/valid-value":162}],132:[function(u,q,W){q.exports=u("./is-implemented")()?Array.from:u("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(u,q,W){q.exports=function(){var o,p,x=Array.from;return typeof x=="function"&&(p=x(o=["raz","dwa"]),Boolean(p&&p!==o&&p[1]==="dwa"))}},{}],134:[function(u,q,W){var o=u("es6-symbol").iterator,p=u("../../function/is-arguments"),x=u("../../function/is-function"),y=u("../../number/to-pos-integer"),e=u("../../object/valid-callable"),r=u("../../object/valid-value"),t=u("../../object/is-value"),i=u("../../string/is-string"),n=Array.isArray,h=Function.prototype.call,s={configurable:!0,enumerable:!0,writable:!0,value:null},a=Object.defineProperty;q.exports=function(l){var f,d,v,m,c,b,g,w,_,T,k=arguments[1],L=arguments[2];if(l=Object(r(l)),t(k)&&e(k),this&&this!==Array&&x(this))f=this;else{if(!k){if(p(l))return(c=l.length)!==1?Array.apply(null,l):((m=new Array(1))[0]=l[0],m);if(n(l)){for(m=new Array(c=l.length),d=0;d<c;++d)m[d]=l[d];return m}}m=[]}if(!n(l)){if((_=l[o])!==void 0){for(g=e(_).call(l),f&&(m=new f),w=g.next(),d=0;!w.done;)T=k?h.call(k,L,w.value,d):w.value,f?(s.value=T,a(m,d,s)):m[d]=T,w=g.next(),++d;c=d}else if(i(l)){for(c=l.length,f&&(m=new f),d=0,v=0;d<c;++d)T=l[d],d+1<c&&(b=T.charCodeAt(0))>=55296&&b<=56319&&(T+=l[++d]),T=k?h.call(k,L,T,v):T,f?(s.value=T,a(m,v,s)):m[v]=T,++v;c=v}}if(c===void 0)for(c=y(l.length),f&&(m=new f(c)),d=0;d<c;++d)T=k?h.call(k,L,l[d],d):l[d],f?(s.value=T,a(m,d,s)):m[d]=T;return f&&(s.value=null,m.length=c),m}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(u,q,W){var o=Object.prototype.toString,p=o.call(function(){return arguments}());q.exports=function(x){return o.call(x)===p}},{}],136:[function(u,q,W){var o=Object.prototype.toString,p=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);q.exports=function(x){return typeof x=="function"&&p(o.call(x))}},{}],137:[function(u,q,W){q.exports=function(){}},{}],138:[function(u,q,W){q.exports=u("./is-implemented")()?Math.sign:u("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(u,q,W){q.exports=function(){var o=Math.sign;return typeof o=="function"&&o(10)===1&&o(-20)===-1}},{}],140:[function(u,q,W){q.exports=function(o){return o=Number(o),isNaN(o)||o===0?o:o>0?1:-1}},{}],141:[function(u,q,W){var o=u("../math/sign"),p=Math.abs,x=Math.floor;q.exports=function(y){return isNaN(y)?0:(y=Number(y))!==0&&isFinite(y)?o(y)*x(p(y)):y}},{"../math/sign":138}],142:[function(u,q,W){var o=u("./to-integer"),p=Math.max;q.exports=function(x){return p(0,o(x))}},{"./to-integer":141}],143:[function(u,q,W){var o=u("./valid-callable"),p=u("./valid-value"),x=Function.prototype.bind,y=Function.prototype.call,e=Object.keys,r=Object.prototype.propertyIsEnumerable;q.exports=function(t,i){return function(n,h){var s,a=arguments[2],l=arguments[3];return n=Object(p(n)),o(h),s=e(n),l&&s.sort(typeof l=="function"?x.call(l,n):void 0),typeof t!="function"&&(t=s[t]),y.call(t,s,function(f,d){return r.call(n,f)?y.call(h,a,n[f],f,n,d):i})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(u,q,W){q.exports=u("./is-implemented")()?Object.assign:u("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(u,q,W){q.exports=function(){var o,p=Object.assign;return typeof p=="function"&&(p(o={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),o.foo+o.bar+o.trzy==="razdwatrzy")}},{}],146:[function(u,q,W){var o=u("../keys"),p=u("../valid-value"),x=Math.max;q.exports=function(y,e){var r,t,i,n=x(arguments.length,2);for(y=Object(p(y)),i=function(h){try{y[h]=e[h]}catch(s){r||(r=s)}},t=1;t<n;++t)o(e=arguments[t]).forEach(i);if(r!==void 0)throw r;return y}},{"../keys":152,"../valid-value":162}],147:[function(u,q,W){var o=u("../array/from"),p=u("./assign"),x=u("./valid-value");q.exports=function(y){var e=Object(x(y)),r=arguments[1],t=Object(arguments[2]);if(e!==y&&!r)return e;var i={};return r?o(r,function(n){(t.ensure||n in y)&&(i[n]=y[n])}):p(i,y),i}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(u,q,W){var o,p,x,y,e=Object.create;u("./set-prototype-of/is-implemented")()||(o=u("./set-prototype-of/shim")),q.exports=o?o.level!==1?e:(p={},x={},y={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(r){x[r]=r!=="__proto__"?y:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(p,x),Object.defineProperty(o,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:p}),function(r,t){return e(r===null?p:r,t)}):e},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(u,q,W){q.exports=u("./_iterate")("forEach")},{"./_iterate":143}],150:[function(u,q,W){var o=u("./is-value"),p={function:!0,object:!0};q.exports=function(x){return o(x)&&p[typeof x]||!1}},{"./is-value":151}],151:[function(u,q,W){var o=u("../function/noop")();q.exports=function(p){return p!==o&&p!==null}},{"../function/noop":137}],152:[function(u,q,W){q.exports=u("./is-implemented")()?Object.keys:u("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(u,q,W){q.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],154:[function(u,q,W){var o=u("../is-value"),p=Object.keys;q.exports=function(x){return p(o(x)?Object(x):x)}},{"../is-value":151}],155:[function(u,q,W){var o=u("./valid-callable"),p=u("./for-each"),x=Function.prototype.call;q.exports=function(y,e){var r={},t=arguments[2];return o(e),p(y,function(i,n,h,s){r[n]=x.call(e,t,i,n,h,s)}),r}},{"./for-each":149,"./valid-callable":160}],156:[function(u,q,W){var o=u("./is-value"),p=Array.prototype.forEach,x=Object.create,y=function(e,r){var t;for(t in e)r[t]=e[t]};q.exports=function(e){var r=x(null);return p.call(arguments,function(t){o(t)&&y(Object(t),r)}),r}},{"./is-value":151}],157:[function(u,q,W){q.exports=u("./is-implemented")()?Object.setPrototypeOf:u("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(u,q,W){var o=Object.create,p=Object.getPrototypeOf,x={};q.exports=function(){var y=Object.setPrototypeOf,e=arguments[0]||o;return typeof y=="function"&&p(y(e(null),x))===x}},{}],159:[function(u,q,W){var o,p=u("../is-object"),x=u("../valid-value"),y=Object.prototype.isPrototypeOf,e=Object.defineProperty,r={configurable:!0,enumerable:!1,writable:!0,value:void 0};o=function(t,i){if(x(t),i===null||p(i))return t;throw new TypeError("Prototype must be null or an object")},q.exports=function(t){var i,n;return t?(t.level===2?t.set?(n=t.set,i=function(h,s){return n.call(o(h,s),s),h}):i=function(h,s){return o(h,s).__proto__=s,h}:i=function h(s,a){var l;return o(s,a),(l=y.call(h.nullPolyfill,s))&&delete h.nullPolyfill.__proto__,a===null&&(a=h.nullPolyfill),s.__proto__=a,l&&e(h.nullPolyfill,"__proto__",r),s},Object.defineProperty(i,"level",{configurable:!1,enumerable:!1,writable:!1,value:t.level})):null}(function(){var t,i=Object.create(null),n={},h=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(h){try{(t=h.set).call(i,n)}catch{}if(Object.getPrototypeOf(i)===n)return{set:t,level:2}}return i.__proto__=n,Object.getPrototypeOf(i)===n?{level:2}:((i={}).__proto__=n,Object.getPrototypeOf(i)===n&&{level:1})}()),u("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(u,q,W){q.exports=function(o){if(typeof o!="function")throw new TypeError(o+" is not a function");return o}},{}],161:[function(u,q,W){var o=u("./is-object");q.exports=function(p){if(!o(p))throw new TypeError(p+" is not an Object");return p}},{"./is-object":150}],162:[function(u,q,W){var o=u("./is-value");q.exports=function(p){if(!o(p))throw new TypeError("Cannot use null or undefined");return p}},{"./is-value":151}],163:[function(u,q,W){q.exports=u("./is-implemented")()?String.prototype.contains:u("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(u,q,W){var o="razdwatrzy";q.exports=function(){return typeof o.contains=="function"&&o.contains("dwa")===!0&&o.contains("foo")===!1}},{}],165:[function(u,q,W){var o=String.prototype.indexOf;q.exports=function(p){return o.call(this,p,arguments[1])>-1}},{}],166:[function(u,q,W){var o=Object.prototype.toString,p=o.call("");q.exports=function(x){return typeof x=="string"||x&&typeof x=="object"&&(x instanceof String||o.call(x)===p)||!1}},{}],167:[function(u,q,W){var o=Object.create(null),p=Math.random;q.exports=function(){var x;do x=p().toString(36).slice(2);while(o[x]);return x}},{}],168:[function(u,q,W){var o,p=u("es5-ext/object/set-prototype-of"),x=u("es5-ext/string/#/contains"),y=u("d"),e=u("es6-symbol"),r=u("./"),t=Object.defineProperty;o=q.exports=function(i,n){if(!(this instanceof o))throw new TypeError("Constructor requires 'new'");r.call(this,i),n=n?x.call(n,"key+value")?"key+value":x.call(n,"key")?"key":"value":"value",t(this,"__kind__",y("",n))},p&&p(o,r),delete o.prototype.constructor,o.prototype=Object.create(r.prototype,{_resolve:y(function(i){return this.__kind__==="value"?this.__list__[i]:this.__kind__==="key+value"?[i,this.__list__[i]]:i})}),t(o.prototype,e.toStringTag,y("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(u,q,W){var o=u("es5-ext/function/is-arguments"),p=u("es5-ext/object/valid-callable"),x=u("es5-ext/string/is-string"),y=u("./get"),e=Array.isArray,r=Function.prototype.call,t=Array.prototype.some;q.exports=function(i,n){var h,s,a,l,f,d,v,m,c=arguments[2];if(e(i)||o(i)?h="array":x(i)?h="string":i=y(i),p(n),a=function(){l=!0},h!=="array")if(h!=="string")for(s=i.next();!s.done;){if(r.call(n,c,s.value,a),l)return;s=i.next()}else for(d=i.length,f=0;f<d&&(v=i[f],f+1<d&&(m=v.charCodeAt(0))>=55296&&m<=56319&&(v+=i[++f]),r.call(n,c,v,a),!l);++f);else t.call(i,function(b){return r.call(n,c,b,a),l})}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(u,q,W){var o=u("es5-ext/function/is-arguments"),p=u("es5-ext/string/is-string"),x=u("./array"),y=u("./string"),e=u("./valid-iterable"),r=u("es6-symbol").iterator;q.exports=function(t){return typeof e(t)[r]=="function"?t[r]():o(t)?new x(t):p(t)?new y(t):new x(t)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(u,q,W){var o,p=u("es5-ext/array/#/clear"),x=u("es5-ext/object/assign"),y=u("es5-ext/object/valid-callable"),e=u("es5-ext/object/valid-value"),r=u("d"),t=u("d/auto-bind"),i=u("es6-symbol"),n=Object.defineProperty,h=Object.defineProperties;q.exports=o=function(s,a){if(!(this instanceof o))throw new TypeError("Constructor requires 'new'");h(this,{__list__:r("w",e(s)),__context__:r("w",a),__nextIndex__:r("w",0)}),a&&(y(a.on),a.on("_add",this._onAdd),a.on("_delete",this._onDelete),a.on("_clear",this._onClear))},delete o.prototype.constructor,h(o.prototype,x({_next:r(function(){var s;if(this.__list__)return this.__redo__&&(s=this.__redo__.shift())!==void 0?s:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:r(function(){return this._createResult(this._next())}),_createResult:r(function(s){return s===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(s)}}),_resolve:r(function(s){return this.__list__[s]}),_unBind:r(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:r(function(){return"[object "+(this[i.toStringTag]||"Object")+"]"})},t({_onAdd:r(function(s){s>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(a,l){a>=s&&(this.__redo__[l]=++a)},this),this.__redo__.push(s)):n(this,"__redo__",r("c",[s])))}),_onDelete:r(function(s){var a;s>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&((a=this.__redo__.indexOf(s))!==-1&&this.__redo__.splice(a,1),this.__redo__.forEach(function(l,f){l>s&&(this.__redo__[f]=--l)},this)))}),_onClear:r(function(){this.__redo__&&p.call(this.__redo__),this.__nextIndex__=0})}))),n(o.prototype,i.iterator,r(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(u,q,W){var o=u("es5-ext/function/is-arguments"),p=u("es5-ext/object/is-value"),x=u("es5-ext/string/is-string"),y=u("es6-symbol").iterator,e=Array.isArray;q.exports=function(r){return!!p(r)&&(!!e(r)||!!x(r)||!!o(r)||typeof r[y]=="function")}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(u,q,W){var o,p=u("es5-ext/object/set-prototype-of"),x=u("d"),y=u("es6-symbol"),e=u("./"),r=Object.defineProperty;o=q.exports=function(t){if(!(this instanceof o))throw new TypeError("Constructor requires 'new'");t=String(t),e.call(this,t),r(this,"__length__",x("",t.length))},p&&p(o,e),delete o.prototype.constructor,o.prototype=Object.create(e.prototype,{_next:x(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:x(function(t){var i,n=this.__list__[t];return this.__nextIndex__===this.__length__?n:(i=n.charCodeAt(0))>=55296&&i<=56319?n+this.__list__[this.__nextIndex__++]:n})}),r(o.prototype,y.toStringTag,x("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(u,q,W){var o=u("./is-iterable");q.exports=function(p){if(!o(p))throw new TypeError(p+" is not iterable");return p}},{"./is-iterable":172}],175:[function(u,q,W){q.exports=u("./is-implemented")()?u("ext/global-this").Symbol:u("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(u,q,W){var o=u("ext/global-this"),p={object:!0,symbol:!0};q.exports=function(){var x,y=o.Symbol;if(typeof y!="function")return!1;x=y("test symbol");try{String(x)}catch{return!1}return!!p[typeof y.iterator]&&!!p[typeof y.toPrimitive]&&!!p[typeof y.toStringTag]}},{"ext/global-this":188}],177:[function(u,q,W){q.exports=function(o){return!!o&&(typeof o=="symbol"||!!o.constructor&&o.constructor.name==="Symbol"&&o[o.constructor.toStringTag]==="Symbol")}},{}],178:[function(u,q,W){var o=u("d"),p=Object.create,x=Object.defineProperty,y=Object.prototype,e=p(null);q.exports=function(r){for(var t,i,n=0;e[r+(n||"")];)++n;return e[r+=n||""]=!0,x(y,t="@@"+r,o.gs(null,function(h){i||(i=!0,x(this,t,o(h)),i=!1)})),t}},{d:106}],179:[function(u,q,W){var o=u("d"),p=u("ext/global-this").Symbol;q.exports=function(x){return Object.defineProperties(x,{hasInstance:o("",p&&p.hasInstance||x("hasInstance")),isConcatSpreadable:o("",p&&p.isConcatSpreadable||x("isConcatSpreadable")),iterator:o("",p&&p.iterator||x("iterator")),match:o("",p&&p.match||x("match")),replace:o("",p&&p.replace||x("replace")),search:o("",p&&p.search||x("search")),species:o("",p&&p.species||x("species")),split:o("",p&&p.split||x("split")),toPrimitive:o("",p&&p.toPrimitive||x("toPrimitive")),toStringTag:o("",p&&p.toStringTag||x("toStringTag")),unscopables:o("",p&&p.unscopables||x("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(u,q,W){var o=u("d"),p=u("../../../validate-symbol"),x=Object.create(null);q.exports=function(y){return Object.defineProperties(y,{for:o(function(e){return x[e]?x[e]:x[e]=y(String(e))}),keyFor:o(function(e){var r;for(r in p(e),x)if(x[r]===e)return r})})}},{"../../../validate-symbol":182,d:106}],181:[function(u,q,W){var o,p,x,y=u("d"),e=u("./validate-symbol"),r=u("ext/global-this").Symbol,t=u("./lib/private/generate-name"),i=u("./lib/private/setup/standard-symbols"),n=u("./lib/private/setup/symbol-registry"),h=Object.create,s=Object.defineProperties,a=Object.defineProperty;if(typeof r=="function")try{String(r()),x=!0}catch{}else r=null;p=function(l){if(this instanceof p)throw new TypeError("Symbol is not a constructor");return o(l)},q.exports=o=function l(f){var d;if(this instanceof l)throw new TypeError("Symbol is not a constructor");return x?r(f):(d=h(p.prototype),f=f===void 0?"":String(f),s(d,{__description__:y("",f),__name__:y("",t(f))}))},i(o),n(o),s(p.prototype,{constructor:y(o),toString:y("",function(){return this.__name__})}),s(o.prototype,{toString:y(function(){return"Symbol ("+e(this).__description__+")"}),valueOf:y(function(){return e(this)})}),a(o.prototype,o.toPrimitive,y("",function(){var l=e(this);return typeof l=="symbol"?l:l.toString()})),a(o.prototype,o.toStringTag,y("c","Symbol")),a(p.prototype,o.toStringTag,y("c",o.prototype[o.toStringTag])),a(p.prototype,o.toPrimitive,y("c",o.prototype[o.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(u,q,W){var o=u("./is-symbol");q.exports=function(p){if(!o(p))throw new TypeError(p+" is not a symbol");return p}},{"./is-symbol":177}],183:[function(u,q,W){q.exports=u("./is-implemented")()?WeakMap:u("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(u,q,W){q.exports=function(){var o,p;if(typeof WeakMap!="function")return!1;try{o=new WeakMap([[p={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return String(o)==="[object WeakMap]"&&typeof o.set=="function"&&o.set({},1)===o&&typeof o.delete=="function"&&typeof o.has=="function"&&o.get(p)==="one"}},{}],185:[function(u,q,W){q.exports=typeof WeakMap=="function"&&Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"},{}],186:[function(u,q,W){var o,p=u("es5-ext/object/is-value"),x=u("es5-ext/object/set-prototype-of"),y=u("es5-ext/object/valid-object"),e=u("es5-ext/object/valid-value"),r=u("es5-ext/string/random-uniq"),t=u("d"),i=u("es6-iterator/get"),n=u("es6-iterator/for-of"),h=u("es6-symbol").toStringTag,s=u("./is-native-implemented"),a=Array.isArray,l=Object.defineProperty,f=Object.prototype.hasOwnProperty,d=Object.getPrototypeOf;q.exports=o=function(){var v,m=arguments[0];if(!(this instanceof o))throw new TypeError("Constructor requires 'new'");return v=s&&x&&WeakMap!==o?x(new WeakMap,d(this)):this,p(m)&&(a(m)||(m=i(m))),l(v,"__weakMapData__",t("c","$weakMap$"+r())),m&&n(m,function(c){e(c),v.set(c[0],c[1])}),v},s&&(x&&x(o,WeakMap),o.prototype=Object.create(WeakMap.prototype,{constructor:t(o)})),Object.defineProperties(o.prototype,{delete:t(function(v){return!!f.call(y(v),this.__weakMapData__)&&(delete v[this.__weakMapData__],!0)}),get:t(function(v){if(f.call(y(v),this.__weakMapData__))return v[this.__weakMapData__]}),has:t(function(v){return f.call(y(v),this.__weakMapData__)}),set:t(function(v,m){return l(y(v),this.__weakMapData__,t("c",m)),this}),toString:t(function(){return"[object WeakMap]"})}),l(o.prototype,h,t("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(u,q,W){var o=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};q.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return o()}try{return __global__||o()}finally{delete Object.prototype.__global__}}()},{}],188:[function(u,q,W){q.exports=u("./is-implemented")()?globalThis:u("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(u,q,W){q.exports=function(){return typeof globalThis=="object"&&!!globalThis&&globalThis.Array===Array}},{}],190:[function(u,q,W){var o=u("is-string-blank");q.exports=function(p){var x=typeof p;if(x==="string"){var y=p;if((p=+p)==0&&o(y))return!1}else if(x!=="number")return!1;return p-p<1}},{"is-string-blank":237}],191:[function(u,q,W){var o=u("dtype");q.exports=function(p,x,y){if(!p)throw new TypeError("must specify data as first parameter");if(y=0|+(y||0),Array.isArray(p)&&p[0]&&typeof p[0][0]=="number"){var e,r,t,i,n=p[0].length,h=p.length*n;x&&typeof x!="string"||(x=new(o(x||"float32"))(h+y));var s=x.length-y;if(h!==s)throw new Error("source length "+h+" ("+n+"x"+p.length+") does not match destination length "+s);for(e=0,t=y;e<p.length;e++)for(r=0;r<n;r++)x[t++]=p[e][r]===null?NaN:p[e][r]}else if(x&&typeof x!="string")x.set(p,y);else{var a=o(x||"float32");if(Array.isArray(p)||x==="array")for(x=new a(p.length+y),e=0,t=y,i=x.length;t<i;t++,e++)x[t]=p[e]===null?NaN:p[e];else y===0?x=new a(p):(x=new a(p.length+y)).set(p,y)}return x}},{dtype:127}],192:[function(u,q,W){var o=u("css-font/stringify"),p=[32,126];q.exports=function(x){var y=(x=x||{}).shape?x.shape:x.canvas?[x.canvas.width,x.canvas.height]:[512,512],e=x.canvas||document.createElement("canvas"),r=x.font,t=typeof x.step=="number"?[x.step,x.step]:x.step||[32,32],i=x.chars||p;if(r&&typeof r!="string"&&(r=o(r)),Array.isArray(i)){if(i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number"){for(var n=[],h=i[0],s=0;h<=i[1];h++)n[s++]=String.fromCharCode(h);i=n}}else i=String(i).split("");y=y.slice(),e.width=y[0],e.height=y[1];var a=e.getContext("2d");a.fillStyle="#000",a.fillRect(0,0,e.width,e.height),a.font=r,a.textAlign="center",a.textBaseline="middle",a.fillStyle="#fff";var l=t[0]/2,f=t[1]/2;for(h=0;h<i.length;h++)a.fillText(i[h],l,f),(l+=t[0])>y[0]-t[0]/2&&(l=t[0]/2,f+=t[1]);return e}},{"css-font/stringify":102}],193:[function(u,q,W){function o(e,r){r||(r={}),(typeof e=="string"||Array.isArray(e))&&(r.family=e);var t=Array.isArray(r.family)?r.family.join(", "):r.family;if(!t)throw Error("`family` must be defined");var i=r.size||r.fontSize||r.em||48,n=r.weight||r.fontWeight||"",h=(e=[r.style||r.fontStyle||"",n,i].join(" ")+"px "+t,r.origin||"top");if(o.cache[t]&&i<=o.cache[t].em)return p(o.cache[t],h);var s=r.canvas||o.canvas,a=s.getContext("2d"),l={upper:r.upper!==void 0?r.upper:"H",lower:r.lower!==void 0?r.lower:"x",descent:r.descent!==void 0?r.descent:"p",ascent:r.ascent!==void 0?r.ascent:"h",tittle:r.tittle!==void 0?r.tittle:"i",overshoot:r.overshoot!==void 0?r.overshoot:"O"},f=Math.ceil(1.5*i);s.height=f,s.width=.5*f,a.font=e;var d={top:0};a.clearRect(0,0,f,f),a.textBaseline="top",a.fillStyle="black",a.fillText("H",0,0);var v=x(a.getImageData(0,0,f,f));a.clearRect(0,0,f,f),a.textBaseline="bottom",a.fillText("H",0,f);var m=x(a.getImageData(0,0,f,f));d.lineHeight=d.bottom=f-m+v,a.clearRect(0,0,f,f),a.textBaseline="alphabetic",a.fillText("H",0,f);var c=f-x(a.getImageData(0,0,f,f))-1+v;d.baseline=d.alphabetic=c,a.clearRect(0,0,f,f),a.textBaseline="middle",a.fillText("H",0,.5*f);var b=x(a.getImageData(0,0,f,f));d.median=d.middle=f-b-1+v-.5*f,a.clearRect(0,0,f,f),a.textBaseline="hanging",a.fillText("H",0,.5*f);var g=x(a.getImageData(0,0,f,f));d.hanging=f-g-1+v-.5*f,a.clearRect(0,0,f,f),a.textBaseline="ideographic",a.fillText("H",0,f);var w=x(a.getImageData(0,0,f,f));if(d.ideographic=f-w-1+v,l.upper&&(a.clearRect(0,0,f,f),a.textBaseline="top",a.fillText(l.upper,0,0),d.upper=x(a.getImageData(0,0,f,f)),d.capHeight=d.baseline-d.upper),l.lower&&(a.clearRect(0,0,f,f),a.textBaseline="top",a.fillText(l.lower,0,0),d.lower=x(a.getImageData(0,0,f,f)),d.xHeight=d.baseline-d.lower),l.tittle&&(a.clearRect(0,0,f,f),a.textBaseline="top",a.fillText(l.tittle,0,0),d.tittle=x(a.getImageData(0,0,f,f))),l.ascent&&(a.clearRect(0,0,f,f),a.textBaseline="top",a.fillText(l.ascent,0,0),d.ascent=x(a.getImageData(0,0,f,f))),l.descent&&(a.clearRect(0,0,f,f),a.textBaseline="top",a.fillText(l.descent,0,0),d.descent=y(a.getImageData(0,0,f,f))),l.overshoot){a.clearRect(0,0,f,f),a.textBaseline="top",a.fillText(l.overshoot,0,0);var _=y(a.getImageData(0,0,f,f));d.overshoot=_-c}for(var T in d)d[T]/=i;return d.em=i,o.cache[t]=d,p(d,h)}function p(e,r){var t={};for(var i in typeof r=="string"&&(r=e[r]),e)i!=="em"&&(t[i]=e[i]-r);return t}function x(e){for(var r=e.height,t=e.data,i=3;i<t.length;i+=4)if(t[i]!==0)return Math.floor(.25*(i-3)/r)}function y(e){for(var r=e.height,t=e.data,i=t.length-1;i>0;i-=4)if(t[i]!==0)return Math.floor(.25*(i-3)/r)}q.exports=o,o.canvas=document.createElement("canvas"),o.cache={}},{}],194:[function(u,q,W){q.exports=function(o,p){if(typeof o!="string")throw new TypeError("must specify type string");if(p=p||{},typeof document=="undefined"&&!p.canvas)return null;var x=p.canvas||document.createElement("canvas");typeof p.width=="number"&&(x.width=p.width),typeof p.height=="number"&&(x.height=p.height);var y,e=p;try{var r=[o];o.indexOf("webgl")===0&&r.push("experimental-"+o);for(var t=0;t<r.length;t++)if(y=x.getContext(r[t],e))return y}catch{y=null}return y||null}},{}],195:[function(u,q,W){q.exports=function(o,p){var x=p[0],y=p[1],e=p[2],r=p[3],t=p[4],i=p[5],n=p[6],h=p[7],s=p[8],a=p[9],l=p[10],f=p[11],d=p[12],v=p[13],m=p[14],c=p[15];return o[0]=i*(l*c-f*m)-a*(n*c-h*m)+v*(n*f-h*l),o[1]=-(y*(l*c-f*m)-a*(e*c-r*m)+v*(e*f-r*l)),o[2]=y*(n*c-h*m)-i*(e*c-r*m)+v*(e*h-r*n),o[3]=-(y*(n*f-h*l)-i*(e*f-r*l)+a*(e*h-r*n)),o[4]=-(t*(l*c-f*m)-s*(n*c-h*m)+d*(n*f-h*l)),o[5]=x*(l*c-f*m)-s*(e*c-r*m)+d*(e*f-r*l),o[6]=-(x*(n*c-h*m)-t*(e*c-r*m)+d*(e*h-r*n)),o[7]=x*(n*f-h*l)-t*(e*f-r*l)+s*(e*h-r*n),o[8]=t*(a*c-f*v)-s*(i*c-h*v)+d*(i*f-h*a),o[9]=-(x*(a*c-f*v)-s*(y*c-r*v)+d*(y*f-r*a)),o[10]=x*(i*c-h*v)-t*(y*c-r*v)+d*(y*h-r*i),o[11]=-(x*(i*f-h*a)-t*(y*f-r*a)+s*(y*h-r*i)),o[12]=-(t*(a*m-l*v)-s*(i*m-n*v)+d*(i*l-n*a)),o[13]=x*(a*m-l*v)-s*(y*m-e*v)+d*(y*l-e*a),o[14]=-(x*(i*m-n*v)-t*(y*m-e*v)+d*(y*n-e*i)),o[15]=x*(i*l-n*a)-t*(y*l-e*a)+s*(y*n-e*i),o}},{}],196:[function(u,q,W){q.exports=function(o){var p=new Float32Array(16);return p[0]=o[0],p[1]=o[1],p[2]=o[2],p[3]=o[3],p[4]=o[4],p[5]=o[5],p[6]=o[6],p[7]=o[7],p[8]=o[8],p[9]=o[9],p[10]=o[10],p[11]=o[11],p[12]=o[12],p[13]=o[13],p[14]=o[14],p[15]=o[15],p}},{}],197:[function(u,q,W){q.exports=function(o,p){return o[0]=p[0],o[1]=p[1],o[2]=p[2],o[3]=p[3],o[4]=p[4],o[5]=p[5],o[6]=p[6],o[7]=p[7],o[8]=p[8],o[9]=p[9],o[10]=p[10],o[11]=p[11],o[12]=p[12],o[13]=p[13],o[14]=p[14],o[15]=p[15],o}},{}],198:[function(u,q,W){q.exports=function(){var o=new Float32Array(16);return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],199:[function(u,q,W){q.exports=function(o){var p=o[0],x=o[1],y=o[2],e=o[3],r=o[4],t=o[5],i=o[6],n=o[7],h=o[8],s=o[9],a=o[10],l=o[11],f=o[12],d=o[13],v=o[14],m=o[15];return(p*t-x*r)*(a*m-l*v)-(p*i-y*r)*(s*m-l*d)+(p*n-e*r)*(s*v-a*d)+(x*i-y*t)*(h*m-l*f)-(x*n-e*t)*(h*v-a*f)+(y*n-e*i)*(h*d-s*f)}},{}],200:[function(u,q,W){q.exports=function(o,p){var x=p[0],y=p[1],e=p[2],r=p[3],t=x+x,i=y+y,n=e+e,h=x*t,s=y*t,a=y*i,l=e*t,f=e*i,d=e*n,v=r*t,m=r*i,c=r*n;return o[0]=1-a-d,o[1]=s+c,o[2]=l-m,o[3]=0,o[4]=s-c,o[5]=1-h-d,o[6]=f+v,o[7]=0,o[8]=l+m,o[9]=f-v,o[10]=1-h-a,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],201:[function(u,q,W){q.exports=function(o,p,x){var y,e,r,t=x[0],i=x[1],n=x[2],h=Math.sqrt(t*t+i*i+n*n);return Math.abs(h)<1e-6?null:(t*=h=1/h,i*=h,n*=h,y=Math.sin(p),e=Math.cos(p),r=1-e,o[0]=t*t*r+e,o[1]=i*t*r+n*y,o[2]=n*t*r-i*y,o[3]=0,o[4]=t*i*r-n*y,o[5]=i*i*r+e,o[6]=n*i*r+t*y,o[7]=0,o[8]=t*n*r+i*y,o[9]=i*n*r-t*y,o[10]=n*n*r+e,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o)}},{}],202:[function(u,q,W){q.exports=function(o,p,x){var y=p[0],e=p[1],r=p[2],t=p[3],i=y+y,n=e+e,h=r+r,s=y*i,a=y*n,l=y*h,f=e*n,d=e*h,v=r*h,m=t*i,c=t*n,b=t*h;return o[0]=1-(f+v),o[1]=a+b,o[2]=l-c,o[3]=0,o[4]=a-b,o[5]=1-(s+v),o[6]=d+m,o[7]=0,o[8]=l+c,o[9]=d-m,o[10]=1-(s+f),o[11]=0,o[12]=x[0],o[13]=x[1],o[14]=x[2],o[15]=1,o}},{}],203:[function(u,q,W){q.exports=function(o,p){return o[0]=p[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=p[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=p[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],204:[function(u,q,W){q.exports=function(o,p){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=p[0],o[13]=p[1],o[14]=p[2],o[15]=1,o}},{}],205:[function(u,q,W){q.exports=function(o,p){var x=Math.sin(p),y=Math.cos(p);return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=y,o[6]=x,o[7]=0,o[8]=0,o[9]=-x,o[10]=y,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],206:[function(u,q,W){q.exports=function(o,p){var x=Math.sin(p),y=Math.cos(p);return o[0]=y,o[1]=0,o[2]=-x,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=x,o[9]=0,o[10]=y,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],207:[function(u,q,W){q.exports=function(o,p){var x=Math.sin(p),y=Math.cos(p);return o[0]=y,o[1]=x,o[2]=0,o[3]=0,o[4]=-x,o[5]=y,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],208:[function(u,q,W){q.exports=function(o,p,x,y,e,r,t){var i=1/(x-p),n=1/(e-y),h=1/(r-t);return o[0]=2*r*i,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2*r*n,o[6]=0,o[7]=0,o[8]=(x+p)*i,o[9]=(e+y)*n,o[10]=(t+r)*h,o[11]=-1,o[12]=0,o[13]=0,o[14]=t*r*2*h,o[15]=0,o}},{}],209:[function(u,q,W){q.exports=function(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],210:[function(u,q,W){q.exports={create:u("./create"),clone:u("./clone"),copy:u("./copy"),identity:u("./identity"),transpose:u("./transpose"),invert:u("./invert"),adjoint:u("./adjoint"),determinant:u("./determinant"),multiply:u("./multiply"),translate:u("./translate"),scale:u("./scale"),rotate:u("./rotate"),rotateX:u("./rotateX"),rotateY:u("./rotateY"),rotateZ:u("./rotateZ"),fromRotation:u("./fromRotation"),fromRotationTranslation:u("./fromRotationTranslation"),fromScaling:u("./fromScaling"),fromTranslation:u("./fromTranslation"),fromXRotation:u("./fromXRotation"),fromYRotation:u("./fromYRotation"),fromZRotation:u("./fromZRotation"),fromQuat:u("./fromQuat"),frustum:u("./frustum"),perspective:u("./perspective"),perspectiveFromFieldOfView:u("./perspectiveFromFieldOfView"),ortho:u("./ortho"),lookAt:u("./lookAt"),str:u("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(u,q,W){q.exports=function(o,p){var x=p[0],y=p[1],e=p[2],r=p[3],t=p[4],i=p[5],n=p[6],h=p[7],s=p[8],a=p[9],l=p[10],f=p[11],d=p[12],v=p[13],m=p[14],c=p[15],b=x*i-y*t,g=x*n-e*t,w=x*h-r*t,_=y*n-e*i,T=y*h-r*i,k=e*h-r*n,L=s*v-a*d,M=s*m-l*d,I=s*c-f*d,P=a*m-l*v,S=a*c-f*v,E=l*c-f*m,D=b*E-g*S+w*P+_*I-T*M+k*L;return D?(D=1/D,o[0]=(i*E-n*S+h*P)*D,o[1]=(e*S-y*E-r*P)*D,o[2]=(v*k-m*T+c*_)*D,o[3]=(l*T-a*k-f*_)*D,o[4]=(n*I-t*E-h*M)*D,o[5]=(x*E-e*I+r*M)*D,o[6]=(m*w-d*k-c*g)*D,o[7]=(s*k-l*w+f*g)*D,o[8]=(t*S-i*I+h*L)*D,o[9]=(y*I-x*S-r*L)*D,o[10]=(d*T-v*w+c*b)*D,o[11]=(a*w-s*T-f*b)*D,o[12]=(i*M-t*P-n*L)*D,o[13]=(x*P-y*M+e*L)*D,o[14]=(v*g-d*_-m*b)*D,o[15]=(s*_-a*g+l*b)*D,o):null}},{}],212:[function(u,q,W){var o=u("./identity");q.exports=function(p,x,y,e){var r,t,i,n,h,s,a,l,f,d,v=x[0],m=x[1],c=x[2],b=e[0],g=e[1],w=e[2],_=y[0],T=y[1],k=y[2];return Math.abs(v-_)<1e-6&&Math.abs(m-T)<1e-6&&Math.abs(c-k)<1e-6?o(p):(a=v-_,l=m-T,f=c-k,d=1/Math.sqrt(a*a+l*l+f*f),r=g*(f*=d)-w*(l*=d),t=w*(a*=d)-b*f,i=b*l-g*a,(d=Math.sqrt(r*r+t*t+i*i))?(r*=d=1/d,t*=d,i*=d):(r=0,t=0,i=0),n=l*i-f*t,h=f*r-a*i,s=a*t-l*r,(d=Math.sqrt(n*n+h*h+s*s))?(n*=d=1/d,h*=d,s*=d):(n=0,h=0,s=0),p[0]=r,p[1]=n,p[2]=a,p[3]=0,p[4]=t,p[5]=h,p[6]=l,p[7]=0,p[8]=i,p[9]=s,p[10]=f,p[11]=0,p[12]=-(r*v+t*m+i*c),p[13]=-(n*v+h*m+s*c),p[14]=-(a*v+l*m+f*c),p[15]=1,p)}},{"./identity":209}],213:[function(u,q,W){q.exports=function(o,p,x){var y=p[0],e=p[1],r=p[2],t=p[3],i=p[4],n=p[5],h=p[6],s=p[7],a=p[8],l=p[9],f=p[10],d=p[11],v=p[12],m=p[13],c=p[14],b=p[15],g=x[0],w=x[1],_=x[2],T=x[3];return o[0]=g*y+w*i+_*a+T*v,o[1]=g*e+w*n+_*l+T*m,o[2]=g*r+w*h+_*f+T*c,o[3]=g*t+w*s+_*d+T*b,g=x[4],w=x[5],_=x[6],T=x[7],o[4]=g*y+w*i+_*a+T*v,o[5]=g*e+w*n+_*l+T*m,o[6]=g*r+w*h+_*f+T*c,o[7]=g*t+w*s+_*d+T*b,g=x[8],w=x[9],_=x[10],T=x[11],o[8]=g*y+w*i+_*a+T*v,o[9]=g*e+w*n+_*l+T*m,o[10]=g*r+w*h+_*f+T*c,o[11]=g*t+w*s+_*d+T*b,g=x[12],w=x[13],_=x[14],T=x[15],o[12]=g*y+w*i+_*a+T*v,o[13]=g*e+w*n+_*l+T*m,o[14]=g*r+w*h+_*f+T*c,o[15]=g*t+w*s+_*d+T*b,o}},{}],214:[function(u,q,W){q.exports=function(o,p,x,y,e,r,t){var i=1/(p-x),n=1/(y-e),h=1/(r-t);return o[0]=-2*i,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*n,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*h,o[11]=0,o[12]=(p+x)*i,o[13]=(e+y)*n,o[14]=(t+r)*h,o[15]=1,o}},{}],215:[function(u,q,W){q.exports=function(o,p,x,y,e){var r=1/Math.tan(p/2),t=1/(y-e);return o[0]=r/x,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(e+y)*t,o[11]=-1,o[12]=0,o[13]=0,o[14]=2*e*y*t,o[15]=0,o}},{}],216:[function(u,q,W){q.exports=function(o,p,x,y){var e=Math.tan(p.upDegrees*Math.PI/180),r=Math.tan(p.downDegrees*Math.PI/180),t=Math.tan(p.leftDegrees*Math.PI/180),i=Math.tan(p.rightDegrees*Math.PI/180),n=2/(t+i),h=2/(e+r);return o[0]=n,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=h,o[6]=0,o[7]=0,o[8]=-(t-i)*n*.5,o[9]=(e-r)*h*.5,o[10]=y/(x-y),o[11]=-1,o[12]=0,o[13]=0,o[14]=y*x/(x-y),o[15]=0,o}},{}],217:[function(u,q,W){q.exports=function(o,p,x,y){var e,r,t,i,n,h,s,a,l,f,d,v,m,c,b,g,w,_,T,k,L,M,I,P,S=y[0],E=y[1],D=y[2],F=Math.sqrt(S*S+E*E+D*D);return Math.abs(F)<1e-6?null:(S*=F=1/F,E*=F,D*=F,e=Math.sin(x),r=Math.cos(x),t=1-r,i=p[0],n=p[1],h=p[2],s=p[3],a=p[4],l=p[5],f=p[6],d=p[7],v=p[8],m=p[9],c=p[10],b=p[11],g=S*S*t+r,w=E*S*t+D*e,_=D*S*t-E*e,T=S*E*t-D*e,k=E*E*t+r,L=D*E*t+S*e,M=S*D*t+E*e,I=E*D*t-S*e,P=D*D*t+r,o[0]=i*g+a*w+v*_,o[1]=n*g+l*w+m*_,o[2]=h*g+f*w+c*_,o[3]=s*g+d*w+b*_,o[4]=i*T+a*k+v*L,o[5]=n*T+l*k+m*L,o[6]=h*T+f*k+c*L,o[7]=s*T+d*k+b*L,o[8]=i*M+a*I+v*P,o[9]=n*M+l*I+m*P,o[10]=h*M+f*I+c*P,o[11]=s*M+d*I+b*P,p!==o&&(o[12]=p[12],o[13]=p[13],o[14]=p[14],o[15]=p[15]),o)}},{}],218:[function(u,q,W){q.exports=function(o,p,x){var y=Math.sin(x),e=Math.cos(x),r=p[4],t=p[5],i=p[6],n=p[7],h=p[8],s=p[9],a=p[10],l=p[11];return p!==o&&(o[0]=p[0],o[1]=p[1],o[2]=p[2],o[3]=p[3],o[12]=p[12],o[13]=p[13],o[14]=p[14],o[15]=p[15]),o[4]=r*e+h*y,o[5]=t*e+s*y,o[6]=i*e+a*y,o[7]=n*e+l*y,o[8]=h*e-r*y,o[9]=s*e-t*y,o[10]=a*e-i*y,o[11]=l*e-n*y,o}},{}],219:[function(u,q,W){q.exports=function(o,p,x){var y=Math.sin(x),e=Math.cos(x),r=p[0],t=p[1],i=p[2],n=p[3],h=p[8],s=p[9],a=p[10],l=p[11];return p!==o&&(o[4]=p[4],o[5]=p[5],o[6]=p[6],o[7]=p[7],o[12]=p[12],o[13]=p[13],o[14]=p[14],o[15]=p[15]),o[0]=r*e-h*y,o[1]=t*e-s*y,o[2]=i*e-a*y,o[3]=n*e-l*y,o[8]=r*y+h*e,o[9]=t*y+s*e,o[10]=i*y+a*e,o[11]=n*y+l*e,o}},{}],220:[function(u,q,W){q.exports=function(o,p,x){var y=Math.sin(x),e=Math.cos(x),r=p[0],t=p[1],i=p[2],n=p[3],h=p[4],s=p[5],a=p[6],l=p[7];return p!==o&&(o[8]=p[8],o[9]=p[9],o[10]=p[10],o[11]=p[11],o[12]=p[12],o[13]=p[13],o[14]=p[14],o[15]=p[15]),o[0]=r*e+h*y,o[1]=t*e+s*y,o[2]=i*e+a*y,o[3]=n*e+l*y,o[4]=h*e-r*y,o[5]=s*e-t*y,o[6]=a*e-i*y,o[7]=l*e-n*y,o}},{}],221:[function(u,q,W){q.exports=function(o,p,x){var y=x[0],e=x[1],r=x[2];return o[0]=p[0]*y,o[1]=p[1]*y,o[2]=p[2]*y,o[3]=p[3]*y,o[4]=p[4]*e,o[5]=p[5]*e,o[6]=p[6]*e,o[7]=p[7]*e,o[8]=p[8]*r,o[9]=p[9]*r,o[10]=p[10]*r,o[11]=p[11]*r,o[12]=p[12],o[13]=p[13],o[14]=p[14],o[15]=p[15],o}},{}],222:[function(u,q,W){q.exports=function(o){return"mat4("+o[0]+", "+o[1]+", "+o[2]+", "+o[3]+", "+o[4]+", "+o[5]+", "+o[6]+", "+o[7]+", "+o[8]+", "+o[9]+", "+o[10]+", "+o[11]+", "+o[12]+", "+o[13]+", "+o[14]+", "+o[15]+")"}},{}],223:[function(u,q,W){q.exports=function(o,p,x){var y,e,r,t,i,n,h,s,a,l,f,d,v=x[0],m=x[1],c=x[2];return p===o?(o[12]=p[0]*v+p[4]*m+p[8]*c+p[12],o[13]=p[1]*v+p[5]*m+p[9]*c+p[13],o[14]=p[2]*v+p[6]*m+p[10]*c+p[14],o[15]=p[3]*v+p[7]*m+p[11]*c+p[15]):(y=p[0],e=p[1],r=p[2],t=p[3],i=p[4],n=p[5],h=p[6],s=p[7],a=p[8],l=p[9],f=p[10],d=p[11],o[0]=y,o[1]=e,o[2]=r,o[3]=t,o[4]=i,o[5]=n,o[6]=h,o[7]=s,o[8]=a,o[9]=l,o[10]=f,o[11]=d,o[12]=y*v+i*m+a*c+p[12],o[13]=e*v+n*m+l*c+p[13],o[14]=r*v+h*m+f*c+p[14],o[15]=t*v+s*m+d*c+p[15]),o}},{}],224:[function(u,q,W){q.exports=function(o,p){if(o===p){var x=p[1],y=p[2],e=p[3],r=p[6],t=p[7],i=p[11];o[1]=p[4],o[2]=p[8],o[3]=p[12],o[4]=x,o[6]=p[9],o[7]=p[13],o[8]=y,o[9]=r,o[11]=p[14],o[12]=e,o[13]=t,o[14]=i}else o[0]=p[0],o[1]=p[4],o[2]=p[8],o[3]=p[12],o[4]=p[1],o[5]=p[5],o[6]=p[9],o[7]=p[13],o[8]=p[2],o[9]=p[6],o[10]=p[10],o[11]=p[14],o[12]=p[3],o[13]=p[7],o[14]=p[11],o[15]=p[15];return o}},{}],225:[function(u,q,W){var o=u("css-font"),p=u("pick-by-alias"),x=u("regl"),y=u("gl-util/context"),e=u("es6-weak-map"),r=u("color-normalize"),t=u("font-atlas"),i=u("typedarray-pool"),n=u("parse-rect"),h=u("is-plain-obj"),s=u("parse-unit"),a=u("to-px"),l=u("detect-kerning"),f=u("object-assign"),d=u("font-measure"),v=u("flatten-vertex-data"),m=u("bit-twiddle").nextPow2,c=new e,b=!1;if(document.body){var g=document.body.appendChild(document.createElement("div"));g.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(g).fontStretch&&(b=!0),document.body.removeChild(g)}var w=function(_){(function(T){return typeof T=="function"&&T._gl&&T.prop&&T.texture&&T.buffer})(_)?(_={regl:_},this.gl=_.regl._gl):this.gl=y(_),this.shader=c.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=_.regl||x({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),c.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(h(_)?_:{})};w.prototype.createShader=function(){var _=this.regl,T=_({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:_.prop("count"),offset:_.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:_.this("sizeBuffer")},width:{offset:0,stride:8,buffer:_.this("sizeBuffer")},char:_.this("charBuffer"),position:_.this("position")},uniforms:{atlasSize:function(k,L){return[L.atlas.width,L.atlas.height]},atlasDim:function(k,L){return[L.atlas.cols,L.atlas.rows]},atlas:function(k,L){return L.atlas.texture},charStep:function(k,L){return L.atlas.step},em:function(k,L){return L.atlas.em},color:_.prop("color"),opacity:_.prop("opacity"),viewport:_.this("viewportArray"),scale:_.this("scale"),align:_.prop("align"),baseline:_.prop("baseline"),translate:_.this("translate"),positionOffset:_.prop("positionOffset")},primitive:"points",viewport:_.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`});return{regl:_,draw:T,atlas:{}}},w.prototype.update=function(_){var T=this;if(typeof _=="string")_={text:_};else if(!_)return;(_=p(_,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity!=null&&(Array.isArray(_.opacity)?this.opacity=_.opacity.map(function(me){return parseFloat(me)}):this.opacity=parseFloat(_.opacity)),_.viewport!=null&&(this.viewport=n(_.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),_.kerning!=null&&(this.kerning=_.kerning),_.offset!=null&&(typeof _.offset=="number"&&(_.offset=[_.offset,0]),this.positionOffset=v(_.offset)),_.direction&&(this.direction=_.direction),_.range&&(this.range=_.range,this.scale=[1/(_.range[2]-_.range[0]),1/(_.range[3]-_.range[1])],this.translate=[-_.range[0],-_.range[1]]),_.scale&&(this.scale=_.scale),_.translate&&(this.translate=_.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||_.font||(_.font=w.baseFontSize+"px sans-serif");var k,L=!1,M=!1;if(_.font&&(Array.isArray(_.font)?_.font:[_.font]).forEach(function(me,ke){if(typeof me=="string")try{me=o.parse(me)}catch{me=o.parse(w.baseFontSize+"px "+me)}else me=o.parse(o.stringify(me));var Te=o.stringify({size:w.baseFontSize,family:me.family,stretch:b?me.stretch:void 0,variant:me.variant,weight:me.weight,style:me.style}),Me=s(me.size),Oe=Math.round(Me[0]*a(Me[1]));if(Oe!==T.fontSize[ke]&&(M=!0,T.fontSize[ke]=Oe),!(T.font[ke]&&Te==T.font[ke].baseString||(L=!0,T.font[ke]=w.fonts[Te],T.font[ke]))){var Fe=me.family.join(", "),qe=[me.style];me.style!=me.variant&&qe.push(me.variant),me.variant!=me.weight&&qe.push(me.weight),b&&me.weight!=me.stretch&&qe.push(me.stretch),T.font[ke]={baseString:Te,family:Fe,weight:me.weight,stretch:me.stretch,style:me.style,variant:me.variant,width:{},kerning:{},metrics:d(Fe,{origin:"top",fontSize:w.baseFontSize,fontStyle:qe.join(" ")})},w.fonts[Te]=T.font[ke]}}),(L||M)&&this.font.forEach(function(me,ke){var Te=o.stringify({size:T.fontSize[ke],family:me.family,stretch:b?me.stretch:void 0,variant:me.variant,weight:me.weight,style:me.style});if(T.fontAtlas[ke]=T.shader.atlas[Te],!T.fontAtlas[ke]){var Me=me.metrics;T.shader.atlas[Te]=T.fontAtlas[ke]={fontString:Te,step:2*Math.ceil(T.fontSize[ke]*Me.bottom*.5),em:T.fontSize[ke],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:T.regl.texture()}}_.text==null&&(_.text=T.text)}),typeof _.text=="string"&&_.position&&_.position.length>2){for(var I=Array(.5*_.position.length),P=0;P<I.length;P++)I[P]=_.text;_.text=I}if(_.text!=null||L){if(this.textOffsets=[0],Array.isArray(_.text)){this.count=_.text[0].length,this.counts=[this.count];for(var S=1;S<_.text.length;S++)this.textOffsets[S]=this.textOffsets[S-1]+_.text[S-1].length,this.count+=_.text[S].length,this.counts.push(_.text[S].length);this.text=_.text.join("")}else this.text=_.text,this.count=this.text.length,this.counts=[this.count];k=[],this.font.forEach(function(me,ke){w.atlasContext.font=me.baseString;for(var Te=T.fontAtlas[ke],Me=0;Me<T.text.length;Me++){var Oe=T.text.charAt(Me);if(Te.ids[Oe]==null&&(Te.ids[Oe]=Te.chars.length,Te.chars.push(Oe),k.push(Oe)),me.width[Oe]==null&&(me.width[Oe]=w.atlasContext.measureText(Oe).width/w.baseFontSize,T.kerning)){var Fe=[];for(var qe in me.width)Fe.push(qe+Oe,Oe+qe);f(me.kerning,l(me.family,{pairs:Fe}))}}})}if(_.position)if(_.position.length>2){for(var E=!_.position[0].length,D=i.mallocFloat(2*this.count),F=0,H=0;F<this.counts.length;F++){var V=this.counts[F];if(E)for(var Q=0;Q<V;Q++)D[H++]=_.position[2*F],D[H++]=_.position[2*F+1];else for(var K=0;K<V;K++)D[H++]=_.position[F][0],D[H++]=_.position[F][1]}this.position.call?this.position({type:"float",data:D}):this.position=this.regl.buffer({type:"float",data:D}),i.freeFloat(D)}else this.position.destroy&&this.position.destroy(),this.position={constant:_.position};if(_.text||L){var Z=i.mallocUint8(this.count),$=i.mallocFloat(2*this.count);this.textWidth=[];for(var re=0,R=0;re<this.counts.length;re++){for(var N=this.counts[re],U=this.font[re]||this.font[0],te=this.fontAtlas[re]||this.fontAtlas[0],j=0;j<N;j++){var Y=this.text.charAt(R),J=this.text.charAt(R-1);if(Z[R]=te.ids[Y],$[2*R]=U.width[Y],j){var ee=$[2*R-2],ne=$[2*R],se=$[2*R-1]+.5*ee+.5*ne;if(this.kerning){var oe=U.kerning[J+Y];oe&&(se+=.001*oe)}$[2*R+1]=se}else $[2*R+1]=.5*$[2*R];R++}this.textWidth.push($.length?.5*$[2*R-2]+$[2*R-1]:0)}_.align||(_.align=this.align),this.charBuffer({data:Z,type:"uint8",usage:"stream"}),this.sizeBuffer({data:$,type:"float",usage:"stream"}),i.freeUint8(Z),i.freeFloat($),k.length&&this.font.forEach(function(me,ke){var Te=T.fontAtlas[ke],Me=Te.step,Oe=Math.floor(w.maxAtlasSize/Me),Fe=Math.min(Oe,Te.chars.length),qe=Math.ceil(Te.chars.length/Fe),et=m(Fe*Me),ze=m(qe*Me);Te.width=et,Te.height=ze,Te.rows=qe,Te.cols=Fe,Te.em&&Te.texture({data:t({canvas:w.atlasCanvas,font:Te.fontString,chars:Te.chars,shape:[et,ze],step:[Me,Me]})})})}if(_.align&&(this.align=_.align,this.alignOffset=this.textWidth.map(function(me,ke){var Te=Array.isArray(T.align)?T.align.length>1?T.align[ke]:T.align[0]:T.align;if(typeof Te=="number")return Te;switch(Te){case"right":case"end":return-me;case"center":case"centre":case"middle":return .5*-me}return 0})),this.baseline==null&&_.baseline==null&&(_.baseline=0),_.baseline!=null&&(this.baseline=_.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(me,ke){var Te=(T.font[ke]||T.font[0]).metrics,Me=0;return Me+=.5*Te.bottom,Me+=typeof me=="number"?me-Te.baseline:-Te[me],Me*=-1})),_.color!=null)if(_.color||(_.color="transparent"),typeof _.color!="string"&&isNaN(_.color)){var he;if(typeof _.color[0]=="number"&&_.color.length>this.counts.length){var le=_.color.length;he=i.mallocUint8(le);for(var de=(_.color.subarray||_.color.slice).bind(_.color),xe=0;xe<le;xe+=4)he.set(r(de(xe,xe+4),"uint8"),xe)}else{var we=_.color.length;he=i.mallocUint8(4*we);for(var be=0;be<we;be++)he.set(r(_.color[be]||0,"uint8"),4*be)}this.color=he}else this.color=r(_.color,"uint8");if(_.position||_.text||_.color||_.baseline||_.align||_.font||_.offset||_.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var Ae=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(Ae);for(var fe=0;fe<this.batch.length;fe++)this.batch[fe]={count:this.counts.length>1?this.counts[fe]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[fe]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*fe,4*fe+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[fe]:this.opacity,baseline:this.baselineOffset[fe]!=null?this.baselineOffset[fe]:this.baselineOffset[0],align:this.align?this.alignOffset[fe]!=null?this.alignOffset[fe]:this.alignOffset[0]:0,atlas:this.fontAtlas[fe]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*fe,2*fe+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},w.prototype.destroy=function(){},w.prototype.kerning=!0,w.prototype.position={constant:new Float32Array(2)},w.prototype.translate=null,w.prototype.scale=null,w.prototype.font=null,w.prototype.text="",w.prototype.positionOffset=[0,0],w.prototype.opacity=1,w.prototype.color=new Uint8Array([0,0,0,255]),w.prototype.alignOffset=[0,0],w.maxAtlasSize=1024,w.atlasCanvas=document.createElement("canvas"),w.atlasContext=w.atlasCanvas.getContext("2d",{alpha:!1}),w.baseFontSize=64,w.fonts={},q.exports=w},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:283,"to-px":314,"typedarray-pool":327}],226:[function(u,q,W){(function(o){(function(){var p=u("pick-by-alias");function x(r){if(r.container)if(r.container==document.body)document.body.style.width||(r.canvas.width=r.width||r.pixelRatio*o.innerWidth),document.body.style.height||(r.canvas.height=r.height||r.pixelRatio*o.innerHeight);else{var t=r.container.getBoundingClientRect();r.canvas.width=r.width||t.right-t.left,r.canvas.height=r.height||t.bottom-t.top}}function y(r){return typeof r.getContext=="function"&&"width"in r&&"height"in r}function e(){var r=document.createElement("canvas");return r.style.position="absolute",r.style.top=0,r.style.left=0,r}q.exports=function(r){var t;if(r?typeof r=="string"&&(r={container:r}):r={},y(r)?r={container:r}:r=typeof(t=r).nodeName=="string"&&typeof t.appendChild=="function"&&typeof t.getBoundingClientRect=="function"?{container:r}:function(n){return typeof n.drawArrays=="function"||typeof n.drawElements=="function"}(r)?{gl:r}:p(r,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),r.pixelRatio||(r.pixelRatio=o.pixelRatio||1),r.gl)return r.gl;if(r.canvas&&(r.container=r.canvas.parentNode),r.container){if(typeof r.container=="string"){var i=document.querySelector(r.container);if(!i)throw Error("Element "+r.container+" is not found");r.container=i}y(r.container)?(r.canvas=r.container,r.container=r.canvas.parentNode):r.canvas||(r.canvas=e(),r.container.appendChild(r.canvas),x(r))}else if(!r.canvas){if(typeof document=="undefined")throw Error("Not DOM environment. Use headless-gl.");r.container=document.body||document.documentElement,r.canvas=e(),r.container.appendChild(r.canvas),x(r)}return r.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(n){try{r.gl=r.canvas.getContext(n,r.attrs)}catch{}return r.gl}),r.gl}}).call(this)}).call(this,typeof Ga!="undefined"?Ga:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"pick-by-alias":253}],227:[function(u,q,W){q.exports=function(o){typeof o=="string"&&(o=[o]);for(var p=[].slice.call(arguments,1),x=[],y=0;y<o.length-1;y++)x.push(o[y],p[y]||"");return x.push(o[y]),x.join("")}},{}],228:[function(u,q,W){(function(o){(function(){var p,x=u("is-browser");p=typeof o.matchMedia=="function"?!o.matchMedia("(hover: none)").matches:x,q.exports=p}).call(this)}).call(this,typeof Ga!="undefined"?Ga:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"is-browser":232}],229:[function(u,q,W){var o=u("is-browser");q.exports=o&&function(){var p=!1;try{var x=Object.defineProperty({},"passive",{get:function(){p=!0}});window.addEventListener("test",null,x),window.removeEventListener("test",null,x)}catch{p=!1}return p}()},{"is-browser":232}],230:[function(u,q,W){W.read=function(o,p,x,y,e){var r,t,i=8*e-y-1,n=(1<<i)-1,h=n>>1,s=-7,a=x?e-1:0,l=x?-1:1,f=o[p+a];for(a+=l,r=f&(1<<-s)-1,f>>=-s,s+=i;s>0;r=256*r+o[p+a],a+=l,s-=8);for(t=r&(1<<-s)-1,r>>=-s,s+=y;s>0;t=256*t+o[p+a],a+=l,s-=8);if(r===0)r=1-h;else{if(r===n)return t?NaN:1/0*(f?-1:1);t+=Math.pow(2,y),r-=h}return(f?-1:1)*t*Math.pow(2,r-y)},W.write=function(o,p,x,y,e,r){var t,i,n,h=8*r-e-1,s=(1<<h)-1,a=s>>1,l=e===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=y?0:r-1,d=y?1:-1,v=p<0||p===0&&1/p<0?1:0;for(p=Math.abs(p),isNaN(p)||p===1/0?(i=isNaN(p)?1:0,t=s):(t=Math.floor(Math.log(p)/Math.LN2),p*(n=Math.pow(2,-t))<1&&(t--,n*=2),(p+=t+a>=1?l/n:l*Math.pow(2,1-a))*n>=2&&(t++,n/=2),t+a>=s?(i=0,t=s):t+a>=1?(i=(p*n-1)*Math.pow(2,e),t+=a):(i=p*Math.pow(2,a-1)*Math.pow(2,e),t=0));e>=8;o[x+f]=255&i,f+=d,i/=256,e-=8);for(t=t<<e|i,h+=e;h>0;o[x+f]=255&t,f+=d,t/=256,h-=8);o[x+f-d]|=128*v}},{}],231:[function(u,q,W){typeof Object.create=="function"?q.exports=function(o,p){p&&(o.super_=p,o.prototype=Object.create(p.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}))}:q.exports=function(o,p){if(p){o.super_=p;var x=function(){};x.prototype=p.prototype,o.prototype=new x,o.prototype.constructor=o}}},{}],232:[function(u,q,W){q.exports=!0},{}],233:[function(u,q,W){q.exports=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(u,q,W){q.exports=x,q.exports.isMobile=x,q.exports.default=x;var o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,p=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function x(y){y||(y={});var e=y.ua;if(e||typeof navigator=="undefined"||(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),typeof e!="string")return!1;var r=y.tablet?p.test(e):o.test(e);return!r&&y.tablet&&y.featureDetect&&navigator&&navigator.maxTouchPoints>1&&e.indexOf("Macintosh")!==-1&&e.indexOf("Safari")!==-1&&(r=!0),r}},{}],235:[function(u,q,W){q.exports=function(o){var p=typeof o;return o!==null&&(p==="object"||p==="function")}},{}],236:[function(u,q,W){var o=Object.prototype.toString;q.exports=function(p){var x;return o.call(p)==="[object Object]"&&((x=Object.getPrototypeOf(p))===null||x===Object.getPrototypeOf({}))}},{}],237:[function(u,q,W){q.exports=function(o){for(var p,x=o.length,y=0;y<x;y++)if(((p=o.charCodeAt(y))<9||p>13)&&p!==32&&p!==133&&p!==160&&p!==5760&&p!==6158&&(p<8192||p>8205)&&p!==8232&&p!==8233&&p!==8239&&p!==8287&&p!==8288&&p!==12288&&p!==65279)return!1;return!0}},{}],238:[function(u,q,W){q.exports=function(o){return typeof o=="string"&&(o=o.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(o)&&/[\dz]$/i.test(o)&&o.length>4))}},{}],239:[function(u,q,W){(function(o,p){typeof W=="object"&&q!==void 0?q.exports=p():(o=o||self).mapboxgl=p()})(this,function(){var o,p,x;function y(e,r){if(o)if(p){var t="var sharedChunk = {}; ("+o+")(sharedChunk); ("+p+")(sharedChunk);",i={};o(i),(x=r(i)).workerUrl=window.URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}else p=r;else o=r}return y(0,function(e){function r(A,O){return A(O={exports:{}},O.exports),O.exports}var t=i;function i(A,O,X,ie){this.cx=3*A,this.bx=3*(X-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*O,this.by=3*(ie-O)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=ie,this.p2x=X,this.p2y=ie}i.prototype.sampleCurveX=function(A){return((this.ax*A+this.bx)*A+this.cx)*A},i.prototype.sampleCurveY=function(A){return((this.ay*A+this.by)*A+this.cy)*A},i.prototype.sampleCurveDerivativeX=function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},i.prototype.solveCurveX=function(A,O){var X,ie,pe,ye,Le;for(O===void 0&&(O=1e-6),pe=A,Le=0;Le<8;Le++){if(ye=this.sampleCurveX(pe)-A,Math.abs(ye)<O)return pe;var Ne=this.sampleCurveDerivativeX(pe);if(Math.abs(Ne)<1e-6)break;pe-=ye/Ne}if((pe=A)<(X=0))return X;if(pe>(ie=1))return ie;for(;X<ie;){if(ye=this.sampleCurveX(pe),Math.abs(ye-A)<O)return pe;A>ye?X=pe:ie=pe,pe=.5*(ie-X)+X}return pe},i.prototype.solve=function(A,O){return this.sampleCurveY(this.solveCurveX(A,O))};var n=h;function h(A,O){this.x=A,this.y=O}function s(A,O,X,ie){var pe=new t(A,O,X,ie);return function(ye){return pe.solve(ye)}}h.prototype={clone:function(){return new h(this.x,this.y)},add:function(A){return this.clone()._add(A)},sub:function(A){return this.clone()._sub(A)},multByPoint:function(A){return this.clone()._multByPoint(A)},divByPoint:function(A){return this.clone()._divByPoint(A)},mult:function(A){return this.clone()._mult(A)},div:function(A){return this.clone()._div(A)},rotate:function(A){return this.clone()._rotate(A)},rotateAround:function(A,O){return this.clone()._rotateAround(A,O)},matMult:function(A){return this.clone()._matMult(A)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(A){return this.x===A.x&&this.y===A.y},dist:function(A){return Math.sqrt(this.distSqr(A))},distSqr:function(A){var O=A.x-this.x,X=A.y-this.y;return O*O+X*X},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith:function(A){return this.angleWithSep(A.x,A.y)},angleWithSep:function(A,O){return Math.atan2(this.x*O-this.y*A,this.x*A+this.y*O)},_matMult:function(A){var O=A[0]*this.x+A[1]*this.y,X=A[2]*this.x+A[3]*this.y;return this.x=O,this.y=X,this},_add:function(A){return this.x+=A.x,this.y+=A.y,this},_sub:function(A){return this.x-=A.x,this.y-=A.y,this},_mult:function(A){return this.x*=A,this.y*=A,this},_div:function(A){return this.x/=A,this.y/=A,this},_multByPoint:function(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint:function(A){return this.x/=A.x,this.y/=A.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var A=this.y;return this.y=this.x,this.x=-A,this},_rotate:function(A){var O=Math.cos(A),X=Math.sin(A),ie=O*this.x-X*this.y,pe=X*this.x+O*this.y;return this.x=ie,this.y=pe,this},_rotateAround:function(A,O){var X=Math.cos(A),ie=Math.sin(A),pe=O.x+X*(this.x-O.x)-ie*(this.y-O.y),ye=O.y+ie*(this.x-O.x)+X*(this.y-O.y);return this.x=pe,this.y=ye,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(A){return A instanceof h?A:Array.isArray(A)?new h(A[0],A[1]):A};var a=s(.25,.1,.25,1);function l(A,O,X){return Math.min(X,Math.max(O,A))}function f(A,O,X){var ie=X-O,pe=((A-O)%ie+ie)%ie+O;return pe===O?X:pe}function d(A){for(var O=[],X=arguments.length-1;X-- >0;)O[X]=arguments[X+1];for(var ie=0,pe=O;ie<pe.length;ie+=1){var ye=pe[ie];for(var Le in ye)A[Le]=ye[Le]}return A}var v=1;function m(){return v++}function c(){return function A(O){return O?(O^16*Math.random()>>O/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,A)}()}function b(A){return!!A&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(A)}function g(A,O){A.forEach(function(X){O[X]&&(O[X]=O[X].bind(O))})}function w(A,O){return A.indexOf(O,A.length-O.length)!==-1}function _(A,O,X){var ie={};for(var pe in A)ie[pe]=O.call(X||this,A[pe],pe,A);return ie}function T(A,O,X){var ie={};for(var pe in A)O.call(X||this,A[pe],pe,A)&&(ie[pe]=A[pe]);return ie}function k(A){return Array.isArray(A)?A.map(k):typeof A=="object"&&A?_(A,k):A}var L={};function M(A){L[A]||(typeof console!="undefined"&&console.warn(A),L[A]=!0)}function I(A,O,X){return(X.y-A.y)*(O.x-A.x)>(O.y-A.y)*(X.x-A.x)}function P(A){for(var O=0,X=0,ie=A.length,pe=ie-1,ye=void 0,Le=void 0;X<ie;pe=X++)ye=A[X],O+=((Le=A[pe]).x-ye.x)*(ye.y+Le.y);return O}function S(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function E(A){var O={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ie,pe,ye,Le){var Ne=ye||Le;return O[pe]=!Ne||Ne.toLowerCase(),""}),O["max-age"]){var X=parseInt(O["max-age"],10);isNaN(X)?delete O["max-age"]:O["max-age"]=X}return O}var D=null;function F(A){if(D==null){var O=A.navigator?A.navigator.userAgent:null;D=!!A.safari||!(!O||!(/\b(iPad|iPhone|iPod)\b/.test(O)||O.match("Safari")&&!O.match("Chrome")))}return D}function H(A){try{var O=self[A];return O.setItem("_mapbox_test_",1),O.removeItem("_mapbox_test_"),!0}catch{return!1}}var V,Q,K,Z,$=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),re=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,R=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,N={now:$,frame:function(A){var O=re(A);return{cancel:function(){return R(O)}}},getImageData:function(A,O){O===void 0&&(O=0);var X=self.document.createElement("canvas"),ie=X.getContext("2d");if(!ie)throw new Error("failed to create canvas 2d context");return X.width=A.width,X.height=A.height,ie.drawImage(A,0,0,A.width,A.height),ie.getImageData(-O,-O,A.width+2*O,A.height+2*O)},resolveURL:function(A){return V||(V=self.document.createElement("a")),V.href=A,V.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(Q==null&&(Q=self.matchMedia("(prefers-reduced-motion: reduce)")),Q.matches)}},U={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},te={supported:!1,testSupport:function(A){j||!Z||(Y?J(A):K=A)}},j=!1,Y=!1;function J(A){var O=A.createTexture();A.bindTexture(A.TEXTURE_2D,O);try{if(A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,Z),A.isContextLost())return;te.supported=!0}catch{}A.deleteTexture(O),j=!0}self.document&&((Z=self.document.createElement("img")).onload=function(){K&&J(K),K=null,Y=!0},Z.onerror=function(){j=!0,K=null},Z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ee="01",ne=function(A,O){this._transformRequestFn=A,this._customAccessToken=O,this._createSkuToken()};function se(A){return A.indexOf("mapbox:")===0}ne.prototype._createSkuToken=function(){var A=function(){for(var O="",X=0;X<10;X++)O+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ee,O].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=A.token,this._skuTokenExpiresAt=A.tokenExpiresAt},ne.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ne.prototype.transformRequest=function(A,O){return this._transformRequestFn&&this._transformRequestFn(A,O)||{url:A}},ne.prototype.normalizeStyleURL=function(A,O){if(!se(A))return A;var X=de(A);return X.path="/styles/v1"+X.path,this._makeAPIURL(X,this._customAccessToken||O)},ne.prototype.normalizeGlyphsURL=function(A,O){if(!se(A))return A;var X=de(A);return X.path="/fonts/v1"+X.path,this._makeAPIURL(X,this._customAccessToken||O)},ne.prototype.normalizeSourceURL=function(A,O){if(!se(A))return A;var X=de(A);return X.path="/v4/"+X.authority+".json",X.params.push("secure"),this._makeAPIURL(X,this._customAccessToken||O)},ne.prototype.normalizeSpriteURL=function(A,O,X,ie){var pe=de(A);return se(A)?(pe.path="/styles/v1"+pe.path+"/sprite"+O+X,this._makeAPIURL(pe,this._customAccessToken||ie)):(pe.path+=""+O+X,xe(pe))},ne.prototype.normalizeTileURL=function(A,O){if(this._isSkuTokenExpired()&&this._createSkuToken(),A&&!se(A))return A;var X=de(A),ie=N.devicePixelRatio>=2||O===512?"@2x":"",pe=te.supported?".webp":"$1";X.path=X.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+ie+pe),X.path=X.path.replace(/^.+\/v4\//,"/"),X.path="/v4"+X.path;var ye=this._customAccessToken||function(Le){for(var Ne=0,Qe=Le;Ne<Qe.length;Ne+=1){var ht=Qe[Ne].match(/^access_token=(.*)$/);if(ht)return ht[1]}return null}(X.params)||U.ACCESS_TOKEN;return U.REQUIRE_ACCESS_TOKEN&&ye&&this._skuToken&&X.params.push("sku="+this._skuToken),this._makeAPIURL(X,ye)},ne.prototype.canonicalizeTileURL=function(A,O){var X=de(A);if(!X.path.match(/(^\/v4\/)/)||!X.path.match(/\.[\w]+$/))return A;var ie="mapbox://tiles/";ie+=X.path.replace("/v4/","");var pe=X.params;return O&&(pe=pe.filter(function(ye){return!ye.match(/^access_token=/)})),pe.length&&(ie+="?"+pe.join("&")),ie},ne.prototype.canonicalizeTileset=function(A,O){for(var X=!!O&&se(O),ie=[],pe=0,ye=A.tiles||[];pe<ye.length;pe+=1){var Le=ye[pe];he(Le)?ie.push(this.canonicalizeTileURL(Le,X)):ie.push(Le)}return ie},ne.prototype._makeAPIURL=function(A,O){var X="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ie=de(U.API_URL);if(A.protocol=ie.protocol,A.authority=ie.authority,ie.path!=="/"&&(A.path=""+ie.path+A.path),!U.REQUIRE_ACCESS_TOKEN)return xe(A);if(!(O=O||U.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+X);if(O[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+X);return A.params=A.params.filter(function(pe){return pe.indexOf("access_token")===-1}),A.params.push("access_token="+O),xe(A)};var oe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function he(A){return oe.test(A)}var le=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function de(A){var O=A.match(le);if(!O)throw new Error("Unable to parse URL object");return{protocol:O[1],authority:O[2],path:O[3]||"/",params:O[4]?O[4].split("&"):[]}}function xe(A){var O=A.params.length?"?"+A.params.join("&"):"";return A.protocol+"://"+A.authority+A.path+O}function we(A){if(!A)return null;var O,X=A.split(".");if(!X||X.length!==3)return null;try{return JSON.parse((O=X[1],decodeURIComponent(self.atob(O).split("").map(function(ie){return"%"+("00"+ie.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch{return null}}var be=function(A){this.type=A,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};be.prototype.getStorageKey=function(A){var O,X=we(U.ACCESS_TOKEN),ie="";return X&&X.u?(O=X.u,ie=self.btoa(encodeURIComponent(O).replace(/%([0-9A-F]{2})/g,function(pe,ye){return String.fromCharCode(Number("0x"+ye))}))):ie=U.ACCESS_TOKEN||"",A?"mapbox.eventData."+A+":"+ie:"mapbox.eventData:"+ie},be.prototype.fetchEventData=function(){var A=H("localStorage"),O=this.getStorageKey(),X=this.getStorageKey("uuid");if(A)try{var ie=self.localStorage.getItem(O);ie&&(this.eventData=JSON.parse(ie));var pe=self.localStorage.getItem(X);pe&&(this.anonId=pe)}catch{M("Unable to read from LocalStorage")}},be.prototype.saveEventData=function(){var A=H("localStorage"),O=this.getStorageKey(),X=this.getStorageKey("uuid");if(A)try{self.localStorage.setItem(X,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(O,JSON.stringify(this.eventData))}catch{M("Unable to write to LocalStorage")}},be.prototype.processRequests=function(A){},be.prototype.postEvent=function(A,O,X,ie){var pe=this;if(U.EVENTS_URL){var ye=de(U.EVENTS_URL);ye.params.push("access_token="+(ie||U.ACCESS_TOKEN||""));var Le={event:this.type,created:new Date(A).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:ee,userId:this.anonId},Ne=O?d(Le,O):Le,Qe={url:xe(ye),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ne])};this.pendingRequest=Gt(Qe,function(ht){pe.pendingRequest=null,X(ht),pe.saveEventData(),pe.processRequests(ie)})}},be.prototype.queueRequest=function(A,O){this.queue.push(A),this.processRequests(O)};var Ae,fe,me=function(A){function O(){A.call(this,"map.load"),this.success={},this.skuToken=""}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.postMapLoadEvent=function(X,ie,pe,ye){this.skuToken=pe,(U.EVENTS_URL&&ye||U.ACCESS_TOKEN&&Array.isArray(X)&&X.some(function(Le){return se(Le)||he(Le)}))&&this.queueRequest({id:ie,timestamp:Date.now()},ye)},O.prototype.processRequests=function(X){var ie=this;if(!this.pendingRequest&&this.queue.length!==0){var pe=this.queue.shift(),ye=pe.id,Le=pe.timestamp;ye&&this.success[ye]||(this.anonId||this.fetchEventData(),b(this.anonId)||(this.anonId=c()),this.postEvent(Le,{skuToken:this.skuToken},function(Ne){Ne||ye&&(ie.success[ye]=!0)},X))}},O}(be),ke=new(function(A){function O(X){A.call(this,"appUserTurnstile"),this._customAccessToken=X}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.postTurnstileEvent=function(X,ie){U.EVENTS_URL&&U.ACCESS_TOKEN&&Array.isArray(X)&&X.some(function(pe){return se(pe)||he(pe)})&&this.queueRequest(Date.now(),ie)},O.prototype.processRequests=function(X){var ie=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var pe=we(U.ACCESS_TOKEN),ye=pe?pe.u:U.ACCESS_TOKEN,Le=ye!==this.eventData.tokenU;b(this.anonId)||(this.anonId=c(),Le=!0);var Ne=this.queue.shift();if(this.eventData.lastSuccess){var Qe=new Date(this.eventData.lastSuccess),ht=new Date(Ne),vt=(Ne-this.eventData.lastSuccess)/864e5;Le=Le||vt>=1||vt<-1||Qe.getDate()!==ht.getDate()}else Le=!0;if(!Le)return this.processRequests();this.postEvent(Ne,{"enabled.telemetry":!1},function(jt){jt||(ie.eventData.lastSuccess=Ne,ie.eventData.tokenU=ye)},X)}},O}(be)),Te=ke.postTurnstileEvent.bind(ke),Me=new me,Oe=Me.postMapLoadEvent.bind(Me),Fe=500,qe=50;function et(){self.caches&&!Ae&&(Ae=self.caches.open("mapbox-tiles"))}function ze(A,O,X){if(et(),Ae){var ie={status:O.status,statusText:O.statusText,headers:new self.Headers};O.headers.forEach(function(ye,Le){return ie.headers.set(Le,ye)});var pe=E(O.headers.get("Cache-Control")||"");pe["no-store"]||(pe["max-age"]&&ie.headers.set("Expires",new Date(X+1e3*pe["max-age"]).toUTCString()),new Date(ie.headers.get("Expires")).getTime()-X<42e4||function(ye,Le){if(fe===void 0)try{new Response(new ReadableStream),fe=!0}catch{fe=!1}fe?Le(ye.body):ye.blob().then(Le)}(O,function(ye){var Le=new self.Response(ye,ie);et(),Ae&&Ae.then(function(Ne){return Ne.put(Ue(A.url),Le)}).catch(function(Ne){return M(Ne.message)})}))}}function Ue(A){var O=A.indexOf("?");return O<0?A:A.slice(0,O)}function We(A,O){if(et(),!Ae)return O(null);var X=Ue(A.url);Ae.then(function(ie){ie.match(X).then(function(pe){var ye=function(Le){if(!Le)return!1;var Ne=new Date(Le.headers.get("Expires")||0),Qe=E(Le.headers.get("Cache-Control")||"");return Ne>Date.now()&&!Qe["no-cache"]}(pe);ie.delete(X),ye&&ie.put(X,pe.clone()),O(null,pe,ye)}).catch(O)}).catch(O)}var Ze,nt=1/0;function ft(){return Ze==null&&(Ze=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Ze}var xt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(xt);var It=function(A){function O(X,ie,pe){ie===401&&he(pe)&&(X+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),A.call(this,X),this.status=ie,this.url=pe,this.name=this.constructor.name,this.message=X}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},O}(Error),Et=S()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href};function it(A,O){var X,ie=new self.AbortController,pe=new self.Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,referrer:Et(),signal:ie.signal}),ye=!1,Le=!1,Ne=(X=pe.url).indexOf("sku=")>0&&he(X);A.type==="json"&&pe.headers.set("Accept","application/json");var Qe=function(vt,jt,Kt){if(!Le){if(vt&&vt.message!=="SecurityError"&&M(vt),jt&&Kt)return ht(jt);var Wt=Date.now();self.fetch(pe).then(function(ar){if(ar.ok){var vr=Ne?ar.clone():null;return ht(ar,vr,Wt)}return O(new It(ar.statusText,ar.status,A.url))}).catch(function(ar){ar.code!==20&&O(new Error(ar.message))})}},ht=function(vt,jt,Kt){(A.type==="arrayBuffer"?vt.arrayBuffer():A.type==="json"?vt.json():vt.text()).then(function(Wt){Le||(jt&&Kt&&ze(pe,jt,Kt),ye=!0,O(null,Wt,vt.headers.get("Cache-Control"),vt.headers.get("Expires")))}).catch(function(Wt){Le||O(new Error(Wt.message))})};return Ne?We(pe,Qe):Qe(null,null),{cancel:function(){Le=!0,ye||ie.abort()}}}var rt=function(A,O){if(X=A.url,!(/^file:/.test(X)||/^file:/.test(Et())&&!/^\w+:/.test(X))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return it(A,O);if(S()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,O,void 0,!0)}var X;return function(ie,pe){var ye=new self.XMLHttpRequest;for(var Le in ye.open(ie.method||"GET",ie.url,!0),ie.type==="arrayBuffer"&&(ye.responseType="arraybuffer"),ie.headers)ye.setRequestHeader(Le,ie.headers[Le]);return ie.type==="json"&&(ye.responseType="text",ye.setRequestHeader("Accept","application/json")),ye.withCredentials=ie.credentials==="include",ye.onerror=function(){pe(new Error(ye.statusText))},ye.onload=function(){if((ye.status>=200&&ye.status<300||ye.status===0)&&ye.response!==null){var Ne=ye.response;if(ie.type==="json")try{Ne=JSON.parse(ye.response)}catch(Qe){return pe(Qe)}pe(null,Ne,ye.getResponseHeader("Cache-Control"),ye.getResponseHeader("Expires"))}else pe(new It(ye.statusText,ye.status,ie.url))},ye.send(ie.body),{cancel:function(){return ye.abort()}}}(A,O)},At=function(A,O){return rt(d(A,{type:"arrayBuffer"}),O)},Gt=function(A,O){return rt(d(A,{method:"POST"}),O)},Qt,Ve;Qt=[],Ve=0;var Ye=function(A,O){if(te.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),Ve>=U.MAX_PARALLEL_IMAGE_REQUESTS){var X={requestParameters:A,callback:O,cancelled:!1,cancel:function(){this.cancelled=!0}};return Qt.push(X),X}Ve++;var ie=!1,pe=function(){if(!ie)for(ie=!0,Ve--;Qt.length&&Ve<U.MAX_PARALLEL_IMAGE_REQUESTS;){var Le=Qt.shift(),Ne=Le.requestParameters,Qe=Le.callback;Le.cancelled||(Le.cancel=Ye(Ne,Qe).cancel)}},ye=At(A,function(Le,Ne,Qe,ht){pe(),Le?O(Le):Ne&&(ft()?function(vt,jt){var Kt=new self.Blob([new Uint8Array(vt)],{type:"image/png"});self.createImageBitmap(Kt).then(function(Wt){jt(null,Wt)}).catch(function(Wt){jt(new Error("Could not load image because of "+Wt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Ne,O):function(vt,jt,Kt,Wt){var ar=new self.Image,vr=self.URL;ar.onload=function(){jt(null,ar),vr.revokeObjectURL(ar.src)},ar.onerror=function(){return jt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Cr=new self.Blob([new Uint8Array(vt)],{type:"image/png"});ar.cacheControl=Kt,ar.expires=Wt,ar.src=vt.byteLength?vr.createObjectURL(Cr):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Ne,O,Qe,ht))});return{cancel:function(){ye.cancel(),pe()}}};function Be(A,O,X){X[A]&&X[A].indexOf(O)!==-1||(X[A]=X[A]||[],X[A].push(O))}function Je(A,O,X){if(X&&X[A]){var ie=X[A].indexOf(O);ie!==-1&&X[A].splice(ie,1)}}var Se=function(A,O){O===void 0&&(O={}),d(this,O),this.type=A},Pe=function(A){function O(X,ie){ie===void 0&&(ie={}),A.call(this,"error",d({error:X},ie))}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O}(Se),De=function(){};De.prototype.on=function(A,O){return this._listeners=this._listeners||{},Be(A,O,this._listeners),this},De.prototype.off=function(A,O){return Je(A,O,this._listeners),Je(A,O,this._oneTimeListeners),this},De.prototype.once=function(A,O){return this._oneTimeListeners=this._oneTimeListeners||{},Be(A,O,this._oneTimeListeners),this},De.prototype.fire=function(A,O){typeof A=="string"&&(A=new Se(A,O||{}));var X=A.type;if(this.listens(X)){A.target=this;for(var ie=0,pe=this._listeners&&this._listeners[X]?this._listeners[X].slice():[];ie<pe.length;ie+=1)pe[ie].call(this,A);for(var ye=0,Le=this._oneTimeListeners&&this._oneTimeListeners[X]?this._oneTimeListeners[X].slice():[];ye<Le.length;ye+=1){var Ne=Le[ye];Je(X,Ne,this._oneTimeListeners),Ne.call(this,A)}var Qe=this._eventedParent;Qe&&(d(A,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Qe.fire(A))}else A instanceof Pe&&console.error(A.error);return this},De.prototype.listens=function(A){return this._listeners&&this._listeners[A]&&this._listeners[A].length>0||this._oneTimeListeners&&this._oneTimeListeners[A]&&this._oneTimeListeners[A].length>0||this._eventedParent&&this._eventedParent.listens(A)},De.prototype.setEventedParent=function(A,O){return this._eventedParent=A,this._eventedParentData=O,this};var Ie={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},$e=function(A,O,X,ie){this.message=(A?A+": ":"")+X,ie&&(this.identifier=ie),O!=null&&O.__line__&&(this.line=O.__line__)};function st(A){var O=A.key,X=A.value;return X?[new $e(O,X,"constants have been deprecated as of v8")]:[]}function dt(A){for(var O=[],X=arguments.length-1;X-- >0;)O[X]=arguments[X+1];for(var ie=0,pe=O;ie<pe.length;ie+=1){var ye=pe[ie];for(var Le in ye)A[Le]=ye[Le]}return A}function ut(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function Lt(A){if(Array.isArray(A))return A.map(Lt);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){var O={};for(var X in A)O[X]=Lt(A[X]);return O}return ut(A)}var lt=function(A){function O(X,ie){A.call(this,ie),this.message=ie,this.key=X}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O}(Error),Ct=function(A,O){O===void 0&&(O=[]),this.parent=A,this.bindings={};for(var X=0,ie=O;X<ie.length;X+=1){var pe=ie[X],ye=pe[0],Le=pe[1];this.bindings[ye]=Le}};Ct.prototype.concat=function(A){return new Ct(this,A)},Ct.prototype.get=function(A){if(this.bindings[A])return this.bindings[A];if(this.parent)return this.parent.get(A);throw new Error(A+" not found in scope.")},Ct.prototype.has=function(A){return!!this.bindings[A]||!!this.parent&&this.parent.has(A)};var Pt={kind:"null"},Ke={kind:"number"},mt={kind:"string"},Dt={kind:"boolean"},Bt={kind:"color"},Zt={kind:"object"},Re={kind:"value"},ct={kind:"collator"},wt={kind:"formatted"},Rt={kind:"resolvedImage"};function Vt(A,O){return{kind:"array",itemType:A,N:O}}function rr(A){if(A.kind==="array"){var O=rr(A.itemType);return typeof A.N=="number"?"array<"+O+", "+A.N+">":A.itemType.kind==="value"?"array":"array<"+O+">"}return A.kind}var qt=[Pt,Ke,mt,Dt,Bt,wt,Zt,Vt(Re),Rt];function Jt(A,O){if(O.kind==="error")return null;if(A.kind==="array"){if(O.kind==="array"&&(O.N===0&&O.itemType.kind==="value"||!Jt(A.itemType,O.itemType))&&(typeof A.N!="number"||A.N===O.N))return null}else{if(A.kind===O.kind)return null;if(A.kind==="value"){for(var X=0,ie=qt;X<ie.length;X+=1)if(!Jt(ie[X],O))return null}}return"Expected "+rr(A)+" but found "+rr(O)+" instead."}function or(A,O){return O.some(function(X){return X.kind===A.kind})}function gr(A,O){return O.some(function(X){return X==="null"?A===null:X==="array"?Array.isArray(A):X==="object"?A&&!Array.isArray(A)&&typeof A=="object":X===typeof A})}var dr=r(function(A,O){var X={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ie(Qe){return(Qe=Math.round(Qe))<0?0:Qe>255?255:Qe}function pe(Qe){return Qe<0?0:Qe>1?1:Qe}function ye(Qe){return Qe[Qe.length-1]==="%"?ie(parseFloat(Qe)/100*255):ie(parseInt(Qe))}function Le(Qe){return Qe[Qe.length-1]==="%"?pe(parseFloat(Qe)/100):pe(parseFloat(Qe))}function Ne(Qe,ht,vt){return vt<0?vt+=1:vt>1&&(vt-=1),6*vt<1?Qe+(ht-Qe)*vt*6:2*vt<1?ht:3*vt<2?Qe+(ht-Qe)*(2/3-vt)*6:Qe}try{O.parseCSSColor=function(Qe){var ht,vt=Qe.replace(/ /g,"").toLowerCase();if(vt in X)return X[vt].slice();if(vt[0]==="#")return vt.length===4?(ht=parseInt(vt.substr(1),16))>=0&&ht<=4095?[(3840&ht)>>4|(3840&ht)>>8,240&ht|(240&ht)>>4,15&ht|(15&ht)<<4,1]:null:vt.length===7&&(ht=parseInt(vt.substr(1),16))>=0&&ht<=16777215?[(16711680&ht)>>16,(65280&ht)>>8,255&ht,1]:null;var jt=vt.indexOf("("),Kt=vt.indexOf(")");if(jt!==-1&&Kt+1===vt.length){var Wt=vt.substr(0,jt),ar=vt.substr(jt+1,Kt-(jt+1)).split(","),vr=1;switch(Wt){case"rgba":if(ar.length!==4)return null;vr=Le(ar.pop());case"rgb":return ar.length!==3?null:[ye(ar[0]),ye(ar[1]),ye(ar[2]),vr];case"hsla":if(ar.length!==4)return null;vr=Le(ar.pop());case"hsl":if(ar.length!==3)return null;var Cr=(parseFloat(ar[0])%360+360)%360/360,Lr=Le(ar[1]),Nr=Le(ar[2]),jr=Nr<=.5?Nr*(Lr+1):Nr+Lr-Nr*Lr,Yr=2*Nr-jr;return[ie(255*Ne(Yr,jr,Cr+1/3)),ie(255*Ne(Yr,jr,Cr)),ie(255*Ne(Yr,jr,Cr-1/3)),vr];default:return null}}return null}}catch{}}).parseCSSColor,ur=function(A,O,X,ie){ie===void 0&&(ie=1),this.r=A,this.g=O,this.b=X,this.a=ie};ur.parse=function(A){if(A){if(A instanceof ur)return A;if(typeof A=="string"){var O=dr(A);if(O)return new ur(O[0]/255*O[3],O[1]/255*O[3],O[2]/255*O[3],O[3])}}},ur.prototype.toString=function(){var A=this.toArray(),O=A[0],X=A[1],ie=A[2],pe=A[3];return"rgba("+Math.round(O)+","+Math.round(X)+","+Math.round(ie)+","+pe+")"},ur.prototype.toArray=function(){var A=this.r,O=this.g,X=this.b,ie=this.a;return ie===0?[0,0,0,0]:[255*A/ie,255*O/ie,255*X/ie,ie]},ur.black=new ur(0,0,0,1),ur.white=new ur(1,1,1,1),ur.transparent=new ur(0,0,0,0),ur.red=new ur(1,0,0,1);var cr=function(A,O,X){this.sensitivity=A?O?"variant":"case":O?"accent":"base",this.locale=X,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};cr.prototype.compare=function(A,O){return this.collator.compare(A,O)},cr.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var mr=function(A,O,X,ie,pe){this.text=A,this.image=O,this.scale=X,this.fontStack=ie,this.textColor=pe},Dr=function(A){this.sections=A};Dr.fromString=function(A){return new Dr([new mr(A,null,null,null,null)])},Dr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(A){return A.text.length!==0||A.image&&A.image.name.length!==0})},Dr.factory=function(A){return A instanceof Dr?A:Dr.fromString(A)},Dr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(A){return A.text}).join("")},Dr.prototype.serialize=function(){for(var A=["format"],O=0,X=this.sections;O<X.length;O+=1){var ie=X[O];if(ie.image)A.push(["image",ie.image.name]);else{A.push(ie.text);var pe={};ie.fontStack&&(pe["text-font"]=["literal",ie.fontStack.split(",")]),ie.scale&&(pe["font-scale"]=ie.scale),ie.textColor&&(pe["text-color"]=["rgba"].concat(ie.textColor.toArray())),A.push(pe)}}return A};var yr=function(A){this.name=A.name,this.available=A.available};function Br(A,O,X,ie){return typeof A=="number"&&A>=0&&A<=255&&typeof O=="number"&&O>=0&&O<=255&&typeof X=="number"&&X>=0&&X<=255?ie===void 0||typeof ie=="number"&&ie>=0&&ie<=1?null:"Invalid rgba value ["+[A,O,X,ie].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof ie=="number"?[A,O,X,ie]:[A,O,X]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Kr(A){if(A===null||typeof A=="string"||typeof A=="boolean"||typeof A=="number"||A instanceof ur||A instanceof cr||A instanceof Dr||A instanceof yr)return!0;if(Array.isArray(A)){for(var O=0,X=A;O<X.length;O+=1)if(!Kr(X[O]))return!1;return!0}if(typeof A=="object"){for(var ie in A)if(!Kr(A[ie]))return!1;return!0}return!1}function an(A){if(A===null)return Pt;if(typeof A=="string")return mt;if(typeof A=="boolean")return Dt;if(typeof A=="number")return Ke;if(A instanceof ur)return Bt;if(A instanceof cr)return ct;if(A instanceof Dr)return wt;if(A instanceof yr)return Rt;if(Array.isArray(A)){for(var O,X=A.length,ie=0,pe=A;ie<pe.length;ie+=1){var ye=an(pe[ie]);if(O){if(O===ye)continue;O=Re;break}O=ye}return Vt(O||Re,X)}return Zt}function Ln(A){var O=typeof A;return A===null?"":O==="string"||O==="number"||O==="boolean"?String(A):A instanceof ur||A instanceof Dr||A instanceof yr?A.toString():JSON.stringify(A)}yr.prototype.toString=function(){return this.name},yr.fromString=function(A){return A?new yr({name:A,available:!1}):null},yr.prototype.serialize=function(){return["image",this.name]};var Pn=function(A,O){this.type=A,this.value=O};Pn.parse=function(A,O){if(A.length!==2)return O.error("'literal' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(!Kr(A[1]))return O.error("invalid value");var X=A[1],ie=an(X),pe=O.expectedType;return ie.kind!=="array"||ie.N!==0||!pe||pe.kind!=="array"||typeof pe.N=="number"&&pe.N!==0||(ie=pe),new Pn(ie,X)},Pn.prototype.evaluate=function(){return this.value},Pn.prototype.eachChild=function(){},Pn.prototype.outputDefined=function(){return!0},Pn.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ur?["rgba"].concat(this.value.toArray()):this.value instanceof Dr?this.value.serialize():this.value};var An=function(A){this.name="ExpressionEvaluationError",this.message=A};An.prototype.toJSON=function(){return this.message};var tn={string:mt,number:Ke,boolean:Dt,object:Zt},zr=function(A,O){this.type=A,this.args=O};zr.parse=function(A,O){if(A.length<2)return O.error("Expected at least one argument.");var X,ie=1,pe=A[0];if(pe==="array"){var ye,Le;if(A.length>2){var Ne=A[1];if(typeof Ne!="string"||!(Ne in tn)||Ne==="object")return O.error('The item type argument of "array" must be one of string, number, boolean',1);ye=tn[Ne],ie++}else ye=Re;if(A.length>3){if(A[2]!==null&&(typeof A[2]!="number"||A[2]<0||A[2]!==Math.floor(A[2])))return O.error('The length argument to "array" must be a positive integer literal',2);Le=A[2],ie++}X=Vt(ye,Le)}else X=tn[pe];for(var Qe=[];ie<A.length;ie++){var ht=O.parse(A[ie],ie,Re);if(!ht)return null;Qe.push(ht)}return new zr(X,Qe)},zr.prototype.evaluate=function(A){for(var O=0;O<this.args.length;O++){var X=this.args[O].evaluate(A);if(!Jt(this.type,an(X)))return X;if(O===this.args.length-1)throw new An("Expected value to be of type "+rr(this.type)+", but found "+rr(an(X))+" instead.")}return null},zr.prototype.eachChild=function(A){this.args.forEach(A)},zr.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},zr.prototype.serialize=function(){var A=this.type,O=[A.kind];if(A.kind==="array"){var X=A.itemType;if(X.kind==="string"||X.kind==="number"||X.kind==="boolean"){O.push(X.kind);var ie=A.N;(typeof ie=="number"||this.args.length>1)&&O.push(ie)}}return O.concat(this.args.map(function(pe){return pe.serialize()}))};var Ar=function(A){this.type=wt,this.sections=A};Ar.parse=function(A,O){if(A.length<2)return O.error("Expected at least one argument.");var X=A[1];if(!Array.isArray(X)&&typeof X=="object")return O.error("First argument must be an image or text section.");for(var ie=[],pe=!1,ye=1;ye<=A.length-1;++ye){var Le=A[ye];if(pe&&typeof Le=="object"&&!Array.isArray(Le)){pe=!1;var Ne=null;if(Le["font-scale"]&&!(Ne=O.parse(Le["font-scale"],1,Ke)))return null;var Qe=null;if(Le["text-font"]&&!(Qe=O.parse(Le["text-font"],1,Vt(mt))))return null;var ht=null;if(Le["text-color"]&&!(ht=O.parse(Le["text-color"],1,Bt)))return null;var vt=ie[ie.length-1];vt.scale=Ne,vt.font=Qe,vt.textColor=ht}else{var jt=O.parse(A[ye],1,Re);if(!jt)return null;var Kt=jt.type.kind;if(Kt!=="string"&&Kt!=="value"&&Kt!=="null"&&Kt!=="resolvedImage")return O.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");pe=!0,ie.push({content:jt,scale:null,font:null,textColor:null})}}return new Ar(ie)},Ar.prototype.evaluate=function(A){return new Dr(this.sections.map(function(O){var X=O.content.evaluate(A);return an(X)===Rt?new mr("",X,null,null,null):new mr(Ln(X),null,O.scale?O.scale.evaluate(A):null,O.font?O.font.evaluate(A).join(","):null,O.textColor?O.textColor.evaluate(A):null)}))},Ar.prototype.eachChild=function(A){for(var O=0,X=this.sections;O<X.length;O+=1){var ie=X[O];A(ie.content),ie.scale&&A(ie.scale),ie.font&&A(ie.font),ie.textColor&&A(ie.textColor)}},Ar.prototype.outputDefined=function(){return!1},Ar.prototype.serialize=function(){for(var A=["format"],O=0,X=this.sections;O<X.length;O+=1){var ie=X[O];A.push(ie.content.serialize());var pe={};ie.scale&&(pe["font-scale"]=ie.scale.serialize()),ie.font&&(pe["text-font"]=ie.font.serialize()),ie.textColor&&(pe["text-color"]=ie.textColor.serialize()),A.push(pe)}return A};var qr=function(A){this.type=Rt,this.input=A};qr.parse=function(A,O){if(A.length!==2)return O.error("Expected two arguments.");var X=O.parse(A[1],1,mt);return X?new qr(X):O.error("No image name provided.")},qr.prototype.evaluate=function(A){var O=this.input.evaluate(A),X=yr.fromString(O);return X&&A.availableImages&&(X.available=A.availableImages.indexOf(O)>-1),X},qr.prototype.eachChild=function(A){A(this.input)},qr.prototype.outputDefined=function(){return!1},qr.prototype.serialize=function(){return["image",this.input.serialize()]};var On={"to-boolean":Dt,"to-color":Bt,"to-number":Ke,"to-string":mt},Fr=function(A,O){this.type=A,this.args=O};Fr.parse=function(A,O){if(A.length<2)return O.error("Expected at least one argument.");var X=A[0];if((X==="to-boolean"||X==="to-string")&&A.length!==2)return O.error("Expected one argument.");for(var ie=On[X],pe=[],ye=1;ye<A.length;ye++){var Le=O.parse(A[ye],ye,Re);if(!Le)return null;pe.push(Le)}return new Fr(ie,pe)},Fr.prototype.evaluate=function(A){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(A));if(this.type.kind==="color"){for(var O,X,ie=0,pe=this.args;ie<pe.length;ie+=1){if(X=null,(O=pe[ie].evaluate(A))instanceof ur)return O;if(typeof O=="string"){var ye=A.parseColor(O);if(ye)return ye}else if(Array.isArray(O)&&!(X=O.length<3||O.length>4?"Invalid rbga value "+JSON.stringify(O)+": expected an array containing either three or four numeric values.":Br(O[0],O[1],O[2],O[3])))return new ur(O[0]/255,O[1]/255,O[2]/255,O[3])}throw new An(X||"Could not parse color from value '"+(typeof O=="string"?O:String(JSON.stringify(O)))+"'")}if(this.type.kind==="number"){for(var Le=null,Ne=0,Qe=this.args;Ne<Qe.length;Ne+=1){if((Le=Qe[Ne].evaluate(A))===null)return 0;var ht=Number(Le);if(!isNaN(ht))return ht}throw new An("Could not convert "+JSON.stringify(Le)+" to number.")}return this.type.kind==="formatted"?Dr.fromString(Ln(this.args[0].evaluate(A))):this.type.kind==="resolvedImage"?yr.fromString(Ln(this.args[0].evaluate(A))):Ln(this.args[0].evaluate(A))},Fr.prototype.eachChild=function(A){this.args.forEach(A)},Fr.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},Fr.prototype.serialize=function(){if(this.type.kind==="formatted")return new Ar([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new qr(this.args[0]).serialize();var A=["to-"+this.type.kind];return this.eachChild(function(O){A.push(O.serialize())}),A};var on=["Unknown","Point","LineString","Polygon"],Mn=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Mn.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Mn.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?on[this.feature.type]:this.feature.type:null},Mn.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Mn.prototype.canonicalID=function(){return this.canonical},Mn.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Mn.prototype.parseColor=function(A){var O=this._parseColorCache[A];return O||(O=this._parseColorCache[A]=ur.parse(A)),O};var bn=function(A,O,X,ie){this.name=A,this.type=O,this._evaluate=X,this.args=ie};bn.prototype.evaluate=function(A){return this._evaluate(A,this.args)},bn.prototype.eachChild=function(A){this.args.forEach(A)},bn.prototype.outputDefined=function(){return!1},bn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(A){return A.serialize()}))},bn.parse=function(A,O){var X,ie=A[0],pe=bn.definitions[ie];if(!pe)return O.error('Unknown expression "'+ie+'". If you wanted a literal array, use ["literal", [...]].',0);for(var ye=Array.isArray(pe)?pe[0]:pe.type,Le=Array.isArray(pe)?[[pe[1],pe[2]]]:pe.overloads,Ne=Le.filter(function(ii){var Xn=ii[0];return!Array.isArray(Xn)||Xn.length===A.length-1}),Qe=null,ht=0,vt=Ne;ht<vt.length;ht+=1){var jt=vt[ht],Kt=jt[0],Wt=jt[1];Qe=new gn(O.registry,O.path,null,O.scope);for(var ar=[],vr=!1,Cr=1;Cr<A.length;Cr++){var Lr=A[Cr],Nr=Array.isArray(Kt)?Kt[Cr-1]:Kt.type,jr=Qe.parse(Lr,1+ar.length,Nr);if(!jr){vr=!0;break}ar.push(jr)}if(!vr)if(Array.isArray(Kt)&&Kt.length!==ar.length)Qe.error("Expected "+Kt.length+" arguments, but found "+ar.length+" instead.");else{for(var Yr=0;Yr<ar.length;Yr++){var hn=Array.isArray(Kt)?Kt[Yr]:Kt.type,xn=ar[Yr];Qe.concat(Yr+1).checkSubtype(hn,xn.type)}if(Qe.errors.length===0)return new bn(ie,ye,Wt,ar)}}if(Ne.length===1)(X=O.errors).push.apply(X,Qe.errors);else{for(var Nn=(Ne.length?Ne:Le).map(function(ii){var Xn,fi=ii[0];return Xn=fi,Array.isArray(Xn)?"("+Xn.map(rr).join(", ")+")":"("+rr(Xn.type)+"...)"}).join(" | "),Bn=[],Gn=1;Gn<A.length;Gn++){var ni=O.parse(A[Gn],1+Bn.length);if(!ni)return null;Bn.push(rr(ni.type))}O.error("Expected arguments of type "+Nn+", but found ("+Bn.join(", ")+") instead.")}return null},bn.register=function(A,O){for(var X in bn.definitions=O,O)A[X]=bn};var Dn=function(A,O,X){this.type=ct,this.locale=X,this.caseSensitive=A,this.diacriticSensitive=O};Dn.parse=function(A,O){if(A.length!==2)return O.error("Expected one argument.");var X=A[1];if(typeof X!="object"||Array.isArray(X))return O.error("Collator options argument must be an object.");var ie=O.parse(X["case-sensitive"]!==void 0&&X["case-sensitive"],1,Dt);if(!ie)return null;var pe=O.parse(X["diacritic-sensitive"]!==void 0&&X["diacritic-sensitive"],1,Dt);if(!pe)return null;var ye=null;return X.locale&&!(ye=O.parse(X.locale,1,mt))?null:new Dn(ie,pe,ye)},Dn.prototype.evaluate=function(A){return new cr(this.caseSensitive.evaluate(A),this.diacriticSensitive.evaluate(A),this.locale?this.locale.evaluate(A):null)},Dn.prototype.eachChild=function(A){A(this.caseSensitive),A(this.diacriticSensitive),this.locale&&A(this.locale)},Dn.prototype.outputDefined=function(){return!1},Dn.prototype.serialize=function(){var A={};return A["case-sensitive"]=this.caseSensitive.serialize(),A["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(A.locale=this.locale.serialize()),["collator",A]};function tr(A,O){A[0]=Math.min(A[0],O[0]),A[1]=Math.min(A[1],O[1]),A[2]=Math.max(A[2],O[0]),A[3]=Math.max(A[3],O[1])}function Ot(A,O){return!(A[0]<=O[0])&&!(A[2]>=O[2])&&!(A[1]<=O[1])&&!(A[3]>=O[3])}function Ht(A,O){var X,ie=(180+A[0])/360,pe=(X=A[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+X*Math.PI/360)))/360),ye=Math.pow(2,O.z);return[Math.round(ie*ye*8192),Math.round(pe*ye*8192)]}function fr(A,O,X){return O[1]>A[1]!=X[1]>A[1]&&A[0]<(X[0]-O[0])*(A[1]-O[1])/(X[1]-O[1])+O[0]}function Tr(A,O){for(var X,ie,pe,ye,Le,Ne,Qe,ht=!1,vt=0,jt=O.length;vt<jt;vt++)for(var Kt=O[vt],Wt=0,ar=Kt.length;Wt<ar-1;Wt++){if(X=A,ie=Kt[Wt],pe=Kt[Wt+1],ye=void 0,Le=void 0,Ne=void 0,Qe=void 0,ye=X[0]-ie[0],Le=X[1]-ie[1],Ne=X[0]-pe[0],Qe=X[1]-pe[1],ye*Qe-Ne*Le==0&&ye*Ne<=0&&Le*Qe<=0)return!1;fr(A,Kt[Wt],Kt[Wt+1])&&(ht=!ht)}return ht}function Wr(A,O){for(var X=0;X<O.length;X++)if(Tr(A,O[X]))return!0;return!1}function Gr(A,O,X,ie){var pe=A[0]-X[0],ye=A[1]-X[1],Le=O[0]-X[0],Ne=O[1]-X[1],Qe=ie[0]-X[0],ht=ie[1]-X[1],vt=pe*ht-Qe*ye,jt=Le*ht-Qe*Ne;return vt>0&&jt<0||vt<0&&jt>0}function wr(A,O,X){for(var ie=0,pe=X;ie<pe.length;ie+=1)for(var ye=pe[ie],Le=0;Le<ye.length-1;++Le)if(Ne=A,Qe=O,ht=ye[Le],vt=ye[Le+1],jt=void 0,Kt=void 0,Wt=void 0,ar=void 0,Wt=[Qe[0]-Ne[0],Qe[1]-Ne[1]],ar=[vt[0]-ht[0],vt[1]-ht[1]],(jt=ar)[0]*(Kt=Wt)[1]-jt[1]*Kt[0]!=0&&Gr(Ne,Qe,ht,vt)&&Gr(ht,vt,Ne,Qe))return!0;var Ne,Qe,ht,vt,jt,Kt,Wt,ar;return!1}function br(A,O){for(var X=0;X<A.length;++X)if(!Tr(A[X],O))return!1;for(var ie=0;ie<A.length-1;++ie)if(wr(A[ie],A[ie+1],O))return!1;return!0}function Sr(A,O){for(var X=0;X<O.length;X++)if(br(A,O[X]))return!0;return!1}function Ir(A,O,X){for(var ie=[],pe=0;pe<A.length;pe++){for(var ye=[],Le=0;Le<A[pe].length;Le++){var Ne=Ht(A[pe][Le],X);tr(O,Ne),ye.push(Ne)}ie.push(ye)}return ie}function Er(A,O,X){for(var ie=[],pe=0;pe<A.length;pe++){var ye=Ir(A[pe],O,X);ie.push(ye)}return ie}function Xr(A,O,X,ie){if(A[0]<X[0]||A[0]>X[2]){var pe=.5*ie,ye=A[0]-X[0]>pe?-ie:X[0]-A[0]>pe?ie:0;ye===0&&(ye=A[0]-X[2]>pe?-ie:X[2]-A[0]>pe?ie:0),A[0]+=ye}tr(O,A)}function fn(A,O,X,ie){for(var pe=8192*Math.pow(2,ie.z),ye=[8192*ie.x,8192*ie.y],Le=[],Ne=0,Qe=A;Ne<Qe.length;Ne+=1)for(var ht=0,vt=Qe[Ne];ht<vt.length;ht+=1){var jt=vt[ht],Kt=[jt.x+ye[0],jt.y+ye[1]];Xr(Kt,O,X,pe),Le.push(Kt)}return Le}function _n(A,O,X,ie){for(var pe,ye=8192*Math.pow(2,ie.z),Le=[8192*ie.x,8192*ie.y],Ne=[],Qe=0,ht=A;Qe<ht.length;Qe+=1){for(var vt=[],jt=0,Kt=ht[Qe];jt<Kt.length;jt+=1){var Wt=Kt[jt],ar=[Wt.x+Le[0],Wt.y+Le[1]];tr(O,ar),vt.push(ar)}Ne.push(vt)}if(O[2]-O[0]<=ye/2){(pe=O)[0]=pe[1]=1/0,pe[2]=pe[3]=-1/0;for(var vr=0,Cr=Ne;vr<Cr.length;vr+=1)for(var Lr=0,Nr=Cr[vr];Lr<Nr.length;Lr+=1)Xr(Nr[Lr],O,X,ye)}return Ne}var en=function(A,O){this.type=Dt,this.geojson=A,this.geometries=O};function yn(A){if(A instanceof bn&&(A.name==="get"&&A.args.length===1||A.name==="feature-state"||A.name==="has"&&A.args.length===1||A.name==="properties"||A.name==="geometry-type"||A.name==="id"||/^filter-/.test(A.name))||A instanceof en)return!1;var O=!0;return A.eachChild(function(X){O&&!yn(X)&&(O=!1)}),O}function Vr(A){if(A instanceof bn&&A.name==="feature-state")return!1;var O=!0;return A.eachChild(function(X){O&&!Vr(X)&&(O=!1)}),O}function Ur(A,O){if(A instanceof bn&&O.indexOf(A.name)>=0)return!1;var X=!0;return A.eachChild(function(ie){X&&!Ur(ie,O)&&(X=!1)}),X}en.parse=function(A,O){if(A.length!==2)return O.error("'within' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(Kr(A[1])){var X=A[1];if(X.type==="FeatureCollection")for(var ie=0;ie<X.features.length;++ie){var pe=X.features[ie].geometry.type;if(pe==="Polygon"||pe==="MultiPolygon")return new en(X,X.features[ie].geometry)}else if(X.type==="Feature"){var ye=X.geometry.type;if(ye==="Polygon"||ye==="MultiPolygon")return new en(X,X.geometry)}else if(X.type==="Polygon"||X.type==="MultiPolygon")return new en(X,X)}return O.error("'within' expression requires valid geojson object that contains polygon geometry type.")},en.prototype.evaluate=function(A){if(A.geometry()!=null&&A.canonicalID()!=null){if(A.geometryType()==="Point")return function(O,X){var ie=[1/0,1/0,-1/0,-1/0],pe=[1/0,1/0,-1/0,-1/0],ye=O.canonicalID();if(X.type==="Polygon"){var Le=Ir(X.coordinates,pe,ye),Ne=fn(O.geometry(),ie,pe,ye);if(!Ot(ie,pe))return!1;for(var Qe=0,ht=Ne;Qe<ht.length;Qe+=1)if(!Tr(ht[Qe],Le))return!1}if(X.type==="MultiPolygon"){var vt=Er(X.coordinates,pe,ye),jt=fn(O.geometry(),ie,pe,ye);if(!Ot(ie,pe))return!1;for(var Kt=0,Wt=jt;Kt<Wt.length;Kt+=1)if(!Wr(Wt[Kt],vt))return!1}return!0}(A,this.geometries);if(A.geometryType()==="LineString")return function(O,X){var ie=[1/0,1/0,-1/0,-1/0],pe=[1/0,1/0,-1/0,-1/0],ye=O.canonicalID();if(X.type==="Polygon"){var Le=Ir(X.coordinates,pe,ye),Ne=_n(O.geometry(),ie,pe,ye);if(!Ot(ie,pe))return!1;for(var Qe=0,ht=Ne;Qe<ht.length;Qe+=1)if(!br(ht[Qe],Le))return!1}if(X.type==="MultiPolygon"){var vt=Er(X.coordinates,pe,ye),jt=_n(O.geometry(),ie,pe,ye);if(!Ot(ie,pe))return!1;for(var Kt=0,Wt=jt;Kt<Wt.length;Kt+=1)if(!Sr(Wt[Kt],vt))return!1}return!0}(A,this.geometries)}return!1},en.prototype.eachChild=function(){},en.prototype.outputDefined=function(){return!0},en.prototype.serialize=function(){return["within",this.geojson]};var ln=function(A,O){this.type=O.type,this.name=A,this.boundExpression=O};ln.parse=function(A,O){if(A.length!==2||typeof A[1]!="string")return O.error("'var' expression requires exactly one string literal argument.");var X=A[1];return O.scope.has(X)?new ln(X,O.scope.get(X)):O.error('Unknown variable "'+X+'". Make sure "'+X+'" has been bound in an enclosing "let" expression before using it.',1)},ln.prototype.evaluate=function(A){return this.boundExpression.evaluate(A)},ln.prototype.eachChild=function(){},ln.prototype.outputDefined=function(){return!1},ln.prototype.serialize=function(){return["var",this.name]};var gn=function(A,O,X,ie,pe){O===void 0&&(O=[]),ie===void 0&&(ie=new Ct),pe===void 0&&(pe=[]),this.registry=A,this.path=O,this.key=O.map(function(ye){return"["+ye+"]"}).join(""),this.scope=ie,this.errors=pe,this.expectedType=X};function Sn(A,O){for(var X,ie,pe=A.length-1,ye=0,Le=pe,Ne=0;ye<=Le;)if(X=A[Ne=Math.floor((ye+Le)/2)],ie=A[Ne+1],X<=O){if(Ne===pe||O<ie)return Ne;ye=Ne+1}else{if(!(X>O))throw new An("Input is not a number.");Le=Ne-1}return 0}gn.prototype.parse=function(A,O,X,ie,pe){return pe===void 0&&(pe={}),O?this.concat(O,X,ie)._parse(A,pe):this._parse(A,pe)},gn.prototype._parse=function(A,O){function X(ht,vt,jt){return jt==="assert"?new zr(vt,[ht]):jt==="coerce"?new Fr(vt,[ht]):ht}if(A!==null&&typeof A!="string"&&typeof A!="boolean"&&typeof A!="number"||(A=["literal",A]),Array.isArray(A)){if(A.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ie=A[0];if(typeof ie!="string")return this.error("Expression name must be a string, but found "+typeof ie+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var pe=this.registry[ie];if(pe){var ye=pe.parse(A,this);if(!ye)return null;if(this.expectedType){var Le=this.expectedType,Ne=ye.type;if(Le.kind!=="string"&&Le.kind!=="number"&&Le.kind!=="boolean"&&Le.kind!=="object"&&Le.kind!=="array"||Ne.kind!=="value")if(Le.kind!=="color"&&Le.kind!=="formatted"&&Le.kind!=="resolvedImage"||Ne.kind!=="value"&&Ne.kind!=="string"){if(this.checkSubtype(Le,Ne))return null}else ye=X(ye,Le,O.typeAnnotation||"coerce");else ye=X(ye,Le,O.typeAnnotation||"assert")}if(!(ye instanceof Pn)&&ye.type.kind!=="resolvedImage"&&function ht(vt){if(vt instanceof ln)return ht(vt.boundExpression);if(vt instanceof bn&&vt.name==="error"||vt instanceof Dn||vt instanceof en)return!1;var jt=vt instanceof Fr||vt instanceof zr,Kt=!0;return vt.eachChild(function(Wt){Kt=jt?Kt&&ht(Wt):Kt&&Wt instanceof Pn}),Kt?yn(vt)&&Ur(vt,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}(ye)){var Qe=new Mn;try{ye=new Pn(ye.type,ye.evaluate(Qe))}catch(ht){return this.error(ht.message),null}}return ye}return this.error('Unknown expression "'+ie+'". If you wanted a literal array, use ["literal", [...]].',0)}return A===void 0?this.error("'undefined' value invalid. Use null instead."):typeof A=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof A+" instead.")},gn.prototype.concat=function(A,O,X){var ie=typeof A=="number"?this.path.concat(A):this.path,pe=X?this.scope.concat(X):this.scope;return new gn(this.registry,ie,O||null,pe,this.errors)},gn.prototype.error=function(A){for(var O=[],X=arguments.length-1;X-- >0;)O[X]=arguments[X+1];var ie=""+this.key+O.map(function(pe){return"["+pe+"]"}).join("");this.errors.push(new lt(ie,A))},gn.prototype.checkSubtype=function(A,O){var X=Jt(A,O);return X&&this.error(X),X};var oi=function(A,O,X){this.type=A,this.input=O,this.labels=[],this.outputs=[];for(var ie=0,pe=X;ie<pe.length;ie+=1){var ye=pe[ie],Le=ye[0],Ne=ye[1];this.labels.push(Le),this.outputs.push(Ne)}};function Yn(A,O,X){return A*(1-X)+O*X}oi.parse=function(A,O){if(A.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return O.error("Expected an even number of arguments.");var X=O.parse(A[1],1,Ke);if(!X)return null;var ie=[],pe=null;O.expectedType&&O.expectedType.kind!=="value"&&(pe=O.expectedType);for(var ye=1;ye<A.length;ye+=2){var Le=ye===1?-1/0:A[ye],Ne=A[ye+1],Qe=ye,ht=ye+1;if(typeof Le!="number")return O.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Qe);if(ie.length&&ie[ie.length-1][0]>=Le)return O.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Qe);var vt=O.parse(Ne,ht,pe);if(!vt)return null;pe=pe||vt.type,ie.push([Le,vt])}return new oi(pe,X,ie)},oi.prototype.evaluate=function(A){var O=this.labels,X=this.outputs;if(O.length===1)return X[0].evaluate(A);var ie=this.input.evaluate(A);if(ie<=O[0])return X[0].evaluate(A);var pe=O.length;return ie>=O[pe-1]?X[pe-1].evaluate(A):X[Sn(O,ie)].evaluate(A)},oi.prototype.eachChild=function(A){A(this.input);for(var O=0,X=this.outputs;O<X.length;O+=1)A(X[O])},oi.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},oi.prototype.serialize=function(){for(var A=["step",this.input.serialize()],O=0;O<this.labels.length;O++)O>0&&A.push(this.labels[O]),A.push(this.outputs[O].serialize());return A};var vn=Object.freeze({__proto__:null,number:Yn,color:function(A,O,X){return new ur(Yn(A.r,O.r,X),Yn(A.g,O.g,X),Yn(A.b,O.b,X),Yn(A.a,O.a,X))},array:function(A,O,X){return A.map(function(ie,pe){return Yn(ie,O[pe],X)})}}),ri=6/29,hi=3*ri*ri,Xi=Math.PI/180,Da=180/Math.PI;function ia(A){return A>.008856451679035631?Math.pow(A,1/3):A/hi+4/29}function _a(A){return A>ri?A*A*A:hi*(A-4/29)}function Mi(A){return 255*(A<=.0031308?12.92*A:1.055*Math.pow(A,1/2.4)-.055)}function ji(A){return(A/=255)<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function mo(A){var O=ji(A.r),X=ji(A.g),ie=ji(A.b),pe=ia((.4124564*O+.3575761*X+.1804375*ie)/.95047),ye=ia((.2126729*O+.7151522*X+.072175*ie)/1);return{l:116*ye-16,a:500*(pe-ye),b:200*(ye-ia((.0193339*O+.119192*X+.9503041*ie)/1.08883)),alpha:A.a}}function Ho(A){var O=(A.l+16)/116,X=isNaN(A.a)?O:O+A.a/500,ie=isNaN(A.b)?O:O-A.b/200;return O=1*_a(O),X=.95047*_a(X),ie=1.08883*_a(ie),new ur(Mi(3.2404542*X-1.5371385*O-.4985314*ie),Mi(-.969266*X+1.8760108*O+.041556*ie),Mi(.0556434*X-.2040259*O+1.0572252*ie),A.alpha)}function es(A,O,X){var ie=O-A;return A+X*(ie>180||ie<-180?ie-360*Math.round(ie/360):ie)}var Xa={forward:mo,reverse:Ho,interpolate:function(A,O,X){return{l:Yn(A.l,O.l,X),a:Yn(A.a,O.a,X),b:Yn(A.b,O.b,X),alpha:Yn(A.alpha,O.alpha,X)}}},$a={forward:function(A){var O=mo(A),X=O.l,ie=O.a,pe=O.b,ye=Math.atan2(pe,ie)*Da;return{h:ye<0?ye+360:ye,c:Math.sqrt(ie*ie+pe*pe),l:X,alpha:A.a}},reverse:function(A){var O=A.h*Xi,X=A.c;return Ho({l:A.l,a:Math.cos(O)*X,b:Math.sin(O)*X,alpha:A.alpha})},interpolate:function(A,O,X){return{h:es(A.h,O.h,X),c:Yn(A.c,O.c,X),l:Yn(A.l,O.l,X),alpha:Yn(A.alpha,O.alpha,X)}}},qo=Object.freeze({__proto__:null,lab:Xa,hcl:$a}),Hi=function(A,O,X,ie,pe){this.type=A,this.operator=O,this.interpolation=X,this.input=ie,this.labels=[],this.outputs=[];for(var ye=0,Le=pe;ye<Le.length;ye+=1){var Ne=Le[ye],Qe=Ne[0],ht=Ne[1];this.labels.push(Qe),this.outputs.push(ht)}};function Lo(A,O,X,ie){var pe=ie-X,ye=A-X;return pe===0?0:O===1?ye/pe:(Math.pow(O,ye)-1)/(Math.pow(O,pe)-1)}Hi.interpolationFactor=function(A,O,X,ie){var pe=0;if(A.name==="exponential")pe=Lo(O,A.base,X,ie);else if(A.name==="linear")pe=Lo(O,1,X,ie);else if(A.name==="cubic-bezier"){var ye=A.controlPoints;pe=new t(ye[0],ye[1],ye[2],ye[3]).solve(Lo(O,1,X,ie))}return pe},Hi.parse=function(A,O){var X=A[0],ie=A[1],pe=A[2],ye=A.slice(3);if(!Array.isArray(ie)||ie.length===0)return O.error("Expected an interpolation type expression.",1);if(ie[0]==="linear")ie={name:"linear"};else if(ie[0]==="exponential"){var Le=ie[1];if(typeof Le!="number")return O.error("Exponential interpolation requires a numeric base.",1,1);ie={name:"exponential",base:Le}}else{if(ie[0]!=="cubic-bezier")return O.error("Unknown interpolation type "+String(ie[0]),1,0);var Ne=ie.slice(1);if(Ne.length!==4||Ne.some(function(Cr){return typeof Cr!="number"||Cr<0||Cr>1}))return O.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ie={name:"cubic-bezier",controlPoints:Ne}}if(A.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return O.error("Expected an even number of arguments.");if(!(pe=O.parse(pe,2,Ke)))return null;var Qe=[],ht=null;X==="interpolate-hcl"||X==="interpolate-lab"?ht=Bt:O.expectedType&&O.expectedType.kind!=="value"&&(ht=O.expectedType);for(var vt=0;vt<ye.length;vt+=2){var jt=ye[vt],Kt=ye[vt+1],Wt=vt+3,ar=vt+4;if(typeof jt!="number")return O.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Wt);if(Qe.length&&Qe[Qe.length-1][0]>=jt)return O.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Wt);var vr=O.parse(Kt,ar,ht);if(!vr)return null;ht=ht||vr.type,Qe.push([jt,vr])}return ht.kind==="number"||ht.kind==="color"||ht.kind==="array"&&ht.itemType.kind==="number"&&typeof ht.N=="number"?new Hi(ht,X,ie,pe,Qe):O.error("Type "+rr(ht)+" is not interpolatable.")},Hi.prototype.evaluate=function(A){var O=this.labels,X=this.outputs;if(O.length===1)return X[0].evaluate(A);var ie=this.input.evaluate(A);if(ie<=O[0])return X[0].evaluate(A);var pe=O.length;if(ie>=O[pe-1])return X[pe-1].evaluate(A);var ye=Sn(O,ie),Le=O[ye],Ne=O[ye+1],Qe=Hi.interpolationFactor(this.interpolation,ie,Le,Ne),ht=X[ye].evaluate(A),vt=X[ye+1].evaluate(A);return this.operator==="interpolate"?vn[this.type.kind.toLowerCase()](ht,vt,Qe):this.operator==="interpolate-hcl"?$a.reverse($a.interpolate($a.forward(ht),$a.forward(vt),Qe)):Xa.reverse(Xa.interpolate(Xa.forward(ht),Xa.forward(vt),Qe))},Hi.prototype.eachChild=function(A){A(this.input);for(var O=0,X=this.outputs;O<X.length;O+=1)A(X[O])},Hi.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},Hi.prototype.serialize=function(){var A;A=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var O=[this.operator,A,this.input.serialize()],X=0;X<this.labels.length;X++)O.push(this.labels[X],this.outputs[X].serialize());return O};var go=function(A,O){this.type=A,this.args=O};go.parse=function(A,O){if(A.length<2)return O.error("Expectected at least one argument.");var X=null,ie=O.expectedType;ie&&ie.kind!=="value"&&(X=ie);for(var pe=[],ye=0,Le=A.slice(1);ye<Le.length;ye+=1){var Ne=Le[ye],Qe=O.parse(Ne,1+pe.length,X,void 0,{typeAnnotation:"omit"});if(!Qe)return null;X=X||Qe.type,pe.push(Qe)}var ht=ie&&pe.some(function(vt){return Jt(ie,vt.type)});return new go(ht?Re:X,pe)},go.prototype.evaluate=function(A){for(var O,X=null,ie=0,pe=0,ye=this.args;pe<ye.length&&(ie++,(X=ye[pe].evaluate(A))&&X instanceof yr&&!X.available&&(O||(O=X.name),X=null,ie===this.args.length&&(X=O)),X===null);pe+=1);return X},go.prototype.eachChild=function(A){this.args.forEach(A)},go.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},go.prototype.serialize=function(){var A=["coalesce"];return this.eachChild(function(O){A.push(O.serialize())}),A};var wa=function(A,O){this.type=O.type,this.bindings=[].concat(A),this.result=O};wa.prototype.evaluate=function(A){return this.result.evaluate(A)},wa.prototype.eachChild=function(A){for(var O=0,X=this.bindings;O<X.length;O+=1)A(X[O][1]);A(this.result)},wa.parse=function(A,O){if(A.length<4)return O.error("Expected at least 3 arguments, but found "+(A.length-1)+" instead.");for(var X=[],ie=1;ie<A.length-1;ie+=2){var pe=A[ie];if(typeof pe!="string")return O.error("Expected string, but found "+typeof pe+" instead.",ie);if(/[^a-zA-Z0-9_]/.test(pe))return O.error("Variable names must contain only alphanumeric characters or '_'.",ie);var ye=O.parse(A[ie+1],ie+1);if(!ye)return null;X.push([pe,ye])}var Le=O.parse(A[A.length-1],A.length-1,O.expectedType,X);return Le?new wa(X,Le):null},wa.prototype.outputDefined=function(){return this.result.outputDefined()},wa.prototype.serialize=function(){for(var A=["let"],O=0,X=this.bindings;O<X.length;O+=1){var ie=X[O],pe=ie[0],ye=ie[1];A.push(pe,ye.serialize())}return A.push(this.result.serialize()),A};var Qa=function(A,O,X){this.type=A,this.index=O,this.input=X};Qa.parse=function(A,O){if(A.length!==3)return O.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var X=O.parse(A[1],1,Ke),ie=O.parse(A[2],2,Vt(O.expectedType||Re));if(!X||!ie)return null;var pe=ie.type;return new Qa(pe.itemType,X,ie)},Qa.prototype.evaluate=function(A){var O=this.index.evaluate(A),X=this.input.evaluate(A);if(O<0)throw new An("Array index out of bounds: "+O+" < 0.");if(O>=X.length)throw new An("Array index out of bounds: "+O+" > "+(X.length-1)+".");if(O!==Math.floor(O))throw new An("Array index must be an integer, but found "+O+" instead.");return X[O]},Qa.prototype.eachChild=function(A){A(this.index),A(this.input)},Qa.prototype.outputDefined=function(){return!1},Qa.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var vo=function(A,O){this.type=Dt,this.needle=A,this.haystack=O};vo.parse=function(A,O){if(A.length!==3)return O.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var X=O.parse(A[1],1,Re),ie=O.parse(A[2],2,Re);return X&&ie?or(X.type,[Dt,mt,Ke,Pt,Re])?new vo(X,ie):O.error("Expected first argument to be of type boolean, string, number or null, but found "+rr(X.type)+" instead"):null},vo.prototype.evaluate=function(A){var O=this.needle.evaluate(A),X=this.haystack.evaluate(A);if(!X)return!1;if(!gr(O,["boolean","string","number","null"]))throw new An("Expected first argument to be of type boolean, string, number or null, but found "+rr(an(O))+" instead.");if(!gr(X,["string","array"]))throw new An("Expected second argument to be of type array or string, but found "+rr(an(X))+" instead.");return X.indexOf(O)>=0},vo.prototype.eachChild=function(A){A(this.needle),A(this.haystack)},vo.prototype.outputDefined=function(){return!0},vo.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Mo=function(A,O,X){this.type=Ke,this.needle=A,this.haystack=O,this.fromIndex=X};Mo.parse=function(A,O){if(A.length<=2||A.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var X=O.parse(A[1],1,Re),ie=O.parse(A[2],2,Re);if(!X||!ie)return null;if(!or(X.type,[Dt,mt,Ke,Pt,Re]))return O.error("Expected first argument to be of type boolean, string, number or null, but found "+rr(X.type)+" instead");if(A.length===4){var pe=O.parse(A[3],3,Ke);return pe?new Mo(X,ie,pe):null}return new Mo(X,ie)},Mo.prototype.evaluate=function(A){var O=this.needle.evaluate(A),X=this.haystack.evaluate(A);if(!gr(O,["boolean","string","number","null"]))throw new An("Expected first argument to be of type boolean, string, number or null, but found "+rr(an(O))+" instead.");if(!gr(X,["string","array"]))throw new An("Expected second argument to be of type array or string, but found "+rr(an(X))+" instead.");if(this.fromIndex){var ie=this.fromIndex.evaluate(A);return X.indexOf(O,ie)}return X.indexOf(O)},Mo.prototype.eachChild=function(A){A(this.needle),A(this.haystack),this.fromIndex&&A(this.fromIndex)},Mo.prototype.outputDefined=function(){return!1},Mo.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var A=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),A]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Na=function(A,O,X,ie,pe,ye){this.inputType=A,this.type=O,this.input=X,this.cases=ie,this.outputs=pe,this.otherwise=ye};Na.parse=function(A,O){if(A.length<5)return O.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if(A.length%2!=1)return O.error("Expected an even number of arguments.");var X,ie;O.expectedType&&O.expectedType.kind!=="value"&&(ie=O.expectedType);for(var pe={},ye=[],Le=2;Le<A.length-1;Le+=2){var Ne=A[Le],Qe=A[Le+1];Array.isArray(Ne)||(Ne=[Ne]);var ht=O.concat(Le);if(Ne.length===0)return ht.error("Expected at least one branch label.");for(var vt=0,jt=Ne;vt<jt.length;vt+=1){var Kt=jt[vt];if(typeof Kt!="number"&&typeof Kt!="string")return ht.error("Branch labels must be numbers or strings.");if(typeof Kt=="number"&&Math.abs(Kt)>Number.MAX_SAFE_INTEGER)return ht.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Kt=="number"&&Math.floor(Kt)!==Kt)return ht.error("Numeric branch labels must be integer values.");if(X){if(ht.checkSubtype(X,an(Kt)))return null}else X=an(Kt);if(pe[String(Kt)]!==void 0)return ht.error("Branch labels must be unique.");pe[String(Kt)]=ye.length}var Wt=O.parse(Qe,Le,ie);if(!Wt)return null;ie=ie||Wt.type,ye.push(Wt)}var ar=O.parse(A[1],1,Re);if(!ar)return null;var vr=O.parse(A[A.length-1],A.length-1,ie);return vr?ar.type.kind!=="value"&&O.concat(1).checkSubtype(X,ar.type)?null:new Na(X,ie,ar,pe,ye,vr):null},Na.prototype.evaluate=function(A){var O=this.input.evaluate(A);return(an(O)===this.inputType&&this.outputs[this.cases[O]]||this.otherwise).evaluate(A)},Na.prototype.eachChild=function(A){A(this.input),this.outputs.forEach(A),A(this.otherwise)},Na.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})&&this.otherwise.outputDefined()},Na.prototype.serialize=function(){for(var A=this,O=["match",this.input.serialize()],X=[],ie={},pe=0,ye=Object.keys(this.cases).sort();pe<ye.length;pe+=1){var Le=ye[pe];(jt=ie[this.cases[Le]])===void 0?(ie[this.cases[Le]]=X.length,X.push([this.cases[Le],[Le]])):X[jt][1].push(Le)}for(var Ne=function(Wt){return A.inputType.kind==="number"?Number(Wt):Wt},Qe=0,ht=X;Qe<ht.length;Qe+=1){var vt=ht[Qe],jt=vt[0],Kt=vt[1];Kt.length===1?O.push(Ne(Kt[0])):O.push(Kt.map(Ne)),O.push(this.outputs[outputIndex$1].serialize())}return O.push(this.otherwise.serialize()),O};var pa=function(A,O,X){this.type=A,this.branches=O,this.otherwise=X};pa.parse=function(A,O){if(A.length<4)return O.error("Expected at least 3 arguments, but found only "+(A.length-1)+".");if(A.length%2!=0)return O.error("Expected an odd number of arguments.");var X;O.expectedType&&O.expectedType.kind!=="value"&&(X=O.expectedType);for(var ie=[],pe=1;pe<A.length-1;pe+=2){var ye=O.parse(A[pe],pe,Dt);if(!ye)return null;var Le=O.parse(A[pe+1],pe+1,X);if(!Le)return null;ie.push([ye,Le]),X=X||Le.type}var Ne=O.parse(A[A.length-1],A.length-1,X);return Ne?new pa(X,ie,Ne):null},pa.prototype.evaluate=function(A){for(var O=0,X=this.branches;O<X.length;O+=1){var ie=X[O],pe=ie[0],ye=ie[1];if(pe.evaluate(A))return ye.evaluate(A)}return this.otherwise.evaluate(A)},pa.prototype.eachChild=function(A){for(var O=0,X=this.branches;O<X.length;O+=1){var ie=X[O],pe=ie[0],ye=ie[1];A(pe),A(ye)}A(this.otherwise)},pa.prototype.outputDefined=function(){return this.branches.every(function(A){return A[0],A[1].outputDefined()})&&this.otherwise.outputDefined()},pa.prototype.serialize=function(){var A=["case"];return this.eachChild(function(O){A.push(O.serialize())}),A};var Ja=function(A,O,X,ie){this.type=A,this.input=O,this.beginIndex=X,this.endIndex=ie};function Os(A,O){return A==="=="||A==="!="?O.kind==="boolean"||O.kind==="string"||O.kind==="number"||O.kind==="null"||O.kind==="value":O.kind==="string"||O.kind==="number"||O.kind==="value"}function Ns(A,O,X,ie){return ie.compare(O,X)===0}function qi(A,O,X){var ie=A!=="=="&&A!=="!=";return function(){function pe(ye,Le,Ne){this.type=Dt,this.lhs=ye,this.rhs=Le,this.collator=Ne,this.hasUntypedArgument=ye.type.kind==="value"||Le.type.kind==="value"}return pe.parse=function(ye,Le){if(ye.length!==3&&ye.length!==4)return Le.error("Expected two or three arguments.");var Ne=ye[0],Qe=Le.parse(ye[1],1,Re);if(!Qe)return null;if(!Os(Ne,Qe.type))return Le.concat(1).error('"'+Ne+`" comparisons are not supported for type '`+rr(Qe.type)+"'.");var ht=Le.parse(ye[2],2,Re);if(!ht)return null;if(!Os(Ne,ht.type))return Le.concat(2).error('"'+Ne+`" comparisons are not supported for type '`+rr(ht.type)+"'.");if(Qe.type.kind!==ht.type.kind&&Qe.type.kind!=="value"&&ht.type.kind!=="value")return Le.error("Cannot compare types '"+rr(Qe.type)+"' and '"+rr(ht.type)+"'.");ie&&(Qe.type.kind==="value"&&ht.type.kind!=="value"?Qe=new zr(ht.type,[Qe]):Qe.type.kind!=="value"&&ht.type.kind==="value"&&(ht=new zr(Qe.type,[ht])));var vt=null;if(ye.length===4){if(Qe.type.kind!=="string"&&ht.type.kind!=="string"&&Qe.type.kind!=="value"&&ht.type.kind!=="value")return Le.error("Cannot use collator to compare non-string types.");if(!(vt=Le.parse(ye[3],3,ct)))return null}return new pe(Qe,ht,vt)},pe.prototype.evaluate=function(ye){var Le=this.lhs.evaluate(ye),Ne=this.rhs.evaluate(ye);if(ie&&this.hasUntypedArgument){var Qe=an(Le),ht=an(Ne);if(Qe.kind!==ht.kind||Qe.kind!=="string"&&Qe.kind!=="number")throw new An('Expected arguments for "'+A+'" to be (string, string) or (number, number), but found ('+Qe.kind+", "+ht.kind+") instead.")}if(this.collator&&!ie&&this.hasUntypedArgument){var vt=an(Le),jt=an(Ne);if(vt.kind!=="string"||jt.kind!=="string")return O(ye,Le,Ne)}return this.collator?X(ye,Le,Ne,this.collator.evaluate(ye)):O(ye,Le,Ne)},pe.prototype.eachChild=function(ye){ye(this.lhs),ye(this.rhs),this.collator&&ye(this.collator)},pe.prototype.outputDefined=function(){return!0},pe.prototype.serialize=function(){var ye=[A];return this.eachChild(function(Le){ye.push(Le.serialize())}),ye},pe}()}Ja.parse=function(A,O){if(A.length<=2||A.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var X=O.parse(A[1],1,Re),ie=O.parse(A[2],2,Ke);if(!X||!ie)return null;if(!or(X.type,[Vt(Re),mt,Re]))return O.error("Expected first argument to be of type array or string, but found "+rr(X.type)+" instead");if(A.length===4){var pe=O.parse(A[3],3,Ke);return pe?new Ja(X.type,X,ie,pe):null}return new Ja(X.type,X,ie)},Ja.prototype.evaluate=function(A){var O=this.input.evaluate(A),X=this.beginIndex.evaluate(A);if(!gr(O,["string","array"]))throw new An("Expected first argument to be of type array or string, but found "+rr(an(O))+" instead.");if(this.endIndex){var ie=this.endIndex.evaluate(A);return O.slice(X,ie)}return O.slice(X)},Ja.prototype.eachChild=function(A){A(this.input),A(this.beginIndex),this.endIndex&&A(this.endIndex)},Ja.prototype.outputDefined=function(){return!1},Ja.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var A=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),A]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Ts=qi("==",function(A,O,X){return O===X},Ns),ss=qi("!=",function(A,O,X){return O!==X},function(A,O,X,ie){return!Ns(0,O,X,ie)}),js=qi("<",function(A,O,X){return O<X},function(A,O,X,ie){return ie.compare(O,X)<0}),Us=qi(">",function(A,O,X){return O>X},function(A,O,X,ie){return ie.compare(O,X)>0}),Ds=qi("<=",function(A,O,X){return O<=X},function(A,O,X,ie){return ie.compare(O,X)<=0}),Vs=qi(">=",function(A,O,X){return O>=X},function(A,O,X,ie){return ie.compare(O,X)>=0}),Co=function(A,O,X,ie,pe){this.type=mt,this.number=A,this.locale=O,this.currency=X,this.minFractionDigits=ie,this.maxFractionDigits=pe};Co.parse=function(A,O){if(A.length!==3)return O.error("Expected two arguments.");var X=O.parse(A[1],1,Ke);if(!X)return null;var ie=A[2];if(typeof ie!="object"||Array.isArray(ie))return O.error("NumberFormat options argument must be an object.");var pe=null;if(ie.locale&&!(pe=O.parse(ie.locale,1,mt)))return null;var ye=null;if(ie.currency&&!(ye=O.parse(ie.currency,1,mt)))return null;var Le=null;if(ie["min-fraction-digits"]&&!(Le=O.parse(ie["min-fraction-digits"],1,Ke)))return null;var Ne=null;return ie["max-fraction-digits"]&&!(Ne=O.parse(ie["max-fraction-digits"],1,Ke))?null:new Co(X,pe,ye,Le,Ne)},Co.prototype.evaluate=function(A){return new Intl.NumberFormat(this.locale?this.locale.evaluate(A):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(A):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(A):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(A):void 0}).format(this.number.evaluate(A))},Co.prototype.eachChild=function(A){A(this.number),this.locale&&A(this.locale),this.currency&&A(this.currency),this.minFractionDigits&&A(this.minFractionDigits),this.maxFractionDigits&&A(this.maxFractionDigits)},Co.prototype.outputDefined=function(){return!1},Co.prototype.serialize=function(){var A={};return this.locale&&(A.locale=this.locale.serialize()),this.currency&&(A.currency=this.currency.serialize()),this.minFractionDigits&&(A["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(A["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),A]};var Po=function(A){this.type=Ke,this.input=A};Po.parse=function(A,O){if(A.length!==2)return O.error("Expected 1 argument, but found "+(A.length-1)+" instead.");var X=O.parse(A[1],1);return X?X.type.kind!=="array"&&X.type.kind!=="string"&&X.type.kind!=="value"?O.error("Expected argument of type string or array, but found "+rr(X.type)+" instead."):new Po(X):null},Po.prototype.evaluate=function(A){var O=this.input.evaluate(A);if(typeof O=="string"||Array.isArray(O))return O.length;throw new An("Expected value to be of type string or array, but found "+rr(an(O))+" instead.")},Po.prototype.eachChild=function(A){A(this.input)},Po.prototype.outputDefined=function(){return!1},Po.prototype.serialize=function(){var A=["length"];return this.eachChild(function(O){A.push(O.serialize())}),A};var Go={"==":Ts,"!=":ss,">":Us,"<":js,">=":Vs,"<=":Ds,array:zr,at:Qa,boolean:zr,case:pa,coalesce:go,collator:Dn,format:Ar,image:qr,in:vo,"index-of":Mo,interpolate:Hi,"interpolate-hcl":Hi,"interpolate-lab":Hi,length:Po,let:wa,literal:Pn,match:Na,number:zr,"number-format":Co,object:zr,slice:Ja,step:oi,string:zr,"to-boolean":Fr,"to-color":Fr,"to-number":Fr,"to-string":Fr,var:ln,within:en};function Yo(A,O){var X=O[0],ie=O[1],pe=O[2],ye=O[3];X=X.evaluate(A),ie=ie.evaluate(A),pe=pe.evaluate(A);var Le=ye?ye.evaluate(A):1,Ne=Br(X,ie,pe,Le);if(Ne)throw new An(Ne);return new ur(X/255*Le,ie/255*Le,pe/255*Le,Le)}function Wo(A,O){return A in O}function ls(A,O){var X=O[A];return X===void 0?null:X}function yo(A){return{type:A}}function ks(A){return{result:"success",value:A}}function fo(A){return{result:"error",value:A}}function Zo(A){return A["property-type"]==="data-driven"||A["property-type"]==="cross-faded-data-driven"}function As(A){return!!A.expression&&A.expression.parameters.indexOf("zoom")>-1}function Io(A){return!!A.expression&&A.expression.interpolated}function Ui(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":A===null?"null":typeof A}function je(A){return typeof A=="object"&&A!==null&&!Array.isArray(A)}function Ge(A){return A}function tt(A,O,X){return A!==void 0?A:O!==void 0?O:X!==void 0?X:void 0}function ot(A,O,X,ie,pe){return tt(typeof X===pe?ie[X]:void 0,A.default,O.default)}function yt(A,O,X){if(Ui(X)!=="number")return tt(A.default,O.default);var ie=A.stops.length;if(ie===1||X<=A.stops[0][0])return A.stops[0][1];if(X>=A.stops[ie-1][0])return A.stops[ie-1][1];var pe=Sn(A.stops.map(function(ye){return ye[0]}),X);return A.stops[pe][1]}function gt(A,O,X){var ie=A.base!==void 0?A.base:1;if(Ui(X)!=="number")return tt(A.default,O.default);var pe=A.stops.length;if(pe===1||X<=A.stops[0][0])return A.stops[0][1];if(X>=A.stops[pe-1][0])return A.stops[pe-1][1];var ye=Sn(A.stops.map(function(jt){return jt[0]}),X),Le=function(jt,Kt,Wt,ar){var vr=ar-Wt,Cr=jt-Wt;return vr===0?0:Kt===1?Cr/vr:(Math.pow(Kt,Cr)-1)/(Math.pow(Kt,vr)-1)}(X,ie,A.stops[ye][0],A.stops[ye+1][0]),Ne=A.stops[ye][1],Qe=A.stops[ye+1][1],ht=vn[O.type]||Ge;if(A.colorSpace&&A.colorSpace!=="rgb"){var vt=qo[A.colorSpace];ht=function(jt,Kt){return vt.reverse(vt.interpolate(vt.forward(jt),vt.forward(Kt),Le))}}return typeof Ne.evaluate=="function"?{evaluate:function(){for(var jt=[],Kt=arguments.length;Kt--;)jt[Kt]=arguments[Kt];var Wt=Ne.evaluate.apply(void 0,jt),ar=Qe.evaluate.apply(void 0,jt);if(Wt!==void 0&&ar!==void 0)return ht(Wt,ar,Le)}}:ht(Ne,Qe,Le)}function Mt(A,O,X){return O.type==="color"?X=ur.parse(X):O.type==="formatted"?X=Dr.fromString(X.toString()):O.type==="resolvedImage"?X=yr.fromString(X.toString()):Ui(X)===O.type||O.type==="enum"&&O.values[X]||(X=void 0),tt(X,A.default,O.default)}bn.register(Go,{error:[{kind:"error"},[mt],function(A,O){var X=O[0];throw new An(X.evaluate(A))}],typeof:[mt,[Re],function(A,O){return rr(an(O[0].evaluate(A)))}],"to-rgba":[Vt(Ke,4),[Bt],function(A,O){return O[0].evaluate(A).toArray()}],rgb:[Bt,[Ke,Ke,Ke],Yo],rgba:[Bt,[Ke,Ke,Ke,Ke],Yo],has:{type:Dt,overloads:[[[mt],function(A,O){return Wo(O[0].evaluate(A),A.properties())}],[[mt,Zt],function(A,O){var X=O[0],ie=O[1];return Wo(X.evaluate(A),ie.evaluate(A))}]]},get:{type:Re,overloads:[[[mt],function(A,O){return ls(O[0].evaluate(A),A.properties())}],[[mt,Zt],function(A,O){var X=O[0],ie=O[1];return ls(X.evaluate(A),ie.evaluate(A))}]]},"feature-state":[Re,[mt],function(A,O){return ls(O[0].evaluate(A),A.featureState||{})}],properties:[Zt,[],function(A){return A.properties()}],"geometry-type":[mt,[],function(A){return A.geometryType()}],id:[Re,[],function(A){return A.id()}],zoom:[Ke,[],function(A){return A.globals.zoom}],"heatmap-density":[Ke,[],function(A){return A.globals.heatmapDensity||0}],"line-progress":[Ke,[],function(A){return A.globals.lineProgress||0}],accumulated:[Re,[],function(A){return A.globals.accumulated===void 0?null:A.globals.accumulated}],"+":[Ke,yo(Ke),function(A,O){for(var X=0,ie=0,pe=O;ie<pe.length;ie+=1)X+=pe[ie].evaluate(A);return X}],"*":[Ke,yo(Ke),function(A,O){for(var X=1,ie=0,pe=O;ie<pe.length;ie+=1)X*=pe[ie].evaluate(A);return X}],"-":{type:Ke,overloads:[[[Ke,Ke],function(A,O){var X=O[0],ie=O[1];return X.evaluate(A)-ie.evaluate(A)}],[[Ke],function(A,O){return-O[0].evaluate(A)}]]},"/":[Ke,[Ke,Ke],function(A,O){var X=O[0],ie=O[1];return X.evaluate(A)/ie.evaluate(A)}],"%":[Ke,[Ke,Ke],function(A,O){var X=O[0],ie=O[1];return X.evaluate(A)%ie.evaluate(A)}],ln2:[Ke,[],function(){return Math.LN2}],pi:[Ke,[],function(){return Math.PI}],e:[Ke,[],function(){return Math.E}],"^":[Ke,[Ke,Ke],function(A,O){var X=O[0],ie=O[1];return Math.pow(X.evaluate(A),ie.evaluate(A))}],sqrt:[Ke,[Ke],function(A,O){var X=O[0];return Math.sqrt(X.evaluate(A))}],log10:[Ke,[Ke],function(A,O){var X=O[0];return Math.log(X.evaluate(A))/Math.LN10}],ln:[Ke,[Ke],function(A,O){var X=O[0];return Math.log(X.evaluate(A))}],log2:[Ke,[Ke],function(A,O){var X=O[0];return Math.log(X.evaluate(A))/Math.LN2}],sin:[Ke,[Ke],function(A,O){var X=O[0];return Math.sin(X.evaluate(A))}],cos:[Ke,[Ke],function(A,O){var X=O[0];return Math.cos(X.evaluate(A))}],tan:[Ke,[Ke],function(A,O){var X=O[0];return Math.tan(X.evaluate(A))}],asin:[Ke,[Ke],function(A,O){var X=O[0];return Math.asin(X.evaluate(A))}],acos:[Ke,[Ke],function(A,O){var X=O[0];return Math.acos(X.evaluate(A))}],atan:[Ke,[Ke],function(A,O){var X=O[0];return Math.atan(X.evaluate(A))}],min:[Ke,yo(Ke),function(A,O){return Math.min.apply(Math,O.map(function(X){return X.evaluate(A)}))}],max:[Ke,yo(Ke),function(A,O){return Math.max.apply(Math,O.map(function(X){return X.evaluate(A)}))}],abs:[Ke,[Ke],function(A,O){var X=O[0];return Math.abs(X.evaluate(A))}],round:[Ke,[Ke],function(A,O){var X=O[0].evaluate(A);return X<0?-Math.round(-X):Math.round(X)}],floor:[Ke,[Ke],function(A,O){var X=O[0];return Math.floor(X.evaluate(A))}],ceil:[Ke,[Ke],function(A,O){var X=O[0];return Math.ceil(X.evaluate(A))}],"filter-==":[Dt,[mt,Re],function(A,O){var X=O[0],ie=O[1];return A.properties()[X.value]===ie.value}],"filter-id-==":[Dt,[Re],function(A,O){var X=O[0];return A.id()===X.value}],"filter-type-==":[Dt,[mt],function(A,O){var X=O[0];return A.geometryType()===X.value}],"filter-<":[Dt,[mt,Re],function(A,O){var X=O[0],ie=O[1],pe=A.properties()[X.value],ye=ie.value;return typeof pe==typeof ye&&pe<ye}],"filter-id-<":[Dt,[Re],function(A,O){var X=O[0],ie=A.id(),pe=X.value;return typeof ie==typeof pe&&ie<pe}],"filter->":[Dt,[mt,Re],function(A,O){var X=O[0],ie=O[1],pe=A.properties()[X.value],ye=ie.value;return typeof pe==typeof ye&&pe>ye}],"filter-id->":[Dt,[Re],function(A,O){var X=O[0],ie=A.id(),pe=X.value;return typeof ie==typeof pe&&ie>pe}],"filter-<=":[Dt,[mt,Re],function(A,O){var X=O[0],ie=O[1],pe=A.properties()[X.value],ye=ie.value;return typeof pe==typeof ye&&pe<=ye}],"filter-id-<=":[Dt,[Re],function(A,O){var X=O[0],ie=A.id(),pe=X.value;return typeof ie==typeof pe&&ie<=pe}],"filter->=":[Dt,[mt,Re],function(A,O){var X=O[0],ie=O[1],pe=A.properties()[X.value],ye=ie.value;return typeof pe==typeof ye&&pe>=ye}],"filter-id->=":[Dt,[Re],function(A,O){var X=O[0],ie=A.id(),pe=X.value;return typeof ie==typeof pe&&ie>=pe}],"filter-has":[Dt,[Re],function(A,O){return O[0].value in A.properties()}],"filter-has-id":[Dt,[],function(A){return A.id()!==null&&A.id()!==void 0}],"filter-type-in":[Dt,[Vt(mt)],function(A,O){return O[0].value.indexOf(A.geometryType())>=0}],"filter-id-in":[Dt,[Vt(Re)],function(A,O){return O[0].value.indexOf(A.id())>=0}],"filter-in-small":[Dt,[mt,Vt(Re)],function(A,O){var X=O[0];return O[1].value.indexOf(A.properties()[X.value])>=0}],"filter-in-large":[Dt,[mt,Vt(Re)],function(A,O){var X=O[0],ie=O[1];return function(pe,ye,Le,Ne){for(;Le<=Ne;){var Qe=Le+Ne>>1;if(ye[Qe]===pe)return!0;ye[Qe]>pe?Ne=Qe-1:Le=Qe+1}return!1}(A.properties()[X.value],ie.value,0,ie.value.length-1)}],all:{type:Dt,overloads:[[[Dt,Dt],function(A,O){var X=O[0],ie=O[1];return X.evaluate(A)&&ie.evaluate(A)}],[yo(Dt),function(A,O){for(var X=0,ie=O;X<ie.length;X+=1)if(!ie[X].evaluate(A))return!1;return!0}]]},any:{type:Dt,overloads:[[[Dt,Dt],function(A,O){var X=O[0],ie=O[1];return X.evaluate(A)||ie.evaluate(A)}],[yo(Dt),function(A,O){for(var X=0,ie=O;X<ie.length;X+=1)if(ie[X].evaluate(A))return!0;return!1}]]},"!":[Dt,[Dt],function(A,O){return!O[0].evaluate(A)}],"is-supported-script":[Dt,[mt],function(A,O){var X=O[0],ie=A.globals&&A.globals.isSupportedScript;return!ie||ie(X.evaluate(A))}],upcase:[mt,[mt],function(A,O){return O[0].evaluate(A).toUpperCase()}],downcase:[mt,[mt],function(A,O){return O[0].evaluate(A).toLowerCase()}],concat:[mt,yo(Re),function(A,O){return O.map(function(X){return Ln(X.evaluate(A))}).join("")}],"resolved-locale":[mt,[ct],function(A,O){return O[0].evaluate(A).resolvedLocale()}]});var $t=function(A,O){this.expression=A,this._warningHistory={},this._evaluator=new Mn,this._defaultValue=O?function(X){return X.type==="color"&&je(X.default)?new ur(0,0,0,0):X.type==="color"?ur.parse(X.default)||null:X.default===void 0?null:X.default}(O):null,this._enumValues=O&&O.type==="enum"?O.values:null};function er(A){return Array.isArray(A)&&A.length>0&&typeof A[0]=="string"&&A[0]in Go}function Xt(A,O){var X=new gn(Go,[],O?function(pe){var ye={color:Bt,string:mt,number:Ke,enum:mt,boolean:Dt,formatted:wt,resolvedImage:Rt};return pe.type==="array"?Vt(ye[pe.value]||Re,pe.length):ye[pe.type]}(O):void 0),ie=X.parse(A,void 0,void 0,void 0,O&&O.type==="string"?{typeAnnotation:"coerce"}:void 0);return ie?ks(new $t(ie,O)):fo(X.errors)}$t.prototype.evaluateWithoutErrorHandling=function(A,O,X,ie,pe,ye){return this._evaluator.globals=A,this._evaluator.feature=O,this._evaluator.featureState=X,this._evaluator.canonical=ie,this._evaluator.availableImages=pe||null,this._evaluator.formattedSection=ye,this.expression.evaluate(this._evaluator)},$t.prototype.evaluate=function(A,O,X,ie,pe,ye){this._evaluator.globals=A,this._evaluator.feature=O||null,this._evaluator.featureState=X||null,this._evaluator.canonical=ie,this._evaluator.availableImages=pe||null,this._evaluator.formattedSection=ye||null;try{var Le=this.expression.evaluate(this._evaluator);if(Le==null||typeof Le=="number"&&Le!=Le)return this._defaultValue;if(this._enumValues&&!(Le in this._enumValues))throw new An("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ne){return JSON.stringify(Ne)}).join(", ")+", but found "+JSON.stringify(Le)+" instead.");return Le}catch(Ne){return this._warningHistory[Ne.message]||(this._warningHistory[Ne.message]=!0,typeof console!="undefined"&&console.warn(Ne.message)),this._defaultValue}};var ir=function(A,O){this.kind=A,this._styleExpression=O,this.isStateDependent=A!=="constant"&&!Vr(O.expression)};ir.prototype.evaluateWithoutErrorHandling=function(A,O,X,ie,pe,ye){return this._styleExpression.evaluateWithoutErrorHandling(A,O,X,ie,pe,ye)},ir.prototype.evaluate=function(A,O,X,ie,pe,ye){return this._styleExpression.evaluate(A,O,X,ie,pe,ye)};var hr=function(A,O,X,ie){this.kind=A,this.zoomStops=X,this._styleExpression=O,this.isStateDependent=A!=="camera"&&!Vr(O.expression),this.interpolationType=ie};function xr(A,O){if((A=Xt(A,O)).result==="error")return A;var X=A.value.expression,ie=yn(X);if(!ie&&!Zo(O))return fo([new lt("","data expressions not supported")]);var pe=Ur(X,["zoom"]);if(!pe&&!As(O))return fo([new lt("","zoom expressions not supported")]);var ye=function Ne(Qe){var ht=null;if(Qe instanceof wa)ht=Ne(Qe.result);else if(Qe instanceof go)for(var vt=0,jt=Qe.args;vt<jt.length;vt+=1){var Kt=jt[vt];if(ht=Ne(Kt))break}else(Qe instanceof oi||Qe instanceof Hi)&&Qe.input instanceof bn&&Qe.input.name==="zoom"&&(ht=Qe);return ht instanceof lt||Qe.eachChild(function(Wt){var ar=Ne(Wt);ar instanceof lt?ht=ar:!ht&&ar?ht=new lt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):ht&&ar&&ht!==ar&&(ht=new lt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),ht}(X);if(!ye&&!pe)return fo([new lt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(ye instanceof lt)return fo([ye]);if(ye instanceof Hi&&!Io(O))return fo([new lt("",'"interpolate" expressions cannot be used with this property')]);if(!ye)return ks(new ir(ie?"constant":"source",A.value));var Le=ye instanceof Hi?ye.interpolation:void 0;return ks(new hr(ie?"camera":"composite",A.value,ye.labels,Le))}hr.prototype.evaluateWithoutErrorHandling=function(A,O,X,ie,pe,ye){return this._styleExpression.evaluateWithoutErrorHandling(A,O,X,ie,pe,ye)},hr.prototype.evaluate=function(A,O,X,ie,pe,ye){return this._styleExpression.evaluate(A,O,X,ie,pe,ye)},hr.prototype.interpolationFactor=function(A,O,X){return this.interpolationType?Hi.interpolationFactor(this.interpolationType,A,O,X):0};var _r=function(A,O){this._parameters=A,this._specification=O,dt(this,function X(ie,pe){var ye,Le,Ne,Qe=pe.type==="color",ht=ie.stops&&typeof ie.stops[0][0]=="object",vt=ht||ie.property!==void 0,jt=ht||!vt,Kt=ie.type||(Io(pe)?"exponential":"interval");if(Qe&&((ie=dt({},ie)).stops&&(ie.stops=ie.stops.map(function(ii){return[ii[0],ur.parse(ii[1])]})),ie.default?ie.default=ur.parse(ie.default):ie.default=ur.parse(pe.default)),ie.colorSpace&&ie.colorSpace!=="rgb"&&!qo[ie.colorSpace])throw new Error("Unknown color space: "+ie.colorSpace);if(Kt==="exponential")ye=gt;else if(Kt==="interval")ye=yt;else if(Kt==="categorical"){ye=ot,Le=Object.create(null);for(var Wt=0,ar=ie.stops;Wt<ar.length;Wt+=1){var vr=ar[Wt];Le[vr[0]]=vr[1]}Ne=typeof ie.stops[0][0]}else{if(Kt!=="identity")throw new Error('Unknown function type "'+Kt+'"');ye=Mt}if(ht){for(var Cr={},Lr=[],Nr=0;Nr<ie.stops.length;Nr++){var jr=ie.stops[Nr],Yr=jr[0].zoom;Cr[Yr]===void 0&&(Cr[Yr]={zoom:Yr,type:ie.type,property:ie.property,default:ie.default,stops:[]},Lr.push(Yr)),Cr[Yr].stops.push([jr[0].value,jr[1]])}for(var hn=[],xn=0,Nn=Lr;xn<Nn.length;xn+=1){var Bn=Nn[xn];hn.push([Cr[Bn].zoom,X(Cr[Bn],pe)])}var Gn={name:"linear"};return{kind:"composite",interpolationType:Gn,interpolationFactor:Hi.interpolationFactor.bind(void 0,Gn),zoomStops:hn.map(function(ii){return ii[0]}),evaluate:function(ii,Xn){var fi=ii.zoom;return gt({stops:hn,base:ie.base},pe,fi).evaluate(fi,Xn)}}}if(jt){var ni=Kt==="exponential"?{name:"exponential",base:ie.base!==void 0?ie.base:1}:null;return{kind:"camera",interpolationType:ni,interpolationFactor:Hi.interpolationFactor.bind(void 0,ni),zoomStops:ie.stops.map(function(ii){return ii[0]}),evaluate:function(ii){var Xn=ii.zoom;return ye(ie,pe,Xn,Le,Ne)}}}return{kind:"source",evaluate:function(ii,Xn){var fi=Xn&&Xn.properties?Xn.properties[ie.property]:void 0;return fi===void 0?tt(ie.default,pe.default):ye(ie,pe,fi,Le,Ne)}}}(this._parameters,this._specification))};function Or(A){var O=A.key,X=A.value,ie=A.valueSpec||{},pe=A.objectElementValidators||{},ye=A.style,Le=A.styleSpec,Ne=[],Qe=Ui(X);if(Qe!=="object")return[new $e(O,X,"object expected, "+Qe+" found")];for(var ht in X){var vt=ht.split(".")[0],jt=ie[vt]||ie["*"],Kt=void 0;if(pe[vt])Kt=pe[vt];else if(ie[vt])Kt=sr;else if(pe["*"])Kt=pe["*"];else{if(!ie["*"]){Ne.push(new $e(O,X[ht],'unknown property "'+ht+'"'));continue}Kt=sr}Ne=Ne.concat(Kt({key:(O&&O+".")+ht,value:X[ht],valueSpec:jt,style:ye,styleSpec:Le,object:X,objectKey:ht},X))}for(var Wt in ie)pe[Wt]||ie[Wt].required&&ie[Wt].default===void 0&&X[Wt]===void 0&&Ne.push(new $e(O,X,'missing required property "'+Wt+'"'));return Ne}function rn(A){var O=A.value,X=A.valueSpec,ie=A.style,pe=A.styleSpec,ye=A.key,Le=A.arrayElementValidator||sr;if(Ui(O)!=="array")return[new $e(ye,O,"array expected, "+Ui(O)+" found")];if(X.length&&O.length!==X.length)return[new $e(ye,O,"array length "+X.length+" expected, length "+O.length+" found")];if(X["min-length"]&&O.length<X["min-length"])return[new $e(ye,O,"array length at least "+X["min-length"]+" expected, length "+O.length+" found")];var Ne={type:X.value,values:X.values};pe.$version<7&&(Ne.function=X.function),Ui(X.value)==="object"&&(Ne=X.value);for(var Qe=[],ht=0;ht<O.length;ht++)Qe=Qe.concat(Le({array:O,arrayIndex:ht,value:O[ht],valueSpec:Ne,style:ie,styleSpec:pe,key:ye+"["+ht+"]"}));return Qe}function dn(A){var O=A.key,X=A.value,ie=A.valueSpec,pe=Ui(X);return pe==="number"&&X!=X&&(pe="NaN"),pe!=="number"?[new $e(O,X,"number expected, "+pe+" found")]:"minimum"in ie&&X<ie.minimum?[new $e(O,X,X+" is less than the minimum value "+ie.minimum)]:"maximum"in ie&&X>ie.maximum?[new $e(O,X,X+" is greater than the maximum value "+ie.maximum)]:[]}function Cn(A){var O,X,ie,pe=A.valueSpec,ye=ut(A.value.type),Le={},Ne=ye!=="categorical"&&A.value.property===void 0,Qe=!Ne,ht=Ui(A.value.stops)==="array"&&Ui(A.value.stops[0])==="array"&&Ui(A.value.stops[0][0])==="object",vt=Or({key:A.key,value:A.value,valueSpec:A.styleSpec.function,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{stops:function(Wt){if(ye==="identity")return[new $e(Wt.key,Wt.value,'identity function may not have a "stops" property')];var ar=[],vr=Wt.value;return ar=ar.concat(rn({key:Wt.key,value:vr,valueSpec:Wt.valueSpec,style:Wt.style,styleSpec:Wt.styleSpec,arrayElementValidator:jt})),Ui(vr)==="array"&&vr.length===0&&ar.push(new $e(Wt.key,vr,"array must have at least one stop")),ar},default:function(Wt){return sr({key:Wt.key,value:Wt.value,valueSpec:pe,style:Wt.style,styleSpec:Wt.styleSpec})}}});return ye==="identity"&&Ne&&vt.push(new $e(A.key,A.value,'missing required property "property"')),ye==="identity"||A.value.stops||vt.push(new $e(A.key,A.value,'missing required property "stops"')),ye==="exponential"&&A.valueSpec.expression&&!Io(A.valueSpec)&&vt.push(new $e(A.key,A.value,"exponential functions not supported")),A.styleSpec.$version>=8&&(Qe&&!Zo(A.valueSpec)?vt.push(new $e(A.key,A.value,"property functions not supported")):Ne&&!As(A.valueSpec)&&vt.push(new $e(A.key,A.value,"zoom functions not supported"))),ye!=="categorical"&&!ht||A.value.property!==void 0||vt.push(new $e(A.key,A.value,'"property" property is required')),vt;function jt(Wt){var ar=[],vr=Wt.value,Cr=Wt.key;if(Ui(vr)!=="array")return[new $e(Cr,vr,"array expected, "+Ui(vr)+" found")];if(vr.length!==2)return[new $e(Cr,vr,"array length 2 expected, length "+vr.length+" found")];if(ht){if(Ui(vr[0])!=="object")return[new $e(Cr,vr,"object expected, "+Ui(vr[0])+" found")];if(vr[0].zoom===void 0)return[new $e(Cr,vr,"object stop key must have zoom")];if(vr[0].value===void 0)return[new $e(Cr,vr,"object stop key must have value")];if(ie&&ie>ut(vr[0].zoom))return[new $e(Cr,vr[0].zoom,"stop zoom values must appear in ascending order")];ut(vr[0].zoom)!==ie&&(ie=ut(vr[0].zoom),X=void 0,Le={}),ar=ar.concat(Or({key:Cr+"[0]",value:vr[0],valueSpec:{zoom:{}},style:Wt.style,styleSpec:Wt.styleSpec,objectElementValidators:{zoom:dn,value:Kt}}))}else ar=ar.concat(Kt({key:Cr+"[0]",value:vr[0],valueSpec:{},style:Wt.style,styleSpec:Wt.styleSpec},vr));return er(Lt(vr[1]))?ar.concat([new $e(Cr+"[1]",vr[1],"expressions are not allowed in function stops.")]):ar.concat(sr({key:Cr+"[1]",value:vr[1],valueSpec:pe,style:Wt.style,styleSpec:Wt.styleSpec}))}function Kt(Wt,ar){var vr=Ui(Wt.value),Cr=ut(Wt.value),Lr=Wt.value!==null?Wt.value:ar;if(O){if(vr!==O)return[new $e(Wt.key,Lr,vr+" stop domain type must match previous stop domain type "+O)]}else O=vr;if(vr!=="number"&&vr!=="string"&&vr!=="boolean")return[new $e(Wt.key,Lr,"stop domain value must be a number, string, or boolean")];if(vr!=="number"&&ye!=="categorical"){var Nr="number expected, "+vr+" found";return Zo(pe)&&ye===void 0&&(Nr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new $e(Wt.key,Lr,Nr)]}return ye!=="categorical"||vr!=="number"||isFinite(Cr)&&Math.floor(Cr)===Cr?ye!=="categorical"&&vr==="number"&&X!==void 0&&Cr<X?[new $e(Wt.key,Lr,"stop domain values must appear in ascending order")]:(X=Cr,ye==="categorical"&&Cr in Le?[new $e(Wt.key,Lr,"stop domain values must be unique")]:(Le[Cr]=!0,[])):[new $e(Wt.key,Lr,"integer expected, found "+Cr)]}}function zn(A){var O=(A.expressionContext==="property"?xr:Xt)(Lt(A.value),A.valueSpec);if(O.result==="error")return O.value.map(function(ie){return new $e(""+A.key+ie.key,A.value,ie.message)});var X=O.value.expression||O.value._styleExpression.expression;if(A.expressionContext==="property"&&A.propertyKey==="text-font"&&!X.outputDefined())return[new $e(A.key,A.value,'Invalid data expression for "'+A.propertyKey+'". Output values must be contained as literals within the expression.')];if(A.expressionContext==="property"&&A.propertyType==="layout"&&!Vr(X))return[new $e(A.key,A.value,'"feature-state" data expressions are not supported with layout properties.')];if(A.expressionContext==="filter"&&!Vr(X))return[new $e(A.key,A.value,'"feature-state" data expressions are not supported with filters.')];if(A.expressionContext&&A.expressionContext.indexOf("cluster")===0){if(!Ur(X,["zoom","feature-state"]))return[new $e(A.key,A.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(A.expressionContext==="cluster-initial"&&!yn(X))return[new $e(A.key,A.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Hn(A){var O=A.key,X=A.value,ie=A.valueSpec,pe=[];return Array.isArray(ie.values)?ie.values.indexOf(ut(X))===-1&&pe.push(new $e(O,X,"expected one of ["+ie.values.join(", ")+"], "+JSON.stringify(X)+" found")):Object.keys(ie.values).indexOf(ut(X))===-1&&pe.push(new $e(O,X,"expected one of ["+Object.keys(ie.values).join(", ")+"], "+JSON.stringify(X)+" found")),pe}function Rn(A){if(A===!0||A===!1)return!0;if(!Array.isArray(A)||A.length===0)return!1;switch(A[0]){case"has":return A.length>=2&&A[1]!=="$id"&&A[1]!=="$type";case"in":return A.length>=3&&(typeof A[1]!="string"||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return A.length!==3||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(var O=0,X=A.slice(1);O<X.length;O+=1){var ie=X[O];if(!Rn(ie)&&typeof ie!="boolean")return!1}return!0;default:return!0}}_r.deserialize=function(A){return new _r(A._parameters,A._specification)},_r.serialize=function(A){return{_parameters:A._parameters,_specification:A._specification}};var di={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function wi(A){if(A==null)return{filter:function(){return!0},needGeometry:!1};Rn(A)||(A=Di(A));var O=Xt(A,di);if(O.result==="error")throw new Error(O.value.map(function(X){return X.key+": "+X.message}).join(", "));return{filter:function(X,ie,pe){return O.value.evaluate(X,ie,{},pe)},needGeometry:function X(ie){if(!Array.isArray(ie))return!1;if(ie[0]==="within")return!0;for(var pe=1;pe<ie.length;pe++)if(X(ie[pe]))return!0;return!1}(A)}}function Ri(A,O){return A<O?-1:A>O?1:0}function Di(A){if(!A)return!0;var O,X=A[0];return A.length<=1?X!=="any":X==="=="?Fi(A[1],A[2],"=="):X==="!="?aa(Fi(A[1],A[2],"==")):X==="<"||X===">"||X==="<="||X===">="?Fi(A[1],A[2],X):X==="any"?(O=A.slice(1),["any"].concat(O.map(Di))):X==="all"?["all"].concat(A.slice(1).map(Di)):X==="none"?["all"].concat(A.slice(1).map(Di).map(aa)):X==="in"?Ta(A[1],A.slice(2)):X==="!in"?aa(Ta(A[1],A.slice(2))):X==="has"?xa(A[1]):X==="!has"?aa(xa(A[1])):X!=="within"||A}function Fi(A,O,X){switch(A){case"$type":return["filter-type-"+X,O];case"$id":return["filter-id-"+X,O];default:return["filter-"+X,A,O]}}function Ta(A,O){if(O.length===0)return!1;switch(A){case"$type":return["filter-type-in",["literal",O]];case"$id":return["filter-id-in",["literal",O]];default:return O.length>200&&!O.some(function(X){return typeof X!=typeof O[0]})?["filter-in-large",A,["literal",O.sort(Ri)]]:["filter-in-small",A,["literal",O]]}}function xa(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function aa(A){return["!",A]}function oa(A){return Rn(Lt(A.value))?zn(dt({},A,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function O(X){var ie=X.value,pe=X.key;if(Ui(ie)!=="array")return[new $e(pe,ie,"array expected, "+Ui(ie)+" found")];var ye,Le=X.styleSpec,Ne=[];if(ie.length<1)return[new $e(pe,ie,"filter array must have at least 1 element")];switch(Ne=Ne.concat(Hn({key:pe+"[0]",value:ie[0],valueSpec:Le.filter_operator,style:X.style,styleSpec:X.styleSpec})),ut(ie[0])){case"<":case"<=":case">":case">=":ie.length>=2&&ut(ie[1])==="$type"&&Ne.push(new $e(pe,ie,'"$type" cannot be use with operator "'+ie[0]+'"'));case"==":case"!=":ie.length!==3&&Ne.push(new $e(pe,ie,'filter array for operator "'+ie[0]+'" must have 3 elements'));case"in":case"!in":ie.length>=2&&(ye=Ui(ie[1]))!=="string"&&Ne.push(new $e(pe+"[1]",ie[1],"string expected, "+ye+" found"));for(var Qe=2;Qe<ie.length;Qe++)ye=Ui(ie[Qe]),ut(ie[1])==="$type"?Ne=Ne.concat(Hn({key:pe+"["+Qe+"]",value:ie[Qe],valueSpec:Le.geometry_type,style:X.style,styleSpec:X.styleSpec})):ye!=="string"&&ye!=="number"&&ye!=="boolean"&&Ne.push(new $e(pe+"["+Qe+"]",ie[Qe],"string, number, or boolean expected, "+ye+" found"));break;case"any":case"all":case"none":for(var ht=1;ht<ie.length;ht++)Ne=Ne.concat(O({key:pe+"["+ht+"]",value:ie[ht],style:X.style,styleSpec:X.styleSpec}));break;case"has":case"!has":ye=Ui(ie[1]),ie.length!==2?Ne.push(new $e(pe,ie,'filter array for "'+ie[0]+'" operator must have 2 elements')):ye!=="string"&&Ne.push(new $e(pe+"[1]",ie[1],"string expected, "+ye+" found"));break;case"within":ye=Ui(ie[1]),ie.length!==2?Ne.push(new $e(pe,ie,'filter array for "'+ie[0]+'" operator must have 2 elements')):ye!=="object"&&Ne.push(new $e(pe+"[1]",ie[1],"object expected, "+ye+" found"))}return Ne}(A)}function ba(A,O){var X=A.key,ie=A.style,pe=A.styleSpec,ye=A.value,Le=A.objectKey,Ne=pe[O+"_"+A.layerType];if(!Ne)return[];var Qe=Le.match(/^(.*)-transition$/);if(O==="paint"&&Qe&&Ne[Qe[1]]&&Ne[Qe[1]].transition)return sr({key:X,value:ye,valueSpec:pe.transition,style:ie,styleSpec:pe});var ht,vt=A.valueSpec||Ne[Le];if(!vt)return[new $e(X,ye,'unknown property "'+Le+'"')];if(Ui(ye)==="string"&&Zo(vt)&&!vt.tokens&&(ht=/^{([^}]+)}$/.exec(ye)))return[new $e(X,ye,'"'+Le+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(ht[1])+" }`.")];var jt=[];return A.layerType==="symbol"&&(Le==="text-field"&&ie&&!ie.glyphs&&jt.push(new $e(X,ye,'use of "text-field" requires a style "glyphs" property')),Le==="text-font"&&je(Lt(ye))&&ut(ye.type)==="identity"&&jt.push(new $e(X,ye,'"text-font" does not support identity functions'))),jt.concat(sr({key:A.key,value:ye,valueSpec:vt,style:ie,styleSpec:pe,expressionContext:"property",propertyType:O,propertyKey:Le}))}function ja(A){return ba(A,"paint")}function eo(A){return ba(A,"layout")}function to(A){var O=[],X=A.value,ie=A.key,pe=A.style,ye=A.styleSpec;X.type||X.ref||O.push(new $e(ie,X,'either "type" or "ref" is required'));var Le,Ne=ut(X.type),Qe=ut(X.ref);if(X.id)for(var ht=ut(X.id),vt=0;vt<A.arrayIndex;vt++){var jt=pe.layers[vt];ut(jt.id)===ht&&O.push(new $e(ie,X.id,'duplicate layer id "'+X.id+'", previously used at line '+jt.id.__line__))}if("ref"in X)["type","source","source-layer","filter","layout"].forEach(function(ar){ar in X&&O.push(new $e(ie,X[ar],'"'+ar+'" is prohibited for ref layers'))}),pe.layers.forEach(function(ar){ut(ar.id)===Qe&&(Le=ar)}),Le?Le.ref?O.push(new $e(ie,X.ref,"ref cannot reference another ref layer")):Ne=ut(Le.type):O.push(new $e(ie,X.ref,'ref layer "'+Qe+'" not found'));else if(Ne!=="background")if(X.source){var Kt=pe.sources&&pe.sources[X.source],Wt=Kt&&ut(Kt.type);Kt?Wt==="vector"&&Ne==="raster"?O.push(new $e(ie,X.source,'layer "'+X.id+'" requires a raster source')):Wt==="raster"&&Ne!=="raster"?O.push(new $e(ie,X.source,'layer "'+X.id+'" requires a vector source')):Wt!=="vector"||X["source-layer"]?Wt==="raster-dem"&&Ne!=="hillshade"?O.push(new $e(ie,X.source,"raster-dem source can only be used with layer type 'hillshade'.")):Ne!=="line"||!X.paint||!X.paint["line-gradient"]||Wt==="geojson"&&Kt.lineMetrics||O.push(new $e(ie,X,'layer "'+X.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):O.push(new $e(ie,X,'layer "'+X.id+'" must specify a "source-layer"')):O.push(new $e(ie,X.source,'source "'+X.source+'" not found'))}else O.push(new $e(ie,X,'missing required property "source"'));return O=O.concat(Or({key:ie,value:X,valueSpec:ye.layer,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return sr({key:ie+".type",value:X.type,valueSpec:ye.layer.type,style:A.style,styleSpec:A.styleSpec,object:X,objectKey:"type"})},filter:oa,layout:function(ar){return Or({layer:X,key:ar.key,value:ar.value,style:ar.style,styleSpec:ar.styleSpec,objectElementValidators:{"*":function(vr){return eo(dt({layerType:Ne},vr))}}})},paint:function(ar){return Or({layer:X,key:ar.key,value:ar.value,style:ar.style,styleSpec:ar.styleSpec,objectElementValidators:{"*":function(vr){return ja(dt({layerType:Ne},vr))}}})}}}))}function ro(A){var O=A.value,X=A.key,ie=Ui(O);return ie!=="string"?[new $e(X,O,"string expected, "+ie+" found")]:[]}var no={promoteId:function(A){var O=A.key,X=A.value;if(Ui(X)==="string")return ro({key:O,value:X});var ie=[];for(var pe in X)ie.push.apply(ie,ro({key:O+"."+pe,value:X[pe]}));return ie}};function Ci(A){var O=A.value,X=A.key,ie=A.styleSpec,pe=A.style;if(!O.type)return[new $e(X,O,'"type" is required')];var ye,Le=ut(O.type);switch(Le){case"vector":case"raster":case"raster-dem":return ye=Or({key:X,value:O,valueSpec:ie["source_"+Le.replace("-","_")],style:A.style,styleSpec:ie,objectElementValidators:no});case"geojson":if(ye=Or({key:X,value:O,valueSpec:ie.source_geojson,style:pe,styleSpec:ie,objectElementValidators:no}),O.cluster)for(var Ne in O.clusterProperties){var Qe=O.clusterProperties[Ne],ht=Qe[0],vt=Qe[1],jt=typeof ht=="string"?[ht,["accumulated"],["get",Ne]]:ht;ye.push.apply(ye,zn({key:X+"."+Ne+".map",value:vt,expressionContext:"cluster-map"})),ye.push.apply(ye,zn({key:X+"."+Ne+".reduce",value:jt,expressionContext:"cluster-reduce"}))}return ye;case"video":return Or({key:X,value:O,valueSpec:ie.source_video,style:pe,styleSpec:ie});case"image":return Or({key:X,value:O,valueSpec:ie.source_image,style:pe,styleSpec:ie});case"canvas":return[new $e(X,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Hn({key:X+".type",value:O.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:pe,styleSpec:ie})}}function pt(A){var O=A.value,X=A.styleSpec,ie=X.light,pe=A.style,ye=[],Le=Ui(O);if(O===void 0)return ye;if(Le!=="object")return ye=ye.concat([new $e("light",O,"object expected, "+Le+" found")]);for(var Ne in O){var Qe=Ne.match(/^(.*)-transition$/);ye=Qe&&ie[Qe[1]]&&ie[Qe[1]].transition?ye.concat(sr({key:Ne,value:O[Ne],valueSpec:X.transition,style:pe,styleSpec:X})):ie[Ne]?ye.concat(sr({key:Ne,value:O[Ne],valueSpec:ie[Ne],style:pe,styleSpec:X})):ye.concat([new $e(Ne,O[Ne],'unknown property "'+Ne+'"')])}return ye}var Ft={"*":function(){return[]},array:rn,boolean:function(A){var O=A.value,X=A.key,ie=Ui(O);return ie!=="boolean"?[new $e(X,O,"boolean expected, "+ie+" found")]:[]},number:dn,color:function(A){var O=A.key,X=A.value,ie=Ui(X);return ie!=="string"?[new $e(O,X,"color expected, "+ie+" found")]:dr(X)===null?[new $e(O,X,'color expected, "'+X+'" found')]:[]},constants:st,enum:Hn,filter:oa,function:Cn,layer:to,object:Or,source:Ci,light:pt,string:ro,formatted:function(A){return ro(A).length===0?[]:zn(A)},resolvedImage:function(A){return ro(A).length===0?[]:zn(A)}};function sr(A){var O=A.value,X=A.valueSpec,ie=A.styleSpec;return X.expression&&je(ut(O))?Cn(A):X.expression&&er(Lt(O))?zn(A):X.type&&Ft[X.type]?Ft[X.type](A):Or(dt({},A,{valueSpec:X.type?ie[X.type]:X}))}function Yt(A){var O=A.value,X=A.key,ie=ro(A);return ie.length||(O.indexOf("{fontstack}")===-1&&ie.push(new $e(X,O,'"glyphs" url must include a "{fontstack}" token')),O.indexOf("{range}")===-1&&ie.push(new $e(X,O,'"glyphs" url must include a "{range}" token'))),ie}function lr(A,O){O===void 0&&(O=Ie);var X=[];return X=X.concat(sr({key:"",value:A,valueSpec:O.$root,styleSpec:O,style:A,objectElementValidators:{glyphs:Yt,"*":function(){return[]}}})),A.constants&&(X=X.concat(st({key:"constants",value:A.constants,style:A,styleSpec:O}))),Pr(X)}function Pr(A){return[].concat(A).sort(function(O,X){return O.line-X.line})}function Rr(A){return function(){for(var O=[],X=arguments.length;X--;)O[X]=arguments[X];return Pr(A.apply(this,O))}}lr.source=Rr(Ci),lr.light=Rr(pt),lr.layer=Rr(to),lr.filter=Rr(oa),lr.paintProperty=Rr(ja),lr.layoutProperty=Rr(eo);var Zr=lr,cn=Zr.light,nn=Zr.paintProperty,mn=Zr.layoutProperty;function wn(A,O){var X=!1;if(O&&O.length)for(var ie=0,pe=O;ie<pe.length;ie+=1){var ye=pe[ie];A.fire(new Pe(new Error(ye.message))),X=!0}return X}var un=Tn;function Tn(A,O,X){var ie=this.cells=[];if(A instanceof ArrayBuffer){this.arrayBuffer=A;var pe=new Int32Array(this.arrayBuffer);A=pe[0],O=pe[1],X=pe[2],this.d=O+2*X;for(var ye=0;ye<this.d*this.d;ye++){var Le=pe[3+ye],Ne=pe[3+ye+1];ie.push(Le===Ne?null:pe.subarray(Le,Ne))}var Qe=pe[3+ie.length],ht=pe[3+ie.length+1];this.keys=pe.subarray(Qe,ht),this.bboxes=pe.subarray(ht),this.insert=this._insertReadonly}else{this.d=O+2*X;for(var vt=0;vt<this.d*this.d;vt++)ie.push([]);this.keys=[],this.bboxes=[]}this.n=O,this.extent=A,this.padding=X,this.scale=O/A,this.uid=0;var jt=X/O*A;this.min=-jt,this.max=A+jt}Tn.prototype.insert=function(A,O,X,ie,pe){this._forEachCell(O,X,ie,pe,this._insertCell,this.uid++),this.keys.push(A),this.bboxes.push(O),this.bboxes.push(X),this.bboxes.push(ie),this.bboxes.push(pe)},Tn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Tn.prototype._insertCell=function(A,O,X,ie,pe,ye){this.cells[pe].push(ye)},Tn.prototype.query=function(A,O,X,ie,pe){var ye=this.min,Le=this.max;if(A<=ye&&O<=ye&&Le<=X&&Le<=ie&&!pe)return Array.prototype.slice.call(this.keys);var Ne=[];return this._forEachCell(A,O,X,ie,this._queryCell,Ne,{},pe),Ne},Tn.prototype._queryCell=function(A,O,X,ie,pe,ye,Le,Ne){var Qe=this.cells[pe];if(Qe!==null)for(var ht=this.keys,vt=this.bboxes,jt=0;jt<Qe.length;jt++){var Kt=Qe[jt];if(Le[Kt]===void 0){var Wt=4*Kt;(Ne?Ne(vt[Wt+0],vt[Wt+1],vt[Wt+2],vt[Wt+3]):A<=vt[Wt+2]&&O<=vt[Wt+3]&&X>=vt[Wt+0]&&ie>=vt[Wt+1])?(Le[Kt]=!0,ye.push(ht[Kt])):Le[Kt]=!1}}},Tn.prototype._forEachCell=function(A,O,X,ie,pe,ye,Le,Ne){for(var Qe=this._convertToCellCoord(A),ht=this._convertToCellCoord(O),vt=this._convertToCellCoord(X),jt=this._convertToCellCoord(ie),Kt=Qe;Kt<=vt;Kt++)for(var Wt=ht;Wt<=jt;Wt++){var ar=this.d*Wt+Kt;if((!Ne||Ne(this._convertFromCellCoord(Kt),this._convertFromCellCoord(Wt),this._convertFromCellCoord(Kt+1),this._convertFromCellCoord(Wt+1)))&&pe.call(this,A,O,X,ie,ar,ye,Le,Ne))return}},Tn.prototype._convertFromCellCoord=function(A){return(A-this.padding)/this.scale},Tn.prototype._convertToCellCoord=function(A){return Math.max(0,Math.min(this.d-1,Math.floor(A*this.scale)+this.padding))},Tn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var A=this.cells,O=3+this.cells.length+1+1,X=0,ie=0;ie<this.cells.length;ie++)X+=this.cells[ie].length;var pe=new Int32Array(O+X+this.keys.length+this.bboxes.length);pe[0]=this.extent,pe[1]=this.n,pe[2]=this.padding;for(var ye=O,Le=0;Le<A.length;Le++){var Ne=A[Le];pe[3+Le]=ye,pe.set(Ne,ye),ye+=Ne.length}return pe[3+A.length]=ye,pe.set(this.keys,ye),ye+=this.keys.length,pe[3+A.length+1]=ye,pe.set(this.bboxes,ye),ye+=this.bboxes.length,pe.buffer};var Fn=self.ImageData,Vn=self.ImageBitmap,ti={};function Jr(A,O,X){X===void 0&&(X={}),Object.defineProperty(O,"_classRegistryKey",{value:A,writeable:!1}),ti[A]={klass:O,omit:X.omit||[],shallow:X.shallow||[]}}for(var $n in Jr("Object",Object),un.serialize=function(A,O){var X=A.toArrayBuffer();return O&&O.push(X),{buffer:X}},un.deserialize=function(A){return new un(A.buffer)},Jr("Grid",un),Jr("Color",ur),Jr("Error",Error),Jr("ResolvedImage",yr),Jr("StylePropertyFunction",_r),Jr("StyleExpression",$t,{omit:["_evaluator"]}),Jr("ZoomDependentExpression",hr),Jr("ZoomConstantExpression",ir),Jr("CompoundExpression",bn,{omit:["_evaluate"]}),Go)Go[$n]._classRegistryKey||Jr("Expression_"+$n,Go[$n]);function In(A){return A&&typeof ArrayBuffer!="undefined"&&(A instanceof ArrayBuffer||A.constructor&&A.constructor.name==="ArrayBuffer")}function jn(A){return Vn&&A instanceof Vn}function Kn(A,O){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp)return A;if(In(A)||jn(A))return O&&O.push(A),A;if(ArrayBuffer.isView(A)){var X=A;return O&&O.push(X.buffer),X}if(A instanceof Fn)return O&&O.push(A.data.buffer),A;if(Array.isArray(A)){for(var ie=[],pe=0,ye=A;pe<ye.length;pe+=1){var Le=ye[pe];ie.push(Kn(Le,O))}return ie}if(typeof A=="object"){var Ne=A.constructor,Qe=Ne._classRegistryKey;if(!Qe)throw new Error("can't serialize object of unregistered class");var ht=Ne.serialize?Ne.serialize(A,O):{};if(!Ne.serialize){for(var vt in A)if(A.hasOwnProperty(vt)&&!(ti[Qe].omit.indexOf(vt)>=0)){var jt=A[vt];ht[vt]=ti[Qe].shallow.indexOf(vt)>=0?jt:Kn(jt,O)}A instanceof Error&&(ht.message=A.message)}if(ht.$name)throw new Error("$name property is reserved for worker serialization logic.");return Qe!=="Object"&&(ht.$name=Qe),ht}throw new Error("can't serialize object of type "+typeof A)}function _i(A){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||In(A)||jn(A)||ArrayBuffer.isView(A)||A instanceof Fn)return A;if(Array.isArray(A))return A.map(_i);if(typeof A=="object"){var O=A.$name||"Object",X=ti[O].klass;if(!X)throw new Error("can't deserialize unregistered class "+O);if(X.deserialize)return X.deserialize(A);for(var ie=Object.create(X.prototype),pe=0,ye=Object.keys(A);pe<ye.length;pe+=1){var Le=ye[pe];if(Le!=="$name"){var Ne=A[Le];ie[Le]=ti[O].shallow.indexOf(Le)>=0?Ne:_i(Ne)}}return ie}throw new Error("can't deserialize object of type "+typeof A)}var Si=function(){this.first=!0};Si.prototype.update=function(A,O){var X=Math.floor(A);return this.first?(this.first=!1,this.lastIntegerZoom=X,this.lastIntegerZoomTime=0,this.lastZoom=A,this.lastFloorZoom=X,!0):(this.lastFloorZoom>X?(this.lastIntegerZoom=X+1,this.lastIntegerZoomTime=O):this.lastFloorZoom<X&&(this.lastIntegerZoom=X,this.lastIntegerZoomTime=O),A!==this.lastZoom&&(this.lastZoom=A,this.lastFloorZoom=X,!0))};var En={"Latin-1 Supplement":function(A){return A>=128&&A<=255},Arabic:function(A){return A>=1536&&A<=1791},"Arabic Supplement":function(A){return A>=1872&&A<=1919},"Arabic Extended-A":function(A){return A>=2208&&A<=2303},"Hangul Jamo":function(A){return A>=4352&&A<=4607},"Unified Canadian Aboriginal Syllabics":function(A){return A>=5120&&A<=5759},Khmer:function(A){return A>=6016&&A<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(A){return A>=6320&&A<=6399},"General Punctuation":function(A){return A>=8192&&A<=8303},"Letterlike Symbols":function(A){return A>=8448&&A<=8527},"Number Forms":function(A){return A>=8528&&A<=8591},"Miscellaneous Technical":function(A){return A>=8960&&A<=9215},"Control Pictures":function(A){return A>=9216&&A<=9279},"Optical Character Recognition":function(A){return A>=9280&&A<=9311},"Enclosed Alphanumerics":function(A){return A>=9312&&A<=9471},"Geometric Shapes":function(A){return A>=9632&&A<=9727},"Miscellaneous Symbols":function(A){return A>=9728&&A<=9983},"Miscellaneous Symbols and Arrows":function(A){return A>=11008&&A<=11263},"CJK Radicals Supplement":function(A){return A>=11904&&A<=12031},"Kangxi Radicals":function(A){return A>=12032&&A<=12255},"Ideographic Description Characters":function(A){return A>=12272&&A<=12287},"CJK Symbols and Punctuation":function(A){return A>=12288&&A<=12351},Hiragana:function(A){return A>=12352&&A<=12447},Katakana:function(A){return A>=12448&&A<=12543},Bopomofo:function(A){return A>=12544&&A<=12591},"Hangul Compatibility Jamo":function(A){return A>=12592&&A<=12687},Kanbun:function(A){return A>=12688&&A<=12703},"Bopomofo Extended":function(A){return A>=12704&&A<=12735},"CJK Strokes":function(A){return A>=12736&&A<=12783},"Katakana Phonetic Extensions":function(A){return A>=12784&&A<=12799},"Enclosed CJK Letters and Months":function(A){return A>=12800&&A<=13055},"CJK Compatibility":function(A){return A>=13056&&A<=13311},"CJK Unified Ideographs Extension A":function(A){return A>=13312&&A<=19903},"Yijing Hexagram Symbols":function(A){return A>=19904&&A<=19967},"CJK Unified Ideographs":function(A){return A>=19968&&A<=40959},"Yi Syllables":function(A){return A>=40960&&A<=42127},"Yi Radicals":function(A){return A>=42128&&A<=42191},"Hangul Jamo Extended-A":function(A){return A>=43360&&A<=43391},"Hangul Syllables":function(A){return A>=44032&&A<=55215},"Hangul Jamo Extended-B":function(A){return A>=55216&&A<=55295},"Private Use Area":function(A){return A>=57344&&A<=63743},"CJK Compatibility Ideographs":function(A){return A>=63744&&A<=64255},"Arabic Presentation Forms-A":function(A){return A>=64336&&A<=65023},"Vertical Forms":function(A){return A>=65040&&A<=65055},"CJK Compatibility Forms":function(A){return A>=65072&&A<=65103},"Small Form Variants":function(A){return A>=65104&&A<=65135},"Arabic Presentation Forms-B":function(A){return A>=65136&&A<=65279},"Halfwidth and Fullwidth Forms":function(A){return A>=65280&&A<=65519}};function Pi(A){for(var O=0,X=A;O<X.length;O+=1)if(pi(X[O].charCodeAt(0)))return!0;return!1}function Ai(A){return!En.Arabic(A)&&!En["Arabic Supplement"](A)&&!En["Arabic Extended-A"](A)&&!En["Arabic Presentation Forms-A"](A)&&!En["Arabic Presentation Forms-B"](A)}function pi(A){return A===746||A===747||!(A<4352)&&(!!En["Bopomofo Extended"](A)||!!En.Bopomofo(A)||!(!En["CJK Compatibility Forms"](A)||A>=65097&&A<=65103)||!!En["CJK Compatibility Ideographs"](A)||!!En["CJK Compatibility"](A)||!!En["CJK Radicals Supplement"](A)||!!En["CJK Strokes"](A)||!(!En["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||A===12336)||!!En["CJK Unified Ideographs Extension A"](A)||!!En["CJK Unified Ideographs"](A)||!!En["Enclosed CJK Letters and Months"](A)||!!En["Hangul Compatibility Jamo"](A)||!!En["Hangul Jamo Extended-A"](A)||!!En["Hangul Jamo Extended-B"](A)||!!En["Hangul Jamo"](A)||!!En["Hangul Syllables"](A)||!!En.Hiragana(A)||!!En["Ideographic Description Characters"](A)||!!En.Kanbun(A)||!!En["Kangxi Radicals"](A)||!!En["Katakana Phonetic Extensions"](A)||!(!En.Katakana(A)||A===12540)||!(!En["Halfwidth and Fullwidth Forms"](A)||A===65288||A===65289||A===65293||A>=65306&&A<=65310||A===65339||A===65341||A===65343||A>=65371&&A<=65503||A===65507||A>=65512&&A<=65519)||!(!En["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||!!En["Unified Canadian Aboriginal Syllabics"](A)||!!En["Unified Canadian Aboriginal Syllabics Extended"](A)||!!En["Vertical Forms"](A)||!!En["Yijing Hexagram Symbols"](A)||!!En["Yi Syllables"](A)||!!En["Yi Radicals"](A))}function Ii(A){return!(pi(A)||function(O){return!(!En["Latin-1 Supplement"](O)||O!==167&&O!==169&&O!==174&&O!==177&&O!==188&&O!==189&&O!==190&&O!==215&&O!==247)||!(!En["General Punctuation"](O)||O!==8214&&O!==8224&&O!==8225&&O!==8240&&O!==8241&&O!==8251&&O!==8252&&O!==8258&&O!==8263&&O!==8264&&O!==8265&&O!==8273)||!!En["Letterlike Symbols"](O)||!!En["Number Forms"](O)||!(!En["Miscellaneous Technical"](O)||!(O>=8960&&O<=8967||O>=8972&&O<=8991||O>=8996&&O<=9e3||O===9003||O>=9085&&O<=9114||O>=9150&&O<=9165||O===9167||O>=9169&&O<=9179||O>=9186&&O<=9215))||!(!En["Control Pictures"](O)||O===9251)||!!En["Optical Character Recognition"](O)||!!En["Enclosed Alphanumerics"](O)||!!En["Geometric Shapes"](O)||!(!En["Miscellaneous Symbols"](O)||O>=9754&&O<=9759)||!(!En["Miscellaneous Symbols and Arrows"](O)||!(O>=11026&&O<=11055||O>=11088&&O<=11097||O>=11192&&O<=11243))||!!En["CJK Symbols and Punctuation"](O)||!!En.Katakana(O)||!!En["Private Use Area"](O)||!!En["CJK Compatibility Forms"](O)||!!En["Small Form Variants"](O)||!!En["Halfwidth and Fullwidth Forms"](O)||O===8734||O===8756||O===8757||O>=9984&&O<=10087||O>=10102&&O<=10131||O===65532||O===65533}(A))}function Ti(A){return A>=1424&&A<=2303||En["Arabic Presentation Forms-A"](A)||En["Arabic Presentation Forms-B"](A)}function Ki(A,O){return!(!O&&Ti(A))&&!(A>=2304&&A<=3583||A>=3840&&A<=4255||En.Khmer(A))}function Qn(A){for(var O=0,X=A;O<X.length;O+=1)if(Ti(X[O].charCodeAt(0)))return!0;return!1}var Gi="deferred",Ua="loading",ts="loaded",Bo="error",xo=null,gi="unavailable",da=null,bo=function(A){A&&typeof A=="string"&&A.indexOf("NetworkError")>-1&&(gi=Bo),xo&&xo(A)};function Yi(){ka.fire(new Se("pluginStateChange",{pluginStatus:gi,pluginURL:da}))}var ka=new De,Ya=function(){return gi},ea=function(){if(gi!==Gi||!da)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");gi=Ua,Yi(),da&&At({url:da},function(A){A?bo(A):(gi=ts,Yi())})},ho={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return gi===ts||ho.applyArabicShaping!=null},isLoading:function(){return gi===Ua},setState:function(A){gi=A.pluginStatus,da=A.pluginURL},isParsed:function(){return ho.applyArabicShaping!=null&&ho.processBidirectionalText!=null&&ho.processStyledBidirectionalText!=null},getPluginURL:function(){return da}},ta=function(A,O){this.zoom=A,O?(this.now=O.now,this.fadeDuration=O.fadeDuration,this.zoomHistory=O.zoomHistory,this.transition=O.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Si,this.transition={})};ta.prototype.isSupportedScript=function(A){return function(O,X){for(var ie=0,pe=O;ie<pe.length;ie+=1)if(!Ki(pe[ie].charCodeAt(0),X))return!1;return!0}(A,ho.isLoaded())},ta.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ta.prototype.getCrossfadeParameters=function(){var A=this.zoom,O=A-Math.floor(A),X=this.crossFadingFactor();return A>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:O+(1-O)*X}:{fromScale:.5,toScale:1,t:1-(1-X)*O}};var io=function(A,O){this.property=A,this.value=O,this.expression=function(X,ie){if(je(X))return new _r(X,ie);if(er(X)){var pe=xr(X,ie);if(pe.result==="error")throw new Error(pe.value.map(function(Le){return Le.key+": "+Le.message}).join(", "));return pe.value}var ye=X;return typeof X=="string"&&ie.type==="color"&&(ye=ur.parse(X)),{kind:"constant",evaluate:function(){return ye}}}(O===void 0?A.specification.default:O,A.specification)};io.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},io.prototype.possiblyEvaluate=function(A,O,X){return this.property.possiblyEvaluate(this,A,O,X)};var vs=function(A){this.property=A,this.value=new io(A,void 0)};vs.prototype.transitioned=function(A,O){return new rl(this.property,this.value,O,d({},A.transition,this.transition),A.now)},vs.prototype.untransitioned=function(){return new rl(this.property,this.value,null,{},0)};var cs=function(A){this._properties=A,this._values=Object.create(A.defaultTransitionablePropertyValues)};cs.prototype.getValue=function(A){return k(this._values[A].value.value)},cs.prototype.setValue=function(A,O){this._values.hasOwnProperty(A)||(this._values[A]=new vs(this._values[A].property)),this._values[A].value=new io(this._values[A].property,O===null?void 0:k(O))},cs.prototype.getTransition=function(A){return k(this._values[A].transition)},cs.prototype.setTransition=function(A,O){this._values.hasOwnProperty(A)||(this._values[A]=new vs(this._values[A].property)),this._values[A].transition=k(O)||void 0},cs.prototype.serialize=function(){for(var A={},O=0,X=Object.keys(this._values);O<X.length;O+=1){var ie=X[O],pe=this.getValue(ie);pe!==void 0&&(A[ie]=pe);var ye=this.getTransition(ie);ye!==void 0&&(A[ie+"-transition"]=ye)}return A},cs.prototype.transitioned=function(A,O){for(var X=new za(this._properties),ie=0,pe=Object.keys(this._values);ie<pe.length;ie+=1){var ye=pe[ie];X._values[ye]=this._values[ye].transitioned(A,O._values[ye])}return X},cs.prototype.untransitioned=function(){for(var A=new za(this._properties),O=0,X=Object.keys(this._values);O<X.length;O+=1){var ie=X[O];A._values[ie]=this._values[ie].untransitioned()}return A};var rl=function(A,O,X,ie,pe){this.property=A,this.value=O,this.begin=pe+ie.delay||0,this.end=this.begin+ie.duration||0,A.specification.transition&&(ie.delay||ie.duration)&&(this.prior=X)};rl.prototype.possiblyEvaluate=function(A,O,X){var ie=A.now||0,pe=this.value.possiblyEvaluate(A,O,X),ye=this.prior;if(ye){if(ie>this.end)return this.prior=null,pe;if(this.value.isDataDriven())return this.prior=null,pe;if(ie<this.begin)return ye.possiblyEvaluate(A,O,X);var Le=(ie-this.begin)/(this.end-this.begin);return this.property.interpolate(ye.possiblyEvaluate(A,O,X),pe,function(Ne){if(Ne<=0)return 0;if(Ne>=1)return 1;var Qe=Ne*Ne,ht=Qe*Ne;return 4*(Ne<.5?ht:3*(Ne-Qe)+ht-.75)}(Le))}return pe};var za=function(A){this._properties=A,this._values=Object.create(A.defaultTransitioningPropertyValues)};za.prototype.possiblyEvaluate=function(A,O,X){for(var ie=new us(this._properties),pe=0,ye=Object.keys(this._values);pe<ye.length;pe+=1){var Le=ye[pe];ie._values[Le]=this._values[Le].possiblyEvaluate(A,O,X)}return ie},za.prototype.hasTransition=function(){for(var A=0,O=Object.keys(this._values);A<O.length;A+=1){var X=O[A];if(this._values[X].prior)return!0}return!1};var nl=function(A){this._properties=A,this._values=Object.create(A.defaultPropertyValues)};nl.prototype.getValue=function(A){return k(this._values[A].value)},nl.prototype.setValue=function(A,O){this._values[A]=new io(this._values[A].property,O===null?void 0:k(O))},nl.prototype.serialize=function(){for(var A={},O=0,X=Object.keys(this._values);O<X.length;O+=1){var ie=X[O],pe=this.getValue(ie);pe!==void 0&&(A[ie]=pe)}return A},nl.prototype.possiblyEvaluate=function(A,O,X){for(var ie=new us(this._properties),pe=0,ye=Object.keys(this._values);pe<ye.length;pe+=1){var Le=ye[pe];ie._values[Le]=this._values[Le].possiblyEvaluate(A,O,X)}return ie};var Ra=function(A,O,X){this.property=A,this.value=O,this.parameters=X};Ra.prototype.isConstant=function(){return this.value.kind==="constant"},Ra.prototype.constantOr=function(A){return this.value.kind==="constant"?this.value.value:A},Ra.prototype.evaluate=function(A,O,X,ie){return this.property.evaluate(this.value,this.parameters,A,O,X,ie)};var us=function(A){this._properties=A,this._values=Object.create(A.defaultPossiblyEvaluatedValues)};us.prototype.get=function(A){return this._values[A]};var si=function(A){this.specification=A};si.prototype.possiblyEvaluate=function(A,O){return A.expression.evaluate(O)},si.prototype.interpolate=function(A,O,X){var ie=vn[this.specification.type];return ie?ie(A,O,X):A};var vi=function(A,O){this.specification=A,this.overrides=O};vi.prototype.possiblyEvaluate=function(A,O,X,ie){return A.expression.kind==="constant"||A.expression.kind==="camera"?new Ra(this,{kind:"constant",value:A.expression.evaluate(O,null,{},X,ie)},O):new Ra(this,A.expression,O)},vi.prototype.interpolate=function(A,O,X){if(A.value.kind!=="constant"||O.value.kind!=="constant")return A;if(A.value.value===void 0||O.value.value===void 0)return new Ra(this,{kind:"constant",value:void 0},A.parameters);var ie=vn[this.specification.type];return ie?new Ra(this,{kind:"constant",value:ie(A.value.value,O.value.value,X)},A.parameters):A},vi.prototype.evaluate=function(A,O,X,ie,pe,ye){return A.kind==="constant"?A.value:A.evaluate(O,X,ie,pe,ye)};var il=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.possiblyEvaluate=function(X,ie,pe,ye){if(X.value===void 0)return new Ra(this,{kind:"constant",value:void 0},ie);if(X.expression.kind==="constant"){var Le=X.expression.evaluate(ie,null,{},pe,ye),Ne=X.property.specification.type==="resolvedImage"&&typeof Le!="string"?Le.name:Le,Qe=this._calculate(Ne,Ne,Ne,ie);return new Ra(this,{kind:"constant",value:Qe},ie)}if(X.expression.kind==="camera"){var ht=this._calculate(X.expression.evaluate({zoom:ie.zoom-1}),X.expression.evaluate({zoom:ie.zoom}),X.expression.evaluate({zoom:ie.zoom+1}),ie);return new Ra(this,{kind:"constant",value:ht},ie)}return new Ra(this,X.expression,ie)},O.prototype.evaluate=function(X,ie,pe,ye,Le,Ne){if(X.kind==="source"){var Qe=X.evaluate(ie,pe,ye,Le,Ne);return this._calculate(Qe,Qe,Qe,ie)}return X.kind==="composite"?this._calculate(X.evaluate({zoom:Math.floor(ie.zoom)-1},pe,ye),X.evaluate({zoom:Math.floor(ie.zoom)},pe,ye),X.evaluate({zoom:Math.floor(ie.zoom)+1},pe,ye),ie):X.value},O.prototype._calculate=function(X,ie,pe,ye){return ye.zoom>ye.zoomHistory.lastIntegerZoom?{from:X,to:ie}:{from:pe,to:ie}},O.prototype.interpolate=function(X){return X},O}(vi),al=function(A){this.specification=A};al.prototype.possiblyEvaluate=function(A,O,X,ie){if(A.value!==void 0){if(A.expression.kind==="constant"){var pe=A.expression.evaluate(O,null,{},X,ie);return this._calculate(pe,pe,pe,O)}return this._calculate(A.expression.evaluate(new ta(Math.floor(O.zoom-1),O)),A.expression.evaluate(new ta(Math.floor(O.zoom),O)),A.expression.evaluate(new ta(Math.floor(O.zoom+1),O)),O)}},al.prototype._calculate=function(A,O,X,ie){return ie.zoom>ie.zoomHistory.lastIntegerZoom?{from:A,to:O}:{from:X,to:O}},al.prototype.interpolate=function(A){return A};var fs=function(A){this.specification=A};fs.prototype.possiblyEvaluate=function(A,O,X,ie){return!!A.expression.evaluate(O,null,{},X,ie)},fs.prototype.interpolate=function(){return!1};var Oo=function(A){for(var O in this.properties=A,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],A){var X=A[O];X.specification.overridable&&this.overridableProperties.push(O);var ie=this.defaultPropertyValues[O]=new io(X,void 0),pe=this.defaultTransitionablePropertyValues[O]=new vs(X);this.defaultTransitioningPropertyValues[O]=pe.untransitioned(),this.defaultPossiblyEvaluatedValues[O]=ie.possiblyEvaluate({})}};Jr("DataDrivenProperty",vi),Jr("DataConstantProperty",si),Jr("CrossFadedDataDrivenProperty",il),Jr("CrossFadedProperty",al),Jr("ColorRampProperty",fs);var Xo=function(A){function O(X,ie){if(A.call(this),this.id=X.id,this.type=X.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},X.type!=="custom"&&(X=X,this.metadata=X.metadata,this.minzoom=X.minzoom,this.maxzoom=X.maxzoom,X.type!=="background"&&(this.source=X.source,this.sourceLayer=X["source-layer"],this.filter=X.filter),ie.layout&&(this._unevaluatedLayout=new nl(ie.layout)),ie.paint)){for(var pe in this._transitionablePaint=new cs(ie.paint),X.paint)this.setPaintProperty(pe,X.paint[pe],{validate:!1});for(var ye in X.layout)this.setLayoutProperty(ye,X.layout[ye],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new us(ie.paint)}}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},O.prototype.getLayoutProperty=function(X){return X==="visibility"?this.visibility:this._unevaluatedLayout.getValue(X)},O.prototype.setLayoutProperty=function(X,ie,pe){if(pe===void 0&&(pe={}),ie!=null){var ye="layers."+this.id+".layout."+X;if(this._validate(mn,ye,X,ie,pe))return}X!=="visibility"?this._unevaluatedLayout.setValue(X,ie):this.visibility=ie},O.prototype.getPaintProperty=function(X){return w(X,"-transition")?this._transitionablePaint.getTransition(X.slice(0,-"-transition".length)):this._transitionablePaint.getValue(X)},O.prototype.setPaintProperty=function(X,ie,pe){if(pe===void 0&&(pe={}),ie!=null){var ye="layers."+this.id+".paint."+X;if(this._validate(nn,ye,X,ie,pe))return!1}if(w(X,"-transition"))return this._transitionablePaint.setTransition(X.slice(0,-"-transition".length),ie||void 0),!1;var Le=this._transitionablePaint._values[X],Ne=Le.property.specification["property-type"]==="cross-faded-data-driven",Qe=Le.value.isDataDriven(),ht=Le.value;this._transitionablePaint.setValue(X,ie),this._handleSpecialPaintPropertyUpdate(X);var vt=this._transitionablePaint._values[X].value;return vt.isDataDriven()||Qe||Ne||this._handleOverridablePaintPropertyUpdate(X,ht,vt)},O.prototype._handleSpecialPaintPropertyUpdate=function(X){},O.prototype._handleOverridablePaintPropertyUpdate=function(X,ie,pe){return!1},O.prototype.isHidden=function(X){return!!(this.minzoom&&X<this.minzoom)||!!(this.maxzoom&&X>=this.maxzoom)||this.visibility==="none"},O.prototype.updateTransitions=function(X){this._transitioningPaint=this._transitionablePaint.transitioned(X,this._transitioningPaint)},O.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},O.prototype.recalculate=function(X,ie){X.getCrossfadeParameters&&(this._crossfadeParameters=X.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(X,void 0,ie)),this.paint=this._transitioningPaint.possiblyEvaluate(X,void 0,ie)},O.prototype.serialize=function(){var X={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(X.layout=X.layout||{},X.layout.visibility=this.visibility),T(X,function(ie,pe){return!(ie===void 0||pe==="layout"&&!Object.keys(ie).length||pe==="paint"&&!Object.keys(ie).length)})},O.prototype._validate=function(X,ie,pe,ye,Le){return Le===void 0&&(Le={}),(!Le||Le.validate!==!1)&&wn(this,X.call(Zr,{key:ie,layerType:this.type,objectKey:pe,value:ye,styleSpec:Ie,style:{glyphs:!0,sprite:!0}}))},O.prototype.is3D=function(){return!1},O.prototype.isTileClipped=function(){return!1},O.prototype.hasOffscreenPass=function(){return!1},O.prototype.resize=function(){},O.prototype.isStateDependent=function(){for(var X in this.paint._values){var ie=this.paint.get(X);if(ie instanceof Ra&&Zo(ie.property.specification)&&(ie.value.kind==="source"||ie.value.kind==="composite")&&ie.value.isStateDependent)return!0}return!1},O}(De),Sl={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Hs=function(A,O){this._structArray=A,this._pos1=O*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Wi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function ra(A,O){O===void 0&&(O=1);var X=0,ie=0;return{members:A.map(function(pe){var ye,Le=(ye=pe.type,Sl[ye].BYTES_PER_ELEMENT),Ne=X=Ms(X,Math.max(O,Le)),Qe=pe.components||1;return ie=Math.max(ie,Le),X+=Le*Qe,{name:pe.name,type:pe.type,components:Qe,offset:Ne}}),size:Ms(X,Math.max(ie,O)),alignment:O}}function Ms(A,O){return Math.ceil(A/O)*O}Wi.serialize=function(A,O){return A._trim(),O&&(A.isTransferred=!0,O.push(A.arrayBuffer)),{length:A.length,arrayBuffer:A.arrayBuffer}},Wi.deserialize=function(A){var O=Object.create(this.prototype);return O.arrayBuffer=A.arrayBuffer,O.length=A.length,O.capacity=A.arrayBuffer.byteLength/O.bytesPerElement,O._refreshViews(),O},Wi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Wi.prototype.clear=function(){this.length=0},Wi.prototype.resize=function(A){this.reserve(A),this.length=A},Wi.prototype.reserve=function(A){if(A>this.capacity){this.capacity=Math.max(A,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var O=this.uint8;this._refreshViews(),O&&this.uint8.set(O)}},Wi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var ys=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(X,ie){var pe=this.length;return this.resize(pe+1),this.emplace(pe,X,ie)},O.prototype.emplace=function(X,ie,pe){var ye=2*X;return this.int16[ye+0]=ie,this.int16[ye+1]=pe,X},O}(Wi);ys.prototype.bytesPerElement=4,Jr("StructArrayLayout2i4",ys);var Pa=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(X,ie,pe,ye){var Le=this.length;return this.resize(Le+1),this.emplace(Le,X,ie,pe,ye)},O.prototype.emplace=function(X,ie,pe,ye,Le){var Ne=4*X;return this.int16[Ne+0]=ie,this.int16[Ne+1]=pe,this.int16[Ne+2]=ye,this.int16[Ne+3]=Le,X},O}(Wi);Pa.prototype.bytesPerElement=8,Jr("StructArrayLayout4i8",Pa);var Ss=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(X,ie,pe,ye,Le,Ne){var Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,X,ie,pe,ye,Le,Ne)},O.prototype.emplace=function(X,ie,pe,ye,Le,Ne,Qe){var ht=6*X;return this.int16[ht+0]=ie,this.int16[ht+1]=pe,this.int16[ht+2]=ye,this.int16[ht+3]=Le,this.int16[ht+4]=Ne,this.int16[ht+5]=Qe,X},O}(Wi);Ss.prototype.bytesPerElement=12,Jr("StructArrayLayout2i4i12",Ss);var qs=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(X,ie,pe,ye,Le,Ne){var Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,X,ie,pe,ye,Le,Ne)},O.prototype.emplace=function(X,ie,pe,ye,Le,Ne,Qe){var ht=4*X,vt=8*X;return this.int16[ht+0]=ie,this.int16[ht+1]=pe,this.uint8[vt+4]=ye,this.uint8[vt+5]=Le,this.uint8[vt+6]=Ne,this.uint8[vt+7]=Qe,X},O}(Wi);qs.prototype.bytesPerElement=8,Jr("StructArrayLayout2i4ub8",qs);var zs=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(X,ie,pe,ye,Le,Ne,Qe,ht,vt,jt){var Kt=this.length;return this.resize(Kt+1),this.emplace(Kt,X,ie,pe,ye,Le,Ne,Qe,ht,vt,jt)},O.prototype.emplace=function(X,ie,pe,ye,Le,Ne,Qe,ht,vt,jt,Kt){var Wt=9*X,ar=18*X;return this.uint16[Wt+0]=ie,this.uint16[Wt+1]=pe,this.uint16[Wt+2]=ye,this.uint16[Wt+3]=Le,this.uint16[Wt+4]=Ne,this.uint16[Wt+5]=Qe,this.uint16[Wt+6]=ht,this.uint16[Wt+7]=vt,this.uint8[ar+16]=jt,this.uint8[ar+17]=Kt,X},O}(Wi);zs.prototype.bytesPerElement=18,Jr("StructArrayLayout8ui2ub18",zs);var Gs=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(X,ie,pe,ye,Le,Ne,Qe,ht,vt,jt,Kt,Wt){var ar=this.length;return this.resize(ar+1),this.emplace(ar,X,ie,pe,ye,Le,Ne,Qe,ht,vt,jt,Kt,Wt)},O.prototype.emplace=function(X,ie,pe,ye,Le,Ne,Qe,ht,vt,jt,Kt,Wt,ar){var vr=12*X;return this.int16[vr+0]=ie,this.int16[vr+1]=pe,this.int16[vr+2]=ye,this.int16[vr+3]=Le,this.uint16[vr+4]=Ne,this.uint16[vr+5]=Qe,this.uint16[vr+6]=ht,this.uint16[vr+7]=vt,this.int16[vr+8]=jt,this.int16[vr+9]=Kt,this.int16[vr+10]=Wt,this.int16[vr+11]=ar,X},O}(Wi);Gs.prototype.bytesPerElement=24,Jr("StructArrayLayout4i4ui4i24",Gs);var xs=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(X,ie,pe){var ye=this.length;return this.resize(ye+1),this.emplace(ye,X,ie,pe)},O.prototype.emplace=function(X,ie,pe,ye){var Le=3*X;return this.float32[Le+0]=ie,this.float32[Le+1]=pe,this.float32[Le+2]=ye,X},O}(Wi);xs.prototype.bytesPerElement=12,Jr("StructArrayLayout3f12",xs);var El=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(X){var ie=this.length;return this.resize(ie+1),this.emplace(ie,X)},O.prototype.emplace=function(X,ie){var pe=1*X;return this.uint32[pe+0]=ie,X},O}(Wi);El.prototype.bytesPerElement=4,Jr("StructArrayLayout1ul4",El);var Vl=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(X,ie,pe,ye,Le,Ne,Qe,ht,vt){var jt=this.length;return this.resize(jt+1),this.emplace(jt,X,ie,pe,ye,Le,Ne,Qe,ht,vt)},O.prototype.emplace=function(X,ie,pe,ye,Le,Ne,Qe,ht,vt,jt){var Kt=10*X,Wt=5*X;return this.int16[Kt+0]=ie,this.int16[Kt+1]=pe,this.int16[Kt+2]=ye,this.int16[Kt+3]=Le,this.int16[Kt+4]=Ne,this.int16[Kt+5]=Qe,this.uint32[Wt+3]=ht,this.uint16[Kt+8]=vt,this.uint16[Kt+9]=jt,X},O}(Wi);Vl.prototype.bytesPerElement=20,Jr("StructArrayLayout6i1ul2ui20",Vl);var Es=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(X,ie,pe,ye,Le,Ne){var Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,X,ie,pe,ye,Le,Ne)},O.prototype.emplace=function(X,ie,pe,ye,Le,Ne,Qe){var ht=6*X;return this.int16[ht+0]=ie,this.int16[ht+1]=pe,this.int16[ht+2]=ye,this.int16[ht+3]=Le,this.int16[ht+4]=Ne,this.int16[ht+5]=Qe,X},O}(Wi);Es.prototype.bytesPerElement=12,Jr("StructArrayLayout2i2i2i12",Es);var Ll=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(X,ie,pe,ye,Le){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,X,ie,pe,ye,Le)},O.prototype.emplace=function(X,ie,pe,ye,Le,Ne){var Qe=4*X,ht=8*X;return this.float32[Qe+0]=ie,this.float32[Qe+1]=pe,this.float32[Qe+2]=ye,this.int16[ht+6]=Le,this.int16[ht+7]=Ne,X},O}(Wi);Ll.prototype.bytesPerElement=16,Jr("StructArrayLayout2f1f2i16",Ll);var Ys=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(X,ie,pe,ye){var Le=this.length;return this.resize(Le+1),this.emplace(Le,X,ie,pe,ye)},O.prototype.emplace=function(X,ie,pe,ye,Le){var Ne=12*X,Qe=3*X;return this.uint8[Ne+0]=ie,this.uint8[Ne+1]=pe,this.float32[Qe+1]=ye,this.float32[Qe+2]=Le,X},O}(Wi);Ys.prototype.bytesPerElement=12,Jr("StructArrayLayout2ub2f12",Ys);var ao=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(X,ie,pe){var ye=this.length;return this.resize(ye+1),this.emplace(ye,X,ie,pe)},O.prototype.emplace=function(X,ie,pe,ye){var Le=3*X;return this.uint16[Le+0]=ie,this.uint16[Le+1]=pe,this.uint16[Le+2]=ye,X},O}(Wi);ao.prototype.bytesPerElement=6,Jr("StructArrayLayout3ui6",ao);var Hl=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(X,ie,pe,ye,Le,Ne,Qe,ht,vt,jt,Kt,Wt,ar,vr,Cr,Lr,Nr){var jr=this.length;return this.resize(jr+1),this.emplace(jr,X,ie,pe,ye,Le,Ne,Qe,ht,vt,jt,Kt,Wt,ar,vr,Cr,Lr,Nr)},O.prototype.emplace=function(X,ie,pe,ye,Le,Ne,Qe,ht,vt,jt,Kt,Wt,ar,vr,Cr,Lr,Nr,jr){var Yr=24*X,hn=12*X,xn=48*X;return this.int16[Yr+0]=ie,this.int16[Yr+1]=pe,this.uint16[Yr+2]=ye,this.uint16[Yr+3]=Le,this.uint32[hn+2]=Ne,this.uint32[hn+3]=Qe,this.uint32[hn+4]=ht,this.uint16[Yr+10]=vt,this.uint16[Yr+11]=jt,this.uint16[Yr+12]=Kt,this.float32[hn+7]=Wt,this.float32[hn+8]=ar,this.uint8[xn+36]=vr,this.uint8[xn+37]=Cr,this.uint8[xn+38]=Lr,this.uint32[hn+10]=Nr,this.int16[Yr+22]=jr,X},O}(Wi);Hl.prototype.bytesPerElement=48,Jr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Hl);var ql=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(X,ie,pe,ye,Le,Ne,Qe,ht,vt,jt,Kt,Wt,ar,vr,Cr,Lr,Nr,jr,Yr,hn,xn,Nn,Bn,Gn,ni,ii,Xn,fi){var ci=this.length;return this.resize(ci+1),this.emplace(ci,X,ie,pe,ye,Le,Ne,Qe,ht,vt,jt,Kt,Wt,ar,vr,Cr,Lr,Nr,jr,Yr,hn,xn,Nn,Bn,Gn,ni,ii,Xn,fi)},O.prototype.emplace=function(X,ie,pe,ye,Le,Ne,Qe,ht,vt,jt,Kt,Wt,ar,vr,Cr,Lr,Nr,jr,Yr,hn,xn,Nn,Bn,Gn,ni,ii,Xn,fi,ci){var ai=34*X,Zi=17*X;return this.int16[ai+0]=ie,this.int16[ai+1]=pe,this.int16[ai+2]=ye,this.int16[ai+3]=Le,this.int16[ai+4]=Ne,this.int16[ai+5]=Qe,this.int16[ai+6]=ht,this.int16[ai+7]=vt,this.uint16[ai+8]=jt,this.uint16[ai+9]=Kt,this.uint16[ai+10]=Wt,this.uint16[ai+11]=ar,this.uint16[ai+12]=vr,this.uint16[ai+13]=Cr,this.uint16[ai+14]=Lr,this.uint16[ai+15]=Nr,this.uint16[ai+16]=jr,this.uint16[ai+17]=Yr,this.uint16[ai+18]=hn,this.uint16[ai+19]=xn,this.uint16[ai+20]=Nn,this.uint16[ai+21]=Bn,this.uint16[ai+22]=Gn,this.uint32[Zi+12]=ni,this.float32[Zi+13]=ii,this.float32[Zi+14]=Xn,this.float32[Zi+15]=fi,this.float32[Zi+16]=ci,X},O}(Wi);ql.prototype.bytesPerElement=68,Jr("StructArrayLayout8i15ui1ul4f68",ql);var ce=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(X){var ie=this.length;return this.resize(ie+1),this.emplace(ie,X)},O.prototype.emplace=function(X,ie){var pe=1*X;return this.float32[pe+0]=ie,X},O}(Wi);ce.prototype.bytesPerElement=4,Jr("StructArrayLayout1f4",ce);var C=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(X,ie,pe){var ye=this.length;return this.resize(ye+1),this.emplace(ye,X,ie,pe)},O.prototype.emplace=function(X,ie,pe,ye){var Le=3*X;return this.int16[Le+0]=ie,this.int16[Le+1]=pe,this.int16[Le+2]=ye,X},O}(Wi);C.prototype.bytesPerElement=6,Jr("StructArrayLayout3i6",C);var z=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(X,ie,pe){var ye=this.length;return this.resize(ye+1),this.emplace(ye,X,ie,pe)},O.prototype.emplace=function(X,ie,pe,ye){var Le=2*X,Ne=4*X;return this.uint32[Le+0]=ie,this.uint16[Ne+2]=pe,this.uint16[Ne+3]=ye,X},O}(Wi);z.prototype.bytesPerElement=8,Jr("StructArrayLayout1ul2ui8",z);var B=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(X,ie){var pe=this.length;return this.resize(pe+1),this.emplace(pe,X,ie)},O.prototype.emplace=function(X,ie,pe){var ye=2*X;return this.uint16[ye+0]=ie,this.uint16[ye+1]=pe,X},O}(Wi);B.prototype.bytesPerElement=4,Jr("StructArrayLayout2ui4",B);var G=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(X){var ie=this.length;return this.resize(ie+1),this.emplace(ie,X)},O.prototype.emplace=function(X,ie){var pe=1*X;return this.uint16[pe+0]=ie,X},O}(Wi);G.prototype.bytesPerElement=2,Jr("StructArrayLayout1ui2",G);var ae=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(X,ie){var pe=this.length;return this.resize(pe+1),this.emplace(pe,X,ie)},O.prototype.emplace=function(X,ie,pe){var ye=2*X;return this.float32[ye+0]=ie,this.float32[ye+1]=pe,X},O}(Wi);ae.prototype.bytesPerElement=8,Jr("StructArrayLayout2f8",ae);var ue=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(X,ie,pe,ye){var Le=this.length;return this.resize(Le+1),this.emplace(Le,X,ie,pe,ye)},O.prototype.emplace=function(X,ie,pe,ye,Le){var Ne=4*X;return this.float32[Ne+0]=ie,this.float32[Ne+1]=pe,this.float32[Ne+2]=ye,this.float32[Ne+3]=Le,X},O}(Wi);ue.prototype.bytesPerElement=16,Jr("StructArrayLayout4f16",ue);var ge=function(A){function O(){A.apply(this,arguments)}A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O;var X={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return X.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},X.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},X.x1.get=function(){return this._structArray.int16[this._pos2+2]},X.y1.get=function(){return this._structArray.int16[this._pos2+3]},X.x2.get=function(){return this._structArray.int16[this._pos2+4]},X.y2.get=function(){return this._structArray.int16[this._pos2+5]},X.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},X.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},X.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},X.anchorPoint.get=function(){return new n(this.anchorPointX,this.anchorPointY)},Object.defineProperties(O.prototype,X),O}(Hs);ge.prototype.size=20;var _e=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.get=function(X){return new ge(this,X)},O}(Vl);Jr("CollisionBoxArray",_e);var Ee=function(A){function O(){A.apply(this,arguments)}A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O;var X={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return X.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},X.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},X.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},X.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},X.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},X.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},X.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},X.segment.get=function(){return this._structArray.uint16[this._pos2+10]},X.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},X.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},X.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},X.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},X.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},X.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},X.placedOrientation.set=function(ie){this._structArray.uint8[this._pos1+37]=ie},X.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},X.hidden.set=function(ie){this._structArray.uint8[this._pos1+38]=ie},X.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},X.crossTileID.set=function(ie){this._structArray.uint32[this._pos4+10]=ie},X.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(O.prototype,X),O}(Hs);Ee.prototype.size=48;var He=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.get=function(X){return new Ee(this,X)},O}(Hl);Jr("PlacedSymbolArray",He);var Xe=function(A){function O(){A.apply(this,arguments)}A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O;var X={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return X.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},X.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},X.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},X.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},X.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},X.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},X.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},X.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},X.key.get=function(){return this._structArray.uint16[this._pos2+8]},X.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},X.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},X.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},X.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},X.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},X.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},X.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},X.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},X.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},X.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},X.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},X.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},X.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},X.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},X.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},X.crossTileID.set=function(ie){this._structArray.uint32[this._pos4+12]=ie},X.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},X.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},X.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},X.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(O.prototype,X),O}(Hs);Xe.prototype.size=68;var at=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.get=function(X){return new Xe(this,X)},O}(ql);Jr("SymbolInstanceArray",at);var _t=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.getoffsetX=function(X){return this.float32[1*X+0]},O}(ce);Jr("GlyphOffsetArray",_t);var St=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.getx=function(X){return this.int16[3*X+0]},O.prototype.gety=function(X){return this.int16[3*X+1]},O.prototype.gettileUnitDistanceFromAnchor=function(X){return this.int16[3*X+2]},O}(C);Jr("SymbolLineVertexArray",St);var Tt=function(A){function O(){A.apply(this,arguments)}A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O;var X={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return X.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},X.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},X.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(O.prototype,X),O}(Hs);Tt.prototype.size=8;var kt=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.get=function(X){return new Tt(this,X)},O}(z);Jr("FeatureIndexArray",kt);var bt=ra([{name:"a_pos",components:2,type:"Int16"}],4).members,Nt=function(A){A===void 0&&(A=[]),this.segments=A};function zt(A,O){return 256*(A=l(Math.floor(A),0,255))+(O=l(Math.floor(O),0,255))}Nt.prototype.prepareSegment=function(A,O,X,ie){var pe=this.segments[this.segments.length-1];return A>Nt.MAX_VERTEX_ARRAY_LENGTH&&M("Max vertices per segment is "+Nt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+A),(!pe||pe.vertexLength+A>Nt.MAX_VERTEX_ARRAY_LENGTH||pe.sortKey!==ie)&&(pe={vertexOffset:O.length,primitiveOffset:X.length,vertexLength:0,primitiveLength:0},ie!==void 0&&(pe.sortKey=ie),this.segments.push(pe)),pe},Nt.prototype.get=function(){return this.segments},Nt.prototype.destroy=function(){for(var A=0,O=this.segments;A<O.length;A+=1){var X=O[A];for(var ie in X.vaos)X.vaos[ie].destroy()}},Nt.simpleSegment=function(A,O,X,ie){return new Nt([{vertexOffset:A,primitiveOffset:O,vertexLength:X,primitiveLength:ie,vaos:{},sortKey:0}])},Nt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Jr("SegmentVector",Nt);var Ut=ra([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),nr=r(function(A){A.exports=function(O,X){var ie,pe,ye,Le,Ne,Qe,ht,vt;for(ie=3&O.length,pe=O.length-ie,ye=X,Ne=3432918353,Qe=461845907,vt=0;vt<pe;)ht=255&O.charCodeAt(vt)|(255&O.charCodeAt(++vt))<<8|(255&O.charCodeAt(++vt))<<16|(255&O.charCodeAt(++vt))<<24,++vt,ye=27492+(65535&(Le=5*(65535&(ye=(ye^=ht=(65535&(ht=(ht=(65535&ht)*Ne+(((ht>>>16)*Ne&65535)<<16)&4294967295)<<15|ht>>>17))*Qe+(((ht>>>16)*Qe&65535)<<16)&4294967295)<<13|ye>>>19))+((5*(ye>>>16)&65535)<<16)&4294967295))+((58964+(Le>>>16)&65535)<<16);switch(ht=0,ie){case 3:ht^=(255&O.charCodeAt(vt+2))<<16;case 2:ht^=(255&O.charCodeAt(vt+1))<<8;case 1:ye^=ht=(65535&(ht=(ht=(65535&(ht^=255&O.charCodeAt(vt)))*Ne+(((ht>>>16)*Ne&65535)<<16)&4294967295)<<15|ht>>>17))*Qe+(((ht>>>16)*Qe&65535)<<16)&4294967295}return ye^=O.length,ye=2246822507*(65535&(ye^=ye>>>16))+((2246822507*(ye>>>16)&65535)<<16)&4294967295,ye=3266489909*(65535&(ye^=ye>>>13))+((3266489909*(ye>>>16)&65535)<<16)&4294967295,(ye^=ye>>>16)>>>0}}),pr=r(function(A){A.exports=function(O,X){for(var ie,pe=O.length,ye=X^pe,Le=0;pe>=4;)ie=1540483477*(65535&(ie=255&O.charCodeAt(Le)|(255&O.charCodeAt(++Le))<<8|(255&O.charCodeAt(++Le))<<16|(255&O.charCodeAt(++Le))<<24))+((1540483477*(ie>>>16)&65535)<<16),ye=1540483477*(65535&ye)+((1540483477*(ye>>>16)&65535)<<16)^(ie=1540483477*(65535&(ie^=ie>>>24))+((1540483477*(ie>>>16)&65535)<<16)),pe-=4,++Le;switch(pe){case 3:ye^=(255&O.charCodeAt(Le+2))<<16;case 2:ye^=(255&O.charCodeAt(Le+1))<<8;case 1:ye=1540483477*(65535&(ye^=255&O.charCodeAt(Le)))+((1540483477*(ye>>>16)&65535)<<16)}return ye=1540483477*(65535&(ye^=ye>>>13))+((1540483477*(ye>>>16)&65535)<<16),(ye^=ye>>>15)>>>0}}),Mr=nr,kr=nr,Qr=pr;Mr.murmur3=kr,Mr.murmur2=Qr;var $r=function(){this.ids=[],this.positions=[],this.indexed=!1};$r.prototype.add=function(A,O,X,ie){this.ids.push(sn(A)),this.positions.push(O,X,ie)},$r.prototype.getPositions=function(A){for(var O=sn(A),X=0,ie=this.ids.length-1;X<ie;){var pe=X+ie>>1;this.ids[pe]>=O?ie=pe:X=pe+1}for(var ye=[];this.ids[X]===O;){var Le=this.positions[3*X],Ne=this.positions[3*X+1],Qe=this.positions[3*X+2];ye.push({index:Le,start:Ne,end:Qe}),X++}return ye},$r.serialize=function(A,O){var X=new Float64Array(A.ids),ie=new Uint32Array(A.positions);return function pe(ye,Le,Ne,Qe){for(;Ne<Qe;){for(var ht=ye[Ne+Qe>>1],vt=Ne-1,jt=Qe+1;;){do vt++;while(ye[vt]<ht);do jt--;while(ye[jt]>ht);if(vt>=jt)break;Un(ye,vt,jt),Un(Le,3*vt,3*jt),Un(Le,3*vt+1,3*jt+1),Un(Le,3*vt+2,3*jt+2)}jt-Ne<Qe-jt?(pe(ye,Le,Ne,jt),Ne=jt+1):(pe(ye,Le,jt+1,Qe),Qe=jt)}}(X,ie,0,X.length-1),O&&O.push(X.buffer,ie.buffer),{ids:X,positions:ie}},$r.deserialize=function(A){var O=new $r;return O.ids=A.ids,O.positions=A.positions,O.indexed=!0,O};var pn=Math.pow(2,53)-1;function sn(A){var O=+A;return!isNaN(O)&&O<=pn?O:Mr(String(A))}function Un(A,O,X){var ie=A[O];A[O]=A[X],A[X]=ie}Jr("FeaturePositionMap",$r);var Wn=function(A,O){this.gl=A.gl,this.location=O},li=function(A){function O(X,ie){A.call(this,X,ie),this.current=0}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.set=function(X){this.current!==X&&(this.current=X,this.gl.uniform1i(this.location,X))},O}(Wn),Hr=function(A){function O(X,ie){A.call(this,X,ie),this.current=0}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.set=function(X){this.current!==X&&(this.current=X,this.gl.uniform1f(this.location,X))},O}(Wn),kn=function(A){function O(X,ie){A.call(this,X,ie),this.current=[0,0]}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.set=function(X){X[0]===this.current[0]&&X[1]===this.current[1]||(this.current=X,this.gl.uniform2f(this.location,X[0],X[1]))},O}(Wn),Zn=function(A){function O(X,ie){A.call(this,X,ie),this.current=[0,0,0]}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.set=function(X){X[0]===this.current[0]&&X[1]===this.current[1]&&X[2]===this.current[2]||(this.current=X,this.gl.uniform3f(this.location,X[0],X[1],X[2]))},O}(Wn),qn=function(A){function O(X,ie){A.call(this,X,ie),this.current=[0,0,0,0]}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.set=function(X){X[0]===this.current[0]&&X[1]===this.current[1]&&X[2]===this.current[2]&&X[3]===this.current[3]||(this.current=X,this.gl.uniform4f(this.location,X[0],X[1],X[2],X[3]))},O}(Wn),ei=function(A){function O(X,ie){A.call(this,X,ie),this.current=ur.transparent}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.set=function(X){X.r===this.current.r&&X.g===this.current.g&&X.b===this.current.b&&X.a===this.current.a||(this.current=X,this.gl.uniform4f(this.location,X.r,X.g,X.b,X.a))},O}(Wn),ui=new Float32Array(16),ki=function(A){function O(X,ie){A.call(this,X,ie),this.current=ui}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.set=function(X){if(X[12]!==this.current[12]||X[0]!==this.current[0])return this.current=X,void this.gl.uniformMatrix4fv(this.location,!1,X);for(var ie=1;ie<16;ie++)if(X[ie]!==this.current[ie]){this.current=X,this.gl.uniformMatrix4fv(this.location,!1,X);break}},O}(Wn);function Jn(A){return[zt(255*A.r,255*A.g),zt(255*A.b,255*A.a)]}var yi=function(A,O,X){this.value=A,this.uniformNames=O.map(function(ie){return"u_"+ie}),this.type=X};yi.prototype.setUniform=function(A,O,X){A.set(X.constantOr(this.value))},yi.prototype.getBinding=function(A,O,X){return this.type==="color"?new ei(A,O):new Hr(A,O)};var mi=function(A,O){this.uniformNames=O.map(function(X){return"u_"+X}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};mi.prototype.setConstantPatternPositions=function(A,O){this.pixelRatioFrom=O.pixelRatio,this.pixelRatioTo=A.pixelRatio,this.patternFrom=O.tlbr,this.patternTo=A.tlbr},mi.prototype.setUniform=function(A,O,X,ie){var pe=ie==="u_pattern_to"?this.patternTo:ie==="u_pattern_from"?this.patternFrom:ie==="u_pixel_ratio_to"?this.pixelRatioTo:ie==="u_pixel_ratio_from"?this.pixelRatioFrom:null;pe&&A.set(pe)},mi.prototype.getBinding=function(A,O,X){return X.substr(0,9)==="u_pattern"?new qn(A,O):new Hr(A,O)};var Ei=function(A,O,X,ie){this.expression=A,this.type=X,this.maxValue=0,this.paintVertexAttributes=O.map(function(pe){return{name:"a_"+pe,type:"Float32",components:X==="color"?2:1,offset:0}}),this.paintVertexArray=new ie};Ei.prototype.populatePaintArray=function(A,O,X,ie,pe){var ye=this.paintVertexArray.length,Le=this.expression.evaluate(new ta(0),O,{},ie,[],pe);this.paintVertexArray.resize(A),this._setPaintValue(ye,A,Le)},Ei.prototype.updatePaintArray=function(A,O,X,ie){var pe=this.expression.evaluate({zoom:0},X,ie);this._setPaintValue(A,O,pe)},Ei.prototype._setPaintValue=function(A,O,X){if(this.type==="color")for(var ie=Jn(X),pe=A;pe<O;pe++)this.paintVertexArray.emplace(pe,ie[0],ie[1]);else{for(var ye=A;ye<O;ye++)this.paintVertexArray.emplace(ye,X);this.maxValue=Math.max(this.maxValue,Math.abs(X))}},Ei.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ei.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var xi=function(A,O,X,ie,pe,ye){this.expression=A,this.uniformNames=O.map(function(Le){return"u_"+Le+"_t"}),this.type=X,this.useIntegerZoom=ie,this.zoom=pe,this.maxValue=0,this.paintVertexAttributes=O.map(function(Le){return{name:"a_"+Le,type:"Float32",components:X==="color"?4:2,offset:0}}),this.paintVertexArray=new ye};xi.prototype.populatePaintArray=function(A,O,X,ie,pe){var ye=this.expression.evaluate(new ta(this.zoom),O,{},ie,[],pe),Le=this.expression.evaluate(new ta(this.zoom+1),O,{},ie,[],pe),Ne=this.paintVertexArray.length;this.paintVertexArray.resize(A),this._setPaintValue(Ne,A,ye,Le)},xi.prototype.updatePaintArray=function(A,O,X,ie){var pe=this.expression.evaluate({zoom:this.zoom},X,ie),ye=this.expression.evaluate({zoom:this.zoom+1},X,ie);this._setPaintValue(A,O,pe,ye)},xi.prototype._setPaintValue=function(A,O,X,ie){if(this.type==="color")for(var pe=Jn(X),ye=Jn(ie),Le=A;Le<O;Le++)this.paintVertexArray.emplace(Le,pe[0],pe[1],ye[0],ye[1]);else{for(var Ne=A;Ne<O;Ne++)this.paintVertexArray.emplace(Ne,X,ie);this.maxValue=Math.max(this.maxValue,Math.abs(X),Math.abs(ie))}},xi.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},xi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},xi.prototype.setUniform=function(A,O){var X=this.useIntegerZoom?Math.floor(O.zoom):O.zoom,ie=l(this.expression.interpolationFactor(X,this.zoom,this.zoom+1),0,1);A.set(ie)},xi.prototype.getBinding=function(A,O,X){return new Hr(A,O)};var Li=function(A,O,X,ie,pe,ye){this.expression=A,this.type=O,this.useIntegerZoom=X,this.zoom=ie,this.layerId=ye,this.zoomInPaintVertexArray=new pe,this.zoomOutPaintVertexArray=new pe};Li.prototype.populatePaintArray=function(A,O,X){var ie=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(A),this.zoomOutPaintVertexArray.resize(A),this._setPaintValues(ie,A,O.patterns&&O.patterns[this.layerId],X)},Li.prototype.updatePaintArray=function(A,O,X,ie,pe){this._setPaintValues(A,O,X.patterns&&X.patterns[this.layerId],pe)},Li.prototype._setPaintValues=function(A,O,X,ie){if(ie&&X){var pe=X.min,ye=X.mid,Le=X.max,Ne=ie[pe],Qe=ie[ye],ht=ie[Le];if(Ne&&Qe&&ht)for(var vt=A;vt<O;vt++)this.zoomInPaintVertexArray.emplace(vt,Qe.tl[0],Qe.tl[1],Qe.br[0],Qe.br[1],Ne.tl[0],Ne.tl[1],Ne.br[0],Ne.br[1],Qe.pixelRatio,Ne.pixelRatio),this.zoomOutPaintVertexArray.emplace(vt,Qe.tl[0],Qe.tl[1],Qe.br[0],Qe.br[1],ht.tl[0],ht.tl[1],ht.br[0],ht.br[1],Qe.pixelRatio,ht.pixelRatio)}},Li.prototype.upload=function(A){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=A.createVertexBuffer(this.zoomInPaintVertexArray,Ut.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=A.createVertexBuffer(this.zoomOutPaintVertexArray,Ut.members,this.expression.isStateDependent))},Li.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Bi=function(A,O,X,ie){this.binders={},this.layoutAttributes=ie,this._buffers=[];var pe=[];for(var ye in A.paint._values)if(X(ye)){var Le=A.paint.get(ye);if(Le instanceof Ra&&Zo(Le.property.specification)){var Ne=Ia(ye,A.type),Qe=Le.value,ht=Le.property.specification.type,vt=Le.property.useIntegerZoom,jt=Le.property.specification["property-type"],Kt=jt==="cross-faded"||jt==="cross-faded-data-driven";if(Qe.kind==="constant")this.binders[ye]=Kt?new mi(Qe.value,Ne):new yi(Qe.value,Ne,ht),pe.push("/u_"+ye);else if(Qe.kind==="source"||Kt){var Wt=Oa(ye,ht,"source");this.binders[ye]=Kt?new Li(Qe,ht,vt,O,Wt,A.id):new Ei(Qe,Ne,ht,Wt),pe.push("/a_"+ye)}else{var ar=Oa(ye,ht,"composite");this.binders[ye]=new xi(Qe,Ne,ht,vt,O,ar),pe.push("/z_"+ye)}}}this.cacheKey=pe.sort().join("")};Bi.prototype.getMaxValue=function(A){var O=this.binders[A];return O instanceof Ei||O instanceof xi?O.maxValue:0},Bi.prototype.populatePaintArrays=function(A,O,X,ie,pe){for(var ye in this.binders){var Le=this.binders[ye];(Le instanceof Ei||Le instanceof xi||Le instanceof Li)&&Le.populatePaintArray(A,O,X,ie,pe)}},Bi.prototype.setConstantPatternPositions=function(A,O){for(var X in this.binders){var ie=this.binders[X];ie instanceof mi&&ie.setConstantPatternPositions(A,O)}},Bi.prototype.updatePaintArrays=function(A,O,X,ie,pe){var ye=!1;for(var Le in A)for(var Ne=0,Qe=O.getPositions(Le);Ne<Qe.length;Ne+=1){var ht=Qe[Ne],vt=X.feature(ht.index);for(var jt in this.binders){var Kt=this.binders[jt];if((Kt instanceof Ei||Kt instanceof xi||Kt instanceof Li)&&Kt.expression.isStateDependent===!0){var Wt=ie.paint.get(jt);Kt.expression=Wt.value,Kt.updatePaintArray(ht.start,ht.end,vt,A[Le],pe),ye=!0}}}return ye},Bi.prototype.defines=function(){var A=[];for(var O in this.binders){var X=this.binders[O];(X instanceof yi||X instanceof mi)&&A.push.apply(A,X.uniformNames.map(function(ie){return"#define HAS_UNIFORM_"+ie}))}return A},Bi.prototype.getPaintVertexBuffers=function(){return this._buffers},Bi.prototype.getUniforms=function(A,O){var X=[];for(var ie in this.binders){var pe=this.binders[ie];if(pe instanceof yi||pe instanceof mi||pe instanceof xi)for(var ye=0,Le=pe.uniformNames;ye<Le.length;ye+=1){var Ne=Le[ye];if(O[Ne]){var Qe=pe.getBinding(A,O[Ne],Ne);X.push({name:Ne,property:ie,binding:Qe})}}}return X},Bi.prototype.setUniforms=function(A,O,X,ie){for(var pe=0,ye=O;pe<ye.length;pe+=1){var Le=ye[pe],Ne=Le.name,Qe=Le.property,ht=Le.binding;this.binders[Qe].setUniform(ht,ie,X.get(Qe),Ne)}},Bi.prototype.updatePaintBuffers=function(A){for(var O in this._buffers=[],this.binders){var X=this.binders[O];if(A&&X instanceof Li){var ie=A.fromScale===2?X.zoomInPaintVertexBuffer:X.zoomOutPaintVertexBuffer;ie&&this._buffers.push(ie)}else(X instanceof Ei||X instanceof xi)&&X.paintVertexBuffer&&this._buffers.push(X.paintVertexBuffer)}},Bi.prototype.upload=function(A){for(var O in this.binders){var X=this.binders[O];(X instanceof Ei||X instanceof xi||X instanceof Li)&&X.upload(A)}this.updatePaintBuffers()},Bi.prototype.destroy=function(){for(var A in this.binders){var O=this.binders[A];(O instanceof Ei||O instanceof xi||O instanceof Li)&&O.destroy()}};var ca=function(A,O,X,ie){ie===void 0&&(ie=function(){return!0}),this.programConfigurations={};for(var pe=0,ye=O;pe<ye.length;pe+=1){var Le=ye[pe];this.programConfigurations[Le.id]=new Bi(Le,X,ie,A)}this.needsUpload=!1,this._featureMap=new $r,this._bufferOffset=0};function Ia(A,O){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[A]||[A.replace(O+"-","").replace(/-/g,"_")]}function Oa(A,O,X){var ie={color:{source:ae,composite:ue},number:{source:ce,composite:ae}},pe=function(ye){return{"line-pattern":{source:zs,composite:zs},"fill-pattern":{source:zs,composite:zs},"fill-extrusion-pattern":{source:zs,composite:zs}}[ye]}(A);return pe&&pe[X]||ie[O][X]}ca.prototype.populatePaintArrays=function(A,O,X,ie,pe,ye){for(var Le in this.programConfigurations)this.programConfigurations[Le].populatePaintArrays(A,O,ie,pe,ye);O.id!==void 0&&this._featureMap.add(O.id,X,this._bufferOffset,A),this._bufferOffset=A,this.needsUpload=!0},ca.prototype.updatePaintArrays=function(A,O,X,ie){for(var pe=0,ye=X;pe<ye.length;pe+=1){var Le=ye[pe];this.needsUpload=this.programConfigurations[Le.id].updatePaintArrays(A,this._featureMap,O,Le,ie)||this.needsUpload}},ca.prototype.get=function(A){return this.programConfigurations[A]},ca.prototype.upload=function(A){if(this.needsUpload){for(var O in this.programConfigurations)this.programConfigurations[O].upload(A);this.needsUpload=!1}},ca.prototype.destroy=function(){for(var A in this.programConfigurations)this.programConfigurations[A].destroy()},Jr("ConstantBinder",yi),Jr("CrossFadedConstantBinder",mi),Jr("SourceExpressionBinder",Ei),Jr("CrossFadedCompositeBinder",Li),Jr("CompositeExpressionBinder",xi),Jr("ProgramConfiguration",Bi,{omit:["_buffers"]}),Jr("ProgramConfigurationSet",ca);var la,Aa=(la=15,{min:-1*Math.pow(2,la-1),max:Math.pow(2,la-1)-1});function ma(A){for(var O=8192/A.extent,X=A.loadGeometry(),ie=0;ie<X.length;ie++)for(var pe=X[ie],ye=0;ye<pe.length;ye++){var Le=pe[ye];Le.x=Math.round(Le.x*O),Le.y=Math.round(Le.y*O),(Le.x<Aa.min||Le.x>Aa.max||Le.y<Aa.min||Le.y>Aa.max)&&(M("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Le.x=l(Le.x,Aa.min,Aa.max),Le.y=l(Le.y,Aa.min,Aa.max))}return X}function _o(A,O,X,ie,pe){A.emplaceBack(2*O+(ie+1)/2,2*X+(pe+1)/2)}var Wa=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new ys,this.indexArray=new ao,this.segments=new Nt,this.programConfigurations=new ca(bt,A.layers,A.zoom),this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};function No(A,O){for(var X=0;X<A.length;X++)if(hs(O,A[X]))return!0;for(var ie=0;ie<O.length;ie++)if(hs(A,O[ie]))return!0;return!!Cl(A,O)}function Rs(A,O,X){return!!hs(A,O)||!!wo(O,A,X)}function ol(A,O){if(A.length===1)return Yl(O,A[0]);for(var X=0;X<O.length;X++)for(var ie=O[X],pe=0;pe<ie.length;pe++)if(hs(A,ie[pe]))return!0;for(var ye=0;ye<A.length;ye++)if(Yl(O,A[ye]))return!0;for(var Le=0;Le<O.length;Le++)if(Cl(A,O[Le]))return!0;return!1}function Gl(A,O,X){if(A.length>1){if(Cl(A,O))return!0;for(var ie=0;ie<O.length;ie++)if(wo(O[ie],A,X))return!0}for(var pe=0;pe<A.length;pe++)if(wo(A[pe],O,X))return!0;return!1}function Cl(A,O){if(A.length===0||O.length===0)return!1;for(var X=0;X<A.length-1;X++)for(var ie=A[X],pe=A[X+1],ye=0;ye<O.length-1;ye++)if(Pl(ie,pe,O[ye],O[ye+1]))return!0;return!1}function Pl(A,O,X,ie){return I(A,X,ie)!==I(O,X,ie)&&I(A,O,X)!==I(A,O,ie)}function wo(A,O,X){var ie=X*X;if(O.length===1)return A.distSqr(O[0])<ie;for(var pe=1;pe<O.length;pe++)if(vl(A,O[pe-1],O[pe])<ie)return!0;return!1}function vl(A,O,X){var ie=O.distSqr(X);if(ie===0)return A.distSqr(O);var pe=((A.x-O.x)*(X.x-O.x)+(A.y-O.y)*(X.y-O.y))/ie;return pe<0?A.distSqr(O):pe>1?A.distSqr(X):A.distSqr(X.sub(O)._mult(pe)._add(O))}function Yl(A,O){for(var X,ie,pe,ye=!1,Le=0;Le<A.length;Le++)for(var Ne=0,Qe=(X=A[Le]).length-1;Ne<X.length;Qe=Ne++)ie=X[Ne],pe=X[Qe],ie.y>O.y!=pe.y>O.y&&O.x<(pe.x-ie.x)*(O.y-ie.y)/(pe.y-ie.y)+ie.x&&(ye=!ye);return ye}function hs(A,O){for(var X=!1,ie=0,pe=A.length-1;ie<A.length;pe=ie++){var ye=A[ie],Le=A[pe];ye.y>O.y!=Le.y>O.y&&O.x<(Le.x-ye.x)*(O.y-ye.y)/(Le.y-ye.y)+ye.x&&(X=!X)}return X}function Wl(A,O,X){var ie=X[0],pe=X[2];if(A.x<ie.x&&O.x<ie.x||A.x>pe.x&&O.x>pe.x||A.y<ie.y&&O.y<ie.y||A.y>pe.y&&O.y>pe.y)return!1;var ye=I(A,O,X[0]);return ye!==I(A,O,X[1])||ye!==I(A,O,X[2])||ye!==I(A,O,X[3])}function Ma(A,O,X){var ie=O.paint.get(A).value;return ie.kind==="constant"?ie.value:X.programConfigurations.get(O.id).getMaxValue(A)}function Do(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function zo(A,O,X,ie,pe){if(!O[0]&&!O[1])return A;var ye=n.convert(O)._mult(pe);X==="viewport"&&ye._rotate(-ie);for(var Le=[],Ne=0;Ne<A.length;Ne++){var Qe=A[Ne];Le.push(Qe.sub(ye))}return Le}Wa.prototype.populate=function(A,O,X){var ie=this.layers[0],pe=[],ye=null;ie.type==="circle"&&(ye=ie.layout.get("circle-sort-key"));for(var Le=0,Ne=A;Le<Ne.length;Le+=1){var Qe=Ne[Le],ht=Qe.feature,vt=Qe.id,jt=Qe.index,Kt=Qe.sourceLayerIndex,Wt=this.layers[0]._featureFilter.needGeometry,ar={type:ht.type,id:vt,properties:ht.properties,geometry:Wt?ma(ht):[]};if(this.layers[0]._featureFilter.filter(new ta(this.zoom),ar,X)){Wt||(ar.geometry=ma(ht));var vr=ye?ye.evaluate(ar,{},X):void 0,Cr={id:vt,properties:ht.properties,type:ht.type,sourceLayerIndex:Kt,index:jt,geometry:ar.geometry,patterns:{},sortKey:vr};pe.push(Cr)}}ye&&pe.sort(function(Gn,ni){return Gn.sortKey-ni.sortKey});for(var Lr=0,Nr=pe;Lr<Nr.length;Lr+=1){var jr=Nr[Lr],Yr=jr,hn=Yr.geometry,xn=Yr.index,Nn=Yr.sourceLayerIndex,Bn=A[xn].feature;this.addFeature(jr,hn,xn,X),O.featureIndex.insert(Bn,hn,xn,Nn,this.index)}},Wa.prototype.update=function(A,O,X){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,O,this.stateDependentLayers,X)},Wa.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Wa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Wa.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,bt),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Wa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Wa.prototype.addFeature=function(A,O,X,ie){for(var pe=0,ye=O;pe<ye.length;pe+=1)for(var Le=0,Ne=ye[pe];Le<Ne.length;Le+=1){var Qe=Ne[Le],ht=Qe.x,vt=Qe.y;if(!(ht<0||ht>=8192||vt<0||vt>=8192)){var jt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,A.sortKey),Kt=jt.vertexLength;_o(this.layoutVertexArray,ht,vt,-1,-1),_o(this.layoutVertexArray,ht,vt,1,-1),_o(this.layoutVertexArray,ht,vt,1,1),_o(this.layoutVertexArray,ht,vt,-1,1),this.indexArray.emplaceBack(Kt,Kt+1,Kt+2),this.indexArray.emplaceBack(Kt,Kt+3,Kt+2),jt.vertexLength+=4,jt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,X,{},ie)},Jr("CircleBucket",Wa,{omit:["layers"]});var dc=new Oo({"circle-sort-key":new vi(Ie.layout_circle["circle-sort-key"])}),oh={paint:new Oo({"circle-radius":new vi(Ie.paint_circle["circle-radius"]),"circle-color":new vi(Ie.paint_circle["circle-color"]),"circle-blur":new vi(Ie.paint_circle["circle-blur"]),"circle-opacity":new vi(Ie.paint_circle["circle-opacity"]),"circle-translate":new si(Ie.paint_circle["circle-translate"]),"circle-translate-anchor":new si(Ie.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new si(Ie.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new si(Ie.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new vi(Ie.paint_circle["circle-stroke-width"]),"circle-stroke-color":new vi(Ie.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new vi(Ie.paint_circle["circle-stroke-opacity"])}),layout:dc},rs=typeof Float32Array!="undefined"?Float32Array:Array;function ru(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function Zl(A,O,X){var ie=O[0],pe=O[1],ye=O[2],Le=O[3],Ne=O[4],Qe=O[5],ht=O[6],vt=O[7],jt=O[8],Kt=O[9],Wt=O[10],ar=O[11],vr=O[12],Cr=O[13],Lr=O[14],Nr=O[15],jr=X[0],Yr=X[1],hn=X[2],xn=X[3];return A[0]=jr*ie+Yr*Ne+hn*jt+xn*vr,A[1]=jr*pe+Yr*Qe+hn*Kt+xn*Cr,A[2]=jr*ye+Yr*ht+hn*Wt+xn*Lr,A[3]=jr*Le+Yr*vt+hn*ar+xn*Nr,jr=X[4],Yr=X[5],hn=X[6],xn=X[7],A[4]=jr*ie+Yr*Ne+hn*jt+xn*vr,A[5]=jr*pe+Yr*Qe+hn*Kt+xn*Cr,A[6]=jr*ye+Yr*ht+hn*Wt+xn*Lr,A[7]=jr*Le+Yr*vt+hn*ar+xn*Nr,jr=X[8],Yr=X[9],hn=X[10],xn=X[11],A[8]=jr*ie+Yr*Ne+hn*jt+xn*vr,A[9]=jr*pe+Yr*Qe+hn*Kt+xn*Cr,A[10]=jr*ye+Yr*ht+hn*Wt+xn*Lr,A[11]=jr*Le+Yr*vt+hn*ar+xn*Nr,jr=X[12],Yr=X[13],hn=X[14],xn=X[15],A[12]=jr*ie+Yr*Ne+hn*jt+xn*vr,A[13]=jr*pe+Yr*Qe+hn*Kt+xn*Cr,A[14]=jr*ye+Yr*ht+hn*Wt+xn*Lr,A[15]=jr*Le+Yr*vt+hn*ar+xn*Nr,A}Math.hypot||(Math.hypot=function(){for(var A=arguments,O=0,X=arguments.length;X--;)O+=A[X]*A[X];return Math.sqrt(O)});var sh=Zl,yl,lh=function(A,O,X){return A[0]=O[0]-X[0],A[1]=O[1]-X[1],A[2]=O[2]-X[2],A};yl=new rs(3),rs!=Float32Array&&(yl[0]=0,yl[1]=0,yl[2]=0);function mc(A,O,X){var ie=O[0],pe=O[1],ye=O[2],Le=O[3];return A[0]=X[0]*ie+X[4]*pe+X[8]*ye+X[12]*Le,A[1]=X[1]*ie+X[5]*pe+X[9]*ye+X[13]*Le,A[2]=X[2]*ie+X[6]*pe+X[10]*ye+X[14]*Le,A[3]=X[3]*ie+X[7]*pe+X[11]*ye+X[15]*Le,A}(function(){(function(){var A=new rs(4);return rs!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0,A[3]=0),A})()})();var nu=function(A){var O=A[0],X=A[1];return O*O+X*X},bg=(function(){(function(){var A=new rs(2);return rs!=Float32Array&&(A[0]=0,A[1]=0),A})()}(),function(A){function O(X){A.call(this,X,oh)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.createBucket=function(X){return new Wa(X)},O.prototype.queryRadius=function(X){var ie=X;return Ma("circle-radius",this,ie)+Ma("circle-stroke-width",this,ie)+Do(this.paint.get("circle-translate"))},O.prototype.queryIntersectsFeature=function(X,ie,pe,ye,Le,Ne,Qe,ht){for(var vt=zo(X,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ne.angle,Qe),jt=this.paint.get("circle-radius").evaluate(ie,pe)+this.paint.get("circle-stroke-width").evaluate(ie,pe),Kt=this.paint.get("circle-pitch-alignment")==="map",Wt=Kt?vt:function(Nn,Bn){return Nn.map(function(Gn){return Xp(Gn,Bn)})}(vt,ht),ar=Kt?jt*Qe:jt,vr=0,Cr=ye;vr<Cr.length;vr+=1)for(var Lr=0,Nr=Cr[vr];Lr<Nr.length;Lr+=1){var jr=Nr[Lr],Yr=Kt?jr:Xp(jr,ht),hn=ar,xn=mc([],[jr.x,jr.y,0,1],ht);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?hn*=xn[3]/Ne.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(hn*=Ne.cameraToCenterDistance/xn[3]),Rs(Wt,Yr,hn))return!0}return!1},O}(Xo));function Xp(A,O){var X=mc([],[A.x,A.y,0,1],O);return new n(X[0]/X[3],X[1]/X[3])}var Jp=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O}(Wa);function ch(A,O,X,ie){var pe=O.width,ye=O.height;if(ie){if(ie instanceof Uint8ClampedArray)ie=new Uint8Array(ie.buffer);else if(ie.length!==pe*ye*X)throw new RangeError("mismatched image size")}else ie=new Uint8Array(pe*ye*X);return A.width=pe,A.height=ye,A.data=ie,A}function Kp(A,O,X){var ie=O.width,pe=O.height;if(ie!==A.width||pe!==A.height){var ye=ch({},{width:ie,height:pe},X);uh(A,ye,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,ie),height:Math.min(A.height,pe)},X),A.width=ie,A.height=pe,A.data=ye.data}}function uh(A,O,X,ie,pe,ye){if(pe.width===0||pe.height===0)return O;if(pe.width>A.width||pe.height>A.height||X.x>A.width-pe.width||X.y>A.height-pe.height)throw new RangeError("out of range source coordinates for image copy");if(pe.width>O.width||pe.height>O.height||ie.x>O.width-pe.width||ie.y>O.height-pe.height)throw new RangeError("out of range destination coordinates for image copy");for(var Le=A.data,Ne=O.data,Qe=0;Qe<pe.height;Qe++)for(var ht=((X.y+Qe)*A.width+X.x)*ye,vt=((ie.y+Qe)*O.width+ie.x)*ye,jt=0;jt<pe.width*ye;jt++)Ne[vt+jt]=Le[ht+jt];return O}Jr("HeatmapBucket",Jp,{omit:["layers"]});var Xl=function(A,O){ch(this,A,1,O)};Xl.prototype.resize=function(A){Kp(this,A,1)},Xl.prototype.clone=function(){return new Xl({width:this.width,height:this.height},new Uint8Array(this.data))},Xl.copy=function(A,O,X,ie,pe){uh(A,O,X,ie,pe,1)};var ns=function(A,O){ch(this,A,4,O)};ns.prototype.resize=function(A){Kp(this,A,4)},ns.prototype.replace=function(A,O){O?this.data.set(A):A instanceof Uint8ClampedArray?this.data=new Uint8Array(A.buffer):this.data=A},ns.prototype.clone=function(){return new ns({width:this.width,height:this.height},new Uint8Array(this.data))},ns.copy=function(A,O,X,ie,pe){uh(A,O,X,ie,pe,4)},Jr("AlphaImage",Xl),Jr("RGBAImage",ns);var _g={paint:new Oo({"heatmap-radius":new vi(Ie.paint_heatmap["heatmap-radius"]),"heatmap-weight":new vi(Ie.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new si(Ie.paint_heatmap["heatmap-intensity"]),"heatmap-color":new fs(Ie.paint_heatmap["heatmap-color"]),"heatmap-opacity":new si(Ie.paint_heatmap["heatmap-opacity"])})};function $p(A,O){for(var X=new Uint8Array(1024),ie={},pe=0,ye=0;pe<256;pe++,ye+=4){ie[O]=pe/255;var Le=A.evaluate(ie);X[ye+0]=Math.floor(255*Le.r/Le.a),X[ye+1]=Math.floor(255*Le.g/Le.a),X[ye+2]=Math.floor(255*Le.b/Le.a),X[ye+3]=Math.floor(255*Le.a)}return new ns({width:256,height:1},X)}var wg=function(A){function O(X){A.call(this,X,_g),this._updateColorRamp()}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.createBucket=function(X){return new Jp(X)},O.prototype._handleSpecialPaintPropertyUpdate=function(X){X==="heatmap-color"&&this._updateColorRamp()},O.prototype._updateColorRamp=function(){var X=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=$p(X,"heatmapDensity"),this.colorRampTexture=null},O.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},O.prototype.queryRadius=function(){return 0},O.prototype.queryIntersectsFeature=function(){return!1},O.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},O}(Xo),Tg={paint:new Oo({"hillshade-illumination-direction":new si(Ie.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new si(Ie.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new si(Ie.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new si(Ie.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new si(Ie.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new si(Ie.paint_hillshade["hillshade-accent-color"])})},kg=function(A){function O(X){A.call(this,X,Tg)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},O}(Xo),Qp=ra([{name:"a_pos",components:2,type:"Int16"}],4).members,fh=Ru,Ag=Ru;function Ru(A,O,X){X=X||2;var ie,pe,ye,Le,Ne,Qe,ht,vt=O&&O.length,jt=vt?O[0]*X:A.length,Kt=ed(A,0,jt,X,!0),Wt=[];if(!Kt||Kt.next===Kt.prev)return Wt;if(vt&&(Kt=function(vr,Cr,Lr,Nr){var jr,Yr,hn,xn,Nn,Bn=[];for(jr=0,Yr=Cr.length;jr<Yr;jr++)hn=Cr[jr]*Nr,xn=jr<Yr-1?Cr[jr+1]*Nr:vr.length,(Nn=ed(vr,hn,xn,Nr,!1))===Nn.next&&(Nn.steiner=!0),Bn.push(Og(Nn));for(Bn.sort(Cg),jr=0;jr<Bn.length;jr++)Pg(Bn[jr],Lr),Lr=Il(Lr,Lr.next);return Lr}(A,O,Kt,X)),A.length>80*X){ie=ye=A[0],pe=Le=A[1];for(var ar=X;ar<jt;ar+=X)(Ne=A[ar])<ie&&(ie=Ne),(Qe=A[ar+1])<pe&&(pe=Qe),Ne>ye&&(ye=Ne),Qe>Le&&(Le=Qe);ht=(ht=Math.max(ye-ie,Le-pe))!==0?1/ht:0}return iu(Kt,Wt,X,ie,pe,ht),Wt}function ed(A,O,X,ie,pe){var ye,Le;if(pe===dh(A,O,X,ie)>0)for(ye=O;ye<X;ye+=ie)Le=nd(ye,A[ye],A[ye+1],Le);else for(ye=X-ie;ye>=O;ye-=ie)Le=nd(ye,A[ye],A[ye+1],Le);return Le&&Fu(Le,Le.next)&&(ou(Le),Le=Le.next),Le}function Il(A,O){if(!A)return A;O||(O=A);var X,ie=A;do if(X=!1,ie.steiner||!Fu(ie,ie.next)&&oo(ie.prev,ie,ie.next)!==0)ie=ie.next;else{if(ou(ie),(ie=O=ie.prev)===ie.next)break;X=!0}while(X||ie!==O);return O}function iu(A,O,X,ie,pe,ye,Le){if(A){!Le&&ye&&function(vt,jt,Kt,Wt){var ar=vt;do ar.z===null&&(ar.z=hh(ar.x,ar.y,jt,Kt,Wt)),ar.prevZ=ar.prev,ar.nextZ=ar.next,ar=ar.next;while(ar!==vt);ar.prevZ.nextZ=null,ar.prevZ=null,function(vr){var Cr,Lr,Nr,jr,Yr,hn,xn,Nn,Bn=1;do{for(Lr=vr,vr=null,Yr=null,hn=0;Lr;){for(hn++,Nr=Lr,xn=0,Cr=0;Cr<Bn&&(xn++,Nr=Nr.nextZ);Cr++);for(Nn=Bn;xn>0||Nn>0&&Nr;)xn!==0&&(Nn===0||!Nr||Lr.z<=Nr.z)?(jr=Lr,Lr=Lr.nextZ,xn--):(jr=Nr,Nr=Nr.nextZ,Nn--),Yr?Yr.nextZ=jr:vr=jr,jr.prevZ=Yr,Yr=jr;Lr=Nr}Yr.nextZ=null,Bn*=2}while(hn>1)}(ar)}(A,ie,pe,ye);for(var Ne,Qe,ht=A;A.prev!==A.next;)if(Ne=A.prev,Qe=A.next,ye?Sg(A,ie,pe,ye):Mg(A))O.push(Ne.i/X),O.push(A.i/X),O.push(Qe.i/X),ou(A),A=Qe.next,ht=Qe.next;else if((A=Qe)===ht){Le?Le===1?iu(A=Eg(Il(A),O,X),O,X,ie,pe,ye,2):Le===2&&Lg(A,O,X,ie,pe,ye):iu(Il(A),O,X,ie,pe,ye,1);break}}}function Mg(A){var O=A.prev,X=A,ie=A.next;if(oo(O,X,ie)>=0)return!1;for(var pe=A.next.next;pe!==A.prev;){if(gc(O.x,O.y,X.x,X.y,ie.x,ie.y,pe.x,pe.y)&&oo(pe.prev,pe,pe.next)>=0)return!1;pe=pe.next}return!0}function Sg(A,O,X,ie){var pe=A.prev,ye=A,Le=A.next;if(oo(pe,ye,Le)>=0)return!1;for(var Ne=pe.x<ye.x?pe.x<Le.x?pe.x:Le.x:ye.x<Le.x?ye.x:Le.x,Qe=pe.y<ye.y?pe.y<Le.y?pe.y:Le.y:ye.y<Le.y?ye.y:Le.y,ht=pe.x>ye.x?pe.x>Le.x?pe.x:Le.x:ye.x>Le.x?ye.x:Le.x,vt=pe.y>ye.y?pe.y>Le.y?pe.y:Le.y:ye.y>Le.y?ye.y:Le.y,jt=hh(Ne,Qe,O,X,ie),Kt=hh(ht,vt,O,X,ie),Wt=A.prevZ,ar=A.nextZ;Wt&&Wt.z>=jt&&ar&&ar.z<=Kt;){if(Wt!==A.prev&&Wt!==A.next&&gc(pe.x,pe.y,ye.x,ye.y,Le.x,Le.y,Wt.x,Wt.y)&&oo(Wt.prev,Wt,Wt.next)>=0||(Wt=Wt.prevZ,ar!==A.prev&&ar!==A.next&&gc(pe.x,pe.y,ye.x,ye.y,Le.x,Le.y,ar.x,ar.y)&&oo(ar.prev,ar,ar.next)>=0))return!1;ar=ar.nextZ}for(;Wt&&Wt.z>=jt;){if(Wt!==A.prev&&Wt!==A.next&&gc(pe.x,pe.y,ye.x,ye.y,Le.x,Le.y,Wt.x,Wt.y)&&oo(Wt.prev,Wt,Wt.next)>=0)return!1;Wt=Wt.prevZ}for(;ar&&ar.z<=Kt;){if(ar!==A.prev&&ar!==A.next&&gc(pe.x,pe.y,ye.x,ye.y,Le.x,Le.y,ar.x,ar.y)&&oo(ar.prev,ar,ar.next)>=0)return!1;ar=ar.nextZ}return!0}function Eg(A,O,X){var ie=A;do{var pe=ie.prev,ye=ie.next.next;!Fu(pe,ye)&&td(pe,ie,ie.next,ye)&&au(pe,ye)&&au(ye,pe)&&(O.push(pe.i/X),O.push(ie.i/X),O.push(ye.i/X),ou(ie),ou(ie.next),ie=A=ye),ie=ie.next}while(ie!==A);return Il(ie)}function Lg(A,O,X,ie,pe,ye){var Le=A;do{for(var Ne=Le.next.next;Ne!==Le.prev;){if(Le.i!==Ne.i&&Dg(Le,Ne)){var Qe=rd(Le,Ne);return Le=Il(Le,Le.next),Qe=Il(Qe,Qe.next),iu(Le,O,X,ie,pe,ye),void iu(Qe,O,X,ie,pe,ye)}Ne=Ne.next}Le=Le.next}while(Le!==A)}function Cg(A,O){return A.x-O.x}function Pg(A,O){if(O=function(ie,pe){var ye,Le=pe,Ne=ie.x,Qe=ie.y,ht=-1/0;do{if(Qe<=Le.y&&Qe>=Le.next.y&&Le.next.y!==Le.y){var vt=Le.x+(Qe-Le.y)*(Le.next.x-Le.x)/(Le.next.y-Le.y);if(vt<=Ne&&vt>ht){if(ht=vt,vt===Ne){if(Qe===Le.y)return Le;if(Qe===Le.next.y)return Le.next}ye=Le.x<Le.next.x?Le:Le.next}}Le=Le.next}while(Le!==pe);if(!ye)return null;if(Ne===ht)return ye;var jt,Kt=ye,Wt=ye.x,ar=ye.y,vr=1/0;Le=ye;do Ne>=Le.x&&Le.x>=Wt&&Ne!==Le.x&&gc(Qe<ar?Ne:ht,Qe,Wt,ar,Qe<ar?ht:Ne,Qe,Le.x,Le.y)&&(jt=Math.abs(Qe-Le.y)/(Ne-Le.x),au(Le,ie)&&(jt<vr||jt===vr&&(Le.x>ye.x||Le.x===ye.x&&Ig(ye,Le)))&&(ye=Le,vr=jt)),Le=Le.next;while(Le!==Kt);return ye}(A,O)){var X=rd(O,A);Il(O,O.next),Il(X,X.next)}}function Ig(A,O){return oo(A.prev,A,O.prev)<0&&oo(O.next,A,A.next)<0}function hh(A,O,X,ie,pe){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=32767*(A-X)*pe)|A<<8))|A<<4))|A<<2))|A<<1))|(O=1431655765&((O=858993459&((O=252645135&((O=16711935&((O=32767*(O-ie)*pe)|O<<8))|O<<4))|O<<2))|O<<1))<<1}function Og(A){var O=A,X=A;do(O.x<X.x||O.x===X.x&&O.y<X.y)&&(X=O),O=O.next;while(O!==A);return X}function gc(A,O,X,ie,pe,ye,Le,Ne){return(pe-Le)*(O-Ne)-(A-Le)*(ye-Ne)>=0&&(A-Le)*(ie-Ne)-(X-Le)*(O-Ne)>=0&&(X-Le)*(ye-Ne)-(pe-Le)*(ie-Ne)>=0}function Dg(A,O){return A.next.i!==O.i&&A.prev.i!==O.i&&!function(X,ie){var pe=X;do{if(pe.i!==X.i&&pe.next.i!==X.i&&pe.i!==ie.i&&pe.next.i!==ie.i&&td(pe,pe.next,X,ie))return!0;pe=pe.next}while(pe!==X);return!1}(A,O)&&(au(A,O)&&au(O,A)&&function(X,ie){var pe=X,ye=!1,Le=(X.x+ie.x)/2,Ne=(X.y+ie.y)/2;do pe.y>Ne!=pe.next.y>Ne&&pe.next.y!==pe.y&&Le<(pe.next.x-pe.x)*(Ne-pe.y)/(pe.next.y-pe.y)+pe.x&&(ye=!ye),pe=pe.next;while(pe!==X);return ye}(A,O)&&(oo(A.prev,A,O.prev)||oo(A,O.prev,O))||Fu(A,O)&&oo(A.prev,A,A.next)>0&&oo(O.prev,O,O.next)>0)}function oo(A,O,X){return(O.y-A.y)*(X.x-O.x)-(O.x-A.x)*(X.y-O.y)}function Fu(A,O){return A.x===O.x&&A.y===O.y}function td(A,O,X,ie){var pe=Nu(oo(A,O,X)),ye=Nu(oo(A,O,ie)),Le=Nu(oo(X,ie,A)),Ne=Nu(oo(X,ie,O));return pe!==ye&&Le!==Ne||!(pe!==0||!Bu(A,X,O))||!(ye!==0||!Bu(A,ie,O))||!(Le!==0||!Bu(X,A,ie))||!(Ne!==0||!Bu(X,O,ie))}function Bu(A,O,X){return O.x<=Math.max(A.x,X.x)&&O.x>=Math.min(A.x,X.x)&&O.y<=Math.max(A.y,X.y)&&O.y>=Math.min(A.y,X.y)}function Nu(A){return A>0?1:A<0?-1:0}function au(A,O){return oo(A.prev,A,A.next)<0?oo(A,O,A.next)>=0&&oo(A,A.prev,O)>=0:oo(A,O,A.prev)<0||oo(A,A.next,O)<0}function rd(A,O){var X=new ph(A.i,A.x,A.y),ie=new ph(O.i,O.x,O.y),pe=A.next,ye=O.prev;return A.next=O,O.prev=A,X.next=pe,pe.prev=X,ie.next=X,X.prev=ie,ye.next=ie,ie.prev=ye,ie}function nd(A,O,X,ie){var pe=new ph(A,O,X);return ie?(pe.next=ie.next,pe.prev=ie,ie.next.prev=pe,ie.next=pe):(pe.prev=pe,pe.next=pe),pe}function ou(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function ph(A,O,X){this.i=A,this.x=O,this.y=X,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function dh(A,O,X,ie){for(var pe=0,ye=O,Le=X-ie;ye<X;ye+=ie)pe+=(A[Le]-A[ye])*(A[ye+1]+A[Le+1]),Le=ye;return pe}function zg(A,O,X,ie,pe){(function ye(Le,Ne,Qe,ht,vt){for(;ht>Qe;){if(ht-Qe>600){var jt=ht-Qe+1,Kt=Ne-Qe+1,Wt=Math.log(jt),ar=.5*Math.exp(2*Wt/3),vr=.5*Math.sqrt(Wt*ar*(jt-ar)/jt)*(Kt-jt/2<0?-1:1),Cr=Math.max(Qe,Math.floor(Ne-Kt*ar/jt+vr)),Lr=Math.min(ht,Math.floor(Ne+(jt-Kt)*ar/jt+vr));ye(Le,Ne,Cr,Lr,vt)}var Nr=Le[Ne],jr=Qe,Yr=ht;for(su(Le,Qe,Ne),vt(Le[ht],Nr)>0&&su(Le,Qe,ht);jr<Yr;){for(su(Le,jr,Yr),jr++,Yr--;vt(Le[jr],Nr)<0;)jr++;for(;vt(Le[Yr],Nr)>0;)Yr--}vt(Le[Qe],Nr)===0?su(Le,Qe,Yr):(Yr++,su(Le,Yr,ht)),Yr<=Ne&&(Qe=Yr+1),Ne<=Yr&&(ht=Yr-1)}})(A,O,X||0,ie||A.length-1,pe||Rg)}function su(A,O,X){var ie=A[O];A[O]=A[X],A[X]=ie}function Rg(A,O){return A<O?-1:A>O?1:0}function mh(A,O){var X=A.length;if(X<=1)return[A];for(var ie,pe,ye=[],Le=0;Le<X;Le++){var Ne=P(A[Le]);Ne!==0&&(A[Le].area=Math.abs(Ne),pe===void 0&&(pe=Ne<0),pe===Ne<0?(ie&&ye.push(ie),ie=[A[Le]]):ie.push(A[Le]))}if(ie&&ye.push(ie),O>1)for(var Qe=0;Qe<ye.length;Qe++)ye[Qe].length<=O||(zg(ye[Qe],O,1,ye[Qe].length-1,Fg),ye[Qe]=ye[Qe].slice(0,O));return ye}function Fg(A,O){return O.area-A.area}function gh(A,O,X){for(var ie=X.patternDependencies,pe=!1,ye=0,Le=O;ye<Le.length;ye+=1){var Ne=Le[ye].paint.get(A+"-pattern");Ne.isConstant()||(pe=!0);var Qe=Ne.constantOr(null);Qe&&(pe=!0,ie[Qe.to]=!0,ie[Qe.from]=!0)}return pe}function vh(A,O,X,ie,pe){for(var ye=pe.patternDependencies,Le=0,Ne=O;Le<Ne.length;Le+=1){var Qe=Ne[Le],ht=Qe.paint.get(A+"-pattern").value;if(ht.kind!=="constant"){var vt=ht.evaluate({zoom:ie-1},X,{},pe.availableImages),jt=ht.evaluate({zoom:ie},X,{},pe.availableImages),Kt=ht.evaluate({zoom:ie+1},X,{},pe.availableImages);vt=vt&&vt.name?vt.name:vt,jt=jt&&jt.name?jt.name:jt,Kt=Kt&&Kt.name?Kt.name:Kt,ye[vt]=!0,ye[jt]=!0,ye[Kt]=!0,X.patterns[Qe.id]={min:vt,mid:jt,max:Kt}}}return X}Ru.deviation=function(A,O,X,ie){var pe=O&&O.length,ye=pe?O[0]*X:A.length,Le=Math.abs(dh(A,0,ye,X));if(pe)for(var Ne=0,Qe=O.length;Ne<Qe;Ne++){var ht=O[Ne]*X,vt=Ne<Qe-1?O[Ne+1]*X:A.length;Le-=Math.abs(dh(A,ht,vt,X))}var jt=0;for(Ne=0;Ne<ie.length;Ne+=3){var Kt=ie[Ne]*X,Wt=ie[Ne+1]*X,ar=ie[Ne+2]*X;jt+=Math.abs((A[Kt]-A[ar])*(A[Wt+1]-A[Kt+1])-(A[Kt]-A[Wt])*(A[ar+1]-A[Kt+1]))}return Le===0&&jt===0?0:Math.abs((jt-Le)/Le)},Ru.flatten=function(A){for(var O=A[0][0].length,X={vertices:[],holes:[],dimensions:O},ie=0,pe=0;pe<A.length;pe++){for(var ye=0;ye<A[pe].length;ye++)for(var Le=0;Le<O;Le++)X.vertices.push(A[pe][ye][Le]);pe>0&&(ie+=A[pe-1].length,X.holes.push(ie))}return X},fh.default=Ag;var Ws=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ys,this.indexArray=new ao,this.indexArray2=new B,this.programConfigurations=new ca(Qp,A.layers,A.zoom),this.segments=new Nt,this.segments2=new Nt,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};Ws.prototype.populate=function(A,O,X){this.hasPattern=gh("fill",this.layers,O);for(var ie=this.layers[0].layout.get("fill-sort-key"),pe=[],ye=0,Le=A;ye<Le.length;ye+=1){var Ne=Le[ye],Qe=Ne.feature,ht=Ne.id,vt=Ne.index,jt=Ne.sourceLayerIndex,Kt=this.layers[0]._featureFilter.needGeometry,Wt={type:Qe.type,id:ht,properties:Qe.properties,geometry:Kt?ma(Qe):[]};if(this.layers[0]._featureFilter.filter(new ta(this.zoom),Wt,X)){Kt||(Wt.geometry=ma(Qe));var ar=ie?ie.evaluate(Wt,{},X,O.availableImages):void 0,vr={id:ht,properties:Qe.properties,type:Qe.type,sourceLayerIndex:jt,index:vt,geometry:Wt.geometry,patterns:{},sortKey:ar};pe.push(vr)}}ie&&pe.sort(function(Gn,ni){return Gn.sortKey-ni.sortKey});for(var Cr=0,Lr=pe;Cr<Lr.length;Cr+=1){var Nr=Lr[Cr],jr=Nr,Yr=jr.geometry,hn=jr.index,xn=jr.sourceLayerIndex;if(this.hasPattern){var Nn=vh("fill",this.layers,Nr,this.zoom,O);this.patternFeatures.push(Nn)}else this.addFeature(Nr,Yr,hn,X,{});var Bn=A[hn].feature;O.featureIndex.insert(Bn,Yr,hn,xn,this.index)}},Ws.prototype.update=function(A,O,X){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,O,this.stateDependentLayers,X)},Ws.prototype.addFeatures=function(A,O,X){for(var ie=0,pe=this.patternFeatures;ie<pe.length;ie+=1){var ye=pe[ie];this.addFeature(ye,ye.geometry,ye.index,O,X)}},Ws.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ws.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ws.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Qp),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.indexBuffer2=A.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(A),this.uploaded=!0},Ws.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Ws.prototype.addFeature=function(A,O,X,ie,pe){for(var ye=0,Le=mh(O,500);ye<Le.length;ye+=1){for(var Ne=Le[ye],Qe=0,ht=0,vt=Ne;ht<vt.length;ht+=1)Qe+=vt[ht].length;for(var jt=this.segments.prepareSegment(Qe,this.layoutVertexArray,this.indexArray),Kt=jt.vertexLength,Wt=[],ar=[],vr=0,Cr=Ne;vr<Cr.length;vr+=1){var Lr=Cr[vr];if(Lr.length!==0){Lr!==Ne[0]&&ar.push(Wt.length/2);var Nr=this.segments2.prepareSegment(Lr.length,this.layoutVertexArray,this.indexArray2),jr=Nr.vertexLength;this.layoutVertexArray.emplaceBack(Lr[0].x,Lr[0].y),this.indexArray2.emplaceBack(jr+Lr.length-1,jr),Wt.push(Lr[0].x),Wt.push(Lr[0].y);for(var Yr=1;Yr<Lr.length;Yr++)this.layoutVertexArray.emplaceBack(Lr[Yr].x,Lr[Yr].y),this.indexArray2.emplaceBack(jr+Yr-1,jr+Yr),Wt.push(Lr[Yr].x),Wt.push(Lr[Yr].y);Nr.vertexLength+=Lr.length,Nr.primitiveLength+=Lr.length}}for(var hn=fh(Wt,ar),xn=0;xn<hn.length;xn+=3)this.indexArray.emplaceBack(Kt+hn[xn],Kt+hn[xn+1],Kt+hn[xn+2]);jt.vertexLength+=Qe,jt.primitiveLength+=hn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,X,pe,ie)},Jr("FillBucket",Ws,{omit:["layers","patternFeatures"]});var Bg=new Oo({"fill-sort-key":new vi(Ie.layout_fill["fill-sort-key"])}),Ng={paint:new Oo({"fill-antialias":new si(Ie.paint_fill["fill-antialias"]),"fill-opacity":new vi(Ie.paint_fill["fill-opacity"]),"fill-color":new vi(Ie.paint_fill["fill-color"]),"fill-outline-color":new vi(Ie.paint_fill["fill-outline-color"]),"fill-translate":new si(Ie.paint_fill["fill-translate"]),"fill-translate-anchor":new si(Ie.paint_fill["fill-translate-anchor"]),"fill-pattern":new il(Ie.paint_fill["fill-pattern"])}),layout:Bg},jg=function(A){function O(X){A.call(this,X,Ng)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.recalculate=function(X,ie){A.prototype.recalculate.call(this,X,ie);var pe=this.paint._values["fill-outline-color"];pe.value.kind==="constant"&&pe.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},O.prototype.createBucket=function(X){return new Ws(X)},O.prototype.queryRadius=function(){return Do(this.paint.get("fill-translate"))},O.prototype.queryIntersectsFeature=function(X,ie,pe,ye,Le,Ne,Qe){return ol(zo(X,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ne.angle,Qe),ye)},O.prototype.isTileClipped=function(){return!0},O}(Xo),id=ra([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,ad=vc;function vc(A,O,X,ie,pe){this.properties={},this.extent=X,this.type=0,this._pbf=A,this._geometry=-1,this._keys=ie,this._values=pe,A.readFields(Ug,this,O)}function Ug(A,O,X){A==1?O.id=X.readVarint():A==2?function(ie,pe){for(var ye=ie.readVarint()+ie.pos;ie.pos<ye;){var Le=pe._keys[ie.readVarint()],Ne=pe._values[ie.readVarint()];pe.properties[Le]=Ne}}(X,O):A==3?O.type=X.readVarint():A==4&&(O._geometry=X.pos)}function Vg(A){for(var O,X,ie=0,pe=0,ye=A.length,Le=ye-1;pe<ye;Le=pe++)O=A[pe],ie+=((X=A[Le]).x-O.x)*(O.y+X.y);return ie}vc.types=["Unknown","Point","LineString","Polygon"],vc.prototype.loadGeometry=function(){var A=this._pbf;A.pos=this._geometry;for(var O,X=A.readVarint()+A.pos,ie=1,pe=0,ye=0,Le=0,Ne=[];A.pos<X;){if(pe<=0){var Qe=A.readVarint();ie=7&Qe,pe=Qe>>3}if(pe--,ie===1||ie===2)ye+=A.readSVarint(),Le+=A.readSVarint(),ie===1&&(O&&Ne.push(O),O=[]),O.push(new n(ye,Le));else{if(ie!==7)throw new Error("unknown command "+ie);O&&O.push(O[0].clone())}}return O&&Ne.push(O),Ne},vc.prototype.bbox=function(){var A=this._pbf;A.pos=this._geometry;for(var O=A.readVarint()+A.pos,X=1,ie=0,pe=0,ye=0,Le=1/0,Ne=-1/0,Qe=1/0,ht=-1/0;A.pos<O;){if(ie<=0){var vt=A.readVarint();X=7&vt,ie=vt>>3}if(ie--,X===1||X===2)(pe+=A.readSVarint())<Le&&(Le=pe),pe>Ne&&(Ne=pe),(ye+=A.readSVarint())<Qe&&(Qe=ye),ye>ht&&(ht=ye);else if(X!==7)throw new Error("unknown command "+X)}return[Le,Qe,Ne,ht]},vc.prototype.toGeoJSON=function(A,O,X){var ie,pe,ye=this.extent*Math.pow(2,X),Le=this.extent*A,Ne=this.extent*O,Qe=this.loadGeometry(),ht=vc.types[this.type];function vt(Wt){for(var ar=0;ar<Wt.length;ar++){var vr=Wt[ar],Cr=180-360*(vr.y+Ne)/ye;Wt[ar]=[360*(vr.x+Le)/ye-180,360/Math.PI*Math.atan(Math.exp(Cr*Math.PI/180))-90]}}switch(this.type){case 1:var jt=[];for(ie=0;ie<Qe.length;ie++)jt[ie]=Qe[ie][0];vt(Qe=jt);break;case 2:for(ie=0;ie<Qe.length;ie++)vt(Qe[ie]);break;case 3:for(Qe=function(Wt){var ar=Wt.length;if(ar<=1)return[Wt];for(var vr,Cr,Lr=[],Nr=0;Nr<ar;Nr++){var jr=Vg(Wt[Nr]);jr!==0&&(Cr===void 0&&(Cr=jr<0),Cr===jr<0?(vr&&Lr.push(vr),vr=[Wt[Nr]]):vr.push(Wt[Nr]))}return vr&&Lr.push(vr),Lr}(Qe),ie=0;ie<Qe.length;ie++)for(pe=0;pe<Qe[ie].length;pe++)vt(Qe[ie][pe])}Qe.length===1?Qe=Qe[0]:ht="Multi"+ht;var Kt={type:"Feature",geometry:{type:ht,coordinates:Qe},properties:this.properties};return"id"in this&&(Kt.id=this.id),Kt};var od=sd;function sd(A,O){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=A,this._keys=[],this._values=[],this._features=[],A.readFields(Hg,this,O),this.length=this._features.length}function Hg(A,O,X){A===15?O.version=X.readVarint():A===1?O.name=X.readString():A===5?O.extent=X.readVarint():A===2?O._features.push(X.pos):A===3?O._keys.push(X.readString()):A===4&&O._values.push(function(ie){for(var pe=null,ye=ie.readVarint()+ie.pos;ie.pos<ye;){var Le=ie.readVarint()>>3;pe=Le===1?ie.readString():Le===2?ie.readFloat():Le===3?ie.readDouble():Le===4?ie.readVarint64():Le===5?ie.readVarint():Le===6?ie.readSVarint():Le===7?ie.readBoolean():null}return pe}(X))}function qg(A,O,X){if(A===3){var ie=new od(X,X.readVarint()+X.pos);ie.length&&(O[ie.name]=ie)}}sd.prototype.feature=function(A){if(A<0||A>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[A];var O=this._pbf.readVarint()+this._pbf.pos;return new ad(this._pbf,O,this.extent,this._keys,this._values)};var yc={VectorTile:function(A,O){this.layers=A.readFields(qg,{},O)},VectorTileFeature:ad,VectorTileLayer:od},Gg=yc.VectorTileFeature.types,yh=Math.pow(2,13);function lu(A,O,X,ie,pe,ye,Le,Ne){A.emplaceBack(O,X,2*Math.floor(ie*yh)+Le,pe*yh*2,ye*yh*2,Math.round(Ne))}var Zs=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new Ss,this.indexArray=new ao,this.programConfigurations=new ca(id,A.layers,A.zoom),this.segments=new Nt,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};function Yg(A,O){return A.x===O.x&&(A.x<0||A.x>8192)||A.y===O.y&&(A.y<0||A.y>8192)}function Wg(A){return A.every(function(O){return O.x<0})||A.every(function(O){return O.x>8192})||A.every(function(O){return O.y<0})||A.every(function(O){return O.y>8192})}Zs.prototype.populate=function(A,O,X){this.features=[],this.hasPattern=gh("fill-extrusion",this.layers,O);for(var ie=0,pe=A;ie<pe.length;ie+=1){var ye=pe[ie],Le=ye.feature,Ne=ye.id,Qe=ye.index,ht=ye.sourceLayerIndex,vt=this.layers[0]._featureFilter.needGeometry,jt={type:Le.type,id:Ne,properties:Le.properties,geometry:vt?ma(Le):[]};if(this.layers[0]._featureFilter.filter(new ta(this.zoom),jt,X)){var Kt={id:Ne,sourceLayerIndex:ht,index:Qe,geometry:vt?jt.geometry:ma(Le),properties:Le.properties,type:Le.type,patterns:{}};Le.id!==void 0&&(Kt.id=Le.id),this.hasPattern?this.features.push(vh("fill-extrusion",this.layers,Kt,this.zoom,O)):this.addFeature(Kt,Kt.geometry,Qe,X,{}),O.featureIndex.insert(Le,Kt.geometry,Qe,ht,this.index,!0)}}},Zs.prototype.addFeatures=function(A,O,X){for(var ie=0,pe=this.features;ie<pe.length;ie+=1){var ye=pe[ie],Le=ye.geometry;this.addFeature(ye,Le,ye.index,O,X)}},Zs.prototype.update=function(A,O,X){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,O,this.stateDependentLayers,X)},Zs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Zs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Zs.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,id),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Zs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Zs.prototype.addFeature=function(A,O,X,ie,pe){for(var ye=0,Le=mh(O,500);ye<Le.length;ye+=1){for(var Ne=Le[ye],Qe=0,ht=0,vt=Ne;ht<vt.length;ht+=1)Qe+=vt[ht].length;for(var jt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Kt=0,Wt=Ne;Kt<Wt.length;Kt+=1){var ar=Wt[Kt];if(ar.length!==0&&!Wg(ar))for(var vr=0,Cr=0;Cr<ar.length;Cr++){var Lr=ar[Cr];if(Cr>=1){var Nr=ar[Cr-1];if(!Yg(Lr,Nr)){jt.vertexLength+4>Nt.MAX_VERTEX_ARRAY_LENGTH&&(jt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var jr=Lr.sub(Nr)._perp()._unit(),Yr=Nr.dist(Lr);vr+Yr>32768&&(vr=0),lu(this.layoutVertexArray,Lr.x,Lr.y,jr.x,jr.y,0,0,vr),lu(this.layoutVertexArray,Lr.x,Lr.y,jr.x,jr.y,0,1,vr),vr+=Yr,lu(this.layoutVertexArray,Nr.x,Nr.y,jr.x,jr.y,0,0,vr),lu(this.layoutVertexArray,Nr.x,Nr.y,jr.x,jr.y,0,1,vr);var hn=jt.vertexLength;this.indexArray.emplaceBack(hn,hn+2,hn+1),this.indexArray.emplaceBack(hn+1,hn+2,hn+3),jt.vertexLength+=4,jt.primitiveLength+=2}}}}if(jt.vertexLength+Qe>Nt.MAX_VERTEX_ARRAY_LENGTH&&(jt=this.segments.prepareSegment(Qe,this.layoutVertexArray,this.indexArray)),Gg[A.type]==="Polygon"){for(var xn=[],Nn=[],Bn=jt.vertexLength,Gn=0,ni=Ne;Gn<ni.length;Gn+=1){var ii=ni[Gn];if(ii.length!==0){ii!==Ne[0]&&Nn.push(xn.length/2);for(var Xn=0;Xn<ii.length;Xn++){var fi=ii[Xn];lu(this.layoutVertexArray,fi.x,fi.y,0,0,1,1,0),xn.push(fi.x),xn.push(fi.y)}}}for(var ci=fh(xn,Nn),ai=0;ai<ci.length;ai+=3)this.indexArray.emplaceBack(Bn+ci[ai],Bn+ci[ai+2],Bn+ci[ai+1]);jt.primitiveLength+=ci.length/3,jt.vertexLength+=Qe}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,X,pe,ie)},Jr("FillExtrusionBucket",Zs,{omit:["layers","features"]});var Zg={paint:new Oo({"fill-extrusion-opacity":new si(Ie["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new vi(Ie["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new si(Ie["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new si(Ie["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new il(Ie["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new vi(Ie["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new vi(Ie["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new si(Ie["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Xg=function(A){function O(X){A.call(this,X,Zg)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.createBucket=function(X){return new Zs(X)},O.prototype.queryRadius=function(){return Do(this.paint.get("fill-extrusion-translate"))},O.prototype.is3D=function(){return!0},O.prototype.queryIntersectsFeature=function(X,ie,pe,ye,Le,Ne,Qe,ht){var vt=zo(X,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ne.angle,Qe),jt=this.paint.get("fill-extrusion-height").evaluate(ie,pe),Kt=this.paint.get("fill-extrusion-base").evaluate(ie,pe),Wt=function(vr,Cr,Lr,Nr){for(var jr=[],Yr=0,hn=vr;Yr<hn.length;Yr+=1){var xn=hn[Yr],Nn=[xn.x,xn.y,Nr,1];mc(Nn,Nn,Cr),jr.push(new n(Nn[0]/Nn[3],Nn[1]/Nn[3]))}return jr}(vt,ht,0,0),ar=function(vr,Cr,Lr,Nr){for(var jr=[],Yr=[],hn=Nr[8]*Cr,xn=Nr[9]*Cr,Nn=Nr[10]*Cr,Bn=Nr[11]*Cr,Gn=Nr[8]*Lr,ni=Nr[9]*Lr,ii=Nr[10]*Lr,Xn=Nr[11]*Lr,fi=0,ci=vr;fi<ci.length;fi+=1){for(var ai=ci[fi],Zi=[],Ni=[],$i=0,bi=ai;$i<bi.length;$i+=1){var Vi=bi[$i],va=Vi.x,ua=Vi.y,Ea=Nr[0]*va+Nr[4]*ua+Nr[12],fa=Nr[1]*va+Nr[5]*ua+Nr[13],co=Nr[2]*va+Nr[6]*ua+Nr[14],La=Nr[3]*va+Nr[7]*ua+Nr[15],Ro=co+Nn,ko=La+Bn,So=Ea+Gn,Jo=fa+ni,Uo=co+ii,uo=La+Xn,Eo=new n((Ea+hn)/ko,(fa+xn)/ko);Eo.z=Ro/ko,Zi.push(Eo);var Ka=new n(So/uo,Jo/uo);Ka.z=Uo/uo,Ni.push(Ka)}jr.push(Zi),Yr.push(Ni)}return[jr,Yr]}(ye,Kt,jt,ht);return function(vr,Cr,Lr){var Nr=1/0;ol(Lr,Cr)&&(Nr=ld(Lr,Cr[0]));for(var jr=0;jr<Cr.length;jr++)for(var Yr=Cr[jr],hn=vr[jr],xn=0;xn<Yr.length-1;xn++){var Nn=Yr[xn],Bn=Yr[xn+1],Gn=hn[xn],ni=hn[xn+1],ii=[Nn,Bn,ni,Gn,Nn];No(Lr,ii)&&(Nr=Math.min(Nr,ld(Lr,ii)))}return Nr!==1/0&&Nr}(ar[0],ar[1],Wt)},O}(Xo);function cu(A,O){return A.x*O.x+A.y*O.y}function ld(A,O){if(A.length===1){for(var X,ie=0,pe=O[ie++];!X||pe.equals(X);)if(!(X=O[ie++]))return 1/0;for(;ie<O.length;ie++){var ye=O[ie],Le=A[0],Ne=X.sub(pe),Qe=ye.sub(pe),ht=Le.sub(pe),vt=cu(Ne,Ne),jt=cu(Ne,Qe),Kt=cu(Qe,Qe),Wt=cu(ht,Ne),ar=cu(ht,Qe),vr=vt*Kt-jt*jt,Cr=(Kt*Wt-jt*ar)/vr,Lr=(vt*ar-jt*Wt)/vr,Nr=1-Cr-Lr,jr=pe.z*Nr+X.z*Cr+ye.z*Lr;if(isFinite(jr))return jr}return 1/0}for(var Yr=1/0,hn=0,xn=O;hn<xn.length;hn+=1){var Nn=xn[hn];Yr=Math.min(Yr,Nn.z)}return Yr}var cd=ra([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Jg=yc.VectorTileFeature.types,Kg=Math.cos(Math.PI/180*37.5),ud=Math.pow(2,14)/.5,is=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new qs,this.indexArray=new ao,this.programConfigurations=new ca(cd,A.layers,A.zoom),this.segments=new Nt,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};is.prototype.populate=function(A,O,X){this.hasPattern=gh("line",this.layers,O);for(var ie=this.layers[0].layout.get("line-sort-key"),pe=[],ye=0,Le=A;ye<Le.length;ye+=1){var Ne=Le[ye],Qe=Ne.feature,ht=Ne.id,vt=Ne.index,jt=Ne.sourceLayerIndex,Kt=this.layers[0]._featureFilter.needGeometry,Wt={type:Qe.type,id:ht,properties:Qe.properties,geometry:Kt?ma(Qe):[]};if(this.layers[0]._featureFilter.filter(new ta(this.zoom),Wt,X)){Kt||(Wt.geometry=ma(Qe));var ar=ie?ie.evaluate(Wt,{},X):void 0,vr={id:ht,properties:Qe.properties,type:Qe.type,sourceLayerIndex:jt,index:vt,geometry:Wt.geometry,patterns:{},sortKey:ar};pe.push(vr)}}ie&&pe.sort(function(Gn,ni){return Gn.sortKey-ni.sortKey});for(var Cr=0,Lr=pe;Cr<Lr.length;Cr+=1){var Nr=Lr[Cr],jr=Nr,Yr=jr.geometry,hn=jr.index,xn=jr.sourceLayerIndex;if(this.hasPattern){var Nn=vh("line",this.layers,Nr,this.zoom,O);this.patternFeatures.push(Nn)}else this.addFeature(Nr,Yr,hn,X,{});var Bn=A[hn].feature;O.featureIndex.insert(Bn,Yr,hn,xn,this.index)}},is.prototype.update=function(A,O,X){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,O,this.stateDependentLayers,X)},is.prototype.addFeatures=function(A,O,X){for(var ie=0,pe=this.patternFeatures;ie<pe.length;ie+=1){var ye=pe[ie];this.addFeature(ye,ye.geometry,ye.index,O,X)}},is.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},is.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},is.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,cd),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},is.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},is.prototype.addFeature=function(A,O,X,ie,pe){for(var ye=this.layers[0].layout,Le=ye.get("line-join").evaluate(A,{}),Ne=ye.get("line-cap"),Qe=ye.get("line-miter-limit"),ht=ye.get("line-round-limit"),vt=0,jt=O;vt<jt.length;vt+=1){var Kt=jt[vt];this.addLine(Kt,A,Le,Ne,Qe,ht)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,X,pe,ie)},is.prototype.addLine=function(A,O,X,ie,pe,ye){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,O.properties&&O.properties.hasOwnProperty("mapbox_clip_start")&&O.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+O.properties.mapbox_clip_start,this.clipEnd=+O.properties.mapbox_clip_end;for(var Le=0;Le<A.length-1;Le++)this.totalDistance+=A[Le].dist(A[Le+1]);this.updateScaledDistance()}for(var Ne=Jg[O.type]==="Polygon",Qe=A.length;Qe>=2&&A[Qe-1].equals(A[Qe-2]);)Qe--;for(var ht=0;ht<Qe-1&&A[ht].equals(A[ht+1]);)ht++;if(!(Qe<(Ne?3:2))){X==="bevel"&&(pe=1.05);var vt,jt=this.overscaling<=16?122880/(512*this.overscaling):0,Kt=this.segments.prepareSegment(10*Qe,this.layoutVertexArray,this.indexArray),Wt=void 0,ar=void 0,vr=void 0,Cr=void 0;this.e1=this.e2=-1,Ne&&(vt=A[Qe-2],Cr=A[ht].sub(vt)._unit()._perp());for(var Lr=ht;Lr<Qe;Lr++)if(!(ar=Lr===Qe-1?Ne?A[ht+1]:void 0:A[Lr+1])||!A[Lr].equals(ar)){Cr&&(vr=Cr),vt&&(Wt=vt),vt=A[Lr],Cr=ar?ar.sub(vt)._unit()._perp():vr;var Nr=(vr=vr||Cr).add(Cr);Nr.x===0&&Nr.y===0||Nr._unit();var jr=vr.x*Cr.x+vr.y*Cr.y,Yr=Nr.x*Cr.x+Nr.y*Cr.y,hn=Yr!==0?1/Yr:1/0,xn=2*Math.sqrt(2-2*Yr),Nn=Yr<Kg&&Wt&&ar,Bn=vr.x*Cr.y-vr.y*Cr.x>0;if(Nn&&Lr>ht){var Gn=vt.dist(Wt);if(Gn>2*jt){var ni=vt.sub(vt.sub(Wt)._mult(jt/Gn)._round());this.updateDistance(Wt,ni),this.addCurrentVertex(ni,vr,0,0,Kt),Wt=ni}}var ii=Wt&&ar,Xn=ii?X:Ne?"butt":ie;if(ii&&Xn==="round"&&(hn<ye?Xn="miter":hn<=2&&(Xn="fakeround")),Xn==="miter"&&hn>pe&&(Xn="bevel"),Xn==="bevel"&&(hn>2&&(Xn="flipbevel"),hn<pe&&(Xn="miter")),Wt&&this.updateDistance(Wt,vt),Xn==="miter")Nr._mult(hn),this.addCurrentVertex(vt,Nr,0,0,Kt);else if(Xn==="flipbevel"){if(hn>100)Nr=Cr.mult(-1);else{var fi=hn*vr.add(Cr).mag()/vr.sub(Cr).mag();Nr._perp()._mult(fi*(Bn?-1:1))}this.addCurrentVertex(vt,Nr,0,0,Kt),this.addCurrentVertex(vt,Nr.mult(-1),0,0,Kt)}else if(Xn==="bevel"||Xn==="fakeround"){var ci=-Math.sqrt(hn*hn-1),ai=Bn?ci:0,Zi=Bn?0:ci;if(Wt&&this.addCurrentVertex(vt,vr,ai,Zi,Kt),Xn==="fakeround")for(var Ni=Math.round(180*xn/Math.PI/20),$i=1;$i<Ni;$i++){var bi=$i/Ni;if(bi!==.5){var Vi=bi-.5;bi+=bi*Vi*(bi-1)*((1.0904+jr*(jr*(3.55645-1.43519*jr)-3.2452))*Vi*Vi+(.848013+jr*(.215638*jr-1.06021)))}var va=Cr.sub(vr)._mult(bi)._add(vr)._unit()._mult(Bn?-1:1);this.addHalfVertex(vt,va.x,va.y,!1,Bn,0,Kt)}ar&&this.addCurrentVertex(vt,Cr,-ai,-Zi,Kt)}else if(Xn==="butt")this.addCurrentVertex(vt,Nr,0,0,Kt);else if(Xn==="square"){var ua=Wt?1:-1;this.addCurrentVertex(vt,Nr,ua,ua,Kt)}else Xn==="round"&&(Wt&&(this.addCurrentVertex(vt,vr,0,0,Kt),this.addCurrentVertex(vt,vr,1,1,Kt,!0)),ar&&(this.addCurrentVertex(vt,Cr,-1,-1,Kt,!0),this.addCurrentVertex(vt,Cr,0,0,Kt)));if(Nn&&Lr<Qe-1){var Ea=vt.dist(ar);if(Ea>2*jt){var fa=vt.add(ar.sub(vt)._mult(jt/Ea)._round());this.updateDistance(vt,fa),this.addCurrentVertex(fa,Cr,0,0,Kt),vt=fa}}}}},is.prototype.addCurrentVertex=function(A,O,X,ie,pe,ye){ye===void 0&&(ye=!1);var Le=O.x+O.y*X,Ne=O.y-O.x*X,Qe=-O.x+O.y*ie,ht=-O.y-O.x*ie;this.addHalfVertex(A,Le,Ne,ye,!1,X,pe),this.addHalfVertex(A,Qe,ht,ye,!0,-ie,pe),this.distance>ud/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(A,O,X,ie,pe,ye))},is.prototype.addHalfVertex=function(A,O,X,ie,pe,ye,Le){var Ne=A.x,Qe=A.y,ht=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((Ne<<1)+(ie?1:0),(Qe<<1)+(pe?1:0),Math.round(63*O)+128,Math.round(63*X)+128,1+(ye===0?0:ye<0?-1:1)|(63&ht)<<2,ht>>6);var vt=Le.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,vt),Le.primitiveLength++),pe?this.e2=vt:this.e1=vt},is.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(ud-1):this.distance},is.prototype.updateDistance=function(A,O){this.distance+=A.dist(O),this.updateScaledDistance()},Jr("LineBucket",is,{omit:["layers","patternFeatures"]});var $g=new Oo({"line-cap":new si(Ie.layout_line["line-cap"]),"line-join":new vi(Ie.layout_line["line-join"]),"line-miter-limit":new si(Ie.layout_line["line-miter-limit"]),"line-round-limit":new si(Ie.layout_line["line-round-limit"]),"line-sort-key":new vi(Ie.layout_line["line-sort-key"])}),fd={paint:new Oo({"line-opacity":new vi(Ie.paint_line["line-opacity"]),"line-color":new vi(Ie.paint_line["line-color"]),"line-translate":new si(Ie.paint_line["line-translate"]),"line-translate-anchor":new si(Ie.paint_line["line-translate-anchor"]),"line-width":new vi(Ie.paint_line["line-width"]),"line-gap-width":new vi(Ie.paint_line["line-gap-width"]),"line-offset":new vi(Ie.paint_line["line-offset"]),"line-blur":new vi(Ie.paint_line["line-blur"]),"line-dasharray":new al(Ie.paint_line["line-dasharray"]),"line-pattern":new il(Ie.paint_line["line-pattern"]),"line-gradient":new fs(Ie.paint_line["line-gradient"])}),layout:$g},hd=new(function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.possiblyEvaluate=function(X,ie){return ie=new ta(Math.floor(ie.zoom),{now:ie.now,fadeDuration:ie.fadeDuration,zoomHistory:ie.zoomHistory,transition:ie.transition}),A.prototype.possiblyEvaluate.call(this,X,ie)},O.prototype.evaluate=function(X,ie,pe,ye){return ie=d({},ie,{zoom:Math.floor(ie.zoom)}),A.prototype.evaluate.call(this,X,ie,pe,ye)},O}(vi))(fd.paint.properties["line-width"].specification);hd.useIntegerZoom=!0;var Qg=function(A){function O(X){A.call(this,X,fd)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype._handleSpecialPaintPropertyUpdate=function(X){X==="line-gradient"&&this._updateGradient()},O.prototype._updateGradient=function(){var X=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=$p(X,"lineProgress"),this.gradientTexture=null},O.prototype.recalculate=function(X,ie){A.prototype.recalculate.call(this,X,ie),this.paint._values["line-floorwidth"]=hd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,X)},O.prototype.createBucket=function(X){return new is(X)},O.prototype.queryRadius=function(X){var ie=X,pe=pd(Ma("line-width",this,ie),Ma("line-gap-width",this,ie)),ye=Ma("line-offset",this,ie);return pe/2+Math.abs(ye)+Do(this.paint.get("line-translate"))},O.prototype.queryIntersectsFeature=function(X,ie,pe,ye,Le,Ne,Qe){var ht=zo(X,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ne.angle,Qe),vt=Qe/2*pd(this.paint.get("line-width").evaluate(ie,pe),this.paint.get("line-gap-width").evaluate(ie,pe)),jt=this.paint.get("line-offset").evaluate(ie,pe);return jt&&(ye=function(Kt,Wt){for(var ar=[],vr=new n(0,0),Cr=0;Cr<Kt.length;Cr++){for(var Lr=Kt[Cr],Nr=[],jr=0;jr<Lr.length;jr++){var Yr=Lr[jr-1],hn=Lr[jr],xn=Lr[jr+1],Nn=jr===0?vr:hn.sub(Yr)._unit()._perp(),Bn=jr===Lr.length-1?vr:xn.sub(hn)._unit()._perp(),Gn=Nn._add(Bn)._unit(),ni=Gn.x*Bn.x+Gn.y*Bn.y;Gn._mult(1/ni),Nr.push(Gn._mult(Wt)._add(hn))}ar.push(Nr)}return ar}(ye,jt*Qe)),function(Kt,Wt,ar){for(var vr=0;vr<Wt.length;vr++){var Cr=Wt[vr];if(Kt.length>=3){for(var Lr=0;Lr<Cr.length;Lr++)if(hs(Kt,Cr[Lr]))return!0}if(Gl(Kt,Cr,ar))return!0}return!1}(ht,ye,vt)},O.prototype.isTileClipped=function(){return!0},O}(Xo);function pd(A,O){return O>0?O+2*A:A}var xh=ra([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),e1=ra([{name:"a_projected_pos",components:3,type:"Float32"}],4),t1=(ra([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ra([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),dd=(ra([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),ra([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),r1=ra([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);ra([{name:"triangle",components:3,type:"Uint16"}]),ra([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ra([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ra([{type:"Float32",name:"offsetX"}]),ra([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function n1(A,O,X){return A.sections.forEach(function(ie){ie.text=function(pe,ye,Le){var Ne=ye.layout.get("text-transform").evaluate(Le,{});return Ne==="uppercase"?pe=pe.toLocaleUpperCase():Ne==="lowercase"&&(pe=pe.toLocaleLowerCase()),ho.applyArabicShaping&&(pe=ho.applyArabicShaping(pe)),pe}(ie.text,O,X)}),A}var uu={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},md=function(A,O,X,ie,pe){var ye,Le,Ne=8*pe-ie-1,Qe=(1<<Ne)-1,ht=Qe>>1,vt=-7,jt=X?pe-1:0,Kt=X?-1:1,Wt=A[O+jt];for(jt+=Kt,ye=Wt&(1<<-vt)-1,Wt>>=-vt,vt+=Ne;vt>0;ye=256*ye+A[O+jt],jt+=Kt,vt-=8);for(Le=ye&(1<<-vt)-1,ye>>=-vt,vt+=ie;vt>0;Le=256*Le+A[O+jt],jt+=Kt,vt-=8);if(ye===0)ye=1-ht;else{if(ye===Qe)return Le?NaN:1/0*(Wt?-1:1);Le+=Math.pow(2,ie),ye-=ht}return(Wt?-1:1)*Le*Math.pow(2,ye-ie)},gd=function(A,O,X,ie,pe,ye){var Le,Ne,Qe,ht=8*ye-pe-1,vt=(1<<ht)-1,jt=vt>>1,Kt=pe===23?Math.pow(2,-24)-Math.pow(2,-77):0,Wt=ie?0:ye-1,ar=ie?1:-1,vr=O<0||O===0&&1/O<0?1:0;for(O=Math.abs(O),isNaN(O)||O===1/0?(Ne=isNaN(O)?1:0,Le=vt):(Le=Math.floor(Math.log(O)/Math.LN2),O*(Qe=Math.pow(2,-Le))<1&&(Le--,Qe*=2),(O+=Le+jt>=1?Kt/Qe:Kt*Math.pow(2,1-jt))*Qe>=2&&(Le++,Qe/=2),Le+jt>=vt?(Ne=0,Le=vt):Le+jt>=1?(Ne=(O*Qe-1)*Math.pow(2,pe),Le+=jt):(Ne=O*Math.pow(2,jt-1)*Math.pow(2,pe),Le=0));pe>=8;A[X+Wt]=255&Ne,Wt+=ar,Ne/=256,pe-=8);for(Le=Le<<pe|Ne,ht+=pe;ht>0;A[X+Wt]=255&Le,Wt+=ar,Le/=256,ht-=8);A[X+Wt-ar]|=128*vr},ju=ga;function ga(A){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(A)?A:new Uint8Array(A||0),this.pos=0,this.type=0,this.length=this.buf.length}ga.Varint=0,ga.Fixed64=1,ga.Bytes=2,ga.Fixed32=5;var vd=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function xl(A){return A.type===ga.Bytes?A.readVarint()+A.pos:A.pos+1}function xc(A,O,X){return X?4294967296*O+(A>>>0):4294967296*(O>>>0)+(A>>>0)}function yd(A,O,X){var ie=O<=16383?1:O<=2097151?2:O<=268435455?3:Math.floor(Math.log(O)/(7*Math.LN2));X.realloc(ie);for(var pe=X.pos-1;pe>=A;pe--)X.buf[pe+ie]=X.buf[pe]}function i1(A,O){for(var X=0;X<A.length;X++)O.writeVarint(A[X])}function a1(A,O){for(var X=0;X<A.length;X++)O.writeSVarint(A[X])}function o1(A,O){for(var X=0;X<A.length;X++)O.writeFloat(A[X])}function s1(A,O){for(var X=0;X<A.length;X++)O.writeDouble(A[X])}function l1(A,O){for(var X=0;X<A.length;X++)O.writeBoolean(A[X])}function c1(A,O){for(var X=0;X<A.length;X++)O.writeFixed32(A[X])}function u1(A,O){for(var X=0;X<A.length;X++)O.writeSFixed32(A[X])}function f1(A,O){for(var X=0;X<A.length;X++)O.writeFixed64(A[X])}function h1(A,O){for(var X=0;X<A.length;X++)O.writeSFixed64(A[X])}function Uu(A,O){return(A[O]|A[O+1]<<8|A[O+2]<<16)+16777216*A[O+3]}function bc(A,O,X){A[X]=O,A[X+1]=O>>>8,A[X+2]=O>>>16,A[X+3]=O>>>24}function xd(A,O){return(A[O]|A[O+1]<<8|A[O+2]<<16)+(A[O+3]<<24)}ga.prototype={destroy:function(){this.buf=null},readFields:function(A,O,X){for(X=X||this.length;this.pos<X;){var ie=this.readVarint(),pe=ie>>3,ye=this.pos;this.type=7&ie,A(pe,O,this),this.pos===ye&&this.skip(ie)}return O},readMessage:function(A,O){return this.readFields(A,O,this.readVarint()+this.pos)},readFixed32:function(){var A=Uu(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=xd(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=Uu(this.buf,this.pos)+4294967296*Uu(this.buf,this.pos+4);return this.pos+=8,A},readSFixed64:function(){var A=Uu(this.buf,this.pos)+4294967296*xd(this.buf,this.pos+4);return this.pos+=8,A},readFloat:function(){var A=md(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=md(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var O,X,ie=this.buf;return O=127&(X=ie[this.pos++]),X<128?O:(O|=(127&(X=ie[this.pos++]))<<7,X<128?O:(O|=(127&(X=ie[this.pos++]))<<14,X<128?O:(O|=(127&(X=ie[this.pos++]))<<21,X<128?O:function(pe,ye,Le){var Ne,Qe,ht=Le.buf;if(Qe=ht[Le.pos++],Ne=(112&Qe)>>4,Qe<128||(Qe=ht[Le.pos++],Ne|=(127&Qe)<<3,Qe<128)||(Qe=ht[Le.pos++],Ne|=(127&Qe)<<10,Qe<128)||(Qe=ht[Le.pos++],Ne|=(127&Qe)<<17,Qe<128)||(Qe=ht[Le.pos++],Ne|=(127&Qe)<<24,Qe<128)||(Qe=ht[Le.pos++],Ne|=(1&Qe)<<31,Qe<128))return xc(pe,Ne,ye);throw new Error("Expected varint not more than 10 bytes")}(O|=(15&(X=ie[this.pos]))<<28,A,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return A%2==1?(A+1)/-2:A/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var A=this.readVarint()+this.pos,O=this.pos;return this.pos=A,A-O>=12&&vd?function(X,ie,pe){return vd.decode(X.subarray(ie,pe))}(this.buf,O,A):function(X,ie,pe){for(var ye="",Le=ie;Le<pe;){var Ne,Qe,ht,vt=X[Le],jt=null,Kt=vt>239?4:vt>223?3:vt>191?2:1;if(Le+Kt>pe)break;Kt===1?vt<128&&(jt=vt):Kt===2?(192&(Ne=X[Le+1]))==128&&(jt=(31&vt)<<6|63&Ne)<=127&&(jt=null):Kt===3?(Ne=X[Le+1],Qe=X[Le+2],(192&Ne)==128&&(192&Qe)==128&&((jt=(15&vt)<<12|(63&Ne)<<6|63&Qe)<=2047||jt>=55296&&jt<=57343)&&(jt=null)):Kt===4&&(Ne=X[Le+1],Qe=X[Le+2],ht=X[Le+3],(192&Ne)==128&&(192&Qe)==128&&(192&ht)==128&&((jt=(15&vt)<<18|(63&Ne)<<12|(63&Qe)<<6|63&ht)<=65535||jt>=1114112)&&(jt=null)),jt===null?(jt=65533,Kt=1):jt>65535&&(jt-=65536,ye+=String.fromCharCode(jt>>>10&1023|55296),jt=56320|1023&jt),ye+=String.fromCharCode(jt),Le+=Kt}return ye}(this.buf,O,A)},readBytes:function(){var A=this.readVarint()+this.pos,O=this.buf.subarray(this.pos,A);return this.pos=A,O},readPackedVarint:function(A,O){if(this.type!==ga.Bytes)return A.push(this.readVarint(O));var X=xl(this);for(A=A||[];this.pos<X;)A.push(this.readVarint(O));return A},readPackedSVarint:function(A){if(this.type!==ga.Bytes)return A.push(this.readSVarint());var O=xl(this);for(A=A||[];this.pos<O;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==ga.Bytes)return A.push(this.readBoolean());var O=xl(this);for(A=A||[];this.pos<O;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==ga.Bytes)return A.push(this.readFloat());var O=xl(this);for(A=A||[];this.pos<O;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==ga.Bytes)return A.push(this.readDouble());var O=xl(this);for(A=A||[];this.pos<O;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==ga.Bytes)return A.push(this.readFixed32());var O=xl(this);for(A=A||[];this.pos<O;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==ga.Bytes)return A.push(this.readSFixed32());var O=xl(this);for(A=A||[];this.pos<O;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==ga.Bytes)return A.push(this.readFixed64());var O=xl(this);for(A=A||[];this.pos<O;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==ga.Bytes)return A.push(this.readSFixed64());var O=xl(this);for(A=A||[];this.pos<O;)A.push(this.readSFixed64());return A},skip:function(A){var O=7&A;if(O===ga.Varint)for(;this.buf[this.pos++]>127;);else if(O===ga.Bytes)this.pos=this.readVarint()+this.pos;else if(O===ga.Fixed32)this.pos+=4;else{if(O!==ga.Fixed64)throw new Error("Unimplemented type: "+O);this.pos+=8}},writeTag:function(A,O){this.writeVarint(A<<3|O)},realloc:function(A){for(var O=this.length||16;O<this.pos+A;)O*=2;if(O!==this.length){var X=new Uint8Array(O);X.set(this.buf),this.buf=X,this.length=O}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4),bc(this.buf,A,this.pos),this.pos+=4},writeSFixed32:function(A){this.realloc(4),bc(this.buf,A,this.pos),this.pos+=4},writeFixed64:function(A){this.realloc(8),bc(this.buf,-1&A,this.pos),bc(this.buf,Math.floor(A*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(A){this.realloc(8),bc(this.buf,-1&A,this.pos),bc(this.buf,Math.floor(A*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(A){(A=+A||0)>268435455||A<0?function(O,X){var ie,pe;if(O>=0?(ie=O%4294967296|0,pe=O/4294967296|0):(pe=~(-O/4294967296),4294967295^(ie=~(-O%4294967296))?ie=ie+1|0:(ie=0,pe=pe+1|0)),O>=18446744073709552e3||O<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");X.realloc(10),function(ye,Le,Ne){Ne.buf[Ne.pos++]=127&ye|128,ye>>>=7,Ne.buf[Ne.pos++]=127&ye|128,ye>>>=7,Ne.buf[Ne.pos++]=127&ye|128,ye>>>=7,Ne.buf[Ne.pos++]=127&ye|128,ye>>>=7,Ne.buf[Ne.pos]=127&ye}(ie,0,X),function(ye,Le){var Ne=(7&ye)<<4;Le.buf[Le.pos++]|=Ne|((ye>>>=3)?128:0),!!ye&&(Le.buf[Le.pos++]=127&ye|((ye>>>=7)?128:0),!!ye&&(Le.buf[Le.pos++]=127&ye|((ye>>>=7)?128:0),!!ye&&(Le.buf[Le.pos++]=127&ye|((ye>>>=7)?128:0),!!ye&&(Le.buf[Le.pos++]=127&ye|((ye>>>=7)?128:0),!!ye&&(Le.buf[Le.pos++]=127&ye)))))}(pe,X)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(A<0?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(Boolean(A))},writeString:function(A){A=String(A),this.realloc(4*A.length),this.pos++;var O=this.pos;this.pos=function(ie,pe,ye){for(var Le,Ne,Qe=0;Qe<pe.length;Qe++){if((Le=pe.charCodeAt(Qe))>55295&&Le<57344){if(!Ne){Le>56319||Qe+1===pe.length?(ie[ye++]=239,ie[ye++]=191,ie[ye++]=189):Ne=Le;continue}if(Le<56320){ie[ye++]=239,ie[ye++]=191,ie[ye++]=189,Ne=Le;continue}Le=Ne-55296<<10|Le-56320|65536,Ne=null}else Ne&&(ie[ye++]=239,ie[ye++]=191,ie[ye++]=189,Ne=null);Le<128?ie[ye++]=Le:(Le<2048?ie[ye++]=Le>>6|192:(Le<65536?ie[ye++]=Le>>12|224:(ie[ye++]=Le>>18|240,ie[ye++]=Le>>12&63|128),ie[ye++]=Le>>6&63|128),ie[ye++]=63&Le|128)}return ye}(this.buf,A,this.pos);var X=this.pos-O;X>=128&&yd(O,X,this),this.pos=O-1,this.writeVarint(X),this.pos+=X},writeFloat:function(A){this.realloc(4),gd(this.buf,A,this.pos,!0,23,4),this.pos+=4},writeDouble:function(A){this.realloc(8),gd(this.buf,A,this.pos,!0,52,8),this.pos+=8},writeBytes:function(A){var O=A.length;this.writeVarint(O),this.realloc(O);for(var X=0;X<O;X++)this.buf[this.pos++]=A[X]},writeRawMessage:function(A,O){this.pos++;var X=this.pos;A(O,this);var ie=this.pos-X;ie>=128&&yd(X,ie,this),this.pos=X-1,this.writeVarint(ie),this.pos+=ie},writeMessage:function(A,O,X){this.writeTag(A,ga.Bytes),this.writeRawMessage(O,X)},writePackedVarint:function(A,O){O.length&&this.writeMessage(A,i1,O)},writePackedSVarint:function(A,O){O.length&&this.writeMessage(A,a1,O)},writePackedBoolean:function(A,O){O.length&&this.writeMessage(A,l1,O)},writePackedFloat:function(A,O){O.length&&this.writeMessage(A,o1,O)},writePackedDouble:function(A,O){O.length&&this.writeMessage(A,s1,O)},writePackedFixed32:function(A,O){O.length&&this.writeMessage(A,c1,O)},writePackedSFixed32:function(A,O){O.length&&this.writeMessage(A,u1,O)},writePackedFixed64:function(A,O){O.length&&this.writeMessage(A,f1,O)},writePackedSFixed64:function(A,O){O.length&&this.writeMessage(A,h1,O)},writeBytesField:function(A,O){this.writeTag(A,ga.Bytes),this.writeBytes(O)},writeFixed32Field:function(A,O){this.writeTag(A,ga.Fixed32),this.writeFixed32(O)},writeSFixed32Field:function(A,O){this.writeTag(A,ga.Fixed32),this.writeSFixed32(O)},writeFixed64Field:function(A,O){this.writeTag(A,ga.Fixed64),this.writeFixed64(O)},writeSFixed64Field:function(A,O){this.writeTag(A,ga.Fixed64),this.writeSFixed64(O)},writeVarintField:function(A,O){this.writeTag(A,ga.Varint),this.writeVarint(O)},writeSVarintField:function(A,O){this.writeTag(A,ga.Varint),this.writeSVarint(O)},writeStringField:function(A,O){this.writeTag(A,ga.Bytes),this.writeString(O)},writeFloatField:function(A,O){this.writeTag(A,ga.Fixed32),this.writeFloat(O)},writeDoubleField:function(A,O){this.writeTag(A,ga.Fixed64),this.writeDouble(O)},writeBooleanField:function(A,O){this.writeVarintField(A,Boolean(O))}};function p1(A,O,X){A===1&&X.readMessage(d1,O)}function d1(A,O,X){if(A===3){var ie=X.readMessage(m1,{}),pe=ie.id,ye=ie.bitmap,Le=ie.width,Ne=ie.height,Qe=ie.left,ht=ie.top,vt=ie.advance;O.push({id:pe,bitmap:new Xl({width:Le+6,height:Ne+6},ye),metrics:{width:Le,height:Ne,left:Qe,top:ht,advance:vt}})}}function m1(A,O,X){A===1?O.id=X.readVarint():A===2?O.bitmap=X.readBytes():A===3?O.width=X.readVarint():A===4?O.height=X.readVarint():A===5?O.left=X.readSVarint():A===6?O.top=X.readSVarint():A===7&&(O.advance=X.readVarint())}function bd(A){for(var O=0,X=0,ie=0,pe=A;ie<pe.length;ie+=1){var ye=pe[ie];O+=ye.w*ye.h,X=Math.max(X,ye.w)}A.sort(function(vr,Cr){return Cr.h-vr.h});for(var Le=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(O/.95)),X),h:1/0}],Ne=0,Qe=0,ht=0,vt=A;ht<vt.length;ht+=1)for(var jt=vt[ht],Kt=Le.length-1;Kt>=0;Kt--){var Wt=Le[Kt];if(!(jt.w>Wt.w||jt.h>Wt.h)){if(jt.x=Wt.x,jt.y=Wt.y,Qe=Math.max(Qe,jt.y+jt.h),Ne=Math.max(Ne,jt.x+jt.w),jt.w===Wt.w&&jt.h===Wt.h){var ar=Le.pop();Kt<Le.length&&(Le[Kt]=ar)}else jt.h===Wt.h?(Wt.x+=jt.w,Wt.w-=jt.w):jt.w===Wt.w?(Wt.y+=jt.h,Wt.h-=jt.h):(Le.push({x:Wt.x+jt.w,y:Wt.y,w:Wt.w-jt.w,h:jt.h}),Wt.y+=jt.h,Wt.h-=jt.h);break}}return{w:Ne,h:Qe,fill:O/(Ne*Qe)||0}}var Vu=function(A,O){var X=O.pixelRatio,ie=O.version,pe=O.stretchX,ye=O.stretchY,Le=O.content;this.paddedRect=A,this.pixelRatio=X,this.stretchX=pe,this.stretchY=ye,this.content=Le,this.version=ie},fu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};fu.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},fu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},fu.tlbr.get=function(){return this.tl.concat(this.br)},fu.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Vu.prototype,fu);var hu=function(A,O){var X={},ie={};this.haveRenderCallbacks=[];var pe=[];this.addImages(A,X,pe),this.addImages(O,ie,pe);var ye=bd(pe),Le=ye.w,Ne=ye.h,Qe=new ns({width:Le||1,height:Ne||1});for(var ht in A){var vt=A[ht],jt=X[ht].paddedRect;ns.copy(vt.data,Qe,{x:0,y:0},{x:jt.x+1,y:jt.y+1},vt.data)}for(var Kt in O){var Wt=O[Kt],ar=ie[Kt].paddedRect,vr=ar.x+1,Cr=ar.y+1,Lr=Wt.data.width,Nr=Wt.data.height;ns.copy(Wt.data,Qe,{x:0,y:0},{x:vr,y:Cr},Wt.data),ns.copy(Wt.data,Qe,{x:0,y:Nr-1},{x:vr,y:Cr-1},{width:Lr,height:1}),ns.copy(Wt.data,Qe,{x:0,y:0},{x:vr,y:Cr+Nr},{width:Lr,height:1}),ns.copy(Wt.data,Qe,{x:Lr-1,y:0},{x:vr-1,y:Cr},{width:1,height:Nr}),ns.copy(Wt.data,Qe,{x:0,y:0},{x:vr+Lr,y:Cr},{width:1,height:Nr})}this.image=Qe,this.iconPositions=X,this.patternPositions=ie};hu.prototype.addImages=function(A,O,X){for(var ie in A){var pe=A[ie],ye={x:0,y:0,w:pe.data.width+2,h:pe.data.height+2};X.push(ye),O[ie]=new Vu(ye,pe),pe.hasRenderCallback&&this.haveRenderCallbacks.push(ie)}},hu.prototype.patchUpdatedImages=function(A,O){for(var X in A.dispatchRenderCallbacks(this.haveRenderCallbacks),A.updatedImages)this.patchUpdatedImage(this.iconPositions[X],A.getImage(X),O),this.patchUpdatedImage(this.patternPositions[X],A.getImage(X),O)},hu.prototype.patchUpdatedImage=function(A,O,X){if(A&&O&&A.version!==O.version){A.version=O.version;var ie=A.tl,pe=ie[0],ye=ie[1];X.update(O.data,void 0,{x:pe,y:ye})}},Jr("ImagePosition",Vu),Jr("ImageAtlas",hu);var bs={horizontal:1,vertical:2,horizontalOnly:3},_c=function(){this.scale=1,this.fontStack="",this.imageName=null};_c.forText=function(A,O){var X=new _c;return X.scale=A||1,X.fontStack=O,X},_c.forImage=function(A){var O=new _c;return O.imageName=A,O};var jo=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Hu(A,O,X,ie,pe,ye,Le,Ne,Qe,ht,vt,jt,Kt,Wt,ar,vr){var Cr,Lr=jo.fromFeature(A,pe);jt===bs.vertical&&Lr.verticalizePunctuation();var Nr=ho.processBidirectionalText,jr=ho.processStyledBidirectionalText;if(Nr&&Lr.sections.length===1){Cr=[];for(var Yr=0,hn=Nr(Lr.toString(),bh(Lr,ht,ye,O,ie,Wt,ar));Yr<hn.length;Yr+=1){var xn=hn[Yr],Nn=new jo;Nn.text=xn,Nn.sections=Lr.sections;for(var Bn=0;Bn<xn.length;Bn++)Nn.sectionIndex.push(0);Cr.push(Nn)}}else if(jr){Cr=[];for(var Gn=0,ni=jr(Lr.text,Lr.sectionIndex,bh(Lr,ht,ye,O,ie,Wt,ar));Gn<ni.length;Gn+=1){var ii=ni[Gn],Xn=new jo;Xn.text=ii[0],Xn.sectionIndex=ii[1],Xn.sections=Lr.sections,Cr.push(Xn)}}else Cr=function(ai,Zi){for(var Ni=[],$i=ai.text,bi=0,Vi=0,va=Zi;Vi<va.length;Vi+=1){var ua=va[Vi];Ni.push(ai.substring(bi,ua)),bi=ua}return bi<$i.length&&Ni.push(ai.substring(bi,$i.length)),Ni}(Lr,bh(Lr,ht,ye,O,ie,Wt,ar));var fi=[],ci={positionedLines:fi,text:Lr.toString(),top:vt[1],bottom:vt[1],left:vt[0],right:vt[0],writingMode:jt,iconsInText:!1,verticalizable:!1};return function(ai,Zi,Ni,$i,bi,Vi,va,ua,Ea,fa,co,La){for(var Ro=0,ko=-17,So=0,Jo=0,Uo=ua==="right"?1:ua==="left"?0:.5,uo=0,Eo=0,Ka=bi;Eo<Ka.length;Eo+=1){var po=Ka[Eo];po.trim();var Oi=po.getMaxScale(),Ji=24*(Oi-1),Va={positionedGlyphs:[],lineOffset:0};ai.positionedLines[uo]=Va;var Ha=Va.positionedGlyphs,Fa=0;if(po.length()){for(var Ca=0;Ca<po.length();Ca++){var na=po.getSection(Ca),qa=po.getSectionIndex(Ca),Ko=po.getCharCode(Ca),ds=0,Vo=null,Xs=null,wl=null,Ao=24,Js=!(Ea===bs.horizontal||!co&&!pi(Ko)||co&&(qu[Ko]||(Dl=Ko,En.Arabic(Dl)||En["Arabic Supplement"](Dl)||En["Arabic Extended-A"](Dl)||En["Arabic Presentation Forms-A"](Dl)||En["Arabic Presentation Forms-B"](Dl))));if(na.imageName){var Ks=$i[na.imageName];if(!Ks)continue;wl=na.imageName,ai.iconsInText=ai.iconsInText||!0,Xs=Ks.paddedRect;var $s=Ks.displaySize;na.scale=24*na.scale/La,Vo={width:$s[0],height:$s[1],left:1,top:-3,advance:Js?$s[1]:$s[0]};var Ch=24-$s[1]*na.scale;ds=Ji+Ch,Ao=Vo.advance;var Lc=Js?$s[0]*na.scale-24*Oi:$s[1]*na.scale-24*Oi;Lc>0&&Lc>Fa&&(Fa=Lc)}else{var Qu=Ni[na.fontStack],Ql=Qu&&Qu[Ko];if(Ql&&Ql.rect)Xs=Ql.rect,Vo=Ql.metrics;else{var ef=Zi[na.fontStack],tf=ef&&ef[Ko];if(!tf)continue;Vo=tf.metrics}ds=24*(Oi-na.scale)}Js?(ai.verticalizable=!0,Ha.push({glyph:Ko,imageName:wl,x:Ro,y:ko+ds,vertical:Js,scale:na.scale,fontStack:na.fontStack,sectionIndex:qa,metrics:Vo,rect:Xs}),Ro+=Ao*na.scale+fa):(Ha.push({glyph:Ko,imageName:wl,x:Ro,y:ko+ds,vertical:Js,scale:na.scale,fontStack:na.fontStack,sectionIndex:qa,metrics:Vo,rect:Xs}),Ro+=Vo.advance*na.scale+fa)}if(Ha.length!==0){var rf=Ro-fa;So=Math.max(rf,So),v1(Ha,0,Ha.length-1,Uo,Fa)}Ro=0;var nf=Vi*Oi+Fa;Va.lineOffset=Math.max(Fa,Ji),ko+=nf,Jo=Math.max(nf,Jo),++uo}else ko+=Vi,++uo}var Dl,Cc=ko- -17,af=_h(va),Pc=af.horizontalAlign,zl=af.verticalAlign;(function(mu,of,sf,lf,gu,cf,vu,uf,yu){var ff=(of-sf)*gu,Ic=0;Ic=cf!==vu?-uf*lf- -17:(-lf*yu+.5)*vu;for(var Oc=0,Dc=mu;Oc<Dc.length;Oc+=1)for(var hf=Dc[Oc],zc=0,xu=hf.positionedGlyphs;zc<xu.length;zc+=1){var Rc=xu[zc];Rc.x+=ff,Rc.y+=Ic}})(ai.positionedLines,Uo,Pc,zl,So,Jo,Vi,Cc,bi.length),ai.top+=-zl*Cc,ai.bottom=ai.top+Cc,ai.left+=-Pc*So,ai.right=ai.left+So}(ci,O,X,ie,Cr,Le,Ne,Qe,jt,ht,Kt,vr),!function(ai){for(var Zi=0,Ni=ai;Zi<Ni.length;Zi+=1)if(Ni[Zi].positionedGlyphs.length!==0)return!1;return!0}(fi)&&ci}jo.fromFeature=function(A,O){for(var X=new jo,ie=0;ie<A.sections.length;ie++){var pe=A.sections[ie];pe.image?X.addImageSection(pe):X.addTextSection(pe,O)}return X},jo.prototype.length=function(){return this.text.length},jo.prototype.getSection=function(A){return this.sections[this.sectionIndex[A]]},jo.prototype.getSectionIndex=function(A){return this.sectionIndex[A]},jo.prototype.getCharCode=function(A){return this.text.charCodeAt(A)},jo.prototype.verticalizePunctuation=function(){this.text=function(A){for(var O="",X=0;X<A.length;X++){var ie=A.charCodeAt(X+1)||null,pe=A.charCodeAt(X-1)||null;(!ie||!Ii(ie)||uu[A[X+1]])&&(!pe||!Ii(pe)||uu[A[X-1]])&&uu[A[X]]?O+=uu[A[X]]:O+=A[X]}return O}(this.text)},jo.prototype.trim=function(){for(var A=0,O=0;O<this.text.length&&qu[this.text.charCodeAt(O)];O++)A++;for(var X=this.text.length,ie=this.text.length-1;ie>=0&&ie>=A&&qu[this.text.charCodeAt(ie)];ie--)X--;this.text=this.text.substring(A,X),this.sectionIndex=this.sectionIndex.slice(A,X)},jo.prototype.substring=function(A,O){var X=new jo;return X.text=this.text.substring(A,O),X.sectionIndex=this.sectionIndex.slice(A,O),X.sections=this.sections,X},jo.prototype.toString=function(){return this.text},jo.prototype.getMaxScale=function(){var A=this;return this.sectionIndex.reduce(function(O,X){return Math.max(O,A.sections[X].scale)},0)},jo.prototype.addTextSection=function(A,O){this.text+=A.text,this.sections.push(_c.forText(A.scale,A.fontStack||O));for(var X=this.sections.length-1,ie=0;ie<A.text.length;++ie)this.sectionIndex.push(X)},jo.prototype.addImageSection=function(A){var O=A.image?A.image.name:"";if(O.length!==0){var X=this.getNextImageSectionCharCode();X?(this.text+=String.fromCharCode(X),this.sections.push(_c.forImage(O)),this.sectionIndex.push(this.sections.length-1)):M("Reached maximum number of images 6401")}else M("Can't add FormattedSection with an empty image.")},jo.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var qu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ps={};function _d(A,O,X,ie,pe,ye){if(O.imageName){var Le=ie[O.imageName];return Le?Le.displaySize[0]*O.scale*24/ye+pe:0}var Ne=X[O.fontStack],Qe=Ne&&Ne[A];return Qe?Qe.metrics.advance*O.scale+pe:0}function wd(A,O,X,ie){var pe=Math.pow(A-O,2);return ie?A<O?pe/2:2*pe:pe+Math.abs(X)*X}function g1(A,O,X){var ie=0;return A===10&&(ie-=1e4),X&&(ie+=150),A!==40&&A!==65288||(ie+=50),O!==41&&O!==65289||(ie+=50),ie}function Td(A,O,X,ie,pe,ye){for(var Le=null,Ne=wd(O,X,pe,ye),Qe=0,ht=ie;Qe<ht.length;Qe+=1){var vt=ht[Qe],jt=wd(O-vt.x,X,pe,ye)+vt.badness;jt<=Ne&&(Le=vt,Ne=jt)}return{index:A,x:O,priorBreak:Le,badness:Ne}}function bh(A,O,X,ie,pe,ye,Le){if(ye!=="point")return[];if(!A)return[];for(var Ne,Qe=[],ht=function(Cr,Lr,Nr,jr,Yr,hn){for(var xn=0,Nn=0;Nn<Cr.length();Nn++){var Bn=Cr.getSection(Nn);xn+=_d(Cr.getCharCode(Nn),Bn,jr,Yr,Lr,hn)}return xn/Math.max(1,Math.ceil(xn/Nr))}(A,O,X,ie,pe,Le),vt=A.text.indexOf("\u200B")>=0,jt=0,Kt=0;Kt<A.length();Kt++){var Wt=A.getSection(Kt),ar=A.getCharCode(Kt);if(qu[ar]||(jt+=_d(ar,Wt,ie,pe,O,Le)),Kt<A.length()-1){var vr=!!(!((Ne=ar)<11904)&&(En["Bopomofo Extended"](Ne)||En.Bopomofo(Ne)||En["CJK Compatibility Forms"](Ne)||En["CJK Compatibility Ideographs"](Ne)||En["CJK Compatibility"](Ne)||En["CJK Radicals Supplement"](Ne)||En["CJK Strokes"](Ne)||En["CJK Symbols and Punctuation"](Ne)||En["CJK Unified Ideographs Extension A"](Ne)||En["CJK Unified Ideographs"](Ne)||En["Enclosed CJK Letters and Months"](Ne)||En["Halfwidth and Fullwidth Forms"](Ne)||En.Hiragana(Ne)||En["Ideographic Description Characters"](Ne)||En["Kangxi Radicals"](Ne)||En["Katakana Phonetic Extensions"](Ne)||En.Katakana(Ne)||En["Vertical Forms"](Ne)||En["Yi Radicals"](Ne)||En["Yi Syllables"](Ne)));(ps[ar]||vr||Wt.imageName)&&Qe.push(Td(Kt+1,jt,ht,Qe,g1(ar,A.getCharCode(Kt+1),vr&&vt),!1))}}return function Cr(Lr){return Lr?Cr(Lr.priorBreak).concat(Lr.index):[]}(Td(A.length(),jt,ht,Qe,0,!0))}function _h(A){var O=.5,X=.5;switch(A){case"right":case"top-right":case"bottom-right":O=1;break;case"left":case"top-left":case"bottom-left":O=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":X=1;break;case"top":case"top-right":case"top-left":X=0}return{horizontalAlign:O,verticalAlign:X}}function v1(A,O,X,ie,pe){if(ie||pe)for(var ye=A[X],Le=ye.metrics.advance*ye.scale,Ne=(A[X].x+Le)*ie,Qe=O;Qe<=X;Qe++)A[Qe].x-=Ne,A[Qe].y+=pe}function kd(A,O,X,ie,pe,ye){var Le,Ne=A.image;if(Ne.content){var Qe=Ne.content,ht=Ne.pixelRatio||1;Le=[Qe[0]/ht,Qe[1]/ht,Ne.displaySize[0]-Qe[2]/ht,Ne.displaySize[1]-Qe[3]/ht]}var vt,jt,Kt,Wt,ar=O.left*ye,vr=O.right*ye;X==="width"||X==="both"?(Wt=pe[0]+ar-ie[3],jt=pe[0]+vr+ie[1]):jt=(Wt=pe[0]+(ar+vr-Ne.displaySize[0])/2)+Ne.displaySize[0];var Cr=O.top*ye,Lr=O.bottom*ye;return X==="height"||X==="both"?(vt=pe[1]+Cr-ie[0],Kt=pe[1]+Lr+ie[2]):Kt=(vt=pe[1]+(Cr+Lr-Ne.displaySize[1])/2)+Ne.displaySize[1],{image:Ne,top:vt,right:jt,bottom:Kt,left:Wt,collisionPadding:Le}}ps[10]=!0,ps[32]=!0,ps[38]=!0,ps[40]=!0,ps[41]=!0,ps[43]=!0,ps[45]=!0,ps[47]=!0,ps[173]=!0,ps[183]=!0,ps[8203]=!0,ps[8208]=!0,ps[8211]=!0,ps[8231]=!0;var wc=function(A){function O(X,ie,pe,ye){A.call(this,X,ie),this.angle=pe,ye!==void 0&&(this.segment=ye)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.clone=function(){return new O(this.x,this.y,this.angle,this.segment)},O}(n);Jr("Anchor",wc);function wh(A,O){var X=O.expression;if(X.kind==="constant")return{kind:"constant",layoutSize:X.evaluate(new ta(A+1))};if(X.kind==="source")return{kind:"source"};for(var ie=X.zoomStops,pe=X.interpolationType,ye=0;ye<ie.length&&ie[ye]<=A;)ye++;for(var Le=ye=Math.max(0,ye-1);Le<ie.length&&ie[Le]<A+1;)Le++;Le=Math.min(ie.length-1,Le);var Ne=ie[ye],Qe=ie[Le];return X.kind==="composite"?{kind:"composite",minZoom:Ne,maxZoom:Qe,interpolationType:pe}:{kind:"camera",minZoom:Ne,maxZoom:Qe,minSize:X.evaluate(new ta(Ne)),maxSize:X.evaluate(new ta(Qe)),interpolationType:pe}}function Ad(A,O,X){var ie=O.uSize,pe=O.uSizeT,ye=X.lowerSize,Le=X.upperSize;return A.kind==="source"?ye/128:A.kind==="composite"?Yn(ye/128,Le/128,pe):ie}function Md(A,O){var X=0,ie=0;if(A.kind==="constant")ie=A.layoutSize;else if(A.kind!=="source"){var pe=A.interpolationType,ye=A.minZoom,Le=A.maxZoom,Ne=pe?l(Hi.interpolationFactor(pe,O,ye,Le),0,1):0;A.kind==="camera"?ie=Yn(A.minSize,A.maxSize,Ne):X=Ne}return{uSizeT:X,uSize:ie}}var y1=Object.freeze({__proto__:null,getSizeData:wh,evaluateSizeForFeature:Ad,evaluateSizeForZoom:Md,SIZE_PACK_FACTOR:128});function Sd(A,O,X,ie,pe){if(O.segment===void 0)return!0;for(var ye=O,Le=O.segment+1,Ne=0;Ne>-X/2;){if(--Le<0)return!1;Ne-=A[Le].dist(ye),ye=A[Le]}Ne+=A[Le].dist(A[Le+1]),Le++;for(var Qe=[],ht=0;Ne<X/2;){var vt=A[Le-1],jt=A[Le],Kt=A[Le+1];if(!Kt)return!1;var Wt=vt.angleTo(jt)-jt.angleTo(Kt);for(Wt=Math.abs((Wt+3*Math.PI)%(2*Math.PI)-Math.PI),Qe.push({distance:Ne,angleDelta:Wt}),ht+=Wt;Ne-Qe[0].distance>ie;)ht-=Qe.shift().angleDelta;if(ht>pe)return!1;Le++,Ne+=jt.dist(Kt)}return!0}function Ed(A){for(var O=0,X=0;X<A.length-1;X++)O+=A[X].dist(A[X+1]);return O}function Ld(A,O,X){return A?.6*O*X:0}function Cd(A,O){return Math.max(A?A.right-A.left:0,O?O.right-O.left:0)}function x1(A,O,X,ie,pe,ye){for(var Le=Ld(X,pe,ye),Ne=Cd(X,ie)*ye,Qe=0,ht=Ed(A)/2,vt=0;vt<A.length-1;vt++){var jt=A[vt],Kt=A[vt+1],Wt=jt.dist(Kt);if(Qe+Wt>ht){var ar=(ht-Qe)/Wt,vr=Yn(jt.x,Kt.x,ar),Cr=Yn(jt.y,Kt.y,ar),Lr=new wc(vr,Cr,Kt.angleTo(jt),vt);return Lr._round(),!Le||Sd(A,Lr,Ne,Le,O)?Lr:void 0}Qe+=Wt}}function b1(A,O,X,ie,pe,ye,Le,Ne,Qe){var ht=Ld(ie,ye,Le),vt=Cd(ie,pe),jt=vt*Le,Kt=A[0].x===0||A[0].x===Qe||A[0].y===0||A[0].y===Qe;return O-jt<O/4&&(O=jt+O/4),function Wt(ar,vr,Cr,Lr,Nr,jr,Yr,hn,xn){for(var Nn=jr/2,Bn=Ed(ar),Gn=0,ni=vr-Cr,ii=[],Xn=0;Xn<ar.length-1;Xn++){for(var fi=ar[Xn],ci=ar[Xn+1],ai=fi.dist(ci),Zi=ci.angleTo(fi);ni+Cr<Gn+ai;){var Ni=((ni+=Cr)-Gn)/ai,$i=Yn(fi.x,ci.x,Ni),bi=Yn(fi.y,ci.y,Ni);if($i>=0&&$i<xn&&bi>=0&&bi<xn&&ni-Nn>=0&&ni+Nn<=Bn){var Vi=new wc($i,bi,Zi,Xn);Vi._round(),Lr&&!Sd(ar,Vi,jr,Lr,Nr)||ii.push(Vi)}}Gn+=ai}return hn||ii.length||Yr||(ii=Wt(ar,Gn/2,Cr,Lr,Nr,jr,Yr,!0,xn)),ii}(A,Kt?O/2*Ne%O:(vt/2+2*ye)*Le*Ne%O,O,ht,X,jt,Kt,!1,Qe)}function Pd(A,O,X,ie,pe){for(var ye=[],Le=0;Le<A.length;Le++)for(var Ne=A[Le],Qe=void 0,ht=0;ht<Ne.length-1;ht++){var vt=Ne[ht],jt=Ne[ht+1];vt.x<O&&jt.x<O||(vt.x<O?vt=new n(O,vt.y+(jt.y-vt.y)*((O-vt.x)/(jt.x-vt.x)))._round():jt.x<O&&(jt=new n(O,vt.y+(jt.y-vt.y)*((O-vt.x)/(jt.x-vt.x)))._round()),vt.y<X&&jt.y<X||(vt.y<X?vt=new n(vt.x+(jt.x-vt.x)*((X-vt.y)/(jt.y-vt.y)),X)._round():jt.y<X&&(jt=new n(vt.x+(jt.x-vt.x)*((X-vt.y)/(jt.y-vt.y)),X)._round()),vt.x>=ie&&jt.x>=ie||(vt.x>=ie?vt=new n(ie,vt.y+(jt.y-vt.y)*((ie-vt.x)/(jt.x-vt.x)))._round():jt.x>=ie&&(jt=new n(ie,vt.y+(jt.y-vt.y)*((ie-vt.x)/(jt.x-vt.x)))._round()),vt.y>=pe&&jt.y>=pe||(vt.y>=pe?vt=new n(vt.x+(jt.x-vt.x)*((pe-vt.y)/(jt.y-vt.y)),pe)._round():jt.y>=pe&&(jt=new n(vt.x+(jt.x-vt.x)*((pe-vt.y)/(jt.y-vt.y)),pe)._round()),Qe&&vt.equals(Qe[Qe.length-1])||(Qe=[vt],ye.push(Qe)),Qe.push(jt)))))}return ye}function Id(A,O,X,ie){var pe=[],ye=A.image,Le=ye.pixelRatio,Ne=ye.paddedRect.w-2,Qe=ye.paddedRect.h-2,ht=A.right-A.left,vt=A.bottom-A.top,jt=ye.stretchX||[[0,Ne]],Kt=ye.stretchY||[[0,Qe]],Wt=function(Vi,va){return Vi+va[1]-va[0]},ar=jt.reduce(Wt,0),vr=Kt.reduce(Wt,0),Cr=Ne-ar,Lr=Qe-vr,Nr=0,jr=ar,Yr=0,hn=vr,xn=0,Nn=Cr,Bn=0,Gn=Lr;if(ye.content&&ie){var ni=ye.content;Nr=Gu(jt,0,ni[0]),Yr=Gu(Kt,0,ni[1]),jr=Gu(jt,ni[0],ni[2]),hn=Gu(Kt,ni[1],ni[3]),xn=ni[0]-Nr,Bn=ni[1]-Yr,Nn=ni[2]-ni[0]-jr,Gn=ni[3]-ni[1]-hn}var ii=function(Vi,va,ua,Ea){var fa=Yu(Vi.stretch-Nr,jr,ht,A.left),co=Wu(Vi.fixed-xn,Nn,Vi.stretch,ar),La=Yu(va.stretch-Yr,hn,vt,A.top),Ro=Wu(va.fixed-Bn,Gn,va.stretch,vr),ko=Yu(ua.stretch-Nr,jr,ht,A.left),So=Wu(ua.fixed-xn,Nn,ua.stretch,ar),Jo=Yu(Ea.stretch-Yr,hn,vt,A.top),Uo=Wu(Ea.fixed-Bn,Gn,Ea.stretch,vr),uo=new n(fa,La),Eo=new n(ko,La),Ka=new n(ko,Jo),po=new n(fa,Jo),Oi=new n(co/Le,Ro/Le),Ji=new n(So/Le,Uo/Le),Va=O*Math.PI/180;if(Va){var Ha=Math.sin(Va),Fa=Math.cos(Va),Ca=[Fa,-Ha,Ha,Fa];uo._matMult(Ca),Eo._matMult(Ca),po._matMult(Ca),Ka._matMult(Ca)}var na=Vi.stretch+Vi.fixed,qa=ua.stretch+ua.fixed,Ko=va.stretch+va.fixed,ds=Ea.stretch+Ea.fixed;return{tl:uo,tr:Eo,bl:po,br:Ka,tex:{x:ye.paddedRect.x+1+na,y:ye.paddedRect.y+1+Ko,w:qa-na,h:ds-Ko},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Oi,pixelOffsetBR:Ji,minFontScaleX:Nn/Le/ht,minFontScaleY:Gn/Le/vt,isSDF:X}};if(ie&&(ye.stretchX||ye.stretchY))for(var Xn=Od(jt,Cr,ar),fi=Od(Kt,Lr,vr),ci=0;ci<Xn.length-1;ci++)for(var ai=Xn[ci],Zi=Xn[ci+1],Ni=0;Ni<fi.length-1;Ni++){var $i=fi[Ni],bi=fi[Ni+1];pe.push(ii(ai,$i,Zi,bi))}else pe.push(ii({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ne+1},{fixed:0,stretch:Qe+1}));return pe}function Gu(A,O,X){for(var ie=0,pe=0,ye=A;pe<ye.length;pe+=1){var Le=ye[pe];ie+=Math.max(O,Math.min(X,Le[1]))-Math.max(O,Math.min(X,Le[0]))}return ie}function Od(A,O,X){for(var ie=[{fixed:-1,stretch:0}],pe=0,ye=A;pe<ye.length;pe+=1){var Le=ye[pe],Ne=Le[0],Qe=Le[1],ht=ie[ie.length-1];ie.push({fixed:Ne-ht.stretch,stretch:ht.stretch}),ie.push({fixed:Ne-ht.stretch,stretch:ht.stretch+(Qe-Ne)})}return ie.push({fixed:O+1,stretch:X}),ie}function Yu(A,O,X,ie){return A/O*X+ie}function Wu(A,O,X,ie){return A-O*X/ie}var Zu=function(A,O,X,ie,pe,ye,Le,Ne,Qe,ht){if(this.boxStartIndex=A.length,Qe){var vt=ye.top,jt=ye.bottom,Kt=ye.collisionPadding;Kt&&(vt-=Kt[1],jt+=Kt[3]);var Wt=jt-vt;Wt>0&&(Wt=Math.max(10,Wt),this.circleDiameter=Wt)}else{var ar=ye.top*Le-Ne,vr=ye.bottom*Le+Ne,Cr=ye.left*Le-Ne,Lr=ye.right*Le+Ne,Nr=ye.collisionPadding;if(Nr&&(Cr-=Nr[0]*Le,ar-=Nr[1]*Le,Lr+=Nr[2]*Le,vr+=Nr[3]*Le),ht){var jr=new n(Cr,ar),Yr=new n(Lr,ar),hn=new n(Cr,vr),xn=new n(Lr,vr),Nn=ht*Math.PI/180;jr._rotate(Nn),Yr._rotate(Nn),hn._rotate(Nn),xn._rotate(Nn),Cr=Math.min(jr.x,Yr.x,hn.x,xn.x),Lr=Math.max(jr.x,Yr.x,hn.x,xn.x),ar=Math.min(jr.y,Yr.y,hn.y,xn.y),vr=Math.max(jr.y,Yr.y,hn.y,xn.y)}A.emplaceBack(O.x,O.y,Cr,ar,Lr,vr,X,ie,pe)}this.boxEndIndex=A.length},Tc=function(A,O){if(A===void 0&&(A=[]),O===void 0&&(O=_1),this.data=A,this.length=this.data.length,this.compare=O,this.length>0)for(var X=(this.length>>1)-1;X>=0;X--)this._down(X)};function _1(A,O){return A<O?-1:A>O?1:0}function w1(A,O,X){O===void 0&&(O=1),X===void 0&&(X=!1);for(var ie=1/0,pe=1/0,ye=-1/0,Le=-1/0,Ne=A[0],Qe=0;Qe<Ne.length;Qe++){var ht=Ne[Qe];(!Qe||ht.x<ie)&&(ie=ht.x),(!Qe||ht.y<pe)&&(pe=ht.y),(!Qe||ht.x>ye)&&(ye=ht.x),(!Qe||ht.y>Le)&&(Le=ht.y)}var vt=ye-ie,jt=Le-pe,Kt=Math.min(vt,jt),Wt=Kt/2,ar=new Tc([],T1);if(Kt===0)return new n(ie,pe);for(var vr=ie;vr<ye;vr+=Kt)for(var Cr=pe;Cr<Le;Cr+=Kt)ar.push(new kc(vr+Wt,Cr+Wt,Wt,A));for(var Lr=function(Yr){for(var hn=0,xn=0,Nn=0,Bn=Yr[0],Gn=0,ni=Bn.length,ii=ni-1;Gn<ni;ii=Gn++){var Xn=Bn[Gn],fi=Bn[ii],ci=Xn.x*fi.y-fi.x*Xn.y;xn+=(Xn.x+fi.x)*ci,Nn+=(Xn.y+fi.y)*ci,hn+=3*ci}return new kc(xn/hn,Nn/hn,0,Yr)}(A),Nr=ar.length;ar.length;){var jr=ar.pop();(jr.d>Lr.d||!Lr.d)&&(Lr=jr,X&&console.log("found best %d after %d probes",Math.round(1e4*jr.d)/1e4,Nr)),jr.max-Lr.d<=O||(Wt=jr.h/2,ar.push(new kc(jr.p.x-Wt,jr.p.y-Wt,Wt,A)),ar.push(new kc(jr.p.x+Wt,jr.p.y-Wt,Wt,A)),ar.push(new kc(jr.p.x-Wt,jr.p.y+Wt,Wt,A)),ar.push(new kc(jr.p.x+Wt,jr.p.y+Wt,Wt,A)),Nr+=4)}return X&&(console.log("num probes: "+Nr),console.log("best distance: "+Lr.d)),Lr.p}function T1(A,O){return O.max-A.max}function kc(A,O,X,ie){this.p=new n(A,O),this.h=X,this.d=function(pe,ye){for(var Le=!1,Ne=1/0,Qe=0;Qe<ye.length;Qe++)for(var ht=ye[Qe],vt=0,jt=ht.length,Kt=jt-1;vt<jt;Kt=vt++){var Wt=ht[vt],ar=ht[Kt];Wt.y>pe.y!=ar.y>pe.y&&pe.x<(ar.x-Wt.x)*(pe.y-Wt.y)/(ar.y-Wt.y)+Wt.x&&(Le=!Le),Ne=Math.min(Ne,vl(pe,Wt,ar))}return(Le?1:-1)*Math.sqrt(Ne)}(this.p,ie),this.max=this.d+this.h*Math.SQRT2}Tc.prototype.push=function(A){this.data.push(A),this.length++,this._up(this.length-1)},Tc.prototype.pop=function(){if(this.length!==0){var A=this.data[0],O=this.data.pop();return this.length--,this.length>0&&(this.data[0]=O,this._down(0)),A}},Tc.prototype.peek=function(){return this.data[0]},Tc.prototype._up=function(A){for(var O=this.data,X=this.compare,ie=O[A];A>0;){var pe=A-1>>1,ye=O[pe];if(X(ie,ye)>=0)break;O[A]=ye,A=pe}O[A]=ie},Tc.prototype._down=function(A){for(var O=this.data,X=this.compare,ie=this.length>>1,pe=O[A];A<ie;){var ye=1+(A<<1),Le=O[ye],Ne=ye+1;if(Ne<this.length&&X(O[Ne],Le)<0&&(ye=Ne,Le=O[Ne]),X(Le,pe)>=0)break;O[A]=Le,A=ye}O[A]=pe};var Th=Number.POSITIVE_INFINITY;function Dd(A,O){return O[1]!==Th?function(X,ie,pe){var ye=0,Le=0;switch(ie=Math.abs(ie),pe=Math.abs(pe),X){case"top-right":case"top-left":case"top":Le=pe-7;break;case"bottom-right":case"bottom-left":case"bottom":Le=7-pe}switch(X){case"top-right":case"bottom-right":case"right":ye=-ie;break;case"top-left":case"bottom-left":case"left":ye=ie}return[ye,Le]}(A,O[0],O[1]):function(X,ie){var pe=0,ye=0;ie<0&&(ie=0);var Le=ie/Math.sqrt(2);switch(X){case"top-right":case"top-left":ye=Le-7;break;case"bottom-right":case"bottom-left":ye=7-Le;break;case"bottom":ye=7-ie;break;case"top":ye=ie-7}switch(X){case"top-right":case"bottom-right":pe=-Le;break;case"top-left":case"bottom-left":pe=Le;break;case"left":pe=ie;break;case"right":pe=-ie}return[pe,ye]}(A,O[0])}function kh(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function zd(A,O,X,ie,pe,ye,Le,Ne,Qe,ht,vt,jt,Kt,Wt,ar){var vr=function(Yr,hn,xn,Nn,Bn,Gn,ni,ii){for(var Xn=Nn.layout.get("text-rotate").evaluate(Gn,{})*Math.PI/180,fi=[],ci=0,ai=hn.positionedLines;ci<ai.length;ci+=1)for(var Zi=ai[ci],Ni=0,$i=Zi.positionedGlyphs;Ni<$i.length;Ni+=1){var bi=$i[Ni];if(bi.rect){var Vi=bi.rect||{},va=4,ua=!0,Ea=1,fa=0,co=(Bn||ii)&&bi.vertical,La=bi.metrics.advance*bi.scale/2;if(ii&&hn.verticalizable){var Ro=24*(bi.scale-1),ko=(24-bi.metrics.width*bi.scale)/2;fa=Zi.lineOffset/2-(bi.imageName?-ko:Ro)}if(bi.imageName){var So=ni[bi.imageName];ua=So.sdf,va=1/(Ea=So.pixelRatio)}var Jo=Bn?[bi.x+La,bi.y]:[0,0],Uo=Bn?[0,0]:[bi.x+La+xn[0],bi.y+xn[1]-fa],uo=[0,0];co&&(uo=Uo,Uo=[0,0]);var Eo=(bi.metrics.left-va)*bi.scale-La+Uo[0],Ka=(-bi.metrics.top-va)*bi.scale+Uo[1],po=Eo+Vi.w*bi.scale/Ea,Oi=Ka+Vi.h*bi.scale/Ea,Ji=new n(Eo,Ka),Va=new n(po,Ka),Ha=new n(Eo,Oi),Fa=new n(po,Oi);if(co){var Ca=new n(-La,La- -17),na=-Math.PI/2,qa=12-La,Ko=bi.imageName?qa:0,ds=new n(22-qa,-Ko),Vo=new(Function.prototype.bind.apply(n,[null].concat(uo)));Ji._rotateAround(na,Ca)._add(ds)._add(Vo),Va._rotateAround(na,Ca)._add(ds)._add(Vo),Ha._rotateAround(na,Ca)._add(ds)._add(Vo),Fa._rotateAround(na,Ca)._add(ds)._add(Vo)}if(Xn){var Xs=Math.sin(Xn),wl=Math.cos(Xn),Ao=[wl,-Xs,Xs,wl];Ji._matMult(Ao),Va._matMult(Ao),Ha._matMult(Ao),Fa._matMult(Ao)}var Js=new n(0,0),Ks=new n(0,0);fi.push({tl:Ji,tr:Va,bl:Ha,br:Fa,tex:Vi,writingMode:hn.writingMode,glyphOffset:Jo,sectionIndex:bi.sectionIndex,isSDF:ua,pixelOffsetTL:Js,pixelOffsetBR:Ks,minFontScaleX:0,minFontScaleY:0})}}return fi}(0,X,Ne,pe,ye,Le,ie,A.allowVerticalPlacement),Cr=A.textSizeData,Lr=null;Cr.kind==="source"?(Lr=[128*pe.layout.get("text-size").evaluate(Le,{})])[0]>32640&&M(A.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Cr.kind==="composite"&&((Lr=[128*Wt.compositeTextSizes[0].evaluate(Le,{},ar),128*Wt.compositeTextSizes[1].evaluate(Le,{},ar)])[0]>32640||Lr[1]>32640)&&M(A.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),A.addSymbols(A.text,vr,Lr,Ne,ye,Le,ht,O,Qe.lineStartIndex,Qe.lineLength,Kt,ar);for(var Nr=0,jr=vt;Nr<jr.length;Nr+=1)jt[jr[Nr]]=A.text.placedSymbolArray.length-1;return 4*vr.length}function Rd(A){for(var O in A)return A[O];return null}function k1(A,O,X,ie){var pe=A.compareText;if(O in pe){for(var ye=pe[O],Le=ye.length-1;Le>=0;Le--)if(ie.dist(ye[Le])<X)return!0}else pe[O]=[];return pe[O].push(ie),!1}var A1=yc.VectorTileFeature.types,M1=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Xu(A,O,X,ie,pe,ye,Le,Ne,Qe,ht,vt,jt,Kt){var Wt=Ne?Math.min(32640,Math.round(Ne[0])):0,ar=Ne?Math.min(32640,Math.round(Ne[1])):0;A.emplaceBack(O,X,Math.round(32*ie),Math.round(32*pe),ye,Le,(Wt<<1)+(Qe?1:0),ar,16*ht,16*vt,256*jt,256*Kt)}function Ah(A,O,X){A.emplaceBack(O.x,O.y,X),A.emplaceBack(O.x,O.y,X),A.emplaceBack(O.x,O.y,X),A.emplaceBack(O.x,O.y,X)}function S1(A){for(var O=0,X=A.sections;O<X.length;O+=1)if(Qn(X[O].text))return!0;return!1}var Ac=function(A){this.layoutVertexArray=new Gs,this.indexArray=new ao,this.programConfigurations=A,this.segments=new Nt,this.dynamicLayoutVertexArray=new xs,this.opacityVertexArray=new El,this.placedSymbolArray=new He};Ac.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Ac.prototype.upload=function(A,O,X,ie){this.isEmpty()||(X&&(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,xh.members),this.indexBuffer=A.createIndexBuffer(this.indexArray,O),this.dynamicLayoutVertexBuffer=A.createVertexBuffer(this.dynamicLayoutVertexArray,e1.members,!0),this.opacityVertexBuffer=A.createVertexBuffer(this.opacityVertexArray,M1,!0),this.opacityVertexBuffer.itemSize=1),(X||ie)&&this.programConfigurations.upload(A))},Ac.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Jr("SymbolBuffers",Ac);var pu=function(A,O,X){this.layoutVertexArray=new A,this.layoutAttributes=O,this.indexArray=new X,this.segments=new Nt,this.collisionVertexArray=new Ys};pu.prototype.upload=function(A){this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=A.createVertexBuffer(this.collisionVertexArray,t1.members,!0)},pu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Jr("CollisionBuffers",pu);var sa=function(A){this.collisionBoxArray=A.collisionBoxArray,this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(Le){return Le.id}),this.index=A.index,this.pixelRatio=A.pixelRatio,this.sourceLayerIndex=A.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ru([]),this.placementViewportMatrix=ru([]);var O=this.layers[0]._unevaluatedLayout._values;this.textSizeData=wh(this.zoom,O["text-size"]),this.iconSizeData=wh(this.zoom,O["icon-size"]);var X=this.layers[0].layout,ie=X.get("symbol-sort-key"),pe=X.get("symbol-z-order");this.sortFeaturesByKey=pe!=="viewport-y"&&ie.constantOr(1)!==void 0;var ye=pe==="viewport-y"||pe==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=ye&&(X.get("text-allow-overlap")||X.get("icon-allow-overlap")||X.get("text-ignore-placement")||X.get("icon-ignore-placement")),X.get("symbol-placement")==="point"&&(this.writingModes=X.get("text-writing-mode").map(function(Le){return bs[Le]})),this.stateDependentLayerIds=this.layers.filter(function(Le){return Le.isStateDependent()}).map(function(Le){return Le.id}),this.sourceID=A.sourceID};sa.prototype.createArrays=function(){this.text=new Ac(new ca(xh.members,this.layers,this.zoom,function(A){return/^text/.test(A)})),this.icon=new Ac(new ca(xh.members,this.layers,this.zoom,function(A){return/^icon/.test(A)})),this.glyphOffsetArray=new _t,this.lineVertexArray=new St,this.symbolInstances=new at},sa.prototype.calculateGlyphDependencies=function(A,O,X,ie,pe){for(var ye=0;ye<A.length;ye++)if(O[A.charCodeAt(ye)]=!0,(X||ie)&&pe){var Le=uu[A.charAt(ye)];Le&&(O[Le.charCodeAt(0)]=!0)}},sa.prototype.populate=function(A,O,X){var ie=this.layers[0],pe=ie.layout,ye=pe.get("text-font"),Le=pe.get("text-field"),Ne=pe.get("icon-image"),Qe=(Le.value.kind!=="constant"||Le.value.value instanceof Dr&&!Le.value.value.isEmpty()||Le.value.value.toString().length>0)&&(ye.value.kind!=="constant"||ye.value.value.length>0),ht=Ne.value.kind!=="constant"||!!Ne.value.value||Object.keys(Ne.parameters).length>0,vt=pe.get("symbol-sort-key");if(this.features=[],Qe||ht){for(var jt=O.iconDependencies,Kt=O.glyphDependencies,Wt=O.availableImages,ar=new ta(this.zoom),vr=0,Cr=A;vr<Cr.length;vr+=1){var Lr=Cr[vr],Nr=Lr.feature,jr=Lr.id,Yr=Lr.index,hn=Lr.sourceLayerIndex,xn=ie._featureFilter.needGeometry,Nn={type:Nr.type,id:jr,properties:Nr.properties,geometry:xn?ma(Nr):[]};if(ie._featureFilter.filter(ar,Nn,X)){xn||(Nn.geometry=ma(Nr));var Bn=void 0;if(Qe){var Gn=ie.getValueAndResolveTokens("text-field",Nn,X,Wt),ni=Dr.factory(Gn);S1(ni)&&(this.hasRTLText=!0),(!this.hasRTLText||Ya()==="unavailable"||this.hasRTLText&&ho.isParsed())&&(Bn=n1(ni,ie,Nn))}var ii=void 0;if(ht){var Xn=ie.getValueAndResolveTokens("icon-image",Nn,X,Wt);ii=Xn instanceof yr?Xn:yr.fromString(Xn)}if(Bn||ii){var fi=this.sortFeaturesByKey?vt.evaluate(Nn,{},X):void 0,ci={id:jr,text:Bn,icon:ii,index:Yr,sourceLayerIndex:hn,geometry:ma(Nr),properties:Nr.properties,type:A1[Nr.type],sortKey:fi};if(this.features.push(ci),ii&&(jt[ii.name]=!0),Bn){var ai=ye.evaluate(Nn,{},X).join(","),Zi=pe.get("text-rotation-alignment")==="map"&&pe.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(bs.vertical)>=0;for(var Ni=0,$i=Bn.sections;Ni<$i.length;Ni+=1){var bi=$i[Ni];if(bi.image)jt[bi.image.name]=!0;else{var Vi=Pi(Bn.toString()),va=bi.fontStack||ai,ua=Kt[va]=Kt[va]||{};this.calculateGlyphDependencies(bi.text,ua,Zi,this.allowVerticalPlacement,Vi)}}}}}}pe.get("symbol-placement")==="line"&&(this.features=function(Ea){var fa={},co={},La=[],Ro=0;function ko(Fa){La.push(Ea[Fa]),Ro++}function So(Fa,Ca,na){var qa=co[Fa];return delete co[Fa],co[Ca]=qa,La[qa].geometry[0].pop(),La[qa].geometry[0]=La[qa].geometry[0].concat(na[0]),qa}function Jo(Fa,Ca,na){var qa=fa[Ca];return delete fa[Ca],fa[Fa]=qa,La[qa].geometry[0].shift(),La[qa].geometry[0]=na[0].concat(La[qa].geometry[0]),qa}function Uo(Fa,Ca,na){var qa=na?Ca[0][Ca[0].length-1]:Ca[0][0];return Fa+":"+qa.x+":"+qa.y}for(var uo=0;uo<Ea.length;uo++){var Eo=Ea[uo],Ka=Eo.geometry,po=Eo.text?Eo.text.toString():null;if(po){var Oi=Uo(po,Ka),Ji=Uo(po,Ka,!0);if(Oi in co&&Ji in fa&&co[Oi]!==fa[Ji]){var Va=Jo(Oi,Ji,Ka),Ha=So(Oi,Ji,La[Va].geometry);delete fa[Oi],delete co[Ji],co[Uo(po,La[Ha].geometry,!0)]=Ha,La[Va].geometry=null}else Oi in co?So(Oi,Ji,Ka):Ji in fa?Jo(Oi,Ji,Ka):(ko(uo),fa[Oi]=Ro-1,co[Ji]=Ro-1)}else ko(uo)}return La.filter(function(Fa){return Fa.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Ea,fa){return Ea.sortKey-fa.sortKey})}},sa.prototype.update=function(A,O,X){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(A,O,this.layers,X),this.icon.programConfigurations.updatePaintArrays(A,O,this.layers,X))},sa.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},sa.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},sa.prototype.upload=function(A){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(A),this.iconCollisionBox.upload(A)),this.text.upload(A,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(A,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},sa.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},sa.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},sa.prototype.addToLineVertexArray=function(A,O){var X=this.lineVertexArray.length;if(A.segment!==void 0){for(var ie=A.dist(O[A.segment+1]),pe=A.dist(O[A.segment]),ye={},Le=A.segment+1;Le<O.length;Le++)ye[Le]={x:O[Le].x,y:O[Le].y,tileUnitDistanceFromAnchor:ie},Le<O.length-1&&(ie+=O[Le+1].dist(O[Le]));for(var Ne=A.segment||0;Ne>=0;Ne--)ye[Ne]={x:O[Ne].x,y:O[Ne].y,tileUnitDistanceFromAnchor:pe},Ne>0&&(pe+=O[Ne-1].dist(O[Ne]));for(var Qe=0;Qe<O.length;Qe++){var ht=ye[Qe];this.lineVertexArray.emplaceBack(ht.x,ht.y,ht.tileUnitDistanceFromAnchor)}}return{lineStartIndex:X,lineLength:this.lineVertexArray.length-X}},sa.prototype.addSymbols=function(A,O,X,ie,pe,ye,Le,Ne,Qe,ht,vt,jt){for(var Kt=A.indexArray,Wt=A.layoutVertexArray,ar=A.segments.prepareSegment(4*O.length,Wt,Kt,ye.sortKey),vr=this.glyphOffsetArray.length,Cr=ar.vertexLength,Lr=this.allowVerticalPlacement&&Le===bs.vertical?Math.PI/2:0,Nr=ye.text&&ye.text.sections,jr=0;jr<O.length;jr++){var Yr=O[jr],hn=Yr.tl,xn=Yr.tr,Nn=Yr.bl,Bn=Yr.br,Gn=Yr.tex,ni=Yr.pixelOffsetTL,ii=Yr.pixelOffsetBR,Xn=Yr.minFontScaleX,fi=Yr.minFontScaleY,ci=Yr.glyphOffset,ai=Yr.isSDF,Zi=Yr.sectionIndex,Ni=ar.vertexLength,$i=ci[1];Xu(Wt,Ne.x,Ne.y,hn.x,$i+hn.y,Gn.x,Gn.y,X,ai,ni.x,ni.y,Xn,fi),Xu(Wt,Ne.x,Ne.y,xn.x,$i+xn.y,Gn.x+Gn.w,Gn.y,X,ai,ii.x,ni.y,Xn,fi),Xu(Wt,Ne.x,Ne.y,Nn.x,$i+Nn.y,Gn.x,Gn.y+Gn.h,X,ai,ni.x,ii.y,Xn,fi),Xu(Wt,Ne.x,Ne.y,Bn.x,$i+Bn.y,Gn.x+Gn.w,Gn.y+Gn.h,X,ai,ii.x,ii.y,Xn,fi),Ah(A.dynamicLayoutVertexArray,Ne,Lr),Kt.emplaceBack(Ni,Ni+1,Ni+2),Kt.emplaceBack(Ni+1,Ni+2,Ni+3),ar.vertexLength+=4,ar.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ci[0]),jr!==O.length-1&&Zi===O[jr+1].sectionIndex||A.programConfigurations.populatePaintArrays(Wt.length,ye,ye.index,{},jt,Nr&&Nr[Zi])}A.placedSymbolArray.emplaceBack(Ne.x,Ne.y,vr,this.glyphOffsetArray.length-vr,Cr,Qe,ht,Ne.segment,X?X[0]:0,X?X[1]:0,ie[0],ie[1],Le,0,!1,0,vt)},sa.prototype._addCollisionDebugVertex=function(A,O,X,ie,pe,ye){return O.emplaceBack(0,0),A.emplaceBack(X.x,X.y,ie,pe,Math.round(ye.x),Math.round(ye.y))},sa.prototype.addCollisionDebugVertices=function(A,O,X,ie,pe,ye,Le){var Ne=pe.segments.prepareSegment(4,pe.layoutVertexArray,pe.indexArray),Qe=Ne.vertexLength,ht=pe.layoutVertexArray,vt=pe.collisionVertexArray,jt=Le.anchorX,Kt=Le.anchorY;this._addCollisionDebugVertex(ht,vt,ye,jt,Kt,new n(A,O)),this._addCollisionDebugVertex(ht,vt,ye,jt,Kt,new n(X,O)),this._addCollisionDebugVertex(ht,vt,ye,jt,Kt,new n(X,ie)),this._addCollisionDebugVertex(ht,vt,ye,jt,Kt,new n(A,ie)),Ne.vertexLength+=4;var Wt=pe.indexArray;Wt.emplaceBack(Qe,Qe+1),Wt.emplaceBack(Qe+1,Qe+2),Wt.emplaceBack(Qe+2,Qe+3),Wt.emplaceBack(Qe+3,Qe),Ne.primitiveLength+=4},sa.prototype.addDebugCollisionBoxes=function(A,O,X,ie){for(var pe=A;pe<O;pe++){var ye=this.collisionBoxArray.get(pe),Le=ye.x1,Ne=ye.y1,Qe=ye.x2,ht=ye.y2;this.addCollisionDebugVertices(Le,Ne,Qe,ht,ie?this.textCollisionBox:this.iconCollisionBox,ye.anchorPoint,X)}},sa.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new pu(Es,dd.members,B),this.iconCollisionBox=new pu(Es,dd.members,B);for(var A=0;A<this.symbolInstances.length;A++){var O=this.symbolInstances.get(A);this.addDebugCollisionBoxes(O.textBoxStartIndex,O.textBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.verticalTextBoxStartIndex,O.verticalTextBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.iconBoxStartIndex,O.iconBoxEndIndex,O,!1),this.addDebugCollisionBoxes(O.verticalIconBoxStartIndex,O.verticalIconBoxEndIndex,O,!1)}},sa.prototype._deserializeCollisionBoxesForSymbol=function(A,O,X,ie,pe,ye,Le,Ne,Qe){for(var ht={},vt=O;vt<X;vt++){var jt=A.get(vt);ht.textBox={x1:jt.x1,y1:jt.y1,x2:jt.x2,y2:jt.y2,anchorPointX:jt.anchorPointX,anchorPointY:jt.anchorPointY},ht.textFeatureIndex=jt.featureIndex;break}for(var Kt=ie;Kt<pe;Kt++){var Wt=A.get(Kt);ht.verticalTextBox={x1:Wt.x1,y1:Wt.y1,x2:Wt.x2,y2:Wt.y2,anchorPointX:Wt.anchorPointX,anchorPointY:Wt.anchorPointY},ht.verticalTextFeatureIndex=Wt.featureIndex;break}for(var ar=ye;ar<Le;ar++){var vr=A.get(ar);ht.iconBox={x1:vr.x1,y1:vr.y1,x2:vr.x2,y2:vr.y2,anchorPointX:vr.anchorPointX,anchorPointY:vr.anchorPointY},ht.iconFeatureIndex=vr.featureIndex;break}for(var Cr=Ne;Cr<Qe;Cr++){var Lr=A.get(Cr);ht.verticalIconBox={x1:Lr.x1,y1:Lr.y1,x2:Lr.x2,y2:Lr.y2,anchorPointX:Lr.anchorPointX,anchorPointY:Lr.anchorPointY},ht.verticalIconFeatureIndex=Lr.featureIndex;break}return ht},sa.prototype.deserializeCollisionBoxes=function(A){this.collisionArrays=[];for(var O=0;O<this.symbolInstances.length;O++){var X=this.symbolInstances.get(O);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(A,X.textBoxStartIndex,X.textBoxEndIndex,X.verticalTextBoxStartIndex,X.verticalTextBoxEndIndex,X.iconBoxStartIndex,X.iconBoxEndIndex,X.verticalIconBoxStartIndex,X.verticalIconBoxEndIndex))}},sa.prototype.hasTextData=function(){return this.text.segments.get().length>0},sa.prototype.hasIconData=function(){return this.icon.segments.get().length>0},sa.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},sa.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},sa.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},sa.prototype.addIndicesForPlacedSymbol=function(A,O){for(var X=A.placedSymbolArray.get(O),ie=X.vertexStartIndex+4*X.numGlyphs,pe=X.vertexStartIndex;pe<ie;pe+=4)A.indexArray.emplaceBack(pe,pe+1,pe+2),A.indexArray.emplaceBack(pe+1,pe+2,pe+3)},sa.prototype.getSortedSymbolIndexes=function(A){if(this.sortedAngle===A&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var O=Math.sin(A),X=Math.cos(A),ie=[],pe=[],ye=[],Le=0;Le<this.symbolInstances.length;++Le){ye.push(Le);var Ne=this.symbolInstances.get(Le);ie.push(0|Math.round(O*Ne.anchorX+X*Ne.anchorY)),pe.push(Ne.featureIndex)}return ye.sort(function(Qe,ht){return ie[Qe]-ie[ht]||pe[ht]-pe[Qe]}),ye},sa.prototype.addToSortKeyRanges=function(A,O){var X=this.sortKeyRanges[this.sortKeyRanges.length-1];X&&X.sortKey===O?X.symbolInstanceEnd=A+1:this.sortKeyRanges.push({sortKey:O,symbolInstanceStart:A,symbolInstanceEnd:A+1})},sa.prototype.sortFeatures=function(A){var O=this;if(this.sortFeaturesByY&&this.sortedAngle!==A&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(A),this.sortedAngle=A,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var X=0,ie=this.symbolInstanceIndexes;X<ie.length;X+=1){var pe=ie[X],ye=this.symbolInstances.get(pe);this.featureSortOrder.push(ye.featureIndex),[ye.rightJustifiedTextSymbolIndex,ye.centerJustifiedTextSymbolIndex,ye.leftJustifiedTextSymbolIndex].forEach(function(Le,Ne,Qe){Le>=0&&Qe.indexOf(Le)===Ne&&O.addIndicesForPlacedSymbol(O.text,Le)}),ye.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,ye.verticalPlacedTextSymbolIndex),ye.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,ye.placedIconSymbolIndex),ye.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,ye.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Jr("SymbolBucket",sa,{omit:["layers","collisionBoxArray","features","compareText"]}),sa.MAX_GLYPHS=65535,sa.addDynamicAttributes=Ah;var E1=new Oo({"symbol-placement":new si(Ie.layout_symbol["symbol-placement"]),"symbol-spacing":new si(Ie.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new si(Ie.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new vi(Ie.layout_symbol["symbol-sort-key"]),"symbol-z-order":new si(Ie.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new si(Ie.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new si(Ie.layout_symbol["icon-ignore-placement"]),"icon-optional":new si(Ie.layout_symbol["icon-optional"]),"icon-rotation-alignment":new si(Ie.layout_symbol["icon-rotation-alignment"]),"icon-size":new vi(Ie.layout_symbol["icon-size"]),"icon-text-fit":new si(Ie.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new si(Ie.layout_symbol["icon-text-fit-padding"]),"icon-image":new vi(Ie.layout_symbol["icon-image"]),"icon-rotate":new vi(Ie.layout_symbol["icon-rotate"]),"icon-padding":new si(Ie.layout_symbol["icon-padding"]),"icon-keep-upright":new si(Ie.layout_symbol["icon-keep-upright"]),"icon-offset":new vi(Ie.layout_symbol["icon-offset"]),"icon-anchor":new vi(Ie.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new si(Ie.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new si(Ie.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new si(Ie.layout_symbol["text-rotation-alignment"]),"text-field":new vi(Ie.layout_symbol["text-field"]),"text-font":new vi(Ie.layout_symbol["text-font"]),"text-size":new vi(Ie.layout_symbol["text-size"]),"text-max-width":new vi(Ie.layout_symbol["text-max-width"]),"text-line-height":new si(Ie.layout_symbol["text-line-height"]),"text-letter-spacing":new vi(Ie.layout_symbol["text-letter-spacing"]),"text-justify":new vi(Ie.layout_symbol["text-justify"]),"text-radial-offset":new vi(Ie.layout_symbol["text-radial-offset"]),"text-variable-anchor":new si(Ie.layout_symbol["text-variable-anchor"]),"text-anchor":new vi(Ie.layout_symbol["text-anchor"]),"text-max-angle":new si(Ie.layout_symbol["text-max-angle"]),"text-writing-mode":new si(Ie.layout_symbol["text-writing-mode"]),"text-rotate":new vi(Ie.layout_symbol["text-rotate"]),"text-padding":new si(Ie.layout_symbol["text-padding"]),"text-keep-upright":new si(Ie.layout_symbol["text-keep-upright"]),"text-transform":new vi(Ie.layout_symbol["text-transform"]),"text-offset":new vi(Ie.layout_symbol["text-offset"]),"text-allow-overlap":new si(Ie.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new si(Ie.layout_symbol["text-ignore-placement"]),"text-optional":new si(Ie.layout_symbol["text-optional"])}),Mh={paint:new Oo({"icon-opacity":new vi(Ie.paint_symbol["icon-opacity"]),"icon-color":new vi(Ie.paint_symbol["icon-color"]),"icon-halo-color":new vi(Ie.paint_symbol["icon-halo-color"]),"icon-halo-width":new vi(Ie.paint_symbol["icon-halo-width"]),"icon-halo-blur":new vi(Ie.paint_symbol["icon-halo-blur"]),"icon-translate":new si(Ie.paint_symbol["icon-translate"]),"icon-translate-anchor":new si(Ie.paint_symbol["icon-translate-anchor"]),"text-opacity":new vi(Ie.paint_symbol["text-opacity"]),"text-color":new vi(Ie.paint_symbol["text-color"],{runtimeType:Bt,getOverride:function(A){return A.textColor},hasOverride:function(A){return!!A.textColor}}),"text-halo-color":new vi(Ie.paint_symbol["text-halo-color"]),"text-halo-width":new vi(Ie.paint_symbol["text-halo-width"]),"text-halo-blur":new vi(Ie.paint_symbol["text-halo-blur"]),"text-translate":new si(Ie.paint_symbol["text-translate"]),"text-translate-anchor":new si(Ie.paint_symbol["text-translate-anchor"])}),layout:E1},Mc=function(A){this.type=A.property.overrides?A.property.overrides.runtimeType:Pt,this.defaultValue=A};Mc.prototype.evaluate=function(A){if(A.formattedSection){var O=this.defaultValue.property.overrides;if(O&&O.hasOverride(A.formattedSection))return O.getOverride(A.formattedSection)}return A.feature&&A.featureState?this.defaultValue.evaluate(A.feature,A.featureState):this.defaultValue.property.specification.default},Mc.prototype.eachChild=function(A){this.defaultValue.isConstant()||A(this.defaultValue.value._styleExpression.expression)},Mc.prototype.outputDefined=function(){return!1},Mc.prototype.serialize=function(){return null},Jr("FormatSectionOverride",Mc,{omit:["defaultValue"]});var L1=function(A){function O(X){A.call(this,X,Mh)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.recalculate=function(X,ie){if(A.prototype.recalculate.call(this,X,ie),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var pe=this.layout.get("text-writing-mode");if(pe){for(var ye=[],Le=0,Ne=pe;Le<Ne.length;Le+=1){var Qe=Ne[Le];ye.indexOf(Qe)<0&&ye.push(Qe)}this.layout._values["text-writing-mode"]=ye}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},O.prototype.getValueAndResolveTokens=function(X,ie,pe,ye){var Le=this.layout.get(X).evaluate(ie,{},pe,ye),Ne=this._unevaluatedLayout._values[X];return Ne.isDataDriven()||er(Ne.value)||!Le?Le:function(Qe,ht){return ht.replace(/{([^{}]+)}/g,function(vt,jt){return jt in Qe?String(Qe[jt]):""})}(ie.properties,Le)},O.prototype.createBucket=function(X){return new sa(X)},O.prototype.queryRadius=function(){return 0},O.prototype.queryIntersectsFeature=function(){return!1},O.prototype._setPaintOverrides=function(){for(var X=0,ie=Mh.paint.overridableProperties;X<ie.length;X+=1){var pe=ie[X];if(O.hasPaintOverride(this.layout,pe)){var ye=this.paint.get(pe),Le=new Mc(ye),Ne=new $t(Le,ye.property.specification),Qe=null;Qe=ye.value.kind==="constant"||ye.value.kind==="source"?new ir("source",Ne):new hr("composite",Ne,ye.value.zoomStops,ye.value._interpolationType),this.paint._values[pe]=new Ra(ye.property,Qe,ye.parameters)}}},O.prototype._handleOverridablePaintPropertyUpdate=function(X,ie,pe){return!(!this.layout||ie.isDataDriven()||pe.isDataDriven())&&O.hasPaintOverride(this.layout,X)},O.hasPaintOverride=function(X,ie){var pe=X.get("text-field"),ye=Mh.paint.properties[ie],Le=!1,Ne=function(vt){for(var jt=0,Kt=vt;jt<Kt.length;jt+=1){var Wt=Kt[jt];if(ye.overrides&&ye.overrides.hasOverride(Wt))return void(Le=!0)}};if(pe.value.kind==="constant"&&pe.value.value instanceof Dr)Ne(pe.value.value.sections);else if(pe.value.kind==="source"){var Qe=function(vt){if(!Le)if(vt instanceof Pn&&an(vt.value)===wt){var jt=vt.value;Ne(jt.sections)}else vt instanceof Ar?Ne(vt.sections):vt.eachChild(Qe)},ht=pe.value;ht._styleExpression&&Qe(ht._styleExpression.expression)}return Le},O}(Xo),C1={paint:new Oo({"background-color":new si(Ie.paint_background["background-color"]),"background-pattern":new al(Ie.paint_background["background-pattern"]),"background-opacity":new si(Ie.paint_background["background-opacity"])})},P1=function(A){function O(X){A.call(this,X,C1)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O}(Xo),I1={paint:new Oo({"raster-opacity":new si(Ie.paint_raster["raster-opacity"]),"raster-hue-rotate":new si(Ie.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new si(Ie.paint_raster["raster-brightness-min"]),"raster-brightness-max":new si(Ie.paint_raster["raster-brightness-max"]),"raster-saturation":new si(Ie.paint_raster["raster-saturation"]),"raster-contrast":new si(Ie.paint_raster["raster-contrast"]),"raster-resampling":new si(Ie.paint_raster["raster-resampling"]),"raster-fade-duration":new si(Ie.paint_raster["raster-fade-duration"])})},O1=function(A){function O(X){A.call(this,X,I1)}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O}(Xo),D1=function(A){function O(X){A.call(this,X,{}),this.implementation=X}return A&&(O.__proto__=A),O.prototype=Object.create(A&&A.prototype),O.prototype.constructor=O,O.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},O.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},O.prototype.recalculate=function(){},O.prototype.updateTransitions=function(){},O.prototype.hasTransition=function(){},O.prototype.serialize=function(){},O.prototype.onAdd=function(X){this.implementation.onAdd&&this.implementation.onAdd(X,X.painter.context.gl)},O.prototype.onRemove=function(X){this.implementation.onRemove&&this.implementation.onRemove(X,X.painter.context.gl)},O}(Xo),z1={circle:bg,heatmap:wg,hillshade:kg,fill:jg,"fill-extrusion":Xg,line:Qg,symbol:L1,background:P1,raster:O1},Fd=self.HTMLImageElement,Bd=self.HTMLCanvasElement,Nd=self.HTMLVideoElement,jd=self.ImageData,Ju=self.ImageBitmap,Jl=function(A,O,X,ie){this.context=A,this.format=X,this.texture=A.gl.createTexture(),this.update(O,ie)};Jl.prototype.update=function(A,O,X){var ie=A.width,pe=A.height,ye=!(this.size&&this.size[0]===ie&&this.size[1]===pe||X),Le=this.context,Ne=Le.gl;if(this.useMipmap=Boolean(O&&O.useMipmap),Ne.bindTexture(Ne.TEXTURE_2D,this.texture),Le.pixelStoreUnpackFlipY.set(!1),Le.pixelStoreUnpack.set(1),Le.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ne.RGBA&&(!O||O.premultiply!==!1)),ye)this.size=[ie,pe],A instanceof Fd||A instanceof Bd||A instanceof Nd||A instanceof jd||Ju&&A instanceof Ju?Ne.texImage2D(Ne.TEXTURE_2D,0,this.format,this.format,Ne.UNSIGNED_BYTE,A):Ne.texImage2D(Ne.TEXTURE_2D,0,this.format,ie,pe,0,this.format,Ne.UNSIGNED_BYTE,A.data);else{var Qe=X||{x:0,y:0},ht=Qe.x,vt=Qe.y;A instanceof Fd||A instanceof Bd||A instanceof Nd||A instanceof jd||Ju&&A instanceof Ju?Ne.texSubImage2D(Ne.TEXTURE_2D,0,ht,vt,Ne.RGBA,Ne.UNSIGNED_BYTE,A):Ne.texSubImage2D(Ne.TEXTURE_2D,0,ht,vt,ie,pe,Ne.RGBA,Ne.UNSIGNED_BYTE,A.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Ne.generateMipmap(Ne.TEXTURE_2D)},Jl.prototype.bind=function(A,O,X){var ie=this.context.gl;ie.bindTexture(ie.TEXTURE_2D,this.texture),X!==ie.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(X=ie.LINEAR),A!==this.filter&&(ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_MAG_FILTER,A),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_MIN_FILTER,X||A),this.filter=A),O!==this.wrap&&(ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_WRAP_S,O),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_WRAP_T,O),this.wrap=O)},Jl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Jl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Sh=function(A){var O=this;this._callback=A,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){O._triggered=!1,O._callback()})};Sh.prototype.trigger=function(){var A=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){A._triggered=!1,A._callback()},0))},Sh.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Sc=function(A,O,X){this.target=A,this.parent=O,this.mapId=X,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},g(["receive","process"],this),this.invoker=new Sh(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=S()?A:self};function Ud(A,O,X){var ie=2*Math.PI*6378137/256/Math.pow(2,X);return[A*ie-2*Math.PI*6378137/2,O*ie-2*Math.PI*6378137/2]}Sc.prototype.send=function(A,O,X,ie,pe){var ye=this;pe===void 0&&(pe=!1);var Le=Math.round(1e18*Math.random()).toString(36).substring(0,10);X&&(this.callbacks[Le]=X);var Ne=F(this.globalScope)?void 0:[];return this.target.postMessage({id:Le,type:A,hasCallback:!!X,targetMapId:ie,mustQueue:pe,sourceMapId:this.mapId,data:Kn(O,Ne)},Ne),{cancel:function(){X&&delete ye.callbacks[Le],ye.target.postMessage({id:Le,type:"<cancel>",targetMapId:ie,sourceMapId:ye.mapId})}}},Sc.prototype.receive=function(A){var O=A.data,X=O.id;if(X&&(!O.targetMapId||this.mapId===O.targetMapId))if(O.type==="<cancel>"){delete this.tasks[X];var ie=this.cancelCallbacks[X];delete this.cancelCallbacks[X],ie&&ie()}else S()||O.mustQueue?(this.tasks[X]=O,this.taskQueue.push(X),this.invoker.trigger()):this.processTask(X,O)},Sc.prototype.process=function(){if(this.taskQueue.length){var A=this.taskQueue.shift(),O=this.tasks[A];delete this.tasks[A],this.taskQueue.length&&this.invoker.trigger(),O&&this.processTask(A,O)}},Sc.prototype.processTask=function(A,O){var X=this;if(O.type==="<response>"){var ie=this.callbacks[A];delete this.callbacks[A],ie&&(O.error?ie(_i(O.error)):ie(null,_i(O.data)))}else{var pe=!1,ye=F(this.globalScope)?void 0:[],Le=O.hasCallback?function(vt,jt){pe=!0,delete X.cancelCallbacks[A],X.target.postMessage({id:A,type:"<response>",sourceMapId:X.mapId,error:vt?Kn(vt):null,data:Kn(jt,ye)},ye)}:function(vt){pe=!0},Ne=null,Qe=_i(O.data);if(this.parent[O.type])Ne=this.parent[O.type](O.sourceMapId,Qe,Le);else if(this.parent.getWorkerSource){var ht=O.type.split(".");Ne=this.parent.getWorkerSource(O.sourceMapId,ht[0],Qe.source)[ht[1]](Qe,Le)}else Le(new Error("Could not find function "+O.type));!pe&&Ne&&Ne.cancel&&(this.cancelCallbacks[A]=Ne.cancel)}},Sc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var so=function(A,O){A&&(O?this.setSouthWest(A).setNorthEast(O):A.length===4?this.setSouthWest([A[0],A[1]]).setNorthEast([A[2],A[3]]):this.setSouthWest(A[0]).setNorthEast(A[1]))};so.prototype.setNorthEast=function(A){return this._ne=A instanceof Sa?new Sa(A.lng,A.lat):Sa.convert(A),this},so.prototype.setSouthWest=function(A){return this._sw=A instanceof Sa?new Sa(A.lng,A.lat):Sa.convert(A),this},so.prototype.extend=function(A){var O,X,ie=this._sw,pe=this._ne;if(A instanceof Sa)O=A,X=A;else{if(!(A instanceof so)){if(Array.isArray(A)){if(A.length===4||A.every(Array.isArray)){var ye=A;return this.extend(so.convert(ye))}var Le=A;return this.extend(Sa.convert(Le))}return this}if(O=A._sw,X=A._ne,!O||!X)return this}return ie||pe?(ie.lng=Math.min(O.lng,ie.lng),ie.lat=Math.min(O.lat,ie.lat),pe.lng=Math.max(X.lng,pe.lng),pe.lat=Math.max(X.lat,pe.lat)):(this._sw=new Sa(O.lng,O.lat),this._ne=new Sa(X.lng,X.lat)),this},so.prototype.getCenter=function(){return new Sa((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},so.prototype.getSouthWest=function(){return this._sw},so.prototype.getNorthEast=function(){return this._ne},so.prototype.getNorthWest=function(){return new Sa(this.getWest(),this.getNorth())},so.prototype.getSouthEast=function(){return new Sa(this.getEast(),this.getSouth())},so.prototype.getWest=function(){return this._sw.lng},so.prototype.getSouth=function(){return this._sw.lat},so.prototype.getEast=function(){return this._ne.lng},so.prototype.getNorth=function(){return this._ne.lat},so.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},so.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},so.prototype.isEmpty=function(){return!(this._sw&&this._ne)},so.prototype.contains=function(A){var O=Sa.convert(A),X=O.lng,ie=O.lat,pe=this._sw.lat<=ie&&ie<=this._ne.lat,ye=this._sw.lng<=X&&X<=this._ne.lng;return this._sw.lng>this._ne.lng&&(ye=this._sw.lng>=X&&X>=this._ne.lng),pe&&ye},so.convert=function(A){return!A||A instanceof so?A:new so(A)};var Sa=function(A,O){if(isNaN(A)||isNaN(O))throw new Error("Invalid LngLat object: ("+A+", "+O+")");if(this.lng=+A,this.lat=+O,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Sa.prototype.wrap=function(){return new Sa(f(this.lng,-180,180),this.lat)},Sa.prototype.toArray=function(){return[this.lng,this.lat]},Sa.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Sa.prototype.distanceTo=function(A){var O=Math.PI/180,X=this.lat*O,ie=A.lat*O,pe=Math.sin(X)*Math.sin(ie)+Math.cos(X)*Math.cos(ie)*Math.cos((A.lng-this.lng)*O);return 63710088e-1*Math.acos(Math.min(pe,1))},Sa.prototype.toBounds=function(A){A===void 0&&(A=0);var O=360*A/40075017,X=O/Math.cos(Math.PI/180*this.lat);return new so(new Sa(this.lng-X,this.lat-O),new Sa(this.lng+X,this.lat+O))},Sa.convert=function(A){if(A instanceof Sa)return A;if(Array.isArray(A)&&(A.length===2||A.length===3))return new Sa(Number(A[0]),Number(A[1]));if(!Array.isArray(A)&&typeof A=="object"&&A!==null)return new Sa(Number("lng"in A?A.lng:A.lon),Number(A.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Vd=2*Math.PI*63710088e-1;function Hd(A){return Vd*Math.cos(A*Math.PI/180)}function qd(A){return(180+A)/360}function Gd(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function Yd(A,O){return A/Hd(O)}function Eh(A){var O=180-360*A;return 360/Math.PI*Math.atan(Math.exp(O*Math.PI/180))-90}var Kl=function(A,O,X){X===void 0&&(X=0),this.x=+A,this.y=+O,this.z=+X};Kl.fromLngLat=function(A,O){O===void 0&&(O=0);var X=Sa.convert(A);return new Kl(qd(X.lng),Gd(X.lat),Yd(O,X.lat))},Kl.prototype.toLngLat=function(){return new Sa(360*this.x-180,Eh(this.y))},Kl.prototype.toAltitude=function(){return A=this.z,O=this.y,A*Hd(Eh(O));var A,O},Kl.prototype.meterInMercatorCoordinateUnits=function(){return 1/Vd*(A=Eh(this.y),1/Math.cos(A*Math.PI/180));var A};var $l=function(A,O,X){this.z=A,this.x=O,this.y=X,this.key=du(0,A,A,O,X)};$l.prototype.equals=function(A){return this.z===A.z&&this.x===A.x&&this.y===A.y},$l.prototype.url=function(A,O){var X,ie,pe,ye,Le,Ne=(X=this.x,ie=this.y,pe=this.z,ye=Ud(256*X,256*(ie=Math.pow(2,pe)-ie-1),pe),Le=Ud(256*(X+1),256*(ie+1),pe),ye[0]+","+ye[1]+","+Le[0]+","+Le[1]),Qe=function(ht,vt,jt){for(var Kt,Wt="",ar=ht;ar>0;ar--)Wt+=(vt&(Kt=1<<ar-1)?1:0)+(jt&Kt?2:0);return Wt}(this.z,this.x,this.y);return A[(this.x+this.y)%A.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(O==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",Qe).replace("{bbox-epsg-3857}",Ne)},$l.prototype.getTilePoint=function(A){var O=Math.pow(2,this.z);return new n(8192*(A.x*O-this.x),8192*(A.y*O-this.y))},$l.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Wd=function(A,O){this.wrap=A,this.canonical=O,this.key=du(A,O.z,O.z,O.x,O.y)},lo=function(A,O,X,ie,pe){this.overscaledZ=A,this.wrap=O,this.canonical=new $l(X,+ie,+pe),this.key=du(O,A,X,ie,pe)};function du(A,O,X,ie,pe){(A*=2)<0&&(A=-1*A-1);var ye=1<<X;return(ye*ye*A+ye*pe+ie).toString(36)+X.toString(36)+O.toString(36)}lo.prototype.equals=function(A){return this.overscaledZ===A.overscaledZ&&this.wrap===A.wrap&&this.canonical.equals(A.canonical)},lo.prototype.scaledTo=function(A){var O=this.canonical.z-A;return A>this.canonical.z?new lo(A,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new lo(A,this.wrap,A,this.canonical.x>>O,this.canonical.y>>O)},lo.prototype.calculateScaledKey=function(A,O){var X=this.canonical.z-A;return A>this.canonical.z?du(this.wrap*+O,A,this.canonical.z,this.canonical.x,this.canonical.y):du(this.wrap*+O,A,A,this.canonical.x>>X,this.canonical.y>>X)},lo.prototype.isChildOf=function(A){if(A.wrap!==this.wrap)return!1;var O=this.canonical.z-A.canonical.z;return A.overscaledZ===0||A.overscaledZ<this.overscaledZ&&A.canonical.x===this.canonical.x>>O&&A.canonical.y===this.canonical.y>>O},lo.prototype.children=function(A){if(this.overscaledZ>=A)return[new lo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var O=this.canonical.z+1,X=2*this.canonical.x,ie=2*this.canonical.y;return[new lo(O,this.wrap,O,X,ie),new lo(O,this.wrap,O,X+1,ie),new lo(O,this.wrap,O,X,ie+1),new lo(O,this.wrap,O,X+1,ie+1)]},lo.prototype.isLessThan=function(A){return this.wrap<A.wrap||!(this.wrap>A.wrap)&&(this.overscaledZ<A.overscaledZ||!(this.overscaledZ>A.overscaledZ)&&(this.canonical.x<A.canonical.x||!(this.canonical.x>A.canonical.x)&&this.canonical.y<A.canonical.y))},lo.prototype.wrapped=function(){return new lo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},lo.prototype.unwrapTo=function(A){return new lo(this.overscaledZ,A,this.canonical.z,this.canonical.x,this.canonical.y)},lo.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},lo.prototype.toUnwrapped=function(){return new Wd(this.wrap,this.canonical)},lo.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},lo.prototype.getTilePoint=function(A){return this.canonical.getTilePoint(new Kl(A.x-this.wrap,A.y))},Jr("CanonicalTileID",$l),Jr("OverscaledTileID",lo,{omit:["posMatrix"]});var bl=function(A,O,X){if(this.uid=A,O.height!==O.width)throw new RangeError("DEM tiles must be square");if(X&&X!=="mapbox"&&X!=="terrarium")return M('"'+X+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=O.height;var ie=this.dim=O.height-2;this.data=new Uint32Array(O.data.buffer),this.encoding=X||"mapbox";for(var pe=0;pe<ie;pe++)this.data[this._idx(-1,pe)]=this.data[this._idx(0,pe)],this.data[this._idx(ie,pe)]=this.data[this._idx(ie-1,pe)],this.data[this._idx(pe,-1)]=this.data[this._idx(pe,0)],this.data[this._idx(pe,ie)]=this.data[this._idx(pe,ie-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ie,-1)]=this.data[this._idx(ie-1,0)],this.data[this._idx(-1,ie)]=this.data[this._idx(0,ie-1)],this.data[this._idx(ie,ie)]=this.data[this._idx(ie-1,ie-1)]};bl.prototype.get=function(A,O){var X=new Uint8Array(this.data.buffer),ie=4*this._idx(A,O);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(X[ie],X[ie+1],X[ie+2])},bl.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},bl.prototype._idx=function(A,O){if(A<-1||A>=this.dim+1||O<-1||O>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(O+1)*this.stride+(A+1)},bl.prototype._unpackMapbox=function(A,O,X){return(256*A*256+256*O+X)/10-1e4},bl.prototype._unpackTerrarium=function(A,O,X){return 256*A+O+X/256-32768},bl.prototype.getPixels=function(){return new ns({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},bl.prototype.backfillBorder=function(A,O,X){if(this.dim!==A.dim)throw new Error("dem dimension mismatch");var ie=O*this.dim,pe=O*this.dim+this.dim,ye=X*this.dim,Le=X*this.dim+this.dim;switch(O){case-1:ie=pe-1;break;case 1:pe=ie+1}switch(X){case-1:ye=Le-1;break;case 1:Le=ye+1}for(var Ne=-O*this.dim,Qe=-X*this.dim,ht=ye;ht<Le;ht++)for(var vt=ie;vt<pe;vt++)this.data[this._idx(vt,ht)]=A.data[this._idx(vt+Ne,ht+Qe)]},Jr("DEMData",bl);var Ku=function(A){this._stringToNumber={},this._numberToString=[];for(var O=0;O<A.length;O++){var X=A[O];this._stringToNumber[X]=O,this._numberToString[O]=X}};Ku.prototype.encode=function(A){return this._stringToNumber[A]},Ku.prototype.decode=function(A){return this._numberToString[A]};var $u=function(A,O,X,ie,pe){this.type="Feature",this._vectorTileFeature=A,A._z=O,A._x=X,A._y=ie,this.properties=A.properties,this.id=pe},Lh={geometry:{configurable:!0}};Lh.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Lh.geometry.set=function(A){this._geometry=A},$u.prototype.toJSON=function(){var A={geometry:this.geometry};for(var O in this)O!=="_geometry"&&O!=="_vectorTileFeature"&&(A[O]=this[O]);return A},Object.defineProperties($u.prototype,Lh);var Ec=function(){this.state={},this.stateChanges={},this.deletedStates={}};Ec.prototype.updateState=function(A,O,X){var ie=String(O);if(this.stateChanges[A]=this.stateChanges[A]||{},this.stateChanges[A][ie]=this.stateChanges[A][ie]||{},d(this.stateChanges[A][ie],X),this.deletedStates[A]===null)for(var pe in this.deletedStates[A]={},this.state[A])pe!==ie&&(this.deletedStates[A][pe]=null);else if(this.deletedStates[A]&&this.deletedStates[A][ie]===null)for(var ye in this.deletedStates[A][ie]={},this.state[A][ie])X[ye]||(this.deletedStates[A][ie][ye]=null);else for(var Le in X)this.deletedStates[A]&&this.deletedStates[A][ie]&&this.deletedStates[A][ie][Le]===null&&delete this.deletedStates[A][ie][Le]},Ec.prototype.removeFeatureState=function(A,O,X){if(this.deletedStates[A]!==null){var ie=String(O);if(this.deletedStates[A]=this.deletedStates[A]||{},X&&O!==void 0)this.deletedStates[A][ie]!==null&&(this.deletedStates[A][ie]=this.deletedStates[A][ie]||{},this.deletedStates[A][ie][X]=null);else if(O!==void 0)if(this.stateChanges[A]&&this.stateChanges[A][ie])for(X in this.deletedStates[A][ie]={},this.stateChanges[A][ie])this.deletedStates[A][ie][X]=null;else this.deletedStates[A][ie]=null;else this.deletedStates[A]=null}},Ec.prototype.getState=function(A,O){var X=String(O),ie=this.state[A]||{},pe=this.stateChanges[A]||{},ye=d({},ie[X],pe[X]);if(this.deletedStates[A]===null)return{};if(this.deletedStates[A]){var Le=this.deletedStates[A][O];if(Le===null)return{};for(var Ne in Le)delete ye[Ne]}return ye},Ec.prototype.initializeTileState=function(A,O){A.setFeatureState(this.state,O)},Ec.prototype.coalesceChanges=function(A,O){var X={};for(var ie in this.stateChanges){this.state[ie]=this.state[ie]||{};var pe={};for(var ye in this.stateChanges[ie])this.state[ie][ye]||(this.state[ie][ye]={}),d(this.state[ie][ye],this.stateChanges[ie][ye]),pe[ye]=this.state[ie][ye];X[ie]=pe}for(var Le in this.deletedStates){this.state[Le]=this.state[Le]||{};var Ne={};if(this.deletedStates[Le]===null)for(var Qe in this.state[Le])Ne[Qe]={},this.state[Le][Qe]={};else for(var ht in this.deletedStates[Le]){if(this.deletedStates[Le][ht]===null)this.state[Le][ht]={};else for(var vt=0,jt=Object.keys(this.deletedStates[Le][ht]);vt<jt.length;vt+=1){var Kt=jt[vt];delete this.state[Le][ht][Kt]}Ne[ht]=this.state[Le][ht]}X[Le]=X[Le]||{},d(X[Le],Ne)}if(this.stateChanges={},this.deletedStates={},Object.keys(X).length!==0)for(var Wt in A)A[Wt].setFeatureState(X,O)};var _l=function(A,O){this.tileID=A,this.x=A.canonical.x,this.y=A.canonical.y,this.z=A.canonical.z,this.grid=new un(8192,16,0),this.grid3D=new un(8192,16,0),this.featureIndexArray=new kt,this.promoteId=O};function Zd(A,O,X,ie,pe){return _(A,function(ye,Le){var Ne=O instanceof us?O.get(Le):null;return Ne&&Ne.evaluate?Ne.evaluate(X,ie,pe):Ne})}function Xd(A){for(var O=1/0,X=1/0,ie=-1/0,pe=-1/0,ye=0,Le=A;ye<Le.length;ye+=1){var Ne=Le[ye];O=Math.min(O,Ne.x),X=Math.min(X,Ne.y),ie=Math.max(ie,Ne.x),pe=Math.max(pe,Ne.y)}return{minX:O,minY:X,maxX:ie,maxY:pe}}function R1(A,O){return O-A}_l.prototype.insert=function(A,O,X,ie,pe,ye){var Le=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(X,ie,pe);for(var Ne=ye?this.grid3D:this.grid,Qe=0;Qe<O.length;Qe++){for(var ht=O[Qe],vt=[1/0,1/0,-1/0,-1/0],jt=0;jt<ht.length;jt++){var Kt=ht[jt];vt[0]=Math.min(vt[0],Kt.x),vt[1]=Math.min(vt[1],Kt.y),vt[2]=Math.max(vt[2],Kt.x),vt[3]=Math.max(vt[3],Kt.y)}vt[0]<8192&&vt[1]<8192&&vt[2]>=0&&vt[3]>=0&&Ne.insert(Le,vt[0],vt[1],vt[2],vt[3])}},_l.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new yc.VectorTile(new ju(this.rawTileData)).layers,this.sourceLayerCoder=new Ku(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},_l.prototype.query=function(A,O,X,ie){var pe=this;this.loadVTLayers();for(var ye=A.params||{},Le=8192/A.tileSize/A.scale,Ne=wi(ye.filter),Qe=A.queryGeometry,ht=A.queryPadding*Le,vt=Xd(Qe),jt=this.grid.query(vt.minX-ht,vt.minY-ht,vt.maxX+ht,vt.maxY+ht),Kt=Xd(A.cameraQueryGeometry),Wt=this.grid3D.query(Kt.minX-ht,Kt.minY-ht,Kt.maxX+ht,Kt.maxY+ht,function(hn,xn,Nn,Bn){return function(Gn,ni,ii,Xn,fi){for(var ci=0,ai=Gn;ci<ai.length;ci+=1){var Zi=ai[ci];if(ni<=Zi.x&&ii<=Zi.y&&Xn>=Zi.x&&fi>=Zi.y)return!0}var Ni=[new n(ni,ii),new n(ni,fi),new n(Xn,fi),new n(Xn,ii)];if(Gn.length>2){for(var $i=0,bi=Ni;$i<bi.length;$i+=1)if(hs(Gn,bi[$i]))return!0}for(var Vi=0;Vi<Gn.length-1;Vi++)if(Wl(Gn[Vi],Gn[Vi+1],Ni))return!0;return!1}(A.cameraQueryGeometry,hn-ht,xn-ht,Nn+ht,Bn+ht)}),ar=0,vr=Wt;ar<vr.length;ar+=1){var Cr=vr[ar];jt.push(Cr)}jt.sort(R1);for(var Lr,Nr={},jr=function(hn){var xn=jt[hn];if(xn!==Lr){Lr=xn;var Nn=pe.featureIndexArray.get(xn),Bn=null;pe.loadMatchingFeature(Nr,Nn.bucketIndex,Nn.sourceLayerIndex,Nn.featureIndex,Ne,ye.layers,ye.availableImages,O,X,ie,function(Gn,ni,ii){return Bn||(Bn=ma(Gn)),ni.queryIntersectsFeature(Qe,Gn,ii,Bn,pe.z,A.transform,Le,A.pixelPosMatrix)})}},Yr=0;Yr<jt.length;Yr++)jr(Yr);return Nr},_l.prototype.loadMatchingFeature=function(A,O,X,ie,pe,ye,Le,Ne,Qe,ht,vt){var jt=this.bucketLayerIDs[O];if(!ye||function(Nn,Bn){for(var Gn=0;Gn<Nn.length;Gn++)if(Bn.indexOf(Nn[Gn])>=0)return!0;return!1}(ye,jt)){var Kt=this.sourceLayerCoder.decode(X),Wt=this.vtLayers[Kt].feature(ie);if(pe.filter(new ta(this.tileID.overscaledZ),Wt))for(var ar=this.getId(Wt,Kt),vr=0;vr<jt.length;vr++){var Cr=jt[vr];if(!(ye&&ye.indexOf(Cr)<0)){var Lr=Ne[Cr];if(Lr){var Nr={};ar!==void 0&&ht&&(Nr=ht.getState(Lr.sourceLayer||"_geojsonTileLayer",ar));var jr=Qe[Cr];jr.paint=Zd(jr.paint,Lr.paint,Wt,Nr,Le),jr.layout=Zd(jr.layout,Lr.layout,Wt,Nr,Le);var Yr=!vt||vt(Wt,Lr,Nr);if(Yr){var hn=new $u(Wt,this.z,this.x,this.y,ar);hn.layer=jr;var xn=A[Cr];xn===void 0&&(xn=A[Cr]=[]),xn.push({featureIndex:ie,feature:hn,intersectionZ:Yr})}}}}}},_l.prototype.lookupSymbolFeatures=function(A,O,X,ie,pe,ye,Le,Ne){var Qe={};this.loadVTLayers();for(var ht=wi(pe),vt=0,jt=A;vt<jt.length;vt+=1){var Kt=jt[vt];this.loadMatchingFeature(Qe,X,ie,Kt,ht,ye,Le,Ne,O)}return Qe},_l.prototype.hasLayer=function(A){for(var O=0,X=this.bucketLayerIDs;O<X.length;O+=1)for(var ie=0,pe=X[O];ie<pe.length;ie+=1)if(A===pe[ie])return!0;return!1},_l.prototype.getId=function(A,O){var X=A.id;if(this.promoteId){var ie=typeof this.promoteId=="string"?this.promoteId:this.promoteId[O];typeof(X=A.properties[ie])=="boolean"&&(X=Number(X))}return X},Jr("FeatureIndex",_l,{omit:["rawTileData","sourceLayerCoder"]});var To=function(A,O){this.tileID=A,this.uid=m(),this.uses=0,this.tileSize=O,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};To.prototype.registerFadeDuration=function(A){var O=A+this.timeAdded;O<N.now()||this.fadeEndTime&&O<this.fadeEndTime||(this.fadeEndTime=O)},To.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},To.prototype.loadVectorData=function(A,O,X){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",A){for(var ie in A.featureIndex&&(this.latestFeatureIndex=A.featureIndex,A.rawTileData?(this.latestRawTileData=A.rawTileData,this.latestFeatureIndex.rawTileData=A.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=A.collisionBoxArray,this.buckets=function(ht,vt){var jt={};if(!vt)return jt;for(var Kt=function(){var vr=ar[Wt],Cr=vr.layerIds.map(function(Yr){return vt.getLayer(Yr)}).filter(Boolean);if(Cr.length!==0){vr.layers=Cr,vr.stateDependentLayerIds&&(vr.stateDependentLayers=vr.stateDependentLayerIds.map(function(Yr){return Cr.filter(function(hn){return hn.id===Yr})[0]}));for(var Lr=0,Nr=Cr;Lr<Nr.length;Lr+=1){var jr=Nr[Lr];jt[jr.id]=vr}}},Wt=0,ar=ht;Wt<ar.length;Wt+=1)Kt();return jt}(A.buckets,O.style),this.hasSymbolBuckets=!1,this.buckets){var pe=this.buckets[ie];if(pe instanceof sa){if(this.hasSymbolBuckets=!0,!X)break;pe.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var ye in this.buckets){var Le=this.buckets[ye];if(Le instanceof sa&&Le.hasRTLText){this.hasRTLText=!0,ho.isLoading()||ho.isLoaded()||Ya()!=="deferred"||ea();break}}for(var Ne in this.queryPadding=0,this.buckets){var Qe=this.buckets[Ne];this.queryPadding=Math.max(this.queryPadding,O.style.getLayer(Ne).queryRadius(Qe))}A.imageAtlas&&(this.imageAtlas=A.imageAtlas),A.glyphAtlasImage&&(this.glyphAtlasImage=A.glyphAtlasImage)}else this.collisionBoxArray=new _e},To.prototype.unloadVectorData=function(){for(var A in this.buckets)this.buckets[A].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},To.prototype.getBucket=function(A){return this.buckets[A.id]},To.prototype.upload=function(A){for(var O in this.buckets){var X=this.buckets[O];X.uploadPending()&&X.upload(A)}var ie=A.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Jl(A,this.imageAtlas.image,ie.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Jl(A,this.glyphAtlasImage,ie.ALPHA),this.glyphAtlasImage=null)},To.prototype.prepare=function(A){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(A,this.imageAtlasTexture)},To.prototype.queryRenderedFeatures=function(A,O,X,ie,pe,ye,Le,Ne,Qe,ht){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ie,cameraQueryGeometry:pe,scale:ye,tileSize:this.tileSize,pixelPosMatrix:ht,transform:Ne,params:Le,queryPadding:this.queryPadding*Qe},A,O,X):{}},To.prototype.querySourceFeatures=function(A,O){var X=this.latestFeatureIndex;if(X&&X.rawTileData){var ie=X.loadVTLayers(),pe=O?O.sourceLayer:"",ye=ie._geojsonTileLayer||ie[pe];if(ye)for(var Le=wi(O&&O.filter),Ne=this.tileID.canonical,Qe=Ne.z,ht=Ne.x,vt=Ne.y,jt={z:Qe,x:ht,y:vt},Kt=0;Kt<ye.length;Kt++){var Wt=ye.feature(Kt);if(Le.filter(new ta(this.tileID.overscaledZ),Wt)){var ar=X.getId(Wt,pe),vr=new $u(Wt,Qe,ht,vt,ar);vr.tile=jt,A.push(vr)}}}},To.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},To.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},To.prototype.setExpiryData=function(A){var O=this.expirationTime;if(A.cacheControl){var X=E(A.cacheControl);X["max-age"]&&(this.expirationTime=Date.now()+1e3*X["max-age"])}else A.expires&&(this.expirationTime=new Date(A.expires).getTime());if(this.expirationTime){var ie=Date.now(),pe=!1;if(this.expirationTime>ie)pe=!1;else if(O)if(this.expirationTime<O)pe=!0;else{var ye=this.expirationTime-O;ye?this.expirationTime=ie+Math.max(ye,3e4):pe=!0}else pe=!0;pe?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},To.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},To.prototype.setFeatureState=function(A,O){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(A).length!==0){var X=this.latestFeatureIndex.loadVTLayers();for(var ie in this.buckets)if(O.style.hasLayer(ie)){var pe=this.buckets[ie],ye=pe.layers[0].sourceLayer||"_geojsonTileLayer",Le=X[ye],Ne=A[ye];if(Le&&Ne&&Object.keys(Ne).length!==0){pe.update(Ne,Le,this.imageAtlas&&this.imageAtlas.patternPositions||{});var Qe=O&&O.style&&O.style.getLayer(ie);Qe&&(this.queryPadding=Math.max(this.queryPadding,Qe.queryRadius(pe)))}}}},To.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},To.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<N.now()},To.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},To.prototype.setHoldDuration=function(A){this.symbolFadeHoldUntil=N.now()+A},To.prototype.setDependencies=function(A,O){for(var X={},ie=0,pe=O;ie<pe.length;ie+=1)X[pe[ie]]=!0;this.dependencies[A]=X},To.prototype.hasDependency=function(A,O){for(var X=0,ie=A;X<ie.length;X+=1){var pe=ie[X],ye=this.dependencies[pe];if(ye){for(var Le=0,Ne=O;Le<Ne.length;Le+=1)if(ye[Ne[Le]])return!0}}return!1};var Ol=self.performance,Jd=function(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,"end"].join("#"),measure:A.url.toString()},Ol.mark(this._marks.start)};Jd.prototype.finish=function(){Ol.mark(this._marks.end);var A=Ol.getEntriesByName(this._marks.measure);return A.length===0&&(Ol.measure(this._marks.measure,this._marks.start,this._marks.end),A=Ol.getEntriesByName(this._marks.measure),Ol.clearMarks(this._marks.start),Ol.clearMarks(this._marks.end),Ol.clearMeasures(this._marks.measure)),A},e.Actor=Sc,e.AlphaImage=Xl,e.CanonicalTileID=$l,e.CollisionBoxArray=_e,e.Color=ur,e.DEMData=bl,e.DataConstantProperty=si,e.DictionaryCoder=Ku,e.EXTENT=8192,e.ErrorEvent=Pe,e.EvaluationParameters=ta,e.Event=Se,e.Evented=De,e.FeatureIndex=_l,e.FillBucket=Ws,e.FillExtrusionBucket=Zs,e.ImageAtlas=hu,e.ImagePosition=Vu,e.LineBucket=is,e.LngLat=Sa,e.LngLatBounds=so,e.MercatorCoordinate=Kl,e.ONE_EM=24,e.OverscaledTileID=lo,e.Point=n,e.Point$1=n,e.Properties=Oo,e.Protobuf=ju,e.RGBAImage=ns,e.RequestManager=ne,e.RequestPerformance=Jd,e.ResourceType=xt,e.SegmentVector=Nt,e.SourceFeatureState=Ec,e.StructArrayLayout1ui2=G,e.StructArrayLayout2f1f2i16=Ll,e.StructArrayLayout2i4=ys,e.StructArrayLayout3ui6=ao,e.StructArrayLayout4i8=Pa,e.SymbolBucket=sa,e.Texture=Jl,e.Tile=To,e.Transitionable=cs,e.Uniform1f=Hr,e.Uniform1i=li,e.Uniform2f=kn,e.Uniform3f=Zn,e.Uniform4f=qn,e.UniformColor=ei,e.UniformMatrix4f=ki,e.UnwrappedTileID=Wd,e.ValidationError=$e,e.WritingMode=bs,e.ZoomHistory=Si,e.add=function(A,O,X){return A[0]=O[0]+X[0],A[1]=O[1]+X[1],A[2]=O[2]+X[2],A},e.addDynamicAttributes=Ah,e.asyncAll=function(A,O,X){if(!A.length)return X(null,[]);var ie=A.length,pe=new Array(A.length),ye=null;A.forEach(function(Le,Ne){O(Le,function(Qe,ht){Qe&&(ye=Qe),pe[Ne]=ht,--ie==0&&X(ye,pe)})})},e.bezier=s,e.bindAll=g,e.browser=N,e.cacheEntryPossiblyAdded=function(A){++nt>qe&&(A.getActor().send("enforceCacheSizeLimit",Fe),nt=0)},e.clamp=l,e.clearTileCache=function(A){var O=self.caches.delete("mapbox-tiles");A&&O.catch(A).then(function(){return A()})},e.clipLine=Pd,e.clone=function(A){var O=new rs(16);return O[0]=A[0],O[1]=A[1],O[2]=A[2],O[3]=A[3],O[4]=A[4],O[5]=A[5],O[6]=A[6],O[7]=A[7],O[8]=A[8],O[9]=A[9],O[10]=A[10],O[11]=A[11],O[12]=A[12],O[13]=A[13],O[14]=A[14],O[15]=A[15],O},e.clone$1=k,e.clone$2=function(A){var O=new rs(3);return O[0]=A[0],O[1]=A[1],O[2]=A[2],O},e.collisionCircleLayout=r1,e.config=U,e.create=function(){var A=new rs(16);return rs!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A},e.create$1=function(){var A=new rs(9);return rs!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A},e.create$2=function(){var A=new rs(4);return rs!=Float32Array&&(A[1]=0,A[2]=0),A[0]=1,A[3]=1,A},e.createCommonjsModule=r,e.createExpression=Xt,e.createLayout=ra,e.createStyleLayer=function(A){return A.type==="custom"?new D1(A):new z1[A.type](A)},e.cross=function(A,O,X){var ie=O[0],pe=O[1],ye=O[2],Le=X[0],Ne=X[1],Qe=X[2];return A[0]=pe*Qe-ye*Ne,A[1]=ye*Le-ie*Qe,A[2]=ie*Ne-pe*Le,A},e.deepEqual=function A(O,X){if(Array.isArray(O)){if(!Array.isArray(X)||O.length!==X.length)return!1;for(var ie=0;ie<O.length;ie++)if(!A(O[ie],X[ie]))return!1;return!0}if(typeof O=="object"&&O!==null&&X!==null){if(typeof X!="object"||Object.keys(O).length!==Object.keys(X).length)return!1;for(var pe in O)if(!A(O[pe],X[pe]))return!1;return!0}return O===X},e.dot=function(A,O){return A[0]*O[0]+A[1]*O[1]+A[2]*O[2]},e.dot$1=function(A,O){return A[0]*O[0]+A[1]*O[1]+A[2]*O[2]+A[3]*O[3]},e.ease=a,e.emitValidationErrors=wn,e.endsWith=w,e.enforceCacheSizeLimit=function(A){et(),Ae&&Ae.then(function(O){O.keys().then(function(X){for(var ie=0;ie<X.length-A;ie++)O.delete(X[ie])})})},e.evaluateSizeForFeature=Ad,e.evaluateSizeForZoom=Md,e.evaluateVariableOffset=Dd,e.evented=ka,e.extend=d,e.featureFilter=wi,e.filterObject=T,e.fromRotation=function(A,O){var X=Math.sin(O),ie=Math.cos(O);return A[0]=ie,A[1]=X,A[2]=0,A[3]=-X,A[4]=ie,A[5]=0,A[6]=0,A[7]=0,A[8]=1,A},e.getAnchorAlignment=_h,e.getAnchorJustification=kh,e.getArrayBuffer=At,e.getImage=Ye,e.getJSON=function(A,O){return rt(d(A,{type:"json"}),O)},e.getRTLTextPluginStatus=Ya,e.getReferrer=Et,e.getVideo=function(A,O){var X,ie,pe=self.document.createElement("video");pe.muted=!0,pe.onloadstart=function(){O(null,pe)};for(var ye=0;ye<A.length;ye++){var Le=self.document.createElement("source");X=A[ye],ie=void 0,(ie=self.document.createElement("a")).href=X,(ie.protocol!==self.document.location.protocol||ie.host!==self.document.location.host)&&(pe.crossOrigin="Anonymous"),Le.src=A[ye],pe.appendChild(Le)}return{cancel:function(){}}},e.identity=ru,e.invert=function(A,O){var X=O[0],ie=O[1],pe=O[2],ye=O[3],Le=O[4],Ne=O[5],Qe=O[6],ht=O[7],vt=O[8],jt=O[9],Kt=O[10],Wt=O[11],ar=O[12],vr=O[13],Cr=O[14],Lr=O[15],Nr=X*Ne-ie*Le,jr=X*Qe-pe*Le,Yr=X*ht-ye*Le,hn=ie*Qe-pe*Ne,xn=ie*ht-ye*Ne,Nn=pe*ht-ye*Qe,Bn=vt*vr-jt*ar,Gn=vt*Cr-Kt*ar,ni=vt*Lr-Wt*ar,ii=jt*Cr-Kt*vr,Xn=jt*Lr-Wt*vr,fi=Kt*Lr-Wt*Cr,ci=Nr*fi-jr*Xn+Yr*ii+hn*ni-xn*Gn+Nn*Bn;return ci?(ci=1/ci,A[0]=(Ne*fi-Qe*Xn+ht*ii)*ci,A[1]=(pe*Xn-ie*fi-ye*ii)*ci,A[2]=(vr*Nn-Cr*xn+Lr*hn)*ci,A[3]=(Kt*xn-jt*Nn-Wt*hn)*ci,A[4]=(Qe*ni-Le*fi-ht*Gn)*ci,A[5]=(X*fi-pe*ni+ye*Gn)*ci,A[6]=(Cr*Yr-ar*Nn-Lr*jr)*ci,A[7]=(vt*Nn-Kt*Yr+Wt*jr)*ci,A[8]=(Le*Xn-Ne*ni+ht*Bn)*ci,A[9]=(ie*ni-X*Xn-ye*Bn)*ci,A[10]=(ar*xn-vr*Yr+Lr*Nr)*ci,A[11]=(jt*Yr-vt*xn-Wt*Nr)*ci,A[12]=(Ne*Gn-Le*ii-Qe*Bn)*ci,A[13]=(X*ii-ie*Gn+pe*Bn)*ci,A[14]=(vr*jr-ar*hn-Cr*Nr)*ci,A[15]=(vt*hn-jt*jr+Kt*Nr)*ci,A):null},e.isChar=En,e.isMapboxURL=se,e.keysDifference=function(A,O){var X=[];for(var ie in A)ie in O||X.push(ie);return X},e.makeRequest=rt,e.mapObject=_,e.mercatorXfromLng=qd,e.mercatorYfromLat=Gd,e.mercatorZfromAltitude=Yd,e.mul=sh,e.multiply=Zl,e.mvt=yc,e.normalize=function(A,O){var X=O[0],ie=O[1],pe=O[2],ye=X*X+ie*ie+pe*pe;return ye>0&&(ye=1/Math.sqrt(ye)),A[0]=O[0]*ye,A[1]=O[1]*ye,A[2]=O[2]*ye,A},e.number=Yn,e.offscreenCanvasSupported=ft,e.ortho=function(A,O,X,ie,pe,ye,Le){var Ne=1/(O-X),Qe=1/(ie-pe),ht=1/(ye-Le);return A[0]=-2*Ne,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*Qe,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*ht,A[11]=0,A[12]=(O+X)*Ne,A[13]=(pe+ie)*Qe,A[14]=(Le+ye)*ht,A[15]=1,A},e.parseGlyphPBF=function(A){return new ju(A).readFields(p1,[])},e.pbf=ju,e.performSymbolLayout=function(A,O,X,ie,pe,ye,Le){A.createArrays();var Ne=512*A.overscaling;A.tilePixelRatio=8192/Ne,A.compareText={},A.iconsNeedLinear=!1;var Qe=A.layers[0].layout,ht=A.layers[0]._unevaluatedLayout._values,vt={};if(A.textSizeData.kind==="composite"){var jt=A.textSizeData,Kt=jt.minZoom,Wt=jt.maxZoom;vt.compositeTextSizes=[ht["text-size"].possiblyEvaluate(new ta(Kt),Le),ht["text-size"].possiblyEvaluate(new ta(Wt),Le)]}if(A.iconSizeData.kind==="composite"){var ar=A.iconSizeData,vr=ar.minZoom,Cr=ar.maxZoom;vt.compositeIconSizes=[ht["icon-size"].possiblyEvaluate(new ta(vr),Le),ht["icon-size"].possiblyEvaluate(new ta(Cr),Le)]}vt.layoutTextSize=ht["text-size"].possiblyEvaluate(new ta(A.zoom+1),Le),vt.layoutIconSize=ht["icon-size"].possiblyEvaluate(new ta(A.zoom+1),Le),vt.textMaxSize=ht["text-size"].possiblyEvaluate(new ta(18));for(var Lr=24*Qe.get("text-line-height"),Nr=Qe.get("text-rotation-alignment")==="map"&&Qe.get("symbol-placement")!=="point",jr=Qe.get("text-keep-upright"),Yr=Qe.get("text-size"),hn=function(){var Bn=Nn[xn],Gn=Qe.get("text-font").evaluate(Bn,{},Le).join(","),ni=Yr.evaluate(Bn,{},Le),ii=vt.layoutTextSize.evaluate(Bn,{},Le),Xn=vt.layoutIconSize.evaluate(Bn,{},Le),fi={horizontal:{},vertical:void 0},ci=Bn.text,ai=[0,0];if(ci){var Zi=ci.toString(),Ni=24*Qe.get("text-letter-spacing").evaluate(Bn,{},Le),$i=function(Oi){for(var Ji=0,Va=Oi;Ji<Va.length;Ji+=1)if(!Ai(Va[Ji].charCodeAt(0)))return!1;return!0}(Zi)?Ni:0,bi=Qe.get("text-anchor").evaluate(Bn,{},Le),Vi=Qe.get("text-variable-anchor");if(!Vi){var va=Qe.get("text-radial-offset").evaluate(Bn,{},Le);ai=va?Dd(bi,[24*va,Th]):Qe.get("text-offset").evaluate(Bn,{},Le).map(function(Oi){return 24*Oi})}var ua=Nr?"center":Qe.get("text-justify").evaluate(Bn,{},Le),Ea=Qe.get("symbol-placement"),fa=Ea==="point"?24*Qe.get("text-max-width").evaluate(Bn,{},Le):0,co=function(){A.allowVerticalPlacement&&Pi(Zi)&&(fi.vertical=Hu(ci,O,X,pe,Gn,fa,Lr,bi,"left",$i,ai,bs.vertical,!0,Ea,ii,ni))};if(!Nr&&Vi){for(var La=ua==="auto"?Vi.map(function(Oi){return kh(Oi)}):[ua],Ro=!1,ko=0;ko<La.length;ko++){var So=La[ko];if(!fi.horizontal[So])if(Ro)fi.horizontal[So]=fi.horizontal[0];else{var Jo=Hu(ci,O,X,pe,Gn,fa,Lr,"center",So,$i,ai,bs.horizontal,!1,Ea,ii,ni);Jo&&(fi.horizontal[So]=Jo,Ro=Jo.positionedLines.length===1)}}co()}else{ua==="auto"&&(ua=kh(bi));var Uo=Hu(ci,O,X,pe,Gn,fa,Lr,bi,ua,$i,ai,bs.horizontal,!1,Ea,ii,ni);Uo&&(fi.horizontal[ua]=Uo),co(),Pi(Zi)&&Nr&&jr&&(fi.vertical=Hu(ci,O,X,pe,Gn,fa,Lr,bi,ua,$i,ai,bs.vertical,!1,Ea,ii,ni))}}var uo=void 0,Eo=!1;if(Bn.icon&&Bn.icon.name){var Ka=ie[Bn.icon.name];Ka&&(uo=function(Oi,Ji,Va){var Ha=_h(Va),Fa=Ha.horizontalAlign,Ca=Ha.verticalAlign,na=Ji[0],qa=Ji[1],Ko=na-Oi.displaySize[0]*Fa,ds=Ko+Oi.displaySize[0],Vo=qa-Oi.displaySize[1]*Ca;return{image:Oi,top:Vo,bottom:Vo+Oi.displaySize[1],left:Ko,right:ds}}(pe[Bn.icon.name],Qe.get("icon-offset").evaluate(Bn,{},Le),Qe.get("icon-anchor").evaluate(Bn,{},Le)),Eo=Ka.sdf,A.sdfIcons===void 0?A.sdfIcons=Ka.sdf:A.sdfIcons!==Ka.sdf&&M("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ka.pixelRatio!==A.pixelRatio||Qe.get("icon-rotate").constantOr(1)!==0)&&(A.iconsNeedLinear=!0))}var po=Rd(fi.horizontal)||fi.vertical;A.iconsInText=!!po&&po.iconsInText,(po||uo)&&function(Oi,Ji,Va,Ha,Fa,Ca,na,qa,Ko,ds,Vo){var Xs=Ca.textMaxSize.evaluate(Ji,{});Xs===void 0&&(Xs=na);var wl,Ao=Oi.layers[0].layout,Js=Ao.get("icon-offset").evaluate(Ji,{},Vo),Ks=Rd(Va.horizontal),$s=na/24,Ch=Oi.tilePixelRatio*$s,Lc=Oi.tilePixelRatio*Xs/24,Qu=Oi.tilePixelRatio*qa,Ql=Oi.tilePixelRatio*Ao.get("symbol-spacing"),ef=Ao.get("text-padding")*Oi.tilePixelRatio,tf=Ao.get("icon-padding")*Oi.tilePixelRatio,rf=Ao.get("text-max-angle")/180*Math.PI,nf=Ao.get("text-rotation-alignment")==="map"&&Ao.get("symbol-placement")!=="point",Dl=Ao.get("icon-rotation-alignment")==="map"&&Ao.get("symbol-placement")!=="point",Cc=Ao.get("symbol-placement"),af=Ql/2,Pc=Ao.get("icon-text-fit");Ha&&Pc!=="none"&&(Oi.allowVerticalPlacement&&Va.vertical&&(wl=kd(Ha,Va.vertical,Pc,Ao.get("icon-text-fit-padding"),Js,$s)),Ks&&(Ha=kd(Ha,Ks,Pc,Ao.get("icon-text-fit-padding"),Js,$s)));var zl=function(B1,bu){bu.x<0||bu.x>=8192||bu.y<0||bu.y>=8192||function(Za,Qs,N1,Rl,zh,e0,pf,sl,df,_u,mf,gf,Rh,t0,wu,r0,n0,i0,a0,o0,_s,vf,s0,ll,j1){var Fh,ec,Fc,Bc,Nc,jc=Za.addToLineVertexArray(Qs,N1),l0=0,c0=0,u0=0,f0=0,Bh=-1,Nh=-1,Tl={},h0=Mr(""),jh=0,Uh=0;if(sl._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Fh=sl.layout.get("text-offset").evaluate(_s,{},ll).map(function(ku){return 24*ku}),jh=Fh[0],Uh=Fh[1]):(jh=24*sl.layout.get("text-radial-offset").evaluate(_s,{},ll),Uh=Th),Za.allowVerticalPlacement&&Rl.vertical){var p0=sl.layout.get("text-rotate").evaluate(_s,{},ll)+90,U1=Rl.vertical;Bc=new Zu(df,Qs,_u,mf,gf,U1,Rh,t0,wu,p0),pf&&(Nc=new Zu(df,Qs,_u,mf,gf,pf,n0,i0,wu,p0))}if(zh){var Vh=sl.layout.get("icon-rotate").evaluate(_s,{}),d0=sl.layout.get("icon-text-fit")!=="none",m0=Id(zh,Vh,s0,d0),Hh=pf?Id(pf,Vh,s0,d0):void 0;Fc=new Zu(df,Qs,_u,mf,gf,zh,n0,i0,!1,Vh),l0=4*m0.length;var g0=Za.iconSizeData,Tu=null;g0.kind==="source"?(Tu=[128*sl.layout.get("icon-size").evaluate(_s,{})])[0]>32640&&M(Za.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):g0.kind==="composite"&&((Tu=[128*vf.compositeIconSizes[0].evaluate(_s,{},ll),128*vf.compositeIconSizes[1].evaluate(_s,{},ll)])[0]>32640||Tu[1]>32640)&&M(Za.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Za.addSymbols(Za.icon,m0,Tu,o0,a0,_s,!1,Qs,jc.lineStartIndex,jc.lineLength,-1,ll),Bh=Za.icon.placedSymbolArray.length-1,Hh&&(c0=4*Hh.length,Za.addSymbols(Za.icon,Hh,Tu,o0,a0,_s,bs.vertical,Qs,jc.lineStartIndex,jc.lineLength,-1,ll),Nh=Za.icon.placedSymbolArray.length-1)}for(var v0 in Rl.horizontal){var yf=Rl.horizontal[v0];if(!ec){h0=Mr(yf.text);var V1=sl.layout.get("text-rotate").evaluate(_s,{},ll);ec=new Zu(df,Qs,_u,mf,gf,yf,Rh,t0,wu,V1)}var y0=yf.positionedLines.length===1;if(u0+=zd(Za,Qs,yf,e0,sl,wu,_s,r0,jc,Rl.vertical?bs.horizontal:bs.horizontalOnly,y0?Object.keys(Rl.horizontal):[v0],Tl,Bh,vf,ll),y0)break}Rl.vertical&&(f0+=zd(Za,Qs,Rl.vertical,e0,sl,wu,_s,r0,jc,bs.vertical,["vertical"],Tl,Nh,vf,ll));var H1=ec?ec.boxStartIndex:Za.collisionBoxArray.length,q1=ec?ec.boxEndIndex:Za.collisionBoxArray.length,G1=Bc?Bc.boxStartIndex:Za.collisionBoxArray.length,Y1=Bc?Bc.boxEndIndex:Za.collisionBoxArray.length,W1=Fc?Fc.boxStartIndex:Za.collisionBoxArray.length,Z1=Fc?Fc.boxEndIndex:Za.collisionBoxArray.length,X1=Nc?Nc.boxStartIndex:Za.collisionBoxArray.length,J1=Nc?Nc.boxEndIndex:Za.collisionBoxArray.length,cl=-1,xf=function(ku,b0){return ku&&ku.circleDiameter?Math.max(ku.circleDiameter,b0):b0};cl=xf(ec,cl),cl=xf(Bc,cl),cl=xf(Fc,cl);var x0=(cl=xf(Nc,cl))>-1?1:0;x0&&(cl*=j1/24),Za.glyphOffsetArray.length>=sa.MAX_GLYPHS&&M("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),_s.sortKey!==void 0&&Za.addToSortKeyRanges(Za.symbolInstances.length,_s.sortKey),Za.symbolInstances.emplaceBack(Qs.x,Qs.y,Tl.right>=0?Tl.right:-1,Tl.center>=0?Tl.center:-1,Tl.left>=0?Tl.left:-1,Tl.vertical||-1,Bh,Nh,h0,H1,q1,G1,Y1,W1,Z1,X1,J1,_u,u0,f0,l0,c0,x0,0,Rh,jh,Uh,cl)}(Oi,bu,B1,Va,Ha,Fa,wl,Oi.layers[0],Oi.collisionBoxArray,Ji.index,Ji.sourceLayerIndex,Oi.index,Ch,ef,nf,Ko,Qu,tf,Dl,Js,Ji,Ca,ds,Vo,na)};if(Cc==="line")for(var mu=0,of=Pd(Ji.geometry,0,0,8192,8192);mu<of.length;mu+=1)for(var sf=of[mu],lf=b1(sf,Ql,rf,Va.vertical||Ks,Ha,24,Lc,Oi.overscaling,8192),gu=0,cf=lf;gu<cf.length;gu+=1){var vu=cf[gu],uf=Ks;uf&&k1(Oi,uf.text,af,vu)||zl(sf,vu)}else if(Cc==="line-center")for(var yu=0,ff=Ji.geometry;yu<ff.length;yu+=1){var Ic=ff[yu];if(Ic.length>1){var Oc=x1(Ic,rf,Va.vertical||Ks,Ha,24,Lc);Oc&&zl(Ic,Oc)}}else if(Ji.type==="Polygon")for(var Dc=0,hf=mh(Ji.geometry,0);Dc<hf.length;Dc+=1){var zc=hf[Dc],xu=w1(zc,16);zl(zc[0],new wc(xu.x,xu.y,0))}else if(Ji.type==="LineString")for(var Rc=0,Kd=Ji.geometry;Rc<Kd.length;Rc+=1){var Ph=Kd[Rc];zl(Ph,new wc(Ph[0].x,Ph[0].y,0))}else if(Ji.type==="Point")for(var Ih=0,$d=Ji.geometry;Ih<$d.length;Ih+=1)for(var F1=$d[Ih],Oh=0,Qd=F1;Oh<Qd.length;Oh+=1){var Dh=Qd[Oh];zl([Dh],new wc(Dh.x,Dh.y,0))}}(A,Bn,fi,uo,ie,vt,ii,Xn,ai,Eo,Le)},xn=0,Nn=A.features;xn<Nn.length;xn+=1)hn();ye&&A.generateCollisionDebugBuffers()},e.perspective=function(A,O,X,ie,pe){var ye,Le=1/Math.tan(O/2);return A[0]=Le/X,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=Le,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=-1,A[12]=0,A[13]=0,A[15]=0,pe!=null&&pe!==1/0?(ye=1/(ie-pe),A[10]=(pe+ie)*ye,A[14]=2*pe*ie*ye):(A[10]=-1,A[14]=-2*ie),A},e.pick=function(A,O){for(var X={},ie=0;ie<O.length;ie++){var pe=O[ie];pe in A&&(X[pe]=A[pe])}return X},e.plugin=ho,e.polygonIntersectsPolygon=No,e.postMapLoadEvent=Oe,e.postTurnstileEvent=Te,e.potpack=bd,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=Jr,e.registerForPluginStateChange=function(A){return A({pluginStatus:gi,pluginURL:da}),ka.on("pluginStateChange",A),A},e.rotate=function(A,O,X){var ie=O[0],pe=O[1],ye=O[2],Le=O[3],Ne=Math.sin(X),Qe=Math.cos(X);return A[0]=ie*Qe+ye*Ne,A[1]=pe*Qe+Le*Ne,A[2]=ie*-Ne+ye*Qe,A[3]=pe*-Ne+Le*Qe,A},e.rotateX=function(A,O,X){var ie=Math.sin(X),pe=Math.cos(X),ye=O[4],Le=O[5],Ne=O[6],Qe=O[7],ht=O[8],vt=O[9],jt=O[10],Kt=O[11];return O!==A&&(A[0]=O[0],A[1]=O[1],A[2]=O[2],A[3]=O[3],A[12]=O[12],A[13]=O[13],A[14]=O[14],A[15]=O[15]),A[4]=ye*pe+ht*ie,A[5]=Le*pe+vt*ie,A[6]=Ne*pe+jt*ie,A[7]=Qe*pe+Kt*ie,A[8]=ht*pe-ye*ie,A[9]=vt*pe-Le*ie,A[10]=jt*pe-Ne*ie,A[11]=Kt*pe-Qe*ie,A},e.rotateZ=function(A,O,X){var ie=Math.sin(X),pe=Math.cos(X),ye=O[0],Le=O[1],Ne=O[2],Qe=O[3],ht=O[4],vt=O[5],jt=O[6],Kt=O[7];return O!==A&&(A[8]=O[8],A[9]=O[9],A[10]=O[10],A[11]=O[11],A[12]=O[12],A[13]=O[13],A[14]=O[14],A[15]=O[15]),A[0]=ye*pe+ht*ie,A[1]=Le*pe+vt*ie,A[2]=Ne*pe+jt*ie,A[3]=Qe*pe+Kt*ie,A[4]=ht*pe-ye*ie,A[5]=vt*pe-Le*ie,A[6]=jt*pe-Ne*ie,A[7]=Kt*pe-Qe*ie,A},e.scale=function(A,O,X){var ie=X[0],pe=X[1],ye=X[2];return A[0]=O[0]*ie,A[1]=O[1]*ie,A[2]=O[2]*ie,A[3]=O[3]*ie,A[4]=O[4]*pe,A[5]=O[5]*pe,A[6]=O[6]*pe,A[7]=O[7]*pe,A[8]=O[8]*ye,A[9]=O[9]*ye,A[10]=O[10]*ye,A[11]=O[11]*ye,A[12]=O[12],A[13]=O[13],A[14]=O[14],A[15]=O[15],A},e.scale$1=function(A,O,X){return A[0]=O[0]*X,A[1]=O[1]*X,A[2]=O[2]*X,A[3]=O[3]*X,A},e.scale$2=function(A,O,X){return A[0]=O[0]*X,A[1]=O[1]*X,A[2]=O[2]*X,A},e.setCacheLimits=function(A,O){Fe=A,qe=O},e.setRTLTextPlugin=function(A,O,X){if(X===void 0&&(X=!1),gi===Gi||gi===Ua||gi===ts)throw new Error("setRTLTextPlugin cannot be called multiple times.");da=N.resolveURL(A),gi=Gi,xo=O,Yi(),X||ea()},e.sphericalToCartesian=function(A){var O=A[0],X=A[1],ie=A[2];return X+=90,X*=Math.PI/180,ie*=Math.PI/180,{x:O*Math.cos(X)*Math.sin(ie),y:O*Math.sin(X)*Math.sin(ie),z:O*Math.cos(ie)}},e.sqrLen=nu,e.styleSpec=Ie,e.sub=lh,e.symbolSize=y1,e.transformMat3=function(A,O,X){var ie=O[0],pe=O[1],ye=O[2];return A[0]=ie*X[0]+pe*X[3]+ye*X[6],A[1]=ie*X[1]+pe*X[4]+ye*X[7],A[2]=ie*X[2]+pe*X[5]+ye*X[8],A},e.transformMat4=mc,e.translate=function(A,O,X){var ie,pe,ye,Le,Ne,Qe,ht,vt,jt,Kt,Wt,ar,vr=X[0],Cr=X[1],Lr=X[2];return O===A?(A[12]=O[0]*vr+O[4]*Cr+O[8]*Lr+O[12],A[13]=O[1]*vr+O[5]*Cr+O[9]*Lr+O[13],A[14]=O[2]*vr+O[6]*Cr+O[10]*Lr+O[14],A[15]=O[3]*vr+O[7]*Cr+O[11]*Lr+O[15]):(ie=O[0],pe=O[1],ye=O[2],Le=O[3],Ne=O[4],Qe=O[5],ht=O[6],vt=O[7],jt=O[8],Kt=O[9],Wt=O[10],ar=O[11],A[0]=ie,A[1]=pe,A[2]=ye,A[3]=Le,A[4]=Ne,A[5]=Qe,A[6]=ht,A[7]=vt,A[8]=jt,A[9]=Kt,A[10]=Wt,A[11]=ar,A[12]=ie*vr+Ne*Cr+jt*Lr+O[12],A[13]=pe*vr+Qe*Cr+Kt*Lr+O[13],A[14]=ye*vr+ht*Cr+Wt*Lr+O[14],A[15]=Le*vr+vt*Cr+ar*Lr+O[15]),A},e.triggerPluginCompletionEvent=bo,e.uniqueId=m,e.validateCustomStyleLayer=function(A){var O=[],X=A.id;return X===void 0&&O.push({message:"layers."+X+': missing required property "id"'}),A.render===void 0&&O.push({message:"layers."+X+': missing required method "render"'}),A.renderingMode&&A.renderingMode!=="2d"&&A.renderingMode!=="3d"&&O.push({message:"layers."+X+': property "renderingMode" must be either "2d" or "3d"'}),O},e.validateLight=cn,e.validateStyle=Zr,e.values=function(A){var O=[];for(var X in A)O.push(A[X]);return O},e.vectorTile=yc,e.version="1.10.1",e.warnOnce=M,e.webpSupported=te,e.window=self,e.wrap=f}),y(0,function(e){function r(Se){var Pe=typeof Se;if(Pe==="number"||Pe==="boolean"||Pe==="string"||Se==null)return JSON.stringify(Se);if(Array.isArray(Se)){for(var De="[",Ie=0,$e=Se;Ie<$e.length;Ie+=1)De+=r($e[Ie])+",";return De+"]"}for(var st=Object.keys(Se).sort(),dt="{",ut=0;ut<st.length;ut++)dt+=JSON.stringify(st[ut])+":"+r(Se[st[ut]])+",";return dt+"}"}function t(Se){for(var Pe="",De=0,Ie=e.refProperties;De<Ie.length;De+=1)Pe+="/"+r(Se[Ie[De]]);return Pe}var i=function(Se){this.keyCache={},Se&&this.replace(Se)};i.prototype.replace=function(Se){this._layerConfigs={},this._layers={},this.update(Se,[])},i.prototype.update=function(Se,Pe){for(var De=this,Ie=0,$e=Se;Ie<$e.length;Ie+=1){var st=$e[Ie];this._layerConfigs[st.id]=st;var dt=this._layers[st.id]=e.createStyleLayer(st);dt._featureFilter=e.featureFilter(dt.filter),this.keyCache[st.id]&&delete this.keyCache[st.id]}for(var ut=0,Lt=Pe;ut<Lt.length;ut+=1){var lt=Lt[ut];delete this.keyCache[lt],delete this._layerConfigs[lt],delete this._layers[lt]}this.familiesBySource={};for(var Ct=0,Pt=function(ct,wt){for(var Rt={},Vt=0;Vt<ct.length;Vt++){var rr=wt&&wt[ct[Vt].id]||t(ct[Vt]);wt&&(wt[ct[Vt].id]=rr);var qt=Rt[rr];qt||(qt=Rt[rr]=[]),qt.push(ct[Vt])}var Jt=[];for(var or in Rt)Jt.push(Rt[or]);return Jt}(e.values(this._layerConfigs),this.keyCache);Ct<Pt.length;Ct+=1){var Ke=Pt[Ct].map(function(ct){return De._layers[ct.id]}),mt=Ke[0];if(mt.visibility!=="none"){var Dt=mt.source||"",Bt=this.familiesBySource[Dt];Bt||(Bt=this.familiesBySource[Dt]={});var Zt=mt.sourceLayer||"_geojsonTileLayer",Re=Bt[Zt];Re||(Re=Bt[Zt]=[]),Re.push(Ke)}}};var n=function(Se){var Pe={},De=[];for(var Ie in Se){var $e=Se[Ie],st=Pe[Ie]={};for(var dt in $e){var ut=$e[+dt];if(ut&&ut.bitmap.width!==0&&ut.bitmap.height!==0){var Lt={x:0,y:0,w:ut.bitmap.width+2,h:ut.bitmap.height+2};De.push(Lt),st[dt]={rect:Lt,metrics:ut.metrics}}}}var lt=e.potpack(De),Ct=lt.w,Pt=lt.h,Ke=new e.AlphaImage({width:Ct||1,height:Pt||1});for(var mt in Se){var Dt=Se[mt];for(var Bt in Dt){var Zt=Dt[+Bt];if(Zt&&Zt.bitmap.width!==0&&Zt.bitmap.height!==0){var Re=Pe[mt][Bt].rect;e.AlphaImage.copy(Zt.bitmap,Ke,{x:0,y:0},{x:Re.x+1,y:Re.y+1},Zt.bitmap)}}}this.image=Ke,this.positions=Pe};e.register("GlyphAtlas",n);var h=function(Se){this.tileID=new e.OverscaledTileID(Se.tileID.overscaledZ,Se.tileID.wrap,Se.tileID.canonical.z,Se.tileID.canonical.x,Se.tileID.canonical.y),this.uid=Se.uid,this.zoom=Se.zoom,this.pixelRatio=Se.pixelRatio,this.tileSize=Se.tileSize,this.source=Se.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Se.showCollisionBoxes,this.collectResourceTiming=!!Se.collectResourceTiming,this.returnDependencies=!!Se.returnDependencies,this.promoteId=Se.promoteId};function s(Se,Pe,De){for(var Ie=new e.EvaluationParameters(Pe),$e=0,st=Se;$e<st.length;$e+=1)st[$e].recalculate(Ie,De)}function a(Se,Pe){var De=e.getArrayBuffer(Se.request,function(Ie,$e,st,dt){Ie?Pe(Ie):$e&&Pe(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf($e)),rawData:$e,cacheControl:st,expires:dt})});return function(){De.cancel(),Pe()}}h.prototype.parse=function(Se,Pe,De,Ie,$e){var st=this;this.status="parsing",this.data=Se,this.collisionBoxArray=new e.CollisionBoxArray;var dt=new e.DictionaryCoder(Object.keys(Se.layers).sort()),ut=new e.FeatureIndex(this.tileID,this.promoteId);ut.bucketLayerIDs=[];var Lt,lt,Ct,Pt,Ke={},mt={featureIndex:ut,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:De},Dt=Pe.familiesBySource[this.source];for(var Bt in Dt){var Zt=Se.layers[Bt];if(Zt){Zt.version===1&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+Bt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Re=dt.encode(Bt),ct=[],wt=0;wt<Zt.length;wt++){var Rt=Zt.feature(wt),Vt=ut.getId(Rt,Bt);ct.push({feature:Rt,id:Vt,index:wt,sourceLayerIndex:Re})}for(var rr=0,qt=Dt[Bt];rr<qt.length;rr+=1){var Jt=qt[rr],or=Jt[0];or.minzoom&&this.zoom<Math.floor(or.minzoom)||or.maxzoom&&this.zoom>=or.maxzoom||or.visibility!=="none"&&(s(Jt,this.zoom,De),(Ke[or.id]=or.createBucket({index:ut.bucketLayerIDs.length,layers:Jt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Re,sourceID:this.source})).populate(ct,mt,this.tileID.canonical),ut.bucketLayerIDs.push(Jt.map(function(mr){return mr.id})))}}}var gr=e.mapObject(mt.glyphDependencies,function(mr){return Object.keys(mr).map(Number)});Object.keys(gr).length?Ie.send("getGlyphs",{uid:this.uid,stacks:gr},function(mr,Dr){Lt||(Lt=mr,lt=Dr,cr.call(st))}):lt={};var dr=Object.keys(mt.iconDependencies);dr.length?Ie.send("getImages",{icons:dr,source:this.source,tileID:this.tileID,type:"icons"},function(mr,Dr){Lt||(Lt=mr,Ct=Dr,cr.call(st))}):Ct={};var ur=Object.keys(mt.patternDependencies);function cr(){if(Lt)return $e(Lt);if(lt&&Ct&&Pt){var mr=new n(lt),Dr=new e.ImageAtlas(Ct,Pt);for(var yr in Ke){var Br=Ke[yr];Br instanceof e.SymbolBucket?(s(Br.layers,this.zoom,De),e.performSymbolLayout(Br,lt,mr.positions,Ct,Dr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Br.hasPattern&&(Br instanceof e.LineBucket||Br instanceof e.FillBucket||Br instanceof e.FillExtrusionBucket)&&(s(Br.layers,this.zoom,De),Br.addFeatures(mt,this.tileID.canonical,Dr.patternPositions))}this.status="done",$e(null,{buckets:e.values(Ke).filter(function(Kr){return!Kr.isEmpty()}),featureIndex:ut,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:mr.image,imageAtlas:Dr,glyphMap:this.returnDependencies?lt:null,iconMap:this.returnDependencies?Ct:null,glyphPositions:this.returnDependencies?mr.positions:null})}}ur.length?Ie.send("getImages",{icons:ur,source:this.source,tileID:this.tileID,type:"patterns"},function(mr,Dr){Lt||(Lt=mr,Pt=Dr,cr.call(st))}):Pt={},cr.call(this)};var l=function(Se,Pe,De,Ie){this.actor=Se,this.layerIndex=Pe,this.availableImages=De,this.loadVectorData=Ie||a,this.loading={},this.loaded={}};l.prototype.loadTile=function(Se,Pe){var De=this,Ie=Se.uid;this.loading||(this.loading={});var $e=!!(Se&&Se.request&&Se.request.collectResourceTiming)&&new e.RequestPerformance(Se.request),st=this.loading[Ie]=new h(Se);st.abort=this.loadVectorData(Se,function(dt,ut){if(delete De.loading[Ie],dt||!ut)return st.status="done",De.loaded[Ie]=st,Pe(dt);var Lt=ut.rawData,lt={};ut.expires&&(lt.expires=ut.expires),ut.cacheControl&&(lt.cacheControl=ut.cacheControl);var Ct={};if($e){var Pt=$e.finish();Pt&&(Ct.resourceTiming=JSON.parse(JSON.stringify(Pt)))}st.vectorTile=ut.vectorTile,st.parse(ut.vectorTile,De.layerIndex,De.availableImages,De.actor,function(Ke,mt){if(Ke||!mt)return Pe(Ke);Pe(null,e.extend({rawTileData:Lt.slice(0)},mt,lt,Ct))}),De.loaded=De.loaded||{},De.loaded[Ie]=st})},l.prototype.reloadTile=function(Se,Pe){var De=this,Ie=this.loaded,$e=Se.uid,st=this;if(Ie&&Ie[$e]){var dt=Ie[$e];dt.showCollisionBoxes=Se.showCollisionBoxes;var ut=function(Lt,lt){var Ct=dt.reloadCallback;Ct&&(delete dt.reloadCallback,dt.parse(dt.vectorTile,st.layerIndex,De.availableImages,st.actor,Ct)),Pe(Lt,lt)};dt.status==="parsing"?dt.reloadCallback=ut:dt.status==="done"&&(dt.vectorTile?dt.parse(dt.vectorTile,this.layerIndex,this.availableImages,this.actor,ut):ut())}},l.prototype.abortTile=function(Se,Pe){var De=this.loading,Ie=Se.uid;De&&De[Ie]&&De[Ie].abort&&(De[Ie].abort(),delete De[Ie]),Pe()},l.prototype.removeTile=function(Se,Pe){var De=this.loaded,Ie=Se.uid;De&&De[Ie]&&delete De[Ie],Pe()};var f=e.window.ImageBitmap,d=function(){this.loaded={}};d.prototype.loadTile=function(Se,Pe){var De=Se.uid,Ie=Se.encoding,$e=Se.rawImageData,st=f&&$e instanceof f?this.getImageData($e):$e,dt=new e.DEMData(De,st,Ie);this.loaded=this.loaded||{},this.loaded[De]=dt,Pe(null,dt)},d.prototype.getImageData=function(Se){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Se.width,Se.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Se.width,this.offscreenCanvas.height=Se.height,this.offscreenCanvasContext.drawImage(Se,0,0,Se.width,Se.height);var Pe=this.offscreenCanvasContext.getImageData(-1,-1,Se.width+2,Se.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:Pe.width,height:Pe.height},Pe.data)},d.prototype.removeTile=function(Se){var Pe=this.loaded,De=Se.uid;Pe&&Pe[De]&&delete Pe[De]};var v=function Se(Pe,De){var Ie,$e=Pe&&Pe.type;if($e==="FeatureCollection")for(Ie=0;Ie<Pe.features.length;Ie++)Se(Pe.features[Ie],De);else if($e==="GeometryCollection")for(Ie=0;Ie<Pe.geometries.length;Ie++)Se(Pe.geometries[Ie],De);else if($e==="Feature")Se(Pe.geometry,De);else if($e==="Polygon")m(Pe.coordinates,De);else if($e==="MultiPolygon")for(Ie=0;Ie<Pe.coordinates.length;Ie++)m(Pe.coordinates[Ie],De);return Pe};function m(Se,Pe){if(Se.length!==0){c(Se[0],Pe);for(var De=1;De<Se.length;De++)c(Se[De],!Pe)}}function c(Se,Pe){for(var De=0,Ie=0,$e=Se.length,st=$e-1;Ie<$e;st=Ie++)De+=(Se[Ie][0]-Se[st][0])*(Se[st][1]+Se[Ie][1]);De>=0!=!!Pe&&Se.reverse()}var b=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,g=function(Se){this._feature=Se,this.extent=e.EXTENT,this.type=Se.type,this.properties=Se.tags,"id"in Se&&!isNaN(Se.id)&&(this.id=parseInt(Se.id,10))};g.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Se=[],Pe=0,De=this._feature.geometry;Pe<De.length;Pe+=1){var Ie=De[Pe];Se.push([new e.Point$1(Ie[0],Ie[1])])}return Se}for(var $e=[],st=0,dt=this._feature.geometry;st<dt.length;st+=1){for(var ut=[],Lt=0,lt=dt[st];Lt<lt.length;Lt+=1){var Ct=lt[Lt];ut.push(new e.Point$1(Ct[0],Ct[1]))}$e.push(ut)}return $e},g.prototype.toGeoJSON=function(Se,Pe,De){return b.call(this,Se,Pe,De)};var w=function(Se){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=Se.length,this._features=Se};w.prototype.feature=function(Se){return new g(this._features[Se])};var _=e.vectorTile.VectorTileFeature,T=k;function k(Se,Pe){this.options=Pe||{},this.features=Se,this.length=Se.length}function L(Se,Pe){this.id=typeof Se.id=="number"?Se.id:void 0,this.type=Se.type,this.rawGeometry=Se.type===1?[Se.geometry]:Se.geometry,this.properties=Se.tags,this.extent=Pe||4096}k.prototype.feature=function(Se){return new L(this.features[Se],this.options.extent)},L.prototype.loadGeometry=function(){var Se=this.rawGeometry;this.geometry=[];for(var Pe=0;Pe<Se.length;Pe++){for(var De=Se[Pe],Ie=[],$e=0;$e<De.length;$e++)Ie.push(new e.Point$1(De[$e][0],De[$e][1]));this.geometry.push(Ie)}return this.geometry},L.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Se=this.geometry,Pe=1/0,De=-1/0,Ie=1/0,$e=-1/0,st=0;st<Se.length;st++)for(var dt=Se[st],ut=0;ut<dt.length;ut++){var Lt=dt[ut];Pe=Math.min(Pe,Lt.x),De=Math.max(De,Lt.x),Ie=Math.min(Ie,Lt.y),$e=Math.max($e,Lt.y)}return[Pe,Ie,De,$e]},L.prototype.toGeoJSON=_.prototype.toGeoJSON;var M=E,I=E,P=function(Se,Pe){Pe=Pe||{};var De={};for(var Ie in Se)De[Ie]=new T(Se[Ie].features,Pe),De[Ie].name=Ie,De[Ie].version=Pe.version,De[Ie].extent=Pe.extent;return E({layers:De})},S=T;function E(Se){var Pe=new e.pbf;return function(De,Ie){for(var $e in De.layers)Ie.writeMessage(3,D,De.layers[$e])}(Se,Pe),Pe.finish()}function D(Se,Pe){var De;Pe.writeVarintField(15,Se.version||1),Pe.writeStringField(1,Se.name||""),Pe.writeVarintField(5,Se.extent||4096);var Ie={keys:[],values:[],keycache:{},valuecache:{}};for(De=0;De<Se.length;De++)Ie.feature=Se.feature(De),Pe.writeMessage(2,F,Ie);var $e=Ie.keys;for(De=0;De<$e.length;De++)Pe.writeStringField(3,$e[De]);var st=Ie.values;for(De=0;De<st.length;De++)Pe.writeMessage(4,Z,st[De])}function F(Se,Pe){var De=Se.feature;De.id!==void 0&&Pe.writeVarintField(1,De.id),Pe.writeMessage(2,H,Se),Pe.writeVarintField(3,De.type),Pe.writeMessage(4,K,De)}function H(Se,Pe){var De=Se.feature,Ie=Se.keys,$e=Se.values,st=Se.keycache,dt=Se.valuecache;for(var ut in De.properties){var Lt=st[ut];Lt===void 0&&(Ie.push(ut),Lt=Ie.length-1,st[ut]=Lt),Pe.writeVarint(Lt);var lt=De.properties[ut],Ct=typeof lt;Ct!=="string"&&Ct!=="boolean"&&Ct!=="number"&&(lt=JSON.stringify(lt));var Pt=Ct+":"+lt,Ke=dt[Pt];Ke===void 0&&($e.push(lt),Ke=$e.length-1,dt[Pt]=Ke),Pe.writeVarint(Ke)}}function V(Se,Pe){return(Pe<<3)+(7&Se)}function Q(Se){return Se<<1^Se>>31}function K(Se,Pe){for(var De=Se.loadGeometry(),Ie=Se.type,$e=0,st=0,dt=De.length,ut=0;ut<dt;ut++){var Lt=De[ut],lt=1;Ie===1&&(lt=Lt.length),Pe.writeVarint(V(1,lt));for(var Ct=Ie===3?Lt.length-1:Lt.length,Pt=0;Pt<Ct;Pt++){Pt===1&&Ie!==1&&Pe.writeVarint(V(2,Ct-1));var Ke=Lt[Pt].x-$e,mt=Lt[Pt].y-st;Pe.writeVarint(Q(Ke)),Pe.writeVarint(Q(mt)),$e+=Ke,st+=mt}Ie===3&&Pe.writeVarint(V(7,1))}}function Z(Se,Pe){var De=typeof Se;De==="string"?Pe.writeStringField(1,Se):De==="boolean"?Pe.writeBooleanField(7,Se):De==="number"&&(Se%1!=0?Pe.writeDoubleField(3,Se):Se<0?Pe.writeSVarintField(6,Se):Pe.writeVarintField(5,Se))}function $(Se,Pe,De,Ie,$e,st){if(!($e-Ie<=De)){var dt=Ie+$e>>1;(function ut(Lt,lt,Ct,Pt,Ke,mt){for(;Ke>Pt;){if(Ke-Pt>600){var Dt=Ke-Pt+1,Bt=Ct-Pt+1,Zt=Math.log(Dt),Re=.5*Math.exp(2*Zt/3),ct=.5*Math.sqrt(Zt*Re*(Dt-Re)/Dt)*(Bt-Dt/2<0?-1:1),wt=Math.max(Pt,Math.floor(Ct-Bt*Re/Dt+ct)),Rt=Math.min(Ke,Math.floor(Ct+(Dt-Bt)*Re/Dt+ct));ut(Lt,lt,Ct,wt,Rt,mt)}var Vt=lt[2*Ct+mt],rr=Pt,qt=Ke;for(re(Lt,lt,Pt,Ct),lt[2*Ke+mt]>Vt&&re(Lt,lt,Pt,Ke);rr<qt;){for(re(Lt,lt,rr,qt),rr++,qt--;lt[2*rr+mt]<Vt;)rr++;for(;lt[2*qt+mt]>Vt;)qt--}lt[2*Pt+mt]===Vt?re(Lt,lt,Pt,qt):(qt++,re(Lt,lt,qt,Ke)),qt<=Ct&&(Pt=qt+1),Ct<=qt&&(Ke=qt-1)}})(Se,Pe,dt,Ie,$e,st%2),$(Se,Pe,De,Ie,dt-1,st+1),$(Se,Pe,De,dt+1,$e,st+1)}}function re(Se,Pe,De,Ie){R(Se,De,Ie),R(Pe,2*De,2*Ie),R(Pe,2*De+1,2*Ie+1)}function R(Se,Pe,De){var Ie=Se[Pe];Se[Pe]=Se[De],Se[De]=Ie}function N(Se,Pe,De,Ie){var $e=Se-De,st=Pe-Ie;return $e*$e+st*st}M.fromVectorTileJs=I,M.fromGeojsonVt=P,M.GeoJSONWrapper=S;var U=function(Se){return Se[0]},te=function(Se){return Se[1]},j=function(Se,Pe,De,Ie,$e){Pe===void 0&&(Pe=U),De===void 0&&(De=te),Ie===void 0&&(Ie=64),$e===void 0&&($e=Float64Array),this.nodeSize=Ie,this.points=Se;for(var st=Se.length<65536?Uint16Array:Uint32Array,dt=this.ids=new st(Se.length),ut=this.coords=new $e(2*Se.length),Lt=0;Lt<Se.length;Lt++)dt[Lt]=Lt,ut[2*Lt]=Pe(Se[Lt]),ut[2*Lt+1]=De(Se[Lt]);$(dt,ut,Ie,0,dt.length-1,0)};j.prototype.range=function(Se,Pe,De,Ie){return function($e,st,dt,ut,Lt,lt,Ct){for(var Pt,Ke,mt=[0,$e.length-1,0],Dt=[];mt.length;){var Bt=mt.pop(),Zt=mt.pop(),Re=mt.pop();if(Zt-Re<=Ct)for(var ct=Re;ct<=Zt;ct++)Pt=st[2*ct],Ke=st[2*ct+1],Pt>=dt&&Pt<=Lt&&Ke>=ut&&Ke<=lt&&Dt.push($e[ct]);else{var wt=Math.floor((Re+Zt)/2);Pt=st[2*wt],Ke=st[2*wt+1],Pt>=dt&&Pt<=Lt&&Ke>=ut&&Ke<=lt&&Dt.push($e[wt]);var Rt=(Bt+1)%2;(Bt===0?dt<=Pt:ut<=Ke)&&(mt.push(Re),mt.push(wt-1),mt.push(Rt)),(Bt===0?Lt>=Pt:lt>=Ke)&&(mt.push(wt+1),mt.push(Zt),mt.push(Rt))}}return Dt}(this.ids,this.coords,Se,Pe,De,Ie,this.nodeSize)},j.prototype.within=function(Se,Pe,De){return function(Ie,$e,st,dt,ut,Lt){for(var lt=[0,Ie.length-1,0],Ct=[],Pt=ut*ut;lt.length;){var Ke=lt.pop(),mt=lt.pop(),Dt=lt.pop();if(mt-Dt<=Lt)for(var Bt=Dt;Bt<=mt;Bt++)N($e[2*Bt],$e[2*Bt+1],st,dt)<=Pt&&Ct.push(Ie[Bt]);else{var Zt=Math.floor((Dt+mt)/2),Re=$e[2*Zt],ct=$e[2*Zt+1];N(Re,ct,st,dt)<=Pt&&Ct.push(Ie[Zt]);var wt=(Ke+1)%2;(Ke===0?st-ut<=Re:dt-ut<=ct)&&(lt.push(Dt),lt.push(Zt-1),lt.push(wt)),(Ke===0?st+ut>=Re:dt+ut>=ct)&&(lt.push(Zt+1),lt.push(mt),lt.push(wt))}}return Ct}(this.ids,this.coords,Se,Pe,De,this.nodeSize)};var Y={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Se){return Se}},J=function(Se){this.options=de(Object.create(Y),Se),this.trees=new Array(this.options.maxZoom+1)};function ee(Se,Pe,De,Ie,$e){return{x:Se,y:Pe,zoom:1/0,id:De,parentId:-1,numPoints:Ie,properties:$e}}function ne(Se,Pe){var De=Se.geometry.coordinates,Ie=De[0],$e=De[1];return{x:he(Ie),y:le($e),zoom:1/0,index:Pe,parentId:-1}}function se(Se){return{type:"Feature",id:Se.id,properties:oe(Se),geometry:{type:"Point",coordinates:[(Ie=Se.x,360*(Ie-.5)),(Pe=Se.y,De=(180-360*Pe)*Math.PI/180,360*Math.atan(Math.exp(De))/Math.PI-90)]}};var Pe,De,Ie}function oe(Se){var Pe=Se.numPoints,De=Pe>=1e4?Math.round(Pe/1e3)+"k":Pe>=1e3?Math.round(Pe/100)/10+"k":Pe;return de(de({},Se.properties),{cluster:!0,cluster_id:Se.id,point_count:Pe,point_count_abbreviated:De})}function he(Se){return Se/360+.5}function le(Se){var Pe=Math.sin(Se*Math.PI/180),De=.5-.25*Math.log((1+Pe)/(1-Pe))/Math.PI;return De<0?0:De>1?1:De}function de(Se,Pe){for(var De in Pe)Se[De]=Pe[De];return Se}function xe(Se){return Se.x}function we(Se){return Se.y}function be(Se,Pe,De,Ie,$e,st){var dt=$e-De,ut=st-Ie;if(dt!==0||ut!==0){var Lt=((Se-De)*dt+(Pe-Ie)*ut)/(dt*dt+ut*ut);Lt>1?(De=$e,Ie=st):Lt>0&&(De+=dt*Lt,Ie+=ut*Lt)}return(dt=Se-De)*dt+(ut=Pe-Ie)*ut}function Ae(Se,Pe,De,Ie){var $e={id:Se===void 0?null:Se,type:Pe,geometry:De,tags:Ie,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(st){var dt=st.geometry,ut=st.type;if(ut==="Point"||ut==="MultiPoint"||ut==="LineString")fe(st,dt);else if(ut==="Polygon"||ut==="MultiLineString")for(var Lt=0;Lt<dt.length;Lt++)fe(st,dt[Lt]);else if(ut==="MultiPolygon")for(Lt=0;Lt<dt.length;Lt++)for(var lt=0;lt<dt[Lt].length;lt++)fe(st,dt[Lt][lt])}($e),$e}function fe(Se,Pe){for(var De=0;De<Pe.length;De+=3)Se.minX=Math.min(Se.minX,Pe[De]),Se.minY=Math.min(Se.minY,Pe[De+1]),Se.maxX=Math.max(Se.maxX,Pe[De]),Se.maxY=Math.max(Se.maxY,Pe[De+1])}function me(Se,Pe,De,Ie){if(Pe.geometry){var $e=Pe.geometry.coordinates,st=Pe.geometry.type,dt=Math.pow(De.tolerance/((1<<De.maxZoom)*De.extent),2),ut=[],Lt=Pe.id;if(De.promoteId?Lt=Pe.properties[De.promoteId]:De.generateId&&(Lt=Ie||0),st==="Point")ke($e,ut);else if(st==="MultiPoint")for(var lt=0;lt<$e.length;lt++)ke($e[lt],ut);else if(st==="LineString")Te($e,ut,dt,!1);else if(st==="MultiLineString"){if(De.lineMetrics){for(lt=0;lt<$e.length;lt++)ut=[],Te($e[lt],ut,dt,!1),Se.push(Ae(Lt,"LineString",ut,Pe.properties));return}Me($e,ut,dt,!1)}else if(st==="Polygon")Me($e,ut,dt,!0);else{if(st!=="MultiPolygon"){if(st==="GeometryCollection"){for(lt=0;lt<Pe.geometry.geometries.length;lt++)me(Se,{id:Lt,geometry:Pe.geometry.geometries[lt],properties:Pe.properties},De,Ie);return}throw new Error("Input data is not a valid GeoJSON object.")}for(lt=0;lt<$e.length;lt++){var Ct=[];Me($e[lt],Ct,dt,!0),ut.push(Ct)}}Se.push(Ae(Lt,st,ut,Pe.properties))}}function ke(Se,Pe){Pe.push(Oe(Se[0])),Pe.push(Fe(Se[1])),Pe.push(0)}function Te(Se,Pe,De,Ie){for(var $e,st,dt=0,ut=0;ut<Se.length;ut++){var Lt=Oe(Se[ut][0]),lt=Fe(Se[ut][1]);Pe.push(Lt),Pe.push(lt),Pe.push(0),ut>0&&(dt+=Ie?($e*lt-Lt*st)/2:Math.sqrt(Math.pow(Lt-$e,2)+Math.pow(lt-st,2))),$e=Lt,st=lt}var Ct=Pe.length-3;Pe[2]=1,function Pt(Ke,mt,Dt,Bt){for(var Zt,Re=Bt,ct=Dt-mt>>1,wt=Dt-mt,Rt=Ke[mt],Vt=Ke[mt+1],rr=Ke[Dt],qt=Ke[Dt+1],Jt=mt+3;Jt<Dt;Jt+=3){var or=be(Ke[Jt],Ke[Jt+1],Rt,Vt,rr,qt);if(or>Re)Zt=Jt,Re=or;else if(or===Re){var gr=Math.abs(Jt-ct);gr<wt&&(Zt=Jt,wt=gr)}}Re>Bt&&(Zt-mt>3&&Pt(Ke,mt,Zt,Bt),Ke[Zt+2]=Re,Dt-Zt>3&&Pt(Ke,Zt,Dt,Bt))}(Pe,0,Ct,De),Pe[Ct+2]=1,Pe.size=Math.abs(dt),Pe.start=0,Pe.end=Pe.size}function Me(Se,Pe,De,Ie){for(var $e=0;$e<Se.length;$e++){var st=[];Te(Se[$e],st,De,Ie),Pe.push(st)}}function Oe(Se){return Se/360+.5}function Fe(Se){var Pe=Math.sin(Se*Math.PI/180),De=.5-.25*Math.log((1+Pe)/(1-Pe))/Math.PI;return De<0?0:De>1?1:De}function qe(Se,Pe,De,Ie,$e,st,dt,ut){if(Ie/=Pe,st>=(De/=Pe)&&dt<Ie)return Se;if(dt<De||st>=Ie)return null;for(var Lt=[],lt=0;lt<Se.length;lt++){var Ct=Se[lt],Pt=Ct.geometry,Ke=Ct.type,mt=$e===0?Ct.minX:Ct.minY,Dt=$e===0?Ct.maxX:Ct.maxY;if(mt>=De&&Dt<Ie)Lt.push(Ct);else if(!(Dt<De||mt>=Ie)){var Bt=[];if(Ke==="Point"||Ke==="MultiPoint")et(Pt,Bt,De,Ie,$e);else if(Ke==="LineString")ze(Pt,Bt,De,Ie,$e,!1,ut.lineMetrics);else if(Ke==="MultiLineString")We(Pt,Bt,De,Ie,$e,!1);else if(Ke==="Polygon")We(Pt,Bt,De,Ie,$e,!0);else if(Ke==="MultiPolygon")for(var Zt=0;Zt<Pt.length;Zt++){var Re=[];We(Pt[Zt],Re,De,Ie,$e,!0),Re.length&&Bt.push(Re)}if(Bt.length){if(ut.lineMetrics&&Ke==="LineString"){for(Zt=0;Zt<Bt.length;Zt++)Lt.push(Ae(Ct.id,Ke,Bt[Zt],Ct.tags));continue}Ke!=="LineString"&&Ke!=="MultiLineString"||(Bt.length===1?(Ke="LineString",Bt=Bt[0]):Ke="MultiLineString"),Ke!=="Point"&&Ke!=="MultiPoint"||(Ke=Bt.length===3?"Point":"MultiPoint"),Lt.push(Ae(Ct.id,Ke,Bt,Ct.tags))}}}return Lt.length?Lt:null}function et(Se,Pe,De,Ie,$e){for(var st=0;st<Se.length;st+=3){var dt=Se[st+$e];dt>=De&&dt<=Ie&&(Pe.push(Se[st]),Pe.push(Se[st+1]),Pe.push(Se[st+2]))}}function ze(Se,Pe,De,Ie,$e,st,dt){for(var ut,Lt,lt=Ue(Se),Ct=$e===0?nt:ft,Pt=Se.start,Ke=0;Ke<Se.length-3;Ke+=3){var mt=Se[Ke],Dt=Se[Ke+1],Bt=Se[Ke+2],Zt=Se[Ke+3],Re=Se[Ke+4],ct=$e===0?mt:Dt,wt=$e===0?Zt:Re,Rt=!1;dt&&(ut=Math.sqrt(Math.pow(mt-Zt,2)+Math.pow(Dt-Re,2))),ct<De?wt>De&&(Lt=Ct(lt,mt,Dt,Zt,Re,De),dt&&(lt.start=Pt+ut*Lt)):ct>Ie?wt<Ie&&(Lt=Ct(lt,mt,Dt,Zt,Re,Ie),dt&&(lt.start=Pt+ut*Lt)):Ze(lt,mt,Dt,Bt),wt<De&&ct>=De&&(Lt=Ct(lt,mt,Dt,Zt,Re,De),Rt=!0),wt>Ie&&ct<=Ie&&(Lt=Ct(lt,mt,Dt,Zt,Re,Ie),Rt=!0),!st&&Rt&&(dt&&(lt.end=Pt+ut*Lt),Pe.push(lt),lt=Ue(Se)),dt&&(Pt+=ut)}var Vt=Se.length-3;mt=Se[Vt],Dt=Se[Vt+1],Bt=Se[Vt+2],(ct=$e===0?mt:Dt)>=De&&ct<=Ie&&Ze(lt,mt,Dt,Bt),Vt=lt.length-3,st&&Vt>=3&&(lt[Vt]!==lt[0]||lt[Vt+1]!==lt[1])&&Ze(lt,lt[0],lt[1],lt[2]),lt.length&&Pe.push(lt)}function Ue(Se){var Pe=[];return Pe.size=Se.size,Pe.start=Se.start,Pe.end=Se.end,Pe}function We(Se,Pe,De,Ie,$e,st){for(var dt=0;dt<Se.length;dt++)ze(Se[dt],Pe,De,Ie,$e,st,!1)}function Ze(Se,Pe,De,Ie){Se.push(Pe),Se.push(De),Se.push(Ie)}function nt(Se,Pe,De,Ie,$e,st){var dt=(st-Pe)/(Ie-Pe);return Se.push(st),Se.push(De+($e-De)*dt),Se.push(1),dt}function ft(Se,Pe,De,Ie,$e,st){var dt=(st-De)/($e-De);return Se.push(Pe+(Ie-Pe)*dt),Se.push(st),Se.push(1),dt}function xt(Se,Pe){for(var De=[],Ie=0;Ie<Se.length;Ie++){var $e,st=Se[Ie],dt=st.type;if(dt==="Point"||dt==="MultiPoint"||dt==="LineString")$e=It(st.geometry,Pe);else if(dt==="MultiLineString"||dt==="Polygon"){$e=[];for(var ut=0;ut<st.geometry.length;ut++)$e.push(It(st.geometry[ut],Pe))}else if(dt==="MultiPolygon")for($e=[],ut=0;ut<st.geometry.length;ut++){for(var Lt=[],lt=0;lt<st.geometry[ut].length;lt++)Lt.push(It(st.geometry[ut][lt],Pe));$e.push(Lt)}De.push(Ae(st.id,dt,$e,st.tags))}return De}function It(Se,Pe){var De=[];De.size=Se.size,Se.start!==void 0&&(De.start=Se.start,De.end=Se.end);for(var Ie=0;Ie<Se.length;Ie+=3)De.push(Se[Ie]+Pe,Se[Ie+1],Se[Ie+2]);return De}function Et(Se,Pe){if(Se.transformed)return Se;var De,Ie,$e,st=1<<Se.z,dt=Se.x,ut=Se.y;for(De=0;De<Se.features.length;De++){var Lt=Se.features[De],lt=Lt.geometry,Ct=Lt.type;if(Lt.geometry=[],Ct===1)for(Ie=0;Ie<lt.length;Ie+=2)Lt.geometry.push(it(lt[Ie],lt[Ie+1],Pe,st,dt,ut));else for(Ie=0;Ie<lt.length;Ie++){var Pt=[];for($e=0;$e<lt[Ie].length;$e+=2)Pt.push(it(lt[Ie][$e],lt[Ie][$e+1],Pe,st,dt,ut));Lt.geometry.push(Pt)}}return Se.transformed=!0,Se}function it(Se,Pe,De,Ie,$e,st){return[Math.round(De*(Se*Ie-$e)),Math.round(De*(Pe*Ie-st))]}function rt(Se,Pe,De,Ie,$e){for(var st=Pe===$e.maxZoom?0:$e.tolerance/((1<<Pe)*$e.extent),dt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:De,y:Ie,z:Pe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ut=0;ut<Se.length;ut++){dt.numFeatures++,At(dt,Se[ut],st,$e);var Lt=Se[ut].minX,lt=Se[ut].minY,Ct=Se[ut].maxX,Pt=Se[ut].maxY;Lt<dt.minX&&(dt.minX=Lt),lt<dt.minY&&(dt.minY=lt),Ct>dt.maxX&&(dt.maxX=Ct),Pt>dt.maxY&&(dt.maxY=Pt)}return dt}function At(Se,Pe,De,Ie){var $e=Pe.geometry,st=Pe.type,dt=[];if(st==="Point"||st==="MultiPoint")for(var ut=0;ut<$e.length;ut+=3)dt.push($e[ut]),dt.push($e[ut+1]),Se.numPoints++,Se.numSimplified++;else if(st==="LineString")Gt(dt,$e,Se,De,!1,!1);else if(st==="MultiLineString"||st==="Polygon")for(ut=0;ut<$e.length;ut++)Gt(dt,$e[ut],Se,De,st==="Polygon",ut===0);else if(st==="MultiPolygon")for(var Lt=0;Lt<$e.length;Lt++){var lt=$e[Lt];for(ut=0;ut<lt.length;ut++)Gt(dt,lt[ut],Se,De,!0,ut===0)}if(dt.length){var Ct=Pe.tags||null;if(st==="LineString"&&Ie.lineMetrics){for(var Pt in Ct={},Pe.tags)Ct[Pt]=Pe.tags[Pt];Ct.mapbox_clip_start=$e.start/$e.size,Ct.mapbox_clip_end=$e.end/$e.size}var Ke={geometry:dt,type:st==="Polygon"||st==="MultiPolygon"?3:st==="LineString"||st==="MultiLineString"?2:1,tags:Ct};Pe.id!==null&&(Ke.id=Pe.id),Se.features.push(Ke)}}function Gt(Se,Pe,De,Ie,$e,st){var dt=Ie*Ie;if(Ie>0&&Pe.size<($e?dt:Ie))De.numPoints+=Pe.length/3;else{for(var ut=[],Lt=0;Lt<Pe.length;Lt+=3)(Ie===0||Pe[Lt+2]>dt)&&(De.numSimplified++,ut.push(Pe[Lt]),ut.push(Pe[Lt+1])),De.numPoints++;$e&&function(lt,Ct){for(var Pt=0,Ke=0,mt=lt.length,Dt=mt-2;Ke<mt;Dt=Ke,Ke+=2)Pt+=(lt[Ke]-lt[Dt])*(lt[Ke+1]+lt[Dt+1]);if(Pt>0===Ct)for(Ke=0,mt=lt.length;Ke<mt/2;Ke+=2){var Bt=lt[Ke],Zt=lt[Ke+1];lt[Ke]=lt[mt-2-Ke],lt[Ke+1]=lt[mt-1-Ke],lt[mt-2-Ke]=Bt,lt[mt-1-Ke]=Zt}}(ut,st),Se.push(ut)}}function Qt(Se,Pe){var De=(Pe=this.options=function($e,st){for(var dt in st)$e[dt]=st[dt];return $e}(Object.create(this.options),Pe)).debug;if(De&&console.time("preprocess data"),Pe.maxZoom<0||Pe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Pe.promoteId&&Pe.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ie=function($e,st){var dt=[];if($e.type==="FeatureCollection")for(var ut=0;ut<$e.features.length;ut++)me(dt,$e.features[ut],st,ut);else $e.type==="Feature"?me(dt,$e,st):me(dt,{geometry:$e},st);return dt}(Se,Pe);this.tiles={},this.tileCoords=[],De&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Pe.indexMaxZoom,Pe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Ie=function($e,st){var dt=st.buffer/st.extent,ut=$e,Lt=qe($e,1,-1-dt,dt,0,-1,2,st),lt=qe($e,1,1-dt,2+dt,0,-1,2,st);return(Lt||lt)&&(ut=qe($e,1,-dt,1+dt,0,-1,2,st)||[],Lt&&(ut=xt(Lt,1).concat(ut)),lt&&(ut=ut.concat(xt(lt,-1)))),ut}(Ie,Pe)).length&&this.splitTile(Ie,0,0,0),De&&(Ie.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ve(Se,Pe,De){return 32*((1<<Se)*De+Pe)+Se}function Ye(Se,Pe){var De=Se.tileID.canonical;if(!this._geoJSONIndex)return Pe(null,null);var Ie=this._geoJSONIndex.getTile(De.z,De.x,De.y);if(!Ie)return Pe(null,null);var $e=new w(Ie.features),st=M($e);st.byteOffset===0&&st.byteLength===st.buffer.byteLength||(st=new Uint8Array(st)),Pe(null,{vectorTile:$e,rawData:st.buffer})}J.prototype.load=function(Se){var Pe=this.options,De=Pe.log,Ie=Pe.minZoom,$e=Pe.maxZoom,st=Pe.nodeSize;De&&console.time("total time");var dt="prepare "+Se.length+" points";De&&console.time(dt),this.points=Se;for(var ut=[],Lt=0;Lt<Se.length;Lt++)Se[Lt].geometry&&ut.push(ne(Se[Lt],Lt));this.trees[$e+1]=new j(ut,xe,we,st,Float32Array),De&&console.timeEnd(dt);for(var lt=$e;lt>=Ie;lt--){var Ct=+Date.now();ut=this._cluster(ut,lt),this.trees[lt]=new j(ut,xe,we,st,Float32Array),De&&console.log("z%d: %d clusters in %dms",lt,ut.length,+Date.now()-Ct)}return De&&console.timeEnd("total time"),this},J.prototype.getClusters=function(Se,Pe){var De=((Se[0]+180)%360+360)%360-180,Ie=Math.max(-90,Math.min(90,Se[1])),$e=Se[2]===180?180:((Se[2]+180)%360+360)%360-180,st=Math.max(-90,Math.min(90,Se[3]));if(Se[2]-Se[0]>=360)De=-180,$e=180;else if(De>$e){var dt=this.getClusters([De,Ie,180,st],Pe),ut=this.getClusters([-180,Ie,$e,st],Pe);return dt.concat(ut)}for(var Lt=this.trees[this._limitZoom(Pe)],lt=[],Ct=0,Pt=Lt.range(he(De),le(st),he($e),le(Ie));Ct<Pt.length;Ct+=1){var Ke=Pt[Ct],mt=Lt.points[Ke];lt.push(mt.numPoints?se(mt):this.points[mt.index])}return lt},J.prototype.getChildren=function(Se){var Pe=this._getOriginId(Se),De=this._getOriginZoom(Se),Ie="No cluster with the specified id.",$e=this.trees[De];if(!$e)throw new Error(Ie);var st=$e.points[Pe];if(!st)throw new Error(Ie);for(var dt=this.options.radius/(this.options.extent*Math.pow(2,De-1)),ut=[],Lt=0,lt=$e.within(st.x,st.y,dt);Lt<lt.length;Lt+=1){var Ct=lt[Lt],Pt=$e.points[Ct];Pt.parentId===Se&&ut.push(Pt.numPoints?se(Pt):this.points[Pt.index])}if(ut.length===0)throw new Error(Ie);return ut},J.prototype.getLeaves=function(Se,Pe,De){Pe=Pe||10,De=De||0;var Ie=[];return this._appendLeaves(Ie,Se,Pe,De,0),Ie},J.prototype.getTile=function(Se,Pe,De){var Ie=this.trees[this._limitZoom(Se)],$e=Math.pow(2,Se),st=this.options,dt=st.extent,ut=st.radius/dt,Lt=(De-ut)/$e,lt=(De+1+ut)/$e,Ct={features:[]};return this._addTileFeatures(Ie.range((Pe-ut)/$e,Lt,(Pe+1+ut)/$e,lt),Ie.points,Pe,De,$e,Ct),Pe===0&&this._addTileFeatures(Ie.range(1-ut/$e,Lt,1,lt),Ie.points,$e,De,$e,Ct),Pe===$e-1&&this._addTileFeatures(Ie.range(0,Lt,ut/$e,lt),Ie.points,-1,De,$e,Ct),Ct.features.length?Ct:null},J.prototype.getClusterExpansionZoom=function(Se){for(var Pe=this._getOriginZoom(Se)-1;Pe<=this.options.maxZoom;){var De=this.getChildren(Se);if(Pe++,De.length!==1)break;Se=De[0].properties.cluster_id}return Pe},J.prototype._appendLeaves=function(Se,Pe,De,Ie,$e){for(var st=0,dt=this.getChildren(Pe);st<dt.length;st+=1){var ut=dt[st],Lt=ut.properties;if(Lt&&Lt.cluster?$e+Lt.point_count<=Ie?$e+=Lt.point_count:$e=this._appendLeaves(Se,Lt.cluster_id,De,Ie,$e):$e<Ie?$e++:Se.push(ut),Se.length===De)break}return $e},J.prototype._addTileFeatures=function(Se,Pe,De,Ie,$e,st){for(var dt=0,ut=Se;dt<ut.length;dt+=1){var Lt=Pe[ut[dt]],lt=Lt.numPoints,Ct={type:1,geometry:[[Math.round(this.options.extent*(Lt.x*$e-De)),Math.round(this.options.extent*(Lt.y*$e-Ie))]],tags:lt?oe(Lt):this.points[Lt.index].properties},Pt=void 0;lt?Pt=Lt.id:this.options.generateId?Pt=Lt.index:this.points[Lt.index].id&&(Pt=this.points[Lt.index].id),Pt!==void 0&&(Ct.id=Pt),st.features.push(Ct)}},J.prototype._limitZoom=function(Se){return Math.max(this.options.minZoom,Math.min(Se,this.options.maxZoom+1))},J.prototype._cluster=function(Se,Pe){for(var De=[],Ie=this.options,$e=Ie.radius,st=Ie.extent,dt=Ie.reduce,ut=$e/(st*Math.pow(2,Pe)),Lt=0;Lt<Se.length;Lt++){var lt=Se[Lt];if(!(lt.zoom<=Pe)){lt.zoom=Pe;for(var Ct=this.trees[Pe+1],Pt=Ct.within(lt.x,lt.y,ut),Ke=lt.numPoints||1,mt=lt.x*Ke,Dt=lt.y*Ke,Bt=dt&&Ke>1?this._map(lt,!0):null,Zt=(Lt<<5)+(Pe+1)+this.points.length,Re=0,ct=Pt;Re<ct.length;Re+=1){var wt=ct[Re],Rt=Ct.points[wt];if(!(Rt.zoom<=Pe)){Rt.zoom=Pe;var Vt=Rt.numPoints||1;mt+=Rt.x*Vt,Dt+=Rt.y*Vt,Ke+=Vt,Rt.parentId=Zt,dt&&(Bt||(Bt=this._map(lt,!0)),dt(Bt,this._map(Rt)))}}Ke===1?De.push(lt):(lt.parentId=Zt,De.push(ee(mt/Ke,Dt/Ke,Zt,Ke,Bt)))}}return De},J.prototype._getOriginId=function(Se){return Se-this.points.length>>5},J.prototype._getOriginZoom=function(Se){return(Se-this.points.length)%32},J.prototype._map=function(Se,Pe){if(Se.numPoints)return Pe?de({},Se.properties):Se.properties;var De=this.points[Se.index].properties,Ie=this.options.map(De);return Pe&&Ie===De?de({},Ie):Ie},Qt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Qt.prototype.splitTile=function(Se,Pe,De,Ie,$e,st,dt){for(var ut=[Se,Pe,De,Ie],Lt=this.options,lt=Lt.debug;ut.length;){Ie=ut.pop(),De=ut.pop(),Pe=ut.pop(),Se=ut.pop();var Ct=1<<Pe,Pt=Ve(Pe,De,Ie),Ke=this.tiles[Pt];if(!Ke&&(lt>1&&console.time("creation"),Ke=this.tiles[Pt]=rt(Se,Pe,De,Ie,Lt),this.tileCoords.push({z:Pe,x:De,y:Ie}),lt)){lt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Pe,De,Ie,Ke.numFeatures,Ke.numPoints,Ke.numSimplified),console.timeEnd("creation"));var mt="z"+Pe;this.stats[mt]=(this.stats[mt]||0)+1,this.total++}if(Ke.source=Se,$e){if(Pe===Lt.maxZoom||Pe===$e)continue;var Dt=1<<$e-Pe;if(De!==Math.floor(st/Dt)||Ie!==Math.floor(dt/Dt))continue}else if(Pe===Lt.indexMaxZoom||Ke.numPoints<=Lt.indexMaxPoints)continue;if(Ke.source=null,Se.length!==0){lt>1&&console.time("clipping");var Bt,Zt,Re,ct,wt,Rt,Vt=.5*Lt.buffer/Lt.extent,rr=.5-Vt,qt=.5+Vt,Jt=1+Vt;Bt=Zt=Re=ct=null,wt=qe(Se,Ct,De-Vt,De+qt,0,Ke.minX,Ke.maxX,Lt),Rt=qe(Se,Ct,De+rr,De+Jt,0,Ke.minX,Ke.maxX,Lt),Se=null,wt&&(Bt=qe(wt,Ct,Ie-Vt,Ie+qt,1,Ke.minY,Ke.maxY,Lt),Zt=qe(wt,Ct,Ie+rr,Ie+Jt,1,Ke.minY,Ke.maxY,Lt),wt=null),Rt&&(Re=qe(Rt,Ct,Ie-Vt,Ie+qt,1,Ke.minY,Ke.maxY,Lt),ct=qe(Rt,Ct,Ie+rr,Ie+Jt,1,Ke.minY,Ke.maxY,Lt),Rt=null),lt>1&&console.timeEnd("clipping"),ut.push(Bt||[],Pe+1,2*De,2*Ie),ut.push(Zt||[],Pe+1,2*De,2*Ie+1),ut.push(Re||[],Pe+1,2*De+1,2*Ie),ut.push(ct||[],Pe+1,2*De+1,2*Ie+1)}}},Qt.prototype.getTile=function(Se,Pe,De){var Ie=this.options,$e=Ie.extent,st=Ie.debug;if(Se<0||Se>24)return null;var dt=1<<Se,ut=Ve(Se,Pe=(Pe%dt+dt)%dt,De);if(this.tiles[ut])return Et(this.tiles[ut],$e);st>1&&console.log("drilling down to z%d-%d-%d",Se,Pe,De);for(var Lt,lt=Se,Ct=Pe,Pt=De;!Lt&&lt>0;)lt--,Ct=Math.floor(Ct/2),Pt=Math.floor(Pt/2),Lt=this.tiles[Ve(lt,Ct,Pt)];return Lt&&Lt.source?(st>1&&console.log("found parent tile z%d-%d-%d",lt,Ct,Pt),st>1&&console.time("drilling down"),this.splitTile(Lt.source,lt,Ct,Pt,Se,Pe,De),st>1&&console.timeEnd("drilling down"),this.tiles[ut]?Et(this.tiles[ut],$e):null):null};var Be=function(Se){function Pe(De,Ie,$e,st){Se.call(this,De,Ie,$e,Ye),st&&(this.loadGeoJSON=st)}return Se&&(Pe.__proto__=Se),Pe.prototype=Object.create(Se&&Se.prototype),Pe.prototype.constructor=Pe,Pe.prototype.loadData=function(De,Ie){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ie,this._pendingLoadDataParams=De,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Pe.prototype._loadData=function(){var De=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Ie=this._pendingCallback,$e=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var st=!!($e&&$e.request&&$e.request.collectResourceTiming)&&new e.RequestPerformance($e.request);this.loadGeoJSON($e,function(dt,ut){if(dt||!ut)return Ie(dt);if(typeof ut!="object")return Ie(new Error("Input data given to '"+$e.source+"' is not a valid GeoJSON object."));v(ut,!0);try{De._geoJSONIndex=$e.cluster?new J(function(Ct){var Pt=Ct.superclusterOptions,Ke=Ct.clusterProperties;if(!Ke||!Pt)return Pt;for(var mt={},Dt={},Bt={accumulated:null,zoom:0},Zt={properties:null},Re=Object.keys(Ke),ct=0,wt=Re;ct<wt.length;ct+=1){var Rt=wt[ct],Vt=Ke[Rt],rr=Vt[0],qt=Vt[1],Jt=e.createExpression(qt),or=e.createExpression(typeof rr=="string"?[rr,["accumulated"],["get",Rt]]:rr);mt[Rt]=Jt.value,Dt[Rt]=or.value}return Pt.map=function(gr){Zt.properties=gr;for(var dr={},ur=0,cr=Re;ur<cr.length;ur+=1){var mr=cr[ur];dr[mr]=mt[mr].evaluate(Bt,Zt)}return dr},Pt.reduce=function(gr,dr){Zt.properties=dr;for(var ur=0,cr=Re;ur<cr.length;ur+=1){var mr=cr[ur];Bt.accumulated=gr[mr],gr[mr]=Dt[mr].evaluate(Bt,Zt)}},Pt}($e)).load(ut.features):function(Ct,Pt){return new Qt(Ct,Pt)}(ut,$e.geojsonVtOptions)}catch(Ct){return Ie(Ct)}De.loaded={};var Lt={};if(st){var lt=st.finish();lt&&(Lt.resourceTiming={},Lt.resourceTiming[$e.source]=JSON.parse(JSON.stringify(lt)))}Ie(null,Lt)})}},Pe.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Pe.prototype.reloadTile=function(De,Ie){var $e=this.loaded,st=De.uid;return $e&&$e[st]?Se.prototype.reloadTile.call(this,De,Ie):this.loadTile(De,Ie)},Pe.prototype.loadGeoJSON=function(De,Ie){if(De.request)e.getJSON(De.request,Ie);else{if(typeof De.data!="string")return Ie(new Error("Input data given to '"+De.source+"' is not a valid GeoJSON object."));try{return Ie(null,JSON.parse(De.data))}catch{return Ie(new Error("Input data given to '"+De.source+"' is not a valid GeoJSON object."))}}},Pe.prototype.removeSource=function(De,Ie){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ie()},Pe.prototype.getClusterExpansionZoom=function(De,Ie){try{Ie(null,this._geoJSONIndex.getClusterExpansionZoom(De.clusterId))}catch($e){Ie($e)}},Pe.prototype.getClusterChildren=function(De,Ie){try{Ie(null,this._geoJSONIndex.getChildren(De.clusterId))}catch($e){Ie($e)}},Pe.prototype.getClusterLeaves=function(De,Ie){try{Ie(null,this._geoJSONIndex.getLeaves(De.clusterId,De.limit,De.offset))}catch($e){Ie($e)}},Pe}(l),Je=function(Se){var Pe=this;this.self=Se,this.actor=new e.Actor(Se,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:Be},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(De,Ie){if(Pe.workerSourceTypes[De])throw new Error('Worker source with name "'+De+'" already registered.');Pe.workerSourceTypes[De]=Ie},this.self.registerRTLTextPlugin=function(De){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=De.applyArabicShaping,e.plugin.processBidirectionalText=De.processBidirectionalText,e.plugin.processStyledBidirectionalText=De.processStyledBidirectionalText}};return Je.prototype.setReferrer=function(Se,Pe){this.referrer=Pe},Je.prototype.setImages=function(Se,Pe,De){for(var Ie in this.availableImages[Se]=Pe,this.workerSources[Se]){var $e=this.workerSources[Se][Ie];for(var st in $e)$e[st].availableImages=Pe}De()},Je.prototype.setLayers=function(Se,Pe,De){this.getLayerIndex(Se).replace(Pe),De()},Je.prototype.updateLayers=function(Se,Pe,De){this.getLayerIndex(Se).update(Pe.layers,Pe.removedIds),De()},Je.prototype.loadTile=function(Se,Pe,De){this.getWorkerSource(Se,Pe.type,Pe.source).loadTile(Pe,De)},Je.prototype.loadDEMTile=function(Se,Pe,De){this.getDEMWorkerSource(Se,Pe.source).loadTile(Pe,De)},Je.prototype.reloadTile=function(Se,Pe,De){this.getWorkerSource(Se,Pe.type,Pe.source).reloadTile(Pe,De)},Je.prototype.abortTile=function(Se,Pe,De){this.getWorkerSource(Se,Pe.type,Pe.source).abortTile(Pe,De)},Je.prototype.removeTile=function(Se,Pe,De){this.getWorkerSource(Se,Pe.type,Pe.source).removeTile(Pe,De)},Je.prototype.removeDEMTile=function(Se,Pe){this.getDEMWorkerSource(Se,Pe.source).removeTile(Pe)},Je.prototype.removeSource=function(Se,Pe,De){if(this.workerSources[Se]&&this.workerSources[Se][Pe.type]&&this.workerSources[Se][Pe.type][Pe.source]){var Ie=this.workerSources[Se][Pe.type][Pe.source];delete this.workerSources[Se][Pe.type][Pe.source],Ie.removeSource!==void 0?Ie.removeSource(Pe,De):De()}},Je.prototype.loadWorkerSource=function(Se,Pe,De){try{this.self.importScripts(Pe.url),De()}catch(Ie){De(Ie.toString())}},Je.prototype.syncRTLPluginState=function(Se,Pe,De){try{e.plugin.setState(Pe);var Ie=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&Ie!=null){this.self.importScripts(Ie);var $e=e.plugin.isParsed();De($e?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ie),$e)}}catch(st){De(st.toString())}},Je.prototype.getAvailableImages=function(Se){var Pe=this.availableImages[Se];return Pe||(Pe=[]),Pe},Je.prototype.getLayerIndex=function(Se){var Pe=this.layerIndexes[Se];return Pe||(Pe=this.layerIndexes[Se]=new i),Pe},Je.prototype.getWorkerSource=function(Se,Pe,De){var Ie=this;if(this.workerSources[Se]||(this.workerSources[Se]={}),this.workerSources[Se][Pe]||(this.workerSources[Se][Pe]={}),!this.workerSources[Se][Pe][De]){var $e={send:function(st,dt,ut){Ie.actor.send(st,dt,ut,Se)}};this.workerSources[Se][Pe][De]=new this.workerSourceTypes[Pe]($e,this.getLayerIndex(Se),this.getAvailableImages(Se))}return this.workerSources[Se][Pe][De]},Je.prototype.getDEMWorkerSource=function(Se,Pe){return this.demWorkerSources[Se]||(this.demWorkerSources[Se]={}),this.demWorkerSources[Se][Pe]||(this.demWorkerSources[Se][Pe]=new d),this.demWorkerSources[Se][Pe]},Je.prototype.enforceCacheSizeLimit=function(Se,Pe){e.enforceCacheSizeLimit(Pe)},typeof WorkerGlobalScope!="undefined"&&e.window!==void 0&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new Je(e.window)),Je}),y(0,function(e){var r=e.createCommonjsModule(function(C){function z(ae){return!B(ae)}function B(ae){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ue,ge,_e=new Blob([""],{type:"text/javascript"}),Ee=URL.createObjectURL(_e);try{ge=new Worker(Ee),ue=!0}catch{ue=!1}return ge&&ge.terminate(),URL.revokeObjectURL(Ee),ue}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var ue=document.createElement("canvas");ue.width=ue.height=1;var ge=ue.getContext("2d");if(!ge)return!1;var _e=ge.getImageData(0,0,1,1);return _e&&_e.width===ue.width}()?function(ue){return G[ue]===void 0&&(G[ue]=function(ge){var _e=function(He){var Xe=document.createElement("canvas"),at=Object.create(z.webGLContextAttributes);return at.failIfMajorPerformanceCaveat=He,Xe.probablySupportsContext?Xe.probablySupportsContext("webgl",at)||Xe.probablySupportsContext("experimental-webgl",at):Xe.supportsContext?Xe.supportsContext("webgl",at)||Xe.supportsContext("experimental-webgl",at):Xe.getContext("webgl",at)||Xe.getContext("experimental-webgl",at)}(ge);if(!_e)return!1;var Ee=_e.createShader(_e.VERTEX_SHADER);return!Ee||_e.isContextLost()?!1:(_e.shaderSource(Ee,"void main() {}"),_e.compileShader(Ee),_e.getShaderParameter(Ee,_e.COMPILE_STATUS)===!0)}(ue)),G[ue]}(ae&&ae.failIfMajorPerformanceCaveat)?void 0:"insufficient WebGL support":"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support"}C.exports?C.exports=z:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=z,window.mapboxgl.notSupportedReason=B);var G={};z.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),t={create:function(C,z,B){var G=e.window.document.createElement(C);return z!==void 0&&(G.className=z),B&&B.appendChild(G),G},createNS:function(C,z){return e.window.document.createElementNS(C,z)}},i=e.window.document.documentElement.style;function n(C){if(!i)return C[0];for(var z=0;z<C.length;z++)if(C[z]in i)return C[z];return C[0]}var h,s=n(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);t.disableDrag=function(){i&&s&&(h=i[s],i[s]="none")},t.enableDrag=function(){i&&s&&(i[s]=h)};var a=n(["transform","WebkitTransform"]);t.setTransform=function(C,z){C.style[a]=z};var l=!1;try{var f=Object.defineProperty({},"passive",{get:function(){l=!0}});e.window.addEventListener("test",f,f),e.window.removeEventListener("test",f,f)}catch{l=!1}t.addEventListener=function(C,z,B,G){G===void 0&&(G={}),"passive"in G&&l?C.addEventListener(z,B,G):C.addEventListener(z,B,G.capture)},t.removeEventListener=function(C,z,B,G){G===void 0&&(G={}),"passive"in G&&l?C.removeEventListener(z,B,G):C.removeEventListener(z,B,G.capture)};var d=function(C){C.preventDefault(),C.stopPropagation(),e.window.removeEventListener("click",d,!0)};function v(C){var z=C.userImage;return z&&z.render&&z.render()?(C.data.replace(new Uint8Array(z.data.buffer)),!0):!1}t.suppressClick=function(){e.window.addEventListener("click",d,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",d,!0)},0)},t.mousePos=function(C,z){var B=C.getBoundingClientRect();return new e.Point(z.clientX-B.left-C.clientLeft,z.clientY-B.top-C.clientTop)},t.touchPos=function(C,z){for(var B=C.getBoundingClientRect(),G=[],ae=0;ae<z.length;ae++)G.push(new e.Point(z[ae].clientX-B.left-C.clientLeft,z[ae].clientY-B.top-C.clientTop));return G},t.mouseButton=function(C){return e.window.InstallTrigger!==void 0&&C.button===2&&C.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:C.button},t.remove=function(C){C.parentNode&&C.parentNode.removeChild(C)};var m=function(C){function z(){C.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.isLoaded=function(){return this.loaded},z.prototype.setLoaded=function(B){if(this.loaded!==B&&(this.loaded=B,B)){for(var G=0,ae=this.requestors;G<ae.length;G+=1){var ue=ae[G],ge=ue.ids,_e=ue.callback;this._notify(ge,_e)}this.requestors=[]}},z.prototype.getImage=function(B){return this.images[B]},z.prototype.addImage=function(B,G){this._validate(B,G)&&(this.images[B]=G)},z.prototype._validate=function(B,G){var ae=!0;return this._validateStretch(G.stretchX,G.data&&G.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+B+'" has invalid "stretchX" value'))),ae=!1),this._validateStretch(G.stretchY,G.data&&G.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+B+'" has invalid "stretchY" value'))),ae=!1),this._validateContent(G.content,G)||(this.fire(new e.ErrorEvent(new Error('Image "'+B+'" has invalid "content" value'))),ae=!1),ae},z.prototype._validateStretch=function(B,G){if(!B)return!0;for(var ae=0,ue=0,ge=B;ue<ge.length;ue+=1){var _e=ge[ue];if(_e[0]<ae||_e[1]<_e[0]||G<_e[1])return!1;ae=_e[1]}return!0},z.prototype._validateContent=function(B,G){return!B||B.length===4&&!(B[0]<0||G.data.width<B[0])&&!(B[1]<0||G.data.height<B[1])&&!(B[2]<0||G.data.width<B[2])&&!(B[3]<0||G.data.height<B[3])&&!(B[2]<B[0])&&!(B[3]<B[1])},z.prototype.updateImage=function(B,G){var ae=this.images[B];G.version=ae.version+1,this.images[B]=G,this.updatedImages[B]=!0},z.prototype.removeImage=function(B){var G=this.images[B];delete this.images[B],delete this.patterns[B],G.userImage&&G.userImage.onRemove&&G.userImage.onRemove()},z.prototype.listImages=function(){return Object.keys(this.images)},z.prototype.getImages=function(B,G){var ae=!0;if(!this.isLoaded())for(var ue=0,ge=B;ue<ge.length;ue+=1){var _e=ge[ue];this.images[_e]||(ae=!1)}this.isLoaded()||ae?this._notify(B,G):this.requestors.push({ids:B,callback:G})},z.prototype._notify=function(B,G){for(var ae={},ue=0,ge=B;ue<ge.length;ue+=1){var _e=ge[ue];this.images[_e]||this.fire(new e.Event("styleimagemissing",{id:_e}));var Ee=this.images[_e];Ee?ae[_e]={data:Ee.data.clone(),pixelRatio:Ee.pixelRatio,sdf:Ee.sdf,version:Ee.version,stretchX:Ee.stretchX,stretchY:Ee.stretchY,content:Ee.content,hasRenderCallback:Boolean(Ee.userImage&&Ee.userImage.render)}:e.warnOnce('Image "'+_e+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}G(null,ae)},z.prototype.getPixelSize=function(){var B=this.atlasImage;return{width:B.width,height:B.height}},z.prototype.getPattern=function(B){var G=this.patterns[B],ae=this.getImage(B);if(!ae)return null;if(G&&G.position.version===ae.version)return G.position;if(G)G.position.version=ae.version;else{var ue={w:ae.data.width+2,h:ae.data.height+2,x:0,y:0},ge=new e.ImagePosition(ue,ae);this.patterns[B]={bin:ue,position:ge}}return this._updatePatternAtlas(),this.patterns[B].position},z.prototype.bind=function(B){var G=B.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(B,this.atlasImage,G.RGBA),this.atlasTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE)},z.prototype._updatePatternAtlas=function(){var B=[];for(var G in this.patterns)B.push(this.patterns[G].bin);var ae=e.potpack(B),ue=ae.w,ge=ae.h,_e=this.atlasImage;for(var Ee in _e.resize({width:ue||1,height:ge||1}),this.patterns){var He=this.patterns[Ee].bin,Xe=He.x+1,at=He.y+1,_t=this.images[Ee].data,St=_t.width,Tt=_t.height;e.RGBAImage.copy(_t,_e,{x:0,y:0},{x:Xe,y:at},{width:St,height:Tt}),e.RGBAImage.copy(_t,_e,{x:0,y:Tt-1},{x:Xe,y:at-1},{width:St,height:1}),e.RGBAImage.copy(_t,_e,{x:0,y:0},{x:Xe,y:at+Tt},{width:St,height:1}),e.RGBAImage.copy(_t,_e,{x:St-1,y:0},{x:Xe-1,y:at},{width:1,height:Tt}),e.RGBAImage.copy(_t,_e,{x:0,y:0},{x:Xe+St,y:at},{width:1,height:Tt})}this.dirty=!0},z.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},z.prototype.dispatchRenderCallbacks=function(B){for(var G=0,ae=B;G<ae.length;G+=1){var ue=ae[G];if(!this.callbackDispatchedThisFrame[ue]){this.callbackDispatchedThisFrame[ue]=!0;var ge=this.images[ue];v(ge)&&this.updateImage(ue,ge)}}},z}(e.Evented),c=w,b=w,g=1e20;function w(C,z,B,G,ae,ue){this.fontSize=C||24,this.buffer=z===void 0?3:z,this.cutoff=G||.25,this.fontFamily=ae||"sans-serif",this.fontWeight=ue||"normal",this.radius=B||8;var ge=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ge,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ge*ge),this.gridInner=new Float64Array(ge*ge),this.f=new Float64Array(ge),this.d=new Float64Array(ge),this.z=new Float64Array(ge+1),this.v=new Int16Array(ge),this.middle=Math.round(ge/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function _(C,z,B,G,ae,ue,ge){for(var _e=0;_e<z;_e++){for(var Ee=0;Ee<B;Ee++)G[Ee]=C[Ee*z+_e];for(T(G,ae,ue,ge,B),Ee=0;Ee<B;Ee++)C[Ee*z+_e]=ae[Ee]}for(Ee=0;Ee<B;Ee++){for(_e=0;_e<z;_e++)G[_e]=C[Ee*z+_e];for(T(G,ae,ue,ge,z),_e=0;_e<z;_e++)C[Ee*z+_e]=Math.sqrt(ae[_e])}}function T(C,z,B,G,ae){B[0]=0,G[0]=-g,G[1]=+g;for(var ue=1,ge=0;ue<ae;ue++){for(var _e=(C[ue]+ue*ue-(C[B[ge]]+B[ge]*B[ge]))/(2*ue-2*B[ge]);_e<=G[ge];)ge--,_e=(C[ue]+ue*ue-(C[B[ge]]+B[ge]*B[ge]))/(2*ue-2*B[ge]);B[++ge]=ue,G[ge]=_e,G[ge+1]=+g}for(ue=0,ge=0;ue<ae;ue++){for(;G[ge+1]<ue;)ge++;z[ue]=(ue-B[ge])*(ue-B[ge])+C[B[ge]]}}w.prototype.draw=function(C){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(C,this.buffer,this.middle);for(var z=this.ctx.getImageData(0,0,this.size,this.size),B=new Uint8ClampedArray(this.size*this.size),G=0;G<this.size*this.size;G++){var ae=z.data[4*G+3]/255;this.gridOuter[G]=ae===1?0:ae===0?g:Math.pow(Math.max(0,.5-ae),2),this.gridInner[G]=ae===1?g:ae===0?0:Math.pow(Math.max(0,ae-.5),2)}for(_(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),_(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),G=0;G<this.size*this.size;G++){var ue=this.gridOuter[G]-this.gridInner[G];B[G]=Math.max(0,Math.min(255,Math.round(255-255*(ue/this.radius+this.cutoff))))}return B},c.default=b;var k=function(C,z){this.requestManager=C,this.localIdeographFontFamily=z,this.entries={}};k.prototype.setURL=function(C){this.url=C},k.prototype.getGlyphs=function(C,z){var B=this,G=[];for(var ae in C)for(var ue=0,ge=C[ae];ue<ge.length;ue+=1){var _e=ge[ue];G.push({stack:ae,id:_e})}e.asyncAll(G,function(Ee,He){var Xe=Ee.stack,at=Ee.id,_t=B.entries[Xe];_t||(_t=B.entries[Xe]={glyphs:{},requests:{},ranges:{}});var St=_t.glyphs[at];if(St===void 0){if(St=B._tinySDF(_t,Xe,at))return _t.glyphs[at]=St,void He(null,{stack:Xe,id:at,glyph:St});var Tt=Math.floor(at/256);if(256*Tt>65535)He(new Error("glyphs > 65535 not supported"));else if(_t.ranges[Tt])He(null,{stack:Xe,id:at,glyph:St});else{var kt=_t.requests[Tt];kt||(kt=_t.requests[Tt]=[],k.loadGlyphRange(Xe,Tt,B.url,B.requestManager,function(bt,Nt){if(Nt){for(var zt in Nt)B._doesCharSupportLocalGlyph(+zt)||(_t.glyphs[+zt]=Nt[+zt]);_t.ranges[Tt]=!0}for(var Ut=0,nr=kt;Ut<nr.length;Ut+=1)(0,nr[Ut])(bt,Nt);delete _t.requests[Tt]})),kt.push(function(bt,Nt){bt?He(bt):Nt&&He(null,{stack:Xe,id:at,glyph:Nt[at]||null})})}}else He(null,{stack:Xe,id:at,glyph:St})},function(Ee,He){if(Ee)z(Ee);else if(He){for(var Xe={},at=0,_t=He;at<_t.length;at+=1){var St=_t[at],Tt=St.stack,kt=St.id,bt=St.glyph;(Xe[Tt]||(Xe[Tt]={}))[kt]=bt&&{id:bt.id,bitmap:bt.bitmap.clone(),metrics:bt.metrics}}z(null,Xe)}})},k.prototype._doesCharSupportLocalGlyph=function(C){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](C)||e.isChar["Hangul Syllables"](C)||e.isChar.Hiragana(C)||e.isChar.Katakana(C))},k.prototype._tinySDF=function(C,z,B){var G=this.localIdeographFontFamily;if(G&&this._doesCharSupportLocalGlyph(B)){var ae=C.tinySDF;if(!ae){var ue="400";/bold/i.test(z)?ue="900":/medium/i.test(z)?ue="500":/light/i.test(z)&&(ue="200"),ae=C.tinySDF=new k.TinySDF(24,3,8,.25,G,ue)}return{id:B,bitmap:new e.AlphaImage({width:30,height:30},ae.draw(String.fromCharCode(B))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},k.loadGlyphRange=function(C,z,B,G,ae){var ue=256*z,ge=ue+255,_e=G.transformRequest(G.normalizeGlyphsURL(B).replace("{fontstack}",C).replace("{range}",ue+"-"+ge),e.ResourceType.Glyphs);e.getArrayBuffer(_e,function(Ee,He){if(Ee)ae(Ee);else if(He){for(var Xe={},at=0,_t=e.parseGlyphPBF(He);at<_t.length;at+=1){var St=_t[at];Xe[St.id]=St}ae(null,Xe)}})},k.TinySDF=c;var L=function(){this.specification=e.styleSpec.light.position};L.prototype.possiblyEvaluate=function(C,z){return e.sphericalToCartesian(C.expression.evaluate(z))},L.prototype.interpolate=function(C,z,B){return{x:e.number(C.x,z.x,B),y:e.number(C.y,z.y,B),z:e.number(C.z,z.z,B)}};var M=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new L,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),I=function(C){function z(B){C.call(this),this._transitionable=new e.Transitionable(M),this.setLight(B),this._transitioning=this._transitionable.untransitioned()}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getLight=function(){return this._transitionable.serialize()},z.prototype.setLight=function(B,G){if(G===void 0&&(G={}),!this._validate(e.validateLight,B,G))for(var ae in B){var ue=B[ae];e.endsWith(ae,"-transition")?this._transitionable.setTransition(ae.slice(0,-"-transition".length),ue):this._transitionable.setValue(ae,ue)}},z.prototype.updateTransitions=function(B){this._transitioning=this._transitionable.transitioned(B,this._transitioning)},z.prototype.hasTransition=function(){return this._transitioning.hasTransition()},z.prototype.recalculate=function(B){this.properties=this._transitioning.possiblyEvaluate(B)},z.prototype._validate=function(B,G,ae){return(!ae||ae.validate!==!1)&&e.emitValidationErrors(this,B.call(e.validateStyle,e.extend({value:G,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},z}(e.Evented),P=function(C,z){this.width=C,this.height=z,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};P.prototype.getDash=function(C,z){var B=C.join(",")+String(z);return this.dashEntry[B]||(this.dashEntry[B]=this.addDash(C,z)),this.dashEntry[B]},P.prototype.getDashRanges=function(C,z,B){var G=[],ae=C.length%2==1?-C[C.length-1]*B:0,ue=C[0]*B,ge=!0;G.push({left:ae,right:ue,isDash:ge,zeroLength:C[0]===0});for(var _e=C[0],Ee=1;Ee<C.length;Ee++){ge=!ge;var He=C[Ee];ae=_e*B,ue=(_e+=He)*B,G.push({left:ae,right:ue,isDash:ge,zeroLength:He===0})}return G},P.prototype.addRoundDash=function(C,z,B){for(var G=z/2,ae=-B;ae<=B;ae++)for(var ue=this.nextRow+B+ae,ge=this.width*ue,_e=0,Ee=C[_e],He=0;He<this.width;He++){He/Ee.right>1&&(Ee=C[++_e]);var Xe=Math.abs(He-Ee.left),at=Math.abs(He-Ee.right),_t=Math.min(Xe,at),St=void 0,Tt=ae/B*(G+1);if(Ee.isDash){var kt=G-Math.abs(Tt);St=Math.sqrt(_t*_t+kt*kt)}else St=G-Math.sqrt(_t*_t+Tt*Tt);this.data[ge+He]=Math.max(0,Math.min(255,St+128))}},P.prototype.addRegularDash=function(C){for(var z=C.length-1;z>=0;--z){var B=C[z],G=C[z+1];B.zeroLength?C.splice(z,1):G&&G.isDash===B.isDash&&(G.left=B.left,C.splice(z,1))}var ae=C[0],ue=C[C.length-1];ae.isDash===ue.isDash&&(ae.left=ue.left-this.width,ue.right=ae.right+this.width);for(var ge=this.width*this.nextRow,_e=0,Ee=C[_e],He=0;He<this.width;He++){He/Ee.right>1&&(Ee=C[++_e]);var Xe=Math.abs(He-Ee.left),at=Math.abs(He-Ee.right),_t=Math.min(Xe,at),St=Ee.isDash?_t:-_t;this.data[ge+He]=Math.max(0,Math.min(255,St+128))}},P.prototype.addDash=function(C,z){var B=z?7:0,G=2*B+1;if(this.nextRow+G>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var ae=0,ue=0;ue<C.length;ue++)ae+=C[ue];if(ae!==0){var ge=this.width/ae,_e=this.getDashRanges(C,this.width,ge);z?this.addRoundDash(_e,ge,B):this.addRegularDash(_e)}var Ee={y:(this.nextRow+B+.5)/this.height,height:2*B/this.height,width:ae};return this.nextRow+=G,this.dirty=!0,Ee},P.prototype.bind=function(C){var z=C.gl;this.texture?(z.bindTexture(z.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,z.texSubImage2D(z.TEXTURE_2D,0,0,0,this.width,this.height,z.ALPHA,z.UNSIGNED_BYTE,this.data))):(this.texture=z.createTexture(),z.bindTexture(z.TEXTURE_2D,this.texture),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_S,z.REPEAT),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_T,z.REPEAT),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,z.LINEAR),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,z.LINEAR),z.texImage2D(z.TEXTURE_2D,0,z.ALPHA,this.width,this.height,0,z.ALPHA,z.UNSIGNED_BYTE,this.data))};var S=function C(z,B){this.workerPool=z,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var G=this.workerPool.acquire(this.id),ae=0;ae<G.length;ae++){var ue=G[ae],ge=new C.Actor(ue,B,this.id);ge.name="Worker "+ae,this.actors.push(ge)}};function E(C,z,B){var G=function(ae,ue){if(ae)return B(ae);if(ue){var ge=e.pick(e.extend(ue,C),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);ue.vector_layers&&(ge.vectorLayers=ue.vector_layers,ge.vectorLayerIds=ge.vectorLayers.map(function(_e){return _e.id})),ge.tiles=z.canonicalizeTileset(ge,C.url),B(null,ge)}};return C.url?e.getJSON(z.transformRequest(z.normalizeSourceURL(C.url),e.ResourceType.Source),G):e.browser.frame(function(){return G(null,C)})}S.prototype.broadcast=function(C,z,B){B=B||function(){},e.asyncAll(this.actors,function(G,ae){G.send(C,z,ae)},B)},S.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},S.prototype.remove=function(){this.actors.forEach(function(C){C.remove()}),this.actors=[],this.workerPool.release(this.id)},S.Actor=e.Actor;var D=function(C,z,B){this.bounds=e.LngLatBounds.convert(this.validateBounds(C)),this.minzoom=z||0,this.maxzoom=B||24};D.prototype.validateBounds=function(C){return Array.isArray(C)&&C.length===4?[Math.max(-180,C[0]),Math.max(-90,C[1]),Math.min(180,C[2]),Math.min(90,C[3])]:[-180,-90,180,90]},D.prototype.contains=function(C){var z=Math.pow(2,C.z),B=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*z),G=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*z),ae=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*z),ue=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*z);return C.x>=B&&C.x<ae&&C.y>=G&&C.y<ue};var F=function(C){function z(B,G,ae,ue){if(C.call(this),this.id=B,this.dispatcher=ae,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(G,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},G),this._collectResourceTiming=G.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(ue)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.load=function(){var B=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._requestManager,function(G,ae){B._tileJSONRequest=null,B._loaded=!0,G?B.fire(new e.ErrorEvent(G)):ae&&(e.extend(B,ae),ae.bounds&&(B.tileBounds=new D(ae.bounds,B.minzoom,B.maxzoom)),e.postTurnstileEvent(ae.tiles,B.map._requestManager._customAccessToken),e.postMapLoadEvent(ae.tiles,B.map._getMapId(),B.map._requestManager._skuToken,B.map._requestManager._customAccessToken),B.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),B.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},z.prototype.loaded=function(){return this._loaded},z.prototype.hasTile=function(B){return!this.tileBounds||this.tileBounds.contains(B.canonical)},z.prototype.onAdd=function(B){this.map=B,this.load()},z.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},z.prototype.serialize=function(){return e.extend({},this._options)},z.prototype.loadTile=function(B,G){var ae=this.map._requestManager.normalizeTileURL(B.tileID.canonical.url(this.tiles,this.scheme)),ue={request:this.map._requestManager.transformRequest(ae,e.ResourceType.Tile),uid:B.uid,tileID:B.tileID,zoom:B.tileID.overscaledZ,tileSize:this.tileSize*B.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function ge(_e,Ee){return delete B.request,B.aborted?G(null):_e&&_e.status!==404?G(_e):(Ee&&Ee.resourceTiming&&(B.resourceTiming=Ee.resourceTiming),this.map._refreshExpiredTiles&&Ee&&B.setExpiryData(Ee),B.loadVectorData(Ee,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),G(null),void(B.reloadCallback&&(this.loadTile(B,B.reloadCallback),B.reloadCallback=null)))}ue.request.collectResourceTiming=this._collectResourceTiming,B.actor&&B.state!=="expired"?B.state==="loading"?B.reloadCallback=G:B.request=B.actor.send("reloadTile",ue,ge.bind(this)):(B.actor=this.dispatcher.getActor(),B.request=B.actor.send("loadTile",ue,ge.bind(this)))},z.prototype.abortTile=function(B){B.request&&(B.request.cancel(),delete B.request),B.actor&&B.actor.send("abortTile",{uid:B.uid,type:this.type,source:this.id},void 0)},z.prototype.unloadTile=function(B){B.unloadVectorData(),B.actor&&B.actor.send("removeTile",{uid:B.uid,type:this.type,source:this.id},void 0)},z.prototype.hasTransition=function(){return!1},z}(e.Evented),H=function(C){function z(B,G,ae,ue){C.call(this),this.id=B,this.dispatcher=ae,this.setEventedParent(ue),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},G),e.extend(this,e.pick(G,["url","scheme","tileSize"]))}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.load=function(){var B=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._requestManager,function(G,ae){B._tileJSONRequest=null,B._loaded=!0,G?B.fire(new e.ErrorEvent(G)):ae&&(e.extend(B,ae),ae.bounds&&(B.tileBounds=new D(ae.bounds,B.minzoom,B.maxzoom)),e.postTurnstileEvent(ae.tiles),e.postMapLoadEvent(ae.tiles,B.map._getMapId(),B.map._requestManager._skuToken),B.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),B.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},z.prototype.loaded=function(){return this._loaded},z.prototype.onAdd=function(B){this.map=B,this.load()},z.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},z.prototype.serialize=function(){return e.extend({},this._options)},z.prototype.hasTile=function(B){return!this.tileBounds||this.tileBounds.contains(B.canonical)},z.prototype.loadTile=function(B,G){var ae=this,ue=this.map._requestManager.normalizeTileURL(B.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);B.request=e.getImage(this.map._requestManager.transformRequest(ue,e.ResourceType.Tile),function(ge,_e){if(delete B.request,B.aborted)B.state="unloaded",G(null);else if(ge)B.state="errored",G(ge);else if(_e){ae.map._refreshExpiredTiles&&B.setExpiryData(_e),delete _e.cacheControl,delete _e.expires;var Ee=ae.map.painter.context,He=Ee.gl;B.texture=ae.map.painter.getTileTexture(_e.width),B.texture?B.texture.update(_e,{useMipmap:!0}):(B.texture=new e.Texture(Ee,_e,He.RGBA,{useMipmap:!0}),B.texture.bind(He.LINEAR,He.CLAMP_TO_EDGE,He.LINEAR_MIPMAP_NEAREST),Ee.extTextureFilterAnisotropic&&He.texParameterf(He.TEXTURE_2D,Ee.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ee.extTextureFilterAnisotropicMax)),B.state="loaded",e.cacheEntryPossiblyAdded(ae.dispatcher),G(null)}})},z.prototype.abortTile=function(B,G){B.request&&(B.request.cancel(),delete B.request),G()},z.prototype.unloadTile=function(B,G){B.texture&&this.map.painter.saveTileTexture(B.texture),G()},z.prototype.hasTransition=function(){return!1},z}(e.Evented),V=function(C){function z(B,G,ae,ue){C.call(this,B,G,ae,ue),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},G),this.encoding=G.encoding||"mapbox"}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},z.prototype.loadTile=function(B,G){var ae=this.map._requestManager.normalizeTileURL(B.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function ue(ge,_e){ge&&(B.state="errored",G(ge)),_e&&(B.dem=_e,B.needsHillshadePrepare=!0,B.state="loaded",G(null))}B.request=e.getImage(this.map._requestManager.transformRequest(ae,e.ResourceType.Tile),function(ge,_e){if(delete B.request,B.aborted)B.state="unloaded",G(null);else if(ge)B.state="errored",G(ge);else if(_e){this.map._refreshExpiredTiles&&B.setExpiryData(_e),delete _e.cacheControl,delete _e.expires;var Ee=e.window.ImageBitmap&&_e instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?_e:e.browser.getImageData(_e,1),He={uid:B.uid,coord:B.tileID,source:this.id,rawImageData:Ee,encoding:this.encoding};B.actor&&B.state!=="expired"||(B.actor=this.dispatcher.getActor(),B.actor.send("loadDEMTile",He,ue.bind(this)))}}.bind(this)),B.neighboringTiles=this._getNeighboringTiles(B.tileID)},z.prototype._getNeighboringTiles=function(B){var G=B.canonical,ae=Math.pow(2,G.z),ue=(G.x-1+ae)%ae,ge=G.x===0?B.wrap-1:B.wrap,_e=(G.x+1+ae)%ae,Ee=G.x+1===ae?B.wrap+1:B.wrap,He={};return He[new e.OverscaledTileID(B.overscaledZ,ge,G.z,ue,G.y).key]={backfilled:!1},He[new e.OverscaledTileID(B.overscaledZ,Ee,G.z,_e,G.y).key]={backfilled:!1},G.y>0&&(He[new e.OverscaledTileID(B.overscaledZ,ge,G.z,ue,G.y-1).key]={backfilled:!1},He[new e.OverscaledTileID(B.overscaledZ,B.wrap,G.z,G.x,G.y-1).key]={backfilled:!1},He[new e.OverscaledTileID(B.overscaledZ,Ee,G.z,_e,G.y-1).key]={backfilled:!1}),G.y+1<ae&&(He[new e.OverscaledTileID(B.overscaledZ,ge,G.z,ue,G.y+1).key]={backfilled:!1},He[new e.OverscaledTileID(B.overscaledZ,B.wrap,G.z,G.x,G.y+1).key]={backfilled:!1},He[new e.OverscaledTileID(B.overscaledZ,Ee,G.z,_e,G.y+1).key]={backfilled:!1}),He},z.prototype.unloadTile=function(B){B.demTexture&&this.map.painter.saveTileTexture(B.demTexture),B.fbo&&(B.fbo.destroy(),delete B.fbo),B.dem&&delete B.dem,delete B.neighboringTiles,B.state="unloaded",B.actor&&B.actor.send("removeDEMTile",{uid:B.uid,source:this.id})},z}(H),Q=function(C){function z(B,G,ae,ue){C.call(this),this.id=B,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=ae.getActor(),this.setEventedParent(ue),this._data=G.data,this._options=e.extend({},G),this._collectResourceTiming=G.collectResourceTiming,this._resourceTiming=[],G.maxzoom!==void 0&&(this.maxzoom=G.maxzoom),G.type&&(this.type=G.type),G.attribution&&(this.attribution=G.attribution),this.promoteId=G.promoteId;var ge=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:G.cluster||!1,geojsonVtOptions:{buffer:(G.buffer!==void 0?G.buffer:128)*ge,tolerance:(G.tolerance!==void 0?G.tolerance:.375)*ge,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:G.lineMetrics||!1,generateId:G.generateId||!1},superclusterOptions:{maxZoom:G.clusterMaxZoom!==void 0?Math.min(G.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(G.clusterRadius||50)*ge,log:!1,generateId:G.generateId||!1},clusterProperties:G.clusterProperties},G.workerOptions)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.load=function(){var B=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(G){if(G)B.fire(new e.ErrorEvent(G));else{var ae={dataType:"source",sourceDataType:"metadata"};B._collectResourceTiming&&B._resourceTiming&&B._resourceTiming.length>0&&(ae.resourceTiming=B._resourceTiming,B._resourceTiming=[]),B.fire(new e.Event("data",ae))}})},z.prototype.onAdd=function(B){this.map=B,this.load()},z.prototype.setData=function(B){var G=this;return this._data=B,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ae){if(ae)G.fire(new e.ErrorEvent(ae));else{var ue={dataType:"source",sourceDataType:"content"};G._collectResourceTiming&&G._resourceTiming&&G._resourceTiming.length>0&&(ue.resourceTiming=G._resourceTiming,G._resourceTiming=[]),G.fire(new e.Event("data",ue))}}),this},z.prototype.getClusterExpansionZoom=function(B,G){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:B,source:this.id},G),this},z.prototype.getClusterChildren=function(B,G){return this.actor.send("geojson.getClusterChildren",{clusterId:B,source:this.id},G),this},z.prototype.getClusterLeaves=function(B,G,ae,ue){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:B,limit:G,offset:ae},ue),this},z.prototype._updateWorkerData=function(B){var G=this;this._loaded=!1;var ae=e.extend({},this.workerOptions),ue=this._data;typeof ue=="string"?(ae.request=this.map._requestManager.transformRequest(e.browser.resolveURL(ue),e.ResourceType.Source),ae.request.collectResourceTiming=this._collectResourceTiming):ae.data=JSON.stringify(ue),this.actor.send(this.type+".loadData",ae,function(ge,_e){G._removed||_e&&_e.abandoned||(G._loaded=!0,_e&&_e.resourceTiming&&_e.resourceTiming[G.id]&&(G._resourceTiming=_e.resourceTiming[G.id].slice(0)),G.actor.send(G.type+".coalesce",{source:ae.source},null),B(ge))})},z.prototype.loaded=function(){return this._loaded},z.prototype.loadTile=function(B,G){var ae=this,ue=B.actor?"reloadTile":"loadTile";B.actor=this.actor;var ge={type:this.type,uid:B.uid,tileID:B.tileID,zoom:B.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};B.request=this.actor.send(ue,ge,function(_e,Ee){return delete B.request,B.unloadVectorData(),B.aborted?G(null):_e?G(_e):(B.loadVectorData(Ee,ae.map.painter,ue==="reloadTile"),G(null))})},z.prototype.abortTile=function(B){B.request&&(B.request.cancel(),delete B.request),B.aborted=!0},z.prototype.unloadTile=function(B){B.unloadVectorData(),this.actor.send("removeTile",{uid:B.uid,type:this.type,source:this.id})},z.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},z.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},z.prototype.hasTransition=function(){return!1},z}(e.Evented),K=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Z=function(C){function z(B,G,ae,ue){C.call(this),this.id=B,this.dispatcher=ae,this.coordinates=G.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(ue),this.options=G}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.load=function(B,G){var ae=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(ue,ge){ae._loaded=!0,ue?ae.fire(new e.ErrorEvent(ue)):ge&&(ae.image=ge,B&&(ae.coordinates=B),G&&G(),ae._finishLoading())})},z.prototype.loaded=function(){return this._loaded},z.prototype.updateImage=function(B){var G=this;return this.image&&B.url?(this.options.url=B.url,this.load(B.coordinates,function(){G.texture=null}),this):this},z.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},z.prototype.onAdd=function(B){this.map=B,this.load()},z.prototype.setCoordinates=function(B){var G=this;this.coordinates=B;var ae=B.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(ge){for(var _e=1/0,Ee=1/0,He=-1/0,Xe=-1/0,at=0,_t=ge;at<_t.length;at+=1){var St=_t[at];_e=Math.min(_e,St.x),Ee=Math.min(Ee,St.y),He=Math.max(He,St.x),Xe=Math.max(Xe,St.y)}var Tt=He-_e,kt=Xe-Ee,bt=Math.max(Tt,kt),Nt=Math.max(0,Math.floor(-Math.log(bt)/Math.LN2)),zt=Math.pow(2,Nt);return new e.CanonicalTileID(Nt,Math.floor((_e+He)/2*zt),Math.floor((Ee+Xe)/2*zt))}(ae),this.minzoom=this.maxzoom=this.tileID.z;var ue=ae.map(function(ge){return G.tileID.getTilePoint(ge)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(ue[0].x,ue[0].y,0,0),this._boundsArray.emplaceBack(ue[1].x,ue[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(ue[3].x,ue[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(ue[2].x,ue[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},z.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var B=this.map.painter.context,G=B.gl;for(var ae in this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,K.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(B,this.image,G.RGBA),this.texture.bind(G.LINEAR,G.CLAMP_TO_EDGE)),this.tiles){var ue=this.tiles[ae];ue.state!=="loaded"&&(ue.state="loaded",ue.texture=this.texture)}}},z.prototype.loadTile=function(B,G){this.tileID&&this.tileID.equals(B.tileID.canonical)?(this.tiles[String(B.tileID.wrap)]=B,B.buckets={},G(null)):(B.state="errored",G(null))},z.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},z.prototype.hasTransition=function(){return!1},z}(e.Evented),$=function(C){function z(B,G,ae,ue){C.call(this,B,G,ae,ue),this.roundZoom=!0,this.type="video",this.options=G}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.load=function(){var B=this;this._loaded=!1;var G=this.options;this.urls=[];for(var ae=0,ue=G.urls;ae<ue.length;ae+=1){var ge=ue[ae];this.urls.push(this.map._requestManager.transformRequest(ge,e.ResourceType.Source).url)}e.getVideo(this.urls,function(_e,Ee){B._loaded=!0,_e?B.fire(new e.ErrorEvent(_e)):Ee&&(B.video=Ee,B.video.loop=!0,B.video.addEventListener("playing",function(){B.map.triggerRepaint()}),B.map&&B.video.play(),B._finishLoading())})},z.prototype.pause=function(){this.video&&this.video.pause()},z.prototype.play=function(){this.video&&this.video.play()},z.prototype.seek=function(B){if(this.video){var G=this.video.seekable;B<G.start(0)||B>G.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+G.start(0)+" and "+G.end(0)+"-second mark."))):this.video.currentTime=B}},z.prototype.getVideo=function(){return this.video},z.prototype.onAdd=function(B){this.map||(this.map=B,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},z.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var B=this.map.painter.context,G=B.gl;for(var ae in this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,K.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(G.LINEAR,G.CLAMP_TO_EDGE),G.texSubImage2D(G.TEXTURE_2D,0,0,0,G.RGBA,G.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(B,this.video,G.RGBA),this.texture.bind(G.LINEAR,G.CLAMP_TO_EDGE)),this.tiles){var ue=this.tiles[ae];ue.state!=="loaded"&&(ue.state="loaded",ue.texture=this.texture)}}},z.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},z.prototype.hasTransition=function(){return this.video&&!this.video.paused},z}(Z),re=function(C){function z(B,G,ae,ue){C.call(this,B,G,ae,ue),G.coordinates?Array.isArray(G.coordinates)&&G.coordinates.length===4&&!G.coordinates.some(function(ge){return!Array.isArray(ge)||ge.length!==2||ge.some(function(_e){return typeof _e!="number"})})||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+B,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+B,null,'missing required property "coordinates"'))),G.animate&&typeof G.animate!="boolean"&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+B,null,'optional "animate" property must be a boolean value'))),G.canvas?typeof G.canvas=="string"||G.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+B,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+B,null,'missing required property "canvas"'))),this.options=G,this.animate=G.animate===void 0||G.animate}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},z.prototype.getCanvas=function(){return this.canvas},z.prototype.onAdd=function(B){this.map=B,this.load(),this.canvas&&this.animate&&this.play()},z.prototype.onRemove=function(){this.pause()},z.prototype.prepare=function(){var B=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,B=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,B=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var G=this.map.painter.context,ae=G.gl;for(var ue in this.boundsBuffer||(this.boundsBuffer=G.createVertexBuffer(this._boundsArray,K.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(B||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(G,this.canvas,ae.RGBA,{premultiply:!0}),this.tiles){var ge=this.tiles[ue];ge.state!=="loaded"&&(ge.state="loaded",ge.texture=this.texture)}}},z.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},z.prototype.hasTransition=function(){return this._playing},z.prototype._hasInvalidDimensions=function(){for(var B=0,G=[this.canvas.width,this.canvas.height];B<G.length;B+=1){var ae=G[B];if(isNaN(ae)||ae<=0)return!0}return!1},z}(Z),R={vector:F,raster:H,"raster-dem":V,geojson:Q,video:$,image:Z,canvas:re};function N(C,z){var B=e.identity([]);return e.translate(B,B,[1,1,0]),e.scale(B,B,[.5*C.width,.5*C.height,1]),e.multiply(B,B,C.calculatePosMatrix(z.toUnwrapped()))}function U(C,z,B,G,ae,ue){var ge=function(kt,bt,Nt){if(kt)for(var zt=0,Ut=kt;zt<Ut.length;zt+=1){var nr=bt[Ut[zt]];if(nr&&nr.source===Nt&&nr.type==="fill-extrusion")return!0}else for(var pr in bt){var Mr=bt[pr];if(Mr.source===Nt&&Mr.type==="fill-extrusion")return!0}return!1}(ae&&ae.layers,z,C.id),_e=ue.maxPitchScaleFactor(),Ee=C.tilesIn(G,_e,ge);Ee.sort(te);for(var He=[],Xe=0,at=Ee;Xe<at.length;Xe+=1){var _t=at[Xe];He.push({wrappedTileID:_t.tileID.wrapped().key,queryResults:_t.tile.queryRenderedFeatures(z,B,C._state,_t.queryGeometry,_t.cameraQueryGeometry,_t.scale,ae,ue,_e,N(C.transform,_t.tileID))})}var St=function(kt){for(var bt={},Nt={},zt=0,Ut=kt;zt<Ut.length;zt+=1){var nr=Ut[zt],pr=nr.queryResults,Mr=nr.wrappedTileID,kr=Nt[Mr]=Nt[Mr]||{};for(var Qr in pr)for(var $r=pr[Qr],pn=kr[Qr]=kr[Qr]||{},sn=bt[Qr]=bt[Qr]||[],Un=0,Wn=$r;Un<Wn.length;Un+=1){var li=Wn[Un];pn[li.featureIndex]||(pn[li.featureIndex]=!0,sn.push(li))}}return bt}(He);for(var Tt in St)St[Tt].forEach(function(kt){var bt=kt.feature,Nt=C.getFeatureState(bt.layer["source-layer"],bt.id);bt.source=bt.layer.source,bt.layer["source-layer"]&&(bt.sourceLayer=bt.layer["source-layer"]),bt.state=Nt});return St}function te(C,z){var B=C.tileID,G=z.tileID;return B.overscaledZ-G.overscaledZ||B.canonical.y-G.canonical.y||B.wrap-G.wrap||B.canonical.x-G.canonical.x}var j=function(C,z){this.max=C,this.onRemove=z,this.reset()};j.prototype.reset=function(){for(var C in this.data)for(var z=0,B=this.data[C];z<B.length;z+=1){var G=B[z];G.timeout&&clearTimeout(G.timeout),this.onRemove(G.value)}return this.data={},this.order=[],this},j.prototype.add=function(C,z,B){var G=this,ae=C.wrapped().key;this.data[ae]===void 0&&(this.data[ae]=[]);var ue={value:z,timeout:void 0};if(B!==void 0&&(ue.timeout=setTimeout(function(){G.remove(C,ue)},B)),this.data[ae].push(ue),this.order.push(ae),this.order.length>this.max){var ge=this._getAndRemoveByKey(this.order[0]);ge&&this.onRemove(ge)}return this},j.prototype.has=function(C){return C.wrapped().key in this.data},j.prototype.getAndRemove=function(C){return this.has(C)?this._getAndRemoveByKey(C.wrapped().key):null},j.prototype._getAndRemoveByKey=function(C){var z=this.data[C].shift();return z.timeout&&clearTimeout(z.timeout),this.data[C].length===0&&delete this.data[C],this.order.splice(this.order.indexOf(C),1),z.value},j.prototype.getByKey=function(C){var z=this.data[C];return z?z[0].value:null},j.prototype.get=function(C){return this.has(C)?this.data[C.wrapped().key][0].value:null},j.prototype.remove=function(C,z){if(!this.has(C))return this;var B=C.wrapped().key,G=z===void 0?0:this.data[B].indexOf(z),ae=this.data[B][G];return this.data[B].splice(G,1),ae.timeout&&clearTimeout(ae.timeout),this.data[B].length===0&&delete this.data[B],this.onRemove(ae.value),this.order.splice(this.order.indexOf(B),1),this},j.prototype.setMaxSize=function(C){for(this.max=C;this.order.length>this.max;){var z=this._getAndRemoveByKey(this.order[0]);z&&this.onRemove(z)}return this},j.prototype.filter=function(C){var z=[];for(var B in this.data)for(var G=0,ae=this.data[B];G<ae.length;G+=1){var ue=ae[G];C(ue.value)||z.push(ue)}for(var ge=0,_e=z;ge<_e.length;ge+=1){var Ee=_e[ge];this.remove(Ee.value.tileID,Ee)}};var Y=function(C,z,B){this.context=C;var G=C.gl;this.buffer=G.createBuffer(),this.dynamicDraw=Boolean(B),this.context.unbindVAO(),C.bindElementBuffer.set(this.buffer),G.bufferData(G.ELEMENT_ARRAY_BUFFER,z.arrayBuffer,this.dynamicDraw?G.DYNAMIC_DRAW:G.STATIC_DRAW),this.dynamicDraw||delete z.arrayBuffer};Y.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Y.prototype.updateData=function(C){var z=this.context.gl;this.context.unbindVAO(),this.bind(),z.bufferSubData(z.ELEMENT_ARRAY_BUFFER,0,C.arrayBuffer)},Y.prototype.destroy=function(){var C=this.context.gl;this.buffer&&(C.deleteBuffer(this.buffer),delete this.buffer)};var J={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ee=function(C,z,B,G){this.length=z.length,this.attributes=B,this.itemSize=z.bytesPerElement,this.dynamicDraw=G,this.context=C;var ae=C.gl;this.buffer=ae.createBuffer(),C.bindVertexBuffer.set(this.buffer),ae.bufferData(ae.ARRAY_BUFFER,z.arrayBuffer,this.dynamicDraw?ae.DYNAMIC_DRAW:ae.STATIC_DRAW),this.dynamicDraw||delete z.arrayBuffer};ee.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ee.prototype.updateData=function(C){var z=this.context.gl;this.bind(),z.bufferSubData(z.ARRAY_BUFFER,0,C.arrayBuffer)},ee.prototype.enableAttributes=function(C,z){for(var B=0;B<this.attributes.length;B++){var G=this.attributes[B],ae=z.attributes[G.name];ae!==void 0&&C.enableVertexAttribArray(ae)}},ee.prototype.setVertexAttribPointers=function(C,z,B){for(var G=0;G<this.attributes.length;G++){var ae=this.attributes[G],ue=z.attributes[ae.name];ue!==void 0&&C.vertexAttribPointer(ue,ae.components,C[J[ae.type]],!1,this.itemSize,ae.offset+this.itemSize*(B||0))}},ee.prototype.destroy=function(){var C=this.context.gl;this.buffer&&(C.deleteBuffer(this.buffer),delete this.buffer)};var ne=function(C){this.gl=C.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ne.prototype.get=function(){return this.current},ne.prototype.set=function(C){},ne.prototype.getDefault=function(){return this.default},ne.prototype.setDefault=function(){this.set(this.default)};var se=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return e.Color.transparent},z.prototype.set=function(B){var G=this.current;(B.r!==G.r||B.g!==G.g||B.b!==G.b||B.a!==G.a||this.dirty)&&(this.gl.clearColor(B.r,B.g,B.b,B.a),this.current=B,this.dirty=!1)},z}(ne),oe=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return 1},z.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.clearDepth(B),this.current=B,this.dirty=!1)},z}(ne),he=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return 0},z.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.clearStencil(B),this.current=B,this.dirty=!1)},z}(ne),le=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return[!0,!0,!0,!0]},z.prototype.set=function(B){var G=this.current;(B[0]!==G[0]||B[1]!==G[1]||B[2]!==G[2]||B[3]!==G[3]||this.dirty)&&(this.gl.colorMask(B[0],B[1],B[2],B[3]),this.current=B,this.dirty=!1)},z}(ne),de=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return!0},z.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.depthMask(B),this.current=B,this.dirty=!1)},z}(ne),xe=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return 255},z.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.stencilMask(B),this.current=B,this.dirty=!1)},z}(ne),we=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},z.prototype.set=function(B){var G=this.current;(B.func!==G.func||B.ref!==G.ref||B.mask!==G.mask||this.dirty)&&(this.gl.stencilFunc(B.func,B.ref,B.mask),this.current=B,this.dirty=!1)},z}(ne),be=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){var B=this.gl;return[B.KEEP,B.KEEP,B.KEEP]},z.prototype.set=function(B){var G=this.current;(B[0]!==G[0]||B[1]!==G[1]||B[2]!==G[2]||this.dirty)&&(this.gl.stencilOp(B[0],B[1],B[2]),this.current=B,this.dirty=!1)},z}(ne),Ae=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(B){if(B!==this.current||this.dirty){var G=this.gl;B?G.enable(G.STENCIL_TEST):G.disable(G.STENCIL_TEST),this.current=B,this.dirty=!1}},z}(ne),fe=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return[0,1]},z.prototype.set=function(B){var G=this.current;(B[0]!==G[0]||B[1]!==G[1]||this.dirty)&&(this.gl.depthRange(B[0],B[1]),this.current=B,this.dirty=!1)},z}(ne),me=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(B){if(B!==this.current||this.dirty){var G=this.gl;B?G.enable(G.DEPTH_TEST):G.disable(G.DEPTH_TEST),this.current=B,this.dirty=!1}},z}(ne),ke=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return this.gl.LESS},z.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.depthFunc(B),this.current=B,this.dirty=!1)},z}(ne),Te=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(B){if(B!==this.current||this.dirty){var G=this.gl;B?G.enable(G.BLEND):G.disable(G.BLEND),this.current=B,this.dirty=!1}},z}(ne),Me=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){var B=this.gl;return[B.ONE,B.ZERO]},z.prototype.set=function(B){var G=this.current;(B[0]!==G[0]||B[1]!==G[1]||this.dirty)&&(this.gl.blendFunc(B[0],B[1]),this.current=B,this.dirty=!1)},z}(ne),Oe=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return e.Color.transparent},z.prototype.set=function(B){var G=this.current;(B.r!==G.r||B.g!==G.g||B.b!==G.b||B.a!==G.a||this.dirty)&&(this.gl.blendColor(B.r,B.g,B.b,B.a),this.current=B,this.dirty=!1)},z}(ne),Fe=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return this.gl.FUNC_ADD},z.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.blendEquation(B),this.current=B,this.dirty=!1)},z}(ne),qe=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(B){if(B!==this.current||this.dirty){var G=this.gl;B?G.enable(G.CULL_FACE):G.disable(G.CULL_FACE),this.current=B,this.dirty=!1}},z}(ne),et=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return this.gl.BACK},z.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.cullFace(B),this.current=B,this.dirty=!1)},z}(ne),ze=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return this.gl.CCW},z.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.frontFace(B),this.current=B,this.dirty=!1)},z}(ne),Ue=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.useProgram(B),this.current=B,this.dirty=!1)},z}(ne),We=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return this.gl.TEXTURE0},z.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.activeTexture(B),this.current=B,this.dirty=!1)},z}(ne),Ze=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){var B=this.gl;return[0,0,B.drawingBufferWidth,B.drawingBufferHeight]},z.prototype.set=function(B){var G=this.current;(B[0]!==G[0]||B[1]!==G[1]||B[2]!==G[2]||B[3]!==G[3]||this.dirty)&&(this.gl.viewport(B[0],B[1],B[2],B[3]),this.current=B,this.dirty=!1)},z}(ne),nt=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(B){if(B!==this.current||this.dirty){var G=this.gl;G.bindFramebuffer(G.FRAMEBUFFER,B),this.current=B,this.dirty=!1}},z}(ne),ft=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(B){if(B!==this.current||this.dirty){var G=this.gl;G.bindRenderbuffer(G.RENDERBUFFER,B),this.current=B,this.dirty=!1}},z}(ne),xt=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(B){if(B!==this.current||this.dirty){var G=this.gl;G.bindTexture(G.TEXTURE_2D,B),this.current=B,this.dirty=!1}},z}(ne),It=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(B){if(B!==this.current||this.dirty){var G=this.gl;G.bindBuffer(G.ARRAY_BUFFER,B),this.current=B,this.dirty=!1}},z}(ne),Et=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(B){var G=this.gl;G.bindBuffer(G.ELEMENT_ARRAY_BUFFER,B),this.current=B,this.dirty=!1},z}(ne),it=function(C){function z(B){C.call(this,B),this.vao=B.extVertexArrayObject}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(B){this.vao&&(B!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(B),this.current=B,this.dirty=!1)},z}(ne),rt=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return 4},z.prototype.set=function(B){if(B!==this.current||this.dirty){var G=this.gl;G.pixelStorei(G.UNPACK_ALIGNMENT,B),this.current=B,this.dirty=!1}},z}(ne),At=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(B){if(B!==this.current||this.dirty){var G=this.gl;G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B),this.current=B,this.dirty=!1}},z}(ne),Gt=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(B){if(B!==this.current||this.dirty){var G=this.gl;G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,B),this.current=B,this.dirty=!1}},z}(ne),Qt=function(C){function z(B,G){C.call(this,B),this.context=B,this.parent=G}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getDefault=function(){return null},z}(ne),Ve=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.setDirty=function(){this.dirty=!0},z.prototype.set=function(B){if(B!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var G=this.gl;G.framebufferTexture2D(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_2D,B,0),this.current=B,this.dirty=!1}},z}(Qt),Ye=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.set=function(B){if(B!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var G=this.gl;G.framebufferRenderbuffer(G.FRAMEBUFFER,G.DEPTH_ATTACHMENT,G.RENDERBUFFER,B),this.current=B,this.dirty=!1}},z}(Qt),Be=function(C,z,B,G){this.context=C,this.width=z,this.height=B;var ae=C.gl,ue=this.framebuffer=ae.createFramebuffer();this.colorAttachment=new Ve(C,ue),G&&(this.depthAttachment=new Ye(C,ue))};Be.prototype.destroy=function(){var C=this.context.gl,z=this.colorAttachment.get();if(z&&C.deleteTexture(z),this.depthAttachment){var B=this.depthAttachment.get();B&&C.deleteRenderbuffer(B)}C.deleteFramebuffer(this.framebuffer)};var Je=function(C,z,B){this.func=C,this.mask=z,this.range=B};Je.ReadOnly=!1,Je.ReadWrite=!0,Je.disabled=new Je(519,Je.ReadOnly,[0,1]);var Se=function(C,z,B,G,ae,ue){this.test=C,this.ref=z,this.mask=B,this.fail=G,this.depthFail=ae,this.pass=ue};Se.disabled=new Se({func:519,mask:0},0,0,7680,7680,7680);var Pe=function(C,z,B){this.blendFunction=C,this.blendColor=z,this.mask=B};Pe.disabled=new Pe(Pe.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),Pe.unblended=new Pe(Pe.Replace,e.Color.transparent,[!0,!0,!0,!0]),Pe.alphaBlended=new Pe([1,771],e.Color.transparent,[!0,!0,!0,!0]);var De=function(C,z,B){this.enable=C,this.mode=z,this.frontFace=B};De.disabled=new De(!1,1029,2305),De.backCCW=new De(!0,1029,2305);var Ie=function(C){this.gl=C,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new se(this),this.clearDepth=new oe(this),this.clearStencil=new he(this),this.colorMask=new le(this),this.depthMask=new de(this),this.stencilMask=new xe(this),this.stencilFunc=new we(this),this.stencilOp=new be(this),this.stencilTest=new Ae(this),this.depthRange=new fe(this),this.depthTest=new me(this),this.depthFunc=new ke(this),this.blend=new Te(this),this.blendFunc=new Me(this),this.blendColor=new Oe(this),this.blendEquation=new Fe(this),this.cullFace=new qe(this),this.cullFaceSide=new et(this),this.frontFace=new ze(this),this.program=new Ue(this),this.activeTexture=new We(this),this.viewport=new Ze(this),this.bindFramebuffer=new nt(this),this.bindRenderbuffer=new ft(this),this.bindTexture=new xt(this),this.bindVertexBuffer=new It(this),this.bindElementBuffer=new Et(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new it(this),this.pixelStoreUnpack=new rt(this),this.pixelStoreUnpackPremultiplyAlpha=new At(this),this.pixelStoreUnpackFlipY=new Gt(this),this.extTextureFilterAnisotropic=C.getExtension("EXT_texture_filter_anisotropic")||C.getExtension("MOZ_EXT_texture_filter_anisotropic")||C.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=C.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=C.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(C.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=C.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=C.getExtension("EXT_disjoint_timer_query")};Ie.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ie.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ie.prototype.createIndexBuffer=function(C,z){return new Y(this,C,z)},Ie.prototype.createVertexBuffer=function(C,z,B){return new ee(this,C,z,B)},Ie.prototype.createRenderbuffer=function(C,z,B){var G=this.gl,ae=G.createRenderbuffer();return this.bindRenderbuffer.set(ae),G.renderbufferStorage(G.RENDERBUFFER,C,z,B),this.bindRenderbuffer.set(null),ae},Ie.prototype.createFramebuffer=function(C,z,B){return new Be(this,C,z,B)},Ie.prototype.clear=function(C){var z=C.color,B=C.depth,G=this.gl,ae=0;z&&(ae|=G.COLOR_BUFFER_BIT,this.clearColor.set(z),this.colorMask.set([!0,!0,!0,!0])),B!==void 0&&(ae|=G.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(B),this.depthMask.set(!0)),G.clear(ae)},Ie.prototype.setCullFace=function(C){C.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(C.mode),this.frontFace.set(C.frontFace))},Ie.prototype.setDepthMode=function(C){C.func!==this.gl.ALWAYS||C.mask?(this.depthTest.set(!0),this.depthFunc.set(C.func),this.depthMask.set(C.mask),this.depthRange.set(C.range)):this.depthTest.set(!1)},Ie.prototype.setStencilMode=function(C){C.test.func!==this.gl.ALWAYS||C.mask?(this.stencilTest.set(!0),this.stencilMask.set(C.mask),this.stencilOp.set([C.fail,C.depthFail,C.pass]),this.stencilFunc.set({func:C.test.func,ref:C.ref,mask:C.test.mask})):this.stencilTest.set(!1)},Ie.prototype.setColorMode=function(C){e.deepEqual(C.blendFunction,Pe.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(C.blendFunction),this.blendColor.set(C.blendColor)),this.colorMask.set(C.mask)},Ie.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var $e=function(C){function z(B,G,ae){var ue=this;C.call(this),this.id=B,this.dispatcher=ae,this.on("data",function(ge){ge.dataType==="source"&&ge.sourceDataType==="metadata"&&(ue._sourceLoaded=!0),ue._sourceLoaded&&!ue._paused&&ge.dataType==="source"&&ge.sourceDataType==="content"&&(ue.reload(),ue.transform&&ue.update(ue.transform))}),this.on("error",function(){ue._sourceErrored=!0}),this._source=function(ge,_e,Ee,He){var Xe=new R[_e.type](ge,_e,Ee,He);if(Xe.id!==ge)throw new Error("Expected Source id to be "+ge+" instead of "+Xe.id);return e.bindAll(["load","abort","unload","serialize","prepare"],Xe),Xe}(B,G,ae,this),this._tiles={},this._cache=new j(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.onAdd=function(B){this.map=B,this._maxTileCacheSize=B?B._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(B)},z.prototype.onRemove=function(B){this._source&&this._source.onRemove&&this._source.onRemove(B)},z.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var B in this._tiles){var G=this._tiles[B];if(G.state!=="loaded"&&G.state!=="errored")return!1}return!0},z.prototype.getSource=function(){return this._source},z.prototype.pause=function(){this._paused=!0},z.prototype.resume=function(){if(this._paused){var B=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,B&&this.reload(),this.transform&&this.update(this.transform)}},z.prototype._loadTile=function(B,G){return this._source.loadTile(B,G)},z.prototype._unloadTile=function(B){if(this._source.unloadTile)return this._source.unloadTile(B,function(){})},z.prototype._abortTile=function(B){if(this._source.abortTile)return this._source.abortTile(B,function(){})},z.prototype.serialize=function(){return this._source.serialize()},z.prototype.prepare=function(B){for(var G in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var ae=this._tiles[G];ae.upload(B),ae.prepare(this.map.style.imageManager)}},z.prototype.getIds=function(){return e.values(this._tiles).map(function(B){return B.tileID}).sort(st).map(function(B){return B.key})},z.prototype.getRenderableIds=function(B){var G=this,ae=[];for(var ue in this._tiles)this._isIdRenderable(ue,B)&&ae.push(this._tiles[ue]);return B?ae.sort(function(ge,_e){var Ee=ge.tileID,He=_e.tileID,Xe=new e.Point(Ee.canonical.x,Ee.canonical.y)._rotate(G.transform.angle),at=new e.Point(He.canonical.x,He.canonical.y)._rotate(G.transform.angle);return Ee.overscaledZ-He.overscaledZ||at.y-Xe.y||at.x-Xe.x}).map(function(ge){return ge.tileID.key}):ae.map(function(ge){return ge.tileID}).sort(st).map(function(ge){return ge.key})},z.prototype.hasRenderableParent=function(B){var G=this.findLoadedParent(B,0);return!!G&&this._isIdRenderable(G.tileID.key)},z.prototype._isIdRenderable=function(B,G){return this._tiles[B]&&this._tiles[B].hasData()&&!this._coveredTiles[B]&&(G||!this._tiles[B].holdingForFade())},z.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var B in this._cache.reset(),this._tiles)this._tiles[B].state!=="errored"&&this._reloadTile(B,"reloading")},z.prototype._reloadTile=function(B,G){var ae=this._tiles[B];ae&&(ae.state!=="loading"&&(ae.state=G),this._loadTile(ae,this._tileLoaded.bind(this,ae,B,G)))},z.prototype._tileLoaded=function(B,G,ae,ue){if(ue)return B.state="errored",void(ue.status!==404?this._source.fire(new e.ErrorEvent(ue,{tile:B})):this.update(this.transform));B.timeAdded=e.browser.now(),ae==="expired"&&(B.refreshedUponExpiration=!0),this._setTileReloadTimer(G,B),this.getSource().type==="raster-dem"&&B.dem&&this._backfillDEM(B),this._state.initializeTileState(B,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:B,coord:B.tileID}))},z.prototype._backfillDEM=function(B){for(var G=this.getRenderableIds(),ae=0;ae<G.length;ae++){var ue=G[ae];if(B.neighboringTiles&&B.neighboringTiles[ue]){var ge=this.getTileByID(ue);_e(B,ge),_e(ge,B)}}function _e(Ee,He){Ee.needsHillshadePrepare=!0;var Xe=He.tileID.canonical.x-Ee.tileID.canonical.x,at=He.tileID.canonical.y-Ee.tileID.canonical.y,_t=Math.pow(2,Ee.tileID.canonical.z),St=He.tileID.key;Xe===0&&at===0||Math.abs(at)>1||(Math.abs(Xe)>1&&(Math.abs(Xe+_t)===1?Xe+=_t:Math.abs(Xe-_t)===1&&(Xe-=_t)),He.dem&&Ee.dem&&(Ee.dem.backfillBorder(He.dem,Xe,at),Ee.neighboringTiles&&Ee.neighboringTiles[St]&&(Ee.neighboringTiles[St].backfilled=!0)))}},z.prototype.getTile=function(B){return this.getTileByID(B.key)},z.prototype.getTileByID=function(B){return this._tiles[B]},z.prototype._retainLoadedChildren=function(B,G,ae,ue){for(var ge in this._tiles){var _e=this._tiles[ge];if(!(ue[ge]||!_e.hasData()||_e.tileID.overscaledZ<=G||_e.tileID.overscaledZ>ae)){for(var Ee=_e.tileID;_e&&_e.tileID.overscaledZ>G+1;){var He=_e.tileID.scaledTo(_e.tileID.overscaledZ-1);(_e=this._tiles[He.key])&&_e.hasData()&&(Ee=He)}for(var Xe=Ee;Xe.overscaledZ>G;)if(B[(Xe=Xe.scaledTo(Xe.overscaledZ-1)).key]){ue[Ee.key]=Ee;break}}}},z.prototype.findLoadedParent=function(B,G){if(B.key in this._loadedParentTiles){var ae=this._loadedParentTiles[B.key];return ae&&ae.tileID.overscaledZ>=G?ae:null}for(var ue=B.overscaledZ-1;ue>=G;ue--){var ge=B.scaledTo(ue),_e=this._getLoadedTile(ge);if(_e)return _e}},z.prototype._getLoadedTile=function(B){var G=this._tiles[B.key];return G&&G.hasData()?G:this._cache.getByKey(B.wrapped().key)},z.prototype.updateCacheSize=function(B){var G=(Math.ceil(B.width/this._source.tileSize)+1)*(Math.ceil(B.height/this._source.tileSize)+1),ae=Math.floor(5*G),ue=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,ae):ae;this._cache.setMaxSize(ue)},z.prototype.handleWrapJump=function(B){var G=(B-(this._prevLng===void 0?B:this._prevLng))/360,ae=Math.round(G);if(this._prevLng=B,ae){var ue={};for(var ge in this._tiles){var _e=this._tiles[ge];_e.tileID=_e.tileID.unwrapTo(_e.tileID.wrap+ae),ue[_e.tileID.key]=_e}for(var Ee in this._tiles=ue,this._timers)clearTimeout(this._timers[Ee]),delete this._timers[Ee];for(var He in this._tiles){var Xe=this._tiles[He];this._setTileReloadTimer(He,Xe)}}},z.prototype.update=function(B){var G=this;if(this.transform=B,this._sourceLoaded&&!this._paused){var ae;this.updateCacheSize(B),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?ae=B.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(kr){return new e.OverscaledTileID(kr.canonical.z,kr.wrap,kr.canonical.z,kr.canonical.x,kr.canonical.y)}):(ae=B.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(ae=ae.filter(function(kr){return G._source.hasTile(kr)}))):ae=[];var ue=B.coveringZoomLevel(this._source),ge=Math.max(ue-z.maxOverzooming,this._source.minzoom),_e=Math.max(ue+z.maxUnderzooming,this._source.minzoom),Ee=this._updateRetainedTiles(ae,ue);if(dt(this._source.type)){for(var He={},Xe={},at=0,_t=Object.keys(Ee);at<_t.length;at+=1){var St=_t[at],Tt=Ee[St],kt=this._tiles[St];if(kt&&!(kt.fadeEndTime&&kt.fadeEndTime<=e.browser.now())){var bt=this.findLoadedParent(Tt,ge);bt&&(this._addTile(bt.tileID),He[bt.tileID.key]=bt.tileID),Xe[St]=Tt}}for(var Nt in this._retainLoadedChildren(Xe,ue,_e,Ee),He)Ee[Nt]||(this._coveredTiles[Nt]=!0,Ee[Nt]=He[Nt])}for(var zt in Ee)this._tiles[zt].clearFadeHold();for(var Ut=0,nr=e.keysDifference(this._tiles,Ee);Ut<nr.length;Ut+=1){var pr=nr[Ut],Mr=this._tiles[pr];Mr.hasSymbolBuckets&&!Mr.holdingForFade()?Mr.setHoldDuration(this.map._fadeDuration):Mr.hasSymbolBuckets&&!Mr.symbolFadeFinished()||this._removeTile(pr)}this._updateLoadedParentTileCache()}},z.prototype.releaseSymbolFadeTiles=function(){for(var B in this._tiles)this._tiles[B].holdingForFade()&&this._removeTile(B)},z.prototype._updateRetainedTiles=function(B,G){for(var ae={},ue={},ge=Math.max(G-z.maxOverzooming,this._source.minzoom),_e=Math.max(G+z.maxUnderzooming,this._source.minzoom),Ee={},He=0,Xe=B;He<Xe.length;He+=1){var at=Xe[He],_t=this._addTile(at);ae[at.key]=at,_t.hasData()||G<this._source.maxzoom&&(Ee[at.key]=at)}this._retainLoadedChildren(Ee,G,_e,ae);for(var St=0,Tt=B;St<Tt.length;St+=1){var kt=Tt[St],bt=this._tiles[kt.key];if(!bt.hasData()){if(G+1>this._source.maxzoom){var Nt=kt.children(this._source.maxzoom)[0],zt=this.getTile(Nt);if(zt&&zt.hasData()){ae[Nt.key]=Nt;continue}}else{var Ut=kt.children(this._source.maxzoom);if(ae[Ut[0].key]&&ae[Ut[1].key]&&ae[Ut[2].key]&&ae[Ut[3].key])continue}for(var nr=bt.wasRequested(),pr=kt.overscaledZ-1;pr>=ge;--pr){var Mr=kt.scaledTo(pr);if(ue[Mr.key]||(ue[Mr.key]=!0,!(bt=this.getTile(Mr))&&nr&&(bt=this._addTile(Mr)),bt&&(ae[Mr.key]=Mr,nr=bt.wasRequested(),bt.hasData())))break}}}return ae},z.prototype._updateLoadedParentTileCache=function(){for(var B in this._loadedParentTiles={},this._tiles){for(var G=[],ae=void 0,ue=this._tiles[B].tileID;ue.overscaledZ>0;){if(ue.key in this._loadedParentTiles){ae=this._loadedParentTiles[ue.key];break}G.push(ue.key);var ge=ue.scaledTo(ue.overscaledZ-1);if(ae=this._getLoadedTile(ge))break;ue=ge}for(var _e=0,Ee=G;_e<Ee.length;_e+=1){var He=Ee[_e];this._loadedParentTiles[He]=ae}}},z.prototype._addTile=function(B){var G=this._tiles[B.key];if(G)return G;(G=this._cache.getAndRemove(B))&&(this._setTileReloadTimer(B.key,G),G.tileID=B,this._state.initializeTileState(G,this.map?this.map.painter:null),this._cacheTimers[B.key]&&(clearTimeout(this._cacheTimers[B.key]),delete this._cacheTimers[B.key],this._setTileReloadTimer(B.key,G)));var ae=Boolean(G);return ae||(G=new e.Tile(B,this._source.tileSize*B.overscaleFactor()),this._loadTile(G,this._tileLoaded.bind(this,G,B.key,G.state))),G?(G.uses++,this._tiles[B.key]=G,ae||this._source.fire(new e.Event("dataloading",{tile:G,coord:G.tileID,dataType:"source"})),G):null},z.prototype._setTileReloadTimer=function(B,G){var ae=this;B in this._timers&&(clearTimeout(this._timers[B]),delete this._timers[B]);var ue=G.getExpiryTimeout();ue&&(this._timers[B]=setTimeout(function(){ae._reloadTile(B,"expired"),delete ae._timers[B]},ue))},z.prototype._removeTile=function(B){var G=this._tiles[B];G&&(G.uses--,delete this._tiles[B],this._timers[B]&&(clearTimeout(this._timers[B]),delete this._timers[B]),G.uses>0||(G.hasData()&&G.state!=="reloading"?this._cache.add(G.tileID,G,G.getExpiryTimeout()):(G.aborted=!0,this._abortTile(G),this._unloadTile(G))))},z.prototype.clearTiles=function(){for(var B in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(B);this._cache.reset()},z.prototype.tilesIn=function(B,G,ae){var ue=this,ge=[],_e=this.transform;if(!_e)return ge;for(var Ee=ae?_e.getCameraQueryGeometry(B):B,He=B.map(function(pr){return _e.pointCoordinate(pr)}),Xe=Ee.map(function(pr){return _e.pointCoordinate(pr)}),at=this.getIds(),_t=1/0,St=1/0,Tt=-1/0,kt=-1/0,bt=0,Nt=Xe;bt<Nt.length;bt+=1){var zt=Nt[bt];_t=Math.min(_t,zt.x),St=Math.min(St,zt.y),Tt=Math.max(Tt,zt.x),kt=Math.max(kt,zt.y)}for(var Ut=function(pr){var Mr=ue._tiles[at[pr]];if(!Mr.holdingForFade()){var kr=Mr.tileID,Qr=Math.pow(2,_e.zoom-Mr.tileID.overscaledZ),$r=G*Mr.queryPadding*e.EXTENT/Mr.tileSize/Qr,pn=[kr.getTilePoint(new e.MercatorCoordinate(_t,St)),kr.getTilePoint(new e.MercatorCoordinate(Tt,kt))];if(pn[0].x-$r<e.EXTENT&&pn[0].y-$r<e.EXTENT&&pn[1].x+$r>=0&&pn[1].y+$r>=0){var sn=He.map(function(Wn){return kr.getTilePoint(Wn)}),Un=Xe.map(function(Wn){return kr.getTilePoint(Wn)});ge.push({tile:Mr,tileID:kr,queryGeometry:sn,cameraQueryGeometry:Un,scale:Qr})}}},nr=0;nr<at.length;nr++)Ut(nr);return ge},z.prototype.getVisibleCoordinates=function(B){for(var G=this,ae=this.getRenderableIds(B).map(function(Ee){return G._tiles[Ee].tileID}),ue=0,ge=ae;ue<ge.length;ue+=1){var _e=ge[ue];_e.posMatrix=this.transform.calculatePosMatrix(_e.toUnwrapped())}return ae},z.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(dt(this._source.type))for(var B in this._tiles){var G=this._tiles[B];if(G.fadeEndTime!==void 0&&G.fadeEndTime>=e.browser.now())return!0}return!1},z.prototype.setFeatureState=function(B,G,ae){B=B||"_geojsonTileLayer",this._state.updateState(B,G,ae)},z.prototype.removeFeatureState=function(B,G,ae){B=B||"_geojsonTileLayer",this._state.removeFeatureState(B,G,ae)},z.prototype.getFeatureState=function(B,G){return B=B||"_geojsonTileLayer",this._state.getState(B,G)},z.prototype.setDependencies=function(B,G,ae){var ue=this._tiles[B];ue&&ue.setDependencies(G,ae)},z.prototype.reloadTilesForDependencies=function(B,G){for(var ae in this._tiles)this._tiles[ae].hasDependency(B,G)&&this._reloadTile(ae,"reloading");this._cache.filter(function(ue){return!ue.hasDependency(B,G)})},z}(e.Evented);function st(C,z){var B=Math.abs(2*C.wrap)-+(C.wrap<0),G=Math.abs(2*z.wrap)-+(z.wrap<0);return C.overscaledZ-z.overscaledZ||G-B||z.canonical.y-C.canonical.y||z.canonical.x-C.canonical.x}function dt(C){return C==="raster"||C==="image"||C==="video"}function ut(){return new e.window.Worker(ce.workerUrl)}$e.maxOverzooming=10,$e.maxUnderzooming=3;var Lt="mapboxgl_preloaded_worker_pool",lt=function(){this.active={}};lt.prototype.acquire=function(C){if(!this.workers)for(this.workers=[];this.workers.length<lt.workerCount;)this.workers.push(new ut);return this.active[C]=!0,this.workers.slice()},lt.prototype.release=function(C){delete this.active[C],this.numActive()===0&&(this.workers.forEach(function(z){z.terminate()}),this.workers=null)},lt.prototype.isPreloaded=function(){return!!this.active[Lt]},lt.prototype.numActive=function(){return Object.keys(this.active).length};var Ct,Pt=Math.floor(e.browser.hardwareConcurrency/2);function Ke(){return Ct||(Ct=new lt),Ct}function mt(C,z){var B={};for(var G in C)G!=="ref"&&(B[G]=C[G]);return e.refProperties.forEach(function(ae){ae in z&&(B[ae]=z[ae])}),B}function Dt(C){C=C.slice();for(var z=Object.create(null),B=0;B<C.length;B++)z[C[B].id]=C[B];for(var G=0;G<C.length;G++)"ref"in C[G]&&(C[G]=mt(C[G],z[C[G].ref]));return C}lt.workerCount=Math.max(Math.min(Pt,6),1);var Bt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Zt(C,z,B){B.push({command:Bt.addSource,args:[C,z[C]]})}function Re(C,z,B){z.push({command:Bt.removeSource,args:[C]}),B[C]=!0}function ct(C,z,B,G){Re(C,B,G),Zt(C,z,B)}function wt(C,z,B){var G;for(G in C[B])if(C[B].hasOwnProperty(G)&&G!=="data"&&!e.deepEqual(C[B][G],z[B][G]))return!1;for(G in z[B])if(z[B].hasOwnProperty(G)&&G!=="data"&&!e.deepEqual(C[B][G],z[B][G]))return!1;return!0}function Rt(C,z,B,G,ae,ue){var ge;for(ge in z=z||{},C=C||{})C.hasOwnProperty(ge)&&(e.deepEqual(C[ge],z[ge])||B.push({command:ue,args:[G,ge,z[ge],ae]}));for(ge in z)z.hasOwnProperty(ge)&&!C.hasOwnProperty(ge)&&(e.deepEqual(C[ge],z[ge])||B.push({command:ue,args:[G,ge,z[ge],ae]}))}function Vt(C){return C.id}function rr(C,z){return C[z.id]=z,C}function qt(C,z){if(!C)return[{command:Bt.setStyle,args:[z]}];var B=[];try{if(!e.deepEqual(C.version,z.version))return[{command:Bt.setStyle,args:[z]}];e.deepEqual(C.center,z.center)||B.push({command:Bt.setCenter,args:[z.center]}),e.deepEqual(C.zoom,z.zoom)||B.push({command:Bt.setZoom,args:[z.zoom]}),e.deepEqual(C.bearing,z.bearing)||B.push({command:Bt.setBearing,args:[z.bearing]}),e.deepEqual(C.pitch,z.pitch)||B.push({command:Bt.setPitch,args:[z.pitch]}),e.deepEqual(C.sprite,z.sprite)||B.push({command:Bt.setSprite,args:[z.sprite]}),e.deepEqual(C.glyphs,z.glyphs)||B.push({command:Bt.setGlyphs,args:[z.glyphs]}),e.deepEqual(C.transition,z.transition)||B.push({command:Bt.setTransition,args:[z.transition]}),e.deepEqual(C.light,z.light)||B.push({command:Bt.setLight,args:[z.light]});var G={},ae=[];(function(ge,_e,Ee,He){var Xe;for(Xe in _e=_e||{},ge=ge||{})ge.hasOwnProperty(Xe)&&(_e.hasOwnProperty(Xe)||Re(Xe,Ee,He));for(Xe in _e)_e.hasOwnProperty(Xe)&&(ge.hasOwnProperty(Xe)?e.deepEqual(ge[Xe],_e[Xe])||(ge[Xe].type==="geojson"&&_e[Xe].type==="geojson"&&wt(ge,_e,Xe)?Ee.push({command:Bt.setGeoJSONSourceData,args:[Xe,_e[Xe].data]}):ct(Xe,_e,Ee,He)):Zt(Xe,_e,Ee))})(C.sources,z.sources,ae,G);var ue=[];C.layers&&C.layers.forEach(function(ge){G[ge.source]?B.push({command:Bt.removeLayer,args:[ge.id]}):ue.push(ge)}),B=B.concat(ae),function(ge,_e,Ee){_e=_e||[];var He,Xe,at,_t,St,Tt,kt,bt=(ge=ge||[]).map(Vt),Nt=_e.map(Vt),zt=ge.reduce(rr,{}),Ut=_e.reduce(rr,{}),nr=bt.slice(),pr=Object.create(null);for(He=0,Xe=0;He<bt.length;He++)at=bt[He],Ut.hasOwnProperty(at)?Xe++:(Ee.push({command:Bt.removeLayer,args:[at]}),nr.splice(nr.indexOf(at,Xe),1));for(He=0,Xe=0;He<Nt.length;He++)at=Nt[Nt.length-1-He],nr[nr.length-1-He]!==at&&(zt.hasOwnProperty(at)?(Ee.push({command:Bt.removeLayer,args:[at]}),nr.splice(nr.lastIndexOf(at,nr.length-Xe),1)):Xe++,Tt=nr[nr.length-He],Ee.push({command:Bt.addLayer,args:[Ut[at],Tt]}),nr.splice(nr.length-He,0,at),pr[at]=!0);for(He=0;He<Nt.length;He++)if(_t=zt[at=Nt[He]],St=Ut[at],!pr[at]&&!e.deepEqual(_t,St))if(e.deepEqual(_t.source,St.source)&&e.deepEqual(_t["source-layer"],St["source-layer"])&&e.deepEqual(_t.type,St.type)){for(kt in Rt(_t.layout,St.layout,Ee,at,null,Bt.setLayoutProperty),Rt(_t.paint,St.paint,Ee,at,null,Bt.setPaintProperty),e.deepEqual(_t.filter,St.filter)||Ee.push({command:Bt.setFilter,args:[at,St.filter]}),e.deepEqual(_t.minzoom,St.minzoom)&&e.deepEqual(_t.maxzoom,St.maxzoom)||Ee.push({command:Bt.setLayerZoomRange,args:[at,St.minzoom,St.maxzoom]}),_t)_t.hasOwnProperty(kt)&&kt!=="layout"&&kt!=="paint"&&kt!=="filter"&&kt!=="metadata"&&kt!=="minzoom"&&kt!=="maxzoom"&&(kt.indexOf("paint.")===0?Rt(_t[kt],St[kt],Ee,at,kt.slice(6),Bt.setPaintProperty):e.deepEqual(_t[kt],St[kt])||Ee.push({command:Bt.setLayerProperty,args:[at,kt,St[kt]]}));for(kt in St)St.hasOwnProperty(kt)&&!_t.hasOwnProperty(kt)&&kt!=="layout"&&kt!=="paint"&&kt!=="filter"&&kt!=="metadata"&&kt!=="minzoom"&&kt!=="maxzoom"&&(kt.indexOf("paint.")===0?Rt(_t[kt],St[kt],Ee,at,kt.slice(6),Bt.setPaintProperty):e.deepEqual(_t[kt],St[kt])||Ee.push({command:Bt.setLayerProperty,args:[at,kt,St[kt]]}))}else Ee.push({command:Bt.removeLayer,args:[at]}),Tt=nr[nr.lastIndexOf(at)+1],Ee.push({command:Bt.addLayer,args:[St,Tt]})}(ue,z.layers,B)}catch(ge){console.warn("Unable to compute style diff:",ge),B=[{command:Bt.setStyle,args:[z]}]}return B}var Jt=function(C,z){this.reset(C,z)};Jt.prototype.reset=function(C,z){this.points=C||[],this._distances=[0];for(var B=1;B<this.points.length;B++)this._distances[B]=this._distances[B-1]+this.points[B].dist(this.points[B-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(z||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Jt.prototype.lerp=function(C){if(this.points.length===1)return this.points[0];C=e.clamp(C,0,1);for(var z=1,B=this._distances[z],G=C*this.paddedLength+this.padding;B<G&&z<this._distances.length;)B=this._distances[++z];var ae=z-1,ue=this._distances[ae],ge=B-ue,_e=ge>0?(G-ue)/ge:0;return this.points[ae].mult(1-_e).add(this.points[z].mult(_e))};var or=function(C,z,B){var G=this.boxCells=[],ae=this.circleCells=[];this.xCellCount=Math.ceil(C/B),this.yCellCount=Math.ceil(z/B);for(var ue=0;ue<this.xCellCount*this.yCellCount;ue++)G.push([]),ae.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=C,this.height=z,this.xScale=this.xCellCount/C,this.yScale=this.yCellCount/z,this.boxUid=0,this.circleUid=0};function gr(C,z,B,G,ae){var ue=e.create();return z?(e.scale(ue,ue,[1/ae,1/ae,1]),B||e.rotateZ(ue,ue,G.angle)):e.multiply(ue,G.labelPlaneMatrix,C),ue}function dr(C,z,B,G,ae){if(z){var ue=e.clone(C);return e.scale(ue,ue,[ae,ae,1]),B||e.rotateZ(ue,ue,-G.angle),ue}return G.glCoordMatrix}function ur(C,z){var B=[C.x,C.y,0,1];tn(B,B,z);var G=B[3];return{point:new e.Point(B[0]/G,B[1]/G),signedDistanceFromCamera:G}}function cr(C,z){return .5+C/z*.5}function mr(C,z){var B=C[0]/C[3],G=C[1]/C[3];return B>=-z[0]&&B<=z[0]&&G>=-z[1]&&G<=z[1]}function Dr(C,z,B,G,ae,ue,ge,_e){var Ee=G?C.textSizeData:C.iconSizeData,He=e.evaluateSizeForZoom(Ee,B.transform.zoom),Xe=[256/B.width*2+1,256/B.height*2+1],at=G?C.text.dynamicLayoutVertexArray:C.icon.dynamicLayoutVertexArray;at.clear();for(var _t=C.lineVertexArray,St=G?C.text.placedSymbolArray:C.icon.placedSymbolArray,Tt=B.transform.width/B.transform.height,kt=!1,bt=0;bt<St.length;bt++){var Nt=St.get(bt);if(Nt.hidden||Nt.writingMode===e.WritingMode.vertical&&!kt)An(Nt.numGlyphs,at);else{kt=!1;var zt=[Nt.anchorX,Nt.anchorY,0,1];if(e.transformMat4(zt,zt,z),mr(zt,Xe)){var Ut=zt[3],nr=cr(B.transform.cameraToCenterDistance,Ut),pr=e.evaluateSizeForFeature(Ee,He,Nt),Mr=ge?pr/nr:pr*nr,kr=new e.Point(Nt.anchorX,Nt.anchorY),Qr=ur(kr,ae).point,$r={},pn=Kr(Nt,Mr,!1,_e,z,ae,ue,C.glyphOffsetArray,_t,at,Qr,kr,$r,Tt);kt=pn.useVertical,(pn.notEnoughRoom||kt||pn.needsFlipping&&Kr(Nt,Mr,!0,_e,z,ae,ue,C.glyphOffsetArray,_t,at,Qr,kr,$r,Tt).notEnoughRoom)&&An(Nt.numGlyphs,at)}else An(Nt.numGlyphs,at)}}G?C.text.dynamicLayoutVertexBuffer.updateData(at):C.icon.dynamicLayoutVertexBuffer.updateData(at)}function yr(C,z,B,G,ae,ue,ge,_e,Ee,He,Xe){var at=_e.glyphStartIndex+_e.numGlyphs,_t=_e.lineStartIndex,St=_e.lineStartIndex+_e.lineLength,Tt=z.getoffsetX(_e.glyphStartIndex),kt=z.getoffsetX(at-1),bt=Ln(C*Tt,B,G,ae,ue,ge,_e.segment,_t,St,Ee,He,Xe);if(!bt)return null;var Nt=Ln(C*kt,B,G,ae,ue,ge,_e.segment,_t,St,Ee,He,Xe);return Nt?{first:bt,last:Nt}:null}function Br(C,z,B,G){return C===e.WritingMode.horizontal&&Math.abs(B.y-z.y)>Math.abs(B.x-z.x)*G?{useVertical:!0}:(C===e.WritingMode.vertical?z.y<B.y:z.x>B.x)?{needsFlipping:!0}:null}function Kr(C,z,B,G,ae,ue,ge,_e,Ee,He,Xe,at,_t,St){var Tt,kt=z/24,bt=C.lineOffsetX*kt,Nt=C.lineOffsetY*kt;if(C.numGlyphs>1){var zt=C.glyphStartIndex+C.numGlyphs,Ut=C.lineStartIndex,nr=C.lineStartIndex+C.lineLength,pr=yr(kt,_e,bt,Nt,B,Xe,at,C,Ee,ue,_t);if(!pr)return{notEnoughRoom:!0};var Mr=ur(pr.first.point,ge).point,kr=ur(pr.last.point,ge).point;if(G&&!B){var Qr=Br(C.writingMode,Mr,kr,St);if(Qr)return Qr}Tt=[pr.first];for(var $r=C.glyphStartIndex+1;$r<zt-1;$r++)Tt.push(Ln(kt*_e.getoffsetX($r),bt,Nt,B,Xe,at,C.segment,Ut,nr,Ee,ue,_t));Tt.push(pr.last)}else{if(G&&!B){var pn=ur(at,ae).point,sn=C.lineStartIndex+C.segment+1,Un=new e.Point(Ee.getx(sn),Ee.gety(sn)),Wn=ur(Un,ae),li=Wn.signedDistanceFromCamera>0?Wn.point:an(at,Un,pn,1,ae),Hr=Br(C.writingMode,pn,li,St);if(Hr)return Hr}var kn=Ln(kt*_e.getoffsetX(C.glyphStartIndex),bt,Nt,B,Xe,at,C.segment,C.lineStartIndex,C.lineStartIndex+C.lineLength,Ee,ue,_t);if(!kn)return{notEnoughRoom:!0};Tt=[kn]}for(var Zn=0,qn=Tt;Zn<qn.length;Zn+=1){var ei=qn[Zn];e.addDynamicAttributes(He,ei.point,ei.angle)}return{}}function an(C,z,B,G,ae){var ue=ur(C.add(C.sub(z)._unit()),ae).point,ge=B.sub(ue);return B.add(ge._mult(G/ge.mag()))}function Ln(C,z,B,G,ae,ue,ge,_e,Ee,He,Xe,at){var _t=G?C-z:C+z,St=_t>0?1:-1,Tt=0;G&&(St*=-1,Tt=Math.PI),St<0&&(Tt+=Math.PI);for(var kt=St>0?_e+ge:_e+ge+1,bt=ae,Nt=ae,zt=0,Ut=0,nr=Math.abs(_t),pr=[];zt+Ut<=nr;){if((kt+=St)<_e||kt>=Ee)return null;if(Nt=bt,pr.push(bt),(bt=at[kt])===void 0){var Mr=new e.Point(He.getx(kt),He.gety(kt)),kr=ur(Mr,Xe);if(kr.signedDistanceFromCamera>0)bt=at[kt]=kr.point;else{var Qr=kt-St;bt=an(zt===0?ue:new e.Point(He.getx(Qr),He.gety(Qr)),Mr,Nt,nr-zt+1,Xe)}}zt+=Ut,Ut=Nt.dist(bt)}var $r=(nr-zt)/Ut,pn=bt.sub(Nt),sn=pn.mult($r)._add(Nt);sn._add(pn._unit()._perp()._mult(B*St));var Un=Tt+Math.atan2(bt.y-Nt.y,bt.x-Nt.x);return pr.push(sn),{point:sn,angle:Un,path:pr}}or.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},or.prototype.insert=function(C,z,B,G,ae){this._forEachCell(z,B,G,ae,this._insertBoxCell,this.boxUid++),this.boxKeys.push(C),this.bboxes.push(z),this.bboxes.push(B),this.bboxes.push(G),this.bboxes.push(ae)},or.prototype.insertCircle=function(C,z,B,G){this._forEachCell(z-G,B-G,z+G,B+G,this._insertCircleCell,this.circleUid++),this.circleKeys.push(C),this.circles.push(z),this.circles.push(B),this.circles.push(G)},or.prototype._insertBoxCell=function(C,z,B,G,ae,ue){this.boxCells[ae].push(ue)},or.prototype._insertCircleCell=function(C,z,B,G,ae,ue){this.circleCells[ae].push(ue)},or.prototype._query=function(C,z,B,G,ae,ue){if(B<0||C>this.width||G<0||z>this.height)return!ae&&[];var ge=[];if(C<=0&&z<=0&&this.width<=B&&this.height<=G){if(ae)return!0;for(var _e=0;_e<this.boxKeys.length;_e++)ge.push({key:this.boxKeys[_e],x1:this.bboxes[4*_e],y1:this.bboxes[4*_e+1],x2:this.bboxes[4*_e+2],y2:this.bboxes[4*_e+3]});for(var Ee=0;Ee<this.circleKeys.length;Ee++){var He=this.circles[3*Ee],Xe=this.circles[3*Ee+1],at=this.circles[3*Ee+2];ge.push({key:this.circleKeys[Ee],x1:He-at,y1:Xe-at,x2:He+at,y2:Xe+at})}return ue?ge.filter(ue):ge}var _t={hitTest:ae,seenUids:{box:{},circle:{}}};return this._forEachCell(C,z,B,G,this._queryCell,ge,_t,ue),ae?ge.length>0:ge},or.prototype._queryCircle=function(C,z,B,G,ae){var ue=C-B,ge=C+B,_e=z-B,Ee=z+B;if(ge<0||ue>this.width||Ee<0||_e>this.height)return!G&&[];var He=[],Xe={hitTest:G,circle:{x:C,y:z,radius:B},seenUids:{box:{},circle:{}}};return this._forEachCell(ue,_e,ge,Ee,this._queryCellCircle,He,Xe,ae),G?He.length>0:He},or.prototype.query=function(C,z,B,G,ae){return this._query(C,z,B,G,!1,ae)},or.prototype.hitTest=function(C,z,B,G,ae){return this._query(C,z,B,G,!0,ae)},or.prototype.hitTestCircle=function(C,z,B,G){return this._queryCircle(C,z,B,!0,G)},or.prototype._queryCell=function(C,z,B,G,ae,ue,ge,_e){var Ee=ge.seenUids,He=this.boxCells[ae];if(He!==null)for(var Xe=this.bboxes,at=0,_t=He;at<_t.length;at+=1){var St=_t[at];if(!Ee.box[St]){Ee.box[St]=!0;var Tt=4*St;if(C<=Xe[Tt+2]&&z<=Xe[Tt+3]&&B>=Xe[Tt+0]&&G>=Xe[Tt+1]&&(!_e||_e(this.boxKeys[St]))){if(ge.hitTest)return ue.push(!0),!0;ue.push({key:this.boxKeys[St],x1:Xe[Tt],y1:Xe[Tt+1],x2:Xe[Tt+2],y2:Xe[Tt+3]})}}}var kt=this.circleCells[ae];if(kt!==null)for(var bt=this.circles,Nt=0,zt=kt;Nt<zt.length;Nt+=1){var Ut=zt[Nt];if(!Ee.circle[Ut]){Ee.circle[Ut]=!0;var nr=3*Ut;if(this._circleAndRectCollide(bt[nr],bt[nr+1],bt[nr+2],C,z,B,G)&&(!_e||_e(this.circleKeys[Ut]))){if(ge.hitTest)return ue.push(!0),!0;var pr=bt[nr],Mr=bt[nr+1],kr=bt[nr+2];ue.push({key:this.circleKeys[Ut],x1:pr-kr,y1:Mr-kr,x2:pr+kr,y2:Mr+kr})}}}},or.prototype._queryCellCircle=function(C,z,B,G,ae,ue,ge,_e){var Ee=ge.circle,He=ge.seenUids,Xe=this.boxCells[ae];if(Xe!==null)for(var at=this.bboxes,_t=0,St=Xe;_t<St.length;_t+=1){var Tt=St[_t];if(!He.box[Tt]){He.box[Tt]=!0;var kt=4*Tt;if(this._circleAndRectCollide(Ee.x,Ee.y,Ee.radius,at[kt+0],at[kt+1],at[kt+2],at[kt+3])&&(!_e||_e(this.boxKeys[Tt])))return ue.push(!0),!0}}var bt=this.circleCells[ae];if(bt!==null)for(var Nt=this.circles,zt=0,Ut=bt;zt<Ut.length;zt+=1){var nr=Ut[zt];if(!He.circle[nr]){He.circle[nr]=!0;var pr=3*nr;if(this._circlesCollide(Nt[pr],Nt[pr+1],Nt[pr+2],Ee.x,Ee.y,Ee.radius)&&(!_e||_e(this.circleKeys[nr])))return ue.push(!0),!0}}},or.prototype._forEachCell=function(C,z,B,G,ae,ue,ge,_e){for(var Ee=this._convertToXCellCoord(C),He=this._convertToYCellCoord(z),Xe=this._convertToXCellCoord(B),at=this._convertToYCellCoord(G),_t=Ee;_t<=Xe;_t++)for(var St=He;St<=at;St++){var Tt=this.xCellCount*St+_t;if(ae.call(this,C,z,B,G,Tt,ue,ge,_e))return}},or.prototype._convertToXCellCoord=function(C){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(C*this.xScale)))},or.prototype._convertToYCellCoord=function(C){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(C*this.yScale)))},or.prototype._circlesCollide=function(C,z,B,G,ae,ue){var ge=G-C,_e=ae-z,Ee=B+ue;return Ee*Ee>ge*ge+_e*_e},or.prototype._circleAndRectCollide=function(C,z,B,G,ae,ue,ge){var _e=(ue-G)/2,Ee=Math.abs(C-(G+_e));if(Ee>_e+B)return!1;var He=(ge-ae)/2,Xe=Math.abs(z-(ae+He));if(Xe>He+B)return!1;if(Ee<=_e||Xe<=He)return!0;var at=Ee-_e,_t=Xe-He;return at*at+_t*_t<=B*B};var Pn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function An(C,z){for(var B=0;B<C;B++){var G=z.length;z.resize(G+4),z.float32.set(Pn,3*G)}}function tn(C,z,B){var G=z[0],ae=z[1];return C[0]=B[0]*G+B[4]*ae+B[12],C[1]=B[1]*G+B[5]*ae+B[13],C[3]=B[3]*G+B[7]*ae+B[15],C}var zr=function(C,z,B){z===void 0&&(z=new or(C.width+200,C.height+200,25)),B===void 0&&(B=new or(C.width+200,C.height+200,25)),this.transform=C,this.grid=z,this.ignoredGrid=B,this.pitchfactor=Math.cos(C._pitch)*C.cameraToCenterDistance,this.screenRightBoundary=C.width+100,this.screenBottomBoundary=C.height+100,this.gridRightBoundary=C.width+200,this.gridBottomBoundary=C.height+200};function Ar(C,z,B){return z*(e.EXTENT/(C.tileSize*Math.pow(2,B-C.tileID.overscaledZ)))}zr.prototype.placeCollisionBox=function(C,z,B,G,ae){var ue=this.projectAndGetPerspectiveRatio(G,C.anchorPointX,C.anchorPointY),ge=B*ue.perspectiveRatio,_e=C.x1*ge+ue.point.x,Ee=C.y1*ge+ue.point.y,He=C.x2*ge+ue.point.x,Xe=C.y2*ge+ue.point.y;return!this.isInsideGrid(_e,Ee,He,Xe)||!z&&this.grid.hitTest(_e,Ee,He,Xe,ae)?{box:[],offscreen:!1}:{box:[_e,Ee,He,Xe],offscreen:this.isOffscreen(_e,Ee,He,Xe)}},zr.prototype.placeCollisionCircles=function(C,z,B,G,ae,ue,ge,_e,Ee,He,Xe,at,_t){var St=[],Tt=new e.Point(z.anchorX,z.anchorY),kt=ur(Tt,ue),bt=cr(this.transform.cameraToCenterDistance,kt.signedDistanceFromCamera),Nt=(He?ae/bt:ae*bt)/e.ONE_EM,zt=ur(Tt,ge).point,Ut=yr(Nt,G,z.lineOffsetX*Nt,z.lineOffsetY*Nt,!1,zt,Tt,z,B,ge,{}),nr=!1,pr=!1,Mr=!0;if(Ut){for(var kr=.5*at*bt+_t,Qr=new e.Point(-100,-100),$r=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),pn=new Jt,sn=Ut.first,Un=Ut.last,Wn=[],li=sn.path.length-1;li>=1;li--)Wn.push(sn.path[li]);for(var Hr=1;Hr<Un.path.length;Hr++)Wn.push(Un.path[Hr]);var kn=2.5*kr;if(_e){var Zn=Wn.map(function(_o){return ur(_o,_e)});Wn=Zn.some(function(_o){return _o.signedDistanceFromCamera<=0})?[]:Zn.map(function(_o){return _o.point})}var qn=[];if(Wn.length>0){for(var ei=Wn[0].clone(),ui=Wn[0].clone(),ki=1;ki<Wn.length;ki++)ei.x=Math.min(ei.x,Wn[ki].x),ei.y=Math.min(ei.y,Wn[ki].y),ui.x=Math.max(ui.x,Wn[ki].x),ui.y=Math.max(ui.y,Wn[ki].y);qn=ei.x>=Qr.x&&ui.x<=$r.x&&ei.y>=Qr.y&&ui.y<=$r.y?[Wn]:ui.x<Qr.x||ei.x>$r.x||ui.y<Qr.y||ei.y>$r.y?[]:e.clipLine([Wn],Qr.x,Qr.y,$r.x,$r.y)}for(var Jn=0,yi=qn;Jn<yi.length;Jn+=1){var mi=yi[Jn];pn.reset(mi,.25*kr);var Ei=0;Ei=pn.length<=.5*kr?1:Math.ceil(pn.paddedLength/kn)+1;for(var xi=0;xi<Ei;xi++){var Li=xi/Math.max(Ei-1,1),Bi=pn.lerp(Li),ca=Bi.x+100,Ia=Bi.y+100;St.push(ca,Ia,kr,0);var Oa=ca-kr,la=Ia-kr,Aa=ca+kr,ma=Ia+kr;if(Mr=Mr&&this.isOffscreen(Oa,la,Aa,ma),pr=pr||this.isInsideGrid(Oa,la,Aa,ma),!C&&this.grid.hitTestCircle(ca,Ia,kr,Xe)&&(nr=!0,!Ee))return{circles:[],offscreen:!1,collisionDetected:nr}}}}return{circles:!Ee&&nr||!pr?[]:St,offscreen:Mr,collisionDetected:nr}},zr.prototype.queryRenderedSymbols=function(C){if(C.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var z=[],B=1/0,G=1/0,ae=-1/0,ue=-1/0,ge=0,_e=C;ge<_e.length;ge+=1){var Ee=_e[ge],He=new e.Point(Ee.x+100,Ee.y+100);B=Math.min(B,He.x),G=Math.min(G,He.y),ae=Math.max(ae,He.x),ue=Math.max(ue,He.y),z.push(He)}for(var Xe={},at={},_t=0,St=this.grid.query(B,G,ae,ue).concat(this.ignoredGrid.query(B,G,ae,ue));_t<St.length;_t+=1){var Tt=St[_t],kt=Tt.key;if(Xe[kt.bucketInstanceId]===void 0&&(Xe[kt.bucketInstanceId]={}),!Xe[kt.bucketInstanceId][kt.featureIndex]){var bt=[new e.Point(Tt.x1,Tt.y1),new e.Point(Tt.x2,Tt.y1),new e.Point(Tt.x2,Tt.y2),new e.Point(Tt.x1,Tt.y2)];e.polygonIntersectsPolygon(z,bt)&&(Xe[kt.bucketInstanceId][kt.featureIndex]=!0,at[kt.bucketInstanceId]===void 0&&(at[kt.bucketInstanceId]=[]),at[kt.bucketInstanceId].push(kt.featureIndex))}}return at},zr.prototype.insertCollisionBox=function(C,z,B,G,ae){var ue={bucketInstanceId:B,featureIndex:G,collisionGroupID:ae};(z?this.ignoredGrid:this.grid).insert(ue,C[0],C[1],C[2],C[3])},zr.prototype.insertCollisionCircles=function(C,z,B,G,ae){for(var ue=z?this.ignoredGrid:this.grid,ge={bucketInstanceId:B,featureIndex:G,collisionGroupID:ae},_e=0;_e<C.length;_e+=4)ue.insertCircle(ge,C[_e],C[_e+1],C[_e+2])},zr.prototype.projectAndGetPerspectiveRatio=function(C,z,B){var G=[z,B,0,1];return tn(G,G,C),{point:new e.Point((G[0]/G[3]+1)/2*this.transform.width+100,(-G[1]/G[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/G[3]*.5}},zr.prototype.isOffscreen=function(C,z,B,G){return B<100||C>=this.screenRightBoundary||G<100||z>this.screenBottomBoundary},zr.prototype.isInsideGrid=function(C,z,B,G){return B>=0&&C<this.gridRightBoundary&&G>=0&&z<this.gridBottomBoundary},zr.prototype.getViewportMatrix=function(){var C=e.identity([]);return e.translate(C,C,[-100,-100,0]),C};var qr=function(C,z,B,G){this.opacity=C?Math.max(0,Math.min(1,C.opacity+(C.placed?z:-z))):G&&B?1:0,this.placed=B};qr.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var On=function(C,z,B,G,ae){this.text=new qr(C?C.text:null,z,B,ae),this.icon=new qr(C?C.icon:null,z,G,ae)};On.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Fr=function(C,z,B){this.text=C,this.icon=z,this.skipFade=B},on=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},Mn=function(C,z,B,G,ae){this.bucketInstanceId=C,this.featureIndex=z,this.sourceLayerIndex=B,this.bucketIndex=G,this.tileID=ae},bn=function(C){this.crossSourceCollisions=C,this.maxGroupID=0,this.collisionGroups={}};function Dn(C,z,B,G,ae){var ue=e.getAnchorAlignment(C),ge=-(ue.horizontalAlign-.5)*z,_e=-(ue.verticalAlign-.5)*B,Ee=e.evaluateVariableOffset(C,G);return new e.Point(ge+Ee[0]*ae,_e+Ee[1]*ae)}function tr(C,z,B,G,ae,ue){var ge=C.x1,_e=C.x2,Ee=C.y1,He=C.y2,Xe=C.anchorPointX,at=C.anchorPointY,_t=new e.Point(z,B);return G&&_t._rotate(ae?ue:-ue),{x1:ge+_t.x,y1:Ee+_t.y,x2:_e+_t.x,y2:He+_t.y,anchorPointX:Xe,anchorPointY:at}}bn.prototype.get=function(C){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[C]){var z=++this.maxGroupID;this.collisionGroups[C]={ID:z,predicate:function(B){return B.collisionGroupID===z}}}return this.collisionGroups[C]};var Ot=function(C,z,B,G){this.transform=C.clone(),this.collisionIndex=new zr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=z,this.retainedQueryData={},this.collisionGroups=new bn(B),this.collisionCircleArrays={},this.prevPlacement=G,G&&(G.prevPlacement=void 0),this.placedOrientations={}};function Ht(C,z,B,G,ae){C.emplaceBack(z?1:0,B?1:0,G||0,ae||0),C.emplaceBack(z?1:0,B?1:0,G||0,ae||0),C.emplaceBack(z?1:0,B?1:0,G||0,ae||0),C.emplaceBack(z?1:0,B?1:0,G||0,ae||0)}Ot.prototype.getBucketParts=function(C,z,B,G){var ae=B.getBucket(z),ue=B.latestFeatureIndex;if(ae&&ue&&z.id===ae.layerIds[0]){var ge=B.collisionBoxArray,_e=ae.layers[0].layout,Ee=Math.pow(2,this.transform.zoom-B.tileID.overscaledZ),He=B.tileSize/e.EXTENT,Xe=this.transform.calculatePosMatrix(B.tileID.toUnwrapped()),at=_e.get("text-pitch-alignment")==="map",_t=_e.get("text-rotation-alignment")==="map",St=Ar(B,1,this.transform.zoom),Tt=gr(Xe,at,_t,this.transform,St),kt=null;if(at){var bt=dr(Xe,at,_t,this.transform,St);kt=e.multiply([],this.transform.labelPlaneMatrix,bt)}this.retainedQueryData[ae.bucketInstanceId]=new Mn(ae.bucketInstanceId,ue,ae.sourceLayerIndex,ae.index,B.tileID);var Nt={bucket:ae,layout:_e,posMatrix:Xe,textLabelPlaneMatrix:Tt,labelToScreenMatrix:kt,scale:Ee,textPixelRatio:He,holdingForFade:B.holdingForFade(),collisionBoxArray:ge,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(ae.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(ae.sourceID)};if(G)for(var zt=0,Ut=ae.sortKeyRanges;zt<Ut.length;zt+=1){var nr=Ut[zt],pr=nr.sortKey,Mr=nr.symbolInstanceStart,kr=nr.symbolInstanceEnd;C.push({sortKey:pr,symbolInstanceStart:Mr,symbolInstanceEnd:kr,parameters:Nt})}else C.push({symbolInstanceStart:0,symbolInstanceEnd:ae.symbolInstances.length,parameters:Nt})}},Ot.prototype.attemptAnchorPlacement=function(C,z,B,G,ae,ue,ge,_e,Ee,He,Xe,at,_t,St,Tt){var kt,bt=[at.textOffset0,at.textOffset1],Nt=Dn(C,B,G,bt,ae),zt=this.collisionIndex.placeCollisionBox(tr(z,Nt.x,Nt.y,ue,ge,this.transform.angle),Xe,_e,Ee,He.predicate);if(!(Tt&&this.collisionIndex.placeCollisionBox(tr(Tt,Nt.x,Nt.y,ue,ge,this.transform.angle),Xe,_e,Ee,He.predicate).box.length===0)&&zt.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[at.crossTileID]&&this.prevPlacement.placements[at.crossTileID]&&this.prevPlacement.placements[at.crossTileID].text&&(kt=this.prevPlacement.variableOffsets[at.crossTileID].anchor),this.variableOffsets[at.crossTileID]={textOffset:bt,width:B,height:G,anchor:C,textBoxScale:ae,prevAnchor:kt},this.markUsedJustification(_t,C,at,St),_t.allowVerticalPlacement&&(this.markUsedOrientation(_t,St,at),this.placedOrientations[at.crossTileID]=St),{shift:Nt,placedGlyphBoxes:zt}},Ot.prototype.placeLayerBucketPart=function(C,z,B){var G=this,ae=C.parameters,ue=ae.bucket,ge=ae.layout,_e=ae.posMatrix,Ee=ae.textLabelPlaneMatrix,He=ae.labelToScreenMatrix,Xe=ae.textPixelRatio,at=ae.holdingForFade,_t=ae.collisionBoxArray,St=ae.partiallyEvaluatedTextSize,Tt=ae.collisionGroup,kt=ge.get("text-optional"),bt=ge.get("icon-optional"),Nt=ge.get("text-allow-overlap"),zt=ge.get("icon-allow-overlap"),Ut=ge.get("text-rotation-alignment")==="map",nr=ge.get("text-pitch-alignment")==="map",pr=ge.get("icon-text-fit")!=="none",Mr=ge.get("symbol-z-order")==="viewport-y",kr=Nt&&(zt||!ue.hasIconData()||bt),Qr=zt&&(Nt||!ue.hasTextData()||kt);!ue.collisionArrays&&_t&&ue.deserializeCollisionBoxes(_t);var $r=function(Hr,kn){if(!z[Hr.crossTileID])if(at)G.placements[Hr.crossTileID]=new Fr(!1,!1,!1);else{var Zn,qn=!1,ei=!1,ui=!0,ki=null,Jn={box:null,offscreen:null},yi={box:null,offscreen:null},mi=null,Ei=null,xi=0,Li=0,Bi=0;kn.textFeatureIndex?xi=kn.textFeatureIndex:Hr.useRuntimeCollisionCircles&&(xi=Hr.featureIndex),kn.verticalTextFeatureIndex&&(Li=kn.verticalTextFeatureIndex);var ca=kn.textBox;if(ca){var Ia=function(Ma){var Do=e.WritingMode.horizontal;if(ue.allowVerticalPlacement&&!Ma&&G.prevPlacement){var zo=G.prevPlacement.placedOrientations[Hr.crossTileID];zo&&(G.placedOrientations[Hr.crossTileID]=zo,Do=zo,G.markUsedOrientation(ue,Do,Hr))}return Do},Oa=function(Ma,Do){if(ue.allowVerticalPlacement&&Hr.numVerticalGlyphVertices>0&&kn.verticalTextBox)for(var zo=0,dc=ue.writingModes;zo<dc.length&&(dc[zo]===e.WritingMode.vertical?(Jn=Do(),yi=Jn):Jn=Ma(),!(Jn&&Jn.box&&Jn.box.length));zo+=1);else Jn=Ma()};if(ge.get("text-variable-anchor")){var la=ge.get("text-variable-anchor");if(G.prevPlacement&&G.prevPlacement.variableOffsets[Hr.crossTileID]){var Aa=G.prevPlacement.variableOffsets[Hr.crossTileID];la.indexOf(Aa.anchor)>0&&(la=la.filter(function(Ma){return Ma!==Aa.anchor})).unshift(Aa.anchor)}var ma=function(Ma,Do,zo){for(var dc=Ma.x2-Ma.x1,oh=Ma.y2-Ma.y1,rs=Hr.textBoxScale,ru=pr&&!zt?Do:null,Zl={box:[],offscreen:!1},sh=Nt?2*la.length:la.length,yl=0;yl<sh;++yl){var lh=la[yl%la.length],mc=yl>=la.length,nu=G.attemptAnchorPlacement(lh,Ma,dc,oh,rs,Ut,nr,Xe,_e,Tt,mc,Hr,ue,zo,ru);if(nu&&(Zl=nu.placedGlyphBoxes)&&Zl.box&&Zl.box.length){qn=!0,ki=nu.shift;break}}return Zl};Oa(function(){return ma(ca,kn.iconBox,e.WritingMode.horizontal)},function(){var Ma=kn.verticalTextBox,Do=Jn&&Jn.box&&Jn.box.length;return ue.allowVerticalPlacement&&!Do&&Hr.numVerticalGlyphVertices>0&&Ma?ma(Ma,kn.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}}),Jn&&(qn=Jn.box,ui=Jn.offscreen);var _o=Ia(Jn&&Jn.box);if(!qn&&G.prevPlacement){var Wa=G.prevPlacement.variableOffsets[Hr.crossTileID];Wa&&(G.variableOffsets[Hr.crossTileID]=Wa,G.markUsedJustification(ue,Wa.anchor,Hr,_o))}}else{var No=function(Ma,Do){var zo=G.collisionIndex.placeCollisionBox(Ma,Nt,Xe,_e,Tt.predicate);return zo&&zo.box&&zo.box.length&&(G.markUsedOrientation(ue,Do,Hr),G.placedOrientations[Hr.crossTileID]=Do),zo};Oa(function(){return No(ca,e.WritingMode.horizontal)},function(){var Ma=kn.verticalTextBox;return ue.allowVerticalPlacement&&Hr.numVerticalGlyphVertices>0&&Ma?No(Ma,e.WritingMode.vertical):{box:null,offscreen:null}}),Ia(Jn&&Jn.box&&Jn.box.length)}}if(qn=(Zn=Jn)&&Zn.box&&Zn.box.length>0,ui=Zn&&Zn.offscreen,Hr.useRuntimeCollisionCircles){var Rs=ue.text.placedSymbolArray.get(Hr.centerJustifiedTextSymbolIndex),ol=e.evaluateSizeForFeature(ue.textSizeData,St,Rs),Gl=ge.get("text-padding"),Cl=Hr.collisionCircleDiameter;mi=G.collisionIndex.placeCollisionCircles(Nt,Rs,ue.lineVertexArray,ue.glyphOffsetArray,ol,_e,Ee,He,B,nr,Tt.predicate,Cl,Gl),qn=Nt||mi.circles.length>0&&!mi.collisionDetected,ui=ui&&mi.offscreen}if(kn.iconFeatureIndex&&(Bi=kn.iconFeatureIndex),kn.iconBox){var Pl=function(Ma){var Do=pr&&ki?tr(Ma,ki.x,ki.y,Ut,nr,G.transform.angle):Ma;return G.collisionIndex.placeCollisionBox(Do,zt,Xe,_e,Tt.predicate)};ei=yi&&yi.box&&yi.box.length&&kn.verticalIconBox?(Ei=Pl(kn.verticalIconBox)).box.length>0:(Ei=Pl(kn.iconBox)).box.length>0,ui=ui&&Ei.offscreen}var wo=kt||Hr.numHorizontalGlyphVertices===0&&Hr.numVerticalGlyphVertices===0,vl=bt||Hr.numIconVertices===0;if(wo||vl?vl?wo||(ei=ei&&qn):qn=ei&&qn:ei=qn=ei&&qn,qn&&Zn&&Zn.box&&(yi&&yi.box&&Li?G.collisionIndex.insertCollisionBox(Zn.box,ge.get("text-ignore-placement"),ue.bucketInstanceId,Li,Tt.ID):G.collisionIndex.insertCollisionBox(Zn.box,ge.get("text-ignore-placement"),ue.bucketInstanceId,xi,Tt.ID)),ei&&Ei&&G.collisionIndex.insertCollisionBox(Ei.box,ge.get("icon-ignore-placement"),ue.bucketInstanceId,Bi,Tt.ID),mi&&(qn&&G.collisionIndex.insertCollisionCircles(mi.circles,ge.get("text-ignore-placement"),ue.bucketInstanceId,xi,Tt.ID),B)){var Yl=ue.bucketInstanceId,hs=G.collisionCircleArrays[Yl];hs===void 0&&(hs=G.collisionCircleArrays[Yl]=new on);for(var Wl=0;Wl<mi.circles.length;Wl+=4)hs.circles.push(mi.circles[Wl+0]),hs.circles.push(mi.circles[Wl+1]),hs.circles.push(mi.circles[Wl+2]),hs.circles.push(mi.collisionDetected?1:0)}G.placements[Hr.crossTileID]=new Fr(qn||kr,ei||Qr,ui||ue.justReloaded),z[Hr.crossTileID]=!0}};if(Mr)for(var pn=ue.getSortedSymbolIndexes(this.transform.angle),sn=pn.length-1;sn>=0;--sn){var Un=pn[sn];$r(ue.symbolInstances.get(Un),ue.collisionArrays[Un])}else for(var Wn=C.symbolInstanceStart;Wn<C.symbolInstanceEnd;Wn++)$r(ue.symbolInstances.get(Wn),ue.collisionArrays[Wn]);if(B&&ue.bucketInstanceId in this.collisionCircleArrays){var li=this.collisionCircleArrays[ue.bucketInstanceId];e.invert(li.invProjMatrix,_e),li.viewportMatrix=this.collisionIndex.getViewportMatrix()}ue.justReloaded=!1},Ot.prototype.markUsedJustification=function(C,z,B,G){var ae,ue={left:B.leftJustifiedTextSymbolIndex,center:B.centerJustifiedTextSymbolIndex,right:B.rightJustifiedTextSymbolIndex};ae=G===e.WritingMode.vertical?B.verticalPlacedTextSymbolIndex:ue[e.getAnchorJustification(z)];for(var ge=0,_e=[B.leftJustifiedTextSymbolIndex,B.centerJustifiedTextSymbolIndex,B.rightJustifiedTextSymbolIndex,B.verticalPlacedTextSymbolIndex];ge<_e.length;ge+=1){var Ee=_e[ge];Ee>=0&&(C.text.placedSymbolArray.get(Ee).crossTileID=ae>=0&&Ee!==ae?0:B.crossTileID)}},Ot.prototype.markUsedOrientation=function(C,z,B){for(var G=z===e.WritingMode.horizontal||z===e.WritingMode.horizontalOnly?z:0,ae=z===e.WritingMode.vertical?z:0,ue=0,ge=[B.leftJustifiedTextSymbolIndex,B.centerJustifiedTextSymbolIndex,B.rightJustifiedTextSymbolIndex];ue<ge.length;ue+=1){var _e=ge[ue];C.text.placedSymbolArray.get(_e).placedOrientation=G}B.verticalPlacedTextSymbolIndex&&(C.text.placedSymbolArray.get(B.verticalPlacedTextSymbolIndex).placedOrientation=ae)},Ot.prototype.commit=function(C){this.commitTime=C,this.zoomAtLastRecencyCheck=this.transform.zoom;var z=this.prevPlacement,B=!1;this.prevZoomAdjustment=z?z.zoomAdjustment(this.transform.zoom):0;var G=z?z.symbolFadeChange(C):1,ae=z?z.opacities:{},ue=z?z.variableOffsets:{},ge=z?z.placedOrientations:{};for(var _e in this.placements){var Ee=this.placements[_e],He=ae[_e];He?(this.opacities[_e]=new On(He,G,Ee.text,Ee.icon),B=B||Ee.text!==He.text.placed||Ee.icon!==He.icon.placed):(this.opacities[_e]=new On(null,G,Ee.text,Ee.icon,Ee.skipFade),B=B||Ee.text||Ee.icon)}for(var Xe in ae){var at=ae[Xe];if(!this.opacities[Xe]){var _t=new On(at,G,!1,!1);_t.isHidden()||(this.opacities[Xe]=_t,B=B||at.text.placed||at.icon.placed)}}for(var St in ue)this.variableOffsets[St]||!this.opacities[St]||this.opacities[St].isHidden()||(this.variableOffsets[St]=ue[St]);for(var Tt in ge)this.placedOrientations[Tt]||!this.opacities[Tt]||this.opacities[Tt].isHidden()||(this.placedOrientations[Tt]=ge[Tt]);B?this.lastPlacementChangeTime=C:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=z?z.lastPlacementChangeTime:C)},Ot.prototype.updateLayerOpacities=function(C,z){for(var B={},G=0,ae=z;G<ae.length;G+=1){var ue=ae[G],ge=ue.getBucket(C);ge&&ue.latestFeatureIndex&&C.id===ge.layerIds[0]&&this.updateBucketOpacities(ge,B,ue.collisionBoxArray)}},Ot.prototype.updateBucketOpacities=function(C,z,B){var G=this;C.hasTextData()&&C.text.opacityVertexArray.clear(),C.hasIconData()&&C.icon.opacityVertexArray.clear(),C.hasIconCollisionBoxData()&&C.iconCollisionBox.collisionVertexArray.clear(),C.hasTextCollisionBoxData()&&C.textCollisionBox.collisionVertexArray.clear();var ae=C.layers[0].layout,ue=new On(null,0,!1,!1,!0),ge=ae.get("text-allow-overlap"),_e=ae.get("icon-allow-overlap"),Ee=ae.get("text-variable-anchor"),He=ae.get("text-rotation-alignment")==="map",Xe=ae.get("text-pitch-alignment")==="map",at=ae.get("icon-text-fit")!=="none",_t=new On(null,0,ge&&(_e||!C.hasIconData()||ae.get("icon-optional")),_e&&(ge||!C.hasTextData()||ae.get("text-optional")),!0);!C.collisionArrays&&B&&(C.hasIconCollisionBoxData()||C.hasTextCollisionBoxData())&&C.deserializeCollisionBoxes(B);for(var St=function(Nt,zt,Ut){for(var nr=0;nr<zt/4;nr++)Nt.opacityVertexArray.emplaceBack(Ut)},Tt=function(Nt){var zt=C.symbolInstances.get(Nt),Ut=zt.numHorizontalGlyphVertices,nr=zt.numVerticalGlyphVertices,pr=zt.crossTileID,Mr=z[pr],kr=G.opacities[pr];Mr?kr=ue:kr||(kr=_t,G.opacities[pr]=kr),z[pr]=!0;var Qr=Ut>0||nr>0,$r=zt.numIconVertices>0,pn=G.placedOrientations[zt.crossTileID],sn=pn===e.WritingMode.vertical,Un=pn===e.WritingMode.horizontal||pn===e.WritingMode.horizontalOnly;if(Qr){var Wn=Ir(kr.text),li=sn?Er:Wn;St(C.text,Ut,li);var Hr=Un?Er:Wn;St(C.text,nr,Hr);var kn=kr.text.isHidden();[zt.rightJustifiedTextSymbolIndex,zt.centerJustifiedTextSymbolIndex,zt.leftJustifiedTextSymbolIndex].forEach(function(Bi){Bi>=0&&(C.text.placedSymbolArray.get(Bi).hidden=kn||sn?1:0)}),zt.verticalPlacedTextSymbolIndex>=0&&(C.text.placedSymbolArray.get(zt.verticalPlacedTextSymbolIndex).hidden=kn||Un?1:0);var Zn=G.variableOffsets[zt.crossTileID];Zn&&G.markUsedJustification(C,Zn.anchor,zt,pn);var qn=G.placedOrientations[zt.crossTileID];qn&&(G.markUsedJustification(C,"left",zt,qn),G.markUsedOrientation(C,qn,zt))}if($r){var ei=Ir(kr.icon),ui=!(at&&zt.verticalPlacedIconSymbolIndex&&sn);if(zt.placedIconSymbolIndex>=0){var ki=ui?ei:Er;St(C.icon,zt.numIconVertices,ki),C.icon.placedSymbolArray.get(zt.placedIconSymbolIndex).hidden=kr.icon.isHidden()}if(zt.verticalPlacedIconSymbolIndex>=0){var Jn=ui?Er:ei;St(C.icon,zt.numVerticalIconVertices,Jn),C.icon.placedSymbolArray.get(zt.verticalPlacedIconSymbolIndex).hidden=kr.icon.isHidden()}}if(C.hasIconCollisionBoxData()||C.hasTextCollisionBoxData()){var yi=C.collisionArrays[Nt];if(yi){var mi=new e.Point(0,0);if(yi.textBox||yi.verticalTextBox){var Ei=!0;if(Ee){var xi=G.variableOffsets[pr];xi?(mi=Dn(xi.anchor,xi.width,xi.height,xi.textOffset,xi.textBoxScale),He&&mi._rotate(Xe?G.transform.angle:-G.transform.angle)):Ei=!1}yi.textBox&&Ht(C.textCollisionBox.collisionVertexArray,kr.text.placed,!Ei||sn,mi.x,mi.y),yi.verticalTextBox&&Ht(C.textCollisionBox.collisionVertexArray,kr.text.placed,!Ei||Un,mi.x,mi.y)}var Li=Boolean(!Un&&yi.verticalIconBox);yi.iconBox&&Ht(C.iconCollisionBox.collisionVertexArray,kr.icon.placed,Li,at?mi.x:0,at?mi.y:0),yi.verticalIconBox&&Ht(C.iconCollisionBox.collisionVertexArray,kr.icon.placed,!Li,at?mi.x:0,at?mi.y:0)}}},kt=0;kt<C.symbolInstances.length;kt++)Tt(kt);if(C.sortFeatures(this.transform.angle),this.retainedQueryData[C.bucketInstanceId]&&(this.retainedQueryData[C.bucketInstanceId].featureSortOrder=C.featureSortOrder),C.hasTextData()&&C.text.opacityVertexBuffer&&C.text.opacityVertexBuffer.updateData(C.text.opacityVertexArray),C.hasIconData()&&C.icon.opacityVertexBuffer&&C.icon.opacityVertexBuffer.updateData(C.icon.opacityVertexArray),C.hasIconCollisionBoxData()&&C.iconCollisionBox.collisionVertexBuffer&&C.iconCollisionBox.collisionVertexBuffer.updateData(C.iconCollisionBox.collisionVertexArray),C.hasTextCollisionBoxData()&&C.textCollisionBox.collisionVertexBuffer&&C.textCollisionBox.collisionVertexBuffer.updateData(C.textCollisionBox.collisionVertexArray),C.bucketInstanceId in this.collisionCircleArrays){var bt=this.collisionCircleArrays[C.bucketInstanceId];C.placementInvProjMatrix=bt.invProjMatrix,C.placementViewportMatrix=bt.viewportMatrix,C.collisionCircleArray=bt.circles,delete this.collisionCircleArrays[C.bucketInstanceId]}},Ot.prototype.symbolFadeChange=function(C){return this.fadeDuration===0?1:(C-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Ot.prototype.zoomAdjustment=function(C){return Math.max(0,(this.transform.zoom-C)/1.5)},Ot.prototype.hasTransitions=function(C){return this.stale||C-this.lastPlacementChangeTime<this.fadeDuration},Ot.prototype.stillRecent=function(C,z){var B=this.zoomAtLastRecencyCheck===z?1-this.zoomAdjustment(z):1;return this.zoomAtLastRecencyCheck=z,this.commitTime+this.fadeDuration*B>C},Ot.prototype.setStale=function(){this.stale=!0};var fr=Math.pow(2,25),Tr=Math.pow(2,24),Wr=Math.pow(2,17),Gr=Math.pow(2,16),wr=Math.pow(2,9),br=Math.pow(2,8),Sr=Math.pow(2,1);function Ir(C){if(C.opacity===0&&!C.placed)return 0;if(C.opacity===1&&C.placed)return 4294967295;var z=C.placed?1:0,B=Math.floor(127*C.opacity);return B*fr+z*Tr+B*Wr+z*Gr+B*wr+z*br+B*Sr+z}var Er=0,Xr=function(C){this._sortAcrossTiles=C.layout.get("symbol-z-order")!=="viewport-y"&&C.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Xr.prototype.continuePlacement=function(C,z,B,G,ae){for(var ue=this._bucketParts;this._currentTileIndex<C.length;){var ge=C[this._currentTileIndex];if(z.getBucketParts(ue,G,ge,this._sortAcrossTiles),this._currentTileIndex++,ae())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ue.sort(function(Ee,He){return Ee.sortKey-He.sortKey}));this._currentPartIndex<ue.length;){var _e=ue[this._currentPartIndex];if(z.placeLayerBucketPart(_e,this._seenCrossTileIDs,B),this._currentPartIndex++,ae())return!0}return!1};var fn=function(C,z,B,G,ae,ue,ge){this.placement=new Ot(C,ae,ue,ge),this._currentPlacementIndex=z.length-1,this._forceFullPlacement=B,this._showCollisionBoxes=G,this._done=!1};fn.prototype.isDone=function(){return this._done},fn.prototype.continuePlacement=function(C,z,B){for(var G=this,ae=e.browser.now(),ue=function(){var Ee=e.browser.now()-ae;return!G._forceFullPlacement&&Ee>2};this._currentPlacementIndex>=0;){var ge=z[C[this._currentPlacementIndex]],_e=this.placement.collisionIndex.transform.zoom;if(ge.type==="symbol"&&(!ge.minzoom||ge.minzoom<=_e)&&(!ge.maxzoom||ge.maxzoom>_e)){if(this._inProgressLayer||(this._inProgressLayer=new Xr(ge)),this._inProgressLayer.continuePlacement(B[ge.source],this.placement,this._showCollisionBoxes,ge,ue))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},fn.prototype.commit=function(C){return this.placement.commit(C),this.placement};var _n=512/e.EXTENT/2,en=function(C,z,B){this.tileID=C,this.indexedSymbolInstances={},this.bucketInstanceId=B;for(var G=0;G<z.length;G++){var ae=z.get(G),ue=ae.key;this.indexedSymbolInstances[ue]||(this.indexedSymbolInstances[ue]=[]),this.indexedSymbolInstances[ue].push({crossTileID:ae.crossTileID,coord:this.getScaledCoordinates(ae,C)})}};en.prototype.getScaledCoordinates=function(C,z){var B=z.canonical.z-this.tileID.canonical.z,G=_n/Math.pow(2,B);return{x:Math.floor((z.canonical.x*e.EXTENT+C.anchorX)*G),y:Math.floor((z.canonical.y*e.EXTENT+C.anchorY)*G)}},en.prototype.findMatches=function(C,z,B){for(var G=this.tileID.canonical.z<z.canonical.z?1:Math.pow(2,this.tileID.canonical.z-z.canonical.z),ae=0;ae<C.length;ae++){var ue=C.get(ae);if(!ue.crossTileID){var ge=this.indexedSymbolInstances[ue.key];if(ge)for(var _e=this.getScaledCoordinates(ue,z),Ee=0,He=ge;Ee<He.length;Ee+=1){var Xe=He[Ee];if(Math.abs(Xe.coord.x-_e.x)<=G&&Math.abs(Xe.coord.y-_e.y)<=G&&!B[Xe.crossTileID]){B[Xe.crossTileID]=!0,ue.crossTileID=Xe.crossTileID;break}}}}};var yn=function(){this.maxCrossTileID=0};yn.prototype.generate=function(){return++this.maxCrossTileID};var Vr=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Vr.prototype.handleWrapJump=function(C){var z=Math.round((C-this.lng)/360);if(z!==0)for(var B in this.indexes){var G=this.indexes[B],ae={};for(var ue in G){var ge=G[ue];ge.tileID=ge.tileID.unwrapTo(ge.tileID.wrap+z),ae[ge.tileID.key]=ge}this.indexes[B]=ae}this.lng=C},Vr.prototype.addBucket=function(C,z,B){if(this.indexes[C.overscaledZ]&&this.indexes[C.overscaledZ][C.key]){if(this.indexes[C.overscaledZ][C.key].bucketInstanceId===z.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(C.overscaledZ,this.indexes[C.overscaledZ][C.key])}for(var G=0;G<z.symbolInstances.length;G++)z.symbolInstances.get(G).crossTileID=0;this.usedCrossTileIDs[C.overscaledZ]||(this.usedCrossTileIDs[C.overscaledZ]={});var ae=this.usedCrossTileIDs[C.overscaledZ];for(var ue in this.indexes){var ge=this.indexes[ue];if(Number(ue)>C.overscaledZ)for(var _e in ge){var Ee=ge[_e];Ee.tileID.isChildOf(C)&&Ee.findMatches(z.symbolInstances,C,ae)}else{var He=ge[C.scaledTo(Number(ue)).key];He&&He.findMatches(z.symbolInstances,C,ae)}}for(var Xe=0;Xe<z.symbolInstances.length;Xe++){var at=z.symbolInstances.get(Xe);at.crossTileID||(at.crossTileID=B.generate(),ae[at.crossTileID]=!0)}return this.indexes[C.overscaledZ]===void 0&&(this.indexes[C.overscaledZ]={}),this.indexes[C.overscaledZ][C.key]=new en(C,z.symbolInstances,z.bucketInstanceId),!0},Vr.prototype.removeBucketCrossTileIDs=function(C,z){for(var B in z.indexedSymbolInstances)for(var G=0,ae=z.indexedSymbolInstances[B];G<ae.length;G+=1){var ue=ae[G];delete this.usedCrossTileIDs[C][ue.crossTileID]}},Vr.prototype.removeStaleBuckets=function(C){var z=!1;for(var B in this.indexes){var G=this.indexes[B];for(var ae in G)C[G[ae].bucketInstanceId]||(this.removeBucketCrossTileIDs(B,G[ae]),delete G[ae],z=!0)}return z};var Ur=function(){this.layerIndexes={},this.crossTileIDs=new yn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Ur.prototype.addLayer=function(C,z,B){var G=this.layerIndexes[C.id];G===void 0&&(G=this.layerIndexes[C.id]=new Vr);var ae=!1,ue={};G.handleWrapJump(B);for(var ge=0,_e=z;ge<_e.length;ge+=1){var Ee=_e[ge],He=Ee.getBucket(C);He&&C.id===He.layerIds[0]&&(He.bucketInstanceId||(He.bucketInstanceId=++this.maxBucketInstanceId),G.addBucket(Ee.tileID,He,this.crossTileIDs)&&(ae=!0),ue[He.bucketInstanceId]=!0)}return G.removeStaleBuckets(ue)&&(ae=!0),ae},Ur.prototype.pruneUnusedLayers=function(C){var z={};for(var B in C.forEach(function(G){z[G]=!0}),this.layerIndexes)z[B]||delete this.layerIndexes[B]};var ln=function(C,z){return e.emitValidationErrors(C,z&&z.filter(function(B){return B.identifier!=="source.canvas"}))},gn=e.pick(Bt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Sn=e.pick(Bt,["setCenter","setZoom","setBearing","setPitch"]),oi=function(){var C={},z=e.styleSpec.$version;for(var B in e.styleSpec.$root){var G=e.styleSpec.$root[B];if(G.required){var ae=null;(ae=B==="version"?z:G.type==="array"?[]:{})!=null&&(C[B]=ae)}}return C}(),Yn=function(C){function z(B,G){var ae=this;G===void 0&&(G={}),C.call(this),this.map=B,this.dispatcher=new S(Ke(),this),this.imageManager=new m,this.imageManager.setEventedParent(this),this.glyphManager=new k(B._requestManager,G.localIdeographFontFamily),this.lineAtlas=new P(256,512),this.crossTileSymbolIndex=new Ur,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var ue=this;this._rtlTextPluginCallback=z.registerForPluginStateChange(function(ge){var _e={pluginStatus:ge.pluginStatus,pluginURL:ge.pluginURL};ue.dispatcher.broadcast("syncRTLPluginState",_e,function(Ee,He){if(e.triggerPluginCompletionEvent(Ee),He&&He.every(function(at){return at}))for(var Xe in ue.sourceCaches)ue.sourceCaches[Xe].reload()})}),this.on("data",function(ge){if(ge.dataType==="source"&&ge.sourceDataType==="metadata"){var _e=ae.sourceCaches[ge.sourceId];if(_e){var Ee=_e.getSource();if(Ee&&Ee.vectorLayerIds)for(var He in ae._layers){var Xe=ae._layers[He];Xe.source===Ee.id&&ae._validateLayer(Xe)}}}})}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.loadURL=function(B,G){var ae=this;G===void 0&&(G={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var ue=typeof G.validate=="boolean"?G.validate:!e.isMapboxURL(B);B=this.map._requestManager.normalizeStyleURL(B,G.accessToken);var ge=this.map._requestManager.transformRequest(B,e.ResourceType.Style);this._request=e.getJSON(ge,function(_e,Ee){ae._request=null,_e?ae.fire(new e.ErrorEvent(_e)):Ee&&ae._load(Ee,ue)})},z.prototype.loadJSON=function(B,G){var ae=this;G===void 0&&(G={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){ae._request=null,ae._load(B,G.validate!==!1)})},z.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(oi,!1)},z.prototype._load=function(B,G){if(!G||!ln(this,e.validateStyle(B))){for(var ae in this._loaded=!0,this.stylesheet=B,B.sources)this.addSource(ae,B.sources[ae],{validate:!1});B.sprite?this._loadSprite(B.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(B.glyphs);var ue=Dt(this.stylesheet.layers);this._order=ue.map(function(He){return He.id}),this._layers={},this._serializedLayers={};for(var ge=0,_e=ue;ge<_e.length;ge+=1){var Ee=_e[ge];(Ee=e.createStyleLayer(Ee)).setEventedParent(this,{layer:{id:Ee.id}}),this._layers[Ee.id]=Ee,this._serializedLayers[Ee.id]=Ee.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new I(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},z.prototype._loadSprite=function(B){var G=this;this._spriteRequest=function(ae,ue,ge){var _e,Ee,He,Xe=e.browser.devicePixelRatio>1?"@2x":"",at=e.getJSON(ue.transformRequest(ue.normalizeSpriteURL(ae,Xe,".json"),e.ResourceType.SpriteJSON),function(Tt,kt){at=null,He||(He=Tt,_e=kt,St())}),_t=e.getImage(ue.transformRequest(ue.normalizeSpriteURL(ae,Xe,".png"),e.ResourceType.SpriteImage),function(Tt,kt){_t=null,He||(He=Tt,Ee=kt,St())});function St(){if(He)ge(He);else if(_e&&Ee){var Tt=e.browser.getImageData(Ee),kt={};for(var bt in _e){var Nt=_e[bt],zt=Nt.width,Ut=Nt.height,nr=Nt.x,pr=Nt.y,Mr=Nt.sdf,kr=Nt.pixelRatio,Qr=Nt.stretchX,$r=Nt.stretchY,pn=Nt.content,sn=new e.RGBAImage({width:zt,height:Ut});e.RGBAImage.copy(Tt,sn,{x:nr,y:pr},{x:0,y:0},{width:zt,height:Ut}),kt[bt]={data:sn,pixelRatio:kr,sdf:Mr,stretchX:Qr,stretchY:$r,content:pn}}ge(null,kt)}}return{cancel:function(){at&&(at.cancel(),at=null),_t&&(_t.cancel(),_t=null)}}}(B,this.map._requestManager,function(ae,ue){if(G._spriteRequest=null,ae)G.fire(new e.ErrorEvent(ae));else if(ue)for(var ge in ue)G.imageManager.addImage(ge,ue[ge]);G.imageManager.setLoaded(!0),G._availableImages=G.imageManager.listImages(),G.dispatcher.broadcast("setImages",G._availableImages),G.fire(new e.Event("data",{dataType:"style"}))})},z.prototype._validateLayer=function(B){var G=this.sourceCaches[B.source];if(G){var ae=B.sourceLayer;if(ae){var ue=G.getSource();(ue.type==="geojson"||ue.vectorLayerIds&&ue.vectorLayerIds.indexOf(ae)===-1)&&this.fire(new e.ErrorEvent(new Error('Source layer "'+ae+'" does not exist on source "'+ue.id+'" as specified by style layer "'+B.id+'"')))}}},z.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var B in this.sourceCaches)if(!this.sourceCaches[B].loaded())return!1;return!!this.imageManager.isLoaded()},z.prototype._serializeLayers=function(B){for(var G=[],ae=0,ue=B;ae<ue.length;ae+=1){var ge=ue[ae],_e=this._layers[ge];_e.type!=="custom"&&G.push(_e.serialize())}return G},z.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var B in this.sourceCaches)if(this.sourceCaches[B].hasTransition())return!0;for(var G in this._layers)if(this._layers[G].hasTransition())return!0;return!1},z.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},z.prototype.update=function(B){if(this._loaded){var G=this._changed;if(this._changed){var ae=Object.keys(this._updatedLayers),ue=Object.keys(this._removedLayers);for(var ge in(ae.length||ue.length)&&this._updateWorkerLayers(ae,ue),this._updatedSources){var _e=this._updatedSources[ge];_e==="reload"?this._reloadSource(ge):_e==="clear"&&this._clearSource(ge)}for(var Ee in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Ee].updateTransitions(B);this.light.updateTransitions(B),this._resetUpdates()}for(var He in this.sourceCaches)this.sourceCaches[He].used=!1;for(var Xe=0,at=this._order;Xe<at.length;Xe+=1){var _t=at[Xe],St=this._layers[_t];St.recalculate(B,this._availableImages),!St.isHidden(B.zoom)&&St.source&&(this.sourceCaches[St.source].used=!0)}this.light.recalculate(B),this.z=B.zoom,G&&this.fire(new e.Event("data",{dataType:"style"}))}},z.prototype._updateTilesForChangedImages=function(){var B=Object.keys(this._changedImages);if(B.length){for(var G in this.sourceCaches)this.sourceCaches[G].reloadTilesForDependencies(["icons","patterns"],B);this._changedImages={}}},z.prototype._updateWorkerLayers=function(B,G){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(B),removedIds:G})},z.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},z.prototype.setState=function(B){var G=this;if(this._checkLoaded(),ln(this,e.validateStyle(B)))return!1;(B=e.clone$1(B)).layers=Dt(B.layers);var ae=qt(this.serialize(),B).filter(function(ge){return!(ge.command in Sn)});if(ae.length===0)return!1;var ue=ae.filter(function(ge){return!(ge.command in gn)});if(ue.length>0)throw new Error("Unimplemented: "+ue.map(function(ge){return ge.command}).join(", ")+".");return ae.forEach(function(ge){ge.command!=="setTransition"&&G[ge.command].apply(G,ge.args)}),this.stylesheet=B,!0},z.prototype.addImage=function(B,G){if(this.getImage(B))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(B,G),this._availableImages=this.imageManager.listImages(),this._changedImages[B]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},z.prototype.updateImage=function(B,G){this.imageManager.updateImage(B,G)},z.prototype.getImage=function(B){return this.imageManager.getImage(B)},z.prototype.removeImage=function(B){if(!this.getImage(B))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(B),this._availableImages=this.imageManager.listImages(),this._changedImages[B]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},z.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},z.prototype.addSource=function(B,G,ae){var ue=this;if(ae===void 0&&(ae={}),this._checkLoaded(),this.sourceCaches[B]!==void 0)throw new Error("There is already a source with this ID");if(!G.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(G).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(G.type)>=0)||!this._validate(e.validateStyle.source,"sources."+B,G,null,ae)){this.map&&this.map._collectResourceTiming&&(G.collectResourceTiming=!0);var ge=this.sourceCaches[B]=new $e(B,G,this.dispatcher);ge.style=this,ge.setEventedParent(this,function(){return{isSourceLoaded:ue.loaded(),source:ge.serialize(),sourceId:B}}),ge.onAdd(this.map),this._changed=!0}},z.prototype.removeSource=function(B){if(this._checkLoaded(),this.sourceCaches[B]===void 0)throw new Error("There is no source with this ID");for(var G in this._layers)if(this._layers[G].source===B)return this.fire(new e.ErrorEvent(new Error('Source "'+B+'" cannot be removed while layer "'+G+'" is using it.')));var ae=this.sourceCaches[B];delete this.sourceCaches[B],delete this._updatedSources[B],ae.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:B})),ae.setEventedParent(null),ae.clearTiles(),ae.onRemove&&ae.onRemove(this.map),this._changed=!0},z.prototype.setGeoJSONSourceData=function(B,G){this._checkLoaded(),this.sourceCaches[B].getSource().setData(G),this._changed=!0},z.prototype.getSource=function(B){return this.sourceCaches[B]&&this.sourceCaches[B].getSource()},z.prototype.addLayer=function(B,G,ae){ae===void 0&&(ae={}),this._checkLoaded();var ue=B.id;if(this.getLayer(ue))this.fire(new e.ErrorEvent(new Error('Layer with id "'+ue+'" already exists on this map')));else{var ge;if(B.type==="custom"){if(ln(this,e.validateCustomStyleLayer(B)))return;ge=e.createStyleLayer(B)}else{if(typeof B.source=="object"&&(this.addSource(ue,B.source),B=e.clone$1(B),B=e.extend(B,{source:ue})),this._validate(e.validateStyle.layer,"layers."+ue,B,{arrayIndex:-1},ae))return;ge=e.createStyleLayer(B),this._validateLayer(ge),ge.setEventedParent(this,{layer:{id:ue}}),this._serializedLayers[ge.id]=ge.serialize()}var _e=G?this._order.indexOf(G):this._order.length;if(G&&_e===-1)this.fire(new e.ErrorEvent(new Error('Layer with id "'+G+'" does not exist on this map.')));else{if(this._order.splice(_e,0,ue),this._layerOrderChanged=!0,this._layers[ue]=ge,this._removedLayers[ue]&&ge.source&&ge.type!=="custom"){var Ee=this._removedLayers[ue];delete this._removedLayers[ue],Ee.type!==ge.type?this._updatedSources[ge.source]="clear":(this._updatedSources[ge.source]="reload",this.sourceCaches[ge.source].pause())}this._updateLayer(ge),ge.onAdd&&ge.onAdd(this.map)}}},z.prototype.moveLayer=function(B,G){if(this._checkLoaded(),this._changed=!0,this._layers[B]){if(B!==G){var ae=this._order.indexOf(B);this._order.splice(ae,1);var ue=G?this._order.indexOf(G):this._order.length;G&&ue===-1?this.fire(new e.ErrorEvent(new Error('Layer with id "'+G+'" does not exist on this map.'))):(this._order.splice(ue,0,B),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot be moved.")))},z.prototype.removeLayer=function(B){this._checkLoaded();var G=this._layers[B];if(G){G.setEventedParent(null);var ae=this._order.indexOf(B);this._order.splice(ae,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[B]=G,delete this._layers[B],delete this._serializedLayers[B],delete this._updatedLayers[B],delete this._updatedPaintProps[B],G.onRemove&&G.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot be removed.")))},z.prototype.getLayer=function(B){return this._layers[B]},z.prototype.hasLayer=function(B){return B in this._layers},z.prototype.setLayerZoomRange=function(B,G,ae){this._checkLoaded();var ue=this.getLayer(B);ue?ue.minzoom===G&&ue.maxzoom===ae||(G!=null&&(ue.minzoom=G),ae!=null&&(ue.maxzoom=ae),this._updateLayer(ue)):this.fire(new e.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot have zoom extent.")))},z.prototype.setFilter=function(B,G,ae){ae===void 0&&(ae={}),this._checkLoaded();var ue=this.getLayer(B);if(ue){if(!e.deepEqual(ue.filter,G))return G==null?(ue.filter=void 0,void this._updateLayer(ue)):void(this._validate(e.validateStyle.filter,"layers."+ue.id+".filter",G,null,ae)||(ue.filter=e.clone$1(G),this._updateLayer(ue)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot be filtered.")))},z.prototype.getFilter=function(B){return e.clone$1(this.getLayer(B).filter)},z.prototype.setLayoutProperty=function(B,G,ae,ue){ue===void 0&&(ue={}),this._checkLoaded();var ge=this.getLayer(B);ge?e.deepEqual(ge.getLayoutProperty(G),ae)||(ge.setLayoutProperty(G,ae,ue),this._updateLayer(ge)):this.fire(new e.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot be styled.")))},z.prototype.getLayoutProperty=function(B,G){var ae=this.getLayer(B);if(ae)return ae.getLayoutProperty(G);this.fire(new e.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style.")))},z.prototype.setPaintProperty=function(B,G,ae,ue){ue===void 0&&(ue={}),this._checkLoaded();var ge=this.getLayer(B);ge?e.deepEqual(ge.getPaintProperty(G),ae)||(ge.setPaintProperty(G,ae,ue)&&this._updateLayer(ge),this._changed=!0,this._updatedPaintProps[B]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot be styled.")))},z.prototype.getPaintProperty=function(B,G){return this.getLayer(B).getPaintProperty(G)},z.prototype.setFeatureState=function(B,G){this._checkLoaded();var ae=B.source,ue=B.sourceLayer,ge=this.sourceCaches[ae];if(ge!==void 0){var _e=ge.getSource().type;_e==="geojson"&&ue?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):_e!=="vector"||ue?(B.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),ge.setFeatureState(ue,B.id,G)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+ae+"' does not exist in the map's style.")))},z.prototype.removeFeatureState=function(B,G){this._checkLoaded();var ae=B.source,ue=this.sourceCaches[ae];if(ue!==void 0){var ge=ue.getSource().type,_e=ge==="vector"?B.sourceLayer:void 0;ge!=="vector"||_e?G&&typeof B.id!="string"&&typeof B.id!="number"?this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):ue.removeFeatureState(_e,B.id,G):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+ae+"' does not exist in the map's style.")))},z.prototype.getFeatureState=function(B){this._checkLoaded();var G=B.source,ae=B.sourceLayer,ue=this.sourceCaches[G];if(ue!==void 0){if(ue.getSource().type!=="vector"||ae)return B.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),ue.getFeatureState(ae,B.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+G+"' does not exist in the map's style.")))},z.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},z.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(B){return B.serialize()}),layers:this._serializeLayers(this._order)},function(B){return B!==void 0})},z.prototype._updateLayer=function(B){this._updatedLayers[B.id]=!0,B.source&&!this._updatedSources[B.source]&&this.sourceCaches[B.source].getSource().type!=="raster"&&(this._updatedSources[B.source]="reload",this.sourceCaches[B.source].pause()),this._changed=!0},z.prototype._flattenAndSortRenderedFeatures=function(B){for(var G=this,ae=function(pn){return G._layers[pn].type==="fill-extrusion"},ue={},ge=[],_e=this._order.length-1;_e>=0;_e--){var Ee=this._order[_e];if(ae(Ee)){ue[Ee]=_e;for(var He=0,Xe=B;He<Xe.length;He+=1){var at=Xe[He][Ee];if(at)for(var _t=0,St=at;_t<St.length;_t+=1){var Tt=St[_t];ge.push(Tt)}}}}ge.sort(function(pn,sn){return sn.intersectionZ-pn.intersectionZ});for(var kt=[],bt=this._order.length-1;bt>=0;bt--){var Nt=this._order[bt];if(ae(Nt))for(var zt=ge.length-1;zt>=0;zt--){var Ut=ge[zt].feature;if(ue[Ut.layer.id]<bt)break;kt.push(Ut),ge.pop()}else for(var nr=0,pr=B;nr<pr.length;nr+=1){var Mr=pr[nr][Nt];if(Mr)for(var kr=0,Qr=Mr;kr<Qr.length;kr+=1){var $r=Qr[kr];kt.push($r.feature)}}}return kt},z.prototype.queryRenderedFeatures=function(B,G,ae){G&&G.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",G.filter,null,G);var ue={};if(G&&G.layers){if(!Array.isArray(G.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var ge=0,_e=G.layers;ge<_e.length;ge+=1){var Ee=_e[ge],He=this._layers[Ee];if(!He)return this.fire(new e.ErrorEvent(new Error("The layer '"+Ee+"' does not exist in the map's style and cannot be queried for features."))),[];ue[He.source]=!0}}var Xe=[];for(var at in G.availableImages=this._availableImages,this.sourceCaches)G.layers&&!ue[at]||Xe.push(U(this.sourceCaches[at],this._layers,this._serializedLayers,B,G,ae));return this.placement&&Xe.push(function(_t,St,Tt,kt,bt,Nt,zt){for(var Ut={},nr=Nt.queryRenderedSymbols(kt),pr=[],Mr=0,kr=Object.keys(nr).map(Number);Mr<kr.length;Mr+=1){var Qr=kr[Mr];pr.push(zt[Qr])}pr.sort(te);for(var $r=function(){var li=sn[pn],Hr=li.featureIndex.lookupSymbolFeatures(nr[li.bucketInstanceId],St,li.bucketIndex,li.sourceLayerIndex,bt.filter,bt.layers,bt.availableImages,_t);for(var kn in Hr){var Zn=Ut[kn]=Ut[kn]||[],qn=Hr[kn];qn.sort(function(Jn,yi){var mi=li.featureSortOrder;if(mi){var Ei=mi.indexOf(Jn.featureIndex);return mi.indexOf(yi.featureIndex)-Ei}return yi.featureIndex-Jn.featureIndex});for(var ei=0,ui=qn;ei<ui.length;ei+=1){var ki=ui[ei];Zn.push(ki)}}},pn=0,sn=pr;pn<sn.length;pn+=1)$r();var Un=function(li){Ut[li].forEach(function(Hr){var kn=Hr.feature,Zn=_t[li],qn=Tt[Zn.source].getFeatureState(kn.layer["source-layer"],kn.id);kn.source=kn.layer.source,kn.layer["source-layer"]&&(kn.sourceLayer=kn.layer["source-layer"]),kn.state=qn})};for(var Wn in Ut)Un(Wn);return Ut}(this._layers,this._serializedLayers,this.sourceCaches,B,G,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Xe)},z.prototype.querySourceFeatures=function(B,G){G&&G.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",G.filter,null,G);var ae=this.sourceCaches[B];return ae?function(ue,ge){for(var _e=ue.getRenderableIds().map(function(St){return ue.getTileByID(St)}),Ee=[],He={},Xe=0;Xe<_e.length;Xe++){var at=_e[Xe],_t=at.tileID.canonical.key;He[_t]||(He[_t]=!0,at.querySourceFeatures(Ee,ge))}return Ee}(ae,G):[]},z.prototype.addSourceType=function(B,G,ae){return z.getSourceType(B)?ae(new Error('A source type called "'+B+'" already exists.')):(z.setSourceType(B,G),G.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:B,url:G.workerSourceURL},ae):ae(null,null))},z.prototype.getLight=function(){return this.light.getLight()},z.prototype.setLight=function(B,G){G===void 0&&(G={}),this._checkLoaded();var ae=this.light.getLight(),ue=!1;for(var ge in B)if(!e.deepEqual(B[ge],ae[ge])){ue=!0;break}if(ue){var _e={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(B,G),this.light.updateTransitions(_e)}},z.prototype._validate=function(B,G,ae,ue,ge){return ge===void 0&&(ge={}),(!ge||ge.validate!==!1)&&ln(this,B.call(e.validateStyle,e.extend({key:G,style:this.serialize(),value:ae,styleSpec:e.styleSpec},ue)))},z.prototype._remove=function(){for(var B in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[B].setEventedParent(null);for(var G in this.sourceCaches)this.sourceCaches[G].clearTiles(),this.sourceCaches[G].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},z.prototype._clearSource=function(B){this.sourceCaches[B].clearTiles()},z.prototype._reloadSource=function(B){this.sourceCaches[B].resume(),this.sourceCaches[B].reload()},z.prototype._updateSources=function(B){for(var G in this.sourceCaches)this.sourceCaches[G].update(B)},z.prototype._generateCollisionBoxes=function(){for(var B in this.sourceCaches)this._reloadSource(B)},z.prototype._updatePlacement=function(B,G,ae,ue,ge){ge===void 0&&(ge=!1);for(var _e=!1,Ee=!1,He={},Xe=0,at=this._order;Xe<at.length;Xe+=1){var _t=at[Xe],St=this._layers[_t];if(St.type==="symbol"){if(!He[St.source]){var Tt=this.sourceCaches[St.source];He[St.source]=Tt.getRenderableIds(!0).map(function(nr){return Tt.getTileByID(nr)}).sort(function(nr,pr){return pr.tileID.overscaledZ-nr.tileID.overscaledZ||(nr.tileID.isLessThan(pr.tileID)?-1:1)})}var kt=this.crossTileSymbolIndex.addLayer(St,He[St.source],B.center.lng);_e=_e||kt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((ge=ge||this._layerOrderChanged||ae===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),B.zoom))&&(this.pauseablePlacement=new fn(B,this._order,ge,G,ae,ue,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,He),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Ee=!0),_e&&this.pauseablePlacement.placement.setStale()),Ee||_e)for(var bt=0,Nt=this._order;bt<Nt.length;bt+=1){var zt=Nt[bt],Ut=this._layers[zt];Ut.type==="symbol"&&this.placement.updateLayerOpacities(Ut,He[Ut.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},z.prototype._releaseSymbolFadeTiles=function(){for(var B in this.sourceCaches)this.sourceCaches[B].releaseSymbolFadeTiles()},z.prototype.getImages=function(B,G,ae){this.imageManager.getImages(G.icons,ae),this._updateTilesForChangedImages();var ue=this.sourceCaches[G.source];ue&&ue.setDependencies(G.tileID.key,G.type,G.icons)},z.prototype.getGlyphs=function(B,G,ae){this.glyphManager.getGlyphs(G.stacks,ae)},z.prototype.getResource=function(B,G,ae){return e.makeRequest(G,ae)},z}(e.Evented);Yn.getSourceType=function(C){return R[C]},Yn.setSourceType=function(C,z){R[C]=z},Yn.registerForPluginStateChange=e.registerForPluginStateChange;var vn=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),ri=qi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),hi=qi(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Xi=qi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Da=qi(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),ia=qi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),_a=qi(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Mi=qi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),ji=qi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),mo=qi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Ho=qi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),es=qi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Xa=qi(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),$a=qi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),qo=qi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Hi=qi(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Lo=qi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),go=qi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),wa=qi(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Qa=qi(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),vo=qi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Mo=qi(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Na=qi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),pa=qi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Ja=qi(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Os=qi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Ns=qi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function qi(C,z){var B=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,G={};return{fragmentSource:C=C.replace(B,function(ae,ue,ge,_e,Ee){return G[Ee]=!0,ue==="define"?`
#ifndef HAS_UNIFORM_u_`+Ee+`
varying `+ge+" "+_e+" "+Ee+`;
#else
uniform `+ge+" "+_e+" u_"+Ee+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Ee+`
    `+ge+" "+_e+" "+Ee+" = u_"+Ee+`;
#endif
`}),vertexSource:z=z.replace(B,function(ae,ue,ge,_e,Ee){var He=_e==="float"?"vec2":"vec4",Xe=Ee.match(/color/)?"color":He;return G[Ee]?ue==="define"?`
#ifndef HAS_UNIFORM_u_`+Ee+`
uniform lowp float u_`+Ee+`_t;
attribute `+ge+" "+He+" a_"+Ee+`;
varying `+ge+" "+_e+" "+Ee+`;
#else
uniform `+ge+" "+_e+" u_"+Ee+`;
#endif
`:Xe==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Ee+`
    `+Ee+" = a_"+Ee+`;
#else
    `+ge+" "+_e+" "+Ee+" = u_"+Ee+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Ee+`
    `+Ee+" = unpack_mix_"+Xe+"(a_"+Ee+", u_"+Ee+`_t);
#else
    `+ge+" "+_e+" "+Ee+" = u_"+Ee+`;
#endif
`:ue==="define"?`
#ifndef HAS_UNIFORM_u_`+Ee+`
uniform lowp float u_`+Ee+`_t;
attribute `+ge+" "+He+" a_"+Ee+`;
#else
uniform `+ge+" "+_e+" u_"+Ee+`;
#endif
`:Xe==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Ee+`
    `+ge+" "+_e+" "+Ee+" = a_"+Ee+`;
#else
    `+ge+" "+_e+" "+Ee+" = u_"+Ee+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Ee+`
    `+ge+" "+_e+" "+Ee+" = unpack_mix_"+Xe+"(a_"+Ee+", u_"+Ee+`_t);
#else
    `+ge+" "+_e+" "+Ee+" = u_"+Ee+`;
#endif
`})}}var Ts=Object.freeze({__proto__:null,prelude:ri,background:hi,backgroundPattern:Xi,circle:Da,clippingMask:ia,heatmap:_a,heatmapTexture:Mi,collisionBox:ji,collisionCircle:mo,debug:Ho,fill:es,fillOutline:Xa,fillOutlinePattern:$a,fillPattern:qo,fillExtrusion:Hi,fillExtrusionPattern:Lo,hillshadePrepare:go,hillshade:wa,line:Qa,lineGradient:vo,linePattern:Mo,lineSDF:Na,raster:pa,symbolIcon:Ja,symbolSDF:Os,symbolTextAndIcon:Ns}),ss=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};ss.prototype.bind=function(C,z,B,G,ae,ue,ge,_e){this.context=C;for(var Ee=this.boundPaintVertexBuffers.length!==G.length,He=0;!Ee&&He<G.length;He++)this.boundPaintVertexBuffers[He]!==G[He]&&(Ee=!0);var Xe=!this.vao||this.boundProgram!==z||this.boundLayoutVertexBuffer!==B||Ee||this.boundIndexBuffer!==ae||this.boundVertexOffset!==ue||this.boundDynamicVertexBuffer!==ge||this.boundDynamicVertexBuffer2!==_e;!C.extVertexArrayObject||Xe?this.freshBind(z,B,G,ae,ue,ge,_e):(C.bindVertexArrayOES.set(this.vao),ge&&ge.bind(),ae&&ae.dynamicDraw&&ae.bind(),_e&&_e.bind())},ss.prototype.freshBind=function(C,z,B,G,ae,ue,ge){var _e,Ee=C.numAttributes,He=this.context,Xe=He.gl;if(He.extVertexArrayObject)this.vao&&this.destroy(),this.vao=He.extVertexArrayObject.createVertexArrayOES(),He.bindVertexArrayOES.set(this.vao),_e=0,this.boundProgram=C,this.boundLayoutVertexBuffer=z,this.boundPaintVertexBuffers=B,this.boundIndexBuffer=G,this.boundVertexOffset=ae,this.boundDynamicVertexBuffer=ue,this.boundDynamicVertexBuffer2=ge;else{_e=He.currentNumAttributes||0;for(var at=Ee;at<_e;at++)Xe.disableVertexAttribArray(at)}z.enableAttributes(Xe,C);for(var _t=0,St=B;_t<St.length;_t+=1)St[_t].enableAttributes(Xe,C);ue&&ue.enableAttributes(Xe,C),ge&&ge.enableAttributes(Xe,C),z.bind(),z.setVertexAttribPointers(Xe,C,ae);for(var Tt=0,kt=B;Tt<kt.length;Tt+=1){var bt=kt[Tt];bt.bind(),bt.setVertexAttribPointers(Xe,C,ae)}ue&&(ue.bind(),ue.setVertexAttribPointers(Xe,C,ae)),G&&G.bind(),ge&&(ge.bind(),ge.setVertexAttribPointers(Xe,C,ae)),He.currentNumAttributes=Ee},ss.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var js=function(C,z,B,G,ae){var ue=C.gl;this.program=ue.createProgram();var ge=B?B.defines():[];ae&&ge.push("#define OVERDRAW_INSPECTOR;");var _e=ge.concat(ri.fragmentSource,z.fragmentSource).join(`
`),Ee=ge.concat(ri.vertexSource,z.vertexSource).join(`
`),He=ue.createShader(ue.FRAGMENT_SHADER);if(ue.isContextLost())this.failedToCreate=!0;else{ue.shaderSource(He,_e),ue.compileShader(He),ue.attachShader(this.program,He);var Xe=ue.createShader(ue.VERTEX_SHADER);if(ue.isContextLost())this.failedToCreate=!0;else{ue.shaderSource(Xe,Ee),ue.compileShader(Xe),ue.attachShader(this.program,Xe);for(var at=B?B.layoutAttributes:[],_t=0;_t<at.length;_t++)ue.bindAttribLocation(this.program,_t,at[_t].name);ue.linkProgram(this.program),ue.deleteShader(Xe),ue.deleteShader(He),this.numAttributes=ue.getProgramParameter(this.program,ue.ACTIVE_ATTRIBUTES),this.attributes={};for(var St={},Tt=0;Tt<this.numAttributes;Tt++){var kt=ue.getActiveAttrib(this.program,Tt);kt&&(this.attributes[kt.name]=ue.getAttribLocation(this.program,kt.name))}for(var bt=ue.getProgramParameter(this.program,ue.ACTIVE_UNIFORMS),Nt=0;Nt<bt;Nt++){var zt=ue.getActiveUniform(this.program,Nt);zt&&(St[zt.name]=ue.getUniformLocation(this.program,zt.name))}this.fixedUniforms=G(C,St),this.binderUniforms=B?B.getUniforms(C,St):[]}}};function Us(C,z,B){var G=1/Ar(B,1,z.transform.tileZoom),ae=Math.pow(2,B.tileID.overscaledZ),ue=B.tileSize*Math.pow(2,z.transform.tileZoom)/ae,ge=ue*(B.tileID.canonical.x+B.tileID.wrap*ae),_e=ue*B.tileID.canonical.y;return{u_image:0,u_texsize:B.imageAtlasTexture.size,u_scale:[G,C.fromScale,C.toScale],u_fade:C.t,u_pixel_coord_upper:[ge>>16,_e>>16],u_pixel_coord_lower:[65535&ge,65535&_e]}}js.prototype.draw=function(C,z,B,G,ae,ue,ge,_e,Ee,He,Xe,at,_t,St,Tt,kt){var bt,Nt=C.gl;if(!this.failedToCreate){for(var zt in C.program.set(this.program),C.setDepthMode(B),C.setStencilMode(G),C.setColorMode(ae),C.setCullFace(ue),this.fixedUniforms)this.fixedUniforms[zt].set(ge[zt]);St&&St.setUniforms(C,this.binderUniforms,at,{zoom:_t});for(var Ut=(bt={},bt[Nt.LINES]=2,bt[Nt.TRIANGLES]=3,bt[Nt.LINE_STRIP]=1,bt)[z],nr=0,pr=Xe.get();nr<pr.length;nr+=1){var Mr=pr[nr],kr=Mr.vaos||(Mr.vaos={});(kr[_e]||(kr[_e]=new ss)).bind(C,this,Ee,St?St.getPaintVertexBuffers():[],He,Mr.vertexOffset,Tt,kt),Nt.drawElements(z,Mr.primitiveLength*Ut,Nt.UNSIGNED_SHORT,Mr.primitiveOffset*Ut*2)}}};var Ds=function(C,z,B,G){var ae=z.style.light,ue=ae.properties.get("position"),ge=[ue.x,ue.y,ue.z],_e=e.create$1();ae.properties.get("anchor")==="viewport"&&e.fromRotation(_e,-z.transform.angle),e.transformMat3(ge,ge,_e);var Ee=ae.properties.get("color");return{u_matrix:C,u_lightpos:ge,u_lightintensity:ae.properties.get("intensity"),u_lightcolor:[Ee.r,Ee.g,Ee.b],u_vertical_gradient:+B,u_opacity:G}},Vs=function(C,z,B,G,ae,ue,ge){return e.extend(Ds(C,z,B,G),Us(ue,z,ge),{u_height_factor:-Math.pow(2,ae.overscaledZ)/ge.tileSize/8})},Co=function(C){return{u_matrix:C}},Po=function(C,z,B,G){return e.extend(Co(C),Us(B,z,G))},Go=function(C,z){return{u_matrix:C,u_world:z}},Yo=function(C,z,B,G,ae){return e.extend(Po(C,z,B,G),{u_world:ae})},Wo=function(C,z,B,G){var ae,ue,ge=C.transform;if(G.paint.get("circle-pitch-alignment")==="map"){var _e=Ar(B,1,ge.zoom);ae=!0,ue=[_e,_e]}else ae=!1,ue=ge.pixelsToGLUnits;return{u_camera_to_center_distance:ge.cameraToCenterDistance,u_scale_with_map:+(G.paint.get("circle-pitch-scale")==="map"),u_matrix:C.translatePosMatrix(z.posMatrix,B,G.paint.get("circle-translate"),G.paint.get("circle-translate-anchor")),u_pitch_with_map:+ae,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:ue}},ls=function(C,z,B){var G=Ar(B,1,z.zoom),ae=Math.pow(2,z.zoom-B.tileID.overscaledZ),ue=B.tileID.overscaleFactor();return{u_matrix:C,u_camera_to_center_distance:z.cameraToCenterDistance,u_pixels_to_tile_units:G,u_extrude_scale:[z.pixelsToGLUnits[0]/(G*ae),z.pixelsToGLUnits[1]/(G*ae)],u_overscale_factor:ue}},yo=function(C,z,B){return{u_matrix:C,u_inv_matrix:z,u_camera_to_center_distance:B.cameraToCenterDistance,u_viewport_size:[B.width,B.height]}},ks=function(C,z,B){return B===void 0&&(B=1),{u_matrix:C,u_color:z,u_overlay:0,u_overlay_scale:B}},fo=function(C){return{u_matrix:C}},Zo=function(C,z,B,G){return{u_matrix:C,u_extrude_scale:Ar(z,1,B),u_intensity:G}};function As(C,z){var B=Math.pow(2,z.canonical.z),G=z.canonical.y;return[new e.MercatorCoordinate(0,G/B).toLngLat().lat,new e.MercatorCoordinate(0,(G+1)/B).toLngLat().lat]}var Io=function(C,z,B){var G=C.transform;return{u_matrix:ot(C,z,B),u_ratio:1/Ar(z,1,G.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/G.pixelsToGLUnits[0],1/G.pixelsToGLUnits[1]]}},Ui=function(C,z,B){return e.extend(Io(C,z,B),{u_image:0})},je=function(C,z,B,G){var ae=C.transform,ue=tt(z,ae);return{u_matrix:ot(C,z,B),u_texsize:z.imageAtlasTexture.size,u_ratio:1/Ar(z,1,ae.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[ue,G.fromScale,G.toScale],u_fade:G.t,u_units_to_pixels:[1/ae.pixelsToGLUnits[0],1/ae.pixelsToGLUnits[1]]}},Ge=function(C,z,B,G,ae){var ue=C.transform,ge=C.lineAtlas,_e=tt(z,ue),Ee=B.layout.get("line-cap")==="round",He=ge.getDash(G.from,Ee),Xe=ge.getDash(G.to,Ee),at=He.width*ae.fromScale,_t=Xe.width*ae.toScale;return e.extend(Io(C,z,B),{u_patternscale_a:[_e/at,-He.height/2],u_patternscale_b:[_e/_t,-Xe.height/2],u_sdfgamma:ge.width/(256*Math.min(at,_t)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:He.y,u_tex_y_b:Xe.y,u_mix:ae.t})};function tt(C,z){return 1/Ar(C,1,z.tileZoom)}function ot(C,z,B){return C.translatePosMatrix(z.tileID.posMatrix,z,B.paint.get("line-translate"),B.paint.get("line-translate-anchor"))}var yt=function(C,z,B,G,ae){return{u_matrix:C,u_tl_parent:z,u_scale_parent:B,u_buffer_scale:1,u_fade_t:G.mix,u_opacity:G.opacity*ae.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ae.paint.get("raster-brightness-min"),u_brightness_high:ae.paint.get("raster-brightness-max"),u_saturation_factor:(ge=ae.paint.get("raster-saturation"),ge>0?1-1/(1.001-ge):-ge),u_contrast_factor:(ue=ae.paint.get("raster-contrast"),ue>0?1/(1-ue):1+ue),u_spin_weights:gt(ae.paint.get("raster-hue-rotate"))};var ue,ge};function gt(C){C*=Math.PI/180;var z=Math.sin(C),B=Math.cos(C);return[(2*B+1)/3,(-Math.sqrt(3)*z-B+1)/3,(Math.sqrt(3)*z-B+1)/3]}var Mt,$t=function(C,z,B,G,ae,ue,ge,_e,Ee,He){var Xe=ae.transform;return{u_is_size_zoom_constant:+(C==="constant"||C==="source"),u_is_size_feature_constant:+(C==="constant"||C==="camera"),u_size_t:z?z.uSizeT:0,u_size:z?z.uSize:0,u_camera_to_center_distance:Xe.cameraToCenterDistance,u_pitch:Xe.pitch/360*2*Math.PI,u_rotate_symbol:+B,u_aspect_ratio:Xe.width/Xe.height,u_fade_change:ae.options.fadeDuration?ae.symbolFadeChange:1,u_matrix:ue,u_label_plane_matrix:ge,u_coord_matrix:_e,u_is_text:+Ee,u_pitch_with_map:+G,u_texsize:He,u_texture:0}},er=function(C,z,B,G,ae,ue,ge,_e,Ee,He,Xe){var at=ae.transform;return e.extend($t(C,z,B,G,ae,ue,ge,_e,Ee,He),{u_gamma_scale:G?Math.cos(at._pitch)*at.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+Xe})},Xt=function(C,z,B,G,ae,ue,ge,_e,Ee,He){return e.extend(er(C,z,B,G,ae,ue,ge,_e,!0,Ee,!0),{u_texsize_icon:He,u_texture_icon:1})},ir=function(C,z,B){return{u_matrix:C,u_opacity:z,u_color:B}},hr=function(C,z,B,G,ae,ue){return e.extend(function(ge,_e,Ee,He){var Xe=Ee.imageManager.getPattern(ge.from.toString()),at=Ee.imageManager.getPattern(ge.to.toString()),_t=Ee.imageManager.getPixelSize(),St=_t.width,Tt=_t.height,kt=Math.pow(2,He.tileID.overscaledZ),bt=He.tileSize*Math.pow(2,Ee.transform.tileZoom)/kt,Nt=bt*(He.tileID.canonical.x+He.tileID.wrap*kt),zt=bt*He.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Xe.tl,u_pattern_br_a:Xe.br,u_pattern_tl_b:at.tl,u_pattern_br_b:at.br,u_texsize:[St,Tt],u_mix:_e.t,u_pattern_size_a:Xe.displaySize,u_pattern_size_b:at.displaySize,u_scale_a:_e.fromScale,u_scale_b:_e.toScale,u_tile_units_to_pixels:1/Ar(He,1,Ee.transform.tileZoom),u_pixel_coord_upper:[Nt>>16,zt>>16],u_pixel_coord_lower:[65535&Nt,65535&zt]}}(G,ue,B,ae),{u_matrix:C,u_opacity:z})},xr={fillExtrusion:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_lightpos:new e.Uniform3f(C,z.u_lightpos),u_lightintensity:new e.Uniform1f(C,z.u_lightintensity),u_lightcolor:new e.Uniform3f(C,z.u_lightcolor),u_vertical_gradient:new e.Uniform1f(C,z.u_vertical_gradient),u_opacity:new e.Uniform1f(C,z.u_opacity)}},fillExtrusionPattern:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_lightpos:new e.Uniform3f(C,z.u_lightpos),u_lightintensity:new e.Uniform1f(C,z.u_lightintensity),u_lightcolor:new e.Uniform3f(C,z.u_lightcolor),u_vertical_gradient:new e.Uniform1f(C,z.u_vertical_gradient),u_height_factor:new e.Uniform1f(C,z.u_height_factor),u_image:new e.Uniform1i(C,z.u_image),u_texsize:new e.Uniform2f(C,z.u_texsize),u_pixel_coord_upper:new e.Uniform2f(C,z.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(C,z.u_pixel_coord_lower),u_scale:new e.Uniform3f(C,z.u_scale),u_fade:new e.Uniform1f(C,z.u_fade),u_opacity:new e.Uniform1f(C,z.u_opacity)}},fill:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix)}},fillPattern:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_image:new e.Uniform1i(C,z.u_image),u_texsize:new e.Uniform2f(C,z.u_texsize),u_pixel_coord_upper:new e.Uniform2f(C,z.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(C,z.u_pixel_coord_lower),u_scale:new e.Uniform3f(C,z.u_scale),u_fade:new e.Uniform1f(C,z.u_fade)}},fillOutline:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_world:new e.Uniform2f(C,z.u_world)}},fillOutlinePattern:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_world:new e.Uniform2f(C,z.u_world),u_image:new e.Uniform1i(C,z.u_image),u_texsize:new e.Uniform2f(C,z.u_texsize),u_pixel_coord_upper:new e.Uniform2f(C,z.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(C,z.u_pixel_coord_lower),u_scale:new e.Uniform3f(C,z.u_scale),u_fade:new e.Uniform1f(C,z.u_fade)}},circle:function(C,z){return{u_camera_to_center_distance:new e.Uniform1f(C,z.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(C,z.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(C,z.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(C,z.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(C,z.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(C,z.u_matrix)}},collisionBox:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_camera_to_center_distance:new e.Uniform1f(C,z.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(C,z.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(C,z.u_extrude_scale),u_overscale_factor:new e.Uniform1f(C,z.u_overscale_factor)}},collisionCircle:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_inv_matrix:new e.UniformMatrix4f(C,z.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(C,z.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(C,z.u_viewport_size)}},debug:function(C,z){return{u_color:new e.UniformColor(C,z.u_color),u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_overlay:new e.Uniform1i(C,z.u_overlay),u_overlay_scale:new e.Uniform1f(C,z.u_overlay_scale)}},clippingMask:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix)}},heatmap:function(C,z){return{u_extrude_scale:new e.Uniform1f(C,z.u_extrude_scale),u_intensity:new e.Uniform1f(C,z.u_intensity),u_matrix:new e.UniformMatrix4f(C,z.u_matrix)}},heatmapTexture:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_world:new e.Uniform2f(C,z.u_world),u_image:new e.Uniform1i(C,z.u_image),u_color_ramp:new e.Uniform1i(C,z.u_color_ramp),u_opacity:new e.Uniform1f(C,z.u_opacity)}},hillshade:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_image:new e.Uniform1i(C,z.u_image),u_latrange:new e.Uniform2f(C,z.u_latrange),u_light:new e.Uniform2f(C,z.u_light),u_shadow:new e.UniformColor(C,z.u_shadow),u_highlight:new e.UniformColor(C,z.u_highlight),u_accent:new e.UniformColor(C,z.u_accent)}},hillshadePrepare:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_image:new e.Uniform1i(C,z.u_image),u_dimension:new e.Uniform2f(C,z.u_dimension),u_zoom:new e.Uniform1f(C,z.u_zoom),u_maxzoom:new e.Uniform1f(C,z.u_maxzoom),u_unpack:new e.Uniform4f(C,z.u_unpack)}},line:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_ratio:new e.Uniform1f(C,z.u_ratio),u_device_pixel_ratio:new e.Uniform1f(C,z.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(C,z.u_units_to_pixels)}},lineGradient:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_ratio:new e.Uniform1f(C,z.u_ratio),u_device_pixel_ratio:new e.Uniform1f(C,z.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(C,z.u_units_to_pixels),u_image:new e.Uniform1i(C,z.u_image)}},linePattern:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_texsize:new e.Uniform2f(C,z.u_texsize),u_ratio:new e.Uniform1f(C,z.u_ratio),u_device_pixel_ratio:new e.Uniform1f(C,z.u_device_pixel_ratio),u_image:new e.Uniform1i(C,z.u_image),u_units_to_pixels:new e.Uniform2f(C,z.u_units_to_pixels),u_scale:new e.Uniform3f(C,z.u_scale),u_fade:new e.Uniform1f(C,z.u_fade)}},lineSDF:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_ratio:new e.Uniform1f(C,z.u_ratio),u_device_pixel_ratio:new e.Uniform1f(C,z.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(C,z.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(C,z.u_patternscale_a),u_patternscale_b:new e.Uniform2f(C,z.u_patternscale_b),u_sdfgamma:new e.Uniform1f(C,z.u_sdfgamma),u_image:new e.Uniform1i(C,z.u_image),u_tex_y_a:new e.Uniform1f(C,z.u_tex_y_a),u_tex_y_b:new e.Uniform1f(C,z.u_tex_y_b),u_mix:new e.Uniform1f(C,z.u_mix)}},raster:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_tl_parent:new e.Uniform2f(C,z.u_tl_parent),u_scale_parent:new e.Uniform1f(C,z.u_scale_parent),u_buffer_scale:new e.Uniform1f(C,z.u_buffer_scale),u_fade_t:new e.Uniform1f(C,z.u_fade_t),u_opacity:new e.Uniform1f(C,z.u_opacity),u_image0:new e.Uniform1i(C,z.u_image0),u_image1:new e.Uniform1i(C,z.u_image1),u_brightness_low:new e.Uniform1f(C,z.u_brightness_low),u_brightness_high:new e.Uniform1f(C,z.u_brightness_high),u_saturation_factor:new e.Uniform1f(C,z.u_saturation_factor),u_contrast_factor:new e.Uniform1f(C,z.u_contrast_factor),u_spin_weights:new e.Uniform3f(C,z.u_spin_weights)}},symbolIcon:function(C,z){return{u_is_size_zoom_constant:new e.Uniform1i(C,z.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(C,z.u_is_size_feature_constant),u_size_t:new e.Uniform1f(C,z.u_size_t),u_size:new e.Uniform1f(C,z.u_size),u_camera_to_center_distance:new e.Uniform1f(C,z.u_camera_to_center_distance),u_pitch:new e.Uniform1f(C,z.u_pitch),u_rotate_symbol:new e.Uniform1i(C,z.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(C,z.u_aspect_ratio),u_fade_change:new e.Uniform1f(C,z.u_fade_change),u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(C,z.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(C,z.u_coord_matrix),u_is_text:new e.Uniform1i(C,z.u_is_text),u_pitch_with_map:new e.Uniform1i(C,z.u_pitch_with_map),u_texsize:new e.Uniform2f(C,z.u_texsize),u_texture:new e.Uniform1i(C,z.u_texture)}},symbolSDF:function(C,z){return{u_is_size_zoom_constant:new e.Uniform1i(C,z.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(C,z.u_is_size_feature_constant),u_size_t:new e.Uniform1f(C,z.u_size_t),u_size:new e.Uniform1f(C,z.u_size),u_camera_to_center_distance:new e.Uniform1f(C,z.u_camera_to_center_distance),u_pitch:new e.Uniform1f(C,z.u_pitch),u_rotate_symbol:new e.Uniform1i(C,z.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(C,z.u_aspect_ratio),u_fade_change:new e.Uniform1f(C,z.u_fade_change),u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(C,z.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(C,z.u_coord_matrix),u_is_text:new e.Uniform1i(C,z.u_is_text),u_pitch_with_map:new e.Uniform1i(C,z.u_pitch_with_map),u_texsize:new e.Uniform2f(C,z.u_texsize),u_texture:new e.Uniform1i(C,z.u_texture),u_gamma_scale:new e.Uniform1f(C,z.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(C,z.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(C,z.u_is_halo)}},symbolTextAndIcon:function(C,z){return{u_is_size_zoom_constant:new e.Uniform1i(C,z.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(C,z.u_is_size_feature_constant),u_size_t:new e.Uniform1f(C,z.u_size_t),u_size:new e.Uniform1f(C,z.u_size),u_camera_to_center_distance:new e.Uniform1f(C,z.u_camera_to_center_distance),u_pitch:new e.Uniform1f(C,z.u_pitch),u_rotate_symbol:new e.Uniform1i(C,z.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(C,z.u_aspect_ratio),u_fade_change:new e.Uniform1f(C,z.u_fade_change),u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(C,z.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(C,z.u_coord_matrix),u_is_text:new e.Uniform1i(C,z.u_is_text),u_pitch_with_map:new e.Uniform1i(C,z.u_pitch_with_map),u_texsize:new e.Uniform2f(C,z.u_texsize),u_texsize_icon:new e.Uniform2f(C,z.u_texsize_icon),u_texture:new e.Uniform1i(C,z.u_texture),u_texture_icon:new e.Uniform1i(C,z.u_texture_icon),u_gamma_scale:new e.Uniform1f(C,z.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(C,z.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(C,z.u_is_halo)}},background:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_opacity:new e.Uniform1f(C,z.u_opacity),u_color:new e.UniformColor(C,z.u_color)}},backgroundPattern:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_opacity:new e.Uniform1f(C,z.u_opacity),u_image:new e.Uniform1i(C,z.u_image),u_pattern_tl_a:new e.Uniform2f(C,z.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(C,z.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(C,z.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(C,z.u_pattern_br_b),u_texsize:new e.Uniform2f(C,z.u_texsize),u_mix:new e.Uniform1f(C,z.u_mix),u_pattern_size_a:new e.Uniform2f(C,z.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(C,z.u_pattern_size_b),u_scale_a:new e.Uniform1f(C,z.u_scale_a),u_scale_b:new e.Uniform1f(C,z.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(C,z.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(C,z.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(C,z.u_tile_units_to_pixels)}}};function _r(C,z,B,G,ae,ue,ge){for(var _e=C.context,Ee=_e.gl,He=C.useProgram("collisionBox"),Xe=[],at=0,_t=0,St=0;St<G.length;St++){var Tt=G[St],kt=z.getTile(Tt),bt=kt.getBucket(B);if(bt){var Nt=Tt.posMatrix;ae[0]===0&&ae[1]===0||(Nt=C.translatePosMatrix(Tt.posMatrix,kt,ae,ue));var zt=ge?bt.textCollisionBox:bt.iconCollisionBox,Ut=bt.collisionCircleArray;if(Ut.length>0){var nr=e.create(),pr=Nt;e.mul(nr,bt.placementInvProjMatrix,C.transform.glCoordMatrix),e.mul(nr,nr,bt.placementViewportMatrix),Xe.push({circleArray:Ut,circleOffset:_t,transform:pr,invTransform:nr}),_t=at+=Ut.length/4}zt&&He.draw(_e,Ee.LINES,Je.disabled,Se.disabled,C.colorModeForRenderPass(),De.disabled,ls(Nt,C.transform,kt),B.id,zt.layoutVertexBuffer,zt.indexBuffer,zt.segments,null,C.transform.zoom,null,null,zt.collisionVertexBuffer)}}if(ge&&Xe.length){var Mr=C.useProgram("collisionCircle"),kr=new e.StructArrayLayout2f1f2i16;kr.resize(4*at),kr._trim();for(var Qr=0,$r=0,pn=Xe;$r<pn.length;$r+=1)for(var sn=pn[$r],Un=0;Un<sn.circleArray.length/4;Un++){var Wn=4*Un,li=sn.circleArray[Wn+0],Hr=sn.circleArray[Wn+1],kn=sn.circleArray[Wn+2],Zn=sn.circleArray[Wn+3];kr.emplace(Qr++,li,Hr,kn,Zn,0),kr.emplace(Qr++,li,Hr,kn,Zn,1),kr.emplace(Qr++,li,Hr,kn,Zn,2),kr.emplace(Qr++,li,Hr,kn,Zn,3)}(!Mt||Mt.length<2*at)&&(Mt=function(mi){var Ei=2*mi,xi=new e.StructArrayLayout3ui6;xi.resize(Ei),xi._trim();for(var Li=0;Li<Ei;Li++){var Bi=6*Li;xi.uint16[Bi+0]=4*Li+0,xi.uint16[Bi+1]=4*Li+1,xi.uint16[Bi+2]=4*Li+2,xi.uint16[Bi+3]=4*Li+2,xi.uint16[Bi+4]=4*Li+3,xi.uint16[Bi+5]=4*Li+0}return xi}(at));for(var qn=_e.createIndexBuffer(Mt,!0),ei=_e.createVertexBuffer(kr,e.collisionCircleLayout.members,!0),ui=0,ki=Xe;ui<ki.length;ui+=1){var Jn=ki[ui],yi=yo(Jn.transform,Jn.invTransform,C.transform);Mr.draw(_e,Ee.TRIANGLES,Je.disabled,Se.disabled,C.colorModeForRenderPass(),De.disabled,yi,B.id,ei,qn,e.SegmentVector.simpleSegment(0,2*Jn.circleOffset,Jn.circleArray.length,Jn.circleArray.length/2),null,C.transform.zoom,null,null,null)}ei.destroy(),qn.destroy()}}var Or=e.identity(new Float32Array(16));function rn(C,z,B,G,ae,ue){var ge=e.getAnchorAlignment(C),_e=-(ge.horizontalAlign-.5)*z,Ee=-(ge.verticalAlign-.5)*B,He=e.evaluateVariableOffset(C,G);return new e.Point((_e/ae+He[0])*ue,(Ee/ae+He[1])*ue)}function dn(C,z,B,G,ae,ue,ge,_e,Ee,He,Xe){var at=C.text.placedSymbolArray,_t=C.text.dynamicLayoutVertexArray,St=C.icon.dynamicLayoutVertexArray,Tt={};_t.clear();for(var kt=0;kt<at.length;kt++){var bt=at.get(kt),Nt=C.allowVerticalPlacement&&!bt.placedOrientation,zt=bt.hidden||!bt.crossTileID||Nt?null:G[bt.crossTileID];if(zt){var Ut=new e.Point(bt.anchorX,bt.anchorY),nr=ur(Ut,B?_e:ge),pr=cr(ue.cameraToCenterDistance,nr.signedDistanceFromCamera),Mr=ae.evaluateSizeForFeature(C.textSizeData,He,bt)*pr/e.ONE_EM;B&&(Mr*=C.tilePixelRatio/Ee);for(var kr=zt.width,Qr=zt.height,$r=rn(zt.anchor,kr,Qr,zt.textOffset,zt.textBoxScale,Mr),pn=B?ur(Ut.add($r),ge).point:nr.point.add(z?$r.rotate(-ue.angle):$r),sn=C.allowVerticalPlacement&&bt.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,Un=0;Un<bt.numGlyphs;Un++)e.addDynamicAttributes(_t,pn,sn);Xe&&bt.associatedIconIndex>=0&&(Tt[bt.associatedIconIndex]={shiftedAnchor:pn,angle:sn})}else An(bt.numGlyphs,_t)}if(Xe){St.clear();for(var Wn=C.icon.placedSymbolArray,li=0;li<Wn.length;li++){var Hr=Wn.get(li);if(Hr.hidden)An(Hr.numGlyphs,St);else{var kn=Tt[li];if(kn)for(var Zn=0;Zn<Hr.numGlyphs;Zn++)e.addDynamicAttributes(St,kn.shiftedAnchor,kn.angle);else An(Hr.numGlyphs,St)}}C.icon.dynamicLayoutVertexBuffer.updateData(St)}C.text.dynamicLayoutVertexBuffer.updateData(_t)}function Cn(C,z,B){return B.iconsInText&&z?"symbolTextAndIcon":C?"symbolSDF":"symbolIcon"}function zn(C,z,B,G,ae,ue,ge,_e,Ee,He,Xe,at){for(var _t=C.context,St=_t.gl,Tt=C.transform,kt=_e==="map",bt=Ee==="map",Nt=kt&&B.layout.get("symbol-placement")!=="point",zt=kt&&!bt&&!Nt,Ut=B.layout.get("symbol-sort-key").constantOr(1)!==void 0,nr=C.depthModeForSublayer(0,Je.ReadOnly),pr=B.layout.get("text-variable-anchor"),Mr=[],kr=0,Qr=G;kr<Qr.length;kr+=1){var $r=Qr[kr],pn=z.getTile($r),sn=pn.getBucket(B);if(sn){var Un=ae?sn.text:sn.icon;if(Un&&Un.segments.get().length){var Wn=Un.programConfigurations.get(B.id),li=ae||sn.sdfIcons,Hr=ae?sn.textSizeData:sn.iconSizeData,kn=bt||Tt.pitch!==0,Zn=C.useProgram(Cn(li,ae,sn),Wn),qn=e.evaluateSizeForZoom(Hr,Tt.zoom),ei=void 0,ui=[0,0],ki=void 0,Jn=void 0,yi=null,mi=void 0;if(ae){if(ki=pn.glyphAtlasTexture,Jn=St.LINEAR,ei=pn.glyphAtlasTexture.size,sn.iconsInText){ui=pn.imageAtlasTexture.size,yi=pn.imageAtlasTexture;var Ei=Hr.kind==="composite"||Hr.kind==="camera";mi=kn||C.options.rotating||C.options.zooming||Ei?St.LINEAR:St.NEAREST}}else{var xi=B.layout.get("icon-size").constantOr(0)!==1||sn.iconsNeedLinear;ki=pn.imageAtlasTexture,Jn=li||C.options.rotating||C.options.zooming||xi||kn?St.LINEAR:St.NEAREST,ei=pn.imageAtlasTexture.size}var Li=Ar(pn,1,C.transform.zoom),Bi=gr($r.posMatrix,bt,kt,C.transform,Li),ca=dr($r.posMatrix,bt,kt,C.transform,Li),Ia=pr&&sn.hasTextData(),Oa=B.layout.get("icon-text-fit")!=="none"&&Ia&&sn.hasIconData();Nt&&Dr(sn,$r.posMatrix,C,ae,Bi,ca,bt,He);var la=C.translatePosMatrix($r.posMatrix,pn,ue,ge),Aa=Nt||ae&&pr||Oa?Or:Bi,ma=C.translatePosMatrix(ca,pn,ue,ge,!0),_o=li&&B.paint.get(ae?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Wa={program:Zn,buffers:Un,uniformValues:li?sn.iconsInText?Xt(Hr.kind,qn,zt,bt,C,la,Aa,ma,ei,ui):er(Hr.kind,qn,zt,bt,C,la,Aa,ma,ae,ei,!0):$t(Hr.kind,qn,zt,bt,C,la,Aa,ma,ae,ei),atlasTexture:ki,atlasTextureIcon:yi,atlasInterpolation:Jn,atlasInterpolationIcon:mi,isSDF:li,hasHalo:_o};if(Ut)for(var No=0,Rs=Un.segments.get();No<Rs.length;No+=1){var ol=Rs[No];Mr.push({segments:new e.SegmentVector([ol]),sortKey:ol.sortKey,state:Wa})}else Mr.push({segments:Un.segments,sortKey:0,state:Wa})}}}Ut&&Mr.sort(function(Yl,hs){return Yl.sortKey-hs.sortKey});for(var Gl=0,Cl=Mr;Gl<Cl.length;Gl+=1){var Pl=Cl[Gl],wo=Pl.state;if(_t.activeTexture.set(St.TEXTURE0),wo.atlasTexture.bind(wo.atlasInterpolation,St.CLAMP_TO_EDGE),wo.atlasTextureIcon&&(_t.activeTexture.set(St.TEXTURE1),wo.atlasTextureIcon&&wo.atlasTextureIcon.bind(wo.atlasInterpolationIcon,St.CLAMP_TO_EDGE)),wo.isSDF){var vl=wo.uniformValues;wo.hasHalo&&(vl.u_is_halo=1,Hn(wo.buffers,Pl.segments,B,C,wo.program,nr,Xe,at,vl)),vl.u_is_halo=0}Hn(wo.buffers,Pl.segments,B,C,wo.program,nr,Xe,at,wo.uniformValues)}}function Hn(C,z,B,G,ae,ue,ge,_e,Ee){var He=G.context,Xe=He.gl;ae.draw(He,Xe.TRIANGLES,ue,ge,_e,De.disabled,Ee,B.id,C.layoutVertexBuffer,C.indexBuffer,z,B.paint,G.transform.zoom,C.programConfigurations.get(B.id),C.dynamicLayoutVertexBuffer,C.opacityVertexBuffer)}function Rn(C,z,B,G,ae,ue,ge){var _e,Ee,He,Xe,at,_t=C.context.gl,St=B.paint.get("fill-pattern"),Tt=St&&St.constantOr(1),kt=B.getCrossfadeParameters();ge?(Ee=Tt&&!B.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",_e=_t.LINES):(Ee=Tt?"fillPattern":"fill",_e=_t.TRIANGLES);for(var bt=0,Nt=G;bt<Nt.length;bt+=1){var zt=Nt[bt],Ut=z.getTile(zt);if(!Tt||Ut.patternsLoaded()){var nr=Ut.getBucket(B);if(nr){var pr=nr.programConfigurations.get(B.id),Mr=C.useProgram(Ee,pr);Tt&&(C.context.activeTexture.set(_t.TEXTURE0),Ut.imageAtlasTexture.bind(_t.LINEAR,_t.CLAMP_TO_EDGE),pr.updatePaintBuffers(kt));var kr=St.constantOr(null);if(kr&&Ut.imageAtlas){var Qr=Ut.imageAtlas,$r=Qr.patternPositions[kr.to.toString()],pn=Qr.patternPositions[kr.from.toString()];$r&&pn&&pr.setConstantPatternPositions($r,pn)}var sn=C.translatePosMatrix(zt.posMatrix,Ut,B.paint.get("fill-translate"),B.paint.get("fill-translate-anchor"));if(ge){Xe=nr.indexBuffer2,at=nr.segments2;var Un=[_t.drawingBufferWidth,_t.drawingBufferHeight];He=Ee==="fillOutlinePattern"&&Tt?Yo(sn,C,kt,Ut,Un):Go(sn,Un)}else Xe=nr.indexBuffer,at=nr.segments,He=Tt?Po(sn,C,kt,Ut):Co(sn);Mr.draw(C.context,_e,ae,C.stencilModeForClipping(zt),ue,De.disabled,He,B.id,nr.layoutVertexBuffer,Xe,at,B.paint,C.transform.zoom,pr)}}}}function di(C,z,B,G,ae,ue,ge){for(var _e=C.context,Ee=_e.gl,He=B.paint.get("fill-extrusion-pattern"),Xe=He.constantOr(1),at=B.getCrossfadeParameters(),_t=B.paint.get("fill-extrusion-opacity"),St=0,Tt=G;St<Tt.length;St+=1){var kt=Tt[St],bt=z.getTile(kt),Nt=bt.getBucket(B);if(Nt){var zt=Nt.programConfigurations.get(B.id),Ut=C.useProgram(Xe?"fillExtrusionPattern":"fillExtrusion",zt);Xe&&(C.context.activeTexture.set(Ee.TEXTURE0),bt.imageAtlasTexture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),zt.updatePaintBuffers(at));var nr=He.constantOr(null);if(nr&&bt.imageAtlas){var pr=bt.imageAtlas,Mr=pr.patternPositions[nr.to.toString()],kr=pr.patternPositions[nr.from.toString()];Mr&&kr&&zt.setConstantPatternPositions(Mr,kr)}var Qr=C.translatePosMatrix(kt.posMatrix,bt,B.paint.get("fill-extrusion-translate"),B.paint.get("fill-extrusion-translate-anchor")),$r=B.paint.get("fill-extrusion-vertical-gradient"),pn=Xe?Vs(Qr,C,$r,_t,kt,at,bt):Ds(Qr,C,$r,_t);Ut.draw(_e,_e.gl.TRIANGLES,ae,ue,ge,De.backCCW,pn,B.id,Nt.layoutVertexBuffer,Nt.indexBuffer,Nt.segments,B.paint,C.transform.zoom,zt)}}}function wi(C,z,B,G,ae,ue){var ge=C.context,_e=ge.gl,Ee=z.fbo;if(Ee){var He=C.useProgram("hillshade");ge.activeTexture.set(_e.TEXTURE0),_e.bindTexture(_e.TEXTURE_2D,Ee.colorAttachment.get());var Xe=function(at,_t,St){var Tt=St.paint.get("hillshade-shadow-color"),kt=St.paint.get("hillshade-highlight-color"),bt=St.paint.get("hillshade-accent-color"),Nt=St.paint.get("hillshade-illumination-direction")*(Math.PI/180);St.paint.get("hillshade-illumination-anchor")==="viewport"&&(Nt-=at.transform.angle);var zt=!at.options.moving;return{u_matrix:at.transform.calculatePosMatrix(_t.tileID.toUnwrapped(),zt),u_image:0,u_latrange:As(at,_t.tileID),u_light:[St.paint.get("hillshade-exaggeration"),Nt],u_shadow:Tt,u_highlight:kt,u_accent:bt}}(C,z,B);He.draw(ge,_e.TRIANGLES,G,ae,ue,De.disabled,Xe,B.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}}function Ri(C,z,B,G,ae,ue,ge){var _e=C.context,Ee=_e.gl,He=z.dem;if(He&&He.data){var Xe=He.dim,at=He.stride,_t=He.getPixels();if(_e.activeTexture.set(Ee.TEXTURE1),_e.pixelStoreUnpackPremultiplyAlpha.set(!1),z.demTexture=z.demTexture||C.getTileTexture(at),z.demTexture){var St=z.demTexture;St.update(_t,{premultiply:!1}),St.bind(Ee.NEAREST,Ee.CLAMP_TO_EDGE)}else z.demTexture=new e.Texture(_e,_t,Ee.RGBA,{premultiply:!1}),z.demTexture.bind(Ee.NEAREST,Ee.CLAMP_TO_EDGE);_e.activeTexture.set(Ee.TEXTURE0);var Tt=z.fbo;if(!Tt){var kt=new e.Texture(_e,{width:Xe,height:Xe,data:null},Ee.RGBA);kt.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),(Tt=z.fbo=_e.createFramebuffer(Xe,Xe,!0)).colorAttachment.set(kt.texture)}_e.bindFramebuffer.set(Tt.framebuffer),_e.viewport.set([0,0,Xe,Xe]),C.useProgram("hillshadePrepare").draw(_e,Ee.TRIANGLES,ae,ue,ge,De.disabled,function(bt,Nt,zt){var Ut=Nt.stride,nr=e.create();return e.ortho(nr,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(nr,nr,[0,-e.EXTENT,0]),{u_matrix:nr,u_image:1,u_dimension:[Ut,Ut],u_zoom:bt.overscaledZ,u_maxzoom:zt,u_unpack:Nt.getUnpackVector()}}(z.tileID,He,G),B.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments),z.needsHillshadePrepare=!1}}function Di(C,z,B,G,ae){var ue=G.paint.get("raster-fade-duration");if(ue>0){var ge=e.browser.now(),_e=(ge-C.timeAdded)/ue,Ee=z?(ge-z.timeAdded)/ue:-1,He=B.getSource(),Xe=ae.coveringZoomLevel({tileSize:He.tileSize,roundZoom:He.roundZoom}),at=!z||Math.abs(z.tileID.overscaledZ-Xe)>Math.abs(C.tileID.overscaledZ-Xe),_t=at&&C.refreshedUponExpiration?1:e.clamp(at?_e:1-Ee,0,1);return C.refreshedUponExpiration&&_e>=1&&(C.refreshedUponExpiration=!1),z?{opacity:1,mix:1-_t}:{opacity:_t,mix:0}}return{opacity:1,mix:0}}var Fi=new e.Color(1,0,0,1),Ta=new e.Color(0,1,0,1),xa=new e.Color(0,0,1,1),aa=new e.Color(1,0,1,1),oa=new e.Color(0,1,1,1);function ba(C){var z=C.transform.padding;ja(C,C.transform.height-(z.top||0),3,Fi),ja(C,z.bottom||0,3,Ta),eo(C,z.left||0,3,xa),eo(C,C.transform.width-(z.right||0),3,aa);var B=C.transform.centerPoint;(function(G,ae,ue,ge){to(G,ae-1,ue-10,2,20,ge),to(G,ae-10,ue-1,20,2,ge)})(C,B.x,C.transform.height-B.y,oa)}function ja(C,z,B,G){to(C,0,z+B/2,C.transform.width,B,G)}function eo(C,z,B,G){to(C,z-B/2,0,B,C.transform.height,G)}function to(C,z,B,G,ae,ue){var ge=C.context,_e=ge.gl;_e.enable(_e.SCISSOR_TEST),_e.scissor(z*e.browser.devicePixelRatio,B*e.browser.devicePixelRatio,G*e.browser.devicePixelRatio,ae*e.browser.devicePixelRatio),ge.clear({color:ue}),_e.disable(_e.SCISSOR_TEST)}function ro(C,z,B){var G=C.context,ae=G.gl,ue=B.posMatrix,ge=C.useProgram("debug"),_e=Je.disabled,Ee=Se.disabled,He=C.colorModeForRenderPass();G.activeTexture.set(ae.TEXTURE0),C.emptyTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),ge.draw(G,ae.LINE_STRIP,_e,Ee,He,De.disabled,ks(ue,e.Color.red),"$debug",C.debugBuffer,C.tileBorderIndexBuffer,C.debugSegments);var Xe=z.getTileByID(B.key).latestRawTileData,at=Xe&&Xe.byteLength||0,_t=Math.floor(at/1024),St=z.getTile(B).tileSize,Tt=512/Math.min(St,512)*(B.overscaledZ/C.transform.zoom)*.5,kt=B.canonical.toString();B.overscaledZ!==B.canonical.z&&(kt+=" => "+B.overscaledZ),function(bt,Nt){bt.initDebugOverlayCanvas();var zt=bt.debugOverlayCanvas,Ut=bt.context.gl,nr=bt.debugOverlayCanvas.getContext("2d");nr.clearRect(0,0,zt.width,zt.height),nr.shadowColor="white",nr.shadowBlur=2,nr.lineWidth=1.5,nr.strokeStyle="white",nr.textBaseline="top",nr.font="bold 36px Open Sans, sans-serif",nr.fillText(Nt,5,5),nr.strokeText(Nt,5,5),bt.debugOverlayTexture.update(zt),bt.debugOverlayTexture.bind(Ut.LINEAR,Ut.CLAMP_TO_EDGE)}(C,kt+" "+_t+"kb"),ge.draw(G,ae.TRIANGLES,_e,Ee,Pe.alphaBlended,De.disabled,ks(ue,e.Color.transparent,Tt),"$debug",C.debugBuffer,C.quadTriangleIndexBuffer,C.debugSegments)}var no={symbol:function(C,z,B,G,ae){if(C.renderPass==="translucent"){var ue=Se.disabled,ge=C.colorModeForRenderPass();B.layout.get("text-variable-anchor")&&function(_e,Ee,He,Xe,at,_t,St){for(var Tt=Ee.transform,kt=at==="map",bt=_t==="map",Nt=0,zt=_e;Nt<zt.length;Nt+=1){var Ut=zt[Nt],nr=Xe.getTile(Ut),pr=nr.getBucket(He);if(pr&&pr.text&&pr.text.segments.get().length){var Mr=pr.textSizeData,kr=e.evaluateSizeForZoom(Mr,Tt.zoom),Qr=Ar(nr,1,Ee.transform.zoom),$r=gr(Ut.posMatrix,bt,kt,Ee.transform,Qr),pn=He.layout.get("icon-text-fit")!=="none"&&pr.hasIconData();if(kr){var sn=Math.pow(2,Tt.zoom-nr.tileID.overscaledZ);dn(pr,kt,bt,St,e.symbolSize,Tt,$r,Ut.posMatrix,sn,kr,pn)}}}}(G,C,B,z,B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),ae),B.paint.get("icon-opacity").constantOr(1)!==0&&zn(C,z,B,G,!1,B.paint.get("icon-translate"),B.paint.get("icon-translate-anchor"),B.layout.get("icon-rotation-alignment"),B.layout.get("icon-pitch-alignment"),B.layout.get("icon-keep-upright"),ue,ge),B.paint.get("text-opacity").constantOr(1)!==0&&zn(C,z,B,G,!0,B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),B.layout.get("text-keep-upright"),ue,ge),z.map.showCollisionBoxes&&(_r(C,z,B,G,B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),!0),_r(C,z,B,G,B.paint.get("icon-translate"),B.paint.get("icon-translate-anchor"),!1))}},circle:function(C,z,B,G){if(C.renderPass==="translucent"){var ae=B.paint.get("circle-opacity"),ue=B.paint.get("circle-stroke-width"),ge=B.paint.get("circle-stroke-opacity"),_e=B.layout.get("circle-sort-key").constantOr(1)!==void 0;if(ae.constantOr(1)!==0||ue.constantOr(1)!==0&&ge.constantOr(1)!==0){for(var Ee=C.context,He=Ee.gl,Xe=C.depthModeForSublayer(0,Je.ReadOnly),at=Se.disabled,_t=C.colorModeForRenderPass(),St=[],Tt=0;Tt<G.length;Tt++){var kt=G[Tt],bt=z.getTile(kt),Nt=bt.getBucket(B);if(Nt){var zt=Nt.programConfigurations.get(B.id),Ut={programConfiguration:zt,program:C.useProgram("circle",zt),layoutVertexBuffer:Nt.layoutVertexBuffer,indexBuffer:Nt.indexBuffer,uniformValues:Wo(C,kt,bt,B)};if(_e)for(var nr=0,pr=Nt.segments.get();nr<pr.length;nr+=1){var Mr=pr[nr];St.push({segments:new e.SegmentVector([Mr]),sortKey:Mr.sortKey,state:Ut})}else St.push({segments:Nt.segments,sortKey:0,state:Ut})}}_e&&St.sort(function(Zn,qn){return Zn.sortKey-qn.sortKey});for(var kr=0,Qr=St;kr<Qr.length;kr+=1){var $r=Qr[kr],pn=$r.state,sn=pn.programConfiguration,Un=pn.program,Wn=pn.layoutVertexBuffer,li=pn.indexBuffer,Hr=pn.uniformValues,kn=$r.segments;Un.draw(Ee,He.TRIANGLES,Xe,at,_t,De.disabled,Hr,B.id,Wn,li,kn,B.paint,C.transform.zoom,sn)}}}},heatmap:function(C,z,B,G){if(B.paint.get("heatmap-opacity")!==0)if(C.renderPass==="offscreen"){var ae=C.context,ue=ae.gl,ge=Se.disabled,_e=new Pe([ue.ONE,ue.ONE],e.Color.transparent,[!0,!0,!0,!0]);(function(kt,bt,Nt){var zt=kt.gl;kt.activeTexture.set(zt.TEXTURE1),kt.viewport.set([0,0,bt.width/4,bt.height/4]);var Ut=Nt.heatmapFbo;if(Ut)zt.bindTexture(zt.TEXTURE_2D,Ut.colorAttachment.get()),kt.bindFramebuffer.set(Ut.framebuffer);else{var nr=zt.createTexture();zt.bindTexture(zt.TEXTURE_2D,nr),zt.texParameteri(zt.TEXTURE_2D,zt.TEXTURE_WRAP_S,zt.CLAMP_TO_EDGE),zt.texParameteri(zt.TEXTURE_2D,zt.TEXTURE_WRAP_T,zt.CLAMP_TO_EDGE),zt.texParameteri(zt.TEXTURE_2D,zt.TEXTURE_MIN_FILTER,zt.LINEAR),zt.texParameteri(zt.TEXTURE_2D,zt.TEXTURE_MAG_FILTER,zt.LINEAR),Ut=Nt.heatmapFbo=kt.createFramebuffer(bt.width/4,bt.height/4,!1),function(pr,Mr,kr,Qr){var $r=pr.gl,pn=pr.extRenderToTextureHalfFloat?pr.extTextureHalfFloat.HALF_FLOAT_OES:$r.UNSIGNED_BYTE;$r.texImage2D($r.TEXTURE_2D,0,$r.RGBA,Mr.width/4,Mr.height/4,0,$r.RGBA,pn,null),Qr.colorAttachment.set(kr)}(kt,bt,nr,Ut)}})(ae,C,B),ae.clear({color:e.Color.transparent});for(var Ee=0;Ee<G.length;Ee++){var He=G[Ee];if(!z.hasRenderableParent(He)){var Xe=z.getTile(He),at=Xe.getBucket(B);if(at){var _t=at.programConfigurations.get(B.id),St=C.useProgram("heatmap",_t),Tt=C.transform.zoom;St.draw(ae,ue.TRIANGLES,Je.disabled,ge,_e,De.disabled,Zo(He.posMatrix,Xe,Tt,B.paint.get("heatmap-intensity")),B.id,at.layoutVertexBuffer,at.indexBuffer,at.segments,B.paint,C.transform.zoom,_t)}}}ae.viewport.set([0,0,C.width,C.height])}else C.renderPass==="translucent"&&(C.context.setColorMode(C.colorModeForRenderPass()),function(kt,bt){var Nt=kt.context,zt=Nt.gl,Ut=bt.heatmapFbo;if(!!Ut){Nt.activeTexture.set(zt.TEXTURE0),zt.bindTexture(zt.TEXTURE_2D,Ut.colorAttachment.get()),Nt.activeTexture.set(zt.TEXTURE1);var nr=bt.colorRampTexture;nr||(nr=bt.colorRampTexture=new e.Texture(Nt,bt.colorRamp,zt.RGBA)),nr.bind(zt.LINEAR,zt.CLAMP_TO_EDGE),kt.useProgram("heatmapTexture").draw(Nt,zt.TRIANGLES,Je.disabled,Se.disabled,kt.colorModeForRenderPass(),De.disabled,function(pr,Mr,kr,Qr){var $r=e.create();e.ortho($r,0,pr.width,pr.height,0,0,1);var pn=pr.context.gl;return{u_matrix:$r,u_world:[pn.drawingBufferWidth,pn.drawingBufferHeight],u_image:kr,u_color_ramp:Qr,u_opacity:Mr.paint.get("heatmap-opacity")}}(kt,bt,0,1),bt.id,kt.viewportBuffer,kt.quadTriangleIndexBuffer,kt.viewportSegments,bt.paint,kt.transform.zoom)}}(C,B))},line:function(C,z,B,G){if(C.renderPass==="translucent"){var ae=B.paint.get("line-opacity"),ue=B.paint.get("line-width");if(ae.constantOr(1)!==0&&ue.constantOr(1)!==0){var ge=C.depthModeForSublayer(0,Je.ReadOnly),_e=C.colorModeForRenderPass(),Ee=B.paint.get("line-dasharray"),He=B.paint.get("line-pattern"),Xe=He.constantOr(1),at=B.paint.get("line-gradient"),_t=B.getCrossfadeParameters(),St=Xe?"linePattern":Ee?"lineSDF":at?"lineGradient":"line",Tt=C.context,kt=Tt.gl,bt=!0;if(at){Tt.activeTexture.set(kt.TEXTURE0);var Nt=B.gradientTexture;if(!B.gradient)return;Nt||(Nt=B.gradientTexture=new e.Texture(Tt,B.gradient,kt.RGBA)),Nt.bind(kt.LINEAR,kt.CLAMP_TO_EDGE)}for(var zt=0,Ut=G;zt<Ut.length;zt+=1){var nr=Ut[zt],pr=z.getTile(nr);if(!Xe||pr.patternsLoaded()){var Mr=pr.getBucket(B);if(Mr){var kr=Mr.programConfigurations.get(B.id),Qr=C.context.program.get(),$r=C.useProgram(St,kr),pn=bt||$r.program!==Qr,sn=He.constantOr(null);if(sn&&pr.imageAtlas){var Un=pr.imageAtlas,Wn=Un.patternPositions[sn.to.toString()],li=Un.patternPositions[sn.from.toString()];Wn&&li&&kr.setConstantPatternPositions(Wn,li)}var Hr=Xe?je(C,pr,B,_t):Ee?Ge(C,pr,B,Ee,_t):at?Ui(C,pr,B):Io(C,pr,B);Xe?(Tt.activeTexture.set(kt.TEXTURE0),pr.imageAtlasTexture.bind(kt.LINEAR,kt.CLAMP_TO_EDGE),kr.updatePaintBuffers(_t)):Ee&&(pn||C.lineAtlas.dirty)&&(Tt.activeTexture.set(kt.TEXTURE0),C.lineAtlas.bind(Tt)),$r.draw(Tt,kt.TRIANGLES,ge,C.stencilModeForClipping(nr),_e,De.disabled,Hr,B.id,Mr.layoutVertexBuffer,Mr.indexBuffer,Mr.segments,B.paint,C.transform.zoom,kr),bt=!1}}}}}},fill:function(C,z,B,G){var ae=B.paint.get("fill-color"),ue=B.paint.get("fill-opacity");if(ue.constantOr(1)!==0){var ge=C.colorModeForRenderPass(),_e=B.paint.get("fill-pattern"),Ee=C.opaquePassEnabledForLayer()&&!_e.constantOr(1)&&ae.constantOr(e.Color.transparent).a===1&&ue.constantOr(0)===1?"opaque":"translucent";if(C.renderPass===Ee){var He=C.depthModeForSublayer(1,C.renderPass==="opaque"?Je.ReadWrite:Je.ReadOnly);Rn(C,z,B,G,He,ge,!1)}if(C.renderPass==="translucent"&&B.paint.get("fill-antialias")){var Xe=C.depthModeForSublayer(B.getPaintProperty("fill-outline-color")?2:0,Je.ReadOnly);Rn(C,z,B,G,Xe,ge,!0)}}},"fill-extrusion":function(C,z,B,G){var ae=B.paint.get("fill-extrusion-opacity");if(ae!==0&&C.renderPass==="translucent"){var ue=new Je(C.context.gl.LEQUAL,Je.ReadWrite,C.depthRangeFor3D);if(ae!==1||B.paint.get("fill-extrusion-pattern").constantOr(1))di(C,z,B,G,ue,Se.disabled,Pe.disabled),di(C,z,B,G,ue,C.stencilModeFor3D(),C.colorModeForRenderPass());else{var ge=C.colorModeForRenderPass();di(C,z,B,G,ue,Se.disabled,ge)}}},hillshade:function(C,z,B,G){if(C.renderPass==="offscreen"||C.renderPass==="translucent"){for(var ae=C.context,ue=z.getSource().maxzoom,ge=C.depthModeForSublayer(0,Je.ReadOnly),_e=C.colorModeForRenderPass(),Ee=C.renderPass==="translucent"?C.stencilConfigForOverlap(G):[{},G],He=Ee[0],Xe=0,at=Ee[1];Xe<at.length;Xe+=1){var _t=at[Xe],St=z.getTile(_t);St.needsHillshadePrepare&&C.renderPass==="offscreen"?Ri(C,St,B,ue,ge,Se.disabled,_e):C.renderPass==="translucent"&&wi(C,St,B,ge,He[_t.overscaledZ],_e)}ae.viewport.set([0,0,C.width,C.height])}},raster:function(C,z,B,G){if(C.renderPass==="translucent"&&B.paint.get("raster-opacity")!==0&&G.length)for(var ae=C.context,ue=ae.gl,ge=z.getSource(),_e=C.useProgram("raster"),Ee=C.colorModeForRenderPass(),He=ge instanceof Z?[{},G]:C.stencilConfigForOverlap(G),Xe=He[0],at=He[1],_t=at[at.length-1].overscaledZ,St=!C.options.moving,Tt=0,kt=at;Tt<kt.length;Tt+=1){var bt=kt[Tt],Nt=C.depthModeForSublayer(bt.overscaledZ-_t,B.paint.get("raster-opacity")===1?Je.ReadWrite:Je.ReadOnly,ue.LESS),zt=z.getTile(bt),Ut=C.transform.calculatePosMatrix(bt.toUnwrapped(),St);zt.registerFadeDuration(B.paint.get("raster-fade-duration"));var nr=z.findLoadedParent(bt,0),pr=Di(zt,nr,z,B,C.transform),Mr=void 0,kr=void 0,Qr=B.paint.get("raster-resampling")==="nearest"?ue.NEAREST:ue.LINEAR;ae.activeTexture.set(ue.TEXTURE0),zt.texture.bind(Qr,ue.CLAMP_TO_EDGE,ue.LINEAR_MIPMAP_NEAREST),ae.activeTexture.set(ue.TEXTURE1),nr?(nr.texture.bind(Qr,ue.CLAMP_TO_EDGE,ue.LINEAR_MIPMAP_NEAREST),Mr=Math.pow(2,nr.tileID.overscaledZ-zt.tileID.overscaledZ),kr=[zt.tileID.canonical.x*Mr%1,zt.tileID.canonical.y*Mr%1]):zt.texture.bind(Qr,ue.CLAMP_TO_EDGE,ue.LINEAR_MIPMAP_NEAREST);var $r=yt(Ut,kr||[0,0],Mr||1,pr,B);ge instanceof Z?_e.draw(ae,ue.TRIANGLES,Nt,Se.disabled,Ee,De.disabled,$r,B.id,ge.boundsBuffer,C.quadTriangleIndexBuffer,ge.boundsSegments):_e.draw(ae,ue.TRIANGLES,Nt,Xe[bt.overscaledZ],Ee,De.disabled,$r,B.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}},background:function(C,z,B){var G=B.paint.get("background-color"),ae=B.paint.get("background-opacity");if(ae!==0){var ue=C.context,ge=ue.gl,_e=C.transform,Ee=_e.tileSize,He=B.paint.get("background-pattern");if(!C.isPatternMissing(He)){var Xe=!He&&G.a===1&&ae===1&&C.opaquePassEnabledForLayer()?"opaque":"translucent";if(C.renderPass===Xe){var at=Se.disabled,_t=C.depthModeForSublayer(0,Xe==="opaque"?Je.ReadWrite:Je.ReadOnly),St=C.colorModeForRenderPass(),Tt=C.useProgram(He?"backgroundPattern":"background"),kt=_e.coveringTiles({tileSize:Ee});He&&(ue.activeTexture.set(ge.TEXTURE0),C.imageManager.bind(C.context));for(var bt=B.getCrossfadeParameters(),Nt=0,zt=kt;Nt<zt.length;Nt+=1){var Ut=zt[Nt],nr=C.transform.calculatePosMatrix(Ut.toUnwrapped()),pr=He?hr(nr,ae,C,He,{tileID:Ut,tileSize:Ee},bt):ir(nr,ae,G);Tt.draw(ue,ge.TRIANGLES,_t,at,St,De.disabled,pr,B.id,C.tileExtentBuffer,C.quadTriangleIndexBuffer,C.tileExtentSegments)}}}}},debug:function(C,z,B){for(var G=0;G<B.length;G++)ro(C,z,B[G])},custom:function(C,z,B){var G=C.context,ae=B.implementation;if(C.renderPass==="offscreen"){var ue=ae.prerender;ue&&(C.setCustomLayerDefaults(),G.setColorMode(C.colorModeForRenderPass()),ue.call(ae,G.gl,C.transform.customLayerMatrix()),G.setDirty(),C.setBaseState())}else if(C.renderPass==="translucent"){C.setCustomLayerDefaults(),G.setColorMode(C.colorModeForRenderPass()),G.setStencilMode(Se.disabled);var ge=ae.renderingMode==="3d"?new Je(C.context.gl.LEQUAL,Je.ReadWrite,C.depthRangeFor3D):C.depthModeForSublayer(0,Je.ReadOnly);G.setDepthMode(ge),ae.render(G.gl,C.transform.customLayerMatrix()),G.setDirty(),C.setBaseState(),G.bindFramebuffer.set(null)}}},Ci=function(C,z){this.context=new Ie(C),this.transform=z,this._tileTextures={},this.setup(),this.numSublayers=$e.maxUnderzooming+$e.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ur,this.gpuTimers={}};Ci.prototype.resize=function(C,z){if(this.width=C*e.browser.devicePixelRatio,this.height=z*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var B=0,G=this.style._order;B<G.length;B+=1){var ae=G[B];this.style._layers[ae].resize()}},Ci.prototype.setup=function(){var C=this.context,z=new e.StructArrayLayout2i4;z.emplaceBack(0,0),z.emplaceBack(e.EXTENT,0),z.emplaceBack(0,e.EXTENT),z.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=C.createVertexBuffer(z,vn.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var B=new e.StructArrayLayout2i4;B.emplaceBack(0,0),B.emplaceBack(e.EXTENT,0),B.emplaceBack(0,e.EXTENT),B.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=C.createVertexBuffer(B,vn.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var G=new e.StructArrayLayout4i8;G.emplaceBack(0,0,0,0),G.emplaceBack(e.EXTENT,0,e.EXTENT,0),G.emplaceBack(0,e.EXTENT,0,e.EXTENT),G.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=C.createVertexBuffer(G,K.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var ae=new e.StructArrayLayout2i4;ae.emplaceBack(0,0),ae.emplaceBack(1,0),ae.emplaceBack(0,1),ae.emplaceBack(1,1),this.viewportBuffer=C.createVertexBuffer(ae,vn.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var ue=new e.StructArrayLayout1ui2;ue.emplaceBack(0),ue.emplaceBack(1),ue.emplaceBack(3),ue.emplaceBack(2),ue.emplaceBack(0),this.tileBorderIndexBuffer=C.createIndexBuffer(ue);var ge=new e.StructArrayLayout3ui6;ge.emplaceBack(0,1,2),ge.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=C.createIndexBuffer(ge),this.emptyTexture=new e.Texture(C,{width:1,height:1,data:new Uint8Array([0,0,0,0])},C.gl.RGBA);var _e=this.context.gl;this.stencilClearMode=new Se({func:_e.ALWAYS,mask:0},0,255,_e.ZERO,_e.ZERO,_e.ZERO)},Ci.prototype.clearStencil=function(){var C=this.context,z=C.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var B=e.create();e.ortho(B,0,this.width,this.height,0,0,1),e.scale(B,B,[z.drawingBufferWidth,z.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(C,z.TRIANGLES,Je.disabled,this.stencilClearMode,Pe.disabled,De.disabled,fo(B),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ci.prototype._renderTileClippingMasks=function(C,z){if(this.currentStencilSource!==C.source&&C.isTileClipped()&&z&&z.length){this.currentStencilSource=C.source;var B=this.context,G=B.gl;this.nextStencilID+z.length>256&&this.clearStencil(),B.setColorMode(Pe.disabled),B.setDepthMode(Je.disabled);var ae=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var ue=0,ge=z;ue<ge.length;ue+=1){var _e=ge[ue],Ee=this._tileClippingMaskIDs[_e.key]=this.nextStencilID++;ae.draw(B,G.TRIANGLES,Je.disabled,new Se({func:G.ALWAYS,mask:0},Ee,255,G.KEEP,G.KEEP,G.REPLACE),Pe.disabled,De.disabled,fo(_e.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Ci.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var C=this.nextStencilID++,z=this.context.gl;return new Se({func:z.NOTEQUAL,mask:255},C,255,z.KEEP,z.KEEP,z.REPLACE)},Ci.prototype.stencilModeForClipping=function(C){var z=this.context.gl;return new Se({func:z.EQUAL,mask:255},this._tileClippingMaskIDs[C.key],0,z.KEEP,z.KEEP,z.REPLACE)},Ci.prototype.stencilConfigForOverlap=function(C){var z,B=this.context.gl,G=C.sort(function(Ee,He){return He.overscaledZ-Ee.overscaledZ}),ae=G[G.length-1].overscaledZ,ue=G[0].overscaledZ-ae+1;if(ue>1){this.currentStencilSource=void 0,this.nextStencilID+ue>256&&this.clearStencil();for(var ge={},_e=0;_e<ue;_e++)ge[_e+ae]=new Se({func:B.GEQUAL,mask:255},_e+this.nextStencilID,255,B.KEEP,B.KEEP,B.REPLACE);return this.nextStencilID+=ue,[ge,G]}return[(z={},z[ae]=Se.disabled,z),G]},Ci.prototype.colorModeForRenderPass=function(){var C=this.context.gl;return this._showOverdrawInspector?new Pe([C.CONSTANT_COLOR,C.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Pe.unblended:Pe.alphaBlended},Ci.prototype.depthModeForSublayer=function(C,z,B){if(!this.opaquePassEnabledForLayer())return Je.disabled;var G=1-((1+this.currentLayer)*this.numSublayers+C)*this.depthEpsilon;return new Je(B||this.context.gl.LEQUAL,z,[G,G])},Ci.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Ci.prototype.render=function(C,z){var B=this;this.style=C,this.options=z,this.lineAtlas=C.lineAtlas,this.imageManager=C.imageManager,this.glyphManager=C.glyphManager,this.symbolFadeChange=C.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var G=this.style._order,ae=this.style.sourceCaches;for(var ue in ae){var ge=ae[ue];ge.used&&ge.prepare(this.context)}var _e,Ee,He={},Xe={},at={};for(var _t in ae){var St=ae[_t];He[_t]=St.getVisibleCoordinates(),Xe[_t]=He[_t].slice().reverse(),at[_t]=St.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Tt=0;Tt<G.length;Tt++){var kt=G[Tt];if(this.style._layers[kt].is3D()){this.opaquePassCutoff=Tt;break}}this.renderPass="offscreen";for(var bt=0,Nt=G;bt<Nt.length;bt+=1){var zt=Nt[bt],Ut=this.style._layers[zt];if(Ut.hasOffscreenPass()&&!Ut.isHidden(this.transform.zoom)){var nr=Xe[Ut.source];(Ut.type==="custom"||nr.length)&&this.renderLayer(this,ae[Ut.source],Ut,nr)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:z.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=z.showOverdrawInspector,this.depthRangeFor3D=[0,1-(C._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=G.length-1;this.currentLayer>=0;this.currentLayer--){var pr=this.style._layers[G[this.currentLayer]],Mr=ae[pr.source],kr=He[pr.source];this._renderTileClippingMasks(pr,kr),this.renderLayer(this,Mr,pr,kr)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<G.length;this.currentLayer++){var Qr=this.style._layers[G[this.currentLayer]],$r=ae[Qr.source],pn=(Qr.type==="symbol"?at:Xe)[Qr.source];this._renderTileClippingMasks(Qr,He[Qr.source]),this.renderLayer(this,$r,Qr,pn)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach(function(sn){sn.source&&!sn.isHidden(B.transform.zoom)&&(sn.source!==(Ee&&Ee.id)&&(Ee=B.style.sourceCaches[sn.source]),(!_e||_e.getSource().maxzoom<Ee.getSource().maxzoom)&&(_e=Ee))}),_e&&no.debug(this,_e,_e.getVisibleCoordinates())),this.options.showPadding&&ba(this),this.context.setDefault()},Ci.prototype.renderLayer=function(C,z,B,G){B.isHidden(this.transform.zoom)||(B.type==="background"||B.type==="custom"||G.length)&&(this.id=B.id,this.gpuTimingStart(B),no[B.type](C,z,B,G,this.style.placement.variableOffsets),this.gpuTimingEnd())},Ci.prototype.gpuTimingStart=function(C){if(this.options.gpuTiming){var z=this.context.extTimerQuery,B=this.gpuTimers[C.id];B||(B=this.gpuTimers[C.id]={calls:0,cpuTime:0,query:z.createQueryEXT()}),B.calls++,z.beginQueryEXT(z.TIME_ELAPSED_EXT,B.query)}},Ci.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var C=this.context.extTimerQuery;C.endQueryEXT(C.TIME_ELAPSED_EXT)}},Ci.prototype.collectGpuTimers=function(){var C=this.gpuTimers;return this.gpuTimers={},C},Ci.prototype.queryGpuTimers=function(C){var z={};for(var B in C){var G=C[B],ae=this.context.extTimerQuery,ue=ae.getQueryObjectEXT(G.query,ae.QUERY_RESULT_EXT)/1e6;ae.deleteQueryEXT(G.query),z[B]=ue}return z},Ci.prototype.translatePosMatrix=function(C,z,B,G,ae){if(!B[0]&&!B[1])return C;var ue=ae?G==="map"?this.transform.angle:0:G==="viewport"?-this.transform.angle:0;if(ue){var ge=Math.sin(ue),_e=Math.cos(ue);B=[B[0]*_e-B[1]*ge,B[0]*ge+B[1]*_e]}var Ee=[ae?B[0]:Ar(z,B[0],this.transform.zoom),ae?B[1]:Ar(z,B[1],this.transform.zoom),0],He=new Float32Array(16);return e.translate(He,C,Ee),He},Ci.prototype.saveTileTexture=function(C){var z=this._tileTextures[C.size[0]];z?z.push(C):this._tileTextures[C.size[0]]=[C]},Ci.prototype.getTileTexture=function(C){var z=this._tileTextures[C];return z&&z.length>0?z.pop():null},Ci.prototype.isPatternMissing=function(C){if(!C)return!1;if(!C.from||!C.to)return!0;var z=this.imageManager.getPattern(C.from.toString()),B=this.imageManager.getPattern(C.to.toString());return!z||!B},Ci.prototype.useProgram=function(C,z){this.cache=this.cache||{};var B=""+C+(z?z.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[B]||(this.cache[B]=new js(this.context,Ts[C],z,xr[C],this._showOverdrawInspector)),this.cache[B]},Ci.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ci.prototype.setBaseState=function(){var C=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(C.FUNC_ADD)},Ci.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var C=this.context.gl;this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,C.RGBA)}},Ci.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var pt=function(C,z){this.points=C,this.planes=z};pt.fromInvProjectionMatrix=function(C,z,B){var G=Math.pow(2,B),ae=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(ge){return e.transformMat4([],ge,C)}).map(function(ge){return e.scale$1([],ge,1/ge[3]/z*G)}),ue=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(ge){var _e=e.sub([],ae[ge[0]],ae[ge[1]]),Ee=e.sub([],ae[ge[2]],ae[ge[1]]),He=e.normalize([],e.cross([],_e,Ee)),Xe=-e.dot(He,ae[ge[1]]);return He.concat(Xe)});return new pt(ae,ue)};var Ft=function(C,z){this.min=C,this.max=z,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};Ft.prototype.quadrant=function(C){for(var z=[C%2==0,C<2],B=e.clone$2(this.min),G=e.clone$2(this.max),ae=0;ae<z.length;ae++)B[ae]=z[ae]?this.min[ae]:this.center[ae],G[ae]=z[ae]?this.center[ae]:this.max[ae];return G[2]=this.max[2],new Ft(B,G)},Ft.prototype.distanceX=function(C){return Math.max(Math.min(this.max[0],C[0]),this.min[0])-C[0]},Ft.prototype.distanceY=function(C){return Math.max(Math.min(this.max[1],C[1]),this.min[1])-C[1]},Ft.prototype.intersects=function(C){for(var z=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],B=!0,G=0;G<C.planes.length;G++){for(var ae=C.planes[G],ue=0,ge=0;ge<z.length;ge++)ue+=e.dot$1(ae,z[ge])>=0;if(ue===0)return 0;ue!==z.length&&(B=!1)}if(B)return 2;for(var _e=0;_e<3;_e++){for(var Ee=Number.MAX_VALUE,He=-Number.MAX_VALUE,Xe=0;Xe<C.points.length;Xe++){var at=C.points[Xe][_e]-this.min[_e];Ee=Math.min(Ee,at),He=Math.max(He,at)}if(He<0||Ee>this.max[_e]-this.min[_e])return 0}return 1};var sr=function(C,z,B,G){if(C===void 0&&(C=0),z===void 0&&(z=0),B===void 0&&(B=0),G===void 0&&(G=0),isNaN(C)||C<0||isNaN(z)||z<0||isNaN(B)||B<0||isNaN(G)||G<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=C,this.bottom=z,this.left=B,this.right=G};sr.prototype.interpolate=function(C,z,B){return z.top!=null&&C.top!=null&&(this.top=e.number(C.top,z.top,B)),z.bottom!=null&&C.bottom!=null&&(this.bottom=e.number(C.bottom,z.bottom,B)),z.left!=null&&C.left!=null&&(this.left=e.number(C.left,z.left,B)),z.right!=null&&C.right!=null&&(this.right=e.number(C.right,z.right,B)),this},sr.prototype.getCenter=function(C,z){var B=e.clamp((this.left+C-this.right)/2,0,C),G=e.clamp((this.top+z-this.bottom)/2,0,z);return new e.Point(B,G)},sr.prototype.equals=function(C){return this.top===C.top&&this.bottom===C.bottom&&this.left===C.left&&this.right===C.right},sr.prototype.clone=function(){return new sr(this.top,this.bottom,this.left,this.right)},sr.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Yt=function(C,z,B,G,ae){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=ae===void 0||ae,this._minZoom=C||0,this._maxZoom=z||22,this._minPitch=B==null?0:B,this._maxPitch=G==null?60:G,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new sr,this._posMatrixCache={},this._alignedPosMatrixCache={}},lr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Yt.prototype.clone=function(){var C=new Yt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return C.tileSize=this.tileSize,C.latRange=this.latRange,C.width=this.width,C.height=this.height,C._center=this._center,C.zoom=this.zoom,C.angle=this.angle,C._fov=this._fov,C._pitch=this._pitch,C._unmodified=this._unmodified,C._edgeInsets=this._edgeInsets.clone(),C._calcMatrices(),C},lr.minZoom.get=function(){return this._minZoom},lr.minZoom.set=function(C){this._minZoom!==C&&(this._minZoom=C,this.zoom=Math.max(this.zoom,C))},lr.maxZoom.get=function(){return this._maxZoom},lr.maxZoom.set=function(C){this._maxZoom!==C&&(this._maxZoom=C,this.zoom=Math.min(this.zoom,C))},lr.minPitch.get=function(){return this._minPitch},lr.minPitch.set=function(C){this._minPitch!==C&&(this._minPitch=C,this.pitch=Math.max(this.pitch,C))},lr.maxPitch.get=function(){return this._maxPitch},lr.maxPitch.set=function(C){this._maxPitch!==C&&(this._maxPitch=C,this.pitch=Math.min(this.pitch,C))},lr.renderWorldCopies.get=function(){return this._renderWorldCopies},lr.renderWorldCopies.set=function(C){C===void 0?C=!0:C===null&&(C=!1),this._renderWorldCopies=C},lr.worldSize.get=function(){return this.tileSize*this.scale},lr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},lr.size.get=function(){return new e.Point(this.width,this.height)},lr.bearing.get=function(){return-this.angle/Math.PI*180},lr.bearing.set=function(C){var z=-e.wrap(C,-180,180)*Math.PI/180;this.angle!==z&&(this._unmodified=!1,this.angle=z,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},lr.pitch.get=function(){return this._pitch/Math.PI*180},lr.pitch.set=function(C){var z=e.clamp(C,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==z&&(this._unmodified=!1,this._pitch=z,this._calcMatrices())},lr.fov.get=function(){return this._fov/Math.PI*180},lr.fov.set=function(C){C=Math.max(.01,Math.min(60,C)),this._fov!==C&&(this._unmodified=!1,this._fov=C/180*Math.PI,this._calcMatrices())},lr.zoom.get=function(){return this._zoom},lr.zoom.set=function(C){var z=Math.min(Math.max(C,this.minZoom),this.maxZoom);this._zoom!==z&&(this._unmodified=!1,this._zoom=z,this.scale=this.zoomScale(z),this.tileZoom=Math.floor(z),this.zoomFraction=z-this.tileZoom,this._constrain(),this._calcMatrices())},lr.center.get=function(){return this._center},lr.center.set=function(C){C.lat===this._center.lat&&C.lng===this._center.lng||(this._unmodified=!1,this._center=C,this._constrain(),this._calcMatrices())},lr.padding.get=function(){return this._edgeInsets.toJSON()},lr.padding.set=function(C){this._edgeInsets.equals(C)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,C,1),this._calcMatrices())},lr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Yt.prototype.isPaddingEqual=function(C){return this._edgeInsets.equals(C)},Yt.prototype.interpolatePadding=function(C,z,B){this._unmodified=!1,this._edgeInsets.interpolate(C,z,B),this._constrain(),this._calcMatrices()},Yt.prototype.coveringZoomLevel=function(C){var z=(C.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/C.tileSize));return Math.max(0,z)},Yt.prototype.getVisibleUnwrappedCoordinates=function(C){var z=[new e.UnwrappedTileID(0,C)];if(this._renderWorldCopies)for(var B=this.pointCoordinate(new e.Point(0,0)),G=this.pointCoordinate(new e.Point(this.width,0)),ae=this.pointCoordinate(new e.Point(this.width,this.height)),ue=this.pointCoordinate(new e.Point(0,this.height)),ge=Math.floor(Math.min(B.x,G.x,ae.x,ue.x)),_e=Math.floor(Math.max(B.x,G.x,ae.x,ue.x)),Ee=ge-1;Ee<=_e+1;Ee++)Ee!==0&&z.push(new e.UnwrappedTileID(Ee,C));return z},Yt.prototype.coveringTiles=function(C){var z=this.coveringZoomLevel(C),B=z;if(C.minzoom!==void 0&&z<C.minzoom)return[];C.maxzoom!==void 0&&z>C.maxzoom&&(z=C.maxzoom);var G=e.MercatorCoordinate.fromLngLat(this.center),ae=Math.pow(2,z),ue=[ae*G.x,ae*G.y,0],ge=pt.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,z),_e=C.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(_e=z);var Ee=function(pn){return{aabb:new Ft([pn*ae,0,0],[(pn+1)*ae,ae,0]),zoom:0,x:0,y:0,wrap:pn,fullyVisible:!1}},He=[],Xe=[],at=z,_t=C.reparseOverscaled?B:z;if(this._renderWorldCopies)for(var St=1;St<=3;St++)He.push(Ee(-St)),He.push(Ee(St));for(He.push(Ee(0));He.length>0;){var Tt=He.pop(),kt=Tt.x,bt=Tt.y,Nt=Tt.fullyVisible;if(!Nt){var zt=Tt.aabb.intersects(ge);if(zt===0)continue;Nt=zt===2}var Ut=Tt.aabb.distanceX(ue),nr=Tt.aabb.distanceY(ue),pr=Math.max(Math.abs(Ut),Math.abs(nr)),Mr=3+(1<<at-Tt.zoom)-2;if(Tt.zoom===at||pr>Mr&&Tt.zoom>=_e)Xe.push({tileID:new e.OverscaledTileID(Tt.zoom===at?_t:Tt.zoom,Tt.wrap,Tt.zoom,kt,bt),distanceSq:e.sqrLen([ue[0]-.5-kt,ue[1]-.5-bt])});else for(var kr=0;kr<4;kr++){var Qr=(kt<<1)+kr%2,$r=(bt<<1)+(kr>>1);He.push({aabb:Tt.aabb.quadrant(kr),zoom:Tt.zoom+1,x:Qr,y:$r,wrap:Tt.wrap,fullyVisible:Nt})}}return Xe.sort(function(pn,sn){return pn.distanceSq-sn.distanceSq}).map(function(pn){return pn.tileID})},Yt.prototype.resize=function(C,z){this.width=C,this.height=z,this.pixelsToGLUnits=[2/C,-2/z],this._constrain(),this._calcMatrices()},lr.unmodified.get=function(){return this._unmodified},Yt.prototype.zoomScale=function(C){return Math.pow(2,C)},Yt.prototype.scaleZoom=function(C){return Math.log(C)/Math.LN2},Yt.prototype.project=function(C){var z=e.clamp(C.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(C.lng)*this.worldSize,e.mercatorYfromLat(z)*this.worldSize)},Yt.prototype.unproject=function(C){return new e.MercatorCoordinate(C.x/this.worldSize,C.y/this.worldSize).toLngLat()},lr.point.get=function(){return this.project(this.center)},Yt.prototype.setLocationAtPoint=function(C,z){var B=this.pointCoordinate(z),G=this.pointCoordinate(this.centerPoint),ae=this.locationCoordinate(C),ue=new e.MercatorCoordinate(ae.x-(B.x-G.x),ae.y-(B.y-G.y));this.center=this.coordinateLocation(ue),this._renderWorldCopies&&(this.center=this.center.wrap())},Yt.prototype.locationPoint=function(C){return this.coordinatePoint(this.locationCoordinate(C))},Yt.prototype.pointLocation=function(C){return this.coordinateLocation(this.pointCoordinate(C))},Yt.prototype.locationCoordinate=function(C){return e.MercatorCoordinate.fromLngLat(C)},Yt.prototype.coordinateLocation=function(C){return C.toLngLat()},Yt.prototype.pointCoordinate=function(C){var z=[C.x,C.y,0,1],B=[C.x,C.y,1,1];e.transformMat4(z,z,this.pixelMatrixInverse),e.transformMat4(B,B,this.pixelMatrixInverse);var G=z[3],ae=B[3],ue=z[0]/G,ge=B[0]/ae,_e=z[1]/G,Ee=B[1]/ae,He=z[2]/G,Xe=B[2]/ae,at=He===Xe?0:(0-He)/(Xe-He);return new e.MercatorCoordinate(e.number(ue,ge,at)/this.worldSize,e.number(_e,Ee,at)/this.worldSize)},Yt.prototype.coordinatePoint=function(C){var z=[C.x*this.worldSize,C.y*this.worldSize,0,1];return e.transformMat4(z,z,this.pixelMatrix),new e.Point(z[0]/z[3],z[1]/z[3])},Yt.prototype.getBounds=function(){return new e.LngLatBounds().extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},Yt.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Yt.prototype.setMaxBounds=function(C){C?(this.lngRange=[C.getWest(),C.getEast()],this.latRange=[C.getSouth(),C.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Yt.prototype.calculatePosMatrix=function(C,z){z===void 0&&(z=!1);var B=C.key,G=z?this._alignedPosMatrixCache:this._posMatrixCache;if(G[B])return G[B];var ae=C.canonical,ue=this.worldSize/this.zoomScale(ae.z),ge=ae.x+Math.pow(2,ae.z)*C.wrap,_e=e.identity(new Float64Array(16));return e.translate(_e,_e,[ge*ue,ae.y*ue,0]),e.scale(_e,_e,[ue/e.EXTENT,ue/e.EXTENT,1]),e.multiply(_e,z?this.alignedProjMatrix:this.projMatrix,_e),G[B]=new Float32Array(_e),G[B]},Yt.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Yt.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var C,z,B,G,ae=-90,ue=90,ge=-180,_e=180,Ee=this.size,He=this._unmodified;if(this.latRange){var Xe=this.latRange;ae=e.mercatorYfromLat(Xe[1])*this.worldSize,C=(ue=e.mercatorYfromLat(Xe[0])*this.worldSize)-ae<Ee.y?Ee.y/(ue-ae):0}if(this.lngRange){var at=this.lngRange;ge=e.mercatorXfromLng(at[0])*this.worldSize,z=(_e=e.mercatorXfromLng(at[1])*this.worldSize)-ge<Ee.x?Ee.x/(_e-ge):0}var _t=this.point,St=Math.max(z||0,C||0);if(St)return this.center=this.unproject(new e.Point(z?(_e+ge)/2:_t.x,C?(ue+ae)/2:_t.y)),this.zoom+=this.scaleZoom(St),this._unmodified=He,void(this._constraining=!1);if(this.latRange){var Tt=_t.y,kt=Ee.y/2;Tt-kt<ae&&(G=ae+kt),Tt+kt>ue&&(G=ue-kt)}if(this.lngRange){var bt=_t.x,Nt=Ee.x/2;bt-Nt<ge&&(B=ge+Nt),bt+Nt>_e&&(B=_e-Nt)}B===void 0&&G===void 0||(this.center=this.unproject(new e.Point(B!==void 0?B:_t.x,G!==void 0?G:_t.y))),this._unmodified=He,this._constraining=!1}},Yt.prototype._calcMatrices=function(){if(this.height){var C=this._fov/2,z=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(C)*this.height;var B=Math.PI/2+this._pitch,G=this._fov*(.5+z.y/this.height),ae=Math.sin(G)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-B-G,.01,Math.PI-.01)),ue=this.point,ge=ue.x,_e=ue.y,Ee=1.01*(Math.cos(Math.PI/2-this._pitch)*ae+this.cameraToCenterDistance),He=this.height/50,Xe=new Float64Array(16);e.perspective(Xe,this._fov,this.width/this.height,He,Ee),Xe[8]=2*-z.x/this.width,Xe[9]=2*z.y/this.height,e.scale(Xe,Xe,[1,-1,1]),e.translate(Xe,Xe,[0,0,-this.cameraToCenterDistance]),e.rotateX(Xe,Xe,this._pitch),e.rotateZ(Xe,Xe,this.angle),e.translate(Xe,Xe,[-ge,-_e,0]),this.mercatorMatrix=e.scale([],Xe,[this.worldSize,this.worldSize,this.worldSize]),e.scale(Xe,Xe,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Xe,this.invProjMatrix=e.invert([],this.projMatrix);var at=this.width%2/2,_t=this.height%2/2,St=Math.cos(this.angle),Tt=Math.sin(this.angle),kt=ge-Math.round(ge)+St*at+Tt*_t,bt=_e-Math.round(_e)+St*_t+Tt*at,Nt=new Float64Array(Xe);if(e.translate(Nt,Nt,[kt>.5?kt-1:kt,bt>.5?bt-1:bt,0]),this.alignedProjMatrix=Nt,Xe=e.create(),e.scale(Xe,Xe,[this.width/2,-this.height/2,1]),e.translate(Xe,Xe,[1,-1,0]),this.labelPlaneMatrix=Xe,Xe=e.create(),e.scale(Xe,Xe,[1,-1,1]),e.translate(Xe,Xe,[-1,-1,0]),e.scale(Xe,Xe,[2/this.width,2/this.height,1]),this.glCoordMatrix=Xe,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Xe=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Xe,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Yt.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var C=this.pointCoordinate(new e.Point(0,0)),z=[C.x*this.worldSize,C.y*this.worldSize,0,1];return e.transformMat4(z,z,this.pixelMatrix)[3]/this.cameraToCenterDistance},Yt.prototype.getCameraPoint=function(){var C=this._pitch,z=Math.tan(C)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,z))},Yt.prototype.getCameraQueryGeometry=function(C){var z=this.getCameraPoint();if(C.length===1)return[C[0],z];for(var B=z.x,G=z.y,ae=z.x,ue=z.y,ge=0,_e=C;ge<_e.length;ge+=1){var Ee=_e[ge];B=Math.min(B,Ee.x),G=Math.min(G,Ee.y),ae=Math.max(ae,Ee.x),ue=Math.max(ue,Ee.y)}return[new e.Point(B,G),new e.Point(ae,G),new e.Point(ae,ue),new e.Point(B,ue),new e.Point(B,G)]},Object.defineProperties(Yt.prototype,lr);var Pr=function(C){var z,B,G,ae,ue;this._hashName=C&&encodeURIComponent(C),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(z=this._updateHashUnthrottled.bind(this),B=300,G=!1,ae=null,ue=function(){ae=null,G&&(z(),ae=setTimeout(ue,B),G=!1)},function(){return G=!0,ae||ue(),ae})};Pr.prototype.addTo=function(C){return this._map=C,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Pr.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Pr.prototype.getHashString=function(C){var z=this._map.getCenter(),B=Math.round(100*this._map.getZoom())/100,G=Math.ceil((B*Math.LN2+Math.log(512/360/.5))/Math.LN10),ae=Math.pow(10,G),ue=Math.round(z.lng*ae)/ae,ge=Math.round(z.lat*ae)/ae,_e=this._map.getBearing(),Ee=this._map.getPitch(),He="";if(He+=C?"/"+ue+"/"+ge+"/"+B:B+"/"+ge+"/"+ue,(_e||Ee)&&(He+="/"+Math.round(10*_e)/10),Ee&&(He+="/"+Math.round(Ee)),this._hashName){var Xe=this._hashName,at=!1,_t=e.window.location.hash.slice(1).split("&").map(function(St){var Tt=St.split("=")[0];return Tt===Xe?(at=!0,Tt+"="+He):St}).filter(function(St){return St});return at||_t.push(Xe+"="+He),"#"+_t.join("&")}return"#"+He},Pr.prototype._getCurrentHash=function(){var C,z=this,B=e.window.location.hash.replace("#","");return this._hashName?(B.split("&").map(function(G){return G.split("=")}).forEach(function(G){G[0]===z._hashName&&(C=G)}),(C&&C[1]||"").split("/")):B.split("/")},Pr.prototype._onHashChange=function(){var C=this._getCurrentHash();if(C.length>=3&&!C.some(function(B){return isNaN(B)})){var z=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(C[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+C[2],+C[1]],zoom:+C[0],bearing:z,pitch:+(C[4]||0)}),!0}return!1},Pr.prototype._updateHashUnthrottled=function(){var C=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",C)}catch{}};var Rr={linearity:.3,easing:e.bezier(0,0,.3,1)},Zr=e.extend({deceleration:2500,maxSpeed:1400},Rr),cn=e.extend({deceleration:20,maxSpeed:1400},Rr),nn=e.extend({deceleration:1e3,maxSpeed:360},Rr),mn=e.extend({deceleration:1e3,maxSpeed:90},Rr),wn=function(C){this._map=C,this.clear()};function un(C,z){(!C.duration||C.duration<z.duration)&&(C.duration=z.duration,C.easing=z.easing)}function Tn(C,z,B){var G=B.maxSpeed,ae=B.linearity,ue=B.deceleration,ge=e.clamp(C*ae/(z/1e3),-G,G),_e=Math.abs(ge)/(ue*ae);return{easing:B.easing,duration:1e3*_e,amount:ge*(_e/2)}}wn.prototype.clear=function(){this._inertiaBuffer=[]},wn.prototype.record=function(C){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:C})},wn.prototype._drainInertiaBuffer=function(){for(var C=this._inertiaBuffer,z=e.browser.now();C.length>0&&z-C[0].time>160;)C.shift()},wn.prototype._onMoveEnd=function(C){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var z={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},B=0,G=this._inertiaBuffer;B<G.length;B+=1){var ae=G[B].settings;z.zoom+=ae.zoomDelta||0,z.bearing+=ae.bearingDelta||0,z.pitch+=ae.pitchDelta||0,ae.panDelta&&z.pan._add(ae.panDelta),ae.around&&(z.around=ae.around),ae.pinchAround&&(z.pinchAround=ae.pinchAround)}var ue=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,ge={};if(z.pan.mag()){var _e=Tn(z.pan.mag(),ue,e.extend({},Zr,C||{}));ge.offset=z.pan.mult(_e.amount/z.pan.mag()),ge.center=this._map.transform.center,un(ge,_e)}if(z.zoom){var Ee=Tn(z.zoom,ue,cn);ge.zoom=this._map.transform.zoom+Ee.amount,un(ge,Ee)}if(z.bearing){var He=Tn(z.bearing,ue,nn);ge.bearing=this._map.transform.bearing+e.clamp(He.amount,-179,179),un(ge,He)}if(z.pitch){var Xe=Tn(z.pitch,ue,mn);ge.pitch=this._map.transform.pitch+Xe.amount,un(ge,Xe)}if(ge.zoom||ge.bearing){var at=z.pinchAround===void 0?z.around:z.pinchAround;ge.around=at?this._map.unproject(at):this._map.getCenter()}return this.clear(),e.extend(ge,{noMoveStart:!0})}};var Fn=function(C){function z(G,ae,ue,ge){ge===void 0&&(ge={});var _e=t.mousePos(ae.getCanvasContainer(),ue),Ee=ae.unproject(_e);C.call(this,G,e.extend({point:_e,lngLat:Ee,originalEvent:ue},ge)),this._defaultPrevented=!1,this.target=ae}C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z;var B={defaultPrevented:{configurable:!0}};return z.prototype.preventDefault=function(){this._defaultPrevented=!0},B.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(z.prototype,B),z}(e.Event),Vn=function(C){function z(G,ae,ue){var ge=G==="touchend"?ue.changedTouches:ue.touches,_e=t.touchPos(ae.getCanvasContainer(),ge),Ee=_e.map(function(at){return ae.unproject(at)}),He=_e.reduce(function(at,_t,St,Tt){return at.add(_t.div(Tt.length))},new e.Point(0,0)),Xe=ae.unproject(He);C.call(this,G,{points:_e,point:He,lngLats:Ee,lngLat:Xe,originalEvent:ue}),this._defaultPrevented=!1}C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z;var B={defaultPrevented:{configurable:!0}};return z.prototype.preventDefault=function(){this._defaultPrevented=!0},B.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(z.prototype,B),z}(e.Event),ti=function(C){function z(G,ae,ue){C.call(this,G,{originalEvent:ue}),this._defaultPrevented=!1}C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z;var B={defaultPrevented:{configurable:!0}};return z.prototype.preventDefault=function(){this._defaultPrevented=!0},B.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(z.prototype,B),z}(e.Event),Jr=function(C,z){this._map=C,this._clickTolerance=z.clickTolerance};Jr.prototype.reset=function(){delete this._mousedownPos},Jr.prototype.wheel=function(C){return this._firePreventable(new ti(C.type,this._map,C))},Jr.prototype.mousedown=function(C,z){return this._mousedownPos=z,this._firePreventable(new Fn(C.type,this._map,C))},Jr.prototype.mouseup=function(C){this._map.fire(new Fn(C.type,this._map,C))},Jr.prototype.click=function(C,z){this._mousedownPos&&this._mousedownPos.dist(z)>=this._clickTolerance||this._map.fire(new Fn(C.type,this._map,C))},Jr.prototype.dblclick=function(C){return this._firePreventable(new Fn(C.type,this._map,C))},Jr.prototype.mouseover=function(C){this._map.fire(new Fn(C.type,this._map,C))},Jr.prototype.mouseout=function(C){this._map.fire(new Fn(C.type,this._map,C))},Jr.prototype.touchstart=function(C){return this._firePreventable(new Vn(C.type,this._map,C))},Jr.prototype.touchmove=function(C){this._map.fire(new Vn(C.type,this._map,C))},Jr.prototype.touchend=function(C){this._map.fire(new Vn(C.type,this._map,C))},Jr.prototype.touchcancel=function(C){this._map.fire(new Vn(C.type,this._map,C))},Jr.prototype._firePreventable=function(C){if(this._map.fire(C),C.defaultPrevented)return{}},Jr.prototype.isEnabled=function(){return!0},Jr.prototype.isActive=function(){return!1},Jr.prototype.enable=function(){},Jr.prototype.disable=function(){};var $n=function(C){this._map=C};$n.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},$n.prototype.mousemove=function(C){this._map.fire(new Fn(C.type,this._map,C))},$n.prototype.mousedown=function(){this._delayContextMenu=!0},$n.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Fn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},$n.prototype.contextmenu=function(C){this._delayContextMenu?this._contextMenuEvent=C:this._map.fire(new Fn(C.type,this._map,C)),this._map.listens("contextmenu")&&C.preventDefault()},$n.prototype.isEnabled=function(){return!0},$n.prototype.isActive=function(){return!1},$n.prototype.enable=function(){},$n.prototype.disable=function(){};var In=function(C,z){this._map=C,this._el=C.getCanvasContainer(),this._container=C.getContainer(),this._clickTolerance=z.clickTolerance||1};function jn(C,z){for(var B={},G=0;G<C.length;G++)B[C[G].identifier]=z[G];return B}In.prototype.isEnabled=function(){return!!this._enabled},In.prototype.isActive=function(){return!!this._active},In.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},In.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},In.prototype.mousedown=function(C,z){this.isEnabled()&&C.shiftKey&&C.button===0&&(t.disableDrag(),this._startPos=this._lastPos=z,this._active=!0)},In.prototype.mousemoveWindow=function(C,z){if(this._active){var B=z;if(!(this._lastPos.equals(B)||!this._box&&B.dist(this._startPos)<this._clickTolerance)){var G=this._startPos;this._lastPos=B,this._box||(this._box=t.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",C));var ae=Math.min(G.x,B.x),ue=Math.max(G.x,B.x),ge=Math.min(G.y,B.y),_e=Math.max(G.y,B.y);t.setTransform(this._box,"translate("+ae+"px,"+ge+"px)"),this._box.style.width=ue-ae+"px",this._box.style.height=_e-ge+"px"}}},In.prototype.mouseupWindow=function(C,z){var B=this;if(this._active&&C.button===0){var G=this._startPos,ae=z;if(this.reset(),t.suppressClick(),G.x!==ae.x||G.y!==ae.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:C})),{cameraAnimation:function(ue){return ue.fitScreenCoordinates(G,ae,B._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",C)}},In.prototype.keydown=function(C){this._active&&C.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",C))},In.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(t.remove(this._box),this._box=null),t.enableDrag(),delete this._startPos,delete this._lastPos},In.prototype._fireEvent=function(C,z){return this._map.fire(new e.Event(C,{originalEvent:z}))};var Kn=function(C){this.reset(),this.numTouches=C.numTouches};Kn.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Kn.prototype.touchstart=function(C,z,B){(this.centroid||B.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=C.timeStamp),B.length===this.numTouches&&(this.centroid=function(G){for(var ae=new e.Point(0,0),ue=0,ge=G;ue<ge.length;ue+=1){var _e=ge[ue];ae._add(_e)}return ae.div(G.length)}(z),this.touches=jn(B,z)))},Kn.prototype.touchmove=function(C,z,B){if(!this.aborted&&this.centroid){var G=jn(B,z);for(var ae in this.touches){var ue=this.touches[ae],ge=G[ae];(!ge||ge.dist(ue)>30)&&(this.aborted=!0)}}},Kn.prototype.touchend=function(C,z,B){if((!this.centroid||C.timeStamp-this.startTime>500)&&(this.aborted=!0),B.length===0){var G=!this.aborted&&this.centroid;if(this.reset(),G)return G}};var _i=function(C){this.singleTap=new Kn(C),this.numTaps=C.numTaps,this.reset()};_i.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},_i.prototype.touchstart=function(C,z,B){this.singleTap.touchstart(C,z,B)},_i.prototype.touchmove=function(C,z,B){this.singleTap.touchmove(C,z,B)},_i.prototype.touchend=function(C,z,B){var G=this.singleTap.touchend(C,z,B);if(G){var ae=C.timeStamp-this.lastTime<500,ue=!this.lastTap||this.lastTap.dist(G)<30;if(ae&&ue||this.reset(),this.count++,this.lastTime=C.timeStamp,this.lastTap=G,this.count===this.numTaps)return this.reset(),G}};var Si=function(){this._zoomIn=new _i({numTouches:1,numTaps:2}),this._zoomOut=new _i({numTouches:2,numTaps:1}),this.reset()};Si.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Si.prototype.touchstart=function(C,z,B){this._zoomIn.touchstart(C,z,B),this._zoomOut.touchstart(C,z,B)},Si.prototype.touchmove=function(C,z,B){this._zoomIn.touchmove(C,z,B),this._zoomOut.touchmove(C,z,B)},Si.prototype.touchend=function(C,z,B){var G=this,ae=this._zoomIn.touchend(C,z,B),ue=this._zoomOut.touchend(C,z,B);return ae?(this._active=!0,C.preventDefault(),setTimeout(function(){return G.reset()},0),{cameraAnimation:function(ge){return ge.easeTo({duration:300,zoom:ge.getZoom()+1,around:ge.unproject(ae)},{originalEvent:C})}}):ue?(this._active=!0,C.preventDefault(),setTimeout(function(){return G.reset()},0),{cameraAnimation:function(ge){return ge.easeTo({duration:300,zoom:ge.getZoom()-1,around:ge.unproject(ue)},{originalEvent:C})}}):void 0},Si.prototype.touchcancel=function(){this.reset()},Si.prototype.enable=function(){this._enabled=!0},Si.prototype.disable=function(){this._enabled=!1,this.reset()},Si.prototype.isEnabled=function(){return this._enabled},Si.prototype.isActive=function(){return this._active};var En=function(C){this.reset(),this._clickTolerance=C.clickTolerance||1};En.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},En.prototype._correctButton=function(C,z){return!1},En.prototype._move=function(C,z){return{}},En.prototype.mousedown=function(C,z){if(!this._lastPoint){var B=t.mouseButton(C);this._correctButton(C,B)&&(this._lastPoint=z,this._eventButton=B)}},En.prototype.mousemoveWindow=function(C,z){var B=this._lastPoint;if(B&&(C.preventDefault(),this._moved||!(z.dist(B)<this._clickTolerance)))return this._moved=!0,this._lastPoint=z,this._move(B,z)},En.prototype.mouseupWindow=function(C){t.mouseButton(C)===this._eventButton&&(this._moved&&t.suppressClick(),this.reset())},En.prototype.enable=function(){this._enabled=!0},En.prototype.disable=function(){this._enabled=!1,this.reset()},En.prototype.isEnabled=function(){return this._enabled},En.prototype.isActive=function(){return this._active};var Pi=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.mousedown=function(B,G){C.prototype.mousedown.call(this,B,G),this._lastPoint&&(this._active=!0)},z.prototype._correctButton=function(B,G){return G===0&&!B.ctrlKey},z.prototype._move=function(B,G){return{around:G,panDelta:G.sub(B)}},z}(En),Ai=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype._correctButton=function(B,G){return G===0&&B.ctrlKey||G===2},z.prototype._move=function(B,G){var ae=.8*(G.x-B.x);if(ae)return this._active=!0,{bearingDelta:ae}},z.prototype.contextmenu=function(B){B.preventDefault()},z}(En),pi=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype._correctButton=function(B,G){return G===0&&B.ctrlKey||G===2},z.prototype._move=function(B,G){var ae=-.5*(G.y-B.y);if(ae)return this._active=!0,{pitchDelta:ae}},z.prototype.contextmenu=function(B){B.preventDefault()},z}(En),Ii=function(C){this._minTouches=1,this._clickTolerance=C.clickTolerance||1,this.reset()};Ii.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},Ii.prototype.touchstart=function(C,z,B){return this._calculateTransform(C,z,B)},Ii.prototype.touchmove=function(C,z,B){if(this._active)return C.preventDefault(),this._calculateTransform(C,z,B)},Ii.prototype.touchend=function(C,z,B){this._calculateTransform(C,z,B),this._active&&B.length<this._minTouches&&this.reset()},Ii.prototype.touchcancel=function(){this.reset()},Ii.prototype._calculateTransform=function(C,z,B){B.length>0&&(this._active=!0);var G=jn(B,z),ae=new e.Point(0,0),ue=new e.Point(0,0),ge=0;for(var _e in G){var Ee=G[_e],He=this._touches[_e];He&&(ae._add(Ee),ue._add(Ee.sub(He)),ge++,G[_e]=Ee)}if(this._touches=G,!(ge<this._minTouches)&&ue.mag()){var Xe=ue.div(ge);if(this._sum._add(Xe),!(this._sum.mag()<this._clickTolerance))return{around:ae.div(ge),panDelta:Xe}}},Ii.prototype.enable=function(){this._enabled=!0},Ii.prototype.disable=function(){this._enabled=!1,this.reset()},Ii.prototype.isEnabled=function(){return this._enabled},Ii.prototype.isActive=function(){return this._active};var Ti=function(){this.reset()};function Ki(C,z,B){for(var G=0;G<C.length;G++)if(C[G].identifier===B)return z[G]}Ti.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Ti.prototype._start=function(C){},Ti.prototype._move=function(C,z,B){return{}},Ti.prototype.touchstart=function(C,z,B){this._firstTwoTouches||B.length<2||(this._firstTwoTouches=[B[0].identifier,B[1].identifier],this._start([z[0],z[1]]))},Ti.prototype.touchmove=function(C,z,B){if(this._firstTwoTouches){C.preventDefault();var G=this._firstTwoTouches,ae=G[0],ue=G[1],ge=Ki(B,z,ae),_e=Ki(B,z,ue);if(ge&&_e){var Ee=this._aroundCenter?null:ge.add(_e).div(2);return this._move([ge,_e],Ee,C)}}},Ti.prototype.touchend=function(C,z,B){if(this._firstTwoTouches){var G=this._firstTwoTouches,ae=G[0],ue=G[1],ge=Ki(B,z,ae),_e=Ki(B,z,ue);ge&&_e||(this._active&&t.suppressClick(),this.reset())}},Ti.prototype.touchcancel=function(){this.reset()},Ti.prototype.enable=function(C){this._enabled=!0,this._aroundCenter=!!C&&C.around==="center"},Ti.prototype.disable=function(){this._enabled=!1,this.reset()},Ti.prototype.isEnabled=function(){return this._enabled},Ti.prototype.isActive=function(){return this._active};function Qn(C,z){return Math.log(C/z)/Math.LN2}var Gi=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.reset=function(){C.prototype.reset.call(this),delete this._distance,delete this._startDistance},z.prototype._start=function(B){this._startDistance=this._distance=B[0].dist(B[1])},z.prototype._move=function(B,G){var ae=this._distance;if(this._distance=B[0].dist(B[1]),this._active||!(Math.abs(Qn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Qn(this._distance,ae),pinchAround:G}},z}(Ti);function Ua(C,z){return 180*C.angleWith(z)/Math.PI}var ts=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.reset=function(){C.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},z.prototype._start=function(B){this._startVector=this._vector=B[0].sub(B[1]),this._minDiameter=B[0].dist(B[1])},z.prototype._move=function(B,G){var ae=this._vector;if(this._vector=B[0].sub(B[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ua(this._vector,ae),pinchAround:G}},z.prototype._isBelowThreshold=function(B){this._minDiameter=Math.min(this._minDiameter,B.mag());var G=25/(Math.PI*this._minDiameter)*360,ae=Ua(B,this._startVector);return Math.abs(ae)<G},z}(Ti);function Bo(C){return Math.abs(C.y)>Math.abs(C.x)}var xo=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.reset=function(){C.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},z.prototype._start=function(B){this._lastPoints=B,Bo(B[0].sub(B[1]))&&(this._valid=!1)},z.prototype._move=function(B,G,ae){var ue=B[0].sub(this._lastPoints[0]),ge=B[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(ue,ge,ae.timeStamp),this._valid)return this._lastPoints=B,this._active=!0,{pitchDelta:-.5*((ue.y+ge.y)/2)}},z.prototype.gestureBeginsVertically=function(B,G,ae){if(this._valid!==void 0)return this._valid;var ue=B.mag()>=2,ge=G.mag()>=2;if(ue||ge){if(!ue||!ge)return this._firstMove===void 0&&(this._firstMove=ae),ae-this._firstMove<100&&void 0;var _e=B.y>0==G.y>0;return Bo(B)&&Bo(G)&&_e}},z}(Ti),gi={panStep:100,bearingStep:15,pitchStep:10},da=function(){var C=gi;this._panStep=C.panStep,this._bearingStep=C.bearingStep,this._pitchStep=C.pitchStep};function bo(C){return C*(2-C)}da.prototype.reset=function(){this._active=!1},da.prototype.keydown=function(C){var z=this;if(!(C.altKey||C.ctrlKey||C.metaKey)){var B=0,G=0,ae=0,ue=0,ge=0;switch(C.keyCode){case 61:case 107:case 171:case 187:B=1;break;case 189:case 109:case 173:B=-1;break;case 37:C.shiftKey?G=-1:(C.preventDefault(),ue=-1);break;case 39:C.shiftKey?G=1:(C.preventDefault(),ue=1);break;case 38:C.shiftKey?ae=1:(C.preventDefault(),ge=-1);break;case 40:C.shiftKey?ae=-1:(C.preventDefault(),ge=1);break;default:return}return{cameraAnimation:function(_e){var Ee=_e.getZoom();_e.easeTo({duration:300,easeId:"keyboardHandler",easing:bo,zoom:B?Math.round(Ee)+B*(C.shiftKey?2:1):Ee,bearing:_e.getBearing()+G*z._bearingStep,pitch:_e.getPitch()+ae*z._pitchStep,offset:[-ue*z._panStep,-ge*z._panStep],center:_e.getCenter()},{originalEvent:C})}}}},da.prototype.enable=function(){this._enabled=!0},da.prototype.disable=function(){this._enabled=!1,this.reset()},da.prototype.isEnabled=function(){return this._enabled},da.prototype.isActive=function(){return this._active};var Yi=function(C,z){this._map=C,this._el=C.getCanvasContainer(),this._handler=z,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Yi.prototype.setZoomRate=function(C){this._defaultZoomRate=C},Yi.prototype.setWheelZoomRate=function(C){this._wheelZoomRate=C},Yi.prototype.isEnabled=function(){return!!this._enabled},Yi.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Yi.prototype.isZooming=function(){return!!this._zooming},Yi.prototype.enable=function(C){this.isEnabled()||(this._enabled=!0,this._aroundCenter=C&&C.around==="center")},Yi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Yi.prototype.wheel=function(C){if(this.isEnabled()){var z=C.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*C.deltaY:C.deltaY,B=e.browser.now(),G=B-(this._lastWheelEventTime||0);this._lastWheelEventTime=B,z!==0&&z%4.000244140625==0?this._type="wheel":z!==0&&Math.abs(z)<4?this._type="trackpad":G>400?(this._type=null,this._lastValue=z,this._timeout=setTimeout(this._onTimeout,40,C)):this._type||(this._type=Math.abs(G*z)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,z+=this._lastValue)),C.shiftKey&&z&&(z/=4),this._type&&(this._lastWheelEvent=C,this._delta-=z,this._active||this._start(C)),C.preventDefault()}},Yi.prototype._onTimeout=function(C){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(C)},Yi.prototype._start=function(C){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var z=t.mousePos(this._el,C);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(z)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Yi.prototype.renderFrame=function(){return this._onScrollFrame()},Yi.prototype._onScrollFrame=function(){var C=this;if(this._frameId&&(this._frameId=null,this.isActive())){var z=this._map.transform;if(this._delta!==0){var B=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,G=2/(1+Math.exp(-Math.abs(this._delta*B)));this._delta<0&&G!==0&&(G=1/G);var ae=typeof this._targetZoom=="number"?z.zoomScale(this._targetZoom):z.scale;this._targetZoom=Math.min(z.maxZoom,Math.max(z.minZoom,z.scaleZoom(ae*G))),this._type==="wheel"&&(this._startZoom=z.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var ue,ge=typeof this._targetZoom=="number"?this._targetZoom:z.zoom,_e=this._startZoom,Ee=this._easing,He=!1;if(this._type==="wheel"&&_e&&Ee){var Xe=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),at=Ee(Xe);ue=e.number(_e,ge,at),Xe<1?this._frameId||(this._frameId=!0):He=!0}else ue=ge,He=!0;return this._active=!0,He&&(this._active=!1,this._finishTimeout=setTimeout(function(){C._zooming=!1,C._handler._triggerRenderFrame(),delete C._targetZoom,delete C._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!He,zoomDelta:ue-z.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Yi.prototype._smoothOutEasing=function(C){var z=e.ease;if(this._prevEase){var B=this._prevEase,G=(e.browser.now()-B.start)/B.duration,ae=B.easing(G+.01)-B.easing(G),ue=.27/Math.sqrt(ae*ae+1e-4)*.01,ge=Math.sqrt(.0729-ue*ue);z=e.bezier(ue,ge,.25,1)}return this._prevEase={start:e.browser.now(),duration:C,easing:z},z},Yi.prototype.reset=function(){this._active=!1};var ka=function(C,z){this._clickZoom=C,this._tapZoom=z};ka.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},ka.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},ka.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},ka.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Ya=function(){this.reset()};Ya.prototype.reset=function(){this._active=!1},Ya.prototype.dblclick=function(C,z){return C.preventDefault(),{cameraAnimation:function(B){B.easeTo({duration:300,zoom:B.getZoom()+(C.shiftKey?-1:1),around:B.unproject(z)},{originalEvent:C})}}},Ya.prototype.enable=function(){this._enabled=!0},Ya.prototype.disable=function(){this._enabled=!1,this.reset()},Ya.prototype.isEnabled=function(){return this._enabled},Ya.prototype.isActive=function(){return this._active};var ea=function(){this._tap=new _i({numTouches:1,numTaps:1}),this.reset()};ea.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ea.prototype.touchstart=function(C,z,B){this._swipePoint||(this._tapTime&&C.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?B.length>0&&(this._swipePoint=z[0],this._swipeTouch=B[0].identifier):this._tap.touchstart(C,z,B))},ea.prototype.touchmove=function(C,z,B){if(this._tapTime){if(this._swipePoint){if(B[0].identifier!==this._swipeTouch)return;var G=z[0],ae=G.y-this._swipePoint.y;return this._swipePoint=G,C.preventDefault(),this._active=!0,{zoomDelta:ae/128}}}else this._tap.touchmove(C,z,B)},ea.prototype.touchend=function(C,z,B){this._tapTime?this._swipePoint&&B.length===0&&this.reset():this._tap.touchend(C,z,B)&&(this._tapTime=C.timeStamp)},ea.prototype.touchcancel=function(){this.reset()},ea.prototype.enable=function(){this._enabled=!0},ea.prototype.disable=function(){this._enabled=!1,this.reset()},ea.prototype.isEnabled=function(){return this._enabled},ea.prototype.isActive=function(){return this._active};var ho=function(C,z,B){this._el=C,this._mousePan=z,this._touchPan=B};ho.prototype.enable=function(C){this._inertiaOptions=C||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},ho.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},ho.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},ho.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var ta=function(C,z,B){this._pitchWithRotate=C.pitchWithRotate,this._mouseRotate=z,this._mousePitch=B};ta.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},ta.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},ta.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},ta.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var io=function(C,z,B,G){this._el=C,this._touchZoom=z,this._touchRotate=B,this._tapDragZoom=G,this._rotationDisabled=!1,this._enabled=!0};io.prototype.enable=function(C){this._touchZoom.enable(C),this._rotationDisabled||this._touchRotate.enable(C),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},io.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},io.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},io.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},io.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},io.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var vs=function(C){return C.zoom||C.drag||C.pitch||C.rotate},cs=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z}(e.Event);function rl(C){return C.panDelta&&C.panDelta.mag()||C.zoomDelta||C.bearingDelta||C.pitchDelta}var za=function(C,z){this._map=C,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new wn(C),this._bearingSnap=z.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(z),e.bindAll(["handleEvent","handleWindowEvent"],this);var B=this._el;this._listeners=[[B,"touchstart",{passive:!1}],[B,"touchmove",{passive:!1}],[B,"touchend",void 0],[B,"touchcancel",void 0],[B,"mousedown",void 0],[B,"mousemove",void 0],[B,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[B,"mouseover",void 0],[B,"mouseout",void 0],[B,"dblclick",void 0],[B,"click",void 0],[B,"keydown",{capture:!1}],[B,"keyup",void 0],[B,"wheel",{passive:!1}],[B,"contextmenu",void 0],[e.window,"blur",void 0]];for(var G=0,ae=this._listeners;G<ae.length;G+=1){var ue=ae[G],ge=ue[0],_e=ue[1],Ee=ue[2];t.addEventListener(ge,_e,ge===e.window.document?this.handleWindowEvent:this.handleEvent,Ee)}};za.prototype.destroy=function(){for(var C=0,z=this._listeners;C<z.length;C+=1){var B=z[C],G=B[0],ae=B[1],ue=B[2];t.removeEventListener(G,ae,G===e.window.document?this.handleWindowEvent:this.handleEvent,ue)}},za.prototype._addDefaultHandlers=function(C){var z=this._map,B=z.getCanvasContainer();this._add("mapEvent",new Jr(z,C));var G=z.boxZoom=new In(z,C);this._add("boxZoom",G);var ae=new Si,ue=new Ya;z.doubleClickZoom=new ka(ue,ae),this._add("tapZoom",ae),this._add("clickZoom",ue);var ge=new ea;this._add("tapDragZoom",ge);var _e=z.touchPitch=new xo;this._add("touchPitch",_e);var Ee=new Ai(C),He=new pi(C);z.dragRotate=new ta(C,Ee,He),this._add("mouseRotate",Ee,["mousePitch"]),this._add("mousePitch",He,["mouseRotate"]);var Xe=new Pi(C),at=new Ii(C);z.dragPan=new ho(B,Xe,at),this._add("mousePan",Xe),this._add("touchPan",at,["touchZoom","touchRotate"]);var _t=new ts,St=new Gi;z.touchZoomRotate=new io(B,St,_t,ge),this._add("touchRotate",_t,["touchPan","touchZoom"]),this._add("touchZoom",St,["touchPan","touchRotate"]);var Tt=z.scrollZoom=new Yi(z,this);this._add("scrollZoom",Tt,["mousePan"]);var kt=z.keyboard=new da;this._add("keyboard",kt),this._add("blockableMapEvent",new $n(z));for(var bt=0,Nt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];bt<Nt.length;bt+=1){var zt=Nt[bt];C.interactive&&C[zt]&&z[zt].enable(C[zt])}},za.prototype._add=function(C,z,B){this._handlers.push({handlerName:C,handler:z,allowed:B}),this._handlersById[C]=z},za.prototype.stop=function(){if(!this._updatingCamera){for(var C=0,z=this._handlers;C<z.length;C+=1)z[C].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},za.prototype.isActive=function(){for(var C=0,z=this._handlers;C<z.length;C+=1)if(z[C].handler.isActive())return!0;return!1},za.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},za.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},za.prototype.isMoving=function(){return Boolean(vs(this._eventsInProgress))||this.isZooming()},za.prototype._blockedByActive=function(C,z,B){for(var G in C)if(G!==B&&(!z||z.indexOf(G)<0))return!0;return!1},za.prototype.handleWindowEvent=function(C){this.handleEvent(C,C.type+"Window")},za.prototype._getMapTouches=function(C){for(var z=[],B=0,G=C;B<G.length;B+=1){var ae=G[B],ue=ae.target;this._el.contains(ue)&&z.push(ae)}return z},za.prototype.handleEvent=function(C,z){if(C.type!=="blur"){this._updatingCamera=!0;for(var B=C.type==="renderFrame"?void 0:C,G={needsRenderFrame:!1},ae={},ue={},ge=C.touches?this._getMapTouches(C.touches):void 0,_e=ge?t.touchPos(this._el,ge):t.mousePos(this._el,C),Ee=0,He=this._handlers;Ee<He.length;Ee+=1){var Xe=He[Ee],at=Xe.handlerName,_t=Xe.handler,St=Xe.allowed;if(_t.isEnabled()){var Tt=void 0;this._blockedByActive(ue,St,at)?_t.reset():_t[z||C.type]&&(Tt=_t[z||C.type](C,_e,ge),this.mergeHandlerResult(G,ae,Tt,at,B),Tt&&Tt.needsRenderFrame&&this._triggerRenderFrame()),(Tt||_t.isActive())&&(ue[at]=_t)}}var kt={};for(var bt in this._previousActiveHandlers)ue[bt]||(kt[bt]=B);this._previousActiveHandlers=ue,(Object.keys(kt).length||rl(G))&&(this._changes.push([G,ae,kt]),this._triggerRenderFrame()),(Object.keys(ue).length||rl(G))&&this._map._stop(!0),this._updatingCamera=!1;var Nt=G.cameraAnimation;Nt&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Nt(this._map))}else this.stop()},za.prototype.mergeHandlerResult=function(C,z,B,G,ae){if(B){e.extend(C,B);var ue={handlerName:G,originalEvent:B.originalEvent||ae};B.zoomDelta!==void 0&&(z.zoom=ue),B.panDelta!==void 0&&(z.drag=ue),B.pitchDelta!==void 0&&(z.pitch=ue),B.bearingDelta!==void 0&&(z.rotate=ue)}},za.prototype._applyChanges=function(){for(var C={},z={},B={},G=0,ae=this._changes;G<ae.length;G+=1){var ue=ae[G],ge=ue[0],_e=ue[1],Ee=ue[2];ge.panDelta&&(C.panDelta=(C.panDelta||new e.Point(0,0))._add(ge.panDelta)),ge.zoomDelta&&(C.zoomDelta=(C.zoomDelta||0)+ge.zoomDelta),ge.bearingDelta&&(C.bearingDelta=(C.bearingDelta||0)+ge.bearingDelta),ge.pitchDelta&&(C.pitchDelta=(C.pitchDelta||0)+ge.pitchDelta),ge.around!==void 0&&(C.around=ge.around),ge.pinchAround!==void 0&&(C.pinchAround=ge.pinchAround),ge.noInertia&&(C.noInertia=ge.noInertia),e.extend(z,_e),e.extend(B,Ee)}this._updateMapTransform(C,z,B),this._changes=[]},za.prototype._updateMapTransform=function(C,z,B){var G=this._map,ae=G.transform;if(!rl(C))return this._fireEvents(z,B);var ue=C.panDelta,ge=C.zoomDelta,_e=C.bearingDelta,Ee=C.pitchDelta,He=C.around,Xe=C.pinchAround;Xe!==void 0&&(He=Xe),G._stop(!0),He=He||G.transform.centerPoint;var at=ae.pointLocation(ue?He.sub(ue):He);_e&&(ae.bearing+=_e),Ee&&(ae.pitch+=Ee),ge&&(ae.zoom+=ge),ae.setLocationAtPoint(at,He),this._map._update(),C.noInertia||this._inertia.record(C),this._fireEvents(z,B)},za.prototype._fireEvents=function(C,z){var B=this,G=vs(this._eventsInProgress),ae=vs(C),ue={};for(var ge in C){var _e=C[ge].originalEvent;this._eventsInProgress[ge]||(ue[ge+"start"]=_e),this._eventsInProgress[ge]=C[ge]}for(var Ee in!G&&ae&&this._fireEvent("movestart",ae.originalEvent),ue)this._fireEvent(Ee,ue[Ee]);for(var He in C.rotate&&(this._bearingChanged=!0),ae&&this._fireEvent("move",ae.originalEvent),C){var Xe=C[He].originalEvent;this._fireEvent(He,Xe)}var at,_t={};for(var St in this._eventsInProgress){var Tt=this._eventsInProgress[St],kt=Tt.handlerName,bt=Tt.originalEvent;this._handlersById[kt].isActive()||(delete this._eventsInProgress[St],at=z[kt]||bt,_t[St+"end"]=at)}for(var Nt in _t)this._fireEvent(Nt,_t[Nt]);var zt=vs(this._eventsInProgress);if((G||ae)&&!zt){this._updatingCamera=!0;var Ut=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),nr=function(pr){return pr!==0&&-B._bearingSnap<pr&&pr<B._bearingSnap};Ut?(nr(Ut.bearing||this._map.getBearing())&&(Ut.bearing=0),this._map.easeTo(Ut,{originalEvent:at})):(this._map.fire(new e.Event("moveend",{originalEvent:at})),nr(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},za.prototype._fireEvent=function(C,z){this._map.fire(new e.Event(C,z?{originalEvent:z}:{}))},za.prototype._triggerRenderFrame=function(){var C=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(z){delete C._frameId,C.handleEvent(new cs("renderFrame",{timeStamp:z})),C._applyChanges()}))};var nl=function(C){function z(B,G){C.call(this),this._moving=!1,this._zooming=!1,this.transform=B,this._bearingSnap=G.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},z.prototype.setCenter=function(B,G){return this.jumpTo({center:B},G)},z.prototype.panBy=function(B,G,ae){return B=e.Point.convert(B).mult(-1),this.panTo(this.transform.center,e.extend({offset:B},G),ae)},z.prototype.panTo=function(B,G,ae){return this.easeTo(e.extend({center:B},G),ae)},z.prototype.getZoom=function(){return this.transform.zoom},z.prototype.setZoom=function(B,G){return this.jumpTo({zoom:B},G),this},z.prototype.zoomTo=function(B,G,ae){return this.easeTo(e.extend({zoom:B},G),ae)},z.prototype.zoomIn=function(B,G){return this.zoomTo(this.getZoom()+1,B,G),this},z.prototype.zoomOut=function(B,G){return this.zoomTo(this.getZoom()-1,B,G),this},z.prototype.getBearing=function(){return this.transform.bearing},z.prototype.setBearing=function(B,G){return this.jumpTo({bearing:B},G),this},z.prototype.getPadding=function(){return this.transform.padding},z.prototype.setPadding=function(B,G){return this.jumpTo({padding:B},G),this},z.prototype.rotateTo=function(B,G,ae){return this.easeTo(e.extend({bearing:B},G),ae)},z.prototype.resetNorth=function(B,G){return this.rotateTo(0,e.extend({duration:1e3},B),G),this},z.prototype.resetNorthPitch=function(B,G){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},B),G),this},z.prototype.snapToNorth=function(B,G){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(B,G):this},z.prototype.getPitch=function(){return this.transform.pitch},z.prototype.setPitch=function(B,G){return this.jumpTo({pitch:B},G),this},z.prototype.cameraForBounds=function(B,G){return B=e.LngLatBounds.convert(B),this._cameraForBoxAndBearing(B.getNorthWest(),B.getSouthEast(),0,G)},z.prototype._cameraForBoxAndBearing=function(B,G,ae,ue){var ge={top:0,bottom:0,right:0,left:0};if(typeof(ue=e.extend({padding:ge,offset:[0,0],maxZoom:this.transform.maxZoom},ue)).padding=="number"){var _e=ue.padding;ue.padding={top:_e,bottom:_e,right:_e,left:_e}}ue.padding=e.extend(ge,ue.padding);var Ee=this.transform,He=Ee.padding,Xe=Ee.project(e.LngLat.convert(B)),at=Ee.project(e.LngLat.convert(G)),_t=Xe.rotate(-ae*Math.PI/180),St=at.rotate(-ae*Math.PI/180),Tt=new e.Point(Math.max(_t.x,St.x),Math.max(_t.y,St.y)),kt=new e.Point(Math.min(_t.x,St.x),Math.min(_t.y,St.y)),bt=Tt.sub(kt),Nt=(Ee.width-(He.left+He.right+ue.padding.left+ue.padding.right))/bt.x,zt=(Ee.height-(He.top+He.bottom+ue.padding.top+ue.padding.bottom))/bt.y;if(!(zt<0||Nt<0)){var Ut=Math.min(Ee.scaleZoom(Ee.scale*Math.min(Nt,zt)),ue.maxZoom),nr=e.Point.convert(ue.offset),pr=(ue.padding.left-ue.padding.right)/2,Mr=(ue.padding.top-ue.padding.bottom)/2,kr=new e.Point(nr.x+pr,nr.y+Mr).mult(Ee.scale/Ee.zoomScale(Ut));return{center:Ee.unproject(Xe.add(at).div(2).sub(kr)),zoom:Ut,bearing:ae}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},z.prototype.fitBounds=function(B,G,ae){return this._fitInternal(this.cameraForBounds(B,G),G,ae)},z.prototype.fitScreenCoordinates=function(B,G,ae,ue,ge){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(B)),this.transform.pointLocation(e.Point.convert(G)),ae,ue),ue,ge)},z.prototype._fitInternal=function(B,G,ae){return B?(delete(G=e.extend(B,G)).padding,G.linear?this.easeTo(G,ae):this.flyTo(G,ae)):this},z.prototype.jumpTo=function(B,G){this.stop();var ae=this.transform,ue=!1,ge=!1,_e=!1;return"zoom"in B&&ae.zoom!==+B.zoom&&(ue=!0,ae.zoom=+B.zoom),B.center!==void 0&&(ae.center=e.LngLat.convert(B.center)),"bearing"in B&&ae.bearing!==+B.bearing&&(ge=!0,ae.bearing=+B.bearing),"pitch"in B&&ae.pitch!==+B.pitch&&(_e=!0,ae.pitch=+B.pitch),B.padding==null||ae.isPaddingEqual(B.padding)||(ae.padding=B.padding),this.fire(new e.Event("movestart",G)).fire(new e.Event("move",G)),ue&&this.fire(new e.Event("zoomstart",G)).fire(new e.Event("zoom",G)).fire(new e.Event("zoomend",G)),ge&&this.fire(new e.Event("rotatestart",G)).fire(new e.Event("rotate",G)).fire(new e.Event("rotateend",G)),_e&&this.fire(new e.Event("pitchstart",G)).fire(new e.Event("pitch",G)).fire(new e.Event("pitchend",G)),this.fire(new e.Event("moveend",G))},z.prototype.easeTo=function(B,G){var ae=this;this._stop(!1,B.easeId),((B=e.extend({offset:[0,0],duration:500,easing:e.ease},B)).animate===!1||!B.essential&&e.browser.prefersReducedMotion)&&(B.duration=0);var ue=this.transform,ge=this.getZoom(),_e=this.getBearing(),Ee=this.getPitch(),He=this.getPadding(),Xe="zoom"in B?+B.zoom:ge,at="bearing"in B?this._normalizeBearing(B.bearing,_e):_e,_t="pitch"in B?+B.pitch:Ee,St="padding"in B?B.padding:ue.padding,Tt=e.Point.convert(B.offset),kt=ue.centerPoint.add(Tt),bt=ue.pointLocation(kt),Nt=e.LngLat.convert(B.center||bt);this._normalizeCenter(Nt);var zt,Ut,nr=ue.project(bt),pr=ue.project(Nt).sub(nr),Mr=ue.zoomScale(Xe-ge);B.around&&(zt=e.LngLat.convert(B.around),Ut=ue.locationPoint(zt));var kr={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Xe!==ge,this._rotating=this._rotating||_e!==at,this._pitching=this._pitching||_t!==Ee,this._padding=!ue.isPaddingEqual(St),this._easeId=B.easeId,this._prepareEase(G,B.noMoveStart,kr),clearTimeout(this._easeEndTimeoutID),this._ease(function(Qr){if(ae._zooming&&(ue.zoom=e.number(ge,Xe,Qr)),ae._rotating&&(ue.bearing=e.number(_e,at,Qr)),ae._pitching&&(ue.pitch=e.number(Ee,_t,Qr)),ae._padding&&(ue.interpolatePadding(He,St,Qr),kt=ue.centerPoint.add(Tt)),zt)ue.setLocationAtPoint(zt,Ut);else{var $r=ue.zoomScale(ue.zoom-ge),pn=Xe>ge?Math.min(2,Mr):Math.max(.5,Mr),sn=Math.pow(pn,1-Qr),Un=ue.unproject(nr.add(pr.mult(Qr*sn)).mult($r));ue.setLocationAtPoint(ue.renderWorldCopies?Un.wrap():Un,kt)}ae._fireMoveEvents(G)},function(Qr){ae._afterEase(G,Qr)},B),this},z.prototype._prepareEase=function(B,G,ae){ae===void 0&&(ae={}),this._moving=!0,G||ae.moving||this.fire(new e.Event("movestart",B)),this._zooming&&!ae.zooming&&this.fire(new e.Event("zoomstart",B)),this._rotating&&!ae.rotating&&this.fire(new e.Event("rotatestart",B)),this._pitching&&!ae.pitching&&this.fire(new e.Event("pitchstart",B))},z.prototype._fireMoveEvents=function(B){this.fire(new e.Event("move",B)),this._zooming&&this.fire(new e.Event("zoom",B)),this._rotating&&this.fire(new e.Event("rotate",B)),this._pitching&&this.fire(new e.Event("pitch",B))},z.prototype._afterEase=function(B,G){if(!this._easeId||!G||this._easeId!==G){delete this._easeId;var ae=this._zooming,ue=this._rotating,ge=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,ae&&this.fire(new e.Event("zoomend",B)),ue&&this.fire(new e.Event("rotateend",B)),ge&&this.fire(new e.Event("pitchend",B)),this.fire(new e.Event("moveend",B))}},z.prototype.flyTo=function(B,G){var ae=this;if(!B.essential&&e.browser.prefersReducedMotion){var ue=e.pick(B,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ue,G)}this.stop(),B=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},B);var ge=this.transform,_e=this.getZoom(),Ee=this.getBearing(),He=this.getPitch(),Xe=this.getPadding(),at="zoom"in B?e.clamp(+B.zoom,ge.minZoom,ge.maxZoom):_e,_t="bearing"in B?this._normalizeBearing(B.bearing,Ee):Ee,St="pitch"in B?+B.pitch:He,Tt="padding"in B?B.padding:ge.padding,kt=ge.zoomScale(at-_e),bt=e.Point.convert(B.offset),Nt=ge.centerPoint.add(bt),zt=ge.pointLocation(Nt),Ut=e.LngLat.convert(B.center||zt);this._normalizeCenter(Ut);var nr=ge.project(zt),pr=ge.project(Ut).sub(nr),Mr=B.curve,kr=Math.max(ge.width,ge.height),Qr=kr/kt,$r=pr.mag();if("minZoom"in B){var pn=e.clamp(Math.min(B.minZoom,_e,at),ge.minZoom,ge.maxZoom),sn=kr/ge.zoomScale(pn-_e);Mr=Math.sqrt(sn/$r*2)}var Un=Mr*Mr;function Wn(Jn){var yi=(Qr*Qr-kr*kr+(Jn?-1:1)*Un*Un*$r*$r)/(2*(Jn?Qr:kr)*Un*$r);return Math.log(Math.sqrt(yi*yi+1)-yi)}function li(Jn){return(Math.exp(Jn)-Math.exp(-Jn))/2}function Hr(Jn){return(Math.exp(Jn)+Math.exp(-Jn))/2}var kn=Wn(0),Zn=function(Jn){return Hr(kn)/Hr(kn+Mr*Jn)},qn=function(Jn){return kr*((Hr(kn)*(li(yi=kn+Mr*Jn)/Hr(yi))-li(kn))/Un)/$r;var yi},ei=(Wn(1)-kn)/Mr;if(Math.abs($r)<1e-6||!isFinite(ei)){if(Math.abs(kr-Qr)<1e-6)return this.easeTo(B,G);var ui=Qr<kr?-1:1;ei=Math.abs(Math.log(Qr/kr))/Mr,qn=function(){return 0},Zn=function(Jn){return Math.exp(ui*Mr*Jn)}}if("duration"in B)B.duration=+B.duration;else{var ki="screenSpeed"in B?+B.screenSpeed/Mr:+B.speed;B.duration=1e3*ei/ki}return B.maxDuration&&B.duration>B.maxDuration&&(B.duration=0),this._zooming=!0,this._rotating=Ee!==_t,this._pitching=St!==He,this._padding=!ge.isPaddingEqual(Tt),this._prepareEase(G,!1),this._ease(function(Jn){var yi=Jn*ei,mi=1/Zn(yi);ge.zoom=Jn===1?at:_e+ge.scaleZoom(mi),ae._rotating&&(ge.bearing=e.number(Ee,_t,Jn)),ae._pitching&&(ge.pitch=e.number(He,St,Jn)),ae._padding&&(ge.interpolatePadding(Xe,Tt,Jn),Nt=ge.centerPoint.add(bt));var Ei=Jn===1?Ut:ge.unproject(nr.add(pr.mult(qn(yi))).mult(mi));ge.setLocationAtPoint(ge.renderWorldCopies?Ei.wrap():Ei,Nt),ae._fireMoveEvents(G)},function(){return ae._afterEase(G)},B),this},z.prototype.isEasing=function(){return!!this._easeFrameId},z.prototype.stop=function(){return this._stop()},z.prototype._stop=function(B,G){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var ae=this._onEaseEnd;delete this._onEaseEnd,ae.call(this,G)}if(!B){var ue=this.handlers;ue&&ue.stop()}return this},z.prototype._ease=function(B,G,ae){ae.animate===!1||ae.duration===0?(B(1),G()):(this._easeStart=e.browser.now(),this._easeOptions=ae,this._onEaseFrame=B,this._onEaseEnd=G,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},z.prototype._renderFrameCallback=function(){var B=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(B)),B<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},z.prototype._normalizeBearing=function(B,G){B=e.wrap(B,-180,180);var ae=Math.abs(B-G);return Math.abs(B-360-G)<ae&&(B-=360),Math.abs(B+360-G)<ae&&(B+=360),B},z.prototype._normalizeCenter=function(B){var G=this.transform;if(G.renderWorldCopies&&!G.lngRange){var ae=B.lng-G.center.lng;B.lng+=ae>180?-360:ae<-180?360:0}},z}(e.Evented),Ra=function(C){C===void 0&&(C={}),this.options=C,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Ra.prototype.getDefaultPosition=function(){return"bottom-right"},Ra.prototype.onAdd=function(C){var z=this.options&&this.options.compact;return this._map=C,this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=t.create("div","mapboxgl-ctrl-attrib-inner",this._container),z&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),z===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ra.prototype.onRemove=function(){t.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ra.prototype._updateEditLink=function(){var C=this._editLink;C||(C=this._editLink=this._container.querySelector(".mapbox-improve-map"));var z=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(C){var B=z.reduce(function(G,ae,ue){return ae.value&&(G+=ae.key+"="+ae.value+(ue<z.length-1?"&":"")),G},"?");C.href=e.config.FEEDBACK_URL+"/"+B+(this._map._hash?this._map._hash.getHashString(!0):""),C.rel="noopener nofollow"}},Ra.prototype._updateData=function(C){!C||C.sourceDataType!=="metadata"&&C.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Ra.prototype._updateAttributions=function(){if(this._map.style){var C=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?C=C.concat(this.options.customAttribution.map(function(_e){return typeof _e!="string"?"":_e})):typeof this.options.customAttribution=="string"&&C.push(this.options.customAttribution)),this._map.style.stylesheet){var z=this._map.style.stylesheet;this.styleOwner=z.owner,this.styleId=z.id}var B=this._map.style.sourceCaches;for(var G in B){var ae=B[G];if(ae.used){var ue=ae.getSource();ue.attribution&&C.indexOf(ue.attribution)<0&&C.push(ue.attribution)}}C.sort(function(_e,Ee){return _e.length-Ee.length});var ge=(C=C.filter(function(_e,Ee){for(var He=Ee+1;He<C.length;He++)if(C[He].indexOf(_e)>=0)return!1;return!0})).join(" | ");ge!==this._attribHTML&&(this._attribHTML=ge,C.length?(this._innerContainer.innerHTML=ge,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ra.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var us=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};us.prototype.onAdd=function(C){this._map=C,this._container=t.create("div","mapboxgl-ctrl");var z=t.create("a","mapboxgl-ctrl-logo");return z.target="_blank",z.rel="noopener nofollow",z.href="https://www.mapbox.com/",z.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),z.setAttribute("rel","noopener nofollow"),this._container.appendChild(z),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},us.prototype.onRemove=function(){t.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},us.prototype.getDefaultPosition=function(){return"bottom-left"},us.prototype._updateLogo=function(C){C&&C.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},us.prototype._logoRequired=function(){if(this._map.style){var C=this._map.style.sourceCaches;for(var z in C)if(C[z].getSource().mapbox_logo)return!0;return!1}},us.prototype._updateCompact=function(){var C=this._container.children;if(C.length){var z=C[0];this._map.getCanvasContainer().offsetWidth<250?z.classList.add("mapboxgl-compact"):z.classList.remove("mapboxgl-compact")}};var si=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};si.prototype.add=function(C){var z=++this._id;return this._queue.push({callback:C,id:z,cancelled:!1}),z},si.prototype.remove=function(C){for(var z=this._currentlyRunning,B=0,G=z?this._queue.concat(z):this._queue;B<G.length;B+=1){var ae=G[B];if(ae.id===C)return void(ae.cancelled=!0)}},si.prototype.run=function(C){C===void 0&&(C=0);var z=this._currentlyRunning=this._queue;this._queue=[];for(var B=0,G=z;B<G.length;B+=1){var ae=G[B];if(!ae.cancelled&&(ae.callback(C),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},si.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var vi={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},il=e.window.HTMLImageElement,al=e.window.HTMLElement,fs=e.window.ImageBitmap,Oo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Xo=function(C){function z(G){var ae=this;if((G=e.extend({},Oo,G)).minZoom!=null&&G.maxZoom!=null&&G.minZoom>G.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(G.minPitch!=null&&G.maxPitch!=null&&G.minPitch>G.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(G.minPitch!=null&&G.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(G.maxPitch!=null&&G.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var ue=new Yt(G.minZoom,G.maxZoom,G.minPitch,G.maxPitch,G.renderWorldCopies);if(C.call(this,ue,G),this._interactive=G.interactive,this._maxTileCacheSize=G.maxTileCacheSize,this._failIfMajorPerformanceCaveat=G.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=G.preserveDrawingBuffer,this._antialias=G.antialias,this._trackResize=G.trackResize,this._bearingSnap=G.bearingSnap,this._refreshExpiredTiles=G.refreshExpiredTiles,this._fadeDuration=G.fadeDuration,this._crossSourceCollisions=G.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=G.collectResourceTiming,this._renderTaskQueue=new si,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},vi,G.locale),this._requestManager=new e.RequestManager(G.transformRequest,G.accessToken),typeof G.container=="string"){if(this._container=e.window.document.getElementById(G.container),!this._container)throw new Error("Container '"+G.container+"' not found.")}else{if(!(G.container instanceof al))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=G.container}if(G.maxBounds&&this.setMaxBounds(G.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return ae._update(!1)}),this.on("moveend",function(){return ae._update(!1)}),this.on("zoom",function(){return ae._update(!0)}),e.window!==void 0&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new za(this,G);var ge=typeof G.hash=="string"&&G.hash||void 0;this._hash=G.hash&&new Pr(ge).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:G.center,zoom:G.zoom,bearing:G.bearing,pitch:G.pitch}),G.bounds&&(this.resize(),this.fitBounds(G.bounds,e.extend({},G.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=G.localIdeographFontFamily,G.style&&this.setStyle(G.style,{localIdeographFontFamily:G.localIdeographFontFamily}),G.attributionControl&&this.addControl(new Ra({customAttribution:G.customAttribution})),this.addControl(new us,G.logoPosition),this.on("style.load",function(){ae.transform.unmodified&&ae.jumpTo(ae.style.stylesheet)}),this.on("data",function(_e){ae._update(_e.dataType==="style"),ae.fire(new e.Event(_e.dataType+"data",_e))}),this.on("dataloading",function(_e){ae.fire(new e.Event(_e.dataType+"dataloading",_e))})}C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z;var B={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return z.prototype._getMapId=function(){return this._mapId},z.prototype.addControl=function(G,ae){if(ae===void 0&&G.getDefaultPosition&&(ae=G.getDefaultPosition()),ae===void 0&&(ae="top-right"),!G||!G.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var ue=G.onAdd(this);this._controls.push(G);var ge=this._controlPositions[ae];return ae.indexOf("bottom")!==-1?ge.insertBefore(ue,ge.firstChild):ge.appendChild(ue),this},z.prototype.removeControl=function(G){if(!G||!G.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var ae=this._controls.indexOf(G);return ae>-1&&this._controls.splice(ae,1),G.onRemove(this),this},z.prototype.resize=function(G){var ae=this._containerDimensions(),ue=ae[0],ge=ae[1];this._resizeCanvas(ue,ge),this.transform.resize(ue,ge),this.painter.resize(ue,ge);var _e=!this._moving;return _e&&(this.stop(),this.fire(new e.Event("movestart",G)).fire(new e.Event("move",G))),this.fire(new e.Event("resize",G)),_e&&this.fire(new e.Event("moveend",G)),this},z.prototype.getBounds=function(){return this.transform.getBounds()},z.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},z.prototype.setMaxBounds=function(G){return this.transform.setMaxBounds(e.LngLatBounds.convert(G)),this._update()},z.prototype.setMinZoom=function(G){if((G=G==null?-2:G)>=-2&&G<=this.transform.maxZoom)return this.transform.minZoom=G,this._update(),this.getZoom()<G&&this.setZoom(G),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},z.prototype.getMinZoom=function(){return this.transform.minZoom},z.prototype.setMaxZoom=function(G){if((G=G==null?22:G)>=this.transform.minZoom)return this.transform.maxZoom=G,this._update(),this.getZoom()>G&&this.setZoom(G),this;throw new Error("maxZoom must be greater than the current minZoom")},z.prototype.getMaxZoom=function(){return this.transform.maxZoom},z.prototype.setMinPitch=function(G){if((G=G==null?0:G)<0)throw new Error("minPitch must be greater than or equal to 0");if(G>=0&&G<=this.transform.maxPitch)return this.transform.minPitch=G,this._update(),this.getPitch()<G&&this.setPitch(G),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},z.prototype.getMinPitch=function(){return this.transform.minPitch},z.prototype.setMaxPitch=function(G){if((G=G==null?60:G)>60)throw new Error("maxPitch must be less than or equal to 60");if(G>=this.transform.minPitch)return this.transform.maxPitch=G,this._update(),this.getPitch()>G&&this.setPitch(G),this;throw new Error("maxPitch must be greater than the current minPitch")},z.prototype.getMaxPitch=function(){return this.transform.maxPitch},z.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},z.prototype.setRenderWorldCopies=function(G){return this.transform.renderWorldCopies=G,this._update()},z.prototype.project=function(G){return this.transform.locationPoint(e.LngLat.convert(G))},z.prototype.unproject=function(G){return this.transform.pointLocation(e.Point.convert(G))},z.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},z.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},z.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},z.prototype._createDelegatedListener=function(G,ae,ue){var ge,_e=this;if(G==="mouseenter"||G==="mouseover"){var Ee=!1;return{layer:ae,listener:ue,delegates:{mousemove:function(Xe){var at=_e.getLayer(ae)?_e.queryRenderedFeatures(Xe.point,{layers:[ae]}):[];at.length?Ee||(Ee=!0,ue.call(_e,new Fn(G,_e,Xe.originalEvent,{features:at}))):Ee=!1},mouseout:function(){Ee=!1}}}}if(G==="mouseleave"||G==="mouseout"){var He=!1;return{layer:ae,listener:ue,delegates:{mousemove:function(Xe){(_e.getLayer(ae)?_e.queryRenderedFeatures(Xe.point,{layers:[ae]}):[]).length?He=!0:He&&(He=!1,ue.call(_e,new Fn(G,_e,Xe.originalEvent)))},mouseout:function(Xe){He&&(He=!1,ue.call(_e,new Fn(G,_e,Xe.originalEvent)))}}}}return{layer:ae,listener:ue,delegates:(ge={},ge[G]=function(Xe){var at=_e.getLayer(ae)?_e.queryRenderedFeatures(Xe.point,{layers:[ae]}):[];at.length&&(Xe.features=at,ue.call(_e,Xe),delete Xe.features)},ge)}},z.prototype.on=function(G,ae,ue){if(ue===void 0)return C.prototype.on.call(this,G,ae);var ge=this._createDelegatedListener(G,ae,ue);for(var _e in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[G]=this._delegatedListeners[G]||[],this._delegatedListeners[G].push(ge),ge.delegates)this.on(_e,ge.delegates[_e]);return this},z.prototype.once=function(G,ae,ue){if(ue===void 0)return C.prototype.once.call(this,G,ae);var ge=this._createDelegatedListener(G,ae,ue);for(var _e in ge.delegates)this.once(_e,ge.delegates[_e]);return this},z.prototype.off=function(G,ae,ue){var ge=this;return ue===void 0?C.prototype.off.call(this,G,ae):(this._delegatedListeners&&this._delegatedListeners[G]&&function(_e){for(var Ee=_e[G],He=0;He<Ee.length;He++){var Xe=Ee[He];if(Xe.layer===ae&&Xe.listener===ue){for(var at in Xe.delegates)ge.off(at,Xe.delegates[at]);return Ee.splice(He,1),ge}}}(this._delegatedListeners),this)},z.prototype.queryRenderedFeatures=function(G,ae){if(!this.style)return[];var ue;if(ae!==void 0||G===void 0||G instanceof e.Point||Array.isArray(G)||(ae=G,G=void 0),ae=ae||{},(G=G||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||typeof G[0]=="number")ue=[e.Point.convert(G)];else{var ge=e.Point.convert(G[0]),_e=e.Point.convert(G[1]);ue=[ge,new e.Point(_e.x,ge.y),_e,new e.Point(ge.x,_e.y),ge]}return this.style.queryRenderedFeatures(ue,ae,this.transform)},z.prototype.querySourceFeatures=function(G,ae){return this.style.querySourceFeatures(G,ae)},z.prototype.setStyle=function(G,ae){return(ae=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},ae)).diff!==!1&&ae.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&G?(this._diffStyle(G,ae),this):(this._localIdeographFontFamily=ae.localIdeographFontFamily,this._updateStyle(G,ae))},z.prototype._getUIString=function(G){var ae=this._locale[G];if(ae==null)throw new Error("Missing UI string '"+G+"'");return ae},z.prototype._updateStyle=function(G,ae){return this.style&&(this.style.setEventedParent(null),this.style._remove()),G?(this.style=new Yn(this,ae||{}),this.style.setEventedParent(this,{style:this.style}),typeof G=="string"?this.style.loadURL(G):this.style.loadJSON(G),this):(delete this.style,this)},z.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Yn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},z.prototype._diffStyle=function(G,ae){var ue=this;if(typeof G=="string"){var ge=this._requestManager.normalizeStyleURL(G),_e=this._requestManager.transformRequest(ge,e.ResourceType.Style);e.getJSON(_e,function(Ee,He){Ee?ue.fire(new e.ErrorEvent(Ee)):He&&ue._updateDiff(He,ae)})}else typeof G=="object"&&this._updateDiff(G,ae)},z.prototype._updateDiff=function(G,ae){try{this.style.setState(G)&&this._update(!0)}catch(ue){e.warnOnce("Unable to perform style diff: "+(ue.message||ue.error||ue)+".  Rebuilding the style from scratch."),this._updateStyle(G,ae)}},z.prototype.getStyle=function(){if(this.style)return this.style.serialize()},z.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},z.prototype.addSource=function(G,ae){return this._lazyInitEmptyStyle(),this.style.addSource(G,ae),this._update(!0)},z.prototype.isSourceLoaded=function(G){var ae=this.style&&this.style.sourceCaches[G];if(ae!==void 0)return ae.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+G+"'")))},z.prototype.areTilesLoaded=function(){var G=this.style&&this.style.sourceCaches;for(var ae in G){var ue=G[ae]._tiles;for(var ge in ue){var _e=ue[ge];if(_e.state!=="loaded"&&_e.state!=="errored")return!1}}return!0},z.prototype.addSourceType=function(G,ae,ue){return this._lazyInitEmptyStyle(),this.style.addSourceType(G,ae,ue)},z.prototype.removeSource=function(G){return this.style.removeSource(G),this._update(!0)},z.prototype.getSource=function(G){return this.style.getSource(G)},z.prototype.addImage=function(G,ae,ue){ue===void 0&&(ue={});var ge=ue.pixelRatio;ge===void 0&&(ge=1);var _e=ue.sdf;_e===void 0&&(_e=!1);var Ee=ue.stretchX,He=ue.stretchY,Xe=ue.content;if(this._lazyInitEmptyStyle(),ae instanceof il||fs&&ae instanceof fs){var at=e.browser.getImageData(ae),_t=at.width,St=at.height,Tt=at.data;this.style.addImage(G,{data:new e.RGBAImage({width:_t,height:St},Tt),pixelRatio:ge,stretchX:Ee,stretchY:He,content:Xe,sdf:_e,version:0})}else{if(ae.width===void 0||ae.height===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var kt=ae.width,bt=ae.height,Nt=ae.data,zt=ae;this.style.addImage(G,{data:new e.RGBAImage({width:kt,height:bt},new Uint8Array(Nt)),pixelRatio:ge,stretchX:Ee,stretchY:He,content:Xe,sdf:_e,version:0,userImage:zt}),zt.onAdd&&zt.onAdd(this,G)}},z.prototype.updateImage=function(G,ae){var ue=this.style.getImage(G);if(!ue)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var ge=ae instanceof il||fs&&ae instanceof fs?e.browser.getImageData(ae):ae,_e=ge.width,Ee=ge.height,He=ge.data;if(_e===void 0||Ee===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_e!==ue.data.width||Ee!==ue.data.height)return this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var Xe=!(ae instanceof il||fs&&ae instanceof fs);ue.data.replace(He,Xe),this.style.updateImage(G,ue)},z.prototype.hasImage=function(G){return G?!!this.style.getImage(G):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},z.prototype.removeImage=function(G){this.style.removeImage(G)},z.prototype.loadImage=function(G,ae){e.getImage(this._requestManager.transformRequest(G,e.ResourceType.Image),ae)},z.prototype.listImages=function(){return this.style.listImages()},z.prototype.addLayer=function(G,ae){return this._lazyInitEmptyStyle(),this.style.addLayer(G,ae),this._update(!0)},z.prototype.moveLayer=function(G,ae){return this.style.moveLayer(G,ae),this._update(!0)},z.prototype.removeLayer=function(G){return this.style.removeLayer(G),this._update(!0)},z.prototype.getLayer=function(G){return this.style.getLayer(G)},z.prototype.setLayerZoomRange=function(G,ae,ue){return this.style.setLayerZoomRange(G,ae,ue),this._update(!0)},z.prototype.setFilter=function(G,ae,ue){return ue===void 0&&(ue={}),this.style.setFilter(G,ae,ue),this._update(!0)},z.prototype.getFilter=function(G){return this.style.getFilter(G)},z.prototype.setPaintProperty=function(G,ae,ue,ge){return ge===void 0&&(ge={}),this.style.setPaintProperty(G,ae,ue,ge),this._update(!0)},z.prototype.getPaintProperty=function(G,ae){return this.style.getPaintProperty(G,ae)},z.prototype.setLayoutProperty=function(G,ae,ue,ge){return ge===void 0&&(ge={}),this.style.setLayoutProperty(G,ae,ue,ge),this._update(!0)},z.prototype.getLayoutProperty=function(G,ae){return this.style.getLayoutProperty(G,ae)},z.prototype.setLight=function(G,ae){return ae===void 0&&(ae={}),this._lazyInitEmptyStyle(),this.style.setLight(G,ae),this._update(!0)},z.prototype.getLight=function(){return this.style.getLight()},z.prototype.setFeatureState=function(G,ae){return this.style.setFeatureState(G,ae),this._update()},z.prototype.removeFeatureState=function(G,ae){return this.style.removeFeatureState(G,ae),this._update()},z.prototype.getFeatureState=function(G){return this.style.getFeatureState(G)},z.prototype.getContainer=function(){return this._container},z.prototype.getCanvasContainer=function(){return this._canvasContainer},z.prototype.getCanvas=function(){return this._canvas},z.prototype._containerDimensions=function(){var G=0,ae=0;return this._container&&(G=this._container.clientWidth||400,ae=this._container.clientHeight||300),[G,ae]},z.prototype._detectMissingCSS=function(){e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},z.prototype._setupContainer=function(){var G=this._container;G.classList.add("mapboxgl-map"),(this._missingCSSCanary=t.create("div","mapboxgl-canary",G)).style.visibility="hidden",this._detectMissingCSS();var ae=this._canvasContainer=t.create("div","mapboxgl-canvas-container",G);this._interactive&&ae.classList.add("mapboxgl-interactive"),this._canvas=t.create("canvas","mapboxgl-canvas",ae),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var ue=this._containerDimensions();this._resizeCanvas(ue[0],ue[1]);var ge=this._controlContainer=t.create("div","mapboxgl-control-container",G),_e=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Ee){_e[Ee]=t.create("div","mapboxgl-ctrl-"+Ee,ge)})},z.prototype._resizeCanvas=function(G,ae){var ue=e.browser.devicePixelRatio||1;this._canvas.width=ue*G,this._canvas.height=ue*ae,this._canvas.style.width=G+"px",this._canvas.style.height=ae+"px"},z.prototype._setupPainter=function(){var G=e.extend({},r.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),ae=this._canvas.getContext("webgl",G)||this._canvas.getContext("experimental-webgl",G);ae?(this.painter=new Ci(ae,this.transform),e.webpSupported.testSupport(ae)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},z.prototype._contextLost=function(G){G.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:G}))},z.prototype._contextRestored=function(G){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:G}))},z.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},z.prototype._update=function(G){return this.style?(this._styleDirty=this._styleDirty||G,this._sourcesDirty=!0,this.triggerRepaint(),this):this},z.prototype._requestRenderFrame=function(G){return this._update(),this._renderTaskQueue.add(G)},z.prototype._cancelRenderFrame=function(G){this._renderTaskQueue.remove(G)},z.prototype._render=function(G){var ae,ue=this,ge=0,_e=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(ae=_e.createQueryEXT(),_e.beginQueryEXT(_e.TIME_ELAPSED_EXT,ae),ge=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(G),!this._removed){var Ee=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var He=this.transform.zoom,Xe=e.browser.now();this.style.zoomHistory.update(He,Xe);var at=new e.EvaluationParameters(He,{now:Xe,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),_t=at.crossFadingFactor();_t===1&&_t===this._crossFadingFactor||(Ee=!0,this._crossFadingFactor=_t),this.style.update(at)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Ee)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var St=e.browser.now()-ge;_e.endQueryEXT(_e.TIME_ELAPSED_EXT,ae),setTimeout(function(){var kt=_e.getQueryObjectEXT(ae,_e.QUERY_RESULT_EXT)/1e6;_e.deleteQueryEXT(ae),ue.fire(new e.Event("gpu-timing-frame",{cpuTime:St,gpuTime:kt}))},50)}if(this.listens("gpu-timing-layer")){var Tt=this.painter.collectGpuTimers();setTimeout(function(){var kt=ue.painter.queryGpuTimers(Tt);ue.fire(new e.Event("gpu-timing-layer",{layerTimes:kt}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},z.prototype.remove=function(){this._hash&&this._hash.remove();for(var G=0,ae=this._controls;G<ae.length;G+=1)ae[G].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),e.window!==void 0&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var ue=this.painter.context.gl.getExtension("WEBGL_lose_context");ue&&ue.loseContext(),Sl(this._canvasContainer),Sl(this._controlContainer),Sl(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},z.prototype.triggerRepaint=function(){var G=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(ae){G._frame=null,G._render(ae)}))},z.prototype._onWindowOnline=function(){this._update()},z.prototype._onWindowResize=function(G){this._trackResize&&this.resize({originalEvent:G})._update()},B.showTileBoundaries.get=function(){return!!this._showTileBoundaries},B.showTileBoundaries.set=function(G){this._showTileBoundaries!==G&&(this._showTileBoundaries=G,this._update())},B.showPadding.get=function(){return!!this._showPadding},B.showPadding.set=function(G){this._showPadding!==G&&(this._showPadding=G,this._update())},B.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},B.showCollisionBoxes.set=function(G){this._showCollisionBoxes!==G&&(this._showCollisionBoxes=G,G?this.style._generateCollisionBoxes():this._update())},B.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},B.showOverdrawInspector.set=function(G){this._showOverdrawInspector!==G&&(this._showOverdrawInspector=G,this._update())},B.repaint.get=function(){return!!this._repaint},B.repaint.set=function(G){this._repaint!==G&&(this._repaint=G,this.triggerRepaint())},B.vertices.get=function(){return!!this._vertices},B.vertices.set=function(G){this._vertices=G,this._update()},z.prototype._setCacheLimits=function(G,ae){e.setCacheLimits(G,ae)},B.version.get=function(){return e.version},Object.defineProperties(z.prototype,B),z}(nl);function Sl(C){C.parentNode&&C.parentNode.removeChild(C)}var Hs={showCompass:!0,showZoom:!0,visualizePitch:!1},Wi=function(C){var z=this;this.options=e.extend({},Hs,C),this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(B){return B.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(B){return z._map.zoomIn({},{originalEvent:B})}),t.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(B){return z._map.zoomOut({},{originalEvent:B})}),t.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(B){z.options.visualizePitch?z._map.resetNorthPitch({},{originalEvent:B}):z._map.resetNorth({},{originalEvent:B})}),this._compassIcon=t.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Wi.prototype._updateZoomButtons=function(){var C=this._map.getZoom();this._zoomInButton.disabled=C===this._map.getMaxZoom(),this._zoomOutButton.disabled=C===this._map.getMinZoom()},Wi.prototype._rotateCompassArrow=function(){var C=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=C},Wi.prototype.onAdd=function(C){return this._map=C,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ra(this._map,this._compass,this.options.visualizePitch)),this._container},Wi.prototype.onRemove=function(){t.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Wi.prototype._createButton=function(C,z){var B=t.create("button",C,this._container);return B.type="button",B.addEventListener("click",z),B},Wi.prototype._setButtonTitle=function(C,z){var B=this._map._getUIString("NavigationControl."+z);C.title=B,C.setAttribute("aria-label",B)};var ra=function(C,z,B){B===void 0&&(B=!1),this._clickTolerance=10,this.element=z,this.mouseRotate=new Ai({clickTolerance:C.dragRotate._mouseRotate._clickTolerance}),this.map=C,B&&(this.mousePitch=new pi({clickTolerance:C.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),t.addEventListener(z,"mousedown",this.mousedown),t.addEventListener(z,"touchstart",this.touchstart,{passive:!1}),t.addEventListener(z,"touchmove",this.touchmove),t.addEventListener(z,"touchend",this.touchend),t.addEventListener(z,"touchcancel",this.reset)};function Ms(C,z,B){if(C=new e.LngLat(C.lng,C.lat),z){var G=new e.LngLat(C.lng-360,C.lat),ae=new e.LngLat(C.lng+360,C.lat),ue=B.locationPoint(C).distSqr(z);B.locationPoint(G).distSqr(z)<ue?C=G:B.locationPoint(ae).distSqr(z)<ue&&(C=ae)}for(;Math.abs(C.lng-B.center.lng)>180;){var ge=B.locationPoint(C);if(ge.x>=0&&ge.y>=0&&ge.x<=B.width&&ge.y<=B.height)break;C.lng>B.center.lng?C.lng-=360:C.lng+=360}return C}ra.prototype.down=function(C,z){this.mouseRotate.mousedown(C,z),this.mousePitch&&this.mousePitch.mousedown(C,z),t.disableDrag()},ra.prototype.move=function(C,z){var B=this.map,G=this.mouseRotate.mousemoveWindow(C,z);if(G&&G.bearingDelta&&B.setBearing(B.getBearing()+G.bearingDelta),this.mousePitch){var ae=this.mousePitch.mousemoveWindow(C,z);ae&&ae.pitchDelta&&B.setPitch(B.getPitch()+ae.pitchDelta)}},ra.prototype.off=function(){var C=this.element;t.removeEventListener(C,"mousedown",this.mousedown),t.removeEventListener(C,"touchstart",this.touchstart,{passive:!1}),t.removeEventListener(C,"touchmove",this.touchmove),t.removeEventListener(C,"touchend",this.touchend),t.removeEventListener(C,"touchcancel",this.reset),this.offTemp()},ra.prototype.offTemp=function(){t.enableDrag(),t.removeEventListener(e.window,"mousemove",this.mousemove),t.removeEventListener(e.window,"mouseup",this.mouseup)},ra.prototype.mousedown=function(C){this.down(e.extend({},C,{ctrlKey:!0,preventDefault:function(){return C.preventDefault()}}),t.mousePos(this.element,C)),t.addEventListener(e.window,"mousemove",this.mousemove),t.addEventListener(e.window,"mouseup",this.mouseup)},ra.prototype.mousemove=function(C){this.move(C,t.mousePos(this.element,C))},ra.prototype.mouseup=function(C){this.mouseRotate.mouseupWindow(C),this.mousePitch&&this.mousePitch.mouseupWindow(C),this.offTemp()},ra.prototype.touchstart=function(C){C.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=t.touchPos(this.element,C.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return C.preventDefault()}},this._startPos))},ra.prototype.touchmove=function(C){C.targetTouches.length!==1?this.reset():(this._lastPos=t.touchPos(this.element,C.targetTouches)[0],this.move({preventDefault:function(){return C.preventDefault()}},this._lastPos))},ra.prototype.touchend=function(C){C.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},ra.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var ys={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Pa(C,z,B){var G=C.classList;for(var ae in ys)G.remove("mapboxgl-"+B+"-anchor-"+ae);G.add("mapboxgl-"+B+"-anchor-"+z)}var Ss,qs=function(C){function z(B,G){var ae=this;if(C.call(this),(B instanceof e.window.HTMLElement||G)&&(B=e.extend({element:B},G)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=B&&B.anchor||"center",this._color=B&&B.color||"#3FB1CE",this._draggable=B&&B.draggable||!1,this._state="inactive",this._rotation=B&&B.rotation||0,this._rotationAlignment=B&&B.rotationAlignment||"auto",this._pitchAlignment=B&&B.pitchAlignment&&B.pitchAlignment!=="auto"?B.pitchAlignment:this._rotationAlignment,B&&B.element)this._element=B.element,this._offset=e.Point.convert(B&&B.offset||[0,0]);else{this._defaultMarker=!0,this._element=t.create("div"),this._element.setAttribute("aria-label","Map marker");var ue=t.createNS("http://www.w3.org/2000/svg","svg");ue.setAttributeNS(null,"display","block"),ue.setAttributeNS(null,"height","41px"),ue.setAttributeNS(null,"width","27px"),ue.setAttributeNS(null,"viewBox","0 0 27 41");var ge=t.createNS("http://www.w3.org/2000/svg","g");ge.setAttributeNS(null,"stroke","none"),ge.setAttributeNS(null,"stroke-width","1"),ge.setAttributeNS(null,"fill","none"),ge.setAttributeNS(null,"fill-rule","evenodd");var _e=t.createNS("http://www.w3.org/2000/svg","g");_e.setAttributeNS(null,"fill-rule","nonzero");var Ee=t.createNS("http://www.w3.org/2000/svg","g");Ee.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Ee.setAttributeNS(null,"fill","#000000");for(var He=0,Xe=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];He<Xe.length;He+=1){var at=Xe[He],_t=t.createNS("http://www.w3.org/2000/svg","ellipse");_t.setAttributeNS(null,"opacity","0.04"),_t.setAttributeNS(null,"cx","10.5"),_t.setAttributeNS(null,"cy","5.80029008"),_t.setAttributeNS(null,"rx",at.rx),_t.setAttributeNS(null,"ry",at.ry),Ee.appendChild(_t)}var St=t.createNS("http://www.w3.org/2000/svg","g");St.setAttributeNS(null,"fill",this._color);var Tt=t.createNS("http://www.w3.org/2000/svg","path");Tt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),St.appendChild(Tt);var kt=t.createNS("http://www.w3.org/2000/svg","g");kt.setAttributeNS(null,"opacity","0.25"),kt.setAttributeNS(null,"fill","#000000");var bt=t.createNS("http://www.w3.org/2000/svg","path");bt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),kt.appendChild(bt);var Nt=t.createNS("http://www.w3.org/2000/svg","g");Nt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Nt.setAttributeNS(null,"fill","#FFFFFF");var zt=t.createNS("http://www.w3.org/2000/svg","g");zt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Ut=t.createNS("http://www.w3.org/2000/svg","circle");Ut.setAttributeNS(null,"fill","#000000"),Ut.setAttributeNS(null,"opacity","0.25"),Ut.setAttributeNS(null,"cx","5.5"),Ut.setAttributeNS(null,"cy","5.5"),Ut.setAttributeNS(null,"r","5.4999962");var nr=t.createNS("http://www.w3.org/2000/svg","circle");nr.setAttributeNS(null,"fill","#FFFFFF"),nr.setAttributeNS(null,"cx","5.5"),nr.setAttributeNS(null,"cy","5.5"),nr.setAttributeNS(null,"r","5.4999962"),zt.appendChild(Ut),zt.appendChild(nr),_e.appendChild(Ee),_e.appendChild(St),_e.appendChild(kt),_e.appendChild(Nt),_e.appendChild(zt),ue.appendChild(_e),this._element.appendChild(ue),this._offset=e.Point.convert(B&&B.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(pr){pr.preventDefault()}),this._element.addEventListener("mousedown",function(pr){pr.preventDefault()}),this._element.addEventListener("focus",function(){var pr=ae._map.getContainer();pr.scrollTop=0,pr.scrollLeft=0}),Pa(this._element,this._anchor,"marker"),this._popup=null}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.addTo=function(B){return this.remove(),this._map=B,B.getCanvasContainer().appendChild(this._element),B.on("move",this._update),B.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},z.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),t.remove(this._element),this._popup&&this._popup.remove(),this},z.prototype.getLngLat=function(){return this._lngLat},z.prototype.setLngLat=function(B){return this._lngLat=e.LngLat.convert(B),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},z.prototype.getElement=function(){return this._element},z.prototype.setPopup=function(B){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),B){if(!("offset"in B.options)){var G=Math.sqrt(Math.pow(13.5,2)/2);B.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[G,-1*(24.6+G)],"bottom-right":[-G,-1*(24.6+G)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=B,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},z.prototype._onKeyPress=function(B){var G=B.code,ae=B.charCode||B.keyCode;G!=="Space"&&G!=="Enter"&&ae!==32&&ae!==13||this.togglePopup()},z.prototype._onMapClick=function(B){var G=B.originalEvent.target,ae=this._element;this._popup&&(G===ae||ae.contains(G))&&this.togglePopup()},z.prototype.getPopup=function(){return this._popup},z.prototype.togglePopup=function(){var B=this._popup;return B?(B.isOpen()?B.remove():B.addTo(this._map),this):this},z.prototype._update=function(B){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Ms(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var G="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?G="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(G="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var ae="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?ae="rotateX(0deg)":this._pitchAlignment==="map"&&(ae="rotateX("+this._map.getPitch()+"deg)"),B&&B.type!=="moveend"||(this._pos=this._pos.round()),t.setTransform(this._element,ys[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+ae+" "+G)}},z.prototype.getOffset=function(){return this._offset},z.prototype.setOffset=function(B){return this._offset=e.Point.convert(B),this._update(),this},z.prototype._onMove=function(B){this._pos=B.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},z.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new e.Event("dragend")),this._state="inactive"},z.prototype._addDragHandler=function(B){this._element.contains(B.originalEvent.target)&&(B.preventDefault(),this._positionDelta=B.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},z.prototype.setDraggable=function(B){return this._draggable=!!B,this._map&&(B?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},z.prototype.isDraggable=function(){return this._draggable},z.prototype.setRotation=function(B){return this._rotation=B||0,this._update(),this},z.prototype.getRotation=function(){return this._rotation},z.prototype.setRotationAlignment=function(B){return this._rotationAlignment=B||"auto",this._update(),this},z.prototype.getRotationAlignment=function(){return this._rotationAlignment},z.prototype.setPitchAlignment=function(B){return this._pitchAlignment=B&&B!=="auto"?B:this._rotationAlignment,this._update(),this},z.prototype.getPitchAlignment=function(){return this._pitchAlignment},z}(e.Evented),zs={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Gs=0,xs=!1,El=function(C){function z(B){C.call(this),this.options=e.extend({},zs,B),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.onAdd=function(B){var G;return this._map=B,this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),G=this._setupUI,Ss!==void 0?G(Ss):e.window.navigator.permissions!==void 0?e.window.navigator.permissions.query({name:"geolocation"}).then(function(ae){Ss=ae.state!=="denied",G(Ss)}):(Ss=!!e.window.navigator.geolocation,G(Ss)),this._container},z.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),t.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Gs=0,xs=!1},z.prototype._isOutOfMapMaxBounds=function(B){var G=this._map.getMaxBounds(),ae=B.coords;return G&&(ae.longitude<G.getWest()||ae.longitude>G.getEast()||ae.latitude<G.getSouth()||ae.latitude>G.getNorth())},z.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},z.prototype._onSuccess=function(B){if(this._map){if(this._isOutOfMapMaxBounds(B))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",B)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=B,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(B),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(B),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",B)),this._finish()}},z.prototype._updateCamera=function(B){var G=new e.LngLat(B.coords.longitude,B.coords.latitude),ae=B.coords.accuracy,ue=this._map.getBearing(),ge=e.extend({bearing:ue},this.options.fitBoundsOptions);this._map.fitBounds(G.toBounds(ae),ge,{geolocateSource:!0})},z.prototype._updateMarker=function(B){if(B){var G=new e.LngLat(B.coords.longitude,B.coords.latitude);this._accuracyCircleMarker.setLngLat(G).addTo(this._map),this._userLocationDotMarker.setLngLat(G).addTo(this._map),this._accuracy=B.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},z.prototype._updateCircleRadius=function(){var B=this._map._container.clientHeight/2,G=this._map.unproject([0,B]),ae=this._map.unproject([1,B]),ue=G.distanceTo(ae),ge=Math.ceil(2*this._accuracy/ue);this._circleElement.style.width=ge+"px",this._circleElement.style.height=ge+"px"},z.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},z.prototype._onError=function(B){if(this._map){if(this.options.trackUserLocation)if(B.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var G=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=G,this._geolocateButton.setAttribute("aria-label",G),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(B.code===3&&xs)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",B)),this._finish()}},z.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},z.prototype._setupUI=function(B){var G=this;if(this._container.addEventListener("contextmenu",function(ge){return ge.preventDefault()}),this._geolocateButton=t.create("button","mapboxgl-ctrl-geolocate",this._container),t.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",B===!1){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var ae=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=ae,this._geolocateButton.setAttribute("aria-label",ae)}else{var ue=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=ue,this._geolocateButton.setAttribute("aria-label",ue)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=t.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new qs(this._dotElement),this._circleElement=t.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new qs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(ge){var _e=ge.originalEvent&&ge.originalEvent.type==="resize";ge.geolocateSource||G._watchState!=="ACTIVE_LOCK"||_e||(G._watchState="BACKGROUND",G._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),G._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),G.fire(new e.Event("trackuserlocationend")))})},z.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Gs--,xs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var B;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Gs>1?(B={maximumAge:6e5,timeout:0},xs=!0):(B=this.options.positionOptions,xs=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,B)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},z.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},z}(e.Evented),Vl={maxWidth:100,unit:"metric"},Es=function(C){this.options=e.extend({},Vl,C),e.bindAll(["_onMove","setUnit"],this)};function Ll(C,z,B){var G=B&&B.maxWidth||100,ae=C._container.clientHeight/2,ue=C.unproject([0,ae]),ge=C.unproject([G,ae]),_e=ue.distanceTo(ge);if(B&&B.unit==="imperial"){var Ee=3.2808*_e;Ee>5280?Ys(z,G,Ee/5280,C._getUIString("ScaleControl.Miles")):Ys(z,G,Ee,C._getUIString("ScaleControl.Feet"))}else B&&B.unit==="nautical"?Ys(z,G,_e/1852,C._getUIString("ScaleControl.NauticalMiles")):_e>=1e3?Ys(z,G,_e/1e3,C._getUIString("ScaleControl.Kilometers")):Ys(z,G,_e,C._getUIString("ScaleControl.Meters"))}function Ys(C,z,B,G){var ae,ue,ge,_e=(ae=B,ue=Math.pow(10,(""+Math.floor(ae)).length-1),ge=(ge=ae/ue)>=10?10:ge>=5?5:ge>=3?3:ge>=2?2:ge>=1?1:function(He){var Xe=Math.pow(10,Math.ceil(-Math.log(He)/Math.LN10));return Math.round(He*Xe)/Xe}(ge),ue*ge),Ee=_e/B;C.style.width=z*Ee+"px",C.innerHTML=_e+"&nbsp;"+G}Es.prototype.getDefaultPosition=function(){return"bottom-left"},Es.prototype._onMove=function(){Ll(this._map,this._container,this.options)},Es.prototype.onAdd=function(C){return this._map=C,this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",C.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Es.prototype.onRemove=function(){t.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Es.prototype.setUnit=function(C){this.options.unit=C,Ll(this._map,this._container,this.options)};var ao=function(C){this._fullscreen=!1,C&&C.container&&(C.container instanceof e.window.HTMLElement?this._container=C.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};ao.prototype.onAdd=function(C){return this._map=C,this._container||(this._container=this._map.getContainer()),this._controlContainer=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},ao.prototype.onRemove=function(){t.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},ao.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},ao.prototype._setupUI=function(){var C=this._fullscreenButton=t.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);t.create("span","mapboxgl-ctrl-icon",C).setAttribute("aria-hidden",!0),C.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},ao.prototype._updateTitle=function(){var C=this._getTitle();this._fullscreenButton.setAttribute("aria-label",C),this._fullscreenButton.title=C},ao.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},ao.prototype._isFullscreen=function(){return this._fullscreen},ao.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},ao.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Hl={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},ql=function(C){function z(B){C.call(this),this.options=e.extend(Object.create(Hl),B),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return C&&(z.__proto__=C),z.prototype=Object.create(C&&C.prototype),z.prototype.constructor=z,z.prototype.addTo=function(B){return this._map&&this.remove(),this._map=B,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},z.prototype.isOpen=function(){return!!this._map},z.prototype.remove=function(){return this._content&&t.remove(this._content),this._container&&(t.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},z.prototype.getLngLat=function(){return this._lngLat},z.prototype.setLngLat=function(B){return this._lngLat=e.LngLat.convert(B),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},z.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},z.prototype.getElement=function(){return this._container},z.prototype.setText=function(B){return this.setDOMContent(e.window.document.createTextNode(B))},z.prototype.setHTML=function(B){var G,ae=e.window.document.createDocumentFragment(),ue=e.window.document.createElement("body");for(ue.innerHTML=B;G=ue.firstChild;)ae.appendChild(G);return this.setDOMContent(ae)},z.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},z.prototype.setMaxWidth=function(B){return this.options.maxWidth=B,this._update(),this},z.prototype.setDOMContent=function(B){return this._createContent(),this._content.appendChild(B),this._update(),this},z.prototype.addClassName=function(B){this._container&&this._container.classList.add(B)},z.prototype.removeClassName=function(B){this._container&&this._container.classList.remove(B)},z.prototype.toggleClassName=function(B){if(this._container)return this._container.classList.toggle(B)},z.prototype._createContent=function(){this._content&&t.remove(this._content),this._content=t.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=t.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},z.prototype._onMouseUp=function(B){this._update(B.point)},z.prototype._onMouseMove=function(B){this._update(B.point)},z.prototype._onDrag=function(B){this._update(B.point)},z.prototype._update=function(B){var G=this,ae=this._lngLat||this._trackPointer;if(this._map&&ae&&this._content&&(this._container||(this._container=t.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=t.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(_t){return G._container.classList.add(_t)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ms(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||B)){var ue=this._pos=this._trackPointer&&B?B:this._map.project(this._lngLat),ge=this.options.anchor,_e=function _t(St){if(St){if(typeof St=="number"){var Tt=Math.round(Math.sqrt(.5*Math.pow(St,2)));return{center:new e.Point(0,0),top:new e.Point(0,St),"top-left":new e.Point(Tt,Tt),"top-right":new e.Point(-Tt,Tt),bottom:new e.Point(0,-St),"bottom-left":new e.Point(Tt,-Tt),"bottom-right":new e.Point(-Tt,-Tt),left:new e.Point(St,0),right:new e.Point(-St,0)}}if(St instanceof e.Point||Array.isArray(St)){var kt=e.Point.convert(St);return{center:kt,top:kt,"top-left":kt,"top-right":kt,bottom:kt,"bottom-left":kt,"bottom-right":kt,left:kt,right:kt}}return{center:e.Point.convert(St.center||[0,0]),top:e.Point.convert(St.top||[0,0]),"top-left":e.Point.convert(St["top-left"]||[0,0]),"top-right":e.Point.convert(St["top-right"]||[0,0]),bottom:e.Point.convert(St.bottom||[0,0]),"bottom-left":e.Point.convert(St["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(St["bottom-right"]||[0,0]),left:e.Point.convert(St.left||[0,0]),right:e.Point.convert(St.right||[0,0])}}return _t(new e.Point(0,0))}(this.options.offset);if(!ge){var Ee,He=this._container.offsetWidth,Xe=this._container.offsetHeight;Ee=ue.y+_e.bottom.y<Xe?["top"]:ue.y>this._map.transform.height-Xe?["bottom"]:[],ue.x<He/2?Ee.push("left"):ue.x>this._map.transform.width-He/2&&Ee.push("right"),ge=Ee.length===0?"bottom":Ee.join("-")}var at=ue.add(_e[ge]).round();t.setTransform(this._container,ys[ge]+" translate("+at.x+"px,"+at.y+"px)"),Pa(this._container,ge,"popup")}},z.prototype._onClose=function(){this.remove()},z}(e.Evented),ce={version:e.version,supported:r,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:Xo,NavigationControl:Wi,GeolocateControl:El,AttributionControl:Ra,ScaleControl:Es,FullscreenControl:ao,Popup:ql,Marker:qs,Style:Yn,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function(){Ke().acquire(Lt)},clearPrewarmedResources:function(){var C=Ct;C&&(C.isPreloaded()&&C.numActive()===1?(C.release(Lt),Ct=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(C){e.config.ACCESS_TOKEN=C},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(C){e.config.API_URL=C},get workerCount(){return lt.workerCount},set workerCount(C){lt.workerCount=C},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(C){e.config.MAX_PARALLEL_IMAGE_REQUESTS=C},clearStorage:function(C){e.clearTileCache(C)},workerUrl:""};return ce}),x})},{}],240:[function(u,q,W){q.exports=Math.log2||function(o){return Math.log(o)*Math.LOG2E}},{}],241:[function(u,q,W){q.exports=function(p,x){x||(x=p,p=window);var y=0,e=0,r=0,t={shift:!1,alt:!1,control:!1,meta:!1},i=!1;function n(b){var g=!1;return"altKey"in b&&(g=g||b.altKey!==t.alt,t.alt=!!b.altKey),"shiftKey"in b&&(g=g||b.shiftKey!==t.shift,t.shift=!!b.shiftKey),"ctrlKey"in b&&(g=g||b.ctrlKey!==t.control,t.control=!!b.ctrlKey),"metaKey"in b&&(g=g||b.metaKey!==t.meta,t.meta=!!b.metaKey),g}function h(b,g){var w=o.x(g),_=o.y(g);"buttons"in g&&(b=0|g.buttons),(b!==y||w!==e||_!==r||n(g))&&(y=0|b,e=w||0,r=_||0,x&&x(y,e,r,t))}function s(b){h(0,b)}function a(){(y||e||r||t.shift||t.alt||t.meta||t.control)&&(e=r=0,y=0,t.shift=t.alt=t.control=t.meta=!1,x&&x(0,0,0,t))}function l(b){n(b)&&x&&x(y,e,r,t)}function f(b){o.buttons(b)===0?h(0,b):h(y,b)}function d(b){h(y|o.buttons(b),b)}function v(b){h(y&~o.buttons(b),b)}function m(){i||(i=!0,p.addEventListener("mousemove",f),p.addEventListener("mousedown",d),p.addEventListener("mouseup",v),p.addEventListener("mouseleave",s),p.addEventListener("mouseenter",s),p.addEventListener("mouseout",s),p.addEventListener("mouseover",s),p.addEventListener("blur",a),p.addEventListener("keyup",l),p.addEventListener("keydown",l),p.addEventListener("keypress",l),p!==window&&(window.addEventListener("blur",a),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}m();var c={element:p};return Object.defineProperties(c,{enabled:{get:function(){return i},set:function(b){b?m():function(){!i||(i=!1,p.removeEventListener("mousemove",f),p.removeEventListener("mousedown",d),p.removeEventListener("mouseup",v),p.removeEventListener("mouseleave",s),p.removeEventListener("mouseenter",s),p.removeEventListener("mouseout",s),p.removeEventListener("mouseover",s),p.removeEventListener("blur",a),p.removeEventListener("keyup",l),p.removeEventListener("keydown",l),p.removeEventListener("keypress",l),p!==window&&(window.removeEventListener("blur",a),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))}()},enumerable:!0},buttons:{get:function(){return y},enumerable:!0},x:{get:function(){return e},enumerable:!0},y:{get:function(){return r},enumerable:!0},mods:{get:function(){return t},enumerable:!0}}),c};var o=u("mouse-event")},{"mouse-event":243}],242:[function(u,q,W){var o={left:0,top:0};q.exports=function(p,x,y){x=x||p.currentTarget||p.srcElement,Array.isArray(y)||(y=[0,0]);var e=p.clientX||0,r=p.clientY||0,t=(i=x,i===window||i===document||i===document.body?o:i.getBoundingClientRect()),i;return y[0]=e-t.left,y[1]=r-t.top,y}},{}],243:[function(u,q,W){function o(p){return p.target||p.srcElement||window}W.buttons=function(p){if(typeof p=="object"){if("buttons"in p)return p.buttons;if("which"in p){if((x=p.which)===2)return 4;if(x===3)return 2;if(x>0)return 1<<x-1}else if("button"in p){var x;if((x=p.button)===1)return 4;if(x===2)return 2;if(x>=0)return 1<<x}}return 0},W.element=o,W.x=function(p){if(typeof p=="object"){if("offsetX"in p)return p.offsetX;var x=o(p).getBoundingClientRect();return p.clientX-x.left}return 0},W.y=function(p){if(typeof p=="object"){if("offsetY"in p)return p.offsetY;var x=o(p).getBoundingClientRect();return p.clientY-x.top}return 0}},{}],244:[function(u,q,W){var o=u("to-px");q.exports=function(p,x,y){typeof p=="function"&&(y=!!x,x=p,p=window);var e=o("ex",p),r=function(t){y&&t.preventDefault();var i=t.deltaX||0,n=t.deltaY||0,h=t.deltaZ||0,s=1;switch(t.deltaMode){case 1:s=e;break;case 2:s=window.innerHeight}if(n*=s,h*=s,(i*=s)||n||h)return x(i,n,h,t)};return p.addEventListener("wheel",r),r}},{"to-px":314}],245:[function(u,q,W){(function(o,p){(function(){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(x,y,e){y[x]=y[x]||e(),q!==void 0&&q.exports&&(q.exports=y[x])})("Promise",o!==void 0?o:this,function(){var x,y,e,r=Object.prototype.toString,t=p!==void 0?function(b){return p(b)}:setTimeout;try{Object.defineProperty({},"x",{}),x=function(b,g,w,_){return Object.defineProperty(b,g,{value:w,writable:!0,configurable:_!==!1})}}catch{x=function(g,w,_){return g[w]=_,g}}function i(b,g){e.add(b,g),y||(y=t(e.drain))}function n(b){var g,w=typeof b;return b==null||w!="object"&&w!="function"||(g=b.then),typeof g=="function"&&g}function h(){for(var b=0;b<this.chain.length;b++)s(this,this.state===1?this.chain[b].success:this.chain[b].failure,this.chain[b]);this.chain.length=0}function s(b,g,w){var _,T;try{g===!1?w.reject(b.msg):(_=g===!0?b.msg:g.call(void 0,b.msg))===w.promise?w.reject(TypeError("Promise-chain cycle")):(T=n(_))?T.call(_,w.resolve,w.reject):w.resolve(_)}catch(k){w.reject(k)}}function a(b){var g,w=this;if(!w.triggered){w.triggered=!0,w.def&&(w=w.def);try{(g=n(b))?i(function(){var _=new d(w);try{g.call(b,function(){a.apply(_,arguments)},function(){l.apply(_,arguments)})}catch(T){l.call(_,T)}}):(w.msg=b,w.state=1,w.chain.length>0&&i(h,w))}catch(_){l.call(new d(w),_)}}}function l(b){var g=this;g.triggered||(g.triggered=!0,g.def&&(g=g.def),g.msg=b,g.state=2,g.chain.length>0&&i(h,g))}function f(b,g,w,_){for(var T=0;T<g.length;T++)(function(k){b.resolve(g[k]).then(function(L){w(k,L)},_)})(T)}function d(b){this.def=b,this.triggered=!1}function v(b){this.promise=b,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function m(b){if(typeof b!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var g=new v(this);this.then=function(w,_){var T={success:typeof w!="function"||w,failure:typeof _=="function"&&_};return T.promise=new this.constructor(function(k,L){if(typeof k!="function"||typeof L!="function")throw TypeError("Not a function");T.resolve=k,T.reject=L}),g.chain.push(T),g.state!==0&&i(h,g),T.promise},this.catch=function(w){return this.then(void 0,w)};try{b.call(void 0,function(w){a.call(g,w)},function(w){l.call(g,w)})}catch(w){l.call(g,w)}}e=function(){var b,g,w;function _(T,k){this.fn=T,this.self=k,this.next=void 0}return{add:function(T,k){w=new _(T,k),g?g.next=w:b=w,g=w,w=void 0},drain:function(){var T=b;for(b=g=y=void 0;T;)T.fn.call(T.self),T=T.next}}}();var c=x({},"constructor",m,!1);return m.prototype=c,x(c,"__NPO__",0,!1),x(m,"resolve",function(b){return b&&typeof b=="object"&&b.__NPO__===1?b:new this(function(g,w){if(typeof g!="function"||typeof w!="function")throw TypeError("Not a function");g(b)})}),x(m,"reject",function(b){return new this(function(g,w){if(typeof g!="function"||typeof w!="function")throw TypeError("Not a function");w(b)})}),x(m,"all",function(b){var g=this;return r.call(b)!="[object Array]"?g.reject(TypeError("Not an array")):b.length===0?g.resolve([]):new g(function(w,_){if(typeof w!="function"||typeof _!="function")throw TypeError("Not a function");var T=b.length,k=Array(T),L=0;f(g,b,function(M,I){k[M]=I,++L===T&&w(k)},_)})}),x(m,"race",function(b){var g=this;return r.call(b)!="[object Array]"?g.reject(TypeError("Not an array")):new g(function(w,_){if(typeof w!="function"||typeof _!="function")throw TypeError("Not a function");f(g,b,function(T,k){w(k)},_)})}),m})}).call(this)}).call(this,typeof Ga!="undefined"?Ga:typeof self!="undefined"?self:typeof window!="undefined"?window:{},u("timers").setImmediate)},{timers:311}],246:[function(u,q,W){var o=Math.PI,p=t(120);function x(i,n,h,s){return["C",i,n,h,s,h,s]}function y(i,n,h,s,a,l){return["C",i/3+2/3*h,n/3+2/3*s,a/3+2/3*h,l/3+2/3*s,a,l]}function e(i,n,h,s,a,l,f,d,v,m){if(m)I=m[0],P=m[1],L=m[2],M=m[3];else{var c=r(i,n,-a);i=c.x,n=c.y;var b=(i-(d=(c=r(d,v,-a)).x))/2,g=(n-(v=c.y))/2,w=b*b/(h*h)+g*g/(s*s);w>1&&(h*=w=Math.sqrt(w),s*=w);var _=h*h,T=s*s,k=(l==f?-1:1)*Math.sqrt(Math.abs((_*T-_*g*g-T*b*b)/(_*g*g+T*b*b)));k==1/0&&(k=1);var L=k*h*g/s+(i+d)/2,M=k*-s*b/h+(n+v)/2,I=Math.asin(((n-M)/s).toFixed(9)),P=Math.asin(((v-M)/s).toFixed(9));(I=i<L?o-I:I)<0&&(I=2*o+I),(P=d<L?o-P:P)<0&&(P=2*o+P),f&&I>P&&(I-=2*o),!f&&P>I&&(P-=2*o)}if(Math.abs(P-I)>p){var S=P,E=d,D=v;P=I+p*(f&&P>I?1:-1);var F=e(d=L+h*Math.cos(P),v=M+s*Math.sin(P),h,s,a,0,f,E,D,[P,S,L,M])}var H=Math.tan((P-I)/4),V=4/3*h*H,Q=4/3*s*H,K=[2*i-(i+V*Math.sin(I)),2*n-(n-Q*Math.cos(I)),d+V*Math.sin(P),v-Q*Math.cos(P),d,v];if(m)return K;F&&(K=K.concat(F));for(var Z=0;Z<K.length;){var $=r(K[Z],K[Z+1],a);K[Z++]=$.x,K[Z++]=$.y}return K}function r(i,n,h){return{x:i*Math.cos(h)-n*Math.sin(h),y:i*Math.sin(h)+n*Math.cos(h)}}function t(i){return i*(o/180)}q.exports=function(i){for(var n,h=[],s=0,a=0,l=0,f=0,d=null,v=null,m=0,c=0,b=0,g=i.length;b<g;b++){var w=i[b],_=w[0];switch(_){case"M":l=w[1],f=w[2];break;case"A":(w=e(m,c,w[1],w[2],t(w[3]),w[4],w[5],w[6],w[7])).unshift("C"),w.length>7&&(h.push(w.splice(0,7)),w.unshift("C"));break;case"S":var T=m,k=c;n!="C"&&n!="S"||(T+=T-s,k+=k-a),w=["C",T,k,w[1],w[2],w[3],w[4]];break;case"T":n=="Q"||n=="T"?(d=2*m-d,v=2*c-v):(d=m,v=c),w=y(m,c,d,v,w[1],w[2]);break;case"Q":d=w[1],v=w[2],w=y(m,c,w[1],w[2],w[3],w[4]);break;case"L":w=x(m,c,w[1],w[2]);break;case"H":w=x(m,c,w[1],c);break;case"V":w=x(m,c,m,w[1]);break;case"Z":w=x(m,c,l,f)}n=_,m=w[w.length-2],c=w[w.length-1],w.length>4?(s=w[w.length-4],a=w[w.length-3]):(s=m,a=c),h.push(w)}return h}},{}],247:[function(u,q,W){var o=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;function y(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}q.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;if(Object.getOwnPropertyNames(r).map(function(n){return r[n]}).join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(n){i[n]=n}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(e,r){for(var t,i,n=y(e),h=1;h<arguments.length;h++){for(var s in t=Object(arguments[h]))p.call(t,s)&&(n[s]=t[s]);if(o){i=o(t);for(var a=0;a<i.length;a++)x.call(t,i[a])&&(n[i[a]]=t[i[a]])}}return n}},{}],248:[function(u,q,W){function o(y,e){if(typeof y!="string")return[y];var r=[y];typeof e=="string"||Array.isArray(e)?e={brackets:e}:e||(e={});var t=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],i=e.escape||"___",n=!!e.flat;t.forEach(function(s){var a=new RegExp(["\\",s[0],"[^\\",s[0],"\\",s[1],"]*\\",s[1]].join("")),l=[];function f(d,v,m){var c=r.push(d.slice(s[0].length,-s[1].length))-1;return l.push(c),i+c+i}r.forEach(function(d,v){for(var m,c=0;d!=m;)if(m=d,d=d.replace(a,f),c++>1e4)throw Error("References have circular dependency. Please, check them.");r[v]=d}),l=l.reverse(),r=r.map(function(d){return l.forEach(function(v){d=d.replace(new RegExp("(\\"+i+v+"\\"+i+")","g"),s[0]+"$1"+s[1])}),d})});var h=new RegExp("\\"+i+"([0-9]+)\\"+i);return n?r:function s(a,l,f){for(var d,v=[],m=0;d=h.exec(a);){if(m++>1e4)throw Error("Circular references in parenthesis");v.push(a.slice(0,d.index)),v.push(s(l[d[1]],l)),a=a.slice(d.index+d[0].length)}return v.push(a),v}(r[0],r)}function p(y,e){if(e&&e.flat){var r,t=e&&e.escape||"___",i=y[0];if(!i)return"";for(var n=new RegExp("\\"+t+"([0-9]+)\\"+t),h=0;i!=r;){if(h++>1e4)throw Error("Circular references in "+y);r=i,i=i.replace(n,s)}return i}return y.reduce(function a(l,f){return Array.isArray(f)&&(f=f.reduce(a,"")),l+f},"");function s(a,l){if(y[l]==null)throw Error("Reference "+l+"is undefined");return y[l]}}function x(y,e){return Array.isArray(y)?p(y,e):o(y,e)}x.parse=o,x.stringify=p,q.exports=x},{}],249:[function(u,q,W){var o=u("pick-by-alias");q.exports=function(p){var x;return arguments.length>1&&(p=arguments),typeof p=="string"?p=p.split(/\s/).map(parseFloat):typeof p=="number"&&(p=[p]),p.length&&typeof p[0]=="number"?x=p.length===1?{width:p[0],height:p[0],x:0,y:0}:p.length===2?{width:p[0],height:p[1],x:0,y:0}:{x:p[0],y:p[1],width:p[2]-p[0]||0,height:p[3]-p[1]||0}:p&&(p=o(p,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),x={x:p.left||0,y:p.top||0},p.width==null?p.right?x.width=p.right-x.x:x.width=0:x.width=p.width,p.height==null?p.bottom?x.height=p.bottom-x.y:x.height=0:x.height=p.height),x}},{"pick-by-alias":253}],250:[function(u,q,W){q.exports=function(y){var e=[];return y.replace(p,function(r,t,i){var n=t.toLowerCase();for(i=function(h){var s=h.match(x);return s?s.map(Number):[]}(i),n=="m"&&i.length>2&&(e.push([t].concat(i.splice(0,2))),n="l",t=t=="m"?"l":"L");;){if(i.length==o[n])return i.unshift(t),e.push(i);if(i.length<o[n])throw new Error("malformed path data");e.push([t].concat(i.splice(0,o[n])))}}),e};var o={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},p=/([astvzqmhlc])([^astvzqmhlc]*)/gi,x=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],251:[function(u,q,W){q.exports=function(o,p){p||(p=[0,""]),o=String(o);var x=parseFloat(o,10);return p[0]=x,p[1]=o.match(/[\d.\-\+]*\s*(.*)/)[1]||"",p}},{}],252:[function(u,q,W){(function(o){(function(){(function(){var p,x,y,e,r,t;typeof performance!="undefined"&&performance!==null&&performance.now?q.exports=function(){return performance.now()}:o!=null&&o.hrtime?(q.exports=function(){return(p()-r)/1e6},x=o.hrtime,e=(p=function(){var i;return 1e9*(i=x())[0]+i[1]})(),t=1e9*o.uptime(),r=e-t):Date.now?(q.exports=function(){return Date.now()-y},y=Date.now()):(q.exports=function(){return new Date().getTime()-y},y=new Date().getTime())}).call(this)}).call(this)}).call(this,u("_process"))},{_process:277}],253:[function(u,q,W){q.exports=function(x,y,e){var r,t,i={};if(typeof y=="string"&&(y=p(y)),Array.isArray(y)){var n={};for(t=0;t<y.length;t++)n[y[t]]=!0;y=n}for(r in y)y[r]=p(y[r]);var h={};for(r in y){var s=y[r];if(Array.isArray(s))for(t=0;t<s.length;t++){var a=s[t];if(e&&(h[a]=!0),a in x){if(i[r]=x[a],e)for(var l=t;l<s.length;l++)h[s[l]]=!0;break}}else r in x&&(y[r]&&(i[r]=x[r]),e&&(h[r]=!0))}if(e)for(r in x)h[r]||(i[r]=x[r]);return i};var o={};function p(x){return o[x]?o[x]:(typeof x=="string"&&(x=o[x]=x.split(/\s*,\s*|\s+/)),x)}},{}],254:[function(u,q,W){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var o,p=u("./lib/build-log"),x=u("./lib/epsilon"),y=u("./lib/intersecter"),e=u("./lib/segment-chainer"),r=u("./lib/segment-selector"),t=u("./lib/geojson"),i=!1,n=x();function h(s,a,l){var f=o.segments(s),d=o.segments(a),v=l(o.combine(f,d));return o.polygon(v)}o={buildLog:function(s){return s===!0?i=p():s===!1&&(i=!1),i!==!1&&i.list},epsilon:function(s){return n.epsilon(s)},segments:function(s){var a=y(!0,n,i);return s.regions.forEach(a.addRegion),{segments:a.calculate(s.inverted),inverted:s.inverted}},combine:function(s,a){return{combined:y(!1,n,i).calculate(s.segments,s.inverted,a.segments,a.inverted),inverted1:s.inverted,inverted2:a.inverted}},selectUnion:function(s){return{segments:r.union(s.combined,i),inverted:s.inverted1||s.inverted2}},selectIntersect:function(s){return{segments:r.intersect(s.combined,i),inverted:s.inverted1&&s.inverted2}},selectDifference:function(s){return{segments:r.difference(s.combined,i),inverted:s.inverted1&&!s.inverted2}},selectDifferenceRev:function(s){return{segments:r.differenceRev(s.combined,i),inverted:!s.inverted1&&s.inverted2}},selectXor:function(s){return{segments:r.xor(s.combined,i),inverted:s.inverted1!==s.inverted2}},polygon:function(s){return{regions:e(s.segments,n,i),inverted:s.inverted}},polygonFromGeoJSON:function(s){return t.toPolygon(o,s)},polygonToGeoJSON:function(s){return t.fromPolygon(o,n,s)},union:function(s,a){return h(s,a,o.selectUnion)},intersect:function(s,a){return h(s,a,o.selectIntersect)},difference:function(s,a){return h(s,a,o.selectDifference)},differenceRev:function(s,a){return h(s,a,o.selectDifferenceRev)},xor:function(s,a){return h(s,a,o.selectXor)}},typeof window=="object"&&(window.PolyBool=o),q.exports=o},{"./lib/build-log":255,"./lib/epsilon":256,"./lib/geojson":257,"./lib/intersecter":258,"./lib/segment-chainer":260,"./lib/segment-selector":261}],255:[function(u,q,W){q.exports=function(){var o,p=0,x=!1;function y(e,r){return o.list.push({type:e,data:r?JSON.parse(JSON.stringify(r)):void 0}),o}return o={list:[],segmentId:function(){return p++},checkIntersection:function(e,r){return y("check",{seg1:e,seg2:r})},segmentChop:function(e,r){return y("div_seg",{seg:e,pt:r}),y("chop",{seg:e,pt:r})},statusRemove:function(e){return y("pop_seg",{seg:e})},segmentUpdate:function(e){return y("seg_update",{seg:e})},segmentNew:function(e,r){return y("new_seg",{seg:e,primary:r})},segmentRemove:function(e){return y("rem_seg",{seg:e})},tempStatus:function(e,r,t){return y("temp_status",{seg:e,above:r,below:t})},rewind:function(e){return y("rewind",{seg:e})},status:function(e,r,t){return y("status",{seg:e,above:r,below:t})},vert:function(e){return e===x?o:(x=e,y("vert",{x:e}))},log:function(e){return typeof e!="string"&&(e=JSON.stringify(e,!1,"  ")),y("log",{txt:e})},reset:function(){return y("reset")},selected:function(e){return y("selected",{segs:e})},chainStart:function(e){return y("chain_start",{seg:e})},chainRemoveHead:function(e,r){return y("chain_rem_head",{index:e,pt:r})},chainRemoveTail:function(e,r){return y("chain_rem_tail",{index:e,pt:r})},chainNew:function(e,r){return y("chain_new",{pt1:e,pt2:r})},chainMatch:function(e){return y("chain_match",{index:e})},chainClose:function(e){return y("chain_close",{index:e})},chainAddHead:function(e,r){return y("chain_add_head",{index:e,pt:r})},chainAddTail:function(e,r){return y("chain_add_tail",{index:e,pt:r})},chainConnect:function(e,r){return y("chain_con",{index1:e,index2:r})},chainReverse:function(e){return y("chain_rev",{index:e})},chainJoin:function(e,r){return y("chain_join",{index1:e,index2:r})},done:function(){return y("done")}}}},{}],256:[function(u,q,W){q.exports=function(o){typeof o!="number"&&(o=1e-10);var p={epsilon:function(x){return typeof x=="number"&&(o=x),o},pointAboveOrOnLine:function(x,y,e){var r=y[0],t=y[1],i=e[0],n=e[1],h=x[0];return(i-r)*(x[1]-t)-(n-t)*(h-r)>=-o},pointBetween:function(x,y,e){var r=x[1]-y[1],t=e[0]-y[0],i=x[0]-y[0],n=e[1]-y[1],h=i*t+r*n;return!(h<o)&&!(h-(t*t+n*n)>-o)},pointsSameX:function(x,y){return Math.abs(x[0]-y[0])<o},pointsSameY:function(x,y){return Math.abs(x[1]-y[1])<o},pointsSame:function(x,y){return p.pointsSameX(x,y)&&p.pointsSameY(x,y)},pointsCompare:function(x,y){return p.pointsSameX(x,y)?p.pointsSameY(x,y)?0:x[1]<y[1]?-1:1:x[0]<y[0]?-1:1},pointsCollinear:function(x,y,e){var r=x[0]-y[0],t=x[1]-y[1],i=y[0]-e[0],n=y[1]-e[1];return Math.abs(r*n-i*t)<o},linesIntersect:function(x,y,e,r){var t=y[0]-x[0],i=y[1]-x[1],n=r[0]-e[0],h=r[1]-e[1],s=t*h-i*n;if(Math.abs(s)<o)return!1;var a=x[0]-e[0],l=x[1]-e[1],f=(n*l-h*a)/s,d=(t*l-i*a)/s,v={alongA:0,alongB:0,pt:[x[0]+f*t,x[1]+f*i]};return v.alongA=f<=-o?-2:f<o?-1:f-1<=-o?0:f-1<o?1:2,v.alongB=d<=-o?-2:d<o?-1:d-1<=-o?0:d-1<o?1:2,v},pointInsideRegion:function(x,y){for(var e=x[0],r=x[1],t=y[y.length-1][0],i=y[y.length-1][1],n=!1,h=0;h<y.length;h++){var s=y[h][0],a=y[h][1];a-r>o!=i-r>o&&(t-s)*(r-a)/(i-a)+s-e>o&&(n=!n),t=s,i=a}return n}};return p}},{}],257:[function(u,q,W){var o={toPolygon:function(p,x){function y(t){if(t.length<=0)return p.segments({inverted:!1,regions:[]});function i(s){var a=s.slice(0,s.length-1);return p.segments({inverted:!1,regions:[a]})}for(var n=i(t[0]),h=1;h<t.length;h++)n=p.selectDifference(p.combine(n,i(t[h])));return n}if(x.type==="Polygon")return p.polygon(y(x.coordinates));if(x.type==="MultiPolygon"){for(var e=p.segments({inverted:!1,regions:[]}),r=0;r<x.coordinates.length;r++)e=p.selectUnion(p.combine(e,y(x.coordinates[r])));return p.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(p,x,y){function e(d,v){return x.pointInsideRegion([.5*(d[0][0]+d[1][0]),.5*(d[0][1]+d[1][1])],v)}function r(d){return{region:d,children:[]}}y=p.polygon(p.segments(y));var t=r(null);function i(d,v){for(var m=0;m<d.children.length;m++)if(e(v,(b=d.children[m]).region))return void i(b,v);var c=r(v);for(m=0;m<d.children.length;m++){var b;e((b=d.children[m]).region,v)&&(c.children.push(b),d.children.splice(m,1),m--)}d.children.push(c)}for(var n=0;n<y.regions.length;n++){var h=y.regions[n];h.length<3||i(t,h)}function s(d,v){for(var m=0,c=d[d.length-1][0],b=d[d.length-1][1],g=[],w=0;w<d.length;w++){var _=d[w][0],T=d[w][1];g.push([_,T]),m+=T*c-_*b,c=_,b=T}return m<0!==v&&g.reverse(),g.push([g[0][0],g[0][1]]),g}var a=[];function l(d){var v=[s(d.region,!1)];a.push(v);for(var m=0;m<d.children.length;m++)v.push(f(d.children[m]))}function f(d){for(var v=0;v<d.children.length;v++)l(d.children[v]);return s(d.region,!0)}for(n=0;n<t.children.length;n++)l(t.children[n]);return a.length<=0?{type:"Polygon",coordinates:[]}:a.length==1?{type:"Polygon",coordinates:a[0]}:{type:"MultiPolygon",coordinates:a}}};q.exports=o},{}],258:[function(u,q,W){var o=u("./linked-list");q.exports=function(p,x,y){function e(s,a,l){return{id:y?y.segmentId():-1,start:s,end:a,myFill:{above:l.myFill.above,below:l.myFill.below},otherFill:null}}var r=o.create();function t(s,a){r.insertBefore(s,function(l){return function(f,d,v,m,c,b){var g=x.pointsCompare(d,c);return g!==0?g:x.pointsSame(v,b)?0:f!==m?f?1:-1:x.pointAboveOrOnLine(v,m?c:b,m?b:c)?1:-1}(s.isStart,s.pt,a,l.isStart,l.pt,l.other.pt)<0})}function i(s,a){var l=function(f,d){var v=o.node({isStart:!0,pt:f.start,seg:f,primary:d,other:null,status:null});return t(v,f.end),v}(s,a);return function(f,d,v){var m=o.node({isStart:!1,pt:d.end,seg:d,primary:v,other:f,status:null});f.other=m,t(m,f.pt)}(l,s,a),l}function n(s,a){var l=e(a,s.seg.end,s.seg);return function(f,d){y&&y.segmentChop(f.seg,d),f.other.remove(),f.seg.end=d,f.other.pt=d,t(f.other,f.pt)}(s,a),i(l,s.primary)}function h(s,a){var l=o.create();function f(M){return l.findTransition(function(I){var P,S,E,D,F,H;return P=M,S=I.ev,E=P.seg.start,D=P.seg.end,F=S.seg.start,H=S.seg.end,(x.pointsCollinear(E,F,H)?x.pointsCollinear(D,F,H)||x.pointAboveOrOnLine(D,F,H)?1:-1:x.pointAboveOrOnLine(E,F,H)?1:-1)>0})}function d(M,I){var P=M.seg,S=I.seg,E=P.start,D=P.end,F=S.start,H=S.end;y&&y.checkIntersection(P,S);var V=x.linesIntersect(E,D,F,H);if(V===!1){if(!x.pointsCollinear(E,D,F)||x.pointsSame(E,H)||x.pointsSame(D,F))return!1;var Q=x.pointsSame(E,F),K=x.pointsSame(D,H);if(Q&&K)return I;var Z=!Q&&x.pointBetween(E,F,H),$=!K&&x.pointBetween(D,F,H);if(Q)return $?n(I,D):n(M,H),I;Z&&(K||($?n(I,D):n(M,H)),n(I,E))}else V.alongA===0&&(V.alongB===-1?n(M,F):V.alongB===0?n(M,V.pt):V.alongB===1&&n(M,H)),V.alongB===0&&(V.alongA===-1?n(I,E):V.alongA===0?n(I,V.pt):V.alongA===1&&n(I,D));return!1}for(var v=[];!r.isEmpty();){var m=r.getHead();if(y&&y.vert(m.pt[0]),m.isStart){let M=function(){if(b){var I=d(m,b);if(I)return I}return!!g&&d(m,g)};y&&y.segmentNew(m.seg,m.primary);var c=f(m),b=c.before?c.before.ev:null,g=c.after?c.after.ev:null;y&&y.tempStatus(m.seg,!!b&&b.seg,!!g&&g.seg);var w,_=M();if(_){var T;p?(T=m.seg.myFill.below===null||m.seg.myFill.above!==m.seg.myFill.below)&&(_.seg.myFill.above=!_.seg.myFill.above):_.seg.otherFill=m.seg.myFill,y&&y.segmentUpdate(_.seg),m.other.remove(),m.remove()}if(r.getHead()!==m){y&&y.rewind(m.seg);continue}p?(T=m.seg.myFill.below===null||m.seg.myFill.above!==m.seg.myFill.below,m.seg.myFill.below=g?g.seg.myFill.above:s,m.seg.myFill.above=T?!m.seg.myFill.below:m.seg.myFill.below):m.seg.otherFill===null&&(w=g?m.primary===g.primary?g.seg.otherFill.above:g.seg.myFill.above:m.primary?a:s,m.seg.otherFill={above:w,below:w}),y&&y.status(m.seg,!!b&&b.seg,!!g&&g.seg),m.other.status=c.insert(o.node({ev:m}))}else{var k=m.status;if(k===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(l.exists(k.prev)&&l.exists(k.next)&&d(k.prev.ev,k.next.ev),y&&y.statusRemove(k.ev.seg),k.remove(),!m.primary){var L=m.seg.myFill;m.seg.myFill=m.seg.otherFill,m.seg.otherFill=L}v.push(m.seg)}r.getHead().remove()}return y&&y.done(),v}return p?{addRegion:function(s){for(var a,l,f,d=s[s.length-1],v=0;v<s.length;v++){a=d,d=s[v];var m=x.pointsCompare(a,d);m!==0&&i((l=m<0?a:d,f=m<0?d:a,{id:y?y.segmentId():-1,start:l,end:f,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(s){return h(s,!1)}}:{calculate:function(s,a,l,f){return s.forEach(function(d){i(e(d.start,d.end,d),!0)}),l.forEach(function(d){i(e(d.start,d.end,d),!1)}),h(a,f)}}}},{"./linked-list":259}],259:[function(u,q,W){q.exports={create:function(){var o={root:{root:!0,next:null},exists:function(p){return p!==null&&p!==o.root},isEmpty:function(){return o.root.next===null},getHead:function(){return o.root.next},insertBefore:function(p,x){for(var y=o.root,e=o.root.next;e!==null;){if(x(e))return p.prev=e.prev,p.next=e,e.prev.next=p,void(e.prev=p);y=e,e=e.next}y.next=p,p.prev=y,p.next=null},findTransition:function(p){for(var x=o.root,y=o.root.next;y!==null&&!p(y);)x=y,y=y.next;return{before:x===o.root?null:x,after:y,insert:function(e){return e.prev=x,e.next=y,x.next=e,y!==null&&(y.prev=e),e}}}};return o},node:function(o){return o.prev=null,o.next=null,o.remove=function(){o.prev.next=o.next,o.next&&(o.next.prev=o.prev),o.prev=null,o.next=null},o}}},{}],260:[function(u,q,W){q.exports=function(o,p,x){var y=[],e=[];return o.forEach(function(r){var t=r.start,i=r.end;if(p.pointsSame(t,i))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{x&&x.chainStart(r);for(var n={index:0,matches_head:!1,matches_pt1:!1},h={index:0,matches_head:!1,matches_pt1:!1},s=n,a=0;a<y.length;a++){var l=(c=y[a])[0],f=(c[1],c[c.length-1]);if(c[c.length-2],p.pointsSame(l,t)){if(M(a,!0,!0))break}else if(p.pointsSame(l,i)){if(M(a,!0,!1))break}else if(p.pointsSame(f,t)){if(M(a,!1,!0))break}else if(p.pointsSame(f,i)&&M(a,!1,!1))break}if(s===n)return y.push([t,i]),void(x&&x.chainNew(t,i));if(s===h){x&&x.chainMatch(n.index);var d=n.index,v=n.matches_pt1?i:t,m=n.matches_head,c=y[d],b=m?c[0]:c[c.length-1],g=m?c[1]:c[c.length-2],w=m?c[c.length-1]:c[0],_=m?c[c.length-2]:c[1];return p.pointsCollinear(g,b,v)&&(m?(x&&x.chainRemoveHead(n.index,v),c.shift()):(x&&x.chainRemoveTail(n.index,v),c.pop()),b=g),p.pointsSame(w,v)?(y.splice(d,1),p.pointsCollinear(_,w,b)&&(m?(x&&x.chainRemoveTail(n.index,b),c.pop()):(x&&x.chainRemoveHead(n.index,b),c.shift())),x&&x.chainClose(n.index),void e.push(c)):void(m?(x&&x.chainAddHead(n.index,v),c.unshift(v)):(x&&x.chainAddTail(n.index,v),c.push(v)))}var T=n.index,k=h.index;x&&x.chainConnect(T,k);var L=y[T].length<y[k].length;n.matches_head?h.matches_head?L?(I(T),P(T,k)):(I(k),P(k,T)):P(k,T):h.matches_head?P(T,k):L?(I(T),P(k,T)):(I(k),P(T,k))}function M(S,E,D){return s.index=S,s.matches_head=E,s.matches_pt1=D,s===n?(s=h,!1):(s=null,!0)}function I(S){x&&x.chainReverse(S),y[S].reverse()}function P(S,E){var D=y[S],F=y[E],H=D[D.length-1],V=D[D.length-2],Q=F[0],K=F[1];p.pointsCollinear(V,H,Q)&&(x&&x.chainRemoveTail(S,H),D.pop(),H=V),p.pointsCollinear(H,Q,K)&&(x&&x.chainRemoveHead(E,Q),F.shift()),x&&x.chainJoin(S,E),y[S]=D.concat(F),y.splice(E,1)}}),e}},{}],261:[function(u,q,W){function o(x,y,e){var r=[];return x.forEach(function(t){var i=(t.myFill.above?8:0)+(t.myFill.below?4:0)+(t.otherFill&&t.otherFill.above?2:0)+(t.otherFill&&t.otherFill.below?1:0);y[i]!==0&&r.push({id:e?e.segmentId():-1,start:t.start,end:t.end,myFill:{above:y[i]===1,below:y[i]===2},otherFill:null})}),e&&e.selected(r),r}var p={union:function(x,y){return o(x,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],y)},intersect:function(x,y){return o(x,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],y)},difference:function(x,y){return o(x,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],y)},differenceRev:function(x,y){return o(x,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],y)},xor:function(x,y){return o(x,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],y)}};q.exports=p},{}],262:[function(u,q,W){var o=u("stream").Transform,p=u("stream-parser");function x(){o.call(this,{readableObjectMode:!0})}function y(e,r,t){Error.call(this),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=e,r&&(this.code=r),t&&(this.statusCode=t)}x.prototype=Object.create(o.prototype),x.prototype.constructor=x,p(x.prototype),W.ParserStream=x,W.sliceEq=function(e,r,t){for(var i=r,n=0;n<t.length;)if(e[i++]!==t[n++])return!1;return!0},W.str2arr=function(e,r){var t=[],i=0;if(r&&r==="hex")for(;i<e.length;)t.push(parseInt(e.slice(i,i+2),16)),i+=2;else for(;i<e.length;i++)t.push(255&e.charCodeAt(i));return t},W.readUInt16LE=function(e,r){return e[r]|e[r+1]<<8},W.readUInt16BE=function(e,r){return e[r+1]|e[r]<<8},W.readUInt32LE=function(e,r){return e[r]|e[r+1]<<8|e[r+2]<<16|16777216*e[r+3]},W.readUInt32BE=function(e,r){return e[r+3]|e[r+2]<<8|e[r+1]<<16|16777216*e[r]},y.prototype=Object.create(Error.prototype),y.prototype.constructor=y,W.ProbeError=y},{stream:285,"stream-parser":301}],263:[function(u,q,W){function o(y,e){var r=new Error(y);return r.code=e,r}function p(y){try{return decodeURIComponent(escape(y))}catch{return y}}function x(y,e,r){this.input=y.subarray(e,r),this.start=e;var t=String.fromCharCode.apply(null,this.input.subarray(0,4));if(t!=="II*\0"&&t!=="MM\0*")throw o("invalid TIFF signature","EBADDATA");this.big_endian=t[0]==="M"}x.prototype.each=function(y){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var r=this.ifds_to_read.shift();r.offset&&this.scan_ifd(r.id,r.offset,y)}},x.prototype.read_uint16=function(y){var e=this.input;if(y+2>e.length)throw o("unexpected EOF","EBADDATA");return this.big_endian?256*e[y]+e[y+1]:e[y]+256*e[y+1]},x.prototype.read_uint32=function(y){var e=this.input;if(y+4>e.length)throw o("unexpected EOF","EBADDATA");return this.big_endian?16777216*e[y]+65536*e[y+1]+256*e[y+2]+e[y+3]:e[y]+256*e[y+1]+65536*e[y+2]+16777216*e[y+3]},x.prototype.is_subifd_link=function(y,e){return y===0&&e===34665||y===0&&e===34853||y===34665&&e===40965},x.prototype.exif_format_length=function(y){switch(y){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},x.prototype.exif_format_read=function(y,e){var r;switch(y){case 1:case 2:return r=this.input[e];case 6:return(r=this.input[e])|33554430*(128&r);case 3:return r=this.read_uint16(e);case 8:return(r=this.read_uint16(e))|131070*(32768&r);case 4:return r=this.read_uint32(e);case 9:return 0|(r=this.read_uint32(e));case 5:case 10:case 11:case 12:case 7:default:return null}},x.prototype.scan_ifd=function(y,e,r){var t=this.read_uint16(e);e+=2;for(var i=0;i<t;i++){var n=this.read_uint16(e),h=this.read_uint16(e+2),s=this.read_uint32(e+4),a=this.exif_format_length(h),l=s*a,f=l<=4?e+8:this.read_uint32(e+8),d=!1;if(f+l>this.input.length)throw o("unexpected EOF","EBADDATA");for(var v=[],m=f,c=0;c<s;c++,m+=a){var b=this.exif_format_read(h,m);if(b===null){v=null;break}v.push(b)}if(Array.isArray(v)&&h===2&&(v=p(String.fromCharCode.apply(null,v)))&&v[v.length-1]==="\0"&&(v=v.slice(0,-1)),this.is_subifd_link(y,n)&&Array.isArray(v)&&Number.isInteger(v[0])&&v[0]>0&&(this.ifds_to_read.push({id:n,offset:v[0]}),d=!0),r({is_big_endian:this.big_endian,ifd:y,tag:n,format:h,count:s,entry_offset:e+this.start,data_length:l,data_offset:f+this.start,value:v,is_subifd_link:d})===!1)return void(this.aborted=!0);e+=12}y===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},q.exports.ExifParser=x,q.exports.get_orientation=function(y){var e=0;try{return new x(y,0,y.length).each(function(r){if(r.ifd===0&&r.tag===274&&Array.isArray(r.value))return e=r.value[0],!1}),e}catch{return-1}}},{}],264:[function(u,q,W){var o=u("./common").readUInt16BE,p=u("./common").readUInt32BE;function x(n,h){if(n.length<4+h)return null;var s=p(n,h);return n.length<s+h||s<8?null:{boxtype:String.fromCharCode.apply(null,n.slice(h+4,h+8)),data:n.slice(h+8,h+s),end:h+s}}function y(n,h){for(var s=0;;){var a=x(n,s);if(!a)break;switch(a.boxtype){case"ispe":h.sizes.push({width:p(a.data,4),height:p(a.data,8)});break;case"irot":h.transforms.push({type:"irot",value:3&a.data[0]});break;case"imir":h.transforms.push({type:"imir",value:1&a.data[0]})}s=a.end}}function e(n,h,s){for(var a=0,l=0;l<s;l++)a=256*a+(n[h+l]||0);return a}function r(n,h){for(var s=n[4]>>4&15,a=15&n[4],l=n[5]>>4&15,f=o(n,6),d=8,v=0;v<f;v++){var m=o(n,d),c=o(n,d+=2),b=e(n,d+=2,l),g=o(n,d+=l);if(d+=2,c===0&&g===1){var w=e(n,d,s),_=e(n,d+s,a);h.item_loc[m]={length:_,offset:w+b}}d+=g*(s+a)}}function t(n,h){for(var s=o(n,4),a=6,l=0;l<s;l++){var f=x(n,a);if(!f)break;if(f.boxtype==="infe"){for(var d=o(f.data,4),v="",m=8;m<f.data.length&&f.data[m];m++)v+=String.fromCharCode(f.data[m]);h.item_inf[v]=d}a=f.end}}function i(n,h){for(var s=0;;){var a=x(n,s);if(!a)break;a.boxtype==="ipco"&&y(a.data,h),s=a.end}}q.exports.unbox=x,q.exports.readSizeFromMeta=function(n){var h={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(m,c){for(var b=4;;){var g=x(m,b);if(!g)break;g.boxtype==="iprp"&&i(g.data,c),g.boxtype==="iloc"&&r(g.data,c),g.boxtype==="iinf"&&t(g.data,c),b=g.end}}(n,h),h.sizes.length){var s,a,l,f=(s=h.sizes,a=s.reduce(function(m,c){return m.width>c.width||m.width===c.width&&m.height>c.height?m:c}),l=s.reduce(function(m,c){return m.height>c.height||m.height===c.height&&m.width>c.width?m:c}),a.width>l.height||a.width===l.height&&a.height>l.width?a:l),d=1;h.transforms.forEach(function(m){var c={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},b={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(m.type==="imir"&&(d=m.value===0?b[d]:c[d=c[d=b[d]]]),m.type==="irot")for(var g=0;g<m.value;g++)d=c[d]});var v=null;return h.item_inf.Exif&&(v=h.item_loc[h.item_inf.Exif]),{width:f.width,height:f.height,orientation:h.transforms.length?d:null,variants:h.sizes,exif_location:v}}},q.exports.getMimeType=function(n){var h=String.fromCharCode.apply(null,n.slice(0,4)),s={};s[h]=!0;for(var a=8;a<n.length;a+=4)s[String.fromCharCode.apply(null,n.slice(a,a+4))]=!0;if(s.mif1||s.msf1||s.miaf)return h==="avif"||h==="avis"||h==="avio"?{type:"avif",mime:"image/avif"}:h==="heic"||h==="heix"?{type:"heic",mime:"image/heic"}:h==="hevc"||h==="hevx"?{type:"heic",mime:"image/heic-sequence"}:s.avif||s.avis?{type:"avif",mime:"image/avif"}:s.heic||s.heix||s.hevc||s.hevx||s.heis?s.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":262}],265:[function(u,q,W){var o=u("../common").str2arr,p=u("../common").sliceEq,x=u("../common").readUInt32BE,y=u("../miaf_utils"),e=u("../exif_utils"),r=o("ftyp");q.exports=function(t){if(p(t,4,r)){var i=y.unbox(t,0);if(i){var n=y.getMimeType(i.data);if(n){for(var h,s=i.end;;){var a=y.unbox(t,s);if(!a)break;if(s=a.end,a.boxtype==="mdat")return;if(a.boxtype==="meta"){h=a.data;break}}if(h){var l=y.readSizeFromMeta(h);if(l){var f={width:l.width,height:l.height,type:n.type,mime:n.mime,wUnits:"px",hUnits:"px"};if(l.variants.length>1&&(f.variants=l.variants),l.orientation&&(f.orientation=l.orientation),l.exif_location&&l.exif_location.offset+l.exif_location.length<=t.length){var d=x(t,l.exif_location.offset),v=t.slice(l.exif_location.offset+d+4,l.exif_location.offset+l.exif_location.length),m=e.get_orientation(v);m>0&&(f.orientation=m)}return f}}}}}}},{"../common":262,"../exif_utils":263,"../miaf_utils":264}],266:[function(u,q,W){var o=u("../common").str2arr,p=u("../common").sliceEq,x=u("../common").readUInt16LE,y=o("BM");q.exports=function(e){if(!(e.length<26)&&p(e,0,y))return{width:x(e,18),height:x(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":262}],267:[function(u,q,W){var o=u("../common").str2arr,p=u("../common").sliceEq,x=u("../common").readUInt16LE,y=o("GIF87a"),e=o("GIF89a");q.exports=function(r){if(!(r.length<10)&&(p(r,0,y)||p(r,0,e)))return{width:x(r,6),height:x(r,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":262}],268:[function(u,q,W){var o=u("../common").readUInt16LE;q.exports=function(p){var x=o(p,0),y=o(p,2),e=o(p,4);if(x===0&&y===1&&e){for(var r=[],t={width:0,height:0},i=0;i<e;i++){var n=p[6+16*i]||256,h=p[6+16*i+1]||256,s={width:n,height:h};r.push(s),(n>t.width||h>t.height)&&(t=s)}return{width:t.width,height:t.height,variants:r,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":262}],269:[function(u,q,W){var o=u("../common").readUInt16BE,p=u("../common").str2arr,x=u("../common").sliceEq,y=u("../exif_utils"),e=p("Exif\0\0");q.exports=function(r){if(!(r.length<2)&&r[0]===255&&r[1]===216&&r[2]===255)for(var t=2;;){for(;;){if(r.length-t<2)return;if(r[t++]===255)break}for(var i,n,h=r[t++];h===255;)h=r[t++];if(208<=h&&h<=217||h===1)i=0;else{if(!(192<=h&&h<=254)||r.length-t<2)return;i=o(r,t)-2,t+=2}if(h===217||h===218)return;if(h===225&&i>=10&&x(r,t,e)&&(n=y.get_orientation(r.slice(t+6,t+i))),i>=5&&192<=h&&h<=207&&h!==196&&h!==200&&h!==204){if(r.length-t<i)return;var s={width:o(r,t+3),height:o(r,t+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return n>0&&(s.orientation=n),s}t+=i}}},{"../common":262,"../exif_utils":263}],270:[function(u,q,W){var o=u("../common").str2arr,p=u("../common").sliceEq,x=u("../common").readUInt32BE,y=o(`\x89PNG\r

`),e=o("IHDR");q.exports=function(r){if(!(r.length<24)&&p(r,0,y)&&p(r,12,e))return{width:x(r,16),height:x(r,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":262}],271:[function(u,q,W){var o=u("../common").str2arr,p=u("../common").sliceEq,x=u("../common").readUInt32BE,y=o("8BPS\0");q.exports=function(e){if(!(e.length<22)&&p(e,0,y))return{width:x(e,18),height:x(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":262}],272:[function(u,q,W){function o(n){return typeof n=="number"&&isFinite(n)&&n>0}var p=/<[-_.:a-zA-Z0-9][^>]*>/,x=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,y=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,e=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,r=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,t=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function i(n){return t.test(n)?n.match(t)[0]:"px"}q.exports=function(n){if(function(w){var _,T=0,k=w.length;for(w[0]===239&&w[1]===187&&w[2]===191&&(T=3);T<k&&((_=w[T])===32||_===9||_===13||_===10);)T++;return T!==k&&w[T]===60}(n)){for(var h="",s=0;s<n.length;s++)h+=String.fromCharCode(n[s]);var a=(h.match(p)||[""])[0];if(x.test(a)){var l=function(w){var _=w.match(y),T=w.match(e),k=w.match(r);return{width:_&&(_[1]||_[2]),height:T&&(T[1]||T[2]),viewbox:k&&(k[1]||k[2])}}(a),f=parseFloat(l.width),d=parseFloat(l.height);if(l.width&&l.height)return!o(f)||!o(d)?void 0:{width:f,height:d,type:"svg",mime:"image/svg+xml",wUnits:i(l.width),hUnits:i(l.height)};var v=(l.viewbox||"").split(" "),m={width:v[2],height:v[3]},c=parseFloat(m.width),b=parseFloat(m.height);if(o(c)&&o(b)&&i(m.width)===i(m.height)){var g=c/b;return l.width?o(f)?{width:f,height:f/g,type:"svg",mime:"image/svg+xml",wUnits:i(l.width),hUnits:i(l.width)}:void 0:l.height?o(d)?{width:d*g,height:d,type:"svg",mime:"image/svg+xml",wUnits:i(l.height),hUnits:i(l.height)}:void 0:{width:c,height:b,type:"svg",mime:"image/svg+xml",wUnits:i(m.width),hUnits:i(m.height)}}}}}},{}],273:[function(u,q,W){var o=u("../common").str2arr,p=u("../common").sliceEq,x=u("../common").readUInt16LE,y=u("../common").readUInt16BE,e=u("../common").readUInt32LE,r=u("../common").readUInt32BE,t=o("II*\0"),i=o("MM\0*");function n(a,l,f){return f?y(a,l):x(a,l)}function h(a,l,f){return f?r(a,l):e(a,l)}function s(a,l,f){var d=n(a,l+2,f);return h(a,l+4,f)!==1||d!==3&&d!==4?null:d===3?n(a,l+8,f):h(a,l+8,f)}q.exports=function(a){if(!(a.length<8)&&(p(a,0,t)||p(a,0,i))){var l=a[0]===77,f=h(a,4,l)-8;if(!(f<0)){var d=f+8;if(!(a.length-d<2)){var v=12*n(a,d+0,l);if(!(v<=0||(d+=2,a.length-d<v))){var m,c,b,g;for(m=0;m<v;m+=12)(g=n(a,d+m,l))===256?c=s(a,d+m,l):g===257&&(b=s(a,d+m,l));return c&&b?{width:c,height:b,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},{"../common":262}],274:[function(u,q,W){var o=u("../common").str2arr,p=u("../common").sliceEq,x=u("../common").readUInt16LE,y=u("../common").readUInt32LE,e=u("../exif_utils"),r=o("RIFF"),t=o("WEBP");function i(s,a){if(s[a+3]===157&&s[a+4]===1&&s[a+5]===42)return{width:16383&x(s,a+6),height:16383&x(s,a+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function n(s,a){if(s[a]===47){var l=y(s,a+1);return{width:1+(16383&l),height:1+(l>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function h(s,a){return{width:1+(s[a+6]<<16|s[a+5]<<8|s[a+4]),height:1+(s[a+9]<<a|s[a+8]<<8|s[a+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}q.exports=function(s){if(!(s.length<16)&&(p(s,0,r)||p(s,8,t))){var a=12,l=null,f=0,d=y(s,4)+8;if(!(d>s.length)){for(;a+8<d;)if(s[a]!==0){var v=String.fromCharCode.apply(null,s.slice(a,a+4)),m=y(s,a+4);v==="VP8 "&&m>=10?l=l||i(s,a+8):v==="VP8L"&&m>=9?l=l||n(s,a+8):v==="VP8X"&&m>=10?l=l||h(s,a+8):v==="EXIF"&&(f=e.get_orientation(s.slice(a+8,a+8+m)),a=1/0),a+=8+m}else a++;if(l)return f>0&&(l.orientation=f),l}}}},{"../common":262,"../exif_utils":263}],275:[function(u,q,W){q.exports={avif:u("./parse_sync/avif"),bmp:u("./parse_sync/bmp"),gif:u("./parse_sync/gif"),ico:u("./parse_sync/ico"),jpeg:u("./parse_sync/jpeg"),png:u("./parse_sync/png"),psd:u("./parse_sync/psd"),svg:u("./parse_sync/svg"),tiff:u("./parse_sync/tiff"),webp:u("./parse_sync/webp")}},{"./parse_sync/avif":265,"./parse_sync/bmp":266,"./parse_sync/gif":267,"./parse_sync/ico":268,"./parse_sync/jpeg":269,"./parse_sync/png":270,"./parse_sync/psd":271,"./parse_sync/svg":272,"./parse_sync/tiff":273,"./parse_sync/webp":274}],276:[function(u,q,W){var o=u("./lib/parsers_sync");q.exports=function(p){return function(x){for(var y=Object.keys(o),e=0;e<y.length;e++){var r=o[y[e]](x);if(r)return r}return null}(p)},q.exports.parsers=o},{"./lib/parsers_sync":275}],277:[function(u,q,W){var o,p,x=q.exports={};function y(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function r(d){if(o===setTimeout)return setTimeout(d,0);if((o===y||!o)&&setTimeout)return o=setTimeout,setTimeout(d,0);try{return o(d,0)}catch{try{return o.call(null,d,0)}catch{return o.call(this,d,0)}}}(function(){try{o=typeof setTimeout=="function"?setTimeout:y}catch{o=y}try{p=typeof clearTimeout=="function"?clearTimeout:e}catch{p=e}})();var t,i=[],n=!1,h=-1;function s(){n&&t&&(n=!1,t.length?i=t.concat(i):h=-1,i.length&&a())}function a(){if(!n){var d=r(s);n=!0;for(var v=i.length;v;){for(t=i,i=[];++h<v;)t&&t[h].run();h=-1,v=i.length}t=null,n=!1,function(m){if(p===clearTimeout)return clearTimeout(m);if((p===e||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(m);try{p(m)}catch{try{return p.call(null,m)}catch{return p.call(this,m)}}}(d)}}function l(d,v){this.fun=d,this.array=v}function f(){}x.nextTick=function(d){var v=new Array(arguments.length-1);if(arguments.length>1)for(var m=1;m<arguments.length;m++)v[m-1]=arguments[m];i.push(new l(d,v)),i.length!==1||n||r(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},x.title="browser",x.browser=!0,x.env={},x.argv=[],x.version="",x.versions={},x.on=f,x.addListener=f,x.once=f,x.off=f,x.removeListener=f,x.removeAllListeners=f,x.emit=f,x.prependListener=f,x.prependOnceListener=f,x.listeners=function(d){return[]},x.binding=function(d){throw new Error("process.binding is not supported")},x.cwd=function(){return"/"},x.chdir=function(d){throw new Error("process.chdir is not supported")},x.umask=function(){return 0}},{}],278:[function(u,q,W){(function(o){(function(){for(var p=u("performance-now"),x=typeof window=="undefined"?o:window,y=["moz","webkit"],e="AnimationFrame",r=x["request"+e],t=x["cancel"+e]||x["cancelRequest"+e],i=0;!r&&i<y.length;i++)r=x[y[i]+"Request"+e],t=x[y[i]+"Cancel"+e]||x[y[i]+"CancelRequest"+e];if(!r||!t){var n=0,h=0,s=[];r=function(a){if(s.length===0){var l=p(),f=Math.max(0,1e3/60-(l-n));n=f+l,setTimeout(function(){var d=s.slice(0);s.length=0;for(var v=0;v<d.length;v++)if(!d[v].cancelled)try{d[v].callback(n)}catch(m){setTimeout(function(){throw m},0)}},Math.round(f))}return s.push({handle:++h,callback:a,cancelled:!1}),h},t=function(a){for(var l=0;l<s.length;l++)s[l].handle===a&&(s[l].cancelled=!0)}}q.exports=function(a){return r.call(x,a)},q.exports.cancel=function(){t.apply(x,arguments)},q.exports.polyfill=function(a){a||(a=x),a.requestAnimationFrame=r,a.cancelAnimationFrame=t}}).call(this)}).call(this,typeof Ga!="undefined"?Ga:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"performance-now":252}],279:[function(u,q,W){var o=u("array-bounds"),p=u("color-normalize"),x=u("update-diff"),y=u("pick-by-alias"),e=u("object-assign"),r=u("flatten-vertex-data"),t=u("to-float32"),i=t.float32,n=t.fract32;q.exports=function(s,a){if(typeof s=="function"?(a||(a={}),a.regl=s):a=s,a.length&&(a.positions=a),!(s=a.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var l,f,d,v,m,c,b=s._gl,g={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},w=[];return v=s.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),f=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),d=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),m=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),c=s.buffer({usage:"static",type:"float",data:h}),L(a),l=s({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:s.prop("range"),lineWidth:s.prop("lineWidth"),capSize:s.prop("capSize"),opacity:s.prop("opacity"),scale:s.prop("scale"),translate:s.prop("translate"),scaleFract:s.prop("scaleFract"),translateFract:s.prop("translateFract"),viewport:function(I,P){return[P.viewport.x,P.viewport.y,I.viewportWidth,I.viewportHeight]}},attributes:{color:{buffer:v,offset:function(I,P){return 4*P.offset},divisor:1},position:{buffer:f,offset:function(I,P){return 8*P.offset},divisor:1},positionFract:{buffer:d,offset:function(I,P){return 8*P.offset},divisor:1},error:{buffer:m,offset:function(I,P){return 16*P.offset},divisor:1},direction:{buffer:c,stride:24,offset:0},lineOffset:{buffer:c,stride:24,offset:8},capOffset:{buffer:c,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:s.prop("viewport")},viewport:s.prop("viewport"),stencil:!1,instances:s.prop("count"),count:h.length}),e(_,{update:L,draw:T,destroy:M,regl:s,gl:b,canvas:b.canvas,groups:w}),_;function _(I){I?L(I):I===null&&M(),T()}function T(I){if(typeof I=="number")return k(I);I&&!Array.isArray(I)&&(I=[I]),s._refresh(),w.forEach(function(P,S){P&&(I&&(I[S]?P.draw=!0:P.draw=!1),P.draw?k(S):P.draw=!0)})}function k(I){typeof I=="number"&&(I=w[I]),I!=null&&I&&I.count&&I.color&&I.opacity&&I.positions&&I.positions.length>1&&(I.scaleRatio=[I.scale[0]*I.viewport.width,I.scale[1]*I.viewport.height],l(I),I.after&&I.after(I))}function L(I){if(I){I.length!=null?typeof I[0]=="number"&&(I=[{positions:I}]):Array.isArray(I)||(I=[I]);var P=0,S=0;if(_.groups=w=I.map(function(K,Z){var $=w[Z];return K&&(typeof K=="function"?K={after:K}:typeof K[0]=="number"&&(K={positions:K}),K=y(K,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),$||(w[Z]=$={id:Z,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},K=e({},g,K)),x($,K,[{lineWidth:function(re){return .5*+re},capSize:function(re){return .5*+re},opacity:parseFloat,errors:function(re){return re=r(re),S+=re.length,re},positions:function(re,R){return re=r(re,"float64"),R.count=Math.floor(re.length/2),R.bounds=o(re,2),R.offset=P,P+=R.count,re}},{color:function(re,R){var N=R.count;if(re||(re="transparent"),!Array.isArray(re)||typeof re[0]=="number"){var U=re;re=Array(N);for(var te=0;te<N;te++)re[te]=U}if(re.length<N)throw Error("Not enough colors");for(var j=new Uint8Array(4*N),Y=0;Y<N;Y++){var J=p(re[Y],"uint8");j.set(J,4*Y)}return j},range:function(re,R,N){var U=R.bounds;return re||(re=U),R.scale=[1/(re[2]-re[0]),1/(re[3]-re[1])],R.translate=[-re[0],-re[1]],R.scaleFract=n(R.scale),R.translateFract=n(R.translate),re},viewport:function(re){var R;return Array.isArray(re)?R={x:re[0],y:re[1],width:re[2]-re[0],height:re[3]-re[1]}:re?(R={x:re.x||re.left||0,y:re.y||re.top||0},re.right?R.width=re.right-R.x:R.width=re.w||re.width||0,re.bottom?R.height=re.bottom-R.y:R.height=re.h||re.height||0):R={x:0,y:0,width:b.drawingBufferWidth,height:b.drawingBufferHeight},R}}])),$}),P||S){var E=w.reduce(function(K,Z,$){return K+(Z?Z.count:0)},0),D=new Float64Array(2*E),F=new Uint8Array(4*E),H=new Float32Array(4*E);w.forEach(function(K,Z){if(K){var $=K.positions,re=K.count,R=K.offset,N=K.color,U=K.errors;re&&(F.set(N,4*R),H.set(U,4*R),D.set($,2*R))}});var V=i(D);f(V);var Q=n(D,V);d(Q),v(F),m(H)}}}function M(){f.destroy(),d.destroy(),v.destroy(),m.destroy(),c.destroy()}};var h=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":313,"update-diff":329}],280:[function(u,q,W){var o=u("color-normalize"),p=u("array-bounds"),x=u("object-assign"),y=u("glslify"),e=u("pick-by-alias"),r=u("flatten-vertex-data"),t=u("earcut"),i=u("array-normalize"),n=u("to-float32"),h=n.float32,s=n.fract32,a=u("es6-weak-map"),l=u("parse-rect"),f=u("array-find-index");function d(v,m){if(!(this instanceof d))return new d(v,m);if(typeof v=="function"?(m||(m={}),m.regl=v):m=v,m.length&&(m.positions=m),!(v=m.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=v._gl,this.regl=v,this.passes=[],this.shaders=d.shaders.has(v)?d.shaders.get(v):d.shaders.set(v,d.createShaders(v)).get(v),this.update(m)}q.exports=d,d.dashMult=2,d.maxPatternLength=256,d.precisionThreshold=3e6,d.maxPoints=1e4,d.maxLines=2048,d.shaders=new a,d.createShaders=function(v){var m,c=v.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),b={primitive:"triangle strip",instances:v.prop("count"),count:4,offset:0,uniforms:{miterMode:function(w,_){return _.join==="round"?2:1},miterLimit:v.prop("miterLimit"),scale:v.prop("scale"),scaleFract:v.prop("scaleFract"),translateFract:v.prop("translateFract"),translate:v.prop("translate"),thickness:v.prop("thickness"),dashTexture:v.prop("dashTexture"),opacity:v.prop("opacity"),pixelRatio:v.context("pixelRatio"),id:v.prop("id"),dashLength:v.prop("dashLength"),viewport:function(w,_){return[_.viewport.x,_.viewport.y,w.viewportWidth,w.viewportHeight]},depth:v.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(w,_){return!_.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:v.prop("viewport")},viewport:v.prop("viewport")},g=v(x({vert:y([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:y([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:c,divisor:0,stride:8,offset:0},lineTop:{buffer:c,divisor:0,stride:8,offset:4},aCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:v.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:v.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:v.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},b));try{m=v(x({cull:{enable:!0,face:"back"},vert:y([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:y([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:c,divisor:0,stride:8,offset:0},lineTop:{buffer:c,divisor:0,stride:8,offset:4},aColor:{buffer:v.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:v.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},b))}catch{m=g}return{fill:v({primitive:"triangle",elements:function(w,_){return _.triangles},offset:0,vert:y([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:y([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:v.prop("scale"),color:v.prop("fill"),scaleFract:v.prop("scaleFract"),translateFract:v.prop("translateFract"),translate:v.prop("translate"),opacity:v.prop("opacity"),pixelRatio:v.context("pixelRatio"),id:v.prop("id"),viewport:function(w,_){return[_.viewport.x,_.viewport.y,w.viewportWidth,w.viewportHeight]}},attributes:{position:{buffer:v.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:v.prop("positionFractBuffer"),stride:8,offset:8}},blend:b.blend,depth:{enable:!1},scissor:b.scissor,stencil:b.stencil,viewport:b.viewport}),rect:g,miter:m}},d.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},d.prototype.render=function(){for(var v,m=[],c=arguments.length;c--;)m[c]=arguments[c];m.length&&(v=this).update.apply(v,m),this.draw()},d.prototype.draw=function(){for(var v=this,m=[],c=arguments.length;c--;)m[c]=arguments[c];return(m.length?m:this.passes).forEach(function(b,g){var w;if(b&&Array.isArray(b))return(w=v).draw.apply(w,b);typeof b=="number"&&(b=v.passes[b]),b&&b.count>1&&b.opacity&&(v.regl._refresh(),b.fill&&b.triangles&&b.triangles.length>2&&v.shaders.fill(b),b.thickness&&(b.scale[0]*b.viewport.width>d.precisionThreshold||b.scale[1]*b.viewport.height>d.precisionThreshold||b.join==="rect"||!b.join&&(b.thickness<=2||b.count>=d.maxPoints)?v.shaders.rect(b):v.shaders.miter(b)))}),this},d.prototype.update=function(v){var m=this;if(v){v.length!=null?typeof v[0]=="number"&&(v=[{positions:v}]):Array.isArray(v)||(v=[v]);var c=this.regl,b=this.gl;if(v.forEach(function(k,L){var M=m.passes[L];if(k!==void 0)if(k!==null){if(typeof k[0]=="number"&&(k={positions:k}),k=e(k,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),M||(m.passes[L]=M={id:L,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:c.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:c.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:c.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:c.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},k=x({},d.defaults,k)),k.thickness!=null&&(M.thickness=parseFloat(k.thickness)),k.opacity!=null&&(M.opacity=parseFloat(k.opacity)),k.miterLimit!=null&&(M.miterLimit=parseFloat(k.miterLimit)),k.overlay!=null&&(M.overlay=!!k.overlay,L<d.maxLines&&(M.depth=2*(d.maxLines-1-L%d.maxLines)/d.maxLines-1)),k.join!=null&&(M.join=k.join),k.hole!=null&&(M.hole=k.hole),k.fill!=null&&(M.fill=k.fill?o(k.fill,"uint8"):null),k.viewport!=null&&(M.viewport=l(k.viewport)),M.viewport||(M.viewport=l([b.drawingBufferWidth,b.drawingBufferHeight])),k.close!=null&&(M.close=k.close),k.positions===null&&(k.positions=[]),k.positions){var I,P;if(k.positions.x&&k.positions.y){var S=k.positions.x,E=k.positions.y;P=M.count=Math.max(S.length,E.length),I=new Float64Array(2*P);for(var D=0;D<P;D++)I[2*D]=S[D],I[2*D+1]=E[D]}else I=r(k.positions,"float64"),P=M.count=Math.floor(I.length/2);var F=M.bounds=p(I,2);if(M.fill){for(var H=[],V={},Q=0,K=0,Z=0,$=M.count;K<$;K++){var re=I[2*K],R=I[2*K+1];isNaN(re)||isNaN(R)||re==null||R==null?(re=I[2*Q],R=I[2*Q+1],V[K]=Q):Q=K,H[Z++]=re,H[Z++]=R}if(k.splitNull){M.count-1 in V||(V[M.count]=M.count-1);var N=Object.keys(V).map(Number).sort(function(At,Gt){return At-Gt}),U=[],te=0,j=M.hole!=null?M.hole[0]:null;if(j!=null){var Y=f(N,function(At){return At>=j});(N=N.slice(0,Y)).push(j)}for(var J=function(At){var Gt=H.slice(2*te,2*N[At]).concat(j?H.slice(2*j):[]),Qt=(M.hole||[]).map(function(Ye){return Ye-j+(N[At]-te)}),Ve=t(Gt,Qt);Ve=Ve.map(function(Ye){return Ye+te+(Ye+te<N[At]?0:j-N[At])}),U.push.apply(U,Ve),te=N[At]+1},ee=0;ee<N.length;ee++)J(ee);for(var ne=0,se=U.length;ne<se;ne++)V[U[ne]]!=null&&(U[ne]=V[U[ne]]);M.triangles=U}else{for(var oe=t(H,M.hole||[]),he=0,le=oe.length;he<le;he++)V[oe[he]]!=null&&(oe[he]=V[oe[he]]);M.triangles=oe}}var de=new Float64Array(I);i(de,2,F);var xe=new Float64Array(2*P+6);M.close?I[0]===I[2*P-2]&&I[1]===I[2*P-1]?(xe[0]=de[2*P-4],xe[1]=de[2*P-3]):(xe[0]=de[2*P-2],xe[1]=de[2*P-1]):(xe[0]=de[0],xe[1]=de[1]),xe.set(de,2),M.close?I[0]===I[2*P-2]&&I[1]===I[2*P-1]?(xe[2*P+2]=de[2],xe[2*P+3]=de[3],M.count-=1):(xe[2*P+2]=de[0],xe[2*P+3]=de[1],xe[2*P+4]=de[2],xe[2*P+5]=de[3]):(xe[2*P+2]=de[2*P-2],xe[2*P+3]=de[2*P-1],xe[2*P+4]=de[2*P-2],xe[2*P+5]=de[2*P-1]);var we=h(xe);M.positionBuffer(we);var be=s(xe,we);M.positionFractBuffer(be)}if(k.range?M.range=k.range:M.range||(M.range=M.bounds),(k.range||k.positions)&&M.count){var Ae=M.bounds,fe=Ae[2]-Ae[0],me=Ae[3]-Ae[1],ke=M.range[2]-M.range[0],Te=M.range[3]-M.range[1];M.scale=[fe/ke,me/Te],M.translate=[-M.range[0]/ke+Ae[0]/ke||0,-M.range[1]/Te+Ae[1]/Te||0],M.scaleFract=s(M.scale),M.translateFract=s(M.translate)}if(k.dashes){var Me,Oe=0;if(!k.dashes||k.dashes.length<2)Oe=1,Me=new Uint8Array([255,255,255,255,255,255,255,255]);else{Oe=0;for(var Fe=0;Fe<k.dashes.length;++Fe)Oe+=k.dashes[Fe];Me=new Uint8Array(Oe*d.dashMult);for(var qe=0,et=255,ze=0;ze<2;ze++)for(var Ue=0;Ue<k.dashes.length;++Ue){for(var We=0,Ze=k.dashes[Ue]*d.dashMult*.5;We<Ze;++We)Me[qe++]=et;et^=255}}M.dashLength=Oe,M.dashTexture({channels:1,data:Me,width:Me.length,height:1,mag:"linear",min:"linear"},0,0)}if(k.color){var nt=M.count,ft=k.color;ft||(ft="transparent");var xt=new Uint8Array(4*nt+4);if(Array.isArray(ft)&&typeof ft[0]!="number"){for(var It=0;It<nt;It++){var Et=o(ft[It],"uint8");xt.set(Et,4*It)}xt.set(o(ft[0],"uint8"),4*nt)}else for(var it=o(ft,"uint8"),rt=0;rt<nt+1;rt++)xt.set(it,4*rt);M.colorBuffer({usage:"dynamic",type:"uint8",data:xt})}}else m.passes[L]=null}),v.length<this.passes.length){for(var g=v.length;g<this.passes.length;g++){var w=this.passes[g];w&&(w.colorBuffer.destroy(),w.positionBuffer.destroy(),w.dashTexture.destroy())}this.passes.length=v.length}for(var _=[],T=0;T<this.passes.length;T++)this.passes[T]!==null&&_.push(this.passes[T]);return this.passes=_,this}},d.prototype.destroy=function(){return this.passes.forEach(function(v){v.colorBuffer.destroy(),v.positionBuffer.destroy(),v.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313}],281:[function(u,q,W){function o(g,w){return function(_){if(Array.isArray(_))return _}(g)||function(_,T){var k=_==null?null:typeof Symbol!="undefined"&&_[Symbol.iterator]||_["@@iterator"];if(k!=null){var L,M,I=[],P=!0,S=!1;try{for(k=k.call(_);!(P=(L=k.next()).done)&&(I.push(L.value),!T||I.length!==T);P=!0);}catch(E){S=!0,M=E}finally{try{P||k.return==null||k.return()}finally{if(S)throw M}}return I}}(g,w)||x(g,w)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function p(g){return function(w){if(Array.isArray(w))return y(w)}(g)||function(w){if(typeof Symbol!="undefined"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}(g)||x(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function x(g,w){if(g){if(typeof g=="string")return y(g,w);var _=Object.prototype.toString.call(g).slice(8,-1);return _==="Object"&&g.constructor&&(_=g.constructor.name),_==="Map"||_==="Set"?Array.from(g):_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?y(g,w):void 0}}function y(g,w){(w==null||w>g.length)&&(w=g.length);for(var _=0,T=new Array(w);_<w;_++)T[_]=g[_];return T}var e=u("color-normalize"),r=u("array-bounds"),t=u("color-id"),i=u("@plotly/point-cluster"),n=u("object-assign"),h=u("glslify"),s=u("pick-by-alias"),a=u("update-diff"),l=u("flatten-vertex-data"),f=u("is-iexplorer"),d=u("to-float32"),v=u("parse-rect"),m=c;function c(g,w){var _=this;if(!(this instanceof c))return new c(g,w);typeof g=="function"?(w||(w={}),w.regl=g):(w=g,g=null),w&&w.length&&(w.positions=w);var T,k=(g=w.regl)._gl,L=[];this.tooManyColors=f,T=g.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),n(this,{regl:g,gl:k,groups:[],markerCache:[null],markerTextures:[null],palette:L,paletteIds:{},paletteTexture:T,maxColors:255,maxSize:100,canvas:k.canvas}),this.update(w);var M={uniforms:{constPointSize:!!w.constPointSize,opacity:g.prop("opacity"),paletteSize:function(S,E){return[_.tooManyColors?0:255,T.height]},pixelRatio:g.context("pixelRatio"),scale:g.prop("scale"),scaleFract:g.prop("scaleFract"),translate:g.prop("translate"),translateFract:g.prop("translateFract"),markerTexture:g.prop("markerTexture"),paletteTexture:T},attributes:{x:function(S,E){return E.xAttr||{buffer:E.positionBuffer,stride:8,offset:0}},y:function(S,E){return E.yAttr||{buffer:E.positionBuffer,stride:8,offset:4}},xFract:function(S,E){return E.xAttr?{constant:[0,0]}:{buffer:E.positionFractBuffer,stride:8,offset:0}},yFract:function(S,E){return E.yAttr?{constant:[0,0]}:{buffer:E.positionFractBuffer,stride:8,offset:4}},size:function(S,E){return E.size.length?{buffer:E.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*E.size/_.maxSize)]}},borderSize:function(S,E){return E.borderSize.length?{buffer:E.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*E.borderSize/_.maxSize)]}},colorId:function(S,E){return E.color.length?{buffer:E.colorBuffer,stride:_.tooManyColors?8:4,offset:0}:{constant:_.tooManyColors?L.slice(4*E.color,4*E.color+4):[E.color]}},borderColorId:function(S,E){return E.borderColor.length?{buffer:E.colorBuffer,stride:_.tooManyColors?8:4,offset:_.tooManyColors?4:2}:{constant:_.tooManyColors?L.slice(4*E.borderColor,4*E.borderColor+4):[E.borderColor]}},isActive:function(S,E){return E.activation===!0?{constant:[1]}:E.activation?E.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:g.prop("viewport")},viewport:g.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:g.prop("elements"),count:g.prop("count"),offset:g.prop("offset"),primitive:"points"},I=n({},M);I.frag=h([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),I.vert=h([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=g(I);var P=n({},M);P.frag=h([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),P.vert=h([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),f&&(P.frag=P.frag.replace("smoothstep","smoothStep"),I.frag=I.frag.replace("smoothstep","smoothStep")),this.drawCircle=g(P)}c.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},c.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},c.prototype.draw=function(){for(var g=this,w=arguments.length,_=new Array(w),T=0;T<w;T++)_[T]=arguments[T];var k=this.groups;if(_.length===1&&Array.isArray(_[0])&&(_[0][0]===null||Array.isArray(_[0][0]))&&(_=_[0]),this.regl._refresh(),_.length)for(var L=0;L<_.length;L++)this.drawItem(L,_[L]);else k.forEach(function(M,I){g.drawItem(I)});return this},c.prototype.drawItem=function(g,w){var _=this.groups,T=_[g];if(typeof w=="number"&&(g=w,T=_[w],w=null),T&&T.count&&T.opacity){T.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,T,w));for(var k=[],L=1;L<T.activation.length;L++)T.activation[L]&&(T.activation[L]===!0||T.activation[L].data.length)&&k.push.apply(k,p(this.getMarkerDrawOptions(L,T,w)));k.length&&this.drawMarker(k)}},c.prototype.getMarkerDrawOptions=function(g,w,_){var T=w.range,k=w.tree,L=w.viewport,M=w.activation,I=w.selectionBuffer,P=w.count;if(this.regl,!k)return _?[n({},w,{markerTexture:this.markerTextures[g],activation:M[g],count:_.length,elements:_,offset:0})]:[n({},w,{markerTexture:this.markerTextures[g],activation:M[g],offset:0})];var S=[],E=k.range(T,{lod:!0,px:[(T[2]-T[0])/L.width,(T[3]-T[1])/L.height]});if(_){for(var D=M[g].data,F=new Uint8Array(P),H=0;H<_.length;H++){var V=_[H];F[V]=D?D[V]:1}I.subdata(F)}for(var Q=E.length;Q--;){var K=o(E[Q],2),Z=K[0],$=K[1];S.push(n({},w,{markerTexture:this.markerTextures[g],activation:_?I:M[g],offset:Z,count:$-Z}))}return S},c.prototype.update=function(){for(var g=this,w=arguments.length,_=new Array(w),T=0;T<w;T++)_[T]=arguments[T];if(_.length){_.length===1&&Array.isArray(_[0])&&(_=_[0]);var k=this.groups,L=this.gl,M=this.regl,I=this.maxSize,P=this.maxColors,S=this.palette;this.groups=k=_.map(function(E,D){var F=k[D];if(E===void 0)return F;E===null?E={positions:null}:typeof E=="function"?E={ondraw:E}:typeof E[0]=="number"&&(E={positions:E}),(E=s(E,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions===null&&(E.positions=[]),E.tooManyColors!=null&&(g.tooManyColors=E.tooManyColors),F||(k[D]=F={id:D,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:M.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:M.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:M.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:M.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:M.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},E=n({},c.defaults,E)),E.positions&&!("marker"in E)&&(E.marker=F.marker,delete F.marker),E.marker&&!("positions"in E)&&(E.positions=F.positions,delete F.positions);var H=0,V=0;if(a(F,E,[{snap:!0,size:function(le,de){return le==null&&(le=c.defaults.size),H+=le&&le.length?1:0,le},borderSize:function(le,de){return le==null&&(le=c.defaults.borderSize),H+=le&&le.length?1:0,le},opacity:parseFloat,color:function(le,de){return le==null&&(le=c.defaults.color),le=g.updateColor(le),V++,le},borderColor:function(le,de){return le==null&&(le=c.defaults.borderColor),le=g.updateColor(le),V++,le},bounds:function(le,de,xe){return"range"in xe||(xe.range=null),le},positions:function(le,de,xe){var we=de.snap,be=de.positionBuffer,Ae=de.positionFractBuffer,fe=de.selectionBuffer;if(le.x||le.y)return le.x.length?de.xAttr={buffer:M.buffer(le.x),offset:0,stride:4,count:le.x.length}:de.xAttr={buffer:le.x.buffer,offset:4*le.x.offset||0,stride:4*(le.x.stride||1),count:le.x.count},le.y.length?de.yAttr={buffer:M.buffer(le.y),offset:0,stride:4,count:le.y.length}:de.yAttr={buffer:le.y.buffer,offset:4*le.y.offset||0,stride:4*(le.y.stride||1),count:le.y.count},de.count=Math.max(de.xAttr.count,de.yAttr.count),le;le=l(le,"float64");var me=de.count=Math.floor(le.length/2),ke=de.bounds=me?r(le,2):null;if(xe.range||de.range||(delete de.range,xe.range=ke),xe.marker||de.marker||(delete de.marker,xe.marker=null),we&&(we===!0||me>we)?de.tree=i(le,{bounds:ke}):we&&we.length&&(de.tree=we),de.tree){var Te={primitive:"points",usage:"static",data:de.tree,type:"uint32"};de.elements?de.elements(Te):de.elements=M.elements(Te)}var Me=d.float32(le);return be({data:Me,usage:"dynamic"}),Ae({data:d.fract32(le,Me),usage:"dynamic"}),fe({data:new Uint8Array(me),type:"uint8",usage:"stream"}),le}},{marker:function(le,de,xe){var we=de.activation;if(we.forEach(function(Me){return Me&&Me.destroy&&Me.destroy()}),we.length=0,le&&typeof le[0]!="number"){for(var be=[],Ae=0,fe=Math.min(le.length,de.count);Ae<fe;Ae++){var me=g.addMarker(le[Ae]);be[me]||(be[me]=new Uint8Array(de.count)),be[me][Ae]=1}for(var ke=0;ke<be.length;ke++)if(be[ke]){var Te={data:be[ke],type:"uint8",usage:"static"};we[ke]?we[ke](Te):we[ke]=M.buffer(Te),we[ke].data=be[ke]}}else we[g.addMarker(le)]=!0;return le},range:function(le,de,xe){var we=de.bounds;if(we)return le||(le=we),de.scale=[1/(le[2]-le[0]),1/(le[3]-le[1])],de.translate=[-le[0],-le[1]],de.scaleFract=d.fract(de.scale),de.translateFract=d.fract(de.translate),le},viewport:function(le){return v(le||[L.drawingBufferWidth,L.drawingBufferHeight])}}]),H){var Q=F,K=Q.count,Z=Q.size,$=Q.borderSize,re=Q.sizeBuffer,R=new Uint8Array(2*K);if(Z.length||$.length)for(var N=0;N<K;N++)R[2*N]=Math.round(255*(Z[N]==null?Z:Z[N])/I),R[2*N+1]=Math.round(255*($[N]==null?$:$[N])/I);re({data:R,usage:"dynamic"})}if(V){var U,te=F,j=te.count,Y=te.color,J=te.borderColor,ee=te.colorBuffer;if(g.tooManyColors){if(Y.length||J.length){U=new Uint8Array(8*j);for(var ne=0;ne<j;ne++){var se=Y[ne];U[8*ne]=S[4*se],U[8*ne+1]=S[4*se+1],U[8*ne+2]=S[4*se+2],U[8*ne+3]=S[4*se+3];var oe=J[ne];U[8*ne+4]=S[4*oe],U[8*ne+5]=S[4*oe+1],U[8*ne+6]=S[4*oe+2],U[8*ne+7]=S[4*oe+3]}}}else if(Y.length||J.length){U=new Uint8Array(4*j+2);for(var he=0;he<j;he++)Y[he]!=null&&(U[4*he]=Y[he]%P,U[4*he+1]=Math.floor(Y[he]/P)),J[he]!=null&&(U[4*he+2]=J[he]%P,U[4*he+3]=Math.floor(J[he]/P))}ee({data:U||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return F})}},c.prototype.addMarker=function(g){var w,_=this.markerTextures,T=this.regl,k=this.markerCache,L=g==null?0:k.indexOf(g);if(L>=0)return L;if(g instanceof Uint8Array||g instanceof Uint8ClampedArray)w=g;else{w=new Uint8Array(g.length);for(var M=0,I=g.length;M<I;M++)w[M]=255*g[M]}var P=Math.floor(Math.sqrt(w.length));return L=_.length,k.push(g),_.push(T.texture({channels:1,data:w,radius:P,mag:"linear",min:"linear"})),L},c.prototype.updateColor=function(g){var w=this.paletteIds,_=this.palette,T=this.maxColors;Array.isArray(g)||(g=[g]);var k=[];if(typeof g[0]=="number"){var L=[];if(Array.isArray(g))for(var M=0;M<g.length;M+=4)L.push(g.slice(M,M+4));else for(var I=0;I<g.length;I+=4)L.push(g.subarray(I,I+4));g=L}for(var P=0;P<g.length;P++){var S=g[P];S=e(S,"uint8");var E=t(S,!1);if(w[E]==null){var D=_.length;w[E]=Math.floor(D/4),_[D]=S[0],_[D+1]=S[1],_[D+2]=S[2],_[D+3]=S[3]}k[P]=w[E]}return!this.tooManyColors&&_.length>4*T&&(this.tooManyColors=!0),this.updatePalette(_),k.length===1?k[0]:k},c.prototype.updatePalette=function(g){if(!this.tooManyColors){var w=this.maxColors,_=this.paletteTexture,T=Math.ceil(.25*g.length/w);if(T>1)for(var k=.25*(g=g.slice()).length%w;k<T*w;k++)g.push(0,0,0,0);_.height<T&&_.resize(w,T),_.subimage({width:Math.min(.25*g.length,w),height:T,data:g},0,0)}},c.prototype.destroy=function(){return this.groups.forEach(function(g){g.sizeBuffer.destroy(),g.positionBuffer.destroy(),g.positionFractBuffer.destroy(),g.colorBuffer.destroy(),g.activation.forEach(function(w){return w&&w.destroy&&w.destroy()}),g.selectionBuffer.destroy(),g.elements&&g.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(g){return g&&g.destroy&&g.destroy()}),this};var b=u("object-assign");q.exports=function(g,w){var _=new m(g,w),T=_.render.bind(_);return b(T,{render:T,update:_.update.bind(_),draw:_.draw.bind(_),destroy:_.destroy.bind(_),regl:_.regl,gl:_.gl,canvas:_.gl.canvas,groups:_.groups,markers:_.markerCache,palette:_.palette}),T}},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313,"update-diff":329}],282:[function(u,q,W){var o=u("regl-scatter2d"),p=u("pick-by-alias"),x=u("array-bounds"),y=u("raf"),e=u("array-range"),r=u("parse-rect"),t=u("flatten-vertex-data");function i(a,l){if(!(this instanceof i))return new i(a,l);this.traces=[],this.passes={},this.regl=a,this.scatter=o(a),this.canvas=this.scatter.canvas}function n(a,l,f){return(a.id!=null?a.id:a)<<16|(255&l)<<8|255&f}function h(a,l,f){var d,v,m,c,b=a[l],g=a[f];return b.length>2?(b[0],b[2],d=b[1],v=b[3]):b.length?(d=b[0],v=b[1]):(b.x,d=b.y,b.x+b.width,v=b.y+b.height),g.length>2?(m=g[0],c=g[2],g[1],g[3]):g.length?(m=g[0],c=g[1]):(m=g.x,g.y,c=g.x+g.width,g.y+g.height),[m,d,c,v]}function s(a){if(typeof a=="number")return[a,a,a,a];if(a.length===2)return[a[0],a[1],a[0],a[1]];var l=r(a);return[l.x,l.y,l.x+l.width,l.y+l.height]}q.exports=i,i.prototype.render=function(){for(var a,l=this,f=[],d=arguments.length;d--;)f[d]=arguments[d];return f.length&&(a=this).update.apply(a,f),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=y(function(){l.draw(),l.dirty=!0,l.planned=null})):(this.draw(),this.dirty=!0,y(function(){l.dirty=!1})),this)},i.prototype.update=function(){for(var a,l=[],f=arguments.length;f--;)l[f]=arguments[f];if(l.length){for(var d=0;d<l.length;d++)this.updateItem(d,l[d]);this.traces=this.traces.filter(Boolean);for(var v=[],m=0,c=0;c<this.traces.length;c++){for(var b=this.traces[c],g=this.traces[c].passes,w=0;w<g.length;w++)v.push(this.passes[g[w]]);b.passOffset=m,m+=b.passes.length}return(a=this.scatter).update.apply(a,v),this}},i.prototype.updateItem=function(a,l){var f=this.regl;if(l===null)return this.traces[a]=null,this;if(!l)return this;var d,v=p(l,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),m=this.traces[a]||(this.traces[a]={id:a,buffer:f.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:r([f._gl.drawingBufferWidth,f._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(v.color!=null&&(m.color=v.color),v.size!=null&&(m.size=v.size),v.marker!=null&&(m.marker=v.marker),v.borderColor!=null&&(m.borderColor=v.borderColor),v.borderSize!=null&&(m.borderSize=v.borderSize),v.opacity!=null&&(m.opacity=v.opacity),v.viewport&&(m.viewport=r(v.viewport)),v.diagonal!=null&&(m.diagonal=v.diagonal),v.upper!=null&&(m.upper=v.upper),v.lower!=null&&(m.lower=v.lower),v.data){m.buffer(t(v.data)),m.columns=v.data.length,m.count=v.data[0].length,m.bounds=[];for(var c=0;c<m.columns;c++)m.bounds[c]=x(v.data[c],1)}v.range&&(m.range=v.range,d=m.range&&typeof m.range[0]!="number"),v.domain&&(m.domain=v.domain);var b=!1;v.padding!=null&&(Array.isArray(v.padding)&&v.padding.length===m.columns&&typeof v.padding[v.padding.length-1]=="number"?(m.padding=v.padding.map(s),b=!0):m.padding=s(v.padding));var g=m.columns,w=m.count,_=m.viewport.width,T=m.viewport.height,k=m.viewport.x,L=m.viewport.y,M=_/g,I=T/g;m.passes=[];for(var P=0;P<g;P++)for(var S=0;S<g;S++)if((m.diagonal||S!==P)&&(m.upper||!(P>S))&&(m.lower||!(P<S))){var E=n(m.id,P,S),D=this.passes[E]||(this.passes[E]={});if(v.data&&(v.transpose?D.positions={x:{buffer:m.buffer,offset:S,count:w,stride:g},y:{buffer:m.buffer,offset:P,count:w,stride:g}}:D.positions={x:{buffer:m.buffer,offset:S*w,count:w},y:{buffer:m.buffer,offset:P*w,count:w}},D.bounds=h(m.bounds,P,S)),v.domain||v.viewport||v.data){var F=b?h(m.padding,P,S):m.padding;if(m.domain){var H=h(m.domain,P,S),V=H[0],Q=H[1],K=H[2],Z=H[3];D.viewport=[k+V*_+F[0],L+Q*T+F[1],k+K*_-F[2],L+Z*T-F[3]]}else D.viewport=[k+S*M+M*F[0],L+P*I+I*F[1],k+(S+1)*M-M*F[2],L+(P+1)*I-I*F[3]]}v.color&&(D.color=m.color),v.size&&(D.size=m.size),v.marker&&(D.marker=m.marker),v.borderSize&&(D.borderSize=m.borderSize),v.borderColor&&(D.borderColor=m.borderColor),v.opacity&&(D.opacity=m.opacity),v.range&&(D.range=d?h(m.range,P,S):m.range||D.bounds),m.passes.push(E)}return this},i.prototype.draw=function(){for(var a,l=[],f=arguments.length;f--;)l[f]=arguments[f];if(l.length){for(var d=[],v=0;v<l.length;v++)if(typeof l[v]=="number"){var m=this.traces[l[v]],c=m.passes,b=m.passOffset;d.push.apply(d,e(b,b+c.length))}else if(l[v].length){var g=l[v],w=this.traces[v],_=w.passes,T=w.passOffset;_=_.map(function(k,L){d[T+L]=g})}(a=this.scatter).draw.apply(a,d)}else this.scatter.draw();return this},i.prototype.destroy=function(){return this.traces.forEach(function(a){a.buffer&&a.buffer.destroy&&a.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:278,"regl-scatter2d":281}],283:[function(u,q,W){(function(o,p){typeof W=="object"&&q!==void 0?q.exports=p():o.createREGL=p()})(this,function(){function o(Be,Je){this.id=U++,this.type=Be,this.data=Je}function p(Be){return"["+function Je(Se){if(Se.length===0)return[];var Pe=Se.charAt(0),De=Se.charAt(Se.length-1);if(1<Se.length&&Pe===De&&(Pe==='"'||Pe==="'"))return['"'+Se.substr(1,Se.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Pe=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Se))return Je(Se.substr(0,Pe.index)).concat(Je(Pe[1])).concat(Je(Se.substr(Pe.index+Pe[0].length)));if((Pe=Se.split(".")).length===1)return['"'+Se.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Se=[],De=0;De<Pe.length;++De)Se=Se.concat(Je(Pe[De]));return Se}(Be).join("][")+"]"}function x(Be){return typeof Be=="string"?Be.split():Be}function y(Be){return typeof Be=="string"?document.querySelector(Be):Be}function e(Be){var Je,Se,Pe,De,Ie=Be||{};Be={};var $e=[],st=[],dt=typeof window=="undefined"?1:window.devicePixelRatio,ut=!1,Lt=function(Ct){},lt=function(){};if(typeof Ie=="string"?Je=document.querySelector(Ie):typeof Ie=="object"&&(typeof Ie.nodeName=="string"&&typeof Ie.appendChild=="function"&&typeof Ie.getBoundingClientRect=="function"?Je=Ie:typeof Ie.drawArrays=="function"||typeof Ie.drawElements=="function"?Pe=(De=Ie).canvas:("gl"in Ie?De=Ie.gl:"canvas"in Ie?Pe=y(Ie.canvas):"container"in Ie&&(Se=y(Ie.container)),"attributes"in Ie&&(Be=Ie.attributes),"extensions"in Ie&&($e=x(Ie.extensions)),"optionalExtensions"in Ie&&(st=x(Ie.optionalExtensions)),"onDone"in Ie&&(Lt=Ie.onDone),"profile"in Ie&&(ut=!!Ie.profile),"pixelRatio"in Ie&&(dt=+Ie.pixelRatio))),Je&&(Je.nodeName.toLowerCase()==="canvas"?Pe=Je:Se=Je),!De){if(!Pe){if(!(Je=function(Ct,Pt,Ke){function mt(){var Zt=window.innerWidth,Re=window.innerHeight;Ct!==document.body&&(Zt=(Re=Bt.getBoundingClientRect()).right-Re.left,Re=Re.bottom-Re.top),Bt.width=Ke*Zt,Bt.height=Ke*Re}var Dt,Bt=document.createElement("canvas");return N(Bt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Ct.appendChild(Bt),Ct===document.body&&(Bt.style.position="absolute",N(Ct.style,{margin:0,padding:0})),Ct!==document.body&&typeof ResizeObserver=="function"?(Dt=new ResizeObserver(function(){setTimeout(mt)})).observe(Ct):window.addEventListener("resize",mt,!1),mt(),{canvas:Bt,onDestroy:function(){Dt?Dt.disconnect():window.removeEventListener("resize",mt),Ct.removeChild(Bt)}}}(Se||document.body,0,dt)))return null;Pe=Je.canvas,lt=Je.onDestroy}Be.premultipliedAlpha===void 0&&(Be.premultipliedAlpha=!0),De=function(Ct,Pt){function Ke(mt){try{return Ct.getContext(mt,Pt)}catch{return null}}return Ke("webgl")||Ke("experimental-webgl")||Ke("webgl-experimental")}(Pe,Be)}return De?{gl:De,canvas:Pe,container:Se,extensions:$e,optionalExtensions:st,pixelRatio:dt,profile:ut,onDone:Lt,onDestroy:lt}:(lt(),Lt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function r(Be,Je){for(var Se=Array(Be),Pe=0;Pe<Be;++Pe)Se[Pe]=Je(Pe);return Se}function t(Be){var Je,Se;return Je=(65535<Be)<<4,Je|=Se=(255<(Be>>>=Je))<<3,(Je|=Se=(15<(Be>>>=Se))<<2)|(Se=(3<(Be>>>=Se))<<1)|Be>>>Se>>1}function i(){function Be(Pe){e:{for(var De=16;268435456>=De;De*=16)if(Pe<=De){Pe=De;break e}Pe=0}return 0<(De=Se[t(Pe)>>2]).length?De.pop():new ArrayBuffer(Pe)}function Je(Pe){Se[t(Pe.byteLength)>>2].push(Pe)}var Se=r(8,function(){return[]});return{alloc:Be,free:Je,allocType:function(Pe,De){var Ie=null;switch(Pe){case 5120:Ie=new Int8Array(Be(De),0,De);break;case 5121:Ie=new Uint8Array(Be(De),0,De);break;case 5122:Ie=new Int16Array(Be(2*De),0,De);break;case 5123:Ie=new Uint16Array(Be(2*De),0,De);break;case 5124:Ie=new Int32Array(Be(4*De),0,De);break;case 5125:Ie=new Uint32Array(Be(4*De),0,De);break;case 5126:Ie=new Float32Array(Be(4*De),0,De);break;default:return null}return Ie.length!==De?Ie.subarray(0,De):Ie},freeType:function(Pe){Je(Pe.buffer)}}}function n(Be){return!!Be&&typeof Be=="object"&&Array.isArray(Be.shape)&&Array.isArray(Be.stride)&&typeof Be.offset=="number"&&Be.shape.length===Be.stride.length&&(Array.isArray(Be.data)||ne(Be.data))}function h(Be,Je,Se,Pe,De,Ie){for(var $e=0;$e<Je;++$e)for(var st=Be[$e],dt=0;dt<Se;++dt)for(var ut=st[dt],Lt=0;Lt<Pe;++Lt)De[Ie++]=ut[Lt]}function s(Be){return 0|he[Object.prototype.toString.call(Be)]}function a(Be,Je){for(var Se=0;Se<Je.length;++Se)Be[Se]=Je[Se]}function l(Be,Je,Se,Pe,De,Ie,$e){for(var st=0,dt=0;dt<Se;++dt)for(var ut=0;ut<Pe;++ut)Be[st++]=Je[De*dt+Ie*ut+$e]}function f(Be,Je,Se,Pe){function De(lt){this.id=dt++,this.buffer=Be.createBuffer(),this.type=lt,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Se.profile&&(this.stats={size:0})}function Ie(lt,Ct,Pt){lt.byteLength=Ct.byteLength,Be.bufferData(lt.type,Ct,Pt)}function $e(lt,Ct,Pt,Ke,mt,Dt){if(lt.usage=Pt,Array.isArray(Ct)){if(lt.dtype=Ke||5126,0<Ct.length)if(Array.isArray(Ct[0])){mt=we(Ct);for(var Bt=Ke=1;Bt<mt.length;++Bt)Ke*=mt[Bt];lt.dimension=Ke,Ie(lt,Ct=xe(Ct,mt,lt.dtype),Pt),Dt?lt.persistentData=Ct:J.freeType(Ct)}else typeof Ct[0]=="number"?(lt.dimension=mt,a(mt=J.allocType(lt.dtype,Ct.length),Ct),Ie(lt,mt,Pt),Dt?lt.persistentData=mt:J.freeType(mt)):ne(Ct[0])&&(lt.dimension=Ct[0].length,lt.dtype=Ke||s(Ct[0])||5126,Ie(lt,Ct=xe(Ct,[Ct.length,Ct[0].length],lt.dtype),Pt),Dt?lt.persistentData=Ct:J.freeType(Ct))}else if(ne(Ct))lt.dtype=Ke||s(Ct),lt.dimension=mt,Ie(lt,Ct,Pt),Dt&&(lt.persistentData=new Uint8Array(new Uint8Array(Ct.buffer)));else if(n(Ct)){mt=Ct.shape;var Zt=Ct.stride,Re=(Bt=Ct.offset,0),ct=0,wt=0,Rt=0;mt.length===1?(Re=mt[0],ct=1,wt=Zt[0],Rt=0):mt.length===2&&(Re=mt[0],ct=mt[1],wt=Zt[0],Rt=Zt[1]),lt.dtype=Ke||s(Ct.data)||5126,lt.dimension=ct,l(mt=J.allocType(lt.dtype,Re*ct),Ct.data,Re,ct,wt,Rt,Bt),Ie(lt,mt,Pt),Dt?lt.persistentData=mt:J.freeType(mt)}else Ct instanceof ArrayBuffer&&(lt.dtype=5121,lt.dimension=mt,Ie(lt,Ct,Pt),Dt&&(lt.persistentData=new Uint8Array(new Uint8Array(Ct))))}function st(lt){Je.bufferCount--,Pe(lt),Be.deleteBuffer(lt.buffer),lt.buffer=null,delete ut[lt.id]}var dt=0,ut={};De.prototype.bind=function(){Be.bindBuffer(this.type,this.buffer)},De.prototype.destroy=function(){st(this)};var Lt=[];return Se.profile&&(Je.getTotalBufferSize=function(){var lt=0;return Object.keys(ut).forEach(function(Ct){lt+=ut[Ct].stats.size}),lt}),{create:function(lt,Ct,Pt,Ke){function mt(Bt){var Zt=35044,Re=null,ct=0,wt=0,Rt=1;return Array.isArray(Bt)||ne(Bt)||n(Bt)||Bt instanceof ArrayBuffer?Re=Bt:typeof Bt=="number"?ct=0|Bt:Bt&&("data"in Bt&&(Re=Bt.data),"usage"in Bt&&(Zt=de[Bt.usage]),"type"in Bt&&(wt=le[Bt.type]),"dimension"in Bt&&(Rt=0|Bt.dimension),"length"in Bt&&(ct=0|Bt.length)),Dt.bind(),Re?$e(Dt,Re,Zt,wt,Rt,Ke):(ct&&Be.bufferData(Dt.type,ct,Zt),Dt.dtype=wt||5121,Dt.usage=Zt,Dt.dimension=Rt,Dt.byteLength=ct),Se.profile&&(Dt.stats.size=Dt.byteLength*be[Dt.dtype]),mt}Je.bufferCount++;var Dt=new De(Ct);return ut[Dt.id]=Dt,Pt||mt(lt),mt._reglType="buffer",mt._buffer=Dt,mt.subdata=function(Bt,Zt){var Re,ct=0|(Zt||0);if(Dt.bind(),ne(Bt)||Bt instanceof ArrayBuffer)Be.bufferSubData(Dt.type,ct,Bt);else if(Array.isArray(Bt)){if(0<Bt.length)if(typeof Bt[0]=="number"){var wt=J.allocType(Dt.dtype,Bt.length);a(wt,Bt),Be.bufferSubData(Dt.type,ct,wt),J.freeType(wt)}else(Array.isArray(Bt[0])||ne(Bt[0]))&&(Re=we(Bt),wt=xe(Bt,Re,Dt.dtype),Be.bufferSubData(Dt.type,ct,wt),J.freeType(wt))}else if(n(Bt)){Re=Bt.shape;var Rt=Bt.stride,Vt=wt=0,rr=0,qt=0;Re.length===1?(wt=Re[0],Vt=1,rr=Rt[0],qt=0):Re.length===2&&(wt=Re[0],Vt=Re[1],rr=Rt[0],qt=Rt[1]),Re=Array.isArray(Bt.data)?Dt.dtype:s(Bt.data),l(Re=J.allocType(Re,wt*Vt),Bt.data,wt,Vt,rr,qt,Bt.offset),Be.bufferSubData(Dt.type,ct,Re),J.freeType(Re)}return mt},Se.profile&&(mt.stats=Dt.stats),mt.destroy=function(){st(Dt)},mt},createStream:function(lt,Ct){var Pt=Lt.pop();return Pt||(Pt=new De(lt)),Pt.bind(),$e(Pt,Ct,35040,0,1,!1),Pt},destroyStream:function(lt){Lt.push(lt)},clear:function(){se(ut).forEach(st),Lt.forEach(st)},getBuffer:function(lt){return lt&&lt._buffer instanceof De?lt._buffer:null},restore:function(){se(ut).forEach(function(lt){lt.buffer=Be.createBuffer(),Be.bindBuffer(lt.type,lt.buffer),Be.bufferData(lt.type,lt.persistentData||lt.byteLength,lt.usage)})},_initBuffer:$e}}function d(Be,Je,Se,Pe){function De(lt){this.id=dt++,st[this.id]=this,this.buffer=lt,this.primType=4,this.type=this.vertCount=0}function Ie(lt,Ct,Pt,Ke,mt,Dt,Bt){var Zt;if(lt.buffer.bind(),Ct?((Zt=Bt)||ne(Ct)&&(!n(Ct)||ne(Ct.data))||(Zt=Je.oes_element_index_uint?5125:5123),Se._initBuffer(lt.buffer,Ct,Pt,Zt,3)):(Be.bufferData(34963,Dt,Pt),lt.buffer.dtype=Zt||5121,lt.buffer.usage=Pt,lt.buffer.dimension=3,lt.buffer.byteLength=Dt),Zt=Bt,!Bt){switch(lt.buffer.dtype){case 5121:case 5120:Zt=5121;break;case 5123:case 5122:Zt=5123;break;case 5125:case 5124:Zt=5125}lt.buffer.dtype=Zt}lt.type=Zt,0>(Ct=mt)&&(Ct=lt.buffer.byteLength,Zt===5123?Ct>>=1:Zt===5125&&(Ct>>=2)),lt.vertCount=Ct,Ct=Ke,0>Ke&&(Ct=4,(Ke=lt.buffer.dimension)===1&&(Ct=0),Ke===2&&(Ct=1),Ke===3&&(Ct=4)),lt.primType=Ct}function $e(lt){Pe.elementsCount--,delete st[lt.id],lt.buffer.destroy(),lt.buffer=null}var st={},dt=0,ut={uint8:5121,uint16:5123};Je.oes_element_index_uint&&(ut.uint32=5125),De.prototype.bind=function(){this.buffer.bind()};var Lt=[];return{create:function(lt,Ct){function Pt(Dt){if(Dt)if(typeof Dt=="number")Ke(Dt),mt.primType=4,mt.vertCount=0|Dt,mt.type=5121;else{var Bt=null,Zt=35044,Re=-1,ct=-1,wt=0,Rt=0;Array.isArray(Dt)||ne(Dt)||n(Dt)?Bt=Dt:("data"in Dt&&(Bt=Dt.data),"usage"in Dt&&(Zt=de[Dt.usage]),"primitive"in Dt&&(Re=Ae[Dt.primitive]),"count"in Dt&&(ct=0|Dt.count),"type"in Dt&&(Rt=ut[Dt.type]),"length"in Dt?wt=0|Dt.length:(wt=ct,Rt===5123||Rt===5122?wt*=2:Rt!==5125&&Rt!==5124||(wt*=4))),Ie(mt,Bt,Zt,Re,ct,wt,Rt)}else Ke(),mt.primType=4,mt.vertCount=0,mt.type=5121;return Pt}var Ke=Se.create(null,34963,!0),mt=new De(Ke._buffer);return Pe.elementsCount++,Pt(lt),Pt._reglType="elements",Pt._elements=mt,Pt.subdata=function(Dt,Bt){return Ke.subdata(Dt,Bt),Pt},Pt.destroy=function(){$e(mt)},Pt},createStream:function(lt){var Ct=Lt.pop();return Ct||(Ct=new De(Se.create(null,34963,!0,!1)._buffer)),Ie(Ct,lt,35040,-1,-1,0,0),Ct},destroyStream:function(lt){Lt.push(lt)},getElements:function(lt){return typeof lt=="function"&&lt._elements instanceof De?lt._elements:null},clear:function(){se(st).forEach($e)}}}function v(Be){for(var Je=J.allocType(5123,Be.length),Se=0;Se<Be.length;++Se)if(isNaN(Be[Se]))Je[Se]=65535;else if(1/0===Be[Se])Je[Se]=31744;else if(-1/0===Be[Se])Je[Se]=64512;else{fe[0]=Be[Se];var Pe=(Ie=me[0])>>>31<<15,De=(Ie<<1>>>24)-127,Ie=Ie>>13&1023;Je[Se]=-24>De?Pe:-14>De?Pe+(Ie+1024>>-14-De):15<De?Pe+31744:Pe+(De+15<<10)+Ie}return Je}function m(Be){return Array.isArray(Be)||ne(Be)}function c(Be){return"[object "+Be+"]"}function b(Be){return Array.isArray(Be)&&(Be.length===0||typeof Be[0]=="number")}function g(Be){return!(!Array.isArray(Be)||Be.length===0||!m(Be[0]))}function w(Be){return Object.prototype.toString.call(Be)}function _(Be){if(!Be)return!1;var Je=w(Be);return 0<=We.indexOf(Je)||b(Be)||g(Be)||n(Be)}function T(Be,Je){Be.type===36193?(Be.data=v(Je),J.freeType(Je)):Be.data=Je}function k(Be,Je,Se,Pe,De,Ie){if(Be=nt[Be]!==void 0?nt[Be]:Me[Be]*Ze[Je],Ie&&(Be*=6),De){for(Pe=0;1<=Se;)Pe+=Be*Se*Se,Se/=2;return Pe}return Be*Se*Pe}function L(Be,Je,Se,Pe,De,Ie,$e){function st(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function dt(tr,Ot){tr.internalformat=Ot.internalformat,tr.format=Ot.format,tr.type=Ot.type,tr.compressed=Ot.compressed,tr.premultiplyAlpha=Ot.premultiplyAlpha,tr.flipY=Ot.flipY,tr.unpackAlignment=Ot.unpackAlignment,tr.colorSpace=Ot.colorSpace,tr.width=Ot.width,tr.height=Ot.height,tr.channels=Ot.channels}function ut(tr,Ot){if(typeof Ot=="object"&&Ot){"premultiplyAlpha"in Ot&&(tr.premultiplyAlpha=Ot.premultiplyAlpha),"flipY"in Ot&&(tr.flipY=Ot.flipY),"alignment"in Ot&&(tr.unpackAlignment=Ot.alignment),"colorSpace"in Ot&&(tr.colorSpace=Dr[Ot.colorSpace]),"type"in Ot&&(tr.type=yr[Ot.type]);var Ht=tr.width,fr=tr.height,Tr=tr.channels,Wr=!1;"shape"in Ot?(Ht=Ot.shape[0],fr=Ot.shape[1],Ot.shape.length===3&&(Tr=Ot.shape[2],Wr=!0)):("radius"in Ot&&(Ht=fr=Ot.radius),"width"in Ot&&(Ht=Ot.width),"height"in Ot&&(fr=Ot.height),"channels"in Ot&&(Tr=Ot.channels,Wr=!0)),tr.width=0|Ht,tr.height=0|fr,tr.channels=0|Tr,Ht=!1,"format"in Ot&&(Ht=Ot.format,fr=tr.internalformat=Br[Ht],tr.format=qr[fr],Ht in yr&&!("type"in Ot)&&(tr.type=yr[Ht]),Ht in Kr&&(tr.compressed=!0),Ht=!0),!Wr&&Ht?tr.channels=Me[tr.format]:Wr&&!Ht&&tr.channels!==Te[tr.format]&&(tr.format=tr.internalformat=Te[tr.channels])}}function Lt(tr){Be.pixelStorei(37440,tr.flipY),Be.pixelStorei(37441,tr.premultiplyAlpha),Be.pixelStorei(37443,tr.colorSpace),Be.pixelStorei(3317,tr.unpackAlignment)}function lt(){st.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ct(tr,Ot){var Ht=null;if(_(Ot)?Ht=Ot:Ot&&(ut(tr,Ot),"x"in Ot&&(tr.xOffset=0|Ot.x),"y"in Ot&&(tr.yOffset=0|Ot.y),_(Ot.data)&&(Ht=Ot.data)),Ot.copy){var fr=De.viewportWidth,Tr=De.viewportHeight;tr.width=tr.width||fr-tr.xOffset,tr.height=tr.height||Tr-tr.yOffset,tr.needsCopy=!0}else if(Ht){if(ne(Ht))tr.channels=tr.channels||4,tr.data=Ht,"type"in Ot||tr.type!==5121||(tr.type=0|he[Object.prototype.toString.call(Ht)]);else if(b(Ht)){switch(tr.channels=tr.channels||4,Tr=(fr=Ht).length,tr.type){case 5121:case 5123:case 5125:case 5126:(Tr=J.allocType(tr.type,Tr)).set(fr),tr.data=Tr;break;case 36193:tr.data=v(fr)}tr.alignment=1,tr.needsFree=!0}else if(n(Ht)){fr=Ht.data,Array.isArray(fr)||tr.type!==5121||(tr.type=0|he[Object.prototype.toString.call(fr)]),Tr=Ht.shape;var Wr,Gr,wr,br,Sr=Ht.stride;Tr.length===3?(wr=Tr[2],br=Sr[2]):br=wr=1,Wr=Tr[0],Gr=Tr[1],Tr=Sr[0],Sr=Sr[1],tr.alignment=1,tr.width=Wr,tr.height=Gr,tr.channels=wr,tr.format=tr.internalformat=Te[wr],tr.needsFree=!0,Wr=br,Ht=Ht.offset,wr=tr.width,br=tr.height,Gr=tr.channels;for(var Ir=J.allocType(tr.type===36193?5126:tr.type,wr*br*Gr),Er=0,Xr=0;Xr<br;++Xr)for(var fn=0;fn<wr;++fn)for(var _n=0;_n<Gr;++_n)Ir[Er++]=fr[Tr*fn+Sr*Xr+Wr*_n+Ht];T(tr,Ir)}else if(w(Ht)===Oe||w(Ht)===Fe||w(Ht)===qe)w(Ht)===Oe||w(Ht)===Fe?tr.element=Ht:tr.element=Ht.canvas,tr.width=tr.element.width,tr.height=tr.element.height,tr.channels=4;else if(w(Ht)===et)tr.element=Ht,tr.width=Ht.width,tr.height=Ht.height,tr.channels=4;else if(w(Ht)===ze)tr.element=Ht,tr.width=Ht.naturalWidth,tr.height=Ht.naturalHeight,tr.channels=4;else if(w(Ht)===Ue)tr.element=Ht,tr.width=Ht.videoWidth,tr.height=Ht.videoHeight,tr.channels=4;else if(g(Ht)){for(fr=tr.width||Ht[0].length,Tr=tr.height||Ht.length,Sr=tr.channels,Sr=m(Ht[0][0])?Sr||Ht[0][0].length:Sr||1,Wr=oe.shape(Ht),wr=1,br=0;br<Wr.length;++br)wr*=Wr[br];wr=J.allocType(tr.type===36193?5126:tr.type,wr),oe.flatten(Ht,Wr,"",wr),T(tr,wr),tr.alignment=1,tr.width=fr,tr.height=Tr,tr.channels=Sr,tr.format=tr.internalformat=Te[Sr],tr.needsFree=!0}}else tr.width=tr.width||1,tr.height=tr.height||1,tr.channels=tr.channels||4}function Pt(tr,Ot,Ht,fr,Tr){var Wr=tr.element,Gr=tr.data,wr=tr.internalformat,br=tr.format,Sr=tr.type,Ir=tr.width,Er=tr.height;Lt(tr),Wr?Be.texSubImage2D(Ot,Tr,Ht,fr,br,Sr,Wr):tr.compressed?Be.compressedTexSubImage2D(Ot,Tr,Ht,fr,wr,Ir,Er,Gr):tr.needsCopy?(Pe(),Be.copyTexSubImage2D(Ot,Tr,Ht,fr,tr.xOffset,tr.yOffset,Ir,Er)):Be.texSubImage2D(Ot,Tr,Ht,fr,Ir,Er,br,Sr,Gr)}function Ke(){return On.pop()||new lt}function mt(tr){tr.needsFree&&J.freeType(tr.data),lt.call(tr),On.push(tr)}function Dt(){st.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Bt(tr,Ot,Ht){var fr=tr.images[0]=Ke();tr.mipmask=1,fr.width=tr.width=Ot,fr.height=tr.height=Ht,fr.channels=tr.channels=4}function Zt(tr,Ot){var Ht=null;if(_(Ot))dt(Ht=tr.images[0]=Ke(),tr),Ct(Ht,Ot),tr.mipmask=1;else if(ut(tr,Ot),Array.isArray(Ot.mipmap))for(var fr=Ot.mipmap,Tr=0;Tr<fr.length;++Tr)dt(Ht=tr.images[Tr]=Ke(),tr),Ht.width>>=Tr,Ht.height>>=Tr,Ct(Ht,fr[Tr]),tr.mipmask|=1<<Tr;else dt(Ht=tr.images[0]=Ke(),tr),Ct(Ht,Ot),tr.mipmask=1;dt(tr,tr.images[0])}function Re(tr,Ot){for(var Ht=tr.images,fr=0;fr<Ht.length&&Ht[fr];++fr){var Tr=Ht[fr],Wr=Ot,Gr=fr,wr=Tr.element,br=Tr.data,Sr=Tr.internalformat,Ir=Tr.format,Er=Tr.type,Xr=Tr.width,fn=Tr.height;Lt(Tr),wr?Be.texImage2D(Wr,Gr,Ir,Ir,Er,wr):Tr.compressed?Be.compressedTexImage2D(Wr,Gr,Sr,Xr,fn,0,br):Tr.needsCopy?(Pe(),Be.copyTexImage2D(Wr,Gr,Ir,Tr.xOffset,Tr.yOffset,Xr,fn,0)):Be.texImage2D(Wr,Gr,Ir,Xr,fn,0,Ir,Er,br||null)}}function ct(){var tr=Fr.pop()||new Dt;st.call(tr);for(var Ot=tr.mipmask=0;16>Ot;++Ot)tr.images[Ot]=null;return tr}function wt(tr){for(var Ot=tr.images,Ht=0;Ht<Ot.length;++Ht)Ot[Ht]&&mt(Ot[Ht]),Ot[Ht]=null;Fr.push(tr)}function Rt(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Vt(tr,Ot){"min"in Ot&&(tr.minFilter=mr[Ot.min],0<=ke.indexOf(tr.minFilter)&&!("faces"in Ot)&&(tr.genMipmaps=!0)),"mag"in Ot&&(tr.magFilter=cr[Ot.mag]);var Ht=tr.wrapS,fr=tr.wrapT;if("wrap"in Ot){var Tr=Ot.wrap;typeof Tr=="string"?Ht=fr=ur[Tr]:Array.isArray(Tr)&&(Ht=ur[Tr[0]],fr=ur[Tr[1]])}else"wrapS"in Ot&&(Ht=ur[Ot.wrapS]),"wrapT"in Ot&&(fr=ur[Ot.wrapT]);if(tr.wrapS=Ht,tr.wrapT=fr,"anisotropic"in Ot&&(tr.anisotropic=Ot.anisotropic),"mipmap"in Ot){switch(Ht=!1,typeof Ot.mipmap){case"string":tr.mipmapHint=dr[Ot.mipmap],Ht=tr.genMipmaps=!0;break;case"boolean":Ht=tr.genMipmaps=Ot.mipmap;break;case"object":tr.genMipmaps=!1,Ht=!0}!Ht||"min"in Ot||(tr.minFilter=9984)}}function rr(tr,Ot){Be.texParameteri(Ot,10241,tr.minFilter),Be.texParameteri(Ot,10240,tr.magFilter),Be.texParameteri(Ot,10242,tr.wrapS),Be.texParameteri(Ot,10243,tr.wrapT),Je.ext_texture_filter_anisotropic&&Be.texParameteri(Ot,34046,tr.anisotropic),tr.genMipmaps&&(Be.hint(33170,tr.mipmapHint),Be.generateMipmap(Ot))}function qt(tr){st.call(this),this.mipmask=0,this.internalformat=6408,this.id=on++,this.refCount=1,this.target=tr,this.texture=Be.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Rt,$e.profile&&(this.stats={size:0})}function Jt(tr){Be.activeTexture(33984),Be.bindTexture(tr.target,tr.texture)}function or(){var tr=Dn[0];tr?Be.bindTexture(tr.target,tr.texture):Be.bindTexture(3553,null)}function gr(tr){var Ot=tr.texture,Ht=tr.unit,fr=tr.target;0<=Ht&&(Be.activeTexture(33984+Ht),Be.bindTexture(fr,null),Dn[Ht]=null),Be.deleteTexture(Ot),tr.texture=null,tr.params=null,tr.pixels=null,tr.refCount=0,delete Mn[tr.id],Ie.textureCount--}var dr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},ur={repeat:10497,clamp:33071,mirror:33648},cr={nearest:9728,linear:9729},mr=N({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},cr),Dr={none:0,browser:37444},yr={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Br={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Kr={};Je.ext_srgb&&(Br.srgb=35904,Br.srgba=35906),Je.oes_texture_float&&(yr.float32=yr.float=5126),Je.oes_texture_half_float&&(yr.float16=yr["half float"]=36193),Je.webgl_depth_texture&&(N(Br,{depth:6402,"depth stencil":34041}),N(yr,{uint16:5123,uint32:5125,"depth stencil":34042})),Je.webgl_compressed_texture_s3tc&&N(Kr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Je.webgl_compressed_texture_atc&&N(Kr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Je.webgl_compressed_texture_pvrtc&&N(Kr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Je.webgl_compressed_texture_etc1&&(Kr["rgb etc1"]=36196);var an=Array.prototype.slice.call(Be.getParameter(34467));Object.keys(Kr).forEach(function(tr){var Ot=Kr[tr];0<=an.indexOf(Ot)&&(Br[tr]=Ot)});var Ln=Object.keys(Br);Se.textureFormats=Ln;var Pn=[];Object.keys(Br).forEach(function(tr){Pn[Br[tr]]=tr});var An=[];Object.keys(yr).forEach(function(tr){An[yr[tr]]=tr});var tn=[];Object.keys(cr).forEach(function(tr){tn[cr[tr]]=tr});var zr=[];Object.keys(mr).forEach(function(tr){zr[mr[tr]]=tr});var Ar=[];Object.keys(ur).forEach(function(tr){Ar[ur[tr]]=tr});var qr=Ln.reduce(function(tr,Ot){var Ht=Br[Ot];return Ht===6409||Ht===6406||Ht===6409||Ht===6410||Ht===6402||Ht===34041||Je.ext_srgb&&(Ht===35904||Ht===35906)?tr[Ht]=Ht:Ht===32855||0<=Ot.indexOf("rgba")?tr[Ht]=6408:tr[Ht]=6407,tr},{}),On=[],Fr=[],on=0,Mn={},bn=Se.maxTextureUnits,Dn=Array(bn).map(function(){return null});return N(qt.prototype,{bind:function(){this.bindCount+=1;var tr=this.unit;if(0>tr){for(var Ot=0;Ot<bn;++Ot){var Ht=Dn[Ot];if(Ht){if(0<Ht.bindCount)continue;Ht.unit=-1}Dn[Ot]=this,tr=Ot;break}$e.profile&&Ie.maxTextureUnits<tr+1&&(Ie.maxTextureUnits=tr+1),this.unit=tr,Be.activeTexture(33984+tr),Be.bindTexture(this.target,this.texture)}return tr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&gr(this)}}),$e.profile&&(Ie.getTotalTextureSize=function(){var tr=0;return Object.keys(Mn).forEach(function(Ot){tr+=Mn[Ot].stats.size}),tr}),{create2D:function(tr,Ot){function Ht(Tr,Wr){var Gr=fr.texInfo;Rt.call(Gr);var wr=ct();return typeof Tr=="number"?Bt(wr,0|Tr,typeof Wr=="number"?0|Wr:0|Tr):Tr?(Vt(Gr,Tr),Zt(wr,Tr)):Bt(wr,1,1),Gr.genMipmaps&&(wr.mipmask=(wr.width<<1)-1),fr.mipmask=wr.mipmask,dt(fr,wr),fr.internalformat=wr.internalformat,Ht.width=wr.width,Ht.height=wr.height,Jt(fr),Re(wr,3553),rr(Gr,3553),or(),wt(wr),$e.profile&&(fr.stats.size=k(fr.internalformat,fr.type,wr.width,wr.height,Gr.genMipmaps,!1)),Ht.format=Pn[fr.internalformat],Ht.type=An[fr.type],Ht.mag=tn[Gr.magFilter],Ht.min=zr[Gr.minFilter],Ht.wrapS=Ar[Gr.wrapS],Ht.wrapT=Ar[Gr.wrapT],Ht}var fr=new qt(3553);return Mn[fr.id]=fr,Ie.textureCount++,Ht(tr,Ot),Ht.subimage=function(Tr,Wr,Gr,wr){Wr|=0,Gr|=0,wr|=0;var br=Ke();return dt(br,fr),br.width=0,br.height=0,Ct(br,Tr),br.width=br.width||(fr.width>>wr)-Wr,br.height=br.height||(fr.height>>wr)-Gr,Jt(fr),Pt(br,3553,Wr,Gr,wr),or(),mt(br),Ht},Ht.resize=function(Tr,Wr){var Gr=0|Tr,wr=0|Wr||Gr;if(Gr===fr.width&&wr===fr.height)return Ht;Ht.width=fr.width=Gr,Ht.height=fr.height=wr,Jt(fr);for(var br=0;fr.mipmask>>br;++br){var Sr=Gr>>br,Ir=wr>>br;if(!Sr||!Ir)break;Be.texImage2D(3553,br,fr.format,Sr,Ir,0,fr.format,fr.type,null)}return or(),$e.profile&&(fr.stats.size=k(fr.internalformat,fr.type,Gr,wr,!1,!1)),Ht},Ht._reglType="texture2d",Ht._texture=fr,$e.profile&&(Ht.stats=fr.stats),Ht.destroy=function(){fr.decRef()},Ht},createCube:function(tr,Ot,Ht,fr,Tr,Wr){function Gr(Sr,Ir,Er,Xr,fn,_n){var en,yn=wr.texInfo;for(Rt.call(yn),en=0;6>en;++en)br[en]=ct();if(typeof Sr!="number"&&Sr){if(typeof Sr=="object")if(Ir)Zt(br[0],Sr),Zt(br[1],Ir),Zt(br[2],Er),Zt(br[3],Xr),Zt(br[4],fn),Zt(br[5],_n);else if(Vt(yn,Sr),ut(wr,Sr),"faces"in Sr)for(Sr=Sr.faces,en=0;6>en;++en)dt(br[en],wr),Zt(br[en],Sr[en]);else for(en=0;6>en;++en)Zt(br[en],Sr)}else for(Sr=0|Sr||1,en=0;6>en;++en)Bt(br[en],Sr,Sr);for(dt(wr,br[0]),wr.mipmask=yn.genMipmaps?(br[0].width<<1)-1:br[0].mipmask,wr.internalformat=br[0].internalformat,Gr.width=br[0].width,Gr.height=br[0].height,Jt(wr),en=0;6>en;++en)Re(br[en],34069+en);for(rr(yn,34067),or(),$e.profile&&(wr.stats.size=k(wr.internalformat,wr.type,Gr.width,Gr.height,yn.genMipmaps,!0)),Gr.format=Pn[wr.internalformat],Gr.type=An[wr.type],Gr.mag=tn[yn.magFilter],Gr.min=zr[yn.minFilter],Gr.wrapS=Ar[yn.wrapS],Gr.wrapT=Ar[yn.wrapT],en=0;6>en;++en)wt(br[en]);return Gr}var wr=new qt(34067);Mn[wr.id]=wr,Ie.cubeCount++;var br=Array(6);return Gr(tr,Ot,Ht,fr,Tr,Wr),Gr.subimage=function(Sr,Ir,Er,Xr,fn){Er|=0,Xr|=0,fn|=0;var _n=Ke();return dt(_n,wr),_n.width=0,_n.height=0,Ct(_n,Ir),_n.width=_n.width||(wr.width>>fn)-Er,_n.height=_n.height||(wr.height>>fn)-Xr,Jt(wr),Pt(_n,34069+Sr,Er,Xr,fn),or(),mt(_n),Gr},Gr.resize=function(Sr){if((Sr|=0)!==wr.width){Gr.width=wr.width=Sr,Gr.height=wr.height=Sr,Jt(wr);for(var Ir=0;6>Ir;++Ir)for(var Er=0;wr.mipmask>>Er;++Er)Be.texImage2D(34069+Ir,Er,wr.format,Sr>>Er,Sr>>Er,0,wr.format,wr.type,null);return or(),$e.profile&&(wr.stats.size=k(wr.internalformat,wr.type,Gr.width,Gr.height,!1,!0)),Gr}},Gr._reglType="textureCube",Gr._texture=wr,$e.profile&&(Gr.stats=wr.stats),Gr.destroy=function(){wr.decRef()},Gr},clear:function(){for(var tr=0;tr<bn;++tr)Be.activeTexture(33984+tr),Be.bindTexture(3553,null),Dn[tr]=null;se(Mn).forEach(gr),Ie.cubeCount=0,Ie.textureCount=0},getTexture:function(tr){return null},restore:function(){for(var tr=0;tr<bn;++tr){var Ot=Dn[tr];Ot&&(Ot.bindCount=0,Ot.unit=-1,Dn[tr]=null)}se(Mn).forEach(function(Ht){Ht.texture=Be.createTexture(),Be.bindTexture(Ht.target,Ht.texture);for(var fr=0;32>fr;++fr)if((Ht.mipmask&1<<fr)!=0)if(Ht.target===3553)Be.texImage2D(3553,fr,Ht.internalformat,Ht.width>>fr,Ht.height>>fr,0,Ht.internalformat,Ht.type,null);else for(var Tr=0;6>Tr;++Tr)Be.texImage2D(34069+Tr,fr,Ht.internalformat,Ht.width>>fr,Ht.height>>fr,0,Ht.internalformat,Ht.type,null);rr(Ht.texInfo,Ht.target)})},refresh:function(){for(var tr=0;tr<bn;++tr){var Ot=Dn[tr];Ot&&(Ot.bindCount=0,Ot.unit=-1,Dn[tr]=null),Be.activeTexture(33984+tr),Be.bindTexture(3553,null),Be.bindTexture(34067,null)}}}}function M(Be,Je,Se,Pe,De,Ie){function $e(qt,Jt,or){this.target=qt,this.texture=Jt,this.renderbuffer=or;var gr=qt=0;Jt?(qt=Jt.width,gr=Jt.height):or&&(qt=or.width,gr=or.height),this.width=qt,this.height=gr}function st(qt){qt&&(qt.texture&&qt.texture._texture.decRef(),qt.renderbuffer&&qt.renderbuffer._renderbuffer.decRef())}function dt(qt,Jt,or){qt&&(qt.texture?qt.texture._texture.refCount+=1:qt.renderbuffer._renderbuffer.refCount+=1)}function ut(qt,Jt){Jt&&(Jt.texture?Be.framebufferTexture2D(36160,qt,Jt.target,Jt.texture._texture.texture,0):Be.framebufferRenderbuffer(36160,qt,36161,Jt.renderbuffer._renderbuffer.renderbuffer))}function Lt(qt){var Jt=3553,or=null,gr=null,dr=qt;return typeof qt=="object"&&(dr=qt.data,"target"in qt&&(Jt=0|qt.target)),(qt=dr._reglType)==="texture2d"||qt==="textureCube"?or=dr:qt==="renderbuffer"&&(gr=dr,Jt=36161),new $e(Jt,or,gr)}function lt(qt,Jt,or,gr,dr){return or?((qt=Pe.create2D({width:qt,height:Jt,format:gr,type:dr}))._texture.refCount=0,new $e(3553,qt,null)):((qt=De.create({width:qt,height:Jt,format:gr}))._renderbuffer.refCount=0,new $e(36161,null,qt))}function Ct(qt){return qt&&(qt.texture||qt.renderbuffer)}function Pt(qt,Jt,or){qt&&(qt.texture?qt.texture.resize(Jt,or):qt.renderbuffer&&qt.renderbuffer.resize(Jt,or),qt.width=Jt,qt.height=or)}function Ke(){this.id=Vt++,rr[this.id]=this,this.framebuffer=Be.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function mt(qt){qt.colorAttachments.forEach(st),st(qt.depthAttachment),st(qt.stencilAttachment),st(qt.depthStencilAttachment)}function Dt(qt){Be.deleteFramebuffer(qt.framebuffer),qt.framebuffer=null,Ie.framebufferCount--,delete rr[qt.id]}function Bt(qt){var Jt;Be.bindFramebuffer(36160,qt.framebuffer);var or=qt.colorAttachments;for(Jt=0;Jt<or.length;++Jt)ut(36064+Jt,or[Jt]);for(Jt=or.length;Jt<Se.maxColorAttachments;++Jt)Be.framebufferTexture2D(36160,36064+Jt,3553,null,0);Be.framebufferTexture2D(36160,33306,3553,null,0),Be.framebufferTexture2D(36160,36096,3553,null,0),Be.framebufferTexture2D(36160,36128,3553,null,0),ut(36096,qt.depthAttachment),ut(36128,qt.stencilAttachment),ut(33306,qt.depthStencilAttachment),Be.checkFramebufferStatus(36160),Be.isContextLost(),Be.bindFramebuffer(36160,Re.next?Re.next.framebuffer:null),Re.cur=Re.next,Be.getError()}function Zt(qt,Jt){function or(dr,ur){var cr,mr=0,Dr=0,yr=!0,Br=!0;cr=null;var Kr=!0,an="rgba",Ln="uint8",Pn=1,An=null,tn=null,zr=null,Ar=!1;typeof dr=="number"?(mr=0|dr,Dr=0|ur||mr):dr?("shape"in dr?(mr=(Dr=dr.shape)[0],Dr=Dr[1]):("radius"in dr&&(mr=Dr=dr.radius),"width"in dr&&(mr=dr.width),"height"in dr&&(Dr=dr.height)),("color"in dr||"colors"in dr)&&(cr=dr.color||dr.colors,Array.isArray(cr)),cr||("colorCount"in dr&&(Pn=0|dr.colorCount),"colorTexture"in dr&&(Kr=!!dr.colorTexture,an="rgba4"),"colorType"in dr&&(Ln=dr.colorType,!Kr)&&(Ln==="half float"||Ln==="float16"?an="rgba16f":Ln!=="float"&&Ln!=="float32"||(an="rgba32f")),"colorFormat"in dr&&(an=dr.colorFormat,0<=ct.indexOf(an)?Kr=!0:0<=wt.indexOf(an)&&(Kr=!1))),("depthTexture"in dr||"depthStencilTexture"in dr)&&(Ar=!(!dr.depthTexture&&!dr.depthStencilTexture)),"depth"in dr&&(typeof dr.depth=="boolean"?yr=dr.depth:(An=dr.depth,Br=!1)),"stencil"in dr&&(typeof dr.stencil=="boolean"?Br=dr.stencil:(tn=dr.stencil,yr=!1)),"depthStencil"in dr&&(typeof dr.depthStencil=="boolean"?yr=Br=dr.depthStencil:(zr=dr.depthStencil,Br=yr=!1))):mr=Dr=1;var qr=null,On=null,Fr=null,on=null;if(Array.isArray(cr))qr=cr.map(Lt);else if(cr)qr=[Lt(cr)];else for(qr=Array(Pn),cr=0;cr<Pn;++cr)qr[cr]=lt(mr,Dr,Kr,an,Ln);for(mr=mr||qr[0].width,Dr=Dr||qr[0].height,An?On=Lt(An):yr&&!Br&&(On=lt(mr,Dr,Ar,"depth","uint32")),tn?Fr=Lt(tn):Br&&!yr&&(Fr=lt(mr,Dr,!1,"stencil","uint8")),zr?on=Lt(zr):!An&&!tn&&Br&&yr&&(on=lt(mr,Dr,Ar,"depth stencil","depth stencil")),yr=null,cr=0;cr<qr.length;++cr)dt(qr[cr]),qr[cr]&&qr[cr].texture&&(Br=It[qr[cr].texture._texture.format]*Et[qr[cr].texture._texture.type],yr===null&&(yr=Br));return dt(On),dt(Fr),dt(on),mt(gr),gr.width=mr,gr.height=Dr,gr.colorAttachments=qr,gr.depthAttachment=On,gr.stencilAttachment=Fr,gr.depthStencilAttachment=on,or.color=qr.map(Ct),or.depth=Ct(On),or.stencil=Ct(Fr),or.depthStencil=Ct(on),or.width=gr.width,or.height=gr.height,Bt(gr),or}var gr=new Ke;return Ie.framebufferCount++,or(qt,Jt),N(or,{resize:function(dr,ur){var cr=Math.max(0|dr,1),mr=Math.max(0|ur||cr,1);if(cr===gr.width&&mr===gr.height)return or;for(var Dr=gr.colorAttachments,yr=0;yr<Dr.length;++yr)Pt(Dr[yr],cr,mr);return Pt(gr.depthAttachment,cr,mr),Pt(gr.stencilAttachment,cr,mr),Pt(gr.depthStencilAttachment,cr,mr),gr.width=or.width=cr,gr.height=or.height=mr,Bt(gr),or},_reglType:"framebuffer",_framebuffer:gr,destroy:function(){Dt(gr),mt(gr)},use:function(dr){Re.setFBO({framebuffer:or},dr)}})}var Re={cur:null,next:null,dirty:!1,setFBO:null},ct=["rgba"],wt=["rgba4","rgb565","rgb5 a1"];Je.ext_srgb&&wt.push("srgba"),Je.ext_color_buffer_half_float&&wt.push("rgba16f","rgb16f"),Je.webgl_color_buffer_float&&wt.push("rgba32f");var Rt=["uint8"];Je.oes_texture_half_float&&Rt.push("half float","float16"),Je.oes_texture_float&&Rt.push("float","float32");var Vt=0,rr={};return N(Re,{getFramebuffer:function(qt){return typeof qt=="function"&&qt._reglType==="framebuffer"&&(qt=qt._framebuffer)instanceof Ke?qt:null},create:Zt,createCube:function(qt){function Jt(gr){var dr,ur={color:null},cr=0,mr=null;dr="rgba";var Dr="uint8",yr=1;if(typeof gr=="number"?cr=0|gr:gr?("shape"in gr?cr=gr.shape[0]:("radius"in gr&&(cr=0|gr.radius),"width"in gr?cr=0|gr.width:"height"in gr&&(cr=0|gr.height)),("color"in gr||"colors"in gr)&&(mr=gr.color||gr.colors,Array.isArray(mr)),mr||("colorCount"in gr&&(yr=0|gr.colorCount),"colorType"in gr&&(Dr=gr.colorType),"colorFormat"in gr&&(dr=gr.colorFormat)),"depth"in gr&&(ur.depth=gr.depth),"stencil"in gr&&(ur.stencil=gr.stencil),"depthStencil"in gr&&(ur.depthStencil=gr.depthStencil)):cr=1,mr)if(Array.isArray(mr))for(gr=[],dr=0;dr<mr.length;++dr)gr[dr]=mr[dr];else gr=[mr];else for(gr=Array(yr),mr={radius:cr,format:dr,type:Dr},dr=0;dr<yr;++dr)gr[dr]=Pe.createCube(mr);for(ur.color=Array(gr.length),dr=0;dr<gr.length;++dr)yr=gr[dr],cr=cr||yr.width,ur.color[dr]={target:34069,data:gr[dr]};for(dr=0;6>dr;++dr){for(yr=0;yr<gr.length;++yr)ur.color[yr].target=34069+dr;0<dr&&(ur.depth=or[0].depth,ur.stencil=or[0].stencil,ur.depthStencil=or[0].depthStencil),or[dr]?or[dr](ur):or[dr]=Zt(ur)}return N(Jt,{width:cr,height:cr,color:gr})}var or=Array(6);return Jt(qt),N(Jt,{faces:or,resize:function(gr){var dr=0|gr;if(dr===Jt.width)return Jt;var ur=Jt.color;for(gr=0;gr<ur.length;++gr)ur[gr].resize(dr);for(gr=0;6>gr;++gr)or[gr].resize(dr);return Jt.width=Jt.height=dr,Jt},_reglType:"framebufferCube",destroy:function(){or.forEach(function(gr){gr.destroy()})}})},clear:function(){se(rr).forEach(Dt)},restore:function(){Re.cur=null,Re.next=null,Re.dirty=!0,se(rr).forEach(function(qt){qt.framebuffer=Be.createFramebuffer(),Bt(qt)})}})}function I(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function P(Be,Je,Se,Pe,De,Ie,$e){function st(){this.id=++Lt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var Pt=Je.oes_vertex_array_object;this.vao=Pt?Pt.createVertexArrayOES():null,lt[this.id]=this,this.buffers=[]}var dt=Se.maxAttributes,ut=Array(dt);for(Se=0;Se<dt;++Se)ut[Se]=new I;var Lt=0,lt={},Ct={Record:I,scope:{},state:ut,currentVAO:null,targetVAO:null,restore:Je.oes_vertex_array_object?function(){Je.oes_vertex_array_object&&se(lt).forEach(function(Pt){Pt.refresh()})}:function(){},createVAO:function(Pt){function Ke(Dt){var Bt;Array.isArray(Dt)?(Bt=Dt,mt.elements&&mt.ownsElements&&mt.elements.destroy(),mt.elements=null,mt.ownsElements=!1,mt.offset=0,mt.count=0,mt.instances=-1,mt.primitive=4):(Dt.elements?(Bt=Dt.elements,mt.ownsElements?(typeof Bt=="function"&&Bt._reglType==="elements"?mt.elements.destroy():mt.elements(Bt),mt.ownsElements=!1):Ie.getElements(Dt.elements)?(mt.elements=Dt.elements,mt.ownsElements=!1):(mt.elements=Ie.create(Dt.elements),mt.ownsElements=!0)):(mt.elements=null,mt.ownsElements=!1),Bt=Dt.attributes,mt.offset=0,mt.count=-1,mt.instances=-1,mt.primitive=4,mt.elements&&(mt.count=mt.elements._elements.vertCount,mt.primitive=mt.elements._elements.primType),"offset"in Dt&&(mt.offset=0|Dt.offset),"count"in Dt&&(mt.count=0|Dt.count),"instances"in Dt&&(mt.instances=0|Dt.instances),"primitive"in Dt&&(mt.primitive=Ae[Dt.primitive])),Dt={};var Zt=mt.attributes;Zt.length=Bt.length;for(var Re=0;Re<Bt.length;++Re){var ct,wt=Bt[Re],Rt=Zt[Re]=new I,Vt=wt.data||wt;Array.isArray(Vt)||ne(Vt)||n(Vt)?(mt.buffers[Re]&&(ct=mt.buffers[Re],ne(Vt)&&ct._buffer.byteLength>=Vt.byteLength?ct.subdata(Vt):(ct.destroy(),mt.buffers[Re]=null)),mt.buffers[Re]||(ct=mt.buffers[Re]=De.create(wt,34962,!1,!0)),Rt.buffer=De.getBuffer(ct),Rt.size=0|Rt.buffer.dimension,Rt.normalized=!1,Rt.type=Rt.buffer.dtype,Rt.offset=0,Rt.stride=0,Rt.divisor=0,Rt.state=1,Dt[Re]=1):De.getBuffer(wt)?(Rt.buffer=De.getBuffer(wt),Rt.size=0|Rt.buffer.dimension,Rt.normalized=!1,Rt.type=Rt.buffer.dtype,Rt.offset=0,Rt.stride=0,Rt.divisor=0,Rt.state=1):De.getBuffer(wt.buffer)?(Rt.buffer=De.getBuffer(wt.buffer),Rt.size=0|(+wt.size||Rt.buffer.dimension),Rt.normalized=!!wt.normalized||!1,Rt.type="type"in wt?le[wt.type]:Rt.buffer.dtype,Rt.offset=0|(wt.offset||0),Rt.stride=0|(wt.stride||0),Rt.divisor=0|(wt.divisor||0),Rt.state=1):"x"in wt&&(Rt.x=+wt.x||0,Rt.y=+wt.y||0,Rt.z=+wt.z||0,Rt.w=+wt.w||0,Rt.state=2)}for(ct=0;ct<mt.buffers.length;++ct)!Dt[ct]&&mt.buffers[ct]&&(mt.buffers[ct].destroy(),mt.buffers[ct]=null);return mt.refresh(),Ke}var mt=new st;return Pe.vaoCount+=1,Ke.destroy=function(){for(var Dt=0;Dt<mt.buffers.length;++Dt)mt.buffers[Dt]&&mt.buffers[Dt].destroy();mt.buffers.length=0,mt.ownsElements&&(mt.elements.destroy(),mt.elements=null,mt.ownsElements=!1),mt.destroy()},Ke._vao=mt,Ke._reglType="vao",Ke(Pt)},getVAO:function(Pt){return typeof Pt=="function"&&Pt._vao?Pt._vao:null},destroyBuffer:function(Pt){for(var Ke=0;Ke<ut.length;++Ke){var mt=ut[Ke];mt.buffer===Pt&&(Be.disableVertexAttribArray(Ke),mt.buffer=null)}},setVAO:Je.oes_vertex_array_object?function(Pt){if(Pt!==Ct.currentVAO){var Ke=Je.oes_vertex_array_object;Pt?Ke.bindVertexArrayOES(Pt.vao):Ke.bindVertexArrayOES(null),Ct.currentVAO=Pt}}:function(Pt){if(Pt!==Ct.currentVAO){if(Pt)Pt.bindAttrs();else{for(var Ke=Je.angle_instanced_arrays,mt=0;mt<ut.length;++mt){var Dt=ut[mt];Dt.buffer?(Be.enableVertexAttribArray(mt),Dt.buffer.bind(),Be.vertexAttribPointer(mt,Dt.size,Dt.type,Dt.normalized,Dt.stride,Dt.offfset),Ke&&Dt.divisor&&Ke.vertexAttribDivisorANGLE(mt,Dt.divisor)):(Be.disableVertexAttribArray(mt),Be.vertexAttrib4f(mt,Dt.x,Dt.y,Dt.z,Dt.w))}$e.elements?Be.bindBuffer(34963,$e.elements.buffer.buffer):Be.bindBuffer(34963,null)}Ct.currentVAO=Pt}},clear:Je.oes_vertex_array_object?function(){se(lt).forEach(function(Pt){Pt.destroy()})}:function(){}};return st.prototype.bindAttrs=function(){for(var Pt=Je.angle_instanced_arrays,Ke=this.attributes,mt=0;mt<Ke.length;++mt){var Dt=Ke[mt];Dt.buffer?(Be.enableVertexAttribArray(mt),Be.bindBuffer(34962,Dt.buffer.buffer),Be.vertexAttribPointer(mt,Dt.size,Dt.type,Dt.normalized,Dt.stride,Dt.offset),Pt&&Dt.divisor&&Pt.vertexAttribDivisorANGLE(mt,Dt.divisor)):(Be.disableVertexAttribArray(mt),Be.vertexAttrib4f(mt,Dt.x,Dt.y,Dt.z,Dt.w))}for(Pt=Ke.length;Pt<dt;++Pt)Be.disableVertexAttribArray(Pt);(Pt=Ie.getElements(this.elements))?Be.bindBuffer(34963,Pt.buffer.buffer):Be.bindBuffer(34963,null)},st.prototype.refresh=function(){var Pt=Je.oes_vertex_array_object;Pt&&(Pt.bindVertexArrayOES(this.vao),this.bindAttrs(),Ct.currentVAO=null,Pt.bindVertexArrayOES(null))},st.prototype.destroy=function(){if(this.vao){var Pt=Je.oes_vertex_array_object;this===Ct.currentVAO&&(Ct.currentVAO=null,Pt.bindVertexArrayOES(null)),Pt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),lt[this.id]&&(delete lt[this.id],--Pe.vaoCount)},Ct}function S(Be,Je,Se,Pe){function De(Ke,mt,Dt,Bt){this.name=Ke,this.id=mt,this.location=Dt,this.info=Bt}function Ie(Ke,mt){for(var Dt=0;Dt<Ke.length;++Dt)if(Ke[Dt].id===mt.id)return void(Ke[Dt].location=mt.location);Ke.push(mt)}function $e(Ke,mt,Dt){if(!(Zt=(Dt=Ke===35632?ut:Lt)[mt])){var Bt=Je.str(mt),Zt=Be.createShader(Ke);Be.shaderSource(Zt,Bt),Be.compileShader(Zt),Dt[mt]=Zt}return Zt}function st(Ke,mt){this.id=Pt++,this.fragId=Ke,this.vertId=mt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Pe.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function dt(Ke,mt,Dt){var Bt;Bt=$e(35632,Ke.fragId);var Zt=$e(35633,Ke.vertId);if(mt=Ke.program=Be.createProgram(),Be.attachShader(mt,Bt),Be.attachShader(mt,Zt),Dt)for(Bt=0;Bt<Dt.length;++Bt)Zt=Dt[Bt],Be.bindAttribLocation(mt,Zt[0],Zt[1]);Be.linkProgram(mt),Zt=Be.getProgramParameter(mt,35718),Pe.profile&&(Ke.stats.uniformsCount=Zt);var Re=Ke.uniforms;for(Bt=0;Bt<Zt;++Bt)if(Dt=Be.getActiveUniform(mt,Bt)){if(1<Dt.size)for(var ct=0;ct<Dt.size;++ct){var wt=Dt.name.replace("[0]","["+ct+"]");Ie(Re,new De(wt,Je.id(wt),Be.getUniformLocation(mt,wt),Dt))}ct=Dt.name,1<Dt.size&&(ct=ct.replace("[0]","")),Ie(Re,new De(ct,Je.id(ct),Be.getUniformLocation(mt,ct),Dt))}for(Zt=Be.getProgramParameter(mt,35721),Pe.profile&&(Ke.stats.attributesCount=Zt),Ke=Ke.attributes,Bt=0;Bt<Zt;++Bt)(Dt=Be.getActiveAttrib(mt,Bt))&&Ie(Ke,new De(Dt.name,Je.id(Dt.name),Be.getAttribLocation(mt,Dt.name),Dt))}var ut={},Lt={},lt={},Ct=[],Pt=0;return Pe.profile&&(Se.getMaxUniformsCount=function(){var Ke=0;return Ct.forEach(function(mt){mt.stats.uniformsCount>Ke&&(Ke=mt.stats.uniformsCount)}),Ke},Se.getMaxAttributesCount=function(){var Ke=0;return Ct.forEach(function(mt){mt.stats.attributesCount>Ke&&(Ke=mt.stats.attributesCount)}),Ke}),{clear:function(){var Ke=Be.deleteShader.bind(Be);se(ut).forEach(Ke),ut={},se(Lt).forEach(Ke),Lt={},Ct.forEach(function(mt){Be.deleteProgram(mt.program)}),Ct.length=0,lt={},Se.shaderCount=0},program:function(Ke,mt,Dt,Bt){var Zt=lt[mt];Zt||(Zt=lt[mt]={});var Re=Zt[Ke];if(Re&&(Re.refCount++,!Bt))return Re;var ct=new st(mt,Ke);return Se.shaderCount++,dt(ct,Dt,Bt),Re||(Zt[Ke]=ct),Ct.push(ct),N(ct,{destroy:function(){if(ct.refCount--,0>=ct.refCount){Be.deleteProgram(ct.program);var wt=Ct.indexOf(ct);Ct.splice(wt,1),Se.shaderCount--}0>=Zt[ct.vertId].refCount&&(Be.deleteShader(Lt[ct.vertId]),delete Lt[ct.vertId],delete lt[ct.fragId][ct.vertId]),Object.keys(lt[ct.fragId]).length||(Be.deleteShader(ut[ct.fragId]),delete ut[ct.fragId],delete lt[ct.fragId])}})},restore:function(){ut={},Lt={};for(var Ke=0;Ke<Ct.length;++Ke)dt(Ct[Ke],null,Ct[Ke].attributes.map(function(mt){return[mt.location,mt.name]}))},shader:$e,frag:-1,vert:-1}}function E(Be,Je,Se,Pe,De,Ie,$e){function st(dt){var ut;ut=Je.next===null?5121:Je.next.colorAttachments[0].texture._texture.type;var Lt=0,lt=0,Ct=Pe.framebufferWidth,Pt=Pe.framebufferHeight,Ke=null;return ne(dt)?Ke=dt:dt&&(Lt=0|dt.x,lt=0|dt.y,Ct=0|(dt.width||Pe.framebufferWidth-Lt),Pt=0|(dt.height||Pe.framebufferHeight-lt),Ke=dt.data||null),Se(),dt=Ct*Pt*4,Ke||(ut===5121?Ke=new Uint8Array(dt):ut===5126&&(Ke=Ke||new Float32Array(dt))),Be.pixelStorei(3333,4),Be.readPixels(Lt,lt,Ct,Pt,6408,ut,Ke),Ke}return function(dt){return dt&&"framebuffer"in dt?function(ut){var Lt;return Je.setFBO({framebuffer:ut.framebuffer},function(){Lt=st(ut)}),Lt}(dt):st(dt)}}function D(Be){return Array.prototype.slice.call(Be)}function F(Be){return D(Be).join("")}function H(Be){return Array.isArray(Be)||ne(Be)||n(Be)}function V(Be){return Be.sort(function(Je,Se){return Je==="viewport"?-1:Se==="viewport"?1:Je<Se?-1:1})}function Q(Be,Je,Se,Pe){this.thisDep=Be,this.contextDep=Je,this.propDep=Se,this.append=Pe}function K(Be){return Be&&!(Be.thisDep||Be.contextDep||Be.propDep)}function Z(Be){return new Q(!1,!1,!1,Be)}function $(Be,Je){var Se=Be.type;if(Se===0)return new Q(!0,1<=(Se=Be.data.length),2<=Se,Je);if(Se===4)return new Q((Se=Be.data).thisDep,Se.contextDep,Se.propDep,Je);if(Se===5)return new Q(!1,!1,!1,Je);if(Se===6){for(var Pe=Se=!1,De=!1,Ie=0;Ie<Be.data.length;++Ie){var $e=Be.data[Ie];$e.type===1?De=!0:$e.type===2?Pe=!0:$e.type===3?Se=!0:$e.type===0?(Se=!0,1<=($e=$e.data)&&(Pe=!0),2<=$e&&(De=!0)):$e.type===4&&(Se=Se||$e.data.thisDep,Pe=Pe||$e.data.contextDep,De=De||$e.data.propDep)}return new Q(Se,Pe,De,Je)}return new Q(Se===3,Se===2,Se===1,Je)}function re(Be,Je,Se,Pe,De,Ie,$e,st,dt,ut,Lt,lt,Ct,Pt,Ke){function mt(Ot){return Ot.replace(".","_")}function Dt(Ot,Ht,fr){var Tr=mt(Ot);Fr.push(Ot),On[Tr]=qr[Tr]=!!fr,on[Tr]=Ht}function Bt(Ot,Ht,fr){var Tr=mt(Ot);Fr.push(Ot),Array.isArray(fr)?(qr[Tr]=fr.slice(),On[Tr]=fr.slice()):qr[Tr]=On[Tr]=fr,Mn[Tr]=Ht}function Zt(){var Ot=function(){function Ir(){var Vr=[],Ur=[];return N(function(){Vr.push.apply(Vr,D(arguments))},{def:function(){var ln="v"+Xr++;return Ur.push(ln),0<arguments.length&&(Vr.push(ln,"="),Vr.push.apply(Vr,D(arguments)),Vr.push(";")),ln},toString:function(){return F([0<Ur.length?"var "+Ur.join(",")+";":"",F(Vr)])}})}function Er(){function Vr(oi,Yn){ln(oi,Yn,"=",Ur.def(oi,Yn),";")}var Ur=Ir(),ln=Ir(),gn=Ur.toString,Sn=ln.toString;return N(function(){Ur.apply(Ur,D(arguments))},{def:Ur.def,entry:Ur,exit:ln,save:Vr,set:function(oi,Yn,vn){Vr(oi,Yn),Ur(oi,Yn,"=",vn,";")},toString:function(){return gn()+Sn()}})}var Xr=0,fn=[],_n=[],en=Ir(),yn={};return{global:en,link:function(Vr){for(var Ur=0;Ur<_n.length;++Ur)if(_n[Ur]===Vr)return fn[Ur];return Ur="g"+Xr++,fn.push(Ur),_n.push(Vr),Ur},block:Ir,proc:function(Vr,Ur){function ln(){var Yn="a"+gn.length;return gn.push(Yn),Yn}var gn=[];Ur=Ur||0;for(var Sn=0;Sn<Ur;++Sn)ln();var oi=(Sn=Er()).toString;return yn[Vr]=N(Sn,{arg:ln,toString:function(){return F(["function(",gn.join(),"){",oi(),"}"])}})},scope:Er,cond:function(){var Vr=F(arguments),Ur=Er(),ln=Er(),gn=Ur.toString,Sn=ln.toString;return N(Ur,{then:function(){return Ur.apply(Ur,D(arguments)),this},else:function(){return ln.apply(ln,D(arguments)),this},toString:function(){var oi=Sn();return oi&&(oi="else{"+oi+"}"),F(["if(",Vr,"){",gn(),"}",oi])}})},compile:function(){var Vr=['"use strict";',en,"return {"];Object.keys(yn).forEach(function(ln){Vr.push('"',ln,'":',yn[ln].toString(),",")}),Vr.push("}");var Ur=F(Vr).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return Function.apply(null,fn.concat(Ur)).apply(null,_n)}}}(),Ht=Ot.link,fr=Ot.global;Ot.id=tr++,Ot.batchId="0";var Tr=Ht(bn),Wr=Ot.shared={props:"a0"};Object.keys(bn).forEach(function(Ir){Wr[Ir]=fr.def(Tr,".",Ir)});var Gr=Ot.next={},wr=Ot.current={};Object.keys(Mn).forEach(function(Ir){Array.isArray(qr[Ir])&&(Gr[Ir]=fr.def(Wr.next,".",Ir),wr[Ir]=fr.def(Wr.current,".",Ir))});var br=Ot.constants={};Object.keys(Dn).forEach(function(Ir){br[Ir]=fr.def(JSON.stringify(Dn[Ir]))}),Ot.invoke=function(Ir,Er){switch(Er.type){case 0:var Xr=["this",Wr.context,Wr.props,Ot.batchId];return Ir.def(Ht(Er.data),".call(",Xr.slice(0,Math.max(Er.data.length+1,4)),")");case 1:return Ir.def(Wr.props,Er.data);case 2:return Ir.def(Wr.context,Er.data);case 3:return Ir.def("this",Er.data);case 4:return Er.data.append(Ot,Ir),Er.data.ref;case 5:return Er.data.toString();case 6:return Er.data.map(function(fn){return Ot.invoke(Ir,fn)})}},Ot.attribCache={};var Sr={};return Ot.scopeAttrib=function(Ir){if((Ir=Je.id(Ir))in Sr)return Sr[Ir];var Er=ut.scope[Ir];return Er||(Er=ut.scope[Ir]=new Pn),Sr[Ir]=Ht(Er)},Ot}function Re(Ot,Ht){var fr=Ot.static,Tr=Ot.dynamic;if("framebuffer"in fr){var Wr=fr.framebuffer;return Wr?(Wr=st.getFramebuffer(Wr),Z(function(wr,br){var Sr=wr.link(Wr),Ir=wr.shared;return br.set(Ir.framebuffer,".next",Sr),Ir=Ir.context,br.set(Ir,".framebufferWidth",Sr+".width"),br.set(Ir,".framebufferHeight",Sr+".height"),Sr})):Z(function(wr,br){var Sr=wr.shared;return br.set(Sr.framebuffer,".next","null"),Sr=Sr.context,br.set(Sr,".framebufferWidth",Sr+".drawingBufferWidth"),br.set(Sr,".framebufferHeight",Sr+".drawingBufferHeight"),"null"})}if("framebuffer"in Tr){var Gr=Tr.framebuffer;return $(Gr,function(wr,br){var Sr=wr.invoke(br,Gr),Ir=wr.shared,Er=Ir.framebuffer;return Sr=br.def(Er,".getFramebuffer(",Sr,")"),br.set(Er,".next",Sr),Ir=Ir.context,br.set(Ir,".framebufferWidth",Sr+"?"+Sr+".width:"+Ir+".drawingBufferWidth"),br.set(Ir,".framebufferHeight",Sr+"?"+Sr+".height:"+Ir+".drawingBufferHeight"),Sr})}return null}function ct(Ot,Ht,fr){function Tr(Ir){if(Ir in Wr){var Er=Je.id(Wr[Ir]);return(Ir=Z(function(){return Er})).id=Er,Ir}if(Ir in Gr){var Xr=Gr[Ir];return $(Xr,function(fn,_n){var en=fn.invoke(_n,Xr);return _n.def(fn.shared.strings,".id(",en,")")})}return null}var Wr=Ot.static,Gr=Ot.dynamic,wr=Tr("frag"),br=Tr("vert"),Sr=null;return K(wr)&&K(br)?(Sr=Lt.program(br.id,wr.id,null,fr),Ot=Z(function(Ir,Er){return Ir.link(Sr)})):Ot=new Q(wr&&wr.thisDep||br&&br.thisDep,wr&&wr.contextDep||br&&br.contextDep,wr&&wr.propDep||br&&br.propDep,function(Ir,Er){var Xr,fn,_n=Ir.shared.shader;return Xr=wr?wr.append(Ir,Er):Er.def(_n,".","frag"),fn=br?br.append(Ir,Er):Er.def(_n,".","vert"),Er.def(_n+".program("+fn+","+Xr+")")}),{frag:wr,vert:br,progVar:Ot,program:Sr}}function wt(Ot,Ht){function fr(en,yn){if(en in Tr){var Vr=0|Tr[en];return yn?Gr.offset=Vr:Gr.instances=Vr,Z(function(ln,gn){return yn&&(ln.OFFSET=Vr),Vr})}if(en in Wr){var Ur=Wr[en];return $(Ur,function(ln,gn){var Sn=ln.invoke(gn,Ur);return yn&&(ln.OFFSET=Sn),Sn})}if(yn){if(Sr)return Z(function(ln,gn){return ln.OFFSET=0});if(wr)return new Q(br.thisDep,br.contextDep,br.propDep,function(ln,gn){return gn.def(ln.shared.vao+".currentVAO?"+ln.shared.vao+".currentVAO.offset:0")})}else if(wr)return new Q(br.thisDep,br.contextDep,br.propDep,function(ln,gn){return gn.def(ln.shared.vao+".currentVAO?"+ln.shared.vao+".currentVAO.instances:-1")});return null}var Tr=Ot.static,Wr=Ot.dynamic,Gr={},wr=!1,br=function(){if("vao"in Tr){var en=Tr.vao;return en!==null&&ut.getVAO(en)===null&&(en=ut.createVAO(en)),wr=!0,Gr.vao=en,Z(function(Vr){var Ur=ut.getVAO(en);return Ur?Vr.link(Ur):"null"})}if("vao"in Wr){wr=!0;var yn=Wr.vao;return $(yn,function(Vr,Ur){var ln=Vr.invoke(Ur,yn);return Ur.def(Vr.shared.vao+".getVAO("+ln+")")})}return null}(),Sr=!1,Ir=function(){if("elements"in Tr){var en=Tr.elements;if(Gr.elements=en,H(en)){var yn=Gr.elements=Ie.create(en,!0);en=Ie.getElements(yn),Sr=!0}else en&&(en=Ie.getElements(en),Sr=!0);return(yn=Z(function(Ur,ln){if(en){var gn=Ur.link(en);return Ur.ELEMENTS=gn}return Ur.ELEMENTS=null})).value=en,yn}if("elements"in Wr){Sr=!0;var Vr=Wr.elements;return $(Vr,function(Ur,ln){var gn=(Sn=Ur.shared).isBufferArgs,Sn=Sn.elements,oi=Ur.invoke(ln,Vr),Yn=ln.def("null");return gn=ln.def(gn,"(",oi,")"),oi=Ur.cond(gn).then(Yn,"=",Sn,".createStream(",oi,");").else(Yn,"=",Sn,".getElements(",oi,");"),ln.entry(oi),ln.exit(Ur.cond(gn).then(Sn,".destroyStream(",Yn,");")),Ur.ELEMENTS=Yn})}return wr?new Q(br.thisDep,br.contextDep,br.propDep,function(Ur,ln){return ln.def(Ur.shared.vao+".currentVAO?"+Ur.shared.elements+".getElements("+Ur.shared.vao+".currentVAO.elements):null")}):null}(),Er=fr("offset",!0),Xr=function(){if("primitive"in Tr){var en=Tr.primitive;return Gr.primitive=en,Z(function(Vr,Ur){return Ae[en]})}if("primitive"in Wr){var yn=Wr.primitive;return $(yn,function(Vr,Ur){var ln=Vr.constants.primTypes,gn=Vr.invoke(Ur,yn);return Ur.def(ln,"[",gn,"]")})}return Sr?K(Ir)?Ir.value?Z(function(Vr,Ur){return Ur.def(Vr.ELEMENTS,".primType")}):Z(function(){return 4}):new Q(Ir.thisDep,Ir.contextDep,Ir.propDep,function(Vr,Ur){var ln=Vr.ELEMENTS;return Ur.def(ln,"?",ln,".primType:",4)}):wr?new Q(br.thisDep,br.contextDep,br.propDep,function(Vr,Ur){return Ur.def(Vr.shared.vao+".currentVAO?"+Vr.shared.vao+".currentVAO.primitive:4")}):null}(),fn=function(){if("count"in Tr){var en=0|Tr.count;return Gr.count=en,Z(function(){return en})}if("count"in Wr){var yn=Wr.count;return $(yn,function(Vr,Ur){return Vr.invoke(Ur,yn)})}return Sr?K(Ir)?Ir?Er?new Q(Er.thisDep,Er.contextDep,Er.propDep,function(Vr,Ur){return Ur.def(Vr.ELEMENTS,".vertCount-",Vr.OFFSET)}):Z(function(Vr,Ur){return Ur.def(Vr.ELEMENTS,".vertCount")}):Z(function(){return-1}):new Q(Ir.thisDep||Er.thisDep,Ir.contextDep||Er.contextDep,Ir.propDep||Er.propDep,function(Vr,Ur){var ln=Vr.ELEMENTS;return Vr.OFFSET?Ur.def(ln,"?",ln,".vertCount-",Vr.OFFSET,":-1"):Ur.def(ln,"?",ln,".vertCount:-1")}):wr?new Q(br.thisDep,br.contextDep,br.propDep,function(Vr,Ur){return Ur.def(Vr.shared.vao,".currentVAO?",Vr.shared.vao,".currentVAO.count:-1")}):null}(),_n=fr("instances",!1);return{elements:Ir,primitive:Xr,count:fn,instances:_n,offset:Er,vao:br,vaoActive:wr,elementsActive:Sr,static:Gr}}function Rt(Ot,Ht){var fr=Ot.static,Tr=Ot.dynamic,Wr={};return Object.keys(fr).forEach(function(Gr){var wr=fr[Gr],br=Je.id(Gr),Sr=new Pn;if(H(wr))Sr.state=1,Sr.buffer=De.getBuffer(De.create(wr,34962,!1,!0)),Sr.type=0;else if(Er=De.getBuffer(wr))Sr.state=1,Sr.buffer=Er,Sr.type=0;else if("constant"in wr){var Ir=wr.constant;Sr.buffer="null",Sr.state=2,typeof Ir=="number"?Sr.x=Ir:it.forEach(function(Vr,Ur){Ur<Ir.length&&(Sr[Vr]=Ir[Ur])})}else{var Er=H(wr.buffer)?De.getBuffer(De.create(wr.buffer,34962,!1,!0)):De.getBuffer(wr.buffer),Xr=0|wr.offset,fn=0|wr.stride,_n=0|wr.size,en=!!wr.normalized,yn=0;"type"in wr&&(yn=le[wr.type]),wr=0|wr.divisor,Sr.buffer=Er,Sr.state=1,Sr.size=_n,Sr.normalized=en,Sr.type=yn||Er.dtype,Sr.offset=Xr,Sr.stride=fn,Sr.divisor=wr}Wr[Gr]=Z(function(Vr,Ur){var ln=Vr.attribCache;if(br in ln)return ln[br];var gn={isStream:!1};return Object.keys(Sr).forEach(function(Sn){gn[Sn]=Sr[Sn]}),Sr.buffer&&(gn.buffer=Vr.link(Sr.buffer),gn.type=gn.type||gn.buffer+".dtype"),ln[br]=gn})}),Object.keys(Tr).forEach(function(Gr){var wr=Tr[Gr];Wr[Gr]=$(wr,function(br,Sr){function Ir(ln){Sr(en[ln],"=",Er,".",ln,"|0;")}var Er=br.invoke(Sr,wr),Xr=br.shared,fn=br.constants,_n=Xr.isBufferArgs,en=(Xr=Xr.buffer,{isStream:Sr.def(!1)}),yn=new Pn;yn.state=1,Object.keys(yn).forEach(function(ln){en[ln]=Sr.def(""+yn[ln])});var Vr=en.buffer,Ur=en.type;return Sr("if(",_n,"(",Er,")){",en.isStream,"=true;",Vr,"=",Xr,".createStream(",34962,",",Er,");",Ur,"=",Vr,".dtype;","}else{",Vr,"=",Xr,".getBuffer(",Er,");","if(",Vr,"){",Ur,"=",Vr,".dtype;",'}else if("constant" in ',Er,"){",en.state,"=",2,";","if(typeof "+Er+'.constant === "number"){',en[it[0]],"=",Er,".constant;",it.slice(1).map(function(ln){return en[ln]}).join("="),"=0;","}else{",it.map(function(ln,gn){return en[ln]+"="+Er+".constant.length>"+gn+"?"+Er+".constant["+gn+"]:0;"}).join(""),"}}else{","if(",_n,"(",Er,".buffer)){",Vr,"=",Xr,".createStream(",34962,",",Er,".buffer);","}else{",Vr,"=",Xr,".getBuffer(",Er,".buffer);","}",Ur,'="type" in ',Er,"?",fn.glTypes,"[",Er,".type]:",Vr,".dtype;",en.normalized,"=!!",Er,".normalized;"),Ir("size"),Ir("offset"),Ir("stride"),Ir("divisor"),Sr("}}"),Sr.exit("if(",en.isStream,"){",Xr,".destroyStream(",Vr,");","}"),en})}),Wr}function Vt(Ot,Ht,fr,Tr,Wr){function Gr(yn){var Vr=br[yn];Vr&&(Ir[yn]=Vr)}var wr=function(yn,Vr){if(typeof(Ur=yn.static).frag=="string"&&typeof Ur.vert=="string"){if(0<Object.keys(Vr.dynamic).length)return null;var Ur=Vr.static,ln=Object.keys(Ur);if(0<ln.length&&typeof Ur[ln[0]]=="number"){for(var gn=[],Sn=0;Sn<ln.length;++Sn)gn.push([0|Ur[ln[Sn]],ln[Sn]]);return gn}}return null}(Ot,Ht),br=function(yn,Vr,Ur){function ln(Yn){if(Yn in gn){var vn=gn[Yn];Yn=!0;var ri,hi,Xi=0|vn.x,Da=0|vn.y;return"width"in vn?ri=0|vn.width:Yn=!1,"height"in vn?hi=0|vn.height:Yn=!1,new Q(!Yn&&Vr&&Vr.thisDep,!Yn&&Vr&&Vr.contextDep,!Yn&&Vr&&Vr.propDep,function(_a,Mi){var ji=_a.shared.context,mo=ri;"width"in vn||(mo=Mi.def(ji,".","framebufferWidth","-",Xi));var Ho=hi;return"height"in vn||(Ho=Mi.def(ji,".","framebufferHeight","-",Da)),[Xi,Da,mo,Ho]})}if(Yn in Sn){var ia=Sn[Yn];return Yn=$(ia,function(_a,Mi){var ji=_a.invoke(Mi,ia),mo=_a.shared.context,Ho=Mi.def(ji,".x|0"),es=Mi.def(ji,".y|0");return[Ho,es,Mi.def('"width" in ',ji,"?",ji,".width|0:","(",mo,".","framebufferWidth","-",Ho,")"),ji=Mi.def('"height" in ',ji,"?",ji,".height|0:","(",mo,".","framebufferHeight","-",es,")")]}),Vr&&(Yn.thisDep=Yn.thisDep||Vr.thisDep,Yn.contextDep=Yn.contextDep||Vr.contextDep,Yn.propDep=Yn.propDep||Vr.propDep),Yn}return Vr?new Q(Vr.thisDep,Vr.contextDep,Vr.propDep,function(_a,Mi){var ji=_a.shared.context;return[0,0,Mi.def(ji,".","framebufferWidth"),Mi.def(ji,".","framebufferHeight")]}):null}var gn=yn.static,Sn=yn.dynamic;if(yn=ln("viewport")){var oi=yn;yn=new Q(yn.thisDep,yn.contextDep,yn.propDep,function(Yn,vn){var ri=oi.append(Yn,vn),hi=Yn.shared.context;return vn.set(hi,".viewportWidth",ri[2]),vn.set(hi,".viewportHeight",ri[3]),ri})}return{viewport:yn,scissor_box:ln("scissor.box")}}(Ot,Xr=Re(Ot)),Sr=wt(Ot),Ir=function(yn,Vr){var Ur=yn.static,ln=yn.dynamic,gn={};return Fr.forEach(function(Sn){function oi(vn,ri){if(Sn in Ur){var hi=vn(Ur[Sn]);gn[Yn]=Z(function(){return hi})}else if(Sn in ln){var Xi=ln[Sn];gn[Yn]=$(Xi,function(Da,ia){return ri(Da,ia,Da.invoke(ia,Xi))})}}var Yn=mt(Sn);switch(Sn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return oi(function(vn){return vn},function(vn,ri,hi){return hi});case"depth.func":return oi(function(vn){return Gt[vn]},function(vn,ri,hi){return ri.def(vn.constants.compareFuncs,"[",hi,"]")});case"depth.range":return oi(function(vn){return vn},function(vn,ri,hi){return[ri.def("+",hi,"[0]"),ri=ri.def("+",hi,"[1]")]});case"blend.func":return oi(function(vn){return[At["srcRGB"in vn?vn.srcRGB:vn.src],At["dstRGB"in vn?vn.dstRGB:vn.dst],At["srcAlpha"in vn?vn.srcAlpha:vn.src],At["dstAlpha"in vn?vn.dstAlpha:vn.dst]]},function(vn,ri,hi){function Xi(Mi,ji){return ri.def('"',Mi,ji,'" in ',hi,"?",hi,".",Mi,ji,":",hi,".",Mi)}vn=vn.constants.blendFuncs;var Da=Xi("src","RGB"),ia=Xi("dst","RGB"),_a=(Da=ri.def(vn,"[",Da,"]"),ri.def(vn,"[",Xi("src","Alpha"),"]"));return[Da,ia=ri.def(vn,"[",ia,"]"),_a,vn=ri.def(vn,"[",Xi("dst","Alpha"),"]")]});case"blend.equation":return oi(function(vn){return typeof vn=="string"?[An[vn],An[vn]]:typeof vn=="object"?[An[vn.rgb],An[vn.alpha]]:void 0},function(vn,ri,hi){var Xi=vn.constants.blendEquations,Da=ri.def(),ia=ri.def();return(vn=vn.cond("typeof ",hi,'==="string"')).then(Da,"=",ia,"=",Xi,"[",hi,"];"),vn.else(Da,"=",Xi,"[",hi,".rgb];",ia,"=",Xi,"[",hi,".alpha];"),ri(vn),[Da,ia]});case"blend.color":return oi(function(vn){return r(4,function(ri){return+vn[ri]})},function(vn,ri,hi){return r(4,function(Xi){return ri.def("+",hi,"[",Xi,"]")})});case"stencil.mask":return oi(function(vn){return 0|vn},function(vn,ri,hi){return ri.def(hi,"|0")});case"stencil.func":return oi(function(vn){return[Gt[vn.cmp||"keep"],vn.ref||0,"mask"in vn?vn.mask:-1]},function(vn,ri,hi){return[vn=ri.def('"cmp" in ',hi,"?",vn.constants.compareFuncs,"[",hi,".cmp]",":",7680),ri.def(hi,".ref|0"),ri=ri.def('"mask" in ',hi,"?",hi,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return oi(function(vn){return[Sn==="stencil.opBack"?1029:1028,Qt[vn.fail||"keep"],Qt[vn.zfail||"keep"],Qt[vn.zpass||"keep"]]},function(vn,ri,hi){function Xi(ia){return ri.def('"',ia,'" in ',hi,"?",Da,"[",hi,".",ia,"]:",7680)}var Da=vn.constants.stencilOps;return[Sn==="stencil.opBack"?1029:1028,Xi("fail"),Xi("zfail"),Xi("zpass")]});case"polygonOffset.offset":return oi(function(vn){return[0|vn.factor,0|vn.units]},function(vn,ri,hi){return[ri.def(hi,".factor|0"),ri=ri.def(hi,".units|0")]});case"cull.face":return oi(function(vn){var ri=0;return vn==="front"?ri=1028:vn==="back"&&(ri=1029),ri},function(vn,ri,hi){return ri.def(hi,'==="front"?',1028,":",1029)});case"lineWidth":return oi(function(vn){return vn},function(vn,ri,hi){return hi});case"frontFace":return oi(function(vn){return Ve[vn]},function(vn,ri,hi){return ri.def(hi+'==="cw"?2304:2305')});case"colorMask":return oi(function(vn){return vn.map(function(ri){return!!ri})},function(vn,ri,hi){return r(4,function(Xi){return"!!"+hi+"["+Xi+"]"})});case"sample.coverage":return oi(function(vn){return["value"in vn?vn.value:1,!!vn.invert]},function(vn,ri,hi){return[ri.def('"value" in ',hi,"?+",hi,".value:1"),ri=ri.def("!!",hi,".invert")]})}}),gn}(Ot),Er=ct(Ot,0,wr);Gr("viewport"),Gr(mt("scissor.box"));var Xr,fn=0<Object.keys(Ir).length;if((Xr={framebuffer:Xr,draw:Sr,shader:Er,state:Ir,dirty:fn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(yn){var Vr,Ur=yn.static;if(yn=yn.dynamic,"profile"in Ur){var ln=!!Ur.profile;(Vr=Z(function(Sn,oi){return ln})).enable=ln}else if("profile"in yn){var gn=yn.profile;Vr=$(gn,function(Sn,oi){return Sn.invoke(oi,gn)})}return Vr}(Ot),Xr.uniforms=function(yn,Vr){var Ur=yn.static,ln=yn.dynamic,gn={};return Object.keys(Ur).forEach(function(Sn){var oi,Yn=Ur[Sn];if(typeof Yn=="number"||typeof Yn=="boolean")oi=Z(function(){return Yn});else if(typeof Yn=="function"){var vn=Yn._reglType;vn==="texture2d"||vn==="textureCube"?oi=Z(function(ri){return ri.link(Yn)}):vn!=="framebuffer"&&vn!=="framebufferCube"||(oi=Z(function(ri){return ri.link(Yn.color[0])}))}else m(Yn)&&(oi=Z(function(ri){return ri.global.def("[",r(Yn.length,function(hi){return Yn[hi]}),"]")}));oi.value=Yn,gn[Sn]=oi}),Object.keys(ln).forEach(function(Sn){var oi=ln[Sn];gn[Sn]=$(oi,function(Yn,vn){return Yn.invoke(vn,oi)})}),gn}(fr),Xr.drawVAO=Xr.scopeVAO=Sr.vao,!Xr.drawVAO&&Er.program&&!wr&&Se.angle_instanced_arrays&&Sr.static.elements){var _n=!0;if(Ot=Er.program.attributes.map(function(yn){return yn=Ht.static[yn],_n=_n&&!!yn,yn}),_n&&0<Ot.length){var en=ut.getVAO(ut.createVAO({attributes:Ot,elements:Sr.static.elements}));Xr.drawVAO=new Q(null,null,null,function(yn,Vr){return yn.link(en)}),Xr.useVAO=!0}}return wr?Xr.useVAO=!0:Xr.attributes=Rt(Ht),Xr.context=function(yn){var Vr=yn.static,Ur=yn.dynamic,ln={};return Object.keys(Vr).forEach(function(gn){var Sn=Vr[gn];ln[gn]=Z(function(oi,Yn){return typeof Sn=="number"||typeof Sn=="boolean"?""+Sn:oi.link(Sn)})}),Object.keys(Ur).forEach(function(gn){var Sn=Ur[gn];ln[gn]=$(Sn,function(oi,Yn){return oi.invoke(Yn,Sn)})}),ln}(Tr),Xr}function rr(Ot,Ht,fr){var Tr=Ot.shared.context,Wr=Ot.scope();Object.keys(fr).forEach(function(Gr){Ht.save(Tr,"."+Gr);var wr=fr[Gr].append(Ot,Ht);Array.isArray(wr)?Wr(Tr,".",Gr,"=[",wr.join(),"];"):Wr(Tr,".",Gr,"=",wr,";")}),Ht(Wr)}function qt(Ot,Ht,fr,Tr){var Wr,Gr=(br=Ot.shared).gl,wr=br.framebuffer;zr&&(Wr=Ht.def(br.extensions,".webgl_draw_buffers"));var br=(Sr=Ot.constants).drawBuffer,Sr=Sr.backBuffer;Ot=fr?fr.append(Ot,Ht):Ht.def(wr,".next"),Tr||Ht("if(",Ot,"!==",wr,".cur){"),Ht("if(",Ot,"){",Gr,".bindFramebuffer(",36160,",",Ot,".framebuffer);"),zr&&Ht(Wr,".drawBuffersWEBGL(",br,"[",Ot,".colorAttachments.length]);"),Ht("}else{",Gr,".bindFramebuffer(",36160,",null);"),zr&&Ht(Wr,".drawBuffersWEBGL(",Sr,");"),Ht("}",wr,".cur=",Ot,";"),Tr||Ht("}")}function Jt(Ot,Ht,fr){var Tr=Ot.shared,Wr=Tr.gl,Gr=Ot.current,wr=Ot.next,br=Tr.current,Sr=Tr.next,Ir=Ot.cond(br,".dirty");Fr.forEach(function(Er){var Xr,fn;if(!((Er=mt(Er))in fr.state))if(Er in wr){Xr=wr[Er],fn=Gr[Er];var _n=r(qr[Er].length,function(en){return Ir.def(Xr,"[",en,"]")});Ir(Ot.cond(_n.map(function(en,yn){return en+"!=="+fn+"["+yn+"]"}).join("||")).then(Wr,".",Mn[Er],"(",_n,");",_n.map(function(en,yn){return fn+"["+yn+"]="+en}).join(";"),";"))}else Xr=Ir.def(Sr,".",Er),_n=Ot.cond(Xr,"!==",br,".",Er),Ir(_n),Er in on?_n(Ot.cond(Xr).then(Wr,".enable(",on[Er],");").else(Wr,".disable(",on[Er],");"),br,".",Er,"=",Xr,";"):_n(Wr,".",Mn[Er],"(",Xr,");",br,".",Er,"=",Xr,";")}),Object.keys(fr.state).length===0&&Ir(br,".dirty=false;"),Ht(Ir)}function or(Ot,Ht,fr,Tr){var Wr=Ot.shared,Gr=Ot.current,wr=Wr.current,br=Wr.gl;V(Object.keys(fr)).forEach(function(Sr){var Ir=fr[Sr];if(!Tr||Tr(Ir)){var Er=Ir.append(Ot,Ht);if(on[Sr]){var Xr=on[Sr];K(Ir)?Ht(br,Er?".enable(":".disable(",Xr,");"):Ht(Ot.cond(Er).then(br,".enable(",Xr,");").else(br,".disable(",Xr,");")),Ht(wr,".",Sr,"=",Er,";")}else if(m(Er)){var fn=Gr[Sr];Ht(br,".",Mn[Sr],"(",Er,");",Er.map(function(_n,en){return fn+"["+en+"]="+_n}).join(";"),";")}else Ht(br,".",Mn[Sr],"(",Er,");",wr,".",Sr,"=",Er,";")}})}function gr(Ot,Ht){tn&&(Ot.instancing=Ht.def(Ot.shared.extensions,".angle_instanced_arrays"))}function dr(Ot,Ht,fr,Tr,Wr){function Gr(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}function wr(yn){yn(Ir=Ht.def(),"=",Gr(),";"),typeof Wr=="string"?yn(fn,".count+=",Wr,";"):yn(fn,".count++;"),Pt&&(Tr?yn(Er=Ht.def(),"=",en,".getNumPendingQueries();"):yn(en,".beginQuery(",fn,");"))}function br(yn){yn(fn,".cpuTime+=",Gr(),"-",Ir,";"),Pt&&(Tr?yn(en,".pushScopeStats(",Er,",",en,".getNumPendingQueries(),",fn,");"):yn(en,".endQuery();"))}function Sr(yn){var Vr=Ht.def(_n,".profile");Ht(_n,".profile=",yn,";"),Ht.exit(_n,".profile=",Vr,";")}var Ir,Er,Xr=Ot.shared,fn=Ot.stats,_n=Xr.current,en=Xr.timer;if(fr=fr.profile){if(K(fr))return void(fr.enable?(wr(Ht),br(Ht.exit),Sr("true")):Sr("false"));Sr(fr=fr.append(Ot,Ht))}else fr=Ht.def(_n,".profile");wr(Xr=Ot.block()),Ht("if(",fr,"){",Xr,"}"),br(Ot=Ot.block()),Ht.exit("if(",fr,"){",Ot,"}")}function ur(Ot,Ht,fr,Tr,Wr){function Gr(br,Sr,Ir){function Er(){Ht("if(!",en,".buffer){",fn,".enableVertexAttribArray(",_n,");}");var ln,gn=Ir.type;ln=Ir.size?Ht.def(Ir.size,"||",Sr):Sr,Ht("if(",en,".type!==",gn,"||",en,".size!==",ln,"||",Ur.map(function(Sn){return en+"."+Sn+"!=="+Ir[Sn]}).join("||"),"){",fn,".bindBuffer(",34962,",",yn,".buffer);",fn,".vertexAttribPointer(",[_n,ln,gn,Ir.normalized,Ir.stride,Ir.offset],");",en,".type=",gn,";",en,".size=",ln,";",Ur.map(function(Sn){return en+"."+Sn+"="+Ir[Sn]+";"}).join(""),"}"),tn&&(gn=Ir.divisor,Ht("if(",en,".divisor!==",gn,"){",Ot.instancing,".vertexAttribDivisorANGLE(",[_n,gn],");",en,".divisor=",gn,";}"))}function Xr(){Ht("if(",en,".buffer){",fn,".disableVertexAttribArray(",_n,");",en,".buffer=null;","}if(",it.map(function(ln,gn){return en+"."+ln+"!=="+Vr[gn]}).join("||"),"){",fn,".vertexAttrib4f(",_n,",",Vr,");",it.map(function(ln,gn){return en+"."+ln+"="+Vr[gn]+";"}).join(""),"}")}var fn=wr.gl,_n=Ht.def(br,".location"),en=Ht.def(wr.attributes,"[",_n,"]");br=Ir.state;var yn=Ir.buffer,Vr=[Ir.x,Ir.y,Ir.z,Ir.w],Ur=["buffer","normalized","offset","stride"];br===1?Er():br===2?Xr():(Ht("if(",br,"===",1,"){"),Er(),Ht("}else{"),Xr(),Ht("}"))}var wr=Ot.shared;Tr.forEach(function(br){var Sr,Ir=br.name,Er=fr.attributes[Ir];if(Er){if(!Wr(Er))return;Sr=Er.append(Ot,Ht)}else{if(!Wr(Ye))return;var Xr=Ot.scopeAttrib(Ir);Sr={},Object.keys(new Pn).forEach(function(fn){Sr[fn]=Ht.def(Xr,".",fn)})}Gr(Ot.link(br),function(fn){switch(fn){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(br.info.type),Sr)})}function cr(Ot,Ht,fr,Tr,Wr,Gr){for(var wr,br=Ot.shared,Sr=br.gl,Ir={},Er=0;Er<Tr.length;++Er){var Xr=(Ur=Tr[Er]).name,fn=Ur.info.type,_n=Ur.info.size,en=fr.uniforms[Xr];if(1<_n){if(!en)continue;var yn=Xr.replace("[0]","");if(Ir[yn])continue;Ir[yn]=1}var Vr,Ur=Ot.link(Ur)+".location";if(en){if(!Wr(en))continue;if(K(en)){if(Xr=en.value,fn===35678||fn===35680)Ht(Sr,".uniform1i(",Ur,",",(fn=Ot.link(Xr._texture||Xr.color[0]._texture))+".bind());"),Ht.exit(fn,".unbind();");else if(fn===35674||fn===35675||fn===35676)_n=Ot.global.def("new Float32Array(["+Array.prototype.slice.call(Xr)+"])"),Xr=2,fn===35675?Xr=3:fn===35676&&(Xr=4),Ht(Sr,".uniformMatrix",Xr,"fv(",Ur,",false,",_n,");");else{switch(fn){case 5126:wr="1f";break;case 35664:wr="2f";break;case 35665:wr="3f";break;case 35666:wr="4f";break;case 35670:case 5124:wr="1i";break;case 35671:case 35667:wr="2i";break;case 35672:case 35668:wr="3i";break;case 35673:wr="4i";break;case 35669:wr="4i"}1<_n?(wr+="v",Xr=Ot.global.def("["+Array.prototype.slice.call(Xr)+"]")):Xr=m(Xr)?Array.prototype.slice.call(Xr):Xr,Ht(Sr,".uniform",wr,"(",Ur,",",Xr,");")}continue}Vr=en.append(Ot,Ht)}else{if(!Wr(Ye))continue;Vr=Ht.def(br.uniforms,"[",Je.id(Xr),"]")}switch(fn===35678?Ht("if(",Vr,"&&",Vr,'._reglType==="framebuffer"){',Vr,"=",Vr,".color[0];","}"):fn===35680&&Ht("if(",Vr,"&&",Vr,'._reglType==="framebufferCube"){',Vr,"=",Vr,".color[0];","}"),Xr=1,fn){case 35678:case 35680:fn=Ht.def(Vr,"._texture"),Ht(Sr,".uniform1i(",Ur,",",fn,".bind());"),Ht.exit(fn,".unbind();");continue;case 5124:case 35670:wr="1i";break;case 35667:case 35671:wr="2i",Xr=2;break;case 35668:case 35672:wr="3i",Xr=3;break;case 35669:case 35673:wr="4i",Xr=4;break;case 5126:wr="1f";break;case 35664:wr="2f",Xr=2;break;case 35665:wr="3f",Xr=3;break;case 35666:wr="4f",Xr=4;break;case 35674:wr="Matrix2fv";break;case 35675:wr="Matrix3fv";break;case 35676:wr="Matrix4fv"}if(wr.indexOf("Matrix")===-1&&1<_n&&(wr+="v",Xr=1),wr.charAt(0)==="M"){Ht(Sr,".uniform",wr,"(",Ur,","),Ur=Math.pow(fn-35674+2,2);var ln=Ot.global.def("new Float32Array(",Ur,")");Array.isArray(Vr)?Ht("false,(",r(Ur,function(Sn){return ln+"["+Sn+"]="+Vr[Sn]}),",",ln,")"):Ht("false,(Array.isArray(",Vr,")||",Vr," instanceof Float32Array)?",Vr,":(",r(Ur,function(Sn){return ln+"["+Sn+"]="+Vr+"["+Sn+"]"}),",",ln,")"),Ht(");")}else{if(1<Xr){fn=[];var gn=[];for(_n=0;_n<Xr;++_n)Array.isArray(Vr)?gn.push(Vr[_n]):gn.push(Ht.def(Vr+"["+_n+"]")),Gr&&fn.push(Ht.def());Gr&&Ht("if(!",Ot.batchId,"||",fn.map(function(Sn,oi){return Sn+"!=="+gn[oi]}).join("||"),"){",fn.map(function(Sn,oi){return Sn+"="+gn[oi]+";"}).join("")),Ht(Sr,".uniform",wr,"(",Ur,",",gn.join(","),");")}else Gr&&(fn=Ht.def(),Ht("if(!",Ot.batchId,"||",fn,"!==",Vr,"){",fn,"=",Vr,";")),Ht(Sr,".uniform",wr,"(",Ur,",",Vr,");");Gr&&Ht("}")}}}function mr(Ot,Ht,fr,Tr){function Wr(gn){var Sn=fn[gn];return Sn?Sn.contextDep&&Tr.contextDynamic||Sn.propDep?Sn.append(Ot,fr):Sn.append(Ot,Ht):Ht.def(Xr,".",gn)}function Gr(){function gn(){fr(Sr,".drawElementsInstancedANGLE(",[en,Vr,Ur,yn+"<<(("+Ur+"-5121)>>1)",br],");")}function Sn(){fr(Sr,".drawArraysInstancedANGLE(",[en,yn,Vr,br],");")}_n&&_n!=="null"?ln?gn():(fr("if(",_n,"){"),gn(),fr("}else{"),Sn(),fr("}")):Sn()}function wr(){function gn(){fr(Er+".drawElements("+[en,Vr,Ur,yn+"<<(("+Ur+"-5121)>>1)"]+");")}function Sn(){fr(Er+".drawArrays("+[en,yn,Vr]+");")}_n&&_n!=="null"?ln?gn():(fr("if(",_n,"){"),gn(),fr("}else{"),Sn(),fr("}")):Sn()}var br,Sr,Ir=Ot.shared,Er=Ir.gl,Xr=Ir.draw,fn=Tr.draw,_n=function(){var gn=fn.elements,Sn=Ht;return gn?((gn.contextDep&&Tr.contextDynamic||gn.propDep)&&(Sn=fr),gn=gn.append(Ot,Sn),fn.elementsActive&&Sn("if("+gn+")"+Er+".bindBuffer(34963,"+gn+".buffer.buffer);")):(gn=Sn.def(),Sn(gn,"=",Xr,".","elements",";","if(",gn,"){",Er,".bindBuffer(",34963,",",gn,".buffer.buffer);}","else if(",Ir.vao,".currentVAO){",gn,"=",Ot.shared.elements+".getElements("+Ir.vao,".currentVAO.elements);",Ar?"":"if("+gn+")"+Er+".bindBuffer(34963,"+gn+".buffer.buffer);","}")),gn}(),en=Wr("primitive"),yn=Wr("offset"),Vr=function(){var gn=fn.count,Sn=Ht;return gn?((gn.contextDep&&Tr.contextDynamic||gn.propDep)&&(Sn=fr),gn=gn.append(Ot,Sn)):gn=Sn.def(Xr,".","count"),gn}();if(typeof Vr=="number"){if(Vr===0)return}else fr("if(",Vr,"){"),fr.exit("}");tn&&(br=Wr("instances"),Sr=Ot.instancing);var Ur=_n+".type",ln=fn.elements&&K(fn.elements)&&!fn.vaoActive;tn&&(typeof br!="number"||0<=br)?typeof br=="string"?(fr("if(",br,">0){"),Gr(),fr("}else if(",br,"<0){"),wr(),fr("}")):Gr():wr()}function Dr(Ot,Ht,fr,Tr,Wr){return Wr=(Ht=Zt()).proc("body",Wr),tn&&(Ht.instancing=Wr.def(Ht.shared.extensions,".angle_instanced_arrays")),Ot(Ht,Wr,fr,Tr),Ht.compile().body}function yr(Ot,Ht,fr,Tr){gr(Ot,Ht),fr.useVAO?fr.drawVAO?Ht(Ot.shared.vao,".setVAO(",fr.drawVAO.append(Ot,Ht),");"):Ht(Ot.shared.vao,".setVAO(",Ot.shared.vao,".targetVAO);"):(Ht(Ot.shared.vao,".setVAO(null);"),ur(Ot,Ht,fr,Tr.attributes,function(){return!0})),cr(Ot,Ht,fr,Tr.uniforms,function(){return!0},!1),mr(Ot,Ht,Ht,fr)}function Br(Ot,Ht,fr,Tr){function Wr(){return!0}Ot.batchId="a1",gr(Ot,Ht),ur(Ot,Ht,fr,Tr.attributes,Wr),cr(Ot,Ht,fr,Tr.uniforms,Wr,!1),mr(Ot,Ht,Ht,fr)}function Kr(Ot,Ht,fr,Tr){function Wr(Xr){return Xr.contextDep&&wr||Xr.propDep}function Gr(Xr){return!Wr(Xr)}gr(Ot,Ht);var wr=fr.contextDep,br=Ht.def(),Sr=Ht.def();Ot.shared.props=Sr,Ot.batchId=br;var Ir=Ot.scope(),Er=Ot.scope();Ht(Ir.entry,"for(",br,"=0;",br,"<","a1",";++",br,"){",Sr,"=","a0","[",br,"];",Er,"}",Ir.exit),fr.needsContext&&rr(Ot,Er,fr.context),fr.needsFramebuffer&&qt(Ot,Er,fr.framebuffer),or(Ot,Er,fr.state,Wr),fr.profile&&Wr(fr.profile)&&dr(Ot,Er,fr,!1,!0),Tr?(fr.useVAO?fr.drawVAO?Wr(fr.drawVAO)?Er(Ot.shared.vao,".setVAO(",fr.drawVAO.append(Ot,Er),");"):Ir(Ot.shared.vao,".setVAO(",fr.drawVAO.append(Ot,Ir),");"):Ir(Ot.shared.vao,".setVAO(",Ot.shared.vao,".targetVAO);"):(Ir(Ot.shared.vao,".setVAO(null);"),ur(Ot,Ir,fr,Tr.attributes,Gr),ur(Ot,Er,fr,Tr.attributes,Wr)),cr(Ot,Ir,fr,Tr.uniforms,Gr,!1),cr(Ot,Er,fr,Tr.uniforms,Wr,!0),mr(Ot,Ir,Er,fr)):(Ht=Ot.global.def("{}"),Tr=fr.shader.progVar.append(Ot,Er),Sr=Er.def(Tr,".id"),Ir=Er.def(Ht,"[",Sr,"]"),Er(Ot.shared.gl,".useProgram(",Tr,".program);","if(!",Ir,"){",Ir,"=",Ht,"[",Sr,"]=",Ot.link(function(Xr){return Dr(Br,Ot,fr,Xr,2)}),"(",Tr,");}",Ir,".call(this,a0[",br,"],",br,");"))}function an(Ot,Ht){function fr(wr){var br=Ht.shader[wr];br&&Tr.set(Wr.shader,"."+wr,br.append(Ot,Tr))}var Tr=Ot.proc("scope",3);Ot.batchId="a2";var Wr=Ot.shared,Gr=Wr.current;rr(Ot,Tr,Ht.context),Ht.framebuffer&&Ht.framebuffer.append(Ot,Tr),V(Object.keys(Ht.state)).forEach(function(wr){var br=Ht.state[wr].append(Ot,Tr);m(br)?br.forEach(function(Sr,Ir){Tr.set(Ot.next[wr],"["+Ir+"]",Sr)}):Tr.set(Wr.next,"."+wr,br)}),dr(Ot,Tr,Ht,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(wr){var br=Ht.draw[wr];br&&Tr.set(Wr.draw,"."+wr,""+br.append(Ot,Tr))}),Object.keys(Ht.uniforms).forEach(function(wr){var br=Ht.uniforms[wr].append(Ot,Tr);Array.isArray(br)&&(br="["+br.join()+"]"),Tr.set(Wr.uniforms,"["+Je.id(wr)+"]",br)}),Object.keys(Ht.attributes).forEach(function(wr){var br=Ht.attributes[wr].append(Ot,Tr),Sr=Ot.scopeAttrib(wr);Object.keys(new Pn).forEach(function(Ir){Tr.set(Sr,"."+Ir,br[Ir])})}),Ht.scopeVAO&&Tr.set(Wr.vao,".targetVAO",Ht.scopeVAO.append(Ot,Tr)),fr("vert"),fr("frag"),0<Object.keys(Ht.state).length&&(Tr(Gr,".dirty=true;"),Tr.exit(Gr,".dirty=true;")),Tr("a1(",Ot.shared.context,",a0,",Ot.batchId,");")}function Ln(Ot,Ht,fr){var Tr=Ht.static[fr];if(Tr&&function(Er){if(typeof Er=="object"&&!m(Er)){for(var Xr=Object.keys(Er),fn=0;fn<Xr.length;++fn)if(te.isDynamic(Er[Xr[fn]]))return!0;return!1}}(Tr)){var Wr=Ot.global,Gr=Object.keys(Tr),wr=!1,br=!1,Sr=!1,Ir=Ot.global.def("{}");Gr.forEach(function(Er){var Xr=Tr[Er];if(te.isDynamic(Xr))typeof Xr=="function"&&(Xr=Tr[Er]=te.unbox(Xr)),Er=$(Xr,null),wr=wr||Er.thisDep,Sr=Sr||Er.propDep,br=br||Er.contextDep;else{switch(Wr(Ir,".",Er,"="),typeof Xr){case"number":Wr(Xr);break;case"string":Wr('"',Xr,'"');break;case"object":Array.isArray(Xr)&&Wr("[",Xr.join(),"]");break;default:Wr(Ot.link(Xr))}Wr(";")}}),Ht.dynamic[fr]=new te.DynamicVariable(4,{thisDep:wr,contextDep:br,propDep:Sr,ref:Ir,append:function(Er,Xr){Gr.forEach(function(fn){var _n=Tr[fn];te.isDynamic(_n)&&(_n=Er.invoke(Xr,_n),Xr(Ir,".",fn,"=",_n,";"))})}}),delete Ht.static[fr]}}var Pn=ut.Record,An={add:32774,subtract:32778,"reverse subtract":32779};Se.ext_blend_minmax&&(An.min=32775,An.max=32776);var tn=Se.angle_instanced_arrays,zr=Se.webgl_draw_buffers,Ar=Se.oes_vertex_array_object,qr={dirty:!0,profile:Ke.profile},On={},Fr=[],on={},Mn={};Dt("dither",3024),Dt("blend.enable",3042),Bt("blend.color","blendColor",[0,0,0,0]),Bt("blend.equation","blendEquationSeparate",[32774,32774]),Bt("blend.func","blendFuncSeparate",[1,0,1,0]),Dt("depth.enable",2929,!0),Bt("depth.func","depthFunc",513),Bt("depth.range","depthRange",[0,1]),Bt("depth.mask","depthMask",!0),Bt("colorMask","colorMask",[!0,!0,!0,!0]),Dt("cull.enable",2884),Bt("cull.face","cullFace",1029),Bt("frontFace","frontFace",2305),Bt("lineWidth","lineWidth",1),Dt("polygonOffset.enable",32823),Bt("polygonOffset.offset","polygonOffset",[0,0]),Dt("sample.alpha",32926),Dt("sample.enable",32928),Bt("sample.coverage","sampleCoverage",[1,!1]),Dt("stencil.enable",2960),Bt("stencil.mask","stencilMask",-1),Bt("stencil.func","stencilFunc",[519,0,-1]),Bt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Bt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Dt("scissor.enable",3089),Bt("scissor.box","scissor",[0,0,Be.drawingBufferWidth,Be.drawingBufferHeight]),Bt("viewport","viewport",[0,0,Be.drawingBufferWidth,Be.drawingBufferHeight]);var bn={gl:Be,context:Ct,strings:Je,next:On,current:qr,draw:lt,elements:Ie,buffer:De,shader:Lt,attributes:ut.state,vao:ut,uniforms:dt,framebuffer:st,extensions:Se,timer:Pt,isBufferArgs:H},Dn={primTypes:Ae,compareFuncs:Gt,blendFuncs:At,blendEquations:An,stencilOps:Qt,glTypes:le,orientationType:Ve};zr&&(Dn.backBuffer=[1029],Dn.drawBuffer=r(Pe.maxDrawbuffers,function(Ot){return Ot===0?[0]:r(Ot,function(Ht){return 36064+Ht})}));var tr=0;return{next:On,current:qr,procs:function(){var Ot=Zt(),Ht=Ot.proc("poll"),fr=Ot.proc("refresh"),Tr=Ot.block();Ht(Tr),fr(Tr);var Wr,Gr=Ot.shared,wr=Gr.gl,br=Gr.next,Sr=Gr.current;Tr(Sr,".dirty=false;"),qt(Ot,Ht),qt(Ot,fr,null,!0),tn&&(Wr=Ot.link(tn)),Se.oes_vertex_array_object&&fr(Ot.link(Se.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Ir=0;Ir<Pe.maxAttributes;++Ir){var Er=fr.def(Gr.attributes,"[",Ir,"]"),Xr=Ot.cond(Er,".buffer");Xr.then(wr,".enableVertexAttribArray(",Ir,");",wr,".bindBuffer(",34962,",",Er,".buffer.buffer);",wr,".vertexAttribPointer(",Ir,",",Er,".size,",Er,".type,",Er,".normalized,",Er,".stride,",Er,".offset);").else(wr,".disableVertexAttribArray(",Ir,");",wr,".vertexAttrib4f(",Ir,",",Er,".x,",Er,".y,",Er,".z,",Er,".w);",Er,".buffer=null;"),fr(Xr),tn&&fr(Wr,".vertexAttribDivisorANGLE(",Ir,",",Er,".divisor);")}return fr(Ot.shared.vao,".currentVAO=null;",Ot.shared.vao,".setVAO(",Ot.shared.vao,".targetVAO);"),Object.keys(on).forEach(function(fn){var _n=on[fn],en=Tr.def(br,".",fn),yn=Ot.block();yn("if(",en,"){",wr,".enable(",_n,")}else{",wr,".disable(",_n,")}",Sr,".",fn,"=",en,";"),fr(yn),Ht("if(",en,"!==",Sr,".",fn,"){",yn,"}")}),Object.keys(Mn).forEach(function(fn){var _n,en,yn=Mn[fn],Vr=qr[fn],Ur=Ot.block();Ur(wr,".",yn,"("),m(Vr)?(yn=Vr.length,_n=Ot.global.def(br,".",fn),en=Ot.global.def(Sr,".",fn),Ur(r(yn,function(ln){return _n+"["+ln+"]"}),");",r(yn,function(ln){return en+"["+ln+"]="+_n+"["+ln+"];"}).join("")),Ht("if(",r(yn,function(ln){return _n+"["+ln+"]!=="+en+"["+ln+"]"}).join("||"),"){",Ur,"}")):(_n=Tr.def(br,".",fn),en=Tr.def(Sr,".",fn),Ur(_n,");",Sr,".",fn,"=",_n,";"),Ht("if(",_n,"!==",en,"){",Ur,"}")),fr(Ur)}),Ot.compile()}(),compile:function(Ot,Ht,fr,Tr,Wr){var Gr=Zt();Gr.stats=Gr.link(Wr),Object.keys(Ht.static).forEach(function(br){Ln(Gr,Ht,br)}),rt.forEach(function(br){Ln(Gr,Ot,br)});var wr=Vt(Ot,Ht,fr,Tr);return function(br,Sr){var Ir=br.proc("draw",1);gr(br,Ir),rr(br,Ir,Sr.context),qt(br,Ir,Sr.framebuffer),Jt(br,Ir,Sr),or(br,Ir,Sr.state),dr(br,Ir,Sr,!1,!0);var Er=Sr.shader.progVar.append(br,Ir);if(Ir(br.shared.gl,".useProgram(",Er,".program);"),Sr.shader.program)yr(br,Ir,Sr,Sr.shader.program);else{Ir(br.shared.vao,".setVAO(null);");var Xr=br.global.def("{}"),fn=Ir.def(Er,".id"),_n=Ir.def(Xr,"[",fn,"]");Ir(br.cond(_n).then(_n,".call(this,a0);").else(_n,"=",Xr,"[",fn,"]=",br.link(function(en){return Dr(yr,br,Sr,en,1)}),"(",Er,");",_n,".call(this,a0);"))}0<Object.keys(Sr.state).length&&Ir(br.shared.current,".dirty=true;"),br.shared.vao&&Ir(br.shared.vao,".setVAO(null);")}(Gr,wr),an(Gr,wr),function(br,Sr){function Ir(Vr){return Vr.contextDep&&Xr||Vr.propDep}var Er=br.proc("batch",2);br.batchId="0",gr(br,Er);var Xr=!1,fn=!0;Object.keys(Sr.context).forEach(function(Vr){Xr=Xr||Sr.context[Vr].propDep}),Xr||(rr(br,Er,Sr.context),fn=!1);var _n=!1;if((en=Sr.framebuffer)?(en.propDep?Xr=_n=!0:en.contextDep&&Xr&&(_n=!0),_n||qt(br,Er,en)):qt(br,Er,null),Sr.state.viewport&&Sr.state.viewport.propDep&&(Xr=!0),Jt(br,Er,Sr),or(br,Er,Sr.state,function(Vr){return!Ir(Vr)}),Sr.profile&&Ir(Sr.profile)||dr(br,Er,Sr,!1,"a1"),Sr.contextDep=Xr,Sr.needsContext=fn,Sr.needsFramebuffer=_n,(fn=Sr.shader.progVar).contextDep&&Xr||fn.propDep)Kr(br,Er,Sr,null);else if(fn=fn.append(br,Er),Er(br.shared.gl,".useProgram(",fn,".program);"),Sr.shader.program)Kr(br,Er,Sr,Sr.shader.program);else{Er(br.shared.vao,".setVAO(null);");var en=br.global.def("{}"),yn=(_n=Er.def(fn,".id"),Er.def(en,"[",_n,"]"));Er(br.cond(yn).then(yn,".call(this,a0,a1);").else(yn,"=",en,"[",_n,"]=",br.link(function(Vr){return Dr(Kr,br,Sr,Vr,2)}),"(",fn,");",yn,".call(this,a0,a1);"))}0<Object.keys(Sr.state).length&&Er(br.shared.current,".dirty=true;"),br.shared.vao&&Er(br.shared.vao,".setVAO(null);")}(Gr,wr),N(Gr.compile(),{destroy:function(){wr.shader.program.destroy()}})}}}function R(Be,Je){for(var Se=0;Se<Be.length;++Se)if(Be[Se]===Je)return Se;return-1}var N=function(Be,Je){for(var Se=Object.keys(Je),Pe=0;Pe<Se.length;++Pe)Be[Se[Pe]]=Je[Se[Pe]];return Be},U=0,te={DynamicVariable:o,define:function(Be,Je){return new o(Be,p(Je+""))},isDynamic:function(Be){return typeof Be=="function"&&!Be._reglType||Be instanceof o},unbox:function Be(Je,Se){return typeof Je=="function"?new o(0,Je):typeof Je=="number"||typeof Je=="boolean"?new o(5,Je):Array.isArray(Je)?new o(6,Je.map(function(Pe,De){return Be(Pe)})):Je instanceof o?Je:void 0},accessor:p},j={next:typeof requestAnimationFrame=="function"?function(Be){return requestAnimationFrame(Be)}:function(Be){return setTimeout(Be,16)},cancel:typeof cancelAnimationFrame=="function"?function(Be){return cancelAnimationFrame(Be)}:clearTimeout},Y=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date},J=i();J.zero=i();var ee=function(Be,Je){var Se=1;Je.ext_texture_filter_anisotropic&&(Se=Be.getParameter(34047));var Pe=1,De=1;Je.webgl_draw_buffers&&(Pe=Be.getParameter(34852),De=Be.getParameter(36063));var Ie=!!Je.oes_texture_float;if(Ie){Ie=Be.createTexture(),Be.bindTexture(3553,Ie),Be.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var $e=Be.createFramebuffer();if(Be.bindFramebuffer(36160,$e),Be.framebufferTexture2D(36160,36064,3553,Ie,0),Be.bindTexture(3553,null),Be.checkFramebufferStatus(36160)!==36053)Ie=!1;else{Be.viewport(0,0,1,1),Be.clearColor(1,0,0,1),Be.clear(16384);var st=J.allocType(5126,4);Be.readPixels(0,0,1,1,6408,5126,st),Be.getError()?Ie=!1:(Be.deleteFramebuffer($e),Be.deleteTexture(Ie),Ie=st[0]===1),J.freeType(st)}}return st=!0,typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(st=Be.createTexture(),$e=J.allocType(5121,36),Be.activeTexture(33984),Be.bindTexture(34067,st),Be.texImage2D(34069,0,6408,3,3,0,6408,5121,$e),J.freeType($e),Be.bindTexture(34067,null),Be.deleteTexture(st),st=!Be.getError()),{colorBits:[Be.getParameter(3410),Be.getParameter(3411),Be.getParameter(3412),Be.getParameter(3413)],depthBits:Be.getParameter(3414),stencilBits:Be.getParameter(3415),subpixelBits:Be.getParameter(3408),extensions:Object.keys(Je).filter(function(dt){return!!Je[dt]}),maxAnisotropic:Se,maxDrawbuffers:Pe,maxColorAttachments:De,pointSizeDims:Be.getParameter(33901),lineWidthDims:Be.getParameter(33902),maxViewportDims:Be.getParameter(3386),maxCombinedTextureUnits:Be.getParameter(35661),maxCubeMapSize:Be.getParameter(34076),maxRenderbufferSize:Be.getParameter(34024),maxTextureUnits:Be.getParameter(34930),maxTextureSize:Be.getParameter(3379),maxAttributes:Be.getParameter(34921),maxVertexUniforms:Be.getParameter(36347),maxVertexTextureUnits:Be.getParameter(35660),maxVaryingVectors:Be.getParameter(36348),maxFragmentUniforms:Be.getParameter(36349),glsl:Be.getParameter(35724),renderer:Be.getParameter(7937),vendor:Be.getParameter(7936),version:Be.getParameter(7938),readFloat:Ie,npotTextureCube:st}},ne=function(Be){return Be instanceof Uint8Array||Be instanceof Uint16Array||Be instanceof Uint32Array||Be instanceof Int8Array||Be instanceof Int16Array||Be instanceof Int32Array||Be instanceof Float32Array||Be instanceof Float64Array||Be instanceof Uint8ClampedArray},se=function(Be){return Object.keys(Be).map(function(Je){return Be[Je]})},oe={shape:function(Be){for(var Je=[];Be.length;Be=Be[0])Je.push(Be.length);return Je},flatten:function(Be,Je,Se,Pe){var De=1;if(Je.length)for(var Ie=0;Ie<Je.length;++Ie)De*=Je[Ie];else De=0;switch(Se=Pe||J.allocType(Se,De),Je.length){case 0:break;case 1:for(Pe=Je[0],Je=0;Je<Pe;++Je)Se[Je]=Be[Je];break;case 2:for(Pe=Je[0],Je=Je[1],Ie=De=0;Ie<Pe;++Ie)for(var $e=Be[Ie],st=0;st<Je;++st)Se[De++]=$e[st];break;case 3:h(Be,Je[0],Je[1],Je[2],Se,0);break;default:(function dt(ut,Lt,lt,Ct,Pt){for(var Ke=1,mt=lt+1;mt<Lt.length;++mt)Ke*=Lt[mt];var Dt=Lt[lt];if(Lt.length-lt==4){var Bt=Lt[lt+1],Zt=Lt[lt+2];for(Lt=Lt[lt+3],mt=0;mt<Dt;++mt)h(ut[mt],Bt,Zt,Lt,Ct,Pt),Pt+=Ke}else for(mt=0;mt<Dt;++mt)dt(ut[mt],Lt,lt+1,Ct,Pt),Pt+=Ke})(Be,Je,0,Se,0)}return Se}},he={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},le={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},de={dynamic:35048,stream:35040,static:35044},xe=oe.flatten,we=oe.shape,be=[];be[5120]=1,be[5122]=2,be[5124]=4,be[5121]=1,be[5123]=2,be[5125]=4,be[5126]=4;var Ae={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},fe=new Float32Array(1),me=new Uint32Array(fe.buffer),ke=[9984,9986,9985,9987],Te=[0,6409,6410,6407,6408],Me={};Me[6409]=Me[6406]=Me[6402]=1,Me[34041]=Me[6410]=2,Me[6407]=Me[35904]=3,Me[6408]=Me[35906]=4;var Oe=c("HTMLCanvasElement"),Fe=c("OffscreenCanvas"),qe=c("CanvasRenderingContext2D"),et=c("ImageBitmap"),ze=c("HTMLImageElement"),Ue=c("HTMLVideoElement"),We=Object.keys(he).concat([Oe,Fe,qe,et,ze,Ue]),Ze=[];Ze[5121]=1,Ze[5126]=4,Ze[36193]=2,Ze[5123]=2,Ze[5125]=4;var nt=[];nt[32854]=2,nt[32855]=2,nt[36194]=2,nt[34041]=4,nt[33776]=.5,nt[33777]=.5,nt[33778]=1,nt[33779]=1,nt[35986]=.5,nt[35987]=1,nt[34798]=1,nt[35840]=.5,nt[35841]=.25,nt[35842]=.5,nt[35843]=.25,nt[36196]=.5;var ft=[];ft[32854]=2,ft[32855]=2,ft[36194]=2,ft[33189]=2,ft[36168]=1,ft[34041]=4,ft[35907]=4,ft[34836]=16,ft[34842]=8,ft[34843]=6;var xt=function(Be,Je,Se,Pe,De){function Ie(lt){this.id=ut++,this.refCount=1,this.renderbuffer=lt,this.format=32854,this.height=this.width=0,De.profile&&(this.stats={size:0})}function $e(lt){var Ct=lt.renderbuffer;Be.bindRenderbuffer(36161,null),Be.deleteRenderbuffer(Ct),lt.renderbuffer=null,lt.refCount=0,delete Lt[lt.id],Pe.renderbufferCount--}var st={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Je.ext_srgb&&(st.srgba=35907),Je.ext_color_buffer_half_float&&(st.rgba16f=34842,st.rgb16f=34843),Je.webgl_color_buffer_float&&(st.rgba32f=34836);var dt=[];Object.keys(st).forEach(function(lt){dt[st[lt]]=lt});var ut=0,Lt={};return Ie.prototype.decRef=function(){0>=--this.refCount&&$e(this)},De.profile&&(Pe.getTotalRenderbufferSize=function(){var lt=0;return Object.keys(Lt).forEach(function(Ct){lt+=Lt[Ct].stats.size}),lt}),{create:function(lt,Ct){function Pt(mt,Dt){var Bt=0,Zt=0,Re=32854;if(typeof mt=="object"&&mt?("shape"in mt?(Bt=0|(Zt=mt.shape)[0],Zt=0|Zt[1]):("radius"in mt&&(Bt=Zt=0|mt.radius),"width"in mt&&(Bt=0|mt.width),"height"in mt&&(Zt=0|mt.height)),"format"in mt&&(Re=st[mt.format])):typeof mt=="number"?(Bt=0|mt,Zt=typeof Dt=="number"?0|Dt:Bt):mt||(Bt=Zt=1),Bt!==Ke.width||Zt!==Ke.height||Re!==Ke.format)return Pt.width=Ke.width=Bt,Pt.height=Ke.height=Zt,Ke.format=Re,Be.bindRenderbuffer(36161,Ke.renderbuffer),Be.renderbufferStorage(36161,Re,Bt,Zt),De.profile&&(Ke.stats.size=ft[Ke.format]*Ke.width*Ke.height),Pt.format=dt[Ke.format],Pt}var Ke=new Ie(Be.createRenderbuffer());return Lt[Ke.id]=Ke,Pe.renderbufferCount++,Pt(lt,Ct),Pt.resize=function(mt,Dt){var Bt=0|mt,Zt=0|Dt||Bt;return Bt===Ke.width&&Zt===Ke.height||(Pt.width=Ke.width=Bt,Pt.height=Ke.height=Zt,Be.bindRenderbuffer(36161,Ke.renderbuffer),Be.renderbufferStorage(36161,Ke.format,Bt,Zt),De.profile&&(Ke.stats.size=ft[Ke.format]*Ke.width*Ke.height)),Pt},Pt._reglType="renderbuffer",Pt._renderbuffer=Ke,De.profile&&(Pt.stats=Ke.stats),Pt.destroy=function(){Ke.decRef()},Pt},clear:function(){se(Lt).forEach($e)},restore:function(){se(Lt).forEach(function(lt){lt.renderbuffer=Be.createRenderbuffer(),Be.bindRenderbuffer(36161,lt.renderbuffer),Be.renderbufferStorage(36161,lt.format,lt.width,lt.height)}),Be.bindRenderbuffer(36161,null)}}},It=[];It[6408]=4,It[6407]=3;var Et=[];Et[5121]=1,Et[5126]=4,Et[36193]=2;var it=["x","y","z","w"],rt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),At={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Gt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Qt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ve={cw:2304,ccw:2305},Ye=new Q(!1,!1,!1,function(){});return function(Be){function Je(){if(Br.length===0)Re&&Re.update(),Pn=null;else{Pn=j.next(Je),Lt();for(var tn=Br.length-1;0<=tn;--tn){var zr=Br[tn];zr&&zr(Vt,null,0)}Pt.flush(),Re&&Re.update()}}function Se(){!Pn&&0<Br.length&&(Pn=j.next(Je))}function Pe(){Pn&&(j.cancel(Je),Pn=null)}function De(tn){tn.preventDefault(),Pe(),Kr.forEach(function(zr){zr()})}function Ie(tn){Pt.getError(),mt.restore(),gr.restore(),qt.restore(),dr.restore(),ur.restore(),cr.restore(),or.restore(),Re&&Re.restore(),mr.procs.refresh(),Se(),an.forEach(function(zr){zr()})}function $e(tn){function zr(Ot,Ht){var fr={},Tr={};return Object.keys(Ot).forEach(function(Wr){var Gr=Ot[Wr];if(te.isDynamic(Gr))Tr[Wr]=te.unbox(Gr,Wr);else{if(Ht&&Array.isArray(Gr)){for(var wr=0;wr<Gr.length;++wr)if(te.isDynamic(Gr[wr]))return void(Tr[Wr]=te.unbox(Gr,Wr))}fr[Wr]=Gr}}),{dynamic:Tr,static:fr}}var Ar=zr(tn.context||{},!0),qr=zr(tn.uniforms||{},!0),On=zr(tn.attributes||{},!1);tn=zr(function(Ot){function Ht(Tr){if(Tr in fr){var Wr=fr[Tr];delete fr[Tr],Object.keys(Wr).forEach(function(Gr){fr[Tr+"."+Gr]=Wr[Gr]})}}var fr=N({},Ot);return delete fr.uniforms,delete fr.attributes,delete fr.context,delete fr.vao,"stencil"in fr&&fr.stencil.op&&(fr.stencil.opBack=fr.stencil.opFront=fr.stencil.op,delete fr.stencil.op),Ht("blend"),Ht("depth"),Ht("cull"),Ht("stencil"),Ht("polygonOffset"),Ht("scissor"),Ht("sample"),"vao"in Ot&&(fr.vao=Ot.vao),fr}(tn),!1);var Fr={gpuTime:0,cpuTime:0,count:0},on=mr.compile(tn,On,qr,Ar,Fr),Mn=on.draw,bn=on.batch,Dn=on.scope,tr=[];return N(function(Ot,Ht){var fr;if(typeof Ot=="function")return Dn.call(this,null,Ot,0);if(typeof Ht=="function")if(typeof Ot=="number")for(fr=0;fr<Ot;++fr)Dn.call(this,null,Ht,fr);else{if(!Array.isArray(Ot))return Dn.call(this,Ot,Ht,0);for(fr=0;fr<Ot.length;++fr)Dn.call(this,Ot[fr],Ht,fr)}else if(typeof Ot=="number"){if(0<Ot)return bn.call(this,function(Tr){for(;tr.length<Tr;)tr.push(null);return tr}(0|Ot),0|Ot)}else{if(!Array.isArray(Ot))return Mn.call(this,Ot);if(Ot.length)return bn.call(this,Ot,Ot.length)}},{stats:Fr,destroy:function(){on.destroy()}})}function st(tn,zr){var Ar=0;mr.procs.poll();var qr=zr.color;qr&&(Pt.clearColor(+qr[0]||0,+qr[1]||0,+qr[2]||0,+qr[3]||0),Ar|=16384),"depth"in zr&&(Pt.clearDepth(+zr.depth),Ar|=256),"stencil"in zr&&(Pt.clearStencil(0|zr.stencil),Ar|=1024),Pt.clear(Ar)}function dt(tn){return Br.push(tn),Se(),{cancel:function(){var zr=R(Br,tn);Br[zr]=function Ar(){var qr=R(Br,Ar);Br[qr]=Br[Br.length-1],--Br.length,0>=Br.length&&Pe()}}}}function ut(){var tn=Dr.viewport,zr=Dr.scissor_box;tn[0]=tn[1]=zr[0]=zr[1]=0,Vt.viewportWidth=Vt.framebufferWidth=Vt.drawingBufferWidth=tn[2]=zr[2]=Pt.drawingBufferWidth,Vt.viewportHeight=Vt.framebufferHeight=Vt.drawingBufferHeight=tn[3]=zr[3]=Pt.drawingBufferHeight}function Lt(){Vt.tick+=1,Vt.time=Ct(),ut(),mr.procs.poll()}function lt(){dr.refresh(),ut(),mr.procs.refresh(),Re&&Re.update()}function Ct(){return(Y()-ct)/1e3}if(!(Be=e(Be)))return null;var Pt=Be.gl,Ke=Pt.getContextAttributes();Pt.isContextLost();var mt=function(tn,zr){function Ar(on){var Mn;on=on.toLowerCase();try{Mn=qr[on]=tn.getExtension(on)}catch{}return!!Mn}for(var qr={},On=0;On<zr.extensions.length;++On){var Fr=zr.extensions[On];if(!Ar(Fr))return zr.onDestroy(),zr.onDone('"'+Fr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return zr.optionalExtensions.forEach(Ar),{extensions:qr,restore:function(){Object.keys(qr).forEach(function(on){if(qr[on]&&!Ar(on))throw Error("(regl): error restoring extension "+on)})}}}(Pt,Be);if(!mt)return null;var Dt=function(){var tn={"":0},zr=[""];return{id:function(Ar){var qr=tn[Ar];return qr||(qr=tn[Ar]=zr.length,zr.push(Ar),qr)},str:function(Ar){return zr[Ar]}}}(),Bt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Zt=mt.extensions,Re=function(tn,zr){function Ar(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function qr(tr,Ot,Ht){var fr=on.pop()||new Ar;fr.startQueryIndex=tr,fr.endQueryIndex=Ot,fr.sum=0,fr.stats=Ht,Mn.push(fr)}if(!zr.ext_disjoint_timer_query)return null;var On=[],Fr=[],on=[],Mn=[],bn=[],Dn=[];return{beginQuery:function(tr){var Ot=On.pop()||zr.ext_disjoint_timer_query.createQueryEXT();zr.ext_disjoint_timer_query.beginQueryEXT(35007,Ot),Fr.push(Ot),qr(Fr.length-1,Fr.length,tr)},endQuery:function(){zr.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:qr,update:function(){var tr,Ot;if((tr=Fr.length)!==0){Dn.length=Math.max(Dn.length,tr+1),bn.length=Math.max(bn.length,tr+1),bn[0]=0;var Ht=Dn[0]=0;for(Ot=tr=0;Ot<Fr.length;++Ot){var fr=Fr[Ot];zr.ext_disjoint_timer_query.getQueryObjectEXT(fr,34919)?(Ht+=zr.ext_disjoint_timer_query.getQueryObjectEXT(fr,34918),On.push(fr)):Fr[tr++]=fr,bn[Ot+1]=Ht,Dn[Ot+1]=tr}for(Fr.length=tr,Ot=tr=0;Ot<Mn.length;++Ot){var Tr=(Ht=Mn[Ot]).startQueryIndex;fr=Ht.endQueryIndex,Ht.sum+=bn[fr]-bn[Tr],Tr=Dn[Tr],(fr=Dn[fr])===Tr?(Ht.stats.gpuTime+=Ht.sum/1e6,on.push(Ht)):(Ht.startQueryIndex=Tr,Ht.endQueryIndex=fr,Mn[tr++]=Ht)}Mn.length=tr}},getNumPendingQueries:function(){return Fr.length},clear:function(){On.push.apply(On,Fr);for(var tr=0;tr<On.length;tr++)zr.ext_disjoint_timer_query.deleteQueryEXT(On[tr]);Fr.length=0,On.length=0},restore:function(){Fr.length=0,On.length=0}}}(0,Zt),ct=Y(),wt=Pt.drawingBufferWidth,Rt=Pt.drawingBufferHeight,Vt={tick:0,time:0,viewportWidth:wt,viewportHeight:Rt,framebufferWidth:wt,framebufferHeight:Rt,drawingBufferWidth:wt,drawingBufferHeight:Rt,pixelRatio:Be.pixelRatio},rr=(wt={elements:null,primitive:4,count:-1,offset:0,instances:-1},ee(Pt,Zt)),qt=f(Pt,Bt,Be,function(tn){return or.destroyBuffer(tn)}),Jt=d(Pt,Zt,qt,Bt),or=P(Pt,Zt,rr,Bt,qt,Jt,wt),gr=S(Pt,Dt,Bt,Be),dr=L(Pt,Zt,rr,function(){mr.procs.poll()},Vt,Bt,Be),ur=xt(Pt,Zt,0,Bt,Be),cr=M(Pt,Zt,rr,dr,ur,Bt),mr=re(Pt,Dt,Zt,rr,qt,Jt,0,cr,{},or,gr,wt,Vt,Re,Be),Dr=(Dt=E(Pt,cr,mr.procs.poll,Vt),mr.next),yr=Pt.canvas,Br=[],Kr=[],an=[],Ln=[Be.onDestroy],Pn=null;yr&&(yr.addEventListener("webglcontextlost",De,!1),yr.addEventListener("webglcontextrestored",Ie,!1));var An=cr.setFBO=$e({framebuffer:te.define.call(null,1,"framebuffer")});return lt(),Ke=N($e,{clear:function(tn){if("framebuffer"in tn)if(tn.framebuffer&&tn.framebuffer_reglType==="framebufferCube")for(var zr=0;6>zr;++zr)An(N({framebuffer:tn.framebuffer.faces[zr]},tn),st);else An(tn,st);else st(0,tn)},prop:te.define.bind(null,1),context:te.define.bind(null,2),this:te.define.bind(null,3),draw:$e({}),buffer:function(tn){return qt.create(tn,34962,!1,!1)},elements:function(tn){return Jt.create(tn,!1)},texture:dr.create2D,cube:dr.createCube,renderbuffer:ur.create,framebuffer:cr.create,framebufferCube:cr.createCube,vao:or.createVAO,attributes:Ke,frame:dt,on:function(tn,zr){var Ar;switch(tn){case"frame":return dt(zr);case"lost":Ar=Kr;break;case"restore":Ar=an;break;case"destroy":Ar=Ln}return Ar.push(zr),{cancel:function(){for(var qr=0;qr<Ar.length;++qr)if(Ar[qr]===zr){Ar[qr]=Ar[Ar.length-1],Ar.pop();break}}}},limits:rr,hasExtension:function(tn){return 0<=rr.extensions.indexOf(tn.toLowerCase())},read:Dt,destroy:function(){Br.length=0,Pe(),yr&&(yr.removeEventListener("webglcontextlost",De),yr.removeEventListener("webglcontextrestored",Ie)),gr.clear(),cr.clear(),ur.clear(),or.clear(),dr.clear(),Jt.clear(),qt.clear(),Re&&Re.clear(),Ln.forEach(function(tn){tn()})},_gl:Pt,_refresh:lt,poll:function(){Lt(),Re&&Re.update()},now:Ct,stats:Bt}),Be.onDone(null,Ke),Ke}})},{}],284:[function(u,q,W){var o=u("buffer"),p=o.Buffer;function x(e,r){for(var t in e)r[t]=e[t]}function y(e,r,t){return p(e,r,t)}p.from&&p.alloc&&p.allocUnsafe&&p.allocUnsafeSlow?q.exports=o:(x(o,W),W.Buffer=y),y.prototype=Object.create(p.prototype),x(p,y),y.from=function(e,r,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return p(e,r,t)},y.alloc=function(e,r,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var i=p(e);return r!==void 0?typeof t=="string"?i.fill(r,t):i.fill(r):i.fill(0),i},y.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return p(e)},y.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},{buffer:85}],285:[function(u,q,W){q.exports=p;var o=u("events").EventEmitter;function p(){o.call(this)}u("inherits")(p,o),p.Readable=u("readable-stream/lib/_stream_readable.js"),p.Writable=u("readable-stream/lib/_stream_writable.js"),p.Duplex=u("readable-stream/lib/_stream_duplex.js"),p.Transform=u("readable-stream/lib/_stream_transform.js"),p.PassThrough=u("readable-stream/lib/_stream_passthrough.js"),p.finished=u("readable-stream/lib/internal/streams/end-of-stream.js"),p.pipeline=u("readable-stream/lib/internal/streams/pipeline.js"),p.Stream=p,p.prototype.pipe=function(x,y){var e=this;function r(l){x.writable&&x.write(l)===!1&&e.pause&&e.pause()}function t(){e.readable&&e.resume&&e.resume()}e.on("data",r),x.on("drain",t),x._isStdio||y&&y.end===!1||(e.on("end",n),e.on("close",h));var i=!1;function n(){i||(i=!0,x.end())}function h(){i||(i=!0,typeof x.destroy=="function"&&x.destroy())}function s(l){if(a(),o.listenerCount(this,"error")===0)throw l}function a(){e.removeListener("data",r),x.removeListener("drain",t),e.removeListener("end",n),e.removeListener("close",h),e.removeListener("error",s),x.removeListener("error",s),e.removeListener("end",a),e.removeListener("close",a),x.removeListener("close",a)}return e.on("error",s),x.on("error",s),e.on("end",a),e.on("close",a),x.on("close",a),x.emit("pipe",e),x}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":287,"readable-stream/lib/_stream_passthrough.js":288,"readable-stream/lib/_stream_readable.js":289,"readable-stream/lib/_stream_transform.js":290,"readable-stream/lib/_stream_writable.js":291,"readable-stream/lib/internal/streams/end-of-stream.js":295,"readable-stream/lib/internal/streams/pipeline.js":297}],286:[function(u,q,W){var o={};function p(y,e,r){r||(r=Error);var t=function(i){var n,h;function s(a,l,f){return i.call(this,function(d,v,m){return typeof e=="string"?e:e(d,v,m)}(a,l,f))||this}return h=i,(n=s).prototype=Object.create(h.prototype),n.prototype.constructor=n,n.__proto__=h,s}(r);t.prototype.name=r.name,t.prototype.code=y,o[y]=t}function x(y,e){if(Array.isArray(y)){var r=y.length;return y=y.map(function(t){return String(t)}),r>2?"one of ".concat(e," ").concat(y.slice(0,r-1).join(", "),", or ")+y[r-1]:r===2?"one of ".concat(e," ").concat(y[0]," or ").concat(y[1]):"of ".concat(e," ").concat(y[0])}return"of ".concat(e," ").concat(String(y))}p("ERR_INVALID_OPT_VALUE",function(y,e){return'The value "'+e+'" is invalid for option "'+y+'"'},TypeError),p("ERR_INVALID_ARG_TYPE",function(y,e,r){var t,i,n;if(typeof e=="string"&&(i="not ",e.substr(0,i.length)===i)?(t="must not be",e=e.replace(/^not /,"")):t="must be",function(s,a,l){return(l===void 0||l>s.length)&&(l=s.length),s.substring(l-a.length,l)===a}(y," argument"))n="The ".concat(y," ").concat(t," ").concat(x(e,"type"));else{var h=function(s,a,l){return typeof l!="number"&&(l=0),!(l+a.length>s.length)&&s.indexOf(a,l)!==-1}(y,".")?"property":"argument";n='The "'.concat(y,'" ').concat(h," ").concat(t," ").concat(x(e,"type"))}return n+=". Received type ".concat(typeof r)},TypeError),p("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),p("ERR_METHOD_NOT_IMPLEMENTED",function(y){return"The "+y+" method is not implemented"}),p("ERR_STREAM_PREMATURE_CLOSE","Premature close"),p("ERR_STREAM_DESTROYED",function(y){return"Cannot call "+y+" after a stream was destroyed"}),p("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),p("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),p("ERR_STREAM_WRITE_AFTER_END","write after end"),p("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),p("ERR_UNKNOWN_ENCODING",function(y){return"Unknown encoding: "+y},TypeError),p("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),q.exports.codes=o},{}],287:[function(u,q,W){(function(o){(function(){var p=Object.keys||function(s){var a=[];for(var l in s)a.push(l);return a};q.exports=i;var x=u("./_stream_readable"),y=u("./_stream_writable");u("inherits")(i,x);for(var e=p(y.prototype),r=0;r<e.length;r++){var t=e[r];i.prototype[t]||(i.prototype[t]=y.prototype[t])}function i(s){if(!(this instanceof i))return new i(s);x.call(this,s),y.call(this,s),this.allowHalfOpen=!0,s&&(s.readable===!1&&(this.readable=!1),s.writable===!1&&(this.writable=!1),s.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",n)))}function n(){this._writableState.ended||o.nextTick(h,this)}function h(s){s.end()}Object.defineProperty(i.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(i.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(i.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(i.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(s){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=s,this._writableState.destroyed=s)}})}).call(this)}).call(this,u("_process"))},{"./_stream_readable":289,"./_stream_writable":291,_process:277,inherits:231}],288:[function(u,q,W){q.exports=p;var o=u("./_stream_transform");function p(x){if(!(this instanceof p))return new p(x);o.call(this,x)}u("inherits")(p,o),p.prototype._transform=function(x,y,e){e(null,x)}},{"./_stream_transform":290,inherits:231}],289:[function(u,q,W){(function(o,p){(function(){var x;q.exports=k,k.ReadableState=T,u("events").EventEmitter;var y=function(R,N){return R.listeners(N).length},e=u("./internal/streams/stream"),r=u("buffer").Buffer,t=p.Uint8Array||function(){},i,n=u("util");i=n&&n.debuglog?n.debuglog("stream"):function(){};var h,s,a,l=u("./internal/streams/buffer_list"),f=u("./internal/streams/destroy"),d=u("./internal/streams/state").getHighWaterMark,v=u("../errors").codes,m=v.ERR_INVALID_ARG_TYPE,c=v.ERR_STREAM_PUSH_AFTER_EOF,b=v.ERR_METHOD_NOT_IMPLEMENTED,g=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;u("inherits")(k,e);var w=f.errorOrDestroy,_=["error","close","destroy","pause","resume"];function T(R,N,U){x=x||u("./_stream_duplex"),R=R||{},typeof U!="boolean"&&(U=N instanceof x),this.objectMode=!!R.objectMode,U&&(this.objectMode=this.objectMode||!!R.readableObjectMode),this.highWaterMark=d(this,R,"readableHighWaterMark",U),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=R.emitClose!==!1,this.autoDestroy=!!R.autoDestroy,this.destroyed=!1,this.defaultEncoding=R.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,R.encoding&&(h||(h=u("string_decoder/").StringDecoder),this.decoder=new h(R.encoding),this.encoding=R.encoding)}function k(R){if(x=x||u("./_stream_duplex"),!(this instanceof k))return new k(R);var N=this instanceof x;this._readableState=new T(R,this,N),this.readable=!0,R&&(typeof R.read=="function"&&(this._read=R.read),typeof R.destroy=="function"&&(this._destroy=R.destroy)),e.call(this)}function L(R,N,U,te,j){i("readableAddChunk",N);var Y,J=R._readableState;if(N===null)J.reading=!1,function(ee,ne){if(i("onEofChunk"),!ne.ended){if(ne.decoder){var se=ne.decoder.end();se&&se.length&&(ne.buffer.push(se),ne.length+=ne.objectMode?1:se.length)}ne.ended=!0,ne.sync?P(ee):(ne.needReadable=!1,ne.emittedReadable||(ne.emittedReadable=!0,S(ee)))}}(R,J);else if(j||(Y=function(ee,ne){var se;oe=ne,r.isBuffer(oe)||oe instanceof t||typeof ne=="string"||ne===void 0||ee.objectMode||(se=new m("chunk",["string","Buffer","Uint8Array"],ne));var oe;return se}(J,N)),Y)w(R,Y);else if(J.objectMode||N&&N.length>0)if(typeof N=="string"||J.objectMode||Object.getPrototypeOf(N)===r.prototype||(N=function(ee){return r.from(ee)}(N)),te)J.endEmitted?w(R,new g):M(R,J,N,!0);else if(J.ended)w(R,new c);else{if(J.destroyed)return!1;J.reading=!1,J.decoder&&!U?(N=J.decoder.write(N),J.objectMode||N.length!==0?M(R,J,N,!1):E(R,J)):M(R,J,N,!1)}else te||(J.reading=!1,E(R,J));return!J.ended&&(J.length<J.highWaterMark||J.length===0)}function M(R,N,U,te){N.flowing&&N.length===0&&!N.sync?(N.awaitDrain=0,R.emit("data",U)):(N.length+=N.objectMode?1:U.length,te?N.buffer.unshift(U):N.buffer.push(U),N.needReadable&&P(R)),E(R,N)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(R){this._readableState&&(this._readableState.destroyed=R)}}),k.prototype.destroy=f.destroy,k.prototype._undestroy=f.undestroy,k.prototype._destroy=function(R,N){N(R)},k.prototype.push=function(R,N){var U,te=this._readableState;return te.objectMode?U=!0:typeof R=="string"&&((N=N||te.defaultEncoding)!==te.encoding&&(R=r.from(R,N),N=""),U=!0),L(this,R,N,!1,U)},k.prototype.unshift=function(R){return L(this,R,null,!0,!1)},k.prototype.isPaused=function(){return this._readableState.flowing===!1},k.prototype.setEncoding=function(R){h||(h=u("string_decoder/").StringDecoder);var N=new h(R);this._readableState.decoder=N,this._readableState.encoding=this._readableState.decoder.encoding;for(var U=this._readableState.buffer.head,te="";U!==null;)te+=N.write(U.data),U=U.next;return this._readableState.buffer.clear(),te!==""&&this._readableState.buffer.push(te),this._readableState.length=te.length,this};function I(R,N){return R<=0||N.length===0&&N.ended?0:N.objectMode?1:R!=R?N.flowing&&N.length?N.buffer.head.data.length:N.length:(R>N.highWaterMark&&(N.highWaterMark=function(U){return U>=1073741824?U=1073741824:(U--,U|=U>>>1,U|=U>>>2,U|=U>>>4,U|=U>>>8,U|=U>>>16,U++),U}(R)),R<=N.length?R:N.ended?N.length:(N.needReadable=!0,0))}function P(R){var N=R._readableState;i("emitReadable",N.needReadable,N.emittedReadable),N.needReadable=!1,N.emittedReadable||(i("emitReadable",N.flowing),N.emittedReadable=!0,o.nextTick(S,R))}function S(R){var N=R._readableState;i("emitReadable_",N.destroyed,N.length,N.ended),N.destroyed||!N.length&&!N.ended||(R.emit("readable"),N.emittedReadable=!1),N.needReadable=!N.flowing&&!N.ended&&N.length<=N.highWaterMark,Q(R)}function E(R,N){N.readingMore||(N.readingMore=!0,o.nextTick(D,R,N))}function D(R,N){for(;!N.reading&&!N.ended&&(N.length<N.highWaterMark||N.flowing&&N.length===0);){var U=N.length;if(i("maybeReadMore read 0"),R.read(0),U===N.length)break}N.readingMore=!1}function F(R){var N=R._readableState;N.readableListening=R.listenerCount("readable")>0,N.resumeScheduled&&!N.paused?N.flowing=!0:R.listenerCount("data")>0&&R.resume()}function H(R){i("readable nexttick read 0"),R.read(0)}function V(R,N){i("resume",N.reading),N.reading||R.read(0),N.resumeScheduled=!1,R.emit("resume"),Q(R),N.flowing&&!N.reading&&R.read(0)}function Q(R){var N=R._readableState;for(i("flow",N.flowing);N.flowing&&R.read()!==null;);}function K(R,N){return N.length===0?null:(N.objectMode?U=N.buffer.shift():!R||R>=N.length?(U=N.decoder?N.buffer.join(""):N.buffer.length===1?N.buffer.first():N.buffer.concat(N.length),N.buffer.clear()):U=N.buffer.consume(R,N.decoder),U);var U}function Z(R){var N=R._readableState;i("endReadable",N.endEmitted),N.endEmitted||(N.ended=!0,o.nextTick($,N,R))}function $(R,N){if(i("endReadableNT",R.endEmitted,R.length),!R.endEmitted&&R.length===0&&(R.endEmitted=!0,N.readable=!1,N.emit("end"),R.autoDestroy)){var U=N._writableState;(!U||U.autoDestroy&&U.finished)&&N.destroy()}}function re(R,N){for(var U=0,te=R.length;U<te;U++)if(R[U]===N)return U;return-1}k.prototype.read=function(R){i("read",R),R=parseInt(R,10);var N=this._readableState,U=R;if(R!==0&&(N.emittedReadable=!1),R===0&&N.needReadable&&((N.highWaterMark!==0?N.length>=N.highWaterMark:N.length>0)||N.ended))return i("read: emitReadable",N.length,N.ended),N.length===0&&N.ended?Z(this):P(this),null;if((R=I(R,N))===0&&N.ended)return N.length===0&&Z(this),null;var te,j=N.needReadable;return i("need readable",j),(N.length===0||N.length-R<N.highWaterMark)&&i("length less than watermark",j=!0),N.ended||N.reading?i("reading or ended",j=!1):j&&(i("do read"),N.reading=!0,N.sync=!0,N.length===0&&(N.needReadable=!0),this._read(N.highWaterMark),N.sync=!1,N.reading||(R=I(U,N))),(te=R>0?K(R,N):null)===null?(N.needReadable=N.length<=N.highWaterMark,R=0):(N.length-=R,N.awaitDrain=0),N.length===0&&(N.ended||(N.needReadable=!0),U!==R&&N.ended&&Z(this)),te!==null&&this.emit("data",te),te},k.prototype._read=function(R){w(this,new b("_read()"))},k.prototype.pipe=function(R,N){var U=this,te=this._readableState;switch(te.pipesCount){case 0:te.pipes=R;break;case 1:te.pipes=[te.pipes,R];break;default:te.pipes.push(R)}te.pipesCount+=1,i("pipe count=%d opts=%j",te.pipesCount,N);var j=(!N||N.end!==!1)&&R!==o.stdout&&R!==o.stderr?J:de;function Y(xe,we){i("onunpipe"),xe===U&&we&&we.hasUnpiped===!1&&(we.hasUnpiped=!0,i("cleanup"),R.removeListener("close",he),R.removeListener("finish",le),R.removeListener("drain",ee),R.removeListener("error",oe),R.removeListener("unpipe",Y),U.removeListener("end",J),U.removeListener("end",de),U.removeListener("data",se),ne=!0,!te.awaitDrain||R._writableState&&!R._writableState.needDrain||ee())}function J(){i("onend"),R.end()}te.endEmitted?o.nextTick(j):U.once("end",j),R.on("unpipe",Y);var ee=function(xe){return function(){var we=xe._readableState;i("pipeOnDrain",we.awaitDrain),we.awaitDrain&&we.awaitDrain--,we.awaitDrain===0&&y(xe,"data")&&(we.flowing=!0,Q(xe))}}(U);R.on("drain",ee);var ne=!1;function se(xe){i("ondata");var we=R.write(xe);i("dest.write",we),we===!1&&((te.pipesCount===1&&te.pipes===R||te.pipesCount>1&&re(te.pipes,R)!==-1)&&!ne&&(i("false write response, pause",te.awaitDrain),te.awaitDrain++),U.pause())}function oe(xe){i("onerror",xe),de(),R.removeListener("error",oe),y(R,"error")===0&&w(R,xe)}function he(){R.removeListener("finish",le),de()}function le(){i("onfinish"),R.removeListener("close",he),de()}function de(){i("unpipe"),U.unpipe(R)}return U.on("data",se),function(xe,we,be){if(typeof xe.prependListener=="function")return xe.prependListener(we,be);xe._events&&xe._events[we]?Array.isArray(xe._events[we])?xe._events[we].unshift(be):xe._events[we]=[be,xe._events[we]]:xe.on(we,be)}(R,"error",oe),R.once("close",he),R.once("finish",le),R.emit("pipe",U),te.flowing||(i("pipe resume"),U.resume()),R},k.prototype.unpipe=function(R){var N=this._readableState,U={hasUnpiped:!1};if(N.pipesCount===0)return this;if(N.pipesCount===1)return R&&R!==N.pipes||(R||(R=N.pipes),N.pipes=null,N.pipesCount=0,N.flowing=!1,R&&R.emit("unpipe",this,U)),this;if(!R){var te=N.pipes,j=N.pipesCount;N.pipes=null,N.pipesCount=0,N.flowing=!1;for(var Y=0;Y<j;Y++)te[Y].emit("unpipe",this,{hasUnpiped:!1});return this}var J=re(N.pipes,R);return J===-1||(N.pipes.splice(J,1),N.pipesCount-=1,N.pipesCount===1&&(N.pipes=N.pipes[0]),R.emit("unpipe",this,U)),this},k.prototype.on=function(R,N){var U=e.prototype.on.call(this,R,N),te=this._readableState;return R==="data"?(te.readableListening=this.listenerCount("readable")>0,te.flowing!==!1&&this.resume()):R==="readable"&&(te.endEmitted||te.readableListening||(te.readableListening=te.needReadable=!0,te.flowing=!1,te.emittedReadable=!1,i("on readable",te.length,te.reading),te.length?P(this):te.reading||o.nextTick(H,this))),U},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(R,N){var U=e.prototype.removeListener.call(this,R,N);return R==="readable"&&o.nextTick(F,this),U},k.prototype.removeAllListeners=function(R){var N=e.prototype.removeAllListeners.apply(this,arguments);return R!=="readable"&&R!==void 0||o.nextTick(F,this),N},k.prototype.resume=function(){var R=this._readableState;return R.flowing||(i("resume"),R.flowing=!R.readableListening,function(N,U){U.resumeScheduled||(U.resumeScheduled=!0,o.nextTick(V,N,U))}(this,R)),R.paused=!1,this},k.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},k.prototype.wrap=function(R){var N=this,U=this._readableState,te=!1;for(var j in R.on("end",function(){if(i("wrapped end"),U.decoder&&!U.ended){var J=U.decoder.end();J&&J.length&&N.push(J)}N.push(null)}),R.on("data",function(J){i("wrapped data"),U.decoder&&(J=U.decoder.write(J)),U.objectMode&&J==null||(U.objectMode||J&&J.length)&&(N.push(J)||(te=!0,R.pause()))}),R)this[j]===void 0&&typeof R[j]=="function"&&(this[j]=function(J){return function(){return R[J].apply(R,arguments)}}(j));for(var Y=0;Y<_.length;Y++)R.on(_[Y],this.emit.bind(this,_[Y]));return this._read=function(J){i("wrapped _read",J),te&&(te=!1,R.resume())},this},typeof Symbol=="function"&&(k.prototype[Symbol.asyncIterator]=function(){return s===void 0&&(s=u("./internal/streams/async_iterator")),s(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(R){this._readableState&&(this._readableState.flowing=R)}}),k._fromList=K,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(k.from=function(R,N){return a===void 0&&(a=u("./internal/streams/from")),a(k,R,N)})}).call(this)}).call(this,u("_process"),typeof Ga!="undefined"?Ga:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/async_iterator":292,"./internal/streams/buffer_list":293,"./internal/streams/destroy":294,"./internal/streams/from":296,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,events:84,inherits:231,"string_decoder/":300,util:83}],290:[function(u,q,W){q.exports=i;var o=u("../errors").codes,p=o.ERR_METHOD_NOT_IMPLEMENTED,x=o.ERR_MULTIPLE_CALLBACK,y=o.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=o.ERR_TRANSFORM_WITH_LENGTH_0,r=u("./_stream_duplex");function t(s,a){var l=this._transformState;l.transforming=!1;var f=l.writecb;if(f===null)return this.emit("error",new x);l.writechunk=null,l.writecb=null,a!=null&&this.push(a),f(s);var d=this._readableState;d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}function i(s){if(!(this instanceof i))return new i(s);r.call(this,s),this._transformState={afterTransform:t.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,s&&(typeof s.transform=="function"&&(this._transform=s.transform),typeof s.flush=="function"&&(this._flush=s.flush)),this.on("prefinish",n)}function n(){var s=this;typeof this._flush!="function"||this._readableState.destroyed?h(this,null,null):this._flush(function(a,l){h(s,a,l)})}function h(s,a,l){if(a)return s.emit("error",a);if(l!=null&&s.push(l),s._writableState.length)throw new e;if(s._transformState.transforming)throw new y;return s.push(null)}u("inherits")(i,r),i.prototype.push=function(s,a){return this._transformState.needTransform=!1,r.prototype.push.call(this,s,a)},i.prototype._transform=function(s,a,l){l(new p("_transform()"))},i.prototype._write=function(s,a,l){var f=this._transformState;if(f.writecb=l,f.writechunk=s,f.writeencoding=a,!f.transforming){var d=this._readableState;(f.needTransform||d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}},i.prototype._read=function(s){var a=this._transformState;a.writechunk===null||a.transforming?a.needTransform=!0:(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform))},i.prototype._destroy=function(s,a){r.prototype._destroy.call(this,s,function(l){a(l)})}},{"../errors":286,"./_stream_duplex":287,inherits:231}],291:[function(u,q,W){(function(o,p){(function(){function x(D){var F=this;this.next=null,this.entry=null,this.finish=function(){(function(H,V,Q){var K=H.entry;for(H.entry=null;K;){var Z=K.callback;V.pendingcb--,Z(Q),K=K.next}V.corkedRequestsFree.next=H})(F,D)}}var y;q.exports=k,k.WritableState=T;var e={deprecate:u("util-deprecate")},r=u("./internal/streams/stream"),t=u("buffer").Buffer,i=p.Uint8Array||function(){},n,h=u("./internal/streams/destroy"),s=u("./internal/streams/state").getHighWaterMark,a=u("../errors").codes,l=a.ERR_INVALID_ARG_TYPE,f=a.ERR_METHOD_NOT_IMPLEMENTED,d=a.ERR_MULTIPLE_CALLBACK,v=a.ERR_STREAM_CANNOT_PIPE,m=a.ERR_STREAM_DESTROYED,c=a.ERR_STREAM_NULL_VALUES,b=a.ERR_STREAM_WRITE_AFTER_END,g=a.ERR_UNKNOWN_ENCODING,w=h.errorOrDestroy;function _(){}function T(D,F,H){y=y||u("./_stream_duplex"),D=D||{},typeof H!="boolean"&&(H=F instanceof y),this.objectMode=!!D.objectMode,H&&(this.objectMode=this.objectMode||!!D.writableObjectMode),this.highWaterMark=s(this,D,"writableHighWaterMark",H),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var V=D.decodeStrings===!1;this.decodeStrings=!V,this.defaultEncoding=D.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Q){(function(K,Z){var $=K._writableState,re=$.sync,R=$.writecb;if(typeof R!="function")throw new d;if(function(U){U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0}($),Z)(function(U,te,j,Y,J){--te.pendingcb,j?(o.nextTick(J,Y),o.nextTick(E,U,te),U._writableState.errorEmitted=!0,w(U,Y)):(J(Y),U._writableState.errorEmitted=!0,w(U,Y),E(U,te))})(K,$,re,Z,R);else{var N=P($)||K.destroyed;N||$.corked||$.bufferProcessing||!$.bufferedRequest||I(K,$),re?o.nextTick(M,K,$,N,R):M(K,$,N,R)}})(F,Q)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=D.emitClose!==!1,this.autoDestroy=!!D.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new x(this)}function k(D){var F=this instanceof(y=y||u("./_stream_duplex"));if(!F&&!n.call(k,this))return new k(D);this._writableState=new T(D,this,F),this.writable=!0,D&&(typeof D.write=="function"&&(this._write=D.write),typeof D.writev=="function"&&(this._writev=D.writev),typeof D.destroy=="function"&&(this._destroy=D.destroy),typeof D.final=="function"&&(this._final=D.final)),r.call(this)}function L(D,F,H,V,Q,K,Z){F.writelen=V,F.writecb=Z,F.writing=!0,F.sync=!0,F.destroyed?F.onwrite(new m("write")):H?D._writev(Q,F.onwrite):D._write(Q,K,F.onwrite),F.sync=!1}function M(D,F,H,V){H||function(Q,K){K.length===0&&K.needDrain&&(K.needDrain=!1,Q.emit("drain"))}(D,F),F.pendingcb--,V(),E(D,F)}function I(D,F){F.bufferProcessing=!0;var H=F.bufferedRequest;if(D._writev&&H&&H.next){var V=F.bufferedRequestCount,Q=new Array(V),K=F.corkedRequestsFree;K.entry=H;for(var Z=0,$=!0;H;)Q[Z]=H,H.isBuf||($=!1),H=H.next,Z+=1;Q.allBuffers=$,L(D,F,!0,F.length,Q,"",K.finish),F.pendingcb++,F.lastBufferedRequest=null,K.next?(F.corkedRequestsFree=K.next,K.next=null):F.corkedRequestsFree=new x(F),F.bufferedRequestCount=0}else{for(;H;){var re=H.chunk,R=H.encoding,N=H.callback;if(L(D,F,!1,F.objectMode?1:re.length,re,R,N),H=H.next,F.bufferedRequestCount--,F.writing)break}H===null&&(F.lastBufferedRequest=null)}F.bufferedRequest=H,F.bufferProcessing=!1}function P(D){return D.ending&&D.length===0&&D.bufferedRequest===null&&!D.finished&&!D.writing}function S(D,F){D._final(function(H){F.pendingcb--,H&&w(D,H),F.prefinished=!0,D.emit("prefinish"),E(D,F)})}function E(D,F){var H=P(F);if(H&&(function(Q,K){K.prefinished||K.finalCalled||(typeof Q._final!="function"||K.destroyed?(K.prefinished=!0,Q.emit("prefinish")):(K.pendingcb++,K.finalCalled=!0,o.nextTick(S,Q,K)))}(D,F),F.pendingcb===0&&(F.finished=!0,D.emit("finish"),F.autoDestroy))){var V=D._readableState;(!V||V.autoDestroy&&V.endEmitted)&&D.destroy()}return H}u("inherits")(k,r),T.prototype.getBuffer=function(){for(var D=this.bufferedRequest,F=[];D;)F.push(D),D=D.next;return F},function(){try{Object.defineProperty(T.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(n=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(D){return!!n.call(this,D)||this===k&&D&&D._writableState instanceof T}})):n=function(D){return D instanceof this},k.prototype.pipe=function(){w(this,new v)},k.prototype.write=function(D,F,H){var V,Q=this._writableState,K=!1,Z=!Q.objectMode&&(V=D,t.isBuffer(V)||V instanceof i);return Z&&!t.isBuffer(D)&&(D=function($){return t.from($)}(D)),typeof F=="function"&&(H=F,F=null),Z?F="buffer":F||(F=Q.defaultEncoding),typeof H!="function"&&(H=_),Q.ending?function($,re){var R=new b;w($,R),o.nextTick(re,R)}(this,H):(Z||function($,re,R,N){var U;return R===null?U=new c:typeof R=="string"||re.objectMode||(U=new l("chunk",["string","Buffer"],R)),!U||(w($,U),o.nextTick(N,U),!1)}(this,Q,D,H))&&(Q.pendingcb++,K=function($,re,R,N,U,te){if(!R){var j=function(ne,se,oe){return ne.objectMode||ne.decodeStrings===!1||typeof se!="string"||(se=t.from(se,oe)),se}(re,N,U);N!==j&&(R=!0,U="buffer",N=j)}var Y=re.objectMode?1:N.length;re.length+=Y;var J=re.length<re.highWaterMark;if(J||(re.needDrain=!0),re.writing||re.corked){var ee=re.lastBufferedRequest;re.lastBufferedRequest={chunk:N,encoding:U,isBuf:R,callback:te,next:null},ee?ee.next=re.lastBufferedRequest:re.bufferedRequest=re.lastBufferedRequest,re.bufferedRequestCount+=1}else L($,re,!1,Y,N,U,te);return J}(this,Q,Z,D,F,H)),K},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var D=this._writableState;D.corked&&(D.corked--,D.writing||D.corked||D.bufferProcessing||!D.bufferedRequest||I(this,D))},k.prototype.setDefaultEncoding=function(D){if(typeof D=="string"&&(D=D.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((D+"").toLowerCase())>-1))throw new g(D);return this._writableState.defaultEncoding=D,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),k.prototype._write=function(D,F,H){H(new f("_write()"))},k.prototype._writev=null,k.prototype.end=function(D,F,H){var V=this._writableState;return typeof D=="function"?(H=D,D=null,F=null):typeof F=="function"&&(H=F,F=null),D!=null&&this.write(D,F),V.corked&&(V.corked=1,this.uncork()),V.ending||function(Q,K,Z){K.ending=!0,E(Q,K),Z&&(K.finished?o.nextTick(Z):Q.once("finish",Z)),K.ended=!0,Q.writable=!1}(this,V,H),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(D){this._writableState&&(this._writableState.destroyed=D)}}),k.prototype.destroy=h.destroy,k.prototype._undestroy=h.undestroy,k.prototype._destroy=function(D,F){F(D)}}).call(this)}).call(this,u("_process"),typeof Ga!="undefined"?Ga:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/destroy":294,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,inherits:231,"util-deprecate":330}],292:[function(u,q,W){(function(o){(function(){var p;function x(m,c,b){return c in m?Object.defineProperty(m,c,{value:b,enumerable:!0,configurable:!0,writable:!0}):m[c]=b,m}var y=u("./end-of-stream"),e=Symbol("lastResolve"),r=Symbol("lastReject"),t=Symbol("error"),i=Symbol("ended"),n=Symbol("lastPromise"),h=Symbol("handlePromise"),s=Symbol("stream");function a(m,c){return{value:m,done:c}}function l(m){var c=m[e];if(c!==null){var b=m[s].read();b!==null&&(m[n]=null,m[e]=null,m[r]=null,c(a(b,!1)))}}function f(m){o.nextTick(l,m)}var d=Object.getPrototypeOf(function(){}),v=Object.setPrototypeOf((x(p={get stream(){return this[s]},next:function(){var m=this,c=this[t];if(c!==null)return Promise.reject(c);if(this[i])return Promise.resolve(a(void 0,!0));if(this[s].destroyed)return new Promise(function(_,T){o.nextTick(function(){m[t]?T(m[t]):_(a(void 0,!0))})});var b,g=this[n];if(g)b=new Promise(function(_,T){return function(k,L){_.then(function(){T[i]?k(a(void 0,!0)):T[h](k,L)},L)}}(g,this));else{var w=this[s].read();if(w!==null)return Promise.resolve(a(w,!1));b=new Promise(this[h])}return this[n]=b,b}},Symbol.asyncIterator,function(){return this}),x(p,"return",function(){var m=this;return new Promise(function(c,b){m[s].destroy(null,function(g){g?b(g):c(a(void 0,!0))})})}),p),d);q.exports=function(m){var c,b=Object.create(v,(x(c={},s,{value:m,writable:!0}),x(c,e,{value:null,writable:!0}),x(c,r,{value:null,writable:!0}),x(c,t,{value:null,writable:!0}),x(c,i,{value:m._readableState.endEmitted,writable:!0}),x(c,h,{value:function(g,w){var _=b[s].read();_?(b[n]=null,b[e]=null,b[r]=null,g(a(_,!1))):(b[e]=g,b[r]=w)},writable:!0}),c));return b[n]=null,y(m,function(g){if(g&&g.code!=="ERR_STREAM_PREMATURE_CLOSE"){var w=b[r];return w!==null&&(b[n]=null,b[e]=null,b[r]=null,w(g)),void(b[t]=g)}var _=b[e];_!==null&&(b[n]=null,b[e]=null,b[r]=null,_(a(void 0,!0))),b[i]=!0}),m.on("readable",f.bind(null,b)),b}}).call(this)}).call(this,u("_process"))},{"./end-of-stream":295,_process:277}],293:[function(u,q,W){function o(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(t);i&&(h=h.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,h)}return n}function p(t,i,n){return i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function x(t,i){for(var n=0;n<i.length;n++){var h=i[n];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}var y=u("buffer").Buffer,e=u("util").inspect,r=e&&e.custom||"inspect";q.exports=function(){function t(){(function(h,s){if(!(h instanceof s))throw new TypeError("Cannot call a class as a function")})(this,t),this.head=null,this.tail=null,this.length=0}var i,n;return i=t,(n=[{key:"push",value:function(h){var s={data:h,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length}},{key:"unshift",value:function(h){var s={data:h,next:this.head};this.length===0&&(this.tail=s),this.head=s,++this.length}},{key:"shift",value:function(){if(this.length!==0){var h=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,h}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(h){if(this.length===0)return"";for(var s=this.head,a=""+s.data;s=s.next;)a+=h+s.data;return a}},{key:"concat",value:function(h){if(this.length===0)return y.alloc(0);for(var s,a,l,f=y.allocUnsafe(h>>>0),d=this.head,v=0;d;)s=d.data,a=f,l=v,y.prototype.copy.call(s,a,l),v+=d.data.length,d=d.next;return f}},{key:"consume",value:function(h,s){var a;return h<this.head.data.length?(a=this.head.data.slice(0,h),this.head.data=this.head.data.slice(h)):a=h===this.head.data.length?this.shift():s?this._getString(h):this._getBuffer(h),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(h){var s=this.head,a=1,l=s.data;for(h-=l.length;s=s.next;){var f=s.data,d=h>f.length?f.length:h;if(d===f.length?l+=f:l+=f.slice(0,h),(h-=d)==0){d===f.length?(++a,s.next?this.head=s.next:this.head=this.tail=null):(this.head=s,s.data=f.slice(d));break}++a}return this.length-=a,l}},{key:"_getBuffer",value:function(h){var s=y.allocUnsafe(h),a=this.head,l=1;for(a.data.copy(s),h-=a.data.length;a=a.next;){var f=a.data,d=h>f.length?f.length:h;if(f.copy(s,s.length-h,0,d),(h-=d)==0){d===f.length?(++l,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=f.slice(d));break}++l}return this.length-=l,s}},{key:r,value:function(h,s){return e(this,function(a){for(var l=1;l<arguments.length;l++){var f=arguments[l]!=null?arguments[l]:{};l%2?o(Object(f),!0).forEach(function(d){p(a,d,f[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(f)):o(Object(f)).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(f,d))})}return a}({},s,{depth:0,customInspect:!1}))}}])&&x(i.prototype,n),t}()},{buffer:85,util:83}],294:[function(u,q,W){(function(o){(function(){function p(e,r){y(e,r),x(e)}function x(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function y(e,r){e.emit("error",r)}q.exports={destroy:function(e,r){var t=this,i=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return i||n?(r?r(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,o.nextTick(y,this,e)):o.nextTick(y,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(h){!r&&h?t._writableState?t._writableState.errorEmitted?o.nextTick(x,t):(t._writableState.errorEmitted=!0,o.nextTick(p,t,h)):o.nextTick(p,t,h):r?(o.nextTick(x,t),r(h)):o.nextTick(x,t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,r){var t=e._readableState,i=e._writableState;t&&t.autoDestroy||i&&i.autoDestroy?e.destroy(r):e.emit("error",r)}}}).call(this)}).call(this,u("_process"))},{_process:277}],295:[function(u,q,W){var o=u("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function p(){}q.exports=function x(y,e,r){if(typeof e=="function")return x(y,null,e);e||(e={}),r=function(m){var c=!1;return function(){if(!c){c=!0;for(var b=arguments.length,g=new Array(b),w=0;w<b;w++)g[w]=arguments[w];m.apply(this,g)}}}(r||p);var t=e.readable||e.readable!==!1&&y.readable,i=e.writable||e.writable!==!1&&y.writable,n=function(){y.writable||s()},h=y._writableState&&y._writableState.finished,s=function(){i=!1,h=!0,t||r.call(y)},a=y._readableState&&y._readableState.endEmitted,l=function(){t=!1,a=!0,i||r.call(y)},f=function(m){r.call(y,m)},d=function(){var m;return t&&!a?(y._readableState&&y._readableState.ended||(m=new o),r.call(y,m)):i&&!h?(y._writableState&&y._writableState.ended||(m=new o),r.call(y,m)):void 0},v=function(){y.req.on("finish",s)};return function(m){return m.setHeader&&typeof m.abort=="function"}(y)?(y.on("complete",s),y.on("abort",d),y.req?v():y.on("request",v)):i&&!y._writableState&&(y.on("end",n),y.on("close",n)),y.on("end",l),y.on("finish",s),e.error!==!1&&y.on("error",f),y.on("close",d),function(){y.removeListener("complete",s),y.removeListener("abort",d),y.removeListener("request",v),y.req&&y.req.removeListener("finish",s),y.removeListener("end",n),y.removeListener("close",n),y.removeListener("finish",s),y.removeListener("end",l),y.removeListener("error",f),y.removeListener("close",d)}}},{"../../../errors":286}],296:[function(u,q,W){q.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],297:[function(u,q,W){var o,p=u("../../../errors").codes,x=p.ERR_MISSING_ARGS,y=p.ERR_STREAM_DESTROYED;function e(h){if(h)throw h}function r(h,s,a,l){l=function(v){var m=!1;return function(){m||(m=!0,v.apply(void 0,arguments))}}(l);var f=!1;h.on("close",function(){f=!0}),o===void 0&&(o=u("./end-of-stream")),o(h,{readable:s,writable:a},function(v){if(v)return l(v);f=!0,l()});var d=!1;return function(v){if(!f&&!d)return d=!0,function(m){return m.setHeader&&typeof m.abort=="function"}(h)?h.abort():typeof h.destroy=="function"?h.destroy():void l(v||new y("pipe"))}}function t(h){h()}function i(h,s){return h.pipe(s)}function n(h){return h.length?typeof h[h.length-1]!="function"?e:h.pop():e}q.exports=function(){for(var h=arguments.length,s=new Array(h),a=0;a<h;a++)s[a]=arguments[a];var l,f=n(s);if(Array.isArray(s[0])&&(s=s[0]),s.length<2)throw new x("streams");var d=s.map(function(v,m){var c=m<s.length-1;return r(v,c,m>0,function(b){l||(l=b),b&&d.forEach(t),c||(d.forEach(t),f(l))})});return s.reduce(i)}},{"../../../errors":286,"./end-of-stream":295}],298:[function(u,q,W){var o=u("../../../errors").codes.ERR_INVALID_OPT_VALUE;q.exports={getHighWaterMark:function(p,x,y,e){var r=function(t,i,n){return t.highWaterMark!=null?t.highWaterMark:i?t[n]:null}(x,e,y);if(r!=null){if(!isFinite(r)||Math.floor(r)!==r||r<0)throw new o(e?y:"highWaterMark",r);return Math.floor(r)}return p.objectMode?16:16384}}},{"../../../errors":286}],299:[function(u,q,W){q.exports=u("events").EventEmitter},{events:84}],300:[function(u,q,W){var o=u("safe-buffer").Buffer,p=o.isEncoding||function(a){switch((a=""+a)&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function x(a){var l;switch(this.encoding=function(f){var d=function(v){if(!v)return"utf8";for(var m;;)switch(v){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return v;default:if(m)return;v=(""+v).toLowerCase(),m=!0}}(f);if(typeof d!="string"&&(o.isEncoding===p||!p(f)))throw new Error("Unknown encoding: "+f);return d||f}(a),this.encoding){case"utf16le":this.text=r,this.end=t,l=4;break;case"utf8":this.fillLast=e,l=4;break;case"base64":this.text=i,this.end=n,l=3;break;default:return this.write=h,void(this.end=s)}this.lastNeed=0,this.lastTotal=0,this.lastChar=o.allocUnsafe(l)}function y(a){return a<=127?0:a>>5==6?2:a>>4==14?3:a>>3==30?4:a>>6==2?-1:-2}function e(a){var l=this.lastTotal-this.lastNeed,f=function(d,v,m){if((192&v[0])!=128)return d.lastNeed=0,"\uFFFD";if(d.lastNeed>1&&v.length>1){if((192&v[1])!=128)return d.lastNeed=1,"\uFFFD";if(d.lastNeed>2&&v.length>2&&(192&v[2])!=128)return d.lastNeed=2,"\uFFFD"}}(this,a);return f!==void 0?f:this.lastNeed<=a.length?(a.copy(this.lastChar,l,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(a.copy(this.lastChar,l,0,a.length),void(this.lastNeed-=a.length))}function r(a,l){if((a.length-l)%2==0){var f=a.toString("utf16le",l);if(f){var d=f.charCodeAt(f.length-1);if(d>=55296&&d<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],f.slice(0,-1)}return f}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",l,a.length-1)}function t(a){var l=a&&a.length?this.write(a):"";if(this.lastNeed){var f=this.lastTotal-this.lastNeed;return l+this.lastChar.toString("utf16le",0,f)}return l}function i(a,l){var f=(a.length-l)%3;return f===0?a.toString("base64",l):(this.lastNeed=3-f,this.lastTotal=3,f===1?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",l,a.length-f))}function n(a){var l=a&&a.length?this.write(a):"";return this.lastNeed?l+this.lastChar.toString("base64",0,3-this.lastNeed):l}function h(a){return a.toString(this.encoding)}function s(a){return a&&a.length?this.write(a):""}W.StringDecoder=x,x.prototype.write=function(a){if(a.length===0)return"";var l,f;if(this.lastNeed){if((l=this.fillLast(a))===void 0)return"";f=this.lastNeed,this.lastNeed=0}else f=0;return f<a.length?l?l+this.text(a,f):this.text(a,f):l||""},x.prototype.end=function(a){var l=a&&a.length?this.write(a):"";return this.lastNeed?l+"\uFFFD":l},x.prototype.text=function(a,l){var f=function(v,m,c){var b=m.length-1;if(b<c)return 0;var g=y(m[b]);return g>=0?(g>0&&(v.lastNeed=g-1),g):--b<c||g===-2?0:(g=y(m[b]))>=0?(g>0&&(v.lastNeed=g-2),g):--b<c||g===-2?0:(g=y(m[b]))>=0?(g>0&&(g===2?g=0:v.lastNeed=g-3),g):0}(this,a,l);if(!this.lastNeed)return a.toString("utf8",l);this.lastTotal=f;var d=a.length-(f-this.lastNeed);return a.copy(this.lastChar,0,d),a.toString("utf8",l,d)},x.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length}},{"safe-buffer":284}],301:[function(u,q,W){(function(o,p){(function(){var x=u("assert"),y=u("debug")("stream-parser");q.exports=function(f){var d=f&&typeof f._transform=="function",v=f&&typeof f._write=="function";if(!d&&!v)throw new Error("must pass a Writable or Transform stream in");y("extending Parser into stream"),f._bytes=r,f._skipBytes=t,d&&(f._passthrough=i),d?f._transform=h:f._write=n};function e(f){y("initializing parser stream"),f._parserBytesLeft=0,f._parserBuffers=[],f._parserBuffered=0,f._parserState=-1,f._parserCallback=null,typeof f.push=="function"&&(f._parserOutput=f.push.bind(f)),f._parserInit=!0}function r(f,d){x(!this._parserCallback,'there is already a "callback" set!'),x(isFinite(f)&&f>0,'can only buffer a finite number of bytes > 0, got "'+f+'"'),this._parserInit||e(this),y("buffering %o bytes",f),this._parserBytesLeft=f,this._parserCallback=d,this._parserState=0}function t(f,d){x(!this._parserCallback,'there is already a "callback" set!'),x(f>0,'can only skip > 0 bytes, got "'+f+'"'),this._parserInit||e(this),y("skipping %o bytes",f),this._parserBytesLeft=f,this._parserCallback=d,this._parserState=1}function i(f,d){x(!this._parserCallback,'There is already a "callback" set!'),x(f>0,'can only pass through > 0 bytes, got "'+f+'"'),this._parserInit||e(this),y("passing through %o bytes",f),this._parserBytesLeft=f,this._parserCallback=d,this._parserState=2}function n(f,d,v){this._parserInit||e(this),y("write(%o bytes)",f.length),typeof d=="function"&&(v=d),a(this,f,null,v)}function h(f,d,v){this._parserInit||e(this),y("transform(%o bytes)",f.length),typeof d!="function"&&(d=this._parserOutput),a(this,f,d,v)}function s(f,d,v,m){if(f._parserBytesLeft-=d.length,y("%o bytes left for stream piece",f._parserBytesLeft),f._parserState===0?(f._parserBuffers.push(d),f._parserBuffered+=d.length):f._parserState===2&&v(d),f._parserBytesLeft!==0)return m;var c=f._parserCallback;if(c&&f._parserState===0&&f._parserBuffers.length>1&&(d=p.concat(f._parserBuffers,f._parserBuffered)),f._parserState!==0&&(d=null),f._parserCallback=null,f._parserBuffered=0,f._parserState=-1,f._parserBuffers.splice(0),c){var b=[];d&&b.push(d),v&&b.push(v);var g=c.length>b.length;g&&b.push(l(m));var w=c.apply(f,b);if(!g||m===w)return m}}var a=l(function f(d,v,m,c){return d._parserBytesLeft<=0?c(new Error("got data but not currently parsing anything")):v.length<=d._parserBytesLeft?function(){return s(d,v,m,c)}:function(){var b=v.slice(0,d._parserBytesLeft);return s(d,b,m,function(g){return g?c(g):v.length>b.length?function(){return f(d,v.slice(b.length),m,c)}:void 0})}});function l(f){return function(){for(var d=f.apply(this,arguments);typeof d=="function";)d=d();return d}}}).call(this)}).call(this,u("_process"),u("buffer").Buffer)},{_process:277,assert:75,buffer:85,debug:302}],302:[function(u,q,W){(function(o){(function(){function p(){var x;try{x=W.storage.debug}catch{}return!x&&o!==void 0&&"env"in o&&(x=o.env.DEBUG),x}(W=q.exports=u("./debug")).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},W.formatArgs=function(x){var y=this.useColors;if(x[0]=(y?"%c":"")+this.namespace+(y?" %c":" ")+x[0]+(y?"%c ":" ")+"+"+W.humanize(this.diff),!!y){var e="color: "+this.color;x.splice(1,0,e,"color: inherit");var r=0,t=0;x[0].replace(/%[a-zA-Z%]/g,function(i){i!=="%%"&&(r++,i==="%c"&&(t=r))}),x.splice(t,0,e)}},W.save=function(x){try{x==null?W.storage.removeItem("debug"):W.storage.debug=x}catch{}},W.load=p,W.useColors=function(){return typeof window!="undefined"&&window.process&&window.process.type==="renderer"?!0:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},W.storage=typeof chrome!="undefined"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),W.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],W.formatters.j=function(x){try{return JSON.stringify(x)}catch(y){return"[UnexpectedJSONParseError]: "+y.message}},W.enable(p())}).call(this)}).call(this,u("_process"))},{"./debug":303,_process:277}],303:[function(u,q,W){var o;function p(x){function y(){if(y.enabled){var e=y,r=+new Date,t=r-(o||r);e.diff=t,e.prev=o,e.curr=r,o=r;for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];i[0]=W.coerce(i[0]),typeof i[0]!="string"&&i.unshift("%O");var h=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(a,l){if(a==="%%")return a;h++;var f=W.formatters[l];if(typeof f=="function"){var d=i[h];a=f.call(e,d),i.splice(h,1),h--}return a}),W.formatArgs.call(e,i);var s=y.log||W.log||console.log.bind(console);s.apply(e,i)}}return y.namespace=x,y.enabled=W.enabled(x),y.useColors=W.useColors(),y.color=function(e){var r,t=0;for(r in e)t=(t<<5)-t+e.charCodeAt(r),t|=0;return W.colors[Math.abs(t)%W.colors.length]}(x),typeof W.init=="function"&&W.init(y),y}(W=q.exports=p.debug=p.default=p).coerce=function(x){return x instanceof Error?x.stack||x.message:x},W.disable=function(){W.enable("")},W.enable=function(x){W.save(x),W.names=[],W.skips=[];for(var y=(typeof x=="string"?x:"").split(/[\s,]+/),e=y.length,r=0;r<e;r++)y[r]&&((x=y[r].replace(/\*/g,".*?"))[0]==="-"?W.skips.push(new RegExp("^"+x.substr(1)+"$")):W.names.push(new RegExp("^"+x+"$")))},W.enabled=function(x){var y,e;for(y=0,e=W.skips.length;y<e;y++)if(W.skips[y].test(x))return!1;for(y=0,e=W.names.length;y<e;y++)if(W.names[y].test(x))return!0;return!1},W.humanize=u("ms"),W.names=[],W.skips=[],W.formatters={}},{ms:304}],304:[function(u,q,W){var o=1e3,p=6e4,x=60*p,y=24*x;function e(r,t,i){if(!(r<t))return r<1.5*t?Math.floor(r/t)+" "+i:Math.ceil(r/t)+" "+i+"s"}q.exports=function(r,t){t=t||{};var i,n=typeof r;if(n==="string"&&r.length>0)return function(h){if(!((h=String(h)).length>100)){var s=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(h);if(!!s){var a=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"days":case"day":case"d":return a*y;case"hours":case"hour":case"hrs":case"hr":case"h":return a*x;case"minutes":case"minute":case"mins":case"min":case"m":return a*p;case"seconds":case"second":case"secs":case"sec":case"s":return a*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(r);if(n==="number"&&isNaN(r)===!1)return t.long?e(i=r,y,"day")||e(i,x,"hour")||e(i,p,"minute")||e(i,o,"second")||i+" ms":function(h){return h>=y?Math.round(h/y)+"d":h>=x?Math.round(h/x)+"h":h>=p?Math.round(h/p)+"m":h>=o?Math.round(h/o)+"s":h+"ms"}(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))}},{}],305:[function(u,q,W){var o=u("parenthesis");q.exports=function(p,x,y){if(p==null)throw Error("First argument should be a string");if(x==null)throw Error("Separator should be a string or a RegExp");y?(typeof y=="string"||Array.isArray(y))&&(y={ignore:y}):y={},y.escape==null&&(y.escape=!0),y.ignore==null?y.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof y.ignore=="string"&&(y.ignore=[y.ignore]),y.ignore=y.ignore.map(function(s){return s.length===1&&(s+=s),s}));var e=o.parse(p,{flat:!0,brackets:y.ignore}),r=e[0].split(x);if(y.escape){for(var t=[],i=0;i<r.length;i++){var n=r[i],h=r[i+1];n[n.length-1]==="\\"&&n[n.length-2]!=="\\"?(t.push(n+x+h),i++):t.push(n)}r=t}for(i=0;i<r.length;i++)e[0]=r[i],r[i]=o.stringify(e,{flat:!0});return r}},{parenthesis:248}],306:[function(u,q,W){q.exports=function(o){for(var p=o.length,x=new Array(p),y=new Array(p),e=new Array(p),r=new Array(p),t=new Array(p),i=new Array(p),n=0;n<p;++n)x[n]=-1,y[n]=0,e[n]=!1,r[n]=0,t[n]=-1,i[n]=[];var h,s=0,a=[],l=[];function f(m){var c=[m],b=[m];for(x[m]=y[m]=s,e[m]=!0,s+=1;b.length>0;){m=b[b.length-1];var g=o[m];if(r[m]<g.length){for(var w=r[m];w<g.length;++w){var _=g[w];if(x[_]<0){x[_]=y[_]=s,e[_]=!0,s+=1,c.push(_),b.push(_);break}e[_]&&(y[m]=0|Math.min(y[m],y[_])),t[_]>=0&&i[m].push(t[_])}r[m]=w}else{if(y[m]===x[m]){var T=[],k=[],L=0;for(w=c.length-1;w>=0;--w){var M=c[w];if(e[M]=!1,T.push(M),k.push(i[M]),L+=i[M].length,t[M]=a.length,M===m){c.length=w;break}}a.push(T);var I=new Array(L);for(w=0;w<k.length;w++)for(var P=0;P<k[w].length;P++)I[--L]=k[w][P];l.push(I)}b.pop()}}}for(n=0;n<p;++n)x[n]<0&&f(n);for(n=0;n<l.length;n++){var d=l[n];if(d.length!==0){d.sort(function(m,c){return m-c}),h=[d[0]];for(var v=1;v<d.length;v++)d[v]!==d[v-1]&&h.push(d[v]);l[n]=h}}return{components:a,adjacencyList:l}}},{}],307:[function(u,q,W){Object.defineProperty(W,"__esModule",{value:!0});var o=function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(i,n){var h=[],s=!0,a=!1,l=void 0;try{for(var f,d=i[Symbol.iterator]();!(s=(f=d.next()).done)&&(h.push(f.value),!n||h.length!==n);s=!0);}catch(v){a=!0,l=v}finally{try{!s&&d.return&&d.return()}finally{if(a)throw l}}return h}(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},p=2*Math.PI,x=function(r,t,i,n,h,s,a){var l=r.x,f=r.y;return{x:n*(l*=t)-h*(f*=i)+s,y:h*l+n*f+a}},y=function(r,t){var i=t===1.5707963267948966?.551915024494:t===-1.5707963267948966?-.551915024494:4/3*Math.tan(t/4),n=Math.cos(r),h=Math.sin(r),s=Math.cos(r+t),a=Math.sin(r+t);return[{x:n-h*i,y:h+n*i},{x:s+a*i,y:a-s*i},{x:s,y:a}]},e=function(r,t,i,n){var h=r*i+t*n;return h>1&&(h=1),h<-1&&(h=-1),(r*n-t*i<0?-1:1)*Math.acos(h)};W.default=function(r){var t=r.px,i=r.py,n=r.cx,h=r.cy,s=r.rx,a=r.ry,l=r.xAxisRotation,f=l===void 0?0:l,d=r.largeArcFlag,v=d===void 0?0:d,m=r.sweepFlag,c=m===void 0?0:m,b=[];if(s===0||a===0)return[];var g=Math.sin(f*p/360),w=Math.cos(f*p/360),_=w*(t-n)/2+g*(i-h)/2,T=-g*(t-n)/2+w*(i-h)/2;if(_===0&&T===0)return[];s=Math.abs(s),a=Math.abs(a);var k=Math.pow(_,2)/Math.pow(s,2)+Math.pow(T,2)/Math.pow(a,2);k>1&&(s*=Math.sqrt(k),a*=Math.sqrt(k));var L=function(V,Q,K,Z,$,re,R,N,U,te,j,Y){var J=Math.pow($,2),ee=Math.pow(re,2),ne=Math.pow(j,2),se=Math.pow(Y,2),oe=J*ee-J*se-ee*ne;oe<0&&(oe=0),oe/=J*se+ee*ne;var he=(oe=Math.sqrt(oe)*(R===N?-1:1))*$/re*Y,le=oe*-re/$*j,de=te*he-U*le+(V+K)/2,xe=U*he+te*le+(Q+Z)/2,we=(j-he)/$,be=(Y-le)/re,Ae=(-j-he)/$,fe=(-Y-le)/re,me=e(1,0,we,be),ke=e(we,be,Ae,fe);return N===0&&ke>0&&(ke-=p),N===1&&ke<0&&(ke+=p),[de,xe,me,ke]}(t,i,n,h,s,a,v,c,g,w,_,T),M=o(L,4),I=M[0],P=M[1],S=M[2],E=M[3],D=Math.abs(E)/(p/4);Math.abs(1-D)<1e-7&&(D=1);var F=Math.max(Math.ceil(D),1);E/=F;for(var H=0;H<F;H++)b.push(y(S,E)),S+=E;return b.map(function(V){var Q=x(V[0],s,a,w,g,I,P),K=Q.x,Z=Q.y,$=x(V[1],s,a,w,g,I,P),re=$.x,R=$.y,N=x(V[2],s,a,w,g,I,P);return{x1:K,y1:Z,x2:re,y2:R,x:N.x,y:N.y}})},q.exports=W.default},{}],308:[function(u,q,W){var o=u("parse-svg-path"),p=u("abs-svg-path"),x=u("normalize-svg-path"),y=u("is-svg-path"),e=u("assert");q.exports=function(r){if(Array.isArray(r)&&r.length===1&&typeof r[0]=="string"&&(r=r[0]),typeof r=="string"&&(e(y(r),"String is not an SVG path."),r=o(r)),e(Array.isArray(r),"Argument should be a string or an array of path segments."),r=p(r),!(r=x(r)).length)return[0,0,0,0];for(var t=[1/0,1/0,-1/0,-1/0],i=0,n=r.length;i<n;i++)for(var h=r[i].slice(1),s=0;s<h.length;s+=2)h[s+0]<t[0]&&(t[0]=h[s+0]),h[s+1]<t[1]&&(t[1]=h[s+1]),h[s+0]>t[2]&&(t[2]=h[s+0]),h[s+1]>t[3]&&(t[3]=h[s+1]);return t}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":309,"parse-svg-path":250}],309:[function(u,q,W){q.exports=function(y){for(var e,r=[],t=0,i=0,n=0,h=0,s=null,a=null,l=0,f=0,d=0,v=y.length;d<v;d++){var m=y[d],c=m[0];switch(c){case"M":n=m[1],h=m[2];break;case"A":var b=o({px:l,py:f,cx:m[6],cy:m[7],rx:m[1],ry:m[2],xAxisRotation:m[3],largeArcFlag:m[4],sweepFlag:m[5]});if(!b.length)continue;for(var g,w=0;w<b.length;w++)g=b[w],m=["C",g.x1,g.y1,g.x2,g.y2,g.x,g.y],w<b.length-1&&r.push(m);break;case"S":var _=l,T=f;e!="C"&&e!="S"||(_+=_-t,T+=T-i),m=["C",_,T,m[1],m[2],m[3],m[4]];break;case"T":e=="Q"||e=="T"?(s=2*l-s,a=2*f-a):(s=l,a=f),m=x(l,f,s,a,m[1],m[2]);break;case"Q":s=m[1],a=m[2],m=x(l,f,m[1],m[2],m[3],m[4]);break;case"L":m=p(l,f,m[1],m[2]);break;case"H":m=p(l,f,m[1],f);break;case"V":m=p(l,f,l,m[1]);break;case"Z":m=p(l,f,n,h)}e=c,l=m[m.length-2],f=m[m.length-1],m.length>4?(t=m[m.length-4],i=m[m.length-3]):(t=l,i=f),r.push(m)}return r};var o=u("svg-arc-to-cubic-bezier");function p(y,e,r,t){return["C",y,e,r,t,r,t]}function x(y,e,r,t,i,n){return["C",y/3+2/3*r,e/3+2/3*t,i/3+2/3*r,n/3+2/3*t,i,n]}},{"svg-arc-to-cubic-bezier":307}],310:[function(u,q,W){var o,p=u("svg-path-bounds"),x=u("parse-svg-path"),y=u("draw-svg-path"),e=u("is-svg-path"),r=u("bitmap-sdf"),t=document.createElement("canvas"),i=t.getContext("2d");q.exports=function(n,h){if(!e(n))throw Error("Argument should be valid svg path string");h||(h={});var s,a;h.shape?(s=h.shape[0],a=h.shape[1]):(s=t.width=h.w||h.width||200,a=t.height=h.h||h.height||200);var l=Math.min(s,a),f=h.stroke||0,d=h.viewbox||h.viewBox||p(n),v=[s/(d[2]-d[0]),a/(d[3]-d[1])],m=Math.min(v[0]||0,v[1]||0)/2;if(i.fillStyle="black",i.fillRect(0,0,s,a),i.fillStyle="white",f&&(typeof f!="number"&&(f=1),i.strokeStyle=f>0?"white":"black",i.lineWidth=Math.abs(f)),i.translate(.5*s,.5*a),i.scale(m,m),function(){if(o!=null)return o;var g=document.createElement("canvas").getContext("2d");if(g.canvas.width=g.canvas.height=1,!window.Path2D)return o=!1;var w=new Path2D("M0,0h1v1h-1v-1Z");g.fillStyle="black",g.fill(w);var _=g.getImageData(0,0,1,1);return o=_&&_.data&&_.data[3]===255}()){var c=new Path2D(n);i.fill(c),f&&i.stroke(c)}else{var b=x(n);y(i,b),i.fill(),f&&i.stroke()}return i.setTransform(1,0,0,1,0,0),r(i,{cutoff:h.cutoff!=null?h.cutoff:.5,radius:h.radius!=null?h.radius:.5*l})}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":308}],311:[function(u,q,W){(function(o,p){(function(){var x=u("process/browser.js").nextTick,y=Function.prototype.apply,e=Array.prototype.slice,r={},t=0;function i(n,h){this._id=n,this._clearFn=h}W.setTimeout=function(){return new i(y.call(setTimeout,window,arguments),clearTimeout)},W.setInterval=function(){return new i(y.call(setInterval,window,arguments),clearInterval)},W.clearTimeout=W.clearInterval=function(n){n.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},W.enroll=function(n,h){clearTimeout(n._idleTimeoutId),n._idleTimeout=h},W.unenroll=function(n){clearTimeout(n._idleTimeoutId),n._idleTimeout=-1},W._unrefActive=W.active=function(n){clearTimeout(n._idleTimeoutId);var h=n._idleTimeout;h>=0&&(n._idleTimeoutId=setTimeout(function(){n._onTimeout&&n._onTimeout()},h))},W.setImmediate=typeof o=="function"?o:function(n){var h=t++,s=!(arguments.length<2)&&e.call(arguments,1);return r[h]=!0,x(function(){r[h]&&(s?n.apply(null,s):n.call(null),W.clearImmediate(h))}),h},W.clearImmediate=typeof p=="function"?p:function(n){delete r[n]}}).call(this)}).call(this,u("timers").setImmediate,u("timers").clearImmediate)},{"process/browser.js":277,timers:311}],312:[function(u,q,W){(function(o){var p=/^\s+/,x=/\s+$/,y=0,e=o.round,r=o.min,t=o.max,i=o.random;function n(U,te){if(te=te||{},(U=U||"")instanceof n)return U;if(!(this instanceof n))return new n(U,te);var j=function(Y){var J={r:0,g:0,b:0},ee=1,ne=null,se=null,oe=null,he=!1,le=!1;typeof Y=="string"&&(Y=function(be){be=be.replace(p,"").replace(x,"").toLowerCase();var Ae,fe=!1;if(I[be])be=I[be],fe=!0;else if(be=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(Ae=R.rgb.exec(be))?{r:Ae[1],g:Ae[2],b:Ae[3]}:(Ae=R.rgba.exec(be))?{r:Ae[1],g:Ae[2],b:Ae[3],a:Ae[4]}:(Ae=R.hsl.exec(be))?{h:Ae[1],s:Ae[2],l:Ae[3]}:(Ae=R.hsla.exec(be))?{h:Ae[1],s:Ae[2],l:Ae[3],a:Ae[4]}:(Ae=R.hsv.exec(be))?{h:Ae[1],s:Ae[2],v:Ae[3]}:(Ae=R.hsva.exec(be))?{h:Ae[1],s:Ae[2],v:Ae[3],a:Ae[4]}:(Ae=R.hex8.exec(be))?{r:F(Ae[1]),g:F(Ae[2]),b:F(Ae[3]),a:K(Ae[4]),format:fe?"name":"hex8"}:(Ae=R.hex6.exec(be))?{r:F(Ae[1]),g:F(Ae[2]),b:F(Ae[3]),format:fe?"name":"hex"}:(Ae=R.hex4.exec(be))?{r:F(Ae[1]+""+Ae[1]),g:F(Ae[2]+""+Ae[2]),b:F(Ae[3]+""+Ae[3]),a:K(Ae[4]+""+Ae[4]),format:fe?"name":"hex8"}:(Ae=R.hex3.exec(be))?{r:F(Ae[1]+""+Ae[1]),g:F(Ae[2]+""+Ae[2]),b:F(Ae[3]+""+Ae[3]),format:fe?"name":"hex"}:!1}(Y)),typeof Y=="object"&&(N(Y.r)&&N(Y.g)&&N(Y.b)?(de=Y.r,xe=Y.g,we=Y.b,J={r:255*E(de,255),g:255*E(xe,255),b:255*E(we,255)},he=!0,le=String(Y.r).substr(-1)==="%"?"prgb":"rgb"):N(Y.h)&&N(Y.s)&&N(Y.v)?(ne=V(Y.s),se=V(Y.v),J=function(be,Ae,fe){be=6*E(be,360),Ae=E(Ae,100),fe=E(fe,100);var me=o.floor(be),ke=be-me,Te=fe*(1-Ae),Me=fe*(1-ke*Ae),Oe=fe*(1-(1-ke)*Ae),Fe=me%6;return{r:255*[fe,Me,Te,Te,Oe,fe][Fe],g:255*[Oe,fe,fe,Me,Te,Te][Fe],b:255*[Te,Te,Oe,fe,fe,Me][Fe]}}(Y.h,ne,se),he=!0,le="hsv"):N(Y.h)&&N(Y.s)&&N(Y.l)&&(ne=V(Y.s),oe=V(Y.l),J=function(be,Ae,fe){var me,ke,Te;function Me(qe,et,ze){return ze<0&&(ze+=1),ze>1&&(ze-=1),ze<1/6?qe+6*(et-qe)*ze:ze<.5?et:ze<2/3?qe+(et-qe)*(2/3-ze)*6:qe}if(be=E(be,360),Ae=E(Ae,100),fe=E(fe,100),Ae===0)me=ke=Te=fe;else{var Oe=fe<.5?fe*(1+Ae):fe+Ae-fe*Ae,Fe=2*fe-Oe;me=Me(Fe,Oe,be+1/3),ke=Me(Fe,Oe,be),Te=Me(Fe,Oe,be-1/3)}return{r:255*me,g:255*ke,b:255*Te}}(Y.h,ne,oe),he=!0,le="hsl"),Y.hasOwnProperty("a")&&(ee=Y.a));var de,xe,we;return ee=S(ee),{ok:he,format:Y.format||le,r:r(255,t(J.r,0)),g:r(255,t(J.g,0)),b:r(255,t(J.b,0)),a:ee}}(U);this._originalInput=U,this._r=j.r,this._g=j.g,this._b=j.b,this._a=j.a,this._roundA=e(100*this._a)/100,this._format=te.format||j.format,this._gradientType=te.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=j.ok,this._tc_id=y++}function h(U,te,j){U=E(U,255),te=E(te,255),j=E(j,255);var Y,J,ee=t(U,te,j),ne=r(U,te,j),se=(ee+ne)/2;if(ee==ne)Y=J=0;else{var oe=ee-ne;switch(J=se>.5?oe/(2-ee-ne):oe/(ee+ne),ee){case U:Y=(te-j)/oe+(te<j?6:0);break;case te:Y=(j-U)/oe+2;break;case j:Y=(U-te)/oe+4}Y/=6}return{h:Y,s:J,l:se}}function s(U,te,j){U=E(U,255),te=E(te,255),j=E(j,255);var Y,J,ee=t(U,te,j),ne=r(U,te,j),se=ee,oe=ee-ne;if(J=ee===0?0:oe/ee,ee==ne)Y=0;else{switch(ee){case U:Y=(te-j)/oe+(te<j?6:0);break;case te:Y=(j-U)/oe+2;break;case j:Y=(U-te)/oe+4}Y/=6}return{h:Y,s:J,v:se}}function a(U,te,j,Y){var J=[H(e(U).toString(16)),H(e(te).toString(16)),H(e(j).toString(16))];return Y&&J[0].charAt(0)==J[0].charAt(1)&&J[1].charAt(0)==J[1].charAt(1)&&J[2].charAt(0)==J[2].charAt(1)?J[0].charAt(0)+J[1].charAt(0)+J[2].charAt(0):J.join("")}function l(U,te,j,Y){return[H(Q(Y)),H(e(U).toString(16)),H(e(te).toString(16)),H(e(j).toString(16))].join("")}function f(U,te){te=te===0?0:te||10;var j=n(U).toHsl();return j.s-=te/100,j.s=D(j.s),n(j)}function d(U,te){te=te===0?0:te||10;var j=n(U).toHsl();return j.s+=te/100,j.s=D(j.s),n(j)}function v(U){return n(U).desaturate(100)}function m(U,te){te=te===0?0:te||10;var j=n(U).toHsl();return j.l+=te/100,j.l=D(j.l),n(j)}function c(U,te){te=te===0?0:te||10;var j=n(U).toRgb();return j.r=t(0,r(255,j.r-e(-te/100*255))),j.g=t(0,r(255,j.g-e(-te/100*255))),j.b=t(0,r(255,j.b-e(-te/100*255))),n(j)}function b(U,te){te=te===0?0:te||10;var j=n(U).toHsl();return j.l-=te/100,j.l=D(j.l),n(j)}function g(U,te){var j=n(U).toHsl(),Y=(j.h+te)%360;return j.h=Y<0?360+Y:Y,n(j)}function w(U){var te=n(U).toHsl();return te.h=(te.h+180)%360,n(te)}function _(U){var te=n(U).toHsl(),j=te.h;return[n(U),n({h:(j+120)%360,s:te.s,l:te.l}),n({h:(j+240)%360,s:te.s,l:te.l})]}function T(U){var te=n(U).toHsl(),j=te.h;return[n(U),n({h:(j+90)%360,s:te.s,l:te.l}),n({h:(j+180)%360,s:te.s,l:te.l}),n({h:(j+270)%360,s:te.s,l:te.l})]}function k(U){var te=n(U).toHsl(),j=te.h;return[n(U),n({h:(j+72)%360,s:te.s,l:te.l}),n({h:(j+216)%360,s:te.s,l:te.l})]}function L(U,te,j){te=te||6,j=j||30;var Y=n(U).toHsl(),J=360/j,ee=[n(U)];for(Y.h=(Y.h-(J*te>>1)+720)%360;--te;)Y.h=(Y.h+J)%360,ee.push(n(Y));return ee}function M(U,te){te=te||6;for(var j=n(U).toHsv(),Y=j.h,J=j.s,ee=j.v,ne=[],se=1/te;te--;)ne.push(n({h:Y,s:J,v:ee})),ee=(ee+se)%1;return ne}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var U=this.toRgb();return(299*U.r+587*U.g+114*U.b)/1e3},getLuminance:function(){var U,te,j,Y=this.toRgb();return U=Y.r/255,te=Y.g/255,j=Y.b/255,.2126*(U<=.03928?U/12.92:o.pow((U+.055)/1.055,2.4))+.7152*(te<=.03928?te/12.92:o.pow((te+.055)/1.055,2.4))+.0722*(j<=.03928?j/12.92:o.pow((j+.055)/1.055,2.4))},setAlpha:function(U){return this._a=S(U),this._roundA=e(100*this._a)/100,this},toHsv:function(){var U=s(this._r,this._g,this._b);return{h:360*U.h,s:U.s,v:U.v,a:this._a}},toHsvString:function(){var U=s(this._r,this._g,this._b),te=e(360*U.h),j=e(100*U.s),Y=e(100*U.v);return this._a==1?"hsv("+te+", "+j+"%, "+Y+"%)":"hsva("+te+", "+j+"%, "+Y+"%, "+this._roundA+")"},toHsl:function(){var U=h(this._r,this._g,this._b);return{h:360*U.h,s:U.s,l:U.l,a:this._a}},toHslString:function(){var U=h(this._r,this._g,this._b),te=e(360*U.h),j=e(100*U.s),Y=e(100*U.l);return this._a==1?"hsl("+te+", "+j+"%, "+Y+"%)":"hsla("+te+", "+j+"%, "+Y+"%, "+this._roundA+")"},toHex:function(U){return a(this._r,this._g,this._b,U)},toHexString:function(U){return"#"+this.toHex(U)},toHex8:function(U){return function(te,j,Y,J,ee){var ne=[H(e(te).toString(16)),H(e(j).toString(16)),H(e(Y).toString(16)),H(Q(J))];return ee&&ne[0].charAt(0)==ne[0].charAt(1)&&ne[1].charAt(0)==ne[1].charAt(1)&&ne[2].charAt(0)==ne[2].charAt(1)&&ne[3].charAt(0)==ne[3].charAt(1)?ne[0].charAt(0)+ne[1].charAt(0)+ne[2].charAt(0)+ne[3].charAt(0):ne.join("")}(this._r,this._g,this._b,this._a,U)},toHex8String:function(U){return"#"+this.toHex8(U)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(100*E(this._r,255))+"%",g:e(100*E(this._g,255))+"%",b:e(100*E(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+e(100*E(this._r,255))+"%, "+e(100*E(this._g,255))+"%, "+e(100*E(this._b,255))+"%)":"rgba("+e(100*E(this._r,255))+"%, "+e(100*E(this._g,255))+"%, "+e(100*E(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(P[a(this._r,this._g,this._b,!0)]||!1)},toFilter:function(U){var te="#"+l(this._r,this._g,this._b,this._a),j=te,Y=this._gradientType?"GradientType = 1, ":"";if(U){var J=n(U);j="#"+l(J._r,J._g,J._b,J._a)}return"progid:DXImageTransform.Microsoft.gradient("+Y+"startColorstr="+te+",endColorstr="+j+")"},toString:function(U){var te=!!U;U=U||this._format;var j=!1,Y=this._a<1&&this._a>=0;return te||!Y||U!=="hex"&&U!=="hex6"&&U!=="hex3"&&U!=="hex4"&&U!=="hex8"&&U!=="name"?(U==="rgb"&&(j=this.toRgbString()),U==="prgb"&&(j=this.toPercentageRgbString()),U!=="hex"&&U!=="hex6"||(j=this.toHexString()),U==="hex3"&&(j=this.toHexString(!0)),U==="hex4"&&(j=this.toHex8String(!0)),U==="hex8"&&(j=this.toHex8String()),U==="name"&&(j=this.toName()),U==="hsl"&&(j=this.toHslString()),U==="hsv"&&(j=this.toHsvString()),j||this.toHexString()):U==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return n(this.toString())},_applyModification:function(U,te){var j=U.apply(null,[this].concat([].slice.call(te)));return this._r=j._r,this._g=j._g,this._b=j._b,this.setAlpha(j._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(c,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(f,arguments)},saturate:function(){return this._applyModification(d,arguments)},greyscale:function(){return this._applyModification(v,arguments)},spin:function(){return this._applyModification(g,arguments)},_applyCombination:function(U,te){return U.apply(null,[this].concat([].slice.call(te)))},analogous:function(){return this._applyCombination(L,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(M,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(T,arguments)}},n.fromRatio=function(U,te){if(typeof U=="object"){var j={};for(var Y in U)U.hasOwnProperty(Y)&&(j[Y]=Y==="a"?U[Y]:V(U[Y]));U=j}return n(U,te)},n.equals=function(U,te){return!(!U||!te)&&n(U).toRgbString()==n(te).toRgbString()},n.random=function(){return n.fromRatio({r:i(),g:i(),b:i()})},n.mix=function(U,te,j){j=j===0?0:j||50;var Y=n(U).toRgb(),J=n(te).toRgb(),ee=j/100;return n({r:(J.r-Y.r)*ee+Y.r,g:(J.g-Y.g)*ee+Y.g,b:(J.b-Y.b)*ee+Y.b,a:(J.a-Y.a)*ee+Y.a})},n.readability=function(U,te){var j=n(U),Y=n(te);return(o.max(j.getLuminance(),Y.getLuminance())+.05)/(o.min(j.getLuminance(),Y.getLuminance())+.05)},n.isReadable=function(U,te,j){var Y,J,ee=n.readability(U,te);switch(J=!1,(Y=function(ne){var se,oe;return se=((ne=ne||{level:"AA",size:"small"}).level||"AA").toUpperCase(),oe=(ne.size||"small").toLowerCase(),se!=="AA"&&se!=="AAA"&&(se="AA"),oe!=="small"&&oe!=="large"&&(oe="small"),{level:se,size:oe}}(j)).level+Y.size){case"AAsmall":case"AAAlarge":J=ee>=4.5;break;case"AAlarge":J=ee>=3;break;case"AAAsmall":J=ee>=7}return J},n.mostReadable=function(U,te,j){var Y,J,ee,ne,se=null,oe=0;J=(j=j||{}).includeFallbackColors,ee=j.level,ne=j.size;for(var he=0;he<te.length;he++)(Y=n.readability(U,te[he]))>oe&&(oe=Y,se=n(te[he]));return n.isReadable(U,se,{level:ee,size:ne})||!J?se:(j.includeFallbackColors=!1,n.mostReadable(U,["#fff","#000"],j))};var I=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},P=n.hexNames=function(U){var te={};for(var j in U)U.hasOwnProperty(j)&&(te[U[j]]=j);return te}(I);function S(U){return U=parseFloat(U),(isNaN(U)||U<0||U>1)&&(U=1),U}function E(U,te){(function(Y){return typeof Y=="string"&&Y.indexOf(".")!=-1&&parseFloat(Y)===1})(U)&&(U="100%");var j=function(Y){return typeof Y=="string"&&Y.indexOf("%")!=-1}(U);return U=r(te,t(0,parseFloat(U))),j&&(U=parseInt(U*te,10)/100),o.abs(U-te)<1e-6?1:U%te/parseFloat(te)}function D(U){return r(1,t(0,U))}function F(U){return parseInt(U,16)}function H(U){return U.length==1?"0"+U:""+U}function V(U){return U<=1&&(U=100*U+"%"),U}function Q(U){return o.round(255*parseFloat(U)).toString(16)}function K(U){return F(U)/255}var Z,$,re,R=($="[\\s|\\(]+("+(Z="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+Z+")[,|\\s]+("+Z+")\\s*\\)?",re="[\\s|\\(]+("+Z+")[,|\\s]+("+Z+")[,|\\s]+("+Z+")[,|\\s]+("+Z+")\\s*\\)?",{CSS_UNIT:new RegExp(Z),rgb:new RegExp("rgb"+$),rgba:new RegExp("rgba"+re),hsl:new RegExp("hsl"+$),hsla:new RegExp("hsla"+re),hsv:new RegExp("hsv"+$),hsva:new RegExp("hsva"+re),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function N(U){return!!R.CSS_UNIT.exec(U)}q!==void 0&&q.exports?q.exports=n:window.tinycolor=n})(Math)},{}],313:[function(u,q,W){q.exports=p,q.exports.float32=q.exports.float=p,q.exports.fract32=q.exports.fract=function(x,y){if(x.length){if(x instanceof Float32Array)return new Float32Array(x.length);y instanceof Float32Array||(y=p(x));for(var e=0,r=y.length;e<r;e++)y[e]=x[e]-y[e];return y}return p(x-p(x))};var o=new Float32Array(1);function p(x){return x.length?x instanceof Float32Array?x:new Float32Array(x):(o[0]=x,o[0])}},{}],314:[function(u,q,W){var o=u("parse-unit");q.exports=x;function p(y,e){var r=o(getComputedStyle(y).getPropertyValue(e));return r[0]*x(r[1],y)}function x(y,e){switch(e=e||document.body,y=(y||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),y){case"%":return e.clientHeight/100;case"ch":case"ex":return function(r,t){var i=document.createElement("div");i.style["font-size"]="128"+r,t.appendChild(i);var n=p(i,"font-size")/128;return t.removeChild(i),n}(y,e);case"em":return p(e,"font-size");case"rem":return p(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}},{"parse-unit":251}],315:[function(u,q,W){(function(o,p){p(typeof W=="object"&&q!==void 0?W:(o=o||self).topojson=o.topojson||{})})(this,function(o){function p(l){return l}function x(l){if(l==null)return p;var f,d,v=l.scale[0],m=l.scale[1],c=l.translate[0],b=l.translate[1];return function(g,w){w||(f=d=0);var _=2,T=g.length,k=new Array(T);for(k[0]=(f+=g[0])*v+c,k[1]=(d+=g[1])*m+b;_<T;)k[_]=g[_],++_;return k}}function y(l){var f,d=x(l.transform),v=1/0,m=v,c=-v,b=-v;function g(_){(_=d(_))[0]<v&&(v=_[0]),_[0]>c&&(c=_[0]),_[1]<m&&(m=_[1]),_[1]>b&&(b=_[1])}function w(_){switch(_.type){case"GeometryCollection":_.geometries.forEach(w);break;case"Point":g(_.coordinates);break;case"MultiPoint":_.coordinates.forEach(g)}}for(f in l.arcs.forEach(function(_){for(var T,k=-1,L=_.length;++k<L;)(T=d(_[k],k))[0]<v&&(v=T[0]),T[0]>c&&(c=T[0]),T[1]<m&&(m=T[1]),T[1]>b&&(b=T[1])}),l.objects)w(l.objects[f]);return[v,m,c,b]}function e(l,f){var d=f.id,v=f.bbox,m=f.properties==null?{}:f.properties,c=r(l,f);return d==null&&v==null?{type:"Feature",properties:m,geometry:c}:v==null?{type:"Feature",id:d,properties:m,geometry:c}:{type:"Feature",id:d,bbox:v,properties:m,geometry:c}}function r(l,f){var d=x(l.transform),v=l.arcs;function m(_,T){T.length&&T.pop();for(var k=v[_<0?~_:_],L=0,M=k.length;L<M;++L)T.push(d(k[L],L));_<0&&function(I,P){for(var S,E=I.length,D=E-P;D<--E;)S=I[D],I[D++]=I[E],I[E]=S}(T,M)}function c(_){return d(_)}function b(_){for(var T=[],k=0,L=_.length;k<L;++k)m(_[k],T);return T.length<2&&T.push(T[0]),T}function g(_){for(var T=b(_);T.length<4;)T.push(T[0]);return T}function w(_){return _.map(g)}return function _(T){var k,L=T.type;switch(L){case"GeometryCollection":return{type:L,geometries:T.geometries.map(_)};case"Point":k=c(T.coordinates);break;case"MultiPoint":k=T.coordinates.map(c);break;case"LineString":k=b(T.arcs);break;case"MultiLineString":k=T.arcs.map(b);break;case"Polygon":k=w(T.arcs);break;case"MultiPolygon":k=T.arcs.map(w);break;default:return null}return{type:L,coordinates:k}}(f)}function t(l,f){var d={},v={},m={},c=[],b=-1;function g(w,_){for(var T in w){var k=w[T];delete _[k.start],delete k.start,delete k.end,k.forEach(function(L){d[L<0?~L:L]=1}),c.push(k)}}return f.forEach(function(w,_){var T,k=l.arcs[w<0?~w:w];k.length<3&&!k[1][0]&&!k[1][1]&&(T=f[++b],f[b]=w,f[_]=T)}),f.forEach(function(w){var _,T,k=function(S){var E,D=l.arcs[S<0?~S:S],F=D[0];return l.transform?(E=[0,0],D.forEach(function(H){E[0]+=H[0],E[1]+=H[1]})):E=D[D.length-1],S<0?[E,F]:[F,E]}(w),L=k[0],M=k[1];if(_=m[L])if(delete m[_.end],_.push(w),_.end=M,T=v[M]){delete v[T.start];var I=T===_?_:_.concat(T);v[I.start=_.start]=m[I.end=T.end]=I}else v[_.start]=m[_.end]=_;else if(_=v[M])if(delete v[_.start],_.unshift(w),_.start=L,T=m[L]){delete m[T.end];var P=T===_?_:T.concat(_);v[P.start=T.start]=m[P.end=_.end]=P}else v[_.start]=m[_.end]=_;else v[(_=[w]).start=L]=m[_.end=M]=_}),g(m,v),g(v,m),f.forEach(function(w){d[w<0?~w:w]||c.push([w])}),c}function i(l,f,d){var v,m,c;if(arguments.length>1)v=n(l,f,d);else for(m=0,v=new Array(c=l.arcs.length);m<c;++m)v[m]=m;return{type:"MultiLineString",arcs:t(l,v)}}function n(l,f,d){var v,m=[],c=[];function b(_){var T=_<0?~_:_;(c[T]||(c[T]=[])).push({i:_,g:v})}function g(_){_.forEach(b)}function w(_){_.forEach(g)}return function _(T){switch(v=T,T.type){case"GeometryCollection":T.geometries.forEach(_);break;case"LineString":g(T.arcs);break;case"MultiLineString":case"Polygon":w(T.arcs);break;case"MultiPolygon":(function(k){k.forEach(w)})(T.arcs)}}(f),c.forEach(d==null?function(_){m.push(_[0].i)}:function(_){d(_[0].g,_[_.length-1].g)&&m.push(_[0].i)}),m}function h(l,f){var d={},v=[],m=[];function c(g){g.forEach(function(w){w.forEach(function(_){(d[_=_<0?~_:_]||(d[_]=[])).push(g)})}),v.push(g)}function b(g){return function(w){for(var _,T=-1,k=w.length,L=w[k-1],M=0;++T<k;)_=L,L=w[T],M+=_[0]*L[1]-_[1]*L[0];return Math.abs(M)}(r(l,{type:"Polygon",arcs:[g]}).coordinates[0])}return f.forEach(function g(w){switch(w.type){case"GeometryCollection":w.geometries.forEach(g);break;case"Polygon":c(w.arcs);break;case"MultiPolygon":w.arcs.forEach(c)}}),v.forEach(function(g){if(!g._){var w=[],_=[g];for(g._=1,m.push(w);g=_.pop();)w.push(g),g.forEach(function(T){T.forEach(function(k){d[k<0?~k:k].forEach(function(L){L._||(L._=1,_.push(L))})})})}}),v.forEach(function(g){delete g._}),{type:"MultiPolygon",arcs:m.map(function(g){var w,_=[];if(g.forEach(function(I){I.forEach(function(P){P.forEach(function(S){d[S<0?~S:S].length<2&&_.push(S)})})}),(w=(_=t(l,_)).length)>1)for(var T,k,L=1,M=b(_[0]);L<w;++L)(T=b(_[L]))>M&&(k=_[0],_[0]=_[L],_[L]=k,M=T);return _}).filter(function(g){return g.length>0})}}function s(l,f){for(var d=0,v=l.length;d<v;){var m=d+v>>>1;l[m]<f?d=m+1:v=m}return d}function a(l){if(l==null)return p;var f,d,v=l.scale[0],m=l.scale[1],c=l.translate[0],b=l.translate[1];return function(g,w){w||(f=d=0);var _=2,T=g.length,k=new Array(T),L=Math.round((g[0]-c)/v),M=Math.round((g[1]-b)/m);for(k[0]=L-f,f=L,k[1]=M-d,d=M;_<T;)k[_]=g[_],++_;return k}}o.bbox=y,o.feature=function(l,f){return typeof f=="string"&&(f=l.objects[f]),f.type==="GeometryCollection"?{type:"FeatureCollection",features:f.geometries.map(function(d){return e(l,d)})}:e(l,f)},o.merge=function(l){return r(l,h.apply(this,arguments))},o.mergeArcs=h,o.mesh=function(l){return r(l,i.apply(this,arguments))},o.meshArcs=i,o.neighbors=function(l){var f={},d=l.map(function(){return[]});function v(I,P){I.forEach(function(S){S<0&&(S=~S);var E=f[S];E?E.push(P):f[S]=[P]})}function m(I,P){I.forEach(function(S){v(S,P)})}var c={LineString:v,MultiLineString:m,Polygon:m,MultiPolygon:function(I,P){I.forEach(function(S){m(S,P)})}};for(var b in l.forEach(function I(P,S){P.type==="GeometryCollection"?P.geometries.forEach(function(E){I(E,S)}):P.type in c&&c[P.type](P.arcs,S)}),f)for(var g=f[b],w=g.length,_=0;_<w;++_)for(var T=_+1;T<w;++T){var k,L=g[_],M=g[T];(k=d[L])[b=s(k,M)]!==M&&k.splice(b,0,M),(k=d[M])[b=s(k,L)]!==L&&k.splice(b,0,L)}return d},o.quantize=function(l,f){if(l.transform)throw new Error("already quantized");if(f&&f.scale)g=l.bbox;else{if(!((d=Math.floor(f))>=2))throw new Error("n must be \u22652");var d,v=(g=l.bbox||y(l))[0],m=g[1],c=g[2],b=g[3];f={scale:[c-v?(c-v)/(d-1):1,b-m?(b-m)/(d-1):1],translate:[v,m]}}var g,w,_=a(f),T=l.objects,k={};function L(I){return _(I)}function M(I){var P;switch(I.type){case"GeometryCollection":P={type:"GeometryCollection",geometries:I.geometries.map(M)};break;case"Point":P={type:"Point",coordinates:L(I.coordinates)};break;case"MultiPoint":P={type:"MultiPoint",coordinates:I.coordinates.map(L)};break;default:return I}return I.id!=null&&(P.id=I.id),I.bbox!=null&&(P.bbox=I.bbox),I.properties!=null&&(P.properties=I.properties),P}for(w in T)k[w]=M(T[w]);return{type:"Topology",bbox:g,transform:f,objects:k,arcs:l.arcs.map(function(I){var P,S=0,E=1,D=I.length,F=new Array(D);for(F[0]=_(I[0],0);++S<D;)((P=_(I[S],S))[0]||P[1])&&(F[E++]=P);return E===1&&(F[E++]=[0,0]),F.length=E,F})}},o.transform=x,o.untransform=a,Object.defineProperty(o,"__esModule",{value:!0})})},{}],316:[function(u,q,W){var o=u("../prototype/is");q.exports=function(p){if(typeof p!="function"||!hasOwnProperty.call(p,"length"))return!1;try{if(typeof p.length!="number"||typeof p.call!="function"||typeof p.apply!="function")return!1}catch{return!1}return!o(p)}},{"../prototype/is":323}],317:[function(u,q,W){var o=u("../value/is"),p=u("../object/is"),x=u("../string/coerce"),y=u("./to-short-string"),e=function(r,t){return r.replace("%v",y(t))};q.exports=function(r,t,i){if(!p(i))throw new TypeError(e(t,r));if(!o(r)){if("default"in i)return i.default;if(i.isOptional)return null}var n=x(i.errorMessage);throw o(n)||(n=t),new TypeError(e(n,r))}},{"../object/is":320,"../string/coerce":324,"../value/is":326,"./to-short-string":319}],318:[function(u,q,W){q.exports=function(o){try{return o.toString()}catch{try{return String(o)}catch{return null}}}},{}],319:[function(u,q,W){var o=u("./safe-to-string"),p=/[\n\r\u2028\u2029]/g;q.exports=function(x){var y=o(x);return y===null?"<Non-coercible to string value>":(y.length>100&&(y=y.slice(0,99)+"\u2026"),y=y.replace(p,function(e){switch(e){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},{"./safe-to-string":318}],320:[function(u,q,W){var o=u("../value/is"),p={object:!0,function:!0,undefined:!0};q.exports=function(x){return!!o(x)&&hasOwnProperty.call(p,typeof x)}},{"../value/is":326}],321:[function(u,q,W){var o=u("../lib/resolve-exception"),p=u("./is");q.exports=function(x){return p(x)?x:o(x,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":317,"./is":322}],322:[function(u,q,W){var o=u("../function/is"),p=/^\s*class[\s{/}]/,x=Function.prototype.toString;q.exports=function(y){return!!o(y)&&!p.test(x.call(y))}},{"../function/is":316}],323:[function(u,q,W){var o=u("../object/is");q.exports=function(p){if(!o(p))return!1;try{return!!p.constructor&&p.constructor.prototype===p}catch{return!1}}},{"../object/is":320}],324:[function(u,q,W){var o=u("../value/is"),p=u("../object/is"),x=Object.prototype.toString;q.exports=function(y){if(!o(y))return null;if(p(y)){var e=y.toString;if(typeof e!="function"||e===x)return null}try{return""+y}catch{return null}}},{"../object/is":320,"../value/is":326}],325:[function(u,q,W){var o=u("../lib/resolve-exception"),p=u("./is");q.exports=function(x){return p(x)?x:o(x,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":317,"./is":326}],326:[function(u,q,W){q.exports=function(o){return o!=null}},{}],327:[function(u,q,W){(function(o){(function(){var p=u("bit-twiddle"),x=u("dup"),y=u("buffer").Buffer;o.__TYPEDARRAY_POOL||(o.__TYPEDARRAY_POOL={UINT8:x([32,0]),UINT16:x([32,0]),UINT32:x([32,0]),BIGUINT64:x([32,0]),INT8:x([32,0]),INT16:x([32,0]),INT32:x([32,0]),BIGINT64:x([32,0]),FLOAT:x([32,0]),DOUBLE:x([32,0]),DATA:x([32,0]),UINT8C:x([32,0]),BUFFER:x([32,0])});var e=typeof Uint8ClampedArray!="undefined",r=typeof BigUint64Array!="undefined",t=typeof BigInt64Array!="undefined",i=o.__TYPEDARRAY_POOL;i.UINT8C||(i.UINT8C=x([32,0])),i.BIGUINT64||(i.BIGUINT64=x([32,0])),i.BIGINT64||(i.BIGINT64=x([32,0])),i.BUFFER||(i.BUFFER=x([32,0]));var n=i.DATA,h=i.BUFFER;function s(M){if(M){var I=M.length||M.byteLength,P=p.log2(I);n[P].push(M)}}function a(M){M=p.nextPow2(M);var I=p.log2(M),P=n[I];return P.length>0?P.pop():new ArrayBuffer(M)}function l(M){return new Uint8Array(a(M),0,M)}function f(M){return new Uint16Array(a(2*M),0,M)}function d(M){return new Uint32Array(a(4*M),0,M)}function v(M){return new Int8Array(a(M),0,M)}function m(M){return new Int16Array(a(2*M),0,M)}function c(M){return new Int32Array(a(4*M),0,M)}function b(M){return new Float32Array(a(4*M),0,M)}function g(M){return new Float64Array(a(8*M),0,M)}function w(M){return e?new Uint8ClampedArray(a(M),0,M):l(M)}function _(M){return r?new BigUint64Array(a(8*M),0,M):null}function T(M){return t?new BigInt64Array(a(8*M),0,M):null}function k(M){return new DataView(a(M),0,M)}function L(M){M=p.nextPow2(M);var I=p.log2(M),P=h[I];return P.length>0?P.pop():new y(M)}W.free=function(M){if(y.isBuffer(M))h[p.log2(M.length)].push(M);else{if(Object.prototype.toString.call(M)!=="[object ArrayBuffer]"&&(M=M.buffer),!M)return;var I=M.length||M.byteLength,P=0|p.log2(I);n[P].push(M)}},W.freeUint8=W.freeUint16=W.freeUint32=W.freeBigUint64=W.freeInt8=W.freeInt16=W.freeInt32=W.freeBigInt64=W.freeFloat32=W.freeFloat=W.freeFloat64=W.freeDouble=W.freeUint8Clamped=W.freeDataView=function(M){s(M.buffer)},W.freeArrayBuffer=s,W.freeBuffer=function(M){h[p.log2(M.length)].push(M)},W.malloc=function(M,I){if(I===void 0||I==="arraybuffer")return a(M);switch(I){case"uint8":return l(M);case"uint16":return f(M);case"uint32":return d(M);case"int8":return v(M);case"int16":return m(M);case"int32":return c(M);case"float":case"float32":return b(M);case"double":case"float64":return g(M);case"uint8_clamped":return w(M);case"bigint64":return T(M);case"biguint64":return _(M);case"buffer":return L(M);case"data":case"dataview":return k(M);default:return null}return null},W.mallocArrayBuffer=a,W.mallocUint8=l,W.mallocUint16=f,W.mallocUint32=d,W.mallocInt8=v,W.mallocInt16=m,W.mallocInt32=c,W.mallocFloat32=W.mallocFloat=b,W.mallocFloat64=W.mallocDouble=g,W.mallocUint8Clamped=w,W.mallocBigUint64=_,W.mallocBigInt64=T,W.mallocDataView=k,W.mallocBuffer=L,W.clearCache=function(){for(var M=0;M<32;++M)i.UINT8[M].length=0,i.UINT16[M].length=0,i.UINT32[M].length=0,i.INT8[M].length=0,i.INT16[M].length=0,i.INT32[M].length=0,i.FLOAT[M].length=0,i.DOUBLE[M].length=0,i.BIGUINT64[M].length=0,i.BIGINT64[M].length=0,i.UINT8C[M].length=0,n[M].length=0,h[M].length=0}}).call(this)}).call(this,typeof Ga!="undefined"?Ga:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],328:[function(u,q,W){var o=/[\'\"]/;q.exports=function(p){return p?(o.test(p.charAt(0))&&(p=p.substr(1)),o.test(p.charAt(p.length-1))&&(p=p.substr(0,p.length-1)),p):""}},{}],329:[function(u,q,W){q.exports=function(o,p,x){Array.isArray(x)||(x=[].slice.call(arguments,2));for(var y=0,e=x.length;y<e;y++){var r=x[y];for(var t in r)if((p[t]===void 0||Array.isArray(p[t])||o[t]!==p[t])&&t in p){var i;if(r[t]===!0)i=p[t];else if(r[t]===!1||typeof r[t]=="function"&&(i=r[t](p[t],o,p))===void 0)continue;o[t]=i}}return o}},{}],330:[function(u,q,W){(function(o){(function(){function p(x){try{if(!o.localStorage)return!1}catch{return!1}var y=o.localStorage[x];return y!=null&&String(y).toLowerCase()==="true"}q.exports=function(x,y){if(p("noDeprecation"))return x;var e=!1;return function(){if(!e){if(p("throwDeprecation"))throw new Error(y);p("traceDeprecation")?console.trace(y):console.warn(y),e=!0}return x.apply(this,arguments)}}}).call(this)}).call(this,typeof Ga!="undefined"?Ga:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],331:[function(u,q,W){var o=u("get-canvas-context");q.exports=function(p){return o("webgl",p)}},{"get-canvas-context":194}],332:[function(u,q,W){var o=u("../main"),p=u("object-assign"),x=o.instance();function y(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}y.prototype=new o.baseCalendar,p(y.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(s,a){if(typeof s=="string"){var l=s.match(r);return l?l[0]:""}var f=this._validateYear(s),d=s.month(),v=""+this.toChineseMonth(f,d);return a&&v.length<2&&(v="0"+v),this.isIntercalaryMonth(f,d)&&(v+="i"),v},monthNames:function(s){if(typeof s=="string"){var a=s.match(t);return a?a[0]:""}var l=this._validateYear(s),f=s.month(),d=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][this.toChineseMonth(l,f)-1];return this.isIntercalaryMonth(l,f)&&(d="\u95F0"+d),d},monthNamesShort:function(s){if(typeof s=="string"){var a=s.match(i);return a?a[0]:""}var l=this._validateYear(s),f=s.month(),d=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][this.toChineseMonth(l,f)-1];return this.isIntercalaryMonth(l,f)&&(d="\u95F0"+d),d},parseMonth:function(s,a){s=this._validateYear(s);var l,f=parseInt(a);if(isNaN(f))a[0]==="\u95F0"&&(l=!0,a=a.substring(1)),a[a.length-1]==="\u6708"&&(a=a.substring(0,a.length-1)),f=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(a);else{var d=a[a.length-1];l=d==="i"||d==="I"}return this.toMonthIndex(s,f,l)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(s,a){if(s.year&&(s=s.year()),typeof s!="number"||s<1888||s>2111)throw a.replace(/\{0\}/,this.local.name);return s},toMonthIndex:function(s,a,l){var f=this.intercalaryMonth(s);if(l&&a!==f||a<1||a>12)throw o.local.invalidMonth.replace(/\{0\}/,this.local.name);return f?!l&&a<=f?a-1:a:a-1},toChineseMonth:function(s,a){s.year&&(a=(s=s.year()).month());var l=this.intercalaryMonth(s);if(a<0||a>(l?12:11))throw o.local.invalidMonth.replace(/\{0\}/,this.local.name);return l?a<l?a+1:a:a+1},intercalaryMonth:function(s){return s=this._validateYear(s),n[s-n[0]]>>13},isIntercalaryMonth:function(s,a){s.year&&(a=(s=s.year()).month());var l=this.intercalaryMonth(s);return!!l&&l===a},leapYear:function(s){return this.intercalaryMonth(s)!==0},weekOfYear:function(s,a,l){var f,d=this._validateYear(s,o.local.invalidyear),v=h[d-h[0]],m=v>>9&4095,c=v>>5&15,b=31&v;(f=x.newDate(m,c,b)).add(4-(f.dayOfWeek()||7),"d");var g=this.toJD(s,a,l)-f.toJD();return 1+Math.floor(g/7)},monthsInYear:function(s){return this.leapYear(s)?13:12},daysInMonth:function(s,a){s.year&&(a=s.month(),s=s.year()),s=this._validateYear(s);var l=n[s-n[0]];if(a>(l>>13?12:11))throw o.local.invalidMonth.replace(/\{0\}/,this.local.name);return l&1<<12-a?30:29},weekDay:function(s,a,l){return(this.dayOfWeek(s,a,l)||7)<6},toJD:function(s,a,l){var f=this._validate(s,v,l,o.local.invalidDate);s=this._validateYear(f.year()),a=f.month(),l=f.day();var d=this.isIntercalaryMonth(s,a),v=this.toChineseMonth(s,a),m=function(c,b,g,w,_){var T,k,L;if(typeof c=="object")k=c,T=b||{};else{var M;if(!(typeof c=="number"&&c>=1888&&c<=2111))throw new Error("Lunar year outside range 1888-2111");if(!(typeof b=="number"&&b>=1&&b<=12))throw new Error("Lunar month outside range 1 - 12");if(!(typeof g=="number"&&g>=1&&g<=30))throw new Error("Lunar day outside range 1 - 30");typeof w=="object"?(M=!1,T=w):(M=!!w,T=_||{}),k={year:c,month:b,day:g,isIntercalary:M}}L=k.day-1;var I,P=n[k.year-n[0]],S=P>>13;I=S&&(k.month>S||k.isIntercalary)?k.month:k.month-1;for(var E=0;E<I;E++)L+=P&1<<12-E?30:29;var D=h[k.year-h[0]],F=new Date(D>>9&4095,(D>>5&15)-1,(31&D)+L);return T.year=F.getFullYear(),T.month=1+F.getMonth(),T.day=F.getDate(),T}(s,v,l,d);return x.toJD(m.year,m.month,m.day)},fromJD:function(s){var a=x.fromJD(s),l=function(d,v,m,c){var b,g;if(typeof d=="object")b=d,g=v||{};else{if(!(typeof d=="number"&&d>=1888&&d<=2111))throw new Error("Solar year outside range 1888-2111");if(!(typeof v=="number"&&v>=1&&v<=12))throw new Error("Solar month outside range 1 - 12");if(!(typeof m=="number"&&m>=1&&m<=31))throw new Error("Solar day outside range 1 - 31");b={year:d,month:v,day:m},g=c||{}}var w=h[b.year-h[0]],_=b.year<<9|b.month<<5|b.day;g.year=_>=w?b.year:b.year-1,w=h[g.year-h[0]];var T,k=new Date(w>>9&4095,(w>>5&15)-1,31&w),L=new Date(b.year,b.month-1,b.day);T=Math.round((L-k)/864e5);var M,I=n[g.year-n[0]];for(M=0;M<13;M++){var P=I&1<<12-M?30:29;if(T<P)break;T-=P}var S=I>>13;return!S||M<S?(g.isIntercalary=!1,g.month=1+M):M===S?(g.isIntercalary=!0,g.month=M):(g.isIntercalary=!1,g.month=M),g.day=1+T,g}(a.year(),a.month(),a.day()),f=this.toMonthIndex(l.year,l.month,l.isIntercalary);return this.newDate(l.year,f,l.day)},fromString:function(s){var a=s.match(e),l=this._validateYear(+a[1]),f=+a[2],d=!!a[3],v=this.toMonthIndex(l,f,d),m=+a[4];return this.newDate(l,v,m)},add:function(s,a,l){var f=s.year(),d=s.month(),v=this.isIntercalaryMonth(f,d),m=this.toChineseMonth(f,d),c=Object.getPrototypeOf(y.prototype).add.call(this,s,a,l);if(l==="y"){var b=c.year(),g=c.month(),w=this.isIntercalaryMonth(b,m),_=v&&w?this.toMonthIndex(b,m,!0):this.toMonthIndex(b,m,!1);_!==g&&c.month(_)}return c}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,r=/^\d?\d[iI]?/m,t=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,i=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;o.calendars.chinese=y;var n=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],h=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":346,"object-assign":247}],333:[function(u,q,W){var o=u("../main"),p=u("object-assign");function x(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}x.prototype=new o.baseCalendar,p(x.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(y){var e=this._validate(y,this.minMonth,this.minDay,o.local.invalidYear);return(y=e.year()+(e.year()<0?1:0))%4==3||y%4==-1},monthsInYear:function(y){return this._validate(y,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear),13},weekOfYear:function(y,e,r){var t=this.newDate(y,e,r);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(y,e){var r=this._validate(y,e,this.minDay,o.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(y,e,r){return(this.dayOfWeek(y,e,r)||7)<6},toJD:function(y,e,r){var t=this._validate(y,e,r,o.local.invalidDate);return(y=t.year())<0&&y++,t.day()+30*(t.month()-1)+365*(y-1)+Math.floor(y/4)+this.jdEpoch-1},fromJD:function(y){var e=Math.floor(y)+.5-this.jdEpoch,r=Math.floor((e-Math.floor((e+366)/1461))/365)+1;r<=0&&r--,e=Math.floor(y)+.5-this.newDate(r,1,1).toJD();var t=Math.floor(e/30)+1,i=e-30*(t-1)+1;return this.newDate(r,t,i)}}),o.calendars.coptic=x},{"../main":346,"object-assign":247}],334:[function(u,q,W){var o=u("../main"),p=u("object-assign");function x(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}x.prototype=new o.baseCalendar,p(x.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,o.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,o.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,o.local.invalidYear),400},weekOfYear:function(e,r,t){var i=this.newDate(e,r,t);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/8)+1},daysInMonth:function(e,r){var t=this._validate(e,r,this.minDay,o.local.invalidMonth);return this.daysPerMonth[t.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,r,t){return(this._validate(e,r,t,o.local.invalidDate).day()+1)%8},weekDay:function(e,r,t){var i=this.dayOfWeek(e,r,t);return i>=2&&i<=6},extraInfo:function(e,r,t){var i=this._validate(e,r,t,o.local.invalidDate);return{century:y[Math.floor((i.year()-1)/100)+1]||""}},toJD:function(e,r,t){var i=this._validate(e,r,t,o.local.invalidDate);return e=i.year()+(i.year()<0?1:0),r=i.month(),(t=i.day())+(r>1?16:0)+(r>2?32*(r-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var r=Math.floor(e/400)+1;e-=400*(r-1),e+=e>15?16:0;var t=Math.floor(e/32)+1,i=e-32*(t-1)+1;return this.newDate(r<=0?r-1:r,t,i)}});var y={20:"Fruitbat",21:"Anchovy"};o.calendars.discworld=x},{"../main":346,"object-assign":247}],335:[function(u,q,W){var o=u("../main"),p=u("object-assign");function x(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}x.prototype=new o.baseCalendar,p(x.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(y){var e=this._validate(y,this.minMonth,this.minDay,o.local.invalidYear);return(y=e.year()+(e.year()<0?1:0))%4==3||y%4==-1},monthsInYear:function(y){return this._validate(y,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear),13},weekOfYear:function(y,e,r){var t=this.newDate(y,e,r);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(y,e){var r=this._validate(y,e,this.minDay,o.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(y,e,r){return(this.dayOfWeek(y,e,r)||7)<6},toJD:function(y,e,r){var t=this._validate(y,e,r,o.local.invalidDate);return(y=t.year())<0&&y++,t.day()+30*(t.month()-1)+365*(y-1)+Math.floor(y/4)+this.jdEpoch-1},fromJD:function(y){var e=Math.floor(y)+.5-this.jdEpoch,r=Math.floor((e-Math.floor((e+366)/1461))/365)+1;r<=0&&r--,e=Math.floor(y)+.5-this.newDate(r,1,1).toJD();var t=Math.floor(e/30)+1,i=e-30*(t-1)+1;return this.newDate(r,t,i)}}),o.calendars.ethiopian=x},{"../main":346,"object-assign":247}],336:[function(u,q,W){var o=u("../main"),p=u("object-assign");function x(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function y(e,r){return e-r*Math.floor(e/r)}x.prototype=new o.baseCalendar,p(x.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear);return this._leapYear(r.year())},_leapYear:function(e){return y(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,o.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,r,t){var i=this.newDate(e,r,t);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear).year(),this.toJD(e===-1?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,r){return e.year&&(r=e.month(),e=e.year()),this._validate(e,r,this.minDay,o.local.invalidMonth),r===12&&this.leapYear(e)||r===8&&y(this.daysInYear(e),10)===5?30:r===9&&y(this.daysInYear(e),10)===3?29:this.daysPerMonth[r-1]},weekDay:function(e,r,t){return this.dayOfWeek(e,r,t)!==6},extraInfo:function(e,r,t){var i=this._validate(e,r,t,o.local.invalidDate);return{yearType:(this.leapYear(i)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(i)%10-3]}},toJD:function(e,r,t){var i=this._validate(e,r,t,o.local.invalidDate);e=i.year(),r=i.month(),t=i.day();var n=e<=0?e+1:e,h=this.jdEpoch+this._delay1(n)+this._delay2(n)+t+1;if(r<7){for(var s=7;s<=this.monthsInYear(e);s++)h+=this.daysInMonth(e,s);for(s=1;s<r;s++)h+=this.daysInMonth(e,s)}else for(s=7;s<r;s++)h+=this.daysInMonth(e,s);return h},_delay1:function(e){var r=Math.floor((235*e-234)/19),t=12084+13753*r,i=29*r+Math.floor(t/25920);return y(3*(i+1),7)<3&&i++,i},_delay2:function(e){var r=this._delay1(e-1),t=this._delay1(e);return this._delay1(e+1)-t==356?2:t-r==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var r=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(r===-1?1:r+1,7,1);)r++;for(var t=e<this.toJD(r,1,1)?7:1;e>this.toJD(r,t,this.daysInMonth(r,t));)t++;var i=e-this.toJD(r,t,1)+1;return this.newDate(r,t,i)}}),o.calendars.hebrew=x},{"../main":346,"object-assign":247}],337:[function(u,q,W){var o=u("../main"),p=u("object-assign");function x(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}x.prototype=new o.baseCalendar,p(x.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(y){return(11*this._validate(y,this.minMonth,this.minDay,o.local.invalidYear).year()+14)%30<11},weekOfYear:function(y,e,r){var t=this.newDate(y,e,r);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(y){return this.leapYear(y)?355:354},daysInMonth:function(y,e){var r=this._validate(y,e,this.minDay,o.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(y,e,r){return this.dayOfWeek(y,e,r)!==5},toJD:function(y,e,r){var t=this._validate(y,e,r,o.local.invalidDate);return y=t.year(),e=t.month(),y=y<=0?y+1:y,(r=t.day())+Math.ceil(29.5*(e-1))+354*(y-1)+Math.floor((3+11*y)/30)+this.jdEpoch-1},fromJD:function(y){y=Math.floor(y)+.5;var e=Math.floor((30*(y-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var r=Math.min(12,Math.ceil((y-29-this.toJD(e,1,1))/29.5)+1),t=y-this.toJD(e,r,1)+1;return this.newDate(e,r,t)}}),o.calendars.islamic=x},{"../main":346,"object-assign":247}],338:[function(u,q,W){var o=u("../main"),p=u("object-assign");function x(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}x.prototype=new o.baseCalendar,p(x.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(y){var e=this._validate(y,this.minMonth,this.minDay,o.local.invalidYear);return(y=e.year()<0?e.year()+1:e.year())%4==0},weekOfYear:function(y,e,r){var t=this.newDate(y,e,r);return t.add(4-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(y,e){var r=this._validate(y,e,this.minDay,o.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(y,e,r){return(this.dayOfWeek(y,e,r)||7)<6},toJD:function(y,e,r){var t=this._validate(y,e,r,o.local.invalidDate);return y=t.year(),e=t.month(),r=t.day(),y<0&&y++,e<=2&&(y--,e+=12),Math.floor(365.25*(y+4716))+Math.floor(30.6001*(e+1))+r-1524.5},fromJD:function(y){var e=Math.floor(y+.5)+1524,r=Math.floor((e-122.1)/365.25),t=Math.floor(365.25*r),i=Math.floor((e-t)/30.6001),n=i-Math.floor(i<14?1:13),h=r-Math.floor(n>2?4716:4715),s=e-t-Math.floor(30.6001*i);return h<=0&&h--,this.newDate(h,n,s)}}),o.calendars.julian=x},{"../main":346,"object-assign":247}],339:[function(u,q,W){var o=u("../main"),p=u("object-assign");function x(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}function y(r,t){return r-t*Math.floor(r/t)}function e(r,t){return y(r-1,t)+1}x.prototype=new o.baseCalendar,p(x.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(r){return this._validate(r,this.minMonth,this.minDay,o.local.invalidYear),!1},formatYear:function(r){r=this._validate(r,this.minMonth,this.minDay,o.local.invalidYear).year();var t=Math.floor(r/400);return r%=400,r+=r<0?400:0,t+"."+Math.floor(r/20)+"."+r%20},forYear:function(r){if((r=r.split(".")).length<3)throw"Invalid Mayan year";for(var t=0,i=0;i<r.length;i++){var n=parseInt(r[i],10);if(Math.abs(n)>19||i>0&&n<0)throw"Invalid Mayan year";t=20*t+n}return t},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,o.local.invalidYear),18},weekOfYear:function(r,t,i){return this._validate(r,t,i,o.local.invalidDate),0},daysInYear:function(r){return this._validate(r,this.minMonth,this.minDay,o.local.invalidYear),360},daysInMonth:function(r,t){return this._validate(r,t,this.minDay,o.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(r,t,i){return this._validate(r,t,i,o.local.invalidDate).day()},weekDay:function(r,t,i){return this._validate(r,t,i,o.local.invalidDate),!0},extraInfo:function(r,t,i){var n=this._validate(r,t,i,o.local.invalidDate).toJD(),h=this._toHaab(n),s=this._toTzolkin(n);return{haabMonthName:this.local.haabMonths[h[0]-1],haabMonth:h[0],haabDay:h[1],tzolkinDayName:this.local.tzolkinMonths[s[0]-1],tzolkinDay:s[0],tzolkinTrecena:s[1]}},_toHaab:function(r){var t=y((r-=this.jdEpoch)+8+340,365);return[Math.floor(t/20)+1,y(t,20)]},_toTzolkin:function(r){return[e((r-=this.jdEpoch)+20,20),e(r+4,13)]},toJD:function(r,t,i){var n=this._validate(r,t,i,o.local.invalidDate);return n.day()+20*n.month()+360*n.year()+this.jdEpoch},fromJD:function(r){r=Math.floor(r)+.5-this.jdEpoch;var t=Math.floor(r/360);r%=360,r+=r<0?360:0;var i=Math.floor(r/20),n=r%20;return this.newDate(t,i,n)}}),o.calendars.mayan=x},{"../main":346,"object-assign":247}],340:[function(u,q,W){var o=u("../main"),p=u("object-assign");function x(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}x.prototype=new o.baseCalendar;var y=o.instance("gregorian");p(x.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear);return y.leapYear(r.year()+(r.year()<1?1:0)+1469)},weekOfYear:function(e,r,t){var i=this.newDate(e,r,t);return i.add(1-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,r){var t=this._validate(e,r,this.minDay,o.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(t.month()===12&&this.leapYear(t.year())?1:0)},weekDay:function(e,r,t){return(this.dayOfWeek(e,r,t)||7)<6},toJD:function(e,r,t){var i=this._validate(e,r,t,o.local.invalidMonth);(e=i.year())<0&&e++;for(var n=i.day(),h=1;h<i.month();h++)n+=this.daysPerMonth[h-1];return n+y.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var r=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(r+1,1,1);)r++;for(var t=e-Math.floor(this.toJD(r,1,1)+.5)+1,i=1;t>this.daysInMonth(r,i);)t-=this.daysInMonth(r,i),i++;return this.newDate(r,i,t)}}),o.calendars.nanakshahi=x},{"../main":346,"object-assign":247}],341:[function(u,q,W){var o=u("../main"),p=u("object-assign");function x(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}x.prototype=new o.baseCalendar,p(x.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(y){return this.daysInYear(y)!==this.daysPerYear},weekOfYear:function(y,e,r){var t=this.newDate(y,e,r);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(y){if(y=this._validate(y,this.minMonth,this.minDay,o.local.invalidYear).year(),this.NEPALI_CALENDAR_DATA[y]===void 0)return this.daysPerYear;for(var e=0,r=this.minMonth;r<=12;r++)e+=this.NEPALI_CALENDAR_DATA[y][r];return e},daysInMonth:function(y,e){return y.year&&(e=y.month(),y=y.year()),this._validate(y,e,this.minDay,o.local.invalidMonth),this.NEPALI_CALENDAR_DATA[y]===void 0?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[y][e]},weekDay:function(y,e,r){return this.dayOfWeek(y,e,r)!==6},toJD:function(y,e,r){var t=this._validate(y,e,r,o.local.invalidDate);y=t.year(),e=t.month(),r=t.day();var i=o.instance(),n=0,h=e,s=y;this._createMissingCalendarData(y);var a=y-(h>9||h===9&&r>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);for(e!==9&&(n=r,h--);h!==9;)h<=0&&(h=12,s--),n+=this.NEPALI_CALENDAR_DATA[s][h],h--;return e===9?(n+=r-this.NEPALI_CALENDAR_DATA[s][0])<0&&(n+=i.daysInYear(a)):n+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0],i.newDate(a,1,1).add(n,"d").toJD()},fromJD:function(y){var e=o.instance().fromJD(y),r=e.year(),t=e.dayOfYear(),i=r+56;this._createMissingCalendarData(i);for(var n=9,h=this.NEPALI_CALENDAR_DATA[i][0],s=this.NEPALI_CALENDAR_DATA[i][n]-h+1;t>s;)++n>12&&(n=1,i++),s+=this.NEPALI_CALENDAR_DATA[i][n];var a=this.NEPALI_CALENDAR_DATA[i][n]-(s-t);return this.newDate(i,n,a)},_createMissingCalendarData:function(y){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var r=y-1;r<y+2;r++)this.NEPALI_CALENDAR_DATA[r]===void 0&&(this.NEPALI_CALENDAR_DATA[r]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),o.calendars.nepali=x},{"../main":346,"object-assign":247}],342:[function(u,q,W){var o=u("../main"),p=u("object-assign");function x(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function y(e,r){return e-r*Math.floor(e/r)}x.prototype=new o.baseCalendar,p(x.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear);return 682*((r.year()-(r.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,r,t){var i=this.newDate(e,r,t);return i.add(-(i.dayOfWeek()+1)%7,"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,r){var t=this._validate(e,r,this.minDay,o.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(t.month()===12&&this.leapYear(t.year())?1:0)},weekDay:function(e,r,t){return this.dayOfWeek(e,r,t)!==5},toJD:function(e,r,t){var i=this._validate(e,r,t,o.local.invalidDate);e=i.year(),r=i.month(),t=i.day();var n=e-(e>=0?474:473),h=474+y(n,2820);return t+(r<=7?31*(r-1):30*(r-1)+6)+Math.floor((682*h-110)/2816)+365*(h-1)+1029983*Math.floor(n/2820)+this.jdEpoch-1},fromJD:function(e){var r=(e=Math.floor(e)+.5)-this.toJD(475,1,1),t=Math.floor(r/1029983),i=y(r,1029983),n=2820;if(i!==1029982){var h=Math.floor(i/366),s=y(i,366);n=Math.floor((2134*h+2816*s+2815)/1028522)+h+1}var a=n+2820*t+474;a=a<=0?a-1:a;var l=e-this.toJD(a,1,1)+1,f=l<=186?Math.ceil(l/31):Math.ceil((l-6)/30),d=e-this.toJD(a,f,1)+1;return this.newDate(a,f,d)}}),o.calendars.persian=x,o.calendars.jalali=x},{"../main":346,"object-assign":247}],343:[function(u,q,W){var o=u("../main"),p=u("object-assign"),x=o.instance();function y(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}y.prototype=new o.baseCalendar,p(y.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear);return e=this._t2gYear(r.year()),x.leapYear(e)},weekOfYear:function(e,r,t){var i=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear);return e=this._t2gYear(i.year()),x.weekOfYear(e,i.month(),i.day())},daysInMonth:function(e,r){var t=this._validate(e,r,this.minDay,o.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(t.month()===2&&this.leapYear(t.year())?1:0)},weekDay:function(e,r,t){return(this.dayOfWeek(e,r,t)||7)<6},toJD:function(e,r,t){var i=this._validate(e,r,t,o.local.invalidDate);return e=this._t2gYear(i.year()),x.toJD(e,i.month(),i.day())},fromJD:function(e){var r=x.fromJD(e),t=this._g2tYear(r.year());return this.newDate(t,r.month(),r.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),o.calendars.taiwan=y},{"../main":346,"object-assign":247}],344:[function(u,q,W){var o=u("../main"),p=u("object-assign"),x=o.instance();function y(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}y.prototype=new o.baseCalendar,p(y.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear);return e=this._t2gYear(r.year()),x.leapYear(e)},weekOfYear:function(e,r,t){var i=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear);return e=this._t2gYear(i.year()),x.weekOfYear(e,i.month(),i.day())},daysInMonth:function(e,r){var t=this._validate(e,r,this.minDay,o.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(t.month()===2&&this.leapYear(t.year())?1:0)},weekDay:function(e,r,t){return(this.dayOfWeek(e,r,t)||7)<6},toJD:function(e,r,t){var i=this._validate(e,r,t,o.local.invalidDate);return e=this._t2gYear(i.year()),x.toJD(e,i.month(),i.day())},fromJD:function(e){var r=x.fromJD(e),t=this._g2tYear(r.year());return this.newDate(t,r.month(),r.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),o.calendars.thai=y},{"../main":346,"object-assign":247}],345:[function(u,q,W){var o=u("../main"),p=u("object-assign");function x(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}x.prototype=new o.baseCalendar,p(x.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear);return this.daysInYear(r.year())===355},weekOfYear:function(e,r,t){var i=this.newDate(e,r,t);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var r=0,t=1;t<=12;t++)r+=this.daysInMonth(e,t);return r},daysInMonth:function(e,r){for(var t=this._validate(e,r,this.minDay,o.local.invalidMonth).toJD()-24e5+.5,i=0,n=0;n<y.length;n++){if(y[n]>t)return y[i]-y[i-1];i++}return 30},weekDay:function(e,r,t){return this.dayOfWeek(e,r,t)!==5},toJD:function(e,r,t){var i=this._validate(e,r,t,o.local.invalidDate),n=12*(i.year()-1)+i.month()-15292;return i.day()+y[n-1]-1+24e5-.5},fromJD:function(e){for(var r=e-24e5+.5,t=0,i=0;i<y.length&&!(y[i]>r);i++)t++;var n=t+15292,h=Math.floor((n-1)/12),s=h+1,a=n-12*h,l=r-y[t-1]+1;return this.newDate(s,a,l)},isValid:function(e,r,t){var i=o.baseCalendar.prototype.isValid.apply(this,arguments);return i&&(i=(e=e.year!=null?e.year:e)>=1276&&e<=1500),i},_validate:function(e,r,t,i){var n=o.baseCalendar.prototype._validate.apply(this,arguments);if(n.year<1276||n.year>1500)throw i.replace(/\{0\}/,this.local.name);return n}}),o.calendars.ummalqura=x;var y=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":346,"object-assign":247}],346:[function(u,q,W){var o=u("object-assign");function p(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function x(i,n,h,s){if(this._calendar=i,this._year=n,this._month=h,this._day=s,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(t.local.invalidDate||t.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function y(i,n){return"000000".substring(0,n-(i=""+i).length)+i}function e(){this.shortYearCutoff="+10"}function r(i){this.local=this.regionalOptions[i]||this.regionalOptions[""]}o(p.prototype,{instance:function(i,n){i=(i||"gregorian").toLowerCase(),n=n||"";var h=this._localCals[i+"-"+n];if(!h&&this.calendars[i]&&(h=new this.calendars[i](n),this._localCals[i+"-"+n]=h),!h)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,i);return h},newDate:function(i,n,h,s,a){return(s=(i!=null&&i.year?i.calendar():typeof s=="string"?this.instance(s,a):s)||this.instance()).newDate(i,n,h)},substituteDigits:function(i){return function(n){return(n+"").replace(/[0-9]/g,function(h){return i[h]})}},substituteChineseDigits:function(i,n){return function(h){for(var s="",a=0;h>0;){var l=h%10;s=(l===0?"":i[l]+n[a])+s,a++,h=Math.floor(h/10)}return s.indexOf(i[1]+n[1])===0&&(s=s.substr(1)),s||i[0]}}}),o(x.prototype,{newDate:function(i,n,h){return this._calendar.newDate(i==null?this:i,n,h)},year:function(i){return arguments.length===0?this._year:this.set(i,"y")},month:function(i){return arguments.length===0?this._month:this.set(i,"m")},day:function(i){return arguments.length===0?this._day:this.set(i,"d")},date:function(i,n,h){if(!this._calendar.isValid(i,n,h))throw(t.local.invalidDate||t.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=i,this._month=n,this._day=h,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(i,n){return this._calendar.add(this,i,n)},set:function(i,n){return this._calendar.set(this,i,n)},compareTo:function(i){if(this._calendar.name!==i._calendar.name)throw(t.local.differentCalendars||t.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,i._calendar.local.name);var n=this._year!==i._year?this._year-i._year:this._month!==i._month?this.monthOfYear()-i.monthOfYear():this._day-i._day;return n===0?0:n<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(i){return this._calendar.fromJD(i)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(i){return this._calendar.fromJSDate(i)},toString:function(){return(this.year()<0?"-":"")+y(Math.abs(this.year()),4)+"-"+y(this.month(),2)+"-"+y(this.day(),2)}}),o(e.prototype,{_validateLevel:0,newDate:function(i,n,h){return i==null?this.today():(i.year&&(this._validate(i,n,h,t.local.invalidDate||t.regionalOptions[""].invalidDate),h=i.day(),n=i.month(),i=i.year()),new x(this,i,n,h))},today:function(){return this.fromJSDate(new Date)},epoch:function(i){return this._validate(i,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(i){var n=this._validate(i,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear);return(n.year()<0?"-":"")+y(Math.abs(n.year()),4)},monthsInYear:function(i){return this._validate(i,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear),12},monthOfYear:function(i,n){var h=this._validate(i,n,this.minDay,t.local.invalidMonth||t.regionalOptions[""].invalidMonth);return(h.month()+this.monthsInYear(h)-this.firstMonth)%this.monthsInYear(h)+this.minMonth},fromMonthOfYear:function(i,n){var h=(n+this.firstMonth-2*this.minMonth)%this.monthsInYear(i)+this.minMonth;return this._validate(i,h,this.minDay,t.local.invalidMonth||t.regionalOptions[""].invalidMonth),h},daysInYear:function(i){var n=this._validate(i,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear);return this.leapYear(n)?366:365},dayOfYear:function(i,n,h){var s=this._validate(i,n,h,t.local.invalidDate||t.regionalOptions[""].invalidDate);return s.toJD()-this.newDate(s.year(),this.fromMonthOfYear(s.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(i,n,h){var s=this._validate(i,n,h,t.local.invalidDate||t.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(s))+2)%this.daysInWeek()},extraInfo:function(i,n,h){return this._validate(i,n,h,t.local.invalidDate||t.regionalOptions[""].invalidDate),{}},add:function(i,n,h){return this._validate(i,this.minMonth,this.minDay,t.local.invalidDate||t.regionalOptions[""].invalidDate),this._correctAdd(i,this._add(i,n,h),n,h)},_add:function(i,n,h){if(this._validateLevel++,h==="d"||h==="w"){var s=i.toJD()+n*(h==="w"?this.daysInWeek():1),a=i.calendar().fromJD(s);return this._validateLevel--,[a.year(),a.month(),a.day()]}try{var l=i.year()+(h==="y"?n:0),f=i.monthOfYear()+(h==="m"?n:0);a=i.day(),h==="y"?(i.month()!==this.fromMonthOfYear(l,f)&&(f=this.newDate(l,i.month(),this.minDay).monthOfYear()),f=Math.min(f,this.monthsInYear(l)),a=Math.min(a,this.daysInMonth(l,this.fromMonthOfYear(l,f)))):h==="m"&&(function(v){for(;f<v.minMonth;)l--,f+=v.monthsInYear(l);for(var m=v.monthsInYear(l);f>m-1+v.minMonth;)l++,f-=m,m=v.monthsInYear(l)}(this),a=Math.min(a,this.daysInMonth(l,this.fromMonthOfYear(l,f))));var d=[l,this.fromMonthOfYear(l,f),a];return this._validateLevel--,d}catch(v){throw this._validateLevel--,v}},_correctAdd:function(i,n,h,s){if(!(this.hasYearZero||s!=="y"&&s!=="m"||n[0]!==0&&i.year()>0==n[0]>0)){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[s],l=h<0?-1:1;n=this._add(i,h*a[0]+l*a[1],a[2])}return i.date(n[0],n[1],n[2])},set:function(i,n,h){this._validate(i,this.minMonth,this.minDay,t.local.invalidDate||t.regionalOptions[""].invalidDate);var s=h==="y"?n:i.year(),a=h==="m"?n:i.month(),l=h==="d"?n:i.day();return h!=="y"&&h!=="m"||(l=Math.min(l,this.daysInMonth(s,a))),i.date(s,a,l)},isValid:function(i,n,h){this._validateLevel++;var s=this.hasYearZero||i!==0;if(s){var a=this.newDate(i,n,this.minDay);s=n>=this.minMonth&&n-this.minMonth<this.monthsInYear(a)&&h>=this.minDay&&h-this.minDay<this.daysInMonth(a)}return this._validateLevel--,s},toJSDate:function(i,n,h){var s=this._validate(i,n,h,t.local.invalidDate||t.regionalOptions[""].invalidDate);return t.instance().fromJD(this.toJD(s)).toJSDate()},fromJSDate:function(i){return this.fromJD(t.instance().fromJSDate(i).toJD())},_validate:function(i,n,h,s){if(i.year){if(this._validateLevel===0&&this.name!==i.calendar().name)throw(t.local.differentCalendars||t.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,i.calendar().local.name);return i}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(i,n,h))throw s.replace(/\{0\}/,this.local.name);var a=this.newDate(i,n,h);return this._validateLevel--,a}catch(l){throw this._validateLevel--,l}}}),r.prototype=new e,o(r.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var n=this._validate(i,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear);return(i=n.year()+(n.year()<0?1:0))%4==0&&(i%100!=0||i%400==0)},weekOfYear:function(i,n,h){var s=this.newDate(i,n,h);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(i,n){var h=this._validate(i,n,this.minDay,t.local.invalidMonth||t.regionalOptions[""].invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===2&&this.leapYear(h.year())?1:0)},weekDay:function(i,n,h){return(this.dayOfWeek(i,n,h)||7)<6},toJD:function(i,n,h){var s=this._validate(i,n,h,t.local.invalidDate||t.regionalOptions[""].invalidDate);i=s.year(),n=s.month(),h=s.day(),i<0&&i++,n<3&&(n+=12,i--);var a=Math.floor(i/100),l=2-a+Math.floor(a/4);return Math.floor(365.25*(i+4716))+Math.floor(30.6001*(n+1))+h+l-1524.5},fromJD:function(i){var n=Math.floor(i+.5),h=Math.floor((n-186721625e-2)/36524.25),s=(h=n+1+h-Math.floor(h/4))+1524,a=Math.floor((s-122.1)/365.25),l=Math.floor(365.25*a),f=Math.floor((s-l)/30.6001),d=s-l-Math.floor(30.6001*f),v=f-(f>13.5?13:1),m=a-(v>2.5?4716:4715);return m<=0&&m--,this.newDate(m,v,d)},toJSDate:function(i,n,h){var s=this._validate(i,n,h,t.local.invalidDate||t.regionalOptions[""].invalidDate),a=new Date(s.year(),s.month()-1,s.day());return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(a.getHours()>12?a.getHours()+2:0),a},fromJSDate:function(i){return this.newDate(i.getFullYear(),i.getMonth()+1,i.getDate())}});var t=q.exports=new p;t.cdate=x,t.baseCalendar=e,t.calendars.gregorian=r},{"object-assign":247}],347:[function(u,q,W){var o=u("object-assign"),p=u("./main");o(p.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),p.local=p.regionalOptions[""],o(p.cdate.prototype,{formatDate:function(x,y){return typeof x!="string"&&(y=x,x=""),this._calendar.formatDate(x||"",this,y)}}),o(p.baseCalendar.prototype,{UNIX_EPOCH:p.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:p.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(x,y,e){if(typeof x!="string"&&(e=y,y=x,x=""),!y)return"";if(y.calendar()!==this)throw p.local.invalidFormat||p.regionalOptions[""].invalidFormat;x=x||this.local.dateFormat;for(var r,t,i,n,h=(e=e||{}).dayNamesShort||this.local.dayNamesShort,s=e.dayNames||this.local.dayNames,a=e.monthNumbers||this.local.monthNumbers,l=e.monthNamesShort||this.local.monthNamesShort,f=e.monthNames||this.local.monthNames,d=(e.calculateWeek||this.local.calculateWeek,function(L,M){for(var I=1;k+I<x.length&&x.charAt(k+I)===L;)I++;return k+=I-1,Math.floor(I/(M||1))>1}),v=function(L,M,I,P){var S=""+M;if(d(L,P))for(;S.length<I;)S="0"+S;return S},m=this,c=function(L){return typeof a=="function"?a.call(m,L,d("m")):w(v("m",L.month(),2))},b=function(L,M){return M?typeof f=="function"?f.call(m,L):f[L.month()-m.minMonth]:typeof l=="function"?l.call(m,L):l[L.month()-m.minMonth]},g=this.local.digits,w=function(L){return e.localNumbers&&g?g(L):L},_="",T=!1,k=0;k<x.length;k++)if(T)x.charAt(k)!=="'"||d("'")?_+=x.charAt(k):T=!1;else switch(x.charAt(k)){case"d":_+=w(v("d",y.day(),2));break;case"D":_+=(r="D",t=y.dayOfWeek(),i=h,n=s,d(r)?n[t]:i[t]);break;case"o":_+=v("o",y.dayOfYear(),3);break;case"w":_+=v("w",y.weekOfYear(),2);break;case"m":_+=c(y);break;case"M":_+=b(y,d("M"));break;case"y":_+=d("y",2)?y.year():(y.year()%100<10?"0":"")+y.year()%100;break;case"Y":d("Y",2),_+=y.formatYear();break;case"J":_+=y.toJD();break;case"@":_+=(y.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":_+=(y.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":d("'")?_+="'":T=!0;break;default:_+=x.charAt(k)}return _},parseDate:function(x,y,e){if(y==null)throw p.local.invalidArguments||p.regionalOptions[""].invalidArguments;if((y=typeof y=="object"?y.toString():y+"")==="")return null;x=x||this.local.dateFormat;var r=(e=e||{}).shortYearCutoff||this.shortYearCutoff;r=typeof r!="string"?r:this.today().year()%100+parseInt(r,10);for(var t=e.dayNamesShort||this.local.dayNamesShort,i=e.dayNames||this.local.dayNames,n=e.parseMonth||this.local.parseMonth,h=e.monthNumbers||this.local.monthNumbers,s=e.monthNamesShort||this.local.monthNamesShort,a=e.monthNames||this.local.monthNames,l=-1,f=-1,d=-1,v=-1,m=-1,c=!1,b=!1,g=function(D,F){for(var H=1;P+H<x.length&&x.charAt(P+H)===D;)H++;return P+=H-1,Math.floor(H/(F||1))>1},w=function(D,F){var H=g(D,F),V=[2,3,H?4:2,H?4:2,10,11,20]["oyYJ@!".indexOf(D)+1],Q=new RegExp("^-?\\d{1,"+V+"}"),K=y.substring(I).match(Q);if(!K)throw(p.local.missingNumberAt||p.regionalOptions[""].missingNumberAt).replace(/\{0\}/,I);return I+=K[0].length,parseInt(K[0],10)},_=this,T=function(){if(typeof h=="function"){g("m");var D=h.call(_,y.substring(I));return I+=D.length,D}return w("m")},k=function(D,F,H,V){for(var Q=g(D,V)?H:F,K=0;K<Q.length;K++)if(y.substr(I,Q[K].length).toLowerCase()===Q[K].toLowerCase())return I+=Q[K].length,K+_.minMonth;throw(p.local.unknownNameAt||p.regionalOptions[""].unknownNameAt).replace(/\{0\}/,I)},L=function(){if(typeof a=="function"){var D=g("M")?a.call(_,y.substring(I)):s.call(_,y.substring(I));return I+=D.length,D}return k("M",s,a)},M=function(){if(y.charAt(I)!==x.charAt(P))throw(p.local.unexpectedLiteralAt||p.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,I);I++},I=0,P=0;P<x.length;P++)if(b)x.charAt(P)!=="'"||g("'")?M():b=!1;else switch(x.charAt(P)){case"d":v=w("d");break;case"D":k("D",t,i);break;case"o":m=w("o");break;case"w":w("w");break;case"m":d=T();break;case"M":d=L();break;case"y":var S=P;c=!g("y",2),P=S,f=w("y",2);break;case"Y":f=w("Y",2);break;case"J":l=w("J")+.5,y.charAt(I)==="."&&(I++,w("J"));break;case"@":l=w("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":l=w("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":I=y.length;break;case"'":g("'")?M():b=!0;break;default:M()}if(I<y.length)throw p.local.unexpectedText||p.regionalOptions[""].unexpectedText;if(f===-1?f=this.today().year():f<100&&c&&(f+=r===-1?1900:this.today().year()-this.today().year()%100-(f<=r?0:100)),typeof d=="string"&&(d=n.call(this,f,d)),m>-1){d=1,v=m;for(var E=this.daysInMonth(f,d);v>E;E=this.daysInMonth(f,d))d++,v-=E}return l>-1?this.fromJD(l):this.newDate(f,d,v)},determineDate:function(x,y,e,r,t){e&&typeof e!="object"&&(t=r,r=e,e=null),typeof r!="string"&&(t=r,r="");var i=this;return y=y?y.newDate():null,x=x==null?y:typeof x=="string"?function(n){try{return i.parseDate(r,n,t)}catch{}for(var h=((n=n.toLowerCase()).match(/^c/)&&e?e.newDate():null)||i.today(),s=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,a=s.exec(n);a;)h.add(parseInt(a[1],10),a[2]||"d"),a=s.exec(n);return h}(x):typeof x=="number"?isNaN(x)||x===1/0||x===-1/0?y:i.today().add(x,"d"):i.newDate(x)}})},{"./main":346,"object-assign":247}],348:[function(u,q,W){q.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],349:[function(u,q,W){var o=u("./arrow_paths"),p=u("../../plots/font_attributes"),x=u("../../plots/cartesian/constants"),y=u("../../plot_api/plot_template").templatedArray;u("../../constants/axis_placeable_objects"),q.exports=y("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:p({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:o.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:o.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",x.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",x.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",x.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",x.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:p({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/font_attributes":585,"./arrow_paths":348}],350:[function(u,q,W){var o=u("../../lib"),p=u("../../plots/cartesian/axes"),x=u("./draw").draw;function y(r){var t=r._fullLayout;o.filterVisible(t.annotations).forEach(function(i){var n=p.getFromId(r,i.xref),h=p.getFromId(r,i.yref),s=p.getRefType(i.xref),a=p.getRefType(i.yref);i._extremes={},s==="range"&&e(i,n),a==="range"&&e(i,h)})}function e(r,t){var i,n=t._id,h=n.charAt(0),s=r[h],a=r["a"+h],l=r[h+"ref"],f=r["a"+h+"ref"],d=r["_"+h+"padplus"],v=r["_"+h+"padminus"],m={x:1,y:-1}[h]*r[h+"shift"],c=3*r.arrowsize*r.arrowwidth||0,b=c+m,g=c-m,w=3*r.startarrowsize*r.arrowwidth||0,_=w+m,T=w-m;if(f===l){var k=p.findExtremes(t,[t.r2c(s)],{ppadplus:b,ppadminus:g}),L=p.findExtremes(t,[t.r2c(a)],{ppadplus:Math.max(d,_),ppadminus:Math.max(v,T)});i={min:[k.min[0],L.min[0]],max:[k.max[0],L.max[0]]}}else _=a?_+a:_,T=a?T-a:T,i=p.findExtremes(t,[t.r2c(s)],{ppadplus:Math.max(d,b,_),ppadminus:Math.max(v,g,T)});r._extremes[n]=i}q.exports=function(r){var t=r._fullLayout;if(o.filterVisible(t.annotations).length&&r._fullData.length)return o.syncOrAsync([x,y],r)}},{"../../lib":503,"../../plots/cartesian/axes":554,"./draw":355}],351:[function(u,q,W){var o=u("../../lib"),p=u("../../registry"),x=u("../../plot_api/plot_template").arrayEditor;function y(r,t){var i,n,h,s,a,l,f,d=r._fullLayout.annotations,v=[],m=[],c=[],b=(t||[]).length;for(i=0;i<d.length;i++)if(s=(h=d[i]).clicktoshow){for(n=0;n<b;n++)if(l=(a=t[n]).xaxis,f=a.yaxis,l._id===h.xref&&f._id===h.yref&&l.d2r(a.x)===e(h._xclick,l)&&f.d2r(a.y)===e(h._yclick,f)){(h.visible?s==="onout"?m:c:v).push(i);break}n===b&&h.visible&&s==="onout"&&m.push(i)}return{on:v,off:m,explicitOff:c}}function e(r,t){return t.type==="log"?t.l2r(r):t.d2r(r)}q.exports={hasClickToShow:function(r,t){var i=y(r,t);return i.on.length>0||i.explicitOff.length>0},onClick:function(r,t){var i,n,h=y(r,t),s=h.on,a=h.off.concat(h.explicitOff),l={},f=r._fullLayout.annotations;if(!(!s.length&&!a.length)){for(i=0;i<s.length;i++)(n=x(r.layout,"annotations",f[s[i]])).modifyItem("visible",!0),o.extendFlat(l,n.getUpdateObj());for(i=0;i<a.length;i++)(n=x(r.layout,"annotations",f[a[i]])).modifyItem("visible",!1),o.extendFlat(l,n.getUpdateObj());return p.call("update",r,{},l)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638}],352:[function(u,q,W){var o=u("../../lib"),p=u("../color");q.exports=function(x,y,e,r){r("opacity");var t=r("bgcolor"),i=r("bordercolor"),n=p.opacity(i);r("borderpad");var h=r("borderwidth"),s=r("showarrow");if(r("text",s?" ":e._dfltTitle.annotation),r("textangle"),o.coerceFont(r,"font",e.font),r("width"),r("align"),r("height")&&r("valign"),s){var a,l,f=r("arrowside");f.indexOf("end")!==-1&&(a=r("arrowhead"),l=r("arrowsize")),f.indexOf("start")!==-1&&(r("startarrowhead",a),r("startarrowsize",l)),r("arrowcolor",n?y.bordercolor:p.defaultLine),r("arrowwidth",2*(n&&h||1)),r("standoff"),r("startstandoff")}var d=r("hovertext"),v=e.hoverlabel||{};if(d){var m=r("hoverlabel.bgcolor",v.bgcolor||(p.opacity(t)?p.rgb(t):p.defaultLine)),c=r("hoverlabel.bordercolor",v.bordercolor||p.contrast(m));o.coerceFont(r,"hoverlabel.font",{family:v.font.family,size:v.font.size,color:v.font.color||c})}r("captureevents",!!d)}},{"../../lib":503,"../color":366}],353:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../lib/to_log_range");q.exports=function(x,y,e,r){y=y||{};var t=e==="log"&&y.type==="linear",i=e==="linear"&&y.type==="log";if(t||i)for(var n,h,s=x._fullLayout.annotations,a=y._id.charAt(0),l=0;l<s.length;l++)n=s[l],h="annotations["+l+"].",n[a+"ref"]===y._id&&f(a),n["a"+a+"ref"]===y._id&&f("a"+a);function f(d){var v=n[d],m=null;m=t?p(v,y.range):Math.pow(10,v),o(m)||(m=null),r(h+d,m)}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],354:[function(u,q,W){var o=u("../../lib"),p=u("../../plots/cartesian/axes"),x=u("../../plots/array_container_defaults"),y=u("./common_defaults"),e=u("./attributes");function r(t,i,n){function h(L,M){return o.coerce(t,i,e,L,M)}var s=h("visible"),a=h("clicktoshow");if(s||a){y(t,i,n,h);for(var l=i.showarrow,f=["x","y"],d=[-10,-30],v={_fullLayout:n},m=0;m<2;m++){var c=f[m],b=p.coerceRef(t,i,v,c,"","paper");if(b!=="paper"&&p.getFromId(v,b)._annIndices.push(i._index),p.coercePosition(i,v,h,b,c,.5),l){var g="a"+c,w=p.coerceRef(t,i,v,g,"pixel",["pixel","paper"]);w!=="pixel"&&w!==b&&(w=i[g]="pixel");var _=w==="pixel"?d[m]:.4;p.coercePosition(i,v,h,w,g,_)}h(c+"anchor"),h(c+"shift")}if(o.noneOrAll(t,i,["x","y"]),l&&o.noneOrAll(t,i,["ax","ay"]),a){var T=h("xclick"),k=h("yclick");i._xclick=T===void 0?i.x:p.cleanPosition(T,v,i.xref),i._yclick=k===void 0?i.y:p.cleanPosition(k,v,i.yref)}}}q.exports=function(t,i){x(t,i,{name:"annotations",handleItemDefaults:r})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":349,"./common_defaults":352}],355:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../registry"),x=u("../../plots/plots"),y=u("../../lib"),e=y.strTranslate,r=u("../../plots/cartesian/axes"),t=u("../color"),i=u("../drawing"),n=u("../fx"),h=u("../../lib/svg_text_utils"),s=u("../../lib/setcursor"),a=u("../dragelement"),l=u("../../plot_api/plot_template").arrayEditor,f=u("./draw_arrow_head");function d(c,b){var g=c._fullLayout.annotations[b]||{},w=r.getFromId(c,g.xref),_=r.getFromId(c,g.yref);w&&w.setScale(),_&&_.setScale(),m(c,g,b,!1,w,_)}function v(c,b,g,w,_){var T=_[g],k=_[g+"ref"],L=g.indexOf("y")!==-1,M=r.getRefType(k)==="domain",I=L?w.h:w.w;return c?M?T+(L?-b:b)/c._length:c.p2r(c.r2p(T)+b):T+(L?-b:b)/I}function m(c,b,g,w,_,T){var k,L,M=c._fullLayout,I=c._fullLayout._size,P=c._context.edits;w?(k="annotation-"+w,L=w+".annotations"):(k="annotation",L="annotations");var S=l(c.layout,L,b),E=S.modifyBase,D=S.modifyItem,F=S.getUpdateObj;M._infolayer.selectAll("."+k+'[data-index="'+g+'"]').remove();var H="clip"+M._uid+"_ann"+g;if(b._input&&b.visible!==!1){var V={x:{},y:{}},Q=+b.textangle||0,K=M._infolayer.append("g").classed(k,!0).attr("data-index",String(g)).style("opacity",b.opacity),Z=K.append("g").classed("annotation-text-g",!0),$=P[b.showarrow?"annotationTail":"annotationPosition"],re=b.captureevents||P.annotationText||$,R=Z.append("g").style("pointer-events",re?"all":null).call(s,"pointer").on("click",function(){c._dragging=!1,c.emit("plotly_clickannotation",oe(o.event))});b.hovertext&&R.on("mouseover",function(){var de=b.hoverlabel,xe=de.font,we=this.getBoundingClientRect(),be=c.getBoundingClientRect();n.loneHover({x0:we.left-be.left,x1:we.right-be.left,y:(we.top+we.bottom)/2-be.top,text:b.hovertext,color:de.bgcolor,borderColor:de.bordercolor,fontFamily:xe.family,fontSize:xe.size,fontColor:xe.color},{container:M._hoverlayer.node(),outerContainer:M._paper.node(),gd:c})}).on("mouseout",function(){n.loneUnhover(M._hoverlayer.node())});var N=b.borderwidth,U=b.borderpad,te=N+U,j=R.append("rect").attr("class","bg").style("stroke-width",N+"px").call(t.stroke,b.bordercolor).call(t.fill,b.bgcolor),Y=b.width||b.height,J=M._topclips.selectAll("#"+H).data(Y?[0]:[]);J.enter().append("clipPath").classed("annclip",!0).attr("id",H).append("rect"),J.exit().remove();var ee=b.font,ne=M._meta?y.templateString(b.text,M._meta):b.text,se=R.append("text").classed("annotation-text",!0).text(ne);P.annotationText?se.call(h.makeEditable,{delegate:R,gd:c}).call(he).on("edit",function(de){b.text=de,this.call(he),D("text",de),_&&_.autorange&&E(_._name+".autorange",!0),T&&T.autorange&&E(T._name+".autorange",!0),p.call("_guiRelayout",c,F())}):se.call(he)}else o.selectAll("#"+H).remove();function oe(de){var xe={index:g,annotation:b._input,fullAnnotation:b,event:de};return w&&(xe.subplotId=w),xe}function he(de){return de.call(i.font,ee).attr({"text-anchor":{left:"start",right:"end"}[b.align]||"middle"}),h.convertToTspans(de,c,le),de}function le(){var de=se.selectAll("a");de.size()===1&&de.text()===se.text()&&R.insert("a",":first-child").attr({"xlink:xlink:href":de.attr("xlink:href"),"xlink:xlink:show":de.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(j.node());var xe=R.select(".annotation-text-math-group"),we=!xe.empty(),be=i.bBox((we?xe:se).node()),Ae=be.width,fe=be.height,me=b.width||Ae,ke=b.height||fe,Te=Math.round(me+2*te),Me=Math.round(ke+2*te);function Oe(Ke,mt){return mt==="auto"&&(mt=Ke<1/3?"left":Ke>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[mt]}for(var Fe=!1,qe=["x","y"],et=0;et<qe.length;et++){var ze,Ue,We,Ze,nt,ft=qe[et],xt=b[ft+"ref"]||ft,It=b["a"+ft+"ref"],Et={x:_,y:T}[ft],it=(Q+(ft==="x"?0:-90))*Math.PI/180,rt=Te*Math.cos(it),At=Me*Math.sin(it),Gt=Math.abs(rt)+Math.abs(At),Qt=b[ft+"anchor"],Ve=b[ft+"shift"]*(ft==="x"?1:-1),Ye=V[ft],Be=r.getRefType(xt);if(Et&&Be!=="domain"){var Je=Et.r2fraction(b[ft]);(Je<0||Je>1)&&(It===xt?((Je=Et.r2fraction(b["a"+ft]))<0||Je>1)&&(Fe=!0):Fe=!0),ze=Et._offset+Et.r2p(b[ft]),Ze=.5}else{var Se=Be==="domain";ft==="x"?(We=b[ft],ze=Se?Et._offset+Et._length*We:ze=I.l+I.w*We):(We=1-b[ft],ze=Se?Et._offset+Et._length*We:ze=I.t+I.h*We),Ze=b.showarrow?.5:We}if(b.showarrow){Ye.head=ze;var Pe=b["a"+ft];if(nt=rt*Oe(.5,b.xanchor)-At*Oe(.5,b.yanchor),It===xt){var De=r.getRefType(It);De==="domain"?(ft==="y"&&(Pe=1-Pe),Ye.tail=Et._offset+Et._length*Pe):De==="paper"?ft==="y"?(Pe=1-Pe,Ye.tail=I.t+I.h*Pe):Ye.tail=I.l+I.w*Pe:Ye.tail=Et._offset+Et.r2p(Pe),Ue=nt}else Ye.tail=ze+Pe,Ue=nt+Pe;Ye.text=Ye.tail+nt;var Ie=M[ft==="x"?"width":"height"];if(xt==="paper"&&(Ye.head=y.constrain(Ye.head,1,Ie-1)),It==="pixel"){var $e=-Math.max(Ye.tail-3,Ye.text),st=Math.min(Ye.tail+3,Ye.text)-Ie;$e>0?(Ye.tail+=$e,Ye.text+=$e):st>0&&(Ye.tail-=st,Ye.text-=st)}Ye.tail+=Ve,Ye.head+=Ve}else Ue=nt=Gt*Oe(Ze,Qt),Ye.text=ze+nt;Ye.text+=Ve,nt+=Ve,Ue+=Ve,b["_"+ft+"padplus"]=Gt/2+Ue,b["_"+ft+"padminus"]=Gt/2-Ue,b["_"+ft+"size"]=Gt,b["_"+ft+"shift"]=nt}if(Fe)R.remove();else{var dt=0,ut=0;if(b.align!=="left"&&(dt=(me-Ae)*(b.align==="center"?.5:1)),b.valign!=="top"&&(ut=(ke-fe)*(b.valign==="middle"?.5:1)),we)xe.select("svg").attr({x:te+dt-1,y:te+ut}).call(i.setClipUrl,Y?H:null,c);else{var Lt=te+ut-be.top,lt=te+dt-be.left;se.call(h.positionText,lt,Lt).call(i.setClipUrl,Y?H:null,c)}J.select("rect").call(i.setRect,te,te,me,ke),j.call(i.setRect,N/2,N/2,Te-N,Me-N),R.call(i.setTranslate,Math.round(V.x.text-Te/2),Math.round(V.y.text-Me/2)),Z.attr({transform:"rotate("+Q+","+V.x.text+","+V.y.text+")"});var Ct,Pt=function(Ke,mt){K.selectAll(".annotation-arrow-g").remove();var Dt=V.x.head,Bt=V.y.head,Zt=V.x.tail+Ke,Re=V.y.tail+mt,ct=V.x.text+Ke,wt=V.y.text+mt,Rt=y.rotationXYMatrix(Q,ct,wt),Vt=y.apply2DTransform(Rt),rr=y.apply2DTransform2(Rt),qt=+j.attr("width"),Jt=+j.attr("height"),or=ct-.5*qt,gr=or+qt,dr=wt-.5*Jt,ur=dr+Jt,cr=[[or,dr,or,ur],[or,ur,gr,ur],[gr,ur,gr,dr],[gr,dr,or,dr]].map(rr);if(!cr.reduce(function(Ar,qr){return Ar^!!y.segmentsIntersect(Dt,Bt,Dt+1e6,Bt+1e6,qr[0],qr[1],qr[2],qr[3])},!1)){cr.forEach(function(Ar){var qr=y.segmentsIntersect(Zt,Re,Dt,Bt,Ar[0],Ar[1],Ar[2],Ar[3]);qr&&(Zt=qr.x,Re=qr.y)});var mr=b.arrowwidth,Dr=b.arrowcolor,yr=b.arrowside,Br=K.append("g").style({opacity:t.opacity(Dr)}).classed("annotation-arrow-g",!0),Kr=Br.append("path").attr("d","M"+Zt+","+Re+"L"+Dt+","+Bt).style("stroke-width",mr+"px").call(t.stroke,t.rgb(Dr));if(f(Kr,yr,b),P.annotationPosition&&Kr.node().parentNode&&!w){var an=Dt,Ln=Bt;if(b.standoff){var Pn=Math.sqrt(Math.pow(Dt-Zt,2)+Math.pow(Bt-Re,2));an+=b.standoff*(Zt-Dt)/Pn,Ln+=b.standoff*(Re-Bt)/Pn}var An,tn,zr=Br.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Zt-an)+","+(Re-Ln),transform:e(an,Ln)}).style("stroke-width",mr+6+"px").call(t.stroke,"rgba(0,0,0,0)").call(t.fill,"rgba(0,0,0,0)");a.init({element:zr.node(),gd:c,prepFn:function(){var Ar=i.getTranslate(R);An=Ar.x,tn=Ar.y,_&&_.autorange&&E(_._name+".autorange",!0),T&&T.autorange&&E(T._name+".autorange",!0)},moveFn:function(Ar,qr){var On=Vt(An,tn),Fr=On[0]+Ar,on=On[1]+qr;R.call(i.setTranslate,Fr,on),D("x",v(_,Ar,"x",I,b)),D("y",v(T,qr,"y",I,b)),b.axref===b.xref&&D("ax",v(_,Ar,"ax",I,b)),b.ayref===b.yref&&D("ay",v(T,qr,"ay",I,b)),Br.attr("transform",e(Ar,qr)),Z.attr({transform:"rotate("+Q+","+Fr+","+on+")"})},doneFn:function(){p.call("_guiRelayout",c,F());var Ar=document.querySelector(".js-notes-box-panel");Ar&&Ar.redraw(Ar.selectedObj)}})}}};b.showarrow&&Pt(0,0),$&&a.init({element:R.node(),gd:c,prepFn:function(){Ct=Z.attr("transform")},moveFn:function(Ke,mt){var Dt="pointer";if(b.showarrow)b.axref===b.xref?D("ax",v(_,Ke,"ax",I,b)):D("ax",b.ax+Ke),b.ayref===b.yref?D("ay",v(T,mt,"ay",I.w,b)):D("ay",b.ay+mt),Pt(Ke,mt);else{if(w)return;var Bt,Zt;if(_)Bt=v(_,Ke,"x",I,b);else{var Re=b._xsize/I.w,ct=b.x+(b._xshift-b.xshift)/I.w-Re/2;Bt=a.align(ct+Ke/I.w,Re,0,1,b.xanchor)}if(T)Zt=v(T,mt,"y",I,b);else{var wt=b._ysize/I.h,Rt=b.y-(b._yshift+b.yshift)/I.h-wt/2;Zt=a.align(Rt-mt/I.h,wt,0,1,b.yanchor)}D("x",Bt),D("y",Zt),_&&T||(Dt=a.getCursor(_?.5:Bt,T?.5:Zt,b.xanchor,b.yanchor))}Z.attr({transform:e(Ke,mt)+Ct}),s(R,Dt)},clickFn:function(Ke,mt){b.captureevents&&c.emit("plotly_clickannotation",oe(mt))},doneFn:function(){s(R),p.call("_guiRelayout",c,F());var Ke=document.querySelector(".js-notes-box-panel");Ke&&Ke.redraw(Ke.selectedObj)}})}}}q.exports={draw:function(c){var b=c._fullLayout;b._infolayer.selectAll(".annotation").remove();for(var g=0;g<b.annotations.length;g++)b.annotations[g].visible&&d(c,g);return x.previousPromises(c)},drawOne:d,drawRaw:m}},{"../../lib":503,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../fx":406,"./draw_arrow_head":356,"@plotly/d3":58}],356:[function(u,q,W){var o=u("@plotly/d3"),p=u("../color"),x=u("./arrow_paths"),y=u("../../lib"),e=y.strScale,r=y.strRotate,t=y.strTranslate;q.exports=function(i,n,h){var s,a,l,f,d=i.node(),v=x[h.arrowhead||0],m=x[h.startarrowhead||0],c=(h.arrowwidth||1)*(h.arrowsize||1),b=(h.arrowwidth||1)*(h.startarrowsize||1),g=n.indexOf("start")>=0,w=n.indexOf("end")>=0,_=v.backoff*c+h.standoff,T=m.backoff*b+h.startstandoff;if(d.nodeName==="line"){s={x:+i.attr("x1"),y:+i.attr("y1")},a={x:+i.attr("x2"),y:+i.attr("y2")};var k=s.x-a.x,L=s.y-a.y;if(f=(l=Math.atan2(L,k))+Math.PI,_&&T&&_+T>Math.sqrt(k*k+L*L))return void K();if(_){if(_*_>k*k+L*L)return void K();var M=_*Math.cos(l),I=_*Math.sin(l);a.x+=M,a.y+=I,i.attr({x2:a.x,y2:a.y})}if(T){if(T*T>k*k+L*L)return void K();var P=T*Math.cos(l),S=T*Math.sin(l);s.x-=P,s.y-=S,i.attr({x1:s.x,y1:s.y})}}else if(d.nodeName==="path"){var E=d.getTotalLength(),D="";if(E<_+T)return void K();var F=d.getPointAtLength(0),H=d.getPointAtLength(.1);l=Math.atan2(F.y-H.y,F.x-H.x),s=d.getPointAtLength(Math.min(T,E)),D="0px,"+T+"px,";var V=d.getPointAtLength(E),Q=d.getPointAtLength(E-.1);f=Math.atan2(V.y-Q.y,V.x-Q.x),a=d.getPointAtLength(Math.max(0,E-_)),D+=E-(D?T+_:_)+"px,"+E+"px",i.style("stroke-dasharray",D)}function K(){i.style("stroke-dasharray","0px,100px")}function Z($,re,R,N){$.path&&($.noRotate&&(R=0),o.select(d.parentNode).append("path").attr({class:i.attr("class"),d:$.path,transform:t(re.x,re.y)+r(180*R/Math.PI)+e(N)}).style({fill:p.rgb(h.arrowcolor),"stroke-width":0}))}g&&Z(m,s,l,b),w&&Z(v,a,f,c)}},{"../../lib":503,"../color":366,"./arrow_paths":348,"@plotly/d3":58}],357:[function(u,q,W){var o=u("./draw"),p=u("./click");q.exports={moduleType:"component",name:"annotations",layoutAttributes:u("./attributes"),supplyLayoutDefaults:u("./defaults"),includeBasePlot:u("../../plots/cartesian/include_components")("annotations"),calcAutorange:u("./calc_autorange"),draw:o.draw,drawOne:o.drawOne,drawRaw:o.drawRaw,hasClickToShow:p.hasClickToShow,onClick:p.onClick,convertCoords:u("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":349,"./calc_autorange":350,"./click":351,"./convert_coords":353,"./defaults":354,"./draw":355}],358:[function(u,q,W){var o=u("../annotations/attributes"),p=u("../../plot_api/edit_types").overrideAll,x=u("../../plot_api/plot_template").templatedArray;q.exports=p(x("annotation",{visible:o.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:o.xanchor,xshift:o.xshift,yanchor:o.yanchor,yshift:o.yshift,text:o.text,textangle:o.textangle,font:o.font,width:o.width,height:o.height,opacity:o.opacity,align:o.align,valign:o.valign,bgcolor:o.bgcolor,bordercolor:o.bordercolor,borderpad:o.borderpad,borderwidth:o.borderwidth,showarrow:o.showarrow,arrowcolor:o.arrowcolor,arrowhead:o.arrowhead,startarrowhead:o.startarrowhead,arrowside:o.arrowside,arrowsize:o.arrowsize,startarrowsize:o.startarrowsize,arrowwidth:o.arrowwidth,standoff:o.standoff,startstandoff:o.startstandoff,hovertext:o.hovertext,hoverlabel:o.hoverlabel,captureevents:o.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../annotations/attributes":349}],359:[function(u,q,W){var o=u("../../lib"),p=u("../../plots/cartesian/axes");function x(y,e){var r=e.fullSceneLayout.domain,t=e.fullLayout._size,i={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};y._xa={},o.extendFlat(y._xa,i),p.setConvert(y._xa),y._xa._offset=t.l+r.x[0]*t.w,y._xa.l2p=function(){return .5*(1+y._pdata[0]/y._pdata[3])*t.w*(r.x[1]-r.x[0])},y._ya={},o.extendFlat(y._ya,i),p.setConvert(y._ya),y._ya._offset=t.t+(1-r.y[1])*t.h,y._ya.l2p=function(){return .5*(1-y._pdata[1]/y._pdata[3])*t.h*(r.y[1]-r.y[0])}}q.exports=function(y){for(var e=y.fullSceneLayout.annotations,r=0;r<e.length;r++)x(e[r],y);y.fullLayout._infolayer.selectAll(".annotation-"+y.id).remove()}},{"../../lib":503,"../../plots/cartesian/axes":554}],360:[function(u,q,W){var o=u("../../lib"),p=u("../../plots/cartesian/axes"),x=u("../../plots/array_container_defaults"),y=u("../annotations/common_defaults"),e=u("./attributes");function r(t,i,n,h){function s(l,f){return o.coerce(t,i,e,l,f)}function a(l){var f=l+"axis",d={_fullLayout:{}};return d._fullLayout[f]=n[f],p.coercePosition(i,d,s,l,l,.5)}s("visible")&&(y(t,i,h.fullLayout,s),a("x"),a("y"),a("z"),o.noneOrAll(t,i,["x","y","z"]),i.xref="x",i.yref="y",i.zref="z",s("xanchor"),s("yanchor"),s("xshift"),s("yshift"),i.showarrow&&(i.axref="pixel",i.ayref="pixel",s("ax",-10),s("ay",-30),o.noneOrAll(t,i,["ax","ay"])))}q.exports=function(t,i,n){x(t,i,{name:"annotations",handleItemDefaults:r,fullLayout:n.fullLayout})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../annotations/common_defaults":352,"./attributes":358}],361:[function(u,q,W){var o=u("../annotations/draw").drawRaw,p=u("../../plots/gl3d/project"),x=["x","y","z"];q.exports=function(y){for(var e=y.fullSceneLayout,r=y.dataScale,t=e.annotations,i=0;i<t.length;i++){for(var n=t[i],h=!1,s=0;s<3;s++){var a=x[s],l=n[a],f=e[a+"axis"].r2fraction(l);if(f<0||f>1){h=!0;break}}h?y.fullLayout._infolayer.select(".annotation-"+y.id+'[data-index="'+i+'"]').remove():(n._pdata=p(y.glplot.cameraParams,[e.xaxis.r2l(n.x)*r[0],e.yaxis.r2l(n.y)*r[1],e.zaxis.r2l(n.z)*r[2]]),o(y.graphDiv,n,i,y.id,n._xa,n._ya))}}},{"../../plots/gl3d/project":607,"../annotations/draw":355}],362:[function(u,q,W){var o=u("../../registry"),p=u("../../lib");q.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:u("./attributes")}}},layoutAttributes:u("./attributes"),handleDefaults:u("./defaults"),includeBasePlot:function(x,y){var e=o.subplotsRegistry.gl3d;if(!!e)for(var r=e.attrRegex,t=Object.keys(x),i=0;i<t.length;i++){var n=t[i];r.test(n)&&(x[n].annotations||[]).length&&(p.pushUnique(y._basePlotModules,e),p.pushUnique(y._subplots.gl3d,n))}},convert:u("./convert"),draw:u("./draw")}},{"../../lib":503,"../../registry":638,"./attributes":358,"./convert":359,"./defaults":360,"./draw":361}],363:[function(u,q,W){q.exports=u("world-calendars/dist/main"),u("world-calendars/dist/plus"),u("world-calendars/dist/calendars/chinese"),u("world-calendars/dist/calendars/coptic"),u("world-calendars/dist/calendars/discworld"),u("world-calendars/dist/calendars/ethiopian"),u("world-calendars/dist/calendars/hebrew"),u("world-calendars/dist/calendars/islamic"),u("world-calendars/dist/calendars/julian"),u("world-calendars/dist/calendars/mayan"),u("world-calendars/dist/calendars/nanakshahi"),u("world-calendars/dist/calendars/nepali"),u("world-calendars/dist/calendars/persian"),u("world-calendars/dist/calendars/taiwan"),u("world-calendars/dist/calendars/thai"),u("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":332,"world-calendars/dist/calendars/coptic":333,"world-calendars/dist/calendars/discworld":334,"world-calendars/dist/calendars/ethiopian":335,"world-calendars/dist/calendars/hebrew":336,"world-calendars/dist/calendars/islamic":337,"world-calendars/dist/calendars/julian":338,"world-calendars/dist/calendars/mayan":339,"world-calendars/dist/calendars/nanakshahi":340,"world-calendars/dist/calendars/nepali":341,"world-calendars/dist/calendars/persian":342,"world-calendars/dist/calendars/taiwan":343,"world-calendars/dist/calendars/thai":344,"world-calendars/dist/calendars/ummalqura":345,"world-calendars/dist/main":346,"world-calendars/dist/plus":347}],364:[function(u,q,W){var o=u("./calendars"),p=u("../../lib"),x=u("../../constants/numerical"),y=x.EPOCHJD,e=x.ONEDAY,r={valType:"enumerated",values:p.sortObjectKeys(o.calendars),editType:"calc",dflt:"gregorian"},t=function(m,c,b,g){var w={};return w[b]=r,p.coerce(m,c,w,b,g)},i={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},n={};function h(m){var c=n[m];return c||(c=n[m]=o.instance(m))}function s(m){return p.extendFlat({},r,{description:m})}function a(m){return"Sets the calendar system to use with `"+m+"` date data."}var l={xcalendar:s(a("x"))},f=p.extendFlat({},l,{ycalendar:s(a("y"))}),d=p.extendFlat({},f,{zcalendar:s(a("z"))}),v=s(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));q.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:f,bar:f,box:f,heatmap:f,contour:f,histogram:f,histogram2d:f,histogram2dcontour:f,scatter3d:d,surface:d,mesh3d:d,scattergl:f,ohlc:l,candlestick:l},layout:{calendar:s(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:v},yaxis:{calendar:v},scene:{xaxis:{calendar:v},yaxis:{calendar:v},zaxis:{calendar:v}},polar:{radialaxis:{calendar:v}}},transforms:{filter:{valuecalendar:s(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:s(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:r,handleDefaults:t,handleTraceDefaults:function(m,c,b,g){for(var w=0;w<b.length;w++)t(m,c,b[w]+"calendar",g.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:h,worldCalFmt:function(m,c,b){for(var g,w,_,T,k,L=Math.floor((c+.05)/e)+y,M=h(b).fromJD(L),I=0;(I=m.indexOf("%",I))!==-1;)(g=m.charAt(I+1))==="0"||g==="-"||g==="_"?(_=3,w=m.charAt(I+2),g==="_"&&(g="-")):(w=g,g="0",_=2),(T=i[w])?(k=T==="##"?"##":M.formatDate(T[g]),m=m.substr(0,I)+k+m.substr(I+_),I+=k.length):I+=_;return m}}},{"../../constants/numerical":479,"../../lib":503,"./calendars":363}],365:[function(u,q,W){W.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],W.defaultLine="#444",W.lightLine="#eee",W.background="#fff",W.borderLine="#BEC8D9",W.lightFraction=1e3/11},{}],366:[function(u,q,W){var o=u("tinycolor2"),p=u("fast-isnumeric"),x=u("../../lib/array").isTypedArray,y=q.exports={},e=u("./attributes");y.defaults=e.defaults;var r=y.defaultLine=e.defaultLine;y.lightLine=e.lightLine;var t=y.background=e.background;function i(n){if(p(n)||typeof n!="string")return n;var h=n.trim();if(h.substr(0,3)!=="rgb")return n;var s=h.match(/^rgba?\s*\(([^()]*)\)$/);if(!s)return n;var a=s[1].trim().split(/\s*[\s,]\s*/),l=h.charAt(3)==="a"&&a.length===4;if(!l&&a.length!==3)return n;for(var f=0;f<a.length;f++){if(!a[f].length||(a[f]=Number(a[f]),!(a[f]>=0)))return n;if(f===3)a[f]>1&&(a[f]=1);else if(a[f]>=1)return n}var d=Math.round(255*a[0])+", "+Math.round(255*a[1])+", "+Math.round(255*a[2]);return l?"rgba("+d+", "+a[3]+")":"rgb("+d+")"}y.tinyRGB=function(n){var h=n.toRgb();return"rgb("+Math.round(h.r)+", "+Math.round(h.g)+", "+Math.round(h.b)+")"},y.rgb=function(n){return y.tinyRGB(o(n))},y.opacity=function(n){return n?o(n).getAlpha():0},y.addOpacity=function(n,h){var s=o(n).toRgb();return"rgba("+Math.round(s.r)+", "+Math.round(s.g)+", "+Math.round(s.b)+", "+h+")"},y.combine=function(n,h){var s=o(n).toRgb();if(s.a===1)return o(n).toRgbString();var a=o(h||t).toRgb(),l=a.a===1?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a},f={r:l.r*(1-s.a)+s.r*s.a,g:l.g*(1-s.a)+s.g*s.a,b:l.b*(1-s.a)+s.b*s.a};return o(f).toRgbString()},y.contrast=function(n,h,s){var a=o(n);return a.getAlpha()!==1&&(a=o(y.combine(n,t))),(a.isDark()?h?a.lighten(h):t:s?a.darken(s):r).toString()},y.stroke=function(n,h){var s=o(h);n.style({stroke:y.tinyRGB(s),"stroke-opacity":s.getAlpha()})},y.fill=function(n,h){var s=o(h);n.style({fill:y.tinyRGB(s),"fill-opacity":s.getAlpha()})},y.clean=function(n){if(n&&typeof n=="object"){var h,s,a,l,f=Object.keys(n);for(h=0;h<f.length;h++)if(l=n[a=f[h]],a.substr(a.length-5)==="color")if(Array.isArray(l))for(s=0;s<l.length;s++)l[s]=i(l[s]);else n[a]=i(l);else if(a.substr(a.length-10)==="colorscale"&&Array.isArray(l))for(s=0;s<l.length;s++)Array.isArray(l[s])&&(l[s][1]=i(l[s][1]));else if(Array.isArray(l)){var d=l[0];if(!Array.isArray(d)&&d&&typeof d=="object")for(s=0;s<l.length;s++)y.clean(l[s])}else l&&typeof l=="object"&&!x(l)&&y.clean(l)}}},{"../../lib/array":485,"./attributes":365,"fast-isnumeric":190,tinycolor2:312}],367:[function(u,q,W){var o=u("../../plots/cartesian/layout_attributes"),p=u("../../plots/font_attributes"),x=u("../../lib/extend").extendFlat,y=u("../../plot_api/edit_types").overrideAll;q.exports=y({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:o.linecolor,outlinewidth:o.linewidth,bordercolor:o.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:o.tickmode,nticks:o.nticks,tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:x({},o.ticks,{dflt:""}),ticklabeloverflow:x({},o.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,showticklabels:o.showticklabels,tickfont:p({}),tickangle:o.tickangle,tickformat:o.tickformat,tickformatstops:o.tickformatstops,tickprefix:o.tickprefix,showtickprefix:o.showtickprefix,ticksuffix:o.ticksuffix,showticksuffix:o.showticksuffix,separatethousands:o.separatethousands,exponentformat:o.exponentformat,minexponent:o.minexponent,showexponent:o.showexponent,title:{text:{valType:"string"},font:p({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:p({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],368:[function(u,q,W){q.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],369:[function(u,q,W){var o=u("../../lib"),p=u("../../plot_api/plot_template"),x=u("../../plots/cartesian/tick_value_defaults"),y=u("../../plots/cartesian/tick_mark_defaults"),e=u("../../plots/cartesian/tick_label_defaults"),r=u("../../plots/cartesian/prefix_suffix_defaults"),t=u("./attributes");q.exports=function(i,n,h){var s=p.newContainer(n,"colorbar"),a=i.colorbar||{};function l(L,M){return o.coerce(a,s,t,L,M)}var f=h.margin||{t:0,b:0,l:0,r:0},d=h.width-f.l-f.r,v=h.height-f.t-f.b,m=l("orientation")==="v",c=l("thicknessmode");l("thickness",c==="fraction"?30/(m?d:v):30);var b=l("lenmode");l("len",b==="fraction"?1:m?v:d),l("x",m?1.02:.5),l("xanchor",m?"left":"center"),l("xpad"),l("y",m?.5:1.02),l("yanchor",m?"middle":"bottom"),l("ypad"),o.noneOrAll(a,s,["x","y"]),l("outlinecolor"),l("outlinewidth"),l("bordercolor"),l("borderwidth"),l("bgcolor");var g=o.coerce(a,s,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:m?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");l("ticklabeloverflow",g.indexOf("inside")!==-1?"hide past domain":"hide past div"),x(a,s,l,"linear");var w=h.font,_={outerTicks:!1,font:w};g.indexOf("inside")!==-1&&(_.bgColor="black"),r(a,s,l,"linear",_),e(a,s,l,"linear",_),y(a,s,l,"linear",_),l("title.text",h._dfltTitle.colorbar);var T=s.tickfont,k=o.extendFlat({},T,{color:w.color,size:o.bigFont(T.size)});o.coerceFont(l,"title.font",k),l("title.side",m?"top":"right")}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"./attributes":367}],370:[function(u,q,W){var o=u("@plotly/d3"),p=u("tinycolor2"),x=u("../../plots/plots"),y=u("../../registry"),e=u("../../plots/cartesian/axes"),r=u("../dragelement"),t=u("../../lib"),i=t.strTranslate,n=u("../../lib/extend").extendFlat,h=u("../../lib/setcursor"),s=u("../drawing"),a=u("../color"),l=u("../titles"),f=u("../../lib/svg_text_utils"),d=u("../colorscale/helpers").flipScale,v=u("../../plots/cartesian/axis_defaults"),m=u("../../plots/cartesian/position_defaults"),c=u("../../plots/cartesian/layout_attributes"),b=u("../../constants/alignment"),g=b.LINE_SPACING,w=b.FROM_TL,_=b.FROM_BR,T=u("./constants").cn;q.exports={draw:function(k){var L=k._fullLayout._infolayer.selectAll("g."+T.colorbar).data(function(M){var I,P,S,E,D=M._fullLayout,F=M.calcdata,H=[];function V(Y){return n(Y,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function Q(){typeof E.calc=="function"?E.calc(M,S,I):(I._fillgradient=P.reversescale?d(P.colorscale):P.colorscale,I._zrange=[P[E.min],P[E.max]])}for(var K=0;K<F.length;K++){var Z=F[K],$=(S=Z[0].trace)._module.colorbar;if(S.visible===!0&&$)for(var re=Array.isArray($),R=re?$:[$],N=0;N<R.length;N++){var U=(E=R[N]).container;(P=U?S[U]:S)&&P.showscale&&((I=V(P.colorbar))._id="cb"+S.uid+(re&&U?"-"+U:""),I._traceIndex=S.index,I._propPrefix=(U?U+".":"")+"colorbar.",I._meta=S._meta,Q(),H.push(I))}}for(var te in D._colorAxes)if((P=D[te]).showscale){var j=D._colorAxes[te];(I=V(P.colorbar))._id="cb"+te,I._propPrefix=te+".colorbar.",I._meta=D._meta,E={min:"cmin",max:"cmax"},j[0]!=="heatmap"&&(S=j[1],E.calc=S._module.colorbar.calc),Q(),H.push(I)}return H}(k),function(M){return M._id});L.enter().append("g").attr("class",function(M){return M._id}).classed(T.colorbar,!0),L.each(function(M){var I=o.select(this);t.ensureSingle(I,"rect",T.cbbg),t.ensureSingle(I,"g",T.cbfills),t.ensureSingle(I,"g",T.cblines),t.ensureSingle(I,"g",T.cbaxis,function(S){S.classed(T.crisp,!0)}),t.ensureSingle(I,"g",T.cbtitleunshift,function(S){S.append("g").classed(T.cbtitle,!0)}),t.ensureSingle(I,"rect",T.cboutline);var P=function(S,E,D){var F=E.orientation==="v",H=E.len,V=E.lenmode,Q=E.thickness,K=E.thicknessmode,Z=E.outlinewidth,$=E.borderwidth,re=E.bgcolor,R=E.xanchor,N=E.yanchor,U=E.xpad,te=E.ypad,j=E.x,Y=F?E.y:1-E.y,J=D._fullLayout,ee=J._size,ne=E._fillcolor,se=E._line,oe=E.title,he=oe.side,le=E._zrange||o.extent((typeof ne=="function"?ne:se.color).domain()),de=typeof se.color=="function"?se.color:function(){return se.color},xe=typeof ne=="function"?ne:function(){return ne},we=E._levels,be=function(Be,Je,Se){var Pe,De,Ie=Je._levels,$e=[],st=[],dt=Ie.end+Ie.size/100,ut=Ie.size,Lt=1.001*Se[0]-.001*Se[1],lt=1.001*Se[1]-.001*Se[0];for(De=0;De<1e5&&(Pe=Ie.start+De*ut,!(ut>0?Pe>=dt:Pe<=dt));De++)Pe>Lt&&Pe<lt&&$e.push(Pe);if(Je._fillgradient)st=[0];else if(typeof Je._fillcolor=="function"){var Ct=Je._filllevels;if(Ct)for(dt=Ct.end+Ct.size/100,ut=Ct.size,De=0;De<1e5&&(Pe=Ct.start+De*ut,!(ut>0?Pe>=dt:Pe<=dt));De++)Pe>Se[0]&&Pe<Se[1]&&st.push(Pe);else(st=$e.map(function(Pt){return Pt-Ie.size/2})).push(st[st.length-1]+Ie.size)}else Je._fillcolor&&typeof Je._fillcolor=="string"&&(st=[0]);return Ie.size<0&&($e.reverse(),st.reverse()),{line:$e,fill:st}}(0,E,le),Ae=be.fill,fe=be.line,me=Math.round(Q*(K==="fraction"?F?ee.w:ee.h:1)),ke=me/(F?ee.w:ee.h),Te=Math.round(H*(V==="fraction"?F?ee.h:ee.w:1)),Me=Te/(F?ee.h:ee.w),Oe=Math.round(F?j*ee.w+U:Y*ee.h+te),Fe={center:.5,right:1}[R]||0,qe={top:1,middle:.5}[N]||0,et=F?j-Fe*ke:Y-qe*ke,ze=F?Y-qe*Me:j-Fe*Me,Ue=Math.round(F?ee.h*(1-ze):ee.w*ze);E._lenFrac=Me,E._thickFrac=ke,E._uFrac=et,E._vFrac=ze;var We=E._axis=function(Be,Je,Se){var Pe=Be._fullLayout,De=Je.orientation==="v",Ie={type:"linear",range:Se,tickmode:Je.tickmode,nticks:Je.nticks,tick0:Je.tick0,dtick:Je.dtick,tickvals:Je.tickvals,ticktext:Je.ticktext,ticks:Je.ticks,ticklen:Je.ticklen,tickwidth:Je.tickwidth,tickcolor:Je.tickcolor,showticklabels:Je.showticklabels,ticklabelposition:Je.ticklabelposition,ticklabeloverflow:Je.ticklabeloverflow,tickfont:Je.tickfont,tickangle:Je.tickangle,tickformat:Je.tickformat,exponentformat:Je.exponentformat,minexponent:Je.minexponent,separatethousands:Je.separatethousands,showexponent:Je.showexponent,showtickprefix:Je.showtickprefix,tickprefix:Je.tickprefix,showticksuffix:Je.showticksuffix,ticksuffix:Je.ticksuffix,title:Je.title,showline:!0,anchor:"free",side:De?"right":"bottom",position:1},$e=De?"y":"x",st={type:"linear",_id:$e+Je._id},dt={letter:$e,font:Pe.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:Pe.calendar};function ut(Lt,lt){return t.coerce(Ie,st,c,Lt,lt)}return v(Ie,st,ut,dt,Pe),m(Ie,st,ut,dt),st}(D,E,le);We.position=ke+(F?j+U/ee.w:Y+te/ee.h);var Ze=["top","bottom"].indexOf(he)!==-1;if(F&&Ze&&(We.title.side=he,We.titlex=j+U/ee.w,We.titley=ze+(oe.side==="top"?Me-te/ee.h:te/ee.h)),F||Ze||(We.title.side=he,We.titley=Y+te/ee.h,We.titlex=ze+U/ee.w),se.color&&E.tickmode==="auto"){We.tickmode="linear",We.tick0=we.start;var nt=we.size,ft=t.constrain(Te/50,4,15)+1,xt=(le[1]-le[0])/((E.nticks||ft)*nt);if(xt>1){var It=Math.pow(10,Math.floor(Math.log(xt)/Math.LN10));nt*=It*t.roundUp(xt/It,[2,5,10]),(Math.abs(we.start)/we.size+1e-6)%1<2e-6&&(We.tick0=0)}We.dtick=nt}We.domain=F?[ze+te/ee.h,ze+Me-te/ee.h]:[ze+U/ee.w,ze+Me-U/ee.w],We.setScale(),S.attr("transform",i(Math.round(ee.l),Math.round(ee.t)));var Et,it=S.select("."+T.cbtitleunshift).attr("transform",i(-Math.round(ee.l),-Math.round(ee.t))),rt=We.ticklabelposition,At=We.title.font.size,Gt=S.select("."+T.cbaxis),Qt=0,Ve=0;function Ye(Be,Je){var Se={propContainer:We,propName:E._propPrefix+"title",traceIndex:E._traceIndex,_meta:E._meta,placeholder:J._dfltTitle.colorbar,containerGroup:S.select("."+T.cbtitle)},Pe=Be.charAt(0)==="h"?Be.substr(1):"h"+Be;S.selectAll("."+Pe+",."+Pe+"-math-group").remove(),l.draw(D,Be,n(Se,Je||{}))}return t.syncOrAsync([x.previousPromises,function(){var Be,Je;(F&&Ze||!F&&!Ze)&&(he==="top"&&(Be=U+ee.l+ee.w*j,Je=te+ee.t+ee.h*(1-ze-Me)+3+.75*At),he==="bottom"&&(Be=U+ee.l+ee.w*j,Je=te+ee.t+ee.h*(1-ze)-3-.25*At),he==="right"&&(Je=te+ee.t+ee.h*Y+3+.75*At,Be=U+ee.l+ee.w*ze),Ye(We._id+"title",{attributes:{x:Be,y:Je,"text-anchor":F?"start":"middle"}}))},function(){if(!F&&!Ze||F&&Ze){var Be,Je=S.select("."+T.cbtitle),Se=Je.select("text"),Pe=[-Z/2,Z/2],De=Je.select(".h"+We._id+"title-math-group").node(),Ie=15.6;if(Se.node()&&(Ie=parseInt(Se.node().style.fontSize,10)*g),De?(Be=s.bBox(De),Ve=Be.width,(Qt=Be.height)>Ie&&(Pe[1]-=(Qt-Ie)/2)):Se.node()&&!Se.classed(T.jsPlaceholder)&&(Be=s.bBox(Se.node()),Ve=Be.width,Qt=Be.height),F){if(Qt){if(Qt+=5,he==="top")We.domain[1]-=Qt/ee.h,Pe[1]*=-1;else{We.domain[0]+=Qt/ee.h;var $e=f.lineCount(Se);Pe[1]+=(1-$e)*Ie}Je.attr("transform",i(Pe[0],Pe[1])),We.setScale()}}else Ve&&(he==="right"&&(We.domain[0]+=(Ve+At/2)/ee.w),Je.attr("transform",i(Pe[0],Pe[1])),We.setScale())}S.selectAll("."+T.cbfills+",."+T.cblines).attr("transform",F?i(0,Math.round(ee.h*(1-We.domain[1]))):i(Math.round(ee.w*We.domain[0]),0)),Gt.attr("transform",F?i(0,Math.round(-ee.t)):i(Math.round(-ee.l),0));var st=S.select("."+T.cbfills).selectAll("rect."+T.cbfill).attr("style","").data(Ae);st.enter().append("rect").classed(T.cbfill,!0).style("stroke","none"),st.exit().remove();var dt=le.map(We.c2p).map(Math.round).sort(function(Pt,Ke){return Pt-Ke});st.each(function(Pt,Ke){var mt=[Ke===0?le[0]:(Ae[Ke]+Ae[Ke-1])/2,Ke===Ae.length-1?le[1]:(Ae[Ke]+Ae[Ke+1])/2].map(We.c2p).map(Math.round);F&&(mt[1]=t.constrain(mt[1]+(mt[1]>mt[0])?1:-1,dt[0],dt[1]));var Dt=o.select(this).attr(F?"x":"y",Oe).attr(F?"y":"x",o.min(mt)).attr(F?"width":"height",Math.max(me,2)).attr(F?"height":"width",Math.max(o.max(mt)-o.min(mt),2));if(E._fillgradient)s.gradient(Dt,D,E._id,F?"vertical":"horizontalreversed",E._fillgradient,"fill");else{var Bt=xe(Pt).replace("e-","");Dt.attr("fill",p(Bt).toHexString())}});var ut=S.select("."+T.cblines).selectAll("path."+T.cbline).data(se.color&&se.width?fe:[]);ut.enter().append("path").classed(T.cbline,!0),ut.exit().remove(),ut.each(function(Pt){var Ke=Oe,mt=Math.round(We.c2p(Pt))+se.width/2%1;o.select(this).attr("d","M"+(F?Ke+","+mt:mt+","+Ke)+(F?"h":"v")+me).call(s.lineGroupStyle,se.width,de(Pt),se.dash)}),Gt.selectAll("g."+We._id+"tick,path").remove();var Lt=Oe+me+(Z||0)/2-(E.ticks==="outside"?1:0),lt=e.calcTicks(We),Ct=e.getTickSigns(We)[2];return e.drawTicks(D,We,{vals:We.ticks==="inside"?e.clipEnds(We,lt):lt,layer:Gt,path:e.makeTickPath(We,Lt,Ct),transFn:e.makeTransTickFn(We)}),e.drawLabels(D,We,{vals:lt,layer:Gt,transFn:e.makeTransTickLabelFn(We),labelFns:e.makeLabelFns(We,Lt)})},function(){if(F&&!Ze||!F&&Ze){var Be,Je,Se=We.position||0,Pe=We._offset+We._length/2;if(he==="right")Je=Pe,Be=ee.l+ee.w*Se+10+At*(We.showticklabels?1:.5);else if(Be=Pe,he==="bottom"&&(Je=ee.t+ee.h*Se+10+(rt.indexOf("inside")===-1?We.tickfont.size:0)+(We.ticks!=="intside"&&E.ticklen||0)),he==="top"){var De=oe.text.split("<br>").length;Je=ee.t+ee.h*Se+10-me-g*At*De}Ye((F?"h":"v")+We._id+"title",{avoid:{selection:o.select(D).selectAll("g."+We._id+"tick"),side:he,offsetTop:F?0:ee.t,offsetLeft:F?ee.l:0,maxShift:F?J.width:J.height},attributes:{x:Be,y:Je,"text-anchor":"middle"},transform:{rotate:F?-90:0,offset:0}})}},x.previousPromises,function(){var Be,Je=me+Z/2;rt.indexOf("inside")===-1&&(Be=s.bBox(Gt.node()),Je+=F?Be.width:Be.height),Et=it.select("text");var Se=0,Pe=F&&he==="top",De=!F&&he==="right",Ie=0;if(Et.node()&&!Et.classed(T.jsPlaceholder)){var $e,st=it.select(".h"+We._id+"title-math-group").node();st&&(F&&Ze||!F&&!Ze)?(Se=(Be=s.bBox(st)).width,$e=Be.height):(Se=(Be=s.bBox(it.node())).right-ee.l-(F?Oe:Ue),$e=Be.bottom-ee.t-(F?Ue:Oe),F||he!=="top"||(Je+=Be.height,Ie=Be.height)),De&&(Et.attr("transform",i(Se/2+At/2,0)),Se*=2),Je=Math.max(Je,F?Se:$e)}var dt=2*(F?U:te)+Je+$+Z/2,ut=0;!F&&oe.text&&N==="bottom"&&Y<=0&&(dt+=ut=dt/2,Ie+=ut),J._hColorbarMoveTitle=ut,J._hColorbarMoveCBTitle=Ie;var Lt=$+Z;S.select("."+T.cbbg).attr("x",(F?Oe:Ue)-Lt/2-(F?U:0)).attr("y",(F?Ue:Oe)-(F?Te:te+Ie-ut)).attr(F?"width":"height",Math.max(dt-ut,2)).attr(F?"height":"width",Math.max(Te+Lt,2)).call(a.fill,re).call(a.stroke,E.bordercolor).style("stroke-width",$);var lt=De?Math.max(Se-10,0):0;if(S.selectAll("."+T.cboutline).attr("x",(F?Oe:Ue+U)+lt).attr("y",(F?Ue+te-Te:Oe)+(Pe?Qt:0)).attr(F?"width":"height",Math.max(me,2)).attr(F?"height":"width",Math.max(Te-(F?2*te+Qt:2*U+lt),2)).call(a.stroke,E.outlinecolor).style({fill:"none","stroke-width":Z}),S.attr("transform",i(ee.l-(F?Fe*dt:0),ee.t-(F?0:(1-qe)*dt-Ie))),!F&&($||p(re).getAlpha()&&!p.equals(J.paper_bgcolor,re))){var Ct=Gt.selectAll("text"),Pt=Ct[0].length,Ke=S.select("."+T.cbbg).node(),mt=s.bBox(Ke),Dt=s.getTranslate(S);Ct.each(function(Vt,rr){var qt=Pt-1;if(rr===0||rr===qt){var Jt,or=s.bBox(this),gr=s.getTranslate(this);if(rr===qt){var dr=or.right+gr.x;(Jt=mt.right+Dt.x+Ue-$-2+j-dr)>0&&(Jt=0)}else if(rr===0){var ur=or.left+gr.x;(Jt=mt.left+Dt.x+Ue+$+2-ur)<0&&(Jt=0)}Jt&&(Pt<3?this.setAttribute("transform","translate("+Jt+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Bt={},Zt=w[R],Re=_[R],ct=w[N],wt=_[N],Rt=dt-me;F?(V==="pixels"?(Bt.y=Y,Bt.t=Te*ct,Bt.b=Te*wt):(Bt.t=Bt.b=0,Bt.yt=Y+H*ct,Bt.yb=Y-H*wt),K==="pixels"?(Bt.x=j,Bt.l=dt*Zt,Bt.r=dt*Re):(Bt.l=Rt*Zt,Bt.r=Rt*Re,Bt.xl=j-Q*Zt,Bt.xr=j+Q*Re)):(V==="pixels"?(Bt.x=j,Bt.l=Te*Zt,Bt.r=Te*Re):(Bt.l=Bt.r=0,Bt.xl=j+H*Zt,Bt.xr=j-H*Re),K==="pixels"?(Bt.y=1-Y,Bt.t=dt*ct,Bt.b=dt*wt):(Bt.t=Rt*ct,Bt.b=Rt*wt,Bt.yt=Y-Q*ct,Bt.yb=Y+Q*wt)),x.autoMargin(D,E._id,Bt)}],D)}(I,M,k);P&&P.then&&(k._promises||[]).push(P),k._context.edits.colorbarPosition&&function(S,E,D){var F,H,V,Q=E.orientation==="v",K=D._fullLayout._size;r.init({element:S.node(),gd:D,prepFn:function(){F=S.attr("transform"),h(S)},moveFn:function(Z,$){S.attr("transform",F+i(Z,$)),H=r.align((Q?E._uFrac:E._vFrac)+Z/K.w,Q?E._thickFrac:E._lenFrac,0,1,E.xanchor),V=r.align((Q?E._vFrac:1-E._uFrac)-$/K.h,Q?E._lenFrac:E._thickFrac,0,1,E.yanchor);var re=r.getCursor(H,V,E.xanchor,E.yanchor);h(S,re)},doneFn:function(){if(h(S),H!==void 0&&V!==void 0){var Z={};Z[E._propPrefix+"x"]=H,Z[E._propPrefix+"y"]=V,E._traceIndex!==void 0?y.call("_guiRestyle",D,Z,E._traceIndex):y.call("_guiRelayout",D,Z)}}})}(I,M,k)}),L.exit().each(function(M){x.autoMargin(k,M._id)}).remove(),L.order()}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/extend":493,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"../../plots/plots":619,"../../registry":638,"../color":366,"../colorscale/helpers":377,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":368,"@plotly/d3":58,tinycolor2:312}],371:[function(u,q,W){var o=u("../../lib");q.exports=function(p){return o.isPlainObject(p.colorbar)}},{"../../lib":503}],372:[function(u,q,W){q.exports={moduleType:"component",name:"colorbar",attributes:u("./attributes"),supplyDefaults:u("./defaults"),draw:u("./draw").draw,hasColorbar:u("./has_colorbar")}},{"./attributes":367,"./defaults":369,"./draw":370,"./has_colorbar":371}],373:[function(u,q,W){var o=u("../colorbar/attributes"),p=u("../../lib/regex").counter,x=u("../../lib/sort_object_keys"),y=u("./scales.js").scales;x(y);function e(r){return"`"+r+"`"}q.exports=function(r,t){r=r||"";var i,n=(t=t||{}).cLetter||"c",h=("onlyIfNumerical"in t?t.onlyIfNumerical:Boolean(r),"noScale"in t?t.noScale:r==="marker.line"),s="showScaleDflt"in t?t.showScaleDflt:n==="z",a=typeof t.colorscaleDflt=="string"?y[t.colorscaleDflt]:null,l=t.editTypeOverride||"",f=r?r+".":"";"colorAttr"in t?(i=t.colorAttr,t.colorAttr):e(f+(i={z:"z",c:"color"}[n]));var d=n+"auto",v=n+"min",m=n+"max",c=n+"mid",b={};b[v]=b[m]=void 0;var g={};g[d]=!1;var w={};return i==="color"&&(w.color={valType:"color",arrayOk:!0,editType:l||"style"},t.anim&&(w.color.anim=!0)),w[d]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:b},w[v]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:g},w[m]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:g},w[c]={valType:"number",dflt:null,editType:"calc",impliedEdits:b},w.colorscale={valType:"colorscale",editType:"calc",dflt:a,impliedEdits:{autocolorscale:!1}},w.autocolorscale={valType:"boolean",dflt:t.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},w.reversescale={valType:"boolean",dflt:!1,editType:"plot"},h||(w.showscale={valType:"boolean",dflt:s,editType:"calc"},w.colorbar=o),t.noColorAxis||(w.coloraxis={valType:"subplotid",regex:p("coloraxis"),dflt:null,editType:"calc"}),w}},{"../../lib/regex":520,"../../lib/sort_object_keys":526,"../colorbar/attributes":367,"./scales.js":381}],374:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../lib"),x=u("./helpers").extractOpts;q.exports=function(y,e,r){var t,i=y._fullLayout,n=r.vals,h=r.containerStr,s=h?p.nestedProperty(e,h).get():e,a=x(s),l=a.auto!==!1,f=a.min,d=a.max,v=a.mid,m=function(){return p.aggNums(Math.min,null,n)},c=function(){return p.aggNums(Math.max,null,n)};f===void 0?f=m():l&&(f=s._colorAx&&o(f)?Math.min(f,m()):m()),d===void 0?d=c():l&&(d=s._colorAx&&o(d)?Math.max(d,c()):c()),l&&v!==void 0&&(d-v>v-f?f=v-(d-v):d-v<v-f&&(d=v+(v-f))),f===d&&(f-=.5,d+=.5),a._sync("min",f),a._sync("max",d),a.autocolorscale&&(t=f*d<0?i.colorscale.diverging:f>=0?i.colorscale.sequential:i.colorscale.sequentialminus,a._sync("colorscale",t))}},{"../../lib":503,"./helpers":377,"fast-isnumeric":190}],375:[function(u,q,W){var o=u("../../lib"),p=u("./helpers").hasColorscale,x=u("./helpers").extractOpts;q.exports=function(y,e){function r(l,f){var d=l["_"+f];d!==void 0&&(l[f]=d)}function t(l,f){var d=f.container?o.nestedProperty(l,f.container).get():l;if(d)if(d.coloraxis)d._colorAx=e[d.coloraxis];else{var v=x(d),m=v.auto;(m||v.min===void 0)&&r(d,f.min),(m||v.max===void 0)&&r(d,f.max),v.autocolorscale&&r(d,"colorscale")}}for(var i=0;i<y.length;i++){var n=y[i],h=n._module.colorbar;if(h)if(Array.isArray(h))for(var s=0;s<h.length;s++)t(n,h[s]);else t(n,h);p(n,"marker.line")&&t(n,{container:"marker.line",min:"cmin",max:"cmax"})}for(var a in e._colorAxes)t(e[a],{min:"cmin",max:"cmax"})}},{"../../lib":503,"./helpers":377}],376:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../lib"),x=u("../colorbar/has_colorbar"),y=u("../colorbar/defaults"),e=u("./scales").isValid,r=u("../../registry").traceIs;function t(i,n){var h=n.slice(0,n.length-1);return n?p.nestedProperty(i,h).get()||{}:i}q.exports=function i(n,h,s,a,l){var f=l.prefix,d=l.cLetter,v="_module"in h,m=t(n,f),c=t(h,f),b=t(h._template||{},f)||{},g=function(){return delete n.coloraxis,delete h.coloraxis,i(n,h,s,a,l)};if(v){var w=s._colorAxes||{},_=a(f+"coloraxis");if(_){var T=r(h,"contour")&&p.nestedProperty(h,"contours.coloring").get()||"heatmap",k=w[_];return void(k?(k[2].push(g),k[0]!==T&&(k[0]=!1,p.warn(["Ignoring coloraxis:",_,"setting","as it is linked to incompatible colorscales."].join(" ")))):w[_]=[T,h,[g]])}}var L=m[d+"min"],M=m[d+"max"],I=o(L)&&o(M)&&L<M;a(f+d+"auto",!I)?a(f+d+"mid"):(a(f+d+"min"),a(f+d+"max"));var P,S,E=m.colorscale,D=b.colorscale;E!==void 0&&(P=!e(E)),D!==void 0&&(P=!e(D)),a(f+"autocolorscale",P),a(f+"colorscale"),a(f+"reversescale"),f!=="marker.line."&&(f&&v&&(S=x(m)),a(f+"showscale",S)&&(f&&b&&(c._template=b),y(m,c,s)))}},{"../../lib":503,"../../registry":638,"../colorbar/defaults":369,"../colorbar/has_colorbar":371,"./scales":381,"fast-isnumeric":190}],377:[function(u,q,W){var o=u("@plotly/d3"),p=u("tinycolor2"),x=u("fast-isnumeric"),y=u("../../lib"),e=u("../color"),r=u("./scales").isValid,t=["showscale","autocolorscale","colorscale","reversescale","colorbar"],i=["min","max","mid","auto"];function n(f){var d,v,m,c=f._colorAx,b=c||f,g={};for(v=0;v<t.length;v++)g[m=t[v]]=b[m];if(c)for(d="c",v=0;v<i.length;v++)g[m=i[v]]=b["c"+m];else{var w;for(v=0;v<i.length;v++)((w="c"+(m=i[v]))in b||(w="z"+m)in b)&&(g[m]=b[w]);d=w.charAt(0)}return g._sync=function(_,T){var k=i.indexOf(_)!==-1?d+_:_;b[k]=b["_"+k]=T},g}function h(f){for(var d=n(f),v=d.min,m=d.max,c=d.reversescale?s(d.colorscale):d.colorscale,b=c.length,g=new Array(b),w=new Array(b),_=0;_<b;_++){var T=c[_];g[_]=v+T[0]*(m-v),w[_]=T[1]}return{domain:g,range:w}}function s(f){for(var d=f.length,v=new Array(d),m=d-1,c=0;m>=0;m--,c++){var b=f[m];v[c]=[1-b[0],b[1]]}return v}function a(f,d){d=d||{};for(var v=f.domain,m=f.range,c=m.length,b=new Array(c),g=0;g<c;g++){var w=p(m[g]).toRgb();b[g]=[w.r,w.g,w.b,w.a]}var _,T=o.scale.linear().domain(v).range(b).clamp(!0),k=d.noNumericCheck,L=d.returnArray;return(_=k&&L?T:k?function(M){return l(T(M))}:L?function(M){return x(M)?T(M):p(M).isValid()?M:e.defaultLine}:function(M){return x(M)?l(T(M)):p(M).isValid()?M:e.defaultLine}).domain=T.domain,_.range=function(){return m},_}function l(f){var d={r:f[0],g:f[1],b:f[2],a:f[3]};return p(d).toRgbString()}q.exports={hasColorscale:function(f,d,v){var m=d?y.nestedProperty(f,d).get()||{}:f,c=m[v||"color"],b=!1;if(y.isArrayOrTypedArray(c)){for(var g=0;g<c.length;g++)if(x(c[g])){b=!0;break}}return y.isPlainObject(m)&&(b||m.showscale===!0||x(m.cmin)&&x(m.cmax)||r(m.colorscale)||y.isPlainObject(m.colorbar))},extractOpts:n,extractScale:h,flipScale:s,makeColorScaleFunc:a,makeColorScaleFuncFromTrace:function(f,d){return a(h(f),d)}}},{"../../lib":503,"../color":366,"./scales":381,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],378:[function(u,q,W){var o=u("./scales"),p=u("./helpers");q.exports={moduleType:"component",name:"colorscale",attributes:u("./attributes"),layoutAttributes:u("./layout_attributes"),supplyLayoutDefaults:u("./layout_defaults"),handleDefaults:u("./defaults"),crossTraceDefaults:u("./cross_trace_defaults"),calc:u("./calc"),scales:o.scales,defaultScale:o.defaultScale,getScale:o.get,isValidScale:o.isValid,hasColorscale:p.hasColorscale,extractOpts:p.extractOpts,extractScale:p.extractScale,flipScale:p.flipScale,makeColorScaleFunc:p.makeColorScaleFunc,makeColorScaleFuncFromTrace:p.makeColorScaleFuncFromTrace}},{"./attributes":373,"./calc":374,"./cross_trace_defaults":375,"./defaults":376,"./helpers":377,"./layout_attributes":379,"./layout_defaults":380,"./scales":381}],379:[function(u,q,W){var o=u("../../lib/extend").extendFlat,p=u("./attributes"),x=u("./scales").scales;q.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:x.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:x.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:x.RdBu,editType:"calc"}},coloraxis:o({_isSubplotObj:!0,editType:"calc"},p("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":493,"./attributes":373,"./scales":381}],380:[function(u,q,W){var o=u("../../lib"),p=u("../../plot_api/plot_template"),x=u("./layout_attributes"),y=u("./defaults");q.exports=function(e,r){function t(d,v){return o.coerce(e,r,x,d,v)}t("colorscale.sequential"),t("colorscale.sequentialminus"),t("colorscale.diverging");var i,n,h=r._colorAxes;function s(d,v){return o.coerce(i,n,x.coloraxis,d,v)}for(var a in h){var l=h[a];if(l[0])i=e[a]||{},(n=p.newContainer(r,a,"coloraxis"))._name=a,y(i,n,r,s,{prefix:"",cLetter:"c"});else{for(var f=0;f<l[2].length;f++)l[2][f]();delete r._colorAxes[a]}}}},{"../../lib":503,"../../plot_api/plot_template":543,"./defaults":376,"./layout_attributes":379}],381:[function(u,q,W){var o=u("tinycolor2"),p={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},x=p.RdBu;function y(e){var r=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||+e[0][0]!=0||+e[e.length-1][0]!=1)return!1;for(var t=0;t<e.length;t++){var i=e[t];if(i.length!==2||+i[0]<r||!o(i[1]).isValid())return!1;r=+i[0]}return!0}q.exports={scales:p,defaultScale:x,get:function(e,r){if(r||(r=x),!e)return r;function t(){try{e=p[e]||JSON.parse(e)}catch{e=r}}return typeof e=="string"&&(t(),typeof e=="string"&&t()),y(e)?e:r},isValid:function(e){return p[e]!==void 0||y(e)}}},{tinycolor2:312}],382:[function(u,q,W){q.exports=function(o,p,x,y,e){var r=(o-x)/(y-x),t=r+p/(y-x),i=(r+t)/2;return e==="left"||e==="bottom"?r:e==="center"||e==="middle"?i:e==="right"||e==="top"?t:r<2/3-i?r:t>4/3-i?t:i}},{}],383:[function(u,q,W){var o=u("../../lib"),p=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];q.exports=function(x,y,e,r){return x=e==="left"?0:e==="center"?1:e==="right"?2:o.constrain(Math.floor(3*x),0,2),y=r==="bottom"?0:r==="middle"?1:r==="top"?2:o.constrain(Math.floor(3*y),0,2),p[y][x]}},{"../../lib":503}],384:[function(u,q,W){W.selectMode=function(o){return o==="lasso"||o==="select"},W.drawMode=function(o){return o==="drawclosedpath"||o==="drawopenpath"||o==="drawline"||o==="drawrect"||o==="drawcircle"},W.openMode=function(o){return o==="drawline"||o==="drawopenpath"},W.rectMode=function(o){return o==="select"||o==="drawline"||o==="drawrect"||o==="drawcircle"},W.freeMode=function(o){return o==="lasso"||o==="drawclosedpath"||o==="drawopenpath"},W.selectingOrDrawing=function(o){return W.freeMode(o)||W.rectMode(o)}},{}],385:[function(u,q,W){var o=u("mouse-event-offset"),p=u("has-hover"),x=u("has-passive-events"),y=u("../../lib").removeElement,e=u("../../plots/cartesian/constants"),r=q.exports={};r.align=u("./align"),r.getCursor=u("./cursor");var t=u("./unhover");function i(){var h=document.createElement("div");h.className="dragcover";var s=h.style;return s.position="fixed",s.left=0,s.right=0,s.top=0,s.bottom=0,s.zIndex=999999999,s.background="none",document.body.appendChild(h),h}function n(h){return o(h.changedTouches?h.changedTouches[0]:h,document.body)}r.unhover=t.wrapped,r.unhoverRaw=t.raw,r.init=function(h){var s,a,l,f,d,v,m,c,b=h.gd,g=1,w=b._context.doubleClickDelay,_=h.element;b._mouseDownTime||(b._mouseDownTime=0),_.style.pointerEvents="all",_.onmousedown=k,x?(_._ontouchstart&&_.removeEventListener("touchstart",_._ontouchstart),_._ontouchstart=k,_.addEventListener("touchstart",k,{passive:!1})):_.ontouchstart=k;var T=h.clampFn||function(I,P,S){return Math.abs(I)<S&&(I=0),Math.abs(P)<S&&(P=0),[I,P]};function k(I){b._dragged=!1,b._dragging=!0;var P=n(I);s=P[0],a=P[1],m=I.target,v=I,c=I.buttons===2||I.ctrlKey,I.clientX===void 0&&I.clientY===void 0&&(I.clientX=s,I.clientY=a),(l=new Date().getTime())-b._mouseDownTime<w?g+=1:(g=1,b._mouseDownTime=l),h.prepFn&&h.prepFn(I,s,a),p&&!c?(d=i()).style.cursor=window.getComputedStyle(_).cursor:p||(d=document,f=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(_).cursor),document.addEventListener("mouseup",M),document.addEventListener("touchend",M),h.dragmode!==!1&&(I.preventDefault(),document.addEventListener("mousemove",L),document.addEventListener("touchmove",L,{passive:!1}))}function L(I){I.preventDefault();var P=n(I),S=h.minDrag||e.MINDRAG,E=T(P[0]-s,P[1]-a,S),D=E[0],F=E[1];(D||F)&&(b._dragged=!0,r.unhover(b,I)),b._dragged&&h.moveFn&&!c&&(b._dragdata={element:_,dx:D,dy:F},h.moveFn(D,F))}function M(I){if(delete b._dragdata,h.dragmode!==!1&&(I.preventDefault(),document.removeEventListener("mousemove",L),document.removeEventListener("touchmove",L)),document.removeEventListener("mouseup",M),document.removeEventListener("touchend",M),p?y(d):f&&(d.documentElement.style.cursor=f,f=null),b._dragging){if(b._dragging=!1,new Date().getTime()-b._mouseDownTime>w&&(g=Math.max(g-1,1)),b._dragged)h.doneFn&&h.doneFn();else if(h.clickFn&&h.clickFn(g,v),!c){var P;try{P=new MouseEvent("click",I)}catch{var S=n(I);(P=document.createEvent("MouseEvents")).initMouseEvent("click",I.bubbles,I.cancelable,I.view,I.detail,I.screenX,I.screenY,S[0],S[1],I.ctrlKey,I.altKey,I.shiftKey,I.metaKey,I.button,I.relatedTarget)}m.dispatchEvent(P)}b._dragging=!1,b._dragged=!1}else b._dragged=!1}},r.coverSlip=i},{"../../lib":503,"../../plots/cartesian/constants":561,"./align":382,"./cursor":383,"./unhover":386,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],386:[function(u,q,W){var o=u("../../lib/events"),p=u("../../lib/throttle"),x=u("../../lib/dom").getGraphDiv,y=u("../fx/constants"),e=q.exports={};e.wrapped=function(r,t,i){(r=x(r))._fullLayout&&p.clear(r._fullLayout._uid+y.HOVERID),e.raw(r,t,i)},e.raw=function(r,t){var i=r._fullLayout,n=r._hoverdata;t||(t={}),t.target&&!r._dragged&&o.triggerHandler(r,"plotly_beforehover",t)===!1||(i._hoverlayer.selectAll("g").remove(),i._hoverlayer.selectAll("line").remove(),i._hoverlayer.selectAll("circle").remove(),r._hoverdata=void 0,t.target&&n&&r.emit("plotly_unhover",{event:t,points:n}))}},{"../../lib/dom":491,"../../lib/events":492,"../../lib/throttle":530,"../fx/constants":400}],387:[function(u,q,W){W.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},W.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],388:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../lib"),x=p.numberFormat,y=u("fast-isnumeric"),e=u("tinycolor2"),r=u("../../registry"),t=u("../color"),i=u("../colorscale"),n=p.strTranslate,h=u("../../lib/svg_text_utils"),s=u("../../constants/xmlns_namespaces"),a=u("../../constants/alignment").LINE_SPACING,l=u("../../constants/interactions").DESELECTDIM,f=u("../../traces/scatter/subtypes"),d=u("../../traces/scatter/make_bubble_size_func"),v=u("../../components/fx/helpers").appendArrayPointValue,m=q.exports={};m.font=function(K,Z,$,re){p.isPlainObject(Z)&&(re=Z.color,$=Z.size,Z=Z.family),Z&&K.style("font-family",Z),$+1&&K.style("font-size",$+"px"),re&&K.call(t.fill,re)},m.setPosition=function(K,Z,$){K.attr("x",Z).attr("y",$)},m.setSize=function(K,Z,$){K.attr("width",Z).attr("height",$)},m.setRect=function(K,Z,$,re,R){K.call(m.setPosition,Z,$).call(m.setSize,re,R)},m.translatePoint=function(K,Z,$,re){var R=$.c2p(K.x),N=re.c2p(K.y);return!!(y(R)&&y(N)&&Z.node())&&(Z.node().nodeName==="text"?Z.attr("x",R).attr("y",N):Z.attr("transform",n(R,N)),!0)},m.translatePoints=function(K,Z,$){K.each(function(re){var R=o.select(this);m.translatePoint(re,R,Z,$)})},m.hideOutsideRangePoint=function(K,Z,$,re,R,N){Z.attr("display",$.isPtWithinRange(K,R)&&re.isPtWithinRange(K,N)?null:"none")},m.hideOutsideRangePoints=function(K,Z){if(Z._hasClipOnAxisFalse){var $=Z.xaxis,re=Z.yaxis;K.each(function(R){var N=R[0].trace,U=N.xcalendar,te=N.ycalendar,j=r.traceIs(N,"bar-like")?".bartext":".point,.textpoint";K.selectAll(j).each(function(Y){m.hideOutsideRangePoint(Y,o.select(this),$,re,U,te)})})}},m.crispRound=function(K,Z,$){return Z&&y(Z)?K._context.staticPlot?Z:Z<1?1:Math.round(Z):$||0},m.singleLineStyle=function(K,Z,$,re,R){Z.style("fill","none");var N=(((K||[])[0]||{}).trace||{}).line||{},U=$||N.width||0,te=R||N.dash||"";t.stroke(Z,re||N.color),m.dashLine(Z,te,U)},m.lineGroupStyle=function(K,Z,$,re){K.style("fill","none").each(function(R){var N=(((R||[])[0]||{}).trace||{}).line||{},U=Z||N.width||0,te=re||N.dash||"";o.select(this).call(t.stroke,$||N.color).call(m.dashLine,te,U)})},m.dashLine=function(K,Z,$){$=+$||0,Z=m.dashStyle(Z,$),K.style({"stroke-dasharray":Z,"stroke-width":$+"px"})},m.dashStyle=function(K,Z){Z=+Z||1;var $=Math.max(Z,3);return K==="solid"?K="":K==="dot"?K=$+"px,"+$+"px":K==="dash"?K=3*$+"px,"+3*$+"px":K==="longdash"?K=5*$+"px,"+5*$+"px":K==="dashdot"?K=3*$+"px,"+$+"px,"+$+"px,"+$+"px":K==="longdashdot"&&(K=5*$+"px,"+2*$+"px,"+$+"px,"+2*$+"px"),K},m.singleFillStyle=function(K){var Z=(((o.select(K.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;Z&&K.call(t.fill,Z)},m.fillGroupStyle=function(K){K.style("stroke-width",0).each(function(Z){var $=o.select(this);Z[0].trace&&$.call(t.fill,Z[0].trace.fillcolor)})};var c=u("./symbol_defs");m.symbolNames=[],m.symbolFuncs=[],m.symbolNeedLines={},m.symbolNoDot={},m.symbolNoFill={},m.symbolList=[],Object.keys(c).forEach(function(K){var Z=c[K],$=Z.n;m.symbolList.push($,String($),K,$+100,String($+100),K+"-open"),m.symbolNames[$]=K,m.symbolFuncs[$]=Z.f,Z.needLine&&(m.symbolNeedLines[$]=!0),Z.noDot?m.symbolNoDot[$]=!0:m.symbolList.push($+200,String($+200),K+"-dot",$+300,String($+300),K+"-open-dot"),Z.noFill&&(m.symbolNoFill[$]=!0)});var b=m.symbolNames.length;function g(K,Z){var $=K%100;return m.symbolFuncs[$](Z)+(K>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}m.symbolNumber=function(K){if(y(K))K=+K;else if(typeof K=="string"){var Z=0;K.indexOf("-open")>0&&(Z=100,K=K.replace("-open","")),K.indexOf("-dot")>0&&(Z+=200,K=K.replace("-dot","")),(K=m.symbolNames.indexOf(K))>=0&&(K+=Z)}return K%100>=b||K>=400?0:Math.floor(Math.max(K,0))};var w={x1:1,x2:0,y1:0,y2:0},_={x1:0,x2:0,y1:1,y2:0},T=x("~f"),k={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:w},horizontalreversed:{node:"linearGradient",attrs:w,reversed:!0},vertical:{node:"linearGradient",attrs:_},verticalreversed:{node:"linearGradient",attrs:_,reversed:!0}};m.gradient=function(K,Z,$,re,R,N){for(var U=R.length,te=k[re],j=new Array(U),Y=0;Y<U;Y++)te.reversed?j[U-1-Y]=[T(100*(1-R[Y][0])),R[Y][1]]:j[Y]=[T(100*R[Y][0]),R[Y][1]];var J=Z._fullLayout,ee="g"+J._uid+"-"+$,ne=J._defs.select(".gradients").selectAll("#"+ee).data([re+j.join(";")],p.identity);ne.exit().remove(),ne.enter().append(te.node).each(function(){var he=o.select(this);te.attrs&&he.attr(te.attrs),he.attr("id",ee);var le=he.selectAll("stop").data(j);le.exit().remove(),le.enter().append("stop"),le.each(function(de){var xe=e(de[1]);o.select(this).attr({offset:de[0]+"%","stop-color":t.tinyRGB(xe),"stop-opacity":xe.getAlpha()})})}),K.style(N,H(ee,Z)).style(N+"-opacity",null);var se=function(he){return"."+he.attr("class").replace(/\s/g,".")},oe=se(o.select(K.node().parentNode))+">"+se(K);J._gradientUrlQueryParts[oe]=1},m.pattern=function(K,Z,$,re,R,N,U,te,j,Y,J,ee){var ne=Z==="legend";te&&(j==="overlay"?(Y=te,J=t.contrast(Y)):(Y=void 0,J=te));var se,oe,he,le,de,xe,we,be,Ae,fe,me,ke=$._fullLayout,Te="p"+ke._uid+"-"+re,Me={};switch(R){case"/":se=N*Math.sqrt(2),oe=N*Math.sqrt(2),xe="path",Me={d:he="M-"+se/4+","+oe/4+"l"+se/2+",-"+oe/2+"M0,"+oe+"L"+se+",0M"+se/4*3+","+oe/4*5+"l"+se/2+",-"+oe/2,opacity:ee,stroke:J,"stroke-width":(le=U*N)+"px"};break;case"\\":se=N*Math.sqrt(2),oe=N*Math.sqrt(2),xe="path",Me={d:he="M"+se/4*3+",-"+oe/4+"l"+se/2+","+oe/2+"M0,0L"+se+","+oe+"M-"+se/4+","+oe/4*3+"l"+se/2+","+oe/2,opacity:ee,stroke:J,"stroke-width":(le=U*N)+"px"};break;case"x":se=N*Math.sqrt(2),oe=N*Math.sqrt(2),he="M-"+se/4+","+oe/4+"l"+se/2+",-"+oe/2+"M0,"+oe+"L"+se+",0M"+se/4*3+","+oe/4*5+"l"+se/2+",-"+oe/2+"M"+se/4*3+",-"+oe/4+"l"+se/2+","+oe/2+"M0,0L"+se+","+oe+"M-"+se/4+","+oe/4*3+"l"+se/2+","+oe/2,le=N-N*Math.sqrt(1-U),xe="path",Me={d:he,opacity:ee,stroke:J,"stroke-width":le+"px"};break;case"|":xe="path",xe="path",Me={d:he="M"+(se=N)/2+",0L"+se/2+","+(oe=N),opacity:ee,stroke:J,"stroke-width":(le=U*N)+"px"};break;case"-":xe="path",xe="path",Me={d:he="M0,"+(oe=N)/2+"L"+(se=N)+","+oe/2,opacity:ee,stroke:J,"stroke-width":(le=U*N)+"px"};break;case"+":xe="path",he="M"+(se=N)/2+",0L"+se/2+","+(oe=N)+"M0,"+oe/2+"L"+se+","+oe/2,le=N-N*Math.sqrt(1-U),xe="path",Me={d:he,opacity:ee,stroke:J,"stroke-width":le+"px"};break;case".":se=N,oe=N,U<Math.PI/4?de=Math.sqrt(U*N*N/Math.PI):(we=U,be=Math.PI/4,Ae=1,fe=N/2,me=N/Math.sqrt(2),de=fe+(me-fe)*(we-be)/(Ae-be)),xe="circle",Me={cx:se/2,cy:oe/2,r:de,opacity:ee,fill:J}}var Oe=[R||"noSh",Y||"noBg",J||"noFg",N,U].join(";"),Fe=ke._defs.select(".patterns").selectAll("#"+Te).data([Oe],p.identity);Fe.exit().remove(),Fe.enter().append("pattern").each(function(){var et=o.select(this);if(et.attr({id:Te,width:se+"px",height:oe+"px",patternUnits:"userSpaceOnUse",patternTransform:ne?"scale(0.8)":""}),Y){var ze=et.selectAll("rect").data([0]);ze.exit().remove(),ze.enter().append("rect").attr({width:se+"px",height:oe+"px",fill:Y})}var Ue=et.selectAll(xe).data([0]);Ue.exit().remove(),Ue.enter().append(xe).attr(Me)}),K.style("fill",H(Te,$)).style("fill-opacity",null),K.classed("pattern_filled",!0);var qe="."+o.select(K.node().parentNode).attr("class").replace(/\s/g,".")+">.pattern_filled";ke._patternUrlQueryParts[qe]=1},m.initGradients=function(K){var Z=K._fullLayout;p.ensureSingle(Z._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),Z._gradientUrlQueryParts={}},m.initPatterns=function(K){var Z=K._fullLayout;p.ensureSingle(Z._defs,"g","patterns").selectAll("pattern").remove(),Z._patternUrlQueryParts={}},m.getPatternAttr=function(K,Z,$){return K&&p.isArrayOrTypedArray(K)?Z<K.length?K[Z]:$:K},m.pointStyle=function(K,Z,$){if(K.size()){var re=m.makePointStyleFns(Z);K.each(function(R){m.singlePointStyle(R,o.select(this),Z,re,$)})}},m.singlePointStyle=function(K,Z,$,re,R){var N=$.marker,U=N.line;if(Z.style("opacity",re.selectedOpacityFn?re.selectedOpacityFn(K):K.mo===void 0?N.opacity:K.mo),re.ms2mrc){var te;te=K.ms==="various"||N.size==="various"?3:re.ms2mrc(K.ms),K.mrc=te,re.selectedSizeFn&&(te=K.mrc=re.selectedSizeFn(K));var j=m.symbolNumber(K.mx||N.symbol)||0;K.om=j%200>=100,Z.attr("d",g(j,te))}var Y,J,ee,ne=!1;if(K.so)ee=U.outlierwidth,J=U.outliercolor,Y=N.outliercolor;else{var se=(U||{}).width;ee=(K.mlw+1||se+1||(K.trace?(K.trace.marker.line||{}).width:0)+1)-1||0,J="mlc"in K?K.mlcc=re.lineScale(K.mlc):p.isArrayOrTypedArray(U.color)?t.defaultLine:U.color,p.isArrayOrTypedArray(N.color)&&(Y=t.defaultLine,ne=!0),Y="mc"in K?K.mcc=re.markerScale(K.mc):N.color||"rgba(0,0,0,0)",re.selectedColorFn&&(Y=re.selectedColorFn(K))}if(K.om)Z.call(t.stroke,Y).style({"stroke-width":(ee||1)+"px",fill:"none"});else{Z.style("stroke-width",(K.isBlank?0:ee)+"px");var oe=N.gradient,he=K.mgt;he?ne=!0:he=oe&&oe.type,p.isArrayOrTypedArray(he)&&(he=he[0],k[he]||(he=0));var le=N.pattern,de=le&&m.getPatternAttr(le.shape,K.i,"");if(he&&he!=="none"){var xe=K.mgc;xe?ne=!0:xe=oe.color;var we=$.uid;ne&&(we+="-"+K.i),m.gradient(Z,R,we,he,[[0,xe],[1,Y]],"fill")}else if(de){var be=m.getPatternAttr(le.bgcolor,K.i,null),Ae=m.getPatternAttr(le.fgcolor,K.i,null),fe=le.fgopacity,me=m.getPatternAttr(le.size,K.i,8),ke=m.getPatternAttr(le.solidity,K.i,.3),Te=K.mcc||p.isArrayOrTypedArray(le.shape)||p.isArrayOrTypedArray(le.bgcolor)||p.isArrayOrTypedArray(le.size)||p.isArrayOrTypedArray(le.solidity),Me=$.uid;Te&&(Me+="-"+K.i),m.pattern(Z,"point",R,Me,de,me,ke,K.mcc,le.fillmode,be,Ae,fe)}else t.fill(Z,Y);ee&&t.stroke(Z,J)}},m.makePointStyleFns=function(K){var Z={},$=K.marker;return Z.markerScale=m.tryColorscale($,""),Z.lineScale=m.tryColorscale($,"line"),r.traceIs(K,"symbols")&&(Z.ms2mrc=f.isBubble(K)?d(K):function(){return($.size||6)/2}),K.selectedpoints&&p.extendFlat(Z,m.makeSelectedPointStyleFns(K)),Z},m.makeSelectedPointStyleFns=function(K){var Z={},$=K.selected||{},re=K.unselected||{},R=K.marker||{},N=$.marker||{},U=re.marker||{},te=R.opacity,j=N.opacity,Y=U.opacity,J=j!==void 0,ee=Y!==void 0;(p.isArrayOrTypedArray(te)||J||ee)&&(Z.selectedOpacityFn=function(be){var Ae=be.mo===void 0?R.opacity:be.mo;return be.selected?J?j:Ae:ee?Y:l*Ae});var ne=R.color,se=N.color,oe=U.color;(se||oe)&&(Z.selectedColorFn=function(be){var Ae=be.mcc||ne;return be.selected?se||Ae:oe||Ae});var he=R.size,le=N.size,de=U.size,xe=le!==void 0,we=de!==void 0;return r.traceIs(K,"symbols")&&(xe||we)&&(Z.selectedSizeFn=function(be){var Ae=be.mrc||he/2;return be.selected?xe?le/2:Ae:we?de/2:Ae}),Z},m.makeSelectedTextStyleFns=function(K){var Z={},$=K.selected||{},re=K.unselected||{},R=K.textfont||{},N=$.textfont||{},U=re.textfont||{},te=R.color,j=N.color,Y=U.color;return Z.selectedTextColorFn=function(J){var ee=J.tc||te;return J.selected?j||ee:Y||(j?ee:t.addOpacity(ee,l))},Z},m.selectedPointStyle=function(K,Z){if(K.size()&&Z.selectedpoints){var $=m.makeSelectedPointStyleFns(Z),re=Z.marker||{},R=[];$.selectedOpacityFn&&R.push(function(N,U){N.style("opacity",$.selectedOpacityFn(U))}),$.selectedColorFn&&R.push(function(N,U){t.fill(N,$.selectedColorFn(U))}),$.selectedSizeFn&&R.push(function(N,U){var te=U.mx||re.symbol||0,j=$.selectedSizeFn(U);N.attr("d",g(m.symbolNumber(te),j)),U.mrc2=j}),R.length&&K.each(function(N){for(var U=o.select(this),te=0;te<R.length;te++)R[te](U,N)})}},m.tryColorscale=function(K,Z){var $=Z?p.nestedProperty(K,Z).get():K;if($){var re=$.color;if(($.colorscale||$._colorAx)&&p.isArrayOrTypedArray(re))return i.makeColorScaleFuncFromTrace($)}return p.identity};var L={start:1,end:-1,middle:0,bottom:1,top:-1};function M(K,Z,$,re,R){var N=o.select(K.node().parentNode),U=Z.indexOf("top")!==-1?"top":Z.indexOf("bottom")!==-1?"bottom":"middle",te=Z.indexOf("left")!==-1?"end":Z.indexOf("right")!==-1?"start":"middle",j=re?re/.8+1:0,Y=(h.lineCount(K)-1)*a+1,J=L[te]*j,ee=.75*$+L[U]*j+(L[U]-1)*Y*$/2;K.attr("text-anchor",te),R||N.attr("transform",n(J,ee))}function I(K,Z){var $=K.ts||Z.textfont.size;return y($)&&$>0?$:0}m.textPointStyle=function(K,Z,$){if(K.size()){var re;if(Z.selectedpoints){var R=m.makeSelectedTextStyleFns(Z);re=R.selectedTextColorFn}var N=Z.texttemplate,U=$._fullLayout;K.each(function(te){var j=o.select(this),Y=N?p.extractOption(te,Z,"txt","texttemplate"):p.extractOption(te,Z,"tx","text");if(Y||Y===0){if(N){var J=Z._module.formatLabels,ee=J?J(te,Z,U):{},ne={};v(ne,Z,te.i);var se=Z._meta||{};Y=p.texttemplateString(Y,ee,U._d3locale,ne,te,se)}var oe=te.tp||Z.textposition,he=I(te,Z),le=re?re(te):te.tc||Z.textfont.color;j.call(m.font,te.tf||Z.textfont.family,he,le).text(Y).call(h.convertToTspans,$).call(M,oe,he,te.mrc)}else j.remove()})}},m.selectedTextStyle=function(K,Z){if(K.size()&&Z.selectedpoints){var $=m.makeSelectedTextStyleFns(Z);K.each(function(re){var R=o.select(this),N=$.selectedTextColorFn(re),U=re.tp||Z.textposition,te=I(re,Z);t.fill(R,N);var j=r.traceIs(Z,"bar-like");M(R,U,te,re.mrc2||re.mrc,j)})}};function P(K,Z,$,re){var R=K[0]-Z[0],N=K[1]-Z[1],U=$[0]-Z[0],te=$[1]-Z[1],j=Math.pow(R*R+N*N,.25),Y=Math.pow(U*U+te*te,.25),J=(Y*Y*R-j*j*U)*re,ee=(Y*Y*N-j*j*te)*re,ne=3*Y*(j+Y),se=3*j*(j+Y);return[[o.round(Z[0]+(ne&&J/ne),2),o.round(Z[1]+(ne&&ee/ne),2)],[o.round(Z[0]-(se&&J/se),2),o.round(Z[1]-(se&&ee/se),2)]]}m.smoothopen=function(K,Z){if(K.length<3)return"M"+K.join("L");var $,re="M"+K[0],R=[];for($=1;$<K.length-1;$++)R.push(P(K[$-1],K[$],K[$+1],Z));for(re+="Q"+R[0][0]+" "+K[1],$=2;$<K.length-1;$++)re+="C"+R[$-2][1]+" "+R[$-1][0]+" "+K[$];return re+="Q"+R[K.length-3][1]+" "+K[K.length-1]},m.smoothclosed=function(K,Z){if(K.length<3)return"M"+K.join("L")+"Z";var $,re="M"+K[0],R=K.length-1,N=[P(K[R],K[0],K[1],Z)];for($=1;$<R;$++)N.push(P(K[$-1],K[$],K[$+1],Z));for(N.push(P(K[R-1],K[R],K[0],Z)),$=1;$<=R;$++)re+="C"+N[$-1][1]+" "+N[$][0]+" "+K[$];return re+="C"+N[R][1]+" "+N[0][0]+" "+K[0]+"Z"};var S={hv:function(K,Z){return"H"+o.round(Z[0],2)+"V"+o.round(Z[1],2)},vh:function(K,Z){return"V"+o.round(Z[1],2)+"H"+o.round(Z[0],2)},hvh:function(K,Z){return"H"+o.round((K[0]+Z[0])/2,2)+"V"+o.round(Z[1],2)+"H"+o.round(Z[0],2)},vhv:function(K,Z){return"V"+o.round((K[1]+Z[1])/2,2)+"H"+o.round(Z[0],2)+"V"+o.round(Z[1],2)}},E=function(K,Z){return"L"+o.round(Z[0],2)+","+o.round(Z[1],2)};m.steps=function(K){var Z=S[K]||E;return function($){for(var re="M"+o.round($[0][0],2)+","+o.round($[0][1],2),R=1;R<$.length;R++)re+=Z($[R-1],$[R]);return re}},m.makeTester=function(){var K=p.ensureSingleById(o.select("body"),"svg","js-plotly-tester",function($){$.attr(s.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),Z=p.ensureSingle(K,"path","js-reference-point",function($){$.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});m.tester=K,m.testref=Z},m.savedBBoxes={};var D=0;function F(K){var Z=K.getAttribute("data-unformatted");if(Z!==null)return Z+K.getAttribute("data-math")+K.getAttribute("text-anchor")+K.getAttribute("style")}function H(K,Z){if(!K)return null;var $=Z._context,re=$._exportedPlot?"":$._baseUrl||"";return re?"url('"+re+"#"+K+"')":"url(#"+K+")"}m.bBox=function(K,Z,$){var re,R,N;if($||($=F(K)),$){if(re=m.savedBBoxes[$])return p.extendFlat({},re)}else if(K.childNodes.length===1){var U=K.childNodes[0];if($=F(U)){var te=+U.getAttribute("x")||0,j=+U.getAttribute("y")||0,Y=U.getAttribute("transform");if(!Y){var J=m.bBox(U,!1,$);return te&&(J.left+=te,J.right+=te),j&&(J.top+=j,J.bottom+=j),J}if($+="~"+te+"~"+j+"~"+Y,re=m.savedBBoxes[$])return p.extendFlat({},re)}}Z?R=K:(N=m.tester.node(),R=K.cloneNode(!0),N.appendChild(R)),o.select(R).attr("transform",null).call(h.positionText,0,0);var ee=R.getBoundingClientRect(),ne=m.testref.node().getBoundingClientRect();Z||N.removeChild(R);var se={height:ee.height,width:ee.width,left:ee.left-ne.left,top:ee.top-ne.top,right:ee.right-ne.left,bottom:ee.bottom-ne.top};return D>=1e4&&(m.savedBBoxes={},D=0),$&&(m.savedBBoxes[$]=se),D++,p.extendFlat({},se)},m.setClipUrl=function(K,Z,$){K.attr("clip-path",H(Z,$))},m.getTranslate=function(K){var Z=(K[K.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function($,re,R){return[re,R].join(" ")}).split(" ");return{x:+Z[0]||0,y:+Z[1]||0}},m.setTranslate=function(K,Z,$){var re=K.attr?"attr":"getAttribute",R=K.attr?"attr":"setAttribute",N=K[re]("transform")||"";return Z=Z||0,$=$||0,N=N.replace(/(\btranslate\(.*?\);?)/,"").trim(),N=(N+=n(Z,$)).trim(),K[R]("transform",N),N},m.getScale=function(K){var Z=(K[K.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function($,re,R){return[re,R].join(" ")}).split(" ");return{x:+Z[0]||1,y:+Z[1]||1}},m.setScale=function(K,Z,$){var re=K.attr?"attr":"getAttribute",R=K.attr?"attr":"setAttribute",N=K[re]("transform")||"";return Z=Z||1,$=$||1,N=N.replace(/(\bscale\(.*?\);?)/,"").trim(),N=(N+="scale("+Z+","+$+")").trim(),K[R]("transform",N),N};var V=/\s*sc.*/;m.setPointGroupScale=function(K,Z,$){if(Z=Z||1,$=$||1,K){var re=Z===1&&$===1?"":"scale("+Z+","+$+")";K.each(function(){var R=(this.getAttribute("transform")||"").replace(V,"");R=(R+=re).trim(),this.setAttribute("transform",R)})}};var Q=/translate\([^)]*\)\s*$/;m.setTextPointsScale=function(K,Z,$){K&&K.each(function(){var re,R=o.select(this),N=R.select("text");if(N.node()){var U=parseFloat(N.attr("x")||0),te=parseFloat(N.attr("y")||0),j=(R.attr("transform")||"").match(Q);re=Z===1&&$===1?[]:[n(U,te),"scale("+Z+","+$+")",n(-U,-te)],j&&re.push(j),R.attr("transform",re.join(""))}})}},{"../../components/fx/helpers":402,"../../constants/alignment":471,"../../constants/interactions":478,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../registry":638,"../../traces/scatter/make_bubble_size_func":943,"../../traces/scatter/subtypes":951,"../color":366,"../colorscale":378,"./symbol_defs":389,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],389:[function(u,q,W){var o=u("@plotly/d3");q.exports={circle:{n:0,f:function(p){var x=o.round(p,2);return"M"+x+",0A"+x+","+x+" 0 1,1 0,-"+x+"A"+x+","+x+" 0 0,1 "+x+",0Z"}},square:{n:1,f:function(p){var x=o.round(p,2);return"M"+x+","+x+"H-"+x+"V-"+x+"H"+x+"Z"}},diamond:{n:2,f:function(p){var x=o.round(1.3*p,2);return"M"+x+",0L0,"+x+"L-"+x+",0L0,-"+x+"Z"}},cross:{n:3,f:function(p){var x=o.round(.4*p,2),y=o.round(1.2*p,2);return"M"+y+","+x+"H"+x+"V"+y+"H-"+x+"V"+x+"H-"+y+"V-"+x+"H-"+x+"V-"+y+"H"+x+"V-"+x+"H"+y+"Z"}},x:{n:4,f:function(p){var x=o.round(.8*p/Math.sqrt(2),2),y="l"+x+","+x,e="l"+x+",-"+x,r="l-"+x+",-"+x,t="l-"+x+","+x;return"M0,"+x+y+e+r+e+r+t+r+t+y+t+y+"Z"}},"triangle-up":{n:5,f:function(p){var x=o.round(2*p/Math.sqrt(3),2);return"M-"+x+","+o.round(p/2,2)+"H"+x+"L0,-"+o.round(p,2)+"Z"}},"triangle-down":{n:6,f:function(p){var x=o.round(2*p/Math.sqrt(3),2);return"M-"+x+",-"+o.round(p/2,2)+"H"+x+"L0,"+o.round(p,2)+"Z"}},"triangle-left":{n:7,f:function(p){var x=o.round(2*p/Math.sqrt(3),2);return"M"+o.round(p/2,2)+",-"+x+"V"+x+"L-"+o.round(p,2)+",0Z"}},"triangle-right":{n:8,f:function(p){var x=o.round(2*p/Math.sqrt(3),2);return"M-"+o.round(p/2,2)+",-"+x+"V"+x+"L"+o.round(p,2)+",0Z"}},"triangle-ne":{n:9,f:function(p){var x=o.round(.6*p,2),y=o.round(1.2*p,2);return"M-"+y+",-"+x+"H"+x+"V"+y+"Z"}},"triangle-se":{n:10,f:function(p){var x=o.round(.6*p,2),y=o.round(1.2*p,2);return"M"+x+",-"+y+"V"+x+"H-"+y+"Z"}},"triangle-sw":{n:11,f:function(p){var x=o.round(.6*p,2),y=o.round(1.2*p,2);return"M"+y+","+x+"H-"+x+"V-"+y+"Z"}},"triangle-nw":{n:12,f:function(p){var x=o.round(.6*p,2),y=o.round(1.2*p,2);return"M-"+x+","+y+"V-"+x+"H"+y+"Z"}},pentagon:{n:13,f:function(p){var x=o.round(.951*p,2),y=o.round(.588*p,2),e=o.round(-p,2),r=o.round(-.309*p,2);return"M"+x+","+r+"L"+y+","+o.round(.809*p,2)+"H-"+y+"L-"+x+","+r+"L0,"+e+"Z"}},hexagon:{n:14,f:function(p){var x=o.round(p,2),y=o.round(p/2,2),e=o.round(p*Math.sqrt(3)/2,2);return"M"+e+",-"+y+"V"+y+"L0,"+x+"L-"+e+","+y+"V-"+y+"L0,-"+x+"Z"}},hexagon2:{n:15,f:function(p){var x=o.round(p,2),y=o.round(p/2,2),e=o.round(p*Math.sqrt(3)/2,2);return"M-"+y+","+e+"H"+y+"L"+x+",0L"+y+",-"+e+"H-"+y+"L-"+x+",0Z"}},octagon:{n:16,f:function(p){var x=o.round(.924*p,2),y=o.round(.383*p,2);return"M-"+y+",-"+x+"H"+y+"L"+x+",-"+y+"V"+y+"L"+y+","+x+"H-"+y+"L-"+x+","+y+"V-"+y+"Z"}},star:{n:17,f:function(p){var x=1.4*p,y=o.round(.225*x,2),e=o.round(.951*x,2),r=o.round(.363*x,2),t=o.round(.588*x,2),i=o.round(-x,2),n=o.round(-.309*x,2),h=o.round(.118*x,2),s=o.round(.809*x,2);return"M"+y+","+n+"H"+e+"L"+r+","+h+"L"+t+","+s+"L0,"+o.round(.382*x,2)+"L-"+t+","+s+"L-"+r+","+h+"L-"+e+","+n+"H-"+y+"L0,"+i+"Z"}},hexagram:{n:18,f:function(p){var x=o.round(.66*p,2),y=o.round(.38*p,2),e=o.round(.76*p,2);return"M-"+e+",0l-"+y+",-"+x+"h"+e+"l"+y+",-"+x+"l"+y+","+x+"h"+e+"l-"+y+","+x+"l"+y+","+x+"h-"+e+"l-"+y+","+x+"l-"+y+",-"+x+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(p){var x=o.round(p*Math.sqrt(3)*.8,2),y=o.round(.8*p,2),e=o.round(1.6*p,2),r=o.round(4*p,2),t="A "+r+","+r+" 0 0 1 ";return"M-"+x+","+y+t+x+","+y+t+"0,-"+e+t+"-"+x+","+y+"Z"}},"star-triangle-down":{n:20,f:function(p){var x=o.round(p*Math.sqrt(3)*.8,2),y=o.round(.8*p,2),e=o.round(1.6*p,2),r=o.round(4*p,2),t="A "+r+","+r+" 0 0 1 ";return"M"+x+",-"+y+t+"-"+x+",-"+y+t+"0,"+e+t+x+",-"+y+"Z"}},"star-square":{n:21,f:function(p){var x=o.round(1.1*p,2),y=o.round(2*p,2),e="A "+y+","+y+" 0 0 1 ";return"M-"+x+",-"+x+e+"-"+x+","+x+e+x+","+x+e+x+",-"+x+e+"-"+x+",-"+x+"Z"}},"star-diamond":{n:22,f:function(p){var x=o.round(1.4*p,2),y=o.round(1.9*p,2),e="A "+y+","+y+" 0 0 1 ";return"M-"+x+",0"+e+"0,"+x+e+x+",0"+e+"0,-"+x+e+"-"+x+",0Z"}},"diamond-tall":{n:23,f:function(p){var x=o.round(.7*p,2),y=o.round(1.4*p,2);return"M0,"+y+"L"+x+",0L0,-"+y+"L-"+x+",0Z"}},"diamond-wide":{n:24,f:function(p){var x=o.round(1.4*p,2),y=o.round(.7*p,2);return"M0,"+y+"L"+x+",0L0,-"+y+"L-"+x+",0Z"}},hourglass:{n:25,f:function(p){var x=o.round(p,2);return"M"+x+","+x+"H-"+x+"L"+x+",-"+x+"H-"+x+"Z"},noDot:!0},bowtie:{n:26,f:function(p){var x=o.round(p,2);return"M"+x+","+x+"V-"+x+"L-"+x+","+x+"V-"+x+"Z"},noDot:!0},"circle-cross":{n:27,f:function(p){var x=o.round(p,2);return"M0,"+x+"V-"+x+"M"+x+",0H-"+x+"M"+x+",0A"+x+","+x+" 0 1,1 0,-"+x+"A"+x+","+x+" 0 0,1 "+x+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(p){var x=o.round(p,2),y=o.round(p/Math.sqrt(2),2);return"M"+y+","+y+"L-"+y+",-"+y+"M"+y+",-"+y+"L-"+y+","+y+"M"+x+",0A"+x+","+x+" 0 1,1 0,-"+x+"A"+x+","+x+" 0 0,1 "+x+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(p){var x=o.round(p,2);return"M0,"+x+"V-"+x+"M"+x+",0H-"+x+"M"+x+","+x+"H-"+x+"V-"+x+"H"+x+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(p){var x=o.round(p,2);return"M"+x+","+x+"L-"+x+",-"+x+"M"+x+",-"+x+"L-"+x+","+x+"M"+x+","+x+"H-"+x+"V-"+x+"H"+x+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(p){var x=o.round(1.3*p,2);return"M"+x+",0L0,"+x+"L-"+x+",0L0,-"+x+"ZM0,-"+x+"V"+x+"M-"+x+",0H"+x},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(p){var x=o.round(1.3*p,2),y=o.round(.65*p,2);return"M"+x+",0L0,"+x+"L-"+x+",0L0,-"+x+"ZM-"+y+",-"+y+"L"+y+","+y+"M-"+y+","+y+"L"+y+",-"+y},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(p){var x=o.round(1.4*p,2);return"M0,"+x+"V-"+x+"M"+x+",0H-"+x},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(p){var x=o.round(p,2);return"M"+x+","+x+"L-"+x+",-"+x+"M"+x+",-"+x+"L-"+x+","+x},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(p){var x=o.round(1.2*p,2),y=o.round(.85*p,2);return"M0,"+x+"V-"+x+"M"+x+",0H-"+x+"M"+y+","+y+"L-"+y+",-"+y+"M"+y+",-"+y+"L-"+y+","+y},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(p){var x=o.round(p/2,2),y=o.round(p,2);return"M"+x+","+y+"V-"+y+"m-"+y+",0V"+y+"M"+y+","+x+"H-"+y+"m0,-"+y+"H"+y},needLine:!0,noFill:!0},"y-up":{n:37,f:function(p){var x=o.round(1.2*p,2),y=o.round(1.6*p,2),e=o.round(.8*p,2);return"M-"+x+","+e+"L0,0M"+x+","+e+"L0,0M0,-"+y+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(p){var x=o.round(1.2*p,2),y=o.round(1.6*p,2),e=o.round(.8*p,2);return"M-"+x+",-"+e+"L0,0M"+x+",-"+e+"L0,0M0,"+y+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(p){var x=o.round(1.2*p,2),y=o.round(1.6*p,2),e=o.round(.8*p,2);return"M"+e+","+x+"L0,0M"+e+",-"+x+"L0,0M-"+y+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(p){var x=o.round(1.2*p,2),y=o.round(1.6*p,2),e=o.round(.8*p,2);return"M-"+e+","+x+"L0,0M-"+e+",-"+x+"L0,0M"+y+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(p){var x=o.round(1.4*p,2);return"M"+x+",0H-"+x},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(p){var x=o.round(1.4*p,2);return"M0,"+x+"V-"+x},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(p){var x=o.round(p,2);return"M"+x+",-"+x+"L-"+x+","+x},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(p){var x=o.round(p,2);return"M"+x+","+x+"L-"+x+",-"+x},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(p){var x=o.round(p,2);return"M0,0L-"+x+","+o.round(2*p,2)+"H"+x+"Z"},noDot:!0},"arrow-down":{n:46,f:function(p){var x=o.round(p,2);return"M0,0L-"+x+",-"+o.round(2*p,2)+"H"+x+"Z"},noDot:!0},"arrow-left":{n:47,f:function(p){var x=o.round(2*p,2),y=o.round(p,2);return"M0,0L"+x+",-"+y+"V"+y+"Z"},noDot:!0},"arrow-right":{n:48,f:function(p){var x=o.round(2*p,2),y=o.round(p,2);return"M0,0L-"+x+",-"+y+"V"+y+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(p){var x=o.round(p,2);return"M-"+x+",0H"+x+"M0,0L-"+x+","+o.round(2*p,2)+"H"+x+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(p){var x=o.round(p,2);return"M-"+x+",0H"+x+"M0,0L-"+x+",-"+o.round(2*p,2)+"H"+x+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(p){var x=o.round(2*p,2),y=o.round(p,2);return"M0,-"+y+"V"+y+"M0,0L"+x+",-"+y+"V"+y+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(p){var x=o.round(2*p,2),y=o.round(p,2);return"M0,-"+y+"V"+y+"M0,0L-"+x+",-"+y+"V"+y+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],390:[function(u,q,W){q.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],391:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../registry"),x=u("../../plots/cartesian/axes"),y=u("../../lib"),e=u("./compute_error");function r(t,i,n,h){var s=i["error_"+h]||{},a=[];if(s.visible&&["linear","log"].indexOf(n.type)!==-1){for(var l=e(s),f=0;f<t.length;f++){var d=t[f],v=d.i;if(v===void 0)v=f;else if(v===null)continue;var m=d[h];if(o(n.c2l(m))){var c=l(m,v);if(o(c[0])&&o(c[1])){var b=d[h+"s"]=m-c[0],g=d[h+"h"]=m+c[1];a.push(b,g)}}}var w=n._id,_=i._extremes[w],T=x.findExtremes(n,a,y.extendFlat({tozero:_.opts.tozero},{padded:!0}));_.min=_.min.concat(T.min),_.max=_.max.concat(T.max)}}q.exports=function(t){for(var i=t.calcdata,n=0;n<i.length;n++){var h=i[n],s=h[0].trace;if(s.visible===!0&&p.traceIs(s,"errorBarsOK")){var a=x.getFromId(t,s.xaxis),l=x.getFromId(t,s.yaxis);r(h,s,a,"x"),r(h,s,l,"y")}}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./compute_error":392,"fast-isnumeric":190}],392:[function(u,q,W){function o(p,x){return p==="percent"?function(y){return Math.abs(y*x/100)}:p==="constant"?function(){return Math.abs(x)}:p==="sqrt"?function(y){return Math.sqrt(Math.abs(y))}:void 0}q.exports=function(p){var x=p.type,y=p.symmetric;if(x==="data"){var e=p.array||[];if(y)return function(n,h){var s=+e[h];return[s,s]};var r=p.arrayminus||[];return function(n,h){var s=+e[h],a=+r[h];return isNaN(s)&&isNaN(a)?[NaN,NaN]:[a||0,s||0]}}var t=o(x,p.value),i=o(x,p.valueminus);return y||p.valueminus===void 0?function(n){var h=t(n);return[h,h]}:function(n){return[i(n),t(n)]}}},{}],393:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../registry"),x=u("../../lib"),y=u("../../plot_api/plot_template"),e=u("./attributes");q.exports=function(r,t,i,n){var h="error_"+n.axis,s=y.newContainer(t,h),a=r[h]||{};function l(m,c){return x.coerce(a,s,e,m,c)}if(l("visible",a.array!==void 0||a.value!==void 0||a.type==="sqrt")!==!1){var f=l("type","array"in a?"data":"percent"),d=!0;f!=="sqrt"&&(d=l("symmetric",!((f==="data"?"arrayminus":"valueminus")in a))),f==="data"?(l("array"),l("traceref"),d||(l("arrayminus"),l("tracerefminus"))):f!=="percent"&&f!=="constant"||(l("value"),d||l("valueminus"));var v="copy_"+n.inherit+"style";n.inherit&&(t["error_"+n.inherit]||{}).visible&&l(v,!(a.color||o(a.thickness)||o(a.width))),n.inherit&&s[v]||(l("color",i),l("thickness"),l("width",p.traceIs(t,"gl3d")?0:4))}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"./attributes":390,"fast-isnumeric":190}],394:[function(u,q,W){var o=u("../../lib"),p=u("../../plot_api/edit_types").overrideAll,x=u("./attributes"),y={error_x:o.extendFlat({},x),error_y:o.extendFlat({},x)};delete y.error_x.copy_zstyle,delete y.error_y.copy_zstyle,delete y.error_y.copy_ystyle;var e={error_x:o.extendFlat({},x),error_y:o.extendFlat({},x),error_z:o.extendFlat({},x)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,q.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:y,bar:y,histogram:y,scatter3d:p(e,"calc","nested"),scattergl:p(y,"calc","nested")}},supplyDefaults:u("./defaults"),calc:u("./calc"),makeComputeError:u("./compute_error"),plot:u("./plot"),style:u("./style"),hoverInfo:function(r,t,i){(t.error_y||{}).visible&&(i.yerr=r.yh-r.y,t.error_y.symmetric||(i.yerrneg=r.y-r.ys)),(t.error_x||{}).visible&&(i.xerr=r.xh-r.x,t.error_x.symmetric||(i.xerrneg=r.x-r.xs))}}},{"../../lib":503,"../../plot_api/edit_types":536,"./attributes":390,"./calc":391,"./compute_error":392,"./defaults":393,"./plot":395,"./style":396}],395:[function(u,q,W){var o=u("@plotly/d3"),p=u("fast-isnumeric"),x=u("../drawing"),y=u("../../traces/scatter/subtypes");q.exports=function(e,r,t,i){var n=t.xaxis,h=t.yaxis,s=i&&i.duration>0;r.each(function(a){var l,f=a[0].trace,d=f.error_x||{},v=f.error_y||{};f.ids&&(l=function(g){return g.id});var m=y.hasMarkers(f)&&f.marker.maxdisplayed>0;v.visible||d.visible||(a=[]);var c=o.select(this).selectAll("g.errorbar").data(a,l);if(c.exit().remove(),a.length){d.visible||c.selectAll("path.xerror").remove(),v.visible||c.selectAll("path.yerror").remove(),c.style("opacity",1);var b=c.enter().append("g").classed("errorbar",!0);s&&b.style("opacity",0).transition().duration(i.duration).style("opacity",1),x.setClipUrl(c,t.layerClipId,e),c.each(function(g){var w=o.select(this),_=function(P,S,E){var D={x:S.c2p(P.x),y:E.c2p(P.y)};return P.yh!==void 0&&(D.yh=E.c2p(P.yh),D.ys=E.c2p(P.ys),p(D.ys)||(D.noYS=!0,D.ys=E.c2p(P.ys,!0))),P.xh!==void 0&&(D.xh=S.c2p(P.xh),D.xs=S.c2p(P.xs),p(D.xs)||(D.noXS=!0,D.xs=S.c2p(P.xs,!0))),D}(g,n,h);if(!m||g.vis){var T,k=w.select("path.yerror");if(v.visible&&p(_.x)&&p(_.yh)&&p(_.ys)){var L=v.width;T="M"+(_.x-L)+","+_.yh+"h"+2*L+"m-"+L+",0V"+_.ys,_.noYS||(T+="m-"+L+",0h"+2*L),k.size()?s&&(k=k.transition().duration(i.duration).ease(i.easing)):k=w.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),k.attr("d",T)}else k.remove();var M=w.select("path.xerror");if(d.visible&&p(_.y)&&p(_.xh)&&p(_.xs)){var I=(d.copy_ystyle?v:d).width;T="M"+_.xh+","+(_.y-I)+"v"+2*I+"m0,-"+I+"H"+_.xs,_.noXS||(T+="m0,-"+I+"v"+2*I),M.size()?s&&(M=M.transition().duration(i.duration).ease(i.easing)):M=w.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),M.attr("d",T)}else M.remove()}})}})}},{"../../traces/scatter/subtypes":951,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],396:[function(u,q,W){var o=u("@plotly/d3"),p=u("../color");q.exports=function(x){x.each(function(y){var e=y[0].trace,r=e.error_y||{},t=e.error_x||{},i=o.select(this);i.selectAll("path.yerror").style("stroke-width",r.thickness+"px").call(p.stroke,r.color),t.copy_ystyle&&(t=r),i.selectAll("path.xerror").style("stroke-width",t.thickness+"px").call(p.stroke,t.color)})}},{"../color":366,"@plotly/d3":58}],397:[function(u,q,W){var o=u("../../plots/font_attributes"),p=u("./layout_attributes").hoverlabel,x=u("../../lib/extend").extendFlat;q.exports={hoverlabel:{bgcolor:x({},p.bgcolor,{arrayOk:!0}),bordercolor:x({},p.bordercolor,{arrayOk:!0}),font:o({arrayOk:!0,editType:"none"}),align:x({},p.align,{arrayOk:!0}),namelength:x({},p.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":493,"../../plots/font_attributes":585,"./layout_attributes":407}],398:[function(u,q,W){var o=u("../../lib"),p=u("../../registry");function x(y,e,r,t){t=t||o.identity,Array.isArray(y)&&(e[0][r]=t(y))}q.exports=function(y){var e=y.calcdata,r=y._fullLayout;function t(a){return function(l){return o.coerceHoverinfo({hoverinfo:l},{_module:a._module},r)}}for(var i=0;i<e.length;i++){var n=e[i],h=n[0].trace;if(!p.traceIs(h,"pie-like")){var s=p.traceIs(h,"2dMap")?x:o.fillArray;s(h.hoverinfo,n,"hi",t(h)),h.hovertemplate&&s(h.hovertemplate,n,"ht"),h.hoverlabel&&(s(h.hoverlabel.bgcolor,n,"hbg"),s(h.hoverlabel.bordercolor,n,"hbc"),s(h.hoverlabel.font.size,n,"hts"),s(h.hoverlabel.font.color,n,"htc"),s(h.hoverlabel.font.family,n,"htf"),s(h.hoverlabel.namelength,n,"hnl"),s(h.hoverlabel.align,n,"hta"))}}}},{"../../lib":503,"../../registry":638}],399:[function(u,q,W){var o=u("../../registry"),p=u("./hover").hover;q.exports=function(x,y,e){var r=o.getComponentMethod("annotations","onClick")(x,x._hoverdata);function t(){x.emit("plotly_click",{points:x._hoverdata,event:y})}e!==void 0&&p(x,y,e,!0),x._hoverdata&&y&&y.target&&(r&&r.then?r.then(t):t(),y.stopImmediatePropagation&&y.stopImmediatePropagation())}},{"../../registry":638,"./hover":403}],400:[function(u,q,W){q.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],401:[function(u,q,W){var o=u("../../lib"),p=u("./attributes"),x=u("./hoverlabel_defaults");q.exports=function(y,e,r,t){var i=o.extendFlat({},t.hoverlabel);e.hovertemplate&&(i.namelength=-1),x(y,e,function(n,h){return o.coerce(y,e,p,n,h)},i)}},{"../../lib":503,"./attributes":397,"./hoverlabel_defaults":404}],402:[function(u,q,W){var o=u("../../lib");W.getSubplot=function(t){return t.subplot||t.xaxis+t.yaxis||t.geo},W.isTraceInSubplots=function(t,i){if(t.type==="splom"){for(var n=t.xaxes||[],h=t.yaxes||[],s=0;s<n.length;s++)for(var a=0;a<h.length;a++)if(i.indexOf(n[s]+h[a])!==-1)return!0;return!1}return i.indexOf(W.getSubplot(t))!==-1},W.flat=function(t,i){for(var n=new Array(t.length),h=0;h<t.length;h++)n[h]=i;return n},W.p2c=function(t,i){for(var n=new Array(t.length),h=0;h<t.length;h++)n[h]=t[h].p2c(i);return n},W.getDistanceFunction=function(t,i,n,h){return t==="closest"?h||W.quadrature(i,n):t.charAt(0)==="x"?i:n},W.getClosest=function(t,i,n){if(n.index!==!1)n.index>=0&&n.index<t.length?n.distance=0:n.index=!1;else for(var h=0;h<t.length;h++){var s=i(t[h]);s<=n.distance&&(n.index=h,n.distance=s)}return n},W.inbox=function(t,i,n){return t*i<0||t===0?n:1/0},W.quadrature=function(t,i){return function(n){var h=t(n),s=i(n);return Math.sqrt(h*h+s*s)}},W.makeEventData=function(t,i,n){var h="index"in t?t.index:t.pointNumber,s={data:i._input,fullData:i,curveNumber:i.index,pointNumber:h};if(i._indexToPoints){var a=i._indexToPoints[h];a.length===1?s.pointIndex=a[0]:s.pointIndices=a}else s.pointIndex=h;return i._module.eventData?s=i._module.eventData(s,t,i,n,h):("xVal"in t?s.x=t.xVal:"x"in t&&(s.x=t.x),"yVal"in t?s.y=t.yVal:"y"in t&&(s.y=t.y),t.xa&&(s.xaxis=t.xa),t.ya&&(s.yaxis=t.ya),t.zLabelVal!==void 0&&(s.z=t.zLabelVal)),W.appendArrayPointValue(s,i,h),s},W.appendArrayPointValue=function(t,i,n){var h=i._arrayAttrs;if(h)for(var s=0;s<h.length;s++){var a=h[s],l=x(a);if(t[l]===void 0){var f=y(o.nestedProperty(i,a).get(),n);f!==void 0&&(t[l]=f)}}},W.appendArrayMultiPointValues=function(t,i,n){var h=i._arrayAttrs;if(h)for(var s=0;s<h.length;s++){var a=h[s],l=x(a);if(t[l]===void 0){for(var f=o.nestedProperty(i,a).get(),d=new Array(n.length),v=0;v<n.length;v++)d[v]=y(f,n[v]);t[l]=d}}};var p={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function x(t){return p[t]||t}function y(t,i){return Array.isArray(i)?Array.isArray(t)&&Array.isArray(t[i[0]])?t[i[0]][i[1]]:void 0:t[i]}var e={x:!0,y:!0},r={"x unified":!0,"y unified":!0};W.isUnifiedHover=function(t){return typeof t=="string"&&!!r[t]},W.isXYhover=function(t){return typeof t=="string"&&!!e[t]}},{"../../lib":503}],403:[function(u,q,W){var o=u("@plotly/d3"),p=u("fast-isnumeric"),x=u("tinycolor2"),y=u("../../lib"),e=y.strTranslate,r=y.strRotate,t=u("../../lib/events"),i=u("../../lib/svg_text_utils"),n=u("../../lib/override_cursor"),h=u("../drawing"),s=u("../color"),a=u("../dragelement"),l=u("../../plots/cartesian/axes"),f=u("../../registry"),d=u("./helpers"),v=u("./constants"),m=u("../legend/defaults"),c=u("../legend/draw"),b=v.YANGLE,g=Math.PI*b/180,w=1/Math.sin(g),_=Math.cos(g),T=Math.sin(g),k=v.HOVERARROWSIZE,L=v.HOVERTEXTPAD,M={box:!0,ohlc:!0,violin:!0,candlestick:!0},I={scatter:!0,scattergl:!0,splom:!0};function P(N){return[N.trace.index,N.index,N.x0,N.y0,N.name,N.attr,N.xa?N.xa._id:"",N.ya?N.ya._id:""].join(",")}W.hover=function(N,U,te,j){N=y.getGraphDiv(N);var Y=U.target;y.throttle(N._fullLayout._uid+v.HOVERID,v.HOVERMINTIME,function(){(function(J,ee,ne,se,oe){ne||(ne="xy");var he=Array.isArray(ne)?ne:[ne],le=J._fullLayout,de=le._plots||[],xe=de[ne],we=le._has("cartesian");if(xe){var be=xe.overlays.map(function(Fr){return Fr.id});he=he.concat(be)}for(var Ae=he.length,fe=new Array(Ae),me=new Array(Ae),ke=!1,Te=0;Te<Ae;Te++){var Me=he[Te];if(de[Me])ke=!0,fe[Te]=de[Me].xaxis,me[Te]=de[Me].yaxis;else{if(!le[Me]||!le[Me]._subplot)return void y.warn("Unrecognized subplot: "+Me);var Oe=le[Me]._subplot;fe[Te]=Oe.xaxis,me[Te]=Oe.yaxis}}var Fe=ee.hovermode||le.hovermode;if(Fe&&!ke&&(Fe="closest"),["x","y","closest","x unified","y unified"].indexOf(Fe)===-1||!J.calcdata||J.querySelector(".zoombox")||J._dragging)return a.unhoverRaw(J,ee);var qe=le.hoverdistance;qe===-1&&(qe=1/0);var et=le.spikedistance;et===-1&&(et=1/0);var ze,Ue,We,Ze,nt,ft,xt,It,Et,it,rt,At,Gt,Qt=[],Ve=[],Ye={hLinePoint:null,vLinePoint:null},Be=!1;if(Array.isArray(ee))for(Fe="array",We=0;We<ee.length;We++)(nt=J.calcdata[ee[We].curveNumber||0])&&(ft=nt[0].trace,nt[0].trace.hoverinfo!=="skip"&&(Ve.push(nt),ft.orientation==="h"&&(Be=!0)));else{for(Ze=0;Ze<J.calcdata.length;Ze++)nt=J.calcdata[Ze],(ft=nt[0].trace).hoverinfo!=="skip"&&d.isTraceInSubplots(ft,he)&&(Ve.push(nt),ft.orientation==="h"&&(Be=!0));var Je,Se;if(!oe)Je="xpx"in ee?ee.xpx:fe[0]._length/2,Se="ypx"in ee?ee.ypx:me[0]._length/2;else{if(t.triggerHandler(J,"plotly_beforehover",ee)===!1)return;var Pe=oe.getBoundingClientRect();Je=ee.clientX-Pe.left,Se=ee.clientY-Pe.top,le._calcInverseTransform(J);var De=y.apply3DTransform(le._invTransform)(Je,Se);if(Je=De[0],Se=De[1],Je<0||Je>fe[0]._length||Se<0||Se>me[0]._length)return a.unhoverRaw(J,ee)}if(ee.pointerX=Je+fe[0]._offset,ee.pointerY=Se+me[0]._offset,ze="xval"in ee?d.flat(he,ee.xval):d.p2c(fe,Je),Ue="yval"in ee?d.flat(he,ee.yval):d.p2c(me,Se),!p(ze[0])||!p(Ue[0]))return y.warn("Fx.hover failed",ee,J),a.unhoverRaw(J,ee)}var Ie=1/0;function $e(Fr,on){for(Ze=0;Ze<Ve.length;Ze++)if((nt=Ve[Ze])&&nt[0]&&nt[0].trace&&(ft=nt[0].trace).visible===!0&&ft._length!==0&&["carpet","contourcarpet"].indexOf(ft._module.name)===-1){if(ft.type==="splom"?xt=he[It=0]:(xt=d.getSubplot(ft),It=he.indexOf(xt)),Et=Fe,d.isUnifiedHover(Et)&&(Et=Et.charAt(0)),At={cd:nt,trace:ft,xa:fe[It],ya:me[It],maxHoverDistance:qe,maxSpikeDistance:et,index:!1,distance:Math.min(Ie,qe),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:s.defaultLine,name:ft.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},le[xt]&&(At.subplot=le[xt]._subplot),le._splomScenes&&le._splomScenes[ft.uid]&&(At.scene=le._splomScenes[ft.uid]),Gt=Qt.length,Et==="array"){var Mn=ee[Ze];"pointNumber"in Mn?(At.index=Mn.pointNumber,Et="closest"):(Et="","xval"in Mn&&(it=Mn.xval,Et="x"),"yval"in Mn&&(rt=Mn.yval,Et=Et?"closest":"y"))}else Fr!==void 0&&on!==void 0?(it=Fr,rt=on):(it=ze[It],rt=Ue[It]);if(qe!==0)if(ft._module&&ft._module.hoverPoints){var bn=ft._module.hoverPoints(At,it,rt,Et,{finiteRange:!0,hoverLayer:le._hoverlayer});if(bn)for(var Dn,tr=0;tr<bn.length;tr++)Dn=bn[tr],p(Dn.x0)&&p(Dn.y0)&&Qt.push(H(Dn,Fe))}else y.log("Unrecognized trace type in hover:",ft);if(Fe==="closest"&&Qt.length>Gt&&(Qt.splice(0,Gt),Ie=Qt[0].distance),we&&et!==0&&Qt.length===0){At.distance=et,At.index=!1;var Ot=ft._module.hoverPoints(At,it,rt,"closest",{hoverLayer:le._hoverlayer});if(Ot&&(Ot=Ot.filter(function(wr){return wr.spikeDistance<=et})),Ot&&Ot.length){var Ht,fr=Ot.filter(function(wr){return wr.xa.showspikes&&wr.xa.spikesnap!=="hovered data"});if(fr.length){var Tr=fr[0];p(Tr.x0)&&p(Tr.y0)&&(Ht=dt(Tr),(!Ye.vLinePoint||Ye.vLinePoint.spikeDistance>Ht.spikeDistance)&&(Ye.vLinePoint=Ht))}var Wr=Ot.filter(function(wr){return wr.ya.showspikes&&wr.ya.spikesnap!=="hovered data"});if(Wr.length){var Gr=Wr[0];p(Gr.x0)&&p(Gr.y0)&&(Ht=dt(Gr),(!Ye.hLinePoint||Ye.hLinePoint.spikeDistance>Ht.spikeDistance)&&(Ye.hLinePoint=Ht))}}}}}function st(Fr,on,Mn){for(var bn,Dn=null,tr=1/0,Ot=0;Ot<Fr.length;Ot++)bn=Fr[Ot].spikeDistance,Mn&&Ot===0&&(bn=-1/0),bn<=tr&&bn<=on&&(Dn=Fr[Ot],tr=bn);return Dn}function dt(Fr){return Fr?{xa:Fr.xa,ya:Fr.ya,x:Fr.xSpike!==void 0?Fr.xSpike:(Fr.x0+Fr.x1)/2,y:Fr.ySpike!==void 0?Fr.ySpike:(Fr.y0+Fr.y1)/2,distance:Fr.distance,spikeDistance:Fr.spikeDistance,curveNumber:Fr.trace.index,color:Fr.color,pointNumber:Fr.index}:null}$e();var ut={fullLayout:le,container:le._hoverlayer,event:ee},Lt=J._spikepoints,lt={vLinePoint:Ye.vLinePoint,hLinePoint:Ye.hLinePoint};J._spikepoints=lt;var Ct=function(){Qt.sort(function(Fr,on){return Fr.distance-on.distance}),Qt=function(Fr,on){for(var Mn=on.charAt(0),bn=[],Dn=[],tr=[],Ot=0;Ot<Fr.length;Ot++){var Ht=Fr[Ot];f.traceIs(Ht.trace,"bar-like")||f.traceIs(Ht.trace,"box-violin")?tr.push(Ht):Ht.trace[Mn+"period"]?Dn.push(Ht):bn.push(Ht)}return bn.concat(Dn).concat(tr)}(Qt,Fe)};Ct();var Pt=Fe.charAt(0),Ke=(Pt==="x"||Pt==="y")&&Qt[0]&&I[Qt[0].trace.type];if(we&&et!==0&&Qt.length!==0){var mt=st(Qt.filter(function(Fr){return Fr.ya.showspikes}),et,Ke);Ye.hLinePoint=dt(mt);var Dt=st(Qt.filter(function(Fr){return Fr.xa.showspikes}),et,Ke);Ye.vLinePoint=dt(Dt)}if(Qt.length===0){var Bt=a.unhoverRaw(J,ee);return!we||Ye.hLinePoint===null&&Ye.vLinePoint===null||Q(Lt)&&V(J,Ye,ut),Bt}if(we&&Q(Lt)&&V(J,Ye,ut),d.isXYhover(Et)&&Qt[0].length!==0&&Qt[0].trace.type!=="splom"){var Zt=Qt[0],Re=(Qt=M[Zt.trace.type]?Qt.filter(function(Fr){return Fr.trace.index===Zt.trace.index}):[Zt]).length,ct=Z("x",Zt,le),wt=Z("y",Zt,le);$e(ct,wt);var Rt,Vt=[],rr={},qt=0,Jt=function(Fr){var on=M[Fr.trace.type]?P(Fr):Fr.trace.index;if(rr[on]){var Mn=rr[on]-1,bn=Vt[Mn];Mn>0&&Math.abs(Fr.distance)<Math.abs(bn.distance)&&(Vt[Mn]=Fr)}else qt++,rr[on]=qt,Vt.push(Fr)};for(Rt=0;Rt<Re;Rt++)Jt(Qt[Rt]);for(Rt=Qt.length-1;Rt>Re-1;Rt--)Jt(Qt[Rt]);Qt=Vt,Ct()}var or=J._hoverdata,gr=[],dr=$(J),ur=re(J);for(We=0;We<Qt.length;We++){var cr=Qt[We],mr=d.makeEventData(cr,cr.trace,cr.cd);if(cr.hovertemplate!==!1){var Dr=!1;cr.cd[cr.index]&&cr.cd[cr.index].ht&&(Dr=cr.cd[cr.index].ht),cr.hovertemplate=Dr||cr.trace.hovertemplate||!1}if(cr.xa&&cr.ya){var yr=cr.x0+cr.xa._offset,Br=cr.x1+cr.xa._offset,Kr=cr.y0+cr.ya._offset,an=cr.y1+cr.ya._offset,Ln=Math.min(yr,Br),Pn=Math.max(yr,Br),An=Math.min(Kr,an),tn=Math.max(Kr,an);mr.bbox={x0:Ln+ur,x1:Pn+ur,y0:An+dr,y1:tn+dr}}cr.eventData=[mr],gr.push(mr)}J._hoverdata=gr;var zr=Fe==="y"&&(Ve.length>1||Qt.length>1)||Fe==="closest"&&Be&&Qt.length>1,Ar=s.combine(le.plot_bgcolor||s.background,le.paper_bgcolor),qr=E(Qt,{gd:J,hovermode:Fe,rotateLabels:zr,bgColor:Ar,container:le._hoverlayer,outerContainer:le._paper.node(),commonLabelOpts:le.hoverlabel,hoverdistance:le.hoverdistance});if(d.isUnifiedHover(Fe)||(function(Fr,on,Mn){var bn,Dn,tr,Ot,Ht,fr,Tr,Wr=0,Gr=1,wr=Fr.size(),br=new Array(wr),Sr=0;function Ir(Ur){var ln=Ur[0],gn=Ur[Ur.length-1];if(Dn=ln.pmin-ln.pos-ln.dp+ln.size,tr=gn.pos+gn.dp+gn.size-ln.pmax,Dn>.01){for(Ht=Ur.length-1;Ht>=0;Ht--)Ur[Ht].dp+=Dn;bn=!1}if(!(tr<.01)){if(Dn<-.01){for(Ht=Ur.length-1;Ht>=0;Ht--)Ur[Ht].dp-=tr;bn=!1}if(bn){var Sn=0;for(Ot=0;Ot<Ur.length;Ot++)(fr=Ur[Ot]).pos+fr.dp+fr.size>ln.pmax&&Sn++;for(Ot=Ur.length-1;Ot>=0&&!(Sn<=0);Ot--)(fr=Ur[Ot]).pos>ln.pmax-1&&(fr.del=!0,Sn--);for(Ot=0;Ot<Ur.length&&!(Sn<=0);Ot++)if((fr=Ur[Ot]).pos<ln.pmin+1)for(fr.del=!0,Sn--,tr=2*fr.size,Ht=Ur.length-1;Ht>=0;Ht--)Ur[Ht].dp-=tr;for(Ot=Ur.length-1;Ot>=0&&!(Sn<=0);Ot--)(fr=Ur[Ot]).pos+fr.dp+fr.size>ln.pmax&&(fr.del=!0,Sn--)}}}for(Fr.each(function(Ur){var ln=Ur[on],gn=ln._id.charAt(0)==="x",Sn=ln.range;Sr===0&&Sn&&Sn[0]>Sn[1]!==gn&&(Gr=-1),br[Sr++]=[{datum:Ur,traceIndex:Ur.trace.index,dp:0,pos:Ur.pos,posref:Ur.posref,size:Ur.by*(gn?w:1)/2,pmin:0,pmax:gn?Mn.width:Mn.height}]}),br.sort(function(Ur,ln){return Ur[0].posref-ln[0].posref||Gr*(ln[0].traceIndex-Ur[0].traceIndex)});!bn&&Wr<=wr;){for(Wr++,bn=!0,Ot=0;Ot<br.length-1;){var Er=br[Ot],Xr=br[Ot+1],fn=Er[Er.length-1],_n=Xr[0];if((Dn=fn.pos+fn.dp+fn.size-_n.pos-_n.dp+_n.size)>.01&&fn.pmin===_n.pmin&&fn.pmax===_n.pmax){for(Ht=Xr.length-1;Ht>=0;Ht--)Xr[Ht].dp+=Dn;for(Er.push.apply(Er,Xr),br.splice(Ot+1,1),Tr=0,Ht=Er.length-1;Ht>=0;Ht--)Tr+=Er[Ht].dp;for(tr=Tr/Er.length,Ht=Er.length-1;Ht>=0;Ht--)Er[Ht].dp-=tr;bn=!1}else Ot++}br.forEach(Ir)}for(Ot=br.length-1;Ot>=0;Ot--){var en=br[Ot];for(Ht=en.length-1;Ht>=0;Ht--){var yn=en[Ht],Vr=yn.datum;Vr.offset=yn.dp,Vr.del=yn.del}}}(qr,zr?"xa":"ya",le),F(qr,zr,le._invScaleX,le._invScaleY)),oe&&oe.tagName){var On=f.getComponentMethod("annotations","hasClickToShow")(J,gr);n(o.select(oe),On?"pointer":"")}!oe||se||!function(Fr,on,Mn){if(!Mn||Mn.length!==Fr._hoverdata.length)return!0;for(var bn=Mn.length-1;bn>=0;bn--){var Dn=Mn[bn],tr=Fr._hoverdata[bn];if(Dn.curveNumber!==tr.curveNumber||String(Dn.pointNumber)!==String(tr.pointNumber)||String(Dn.pointNumbers)!==String(tr.pointNumbers))return!0}return!1}(J,0,or)||(or&&J.emit("plotly_unhover",{event:ee,points:or}),J.emit("plotly_hover",{event:ee,points:J._hoverdata,xaxes:fe,yaxes:me,xvals:ze,yvals:Ue}))})(N,U,te,j,Y)})},W.loneHover=function(N,U){var te=!0;Array.isArray(N)||(te=!1,N=[N]);var j=U.gd,Y=$(j),J=re(j),ee=E(N.map(function(oe){var he=oe._x0||oe.x0||oe.x||0,le=oe._x1||oe.x1||oe.x||0,de=oe._y0||oe.y0||oe.y||0,xe=oe._y1||oe.y1||oe.y||0,we=oe.eventData;if(we){var be=Math.min(he,le),Ae=Math.max(he,le),fe=Math.min(de,xe),me=Math.max(de,xe),ke=oe.trace;if(f.traceIs(ke,"gl3d")){var Te=j._fullLayout[ke.scene]._scene.container,Me=Te.offsetLeft,Oe=Te.offsetTop;be+=Me,Ae+=Me,fe+=Oe,me+=Oe}we.bbox={x0:be+J,x1:Ae+J,y0:fe+Y,y1:me+Y},U.inOut_bbox&&U.inOut_bbox.push(we.bbox)}else we=!1;return{color:oe.color||s.defaultLine,x0:oe.x0||oe.x||0,x1:oe.x1||oe.x||0,y0:oe.y0||oe.y||0,y1:oe.y1||oe.y||0,xLabel:oe.xLabel,yLabel:oe.yLabel,zLabel:oe.zLabel,text:oe.text,name:oe.name,idealAlign:oe.idealAlign,borderColor:oe.borderColor,fontFamily:oe.fontFamily,fontSize:oe.fontSize,fontColor:oe.fontColor,nameLength:oe.nameLength,textAlign:oe.textAlign,trace:oe.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:oe.hovertemplate||!1,hovertemplateLabels:oe.hovertemplateLabels||!1,eventData:we}}),{gd:j,hovermode:"closest",rotateLabels:!1,bgColor:U.bgColor||s.background,container:o.select(U.container),outerContainer:U.outerContainer||U.container}),ne=0,se=0;return ee.sort(function(oe,he){return oe.y0-he.y0}).each(function(oe,he){var le=oe.y0-oe.by/2;oe.offset=le-5<ne?ne-le+5:0,ne=le+oe.by+oe.offset,he===U.anchorIndex&&(se=oe.offset)}).each(function(oe){oe.offset-=se}),F(ee,!1,j._fullLayout._invScaleX,j._fullLayout._invScaleY),te?ee:ee.node()};var S=/<extra>([\s\S]*)<\/extra>/;function E(N,U){var te=U.gd,j=te._fullLayout,Y=U.hovermode,J=U.rotateLabels,ee=U.bgColor,ne=U.container,se=U.outerContainer,oe=U.commonLabelOpts||{};if(N.length===0)return[[]];var he=U.fontFamily||v.HOVERFONT,le=U.fontSize||v.HOVERFONTSIZE,de=N[0],xe=de.xa,we=de.ya,be=Y.charAt(0),Ae=de[be+"Label"],fe=R(te,se),me=fe.top,ke=fe.width,Te=fe.height,Me=Ae!==void 0&&de.distance<=U.hoverdistance&&(Y==="x"||Y==="y");if(Me){var Oe,Fe,qe=!0;for(Oe=0;Oe<N.length;Oe++)if(qe&&N[Oe].zLabel===void 0&&(qe=!1),Fe=N[Oe].hoverinfo||N[Oe].trace.hoverinfo){var et=Array.isArray(Fe)?Fe:Fe.split("+");if(et.indexOf("all")===-1&&et.indexOf(Y)===-1){Me=!1;break}}qe&&(Me=!1)}var ze=ne.selectAll("g.axistext").data(Me?[0]:[]);if(ze.enter().append("g").classed("axistext",!0),ze.exit().remove(),ze.each(function(){var Ke=o.select(this),mt=y.ensureSingle(Ke,"path","",function(Br){Br.style({"stroke-width":"1px"})}),Dt=y.ensureSingle(Ke,"text","",function(Br){Br.attr("data-notex",1)}),Bt=oe.bgcolor||s.defaultLine,Zt=oe.bordercolor||s.contrast(Bt),Re=s.contrast(Bt),ct={family:oe.font.family||he,size:oe.font.size||le,color:oe.font.color||Re};mt.style({fill:Bt,stroke:Zt}),Dt.text(Ae).call(h.font,ct).call(i.positionText,0,0).call(i.convertToTspans,te),Ke.attr("transform","");var wt,Rt,Vt=R(te,Dt.node());if(Y==="x"){var rr=xe.side==="top"?"-":"";Dt.attr("text-anchor","middle").call(i.positionText,0,xe.side==="top"?me-Vt.bottom-k-L:me-Vt.top+k+L),wt=xe._offset+(de.x0+de.x1)/2,Rt=we._offset+(xe.side==="top"?0:we._length);var qt=Vt.width/2+L;wt<qt?(wt=qt,mt.attr("d","M-"+(qt-k)+",0L-"+(qt-2*k)+","+rr+k+"H"+(L+Vt.width/2)+"v"+rr+(2*L+Vt.height)+"H-"+qt+"V"+rr+k+"Z")):wt>j.width-qt?(wt=j.width-qt,mt.attr("d","M"+(qt-k)+",0L"+qt+","+rr+k+"v"+rr+(2*L+Vt.height)+"H-"+qt+"V"+rr+k+"H"+(qt-2*k)+"Z")):mt.attr("d","M0,0L"+k+","+rr+k+"H"+(L+Vt.width/2)+"v"+rr+(2*L+Vt.height)+"H-"+(L+Vt.width/2)+"V"+rr+k+"H-"+k+"Z")}else{var Jt,or,gr;we.side==="right"?(Jt="start",or=1,gr="",wt=xe._offset+xe._length):(Jt="end",or=-1,gr="-",wt=xe._offset),Rt=we._offset+(de.y0+de.y1)/2,Dt.attr("text-anchor",Jt),mt.attr("d","M0,0L"+gr+k+","+k+"V"+(L+Vt.height/2)+"h"+gr+(2*L+Vt.width)+"V-"+(L+Vt.height/2)+"H"+gr+k+"V-"+k+"Z");var dr,ur=Vt.height/2,cr=me-Vt.top-ur,mr="clip"+j._uid+"commonlabel"+we._id;if(wt<Vt.width+2*L+k){dr="M-"+(k+L)+"-"+ur+"h-"+(Vt.width-L)+"V"+ur+"h"+(Vt.width-L)+"Z";var Dr=Vt.width-wt+L;i.positionText(Dt,Dr,cr),Jt==="end"&&Dt.selectAll("tspan").each(function(){var Br=o.select(this),Kr=h.tester.append("text").text(Br.text()).call(h.font,ct),an=R(te,Kr.node());Math.round(an.width)<Math.round(Vt.width)&&Br.attr("x",Dr-an.width),Kr.remove()})}else i.positionText(Dt,or*(L+k),cr),dr=null;var yr=j._topclips.selectAll("#"+mr).data(dr?[0]:[]);yr.enter().append("clipPath").attr("id",mr).append("path"),yr.exit().remove(),yr.select("path").attr("d",dr),h.setClipUrl(Dt,dr?mr:null,te)}Ke.attr("transform",e(wt,Rt))}),d.isUnifiedHover(Y)){ne.selectAll("g.hovertext").remove();var Ue=N.filter(function(Ke){return Ke.hoverinfo!=="none"});if(Ue.length===0)return;var We=j.hoverlabel,Ze=We.font,nt={showlegend:!0,legend:{title:{text:Ae,font:Ze},font:Ze,bgcolor:We.bgcolor,bordercolor:We.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:j.legend?j.legend.traceorder:void 0,orientation:"v"}},ft={font:Ze};m(nt,ft,te._fullData);var xt=ft.legend;xt.entries=[];for(var It=0;It<Ue.length;It++){var Et=Ue[It];if(Et.hoverinfo!=="none"){var it=D(Et,!0,Y,j,Ae),rt=it[0],At=it[1];Et.name=At,Et.text=At!==""?At+" : "+rt:rt;var Gt=Et.cd[Et.index];Gt&&(Gt.mc&&(Et.mc=Gt.mc),Gt.mcc&&(Et.mc=Gt.mcc),Gt.mlc&&(Et.mlc=Gt.mlc),Gt.mlcc&&(Et.mlc=Gt.mlcc),Gt.mlw&&(Et.mlw=Gt.mlw),Gt.mrc&&(Et.mrc=Gt.mrc),Gt.dir&&(Et.dir=Gt.dir)),Et._distinct=!0,xt.entries.push([Et])}}xt.entries.sort(function(Ke,mt){return Ke[0].trace.index-mt[0].trace.index}),xt.layer=ne,xt._inHover=!0,xt._groupTitleFont=We.grouptitlefont,c(te,xt);var Qt,Ve,Ye,Be,Je=ne.select("g.legend"),Se=R(te,Je.node()),Pe=Se.width+2*L,De=Se.height+2*L,Ie=Ue[0],$e=(Ie.x0+Ie.x1)/2,st=(Ie.y0+Ie.y1)/2,dt=!(f.traceIs(Ie.trace,"bar-like")||f.traceIs(Ie.trace,"box-violin"));be==="y"?dt?(Ve=st-L,Qt=st+L):(Ve=Math.min.apply(null,Ue.map(function(Ke){return Math.min(Ke.y0,Ke.y1)})),Qt=Math.max.apply(null,Ue.map(function(Ke){return Math.max(Ke.y0,Ke.y1)}))):Ve=Qt=y.mean(Ue.map(function(Ke){return(Ke.y0+Ke.y1)/2}))-De/2,be==="x"?dt?(Ye=$e+L,Be=$e-L):(Ye=Math.max.apply(null,Ue.map(function(Ke){return Math.max(Ke.x0,Ke.x1)})),Be=Math.min.apply(null,Ue.map(function(Ke){return Math.min(Ke.x0,Ke.x1)}))):Ye=Be=y.mean(Ue.map(function(Ke){return(Ke.x0+Ke.x1)/2}))-Pe/2;var ut,Lt,lt=xe._offset,Ct=we._offset;return Be+=lt-Pe,Ve+=Ct-De,ut=(Ye+=lt)+Pe<ke&&Ye>=0?Ye:Be+Pe<ke&&Be>=0?Be:lt+Pe<ke?lt:Ye-$e<$e-Be+Pe?ke-Pe:0,ut+=L,Lt=(Qt+=Ct)+De<Te&&Qt>=0?Qt:Ve+De<Te&&Ve>=0?Ve:Ct+De<Te?Ct:Qt-st<st-Ve+De?Te-De:0,Lt+=L,Je.attr("transform",e(ut-1,Lt-1)),Je}var Pt=ne.selectAll("g.hovertext").data(N,function(Ke){return P(Ke)});return Pt.enter().append("g").classed("hovertext",!0).each(function(){var Ke=o.select(this);Ke.append("rect").call(s.fill,s.addOpacity(ee,.8)),Ke.append("text").classed("name",!0),Ke.append("path").style("stroke-width","1px"),Ke.append("text").classed("nums",!0).call(h.font,he,le)}),Pt.exit().remove(),Pt.each(function(Ke){var mt=o.select(this).attr("transform",""),Dt=Ke.color;Array.isArray(Dt)&&(Dt=Dt[Ke.eventData[0].pointNumber]);var Bt=Ke.bgcolor||Dt,Zt=s.combine(s.opacity(Bt)?Bt:s.defaultLine,ee),Re=s.combine(s.opacity(Dt)?Dt:s.defaultLine,ee),ct=Ke.borderColor||s.contrast(Zt),wt=D(Ke,Me,Y,j,Ae,mt),Rt=wt[0],Vt=wt[1],rr=mt.select("text.nums").call(h.font,Ke.fontFamily||he,Ke.fontSize||le,Ke.fontColor||ct).text(Rt).attr("data-notex",1).call(i.positionText,0,0).call(i.convertToTspans,te),qt=mt.select("text.name"),Jt=0,or=0;if(Vt&&Vt!==Rt){qt.call(h.font,Ke.fontFamily||he,Ke.fontSize||le,Re).text(Vt).attr("data-notex",1).call(i.positionText,0,0).call(i.convertToTspans,te);var gr=R(te,qt.node());Jt=gr.width+2*L,or=gr.height+2*L}else qt.remove(),mt.select("rect").remove();mt.select("path").style({fill:Zt,stroke:ct});var dr=Ke.xa._offset+(Ke.x0+Ke.x1)/2,ur=Ke.ya._offset+(Ke.y0+Ke.y1)/2,cr=Math.abs(Ke.x1-Ke.x0),mr=Math.abs(Ke.y1-Ke.y0),Dr=R(te,rr.node()),yr=Dr.width/j._invScaleX,Br=Dr.height/j._invScaleY;Ke.ty0=(me-Dr.top)/j._invScaleY,Ke.bx=yr+2*L,Ke.by=Math.max(Br+2*L,or),Ke.anchor="start",Ke.txwidth=yr,Ke.tx2width=Jt,Ke.offset=0;var Kr,an,Ln=(yr+k+L+Jt)*j._invScaleX;if(J)Ke.pos=dr,Kr=ur+mr/2+Ln<=Te,an=ur-mr/2-Ln>=0,Ke.idealAlign!=="top"&&Kr||!an?Kr?(ur+=mr/2,Ke.anchor="start"):Ke.anchor="middle":(ur-=mr/2,Ke.anchor="end");else if(Ke.pos=ur,Kr=dr+cr/2+Ln<=ke,an=dr-cr/2-Ln>=0,Ke.idealAlign!=="left"&&Kr||!an)if(Kr)dr+=cr/2,Ke.anchor="start";else{Ke.anchor="middle";var Pn=Ln/2,An=dr+Pn-ke,tn=dr-Pn;An>0&&(dr-=An),tn<0&&(dr+=-tn)}else dr-=cr/2,Ke.anchor="end";rr.attr("text-anchor",Ke.anchor),Jt&&qt.attr("text-anchor",Ke.anchor),mt.attr("transform",e(dr,ur)+(J?r(b):""))}),Pt}function D(N,U,te,j,Y,J){var ee="",ne="";N.nameOverride!==void 0&&(N.name=N.nameOverride),N.name&&(N.trace._meta&&(N.name=y.templateString(N.name,N.trace._meta)),ee=K(N.name,N.nameLength));var se=te.charAt(0),oe=se==="x"?"y":"x";N.zLabel!==void 0?(N.xLabel!==void 0&&(ne+="x: "+N.xLabel+"<br>"),N.yLabel!==void 0&&(ne+="y: "+N.yLabel+"<br>"),N.trace.type!=="choropleth"&&N.trace.type!=="choroplethmapbox"&&(ne+=(ne?"z: ":"")+N.zLabel)):U&&N[se+"Label"]===Y?ne=N[oe+"Label"]||"":N.xLabel===void 0?N.yLabel!==void 0&&N.trace.type!=="scattercarpet"&&(ne=N.yLabel):ne=N.yLabel===void 0?N.xLabel:"("+N.xLabel+", "+N.yLabel+")",!N.text&&N.text!==0||Array.isArray(N.text)||(ne+=(ne?"<br>":"")+N.text),N.extraText!==void 0&&(ne+=(ne?"<br>":"")+N.extraText),J&&ne===""&&!N.hovertemplate&&(ee===""&&J.remove(),ne=ee);var he=N.hovertemplate||!1;if(he){var le=N.hovertemplateLabels||N;N[se+"Label"]!==Y&&(le[se+"other"]=le[se+"Val"],le[se+"otherLabel"]=le[se+"Label"]),ne=(ne=y.hovertemplateString(he,le,j._d3locale,N.eventData[0]||{},N.trace._meta)).replace(S,function(de,xe){return ee=K(xe,N.nameLength),""})}return[ne,ee]}function F(N,U,te,j){var Y=function(ee){return ee*te},J=function(ee){return ee*j};N.each(function(ee){var ne=o.select(this);if(ee.del)return ne.remove();var se=ne.select("text.nums"),oe=ee.anchor,he=oe==="end"?-1:1,le={start:1,end:-1,middle:0}[oe],de=le*(k+L),xe=de+le*(ee.txwidth+L),we=0,be=ee.offset,Ae=oe==="middle";Ae&&(de-=ee.tx2width/2,xe+=ee.txwidth/2+L),U&&(be*=-T,we=ee.offset*_),ne.select("path").attr("d",Ae?"M-"+Y(ee.bx/2+ee.tx2width/2)+","+J(be-ee.by/2)+"h"+Y(ee.bx)+"v"+J(ee.by)+"h-"+Y(ee.bx)+"Z":"M0,0L"+Y(he*k+we)+","+J(k+be)+"v"+J(ee.by/2-k)+"h"+Y(he*ee.bx)+"v-"+J(ee.by)+"H"+Y(he*k+we)+"V"+J(be-k)+"Z");var fe=we+de,me=be+ee.ty0-ee.by/2+L,ke=ee.textAlign||"auto";ke!=="auto"&&(ke==="left"&&oe!=="start"?(se.attr("text-anchor","start"),fe=Ae?-ee.bx/2-ee.tx2width/2+L:-ee.bx-L):ke==="right"&&oe!=="end"&&(se.attr("text-anchor","end"),fe=Ae?ee.bx/2-ee.tx2width/2-L:ee.bx+L)),se.call(i.positionText,Y(fe),J(me)),ee.tx2width&&(ne.select("text.name").call(i.positionText,Y(xe+le*L+we),J(be+ee.ty0-ee.by/2+L)),ne.select("rect").call(h.setRect,Y(xe+(le-1)*ee.tx2width/2+we),J(be-ee.by/2-1),Y(ee.tx2width),J(ee.by+2)))})}function H(N,U){var te=N.index,j=N.trace||{},Y=N.cd[0],J=N.cd[te]||{};function ee(de){return de||p(de)&&de===0}var ne=Array.isArray(te)?function(de,xe){var we=y.castOption(Y,te,de);return ee(we)?we:y.extractOption({},j,"",xe)}:function(de,xe){return y.extractOption(J,j,de,xe)};function se(de,xe,we){var be=ne(xe,we);ee(be)&&(N[de]=be)}if(se("hoverinfo","hi","hoverinfo"),se("bgcolor","hbg","hoverlabel.bgcolor"),se("borderColor","hbc","hoverlabel.bordercolor"),se("fontFamily","htf","hoverlabel.font.family"),se("fontSize","hts","hoverlabel.font.size"),se("fontColor","htc","hoverlabel.font.color"),se("nameLength","hnl","hoverlabel.namelength"),se("textAlign","hta","hoverlabel.align"),N.posref=U==="y"||U==="closest"&&j.orientation==="h"?N.xa._offset+(N.x0+N.x1)/2:N.ya._offset+(N.y0+N.y1)/2,N.x0=y.constrain(N.x0,0,N.xa._length),N.x1=y.constrain(N.x1,0,N.xa._length),N.y0=y.constrain(N.y0,0,N.ya._length),N.y1=y.constrain(N.y1,0,N.ya._length),N.xLabelVal!==void 0&&(N.xLabel="xLabel"in N?N.xLabel:l.hoverLabelText(N.xa,N.xLabelVal,j.xhoverformat),N.xVal=N.xa.c2d(N.xLabelVal)),N.yLabelVal!==void 0&&(N.yLabel="yLabel"in N?N.yLabel:l.hoverLabelText(N.ya,N.yLabelVal,j.yhoverformat),N.yVal=N.ya.c2d(N.yLabelVal)),N.zLabelVal!==void 0&&N.zLabel===void 0&&(N.zLabel=String(N.zLabelVal)),!(isNaN(N.xerr)||N.xa.type==="log"&&N.xerr<=0)){var oe=l.tickText(N.xa,N.xa.c2l(N.xerr),"hover").text;N.xerrneg!==void 0?N.xLabel+=" +"+oe+" / -"+l.tickText(N.xa,N.xa.c2l(N.xerrneg),"hover").text:N.xLabel+=" \xB1 "+oe,U==="x"&&(N.distance+=1)}if(!(isNaN(N.yerr)||N.ya.type==="log"&&N.yerr<=0)){var he=l.tickText(N.ya,N.ya.c2l(N.yerr),"hover").text;N.yerrneg!==void 0?N.yLabel+=" +"+he+" / -"+l.tickText(N.ya,N.ya.c2l(N.yerrneg),"hover").text:N.yLabel+=" \xB1 "+he,U==="y"&&(N.distance+=1)}var le=N.hoverinfo||N.trace.hoverinfo;return le&&le!=="all"&&((le=Array.isArray(le)?le:le.split("+")).indexOf("x")===-1&&(N.xLabel=void 0),le.indexOf("y")===-1&&(N.yLabel=void 0),le.indexOf("z")===-1&&(N.zLabel=void 0),le.indexOf("text")===-1&&(N.text=void 0),le.indexOf("name")===-1&&(N.name=void 0)),N}function V(N,U,te){var j,Y,J=te.container,ee=te.fullLayout,ne=ee._size,se=te.event,oe=!!U.hLinePoint,he=!!U.vLinePoint;if(J.selectAll(".spikeline").remove(),he||oe){var le=s.combine(ee.plot_bgcolor,ee.paper_bgcolor);if(oe){var de,xe,we=U.hLinePoint;j=we&&we.xa,(Y=we&&we.ya).spikesnap==="cursor"?(de=se.pointerX,xe=se.pointerY):(de=j._offset+we.x,xe=Y._offset+we.y);var be,Ae,fe=x.readability(we.color,le)<1.5?s.contrast(le):we.color,me=Y.spikemode,ke=Y.spikethickness,Te=Y.spikecolor||fe,Me=l.getPxPosition(N,Y);if(me.indexOf("toaxis")!==-1||me.indexOf("across")!==-1){if(me.indexOf("toaxis")!==-1&&(be=Me,Ae=de),me.indexOf("across")!==-1){var Oe=Y._counterDomainMin,Fe=Y._counterDomainMax;Y.anchor==="free"&&(Oe=Math.min(Oe,Y.position),Fe=Math.max(Fe,Y.position)),be=ne.l+Oe*ne.w,Ae=ne.l+Fe*ne.w}J.insert("line",":first-child").attr({x1:be,x2:Ae,y1:xe,y2:xe,"stroke-width":ke,stroke:Te,"stroke-dasharray":h.dashStyle(Y.spikedash,ke)}).classed("spikeline",!0).classed("crisp",!0),J.insert("line",":first-child").attr({x1:be,x2:Ae,y1:xe,y2:xe,"stroke-width":ke+2,stroke:le}).classed("spikeline",!0).classed("crisp",!0)}me.indexOf("marker")!==-1&&J.insert("circle",":first-child").attr({cx:Me+(Y.side!=="right"?ke:-ke),cy:xe,r:ke,fill:Te}).classed("spikeline",!0)}if(he){var qe,et,ze=U.vLinePoint;j=ze&&ze.xa,Y=ze&&ze.ya,j.spikesnap==="cursor"?(qe=se.pointerX,et=se.pointerY):(qe=j._offset+ze.x,et=Y._offset+ze.y);var Ue,We,Ze=x.readability(ze.color,le)<1.5?s.contrast(le):ze.color,nt=j.spikemode,ft=j.spikethickness,xt=j.spikecolor||Ze,It=l.getPxPosition(N,j);if(nt.indexOf("toaxis")!==-1||nt.indexOf("across")!==-1){if(nt.indexOf("toaxis")!==-1&&(Ue=It,We=et),nt.indexOf("across")!==-1){var Et=j._counterDomainMin,it=j._counterDomainMax;j.anchor==="free"&&(Et=Math.min(Et,j.position),it=Math.max(it,j.position)),Ue=ne.t+(1-it)*ne.h,We=ne.t+(1-Et)*ne.h}J.insert("line",":first-child").attr({x1:qe,x2:qe,y1:Ue,y2:We,"stroke-width":ft,stroke:xt,"stroke-dasharray":h.dashStyle(j.spikedash,ft)}).classed("spikeline",!0).classed("crisp",!0),J.insert("line",":first-child").attr({x1:qe,x2:qe,y1:Ue,y2:We,"stroke-width":ft+2,stroke:le}).classed("spikeline",!0).classed("crisp",!0)}nt.indexOf("marker")!==-1&&J.insert("circle",":first-child").attr({cx:qe,cy:It-(j.side!=="top"?ft:-ft),r:ft,fill:xt}).classed("spikeline",!0)}}}function Q(N,U){return!U||U.vLinePoint!==N._spikepoints.vLinePoint||U.hLinePoint!==N._spikepoints.hLinePoint}function K(N,U){return i.plainText(N||"",{len:U,allowedTags:["br","sub","sup","b","i","em"]})}function Z(N,U,te){var j=U[N+"a"],Y=U[N+"Val"],J=U.cd[0];if(j.type==="category")Y=j._categoriesMap[Y];else if(j.type==="date"){var ee=U.trace[N+"periodalignment"];if(ee){var ne=U.cd[U.index],se=ne[N+"Start"];se===void 0&&(se=ne[N]);var oe=ne[N+"End"];oe===void 0&&(oe=ne[N]);var he=oe-se;ee==="end"?Y+=he:ee==="middle"&&(Y+=he/2)}Y=j.d2c(Y)}return J&&J.t&&J.t.posLetter===j._id&&(te.boxmode!=="group"&&te.violinmode!=="group"||(Y+=J.t.dPos)),Y}function $(N){return N.offsetTop+N.clientTop}function re(N){return N.offsetLeft+N.clientLeft}function R(N,U){var te=N._fullLayout,j=U.getBoundingClientRect(),Y=j.x,J=j.y,ee=Y+j.width,ne=J+j.height,se=y.apply3DTransform(te._invTransform)(Y,J),oe=y.apply3DTransform(te._invTransform)(ee,ne),he=se[0],le=se[1],de=oe[0],xe=oe[1];return{x:he,y:le,width:de-he,height:xe-le,top:Math.min(le,xe),left:Math.min(he,de),right:Math.max(he,de),bottom:Math.max(le,xe)}}},{"../../lib":503,"../../lib/events":492,"../../lib/override_cursor":514,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../legend/defaults":418,"../legend/draw":419,"./constants":400,"./helpers":402,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],404:[function(u,q,W){var o=u("../../lib"),p=u("../color"),x=u("./helpers").isUnifiedHover;q.exports=function(y,e,r,t){t=t||{};var i=e.legend;function n(h){t.font[h]||(t.font[h]=i?e.legend.font[h]:e.font[h])}e&&x(e.hovermode)&&(t.font||(t.font={}),n("size"),n("family"),n("color"),i?(t.bgcolor||(t.bgcolor=p.combine(e.legend.bgcolor,e.paper_bgcolor)),t.bordercolor||(t.bordercolor=e.legend.bordercolor)):t.bgcolor||(t.bgcolor=e.paper_bgcolor)),r("hoverlabel.bgcolor",t.bgcolor),r("hoverlabel.bordercolor",t.bordercolor),r("hoverlabel.namelength",t.namelength),o.coerceFont(r,"hoverlabel.font",t.font),r("hoverlabel.align",t.align)}},{"../../lib":503,"../color":366,"./helpers":402}],405:[function(u,q,W){var o=u("../../lib"),p=u("./layout_attributes");q.exports=function(x,y){function e(r,t){return y[r]!==void 0?y[r]:o.coerce(x,y,p,r,t)}return e("clickmode"),e("hovermode")}},{"../../lib":503,"./layout_attributes":407}],406:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../lib"),x=u("../dragelement"),y=u("./helpers"),e=u("./layout_attributes"),r=u("./hover");q.exports={moduleType:"component",name:"fx",constants:u("./constants"),schema:{layout:e},attributes:u("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:u("./layout_global_defaults"),supplyDefaults:u("./defaults"),supplyLayoutDefaults:u("./layout_defaults"),calc:u("./calc"),getDistanceFunction:y.getDistanceFunction,getClosest:y.getClosest,inbox:y.inbox,quadrature:y.quadrature,appendArrayPointValue:y.appendArrayPointValue,castHoverOption:function(t,i,n){return p.castOption(t,i,"hoverlabel."+n)},castHoverinfo:function(t,i,n){return p.castOption(t,n,"hoverinfo",function(h){return p.coerceHoverinfo({hoverinfo:h},{_module:t._module},i)})},hover:r.hover,unhover:x.unhover,loneHover:r.loneHover,loneUnhover:function(t){var i=p.isD3Selection(t)?t:o.select(t);i.selectAll("g.hovertext").remove(),i.selectAll(".spikeline").remove()},click:u("./click")}},{"../../lib":503,"../dragelement":385,"./attributes":397,"./calc":398,"./click":399,"./constants":400,"./defaults":401,"./helpers":402,"./hover":403,"./layout_attributes":407,"./layout_defaults":408,"./layout_global_defaults":409,"@plotly/d3":58}],407:[function(u,q,W){var o=u("./constants"),p=u("../../plots/font_attributes"),x=p({editType:"none"});x.family.dflt=o.HOVERFONT,x.size.dflt=o.HOVERFONTSIZE,q.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:x,grouptitlefont:p({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":585,"./constants":400}],408:[function(u,q,W){var o=u("../../lib"),p=u("./layout_attributes"),x=u("./hovermode_defaults"),y=u("./hoverlabel_defaults");q.exports=function(e,r){function t(s,a){return o.coerce(e,r,p,s,a)}x(e,r)&&(t("hoverdistance"),t("spikedistance")),t("dragmode")==="select"&&t("selectdirection");var i=r._has("mapbox"),n=r._has("geo"),h=r._basePlotModules.length;r.dragmode==="zoom"&&((i||n)&&h===1||i&&n&&h===2)&&(r.dragmode="pan"),y(e,r,t),o.coerceFont(t,"hoverlabel.grouptitlefont",r.hoverlabel.font)}},{"../../lib":503,"./hoverlabel_defaults":404,"./hovermode_defaults":405,"./layout_attributes":407}],409:[function(u,q,W){var o=u("../../lib"),p=u("./hoverlabel_defaults"),x=u("./layout_attributes");q.exports=function(y,e){p(y,e,function(r,t){return o.coerce(y,e,x,r,t)})}},{"../../lib":503,"./hoverlabel_defaults":404,"./layout_attributes":407}],410:[function(u,q,W){var o=u("../../lib"),p=u("../../lib/regex").counter,x=u("../../plots/domain").attributes,y=u("../../plots/cartesian/constants").idRegex,e=u("../../plot_api/plot_template"),r={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[p("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[y.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[y.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:x({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function t(h,s,a){var l=s[a+"axes"],f=Object.keys((h._splomAxes||{})[a]||{});return Array.isArray(l)?l:f.length?f:void 0}function i(h,s,a,l,f,d){var v=s(h+"gap",a),m=s("domain."+h);s(h+"side",l);for(var c=new Array(f),b=m[0],g=(m[1]-b)/(f-v),w=g*(1-v),_=0;_<f;_++){var T=b+g*_;c[d?f-1-_:_]=[T,T+w]}return c}function n(h,s,a,l,f){var d,v=new Array(a);function m(c,b){s.indexOf(b)!==-1&&l[b]===void 0?(v[c]=b,l[b]=c):v[c]=""}if(Array.isArray(h))for(d=0;d<a;d++)m(d,h[d]);else for(m(0,f),d=1;d<a;d++)m(d,f+(d+1));return v}q.exports={moduleType:"component",name:"grid",schema:{layout:{grid:r}},layoutAttributes:r,sizeDefaults:function(h,s){var a=h.grid||{},l=t(s,a,"x"),f=t(s,a,"y");if(h.grid||l||f){var d,v,m=Array.isArray(a.subplots)&&Array.isArray(a.subplots[0]),c=Array.isArray(l),b=Array.isArray(f),g=c&&l!==a.xaxes&&b&&f!==a.yaxes;m?(d=a.subplots.length,v=a.subplots[0].length):(b&&(d=f.length),c&&(v=l.length));var w=e.newContainer(s,"grid"),_=S("rows",d),T=S("columns",v);if(_*T>1){!m&&!c&&!b&&S("pattern")==="independent"&&(m=!0),w._hasSubplotGrid=m;var k,L,M=S("roworder")==="top to bottom",I=m?.2:.1,P=m?.3:.1;g&&s._splomGridDflt&&(k=s._splomGridDflt.xside,L=s._splomGridDflt.yside),w._domains={x:i("x",S,I,k,T),y:i("y",S,P,L,_,M)}}else delete s.grid}function S(E,D){return o.coerce(a,w,r,E,D)}},contentDefaults:function(h,s){var a=s.grid;if(a&&a._domains){var l,f,d,v,m,c,b,g=h.grid||{},w=s._subplots,_=a._hasSubplotGrid,T=a.rows,k=a.columns,L=a.pattern==="independent",M=a._axisMap={};if(_){var I=g.subplots||[];c=a.subplots=new Array(T);var P=1;for(l=0;l<T;l++){var S=c[l]=new Array(k),E=I[l]||[];for(f=0;f<k;f++)if(L?(m=P===1?"xy":"x"+P+"y"+P,P++):m=E[f],S[f]="",w.cartesian.indexOf(m)!==-1){if(b=m.indexOf("y"),d=m.slice(0,b),v=m.slice(b),M[d]!==void 0&&M[d]!==f||M[v]!==void 0&&M[v]!==l)continue;S[f]=m,M[d]=f,M[v]=l}}}else{var D=t(s,g,"x"),F=t(s,g,"y");a.xaxes=n(D,w.xaxis,k,M,"x"),a.yaxes=n(F,w.yaxis,T,M,"y")}var H=a._anchors={},V=a.roworder==="top to bottom";for(var Q in M){var K,Z,$,re=Q.charAt(0),R=a[re+"side"];if(R.length<8)H[Q]="free";else if(re==="x"){if(R.charAt(0)==="t"===V?(K=0,Z=1,$=T):(K=T-1,Z=-1,$=-1),_){var N=M[Q];for(l=K;l!==$;l+=Z)if((m=c[l][N])&&(b=m.indexOf("y"),m.slice(0,b)===Q)){H[Q]=m.slice(b);break}}else for(l=K;l!==$;l+=Z)if(v=a.yaxes[l],w.cartesian.indexOf(Q+v)!==-1){H[Q]=v;break}}else if(R.charAt(0)==="l"?(K=0,Z=1,$=k):(K=k-1,Z=-1,$=-1),_){var U=M[Q];for(l=K;l!==$;l+=Z)if((m=c[U][l])&&(b=m.indexOf("y"),m.slice(b)===Q)){H[Q]=m.slice(0,b);break}}else for(l=K;l!==$;l+=Z)if(d=a.xaxes[l],w.cartesian.indexOf(d+Q)!==-1){H[Q]=d;break}}}}}},{"../../lib":503,"../../lib/regex":520,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/domain":584}],411:[function(u,q,W){var o=u("../../plots/cartesian/constants"),p=u("../../plot_api/plot_template").templatedArray;u("../../constants/axis_placeable_objects"),q.exports=p("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",o.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",o.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561}],412:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../lib/to_log_range");q.exports=function(x,y,e,r){y=y||{};var t=e==="log"&&y.type==="linear",i=e==="linear"&&y.type==="log";if(t||i){for(var n,h,s=x._fullLayout.images,a=y._id.charAt(0),l=0;l<s.length;l++)if(h="images["+l+"].",(n=s[l])[a+"ref"]===y._id){var f=n[a],d=n["size"+a],v=null,m=null;if(t){v=p(f,y.range);var c=d/Math.pow(10,v)/2;m=2*Math.log(c+Math.sqrt(1+c*c))/Math.LN10}else m=(v=Math.pow(10,f))*(Math.pow(10,d/2)-Math.pow(10,-d/2));o(v)?o(m)||(m=null):(v=null,m=null),r(h+a,v),r(h+"size"+a,m)}}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],413:[function(u,q,W){var o=u("../../lib"),p=u("../../plots/cartesian/axes"),x=u("../../plots/array_container_defaults"),y=u("./attributes");function e(r,t,i){function n(v,m){return o.coerce(r,t,y,v,m)}var h=n("source");if(!n("visible",!!h))return t;n("layer"),n("xanchor"),n("yanchor"),n("sizex"),n("sizey"),n("sizing"),n("opacity");for(var s={_fullLayout:i},a=["x","y"],l=0;l<2;l++){var f=a[l],d=p.coerceRef(r,t,s,f,"paper",void 0);d!=="paper"&&p.getFromId(s,d)._imgIndices.push(t._index),p.coercePosition(t,s,n,d,f,0)}return t}q.exports=function(r,t){x(r,t,{name:"images",handleItemDefaults:e})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":411}],414:[function(u,q,W){var o=u("@plotly/d3"),p=u("../drawing"),x=u("../../plots/cartesian/axes"),y=u("../../plots/cartesian/axis_ids"),e=u("../../constants/xmlns_namespaces");q.exports=function(r){var t,i,n=r._fullLayout,h=[],s={},a=[];for(i=0;i<n.images.length;i++){var l=n.images[i];if(l.visible)if(l.layer==="below"&&l.xref!=="paper"&&l.yref!=="paper"){t=y.ref2id(l.xref)+y.ref2id(l.yref);var f=n._plots[t];if(!f){a.push(l);continue}f.mainplot&&(t=f.mainplot.id),s[t]||(s[t]=[]),s[t].push(l)}else l.layer==="above"?h.push(l):a.push(l)}var d={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},v={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function m(k){var L=o.select(this);if(this._imgSrc!==k.source)if(L.attr("xmlns",e.svg),k.source&&k.source.slice(0,5)==="data:")L.attr("xlink:href",k.source),this._imgSrc=k.source;else{var M=new Promise(function(I){var P=new Image;function S(){L.remove(),I()}this.img=P,P.setAttribute("crossOrigin","anonymous"),P.onerror=S,P.onload=function(){var E=document.createElement("canvas");E.width=this.width,E.height=this.height,E.getContext("2d").drawImage(this,0,0);var D=E.toDataURL("image/png");L.attr("xlink:href",D),I()},L.on("error",S),P.src=k.source,this._imgSrc=k.source}.bind(this));r._promises.push(M)}}function c(k){var L,M,I=o.select(this),P=x.getFromId(r,k.xref),S=x.getFromId(r,k.yref),E=x.getRefType(k.xref)==="domain",D=x.getRefType(k.yref)==="domain",F=n._size;L=P!==void 0?typeof k.xref=="string"&&E?P._length*k.sizex:Math.abs(P.l2p(k.sizex)-P.l2p(0)):k.sizex*F.w,M=S!==void 0?typeof k.yref=="string"&&D?S._length*k.sizey:Math.abs(S.l2p(k.sizey)-S.l2p(0)):k.sizey*F.h;var H,V,Q=L*d[k.xanchor].offset,K=M*v[k.yanchor].offset,Z=d[k.xanchor].sizing+v[k.yanchor].sizing;switch(H=P!==void 0?typeof k.xref=="string"&&E?P._length*k.x+P._offset:P.r2p(k.x)+P._offset:k.x*F.w+F.l,H+=Q,V=S!==void 0?typeof k.yref=="string"&&D?S._length*(1-k.y)+S._offset:S.r2p(k.y)+S._offset:F.h-k.y*F.h+F.t,V+=K,k.sizing){case"fill":Z+=" slice";break;case"stretch":Z="none"}I.attr({x:H,y:V,width:L,height:M,preserveAspectRatio:Z,opacity:k.opacity});var $=(P&&x.getRefType(k.xref)!=="domain"?P._id:"")+(S&&x.getRefType(k.yref)!=="domain"?S._id:"");p.setClipUrl(I,$?"clip"+n._uid+$:null,r)}var b=n._imageLowerLayer.selectAll("image").data(a),g=n._imageUpperLayer.selectAll("image").data(h);b.enter().append("image"),g.enter().append("image"),b.exit().remove(),g.exit().remove(),b.each(function(k){m.bind(this)(k),c.bind(this)(k)}),g.each(function(k){m.bind(this)(k),c.bind(this)(k)});var w=Object.keys(n._plots);for(i=0;i<w.length;i++){t=w[i];var _=n._plots[t];if(_.imagelayer){var T=_.imagelayer.selectAll("image").data(s[t]||[]);T.enter().append("image"),T.exit().remove(),T.each(function(k){m.bind(this)(k),c.bind(this)(k)})}}}},{"../../constants/xmlns_namespaces":480,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../drawing":388,"@plotly/d3":58}],415:[function(u,q,W){q.exports={moduleType:"component",name:"images",layoutAttributes:u("./attributes"),supplyLayoutDefaults:u("./defaults"),includeBasePlot:u("../../plots/cartesian/include_components")("images"),draw:u("./draw"),convertCoords:u("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":411,"./convert_coords":412,"./defaults":413,"./draw":414}],416:[function(u,q,W){var o=u("../../plots/font_attributes"),p=u("../color/attributes");q.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:p.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:o({editType:"legend"}),grouptitlefont:o({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:o({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":585,"../color/attributes":365}],417:[function(u,q,W){q.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],418:[function(u,q,W){var o=u("../../registry"),p=u("../../lib"),x=u("../../plot_api/plot_template"),y=u("../../plots/attributes"),e=u("./attributes"),r=u("../../plots/layout_attributes"),t=u("./helpers");q.exports=function(i,n,h){var s,a=i.legend||{},l=x.newContainer(n,"legend");function f(S,E){return p.coerce(a,l,e,S,E)}for(var d=function(S,E){var D=s._input,F=s;return p.coerce(D,F,y,S,E)},v=n.font||{},m=p.coerceFont(f,"grouptitlefont",p.extendFlat({},v,{size:Math.round(1.1*v.size)})),c=0,b=!1,g="normal",w=0;w<h.length;w++)(s=h[w]).visible&&((s.showlegend||s._dfltShowLegend&&!(s._module&&s._module.attributes&&s._module.attributes.showlegend&&s._module.attributes.showlegend.dflt===!1))&&(c++,s.showlegend&&(b=!0,(o.traceIs(s,"pie-like")||s._input.showlegend===!0)&&c++),p.coerceFont(d,"legendgrouptitle.font",m)),(o.traceIs(s,"bar")&&n.barmode==="stack"||["tonextx","tonexty"].indexOf(s.fill)!==-1)&&(g=t.isGrouped({traceorder:g})?"grouped+reversed":"reversed"),s.legendgroup!==void 0&&s.legendgroup!==""&&(g=t.isReversed({traceorder:g})?"reversed+grouped":"grouped"));var _=p.coerce(i,n,r,"showlegend",b&&c>1);if(_===!1&&(n.legend=void 0),(_!==!1||a.uirevision)&&(f("uirevision",n.uirevision),_!==!1)){f("bgcolor",n.paper_bgcolor),f("bordercolor"),f("borderwidth");var T,k,L,M=p.coerceFont(f,"font",n.font),I=f("orientation")==="h";if(I?(T=0,o.getComponentMethod("rangeslider","isVisible")(i.xaxis)?(k=1.1,L="bottom"):(k=-.1,L="top")):(T=1.02,k=1,L="auto"),f("traceorder",g),t.isGrouped(n.legend)&&f("tracegroupgap"),f("itemsizing"),f("itemwidth"),f("itemclick"),f("itemdoubleclick"),f("groupclick"),f("x",T),f("xanchor"),f("y",k),f("yanchor",L),f("valign"),p.noneOrAll(a,l,["x","y"]),f("title.text")){f("title.side",I?"left":"top");var P=p.extendFlat({},M,{size:p.bigFont(M.size)});p.coerceFont(f,"title.font",P)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/layout_attributes":610,"../../registry":638,"./attributes":416,"./helpers":422}],419:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../lib"),x=u("../../plots/plots"),y=u("../../registry"),e=u("../../lib/events"),r=u("../dragelement"),t=u("../drawing"),i=u("../color"),n=u("../../lib/svg_text_utils"),h=u("./handle_click"),s=u("./constants"),a=u("../../constants/alignment"),l=a.LINE_SPACING,f=a.FROM_TL,d=a.FROM_BR,v=u("./get_legend_data"),m=u("./style"),c=u("./helpers");function b(M,I,P,S,E){var D=P.data()[0][0].trace,F={event:E,node:P.node(),curveNumber:D.index,expandedIndex:D._expandedIndex,data:M.data,layout:M.layout,frames:M._transitionData._frames,config:M._context,fullData:M._fullData,fullLayout:M._fullLayout};D._group&&(F.group=D._group),y.traceIs(D,"pie-like")&&(F.label=P.datum()[0].label),e.triggerHandler(M,"plotly_legendclick",F)!==!1&&(S===1?I._clickTimeout=setTimeout(function(){M._fullLayout&&h(P,M,S)},M._context.doubleClickDelay):S===2&&(I._clickTimeout&&clearTimeout(I._clickTimeout),M._legendMouseDownTime=0,e.triggerHandler(M,"plotly_legenddoubleclick",F)!==!1&&h(P,M,S)))}function g(M,I,P){var S,E,D=M.data()[0][0],F=D.trace,H=y.traceIs(F,"pie-like"),V=!P._inHover&&I._context.edits.legendText&&!H,Q=P._maxNameLength;D.groupTitle?(S=D.groupTitle.text,E=D.groupTitle.font):(E=P.font,P.entries?S=D.text:(S=H?D.label:F.name,F._meta&&(S=p.templateString(S,F._meta))));var K=p.ensureSingle(M,"text","legendtext");K.attr("text-anchor","start").call(t.font,E).text(V?w(S,Q):S);var Z=P.itemwidth+2*s.itemGap;n.positionText(K,Z,0),V?K.call(n.makeEditable,{gd:I,text:S}).call(T,M,I,P).on("edit",function($){this.text(w($,Q)).call(T,M,I,P);var re=D.trace._fullInput||{},R={};if(y.hasTransform(re,"groupby")){var N=y.getTransformIndices(re,"groupby"),U=N[N.length-1],te=p.keyedContainer(re,"transforms["+U+"].styles","target","value.name");te.set(D.trace._group,$),R=te.constructUpdate()}else R.name=$;return y.call("_guiRestyle",I,R,F.index)}):T(K,M,I,P)}function w(M,I){var P=Math.max(4,I);if(M&&M.trim().length>=P/2)return M;for(var S=P-(M=M||"").length;S>0;S--)M+=" ";return M}function _(M,I){var P,S=I._context.doubleClickDelay,E=1,D=p.ensureSingle(M,"rect","legendtoggle",function(F){I._context.staticPlot||F.style("cursor","pointer").attr("pointer-events","all"),F.call(i.fill,"rgba(0,0,0,0)")});I._context.staticPlot||(D.on("mousedown",function(){(P=new Date().getTime())-I._legendMouseDownTime<S?E+=1:(E=1,I._legendMouseDownTime=P)}),D.on("mouseup",function(){if(!I._dragged&&!I._editing){var F=I._fullLayout.legend;new Date().getTime()-I._legendMouseDownTime>S&&(E=Math.max(E-1,1)),b(I,F,M,E,o.event)}}))}function T(M,I,P,S,E){S._inHover&&M.attr("data-notex",!0),n.convertToTspans(M,P,function(){(function(D,F,H,V){var Q=D.data()[0][0];if(!H._inHover&&Q&&!Q.trace.showlegend)return void D.remove();var K=D.select("g[class*=math-group]"),Z=K.node();H||(H=F._fullLayout.legend);var $,re=H.borderwidth;$=V===1?H.title.font:Q.groupTitle?Q.groupTitle.font:H.font;var R,N,U=$.size*l;if(Z){var te=t.bBox(Z);R=te.height,N=te.width,V===1?t.setTranslate(K,re,re+.75*R):t.setTranslate(K,0,.25*R)}else{var j=D.select(V===1?".legendtitletext":".legendtext"),Y=n.lineCount(j),J=j.node();if(R=U*Y,N=J?t.bBox(J).width:0,V===1)H.title.side==="left"&&(N+=2*s.itemGap),n.positionText(j,re+s.titlePad,re+U);else{var ee=2*s.itemGap+H.itemwidth;Q.groupTitle&&(ee=s.itemGap,N-=H.itemwidth),n.positionText(j,ee,-U*((Y-1)/2-.3))}}V===1?(H._titleWidth=N,H._titleHeight=R):(Q.lineHeight=U,Q.height=Math.max(R,16)+3,Q.width=N)})(I,P,S,E)})}function k(M){return p.isRightAnchor(M)?"right":p.isCenterAnchor(M)?"center":"left"}function L(M){return p.isBottomAnchor(M)?"bottom":p.isMiddleAnchor(M)?"middle":"top"}q.exports=function(M,I){return I||(I=M._fullLayout.legend||{}),function(P,S){var E,D,F=P._fullLayout,H="legend"+F._uid,V=S._inHover;if(V?(E=S.layer,H+="-hover"):E=F._infolayer,!!E){if(P._legendMouseDownTime||(P._legendMouseDownTime=0),V){if(!S.entries)return;D=v(S.entries,S)}else{if(!P.calcdata)return;D=F.showlegend&&v(P.calcdata,S)}var Q=F.hiddenlabels||[];if(!(V||F.showlegend&&D.length))return E.selectAll(".legend").remove(),F._topdefs.select("#"+H).remove(),x.autoMargin(P,"legend");var K=p.ensureSingle(E,"g","legend",function(Y){V||Y.attr("pointer-events","all")}),Z=p.ensureSingleById(F._topdefs,"clipPath",H,function(Y){Y.append("rect")}),$=p.ensureSingle(K,"rect","bg",function(Y){Y.attr("shape-rendering","crispEdges")});$.call(i.stroke,S.bordercolor).call(i.fill,S.bgcolor).style("stroke-width",S.borderwidth+"px");var re=p.ensureSingle(K,"g","scrollbox"),R=S.title;if(S._titleWidth=0,S._titleHeight=0,R.text){var N=p.ensureSingle(re,"text","legendtitletext");N.attr("text-anchor","start").call(t.font,R.font).text(R.text),T(N,re,P,S,1)}else re.selectAll(".legendtitletext").remove();var U=p.ensureSingle(K,"rect","scrollbar",function(Y){Y.attr(s.scrollBarEnterAttrs).call(i.fill,s.scrollBarColor)}),te=re.selectAll("g.groups").data(D);te.enter().append("g").attr("class","groups"),te.exit().remove();var j=te.selectAll("g.traces").data(p.identity);j.enter().append("g").attr("class","traces"),j.exit().remove(),j.style("opacity",function(Y){var J=Y[0].trace;return y.traceIs(J,"pie-like")?Q.indexOf(Y[0].label)!==-1?.5:1:J.visible==="legendonly"?.5:1}).each(function(){o.select(this).call(g,P,S)}).call(m,P,S).each(function(){V||o.select(this).call(_,P)}),p.syncOrAsync([x.previousPromises,function(){return function(Y,J,ee,ne){var se=Y._fullLayout;ne||(ne=se.legend);var oe=se._size,he=c.isVertical(ne),le=c.isGrouped(ne),de=ne.borderwidth,xe=2*de,we=s.itemGap,be=ne.itemwidth+2*we,Ae=2*(de+we),fe=L(ne),me=ne.y<0||ne.y===0&&fe==="top",ke=ne.y>1||ne.y===1&&fe==="bottom",Te=ne.tracegroupgap;ne._maxHeight=Math.max(me||ke?se.height/2:oe.h,30);var Me=0;ne._width=0,ne._height=0;var Oe=function(Be){var Je=0,Se=0,Pe=Be.title.side;return Pe&&(Pe.indexOf("left")!==-1&&(Je=Be._titleWidth),Pe.indexOf("top")!==-1&&(Se=Be._titleHeight)),[Je,Se]}(ne);if(he)ee.each(function(Be){var Je=Be[0].height;t.setTranslate(this,de+Oe[0],de+Oe[1]+ne._height+Je/2+we),ne._height+=Je,ne._width=Math.max(ne._width,Be[0].width)}),Me=be+ne._width,ne._width+=we+be+xe,ne._height+=Ae,le&&(J.each(function(Be,Je){t.setTranslate(this,0,Je*ne.tracegroupgap)}),ne._height+=(ne._lgroupsLength-1)*ne.tracegroupgap);else{var Fe=k(ne),qe=ne.x<0||ne.x===0&&Fe==="right",et=ne.x>1||ne.x===1&&Fe==="left",ze=ke||me,Ue=se.width/2;ne._maxWidth=Math.max(qe?ze&&Fe==="left"?oe.l+oe.w:Ue:et?ze&&Fe==="right"?oe.r+oe.w:Ue:oe.w,2*be);var We=0,Ze=0;ee.each(function(Be){var Je=Be[0].width+be;We=Math.max(We,Je),Ze+=Je}),Me=null;var nt=0;if(le){var ft=0,xt=0,It=0;J.each(function(){var Be=0,Je=0;o.select(this).selectAll("g.traces").each(function(Pe){var De=Pe[0].width,Ie=Pe[0].height;t.setTranslate(this,Oe[0],Oe[1]+de+we+Ie/2+Je),Je+=Ie,Be=Math.max(Be,be+De)}),ft=Math.max(ft,Je);var Se=Be+we;xt>0&&Se+de+xt>ne._maxWidth&&(nt=Math.max(nt,xt),xt=0,It+=ft+Te,ft=Je),t.setTranslate(this,xt,It),xt+=Se}),ne._width=Math.max(nt,xt)+de,ne._height=It+ft+Ae}else{var Et=ee.size(),it=Ze+xe+(Et-1)*we<ne._maxWidth,rt=0,At=0,Gt=0,Qt=0;ee.each(function(Be){var Je=Be[0].height,Se=be+Be[0].width,Pe=(it?Se:We)+we;Pe+de+At-we>=ne._maxWidth&&(nt=Math.max(nt,Qt),At=0,Gt+=rt,ne._height+=rt,rt=0),t.setTranslate(this,Oe[0]+de+At,Oe[1]+de+Gt+Je/2+we),Qt=At+Se+we,At+=Pe,rt=Math.max(rt,Je)}),it?(ne._width=At+xe,ne._height=rt+Ae):(ne._width=Math.max(nt,Qt)+xe,ne._height+=rt+Ae)}}ne._width=Math.ceil(Math.max(ne._width+Oe[0],ne._titleWidth+2*(de+s.titlePad))),ne._height=Math.ceil(Math.max(ne._height+Oe[1],ne._titleHeight+2*(de+s.itemGap))),ne._effHeight=Math.min(ne._height,ne._maxHeight);var Ve=Y._context.edits,Ye=Ve.legendText||Ve.legendPosition;ee.each(function(Be){var Je=o.select(this).select(".legendtoggle"),Se=Be[0].height,Pe=Ye?be:Me||be+Be[0].width;he||(Pe+=we/2),t.setRect(Je,0,-Se/2,Pe,Se)})}(P,te,j,S)},function(){var Y,J,ee,ne,se=F._size,oe=S.borderwidth;if(!V){if(function(ze){var Ue=ze._fullLayout.legend,We=k(Ue),Ze=L(Ue);return x.autoMargin(ze,"legend",{x:Ue.x,y:Ue.y,l:Ue._width*f[We],r:Ue._width*d[We],b:Ue._effHeight*d[Ze],t:Ue._effHeight*f[Ze]})}(P))return;var he=se.l+se.w*S.x-f[k(S)]*S._width,le=se.t+se.h*(1-S.y)-f[L(S)]*S._effHeight;if(F.margin.autoexpand){var de=he,xe=le;he=p.constrain(he,0,F.width-S._width),le=p.constrain(le,0,F.height-S._effHeight),he!==de&&p.log("Constrain legend.x to make legend fit inside graph"),le!==xe&&p.log("Constrain legend.y to make legend fit inside graph")}t.setTranslate(K,he,le)}if(U.on(".drag",null),K.on("wheel",null),V||S._height<=S._maxHeight||P._context.staticPlot){var we=S._effHeight;V&&(we=S._height),$.attr({width:S._width-oe,height:we-oe,x:oe/2,y:oe/2}),t.setTranslate(re,0,0),Z.select("rect").attr({width:S._width-2*oe,height:we-2*oe,x:oe,y:oe}),t.setClipUrl(re,H,P),t.setRect(U,0,0,0,0),delete S._scrollY}else{var be,Ae,fe,me=Math.max(s.scrollBarMinHeight,S._effHeight*S._effHeight/S._height),ke=S._effHeight-me-2*s.scrollBarMargin,Te=S._height-S._effHeight,Me=ke/Te,Oe=Math.min(S._scrollY||0,Te);$.attr({width:S._width-2*oe+s.scrollBarWidth+s.scrollBarMargin,height:S._effHeight-oe,x:oe/2,y:oe/2}),Z.select("rect").attr({width:S._width-2*oe+s.scrollBarWidth+s.scrollBarMargin,height:S._effHeight-2*oe,x:oe,y:oe+Oe}),t.setClipUrl(re,H,P),et(Oe,me,Me),K.on("wheel",function(){et(Oe=p.constrain(S._scrollY+o.event.deltaY/ke*Te,0,Te),me,Me),Oe!==0&&Oe!==Te&&o.event.preventDefault()});var Fe=o.behavior.drag().on("dragstart",function(){var ze=o.event.sourceEvent;be=ze.type==="touchstart"?ze.changedTouches[0].clientY:ze.clientY,fe=Oe}).on("drag",function(){var ze=o.event.sourceEvent;ze.buttons===2||ze.ctrlKey||(Ae=ze.type==="touchmove"?ze.changedTouches[0].clientY:ze.clientY,et(Oe=function(Ue,We,Ze){var nt=(Ze-We)/Me+Ue;return p.constrain(nt,0,Te)}(fe,be,Ae),me,Me))});U.call(Fe);var qe=o.behavior.drag().on("dragstart",function(){var ze=o.event.sourceEvent;ze.type==="touchstart"&&(be=ze.changedTouches[0].clientY,fe=Oe)}).on("drag",function(){var ze=o.event.sourceEvent;ze.type==="touchmove"&&(Ae=ze.changedTouches[0].clientY,et(Oe=function(Ue,We,Ze){var nt=(We-Ze)/Me+Ue;return p.constrain(nt,0,Te)}(fe,be,Ae),me,Me))});re.call(qe)}function et(ze,Ue,We){S._scrollY=P._fullLayout.legend._scrollY=ze,t.setTranslate(re,0,-ze),t.setRect(U,S._width,s.scrollBarMargin+ze*We,s.scrollBarWidth,Ue),Z.select("rect").attr("y",oe+ze)}P._context.edits.legendPosition&&(K.classed("cursor-move",!0),r.init({element:K.node(),gd:P,prepFn:function(){var ze=t.getTranslate(K);ee=ze.x,ne=ze.y},moveFn:function(ze,Ue){var We=ee+ze,Ze=ne+Ue;t.setTranslate(K,We,Ze),Y=r.align(We,0,se.l,se.l+se.w,S.xanchor),J=r.align(Ze,0,se.t+se.h,se.t,S.yanchor)},doneFn:function(){Y!==void 0&&J!==void 0&&y.call("_guiRelayout",P,{"legend.x":Y,"legend.y":J})},clickFn:function(ze,Ue){var We=E.selectAll("g.traces").filter(function(){var Ze=this.getBoundingClientRect();return Ue.clientX>=Ze.left&&Ue.clientX<=Ze.right&&Ue.clientY>=Ze.top&&Ue.clientY<=Ze.bottom});We.size()>0&&b(P,K,We,ze,Ue)}}))}],P)}}(M,I)}},{"../../constants/alignment":471,"../../lib":503,"../../lib/events":492,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":417,"./get_legend_data":420,"./handle_click":421,"./helpers":422,"./style":424,"@plotly/d3":58}],420:[function(u,q,W){var o=u("../../registry"),p=u("./helpers");q.exports=function(x,y){var e,r,t=y._inHover,i=p.isGrouped(y),n=p.isReversed(y),h={},s=[],a=!1,l={},f=0,d=0;function v(F,H){if(F!==""&&p.isGrouped(y))s.indexOf(F)===-1?(s.push(F),a=!0,h[F]=[H]):h[F].push(H);else{var V="~~i"+f;s.push(V),h[V]=[H],f++}}for(e=0;e<x.length;e++){var m=x[e],c=m[0],b=c.trace,g=b.legendgroup;if(t||b.visible&&b.showlegend)if(o.traceIs(b,"pie-like"))for(l[g]||(l[g]={}),r=0;r<m.length;r++){var w=m[r].label;l[g][w]||(v(g,{label:w,color:m[r].color,i:m[r].i,trace:b,pts:m[r].pts}),l[g][w]=!0,d=Math.max(d,(w||"").length))}else v(g,c),d=Math.max(d,(b.name||"").length)}if(!s.length)return[];var _=!a||!i,T=[];for(e=0;e<s.length;e++){var k=h[s[e]];_?T.push(k[0]):T.push(k)}for(_&&(T=[T]),e=0;e<T.length;e++){var L=1/0;for(r=0;r<T[e].length;r++){var M=T[e][r].trace.legendrank;L>M&&(L=M)}T[e][0]._groupMinRank=L,T[e][0]._preGroupSort=e}var I=function(F,H){return F.trace.legendrank-H.trace.legendrank||F._preSort-H._preSort};for(T.forEach(function(F,H){F[0]._preGroupSort=H}),T.sort(function(F,H){return F[0]._groupMinRank-H[0]._groupMinRank||F[0]._preGroupSort-H[0]._preGroupSort}),e=0;e<T.length;e++){T[e].forEach(function(F,H){F._preSort=H}),T[e].sort(I);var P=T[e][0].trace,S=null;for(r=0;r<T[e].length;r++){var E=T[e][r].trace.legendgrouptitle;if(E&&E.text){S=E,t&&(E.font=y._groupTitleFont);break}}if(n&&T[e].reverse(),S){var D=!1;for(r=0;r<T[e].length;r++)if(o.traceIs(T[e][r].trace,"pie-like")){D=!0;break}T[e].unshift({i:-1,groupTitle:S,noClick:D,trace:{showlegend:P.showlegend,legendgroup:P.legendgroup,visible:y.groupclick==="toggleitem"||P.visible}})}for(r=0;r<T[e].length;r++)T[e][r]=[T[e][r]]}return y._lgroupsLength=T.length,y._maxNameLength=d,T}},{"../../registry":638,"./helpers":422}],421:[function(u,q,W){var o=u("../../lib"),p=u("../../registry"),x=!0;q.exports=function(y,e,r){var t=e._fullLayout;if(!e._dragged&&!e._editing){var i,n=t.legend.itemclick,h=t.legend.itemdoubleclick,s=t.legend.groupclick;if(r===1&&n==="toggle"&&h==="toggleothers"&&x&&e.data&&e._context.showTips&&o.notifier(o._(e,"Double-click on legend to isolate one trace"),"long"),x=!1,r===1?i=n:r===2&&(i=h),i){var a=s==="togglegroup",l=t.hiddenlabels?t.hiddenlabels.slice():[],f=y.data()[0][0];if(!f.groupTitle||!f.noClick){var d,v,m,c,b,g=e._fullData,w=f.trace,_=w.legendgroup,T={},k=[],L=[],M=[];if(p.traceIs(w,"pie-like")){var I=f.label,P=l.indexOf(I);i==="toggle"?P===-1?l.push(I):l.splice(P,1):i==="toggleothers"&&(l=[],e.calcdata[0].forEach(function(U){I!==U.label&&l.push(U.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===l.length&&P===-1&&(l=[])),p.call("_guiRelayout",e,"hiddenlabels",l)}else{var S,E=_&&_.length,D=[];if(E)for(d=0;d<g.length;d++)(S=g[d]).visible&&S.legendgroup===_&&D.push(d);if(i==="toggle"){var F;switch(w.visible){case!0:F="legendonly";break;case!1:F=!1;break;case"legendonly":F=!0}if(E)if(a)for(d=0;d<g.length;d++)g[d].visible!==!1&&g[d].legendgroup===_&&N(g[d],F);else N(w,F);else N(w,F)}else if(i==="toggleothers"){var H,V,Q,K,Z=!0;for(d=0;d<g.length;d++)if(H=g[d]===w,Q=g[d].showlegend!==!0,!(H||Q||(V=E&&g[d].legendgroup===_)||g[d].visible!==!0||p.traceIs(g[d],"notLegendIsolatable"))){Z=!1;break}for(d=0;d<g.length;d++)if(g[d].visible!==!1&&!p.traceIs(g[d],"notLegendIsolatable"))switch(w.visible){case"legendonly":N(g[d],!0);break;case!0:K=!!Z||"legendonly",H=g[d]===w,Q=g[d].showlegend!==!0&&!g[d].legendgroup,V=H||E&&g[d].legendgroup===_,N(g[d],!(!V&&!Q)||K)}}for(d=0;d<L.length;d++)if(m=L[d]){var $=m.constructUpdate(),re=Object.keys($);for(v=0;v<re.length;v++)c=re[v],(T[c]=T[c]||[])[M[d]]=$[c]}for(b=Object.keys(T),d=0;d<b.length;d++)for(c=b[d],v=0;v<k.length;v++)T[c].hasOwnProperty(v)||(T[c][v]=void 0);p.call("_guiRestyle",e,T,k)}}}}function R(U,te,j){var Y=k.indexOf(U),J=T[te];return J||(J=T[te]=[]),k.indexOf(U)===-1&&(k.push(U),Y=k.length-1),J[Y]=j,Y}function N(U,te){if(!f.groupTitle||a){var j=U._fullInput;if(p.hasTransform(j,"groupby")){var Y=L[j.index];if(!Y){var J=p.getTransformIndices(j,"groupby"),ee=J[J.length-1];Y=o.keyedContainer(j,"transforms["+ee+"].styles","target","value.visible"),L[j.index]=Y}var ne=Y.get(U._group);ne===void 0&&(ne=!0),ne!==!1&&Y.set(U._group,te),M[j.index]=R(j.index,"visible",j.visible!==!1)}else{var se=j.visible!==!1&&te;R(j.index,"visible",se)}}}}},{"../../lib":503,"../../registry":638}],422:[function(u,q,W){W.isGrouped=function(o){return(o.traceorder||"").indexOf("grouped")!==-1},W.isVertical=function(o){return o.orientation!=="h"},W.isReversed=function(o){return(o.traceorder||"").indexOf("reversed")!==-1}},{}],423:[function(u,q,W){q.exports={moduleType:"component",name:"legend",layoutAttributes:u("./attributes"),supplyLayoutDefaults:u("./defaults"),draw:u("./draw"),style:u("./style")}},{"./attributes":416,"./defaults":418,"./draw":419,"./style":424}],424:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../registry"),x=u("../../lib"),y=x.strTranslate,e=u("../drawing"),r=u("../color"),t=u("../colorscale/helpers").extractOpts,i=u("../../traces/scatter/subtypes"),n=u("../../traces/pie/style_one"),h=u("../../traces/pie/helpers").castOption,s=u("./constants");function a(d,v){return(v?"radial":"horizontal")+(d?"":"reversed")}function l(d){var v=d[0].trace,m=v.contours,c=i.hasLines(v),b=i.hasMarkers(v),g=v.visible&&v.fill&&v.fill!=="none",w=!1,_=!1;if(m){var T=m.coloring;T==="lines"?w=!0:c=T==="none"||T==="heatmap"||m.showlines,m.type==="constraint"?g=m._operation!=="=":T!=="fill"&&T!=="heatmap"||(_=!0)}return{showMarker:b,showLine:c,showFill:g,showGradientLine:w,showGradientFill:_,anyLine:c||w,anyFill:g||_}}function f(d,v,m){return d&&x.isArrayOrTypedArray(d)?v:d>m?m:d}q.exports=function(d,v,m){var c=v._fullLayout;m||(m=c.legend);var b=m.itemsizing==="constant",g=m.itemwidth,w=(g+2*s.itemGap)/2,_=y(w,0),T=function(M,I,P,S){var E;if(M+1)E=M;else{if(!(I&&I.width>0))return 0;E=I.width}return b?S:Math.min(E,P)};function k(M,I,P){var S=M[0].trace,E=S.marker||{},D=E.line||{},F=P?S.visible&&S.type===P:p.traceIs(S,"bar"),H=o.select(I).select("g.legendpoints").selectAll("path.legend"+P).data(F?[M]:[]);H.enter().append("path").classed("legend"+P,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",_),H.exit().remove(),H.each(function(V){var Q=o.select(this),K=V[0],Z=T(K.mlw,E.line,5,2);Q.style("stroke-width",Z+"px");var $=K.mcc;if(!m._inHover&&"mc"in K){var re=t(E),R=re.mid;R===void 0&&(R=(re.max+re.min)/2),$=e.tryColorscale(E,"")(R)}var N=$||K.mc||E.color,U=E.pattern,te=U&&e.getPatternAttr(U.shape,0,"");if(te){var j=e.getPatternAttr(U.bgcolor,0,null),Y=e.getPatternAttr(U.fgcolor,0,null),J=U.fgopacity,ee=f(U.size,8,10),ne=f(U.solidity,.5,1),se="legend-"+S.uid;Q.call(e.pattern,"legend",v,se,te,ee,ne,$,U.fillmode,j,Y,J)}else Q.call(r.fill,N);Z&&r.stroke(Q,K.mlc||D.color)})}function L(M,I,P){var S=M[0],E=S.trace,D=P?E.visible&&E.type===P:p.traceIs(E,P),F=o.select(I).select("g.legendpoints").selectAll("path.legend"+P).data(D?[M]:[]);if(F.enter().append("path").classed("legend"+P,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",_),F.exit().remove(),F.size()){var H=(E.marker||{}).line,V=T(h(H.width,S.pts),H,5,2),Q=x.minExtend(E,{marker:{line:{width:V}}});Q.marker.line.color=H.color;var K=x.minExtend(S,{trace:Q});n(F,K,Q)}}d.each(function(M){var I=o.select(this),P=x.ensureSingle(I,"g","layers");P.style("opacity",M[0].trace.opacity);var S=m.valign,E=M[0].lineHeight,D=M[0].height;if(S!=="middle"&&E&&D){var F={top:1,bottom:-1}[S]*(.5*(E-D+3));P.attr("transform",y(0,F))}else P.attr("transform",null);P.selectAll("g.legendfill").data([M]).enter().append("g").classed("legendfill",!0),P.selectAll("g.legendlines").data([M]).enter().append("g").classed("legendlines",!0);var H=P.selectAll("g.legendsymbols").data([M]);H.enter().append("g").classed("legendsymbols",!0),H.selectAll("g.legendpoints").data([M]).enter().append("g").classed("legendpoints",!0)}).each(function(M){var I,P=M[0].trace,S=[];if(P.visible)switch(P.type){case"histogram2d":case"heatmap":S=[["M-15,-2V4H15V-2Z"]],I=!0;break;case"choropleth":case"choroplethmapbox":S=[["M-6,-6V6H6V-6Z"]],I=!0;break;case"densitymapbox":S=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],I="radial";break;case"cone":S=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],I=!1;break;case"streamtube":S=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],I=!1;break;case"surface":S=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],I=!0;break;case"mesh3d":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],I=!1;break;case"volume":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],I=!0;break;case"isosurface":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],I=!1}var E=o.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(S);E.enter().append("path").classed("legend3dandfriends",!0).attr("transform",_).style("stroke-miterlimit",1),E.exit().remove(),E.each(function(D,F){var H,V=o.select(this),Q=t(P),K=Q.colorscale,Z=Q.reversescale;if(K){if(!I){var $=K.length;H=F===0?K[Z?$-1:0][1]:F===1?K[Z?0:$-1][1]:K[Math.floor(($-1)/2)][1]}}else{var re=P.vertexcolor||P.facecolor||P.color;H=x.isArrayOrTypedArray(re)?re[F]||re[0]:re}V.attr("d",D[0]),H?V.call(r.fill,H):V.call(function(R){if(R.size()){var N="legendfill-"+P.uid;e.gradient(R,v,N,a(Z,I==="radial"),K,"fill")}})})}).each(function(M){var I=M[0].trace,P=I.type==="waterfall";if(M[0]._distinct&&P){var S=M[0].trace[M[0].dir].marker;return M[0].mc=S.color,M[0].mlw=S.line.width,M[0].mlc=S.line.color,k(M,this,"waterfall")}var E=[];I.visible&&P&&(E=M[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var D=o.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(E);D.enter().append("path").classed("legendwaterfall",!0).attr("transform",_).style("stroke-miterlimit",1),D.exit().remove(),D.each(function(F){var H=o.select(this),V=I[F[0]].marker,Q=T(void 0,V.line,5,2);H.attr("d",F[1]).style("stroke-width",Q+"px").call(r.fill,V.color),Q&&H.call(r.stroke,V.line.color)})}).each(function(M){k(M,this,"funnel")}).each(function(M){k(M,this)}).each(function(M){var I=M[0].trace,P=o.select(this).select("g.legendpoints").selectAll("path.legendbox").data(I.visible&&p.traceIs(I,"box-violin")?[M]:[]);P.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",_),P.exit().remove(),P.each(function(){var S=o.select(this);if(I.boxpoints!=="all"&&I.points!=="all"||r.opacity(I.fillcolor)!==0||r.opacity((I.line||{}).color)!==0){var E=T(void 0,I.line,5,2);S.style("stroke-width",E+"px").call(r.fill,I.fillcolor),E&&r.stroke(S,I.line.color)}else{var D=x.minExtend(I,{marker:{size:b?12:x.constrain(I.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});P.call(e.pointStyle,D,v)}})}).each(function(M){L(M,this,"funnelarea")}).each(function(M){L(M,this,"pie")}).each(function(M){var I,P,S=l(M),E=S.showFill,D=S.showLine,F=S.showGradientLine,H=S.showGradientFill,V=S.anyFill,Q=S.anyLine,K=M[0],Z=K.trace,$=t(Z),re=$.colorscale,R=$.reversescale,N=i.hasMarkers(Z)||!V?"M5,0":Q?"M5,-2":"M5,-3",U=o.select(this),te=U.select(".legendfill").selectAll("path").data(E||H?[M]:[]);if(te.enter().append("path").classed("js-fill",!0),te.exit().remove(),te.attr("d",N+"h"+g+"v6h-"+g+"z").call(E?e.fillGroupStyle:function(J){if(J.size()){var ee="legendfill-"+Z.uid;e.gradient(J,v,ee,a(R),re,"fill")}}),D||F){var j=T(void 0,Z.line,10,5);P=x.minExtend(Z,{line:{width:j}}),I=[x.minExtend(K,{trace:P})]}var Y=U.select(".legendlines").selectAll("path").data(D||F?[I]:[]);Y.enter().append("path").classed("js-line",!0),Y.exit().remove(),Y.attr("d",N+(F?"l"+g+",0.0001":"h"+g)).call(D?e.lineGroupStyle:function(J){if(J.size()){var ee="legendline-"+Z.uid;e.lineGroupStyle(J),e.gradient(J,v,ee,a(R),re,"stroke")}})}).each(function(M){var I,P,S=l(M),E=S.anyFill,D=S.anyLine,F=S.showLine,H=S.showMarker,V=M[0],Q=V.trace,K=!H&&!D&&!E&&i.hasText(Q);function Z(Y,J,ee,ne){var se=x.nestedProperty(Q,Y).get(),oe=x.isArrayOrTypedArray(se)&&J?J(se):se;if(b&&oe&&ne!==void 0&&(oe=ne),ee){if(oe<ee[0])return ee[0];if(oe>ee[1])return ee[1]}return oe}function $(Y){return V._distinct&&V.index&&Y[V.index]?Y[V.index]:Y[0]}if(H||K||F){var re={},R={};if(H){re.mc=Z("marker.color",$),re.mx=Z("marker.symbol",$),re.mo=Z("marker.opacity",x.mean,[.2,1]),re.mlc=Z("marker.line.color",$),re.mlw=Z("marker.line.width",x.mean,[0,5],2),R.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var N=Z("marker.size",x.mean,[2,16],12);re.ms=N,R.marker.size=N}F&&(R.line={width:Z("line.width",$,[0,10],5)}),K&&(re.tx="Aa",re.tp=Z("textposition",$),re.ts=10,re.tc=Z("textfont.color",$),re.tf=Z("textfont.family",$)),I=[x.minExtend(V,re)],(P=x.minExtend(Q,R)).selectedpoints=null,P.texttemplate=null}var U=o.select(this).select("g.legendpoints"),te=U.selectAll("path.scatterpts").data(H?I:[]);te.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",_),te.exit().remove(),te.call(e.pointStyle,P,v),H&&(I[0].mrc=3);var j=U.selectAll("g.pointtext").data(K?I:[]);j.enter().append("g").classed("pointtext",!0).append("text").attr("transform",_),j.exit().remove(),j.selectAll("text").call(e.textPointStyle,P,v)}).each(function(M){var I=M[0].trace,P=o.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(I.visible&&I.type==="candlestick"?[M,M]:[]);P.enter().append("path").classed("legendcandle",!0).attr("d",function(S,E){return E?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",_).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(S,E){var D=o.select(this),F=I[E?"increasing":"decreasing"],H=T(void 0,F.line,5,2);D.style("stroke-width",H+"px").call(r.fill,F.fillcolor),H&&r.stroke(D,F.line.color)})}).each(function(M){var I=M[0].trace,P=o.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(I.visible&&I.type==="ohlc"?[M,M]:[]);P.enter().append("path").classed("legendohlc",!0).attr("d",function(S,E){return E?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",_).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(S,E){var D=o.select(this),F=I[E?"increasing":"decreasing"],H=T(void 0,F.line,5,2);D.style("fill","none").call(e.dashLine,F.line.dash,H),H&&r.stroke(D,F.line.color)})})}},{"../../lib":503,"../../registry":638,"../../traces/pie/helpers":905,"../../traces/pie/style_one":911,"../../traces/scatter/subtypes":951,"../color":366,"../colorscale/helpers":377,"../drawing":388,"./constants":417,"@plotly/d3":58}],425:[function(u,q,W){u("./constants"),q.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":427}],426:[function(u,q,W){var o=u("../../registry"),p=u("../../plots/plots"),x=u("../../plots/cartesian/axis_ids"),y=u("../../fonts/ploticon"),e=u("../shapes/draw").eraseActiveShape,r=u("../../lib"),t=r._,i=q.exports={};function n(c,b){var g,w,_=b.currentTarget,T=_.getAttribute("data-attr"),k=_.getAttribute("data-val")||!0,L=c._fullLayout,M={},I=x.list(c,null,!0),P=L._cartesianSpikesEnabled;if(T==="zoom"){var S,E=k==="in"?.5:2,D=(1+E)/2,F=(1-E)/2;for(w=0;w<I.length;w++)if(!(g=I[w]).fixedrange)if(S=g._name,k==="auto")M[S+".autorange"]=!0;else if(k==="reset"){if(g._rangeInitial===void 0)M[S+".autorange"]=!0;else{var H=g._rangeInitial.slice();M[S+".range[0]"]=H[0],M[S+".range[1]"]=H[1]}g._showSpikeInitial!==void 0&&(M[S+".showspikes"]=g._showSpikeInitial,P!=="on"||g._showSpikeInitial||(P="off"))}else{var V=[g.r2l(g.range[0]),g.r2l(g.range[1])],Q=[D*V[0]+F*V[1],D*V[1]+F*V[0]];M[S+".range[0]"]=g.l2r(Q[0]),M[S+".range[1]"]=g.l2r(Q[1])}}else T!=="hovermode"||k!=="x"&&k!=="y"||(k=L._isHoriz?"y":"x",_.setAttribute("data-val",k)),M[T]=k;L._cartesianSpikesEnabled=P,o.call("_guiRelayout",c,M)}function h(c,b){for(var g=b.currentTarget,w=g.getAttribute("data-attr"),_=g.getAttribute("data-val")||!0,T=c._fullLayout._subplots.gl3d||[],k={},L=w.split("."),M=0;M<T.length;M++)k[T[M]+"."+L[1]]=_;var I=_==="pan"?_:"zoom";k.dragmode=I,o.call("_guiRelayout",c,k)}function s(c,b){for(var g=b.currentTarget.getAttribute("data-attr"),w=g==="resetLastSave",_=g==="resetDefault",T=c._fullLayout,k=T._subplots.gl3d||[],L={},M=0;M<k.length;M++){var I,P=k[M],S=P+".camera",E=P+".aspectratio",D=P+".aspectmode",F=T[P]._scene;w?(L[S+".up"]=F.viewInitial.up,L[S+".eye"]=F.viewInitial.eye,L[S+".center"]=F.viewInitial.center,I=!0):_&&(L[S+".up"]=null,L[S+".eye"]=null,L[S+".center"]=null,I=!0),I&&(L[E+".x"]=F.viewInitial.aspectratio.x,L[E+".y"]=F.viewInitial.aspectratio.y,L[E+".z"]=F.viewInitial.aspectratio.z,L[D]=F.viewInitial.aspectmode)}o.call("_guiRelayout",c,L)}function a(c,b){var g=b.currentTarget,w=g._previousVal,_=c._fullLayout,T=_._subplots.gl3d||[],k=["xaxis","yaxis","zaxis"],L={},M={};if(w)M=w,g._previousVal=null;else{for(var I=0;I<T.length;I++){var P=T[I],S=_[P],E=P+".hovermode";L[E]=S.hovermode,M[E]=!1;for(var D=0;D<3;D++){var F=k[D],H=P+"."+F+".showspikes";M[H]=!1,L[H]=S[F].showspikes}}g._previousVal=L}return M}function l(c,b){for(var g=b.currentTarget,w=g.getAttribute("data-attr"),_=g.getAttribute("data-val")||!0,T=c._fullLayout,k=T._subplots.geo||[],L=0;L<k.length;L++){var M=k[L],I=T[M];if(w==="zoom"){var P=I.projection.scale,S=_==="in"?2*P:.5*P;o.call("_guiRelayout",c,M+".projection.scale",S)}}w==="reset"&&m(c,"geo")}function f(c){var b=c._fullLayout;return!b.hovermode&&(b._has("cartesian")?b._isHoriz?"y":"x":"closest")}function d(c){var b=f(c);o.call("_guiRelayout",c,"hovermode",b)}function v(c,b){for(var g=b.currentTarget.getAttribute("data-val"),w=c._fullLayout,_=w._subplots.mapbox||[],T={},k=0;k<_.length;k++){var L=_[k],M=w[L].zoom,I=g==="in"?1.05*M:M/1.05;T[L+".zoom"]=I}o.call("_guiRelayout",c,T)}function m(c,b){for(var g=c._fullLayout,w=g._subplots[b]||[],_={},T=0;T<w.length;T++)for(var k=w[T],L=g[k]._subplot.viewInitial,M=Object.keys(L),I=0;I<M.length;I++){var P=M[I];_[k+"."+P]=L[P]}o.call("_guiRelayout",c,_)}i.toImage={name:"toImage",title:function(c){var b=(c._context.toImageButtonOptions||{}).format||"png";return t(c,b==="png"?"Download plot as a png":"Download plot")},icon:y.camera,click:function(c){var b=c._context.toImageButtonOptions,g={format:b.format||"png"};r.notifier(t(c,"Taking snapshot - this may take a few seconds"),"long"),g.format!=="svg"&&r.isIE()&&(r.notifier(t(c,"IE only supports svg.  Changing format to svg."),"long"),g.format="svg"),["filename","width","height","scale"].forEach(function(w){w in b&&(g[w]=b[w])}),o.call("downloadImage",c,g).then(function(w){r.notifier(t(c,"Snapshot succeeded")+" - "+w,"long")}).catch(function(){r.notifier(t(c,"Sorry, there was a problem downloading your snapshot!"),"long")})}},i.sendDataToCloud={name:"sendDataToCloud",title:function(c){return t(c,"Edit in Chart Studio")},icon:y.disk,click:function(c){p.sendDataToCloud(c)}},i.editInChartStudio={name:"editInChartStudio",title:function(c){return t(c,"Edit in Chart Studio")},icon:y.pencil,click:function(c){p.sendDataToCloud(c)}},i.zoom2d={name:"zoom2d",_cat:"zoom",title:function(c){return t(c,"Zoom")},attr:"dragmode",val:"zoom",icon:y.zoombox,click:n},i.pan2d={name:"pan2d",_cat:"pan",title:function(c){return t(c,"Pan")},attr:"dragmode",val:"pan",icon:y.pan,click:n},i.select2d={name:"select2d",_cat:"select",title:function(c){return t(c,"Box Select")},attr:"dragmode",val:"select",icon:y.selectbox,click:n},i.lasso2d={name:"lasso2d",_cat:"lasso",title:function(c){return t(c,"Lasso Select")},attr:"dragmode",val:"lasso",icon:y.lasso,click:n},i.drawclosedpath={name:"drawclosedpath",title:function(c){return t(c,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:y.drawclosedpath,click:n},i.drawopenpath={name:"drawopenpath",title:function(c){return t(c,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:y.drawopenpath,click:n},i.drawline={name:"drawline",title:function(c){return t(c,"Draw line")},attr:"dragmode",val:"drawline",icon:y.drawline,click:n},i.drawrect={name:"drawrect",title:function(c){return t(c,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:y.drawrect,click:n},i.drawcircle={name:"drawcircle",title:function(c){return t(c,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:y.drawcircle,click:n},i.eraseshape={name:"eraseshape",title:function(c){return t(c,"Erase active shape")},icon:y.eraseshape,click:e},i.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(c){return t(c,"Zoom in")},attr:"zoom",val:"in",icon:y.zoom_plus,click:n},i.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(c){return t(c,"Zoom out")},attr:"zoom",val:"out",icon:y.zoom_minus,click:n},i.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(c){return t(c,"Autoscale")},attr:"zoom",val:"auto",icon:y.autoscale,click:n},i.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(c){return t(c,"Reset axes")},attr:"zoom",val:"reset",icon:y.home,click:n},i.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(c){return t(c,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:y.tooltip_basic,gravity:"ne",click:n},i.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(c){return t(c,"Compare data on hover")},attr:"hovermode",val:function(c){return c._fullLayout._isHoriz?"y":"x"},icon:y.tooltip_compare,gravity:"ne",click:n},i.zoom3d={name:"zoom3d",_cat:"zoom",title:function(c){return t(c,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:y.zoombox,click:h},i.pan3d={name:"pan3d",_cat:"pan",title:function(c){return t(c,"Pan")},attr:"scene.dragmode",val:"pan",icon:y.pan,click:h},i.orbitRotation={name:"orbitRotation",title:function(c){return t(c,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:y["3d_rotate"],click:h},i.tableRotation={name:"tableRotation",title:function(c){return t(c,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:y["z-axis"],click:h},i.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(c){return t(c,"Reset camera to default")},attr:"resetDefault",icon:y.home,click:s},i.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(c){return t(c,"Reset camera to last save")},attr:"resetLastSave",icon:y.movie,click:s},i.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(c){return t(c,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:function(c,b){var g=a(c,b);o.call("_guiRelayout",c,g)}},i.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(c){return t(c,"Zoom in")},attr:"zoom",val:"in",icon:y.zoom_plus,click:l},i.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(c){return t(c,"Zoom out")},attr:"zoom",val:"out",icon:y.zoom_minus,click:l},i.resetGeo={name:"resetGeo",_cat:"reset",title:function(c){return t(c,"Reset")},attr:"reset",val:null,icon:y.autoscale,click:l},i.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(c){return t(c,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:d},i.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(c){return t(c,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:d},i.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(c){return t(c,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:y.tooltip_basic,gravity:"ne",click:d},i.resetViewSankey={name:"resetSankeyGroup",title:function(c){return t(c,"Reset view")},icon:y.home,click:function(c){for(var b={"node.groups":[],"node.x":[],"node.y":[]},g=0;g<c._fullData.length;g++){var w=c._fullData[g]._viewInitial;b["node.groups"].push(w.node.groups.slice()),b["node.x"].push(w.node.x.slice()),b["node.y"].push(w.node.y.slice())}o.call("restyle",c,b)}},i.toggleHover={name:"toggleHover",title:function(c){return t(c,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:function(c,b){var g=a(c,b);g.hovermode=f(c),o.call("_guiRelayout",c,g)}},i.resetViews={name:"resetViews",title:function(c){return t(c,"Reset views")},icon:y.home,click:function(c,b){var g=b.currentTarget;g.setAttribute("data-attr","zoom"),g.setAttribute("data-val","reset"),n(c,b),g.setAttribute("data-attr","resetLastSave"),s(c,b),m(c,"geo"),m(c,"mapbox")}},i.toggleSpikelines={name:"toggleSpikelines",title:function(c){return t(c,"Toggle Spike Lines")},icon:y.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(c){var b=c._fullLayout,g=b._cartesianSpikesEnabled;b._cartesianSpikesEnabled=g==="on"?"off":"on",o.call("_guiRelayout",c,function(w){for(var _=w._fullLayout._cartesianSpikesEnabled==="on",T=x.list(w,null,!0),k={},L=0;L<T.length;L++){var M=T[L];k[M._name+".showspikes"]=!!_||M._showSpikeInitial}return k}(c))}},i.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(c){return t(c,"Reset view")},attr:"reset",icon:y.home,click:function(c){m(c,"mapbox")}},i.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(c){return t(c,"Zoom in")},attr:"zoom",val:"in",icon:y.zoom_plus,click:v},i.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(c){return t(c,"Zoom out")},attr:"zoom",val:"out",icon:y.zoom_minus,click:v}},{"../../fonts/ploticon":482,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../shapes/draw":450}],427:[function(u,q,W){var o=u("./buttons"),p=Object.keys(o),x=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],y=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(x),e=[];p.forEach(function(r){(function(t){if(y.indexOf(t._cat||t.name)===-1){var i=t.name,n=(t._cat||t.name).toLowerCase();e.indexOf(i)===-1&&e.push(i),e.indexOf(n)===-1&&e.push(n)}})(o[r])}),e.sort(),q.exports={DRAW_MODES:x,backButtons:y,foreButtons:e}},{"./buttons":426}],428:[function(u,q,W){var o=u("../../lib"),p=u("../color"),x=u("../../plot_api/plot_template"),y=u("./attributes");q.exports=function(e,r){var t=e.modebar||{},i=x.newContainer(r,"modebar");function n(s,a){return o.coerce(t,i,y,s,a)}n("orientation"),n("bgcolor",p.addOpacity(r.paper_bgcolor,.5));var h=p.contrast(p.rgb(r.modebar.bgcolor));n("color",p.addOpacity(h,.3)),n("activecolor",p.addOpacity(h,.7)),n("uirevision",r.uirevision),n("add"),n("remove")}},{"../../lib":503,"../../plot_api/plot_template":543,"../color":366,"./attributes":425}],429:[function(u,q,W){q.exports={moduleType:"component",name:"modebar",layoutAttributes:u("./attributes"),supplyLayoutDefaults:u("./defaults"),manage:u("./manage")}},{"./attributes":425,"./defaults":428,"./manage":430}],430:[function(u,q,W){var o=u("../../plots/cartesian/axis_ids"),p=u("../../traces/scatter/subtypes"),x=u("../../registry"),y=u("../fx/helpers").isUnifiedHover,e=u("./modebar"),r=u("./buttons"),t=u("./constants").DRAW_MODES;q.exports=function(i){var n=i._fullLayout,h=i._context,s=n._modeBar;if(h.displayModeBar||h.watermark){if(!Array.isArray(h.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(h.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var a,l=h.modeBarButtons;a=Array.isArray(l)&&l.length?function(f){for(var d=0;d<f.length;d++)for(var v=f[d],m=0;m<v.length;m++){var c=v[m];if(typeof c=="string"){if(r[c]===void 0)throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));f[d][m]=r[c]}}return f}(l):!h.displayModeBar&&h.watermark?[]:function(f){var d=f._fullLayout,v=f._fullData,m=f._context;function c(ne,se){if(typeof se=="string"){if(se.toLowerCase()===ne.toLowerCase())return!0}else{var oe=se.name,he=se._cat||se.name;if(oe===ne||he===ne.toLowerCase())return!0}return!1}var b=d.modebar.add;typeof b=="string"&&(b=[b]);var g=d.modebar.remove;typeof g=="string"&&(g=[g]);var w=m.modeBarButtonsToAdd.concat(b.filter(function(ne){for(var se=0;se<m.modeBarButtonsToRemove.length;se++)if(c(ne,m.modeBarButtonsToRemove[se]))return!1;return!0})),_=m.modeBarButtonsToRemove.concat(g.filter(function(ne){for(var se=0;se<m.modeBarButtonsToAdd.length;se++)if(c(ne,m.modeBarButtonsToAdd[se]))return!1;return!0})),T=d._has("cartesian"),k=d._has("gl3d"),L=d._has("geo"),M=d._has("pie"),I=d._has("funnelarea"),P=d._has("gl2d"),S=d._has("ternary"),E=d._has("mapbox"),D=d._has("polar"),F=d._has("smith"),H=d._has("sankey"),V=function(ne){for(var se=o.list({_fullLayout:ne},null,!0),oe=0;oe<se.length;oe++)if(!se[oe].fixedrange)return!1;return!0}(d),Q=y(d.hovermode),K=[];function Z(ne){if(ne.length){for(var se=[],oe=0;oe<ne.length;oe++){for(var he=ne[oe],le=r[he],de=le.name.toLowerCase(),xe=(le._cat||le.name).toLowerCase(),we=!1,be=0;be<_.length;be++){var Ae=_[be].toLowerCase();if(Ae===de||Ae===xe){we=!0;break}}we||se.push(r[he])}K.push(se)}}var $=["toImage"];m.showEditInChartStudio?$.push("editInChartStudio"):m.showSendToCloud&&$.push("sendDataToCloud"),Z($);var re=[],R=[],N=[],U=[];(T||P||M||I||S)+L+k+E+D+F>1?(R=["toggleHover"],N=["resetViews"]):L?(re=["zoomInGeo","zoomOutGeo"],R=["hoverClosestGeo"],N=["resetGeo"]):k?(R=["hoverClosest3d"],N=["resetCameraDefault3d","resetCameraLastSave3d"]):E?(re=["zoomInMapbox","zoomOutMapbox"],R=["toggleHover"],N=["resetViewMapbox"]):P?R=["hoverClosestGl2d"]:M?R=["hoverClosestPie"]:H?(R=["hoverClosestCartesian","hoverCompareCartesian"],N=["resetViewSankey"]):R=["toggleHover"],T&&(R=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(ne){for(var se=0;se<ne.length;se++)if(!x.traceIs(ne[se],"noHover"))return!1;return!0}(v)||Q)&&(R=[]),!T&&!P||V||(re=["zoomIn2d","zoomOut2d","autoScale2d"],N[0]!=="resetViews"&&(N=["resetScale2d"])),k?U=["zoom3d","pan3d","orbitRotation","tableRotation"]:(T||P)&&!V||S?U=["zoom2d","pan2d"]:E||L?U=["pan2d"]:D&&(U=["zoom2d"]),function(ne){for(var se=!1,oe=0;oe<ne.length&&!se;oe++){var he=ne[oe];he._module&&he._module.selectPoints&&(x.traceIs(he,"scatter-like")?(p.hasMarkers(he)||p.hasText(he))&&(se=!0):x.traceIs(he,"box-violin")&&he.boxpoints!=="all"&&he.points!=="all"||(se=!0))}return se}(v)&&U.push("select2d","lasso2d");var te=[],j=function(ne){te.indexOf(ne)===-1&&R.indexOf(ne)!==-1&&te.push(ne)};if(Array.isArray(w)){for(var Y=[],J=0;J<w.length;J++){var ee=w[J];typeof ee=="string"?(ee=ee.toLowerCase(),t.indexOf(ee)!==-1?(d._has("mapbox")||d._has("cartesian"))&&U.push(ee):ee==="togglespikelines"?j("toggleSpikelines"):ee==="togglehover"?j("toggleHover"):ee==="hovercompare"?j("hoverCompareCartesian"):ee==="hoverclosest"?(j("hoverClosestCartesian"),j("hoverClosestGeo"),j("hoverClosest3d"),j("hoverClosestGl2d"),j("hoverClosestPie")):ee==="v1hovermode"&&(j("toggleHover"),j("hoverClosestCartesian"),j("hoverCompareCartesian"),j("hoverClosestGeo"),j("hoverClosest3d"),j("hoverClosestGl2d"),j("hoverClosestPie"))):Y.push(ee)}w=Y}return Z(U),Z(re.concat(N)),Z(te),function(ne,se){if(se.length)if(Array.isArray(se[0]))for(var oe=0;oe<se.length;oe++)ne.push(se[oe]);else ne.push(se);return ne}(K,w)}(i),s?s.update(i,a):n._modeBar=e(i,a)}else s&&(s.destroy(),delete n._modeBar)}},{"../../plots/cartesian/axis_ids":558,"../../registry":638,"../../traces/scatter/subtypes":951,"../fx/helpers":402,"./buttons":426,"./constants":427,"./modebar":431}],431:[function(u,q,W){var o=u("@plotly/d3"),p=u("fast-isnumeric"),x=u("../../lib"),y=u("../../fonts/ploticon"),e=new DOMParser;function r(i){this.container=i.container,this.element=document.createElement("div"),this.update(i.graphInfo,i.buttons),this.container.appendChild(this.element)}var t=r.prototype;t.update=function(i,n){this.graphInfo=i;var h=this.graphInfo._context,s=this.graphInfo._fullLayout,a="modebar-"+s._uid;this.element.setAttribute("id",a),this._uid=a,this.element.className="modebar",h.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),s.modebar.orientation==="v"&&(this.element.className+=" vertical",n=n.reverse());var l=s.modebar,f=h.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";x.deleteRelatedStyleRule(a),x.addRelatedStyleRule(a,f+"#"+a+" .modebar-group","background-color: "+l.bgcolor),x.addRelatedStyleRule(a,"#"+a+" .modebar-btn .icon path","fill: "+l.color),x.addRelatedStyleRule(a,"#"+a+" .modebar-btn:hover .icon path","fill: "+l.activecolor),x.addRelatedStyleRule(a,"#"+a+" .modebar-btn.active .icon path","fill: "+l.activecolor);var d=!this.hasButtons(n),v=this.hasLogo!==h.displaylogo,m=this.locale!==h.locale;if(this.locale=h.locale,(d||v||m)&&(this.removeAllButtons(),this.updateButtons(n),h.watermark||h.displaylogo)){var c=this.getLogo();h.watermark&&(c.className=c.className+" watermark"),s.modebar.orientation==="v"?this.element.insertBefore(c,this.element.childNodes[0]):this.element.appendChild(c),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(i){var n=this;this.buttons=i,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(h){var s=n.createGroup();h.forEach(function(a){var l=a.name;if(!l)throw new Error("must provide button 'name' in button config");if(n.buttonsNames.indexOf(l)!==-1)throw new Error("button name '"+l+"' is taken");n.buttonsNames.push(l);var f=n.createButton(a);n.buttonElements.push(f),s.appendChild(f)}),n.element.appendChild(s)})},t.createGroup=function(){var i=document.createElement("div");return i.className="modebar-group",i},t.createButton=function(i){var n=this,h=document.createElement("a");h.setAttribute("rel","tooltip"),h.className="modebar-btn";var s=i.title;s===void 0?s=i.name:typeof s=="function"&&(s=s(this.graphInfo)),(s||s===0)&&h.setAttribute("data-title",s),i.attr!==void 0&&h.setAttribute("data-attr",i.attr);var a=i.val;if(a!==void 0&&(typeof a=="function"&&(a=a(this.graphInfo)),h.setAttribute("data-val",a)),typeof i.click!="function")throw new Error("must provide button 'click' function in button config");h.addEventListener("click",function(f){i.click(n.graphInfo,f),n.updateActiveButton(f.currentTarget)}),h.setAttribute("data-toggle",i.toggle||!1),i.toggle&&o.select(h).classed("active",!0);var l=i.icon;return typeof l=="function"?h.appendChild(l()):h.appendChild(this.createIcon(l||y.question)),h.setAttribute("data-gravity",i.gravity||"n"),h},t.createIcon=function(i){var n,h=p(i.height)?Number(i.height):i.ascent-i.descent,s="http://www.w3.org/2000/svg";if(i.path){(n=document.createElementNS(s,"svg")).setAttribute("viewBox",[0,0,i.width,h].join(" ")),n.setAttribute("class","icon");var a=document.createElementNS(s,"path");a.setAttribute("d",i.path),i.transform?a.setAttribute("transform",i.transform):i.ascent!==void 0&&a.setAttribute("transform","matrix(1 0 0 -1 0 "+i.ascent+")"),n.appendChild(a)}return i.svg&&(n=e.parseFromString(i.svg,"application/xml").childNodes[0]),n.setAttribute("height","1em"),n.setAttribute("width","1em"),n},t.updateActiveButton=function(i){var n=this.graphInfo._fullLayout,h=i!==void 0?i.getAttribute("data-attr"):null;this.buttonElements.forEach(function(s){var a=s.getAttribute("data-val")||!0,l=s.getAttribute("data-attr"),f=s.getAttribute("data-toggle")==="true",d=o.select(s);if(f)l===h&&d.classed("active",!d.classed("active"));else{var v=l===null?l:x.nestedProperty(n,l).get();d.classed("active",v===a)}})},t.hasButtons=function(i){var n=this.buttons;if(!n||i.length!==n.length)return!1;for(var h=0;h<i.length;++h){if(i[h].length!==n[h].length)return!1;for(var s=0;s<i[h].length;s++)if(i[h][s].name!==n[h][s].name)return!1}return!0},t.getLogo=function(){var i=this.createGroup(),n=document.createElement("a");return n.href="https://plotly.com/",n.target="_blank",n.setAttribute("data-title",x._(this.graphInfo,"Produced with Plotly")),n.className="modebar-btn plotlyjsicon modebar-btn--logo",n.appendChild(this.createIcon(y.newplotlylogo)),i.appendChild(n),i},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){x.removeElement(this.container.querySelector(".modebar")),x.deleteRelatedStyleRule(this._uid)},q.exports=function(i,n){var h=i._fullLayout,s=new r({graphInfo:i,container:h._modebardiv.node(),buttons:n});return h._privateplot&&o.select(s.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),s}},{"../../fonts/ploticon":482,"../../lib":503,"@plotly/d3":58,"fast-isnumeric":190}],432:[function(u,q,W){var o=u("../../plots/font_attributes"),p=u("../color/attributes"),x=(0,u("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});q.exports={visible:{valType:"boolean",editType:"plot"},buttons:x,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:o({editType:"plot"}),bgcolor:{valType:"color",dflt:p.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:p.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../color/attributes":365}],433:[function(u,q,W){q.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],434:[function(u,q,W){var o=u("../../lib"),p=u("../color"),x=u("../../plot_api/plot_template"),y=u("../../plots/array_container_defaults"),e=u("./attributes"),r=u("./constants");function t(i,n,h,s){var a=s.calendar;function l(d,v){return o.coerce(i,n,e.buttons,d,v)}if(l("visible")){var f=l("step");f!=="all"&&(!a||a==="gregorian"||f!=="month"&&f!=="year"?l("stepmode"):n.stepmode="backward",l("count")),l("label")}}q.exports=function(i,n,h,s,a){var l=i.rangeselector||{},f=x.newContainer(n,"rangeselector");function d(c,b){return o.coerce(l,f,e,c,b)}if(d("visible",y(l,f,{name:"buttons",handleItemDefaults:t,calendar:a}).length>0)){var v=function(c,b,g){for(var w=g.filter(function(L){return b[L].anchor===c._id}),_=0,T=0;T<w.length;T++){var k=b[w[T]].domain;k&&(_=Math.max(k[1],_))}return[c.domain[0],_+r.yPad]}(n,h,s);d("x",v[0]),d("y",v[1]),o.noneOrAll(i,n,["x","y"]),d("xanchor"),d("yanchor"),o.coerceFont(d,"font",h.font);var m=d("bgcolor");d("activecolor",p.contrast(m,r.lightAmount,r.darkAmount)),d("bordercolor"),d("borderwidth")}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../color":366,"./attributes":432,"./constants":433}],435:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../registry"),x=u("../../plots/plots"),y=u("../color"),e=u("../drawing"),r=u("../../lib"),t=r.strTranslate,i=u("../../lib/svg_text_utils"),n=u("../../plots/cartesian/axis_ids"),h=u("../../constants/alignment"),s=h.LINE_SPACING,a=h.FROM_TL,l=h.FROM_BR,f=u("./constants"),d=u("./get_update_object");function v(b){return b._id}function m(b,g,w){var _=r.ensureSingle(b,"rect","selector-rect",function(T){T.attr("shape-rendering","crispEdges")});_.attr({rx:f.rx,ry:f.ry}),_.call(y.stroke,g.bordercolor).call(y.fill,function(T,k){return k._isActive||k._isHovered?T.activecolor:T.bgcolor}(g,w)).style("stroke-width",g.borderwidth+"px")}function c(b,g,w,_){r.ensureSingle(b,"text","selector-text",function(T){T.attr("text-anchor","middle")}).call(e.font,g.font).text(function(T,k){return T.label?k?r.templateString(T.label,k):T.label:T.step==="all"?"all":T.count+T.step.charAt(0)}(w,_._fullLayout._meta)).call(function(T){i.convertToTspans(T,_)})}q.exports=function(b){var g=b._fullLayout._infolayer.selectAll(".rangeselector").data(function(w){for(var _=n.list(w,"x",!0),T=[],k=0;k<_.length;k++){var L=_[k];L.rangeselector&&L.rangeselector.visible&&T.push(L)}return T}(b),v);g.enter().append("g").classed("rangeselector",!0),g.exit().remove(),g.style({cursor:"pointer","pointer-events":"all"}),g.each(function(w){var _=o.select(this),T=w,k=T.rangeselector,L=_.selectAll("g.button").data(r.filterVisible(k.buttons));L.enter().append("g").classed("button",!0),L.exit().remove(),L.each(function(M){var I=o.select(this),P=d(T,M);M._isActive=function(S,E,D){if(E.step==="all")return S.autorange===!0;var F=Object.keys(D);return S.range[0]===D[F[0]]&&S.range[1]===D[F[1]]}(T,M,P),I.call(m,k,M),I.call(c,k,M,b),I.on("click",function(){b._dragged||p.call("_guiRelayout",b,P)}),I.on("mouseover",function(){M._isHovered=!0,I.call(m,k,M)}),I.on("mouseout",function(){M._isHovered=!1,I.call(m,k,M)})}),function(M,I,P,S,E){var D=0,F=0,H=P.borderwidth;I.each(function(){var re=o.select(this).select(".selector-text"),R=P.font.size*s,N=Math.max(R*i.lineCount(re),16)+3;F=Math.max(F,N)}),I.each(function(){var re=o.select(this),R=re.select(".selector-rect"),N=re.select(".selector-text"),U=N.node()&&e.bBox(N.node()).width,te=P.font.size*s,j=i.lineCount(N),Y=Math.max(U+10,f.minButtonWidth);re.attr("transform",t(H+D,H)),R.attr({x:0,y:0,width:Y,height:F}),i.positionText(N,Y/2,F/2-(j-1)*te/2+3),D+=Y+5});var V=M._fullLayout._size,Q=V.l+V.w*P.x,K=V.t+V.h*(1-P.y),Z="left";r.isRightAnchor(P)&&(Q-=D,Z="right"),r.isCenterAnchor(P)&&(Q-=D/2,Z="center");var $="top";r.isBottomAnchor(P)&&(K-=F,$="bottom"),r.isMiddleAnchor(P)&&(K-=F/2,$="middle"),D=Math.ceil(D),F=Math.ceil(F),Q=Math.round(Q),K=Math.round(K),x.autoMargin(M,S+"-range-selector",{x:P.x,y:P.y,l:D*a[Z],r:D*l[Z],b:F*l[$],t:F*a[$]}),E.attr("transform",t(Q,K))}(b,L,k,T._name,_)})}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"./constants":433,"./get_update_object":436,"@plotly/d3":58}],436:[function(u,q,W){var o=u("d3-time"),p=u("../../lib").titleCase;q.exports=function(x,y){var e=x._name,r={};if(y.step==="all")r[e+".autorange"]=!0;else{var t=function(i,n){var h,s=i.range,a=new Date(i.r2l(s[1])),l=n.step,f=o["utc"+p(l)],d=n.count;switch(n.stepmode){case"backward":h=i.l2r(+f.offset(a,-d));break;case"todate":var v=f.offset(a,-d);h=i.l2r(+f.ceil(v))}var m=s[1];return[h,m]}(x,y);r[e+".range[0]"]=t[0],r[e+".range[1]"]=t[1]}return r}},{"../../lib":503,"d3-time":122}],437:[function(u,q,W){q.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:u("./attributes")}}},layoutAttributes:u("./attributes"),handleDefaults:u("./defaults"),draw:u("./draw")}},{"./attributes":432,"./defaults":434,"./draw":435}],438:[function(u,q,W){var o=u("../color/attributes");q.exports={bgcolor:{valType:"color",dflt:o.background,editType:"plot"},bordercolor:{valType:"color",dflt:o.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":365}],439:[function(u,q,W){var o=u("../../plots/cartesian/axis_ids").list,p=u("../../plots/cartesian/autorange").getAutoRange,x=u("./constants");q.exports=function(y){for(var e=o(y,"x",!0),r=0;r<e.length;r++){var t=e[r],i=t[x.name];i&&i.visible&&i.autorange&&(i._input.autorange=!0,i._input.range=i.range=p(y,t))}}},{"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"./constants":440}],440:[function(u,q,W){q.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],441:[function(u,q,W){var o=u("../../lib"),p=u("../../plot_api/plot_template"),x=u("../../plots/cartesian/axis_ids"),y=u("./attributes"),e=u("./oppaxis_attributes");q.exports=function(r,t,i){var n=r[i],h=t[i];if(n.rangeslider||t._requestRangeslider[h._id]){o.isPlainObject(n.rangeslider)||(n.rangeslider={});var s,a,l=n.rangeslider,f=p.newContainer(h,"rangeslider");if(_("visible")){_("bgcolor",t.plot_bgcolor),_("bordercolor"),_("borderwidth"),_("thickness"),_("autorange",!h.isValidRange(l.range)),_("range");var d=t._subplots;if(d)for(var v=d.cartesian.filter(function(k){return k.substr(0,k.indexOf("y"))===x.name2id(i)}).map(function(k){return k.substr(k.indexOf("y"),k.length)}),m=o.simpleMap(v,x.id2name),c=0;c<m.length;c++){var b=m[c];s=l[b]||{},a=p.newContainer(f,b,"yaxis");var g,w=t[b];s.range&&w.isValidRange(s.range)&&(g="fixed"),T("rangemode",g)!=="match"&&T("range",w.range.slice())}f._input=l}}function _(k,L){return o.coerce(l,f,y,k,L)}function T(k,L){return o.coerce(s,a,e,k,L)}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_ids":558,"./attributes":438,"./oppaxis_attributes":445}],442:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../registry"),x=u("../../plots/plots"),y=u("../../lib"),e=y.strTranslate,r=u("../drawing"),t=u("../color"),i=u("../titles"),n=u("../../plots/cartesian"),h=u("../../plots/cartesian/axis_ids"),s=u("../dragelement"),a=u("../../lib/setcursor"),l=u("./constants");function f(g,w,_,T){var k=y.ensureSingle(g,"rect",l.bgClassName,function(P){P.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),L=T.borderwidth%2==0?T.borderwidth:T.borderwidth-1,M=-T._offsetShift,I=r.crispRound(w,T.borderwidth);k.attr({width:T._width+L,height:T._height+L,transform:e(M,M),fill:T.bgcolor,stroke:T.bordercolor,"stroke-width":I})}function d(g,w,_,T){var k=w._fullLayout;y.ensureSingleById(k._topdefs,"clipPath",T._clipId,function(L){L.append("rect").attr({x:0,y:0})}).select("rect").attr({width:T._width,height:T._height})}function v(g,w,_,T){var k,L=w.calcdata,M=g.selectAll("g."+l.rangePlotClassName).data(_._subplotsWith,y.identity);M.enter().append("g").attr("class",function(I){return l.rangePlotClassName+" "+I}).call(r.setClipUrl,T._clipId,w),M.order(),M.exit().remove(),M.each(function(I,P){var S=o.select(this),E=P===0,D=h.getFromId(w,I,"y"),F=D._name,H=T[F],V={data:[],layout:{xaxis:{type:_.type,domain:[0,1],range:T.range.slice(),calendar:_.calendar},width:T._width,height:T._height,margin:{t:0,b:0,l:0,r:0}},_context:w._context};_.rangebreaks&&(V.layout.xaxis.rangebreaks=_.rangebreaks),V.layout[F]={type:D.type,domain:[0,1],range:H.rangemode!=="match"?H.range.slice():D.range.slice(),calendar:D.calendar},D.rangebreaks&&(V.layout[F].rangebreaks=D.rangebreaks),x.supplyDefaults(V);var Q=V._fullLayout.xaxis,K=V._fullLayout[F];Q.clearCalc(),Q.setScale(),K.clearCalc(),K.setScale();var Z={id:I,plotgroup:S,xaxis:Q,yaxis:K,isRangePlot:!0};E?k=Z:(Z.mainplot="xy",Z.mainplotinfo=k),n.rangePlot(w,Z,function($,re){for(var R=[],N=0;N<$.length;N++){var U=$[N],te=U[0].trace;te.xaxis+te.yaxis===re&&R.push(U)}return R}(L,I))})}function m(g,w,_,T,k){y.ensureSingle(g,"rect",l.maskMinClassName,function(L){L.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",T._height).call(t.fill,l.maskColor),y.ensureSingle(g,"rect",l.maskMaxClassName,function(L){L.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",T._height).call(t.fill,l.maskColor),k.rangemode!=="match"&&(y.ensureSingle(g,"rect",l.maskMinOppAxisClassName,function(L){L.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",T._width).call(t.fill,l.maskOppAxisColor),y.ensureSingle(g,"rect",l.maskMaxOppAxisClassName,function(L){L.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",T._width).style("border-top",l.maskOppBorder).call(t.fill,l.maskOppAxisColor))}function c(g,w,_,T){w._context.staticPlot||y.ensureSingle(g,"rect",l.slideBoxClassName,function(k){k.attr({y:0,cursor:l.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:T._height,fill:l.slideBoxFill})}function b(g,w,_,T){var k=y.ensureSingle(g,"g",l.grabberMinClassName),L=y.ensureSingle(g,"g",l.grabberMaxClassName),M={x:0,width:l.handleWidth,rx:l.handleRadius,fill:t.background,stroke:t.defaultLine,"stroke-width":l.handleStrokeWidth,"shape-rendering":"crispEdges"},I={y:Math.round(T._height/4),height:Math.round(T._height/2)};y.ensureSingle(k,"rect",l.handleMinClassName,function(S){S.attr(M)}).attr(I),y.ensureSingle(L,"rect",l.handleMaxClassName,function(S){S.attr(M)}).attr(I);var P={width:l.grabAreaWidth,x:0,y:0,fill:l.grabAreaFill,cursor:w._context.staticPlot?void 0:l.grabAreaCursor};y.ensureSingle(k,"rect",l.grabAreaMinClassName,function(S){S.attr(P)}).attr("height",T._height),y.ensureSingle(L,"rect",l.grabAreaMaxClassName,function(S){S.attr(P)}).attr("height",T._height)}q.exports=function(g){for(var w=g._fullLayout,_=w._rangeSliderData,T=0;T<_.length;T++){var k=_[T][l.name];k._clipId=k._id+"-"+w._uid}var L=w._infolayer.selectAll("g."+l.containerClassName).data(_,function(M){return M._name});L.exit().each(function(M){var I=M[l.name];w._topdefs.select("#"+I._clipId).remove()}).remove(),_.length!==0&&(L.enter().append("g").classed(l.containerClassName,!0).attr("pointer-events","all"),L.each(function(M){var I=o.select(this),P=M[l.name],S=w[h.id2name(M.anchor)],E=P[h.id2name(M.anchor)];if(P.range){var D,F=y.simpleMap(P.range,M.r2l),H=y.simpleMap(M.range,M.r2l);D=H[0]<H[1]?[Math.min(F[0],H[0]),Math.max(F[1],H[1])]:[Math.max(F[0],H[0]),Math.min(F[1],H[1])],P.range=P._input.range=y.simpleMap(D,M.l2r)}M.cleanRange("rangeslider.range");var V=w._size,Q=M.domain;P._width=V.w*(Q[1]-Q[0]);var K=Math.round(V.l+V.w*Q[0]),Z=Math.round(V.t+V.h*(1-M._counterDomainMin)+(M.side==="bottom"?M._depth:0)+P._offsetShift+l.extraPad);I.attr("transform",e(K,Z)),P._rl=y.simpleMap(P.range,M.r2l);var $=P._rl[0],re=P._rl[1],R=re-$;if(P.p2d=function(se){return se/P._width*R+$},P.d2p=function(se){return(se-$)/R*P._width},M.rangebreaks){var N=M.locateBreaks($,re);if(N.length){var U,te,j=0;for(U=0;U<N.length;U++)j+=(te=N[U]).max-te.min;var Y=P._width/(re-$-j),J=[-Y*$];for(U=0;U<N.length;U++)te=N[U],J.push(J[J.length-1]-Y*(te.max-te.min));for(P.d2p=function(se){for(var oe=J[0],he=0;he<N.length;he++){var le=N[he];if(se>=le.max)oe=J[he+1];else if(se<le.min)break}return oe+Y*se},U=0;U<N.length;U++)(te=N[U]).pmin=P.d2p(te.min),te.pmax=P.d2p(te.max);P.p2d=function(se){for(var oe=J[0],he=0;he<N.length;he++){var le=N[he];if(se>=le.pmax)oe=J[he+1];else if(se<le.pmin)break}return(se-oe)/Y}}}if(E.rangemode!=="match"){var ee=S.r2l(E.range[0]),ne=S.r2l(E.range[1])-ee;P.d2pOppAxis=function(se){return(se-ee)/ne*P._height}}I.call(f,g,M,P).call(d,g,M,P).call(v,g,M,P).call(m,g,M,P,E).call(c,g,M,P).call(b,g,M,P),function(se,oe,he,le){if(oe._context.staticPlot)return;var de=se.select("rect."+l.slideBoxClassName).node(),xe=se.select("rect."+l.grabAreaMinClassName).node(),we=se.select("rect."+l.grabAreaMaxClassName).node();function be(){var Ae=o.event,fe=Ae.target,me=Ae.clientX||Ae.touches[0].clientX,ke=me-se.node().getBoundingClientRect().left,Te=le.d2p(he._rl[0]),Me=le.d2p(he._rl[1]),Oe=s.coverSlip();function Fe(et){var ze,Ue,We,Ze=+(et.clientX||et.touches[0].clientX)-me;switch(fe){case de:We="ew-resize",ze=Te+Ze,Ue=Me+Ze;break;case xe:We="col-resize",ze=Te+Ze,Ue=Me;break;case we:We="col-resize",ze=Te,Ue=Me+Ze;break;default:We="ew-resize",ze=ke,Ue=ke+Ze}if(Ue<ze){var nt=Ue;Ue=ze,ze=nt}le._pixelMin=ze,le._pixelMax=Ue,a(o.select(Oe),We),function(ft,xt,It,Et){function it(Gt){return It.l2r(y.constrain(Gt,Et._rl[0],Et._rl[1]))}var rt=it(Et.p2d(Et._pixelMin)),At=it(Et.p2d(Et._pixelMax));window.requestAnimationFrame(function(){p.call("_guiRelayout",xt,It._name+".range",[rt,At])})}(0,oe,he,le)}function qe(){Oe.removeEventListener("mousemove",Fe),Oe.removeEventListener("mouseup",qe),this.removeEventListener("touchmove",Fe),this.removeEventListener("touchend",qe),y.removeElement(Oe)}this.addEventListener("touchmove",Fe),this.addEventListener("touchend",qe),Oe.addEventListener("mousemove",Fe),Oe.addEventListener("mouseup",qe)}se.on("mousedown",be),se.on("touchstart",be)}(I,g,M,P),function(se,oe,he,le,de,xe){var we=l.handleWidth/2;function be(qe){return y.constrain(qe,0,le._width)}function Ae(qe){return y.constrain(qe,0,le._height)}function fe(qe){return y.constrain(qe,-we,le._width+we)}var me=be(le.d2p(he._rl[0])),ke=be(le.d2p(he._rl[1]));if(se.select("rect."+l.slideBoxClassName).attr("x",me).attr("width",ke-me),se.select("rect."+l.maskMinClassName).attr("width",me),se.select("rect."+l.maskMaxClassName).attr("x",ke).attr("width",le._width-ke),xe.rangemode!=="match"){var Te=le._height-Ae(le.d2pOppAxis(de._rl[1])),Me=le._height-Ae(le.d2pOppAxis(de._rl[0]));se.select("rect."+l.maskMinOppAxisClassName).attr("x",me).attr("height",Te).attr("width",ke-me),se.select("rect."+l.maskMaxOppAxisClassName).attr("x",me).attr("y",Me).attr("height",le._height-Me).attr("width",ke-me),se.select("rect."+l.slideBoxClassName).attr("y",Te).attr("height",Me-Te)}var Oe=Math.round(fe(me-we))-.5,Fe=Math.round(fe(ke-we))+.5;se.select("g."+l.grabberMinClassName).attr("transform",e(Oe,.5)),se.select("g."+l.grabberMaxClassName).attr("transform",e(Fe,.5))}(I,0,M,P,S,E),M.side==="bottom"&&i.draw(g,M._id+"title",{propContainer:M,propName:M._name+".title",placeholder:w._dfltTitle.x,attributes:{x:M._offset+M._length/2,y:Z+P._height+P._offsetShift+10+1.5*M.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":503,"../../lib/setcursor":524,"../../plots/cartesian":568,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":440,"@plotly/d3":58}],443:[function(u,q,W){var o=u("../../plots/cartesian/axis_ids"),p=u("../../lib/svg_text_utils"),x=u("./constants"),y=u("../../constants/alignment").LINE_SPACING,e=x.name;function r(t){var i=t&&t[e];return i&&i.visible}W.isVisible=r,W.makeData=function(t){var i=o.list({_fullLayout:t},"x",!0),n=t.margin,h=[];if(!t._has("gl2d"))for(var s=0;s<i.length;s++){var a=i[s];if(r(a)){h.push(a);var l=a[e];l._id=e+a._id,l._height=(t.height-n.b-n.t)*l.thickness,l._offsetShift=Math.floor(l.borderwidth/2)}}t._rangeSliderData=h},W.autoMarginOpts=function(t,i){var n=t._fullLayout,h=i[e],s=i._id.charAt(0),a=0,l=0;return i.side==="bottom"&&(a=i._depth,i.title.text!==n._dfltTitle[s]&&(l=1.5*i.title.font.size+10+h._offsetShift,l+=(i.title.text.match(p.BR_TAG_ALL)||[]).length*i.title.font.size*y)),{x:0,y:i._counterDomainMin,l:0,r:0,t:0,b:h._height+a+Math.max(n.margin.b,l),pad:x.extraPad+2*h._offsetShift}}},{"../../constants/alignment":471,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"./constants":440}],444:[function(u,q,W){var o=u("../../lib"),p=u("./attributes"),x=u("./oppaxis_attributes"),y=u("./helpers");q.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:o.extendFlat({},p,{yaxis:x})}}},layoutAttributes:u("./attributes"),handleDefaults:u("./defaults"),calcAutorange:u("./calc_autorange"),draw:u("./draw"),isVisible:y.isVisible,makeData:y.makeData,autoMarginOpts:y.autoMarginOpts}},{"../../lib":503,"./attributes":438,"./calc_autorange":439,"./defaults":441,"./draw":442,"./helpers":443,"./oppaxis_attributes":445}],445:[function(u,q,W){q.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],446:[function(u,q,W){var o=u("../annotations/attributes"),p=u("../../traces/scatter/attributes").line,x=u("../drawing/attributes").dash,y=u("../../lib/extend").extendFlat,e=u("../../plot_api/plot_template").templatedArray;u("../../constants/axis_placeable_objects"),q.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:y({},o.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:y({},o.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:y({},p.color,{editType:"arraydraw"}),width:y({},p.width,{editType:"calc+arraydraw"}),dash:y({},x,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":926,"../annotations/attributes":349,"../drawing/attributes":387}],447:[function(u,q,W){var o=u("../../lib"),p=u("../../plots/cartesian/axes"),x=u("./constants"),y=u("./helpers");function e(n){return t(n.line.width,n.xsizemode,n.x0,n.x1,n.path,!1)}function r(n){return t(n.line.width,n.ysizemode,n.y0,n.y1,n.path,!0)}function t(n,h,s,a,l,f){var d=n/2,v=f;if(h==="pixel"){var m=l?y.extractPathCoords(l,f?x.paramIsY:x.paramIsX):[s,a],c=o.aggNums(Math.max,null,m),b=o.aggNums(Math.min,null,m),g=b<0?Math.abs(b)+d:d,w=c>0?c+d:d;return{ppad:d,ppadplus:v?g:w,ppadminus:v?w:g}}return{ppad:d}}function i(n,h,s,a,l){var f=n.type==="category"||n.type==="multicategory"?n.r2c:n.d2c;if(h!==void 0)return[f(h),f(s)];if(a){var d,v,m,c,b=1/0,g=-1/0,w=a.match(x.segmentRE);for(n.type==="date"&&(f=y.decodeDate(f)),d=0;d<w.length;d++)(v=l[w[d].charAt(0)].drawn)!==void 0&&(!(m=w[d].substr(1).match(x.paramRE))||m.length<v||((c=f(m[v]))<b&&(b=c),c>g&&(g=c)));return g>=b?[b,g]:void 0}}q.exports=function(n){var h=n._fullLayout,s=o.filterVisible(h.shapes);if(s.length&&n._fullData.length)for(var a=0;a<s.length;a++){var l,f,d=s[a];d._extremes={};var v=p.getRefType(d.xref),m=p.getRefType(d.yref);if(d.xref!=="paper"&&v!=="domain"){var c=d.xsizemode==="pixel"?d.xanchor:d.x0,b=d.xsizemode==="pixel"?d.xanchor:d.x1;(f=i(l=p.getFromId(n,d.xref),c,b,d.path,x.paramIsX))&&(d._extremes[l._id]=p.findExtremes(l,f,e(d)))}if(d.yref!=="paper"&&m!=="domain"){var g=d.ysizemode==="pixel"?d.yanchor:d.y0,w=d.ysizemode==="pixel"?d.yanchor:d.y1;(f=i(l=p.getFromId(n,d.yref),g,w,d.path,x.paramIsY))&&(d._extremes[l._id]=p.findExtremes(l,f,r(d)))}}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":448,"./helpers":457}],448:[function(u,q,W){q.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],449:[function(u,q,W){var o=u("../../lib"),p=u("../../plots/cartesian/axes"),x=u("../../plots/array_container_defaults"),y=u("./attributes"),e=u("./helpers");function r(t,i,n){function h(E,D){return o.coerce(t,i,y,E,D)}if(h("visible")){var s=h("path"),a=h("type",s?"path":"rect");i.type!=="path"&&delete i.path,h("editable"),h("layer"),h("opacity"),h("fillcolor"),h("fillrule"),h("line.width")&&(h("line.color"),h("line.dash"));for(var l=h("xsizemode"),f=h("ysizemode"),d=["x","y"],v=0;v<2;v++){var m,c,b,g=d[v],w=g+"anchor",_=g==="x"?l:f,T={_fullLayout:n},k=p.coerceRef(t,i,T,g,void 0,"paper");if(p.getRefType(k)==="range"?((m=p.getFromId(T,k))._shapeIndices.push(i._index),b=e.rangeToShapePosition(m),c=e.shapePositionToRange(m)):c=b=o.identity,a!=="path"){var L=g+"0",M=g+"1",I=t[L],P=t[M];t[L]=c(t[L],!0),t[M]=c(t[M],!0),_==="pixel"?(h(L,0),h(M,10)):(p.coercePosition(i,T,h,k,L,.25),p.coercePosition(i,T,h,k,M,.75)),i[L]=b(i[L]),i[M]=b(i[M]),t[L]=I,t[M]=P}if(_==="pixel"){var S=t[w];t[w]=c(t[w],!0),p.coercePosition(i,T,h,k,w,.25),i[w]=b(i[w]),t[w]=S}}a==="path"?h("path"):o.noneOrAll(t,i,["x0","x1","y0","y1"])}}q.exports=function(t,i){x(t,i,{name:"shapes",handleItemDefaults:r})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":446,"./helpers":457}],450:[function(u,q,W){var o=u("../../registry"),p=u("../../lib"),x=u("../../plots/cartesian/axes"),y=u("./draw_newshape/helpers").readPaths,e=u("./draw_newshape/display_outlines"),r=u("../../plots/cartesian/handle_outline").clearOutlineControllers,t=u("../color"),i=u("../drawing"),n=u("../../plot_api/plot_template").arrayEditor,h=u("../dragelement"),s=u("../../lib/setcursor"),a=u("./constants"),l=u("./helpers");function f(_){var T=_._fullLayout;for(var k in T._shapeUpperLayer.selectAll("path").remove(),T._shapeLowerLayer.selectAll("path").remove(),T._plots){var L=T._plots[k].shapelayer;L&&L.selectAll("path").remove()}for(var M=0;M<T.shapes.length;M++)T.shapes[M].visible&&m(_,M)}function d(_){return!!_._fullLayout._drawing}function v(_){return!_._context.edits.shapePosition}function m(_,T){_._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+T+'"]').remove();var k=l.makeOptionsAndPlotinfo(_,T),L=k.options,M=k.plotinfo;L._input&&L.visible!==!1&&(L.layer!=="below"?I(_._fullLayout._shapeUpperLayer):L.xref==="paper"||L.yref==="paper"?I(_._fullLayout._shapeLowerLayer):M._hadPlotinfo?I((M.mainplotinfo||M).shapelayer):I(_._fullLayout._shapeLowerLayer));function I(P){var S=b(_,L),E={"data-index":T,"fill-rule":L.fillrule,d:S},D=L.opacity,F=L.fillcolor,H=L.line.width?L.line.color:"rgba(0,0,0,0)",V=L.line.width,Q=L.line.dash;V||L.editable!==!0||(V=5,Q="solid");var K=S[S.length-1]!=="Z",Z=v(_)&&L.editable&&_._fullLayout._activeShapeIndex===T;Z&&(F=K?"rgba(0,0,0,0)":_._fullLayout.activeshape.fillcolor,D=_._fullLayout.activeshape.opacity);var $,re=P.append("path").attr(E).style("opacity",D).call(t.stroke,H).call(t.fill,F).call(i.dashLine,Q,V);if(c(re,_,L),(Z||_._context.edits.shapePosition)&&($=n(_.layout,"shapes",L)),Z){re.style({cursor:"move"});var R={element:re.node(),plotinfo:M,gd:_,editHelpers:$,isActiveShape:!0},N=y(S,_);e(N,re,R)}else _._context.edits.shapePosition?function(U,te,j,Y,J,ee){var ne,se,oe,he,le,de,xe,we,be,Ae,fe,me,ke,Te,Me,Oe,Fe=j.xsizemode==="pixel",qe=j.ysizemode==="pixel",et=j.type==="line",ze=j.type==="path",Ue=ee.modifyItem,We=x.getFromId(U,j.xref),Ze=x.getRefType(j.xref),nt=x.getFromId(U,j.yref),ft=x.getRefType(j.yref),xt=l.getDataToPixel(U,We,!1,Ze),It=l.getDataToPixel(U,nt,!0,ft),Et=l.getPixelToData(U,We,!1,Ze),it=l.getPixelToData(U,nt,!0,ft),rt=et?function(){var Je=Math.max(j.line.width,10),Se=J.append("g").attr("data-index",Y);Se.append("path").attr("d",te.attr("d")).style({cursor:"move","stroke-width":Je,"stroke-opacity":"0"});var Pe={"fill-opacity":"0"},De=Math.max(Je/2,10);return Se.append("circle").attr({"data-line-point":"start-point",cx:Fe?xt(j.xanchor)+j.x0:xt(j.x0),cy:qe?It(j.yanchor)-j.y0:It(j.y0),r:De}).style(Pe).classed("cursor-grab",!0),Se.append("circle").attr({"data-line-point":"end-point",cx:Fe?xt(j.xanchor)+j.x1:xt(j.x1),cy:qe?It(j.yanchor)-j.y1:It(j.y1),r:De}).style(Pe).classed("cursor-grab",!0),Se}():te,At={element:rt.node(),gd:U,prepFn:function(Je){d(U)||(Fe&&(le=xt(j.xanchor)),qe&&(de=It(j.yanchor)),j.type==="path"?Me=j.path:(ne=Fe?j.x0:xt(j.x0),se=qe?j.y0:It(j.y0),oe=Fe?j.x1:xt(j.x1),he=qe?j.y1:It(j.y1)),ne<oe?(be=ne,ke="x0",Ae=oe,Te="x1"):(be=oe,ke="x1",Ae=ne,Te="x0"),!qe&&se<he||qe&&se>he?(xe=se,fe="y0",we=he,me="y1"):(xe=he,fe="y1",we=se,me="y0"),Gt(Je),Ye(J,j),function(Se,Pe,De){var Ie=Pe.xref,$e=Pe.yref,st=x.getFromId(De,Ie),dt=x.getFromId(De,$e),ut="";Ie==="paper"||st.autorange||(ut+=Ie),$e==="paper"||dt.autorange||(ut+=$e),i.setClipUrl(Se,ut?"clip"+De._fullLayout._uid+ut:null,De)}(te,j,U),At.moveFn=Oe==="move"?Qt:Ve,At.altKey=Je.altKey)},doneFn:function(){d(U)||(s(te),Be(J),c(te,U,j),o.call("_guiRelayout",U,ee.getUpdateObj()))},clickFn:function(){d(U)||Be(J)}};function Gt(Je){if(d(U))Oe=null;else if(et)Oe=Je.target.tagName==="path"?"move":Je.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Se=At.element.getBoundingClientRect(),Pe=Se.right-Se.left,De=Se.bottom-Se.top,Ie=Je.clientX-Se.left,$e=Je.clientY-Se.top,st=!ze&&Pe>10&&De>10&&!Je.shiftKey?h.getCursor(Ie/Pe,1-$e/De):"move";s(te,st),Oe=st.split("-")[0]}}function Qt(Je,Se){if(j.type==="path"){var Pe=function($e){return $e},De=Pe,Ie=Pe;Fe?Ue("xanchor",j.xanchor=Et(le+Je)):(De=function($e){return Et(xt($e)+Je)},We&&We.type==="date"&&(De=l.encodeDate(De))),qe?Ue("yanchor",j.yanchor=it(de+Se)):(Ie=function($e){return it(It($e)+Se)},nt&&nt.type==="date"&&(Ie=l.encodeDate(Ie))),Ue("path",j.path=g(Me,De,Ie))}else Fe?Ue("xanchor",j.xanchor=Et(le+Je)):(Ue("x0",j.x0=Et(ne+Je)),Ue("x1",j.x1=Et(oe+Je))),qe?Ue("yanchor",j.yanchor=it(de+Se)):(Ue("y0",j.y0=it(se+Se)),Ue("y1",j.y1=it(he+Se)));te.attr("d",b(U,j)),Ye(J,j)}function Ve(Je,Se){if(ze){var Pe=function(Re){return Re},De=Pe,Ie=Pe;Fe?Ue("xanchor",j.xanchor=Et(le+Je)):(De=function(Re){return Et(xt(Re)+Je)},We&&We.type==="date"&&(De=l.encodeDate(De))),qe?Ue("yanchor",j.yanchor=it(de+Se)):(Ie=function(Re){return it(It(Re)+Se)},nt&&nt.type==="date"&&(Ie=l.encodeDate(Ie))),Ue("path",j.path=g(Me,De,Ie))}else if(et){if(Oe==="resize-over-start-point"){var $e=ne+Je,st=qe?se-Se:se+Se;Ue("x0",j.x0=Fe?$e:Et($e)),Ue("y0",j.y0=qe?st:it(st))}else if(Oe==="resize-over-end-point"){var dt=oe+Je,ut=qe?he-Se:he+Se;Ue("x1",j.x1=Fe?dt:Et(dt)),Ue("y1",j.y1=qe?ut:it(ut))}}else{var Lt=function(Re){return Oe.indexOf(Re)!==-1},lt=Lt("n"),Ct=Lt("s"),Pt=Lt("w"),Ke=Lt("e"),mt=lt?xe+Se:xe,Dt=Ct?we+Se:we,Bt=Pt?be+Je:be,Zt=Ke?Ae+Je:Ae;qe&&(lt&&(mt=xe-Se),Ct&&(Dt=we-Se)),(!qe&&Dt-mt>10||qe&&mt-Dt>10)&&(Ue(fe,j[fe]=qe?mt:it(mt)),Ue(me,j[me]=qe?Dt:it(Dt))),Zt-Bt>10&&(Ue(ke,j[ke]=Fe?Bt:Et(Bt)),Ue(Te,j[Te]=Fe?Zt:Et(Zt)))}te.attr("d",b(U,j)),Ye(J,j)}function Ye(Je,Se){(Fe||qe)&&function(){var Pe=Se.type!=="path",De=Je.selectAll(".visual-cue").data([0]);De.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Ie=xt(Fe?Se.xanchor:p.midRange(Pe?[Se.x0,Se.x1]:l.extractPathCoords(Se.path,a.paramIsX))),$e=It(qe?Se.yanchor:p.midRange(Pe?[Se.y0,Se.y1]:l.extractPathCoords(Se.path,a.paramIsY)));if(Ie=l.roundPositionForSharpStrokeRendering(Ie,1),$e=l.roundPositionForSharpStrokeRendering($e,1),Fe&&qe){var st="M"+(Ie-1-1)+","+($e-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";De.attr("d",st)}else if(Fe){var dt="M"+(Ie-1-1)+","+($e-9-1)+"v18 h2 v-18 Z";De.attr("d",dt)}else{var ut="M"+(Ie-9-1)+","+($e-1-1)+"h18 v2 h-18 Z";De.attr("d",ut)}}()}function Be(Je){Je.selectAll(".visual-cue").remove()}h.init(At),rt.node().onmousemove=Gt}(_,re,L,T,P,$):L.editable===!0&&re.style("pointer-events",K||t.opacity(F)*D<=.5?"stroke":"all");re.node().addEventListener("click",function(){return function(U,te){if(!!v(U)){var j=+te.node().getAttribute("data-index");if(j>=0){if(j===U._fullLayout._activeShapeIndex)return void w(U);U._fullLayout._activeShapeIndex=j,U._fullLayout._deactivateShape=w,f(U)}}}(_,re)})}}function c(_,T,k){var L=(k.xref+k.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");i.setClipUrl(_,L?"clip"+T._fullLayout._uid+L:null,T)}function b(_,T){var k,L,M,I,P,S,E,D,F=T.type,H=x.getRefType(T.xref),V=x.getRefType(T.yref),Q=x.getFromId(_,T.xref),K=x.getFromId(_,T.yref),Z=_._fullLayout._size;if(Q?H==="domain"?L=function(J){return Q._offset+Q._length*J}:(k=l.shapePositionToRange(Q),L=function(J){return Q._offset+Q.r2p(k(J,!0))}):L=function(J){return Z.l+Z.w*J},K?V==="domain"?I=function(J){return K._offset+K._length*(1-J)}:(M=l.shapePositionToRange(K),I=function(J){return K._offset+K.r2p(M(J,!0))}):I=function(J){return Z.t+Z.h*(1-J)},F==="path")return Q&&Q.type==="date"&&(L=l.decodeDate(L)),K&&K.type==="date"&&(I=l.decodeDate(I)),function(J,ee,ne){var se=J.path,oe=J.xsizemode,he=J.ysizemode,le=J.xanchor,de=J.yanchor;return se.replace(a.segmentRE,function(xe){var we=0,be=xe.charAt(0),Ae=a.paramIsX[be],fe=a.paramIsY[be],me=a.numParams[be],ke=xe.substr(1).replace(a.paramRE,function(Te){return Ae[we]?Te=oe==="pixel"?ee(le)+Number(Te):ee(Te):fe[we]&&(Te=he==="pixel"?ne(de)-Number(Te):ne(Te)),++we>me&&(Te="X"),Te});return we>me&&(ke=ke.replace(/[\s,]*X.*/,""),p.log("Ignoring extra params in segment "+xe)),be+ke})}(T,L,I);if(T.xsizemode==="pixel"){var $=L(T.xanchor);P=$+T.x0,S=$+T.x1}else P=L(T.x0),S=L(T.x1);if(T.ysizemode==="pixel"){var re=I(T.yanchor);E=re-T.y0,D=re-T.y1}else E=I(T.y0),D=I(T.y1);if(F==="line")return"M"+P+","+E+"L"+S+","+D;if(F==="rect")return"M"+P+","+E+"H"+S+"V"+D+"H"+P+"Z";var R=(P+S)/2,N=(E+D)/2,U=Math.abs(R-P),te=Math.abs(N-E),j="A"+U+","+te,Y=R+U+","+N;return"M"+Y+j+" 0 1,1 "+(R+","+(N-te))+j+" 0 0,1 "+Y+"Z"}function g(_,T,k){return _.replace(a.segmentRE,function(L){var M=0,I=L.charAt(0),P=a.paramIsX[I],S=a.paramIsY[I],E=a.numParams[I];return I+L.substr(1).replace(a.paramRE,function(D){return M>=E||(P[M]?D=T(D):S[M]&&(D=k(D)),M++),D})})}function w(_){v(_)&&_._fullLayout._activeShapeIndex>=0&&(r(_),delete _._fullLayout._activeShapeIndex,f(_))}q.exports={draw:f,drawOne:m,eraseActiveShape:function(_){if(!!v(_)){r(_);var T=_._fullLayout._activeShapeIndex,k=(_.layout||{}).shapes||[];if(T<k.length){for(var L=[],M=0;M<k.length;M++)M!==T&&L.push(k[M]);delete _._fullLayout._activeShapeIndex,o.call("_guiRelayout",_,{shapes:L})}}}}},{"../../lib":503,"../../lib/setcursor":524,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/cartesian/handle_outline":565,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":448,"./draw_newshape/display_outlines":454,"./draw_newshape/helpers":455,"./helpers":457}],451:[function(u,q,W){var o=u("../../drawing/attributes").dash,p=u("../../../lib/extend").extendFlat;q.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:p({},o,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":493,"../../drawing/attributes":387}],452:[function(u,q,W){q.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],453:[function(u,q,W){var o=u("../../color");q.exports=function(p,x,y){if(y("newshape.drawdirection"),y("newshape.layer"),y("newshape.fillcolor"),y("newshape.fillrule"),y("newshape.opacity"),y("newshape.line.width")){var e=(p||{}).plot_bgcolor||"#FFF";y("newshape.line.color",o.contrast(e)),y("newshape.line.dash")}y("activeshape.fillcolor"),y("activeshape.opacity")}},{"../../color":366}],454:[function(u,q,W){var o=u("../../dragelement"),p=u("../../dragelement/helpers").drawMode,x=u("../../../registry"),y=u("./constants"),e=y.i000,r=y.i090,t=y.i180,i=y.i270,n=u("../../../plots/cartesian/handle_outline").clearOutlineControllers,h=u("./helpers"),s=h.pointsShapeRectangle,a=h.pointsShapeEllipse,l=h.writePaths,f=u("./newshapes");q.exports=function d(v,m,c,b){b||(b=0);var g=c.gd;function w(){d(v,m,c,b++),a(v[0])&&_({redrawing:!0})}function _($){c.isActiveShape=!1;var re=f(m,c);Object.keys(re).length&&x.call(($||{}).redrawing?"relayout":"_guiRelayout",g,re)}var T,k,L,M,I,P=c.isActiveShape,S=g._fullLayout._zoomlayer,E=c.dragmode;p(E)?g._fullLayout._drawing=!0:g._fullLayout._activeShapeIndex>=0&&n(g),m.attr("d",l(v)),P&&!b&&(I=function($,re){for(var R=0;R<re.length;R++){var N=re[R];$[R]=[];for(var U=0;U<N.length;U++){$[R][U]=[];for(var te=0;te<N[U].length;te++)$[R][U][te]=N[U][te]}}return $}([],v),function($){T=[];for(var re=0;re<v.length;re++){var R=v[re],N=!s(R)&&a(R);T[re]=[];for(var U=0;U<R.length;U++)if(R[U][0]!=="Z"&&(!N||U===e||U===r||U===t||U===i)){var te=R[U][1],j=R[U][2],Y=$.append("circle").classed("cursor-grab",!0).attr("data-i",re).attr("data-j",U).attr("cx",te).attr("cy",j).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});T[re][U]={element:Y.node(),gd:g,prepFn:D,doneFn:H,clickFn:V},o.init(T[re][U])}}}(S.append("g").attr("class","outline-controllers")),function(){k=[],!!v.length&&(k[0]={element:m[0][0],gd:g,prepFn:K,doneFn:Z},o.init(k[0]))}());function D($){L=+$.srcElement.getAttribute("data-i"),M=+$.srcElement.getAttribute("data-j"),T[L][M].moveFn=F}function F($,re){if(v.length){var R=I[L][M][1],N=I[L][M][2],U=v[L],te=U.length;if(s(U)){for(var j=0;j<te;j++)if(j!==M){var Y=U[j];Y[1]===U[M][1]&&(Y[1]=R+$),Y[2]===U[M][2]&&(Y[2]=N+re)}if(U[M][1]=R+$,U[M][2]=N+re,!s(U))for(var J=0;J<te;J++)for(var ee=0;ee<U[J].length;ee++)U[J][ee]=I[L][J][ee]}else U[M][1]=R+$,U[M][2]=N+re;w()}}function H(){_()}function V($,re){if($===2){L=+re.srcElement.getAttribute("data-i"),M=+re.srcElement.getAttribute("data-j");var R=v[L];s(R)||a(R)||function(){if(v.length&&v[L]&&v[L].length){for(var N=[],U=0;U<v[L].length;U++)U!==M&&N.push(v[L][U]);N.length>1&&(N.length!==2||N[1][0]!=="Z")&&(M===0&&(N[0][0]="M"),v[L]=N,w(),_())}}()}}function Q($,re){(function(R,N){if(v.length)for(var U=0;U<v.length;U++)for(var te=0;te<v[U].length;te++)for(var j=0;j+2<v[U][te].length;j+=2)v[U][te][j+1]=I[U][te][j+1]+R,v[U][te][j+2]=I[U][te][j+2]+N})($,re),w()}function K($){(L=+$.srcElement.getAttribute("data-i"))||(L=0),k[L].moveFn=Q}function Z(){_()}}},{"../../../plots/cartesian/handle_outline":565,"../../../registry":638,"../../dragelement":385,"../../dragelement/helpers":384,"./constants":452,"./helpers":455,"./newshapes":456}],455:[function(u,q,W){var o=u("parse-svg-path"),p=u("./constants"),x=p.CIRCLE_SIDES,y=p.SQRT2,e=u("../../../plots/cartesian/helpers"),r=e.p2r,t=e.r2p,i=[0,3,4,5,6,1,2],n=[0,3,4,1,2];function h(a,l){return Math.abs(a-l)<=1e-6}function s(a,l){var f=l[1]-a[1],d=l[2]-a[2];return Math.sqrt(f*f+d*d)}W.writePaths=function(a){var l=a.length;if(!l)return"M0,0Z";for(var f="",d=0;d<l;d++)for(var v=a[d].length,m=0;m<v;m++){var c=a[d][m][0];if(c==="Z")f+="Z";else for(var b=a[d][m].length,g=0;g<b;g++){var w=g;c==="Q"||c==="S"?w=n[g]:c==="C"&&(w=i[g]),f+=a[d][m][w],g>0&&g<b-1&&(f+=",")}}return f},W.readPaths=function(a,l,f,d){var v,m,c,b=o(a),g=[],w=-1,_=0,T=0,k=function(){m=_,c=T};k();for(var L=0;L<b.length;L++){var M,I,P,S,E=[],D=b[L][0],F=D;switch(D){case"M":w++,g[w]=[],_=+b[L][1],T=+b[L][2],E.push([F,_,T]),k();break;case"Q":case"S":M=+b[L][1],P=+b[L][2],_=+b[L][3],T=+b[L][4],E.push([F,_,T,M,P]);break;case"C":M=+b[L][1],P=+b[L][2],I=+b[L][3],S=+b[L][4],_=+b[L][5],T=+b[L][6],E.push([F,_,T,M,P,I,S]);break;case"T":case"L":_=+b[L][1],T=+b[L][2],E.push([F,_,T]);break;case"H":F="L",_=+b[L][1],E.push([F,_,T]);break;case"V":F="L",T=+b[L][1],E.push([F,_,T]);break;case"A":F="L";var H=+b[L][1],V=+b[L][2];+b[L][4]||(H=-H,V=-V);var Q=_-H,K=T;for(v=1;v<=x/2;v++){var Z=2*Math.PI*v/x;E.push([F,Q+H*Math.cos(Z),K+V*Math.sin(Z)])}break;case"Z":_===m&&T===c||(_=m,T=c,E.push([F,_,T]))}for(var $=(f||{}).domain,re=l._fullLayout._size,R=f&&f.xsizemode==="pixel",N=f&&f.ysizemode==="pixel",U=d===!1,te=0;te<E.length;te++){for(v=0;v+2<7;v+=2){var j=E[te][v+1],Y=E[te][v+2];j!==void 0&&Y!==void 0&&(_=j,T=Y,f&&(f.xaxis&&f.xaxis.p2r?(U&&(j-=f.xaxis._offset),j=R?t(f.xaxis,f.xanchor)+j:r(f.xaxis,j)):(U&&(j-=re.l),$?j=$.x[0]+j/re.w:j/=re.w),f.yaxis&&f.yaxis.p2r?(U&&(Y-=f.yaxis._offset),Y=N?t(f.yaxis,f.yanchor)-Y:r(f.yaxis,Y)):(U&&(Y-=re.t),Y=$?$.y[1]-Y/re.h:1-Y/re.h)),E[te][v+1]=j,E[te][v+2]=Y)}g[w].push(E[te].slice())}}return g},W.pointsShapeRectangle=function(a){if(a.length!==5)return!1;for(var l=1;l<3;l++)if(!h(a[0][l]-a[1][l],a[3][l]-a[2][l])||!h(a[0][l]-a[3][l],a[1][l]-a[2][l]))return!1;return!(!h(a[0][1],a[1][1])&&!h(a[0][1],a[3][1]))&&!!(s(a[0],a[1])*s(a[0],a[3]))},W.pointsShapeEllipse=function(a){var l=a.length;if(l!==x+1)return!1;l=x;for(var f=0;f<l;f++){var d=(2*l-f)%l,v=(l/2+d)%l,m=(l/2+f)%l;if(!h(s(a[f],a[m]),s(a[d],a[v])))return!1}return!0},W.handleEllipse=function(a,l,f){if(!a)return[l,f];var d=W.ellipseOver({x0:l[0],y0:l[1],x1:f[0],y1:f[1]}),v=(d.x1+d.x0)/2,m=(d.y1+d.y0)/2,c=(d.x1-d.x0)/2,b=(d.y1-d.y0)/2;c||(c=b/=y),b||(b=c/=y);for(var g=[],w=0;w<x;w++){var _=2*w*Math.PI/x;g.push([v+c*Math.cos(_),m+b*Math.sin(_)])}return g},W.ellipseOver=function(a){var l=a.x0,f=a.y0,d=a.x1,v=a.y1,m=d-l,c=v-f,b=((l-=m)+d)/2,g=((f-=c)+v)/2;return{x0:b-(m*=y),y0:g-(c*=y),x1:b+m,y1:g+c}}},{"../../../plots/cartesian/helpers":566,"./constants":452,"parse-svg-path":250}],456:[function(u,q,W){var o=u("../../dragelement/helpers"),p=o.drawMode,x=o.openMode,y=u("./constants"),e=y.i000,r=y.i090,t=y.i180,i=y.i270,n=y.cos45,h=y.sin45,s=u("../../../plots/cartesian/helpers"),a=s.p2r,l=s.r2p,f=u("../../../plots/cartesian/handle_outline").clearSelect,d=u("./helpers"),v=d.readPaths,m=d.writePaths,c=d.ellipseOver;q.exports=function(b,g){if(b.length){var w=b[0][0];if(w){var _=w.getAttribute("d"),T=g.gd,k=T._fullLayout.newshape,L=g.plotinfo,M=L.xaxis,I=L.yaxis,P=!!L.domain||!L.xaxis,S=!!L.domain||!L.yaxis,E=g.isActiveShape,D=g.dragmode,F=(T.layout||{}).shapes||[];if(!p(D)&&E!==void 0){var H=T._fullLayout._activeShapeIndex;if(H<F.length)switch(T._fullLayout.shapes[H].type){case"rect":D="drawrect";break;case"circle":D="drawcircle";break;case"line":D="drawline";break;case"path":var V=F[H].path||"";D=V[V.length-1]==="Z"?"drawclosedpath":"drawopenpath"}}var Q,K=x(D),Z=v(_,T,L,E),$={editable:!0,xref:P?"paper":M._id,yref:S?"paper":I._id,layer:k.layer,opacity:k.opacity,line:{color:k.line.color,width:k.line.width,dash:k.line.dash}};if(K||($.fillcolor=k.fillcolor,$.fillrule=k.fillrule),Z.length===1&&(Q=Z[0]),Q&&D==="drawrect")$.type="rect",$.x0=Q[0][1],$.y0=Q[0][2],$.x1=Q[2][1],$.y1=Q[2][2];else if(Q&&D==="drawline")$.type="line",$.x0=Q[0][1],$.y0=Q[0][2],$.x1=Q[1][1],$.y1=Q[1][2];else if(Q&&D==="drawcircle"){$.type="circle";var re=Q[e][1],R=Q[r][1],N=Q[t][1],U=Q[i][1],te=Q[e][2],j=Q[r][2],Y=Q[t][2],J=Q[i][2],ee=L.xaxis&&(L.xaxis.type==="date"||L.xaxis.type==="log"),ne=L.yaxis&&(L.yaxis.type==="date"||L.yaxis.type==="log");ee&&(re=l(L.xaxis,re),R=l(L.xaxis,R),N=l(L.xaxis,N),U=l(L.xaxis,U)),ne&&(te=l(L.yaxis,te),j=l(L.yaxis,j),Y=l(L.yaxis,Y),J=l(L.yaxis,J));var se=(R+U)/2,oe=(te+Y)/2,he=c({x0:se,y0:oe,x1:se+(U-R+N-re)/2*n,y1:oe+(J-j+Y-te)/2*h});ee&&(he.x0=a(L.xaxis,he.x0),he.x1=a(L.xaxis,he.x1)),ne&&(he.y0=a(L.yaxis,he.y0),he.y1=a(L.yaxis,he.y1)),$.x0=he.x0,$.y0=he.y0,$.x1=he.x1,$.y1=he.y1}else $.type="path",M&&I&&function(fe,me,ke){var Te=me.type==="date",Me=ke.type==="date";if(!Te&&!Me)return fe;for(var Oe=0;Oe<fe.length;Oe++)for(var Fe=0;Fe<fe[Oe].length;Fe++)for(var qe=0;qe+2<fe[Oe][Fe].length;qe+=2)Te&&(fe[Oe][Fe][qe+1]=fe[Oe][Fe][qe+1].replace(" ","_")),Me&&(fe[Oe][Fe][qe+2]=fe[Oe][Fe][qe+2].replace(" ","_"))}(Z,M,I),$.path=m(Z),Q=null;f(T);for(var le=g.editHelpers,de=(le||{}).modifyItem,xe=[],we=0;we<F.length;we++){var be=T._fullLayout.shapes[we];if(xe[we]=be._input,E!==void 0&&we===T._fullLayout._activeShapeIndex){var Ae=$;switch(be.type){case"line":case"rect":case"circle":de("x0",Ae.x0),de("x1",Ae.x1),de("y0",Ae.y0),de("y1",Ae.y1);break;case"path":de("path",Ae.path)}}}return E===void 0?(xe.push($),xe):le?le.getUpdateObj():{}}}}},{"../../../plots/cartesian/handle_outline":565,"../../../plots/cartesian/helpers":566,"../../dragelement/helpers":384,"./constants":452,"./helpers":455}],457:[function(u,q,W){var o=u("./constants"),p=u("../../lib");W.rangeToShapePosition=function(x){return x.type==="log"?x.r2d:function(y){return y}},W.shapePositionToRange=function(x){return x.type==="log"?x.d2r:function(y){return y}},W.decodeDate=function(x){return function(y){return y.replace&&(y=y.replace("_"," ")),x(y)}},W.encodeDate=function(x){return function(y){return x(y).replace(" ","_")}},W.extractPathCoords=function(x,y){var e=[];return x.match(o.segmentRE).forEach(function(r){var t=y[r.charAt(0)].drawn;if(t!==void 0){var i=r.substr(1).match(o.paramRE);!i||i.length<t||e.push(p.cleanNumber(i[t]))}}),e},W.getDataToPixel=function(x,y,e,r){var t,i=x._fullLayout._size;if(y)if(r==="domain")t=function(h){return y._length*(e?1-h:h)+y._offset};else{var n=W.shapePositionToRange(y);t=function(h){return y._offset+y.r2p(n(h,!0))},y.type==="date"&&(t=W.decodeDate(t))}else t=e?function(h){return i.t+i.h*(1-h)}:function(h){return i.l+i.w*h};return t},W.getPixelToData=function(x,y,e,r){var t,i=x._fullLayout._size;if(y)if(r==="domain")t=function(h){var s=(h-y._offset)/y._length;return e?1-s:s};else{var n=W.rangeToShapePosition(y);t=function(h){return n(y.p2r(h-y._offset))}}else t=e?function(h){return 1-(h-i.t)/i.h}:function(h){return(h-i.l)/i.w};return t},W.roundPositionForSharpStrokeRendering=function(x,y){var e=Math.round(y%2)===1,r=Math.round(x);return e?r+.5:r},W.makeOptionsAndPlotinfo=function(x,y){var e=x._fullLayout.shapes[y]||{},r=x._fullLayout._plots[e.xref+e.yref];return r?r._hadPlotinfo=!0:(r={},e.xref&&e.xref!=="paper"&&(r.xaxis=x._fullLayout[e.xref+"axis"]),e.yref&&e.yref!=="paper"&&(r.yaxis=x._fullLayout[e.yref+"axis"])),r.xsizemode=e.xsizemode,r.ysizemode=e.ysizemode,r.xanchor=e.xanchor,r.yanchor=e.yanchor,{options:e,plotinfo:r}}},{"../../lib":503,"./constants":448}],458:[function(u,q,W){var o=u("./draw");q.exports={moduleType:"component",name:"shapes",layoutAttributes:u("./attributes"),supplyLayoutDefaults:u("./defaults"),supplyDrawNewShapeDefaults:u("./draw_newshape/defaults"),includeBasePlot:u("../../plots/cartesian/include_components")("shapes"),calcAutorange:u("./calc_autorange"),draw:o.draw,drawOne:o.drawOne}},{"../../plots/cartesian/include_components":567,"./attributes":446,"./calc_autorange":447,"./defaults":449,"./draw":450,"./draw_newshape/defaults":453}],459:[function(u,q,W){var o=u("../../plots/font_attributes"),p=u("../../plots/pad_attributes"),x=u("../../lib/extend").extendDeepAll,y=u("../../plot_api/edit_types").overrideAll,e=u("../../plots/animation_attributes"),r=u("../../plot_api/plot_template").templatedArray,t=u("./constants"),i=r("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});q.exports=y(r("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:i,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:x(p({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:o({})},font:o({}),activebgcolor:{valType:"color",dflt:t.gripBgActiveColor},bgcolor:{valType:"color",dflt:t.railBgColor},bordercolor:{valType:"color",dflt:t.railBorderColor},borderwidth:{valType:"number",min:0,dflt:t.railBorderWidth},ticklen:{valType:"number",min:0,dflt:t.tickLength},tickcolor:{valType:"color",dflt:t.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:t.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/animation_attributes":548,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"./constants":460}],460:[function(u,q,W){q.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],461:[function(u,q,W){var o=u("../../lib"),p=u("../../plots/array_container_defaults"),x=u("./attributes"),y=u("./constants").name,e=x.steps;function r(i,n,h){function s(v,m){return o.coerce(i,n,x,v,m)}for(var a=p(i,n,{name:"steps",handleItemDefaults:t}),l=0,f=0;f<a.length;f++)a[f].visible&&l++;if(l<2?n.visible=!1:s("visible")){n._stepCount=l;var d=n._visibleSteps=o.filterVisible(a);(a[s("active")]||{}).visible||(n.active=d[0]._index),s("x"),s("y"),o.noneOrAll(i,n,["x","y"]),s("xanchor"),s("yanchor"),s("len"),s("lenmode"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),o.coerceFont(s,"font",h.font),s("currentvalue.visible")&&(s("currentvalue.xanchor"),s("currentvalue.prefix"),s("currentvalue.suffix"),s("currentvalue.offset"),o.coerceFont(s,"currentvalue.font",n.font)),s("transition.duration"),s("transition.easing"),s("bgcolor"),s("activebgcolor"),s("bordercolor"),s("borderwidth"),s("ticklen"),s("tickwidth"),s("tickcolor"),s("minorticklen")}}function t(i,n){function h(a,l){return o.coerce(i,n,e,a,l)}if(i.method==="skip"||Array.isArray(i.args)?h("visible"):n.visible=!1){h("method"),h("args");var s=h("label","step-"+n._index);h("value",s),h("execute")}}q.exports=function(i,n){p(i,n,{name:y,handleItemDefaults:r})}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":459,"./constants":460}],462:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../plots/plots"),x=u("../color"),y=u("../drawing"),e=u("../../lib"),r=e.strTranslate,t=u("../../lib/svg_text_utils"),i=u("../../plot_api/plot_template").arrayEditor,n=u("./constants"),h=u("../../constants/alignment"),s=h.LINE_SPACING,a=h.FROM_TL,l=h.FROM_BR;function f(E){return n.autoMarginIdRoot+E._index}function d(E){return E._index}function v(E,D){var F=y.tester.selectAll("g."+n.labelGroupClass).data(D._visibleSteps);F.enter().append("g").classed(n.labelGroupClass,!0);var H=0,V=0;F.each(function(te){var j=b(o.select(this),{step:te},D).node();if(j){var Y=y.bBox(j);V=Math.max(V,Y.height),H=Math.max(H,Y.width)}}),F.remove();var Q=D._dims={};Q.inputAreaWidth=Math.max(n.railWidth,n.gripHeight);var K=E._fullLayout._size;Q.lx=K.l+K.w*D.x,Q.ly=K.t+K.h*(1-D.y),D.lenmode==="fraction"?Q.outerLength=Math.round(K.w*D.len):Q.outerLength=D.len,Q.inputAreaStart=0,Q.inputAreaLength=Math.round(Q.outerLength-D.pad.l-D.pad.r);var Z=(Q.inputAreaLength-2*n.stepInset)/(D._stepCount-1),$=H+n.labelPadding;if(Q.labelStride=Math.max(1,Math.ceil($/Z)),Q.labelHeight=V,Q.currentValueMaxWidth=0,Q.currentValueHeight=0,Q.currentValueTotalHeight=0,Q.currentValueMaxLines=1,D.currentvalue.visible){var re=y.tester.append("g");F.each(function(te){var j=m(re,D,te.label),Y=j.node()&&y.bBox(j.node())||{width:0,height:0},J=t.lineCount(j);Q.currentValueMaxWidth=Math.max(Q.currentValueMaxWidth,Math.ceil(Y.width)),Q.currentValueHeight=Math.max(Q.currentValueHeight,Math.ceil(Y.height)),Q.currentValueMaxLines=Math.max(Q.currentValueMaxLines,J)}),Q.currentValueTotalHeight=Q.currentValueHeight+D.currentvalue.offset,re.remove()}Q.height=Q.currentValueTotalHeight+n.tickOffset+D.ticklen+n.labelOffset+Q.labelHeight+D.pad.t+D.pad.b;var R="left";e.isRightAnchor(D)&&(Q.lx-=Q.outerLength,R="right"),e.isCenterAnchor(D)&&(Q.lx-=Q.outerLength/2,R="center");var N="top";e.isBottomAnchor(D)&&(Q.ly-=Q.height,N="bottom"),e.isMiddleAnchor(D)&&(Q.ly-=Q.height/2,N="middle"),Q.outerLength=Math.ceil(Q.outerLength),Q.height=Math.ceil(Q.height),Q.lx=Math.round(Q.lx),Q.ly=Math.round(Q.ly);var U={y:D.y,b:Q.height*l[N],t:Q.height*a[N]};D.lenmode==="fraction"?(U.l=0,U.xl=D.x-D.len*a[R],U.r=0,U.xr=D.x+D.len*l[R]):(U.x=D.x,U.l=Q.outerLength*a[R],U.r=Q.outerLength*l[R]),p.autoMargin(E,f(D),U)}function m(E,D,F){if(D.currentvalue.visible){var H,V,Q=D._dims;switch(D.currentvalue.xanchor){case"right":H=Q.inputAreaLength-n.currentValueInset-Q.currentValueMaxWidth,V="left";break;case"center":H=.5*Q.inputAreaLength,V="middle";break;default:H=n.currentValueInset,V="left"}var K=e.ensureSingle(E,"text",n.labelClass,function(U){U.attr({"text-anchor":V,"data-notex":1})}),Z=D.currentvalue.prefix?D.currentvalue.prefix:"";if(typeof F=="string")Z+=F;else{var $=D.steps[D.active].label,re=D._gd._fullLayout._meta;re&&($=e.templateString($,re)),Z+=$}D.currentvalue.suffix&&(Z+=D.currentvalue.suffix),K.call(y.font,D.currentvalue.font).text(Z).call(t.convertToTspans,D._gd);var R=t.lineCount(K),N=(Q.currentValueMaxLines+1-R)*D.currentvalue.font.size*s;return t.positionText(K,H,N),K}}function c(E,D,F){e.ensureSingle(E,"rect",n.gripRectClass,function(H){H.call(T,D,E,F).style("pointer-events","all")}).attr({width:n.gripWidth,height:n.gripHeight,rx:n.gripRadius,ry:n.gripRadius}).call(x.stroke,F.bordercolor).call(x.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px")}function b(E,D,F){var H=e.ensureSingle(E,"text",n.labelClass,function(K){K.attr({"text-anchor":"middle","data-notex":1})}),V=D.step.label,Q=F._gd._fullLayout._meta;return Q&&(V=e.templateString(V,Q)),H.call(y.font,F.font).text(V).call(t.convertToTspans,F._gd),H}function g(E,D){var F=e.ensureSingle(E,"g",n.labelsClass),H=D._dims,V=F.selectAll("g."+n.labelGroupClass).data(H.labelSteps);V.enter().append("g").classed(n.labelGroupClass,!0),V.exit().remove(),V.each(function(Q){var K=o.select(this);K.call(b,Q,D),y.setTranslate(K,M(D,Q.fraction),n.tickOffset+D.ticklen+D.font.size*s+n.labelOffset+H.currentValueTotalHeight)})}function w(E,D,F,H,V){var Q=Math.round(H*(F._stepCount-1)),K=F._visibleSteps[Q]._index;K!==F.active&&_(E,D,F,K,!0,V)}function _(E,D,F,H,V,Q){var K=F.active;F.active=H,i(E.layout,n.name,F).applyUpdate("active",H);var Z=F.steps[F.active];D.call(L,F,Q),D.call(m,F),E.emit("plotly_sliderchange",{slider:F,step:F.steps[F.active],interaction:V,previousActive:K}),Z&&Z.method&&V&&(D._nextMethod?(D._nextMethod.step=Z,D._nextMethod.doCallback=V,D._nextMethod.doTransition=Q):(D._nextMethod={step:Z,doCallback:V,doTransition:Q},D._nextMethodRaf=window.requestAnimationFrame(function(){var $=D._nextMethod.step;$.method&&($.execute&&p.executeAPICommand(E,$.method,$.args),D._nextMethod=null,D._nextMethodRaf=null)})))}function T(E,D,F){var H=F.node(),V=o.select(D);function Q(){return F.data()[0]}function K(){var Z=Q();D.emit("plotly_sliderstart",{slider:Z});var $=F.select("."+n.gripRectClass);o.event.stopPropagation(),o.event.preventDefault(),$.call(x.fill,Z.activebgcolor);var re=I(Z,o.mouse(H)[0]);function R(){var U=Q(),te=I(U,o.mouse(H)[0]);w(D,F,U,te,!1)}function N(){var U=Q();U._dragging=!1,$.call(x.fill,U.bgcolor),V.on("mouseup",null),V.on("mousemove",null),V.on("touchend",null),V.on("touchmove",null),D.emit("plotly_sliderend",{slider:U,step:U.steps[U.active]})}w(D,F,Z,re,!0),Z._dragging=!0,V.on("mousemove",R),V.on("touchmove",R),V.on("mouseup",N),V.on("touchend",N)}E.on("mousedown",K),E.on("touchstart",K)}function k(E,D){var F=E.selectAll("rect."+n.tickRectClass).data(D._visibleSteps),H=D._dims;F.enter().append("rect").classed(n.tickRectClass,!0),F.exit().remove(),F.attr({width:D.tickwidth+"px","shape-rendering":"crispEdges"}),F.each(function(V,Q){var K=Q%H.labelStride==0,Z=o.select(this);Z.attr({height:K?D.ticklen:D.minorticklen}).call(x.fill,D.tickcolor),y.setTranslate(Z,M(D,Q/(D._stepCount-1))-.5*D.tickwidth,(K?n.tickOffset:n.minorTickOffset)+H.currentValueTotalHeight)})}function L(E,D,F){for(var H=E.select("rect."+n.gripRectClass),V=0,Q=0;Q<D._stepCount;Q++)if(D._visibleSteps[Q]._index===D.active){V=Q;break}var K=M(D,V/(D._stepCount-1));if(!D._invokingCommand){var Z=H;F&&D.transition.duration>0&&(Z=Z.transition().duration(D.transition.duration).ease(D.transition.easing)),Z.attr("transform",r(K-.5*n.gripWidth,D._dims.currentValueTotalHeight))}}function M(E,D){var F=E._dims;return F.inputAreaStart+n.stepInset+(F.inputAreaLength-2*n.stepInset)*Math.min(1,Math.max(0,D))}function I(E,D){var F=E._dims;return Math.min(1,Math.max(0,(D-n.stepInset-F.inputAreaStart)/(F.inputAreaLength-2*n.stepInset-2*F.inputAreaStart)))}function P(E,D,F){var H=F._dims,V=e.ensureSingle(E,"rect",n.railTouchRectClass,function(Q){Q.call(T,D,E,F).style("pointer-events","all")});V.attr({width:H.inputAreaLength,height:Math.max(H.inputAreaWidth,n.tickOffset+F.ticklen+H.labelHeight)}).call(x.fill,F.bgcolor).attr("opacity",0),y.setTranslate(V,0,H.currentValueTotalHeight)}function S(E,D){var F=D._dims,H=F.inputAreaLength-2*n.railInset,V=e.ensureSingle(E,"rect",n.railRectClass);V.attr({width:H,height:n.railWidth,rx:n.railRadius,ry:n.railRadius,"shape-rendering":"crispEdges"}).call(x.stroke,D.bordercolor).call(x.fill,D.bgcolor).style("stroke-width",D.borderwidth+"px"),y.setTranslate(V,n.railInset,.5*(F.inputAreaWidth-n.railWidth)+F.currentValueTotalHeight)}q.exports=function(E){var D=E._fullLayout,F=function($,re){for(var R=$[n.name],N=[],U=0;U<R.length;U++){var te=R[U];te.visible&&(te._gd=re,N.push(te))}return N}(D,E),H=D._infolayer.selectAll("g."+n.containerClassName).data(F.length>0?[0]:[]);function V($){$._commandObserver&&($._commandObserver.remove(),delete $._commandObserver),p.autoMargin(E,f($))}if(H.enter().append("g").classed(n.containerClassName,!0).style("cursor","ew-resize"),H.exit().each(function(){o.select(this).selectAll("g."+n.groupClassName).each(V)}).remove(),F.length!==0){var Q=H.selectAll("g."+n.groupClassName).data(F,d);Q.enter().append("g").classed(n.groupClassName,!0),Q.exit().each(V).remove();for(var K=0;K<F.length;K++){var Z=F[K];v(E,Z)}Q.each(function($){var re=o.select(this);(function(R){var N=R._dims;N.labelSteps=[];for(var U=R._stepCount,te=0;te<U;te+=N.labelStride)N.labelSteps.push({fraction:te/(U-1),step:R._visibleSteps[te]})})($),p.manageCommandObserver(E,$,$._visibleSteps,function(R){var N=re.data()[0];N.active!==R.index&&(N._dragging||_(E,re,N,R.index,!1,!0))}),function(R,N,U){(U.steps[U.active]||{}).visible||(U.active=U._visibleSteps[0]._index),N.call(m,U).call(S,U).call(g,U).call(k,U).call(P,R,U).call(c,R,U);var te=U._dims;y.setTranslate(N,te.lx+U.pad.l,te.ly+U.pad.t),N.call(L,U,!1),N.call(m,U)}(E,o.select(this),$)})}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":460,"@plotly/d3":58}],463:[function(u,q,W){var o=u("./constants");q.exports={moduleType:"component",name:o.name,layoutAttributes:u("./attributes"),supplyLayoutDefaults:u("./defaults"),draw:u("./draw")}},{"./attributes":459,"./constants":460,"./defaults":461,"./draw":462}],464:[function(u,q,W){var o=u("@plotly/d3"),p=u("fast-isnumeric"),x=u("../../plots/plots"),y=u("../../registry"),e=u("../../lib"),r=e.strTranslate,t=u("../drawing"),i=u("../color"),n=u("../../lib/svg_text_utils"),h=u("../../constants/interactions"),s=u("../../constants/alignment").OPPOSITE_SIDE,a=/ [XY][0-9]* /;q.exports={draw:function(l,f,d){var v,m=d.propContainer,c=d.propName,b=d.placeholder,g=d.traceIndex,w=d.avoid||{},_=d.attributes,T=d.transform,k=d.containerGroup,L=l._fullLayout,M=1,I=!1,P=m.title,S=(P&&P.text?P.text:"").trim(),E=P&&P.font?P.font:{},D=E.family,F=E.size,H=E.color;c==="title.text"?v="titleText":c.indexOf("axis")!==-1?v="axisTitleText":c.indexOf(!0)&&(v="colorbarTitleText");var V=l._context.edits[v];S===""?M=0:S.replace(a," % ")===b.replace(a," % ")&&(M=.2,I=!0,V||(S="")),d._meta?S=e.templateString(S,d._meta):L._meta&&(S=e.templateString(S,L._meta));var Q,K=S||V;k||(k=e.ensureSingle(L._infolayer,"g","g-"+f),Q=L._hColorbarMoveTitle);var Z=k.selectAll("text").data(K?[0]:[]);if(Z.enter().append("text"),Z.text(S).attr("class",f),Z.exit().remove(),!K)return k;function $(N){e.syncOrAsync([re,R],N)}function re(N){var U;return!T&&Q&&(T={}),T?(U="",T.rotate&&(U+="rotate("+[T.rotate,_.x,_.y]+")"),(T.offset||Q)&&(U+=r(0,(T.offset||0)-(Q||0)))):U=null,N.attr("transform",U),N.style({"font-family":D,"font-size":o.round(F,2)+"px",fill:i.rgb(H),opacity:M*i.opacity(H),"font-weight":x.fontWeight}).attr(_).call(n.convertToTspans,l),x.previousPromises(l)}function R(N){var U=o.select(N.node().parentNode);if(w&&w.selection&&w.side&&S){U.attr("transform",null);var te=s[w.side],j=w.side==="left"||w.side==="top"?-1:1,Y=p(w.pad)?w.pad:2,J=t.bBox(U.node()),ee={left:0,top:0,right:L.width,bottom:L.height},ne=w.maxShift||j*(ee[w.side]-J[w.side]),se=0;if(ne<0)se=ne;else{var oe=w.offsetLeft||0,he=w.offsetTop||0;J.left-=oe,J.right-=oe,J.top-=he,J.bottom-=he,w.selection.each(function(){var de=t.bBox(this);e.bBoxIntersect(J,de,Y)&&(se=Math.max(se,j*(de[w.side]-J[te])+Y))}),se=Math.min(ne,se)}if(se>0||ne<0){var le={left:[-se,0],right:[se,0],top:[0,-se],bottom:[0,se]}[w.side];U.attr("transform",r(le[0],le[1]))}}}return Z.call($),V&&(S?Z.on(".opacity",null):(M=0,I=!0,Z.text(b).on("mouseover.opacity",function(){o.select(this).transition().duration(h.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){o.select(this).transition().duration(h.HIDE_PLACEHOLDER).style("opacity",0)})),Z.call(n.makeEditable,{gd:l}).on("edit",function(N){g!==void 0?y.call("_guiRestyle",l,c,N,g):y.call("_guiRelayout",l,c,N)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call($)}).on("input",function(N){this.text(N||" ").call(n.positionText,_.x,_.y)})),Z.classed("js-placeholder",I),k}}},{"../../constants/alignment":471,"../../constants/interactions":478,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],465:[function(u,q,W){var o=u("../../plots/font_attributes"),p=u("../color/attributes"),x=u("../../lib/extend").extendFlat,y=u("../../plot_api/edit_types").overrideAll,e=u("../../plots/pad_attributes"),r=u("../../plot_api/plot_template").templatedArray,t=r("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});q.exports=y(r("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:t,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:x(e({editType:"arraydraw"}),{}),font:o({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:p.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"../color/attributes":365}],466:[function(u,q,W){q.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},{}],467:[function(u,q,W){var o=u("../../lib"),p=u("../../plots/array_container_defaults"),x=u("./attributes"),y=u("./constants").name,e=x.buttons;function r(i,n,h){function s(a,l){return o.coerce(i,n,x,a,l)}s("visible",p(i,n,{name:"buttons",handleItemDefaults:t}).length>0)&&(s("active"),s("direction"),s("type"),s("showactive"),s("x"),s("y"),o.noneOrAll(i,n,["x","y"]),s("xanchor"),s("yanchor"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),o.coerceFont(s,"font",h.font),s("bgcolor",h.paper_bgcolor),s("bordercolor"),s("borderwidth"))}function t(i,n){function h(s,a){return o.coerce(i,n,e,s,a)}h("visible",i.method==="skip"||Array.isArray(i.args))&&(h("method"),h("args"),h("args2"),h("label"),h("execute"))}q.exports=function(i,n){p(i,n,{name:y,handleItemDefaults:r})}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":465,"./constants":466}],468:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../plots/plots"),x=u("../color"),y=u("../drawing"),e=u("../../lib"),r=u("../../lib/svg_text_utils"),t=u("../../plot_api/plot_template").arrayEditor,i=u("../../constants/alignment").LINE_SPACING,n=u("./constants"),h=u("./scrollbox");function s(M){return M._index}function a(M,I){return+M.attr(n.menuIndexAttrName)===I._index}function l(M,I,P,S,E,D,F,H){I.active=F,t(M.layout,n.name,I).applyUpdate("active",F),I.type==="buttons"?d(M,S,null,null,I):I.type==="dropdown"&&(E.attr(n.menuIndexAttrName,"-1"),f(M,S,E,D,I),H||d(M,S,E,D,I))}function f(M,I,P,S,E){var D=e.ensureSingle(I,"g",n.headerClassName,function(Z){Z.style("pointer-events","all")}),F=E._dims,H=E.active,V=E.buttons[H]||n.blankHeaderOpts,Q={y:E.pad.t,yPad:0,x:E.pad.l,xPad:0,index:0},K={width:F.headerWidth,height:F.headerHeight};D.call(v,E,V,M).call(k,E,Q,K),e.ensureSingle(I,"text",n.headerArrowClassName,function(Z){Z.attr("text-anchor","end").call(y.font,E.font).text(n.arrowSymbol[E.direction])}).attr({x:F.headerWidth-n.arrowOffsetX+E.pad.l,y:F.headerHeight/2+n.textOffsetY+E.pad.t}),D.on("click",function(){P.call(L,String(a(P,E)?-1:E._index)),d(M,I,P,S,E)}),D.on("mouseover",function(){D.call(g)}),D.on("mouseout",function(){D.call(w,E)}),y.setTranslate(I,F.lx,F.ly)}function d(M,I,P,S,E){P||(P=I).attr("pointer-events","all");var D=function(U){return+U.attr(n.menuIndexAttrName)==-1}(P)&&E.type!=="buttons"?[]:E.buttons,F=E.type==="dropdown"?n.dropdownButtonClassName:n.buttonClassName,H=P.selectAll("g."+F).data(e.filterVisible(D)),V=H.enter().append("g").classed(F,!0),Q=H.exit();E.type==="dropdown"?(V.attr("opacity","0").transition().attr("opacity","1"),Q.transition().attr("opacity","0").remove()):Q.remove();var K=0,Z=0,$=E._dims,re=["up","down"].indexOf(E.direction)!==-1;E.type==="dropdown"&&(re?Z=$.headerHeight+n.gapButtonHeader:K=$.headerWidth+n.gapButtonHeader),E.type==="dropdown"&&E.direction==="up"&&(Z=-n.gapButtonHeader+n.gapButton-$.openHeight),E.type==="dropdown"&&E.direction==="left"&&(K=-n.gapButtonHeader+n.gapButton-$.openWidth);var R={x:$.lx+K+E.pad.l,y:$.ly+Z+E.pad.t,yPad:n.gapButton,xPad:n.gapButton,index:0},N={l:R.x+E.borderwidth,t:R.y+E.borderwidth};H.each(function(U,te){var j=o.select(this);j.call(v,E,U,M).call(k,E,R),j.on("click",function(){o.event.defaultPrevented||(U.execute&&(U.args2&&E.active===te?(l(M,E,0,I,P,S,-1),p.executeAPICommand(M,U.method,U.args2)):(l(M,E,0,I,P,S,te),p.executeAPICommand(M,U.method,U.args))),M.emit("plotly_buttonclicked",{menu:E,button:U,active:E.active}))}),j.on("mouseover",function(){j.call(g)}),j.on("mouseout",function(){j.call(w,E),H.call(b,E)})}),H.call(b,E),re?(N.w=Math.max($.openWidth,$.headerWidth),N.h=R.y-N.t):(N.w=R.x-N.l,N.h=Math.max($.openHeight,$.headerHeight)),N.direction=E.direction,S&&(H.size()?function(U,te,j,Y,J,ee){var ne,se,oe,he=J.direction,le=he==="up"||he==="down",de=J._dims,xe=J.active;if(le)for(se=0,oe=0;oe<xe;oe++)se+=de.heights[oe]+n.gapButton;else for(ne=0,oe=0;oe<xe;oe++)ne+=de.widths[oe]+n.gapButton;Y.enable(ee,ne,se),Y.hbar&&Y.hbar.attr("opacity","0").transition().attr("opacity","1"),Y.vbar&&Y.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,S,E,N):function(U){var te=!!U.hbar,j=!!U.vbar;te&&U.hbar.transition().attr("opacity","0").each("end",function(){te=!1,j||U.disable()}),j&&U.vbar.transition().attr("opacity","0").each("end",function(){j=!1,te||U.disable()})}(S))}function v(M,I,P,S){M.call(m,I).call(c,I,P,S)}function m(M,I){e.ensureSingle(M,"rect",n.itemRectClassName,function(P){P.attr({rx:n.rx,ry:n.ry,"shape-rendering":"crispEdges"})}).call(x.stroke,I.bordercolor).call(x.fill,I.bgcolor).style("stroke-width",I.borderwidth+"px")}function c(M,I,P,S){var E=e.ensureSingle(M,"text",n.itemTextClassName,function(H){H.attr({"text-anchor":"start","data-notex":1})}),D=P.label,F=S._fullLayout._meta;F&&(D=e.templateString(D,F)),E.call(y.font,I.font).text(D).call(r.convertToTspans,S)}function b(M,I){var P=I.active;M.each(function(S,E){var D=o.select(this);E===P&&I.showactive&&D.select("rect."+n.itemRectClassName).call(x.fill,n.activeColor)})}function g(M){M.select("rect."+n.itemRectClassName).call(x.fill,n.hoverColor)}function w(M,I){M.select("rect."+n.itemRectClassName).call(x.fill,I.bgcolor)}function _(M,I){var P=I._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},S=y.tester.selectAll("g."+n.dropdownButtonClassName).data(e.filterVisible(I.buttons));S.enter().append("g").classed(n.dropdownButtonClassName,!0);var E=["up","down"].indexOf(I.direction)!==-1;S.each(function(K,Z){var $=o.select(this);$.call(v,I,K,M);var re=$.select("."+n.itemTextClassName),R=re.node()&&y.bBox(re.node()).width,N=Math.max(R+n.textPadX,n.minWidth),U=I.font.size*i,te=r.lineCount(re),j=Math.max(U*te,n.minHeight)+n.textOffsetY;j=Math.ceil(j),N=Math.ceil(N),P.widths[Z]=N,P.heights[Z]=j,P.height1=Math.max(P.height1,j),P.width1=Math.max(P.width1,N),E?(P.totalWidth=Math.max(P.totalWidth,N),P.openWidth=P.totalWidth,P.totalHeight+=j+n.gapButton,P.openHeight+=j+n.gapButton):(P.totalWidth+=N+n.gapButton,P.openWidth+=N+n.gapButton,P.totalHeight=Math.max(P.totalHeight,j),P.openHeight=P.totalHeight)}),E?P.totalHeight-=n.gapButton:P.totalWidth-=n.gapButton,P.headerWidth=P.width1+n.arrowPadX,P.headerHeight=P.height1,I.type==="dropdown"&&(E?(P.width1+=n.arrowPadX,P.totalHeight=P.height1):P.totalWidth=P.width1,P.totalWidth+=n.arrowPadX),S.remove();var D=P.totalWidth+I.pad.l+I.pad.r,F=P.totalHeight+I.pad.t+I.pad.b,H=M._fullLayout._size;P.lx=H.l+H.w*I.x,P.ly=H.t+H.h*(1-I.y);var V="left";e.isRightAnchor(I)&&(P.lx-=D,V="right"),e.isCenterAnchor(I)&&(P.lx-=D/2,V="center");var Q="top";e.isBottomAnchor(I)&&(P.ly-=F,Q="bottom"),e.isMiddleAnchor(I)&&(P.ly-=F/2,Q="middle"),P.totalWidth=Math.ceil(P.totalWidth),P.totalHeight=Math.ceil(P.totalHeight),P.lx=Math.round(P.lx),P.ly=Math.round(P.ly),p.autoMargin(M,T(I),{x:I.x,y:I.y,l:D*({right:1,center:.5}[V]||0),r:D*({left:1,center:.5}[V]||0),b:F*({top:1,middle:.5}[Q]||0),t:F*({bottom:1,middle:.5}[Q]||0)})}function T(M){return n.autoMarginIdRoot+M._index}function k(M,I,P,S){S=S||{};var E=M.select("."+n.itemRectClassName),D=M.select("."+n.itemTextClassName),F=I.borderwidth,H=P.index,V=I._dims;y.setTranslate(M,F+P.x,F+P.y);var Q=["up","down"].indexOf(I.direction)!==-1,K=S.height||(Q?V.heights[H]:V.height1);E.attr({x:0,y:0,width:S.width||(Q?V.width1:V.widths[H]),height:K});var Z=I.font.size*i,$=(r.lineCount(D)-1)*Z/2;r.positionText(D,n.textOffsetX,K/2-$+n.textOffsetY),Q?P.y+=V.heights[H]+P.yPad:P.x+=V.widths[H]+P.xPad,P.index++}function L(M,I){M.attr(n.menuIndexAttrName,I||"-1").selectAll("g."+n.dropdownButtonClassName).remove()}q.exports=function(M){var I=M._fullLayout,P=e.filterVisible(I[n.name]);function S(Z){p.autoMargin(M,T(Z))}var E=I._menulayer.selectAll("g."+n.containerClassName).data(P.length>0?[0]:[]);if(E.enter().append("g").classed(n.containerClassName,!0).style("cursor","pointer"),E.exit().each(function(){o.select(this).selectAll("g."+n.headerGroupClassName).each(S)}).remove(),P.length!==0){var D=E.selectAll("g."+n.headerGroupClassName).data(P,s);D.enter().append("g").classed(n.headerGroupClassName,!0);for(var F=e.ensureSingle(E,"g",n.dropdownButtonGroupClassName,function(Z){Z.style("pointer-events","all")}),H=0;H<P.length;H++){var V=P[H];_(M,V)}var Q="updatemenus"+I._uid,K=new h(M,F,Q);D.enter().size()&&(F.node().parentNode.appendChild(F.node()),F.call(L)),D.exit().each(function(Z){F.call(L),S(Z)}).remove(),D.each(function(Z){var $=o.select(this),re=Z.type==="dropdown"?F:null;p.manageCommandObserver(M,Z,Z.buttons,function(R){l(M,Z,Z.buttons[R.index],$,re,K,R.index,!0)}),Z.type==="dropdown"?(f(M,$,F,K,Z),a(F,Z)&&d(M,$,F,K,Z)):d(M,$,null,null,Z)})}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":466,"./scrollbox":470,"@plotly/d3":58}],469:[function(u,q,W){arguments[4][463][0].apply(W,arguments)},{"./attributes":465,"./constants":466,"./defaults":467,"./draw":468,dup:463}],470:[function(u,q,W){q.exports=e;var o=u("@plotly/d3"),p=u("../color"),x=u("../drawing"),y=u("../../lib");function e(r,t,i){this.gd=r,this.container=t,this.id=i,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(r,t,i){var n=this.gd._fullLayout,h=n.width,s=n.height;this.position=r;var a,l,f,d,v=this.position.l,m=this.position.w,c=this.position.t,b=this.position.h,g=this.position.direction,w=g==="down",_=g==="left",T=g==="up",k=m,L=b;w||_||g==="right"||T||(this.position.direction="down",w=!0),w||T?(l=(a=v)+k,w?(f=c,L=(d=Math.min(f+L,s))-f):L=(d=c+L)-(f=Math.max(d-L,0))):(d=(f=c)+L,_?k=(l=v+k)-(a=Math.max(l-k,0)):(a=v,k=(l=Math.min(a+k,h))-a)),this._box={l:a,t:f,w:k,h:L};var M=m>k,I=e.barLength+2*e.barPad,P=e.barWidth+2*e.barPad,S=v,E=c+b;E+P>s&&(E=s-P);var D=this.container.selectAll("rect.scrollbar-horizontal").data(M?[0]:[]);D.exit().on(".drag",null).remove(),D.enter().append("rect").classed("scrollbar-horizontal",!0).call(p.fill,e.barColor),M?(this.hbar=D.attr({rx:e.barRadius,ry:e.barRadius,x:S,y:E,width:I,height:P}),this._hbarXMin=S+I/2,this._hbarTranslateMax=k-I):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var F=b>L,H=e.barWidth+2*e.barPad,V=e.barLength+2*e.barPad,Q=v+m,K=c;Q+H>h&&(Q=h-H);var Z=this.container.selectAll("rect.scrollbar-vertical").data(F?[0]:[]);Z.exit().on(".drag",null).remove(),Z.enter().append("rect").classed("scrollbar-vertical",!0).call(p.fill,e.barColor),F?(this.vbar=Z.attr({rx:e.barRadius,ry:e.barRadius,x:Q,y:K,width:H,height:V}),this._vbarYMin=K+V/2,this._vbarTranslateMax=L-V):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var $=this.id,re=a-.5,R=F?l+H+.5:l+.5,N=f-.5,U=M?d+P+.5:d+.5,te=n._topdefs.selectAll("#"+$).data(M||F?[0]:[]);if(te.exit().remove(),te.enter().append("clipPath").attr("id",$).append("rect"),M||F?(this._clipRect=te.select("rect").attr({x:Math.floor(re),y:Math.floor(N),width:Math.ceil(R)-Math.floor(re),height:Math.ceil(U)-Math.floor(N)}),this.container.call(x.setClipUrl,$,this.gd),this.bg.attr({x:v,y:c,width:m,height:b})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(x.setClipUrl,null),delete this._clipRect),M||F){var j=o.behavior.drag().on("dragstart",function(){o.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(j);var Y=o.behavior.drag().on("dragstart",function(){o.event.sourceEvent.preventDefault(),o.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));M&&this.hbar.on(".drag",null).call(Y),F&&this.vbar.on(".drag",null).call(Y)}this.setTranslate(t,i)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(x.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var r=this.translateX,t=this.translateY;this.hbar&&(r-=o.event.dx),this.vbar&&(t-=o.event.dy),this.setTranslate(r,t)},e.prototype._onBoxWheel=function(){var r=this.translateX,t=this.translateY;this.hbar&&(r+=o.event.deltaY),this.vbar&&(t+=o.event.deltaY),this.setTranslate(r,t)},e.prototype._onBarDrag=function(){var r=this.translateX,t=this.translateY;if(this.hbar){var i=r+this._hbarXMin,n=i+this._hbarTranslateMax;r=(y.constrain(o.event.x,i,n)-i)/(n-i)*(this.position.w-this._box.w)}if(this.vbar){var h=t+this._vbarYMin,s=h+this._vbarTranslateMax;t=(y.constrain(o.event.y,h,s)-h)/(s-h)*(this.position.h-this._box.h)}this.setTranslate(r,t)},e.prototype.setTranslate=function(r,t){var i=this.position.w-this._box.w,n=this.position.h-this._box.h;if(r=y.constrain(r||0,0,i),t=y.constrain(t||0,0,n),this.translateX=r,this.translateY=t,this.container.call(x.setTranslate,this._box.l-this.position.l-r,this._box.t-this.position.t-t),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+r-.5),y:Math.floor(this.position.t+t-.5)}),this.hbar){var h=r/i;this.hbar.call(x.setTranslate,r+h*this._hbarTranslateMax,t)}if(this.vbar){var s=t/n;this.vbar.call(x.setTranslate,r,t+s*this._vbarTranslateMax)}}},{"../../lib":503,"../color":366,"../drawing":388,"@plotly/d3":58}],471:[function(u,q,W){q.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],472:[function(u,q,W){q.exports={axisRefDescription:function(o,p,x){return["If set to a",o,"axis id (e.g. *"+o+"* or","*"+o+"2*), the `"+o+"` position refers to a",o,"coordinate. If set to *paper*, the `"+o+"`","position refers to the distance from the",p,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",p,"("+x+"). If set to a",o,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",p,"of the domain of that axis: e.g.,","*"+o+"2 domain* refers to the domain of the second",o," axis and a",o,"position of 0.5 refers to the","point between the",p,"and the",x,"of the domain of the","second",o,"axis."].join(" ")}}},{}],473:[function(u,q,W){q.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},{}],474:[function(u,q,W){q.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],475:[function(u,q,W){q.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],476:[function(u,q,W){q.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],477:[function(u,q,W){q.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},{}],478:[function(u,q,W){q.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],479:[function(u,q,W){q.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],480:[function(u,q,W){W.xmlns="http://www.w3.org/2000/xmlns/",W.svg="http://www.w3.org/2000/svg",W.xlink="http://www.w3.org/1999/xlink",W.svgAttrs={xmlns:W.svg,"xmlns:xlink":W.xlink}},{}],481:[function(u,q,W){W.version=u("./version").version,u("native-promise-only"),u("../build/plotcss");for(var o=u("./registry"),p=W.register=o.register,x=u("./plot_api"),y=Object.keys(x),e=0;e<y.length;e++){var r=y[e];r.charAt(0)!=="_"&&(W[r]=x[r]),p({moduleType:"apiMethod",name:r,fn:x[r]})}p(u("./traces/scatter")),p([u("./components/legend"),u("./components/fx"),u("./components/annotations"),u("./components/annotations3d"),u("./components/shapes"),u("./components/images"),u("./components/updatemenus"),u("./components/sliders"),u("./components/rangeslider"),u("./components/rangeselector"),u("./components/grid"),u("./components/errorbars"),u("./components/colorscale"),u("./components/colorbar"),u("./components/modebar")]),p([u("./locale-en"),u("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(p(window.PlotlyLocales),delete window.PlotlyLocales),W.Icons=u("./fonts/ploticon");var t=u("./components/fx"),i=u("./plots/plots");W.Plots={resize:i.resize,graphJson:i.graphJson,sendDataToCloud:i.sendDataToCloud},W.Fx={hover:t.hover,unhover:t.unhover,loneHover:t.loneHover,loneUnhover:t.loneUnhover},W.Snapshot=u("./snapshot"),W.PlotSchema=u("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":357,"./components/annotations3d":362,"./components/colorbar":372,"./components/colorscale":378,"./components/errorbars":394,"./components/fx":406,"./components/grid":410,"./components/images":415,"./components/legend":423,"./components/modebar":429,"./components/rangeselector":437,"./components/rangeslider":444,"./components/shapes":458,"./components/sliders":463,"./components/updatemenus":469,"./fonts/ploticon":482,"./locale-en":534,"./locale-en-us":533,"./plot_api":538,"./plot_api/plot_schema":542,"./plots/plots":619,"./registry":638,"./snapshot":643,"./traces/scatter":938,"./version":1119,"native-promise-only":245}],482:[function(u,q,W){q.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],483:[function(u,q,W){W.isLeftAnchor=function(o){return o.xanchor==="left"||o.xanchor==="auto"&&o.x<=1/3},W.isCenterAnchor=function(o){return o.xanchor==="center"||o.xanchor==="auto"&&o.x>1/3&&o.x<2/3},W.isRightAnchor=function(o){return o.xanchor==="right"||o.xanchor==="auto"&&o.x>=2/3},W.isTopAnchor=function(o){return o.yanchor==="top"||o.yanchor==="auto"&&o.y>=2/3},W.isMiddleAnchor=function(o){return o.yanchor==="middle"||o.yanchor==="auto"&&o.y>1/3&&o.y<2/3},W.isBottomAnchor=function(o){return o.yanchor==="bottom"||o.yanchor==="auto"&&o.y<=1/3}},{}],484:[function(u,q,W){var o=u("./mod"),p=o.mod,x=o.modHalf,y=Math.PI,e=2*y;function r(h){return Math.abs(h[1]-h[0])>e-1e-14}function t(h,s){return x(s-h,e)}function i(h,s){if(r(s))return!0;var a,l;s[0]<s[1]?(a=s[0],l=s[1]):(a=s[1],l=s[0]),(a=p(a,e))>(l=p(l,e))&&(l+=e);var f=p(h,e),d=f+e;return f>=a&&f<=l||d>=a&&d<=l}function n(h,s,a,l,f,d,v){f=f||0,d=d||0;var m,c,b,g,w,_=r([a,l]);function T(I,P){return[I*Math.cos(P)+f,d-I*Math.sin(P)]}_?(m=0,c=y,b=e):a<l?(m=a,b=l):(m=l,b=a),h<s?(g=h,w=s):(g=s,w=h);var k,L=Math.abs(b-m)<=y?0:1;function M(I,P,S){return"A"+[I,I]+" "+[0,L,S]+" "+T(I,P)}return _?k=g===null?"M"+T(w,m)+M(w,c,0)+M(w,b,0)+"Z":"M"+T(g,m)+M(g,c,0)+M(g,b,0)+"ZM"+T(w,m)+M(w,c,1)+M(w,b,1)+"Z":g===null?(k="M"+T(w,m)+M(w,b,0),v&&(k+="L0,0Z")):k="M"+T(g,m)+"L"+T(w,m)+M(w,b,0)+"L"+T(g,b)+M(g,m,1)+"Z",k}q.exports={deg2rad:function(h){return h/180*y},rad2deg:function(h){return h/y*180},angleDelta:t,angleDist:function(h,s){return Math.abs(t(h,s))},isFullCircle:r,isAngleInsideSector:i,isPtInsideSector:function(h,s,a,l){return!!i(s,l)&&(a[0]<a[1]?(f=a[0],d=a[1]):(f=a[1],d=a[0]),h>=f&&h<=d);var f,d},pathArc:function(h,s,a,l,f){return n(null,h,s,a,l,f,0)},pathSector:function(h,s,a,l,f){return n(null,h,s,a,l,f,1)},pathAnnulus:function(h,s,a,l,f,d){return n(h,s,a,l,f,d,1)}}},{"./mod":510}],485:[function(u,q,W){var o=Array.isArray,p=ArrayBuffer,x=DataView;function y(t){return p.isView(t)&&!(t instanceof x)}function e(t){return o(t)||y(t)}function r(t,i,n){if(e(t)){if(e(t[0])){for(var h=n,s=0;s<t.length;s++)h=i(h,t[s].length);return h}return t.length}return 0}W.isTypedArray=y,W.isArrayOrTypedArray=e,W.isArray1D=function(t){return!e(t[0])},W.ensureArray=function(t,i){return o(t)||(t=[]),t.length=i,t},W.concat=function(){var t,i,n,h,s,a,l,f,d=[],v=!0,m=0;for(n=0;n<arguments.length;n++)(a=(h=arguments[n]).length)&&(i?d.push(h):(i=h,s=a),o(h)?t=!1:(v=!1,m?t!==h.constructor&&(t=!1):t=h.constructor),m+=a);if(!m)return[];if(!d.length)return i;if(v)return i.concat.apply(i,d);if(t){for((l=new t(m)).set(i),n=0;n<d.length;n++)h=d[n],l.set(h,s),s+=h.length;return l}for(l=new Array(m),f=0;f<i.length;f++)l[f]=i[f];for(n=0;n<d.length;n++){for(h=d[n],f=0;f<h.length;f++)l[s+f]=h[f];s+=f}return l},W.maxRowLength=function(t){return r(t,Math.max,0)},W.minRowLength=function(t){return r(t,Math.min,1/0)}},{}],486:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../constants/numerical").BADNUM,x=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;q.exports=function(y){return typeof y=="string"&&(y=y.replace(x,"")),o(y)?Number(y):p}},{"../constants/numerical":479,"fast-isnumeric":190}],487:[function(u,q,W){q.exports=function(o){var p=o._fullLayout;p._glcanvas&&p._glcanvas.size()&&p._glcanvas.each(function(x){x.regl&&x.regl.clear({color:!0,depth:!0})})}},{}],488:[function(u,q,W){q.exports=function(o){o._responsiveChartHandler&&(window.removeEventListener("resize",o._responsiveChartHandler),delete o._responsiveChartHandler)}},{}],489:[function(u,q,W){var o=u("fast-isnumeric"),p=u("tinycolor2"),x=u("../plots/attributes"),y=u("../components/colorscale/scales"),e=u("../components/color"),r=u("../constants/interactions").DESELECTDIM,t=u("./nested_property"),i=u("./regex").counter,n=u("./mod").modHalf,h=u("./array").isArrayOrTypedArray;function s(a,l){var f=W.valObjectMeta[l.valType];if(l.arrayOk&&h(a))return!0;if(f.validateFunction)return f.validateFunction(a,l);var d={},v=d,m={set:function(c){v=c}};return f.coerceFunction(a,m,d,l),v!==d}W.valObjectMeta={data_array:{coerceFunction:function(a,l,f){h(a)?l.set(a):f!==void 0&&l.set(f)}},enumerated:{coerceFunction:function(a,l,f,d){d.coerceNumber&&(a=+a),d.values.indexOf(a)===-1?l.set(f):l.set(a)},validateFunction:function(a,l){l.coerceNumber&&(a=+a);for(var f=l.values,d=0;d<f.length;d++){var v=String(f[d]);if(v.charAt(0)==="/"&&v.charAt(v.length-1)==="/"){if(new RegExp(v.substr(1,v.length-2)).test(a))return!0}else if(a===f[d])return!0}return!1}},boolean:{coerceFunction:function(a,l,f){a===!0||a===!1?l.set(a):l.set(f)}},number:{coerceFunction:function(a,l,f,d){!o(a)||d.min!==void 0&&a<d.min||d.max!==void 0&&a>d.max?l.set(f):l.set(+a)}},integer:{coerceFunction:function(a,l,f,d){a%1||!o(a)||d.min!==void 0&&a<d.min||d.max!==void 0&&a>d.max?l.set(f):l.set(+a)}},string:{coerceFunction:function(a,l,f,d){if(typeof a!="string"){var v=typeof a=="number";d.strict!==!0&&v?l.set(String(a)):l.set(f)}else d.noBlank&&!a?l.set(f):l.set(a)}},color:{coerceFunction:function(a,l,f){p(a).isValid()?l.set(a):l.set(f)}},colorlist:{coerceFunction:function(a,l,f){Array.isArray(a)&&a.length&&a.every(function(d){return p(d).isValid()})?l.set(a):l.set(f)}},colorscale:{coerceFunction:function(a,l,f){l.set(y.get(a,f))}},angle:{coerceFunction:function(a,l,f){a==="auto"?l.set("auto"):o(a)?l.set(n(+a,360)):l.set(f)}},subplotid:{coerceFunction:function(a,l,f,d){var v=d.regex||i(f);typeof a=="string"&&v.test(a)?l.set(a):l.set(f)},validateFunction:function(a,l){var f=l.dflt;return a===f||typeof a=="string"&&!!i(f).test(a)}},flaglist:{coerceFunction:function(a,l,f,d){if(typeof a=="string")if((d.extras||[]).indexOf(a)===-1){for(var v=a.split("+"),m=0;m<v.length;){var c=v[m];d.flags.indexOf(c)===-1||v.indexOf(c)<m?v.splice(m,1):m++}v.length?l.set(v.join("+")):l.set(f)}else l.set(a);else l.set(f)}},any:{coerceFunction:function(a,l,f){a===void 0?l.set(f):l.set(a)}},info_array:{coerceFunction:function(a,l,f,d){function v(E,D,F){var H,V={set:function(Q){H=Q}};return F===void 0&&(F=D.dflt),W.valObjectMeta[D.valType].coerceFunction(E,V,F,D),H}var m=d.dimensions===2||d.dimensions==="1-2"&&Array.isArray(a)&&Array.isArray(a[0]);if(Array.isArray(a)){var c,b,g,w,_,T,k=d.items,L=[],M=Array.isArray(k),I=M&&m&&Array.isArray(k[0]),P=m&&M&&!I,S=M&&!P?k.length:a.length;if(f=Array.isArray(f)?f:[],m)for(c=0;c<S;c++)for(L[c]=[],g=Array.isArray(a[c])?a[c]:[],_=P?k.length:M?k[c].length:g.length,b=0;b<_;b++)w=P?k[b]:M?k[c][b]:k,(T=v(g[b],w,(f[c]||[])[b]))!==void 0&&(L[c][b]=T);else for(c=0;c<S;c++)(T=v(a[c],M?k[c]:k,f[c]))!==void 0&&(L[c]=T);l.set(L)}else l.set(f)},validateFunction:function(a,l){if(!Array.isArray(a))return!1;var f=l.items,d=Array.isArray(f),v=l.dimensions===2;if(!l.freeLength&&a.length!==f.length)return!1;for(var m=0;m<a.length;m++)if(v){if(!Array.isArray(a[m])||!l.freeLength&&a[m].length!==f[m].length)return!1;for(var c=0;c<a[m].length;c++)if(!s(a[m][c],d?f[m][c]:f))return!1}else if(!s(a[m],d?f[m]:f))return!1;return!0}}},W.coerce=function(a,l,f,d,v){var m=t(f,d).get(),c=t(a,d),b=t(l,d),g=c.get(),w=l._template;if(g===void 0&&w&&(g=t(w,d).get(),w=0),v===void 0&&(v=m.dflt),m.arrayOk&&h(g))return b.set(g),g;var _=W.valObjectMeta[m.valType].coerceFunction;_(g,b,v,m);var T=b.get();return w&&T===v&&!s(g,m)&&(_(g=t(w,d).get(),b,v,m),T=b.get()),T},W.coerce2=function(a,l,f,d,v){var m=t(a,d),c=W.coerce(a,l,f,d,v),b=m.get();return b!=null&&c},W.coerceFont=function(a,l,f){var d={};return f=f||{},d.family=a(l+".family",f.family),d.size=a(l+".size",f.size),d.color=a(l+".color",f.color),d},W.coercePattern=function(a,l,f,d){if(a(l+".shape")){a(l+".solidity"),a(l+".size");var v=a(l+".fillmode")==="overlay";if(!d){var m=a(l+".bgcolor",v?f:void 0);a(l+".fgcolor",v?e.contrast(m):f)}a(l+".fgopacity",v?.5:1)}},W.coerceHoverinfo=function(a,l,f){var d,v=l._module.attributes,m=v.hoverinfo?v:x,c=m.hoverinfo;if(f._dataLength===1){var b=c.dflt==="all"?c.flags.slice():c.dflt.split("+");b.splice(b.indexOf("name"),1),d=b.join("+")}return W.coerce(a,l,m,"hoverinfo",d)},W.coerceSelectionMarkerOpacity=function(a,l){if(a.marker){var f,d,v=a.marker.opacity;v!==void 0&&(h(v)||a.selected||a.unselected||(f=v,d=r*v),l("selected.marker.opacity",f),l("unselected.marker.opacity",d))}},W.validate=s},{"../components/color":366,"../components/colorscale/scales":381,"../constants/interactions":478,"../plots/attributes":550,"./array":485,"./mod":510,"./nested_property":511,"./regex":520,"fast-isnumeric":190,tinycolor2:312}],490:[function(u,q,W){var o,p,x=u("d3-time-format").timeFormat,y=u("fast-isnumeric"),e=u("./loggers"),r=u("./mod").mod,t=u("../constants/numerical"),i=t.BADNUM,n=t.ONEDAY,h=t.ONEHOUR,s=t.ONEMIN,a=t.ONESEC,l=t.EPOCHJD,f=u("../registry"),d=u("d3-time-format").utcFormat,v=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,m=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,c=new Date().getFullYear()-70;function b(D){return D&&f.componentsRegistry.calendars&&typeof D=="string"&&D!=="gregorian"}function g(D,F){return String(D+Math.pow(10,F)).substr(1)}W.dateTick0=function(D,F){var H=function(Q,K){return b(Q)?K?f.getComponentMethod("calendars","CANONICAL_SUNDAY")[Q]:f.getComponentMethod("calendars","CANONICAL_TICK")[Q]:K?"2000-01-02":"2000-01-01"}(D,!!F);if(F<2)return H;var V=W.dateTime2ms(H,D);return V+=n*(F-1),W.ms2DateTime(V,0,D)},W.dfltRange=function(D){return b(D)?f.getComponentMethod("calendars","DFLTRANGE")[D]:["2000-01-01","2001-01-01"]},W.isJSDate=function(D){return typeof D=="object"&&D!==null&&typeof D.getTime=="function"},W.dateTime2ms=function(D,F){if(W.isJSDate(D)){var H=D.getTimezoneOffset()*s,V=(D.getUTCMinutes()-D.getMinutes())*s+(D.getUTCSeconds()-D.getSeconds())*a+(D.getUTCMilliseconds()-D.getMilliseconds());if(V){var Q=3*s;H=H-Q/2+r(V-H+Q/2,Q)}return(D=Number(D)-H)>=o&&D<=p?D:i}if(typeof D!="string"&&typeof D!="number")return i;D=String(D);var K=b(F),Z=D.charAt(0);!K||Z!=="G"&&Z!=="g"||(D=D.substr(1),F="");var $=K&&F.substr(0,7)==="chinese",re=D.match($?m:v);if(!re)return i;var R=re[1],N=re[3]||"1",U=Number(re[5]||1),te=Number(re[7]||0),j=Number(re[9]||0),Y=Number(re[11]||0);if(K){if(R.length===2)return i;var J;R=Number(R);try{var ee=f.getComponentMethod("calendars","getCal")(F);if($){var ne=N.charAt(N.length-1)==="i";N=parseInt(N,10),J=ee.newDate(R,ee.toMonthIndex(R,N,ne),U)}else J=ee.newDate(R,Number(N),U)}catch{return i}return J?(J.toJD()-l)*n+te*h+j*s+Y*a:i}R=R.length===2?(Number(R)+2e3-c)%100+c:Number(R),N-=1;var se=new Date(Date.UTC(2e3,N,U,te,j));return se.setUTCFullYear(R),se.getUTCMonth()!==N||se.getUTCDate()!==U?i:se.getTime()+Y*a},o=W.MIN_MS=W.dateTime2ms("-9999"),p=W.MAX_MS=W.dateTime2ms("9999-12-31 23:59:59.9999"),W.isDateTime=function(D,F){return W.dateTime2ms(D,F)!==i};var w=90*n,_=3*h,T=5*s;function k(D,F,H,V,Q){if((F||H||V||Q)&&(D+=" "+g(F,2)+":"+g(H,2),(V||Q)&&(D+=":"+g(V,2),Q))){for(var K=4;Q%10==0;)K-=1,Q/=10;D+="."+g(Q,K)}return D}W.ms2DateTime=function(D,F,H){if(typeof D!="number"||!(D>=o&&D<=p))return i;F||(F=0);var V,Q,K,Z,$,re,R=Math.floor(10*r(D+.05,1)),N=Math.round(D-R/10);if(b(H)){var U=Math.floor(N/n)+l,te=Math.floor(r(D,n));try{V=f.getComponentMethod("calendars","getCal")(H).fromJD(U).formatDate("yyyy-mm-dd")}catch{V=d("G%Y-%m-%d")(new Date(N))}if(V.charAt(0)==="-")for(;V.length<11;)V="-0"+V.substr(1);else for(;V.length<10;)V="0"+V;Q=F<w?Math.floor(te/h):0,K=F<w?Math.floor(te%h/s):0,Z=F<_?Math.floor(te%s/a):0,$=F<T?te%a*10+R:0}else re=new Date(N),V=d("%Y-%m-%d")(re),Q=F<w?re.getUTCHours():0,K=F<w?re.getUTCMinutes():0,Z=F<_?re.getUTCSeconds():0,$=F<T?10*re.getUTCMilliseconds()+R:0;return k(V,Q,K,Z,$)},W.ms2DateTimeLocal=function(D){if(!(D>=o+n&&D<=p-n))return i;var F=Math.floor(10*r(D+.05,1)),H=new Date(Math.round(D-F/10));return k(x("%Y-%m-%d")(H),H.getHours(),H.getMinutes(),H.getSeconds(),10*H.getUTCMilliseconds()+F)},W.cleanDate=function(D,F,H){if(D===i)return F;if(W.isJSDate(D)||typeof D=="number"&&isFinite(D)){if(b(H))return e.error("JS Dates and milliseconds are incompatible with world calendars",D),F;if(!(D=W.ms2DateTimeLocal(+D))&&F!==void 0)return F}else if(!W.isDateTime(D,H))return e.error("unrecognized date",D),F;return D};var L=/%\d?f/g,M=/%h/g,I={1:"1",2:"1",3:"2",4:"2"};function P(D,F,H,V){D=D.replace(L,function(K){var Z=Math.min(+K.charAt(1)||6,6);return(F/1e3%1+2).toFixed(Z).substr(2).replace(/0+$/,"")||"0"});var Q=new Date(Math.floor(F+.05));if(D=D.replace(M,function(){return I[H("%q")(Q)]}),b(V))try{D=f.getComponentMethod("calendars","worldCalFmt")(D,F,V)}catch{return"Invalid"}return H(D)(Q)}var S=[59,59.9,59.99,59.999,59.9999];W.formatDate=function(D,F,H,V,Q,K){if(Q=b(Q)&&Q,!F)if(H==="y")F=K.year;else if(H==="m")F=K.month;else{if(H!=="d")return function(Z,$){var re=r(Z+.05,n),R=g(Math.floor(re/h),2)+":"+g(r(Math.floor(re/s),60),2);if($!=="M"){y($)||($=0);var N=(100+Math.min(r(Z/a,60),S[$])).toFixed($).substr(1);$>0&&(N=N.replace(/0+$/,"").replace(/[\.]$/,"")),R+=":"+N}return R}(D,H)+`
`+P(K.dayMonthYear,D,V,Q);F=K.dayMonth+`
`+K.year}return P(F,D,V,Q)};var E=3*n;W.incrementMonth=function(D,F,H){H=b(H)&&H;var V=r(D,n);if(D=Math.round(D-V),H)try{var Q=Math.round(D/n)+l,K=f.getComponentMethod("calendars","getCal")(H),Z=K.fromJD(Q);return F%12?K.add(Z,F,"m"):K.add(Z,F/12,"y"),(Z.toJD()-l)*n+V}catch{e.error("invalid ms "+D+" in calendar "+H)}var $=new Date(D+E);return $.setUTCMonth($.getUTCMonth()+F)+V-E},W.findExactDates=function(D,F){for(var H,V,Q=0,K=0,Z=0,$=0,re=b(F)&&f.getComponentMethod("calendars","getCal")(F),R=0;R<D.length;R++)if(V=D[R],y(V)){if(!(V%n))if(re)try{(H=re.fromJD(V/n+l)).day()===1?H.month()===1?Q++:K++:Z++}catch{}else(H=new Date(V)).getUTCDate()===1?H.getUTCMonth()===0?Q++:K++:Z++}else $++;Z+=K+=Q;var N=D.length-$;return{exactYears:Q/N,exactMonths:K/N,exactDays:Z/N}}},{"../constants/numerical":479,"../registry":638,"./loggers":507,"./mod":510,"d3-time-format":120,"fast-isnumeric":190}],491:[function(u,q,W){var o=u("@plotly/d3"),p=u("./loggers"),x=u("./matrix"),y=u("gl-mat4");function e(h){var s=h&&h.parentNode;s&&s.removeChild(h)}function r(h,s,a){var l="plotly.js-style-"+h,f=document.getElementById(l);f||((f=document.createElement("style")).setAttribute("id",l),f.appendChild(document.createTextNode("")),document.head.appendChild(f));var d=f.sheet;d.insertRule?d.insertRule(s+"{"+a+"}",0):d.addRule?d.addRule(s,a,0):p.warn("addStyleRule failed")}function t(h){var s=window.getComputedStyle(h,null),a=s.getPropertyValue("-webkit-transform")||s.getPropertyValue("-moz-transform")||s.getPropertyValue("-ms-transform")||s.getPropertyValue("-o-transform")||s.getPropertyValue("transform");return a==="none"?null:a.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(l){return+l})}function i(h){for(var s=[];n(h);)s.push(h),h=h.parentNode;return s}function n(h){return h&&(h instanceof Element||h instanceof HTMLElement)}q.exports={getGraphDiv:function(h){var s;if(typeof h=="string"){if((s=document.getElementById(h))===null)throw new Error("No DOM element with id '"+h+"' exists on the page.");return s}if(h==null)throw new Error("DOM element provided is null or undefined");return h},isPlotDiv:function(h){var s=o.select(h);return s.node()instanceof HTMLElement&&s.size()&&s.classed("js-plotly-plot")},removeElement:e,addStyleRule:function(h,s){r("global",h,s)},addRelatedStyleRule:r,deleteRelatedStyleRule:function(h){var s="plotly.js-style-"+h,a=document.getElementById(s);a&&e(a)},getFullTransformMatrix:function(h){var s=i(h),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return s.forEach(function(l){var f=t(l);if(f){var d=x.convertCssMatrix(f);a=y.multiply(a,a,d)}}),a},getElementTransformMatrix:t,getElementAndAncestors:i,equalDomRects:function(h,s){return h&&s&&h.x===s.x&&h.y===s.y&&h.top===s.top&&h.left===s.left&&h.right===s.right&&h.bottom===s.bottom}}},{"./loggers":507,"./matrix":509,"@plotly/d3":58,"gl-mat4":210}],492:[function(u,q,W){var o=u("events").EventEmitter,p={init:function(x){if(x._ev instanceof o)return x;var y=new o,e=new o;return x._ev=y,x._internalEv=e,x.on=y.on.bind(y),x.once=y.once.bind(y),x.removeListener=y.removeListener.bind(y),x.removeAllListeners=y.removeAllListeners.bind(y),x._internalOn=e.on.bind(e),x._internalOnce=e.once.bind(e),x._removeInternalListener=e.removeListener.bind(e),x._removeAllInternalListeners=e.removeAllListeners.bind(e),x.emit=function(r,t){typeof jQuery!="undefined"&&jQuery(x).trigger(r,t),y.emit(r,t),e.emit(r,t)},x},triggerHandler:function(x,y,e){var r,t;typeof jQuery!="undefined"&&(r=jQuery(x).triggerHandler(y,e));var i=x._ev;if(!i)return r;var n,h=i._events[y];if(!h)return r;function s(a){return a.listener?(i.removeListener(y,a.listener),a.fired?void 0:(a.fired=!0,a.listener.apply(i,[e]))):a.apply(i,[e])}for(h=Array.isArray(h)?h:[h],n=0;n<h.length-1;n++)s(h[n]);return t=s(h[n]),r!==void 0?r:t},purge:function(x){return delete x._ev,delete x.on,delete x.once,delete x.removeListener,delete x.removeAllListeners,delete x.emit,delete x._ev,delete x._internalEv,delete x._internalOn,delete x._internalOnce,delete x._removeInternalListener,delete x._removeAllInternalListeners,x}};q.exports=p},{events:84}],493:[function(u,q,W){var o=u("./is_plain_object.js"),p=Array.isArray;function x(y,e,r,t){var i,n,h,s,a,l,f=y[0],d=y.length;if(d===2&&p(f)&&p(y[1])&&f.length===0){if(function(m,c){var b,g;for(b=0;b<m.length;b++){if((g=m[b])!==null&&typeof g=="object")return!1;g!==void 0&&(c[b]=g)}return!0}(y[1],f))return f;f.splice(0,f.length)}for(var v=1;v<d;v++)for(n in i=y[v])h=f[n],s=i[n],t&&p(s)?f[n]=s:e&&s&&(o(s)||(a=p(s)))?(a?(a=!1,l=h&&p(h)?h:[]):l=h&&o(h)?h:{},f[n]=x([l,s],e,r,t)):(s!==void 0||r)&&(f[n]=s);return f}W.extendFlat=function(){return x(arguments,!1,!1,!1)},W.extendDeep=function(){return x(arguments,!0,!1,!1)},W.extendDeepAll=function(){return x(arguments,!0,!0,!1)},W.extendDeepNoArrays=function(){return x(arguments,!0,!1,!0)}},{"./is_plain_object.js":504}],494:[function(u,q,W){q.exports=function(o){for(var p={},x=[],y=0,e=0;e<o.length;e++){var r=o[e];p[r]!==1&&(p[r]=1,x[y++]=r)}return x}},{}],495:[function(u,q,W){function o(x){return x.visible===!0}function p(x){var y=x[0].trace;return y.visible===!0&&y._length!==0}q.exports=function(x){for(var y,e=(y=x,Array.isArray(y)&&Array.isArray(y[0])&&y[0][0]&&y[0][0].trace?p:o),r=[],t=0;t<x.length;t++){var i=x[t];e(i)&&r.push(i)}return r}},{}],496:[function(u,q,W){var o=u("@plotly/d3"),p=u("country-regex"),x=u("@turf/area"),y=u("@turf/centroid"),e=u("@turf/bbox"),r=u("./identity"),t=u("./loggers"),i=u("./is_plain_object"),n=u("./nested_property"),h=u("./polygon"),s=Object.keys(p),a={"ISO-3":r,"USA-states":r,"country names":function(f){for(var d=0;d<s.length;d++){var v=s[d];if(new RegExp(p[v]).test(f.trim().toLowerCase()))return v}return t.log("Unrecognized country name: "+f+"."),!1}};function l(f){var d=f.geojson,v=window.PlotlyGeoAssets||{},m=typeof d=="string"?v[d]:d;return i(m)?m:(t.error("Oops ... something went wrong when fetching "+d),!1)}q.exports={locationToFeature:function(f,d,v){if(!d||typeof d!="string")return!1;var m,c,b,g=a[f](d);if(g){if(f==="USA-states")for(m=[],b=0;b<v.length;b++)(c=v[b]).properties&&c.properties.gu&&c.properties.gu==="USA"&&m.push(c);else m=v;for(b=0;b<m.length;b++)if((c=m[b]).id===g)return c;t.log(["Location with id",g,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(f){var d,v,m,c,b=f.geometry,g=b.coordinates,w=f.id,_=[];function T(k){for(var L=0;L<k.length-1;L++)if(k[L][0]>0&&k[L+1][0]<0)return L;return null}switch(d=w==="RUS"||w==="FJI"?function(k){var L;if(T(k)===null)L=k;else for(L=new Array(k.length),c=0;c<k.length;c++)L[c]=[k[c][0]<0?k[c][0]+360:k[c][0],k[c][1]];_.push(h.tester(L))}:w==="ATA"?function(k){var L=T(k);if(L===null)return _.push(h.tester(k));var M=new Array(k.length+1),I=0;for(c=0;c<k.length;c++)c>L?M[I++]=[k[c][0]+360,k[c][1]]:c===L?(M[I++]=k[c],M[I++]=[k[c][0],-90]):M[I++]=k[c];var P=h.tester(M);P.pts.pop(),_.push(P)}:function(k){_.push(h.tester(k))},b.type){case"MultiPolygon":for(v=0;v<g.length;v++)for(m=0;m<g[v].length;m++)d(g[v][m]);break;case"Polygon":for(v=0;v<g.length;v++)d(g[v])}return _},getTraceGeojson:l,extractTraceFeature:function(f){var d=f[0].trace,v=l(d);if(!v)return!1;var m,c={},b=[];for(m=0;m<d._length;m++){var g=f[m];(g.loc||g.loc===0)&&(c[g.loc]=g)}function w(k){var L=n(k,d.featureidkey||"id").get(),M=c[L];if(M){var I=k.geometry;if(I.type==="Polygon"||I.type==="MultiPolygon"){var P={type:"Feature",id:L,geometry:I,properties:{}};P.properties.ct=function(S){var E,D=S.geometry;if(D.type==="MultiPolygon")for(var F=D.coordinates,H=0,V=0;V<F.length;V++){var Q={type:"Polygon",coordinates:F[V]},K=x.default(Q);K>H&&(H=K,E=Q)}else E=D;return y.default(E).geometry.coordinates}(P),M.fIn=k,M.fOut=P,b.push(P)}else t.log(["Location",M.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete c[L]}switch(v.type){case"FeatureCollection":var _=v.features;for(m=0;m<_.length;m++)w(_[m]);break;case"Feature":w(v);break;default:return t.warn(["Invalid GeoJSON type",(v.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var T in c)t.log(["Location *"+T+"*","does not have a matching feature with id-key","*"+d.featureidkey+"*."].join(" "));return b},fetchTraceGeoData:function(f){var d=window.PlotlyGeoAssets||{},v=[];function m(w){return new Promise(function(_,T){o.json(w,function(k,L){if(k){delete d[w];var M=k.status===404?'GeoJSON at URL "'+w+'" does not exist.':"Unexpected error while fetching from "+w;return T(new Error(M))}return d[w]=L,_(L)})})}function c(w){return new Promise(function(_,T){var k=0,L=setInterval(function(){return d[w]&&d[w]!=="pending"?(clearInterval(L),_(d[w])):k>100?(clearInterval(L),T("Unexpected error while fetching from "+w)):void k++},50)})}for(var b=0;b<f.length;b++){var g=f[b][0].trace.geojson;typeof g=="string"&&(d[g]?d[g]==="pending"&&v.push(c(g)):(d[g]="pending",v.push(m(g))))}return v},computeBbox:function(f){return e.default(f)}}},{"./identity":501,"./is_plain_object":504,"./loggers":507,"./nested_property":511,"./polygon":515,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],497:[function(u,q,W){var o=u("../constants/numerical").BADNUM;W.calcTraceToLineCoords=function(p){for(var x=p[0].trace.connectgaps,y=[],e=[],r=0;r<p.length;r++){var t=p[r].lonlat;t[0]!==o?e.push(t):!x&&e.length>0&&(y.push(e),e=[])}return e.length>0&&y.push(e),y},W.makeLine=function(p){return p.length===1?{type:"LineString",coordinates:p[0]}:{type:"MultiLineString",coordinates:p}},W.makePolygon=function(p){if(p.length===1)return{type:"Polygon",coordinates:p};for(var x=new Array(p.length),y=0;y<p.length;y++)x[y]=[p[y]];return{type:"MultiPolygon",coordinates:x}},W.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":479}],498:[function(u,q,W){var o,p,x,y=u("./mod").mod;function e(t,i,n,h,s,a,l,f){var d=n-t,v=s-t,m=l-s,c=h-i,b=a-i,g=f-a,w=d*g-m*c;if(w===0)return null;var _=(v*g-m*b)/w,T=(v*c-d*b)/w;return T<0||T>1||_<0||_>1?null:{x:t+d*_,y:i+c*_}}function r(t,i,n,h,s){var a=h*t+s*i;if(a<0)return h*h+s*s;if(a>n){var l=h-t,f=s-i;return l*l+f*f}var d=h*i-s*t;return d*d/n}W.segmentsIntersect=e,W.segmentDistance=function(t,i,n,h,s,a,l,f){if(e(t,i,n,h,s,a,l,f))return 0;var d=n-t,v=h-i,m=l-s,c=f-a,b=d*d+v*v,g=m*m+c*c,w=Math.min(r(d,v,b,s-t,a-i),r(d,v,b,l-t,f-i),r(m,c,g,t-s,i-a),r(m,c,g,n-s,h-a));return Math.sqrt(w)},W.getTextLocation=function(t,i,n,h){if(t===p&&h===x||(o={},p=t,x=h),o[n])return o[n];var s=t.getPointAtLength(y(n-h/2,i)),a=t.getPointAtLength(y(n+h/2,i)),l=Math.atan((a.y-s.y)/(a.x-s.x)),f=t.getPointAtLength(y(n,i)),d={x:(4*f.x+s.x+a.x)/6,y:(4*f.y+s.y+a.y)/6,theta:l};return o[n]=d,d},W.clearLocationCache=function(){p=null},W.getVisibleSegment=function(t,i,n){var h,s,a=i.left,l=i.right,f=i.top,d=i.bottom,v=0,m=t.getTotalLength(),c=m;function b(w){var _=t.getPointAtLength(w);w===0?h=_:w===m&&(s=_);var T=_.x<a?a-_.x:_.x>l?_.x-l:0,k=_.y<f?f-_.y:_.y>d?_.y-d:0;return Math.sqrt(T*T+k*k)}for(var g=b(v);g;){if((v+=g+n)>c)return;g=b(v)}for(g=b(c);g;){if(v>(c-=g+n))return;g=b(c)}return{min:v,max:c,len:c-v,total:m,isClosed:v===0&&c===m&&Math.abs(h.x-s.x)<.1&&Math.abs(h.y-s.y)<.1}},W.findPointOnPath=function(t,i,n,h){for(var s,a,l,f=(h=h||{}).pathLength||t.getTotalLength(),d=h.tolerance||.001,v=h.iterationLimit||30,m=t.getPointAtLength(0)[n]>t.getPointAtLength(f)[n]?-1:1,c=0,b=0,g=f;c<v;){if(s=(b+g)/2,l=(a=t.getPointAtLength(s))[n]-i,Math.abs(l)<d)return a;m*l>0?g=s:b=s,c++}return a}},{"./mod":510}],499:[function(u,q,W){var o=u("fast-isnumeric"),p=u("tinycolor2"),x=u("color-normalize"),y=u("../components/colorscale"),e=u("../components/color/attributes").defaultLine,r=u("./array").isArrayOrTypedArray,t=x(e);function i(s,a){var l=s;return l[3]*=a,l}function n(s){if(o(s))return t;var a=x(s);return a.length?a:t}function h(s){return o(s)?s:1}q.exports={formatColor:function(s,a,l){var f,d,v,m,c,b=s.color,g=r(b),w=r(a),_=y.extractOpts(s),T=[];if(f=_.colorscale!==void 0?y.makeColorScaleFuncFromTrace(s):n,d=g?function(L,M){return L[M]===void 0?t:x(f(L[M]))}:n,v=w?function(L,M){return L[M]===void 0?1:h(L[M])}:h,g||w)for(var k=0;k<l;k++)m=d(b,k),c=v(a,k),T[k]=i(m,c);else T=i(x(b),a);return T},parseColorScale:function(s){var a=y.extractOpts(s),l=a.colorscale;return a.reversescale&&(l=y.flipScale(a.colorscale)),l.map(function(f){var d=f[0],v=p(f[1]).toRgb();return{index:d,rgb:[v.r,v.g,v.b,v.a]}})}}},{"../components/color/attributes":365,"../components/colorscale":378,"./array":485,"color-normalize":89,"fast-isnumeric":190,tinycolor2:312}],500:[function(u,q,W){var o=u("./identity");function p(x){return[x]}q.exports={keyFun:function(x){return x.key},repeat:p,descend:o,wrap:p,unwrap:function(x){return x[0]}}},{"./identity":501}],501:[function(u,q,W){q.exports=function(o){return o}},{}],502:[function(u,q,W){q.exports=function(o,p){if(!p)return o;var x=1/Math.abs(p),y=x>1?(x*o+x*p)/x:o+p,e=String(y).length;if(e>16){var r=String(p).length;if(e>=String(o).length+r){var t=parseFloat(y).toPrecision(12);t.indexOf("e+")===-1&&(y=+t)}}return y}},{}],503:[function(u,q,W){var o=u("@plotly/d3"),p=u("d3-time-format").utcFormat,x=u("d3-format").format,y=u("fast-isnumeric"),e=u("../constants/numerical"),r=e.FP_SAFE,t=-r,i=e.BADNUM,n=q.exports={};n.adjustFormat=function(R){return!R||/^\d[.]\df/.test(R)||/[.]\d%/.test(R)?R:R==="0.f"?"~f":/^\d%/.test(R)?"~%":/^\ds/.test(R)?"~s":!/^[~,.0$]/.test(R)&&/[&fps]/.test(R)?"~"+R:R};var h={};n.warnBadFormat=function(R){var N=String(R);h[N]||(h[N]=1,n.warn('encountered bad format: "'+N+'"'))},n.noFormat=function(R){return String(R)},n.numberFormat=function(R){var N;try{N=x(n.adjustFormat(R))}catch{return n.warnBadFormat(R),n.noFormat}return N},n.nestedProperty=u("./nested_property"),n.keyedContainer=u("./keyed_container"),n.relativeAttr=u("./relative_attr"),n.isPlainObject=u("./is_plain_object"),n.toLogRange=u("./to_log_range"),n.relinkPrivateKeys=u("./relink_private");var s=u("./array");n.isTypedArray=s.isTypedArray,n.isArrayOrTypedArray=s.isArrayOrTypedArray,n.isArray1D=s.isArray1D,n.ensureArray=s.ensureArray,n.concat=s.concat,n.maxRowLength=s.maxRowLength,n.minRowLength=s.minRowLength;var a=u("./mod");n.mod=a.mod,n.modHalf=a.modHalf;var l=u("./coerce");n.valObjectMeta=l.valObjectMeta,n.coerce=l.coerce,n.coerce2=l.coerce2,n.coerceFont=l.coerceFont,n.coercePattern=l.coercePattern,n.coerceHoverinfo=l.coerceHoverinfo,n.coerceSelectionMarkerOpacity=l.coerceSelectionMarkerOpacity,n.validate=l.validate;var f=u("./dates");n.dateTime2ms=f.dateTime2ms,n.isDateTime=f.isDateTime,n.ms2DateTime=f.ms2DateTime,n.ms2DateTimeLocal=f.ms2DateTimeLocal,n.cleanDate=f.cleanDate,n.isJSDate=f.isJSDate,n.formatDate=f.formatDate,n.incrementMonth=f.incrementMonth,n.dateTick0=f.dateTick0,n.dfltRange=f.dfltRange,n.findExactDates=f.findExactDates,n.MIN_MS=f.MIN_MS,n.MAX_MS=f.MAX_MS;var d=u("./search");n.findBin=d.findBin,n.sorterAsc=d.sorterAsc,n.sorterDes=d.sorterDes,n.distinctVals=d.distinctVals,n.roundUp=d.roundUp,n.sort=d.sort,n.findIndexOfMin=d.findIndexOfMin,n.sortObjectKeys=u("./sort_object_keys");var v=u("./stats");n.aggNums=v.aggNums,n.len=v.len,n.mean=v.mean,n.median=v.median,n.midRange=v.midRange,n.variance=v.variance,n.stdev=v.stdev,n.interp=v.interp;var m=u("./matrix");n.init2dArray=m.init2dArray,n.transposeRagged=m.transposeRagged,n.dot=m.dot,n.translationMatrix=m.translationMatrix,n.rotationMatrix=m.rotationMatrix,n.rotationXYMatrix=m.rotationXYMatrix,n.apply3DTransform=m.apply3DTransform,n.apply2DTransform=m.apply2DTransform,n.apply2DTransform2=m.apply2DTransform2,n.convertCssMatrix=m.convertCssMatrix,n.inverseTransformMatrix=m.inverseTransformMatrix;var c=u("./angles");n.deg2rad=c.deg2rad,n.rad2deg=c.rad2deg,n.angleDelta=c.angleDelta,n.angleDist=c.angleDist,n.isFullCircle=c.isFullCircle,n.isAngleInsideSector=c.isAngleInsideSector,n.isPtInsideSector=c.isPtInsideSector,n.pathArc=c.pathArc,n.pathSector=c.pathSector,n.pathAnnulus=c.pathAnnulus;var b=u("./anchor_utils");n.isLeftAnchor=b.isLeftAnchor,n.isCenterAnchor=b.isCenterAnchor,n.isRightAnchor=b.isRightAnchor,n.isTopAnchor=b.isTopAnchor,n.isMiddleAnchor=b.isMiddleAnchor,n.isBottomAnchor=b.isBottomAnchor;var g=u("./geometry2d");n.segmentsIntersect=g.segmentsIntersect,n.segmentDistance=g.segmentDistance,n.getTextLocation=g.getTextLocation,n.clearLocationCache=g.clearLocationCache,n.getVisibleSegment=g.getVisibleSegment,n.findPointOnPath=g.findPointOnPath;var w=u("./extend");n.extendFlat=w.extendFlat,n.extendDeep=w.extendDeep,n.extendDeepAll=w.extendDeepAll,n.extendDeepNoArrays=w.extendDeepNoArrays;var _=u("./loggers");n.log=_.log,n.warn=_.warn,n.error=_.error;var T=u("./regex");n.counterRegex=T.counter;var k=u("./throttle");n.throttle=k.throttle,n.throttleDone=k.done,n.clearThrottle=k.clear;var L=u("./dom");function M(R){var N={};for(var U in R)for(var te=R[U],j=0;j<te.length;j++)N[te[j]]=+U;return N}n.getGraphDiv=L.getGraphDiv,n.isPlotDiv=L.isPlotDiv,n.removeElement=L.removeElement,n.addStyleRule=L.addStyleRule,n.addRelatedStyleRule=L.addRelatedStyleRule,n.deleteRelatedStyleRule=L.deleteRelatedStyleRule,n.getFullTransformMatrix=L.getFullTransformMatrix,n.getElementTransformMatrix=L.getElementTransformMatrix,n.getElementAndAncestors=L.getElementAndAncestors,n.equalDomRects=L.equalDomRects,n.clearResponsive=u("./clear_responsive"),n.preserveDrawingBuffer=u("./preserve_drawing_buffer"),n.makeTraceGroups=u("./make_trace_groups"),n._=u("./localize"),n.notifier=u("./notifier"),n.filterUnique=u("./filter_unique"),n.filterVisible=u("./filter_visible"),n.pushUnique=u("./push_unique"),n.increment=u("./increment"),n.cleanNumber=u("./clean_number"),n.ensureNumber=function(R){return y(R)?(R=Number(R))>r||R<t?i:R:i},n.isIndex=function(R,N){return!(N!==void 0&&R>=N)&&y(R)&&R>=0&&R%1==0},n.noop=u("./noop"),n.identity=u("./identity"),n.repeat=function(R,N){for(var U=new Array(N),te=0;te<N;te++)U[te]=R;return U},n.swapAttrs=function(R,N,U,te){U||(U="x"),te||(te="y");for(var j=0;j<N.length;j++){var Y=N[j],J=n.nestedProperty(R,Y.replace("?",U)),ee=n.nestedProperty(R,Y.replace("?",te)),ne=J.get();J.set(ee.get()),ee.set(ne)}},n.raiseToTop=function(R){R.parentNode.appendChild(R)},n.cancelTransition=function(R){return R.transition().duration(0)},n.constrain=function(R,N,U){return N>U?Math.max(U,Math.min(N,R)):Math.max(N,Math.min(U,R))},n.bBoxIntersect=function(R,N,U){return U=U||0,R.left<=N.right+U&&N.left<=R.right+U&&R.top<=N.bottom+U&&N.top<=R.bottom+U},n.simpleMap=function(R,N,U,te,j){for(var Y=R.length,J=new Array(Y),ee=0;ee<Y;ee++)J[ee]=N(R[ee],U,te,j);return J},n.randstr=function R(N,U,te,j){if(te||(te=16),U===void 0&&(U=24),U<=0)return"0";var Y,J,ee=Math.log(Math.pow(2,U))/Math.log(te),ne="";for(Y=2;ee===1/0;Y*=2)ee=Math.log(Math.pow(2,U/Y))/Math.log(te)*Y;var se=ee-Math.floor(ee);for(Y=0;Y<Math.floor(ee);Y++)ne=Math.floor(Math.random()*te).toString(te)+ne;se&&(J=Math.pow(te,se),ne=Math.floor(Math.random()*J).toString(te)+ne);var oe=parseInt(ne,te);return N&&N[ne]||oe!==1/0&&oe>=Math.pow(2,U)?j>10?(n.warn("randstr failed uniqueness"),ne):R(N,U,te,(j||0)+1):ne},n.OptionControl=function(R,N){R||(R={}),N||(N="opt");var U={optionList:[],_newoption:function(te){te[N]=R,U[te.name]=te,U.optionList.push(te)}};return U["_"+N]=R,U},n.smooth=function(R,N){if((N=Math.round(N)||0)<2)return R;var U,te,j,Y,J=R.length,ee=2*J,ne=2*N-1,se=new Array(ne),oe=new Array(J);for(U=0;U<ne;U++)se[U]=(1-Math.cos(Math.PI*(U+1)/N))/(2*N);for(U=0;U<J;U++){for(Y=0,te=0;te<ne;te++)(j=U+te+1-N)<-J?j-=ee*Math.round(j/ee):j>=ee&&(j-=ee*Math.floor(j/ee)),j<0?j=-1-j:j>=J&&(j=ee-1-j),Y+=R[j]*se[te];oe[U]=Y}return oe},n.syncOrAsync=function(R,N,U){var te;function j(){return n.syncOrAsync(R,N,U)}for(;R.length;)if((te=(0,R.splice(0,1)[0])(N))&&te.then)return te.then(j);return U&&U(N)},n.stripTrailingSlash=function(R){return R.substr(-1)==="/"?R.substr(0,R.length-1):R},n.noneOrAll=function(R,N,U){if(R){var te,j=!1,Y=!0;for(te=0;te<U.length;te++)R[U[te]]!=null?j=!0:Y=!1;if(j&&!Y)for(te=0;te<U.length;te++)R[U[te]]=N[U[te]]}},n.mergeArray=function(R,N,U,te){var j=typeof te=="function";if(n.isArrayOrTypedArray(R))for(var Y=Math.min(R.length,N.length),J=0;J<Y;J++){var ee=R[J];N[J][U]=j?te(ee):ee}},n.mergeArrayCastPositive=function(R,N,U){return n.mergeArray(R,N,U,function(te){var j=+te;return isFinite(j)&&j>0?j:0})},n.fillArray=function(R,N,U,te){if(te=te||n.identity,n.isArrayOrTypedArray(R))for(var j=0;j<N.length;j++)N[j][U]=te(R[j])},n.castOption=function(R,N,U,te){te=te||n.identity;var j=n.nestedProperty(R,U).get();return n.isArrayOrTypedArray(j)?Array.isArray(N)&&n.isArrayOrTypedArray(j[N[0]])?te(j[N[0]][N[1]]):te(j[N]):j},n.extractOption=function(R,N,U,te){if(U in R)return R[U];var j=n.nestedProperty(N,te).get();return Array.isArray(j)?void 0:j},n.tagSelected=function(R,N,U){var te,j,Y=N.selectedpoints,J=N._indexToPoints;J&&(te=M(J));for(var ee=0;ee<Y.length;ee++){var ne=Y[ee];if(n.isIndex(ne)||n.isArrayOrTypedArray(ne)&&n.isIndex(ne[0])&&n.isIndex(ne[1])){var se=te?te[ne]:ne,oe=U?U[se]:se;(j=oe)!==void 0&&j<R.length&&(R[oe].selected=1)}}},n.selIndices2selPoints=function(R){var N=R.selectedpoints,U=R._indexToPoints;if(U){for(var te=M(U),j=[],Y=0;Y<N.length;Y++){var J=N[Y];if(n.isIndex(J)){var ee=te[J];n.isIndex(ee)&&j.push(ee)}}return j}return N},n.getTargetArray=function(R,N){var U=N.target;if(typeof U=="string"&&U){var te=n.nestedProperty(R,U).get();return!!Array.isArray(te)&&te}return!!Array.isArray(U)&&U},n.minExtend=function(R,N){var U={};typeof N!="object"&&(N={});var te,j,Y,J=Object.keys(R);for(te=0;te<J.length;te++)Y=R[j=J[te]],j.charAt(0)!=="_"&&typeof Y!="function"&&(j==="module"?U[j]=Y:Array.isArray(Y)?U[j]=j==="colorscale"?Y.slice():Y.slice(0,3):n.isTypedArray(Y)?U[j]=Y.subarray(0,3):U[j]=Y&&typeof Y=="object"?n.minExtend(R[j],N[j]):Y);for(J=Object.keys(N),te=0;te<J.length;te++)typeof(Y=N[j=J[te]])=="object"&&j in U&&typeof U[j]=="object"||(U[j]=Y);return U},n.titleCase=function(R){return R.charAt(0).toUpperCase()+R.substr(1)},n.containsAny=function(R,N){for(var U=0;U<N.length;U++)if(R.indexOf(N[U])!==-1)return!0;return!1},n.isIE=function(){return window.navigator.msSaveBlob!==void 0};var I=/Version\/[\d\.]+.*Safari/;n.isSafari=function(){return I.test(window.navigator.userAgent)};var P=/iPad|iPhone|iPod/;n.isIOS=function(){return P.test(window.navigator.userAgent)};var S=/Firefox\/(\d+)\.\d+/;n.getFirefoxVersion=function(){var R=S.exec(window.navigator.userAgent);if(R&&R.length===2){var N=parseInt(R[1]);if(!isNaN(N))return N}return null},n.isD3Selection=function(R){return R instanceof o.selection},n.ensureSingle=function(R,N,U,te){var j=R.select(N+(U?"."+U:""));if(j.size())return j;var Y=R.append(N);return U&&Y.classed(U,!0),te&&Y.call(te),Y},n.ensureSingleById=function(R,N,U,te){var j=R.select(N+"#"+U);if(j.size())return j;var Y=R.append(N).attr("id",U);return te&&Y.call(te),Y},n.objectFromPath=function(R,N){for(var U,te=R.split("."),j=U={},Y=0;Y<te.length;Y++){var J=te[Y],ee=null,ne=te[Y].match(/(.*)\[([0-9]+)\]/);ne?(J=ne[1],ee=ne[2],U=U[J]=[],Y===te.length-1?U[ee]=N:U[ee]={},U=U[ee]):(Y===te.length-1?U[J]=N:U[J]={},U=U[J])}return j};var E=/^([^\[\.]+)\.(.+)?/,D=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;n.expandObjectPaths=function(R){var N,U,te,j,Y,J,ee;if(typeof R=="object"&&!Array.isArray(R))for(U in R)R.hasOwnProperty(U)&&((N=U.match(E))?(j=R[U],te=N[1],delete R[U],R[te]=n.extendDeepNoArrays(R[te]||{},n.objectFromPath(U,n.expandObjectPaths(j))[te])):(N=U.match(D))?(j=R[U],te=N[1],Y=parseInt(N[2]),delete R[U],R[te]=R[te]||[],N[3]==="."?(ee=N[4],J=R[te][Y]=R[te][Y]||{},n.extendDeepNoArrays(J,n.objectFromPath(ee,n.expandObjectPaths(j)))):R[te][Y]=n.expandObjectPaths(j)):R[U]=n.expandObjectPaths(R[U]));return R},n.numSeparate=function(R,N,U){if(U||(U=!1),typeof N!="string"||N.length===0)throw new Error("Separator string required for formatting!");typeof R=="number"&&(R=String(R));var te=/(\d+)(\d{3})/,j=N.charAt(0),Y=N.charAt(1),J=R.split("."),ee=J[0],ne=J.length>1?j+J[1]:"";if(Y&&(J.length>1||ee.length>4||U))for(;te.test(ee);)ee=ee.replace(te,"$1"+Y+"$2");return ee+ne},n.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var F=/^\w*$/;n.templateString=function(R,N){var U={};return R.replace(n.TEMPLATE_STRING_REGEX,function(te,j){var Y;return F.test(j)?Y=N[j]:(U[j]=U[j]||n.nestedProperty(N,j).get,Y=U[j]()),n.isValidTextValue(Y)?Y:""})};var H={max:10,count:0,name:"hovertemplate"};n.hovertemplateString=function(){return K.apply(H,arguments)};var V={max:10,count:0,name:"texttemplate"};n.texttemplateString=function(){return K.apply(V,arguments)};var Q=/^[:|\|]/;function K(R,N,U){var te=this,j=arguments;N||(N={});var Y={};return R.replace(n.TEMPLATE_STRING_REGEX,function(J,ee,ne){var se,oe,he,le=ee==="_xother"||ee==="_yother",de=ee==="_xother_"||ee==="_yother_",xe=ee==="xother_"||ee==="yother_",we=ee==="xother"||ee==="yother"||le||xe||de,be=ee;if((le||de)&&(be=be.substring(1)),(xe||de)&&(be=be.substring(0,be.length-1)),we){if((se=N[be])===void 0)return""}else for(he=3;he<j.length;he++)if(oe=j[he]){if(oe.hasOwnProperty(be)){se=oe[be];break}if(F.test(be)||(se=n.nestedProperty(oe,be).get(),(se=Y[be]||n.nestedProperty(oe,be).get())&&(Y[be]=se)),se!==void 0)break}if(se===void 0&&te)return te.count<te.max&&(n.warn("Variable '"+be+"' in "+te.name+" could not be found!"),se=J),te.count===te.max&&n.warn("Too many "+te.name+" warnings - additional warnings will be suppressed"),te.count++,J;if(ne){var Ae;if(ne[0]===":"&&(se=(Ae=U?U.numberFormat:n.numberFormat)(ne.replace(Q,""))(se)),ne[0]==="|"){Ae=U?U.timeFormat:p;var fe=n.dateTime2ms(se);se=n.formatDate(fe,ne.replace(Q,""),!1,Ae)}}else{var me=be+"Label";N.hasOwnProperty(me)&&(se=N[me])}return we&&(se="("+se+")",(le||de)&&(se=" "+se),(xe||de)&&(se+=" ")),se})}n.subplotSort=function(R,N){for(var U=Math.min(R.length,N.length)+1,te=0,j=0,Y=0;Y<U;Y++){var J=R.charCodeAt(Y)||0,ee=N.charCodeAt(Y)||0,ne=J>=48&&J<=57,se=ee>=48&&ee<=57;if(ne&&(te=10*te+J-48),se&&(j=10*j+ee-48),!ne||!se){if(te!==j)return te-j;if(J!==ee)return J-ee}}return j-te};var Z=2e9;n.seedPseudoRandom=function(){Z=2e9},n.pseudoRandom=function(){var R=Z;return Z=(69069*Z+1)%4294967296,Math.abs(Z-R)<429496729?n.pseudoRandom():Z/4294967296},n.fillText=function(R,N,U){var te=Array.isArray(U)?function(J){U.push(J)}:function(J){U.text=J},j=n.extractOption(R,N,"htx","hovertext");if(n.isValidTextValue(j))return te(j);var Y=n.extractOption(R,N,"tx","text");return n.isValidTextValue(Y)?te(Y):void 0},n.isValidTextValue=function(R){return R||R===0},n.formatPercent=function(R,N){N=N||0;for(var U=(Math.round(100*R*Math.pow(10,N))*Math.pow(.1,N)).toFixed(N)+"%",te=0;te<N;te++)U.indexOf(".")!==-1&&(U=(U=U.replace("0%","%")).replace(".%","%"));return U},n.isHidden=function(R){var N=window.getComputedStyle(R).display;return!N||N==="none"},n.strTranslate=function(R,N){return R||N?"translate("+R+","+N+")":""},n.strRotate=function(R){return R?"rotate("+R+")":""},n.strScale=function(R){return R!==1?"scale("+R+")":""},n.getTextTransform=function(R){var N=R.noCenter,U=R.textX,te=R.textY,j=R.targetX,Y=R.targetY,J=R.anchorX||0,ee=R.anchorY||0,ne=R.rotate,se=R.scale;return se?se>1&&(se=1):se=0,n.strTranslate(j-se*(U+J),Y-se*(te+ee))+n.strScale(se)+(ne?"rotate("+ne+(N?"":" "+U+" "+te)+")":"")},n.ensureUniformFontSize=function(R,N){var U=n.extendFlat({},N);return U.size=Math.max(N.size,R._fullLayout.uniformtext.minsize||0),U},n.join2=function(R,N,U){var te=R.length;return te>1?R.slice(0,-1).join(N)+U+R[te-1]:R.join(N)},n.bigFont=function(R){return Math.round(1.2*R)};var $=n.getFirefoxVersion(),re=$!==null&&$<86;n.getPositionFromD3Event=function(){return re?[o.event.layerX,o.event.layerY]:[o.event.offsetX,o.event.offsetY]}},{"../constants/numerical":479,"./anchor_utils":483,"./angles":484,"./array":485,"./clean_number":486,"./clear_responsive":488,"./coerce":489,"./dates":490,"./dom":491,"./extend":493,"./filter_unique":494,"./filter_visible":495,"./geometry2d":498,"./identity":501,"./increment":502,"./is_plain_object":504,"./keyed_container":505,"./localize":506,"./loggers":507,"./make_trace_groups":508,"./matrix":509,"./mod":510,"./nested_property":511,"./noop":512,"./notifier":513,"./preserve_drawing_buffer":517,"./push_unique":518,"./regex":520,"./relative_attr":521,"./relink_private":522,"./search":523,"./sort_object_keys":526,"./stats":527,"./throttle":530,"./to_log_range":531,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],504:[function(u,q,W){q.exports=function(o){return window&&window.process&&window.process.versions?Object.prototype.toString.call(o)==="[object Object]":Object.prototype.toString.call(o)==="[object Object]"&&Object.getPrototypeOf(o).hasOwnProperty("hasOwnProperty")}},{}],505:[function(u,q,W){var o=u("./nested_property"),p=/^\w*$/;q.exports=function(x,y,e,r){var t,i,n;e=e||"name",r=r||"value";var h={};y&&y.length?(n=o(x,y),i=n.get()):i=x,y=y||"";var s={};if(i)for(t=0;t<i.length;t++)s[i[t][e]]=t;var a=p.test(r),l={set:function(f,d){var v=d===null?4:0;if(!i){if(!n||v===4)return;i=[],n.set(i)}var m=s[f];if(m===void 0){if(v===4)return;v|=3,m=i.length,s[f]=m}else d!==(a?i[m][r]:o(i[m],r).get())&&(v|=2);var c=i[m]=i[m]||{};return c[e]=f,a?c[r]=d:o(c,r).set(d),d!==null&&(v&=-5),h[m]=h[m]|v,l},get:function(f){if(i){var d=s[f];return d===void 0?void 0:a?i[d][r]:o(i[d],r).get()}},rename:function(f,d){var v=s[f];return v===void 0||(h[v]=1|h[v],s[d]=v,delete s[f],i[v][e]=d),l},remove:function(f){var d=s[f];if(d===void 0)return l;var v=i[d];if(Object.keys(v).length>2)return h[d]=2|h[d],l.set(f,null);if(a){for(t=d;t<i.length;t++)h[t]=3|h[t];for(t=d;t<i.length;t++)s[i[t][e]]--;i.splice(d,1),delete s[f]}else o(v,r).set(null),h[d]=6|h[d];return l},constructUpdate:function(){for(var f,d,v={},m=Object.keys(h),c=0;c<m.length;c++)d=m[c],f=y+"["+d+"]",i[d]?(1&h[d]&&(v[f+"."+e]=i[d][e]),2&h[d]&&(v[f+"."+r]=a?4&h[d]?null:i[d][r]:4&h[d]?null:o(i[d],r).get())):v[f]=null;return v}};return l}},{"./nested_property":511}],506:[function(u,q,W){var o=u("../registry");q.exports=function(p,x){for(var y=p._context.locale,e=0;e<2;e++){for(var r=p._context.locales,t=0;t<2;t++){var i=(r[y]||{}).dictionary;if(i){var n=i[x];if(n)return n}r=o.localeRegistry}var h=y.split("-")[0];if(h===y)break;y=h}return x}},{"../registry":638}],507:[function(u,q,W){var o=u("../plot_api/plot_config").dfltConfig,p=u("./notifier"),x=q.exports={};x.log=function(){var y;if(o.logging>1){var e=["LOG:"];for(y=0;y<arguments.length;y++)e.push(arguments[y]);console.trace.apply(console,e)}if(o.notifyOnLogging>1){var r=[];for(y=0;y<arguments.length;y++)r.push(arguments[y]);p(r.join("<br>"),"long")}},x.warn=function(){var y;if(o.logging>0){var e=["WARN:"];for(y=0;y<arguments.length;y++)e.push(arguments[y]);console.trace.apply(console,e)}if(o.notifyOnLogging>0){var r=[];for(y=0;y<arguments.length;y++)r.push(arguments[y]);p(r.join("<br>"),"stick")}},x.error=function(){var y;if(o.logging>0){var e=["ERROR:"];for(y=0;y<arguments.length;y++)e.push(arguments[y]);console.error.apply(console,e)}if(o.notifyOnLogging>0){var r=[];for(y=0;y<arguments.length;y++)r.push(arguments[y]);p(r.join("<br>"),"stick")}}},{"../plot_api/plot_config":541,"./notifier":513}],508:[function(u,q,W){var o=u("@plotly/d3");q.exports=function(p,x,y){var e=p.selectAll("g."+y.replace(/\s/g,".")).data(x,function(t){return t[0].trace.uid});e.exit().remove(),e.enter().append("g").attr("class",y),e.order();var r=p.classed("rangeplot")?"nodeRangePlot3":"node3";return e.each(function(t){t[0][r]=o.select(this)}),e}},{"@plotly/d3":58}],509:[function(u,q,W){var o=u("gl-mat4");W.init2dArray=function(p,x){for(var y=new Array(p),e=0;e<p;e++)y[e]=new Array(x);return y},W.transposeRagged=function(p){var x,y,e=0,r=p.length;for(x=0;x<r;x++)e=Math.max(e,p[x].length);var t=new Array(e);for(x=0;x<e;x++)for(t[x]=new Array(r),y=0;y<r;y++)t[x][y]=p[y][x];return t},W.dot=function(p,x){if(!p.length||!x.length||p.length!==x.length)return null;var y,e,r=p.length;if(p[0].length)for(y=new Array(r),e=0;e<r;e++)y[e]=W.dot(p[e],x);else if(x[0].length){var t=W.transposeRagged(x);for(y=new Array(t.length),e=0;e<t.length;e++)y[e]=W.dot(p,t[e])}else for(y=0,e=0;e<r;e++)y+=p[e]*x[e];return y},W.translationMatrix=function(p,x){return[[1,0,p],[0,1,x],[0,0,1]]},W.rotationMatrix=function(p){var x=p*Math.PI/180;return[[Math.cos(x),-Math.sin(x),0],[Math.sin(x),Math.cos(x),0],[0,0,1]]},W.rotationXYMatrix=function(p,x,y){return W.dot(W.dot(W.translationMatrix(x,y),W.rotationMatrix(p)),W.translationMatrix(-x,-y))},W.apply3DTransform=function(p){return function(){var x=arguments,y=arguments.length===1?x[0]:[x[0],x[1],x[2]||0];return W.dot(p,[y[0],y[1],y[2],1]).slice(0,3)}},W.apply2DTransform=function(p){return function(){var x=arguments;x.length===3&&(x=x[0]);var y=arguments.length===1?x[0]:[x[0],x[1]];return W.dot(p,[y[0],y[1],1]).slice(0,2)}},W.apply2DTransform2=function(p){var x=W.apply2DTransform(p);return function(y){return x(y.slice(0,2)).concat(x(y.slice(2,4)))}},W.convertCssMatrix=function(p){if(p){var x=p.length;if(x===16)return p;if(x===6)return[p[0],p[1],0,0,p[2],p[3],0,0,0,0,1,0,p[4],p[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},W.inverseTransformMatrix=function(p){var x=[];return o.invert(x,p),[[x[0],x[1],x[2],x[3]],[x[4],x[5],x[6],x[7]],[x[8],x[9],x[10],x[11]],[x[12],x[13],x[14],x[15]]]}},{"gl-mat4":210}],510:[function(u,q,W){q.exports={mod:function(o,p){var x=o%p;return x<0?x+p:x},modHalf:function(o,p){return Math.abs(o)>p/2?o-Math.round(o/p)*p:o}}},{}],511:[function(u,q,W){var o=u("fast-isnumeric"),p=u("./array").isArrayOrTypedArray;function x(h,s){return function(){var a,l,f,d,v,m=h;for(d=0;d<s.length-1;d++){if((a=s[d])===-1){for(l=!0,f=[],v=0;v<m.length;v++)f[v]=x(m[v],s.slice(d+1))(),f[v]!==f[0]&&(l=!1);return l?f[0]:f}if(typeof a=="number"&&!p(m)||typeof(m=m[a])!="object"||m===null)return}if(typeof m=="object"&&m!==null&&(f=m[s[d]])!==null)return f}}q.exports=function(h,s){if(o(s))s=String(s);else if(typeof s!="string"||s.substr(s.length-4)==="[-1]")throw"bad property string";for(var a,l,f,d=0,v=s.split(".");d<v.length;){if(a=String(v[d]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(a[1])v[d]=a[1];else{if(d!==0)throw"bad property string";v.splice(0,1)}for(l=a[2].substr(1,a[2].length-2).split("]["),f=0;f<l.length;f++)d++,v.splice(d,0,Number(l[f]))}d++}return typeof h!="object"?function(m,c,b){return{set:function(){throw"bad container"},get:function(){},astr:c,parts:b,obj:m}}(h,s,v):{set:r(h,v,s),get:x(h,v),astr:s,parts:v,obj:h}};var y=/(^|\.)args\[/;function e(h,s){return h===void 0||h===null&&!s.match(y)}function r(h,s,a){return function(l){var f,d,v=h,m="",c=e(l,a);for(d=0;d<s.length-1;d++){if(typeof(f=s[d])=="number"&&!p(v))throw"array index but container is not an array";if(f===-1){if(c=!i(v,s.slice(d+1),l,a))break;return}if(!n(v,f,s[d+1],c))break;if(typeof(v=v[f])!="object"||v===null)throw"container is not an object";m=t(m,f)}if(c){if(d===s.length-1&&(delete v[s[d]],Array.isArray(v)&&+s[d]==v.length-1))for(;v.length&&v[v.length-1]===void 0;)v.pop()}else v[s[d]]=l}}function t(h,s){var a=s;return o(s)?a="["+s+"]":h&&(a="."+s),h+a}function i(h,s,a,l){var f,d=p(a),v=!0,m=a,c=l.replace("-1",0),b=!d&&e(a,c),g=s[0];for(f=0;f<h.length;f++)c=l.replace("-1",f),d&&(b=e(m=a[f%a.length],c)),b&&(v=!1),n(h,f,g,b)&&r(h[f],s,l.replace("-1",f))(m);return v}function n(h,s,a,l){if(h[s]===void 0){if(l)return!1;h[s]=typeof a=="number"?[]:{}}return!0}},{"./array":485,"fast-isnumeric":190}],512:[function(u,q,W){q.exports=function(){}},{}],513:[function(u,q,W){var o=u("@plotly/d3"),p=u("fast-isnumeric"),x=[];q.exports=function(y,e){if(x.indexOf(y)===-1){x.push(y);var r=1e3;p(e)?r=e:e==="long"&&(r=3e3);var t=o.select("body").selectAll(".plotly-notifier").data([0]);t.enter().append("div").classed("plotly-notifier",!0),t.selectAll(".notifier-note").data(x).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(n){var h=o.select(this);h.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){h.transition().call(i)});for(var s=h.append("p"),a=n.split(/<br\s*\/?>/g),l=0;l<a.length;l++)l&&s.append("br"),s.append("span").text(a[l]);e==="stick"?h.transition().duration(350).style("opacity",1):h.transition().duration(700).style("opacity",1).transition().delay(r).call(i)})}function i(n){n.duration(700).style("opacity",0).each("end",function(h){var s=x.indexOf(h);s!==-1&&x.splice(s,1),o.select(this).remove()})}}},{"@plotly/d3":58,"fast-isnumeric":190}],514:[function(u,q,W){var o=u("./setcursor"),p="data-savedcursor";q.exports=function(x,y){var e=x.attr(p);if(y){if(!e){for(var r=(x.attr("class")||"").split(" "),t=0;t<r.length;t++){var i=r[t];i.indexOf("cursor-")===0&&x.attr(p,i.substr(7)).classed(i,!1)}x.attr(p)||x.attr(p,"!!")}o(x,y)}else e&&(x.attr(p,null),e==="!!"?o(x):o(x,e))}},{"./setcursor":524}],515:[function(u,q,W){var o=u("./matrix").dot,p=u("../constants/numerical").BADNUM,x=q.exports={};x.tester=function(y){var e,r=y.slice(),t=r[0][0],i=t,n=r[0][1],h=n;for(r.push(r[0]),e=1;e<r.length;e++)t=Math.min(t,r[e][0]),i=Math.max(i,r[e][0]),n=Math.min(n,r[e][1]),h=Math.max(h,r[e][1]);var s,a=!1;r.length===5&&(r[0][0]===r[1][0]?r[2][0]===r[3][0]&&r[0][1]===r[3][1]&&r[1][1]===r[2][1]&&(a=!0,s=function(d){return d[0]===r[0][0]}):r[0][1]===r[1][1]&&r[2][1]===r[3][1]&&r[0][0]===r[3][0]&&r[1][0]===r[2][0]&&(a=!0,s=function(d){return d[1]===r[0][1]}));var l=!0,f=r[0];for(e=1;e<r.length;e++)if(f[0]!==r[e][0]||f[1]!==r[e][1]){l=!1;break}return{xmin:t,xmax:i,ymin:n,ymax:h,pts:r,contains:a?function(d,v){var m=d[0],c=d[1];return!(m===p||m<t||m>i||c===p||c<n||c>h)&&(!v||!s(d))}:function(d,v){var m=d[0],c=d[1];if(m===p||m<t||m>i||c===p||c<n||c>h)return!1;var b,g,w,_,T,k=r.length,L=r[0][0],M=r[0][1],I=0;for(b=1;b<k;b++)if(g=L,w=M,L=r[b][0],M=r[b][1],!(m<(_=Math.min(g,L))||m>Math.max(g,L)||c>Math.max(w,M)))if(c<Math.min(w,M))m!==_&&I++;else{if(c===(T=L===g?c:w+(m-g)*(M-w)/(L-g)))return b!==1||!v;c<=T&&m!==_&&I++}return I%2==1},isRect:a,degenerate:l}},x.isSegmentBent=function(y,e,r,t){var i,n,h,s=y[e],a=[y[r][0]-s[0],y[r][1]-s[1]],l=o(a,a),f=Math.sqrt(l),d=[-a[1]/f,a[0]/f];for(i=e+1;i<r;i++)if(n=[y[i][0]-s[0],y[i][1]-s[1]],(h=o(n,a))<0||h>l||Math.abs(o(n,d))>t)return!0;return!1},x.filter=function(y,e){var r=[y[0]],t=0,i=0;function n(h){y.push(h);var s=r.length,a=t;r.splice(i+1);for(var l=a+1;l<y.length;l++)(l===y.length-1||x.isSegmentBent(y,a,l+1,e))&&(r.push(y[l]),r.length<s-2&&(t=l,i=r.length-1),a=l)}return y.length>1&&n(y.pop()),{addPt:n,raw:y,filtered:r}}},{"../constants/numerical":479,"./matrix":509}],516:[function(u,q,W){(function(o){(function(){var p=u("./show_no_webgl_msg"),x=u("regl");q.exports=function(y,e){var r=y._fullLayout,t=!0;return r._glcanvas.each(function(i){if(!i.regl&&(!i.pick||r._has("parcoords"))){try{i.regl=x({canvas:this,attributes:{antialias:!i.pick,preserveDrawingBuffer:!0},pixelRatio:y._context.plotGlPixelRatio||o.devicePixelRatio,extensions:e||[]})}catch{t=!1}i.regl||(t=!1),t&&this.addEventListener("webglcontextlost",function(n){y&&y.emit&&y.emit("plotly_webglcontextlost",{event:n,layer:i.key})},!1)}}),t||p({container:r._glcontainer.node()}),t}}).call(this)}).call(this,typeof Ga!="undefined"?Ga:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./show_no_webgl_msg":525,regl:283}],517:[function(u,q,W){var o=u("fast-isnumeric"),p=u("is-mobile");q.exports=function(x){var y;if(typeof(y=x&&x.hasOwnProperty("userAgent")?x.userAgent:function(){var s;return typeof navigator!="undefined"&&(s=navigator.userAgent),s&&s.headers&&typeof s.headers["user-agent"]=="string"&&(s=s.headers["user-agent"]),s}())!="string")return!0;var e=p({ua:{headers:{"user-agent":y}},tablet:!0,featureDetect:!1});if(!e){for(var r=y.split(" "),t=1;t<r.length;t++)if(r[t].indexOf("Safari")!==-1)for(var i=t-1;i>-1;i--){var n=r[i];if(n.substr(0,8)==="Version/"){var h=n.substr(8).split(".")[0];if(o(h)&&(h=+h),h>=13)return!0}}}return e}},{"fast-isnumeric":190,"is-mobile":234}],518:[function(u,q,W){q.exports=function(o,p){if(p instanceof RegExp){for(var x=p.toString(),y=0;y<o.length;y++)if(o[y]instanceof RegExp&&o[y].toString()===x)return o;o.push(p)}else!p&&p!==0||o.indexOf(p)!==-1||o.push(p);return o}},{}],519:[function(u,q,W){var o=u("../lib"),p=u("../plot_api/plot_config").dfltConfig,x={add:function(y,e,r,t,i){var n,h;y.undoQueue=y.undoQueue||{index:0,queue:[],sequence:!1},h=y.undoQueue.index,y.autoplay?y.undoQueue.inSequence||(y.autoplay=!1):(!y.undoQueue.sequence||y.undoQueue.beginSequence?(n={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},y.undoQueue.queue.splice(h,y.undoQueue.queue.length-h,n),y.undoQueue.index+=1):n=y.undoQueue.queue[h-1],y.undoQueue.beginSequence=!1,n&&(n.undo.calls.unshift(e),n.undo.args.unshift(r),n.redo.calls.push(t),n.redo.args.push(i)),y.undoQueue.queue.length>p.queueLength&&(y.undoQueue.queue.shift(),y.undoQueue.index--))},startSequence:function(y){y.undoQueue=y.undoQueue||{index:0,queue:[],sequence:!1},y.undoQueue.sequence=!0,y.undoQueue.beginSequence=!0},stopSequence:function(y){y.undoQueue=y.undoQueue||{index:0,queue:[],sequence:!1},y.undoQueue.sequence=!1,y.undoQueue.beginSequence=!1},undo:function(y){var e,r;if(!(y.undoQueue===void 0||isNaN(y.undoQueue.index)||y.undoQueue.index<=0)){for(y.undoQueue.index--,e=y.undoQueue.queue[y.undoQueue.index],y.undoQueue.inSequence=!0,r=0;r<e.undo.calls.length;r++)x.plotDo(y,e.undo.calls[r],e.undo.args[r]);y.undoQueue.inSequence=!1,y.autoplay=!1}},redo:function(y){var e,r;if(!(y.undoQueue===void 0||isNaN(y.undoQueue.index)||y.undoQueue.index>=y.undoQueue.queue.length)){for(e=y.undoQueue.queue[y.undoQueue.index],y.undoQueue.inSequence=!0,r=0;r<e.redo.calls.length;r++)x.plotDo(y,e.redo.calls[r],e.redo.args[r]);y.undoQueue.inSequence=!1,y.autoplay=!1,y.undoQueue.index++}}};x.plotDo=function(y,e,r){y.autoplay=!0,r=function(t,i){for(var n,h=[],s=0;s<i.length;s++)n=i[s],h[s]=n===t?n:typeof n=="object"?Array.isArray(n)?o.extendDeep([],n):o.extendDeepAll({},n):n;return h}(y,r),e.apply(null,r)},q.exports=x},{"../lib":503,"../plot_api/plot_config":541}],520:[function(u,q,W){W.counter=function(o,p,x,y){var e=(p||"")+(x?"":"$"),r=y===!1?"":"^";return o==="xy"?new RegExp(r+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(r+o+"([2-9]|[1-9][0-9]+)?"+e)}},{}],521:[function(u,q,W){var o=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,p=/^[^\.\[\]]+$/;q.exports=function(x,y){for(;y;){var e=x.match(o);if(e)x=e[1];else{if(!x.match(p))throw new Error("bad relativeAttr call:"+[x,y]);x=""}if(y.charAt(0)!=="^")break;y=y.slice(1)}return x&&y.charAt(0)!=="["?x+"."+y:x+y}},{}],522:[function(u,q,W){var o=u("./array").isArrayOrTypedArray,p=u("./is_plain_object");q.exports=function x(y,e){for(var r in e){var t=e[r],i=y[r];if(i!==t)if(r.charAt(0)==="_"||typeof t=="function"){if(r in y)continue;y[r]=t}else if(o(t)&&o(i)&&p(t[0])){if(r==="customdata"||r==="ids")continue;for(var n=Math.min(t.length,i.length),h=0;h<n;h++)i[h]!==t[h]&&p(t[h])&&p(i[h])&&x(i[h],t[h])}else p(t)&&p(i)&&(x(i,t),Object.keys(i).length||delete y[r])}}},{"./array":485,"./is_plain_object":504}],523:[function(u,q,W){var o=u("fast-isnumeric"),p=u("./loggers"),x=u("./identity"),y=u("../constants/numerical").BADNUM;function e(n,h){return n<h}function r(n,h){return n<=h}function t(n,h){return n>h}function i(n,h){return n>=h}W.findBin=function(n,h,s){if(o(h.start))return s?Math.ceil((n-h.start)/h.size-1e-9)-1:Math.floor((n-h.start)/h.size+1e-9);var a,l,f=0,d=h.length,v=0,m=d>1?(h[d-1]-h[0])/(d-1):1;for(l=m>=0?s?e:r:s?i:t,n+=1e-9*m*(s?-1:1)*(m>=0?1:-1);f<d&&v++<100;)l(h[a=Math.floor((f+d)/2)],n)?f=a+1:d=a;return v>90&&p.log("Long binary search..."),f-1},W.sorterAsc=function(n,h){return n-h},W.sorterDes=function(n,h){return h-n},W.distinctVals=function(n){var h,s=n.slice();for(s.sort(W.sorterAsc),h=s.length-1;h>-1&&s[h]===y;h--);for(var a,l=s[h]-s[0]||1,f=l/(h||1)/1e4,d=[],v=0;v<=h;v++){var m=s[v],c=m-a;a===void 0?(d.push(m),a=m):c>f&&(l=Math.min(l,c),d.push(m),a=m)}return{vals:d,minDiff:l}},W.roundUp=function(n,h,s){for(var a,l=0,f=h.length-1,d=0,v=s?0:1,m=s?1:0,c=s?Math.ceil:Math.floor;l<f&&d++<100;)h[a=c((l+f)/2)]<=n?l=a+v:f=a-m;return h[l]},W.sort=function(n,h){for(var s=0,a=0,l=1;l<n.length;l++){var f=h(n[l],n[l-1]);if(f<0?s=1:f>0&&(a=1),s&&a)return n.sort(h)}return a?n:n.reverse()},W.findIndexOfMin=function(n,h){h=h||x;for(var s,a=1/0,l=0;l<n.length;l++){var f=h(n[l]);f<a&&(a=f,s=l)}return s}},{"../constants/numerical":479,"./identity":501,"./loggers":507,"fast-isnumeric":190}],524:[function(u,q,W){q.exports=function(o,p){(o.attr("class")||"").split(" ").forEach(function(x){x.indexOf("cursor-")===0&&o.classed(x,!1)}),p&&o.classed("cursor-"+p,!0)}},{}],525:[function(u,q,W){var o=u("../components/color"),p=function(){};q.exports=function(x){for(var y in x)typeof x[y]=="function"&&(x[y]=p);x.destroy=function(){x.container.parentNode.removeChild(x.container)};var e=document.createElement("div");e.className="no-webgl",e.style.cursor="pointer",e.style.fontSize="24px",e.style.color=o.defaults[0],e.style.position="absolute",e.style.left=e.style.top="0px",e.style.width=e.style.height="100%",e.style["background-color"]=o.lightLine,e.style["z-index"]=30;var r=document.createElement("p");return r.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",r.style.position="relative",r.style.top="50%",r.style.left="50%",r.style.height="30%",r.style.width="50%",r.style.margin="-15% 0 0 -25%",e.appendChild(r),x.container.appendChild(e),x.container.style.background="#FFFFFF",x.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":366}],526:[function(u,q,W){q.exports=function(o){return Object.keys(o).sort()}},{}],527:[function(u,q,W){var o=u("fast-isnumeric"),p=u("./array").isArrayOrTypedArray;W.aggNums=function(x,y,e,r){var t,i;if((!r||r>e.length)&&(r=e.length),o(y)||(y=!1),p(e[0])){for(i=new Array(r),t=0;t<r;t++)i[t]=W.aggNums(x,y,e[t]);e=i}for(t=0;t<r;t++)o(y)?o(e[t])&&(y=x(+y,+e[t])):y=e[t];return y},W.len=function(x){return W.aggNums(function(y){return y+1},0,x)},W.mean=function(x,y){return y||(y=W.len(x)),W.aggNums(function(e,r){return e+r},0,x)/y},W.midRange=function(x){if(x!==void 0&&x.length!==0)return(W.aggNums(Math.max,null,x)+W.aggNums(Math.min,null,x))/2},W.variance=function(x,y,e){return y||(y=W.len(x)),o(e)||(e=W.mean(x,y)),W.aggNums(function(r,t){return r+Math.pow(t-e,2)},0,x)/y},W.stdev=function(x,y,e){return Math.sqrt(W.variance(x,y,e))},W.median=function(x){var y=x.slice().sort();return W.interp(y,.5)},W.interp=function(x,y){if(!o(y))throw"n should be a finite number";if((y=y*x.length-.5)<0)return x[0];if(y>x.length-1)return x[x.length-1];var e=y%1;return e*x[Math.ceil(y)]+(1-e)*x[Math.floor(y)]}},{"./array":485,"fast-isnumeric":190}],528:[function(u,q,W){var o=u("color-normalize");q.exports=function(p){return p?o(p):[0,0,0,1]}},{"color-normalize":89}],529:[function(u,q,W){var o=u("@plotly/d3"),p=u("../lib"),x=p.strTranslate,y=u("../constants/xmlns_namespaces"),e=u("../constants/alignment").LINE_SPACING,r=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;W.convertToTspans=function(P,S,E){var D=P.text(),F=!P.attr("data-notex")&&typeof MathJax!="undefined"&&D.match(r),H=o.select(P.node().parentNode);if(!H.empty()){var V=P.attr("class")?P.attr("class").split(" ")[0]:"text";return V+="-math",H.selectAll("svg."+V).remove(),H.selectAll("g."+V+"-group").remove(),P.style("display",null).attr({"data-unformatted":D,"data-math":"N"}),F?(S&&S._promises||[]).push(new Promise(function(K){P.style("display","none");var Z=parseInt(P.node().style.fontSize,10),$={fontSize:Z};(function(re,R,N){var U,te,j,Y;MathJax.Hub.Queue(function(){return te=p.extendDeepAll({},MathJax.Hub.config),j=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if((U=MathJax.Hub.config.menuSettings.renderer)!=="SVG")return MathJax.Hub.setRenderer("SVG")},function(){var J="math-output-"+p.randstr({},64);return Y=o.select("body").append("div").attr({id:J}).style({visibility:"hidden",position:"absolute"}).style({"font-size":R.fontSize+"px"}).text(re.replace(t,"\\lt ").replace(i,"\\gt ")),MathJax.Hub.Typeset(Y.node())},function(){var J=o.select("body").select("#MathJax_SVG_glyphs");if(Y.select(".MathJax_SVG").empty()||!Y.select("svg").node())p.log("There was an error in the tex syntax.",re),N();else{var ee=Y.select("svg").node().getBoundingClientRect();N(Y.select(".MathJax_SVG"),J,ee)}if(Y.remove(),U!=="SVG")return MathJax.Hub.setRenderer(U)},function(){return j!==void 0&&(MathJax.Hub.processSectionDelay=j),MathJax.Hub.Config(te)})})(F[2],$,function(re,R,N){H.selectAll("svg."+V).remove(),H.selectAll("g."+V+"-group").remove();var U=re&&re.select("svg");if(!U||!U.node())return Q(),void K();var te=H.append("g").classed(V+"-group",!0).attr({"pointer-events":"none","data-unformatted":D,"data-math":"Y"});te.node().appendChild(U.node()),R&&R.node()&&U.node().insertBefore(R.node().cloneNode(!0),U.node().firstChild);var j=N.width,Y=N.height;U.attr({class:V,height:Y,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var J=P.node().style.fill||"black",ee=U.select("g");ee.attr({fill:J,stroke:J});var ne=ee.node().getBoundingClientRect(),se=ne.width,oe=ne.height;(se>j||oe>Y)&&(U.style("overflow","hidden"),se=(ne=U.node().getBoundingClientRect()).width,oe=ne.height);var he=+P.attr("x"),le=+P.attr("y"),de=-(Z||P.node().getBoundingClientRect().height)/4;if(V[0]==="y")te.attr({transform:"rotate("+[-90,he,le]+")"+x(-se/2,de-oe/2)});else if(V[0]==="l")le=de-oe/2;else if(V[0]==="a"&&V.indexOf("atitle")!==0)he=0,le=de;else{var xe=P.attr("text-anchor");he-=se*(xe==="middle"?.5:xe==="end"?1:0),le=le+de-oe/2}U.attr({x:he,y:le}),E&&E.call(P,te),K(te)})})):Q(),P}function Q(){H.empty()||(V=P.attr("class")+"-math",H.select("svg."+V).remove()),P.text("").style("white-space","pre"),function(K,Z){Z=Z.replace(l," ");var $,re=!1,R=[],N=-1;function U(){N++;var Ae=document.createElementNS(y.svg,"tspan");o.select(Ae).attr({class:"line",dy:N*e+"em"}),K.appendChild(Ae),$=Ae;var fe=R;if(R=[{node:Ae}],fe.length>1)for(var me=1;me<fe.length;me++)te(fe[me])}function te(Ae){var fe,me=Ae.type,ke={};if(me==="a"){fe="a";var Te=Ae.target,Me=Ae.href,Oe=Ae.popup;Me&&(ke={"xlink:xlink:show":Te==="_blank"||Te.charAt(0)!=="_"?"new":"replace",target:Te,"xlink:xlink:href":Me},Oe&&(ke.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Oe+'");return false;'))}else fe="tspan";Ae.style&&(ke.style=Ae.style);var Fe=document.createElementNS(y.svg,fe);if(me==="sup"||me==="sub"){j($,"\u200B"),$.appendChild(Fe);var qe=document.createElementNS(y.svg,"tspan");j(qe,"\u200B"),o.select(qe).attr("dy",s[me]),ke.dy=h[me],$.appendChild(Fe),$.appendChild(qe)}else $.appendChild(Fe);o.select(Fe).attr(ke),$=Ae.node=Fe,R.push(Ae)}function j(Ae,fe){Ae.appendChild(document.createTextNode(fe))}function Y(Ae){if(R.length!==1){var fe=R.pop();Ae!==fe.type&&p.log("Start tag <"+fe.type+"> doesnt match end tag <"+Ae+">. Pretending it did match.",Z),$=R[R.length-1].node}else p.log("Ignoring unexpected end tag </"+Ae+">.",Z)}v.test(Z)?U():($=K,R=[{node:K}]);for(var J=Z.split(f),ee=0;ee<J.length;ee++){var ne=J[ee],se=ne.match(d),oe=se&&se[2].toLowerCase(),he=n[oe];if(oe==="br")U();else if(he===void 0)j($,L(ne));else if(se[1])Y(oe);else{var le=se[4],de={type:oe},xe=w(le,m);if(xe?(xe=xe.replace(_,"$1 fill:"),he&&(xe+=";"+he)):he&&(xe=he),xe&&(de.style=xe),oe==="a"){re=!0;var we=w(le,c);if(we){var be=M(we);be&&(de.href=be,de.target=w(le,b)||"_blank",de.popup=w(le,g))}}te(de)}}return re}(P.node(),D)&&P.style("pointer-events","all"),W.positionText(P),E&&E.call(P)}};var t=/(<|&lt;|&#60;)/g,i=/(>|&gt;|&#62;)/g,n={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},h={sub:"0.3em",sup:"-0.6em"},s={sub:"-0.21em",sup:"0.42em"},a=["http:","https:","mailto:","",void 0,":"],l=W.NEWLINES=/(\r\n?|\n)/g,f=/(<[^<>]*>)/,d=/<(\/?)([^ >]*)(\s+(.*))?>/i,v=/<br(\s+.*)?>/i;W.BR_TAG_ALL=/<br(\s+.*)?>/gi;var m=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,c=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,b=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,g=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function w(P,S){if(!P)return null;var E=P.match(S),D=E&&(E[3]||E[4]);return D&&L(D)}var _=/(^|;)\s*color:/;W.plainText=function(P,S){for(var E=(S=S||{}).len!==void 0&&S.len!==-1?S.len:1/0,D=S.allowedTags!==void 0?S.allowedTags:["br"],F="...".length,H=P.split(f),V=[],Q="",K=0,Z=0;Z<H.length;Z++){var $=H[Z],re=$.match(d),R=re&&re[2].toLowerCase();if(R)D.indexOf(R)!==-1&&(V.push($),Q=R);else{var N=$.length;if(K+N<E)V.push($),K+=N;else if(K<E){var U=E-K;Q&&(Q!=="br"||U<=F||N<=F)&&V.pop(),E>F?V.push($.substr(0,U-F)+"..."):V.push($.substr(0,U));break}Q=""}}return V.join("")};var T={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},k=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function L(P){return P.replace(k,function(S,E){return(E.charAt(0)==="#"?function(D){if(!(D>1114111)){var F=String.fromCodePoint;if(F)return F(D);var H=String.fromCharCode;return D<=65535?H(D):H(55232+(D>>10),D%1024+56320)}}(E.charAt(1)==="x"?parseInt(E.substr(2),16):parseInt(E.substr(1),10)):T[E])||S})}function M(P){var S=encodeURI(decodeURI(P)),E=document.createElement("a"),D=document.createElement("a");E.href=P,D.href=S;var F=E.protocol,H=D.protocol;return a.indexOf(F)!==-1&&a.indexOf(H)!==-1?S:""}function I(P,S,E){var D,F,H,V=E.horizontalAlign,Q=E.verticalAlign||"top",K=P.node().getBoundingClientRect(),Z=S.node().getBoundingClientRect();return F=Q==="bottom"?function(){return K.bottom-D.height}:Q==="middle"?function(){return K.top+(K.height-D.height)/2}:function(){return K.top},H=V==="right"?function(){return K.right-D.width}:V==="center"?function(){return K.left+(K.width-D.width)/2}:function(){return K.left},function(){D=this.node().getBoundingClientRect();var $=H()-Z.left,re=F()-Z.top,R=E.gd||{};if(E.gd){R._fullLayout._calcInverseTransform(R);var N=p.apply3DTransform(R._fullLayout._invTransform)($,re);$=N[0],re=N[1]}return this.style({top:re+"px",left:$+"px","z-index":1e3}),this}}W.convertEntities=L,W.sanitizeHTML=function(P){P=P.replace(l," ");for(var S=document.createElement("p"),E=S,D=[],F=P.split(f),H=0;H<F.length;H++){var V=F[H],Q=V.match(d),K=Q&&Q[2].toLowerCase();if(K in n)if(Q[1])D.length&&(E=D.pop());else{var Z=Q[4],$=w(Z,m),re=$?{style:$}:{};if(K==="a"){var R=w(Z,c);if(R){var N=M(R);if(N){re.href=N;var U=w(Z,b);U&&(re.target=U)}}}var te=document.createElement(K);E.appendChild(te),o.select(te).attr(re),E=te,D.push(te)}else E.appendChild(document.createTextNode(L(V)))}return S.innerHTML},W.lineCount=function(P){return P.selectAll("tspan.line").size()||1},W.positionText=function(P,S,E){return P.each(function(){var D=o.select(this);function F(Q,K){return K===void 0?(K=D.attr(Q))===null&&(D.attr(Q,0),K=0):D.attr(Q,K),K}var H=F("x",S),V=F("y",E);this.nodeName==="text"&&D.selectAll("tspan.line").attr({x:H,y:V})})},W.makeTextShadow=function(P){var S="1px ",E="1px ",D="1px ";return S+E+D+P+", -"+S+"-"+E+D+P+", "+S+"-"+E+D+P+", -"+S+E+D+P},W.makeEditable=function(P,S){var E=S.gd,D=S.delegate,F=o.dispatch("edit","input","cancel"),H=D||P;if(P.style({"pointer-events":D?"none":"all"}),P.size()!==1)throw new Error("boo");function V(){(function(){var $=o.select(E).select(".svg-container"),re=$.append("div"),R=P.node().style,N=parseFloat(R.fontSize||12),U=S.text;U===void 0&&(U=P.attr("data-unformatted")),re.classed("plugin-editable editable",!0).style({position:"absolute","font-family":R.fontFamily||"Arial","font-size":N,color:S.fill||R.fill||"black",opacity:1,"background-color":S.background||"transparent",outline:"#ffffff33 1px solid",margin:[-N/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(U).call(I(P,$,S)).on("blur",function(){E._editing=!1,P.text(this.textContent).style({opacity:1});var te,j=o.select(this).attr("class");(te=j?"."+j.split(" ")[0]+"-math-group":"[class*=-math-group]")&&o.select(P.node().parentNode).select(te).style({opacity:0});var Y=this.textContent;o.select(this).transition().duration(0).remove(),o.select(document).on("mouseup",null),F.edit.call(P,Y)}).on("focus",function(){var te=this;E._editing=!0,o.select(document).on("mouseup",function(){if(o.event.target===te)return!1;document.activeElement===re.node()&&re.node().blur()})}).on("keyup",function(){o.event.which===27?(E._editing=!1,P.style({opacity:1}),o.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),F.cancel.call(P,this.textContent)):(F.input.call(P,this.textContent),o.select(this).call(I(P,$,S)))}).on("keydown",function(){o.event.which===13&&this.blur()}).call(Q)})(),P.style({opacity:0});var K,Z=H.attr("class");(K=Z?"."+Z.split(" ")[0]+"-math-group":"[class*=-math-group]")&&o.select(P.node().parentNode).select(K).style({opacity:0})}function Q(K){var Z=K.node(),$=document.createRange();$.selectNodeContents(Z);var re=window.getSelection();re.removeAllRanges(),re.addRange($),Z.focus()}return S.immediate?V():H.on("click",V),o.rebind(P,F,"on")}},{"../constants/alignment":471,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],530:[function(u,q,W){var o={};function p(x){x&&x.timer!==null&&(clearTimeout(x.timer),x.timer=null)}W.throttle=function(x,y,e){var r=o[x],t=Date.now();if(!r){for(var i in o)o[i].ts<t-6e4&&delete o[i];r=o[x]={ts:0,timer:null}}function n(){e(),r.ts=Date.now(),r.onDone&&(r.onDone(),r.onDone=null)}p(r),t>r.ts+y?n():r.timer=setTimeout(function(){n(),r.timer=null},y)},W.done=function(x){var y=o[x];return y&&y.timer?new Promise(function(e){var r=y.onDone;y.onDone=function(){r&&r(),e(),y.onDone=null}}):Promise.resolve()},W.clear=function(x){if(x)p(o[x]),delete o[x];else for(var y in o)W.clear(y)}},{}],531:[function(u,q,W){var o=u("fast-isnumeric");q.exports=function(p,x){if(p>0)return Math.log(p)/Math.LN10;var y=Math.log(Math.min(x[0],x[1]))/Math.LN10;return o(y)||(y=Math.log(Math.max(x[0],x[1]))/Math.LN10-6),y}},{"fast-isnumeric":190}],532:[function(u,q,W){var o=q.exports={},p=u("../plots/geo/constants").locationmodeToLayer,x=u("topojson-client").feature;o.getTopojsonName=function(y){return[y.scope.replace(/ /g,"-"),"_",y.resolution.toString(),"m"].join("")},o.getTopojsonPath=function(y,e){return y+e+".json"},o.getTopojsonFeatures=function(y,e){var r=p[y.locationmode],t=e.objects[r];return x(e,t).features}},{"../plots/geo/constants":587,"topojson-client":315}],533:[function(u,q,W){q.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],534:[function(u,q,W){q.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],535:[function(u,q,W){var o=u("../registry");q.exports=function(p){for(var x,y,e=o.layoutArrayContainers,r=o.layoutArrayRegexes,t=p.split("[")[0],i=0;i<r.length;i++)if((y=p.match(r[i]))&&y.index===0){x=y[0];break}if(x||(x=e[e.indexOf(t)]),!x)return!1;var n=p.substr(x.length);return n?!!(y=n.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:x,index:Number(y[1]),property:y[3]||""}:{array:x,index:"",property:""}}},{"../registry":638}],536:[function(u,q,W){var o=u("../lib"),p=o.extendFlat,x=o.isPlainObject,y={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},r=y.flags.slice().concat(["fullReplot"]),t=e.flags.slice().concat("layoutReplot");function i(s){for(var a={},l=0;l<s.length;l++)a[s[l]]=!1;return a}function n(s,a,l){var f=p({},s);for(var d in f){var v=f[d];x(v)&&(f[d]=h(v,a,l,d))}return l==="from-root"&&(f.editType=a),f}function h(s,a,l,f){if(s.valType){var d=p({},s);if(d.editType=a,Array.isArray(s.items)){d.items=new Array(s.items.length);for(var v=0;v<s.items.length;v++)d.items[v]=h(s.items[v],a)}return d}return n(s,a,f.charAt(0)==="_"?"nested":"from-root")}q.exports={traces:y,layout:e,traceFlags:function(){return i(r)},layoutFlags:function(){return i(t)},update:function(s,a){var l=a.editType;if(l&&l!=="none")for(var f=l.split("+"),d=0;d<f.length;d++)s[f[d]]=!0},overrideAll:n}},{"../lib":503}],537:[function(u,q,W){var o=u("fast-isnumeric"),p=u("gl-mat4/fromQuat"),x=u("../registry"),y=u("../lib"),e=u("../plots/plots"),r=u("../plots/cartesian/axis_ids"),t=u("../components/color"),i=r.cleanId,n=r.getFromTrace,h=x.traceIs;function s(g,w){var _=g[w],T=w.charAt(0);_&&_!=="paper"&&(g[w]=i(_,T,!0))}function a(g){function w(_,T){var k=g[_],L=g.title&&g.title[T];k&&!L&&(g.title||(g.title={}),g.title[T]=g[_],delete g[_])}g&&(typeof g.title!="string"&&typeof g.title!="number"||(g.title={text:g.title}),w("titlefont","font"),w("titleposition","position"),w("titleside","side"),w("titleoffset","offset"))}function l(g){if(!y.isPlainObject(g))return!1;var w=g.name;return delete g.name,delete g.showlegend,(typeof w=="string"||typeof w=="number")&&String(w)}function f(g,w,_,T){if(_&&!T)return g;if(T&&!_||!g.trim())return w;if(!w.trim())return g;var k,L=Math.min(g.length,w.length);for(k=0;k<L&&g.charAt(k)===w.charAt(k);k++);return g.substr(0,k).trim()}function d(g){var w="middle",_="center";return typeof g=="string"&&(g.indexOf("top")!==-1?w="top":g.indexOf("bottom")!==-1&&(w="bottom"),g.indexOf("left")!==-1?_="left":g.indexOf("right")!==-1&&(_="right")),w+" "+_}function v(g,w){return w in g&&typeof g[w]=="object"&&Object.keys(g[w]).length===0}W.clearPromiseQueue=function(g){Array.isArray(g._promises)&&g._promises.length>0&&y.log("Clearing previous rejected promises from queue."),g._promises=[]},W.cleanLayout=function(g){var w,_;g||(g={}),g.xaxis1&&(g.xaxis||(g.xaxis=g.xaxis1),delete g.xaxis1),g.yaxis1&&(g.yaxis||(g.yaxis=g.yaxis1),delete g.yaxis1),g.scene1&&(g.scene||(g.scene=g.scene1),delete g.scene1);var T=(e.subplotsRegistry.cartesian||{}).attrRegex,k=(e.subplotsRegistry.polar||{}).attrRegex,L=(e.subplotsRegistry.ternary||{}).attrRegex,M=(e.subplotsRegistry.gl3d||{}).attrRegex,I=Object.keys(g);for(w=0;w<I.length;w++){var P=I[w];if(T&&T.test(P)){var S=g[P];S.anchor&&S.anchor!=="free"&&(S.anchor=i(S.anchor)),S.overlaying&&(S.overlaying=i(S.overlaying)),S.type||(S.isdate?S.type="date":S.islog?S.type="log":S.isdate===!1&&S.islog===!1&&(S.type="linear")),S.autorange!=="withzero"&&S.autorange!=="tozero"||(S.autorange=!0,S.rangemode="tozero"),delete S.islog,delete S.isdate,delete S.categories,v(S,"domain")&&delete S.domain,S.autotick!==void 0&&(S.tickmode===void 0&&(S.tickmode=S.autotick?"auto":"linear"),delete S.autotick),a(S)}else if(k&&k.test(P))a(g[P].radialaxis);else if(L&&L.test(P)){var E=g[P];a(E.aaxis),a(E.baxis),a(E.caxis)}else if(M&&M.test(P)){var D=g[P],F=D.cameraposition;if(Array.isArray(F)&&F[0].length===4){var H=F[0],V=F[1],Q=F[2],K=p([],H),Z=[];for(_=0;_<3;++_)Z[_]=V[_]+Q*K[2+4*_];D.camera={eye:{x:Z[0],y:Z[1],z:Z[2]},center:{x:V[0],y:V[1],z:V[2]},up:{x:0,y:0,z:1}},delete D.cameraposition}a(D.xaxis),a(D.yaxis),a(D.zaxis)}}var $=Array.isArray(g.annotations)?g.annotations.length:0;for(w=0;w<$;w++){var re=g.annotations[w];y.isPlainObject(re)&&(re.ref&&(re.ref==="paper"?(re.xref="paper",re.yref="paper"):re.ref==="data"&&(re.xref="x",re.yref="y"),delete re.ref),s(re,"xref"),s(re,"yref"))}var R=Array.isArray(g.shapes)?g.shapes.length:0;for(w=0;w<R;w++){var N=g.shapes[w];y.isPlainObject(N)&&(s(N,"xref"),s(N,"yref"))}var U=Array.isArray(g.images)?g.images.length:0;for(w=0;w<U;w++){var te=g.images[w];y.isPlainObject(te)&&(s(te,"xref"),s(te,"yref"))}var j=g.legend;return j&&(j.x>3?(j.x=1.02,j.xanchor="left"):j.x<-2&&(j.x=-.02,j.xanchor="right"),j.y>3?(j.y=1.02,j.yanchor="bottom"):j.y<-2&&(j.y=-.02,j.yanchor="top")),a(g),g.dragmode==="rotate"&&(g.dragmode="orbit"),t.clean(g),g.template&&g.template.layout&&W.cleanLayout(g.template.layout),g},W.cleanData=function(g){for(var w=0;w<g.length;w++){var _,T=g[w];if(T.type==="histogramy"&&"xbins"in T&&!("ybins"in T)&&(T.ybins=T.xbins,delete T.xbins),T.error_y&&"opacity"in T.error_y){var k=t.defaults,L=T.error_y.color||(h(T,"bar")?t.defaultLine:k[w%k.length]);T.error_y.color=t.addOpacity(t.rgb(L),t.opacity(L)*T.error_y.opacity),delete T.error_y.opacity}if("bardir"in T&&(T.bardir!=="h"||!h(T,"bar")&&T.type.substr(0,9)!=="histogram"||(T.orientation="h",W.swapXYData(T)),delete T.bardir),T.type==="histogramy"&&W.swapXYData(T),T.type!=="histogramx"&&T.type!=="histogramy"||(T.type="histogram"),"scl"in T&&!("colorscale"in T)&&(T.colorscale=T.scl,delete T.scl),"reversescl"in T&&!("reversescale"in T)&&(T.reversescale=T.reversescl,delete T.reversescl),T.xaxis&&(T.xaxis=i(T.xaxis,"x")),T.yaxis&&(T.yaxis=i(T.yaxis,"y")),h(T,"gl3d")&&T.scene&&(T.scene=e.subplotsRegistry.gl3d.cleanId(T.scene)),!h(T,"pie-like")&&!h(T,"bar-like"))if(Array.isArray(T.textposition))for(_=0;_<T.textposition.length;_++)T.textposition[_]=d(T.textposition[_]);else T.textposition&&(T.textposition=d(T.textposition));var M=x.getModule(T);if(M&&M.colorbar){var I=M.colorbar.container,P=I?T[I]:T;P&&P.colorscale&&(P.colorscale==="YIGnBu"&&(P.colorscale="YlGnBu"),P.colorscale==="YIOrRd"&&(P.colorscale="YlOrRd"))}if(T.type==="surface"&&y.isPlainObject(T.contours)){var S=["x","y","z"];for(_=0;_<S.length;_++){var E=T.contours[S[_]];y.isPlainObject(E)&&(E.highlightColor&&(E.highlightcolor=E.highlightColor,delete E.highlightColor),E.highlightWidth&&(E.highlightwidth=E.highlightWidth,delete E.highlightWidth))}}if(T.type==="candlestick"||T.type==="ohlc"){var D=(T.increasing||{}).showlegend!==!1,F=(T.decreasing||{}).showlegend!==!1,H=l(T.increasing),V=l(T.decreasing);if(H!==!1&&V!==!1){var Q=f(H,V,D,F);Q&&(T.name=Q)}else!H&&!V||T.name||(T.name=H||V)}if(Array.isArray(T.transforms)){var K=T.transforms;for(_=0;_<K.length;_++){var Z=K[_];if(y.isPlainObject(Z))switch(Z.type){case"filter":Z.filtersrc&&(Z.target=Z.filtersrc,delete Z.filtersrc),Z.calendar&&(Z.valuecalendar||(Z.valuecalendar=Z.calendar),delete Z.calendar);break;case"groupby":if(Z.styles=Z.styles||Z.style,Z.styles&&!Array.isArray(Z.styles)){var $=Z.styles,re=Object.keys($);Z.styles=[];for(var R=0;R<re.length;R++)Z.styles.push({target:re[R],value:$[re[R]]})}}}}v(T,"line")&&delete T.line,"marker"in T&&(v(T.marker,"line")&&delete T.marker.line,v(T,"marker")&&delete T.marker),t.clean(T),T.autobinx&&(delete T.autobinx,delete T.xbins),T.autobiny&&(delete T.autobiny,delete T.ybins),a(T),T.colorbar&&a(T.colorbar),T.marker&&T.marker.colorbar&&a(T.marker.colorbar),T.line&&T.line.colorbar&&a(T.line.colorbar),T.aaxis&&a(T.aaxis),T.baxis&&a(T.baxis)}},W.swapXYData=function(g){var w;if(y.swapAttrs(g,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(g.z)&&Array.isArray(g.z[0])&&(g.transpose?delete g.transpose:g.transpose=!0),g.error_x&&g.error_y){var _=g.error_y,T="copy_ystyle"in _?_.copy_ystyle:!(_.color||_.thickness||_.width);y.swapAttrs(g,["error_?.copy_ystyle"]),T&&y.swapAttrs(g,["error_?.color","error_?.thickness","error_?.width"])}if(typeof g.hoverinfo=="string"){var k=g.hoverinfo.split("+");for(w=0;w<k.length;w++)k[w]==="x"?k[w]="y":k[w]==="y"&&(k[w]="x");g.hoverinfo=k.join("+")}},W.coerceTraceIndices=function(g,w){if(o(w))return[w];if(!Array.isArray(w)||!w.length)return g.data.map(function(k,L){return L});if(Array.isArray(w)){for(var _=[],T=0;T<w.length;T++)y.isIndex(w[T],g.data.length)?_.push(w[T]):y.warn("trace index (",w[T],") is not a number or is out of bounds");return _}return w},W.manageArrayContainers=function(g,w,_){var T=g.obj,k=g.parts,L=k.length,M=k[L-1],I=o(M);if(I&&w===null){var P=k.slice(0,L-1).join(".");y.nestedProperty(T,P).get().splice(M,1)}else I&&g.get()===void 0&&g.get()===void 0&&(_[g.astr]=null),g.set(w)};var m=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function c(g){var w=g.search(m);if(w>0)return g.substr(0,w)}W.hasParent=function(g,w){for(var _=c(w);_;){if(_ in g)return!0;_=c(_)}return!1};var b=["x","y","z"];W.clearAxisTypes=function(g,w,_){for(var T=0;T<w.length;T++)for(var k=g._fullData[T],L=0;L<3;L++){var M=n(g,k,b[L]);if(M&&M.type!=="log"){var I=M._name,P=M._id.substr(1);if(P.substr(0,5)==="scene"){if(_[P]!==void 0)continue;I=P+"."+I}var S=I+".type";_[I]===void 0&&_[S]===void 0&&y.nestedProperty(g.layout,S).set(null)}}}},{"../components/color":366,"../lib":503,"../plots/cartesian/axis_ids":558,"../plots/plots":619,"../registry":638,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],538:[function(u,q,W){var o=u("./plot_api");W._doPlot=o._doPlot,W.newPlot=o.newPlot,W.restyle=o.restyle,W.relayout=o.relayout,W.redraw=o.redraw,W.update=o.update,W._guiRestyle=o._guiRestyle,W._guiRelayout=o._guiRelayout,W._guiUpdate=o._guiUpdate,W._storeDirectGUIEdit=o._storeDirectGUIEdit,W.react=o.react,W.extendTraces=o.extendTraces,W.prependTraces=o.prependTraces,W.addTraces=o.addTraces,W.deleteTraces=o.deleteTraces,W.moveTraces=o.moveTraces,W.purge=o.purge,W.addFrames=o.addFrames,W.deleteFrames=o.deleteFrames,W.animate=o.animate,W.setPlotConfig=o.setPlotConfig,W.toImage=u("./to_image"),W.validate=u("./validate"),W.downloadImage=u("../snapshot/download");var p=u("./template_api");W.makeTemplate=p.makeTemplate,W.validateTemplate=p.validateTemplate},{"../snapshot/download":640,"./plot_api":540,"./template_api":545,"./to_image":546,"./validate":547}],539:[function(u,q,W){var o=u("../lib/is_plain_object"),p=u("../lib/noop"),x=u("../lib/loggers"),y=u("../lib/search").sorterAsc,e=u("../registry");W.containerArrayMatch=u("./container_array_match");var r=W.isAddVal=function(i){return i==="add"||o(i)},t=W.isRemoveVal=function(i){return i===null||i==="remove"};W.applyContainerArrayChanges=function(i,n,h,s,a){var l=n.astr,f=e.getComponentMethod(l,"supplyLayoutDefaults"),d=e.getComponentMethod(l,"draw"),v=e.getComponentMethod(l,"drawOne"),m=s.replot||s.recalc||f===p||d===p,c=i.layout,b=i._fullLayout;if(h[""]){Object.keys(h).length>1&&x.warn("Full array edits are incompatible with other edits",l);var g=h[""][""];if(t(g))n.set(null);else{if(!Array.isArray(g))return x.warn("Unrecognized full array edit value",l,g),!0;n.set(g)}return!m&&(f(c,b),d(i),!0)}var w,_,T,k,L,M,I,P,S=Object.keys(h).map(Number).sort(y),E=n.get(),D=E||[],F=a(b,l).get(),H=[],V=-1,Q=D.length;for(w=0;w<S.length;w++)if(k=h[T=S[w]],L=Object.keys(k),M=k[""],I=r(M),T<0||T>D.length-(I?0:1))x.warn("index out of range",l,T);else if(M!==void 0)L.length>1&&x.warn("Insertion & removal are incompatible with edits to the same index.",l,T),t(M)?H.push(T):I?(M==="add"&&(M={}),D.splice(T,0,M),F&&F.splice(T,0,{})):x.warn("Unrecognized full object edit value",l,T,M),V===-1&&(V=T);else for(_=0;_<L.length;_++)P=l+"["+T+"].",a(D[T],L[_],P).set(k[L[_]]);for(w=H.length-1;w>=0;w--)D.splice(H[w],1),F&&F.splice(H[w],1);if(D.length?E||n.set(D):n.set(null),m)return!1;if(f(c,b),v!==p){var K;if(V===-1)K=S;else{for(Q=Math.max(D.length,Q),K=[],w=0;w<S.length&&!((T=S[w])>=V);w++)K.push(T);for(w=V;w<Q;w++)K.push(w)}for(w=0;w<K.length;w++)v(i,K[w])}else d(i);return!0}},{"../lib/is_plain_object":504,"../lib/loggers":507,"../lib/noop":512,"../lib/search":523,"../registry":638,"./container_array_match":535}],540:[function(u,q,W){var o=u("@plotly/d3"),p=u("fast-isnumeric"),x=u("has-hover"),y=u("../lib"),e=y.nestedProperty,r=u("../lib/events"),t=u("../lib/queue"),i=u("../registry"),n=u("./plot_schema"),h=u("../plots/plots"),s=u("../plots/cartesian/axes"),a=u("../components/drawing"),l=u("../components/color"),f=u("../plots/cartesian/graph_interact").initInteractions,d=u("../constants/xmlns_namespaces"),v=u("../plots/cartesian/select").clearSelect,m=u("./plot_config").dfltConfig,c=u("./manage_arrays"),b=u("./helpers"),g=u("./subroutines"),w=u("./edit_types"),_=u("../plots/cartesian/constants").AX_NAME_PATTERN,T=0;function k(fe){var me=fe._fullLayout;me._redrawFromAutoMarginCount?me._redrawFromAutoMarginCount--:fe.emit("plotly_afterplot")}function L(fe,me){try{fe._fullLayout._paper.style("background",me)}catch(ke){y.error(ke)}}function M(fe,me){L(fe,l.combine(me,"white"))}function I(fe,me){if(!fe._context){fe._context=y.extendDeep({},m);var ke=o.select("base");fe._context._baseUrl=ke.size()&&ke.attr("href")?window.location.href.split("#")[0]:""}var Te,Me,Oe,Fe=fe._context;if(me){for(Me=Object.keys(me),Te=0;Te<Me.length;Te++)(Oe=Me[Te])!=="editable"&&Oe!=="edits"&&Oe in Fe&&(Oe==="setBackground"&&me[Oe]==="opaque"?Fe[Oe]=M:Fe[Oe]=me[Oe]);me.plot3dPixelRatio&&!Fe.plotGlPixelRatio&&(Fe.plotGlPixelRatio=Fe.plot3dPixelRatio);var qe=me.editable;if(qe!==void 0)for(Fe.editable=qe,Me=Object.keys(Fe.edits),Te=0;Te<Me.length;Te++)Fe.edits[Me[Te]]=qe;if(me.edits)for(Me=Object.keys(me.edits),Te=0;Te<Me.length;Te++)(Oe=Me[Te])in Fe.edits&&(Fe.edits[Oe]=me.edits[Oe]);Fe._exportedPlot=me._exportedPlot}Fe.staticPlot&&(Fe.editable=!1,Fe.edits={},Fe.autosizable=!1,Fe.scrollZoom=!1,Fe.doubleClick=!1,Fe.showTips=!1,Fe.showLink=!1,Fe.displayModeBar=!1),Fe.displayModeBar!=="hover"||x||(Fe.displayModeBar=!0),Fe.setBackground!=="transparent"&&typeof Fe.setBackground=="function"||(Fe.setBackground=L),Fe._hasZeroHeight=Fe._hasZeroHeight||fe.clientHeight===0,Fe._hasZeroWidth=Fe._hasZeroWidth||fe.clientWidth===0;var et=Fe.scrollZoom,ze=Fe._scrollZoom={};if(et===!0)ze.cartesian=1,ze.gl3d=1,ze.geo=1,ze.mapbox=1;else if(typeof et=="string"){var Ue=et.split("+");for(Te=0;Te<Ue.length;Te++)ze[Ue[Te]]=1}else et!==!1&&(ze.gl3d=1,ze.geo=1,ze.mapbox=1)}function P(fe,me){var ke,Te,Me=me+1,Oe=[];for(ke=0;ke<fe.length;ke++)(Te=fe[ke])<0?Oe.push(Me+Te):Oe.push(Te);return Oe}function S(fe,me,ke){var Te,Me;for(Te=0;Te<me.length;Te++){if((Me=me[Te])!==parseInt(Me,10))throw new Error("all values in "+ke+" must be integers");if(Me>=fe.data.length||Me<-fe.data.length)throw new Error(ke+" must be valid indices for gd.data.");if(me.indexOf(Me,Te+1)>-1||Me>=0&&me.indexOf(-fe.data.length+Me)>-1||Me<0&&me.indexOf(fe.data.length+Me)>-1)throw new Error("each index in "+ke+" must be unique.")}}function E(fe,me,ke){if(!Array.isArray(fe.data))throw new Error("gd.data must be an array.");if(me===void 0)throw new Error("currentIndices is a required argument.");if(Array.isArray(me)||(me=[me]),S(fe,me,"currentIndices"),ke===void 0||Array.isArray(ke)||(ke=[ke]),ke!==void 0&&S(fe,ke,"newIndices"),ke!==void 0&&me.length!==ke.length)throw new Error("current and new indices must be of equal length.")}function D(fe,me,ke,Te,Me){(function(Ze,nt,ft,xt){var It=y.isPlainObject(xt);if(!Array.isArray(Ze.data))throw new Error("gd.data must be an array");if(!y.isPlainObject(nt))throw new Error("update must be a key:value object");if(ft===void 0)throw new Error("indices must be an integer or array of integers");for(var Et in S(Ze,ft,"indices"),nt){if(!Array.isArray(nt[Et])||nt[Et].length!==ft.length)throw new Error("attribute "+Et+" must be an array of length equal to indices array length");if(It&&(!(Et in xt)||!Array.isArray(xt[Et])||xt[Et].length!==nt[Et].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}})(fe,me,ke,Te);for(var Oe=function(Ze,nt,ft,xt){var It,Et,it,rt,At,Gt=y.isPlainObject(xt),Qt=[];for(var Ve in Array.isArray(ft)||(ft=[ft]),ft=P(ft,Ze.data.length-1),nt)for(var Ye=0;Ye<ft.length;Ye++){if(It=Ze.data[ft[Ye]],Et=(it=e(It,Ve)).get(),rt=nt[Ve][Ye],!y.isArrayOrTypedArray(rt))throw new Error("attribute: "+Ve+" index: "+Ye+" must be an array");if(!y.isArrayOrTypedArray(Et))throw new Error("cannot extend missing or non-array attribute: "+Ve);if(Et.constructor!==rt.constructor)throw new Error("cannot extend array with an array of a different type: "+Ve);At=Gt?xt[Ve][Ye]:xt,p(At)||(At=-1),Qt.push({prop:it,target:Et,insert:rt,maxp:Math.floor(At)})}return Qt}(fe,me,ke,Te),Fe={},qe={},et=0;et<Oe.length;et++){var ze=Oe[et].prop,Ue=Oe[et].maxp,We=Me(Oe[et].target,Oe[et].insert,Ue);ze.set(We[0]),Array.isArray(Fe[ze.astr])||(Fe[ze.astr]=[]),Fe[ze.astr].push(We[1]),Array.isArray(qe[ze.astr])||(qe[ze.astr]=[]),qe[ze.astr].push(Oe[et].target.length)}return{update:Fe,maxPoints:qe}}function F(fe,me){var ke=new fe.constructor(fe.length+me.length);return ke.set(fe),ke.set(me,fe.length),ke}function H(fe,me,ke,Te){fe=y.getGraphDiv(fe),b.clearPromiseQueue(fe);var Me={};if(typeof me=="string")Me[me]=ke;else{if(!y.isPlainObject(me))return y.warn("Restyle fail.",me,ke,Te),Promise.reject();Me=y.extendFlat({},me),Te===void 0&&(Te=ke)}Object.keys(Me).length&&(fe.changed=!0);var Oe=b.coerceTraceIndices(fe,Te),Fe=Z(fe,Me,Oe),qe=Fe.flags;qe.calc&&(fe.calcdata=void 0),qe.clearAxisTypes&&b.clearAxisTypes(fe,Oe,{});var et=[];qe.fullReplot?et.push(W._doPlot):(et.push(h.previousPromises),h.supplyDefaults(fe),qe.markerSize&&(h.doCalcdata(fe),N(et)),qe.style&&et.push(g.doTraceStyle),qe.colorbars&&et.push(g.doColorBars),et.push(k)),et.push(h.rehover,h.redrag),t.add(fe,H,[fe,Fe.undoit,Fe.traces],H,[fe,Fe.redoit,Fe.traces]);var ze=y.syncOrAsync(et,fe);return ze&&ze.then||(ze=Promise.resolve()),ze.then(function(){return fe.emit("plotly_restyle",Fe.eventData),fe})}function V(fe){return fe===void 0?null:fe}function Q(fe,me){return me?function(ke,Te,Me){var Oe=e(ke,Te),Fe=Oe.set;return Oe.set=function(qe){K((Me||"")+Te,Oe.get(),qe,fe),Fe(qe)},Oe}:e}function K(fe,me,ke,Te){if(Array.isArray(me)||Array.isArray(ke))for(var Me=Array.isArray(me)?me:[],Oe=Array.isArray(ke)?ke:[],Fe=Math.max(Me.length,Oe.length),qe=0;qe<Fe;qe++)K(fe+"["+qe+"]",Me[qe],Oe[qe],Te);else if(y.isPlainObject(me)||y.isPlainObject(ke)){var et=y.isPlainObject(me)?me:{},ze=y.isPlainObject(ke)?ke:{},Ue=y.extendFlat({},et,ze);for(var We in Ue)K(fe+"."+We,et[We],ze[We],Te)}else Te[fe]===void 0&&(Te[fe]=V(me))}function Z(fe,me,ke){var Te,Me=fe._fullLayout,Oe=fe._fullData,Fe=fe.data,qe=Me._guiEditing,et=Q(Me._preGUI,qe),ze=y.extendDeepAll({},me);$(me);var Ue,We=w.traceFlags(),Ze={},nt={};function ft(){return ke.map(function(){})}function xt(wt){var Rt=s.id2name(wt);Ue.indexOf(Rt)===-1&&Ue.push(Rt)}function It(wt){return"LAYOUT"+wt+".autorange"}function Et(wt){return"LAYOUT"+wt+".range"}function it(wt){for(var Rt=wt;Rt<Oe.length;Rt++)if(Oe[Rt]._input===Fe[wt])return Oe[Rt]}function rt(wt,Rt,Vt){if(Array.isArray(wt))wt.forEach(function(Jt){rt(Jt,Rt,Vt)});else if(!(wt in me)&&!b.hasParent(me,wt)){var rr;if(wt.substr(0,6)==="LAYOUT")rr=et(fe.layout,wt.replace("LAYOUT",""));else{var qt=ke[Vt];rr=Q(Me._tracePreGUI[it(qt)._fullInput.uid],qe)(Fe[qt],wt)}wt in nt||(nt[wt]=ft()),nt[wt][Vt]===void 0&&(nt[wt][Vt]=V(rr.get())),Rt!==void 0&&rr.set(Rt)}}function At(wt){return function(Rt){return Oe[Rt][wt]}}function Gt(wt){return function(Rt,Vt){return Rt===!1?Oe[ke[Vt]][wt]:null}}for(var Qt in me){if(b.hasParent(me,Qt))throw new Error("cannot set "+Qt+" and a parent attribute simultaneously");var Ve,Ye,Be,Je,Se,Pe,De=me[Qt];if(Qt!=="autobinx"&&Qt!=="autobiny"||(Qt=Qt.charAt(Qt.length-1)+"bins",De=Array.isArray(De)?De.map(Gt(Qt)):De===!1?ke.map(At(Qt)):null),Ze[Qt]=De,Qt.substr(0,6)!=="LAYOUT"){for(nt[Qt]=ft(),Te=0;Te<ke.length;Te++)if(Ve=Fe[ke[Te]],Ye=it(ke[Te]),Je=(Be=Q(Me._tracePreGUI[Ye._fullInput.uid],qe)(Ve,Qt)).get(),(Se=Array.isArray(De)?De[Te%De.length]:De)!==void 0){var Ie=Be.parts[Be.parts.length-1],$e=Qt.substr(0,Qt.length-Ie.length-1),st=$e?$e+".":"",dt=$e?e(Ye,$e).get():Ye;if((Pe=n.getTraceValObject(Ye,Be.parts))&&Pe.impliedEdits&&Se!==null)for(var ut in Pe.impliedEdits)rt(y.relativeAttr(Qt,ut),Pe.impliedEdits[ut],Te);else if(Ie!=="thicknessmode"&&Ie!=="lenmode"||Je===Se||Se!=="fraction"&&Se!=="pixels"||!dt){if(Qt==="type"&&(Se==="pie"!=(Je==="pie")||Se==="funnelarea"!=(Je==="funnelarea"))){var Lt="x",lt="y";Se!=="bar"&&Je!=="bar"||Ve.orientation!=="h"||(Lt="y",lt="x"),y.swapAttrs(Ve,["?","?src"],"labels",Lt),y.swapAttrs(Ve,["d?","?0"],"label",Lt),y.swapAttrs(Ve,["?","?src"],"values",lt),Je==="pie"||Je==="funnelarea"?(e(Ve,"marker.color").set(e(Ve,"marker.colors").get()),Me._pielayer.selectAll("g.trace").remove()):i.traceIs(Ve,"cartesian")&&e(Ve,"marker.colors").set(e(Ve,"marker.color").get())}}else{var Ct=Me._size,Pt=dt.orient,Ke=Pt==="top"||Pt==="bottom";if(Ie==="thicknessmode"){var mt=Ke?Ct.h:Ct.w;rt(st+"thickness",dt.thickness*(Se==="fraction"?1/mt:mt),Te)}else{var Dt=Ke?Ct.w:Ct.h;rt(st+"len",dt.len*(Se==="fraction"?1/Dt:Dt),Te)}}if(nt[Qt][Te]=V(Je),["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Qt)!==-1){if(Qt==="orientation"){Be.set(Se);var Bt=Ve.x&&!Ve.y?"h":"v";if((Be.get()||Bt)===Ye.orientation)continue}else Qt==="orientationaxes"&&(Ve.orientation={v:"h",h:"v"}[Ye.orientation]);b.swapXYData(Ve),We.calc=We.clearAxisTypes=!0}else h.dataArrayContainers.indexOf(Be.parts[0])!==-1?(b.manageArrayContainers(Be,Se,nt),We.calc=!0):(Pe?Pe.arrayOk&&!i.traceIs(Ye,"regl")&&(y.isArrayOrTypedArray(Se)||y.isArrayOrTypedArray(Je))?We.calc=!0:w.update(We,Pe):We.calc=!0,Be.set(Se))}if(["swapxyaxes","orientationaxes"].indexOf(Qt)!==-1&&s.swap(fe,ke),Qt==="orientationaxes"){var Zt=e(fe.layout,"hovermode"),Re=Zt.get();Re==="x"?Zt.set("y"):Re==="y"?Zt.set("x"):Re==="x unified"?Zt.set("y unified"):Re==="y unified"&&Zt.set("x unified")}if(["orientation","type"].indexOf(Qt)!==-1){for(Ue=[],Te=0;Te<ke.length;Te++){var ct=Fe[ke[Te]];i.traceIs(ct,"cartesian")&&(xt(ct.xaxis||"x"),xt(ct.yaxis||"y"))}rt(Ue.map(It),!0,0),rt(Ue.map(Et),[0,1],0)}}else Be=et(fe.layout,Qt.replace("LAYOUT","")),nt[Qt]=[V(Be.get())],Be.set(Array.isArray(De)?De[0]:De),We.calc=!0}return(We.calc||We.plot)&&(We.fullReplot=!0),{flags:We,undoit:nt,redoit:Ze,traces:ke,eventData:y.extendDeepNoArrays([],[ze,ke])}}function $(fe){var me,ke,Te,Me=y.counterRegex("axis",".title",!1,!1),Oe=/colorbar\.title$/,Fe=Object.keys(fe);for(me=0;me<Fe.length;me++)ke=Fe[me],Te=fe[ke],ke!=="title"&&!Me.test(ke)&&!Oe.test(ke)||typeof Te!="string"&&typeof Te!="number"?ke.indexOf("titlefont")>-1&&ke.indexOf("grouptitlefont")===-1?qe(ke,ke.replace("titlefont","title.font")):ke.indexOf("titleposition")>-1?qe(ke,ke.replace("titleposition","title.position")):ke.indexOf("titleside")>-1?qe(ke,ke.replace("titleside","title.side")):ke.indexOf("titleoffset")>-1&&qe(ke,ke.replace("titleoffset","title.offset")):qe(ke,ke.replace("title","title.text"));function qe(et,ze){fe[ze]=fe[et],delete fe[et]}}function re(fe,me,ke){fe=y.getGraphDiv(fe),b.clearPromiseQueue(fe);var Te={};if(typeof me=="string")Te[me]=ke;else{if(!y.isPlainObject(me))return y.warn("Relayout fail.",me,ke),Promise.reject();Te=y.extendFlat({},me)}Object.keys(Te).length&&(fe.changed=!0);var Me=Y(fe,Te),Oe=Me.flags;Oe.calc&&(fe.calcdata=void 0);var Fe=[h.previousPromises];Oe.layoutReplot?Fe.push(g.layoutReplot):Object.keys(Te).length&&(R(fe,Oe,Me)||h.supplyDefaults(fe),Oe.legend&&Fe.push(g.doLegend),Oe.layoutstyle&&Fe.push(g.layoutStyles),Oe.axrange&&N(Fe,Me.rangesAltered),Oe.ticks&&Fe.push(g.doTicksRelayout),Oe.modebar&&Fe.push(g.doModeBar),Oe.camera&&Fe.push(g.doCamera),Oe.colorbars&&Fe.push(g.doColorBars),Fe.push(k)),Fe.push(h.rehover,h.redrag),t.add(fe,re,[fe,Me.undoit],re,[fe,Me.redoit]);var qe=y.syncOrAsync(Fe,fe);return qe&&qe.then||(qe=Promise.resolve(fe)),qe.then(function(){return fe.emit("plotly_relayout",Me.eventData),fe})}function R(fe,me,ke){var Te=fe._fullLayout;if(!me.axrange)return!1;for(var Me in me)if(Me!=="axrange"&&me[Me])return!1;for(var Oe in ke.rangesAltered){var Fe=s.id2name(Oe),qe=fe.layout[Fe],et=Te[Fe];if(et.autorange=qe.autorange,qe.range&&(et.range=qe.range.slice()),et.cleanRange(),et._matchGroup){for(var ze in et._matchGroup)if(ze!==Oe){var Ue=Te[s.id2name(ze)];Ue.autorange=et.autorange,Ue.range=et.range.slice(),Ue._input.range=et.range.slice()}}}return!0}function N(fe,me){var ke=me?function(Te){var Me=[],Oe=!0;for(var Fe in me){var qe=s.getFromId(Te,Fe);if(Me.push(Fe),(qe.ticklabelposition||"").indexOf("inside")!==-1&&qe._anchorAxis&&Me.push(qe._anchorAxis._id),qe._matchGroup)for(var et in qe._matchGroup)me[et]||Me.push(et);qe.automargin&&(Oe=!1)}return s.draw(Te,Me,{skipTitle:Oe})}:function(Te){return s.draw(Te,"redraw")};fe.push(v,g.doAutoRangeAndConstraints,ke,g.drawData,g.finalDraw)}var U=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,te=/^[xyz]axis[0-9]*\.autorange$/,j=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function Y(fe,me){var ke,Te,Me,Oe=fe.layout,Fe=fe._fullLayout,qe=Fe._guiEditing,et=Q(Fe._preGUI,qe),ze=Object.keys(me),Ue=s.list(fe),We=y.extendDeepAll({},me),Ze={};for($(me),ze=Object.keys(me),Te=0;Te<ze.length;Te++)if(ze[Te].indexOf("allaxes")===0){for(Me=0;Me<Ue.length;Me++){var nt=Ue[Me]._id.substr(1),ft=nt.indexOf("scene")!==-1?nt+".":"",xt=ze[Te].replace("allaxes",ft+Ue[Me]._name);me[xt]||(me[xt]=me[ze[Te]])}delete me[ze[Te]]}var It=w.layoutFlags(),Et={},it={};function rt(qt,Jt){if(Array.isArray(qt))qt.forEach(function(gr){rt(gr,Jt)});else if(!(qt in me)&&!b.hasParent(me,qt)){var or=et(Oe,qt);qt in it||(it[qt]=V(or.get())),Jt!==void 0&&or.set(Jt)}}var At,Gt={};function Qt(qt){var Jt=s.name2id(qt.split(".")[0]);return Gt[Jt]=1,Jt}for(var Ve in me){if(b.hasParent(me,Ve))throw new Error("cannot set "+Ve+" and a parent attribute simultaneously");for(var Ye=et(Oe,Ve),Be=me[Ve],Je=Ye.parts.length-1;Je>0&&typeof Ye.parts[Je]!="string";)Je--;var Se=Ye.parts[Je],Pe=Ye.parts[Je-1]+"."+Se,De=Ye.parts.slice(0,Je).join("."),Ie=e(fe.layout,De).get(),$e=e(Fe,De).get(),st=Ye.get();if(Be!==void 0){Et[Ve]=Be,it[Ve]=Se==="reverse"?Be:V(st);var dt=n.getLayoutValObject(Fe,Ye.parts);if(dt&&dt.impliedEdits&&Be!==null)for(var ut in dt.impliedEdits)rt(y.relativeAttr(Ve,ut),dt.impliedEdits[ut]);if(["width","height"].indexOf(Ve)!==-1)if(Be){rt("autosize",null);var Lt=Ve==="height"?"width":"height";rt(Lt,Fe[Lt])}else Fe[Ve]=fe._initialAutoSize[Ve];else if(Ve==="autosize")rt("width",Be?null:Fe.width),rt("height",Be?null:Fe.height);else if(Pe.match(U))Qt(Pe),e(Fe,De+"._inputRange").set(null);else if(Pe.match(te)){Qt(Pe),e(Fe,De+"._inputRange").set(null);var lt=e(Fe,De).get();lt._inputDomain&&(lt._input.domain=lt._inputDomain.slice())}else Pe.match(j)&&e(Fe,De+"._inputDomain").set(null);if(Se==="type"){At=Ie;var Ct=$e.type==="linear"&&Be==="log",Pt=$e.type==="log"&&Be==="linear";if(Ct||Pt){if(At&&At.range)if($e.autorange)Ct&&(At.range=At.range[1]>At.range[0]?[1,2]:[2,1]);else{var Ke=At.range[0],mt=At.range[1];Ct?(Ke<=0&&mt<=0&&rt(De+".autorange",!0),Ke<=0?Ke=mt/1e6:mt<=0&&(mt=Ke/1e6),rt(De+".range[0]",Math.log(Ke)/Math.LN10),rt(De+".range[1]",Math.log(mt)/Math.LN10)):(rt(De+".range[0]",Math.pow(10,Ke)),rt(De+".range[1]",Math.pow(10,mt)))}else rt(De+".autorange",!0);Array.isArray(Fe._subplots.polar)&&Fe._subplots.polar.length&&Fe[Ye.parts[0]]&&Ye.parts[1]==="radialaxis"&&delete Fe[Ye.parts[0]]._subplot.viewInitial["radialaxis.range"],i.getComponentMethod("annotations","convertCoords")(fe,$e,Be,rt),i.getComponentMethod("images","convertCoords")(fe,$e,Be,rt)}else rt(De+".autorange",!0),rt(De+".range",null);e(Fe,De+"._inputRange").set(null)}else if(Se.match(_)){var Dt=e(Fe,Ve).get(),Bt=(Be||{}).type;Bt&&Bt!=="-"||(Bt="linear"),i.getComponentMethod("annotations","convertCoords")(fe,Dt,Bt,rt),i.getComponentMethod("images","convertCoords")(fe,Dt,Bt,rt)}var Zt=c.containerArrayMatch(Ve);if(Zt){ke=Zt.array,Te=Zt.index;var Re=Zt.property,ct=dt||{editType:"calc"};Te!==""&&Re===""&&(c.isAddVal(Be)?it[Ve]=null:c.isRemoveVal(Be)?it[Ve]=(e(Oe,ke).get()||[])[Te]:y.warn("unrecognized full object value",me)),w.update(It,ct),Ze[ke]||(Ze[ke]={});var wt=Ze[ke][Te];wt||(wt=Ze[ke][Te]={}),wt[Re]=Be,delete me[Ve]}else Se==="reverse"?(Ie.range?Ie.range.reverse():(rt(De+".autorange",!0),Ie.range=[1,0]),$e.autorange?It.calc=!0:It.plot=!0):(Fe._has("scatter-like")&&Fe._has("regl")&&Ve==="dragmode"&&(Be==="lasso"||Be==="select")&&st!=="lasso"&&st!=="select"||Fe._has("gl2d")?It.plot=!0:dt?w.update(It,dt):It.calc=!0,Ye.set(Be))}}for(ke in Ze)c.applyContainerArrayChanges(fe,et(Oe,ke),Ze[ke],It,et)||(It.plot=!0);for(var Rt in Gt){var Vt=(At=s.getFromId(fe,Rt))&&At._constraintGroup;if(Vt)for(var rr in It.calc=!0,Vt)Gt[rr]||(s.getFromId(fe,rr)._constraintShrinkable=!0)}return(J(fe)||me.height||me.width)&&(It.plot=!0),(It.plot||It.calc)&&(It.layoutReplot=!0),{flags:It,rangesAltered:Gt,undoit:it,redoit:Et,eventData:We}}function J(fe){var me=fe._fullLayout,ke=me.width,Te=me.height;return fe.layout.autosize&&h.plotAutoSize(fe,fe.layout,me),me.width!==ke||me.height!==Te}function ee(fe,me,ke,Te){fe=y.getGraphDiv(fe),b.clearPromiseQueue(fe),y.isPlainObject(me)||(me={}),y.isPlainObject(ke)||(ke={}),Object.keys(me).length&&(fe.changed=!0),Object.keys(ke).length&&(fe.changed=!0);var Me=b.coerceTraceIndices(fe,Te),Oe=Z(fe,y.extendFlat({},me),Me),Fe=Oe.flags,qe=Y(fe,y.extendFlat({},ke)),et=qe.flags;(Fe.calc||et.calc)&&(fe.calcdata=void 0),Fe.clearAxisTypes&&b.clearAxisTypes(fe,Me,ke);var ze=[];et.layoutReplot?ze.push(g.layoutReplot):Fe.fullReplot?ze.push(W._doPlot):(ze.push(h.previousPromises),R(fe,et,qe)||h.supplyDefaults(fe),Fe.style&&ze.push(g.doTraceStyle),(Fe.colorbars||et.colorbars)&&ze.push(g.doColorBars),et.legend&&ze.push(g.doLegend),et.layoutstyle&&ze.push(g.layoutStyles),et.axrange&&N(ze,qe.rangesAltered),et.ticks&&ze.push(g.doTicksRelayout),et.modebar&&ze.push(g.doModeBar),et.camera&&ze.push(g.doCamera),ze.push(k)),ze.push(h.rehover,h.redrag),t.add(fe,ee,[fe,Oe.undoit,qe.undoit,Oe.traces],ee,[fe,Oe.redoit,qe.redoit,Oe.traces]);var Ue=y.syncOrAsync(ze,fe);return Ue&&Ue.then||(Ue=Promise.resolve(fe)),Ue.then(function(){return fe.emit("plotly_update",{data:Oe.eventData,layout:qe.eventData}),fe})}function ne(fe){return function(me){me._fullLayout._guiEditing=!0;var ke=fe.apply(null,arguments);return me._fullLayout._guiEditing=!1,ke}}var se=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],oe=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function he(fe,me){for(var ke=0;ke<me.length;ke++){var Te=me[ke],Me=fe.match(Te.pattern);if(Me){var Oe=Me[1]||"";return{head:Oe,tail:fe.substr(Oe.length+1),attr:Te.attr}}}}function le(fe,me){var ke=e(me,fe).get();if(ke!==void 0)return ke;var Te=fe.split(".");for(Te.pop();Te.length>1;)if(Te.pop(),(ke=e(me,Te.join(".")+".uirevision").get())!==void 0)return ke;return me.uirevision}function de(fe,me){for(var ke=0;ke<me.length;ke++)if(me[ke]._fullInput.uid===fe)return ke;return-1}function xe(fe,me,ke){for(var Te=0;Te<me.length;Te++)if(me[Te].uid===fe)return Te;return!me[ke]||me[ke].uid?-1:ke}function we(fe,me){var ke=y.isPlainObject(fe),Te=Array.isArray(fe);return ke||Te?(ke&&y.isPlainObject(me)||Te&&Array.isArray(me))&&JSON.stringify(fe)===JSON.stringify(me):fe===me}function be(fe,me,ke,Te){var Me,Oe,Fe,qe=Te.getValObject,et=Te.flags,ze=Te.immutable,Ue=Te.inArray,We=Te.arrayIndex;function Ze(){var Ie=Me.editType;Ue&&Ie.indexOf("arraydraw")!==-1?y.pushUnique(et.arrays[Ue],We):(w.update(et,Me),Ie!=="none"&&et.nChanges++,Te.transition&&Me.anim&&et.nChangesAnim++,(U.test(Fe)||te.test(Fe))&&(et.rangesAltered[ke[0]]=1),j.test(Fe)&&e(me,"_inputDomain").set(null),Oe==="datarevision"&&(et.newDataRevision=1))}function nt(Ie){return Ie.valType==="data_array"||Ie.arrayOk}for(Oe in fe){if(et.calc&&!Te.transition)return;var ft=fe[Oe],xt=me[Oe],It=ke.concat(Oe);if(Fe=It.join("."),Oe.charAt(0)!=="_"&&typeof ft!="function"&&ft!==xt){if((Oe==="tick0"||Oe==="dtick")&&ke[0]!=="geo"){var Et=me.tickmode;if(Et==="auto"||Et==="array"||!Et)continue}if((Oe!=="range"||!me.autorange)&&(Oe!=="zmin"&&Oe!=="zmax"||me.type!=="contourcarpet")&&(Me=qe(It))&&(!Me._compareAsJSON||JSON.stringify(ft)!==JSON.stringify(xt))){var it,rt=Me.valType,At=nt(Me),Gt=Array.isArray(ft),Qt=Array.isArray(xt);if(Gt&&Qt){var Ve="_input_"+Oe,Ye=fe[Ve],Be=me[Ve];if(Array.isArray(Ye)&&Ye===Be)continue}if(xt===void 0)At&&Gt?et.calc=!0:Ze();else if(Me._isLinkedToArray){var Je=[],Se=!1;Ue||(et.arrays[Oe]=Je);var Pe=Math.min(ft.length,xt.length),De=Math.max(ft.length,xt.length);if(Pe!==De){if(Me.editType!=="arraydraw"){Ze();continue}Se=!0}for(it=0;it<Pe;it++)be(ft[it],xt[it],It.concat(it),y.extendFlat({inArray:Oe,arrayIndex:it},Te));if(Se)for(it=Pe;it<De;it++)Je.push(it)}else!rt&&y.isPlainObject(ft)?be(ft,xt,It,Te):At?Gt&&Qt?(ze&&(et.calc=!0),(ze||Te.newDataRevision)&&Ze()):Gt!==Qt?et.calc=!0:Ze():Gt&&Qt&&ft.length===xt.length&&String(ft)===String(xt)||Ze()}}}for(Oe in me)if(!(Oe in fe)&&Oe.charAt(0)!=="_"&&typeof me[Oe]!="function"){if(nt(Me=qe(ke.concat(Oe)))&&Array.isArray(me[Oe]))return void(et.calc=!0);Ze()}}function Ae(fe){var me=fe._fullLayout,ke=fe.getBoundingClientRect();if(!y.equalDomRects(ke,me._lastBBox)){var Te=me._invTransform=y.inverseTransformMatrix(y.getFullTransformMatrix(fe));me._invScaleX=Math.sqrt(Te[0][0]*Te[0][0]+Te[0][1]*Te[0][1]+Te[0][2]*Te[0][2]),me._invScaleY=Math.sqrt(Te[1][0]*Te[1][0]+Te[1][1]*Te[1][1]+Te[1][2]*Te[1][2]),me._lastBBox=ke}}W.animate=function(fe,me,ke){if(fe=y.getGraphDiv(fe),!y.isPlotDiv(fe))throw new Error("This element is not a Plotly plot: "+fe+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Te=fe._transitionData;Te._frameQueue||(Te._frameQueue=[]);var Me=(ke=h.supplyAnimationDefaults(ke)).transition,Oe=ke.frame;function Fe(ze){return Array.isArray(Me)?ze>=Me.length?Me[0]:Me[ze]:Me}function qe(ze){return Array.isArray(Oe)?ze>=Oe.length?Oe[0]:Oe[ze]:Oe}function et(ze,Ue){var We=0;return function(){if(ze&&++We===Ue)return ze()}}return Te._frameWaitingCnt===void 0&&(Te._frameWaitingCnt=0),new Promise(function(ze,Ue){function We(){Te._currentFrame&&Te._currentFrame.onComplete&&Te._currentFrame.onComplete();var Ye=Te._currentFrame=Te._frameQueue.shift();if(Ye){var Be=Ye.name?Ye.name.toString():null;fe._fullLayout._currentFrame=Be,Te._lastFrameAt=Date.now(),Te._timeToNext=Ye.frameOpts.duration,h.transition(fe,Ye.frame.data,Ye.frame.layout,b.coerceTraceIndices(fe,Ye.frame.traces),Ye.frameOpts,Ye.transitionOpts).then(function(){Ye.onComplete&&Ye.onComplete()}),fe.emit("plotly_animatingframe",{name:Be,frame:Ye.frame,animation:{frame:Ye.frameOpts,transition:Ye.transitionOpts}})}else fe.emit("plotly_animated"),window.cancelAnimationFrame(Te._animationRaf),Te._animationRaf=null}function Ze(){fe.emit("plotly_animating"),Te._lastFrameAt=-1/0,Te._timeToNext=0,Te._runningTransitions=0,Te._currentFrame=null;var Ye=function(){Te._animationRaf=window.requestAnimationFrame(Ye),Date.now()-Te._lastFrameAt>Te._timeToNext&&We()};Ye()}var nt,ft,xt=0;function It(Ye){return Array.isArray(Me)?xt>=Me.length?Ye.transitionOpts=Me[xt]:Ye.transitionOpts=Me[0]:Ye.transitionOpts=Me,xt++,Ye}var Et=[],it=me==null,rt=Array.isArray(me);if(!it&&!rt&&y.isPlainObject(me))Et.push({type:"object",data:It(y.extendFlat({},me))});else if(it||["string","number"].indexOf(typeof me)!==-1)for(nt=0;nt<Te._frames.length;nt++)(ft=Te._frames[nt])&&(it||String(ft.group)===String(me))&&Et.push({type:"byname",name:String(ft.name),data:It({name:ft.name})});else if(rt)for(nt=0;nt<me.length;nt++){var At=me[nt];["number","string"].indexOf(typeof At)!==-1?(At=String(At),Et.push({type:"byname",name:At,data:It({name:At})})):y.isPlainObject(At)&&Et.push({type:"object",data:It(y.extendFlat({},At))})}for(nt=0;nt<Et.length;nt++)if((ft=Et[nt]).type==="byname"&&!Te._frameHash[ft.data.name])return y.warn('animate failure: frame not found: "'+ft.data.name+'"'),void Ue();["next","immediate"].indexOf(ke.mode)!==-1&&function(){if(Te._frameQueue.length!==0){for(;Te._frameQueue.length;){var Ye=Te._frameQueue.pop();Ye.onInterrupt&&Ye.onInterrupt()}fe.emit("plotly_animationinterrupted",[])}}(),ke.direction==="reverse"&&Et.reverse();var Gt=fe._fullLayout._currentFrame;if(Gt&&ke.fromcurrent){var Qt=-1;for(nt=0;nt<Et.length;nt++)if((ft=Et[nt]).type==="byname"&&ft.name===Gt){Qt=nt;break}if(Qt>0&&Qt<Et.length-1){var Ve=[];for(nt=0;nt<Et.length;nt++)ft=Et[nt],(Et[nt].type!=="byname"||nt>Qt)&&Ve.push(ft);Et=Ve}}Et.length>0?function(Ye){if(Ye.length!==0){for(var Be=0;Be<Ye.length;Be++){var Je;Je=Ye[Be].type==="byname"?h.computeFrame(fe,Ye[Be].name):Ye[Be].data;var Se=qe(Be),Pe=Fe(Be);Pe.duration=Math.min(Pe.duration,Se.duration);var De={frame:Je,name:Ye[Be].name,frameOpts:Se,transitionOpts:Pe};Be===Ye.length-1&&(De.onComplete=et(ze,2),De.onInterrupt=Ue),Te._frameQueue.push(De)}ke.mode==="immediate"&&(Te._lastFrameAt=-1/0),Te._animationRaf||Ze()}}(Et):(fe.emit("plotly_animated"),ze())})},W.addFrames=function(fe,me,ke){if(fe=y.getGraphDiv(fe),me==null)return Promise.resolve();if(!y.isPlotDiv(fe))throw new Error("This element is not a Plotly plot: "+fe+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Te,Me,Oe,Fe,qe=fe._transitionData._frames,et=fe._transitionData._frameHash;if(!Array.isArray(me))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+me);var ze=qe.length+2*me.length,Ue=[],We={};for(Te=me.length-1;Te>=0;Te--)if(y.isPlainObject(me[Te])){var Ze=me[Te].name,nt=(et[Ze]||We[Ze]||{}).name,ft=me[Te].name,xt=et[nt]||We[nt];nt&&ft&&typeof ft=="number"&&xt&&T<5&&(T++,y.warn('addFrames: overwriting frame "'+(et[nt]||We[nt]).name+'" with a frame whose name of type "number" also equates to "'+nt+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),T===5&&y.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),We[Ze]={name:Ze},Ue.push({frame:h.supplyFrameDefaults(me[Te]),index:ke&&ke[Te]!==void 0&&ke[Te]!==null?ke[Te]:ze+Te})}Ue.sort(function(Ve,Ye){return Ve.index>Ye.index?-1:Ve.index<Ye.index?1:0});var It=[],Et=[],it=qe.length;for(Te=Ue.length-1;Te>=0;Te--){if(typeof(Me=Ue[Te].frame).name=="number"&&y.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Me.name)for(;et[Me.name="frame "+fe._transitionData._counter++];);if(et[Me.name]){for(Oe=0;Oe<qe.length&&(qe[Oe]||{}).name!==Me.name;Oe++);It.push({type:"replace",index:Oe,value:Me}),Et.unshift({type:"replace",index:Oe,value:qe[Oe]})}else Fe=Math.max(0,Math.min(Ue[Te].index,it)),It.push({type:"insert",index:Fe,value:Me}),Et.unshift({type:"delete",index:Fe}),it++}var rt=h.modifyFrames,At=h.modifyFrames,Gt=[fe,Et],Qt=[fe,It];return t&&t.add(fe,rt,Gt,At,Qt),h.modifyFrames(fe,It)},W.deleteFrames=function(fe,me){if(fe=y.getGraphDiv(fe),!y.isPlotDiv(fe))throw new Error("This element is not a Plotly plot: "+fe);var ke,Te,Me=fe._transitionData._frames,Oe=[],Fe=[];if(!me)for(me=[],ke=0;ke<Me.length;ke++)me.push(ke);for((me=me.slice()).sort(),ke=me.length-1;ke>=0;ke--)Te=me[ke],Oe.push({type:"delete",index:Te}),Fe.unshift({type:"insert",index:Te,value:Me[Te]});var qe=h.modifyFrames,et=h.modifyFrames,ze=[fe,Fe],Ue=[fe,Oe];return t&&t.add(fe,qe,ze,et,Ue),h.modifyFrames(fe,Oe)},W.addTraces=function fe(me,ke,Te){me=y.getGraphDiv(me);var Me,Oe,Fe=[],qe=W.deleteTraces,et=fe,ze=[me,Fe],Ue=[me,ke];for(function(We,Ze,nt){var ft,xt;if(!Array.isArray(We.data))throw new Error("gd.data must be an array.");if(Ze===void 0)throw new Error("traces must be defined.");for(Array.isArray(Ze)||(Ze=[Ze]),ft=0;ft<Ze.length;ft++)if(typeof(xt=Ze[ft])!="object"||Array.isArray(xt)||xt===null)throw new Error("all values in traces array must be non-array objects");if(nt===void 0||Array.isArray(nt)||(nt=[nt]),nt!==void 0&&nt.length!==Ze.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(me,ke,Te),Array.isArray(ke)||(ke=[ke]),ke=ke.map(function(We){return y.extendFlat({},We)}),b.cleanData(ke),Me=0;Me<ke.length;Me++)me.data.push(ke[Me]);for(Me=0;Me<ke.length;Me++)Fe.push(-ke.length+Me);if(Te===void 0)return Oe=W.redraw(me),t.add(me,qe,ze,et,Ue),Oe;Array.isArray(Te)||(Te=[Te]);try{E(me,Fe,Te)}catch(We){throw me.data.splice(me.data.length-ke.length,ke.length),We}return t.startSequence(me),t.add(me,qe,ze,et,Ue),Oe=W.moveTraces(me,Fe,Te),t.stopSequence(me),Oe},W.deleteTraces=function fe(me,ke){me=y.getGraphDiv(me);var Te,Me,Oe=[],Fe=W.addTraces,qe=fe,et=[me,Oe,ke],ze=[me,ke];if(ke===void 0)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(ke)||(ke=[ke]),S(me,ke,"indices"),(ke=P(ke,me.data.length-1)).sort(y.sorterDes),Te=0;Te<ke.length;Te+=1)Me=me.data.splice(ke[Te],1)[0],Oe.push(Me);var Ue=W.redraw(me);return t.add(me,Fe,et,qe,ze),Ue},W.extendTraces=function fe(me,ke,Te,Me){function Oe(ze,Ue,We){var Ze,nt;if(y.isTypedArray(ze))if(We<0){var ft=new ze.constructor(0),xt=F(ze,Ue);We<0?(Ze=xt,nt=ft):(Ze=ft,nt=xt)}else if(Ze=new ze.constructor(We),nt=new ze.constructor(ze.length+Ue.length-We),We===Ue.length)Ze.set(Ue),nt.set(ze);else if(We<Ue.length){var It=Ue.length-We;Ze.set(Ue.subarray(It)),nt.set(ze),nt.set(Ue.subarray(0,It),ze.length)}else{var Et=We-Ue.length,it=ze.length-Et;Ze.set(ze.subarray(it)),Ze.set(Ue,Et),nt.set(ze.subarray(0,it))}else Ze=ze.concat(Ue),nt=We>=0&&We<Ze.length?Ze.splice(0,Ze.length-We):[];return[Ze,nt]}var Fe=D(me=y.getGraphDiv(me),ke,Te,Me,Oe),qe=W.redraw(me),et=[me,Fe.update,Te,Fe.maxPoints];return t.add(me,W.prependTraces,et,fe,arguments),qe},W.moveTraces=function fe(me,ke,Te){var Me,Oe=[],Fe=[],qe=fe,et=fe,ze=[me=y.getGraphDiv(me),Te,ke],Ue=[me,ke,Te];if(E(me,ke,Te),ke=Array.isArray(ke)?ke:[ke],Te===void 0)for(Te=[],Me=0;Me<ke.length;Me++)Te.push(-ke.length+Me);for(Te=Array.isArray(Te)?Te:[Te],ke=P(ke,me.data.length-1),Te=P(Te,me.data.length-1),Me=0;Me<me.data.length;Me++)ke.indexOf(Me)===-1&&Oe.push(me.data[Me]);for(Me=0;Me<ke.length;Me++)Fe.push({newIndex:Te[Me],trace:me.data[ke[Me]]});for(Fe.sort(function(Ze,nt){return Ze.newIndex-nt.newIndex}),Me=0;Me<Fe.length;Me+=1)Oe.splice(Fe[Me].newIndex,0,Fe[Me].trace);me.data=Oe;var We=W.redraw(me);return t.add(me,qe,ze,et,Ue),We},W.prependTraces=function fe(me,ke,Te,Me){function Oe(ze,Ue,We){var Ze,nt;if(y.isTypedArray(ze))if(We<=0){var ft=new ze.constructor(0),xt=F(Ue,ze);We<0?(Ze=xt,nt=ft):(Ze=ft,nt=xt)}else if(Ze=new ze.constructor(We),nt=new ze.constructor(ze.length+Ue.length-We),We===Ue.length)Ze.set(Ue),nt.set(ze);else if(We<Ue.length){var It=Ue.length-We;Ze.set(Ue.subarray(0,It)),nt.set(Ue.subarray(It)),nt.set(ze,It)}else{var Et=We-Ue.length;Ze.set(Ue),Ze.set(ze.subarray(0,Et),Ue.length),nt.set(ze.subarray(Et))}else Ze=Ue.concat(ze),nt=We>=0&&We<Ze.length?Ze.splice(We,Ze.length):[];return[Ze,nt]}var Fe=D(me=y.getGraphDiv(me),ke,Te,Me,Oe),qe=W.redraw(me),et=[me,Fe.update,Te,Fe.maxPoints];return t.add(me,W.extendTraces,et,fe,arguments),qe},W.newPlot=function(fe,me,ke,Te){return fe=y.getGraphDiv(fe),h.cleanPlot([],{},fe._fullData||[],fe._fullLayout||{}),h.purge(fe),W._doPlot(fe,me,ke,Te)},W._doPlot=function(fe,me,ke,Te){var Me;if(fe=y.getGraphDiv(fe),r.init(fe),y.isPlainObject(me)){var Oe=me;me=Oe.data,ke=Oe.layout,Te=Oe.config,Me=Oe.frames}if(r.triggerHandler(fe,"plotly_beforeplot",[me,ke,Te])===!1)return Promise.reject();me||ke||y.isPlotDiv(fe)||y.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",fe),I(fe,Te),ke||(ke={}),o.select(fe).classed("js-plotly-plot",!0),a.makeTester(),Array.isArray(fe._promises)||(fe._promises=[]);var Fe=(fe.data||[]).length===0&&Array.isArray(me);Array.isArray(me)&&(b.cleanData(me),Fe?fe.data=me:fe.data.push.apply(fe.data,me),fe.empty=!1),fe.layout&&!Fe||(fe.layout=b.cleanLayout(ke)),h.supplyDefaults(fe);var qe=fe._fullLayout,et=qe._has("cartesian");qe._replotting=!0,(Fe||qe._shouldCreateBgLayer)&&(function(Et){var it=o.select(Et),rt=Et._fullLayout;if(rt._calcInverseTransform=Ae,rt._calcInverseTransform(Et),rt._container=it.selectAll(".plot-container").data([0]),rt._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),rt._paperdiv=rt._container.selectAll(".svg-container").data([0]),rt._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),rt._glcontainer=rt._paperdiv.selectAll(".gl-container").data([{}]),rt._glcontainer.enter().append("div").classed("gl-container",!0),rt._paperdiv.selectAll(".main-svg").remove(),rt._paperdiv.select(".modebar-container").remove(),rt._paper=rt._paperdiv.insert("svg",":first-child").classed("main-svg",!0),rt._toppaper=rt._paperdiv.append("svg").classed("main-svg",!0),rt._modebardiv=rt._paperdiv.append("div"),delete rt._modeBar,rt._hoverpaper=rt._paperdiv.append("svg").classed("main-svg",!0),!rt._uid){var At={};o.selectAll("defs").each(function(){this.id&&(At[this.id.split("-")[1]]=1)}),rt._uid=y.randstr(At)}rt._paperdiv.selectAll(".main-svg").attr(d.svgAttrs),rt._defs=rt._paper.append("defs").attr("id","defs-"+rt._uid),rt._clips=rt._defs.append("g").classed("clips",!0),rt._topdefs=rt._toppaper.append("defs").attr("id","topdefs-"+rt._uid),rt._topclips=rt._topdefs.append("g").classed("clips",!0),rt._bgLayer=rt._paper.append("g").classed("bglayer",!0),rt._draggers=rt._paper.append("g").classed("draglayer",!0);var Gt=rt._paper.append("g").classed("layer-below",!0);rt._imageLowerLayer=Gt.append("g").classed("imagelayer",!0),rt._shapeLowerLayer=Gt.append("g").classed("shapelayer",!0),rt._cartesianlayer=rt._paper.append("g").classed("cartesianlayer",!0),rt._polarlayer=rt._paper.append("g").classed("polarlayer",!0),rt._smithlayer=rt._paper.append("g").classed("smithlayer",!0),rt._ternarylayer=rt._paper.append("g").classed("ternarylayer",!0),rt._geolayer=rt._paper.append("g").classed("geolayer",!0),rt._funnelarealayer=rt._paper.append("g").classed("funnelarealayer",!0),rt._pielayer=rt._paper.append("g").classed("pielayer",!0),rt._iciclelayer=rt._paper.append("g").classed("iciclelayer",!0),rt._treemaplayer=rt._paper.append("g").classed("treemaplayer",!0),rt._sunburstlayer=rt._paper.append("g").classed("sunburstlayer",!0),rt._indicatorlayer=rt._toppaper.append("g").classed("indicatorlayer",!0),rt._glimages=rt._paper.append("g").classed("glimages",!0);var Qt=rt._toppaper.append("g").classed("layer-above",!0);rt._imageUpperLayer=Qt.append("g").classed("imagelayer",!0),rt._shapeUpperLayer=Qt.append("g").classed("shapelayer",!0),rt._infolayer=rt._toppaper.append("g").classed("infolayer",!0),rt._menulayer=rt._toppaper.append("g").classed("menulayer",!0),rt._zoomlayer=rt._toppaper.append("g").classed("zoomlayer",!0),rt._hoverlayer=rt._hoverpaper.append("g").classed("hoverlayer",!0),rt._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Et.emit("plotly_framework")}(fe),qe._shouldCreateBgLayer&&delete qe._shouldCreateBgLayer),a.initGradients(fe),a.initPatterns(fe),Fe&&s.saveShowSpikeInitial(fe);var ze=!fe.calcdata||fe.calcdata.length!==(fe._fullData||[]).length;ze&&h.doCalcdata(fe);for(var Ue=0;Ue<fe.calcdata.length;Ue++)fe.calcdata[Ue][0].trace=fe._fullData[Ue];fe._context.responsive?fe._responsiveChartHandler||(fe._responsiveChartHandler=function(){y.isHidden(fe)||h.resize(fe)},window.addEventListener("resize",fe._responsiveChartHandler)):y.clearResponsive(fe);var We=y.extendFlat({},qe._size),Ze=0;function nt(){if(h.clearAutoMarginIds(fe),g.drawMarginPushers(fe),s.allowAutoMargin(fe),qe._has("pie"))for(var Et=fe._fullData,it=0;it<Et.length;it++){var rt=Et[it];rt.type==="pie"&&rt.automargin&&h.allowAutoMargin(fe,"pie."+rt.uid+".automargin")}return h.doAutoMargin(fe),h.previousPromises(fe)}function ft(){fe._transitioning||(g.doAutoRangeAndConstraints(fe),Fe&&s.saveRangeInitial(fe),i.getComponentMethod("rangeslider","calcAutorange")(fe))}var xt=[h.previousPromises,function(){if(Me)return W.addFrames(fe,Me)},function Et(){for(var it=qe._basePlotModules,rt=0;rt<it.length;rt++)it[rt].drawFramework&&it[rt].drawFramework(fe);!qe._glcanvas&&qe._has("gl")&&(qe._glcanvas=qe._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Ve){return Ve.key}),qe._glcanvas.enter().append("canvas").attr("class",function(Ve){return"gl-canvas gl-canvas-"+Ve.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var At=fe._context.plotGlPixelRatio;if(qe._glcanvas){qe._glcanvas.attr("width",qe.width*At).attr("height",qe.height*At).style("width",qe.width+"px").style("height",qe.height+"px");var Gt=qe._glcanvas.data()[0].regl;if(Gt&&(Math.floor(qe.width*At)!==Gt._gl.drawingBufferWidth||Math.floor(qe.height*At)!==Gt._gl.drawingBufferHeight)){var Qt="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Ze)return y.log(Qt+" Clearing graph and plotting again."),h.cleanPlot([],{},fe._fullData,qe),h.supplyDefaults(fe),qe=fe._fullLayout,h.doCalcdata(fe),Ze++,Et();y.error(Qt)}}return qe.modebar.orientation==="h"?qe._modebardiv.style("height",null).style("width","100%"):qe._modebardiv.style("width",null).style("height",qe.height+"px"),h.previousPromises(fe)},nt,function(){if(h.didMarginChange(We,qe._size))return y.syncOrAsync([nt,g.layoutStyles],fe)}];et&&xt.push(function(){if(ze)return y.syncOrAsync([i.getComponentMethod("shapes","calcAutorange"),i.getComponentMethod("annotations","calcAutorange"),ft],fe);ft()}),xt.push(g.layoutStyles),et&&xt.push(function(){return s.draw(fe,Fe?"":"redraw")},function(Et){Et._fullLayout._insideTickLabelsAutorange&&re(Et,Et._fullLayout._insideTickLabelsAutorange).then(function(){Et._fullLayout._insideTickLabelsAutorange=void 0})}),xt.push(g.drawData,g.finalDraw,f,h.addLinks,h.rehover,h.redrag,h.doAutoMargin,function(Et){Et._fullLayout._insideTickLabelsAutorange&&Fe&&s.saveRangeInitial(Et,!0)},h.previousPromises);var It=y.syncOrAsync(xt,fe);return It&&It.then||(It=Promise.resolve()),It.then(function(){return k(fe),fe})},W.purge=function(fe){var me=(fe=y.getGraphDiv(fe))._fullLayout||{},ke=fe._fullData||[];return h.cleanPlot([],{},ke,me),h.purge(fe),r.purge(fe),me._container&&me._container.remove(),delete fe._context,fe},W.react=function(fe,me,ke,Te){var Me,Oe;fe=y.getGraphDiv(fe),b.clearPromiseQueue(fe);var Fe=fe._fullData,qe=fe._fullLayout;if(y.isPlotDiv(fe)&&Fe&&qe){if(y.isPlainObject(me)){var et=me;me=et.data,ke=et.layout,Te=et.config,Me=et.frames}var ze=!1;if(Te){var Ue=y.extendDeep({},fe._context);fe._context=void 0,I(fe,Te),ze=function De(Ie,$e){var st;for(st in Ie)if(st.charAt(0)!=="_"){var dt=Ie[st],ut=$e[st];if(dt!==ut)if(y.isPlainObject(dt)&&y.isPlainObject(ut)){if(De(dt,ut))return!0}else{if(!Array.isArray(dt)||!Array.isArray(ut)||dt.length!==ut.length)return!0;for(var Lt=0;Lt<dt.length;Lt++)if(dt[Lt]!==ut[Lt]&&(!y.isPlainObject(dt[Lt])||!y.isPlainObject(ut[Lt])||De(dt[Lt],ut[Lt])))return!0}}}(Ue,fe._context)}fe.data=me||[],b.cleanData(fe.data),fe.layout=ke||{},b.cleanLayout(fe.layout),function(De,Ie,$e,st){var dt,ut,Lt,lt,Ct,Pt,Ke,mt,Dt,Bt,Zt=st._preGUI,Re=[],ct={},wt={};for(dt in Zt){if(Ct=he(dt,se)){if(Dt=Ct.head,Bt=Ct.tail,ut=Ct.attr||Dt+".uirevision",(lt=(Lt=e(st,ut).get())&&le(ut,Ie))&&lt===Lt){if((Pt=Zt[dt])===null&&(Pt=void 0),we(mt=(Ke=e(Ie,dt)).get(),Pt)){mt===void 0&&Bt==="autorange"&&Re.push(Dt),Ke.set(V(e(st,dt).get()));continue}if(Bt==="autorange"||Bt.substr(0,6)==="range["){var Rt=Zt[Dt+".range[0]"],Vt=Zt[Dt+".range[1]"],rr=Zt[Dt+".autorange"];if(rr||rr===null&&Rt===null&&Vt===null){if(!(Dt in ct)){var qt=e(Ie,Dt).get();ct[Dt]=qt&&(qt.autorange||qt.autorange!==!1&&(!qt.range||qt.range.length!==2))}if(ct[Dt]){Ke.set(V(e(st,dt).get()));continue}}}}}else y.warn("unrecognized GUI edit: "+dt);delete Zt[dt],Ct&&Ct.tail.substr(0,6)==="range["&&(wt[Ct.head]=1)}for(var Jt=0;Jt<Re.length;Jt++){var or=Re[Jt];if(wt[or]){var gr=e(Ie,or).get();gr&&delete gr.autorange}}var dr=st._tracePreGUI;for(var ur in dr){var cr,mr=dr[ur],Dr=null;for(dt in mr){if(!Dr){var yr=de(ur,$e);if(yr<0){delete dr[ur];break}var Br=xe(ur,De,(cr=$e[yr]._fullInput).index);if(Br<0){delete dr[ur];break}Dr=De[Br]}if(Ct=he(dt,oe)){if(Ct.attr?lt=(Lt=e(st,Ct.attr).get())&&le(Ct.attr,Ie):(Lt=cr.uirevision,(lt=Dr.uirevision)===void 0&&(lt=Ie.uirevision)),lt&&lt===Lt&&((Pt=mr[dt])===null&&(Pt=void 0),we(mt=(Ke=e(Dr,dt)).get(),Pt))){Ke.set(V(e(cr,dt).get()));continue}}else y.warn("unrecognized GUI edit: "+dt+" in trace uid "+ur);delete mr[dt]}}}(fe.data,fe.layout,Fe,qe),h.supplyDefaults(fe,{skipUpdateCalc:!0});var We=fe._fullData,Ze=fe._fullLayout,nt=Ze.datarevision===void 0,ft=Ze.transition,xt=function(De,Ie,$e,st,dt){var ut=w.layoutFlags();function Lt(lt){return n.getLayoutValObject($e,lt)}return ut.arrays={},ut.rangesAltered={},ut.nChanges=0,ut.nChangesAnim=0,be(Ie,$e,[],{getValObject:Lt,flags:ut,immutable:st,transition:dt,gd:De}),(ut.plot||ut.calc)&&(ut.layoutReplot=!0),dt&&ut.nChanges&&ut.nChangesAnim&&(ut.anim=ut.nChanges===ut.nChangesAnim?"all":"some"),ut}(fe,qe,Ze,nt,ft),It=xt.newDataRevision,Et=function(De,Ie,$e,st,dt,ut){var Lt=Ie.length===$e.length;if(!dt&&!Lt)return{fullReplot:!0,calc:!0};var lt,Ct,Pt=w.traceFlags();Pt.arrays={},Pt.nChanges=0,Pt.nChangesAnim=0;var Ke={getValObject:function(Dt){var Bt=n.getTraceValObject(Ct,Dt);return!Ct._module.animatable&&Bt.anim&&(Bt.anim=!1),Bt},flags:Pt,immutable:st,transition:dt,newDataRevision:ut,gd:De},mt={};for(lt=0;lt<Ie.length;lt++)if($e[lt]){if(Ct=$e[lt]._fullInput,h.hasMakesDataTransform(Ct)&&(Ct=$e[lt]),mt[Ct.uid])continue;mt[Ct.uid]=1,be(Ie[lt]._fullInput,Ct,[],Ke)}return(Pt.calc||Pt.plot)&&(Pt.fullReplot=!0),dt&&Pt.nChanges&&Pt.nChangesAnim&&(Pt.anim=Pt.nChanges===Pt.nChangesAnim&&Lt?"all":"some"),Pt}(fe,Fe,We,nt,ft,It);if(J(fe)&&(xt.layoutReplot=!0),Et.calc||xt.calc){fe.calcdata=void 0;for(var it=Object.getOwnPropertyNames(Ze),rt=0;rt<it.length;rt++){var At=it[rt],Gt=At.substring(0,5);if(Gt==="xaxis"||Gt==="yaxis"){var Qt=Ze[At]._emptyCategories;Qt&&Qt()}}}else h.supplyDefaultsUpdateCalc(fe.calcdata,We);var Ve=[];if(Me&&(fe._transitionData={},h.createTransitionData(fe),Ve.push(function(){return W.addFrames(fe,Me)})),Ze.transition&&!ze&&(Et.anim||xt.anim))xt.ticks&&Ve.push(g.doTicksRelayout),h.doCalcdata(fe),g.doAutoRangeAndConstraints(fe),Ve.push(function(){return h.transitionFromReact(fe,Et,xt,qe)});else if(Et.fullReplot||xt.layoutReplot||ze)fe._fullLayout._skipDefaults=!0,Ve.push(W._doPlot);else{for(var Ye in xt.arrays){var Be=xt.arrays[Ye];if(Be.length){var Je=i.getComponentMethod(Ye,"drawOne");if(Je!==y.noop)for(var Se=0;Se<Be.length;Se++)Je(fe,Be[Se]);else{var Pe=i.getComponentMethod(Ye,"draw");if(Pe===y.noop)throw new Error("cannot draw components: "+Ye);Pe(fe)}}}Ve.push(h.previousPromises),Et.style&&Ve.push(g.doTraceStyle),(Et.colorbars||xt.colorbars)&&Ve.push(g.doColorBars),xt.legend&&Ve.push(g.doLegend),xt.layoutstyle&&Ve.push(g.layoutStyles),xt.axrange&&N(Ve),xt.ticks&&Ve.push(g.doTicksRelayout),xt.modebar&&Ve.push(g.doModeBar),xt.camera&&Ve.push(g.doCamera),Ve.push(k)}Ve.push(h.rehover,h.redrag),(Oe=y.syncOrAsync(Ve,fe))&&Oe.then||(Oe=Promise.resolve(fe))}else Oe=W.newPlot(fe,me,ke,Te);return Oe.then(function(){return fe.emit("plotly_react",{data:me,layout:ke}),fe})},W.redraw=function(fe){if(fe=y.getGraphDiv(fe),!y.isPlotDiv(fe))throw new Error("This element is not a Plotly plot: "+fe);return b.cleanData(fe.data),b.cleanLayout(fe.layout),fe.calcdata=void 0,W._doPlot(fe).then(function(){return fe.emit("plotly_redraw"),fe})},W.relayout=re,W.restyle=H,W.setPlotConfig=function(fe){return y.extendFlat(m,fe)},W.update=ee,W._guiRelayout=ne(re),W._guiRestyle=ne(H),W._guiUpdate=ne(ee),W._storeDirectGUIEdit=function(fe,me,ke){for(var Te in ke)K(Te,e(fe,Te).get(),ke[Te],me)}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"../lib/events":492,"../lib/queue":519,"../plots/cartesian/axes":554,"../plots/cartesian/constants":561,"../plots/cartesian/graph_interact":564,"../plots/cartesian/select":575,"../plots/plots":619,"../registry":638,"./edit_types":536,"./helpers":537,"./manage_arrays":539,"./plot_config":541,"./plot_schema":542,"./subroutines":544,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],541:[function(u,q,W){var o={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},p={};(function x(y,e){for(var r in y){var t=y[r];t.valType?e[r]=t.dflt:(e[r]||(e[r]={}),x(t,e[r]))}})(o,p),q.exports={configAttributes:o,dfltConfig:p}},{}],542:[function(u,q,W){var o=u("../registry"),p=u("../lib"),x=u("../plots/attributes"),y=u("../plots/layout_attributes"),e=u("../plots/frame_attributes"),r=u("../plots/animation_attributes"),t=u("./plot_config").configAttributes,i=u("./edit_types"),n=p.extendDeepAll,h=p.isPlainObject,s=p.isArrayOrTypedArray,a=p.nestedProperty,l=p.valObjectMeta,f=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];function d(_,T,k){if(!_)return!1;if(_._isLinkedToArray){if(v(T[k]))k++;else if(k<T.length)return!1}for(;k<T.length;k++){var L=_[T[k]];if(!h(L)||(_=L,k===T.length-1))break;if(_._isLinkedToArray){if(!v(T[++k]))return!1}else if(_.valType==="info_array"){var M=T[++k];if(!v(M))return!1;var I=_.items;if(Array.isArray(I)){if(M>=I.length)return!1;if(_.dimensions===2){if(k++,T.length===k)return _;var P=T[k];if(!v(P))return!1;_=I[M][P]}else _=I[M]}else _=I}}return _}function v(_){return _===Math.round(_)&&_>=0}function m(){var _,T,k={};for(_ in n(k,y),o.subplotsRegistry)if((T=o.subplotsRegistry[_]).layoutAttributes)if(Array.isArray(T.attr))for(var L=0;L<T.attr.length;L++)g(k,T,T.attr[L]);else g(k,T,T.attr==="subplot"?T.name:T.attr);for(_ in o.componentsRegistry){var M=(T=o.componentsRegistry[_]).schema;if(M&&(M.subplots||M.layout)){var I=M.subplots;if(I&&I.xaxis&&!I.yaxis)for(var P in I.xaxis)delete k.yaxis[P]}else T.name==="colorscale"?n(k,T.layoutAttributes):T.layoutAttributes&&w(k,T.layoutAttributes,T.name)}return{layoutAttributes:b(k)}}function c(){var _={frames:n({},e)};return b(_),_.frames}function b(_){return function(T){W.crawl(T,function(k,L,M){W.isValObject(k)?k.arrayOk!==!0&&k.valType!=="data_array"||(M[L+"src"]={valType:"string",editType:"none"}):h(k)&&(k.role="object")})}(_),function(T){W.crawl(T,function(k,L,M){if(k){var I=k._isLinkedToArray;I&&(delete k._isLinkedToArray,M[L]={items:{}},M[L].items[I]=k,M[L].role="object")}})}(_),function(T){(function k(L){for(var M in L)if(h(L[M]))k(L[M]);else if(Array.isArray(L[M]))for(var I=0;I<L[M].length;I++)k(L[M][I]);else L[M]instanceof RegExp&&(L[M]=L[M].toString())})(T)}(_),_}function g(_,T,k){var L=a(_,k),M=n({},T.layoutAttributes);M._isSubplotObj=!0,L.set(M)}function w(_,T,k){var L=a(_,k);L.set(n(L.get()||{},T))}W.IS_SUBPLOT_OBJ="_isSubplotObj",W.IS_LINKED_TO_ARRAY="_isLinkedToArray",W.DEPRECATED="_deprecated",W.UNDERSCORE_ATTRS=f,W.get=function(){var _={};o.allTypes.forEach(function(k){_[k]=function(L){var M,I;M=o.modules[L]._module,I=M.basePlotModule;var P={type:null},S=n({},x),E=n({},M.attributes);W.crawl(E,function(H,V,Q,K,Z){a(S,Z).set(void 0),H===void 0&&a(E,Z).set(void 0)}),n(P,S),o.traceIs(L,"noOpacity")&&delete P.opacity,o.traceIs(L,"showLegend")||(delete P.showlegend,delete P.legendgroup),o.traceIs(L,"noHover")&&(delete P.hoverinfo,delete P.hoverlabel),M.selectPoints||delete P.selectedpoints,n(P,E),I.attributes&&n(P,I.attributes),P.type=L;var D={meta:M.meta||{},categories:M.categories||{},animatable:Boolean(M.animatable),type:L,attributes:b(P)};if(M.layoutAttributes){var F={};n(F,M.layoutAttributes),D.layoutAttributes=b(F)}return M.animatable||W.crawl(D,function(H){W.isValObject(H)&&"anim"in H&&delete H.anim}),D}(k)});var T={};return Object.keys(o.transformsRegistry).forEach(function(k){T[k]=function(L){var M=o.transformsRegistry[L],I=n({},M.attributes);return Object.keys(o.componentsRegistry).forEach(function(P){var S=o.componentsRegistry[P];S.schema&&S.schema.transforms&&S.schema.transforms[L]&&Object.keys(S.schema.transforms[L]).forEach(function(E){w(I,S.schema.transforms[L][E],E)})}),{attributes:b(I)}}(k)}),{defs:{valObjects:l,metaKeys:f.concat(["description","role","editType","impliedEdits"]),editType:{traces:i.traces,layout:i.layout},impliedEdits:{}},traces:_,layout:m(),transforms:T,frames:c(),animation:b(r),config:b(t)}},W.crawl=function(_,T,k,L){var M=k||0;L=L||"",Object.keys(_).forEach(function(I){var P=_[I];if(f.indexOf(I)===-1){var S=(L?L+".":"")+I;T(P,I,_,M,S),W.isValObject(P)||h(P)&&I!=="impliedEdits"&&W.crawl(P,T,M+1,S)}})},W.isValObject=function(_){return _&&_.valType!==void 0},W.findArrayAttributes=function(_){var T,k,L=[],M=[],I=[];function P(H,V,Q,K){M=M.slice(0,K).concat([V]),I=I.slice(0,K).concat([H&&H._isLinkedToArray]),H&&(H.valType==="data_array"||H.arrayOk===!0)&&!(M[K-1]==="colorbar"&&(V==="ticktext"||V==="tickvals"))&&function Z($,re,R){var N=$[M[re]],U=R+M[re];if(re===M.length-1)s(N)&&L.push(k+U);else if(I[re]){if(Array.isArray(N))for(var te=0;te<N.length;te++)h(N[te])&&Z(N[te],re+1,U+"["+te+"].")}else h(N)&&Z(N,re+1,U+".")}(T,0,"")}T=_,k="",W.crawl(x,P),_._module&&_._module.attributes&&W.crawl(_._module.attributes,P);var S=_.transforms;if(S)for(var E=0;E<S.length;E++){var D=S[E],F=D._module;F&&(k="transforms["+E+"].",T=D,W.crawl(F.attributes,P))}return L},W.getTraceValObject=function(_,T){var k,L,M=T[0],I=1;if(M==="transforms"){if(T.length===1)return x.transforms;var P=_.transforms;if(!Array.isArray(P)||!P.length)return!1;var S=T[1];if(!v(S)||S>=P.length)return!1;L=(k=(o.transformsRegistry[P[S].type]||{}).attributes)&&k[T[2]],I=3}else{var E=_._module;if(E||(E=(o.modules[_.type||x.type.dflt]||{})._module),!E)return!1;if(!(L=(k=E.attributes)&&k[M])){var D=E.basePlotModule;D&&D.attributes&&(L=D.attributes[M])}L||(L=x[M])}return d(L,T,I)},W.getLayoutValObject=function(_,T){return d(function(k,L){var M,I,P,S,E=k._basePlotModules;if(E){var D;for(M=0;M<E.length;M++){if((P=E[M]).attrRegex&&P.attrRegex.test(L)){if(P.layoutAttrOverrides)return P.layoutAttrOverrides;!D&&P.layoutAttributes&&(D=P.layoutAttributes)}var F=P.baseLayoutAttrOverrides;if(F&&L in F)return F[L]}if(D)return D}var H=k._modules;if(H){for(M=0;M<H.length;M++)if((S=H[M].layoutAttributes)&&L in S)return S[L]}for(I in o.componentsRegistry){if((P=o.componentsRegistry[I]).name==="colorscale"&&L.indexOf("coloraxis")===0)return P.layoutAttributes[L];if(!P.schema&&L===P.name)return P.layoutAttributes}return L in y&&y[L]}(_,T[0]),T,1)}},{"../lib":503,"../plots/animation_attributes":548,"../plots/attributes":550,"../plots/frame_attributes":586,"../plots/layout_attributes":610,"../registry":638,"./edit_types":536,"./plot_config":541}],543:[function(u,q,W){var o=u("../lib"),p=u("../plots/attributes"),x={name:{valType:"string",editType:"none"}};function y(r){return r&&typeof r=="string"}function e(r){var t=r.length-1;return r.charAt(t)!=="s"&&o.warn("bad argument to arrayDefaultKey: "+r),r.substr(0,r.length-1)+"defaults"}x.templateitemname={valType:"string",editType:"calc"},W.templatedArray=function(r,t){return t._isLinkedToArray=r,t.name=x.name,t.templateitemname=x.templateitemname,t},W.traceTemplater=function(r){var t,i,n={};for(t in r)i=r[t],Array.isArray(i)&&i.length&&(n[t]=0);return{newTrace:function(h){var s={type:t=o.coerce(h,{},p,"type"),_template:null};if(t in n){i=r[t];var a=n[t]%i.length;n[t]++,s._template=i[a]}return s}}},W.newContainer=function(r,t,i){var n=r._template,h=n&&(n[t]||i&&n[i]);return o.isPlainObject(h)||(h=null),r[t]={_template:h}},W.arrayTemplater=function(r,t,i){var n=r._template,h=n&&n[e(t)],s=n&&n[t];Array.isArray(s)&&s.length||(s=[]);var a={};return{newItem:function(l){var f={name:l.name,_input:l},d=f.templateitemname=l.templateitemname;if(!y(d))return f._template=h,f;for(var v=0;v<s.length;v++){var m=s[v];if(m.name===d)return a[d]=1,f._template=m,f}return f[i]=l[i]||!1,f._template=!1,f},defaultItems:function(){for(var l=[],f=0;f<s.length;f++){var d=s[f],v=d.name;if(y(v)&&!a[v]){var m={_template:d,name:v,_input:{_templateitemname:v}};m.templateitemname=d.templateitemname,l.push(m),a[v]=1}}return l}}},W.arrayDefaultKey=e,W.arrayEditor=function(r,t,i){var n=(o.nestedProperty(r,t).get()||[]).length,h=i._index,s=h>=n&&(i._input||{})._templateitemname;s&&(h=n);var a,l=t+"["+h+"]";function f(){a={},s&&(a[l]={},a[l].templateitemname=s)}function d(m,c){s?o.nestedProperty(a[l],m).set(c):a[l+"."+m]=c}function v(){var m=a;return f(),m}return f(),{modifyBase:function(m,c){a[m]=c},modifyItem:d,getUpdateObj:v,applyUpdate:function(m,c){m&&d(m,c);var b=v();for(var g in b)o.nestedProperty(r,g).set(b[g])}}}},{"../lib":503,"../plots/attributes":550}],544:[function(u,q,W){var o=u("@plotly/d3"),p=u("../registry"),x=u("../plots/plots"),y=u("../lib"),e=u("../lib/clear_gl_canvases"),r=u("../components/color"),t=u("../components/drawing"),i=u("../components/titles"),n=u("../components/modebar"),h=u("../plots/cartesian/axes"),s=u("../constants/alignment"),a=u("../plots/cartesian/constraints"),l=a.enforce,f=a.clean,d=u("../plots/cartesian/autorange").doAutoRange;function v(T,k,L){for(var M=0;M<L.length;M++){var I=L[M][0],P=L[M][1];if(!(I[0]>=T[1]||I[1]<=T[0])&&P[0]<k[1]&&P[1]>k[0])return!0}return!1}function m(T){var k,L,M,I,P,S,E=T._fullLayout,D=E._size,F=D.p,H=h.list(T,"",!0);if(E._paperdiv.style({width:T._context.responsive&&E.autosize&&!T._context._hasZeroWidth&&!T.layout.width?"100%":E.width+"px",height:T._context.responsive&&E.autosize&&!T._context._hasZeroHeight&&!T.layout.height?"100%":E.height+"px"}).selectAll(".main-svg").call(t.setSize,E.width,E.height),T._context.setBackground(T,E.paper_bgcolor),W.drawMainTitle(T),n.manage(T),!E._has("cartesian"))return x.previousPromises(T);function V(Ze,nt,ft){var xt=Ze._lw/2;return Ze._id.charAt(0)==="x"?nt?ft==="top"?nt._offset-F-xt:nt._offset+nt._length+F+xt:D.t+D.h*(1-(Ze.position||0))+xt%1:nt?ft==="right"?nt._offset+nt._length+F+xt:nt._offset-F-xt:D.l+D.w*(Ze.position||0)+xt%1}for(k=0;k<H.length;k++){var Q=(I=H[k])._anchorAxis;I._linepositions={},I._lw=t.crispRound(T,I.linewidth,1),I._mainLinePosition=V(I,Q,I.side),I._mainMirrorPosition=I.mirror&&Q?V(I,Q,s.OPPOSITE_SIDE[I.side]):null}var K=[],Z=[],$=[],re=r.opacity(E.paper_bgcolor)===1&&r.opacity(E.plot_bgcolor)===1&&E.paper_bgcolor===E.plot_bgcolor;for(L in E._plots)if((M=E._plots[L]).mainplot)M.bg&&M.bg.remove(),M.bg=void 0;else{var R=M.xaxis.domain,N=M.yaxis.domain,U=M.plotgroup;if(v(R,N,$)){var te=U.node(),j=M.bg=y.ensureSingle(U,"rect","bg");te.insertBefore(j.node(),te.childNodes[0]),Z.push(L)}else U.select("rect.bg").remove(),$.push([R,N]),re||(K.push(L),Z.push(L))}var Y,J,ee,ne,se,oe,he,le,de,xe,we,be,Ae,fe=E._bgLayer.selectAll(".bg").data(K);for(fe.enter().append("rect").classed("bg",!0),fe.exit().remove(),fe.each(function(Ze){E._plots[Ze].bg=o.select(this)}),k=0;k<Z.length;k++)M=E._plots[Z[k]],P=M.xaxis,S=M.yaxis,M.bg&&P._offset!==void 0&&S._offset!==void 0&&M.bg.call(t.setRect,P._offset-F,S._offset-F,P._length+2*F,S._length+2*F).call(r.fill,E.plot_bgcolor).style("stroke-width",0);if(!E._hasOnlyLargeSploms)for(L in E._plots){M=E._plots[L],P=M.xaxis,S=M.yaxis;var me,ke,Te=M.clipId="clip"+E._uid+L+"plot",Me=y.ensureSingleById(E._clips,"clipPath",Te,function(Ze){Ze.classed("plotclip",!0).append("rect")});M.clipRect=Me.select("rect").attr({width:P._length,height:S._length}),t.setTranslate(M.plot,P._offset,S._offset),M._hasClipOnAxisFalse?(me=null,ke=Te):(me=Te,ke=null),t.setClipUrl(M.plot,me,T),M.layerClipId=ke}function Oe(Ze){return"M"+Y+","+Ze+"H"+J}function Fe(Ze){return"M"+P._offset+","+Ze+"h"+P._length}function qe(Ze){return"M"+Ze+","+le+"V"+he}function et(Ze){return"M"+Ze+","+S._offset+"v"+S._length}function ze(Ze,nt,ft){if(!Ze.showline||L!==Ze._mainSubplot)return"";if(!Ze._anchorAxis)return ft(Ze._mainLinePosition);var xt=nt(Ze._mainLinePosition);return Ze.mirror&&(xt+=nt(Ze._mainMirrorPosition)),xt}for(L in E._plots){M=E._plots[L],P=M.xaxis,S=M.yaxis;var Ue="M0,0";c(P,L)&&(se=g(P,"left",S,H),Y=P._offset-(se?F+se:0),oe=g(P,"right",S,H),J=P._offset+P._length+(oe?F+oe:0),ee=V(P,S,"bottom"),ne=V(P,S,"top"),!(Ae=!P._anchorAxis||L!==P._mainSubplot)||P.mirror!=="allticks"&&P.mirror!=="all"||(P._linepositions[L]=[ee,ne]),Ue=ze(P,Oe,Fe),Ae&&P.showline&&(P.mirror==="all"||P.mirror==="allticks")&&(Ue+=Oe(ee)+Oe(ne)),M.xlines.style("stroke-width",P._lw+"px").call(r.stroke,P.showline?P.linecolor:"rgba(0,0,0,0)")),M.xlines.attr("d",Ue);var We="M0,0";c(S,L)&&(we=g(S,"bottom",P,H),he=S._offset+S._length+(we?F:0),be=g(S,"top",P,H),le=S._offset-(be?F:0),de=V(S,P,"left"),xe=V(S,P,"right"),!(Ae=!S._anchorAxis||L!==S._mainSubplot)||S.mirror!=="allticks"&&S.mirror!=="all"||(S._linepositions[L]=[de,xe]),We=ze(S,qe,et),Ae&&S.showline&&(S.mirror==="all"||S.mirror==="allticks")&&(We+=qe(de)+qe(xe)),M.ylines.style("stroke-width",S._lw+"px").call(r.stroke,S.showline?S.linecolor:"rgba(0,0,0,0)")),M.ylines.attr("d",We)}return h.makeClipPaths(T),x.previousPromises(T)}function c(T,k){return(T.ticks||T.showline)&&(k===T._mainSubplot||T.mirror==="all"||T.mirror==="allticks")}function b(T,k,L){if(!L.showline||!L._lw)return!1;if(L.mirror==="all"||L.mirror==="allticks")return!0;var M=L._anchorAxis;if(!M)return!1;var I=s.FROM_BL[k];return L.side===k?M.domain[I]===T.domain[I]:L.mirror&&M.domain[1-I]===T.domain[1-I]}function g(T,k,L,M){if(b(T,k,L))return L._lw;for(var I=0;I<M.length;I++){var P=M[I];if(P._mainAxis===L._mainAxis&&b(T,k,P))return P._lw}return 0}function w(T,k){var L=T.title,M=T._size,I=0;switch(k==="start"?I=L.pad.l:k==="end"&&(I=-L.pad.r),L.xref){case"paper":return M.l+M.w*L.x+I;case"container":default:return T.width*L.x+I}}function _(T,k){var L=T.title,M=T._size,I=0;if(k!=="0em"&&k?k===s.CAP_SHIFT+"em"&&(I=L.pad.t):I=-L.pad.b,L.y==="auto")return M.t/2;switch(L.yref){case"paper":return M.t+M.h-M.h*L.y+I;case"container":default:return T.height-T.height*L.y+I}}W.layoutStyles=function(T){return y.syncOrAsync([x.doAutoMargin,m],T)},W.drawMainTitle=function(T){var k=T._fullLayout,L=function(I){var P=I.title,S="middle";return y.isRightAnchor(P)?S="end":y.isLeftAnchor(P)&&(S="start"),S}(k),M=function(I){var P=I.title,S="0em";return y.isTopAnchor(P)?S=s.CAP_SHIFT+"em":y.isMiddleAnchor(P)&&(S=s.MID_SHIFT+"em"),S}(k);i.draw(T,"gtitle",{propContainer:k,propName:"title.text",placeholder:k._dfltTitle.plot,attributes:{x:w(k,L),y:_(k,M),"text-anchor":L,dy:M}})},W.doTraceStyle=function(T){var k,L=T.calcdata,M=[];for(k=0;k<L.length;k++){var I=L[k],P=I[0]||{},S=P.trace||{},E=S._module||{},D=E.arraysToCalcdata;D&&D(I,S);var F=E.editStyle;F&&M.push({fn:F,cd0:P})}if(M.length){for(k=0;k<M.length;k++){var H=M[k];H.fn(T,H.cd0)}e(T),W.redrawReglTraces(T)}return x.style(T),p.getComponentMethod("legend","draw")(T),x.previousPromises(T)},W.doColorBars=function(T){return p.getComponentMethod("colorbar","draw")(T),x.previousPromises(T)},W.layoutReplot=function(T){var k=T.layout;return T.layout=void 0,p.call("_doPlot",T,"",k)},W.doLegend=function(T){return p.getComponentMethod("legend","draw")(T),x.previousPromises(T)},W.doTicksRelayout=function(T){return h.draw(T,"redraw"),T._fullLayout._hasOnlyLargeSploms&&(p.subplotsRegistry.splom.updateGrid(T),e(T),W.redrawReglTraces(T)),W.drawMainTitle(T),x.previousPromises(T)},W.doModeBar=function(T){var k=T._fullLayout;n.manage(T);for(var L=0;L<k._basePlotModules.length;L++){var M=k._basePlotModules[L].updateFx;M&&M(T)}return x.previousPromises(T)},W.doCamera=function(T){for(var k=T._fullLayout,L=k._subplots.gl3d,M=0;M<L.length;M++){var I=k[L[M]];I._scene.setViewport(I)}},W.drawData=function(T){var k=T._fullLayout;e(T);for(var L=k._basePlotModules,M=0;M<L.length;M++)L[M].plot(T);return W.redrawReglTraces(T),x.style(T),p.getComponentMethod("shapes","draw")(T),p.getComponentMethod("annotations","draw")(T),p.getComponentMethod("images","draw")(T),k._replotting=!1,x.previousPromises(T)},W.redrawReglTraces=function(T){var k=T._fullLayout;if(k._has("regl")){var L,M,I=T._fullData,P=[],S=[];for(k._hasOnlyLargeSploms&&k._splomGrid.draw(),L=0;L<I.length;L++){var E=I[L];E.visible===!0&&E._length!==0&&(E.type==="splom"?k._splomScenes[E.uid].draw():E.type==="scattergl"?y.pushUnique(P,E.xaxis+E.yaxis):E.type==="scatterpolargl"&&y.pushUnique(S,E.subplot))}for(L=0;L<P.length;L++)(M=k._plots[P[L]])._scene&&M._scene.draw();for(L=0;L<S.length;L++)(M=k[S[L]]._subplot)._scene&&M._scene.draw()}},W.doAutoRangeAndConstraints=function(T){for(var k,L=h.list(T,"",!0),M={},I=0;I<L.length;I++)if(!M[(k=L[I])._id]){M[k._id]=1,f(T,k),d(T,k);var P=k._matchGroup;if(P)for(var S in P){var E=h.getFromId(T,S);d(T,E,k.range),M[S]=1}}l(T)},W.finalDraw=function(T){p.getComponentMethod("rangeslider","draw")(T),p.getComponentMethod("rangeselector","draw")(T)},W.drawMarginPushers=function(T){p.getComponentMethod("legend","draw")(T),p.getComponentMethod("rangeselector","draw")(T),p.getComponentMethod("sliders","draw")(T),p.getComponentMethod("updatemenus","draw")(T),p.getComponentMethod("colorbar","draw")(T)}},{"../components/color":366,"../components/drawing":388,"../components/modebar":429,"../components/titles":464,"../constants/alignment":471,"../lib":503,"../lib/clear_gl_canvases":487,"../plots/cartesian/autorange":553,"../plots/cartesian/axes":554,"../plots/cartesian/constraints":562,"../plots/plots":619,"../registry":638,"@plotly/d3":58}],545:[function(u,q,W){var o=u("../lib"),p=o.isPlainObject,x=u("./plot_schema"),y=u("../plots/plots"),e=u("../plots/attributes"),r=u("./plot_template"),t=u("./plot_config").dfltConfig;function i(v,m){v=o.extendDeep({},v);var c,b,g=Object.keys(v).sort();function w(M,I,P){if(p(I)&&p(M))i(M,I);else if(Array.isArray(I)&&Array.isArray(M)){var S=r.arrayTemplater({_template:v},P);for(b=0;b<I.length;b++){var E=I[b],D=S.newItem(E)._template;D&&i(D,E)}var F=S.defaultItems();for(b=0;b<F.length;b++)I.push(F[b]._template);for(b=0;b<I.length;b++)delete I[b].templateitemname}}for(c=0;c<g.length;c++){var _=g[c],T=v[_];if(_ in m?w(T,m[_],_):m[_]=T,n(_)===_)for(var k in m){var L=n(k);k===L||L!==_||k in v||w(T,m[k],_)}}}function n(v){return v.replace(/[0-9]+$/,"")}function h(v,m,c,b,g){var w=g&&c(g);for(var _ in v){var T=v[_],k=l(v,_,b),L=l(v,_,g),M=c(L);if(!M){var I=n(_);I!==_&&(M=c(L=l(v,I,g)))}if((!w||w!==M)&&!(!M||M._noTemplating||M.valType==="data_array"||M.arrayOk&&Array.isArray(T)))if(!M.valType&&p(T))h(T,m,c,k,L);else if(M._isLinkedToArray&&Array.isArray(T))for(var P=!1,S=0,E={},D=0;D<T.length;D++){var F=T[D];if(p(F)){var H=F.name;if(H)E[H]||(h(F,m,c,l(T,S,k),l(T,S,L)),S++,E[H]=1);else if(!P){var V=l(v,r.arrayDefaultKey(_),b),Q=l(T,S,k);h(F,m,c,Q,l(T,S,L));var K=o.nestedProperty(m,Q);o.nestedProperty(m,V).set(K.get()),K.set(null),P=!0}}}else o.nestedProperty(m,k).set(T)}}function s(v,m){return x.getLayoutValObject(v,o.nestedProperty({},m).parts)}function a(v,m){return x.getTraceValObject(v,o.nestedProperty({},m).parts)}function l(v,m,c){return c?Array.isArray(v)?c+"["+m+"]":c+"."+m:m}function f(v){for(var m=0;m<v.length;m++)if(p(v[m]))return!0}function d(v){var m;switch(v.code){case"data":m="The template has no key data.";break;case"layout":m="The template has no key layout.";break;case"missing":m=v.path?"There are no templates for item "+v.path+" with name "+v.templateitemname:"There are no templates for trace "+v.index+", of type "+v.traceType+".";break;case"unused":m=v.path?"The template item at "+v.path+" was not used in constructing the plot.":v.dataCount?"Some of the templates of type "+v.traceType+" were not used. The template has "+v.templateCount+" traces, the data only has "+v.dataCount+" of this type.":"The template has "+v.templateCount+" traces of type "+v.traceType+" but there are none in the data.";break;case"reused":m="Some of the templates of type "+v.traceType+" were used more than once. The template has "+v.templateCount+" traces, the data has "+v.dataCount+" of this type."}return v.msg=m,v}W.makeTemplate=function(v){v=o.isPlainObject(v)?v:o.getGraphDiv(v),v=o.extendDeep({_context:t},{data:v.data,layout:v.layout}),y.supplyDefaults(v);var m=v.data||[],c=v.layout||{};c._basePlotModules=v._fullLayout._basePlotModules,c._modules=v._fullLayout._modules;var b={data:{},layout:{}};m.forEach(function(S){var E={};h(S,E,a.bind(null,S));var D=o.coerce(S,{},e,"type"),F=b.data[D];F||(F=b.data[D]=[]),F.push(E)}),h(c,b.layout,s.bind(null,c)),delete b.layout.template;var g=c.template;if(p(g)){var w,_,T,k,L,M,I=g.layout;p(I)&&i(I,b.layout);var P=g.data;if(p(P)){for(_ in b.data)if(T=P[_],Array.isArray(T)){for(M=(L=b.data[_]).length,k=T.length,w=0;w<M;w++)i(T[w%k],L[w]);for(w=M;w<k;w++)L.push(o.extendDeep({},T[w]))}for(_ in P)_ in b.data||(b.data[_]=o.extendDeep([],P[_]))}}return b},W.validateTemplate=function(v,m){var c=o.extendDeep({},{_context:t,data:v.data,layout:v.layout}),b=c.layout||{};p(m)||(m=b.template||{});var g=m.layout,w=m.data,_=[];c.layout=b,c.layout.template=m,y.supplyDefaults(c);var T=c._fullLayout,k=c._fullData,L={};if(p(g)?(function F(H,V){for(var Q in H)if(Q.charAt(0)!=="_"&&p(H[Q])){var K,Z=n(Q),$=[];for(K=0;K<V.length;K++)$.push(l(H,Q,V[K])),Z!==Q&&$.push(l(H,Z,V[K]));for(K=0;K<$.length;K++)L[$[K]]=1;F(H[Q],$)}}(T,["layout"]),function F(H,V){for(var Q in H)if(Q.indexOf("defaults")===-1&&p(H[Q])){var K=l(H,Q,V);L[K]?F(H[Q],K):_.push({code:"unused",path:K})}}(g,"layout")):_.push({code:"layout"}),p(w)){for(var M,I={},P=0;P<k.length;P++){var S=k[P];I[M=S.type]=(I[M]||0)+1,S._fullInput._template||_.push({code:"missing",index:S._fullInput.index,traceType:M})}for(M in w){var E=w[M].length,D=I[M]||0;E>D?_.push({code:"unused",traceType:M,templateCount:E,dataCount:D}):D>E&&_.push({code:"reused",traceType:M,templateCount:E,dataCount:D})}}else _.push({code:"data"});if(function F(H,V){for(var Q in H)if(Q.charAt(0)!=="_"){var K=H[Q],Z=l(H,Q,V);p(K)?(Array.isArray(H)&&K._template===!1&&K.templateitemname&&_.push({code:"missing",path:Z,templateitemname:K.templateitemname}),F(K,Z)):Array.isArray(K)&&f(K)&&F(K,Z)}}({data:k,layout:T},""),_.length)return _.map(d)}},{"../lib":503,"../plots/attributes":550,"../plots/plots":619,"./plot_config":541,"./plot_schema":542,"./plot_template":543}],546:[function(u,q,W){var o=u("fast-isnumeric"),p=u("./plot_api"),x=u("../plots/plots"),y=u("../lib"),e=u("../snapshot/helpers"),r=u("../snapshot/tosvg"),t=u("../snapshot/svgtoimg"),i=u("../version").version,n={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};q.exports=function(h,s){var a,l,f,d;function v(D){return!(D in s)||y.validate(s[D],n[D])}if(s=s||{},y.isPlainObject(h)?(a=h.data||[],l=h.layout||{},f=h.config||{},d={}):(h=y.getGraphDiv(h),a=y.extendDeep([],h.data),l=y.extendDeep({},h.layout),f=h._context,d=h._fullLayout||{}),!v("width")&&s.width!==null||!v("height")&&s.height!==null)throw new Error("Height and width should be pixel values.");if(!v("format"))throw new Error("Export format is not "+y.join2(n.format.values,", "," or ")+".");var m={};function c(D,F){return y.coerce(s,m,n,D,F)}var b=c("format"),g=c("width"),w=c("height"),_=c("scale"),T=c("setBackground"),k=c("imageDataOnly"),L=document.createElement("div");L.style.position="absolute",L.style.left="-5000px",document.body.appendChild(L);var M=y.extendFlat({},l);g?M.width=g:s.width===null&&o(d.width)&&(M.width=d.width),w?M.height=w:s.height===null&&o(d.height)&&(M.height=d.height);var I=y.extendFlat({},f,{_exportedPlot:!0,staticPlot:!0,setBackground:T}),P=e.getRedrawFunc(L);function S(){return new Promise(function(D){setTimeout(D,e.getDelay(L._fullLayout))})}function E(){return new Promise(function(D,F){var H=r(L,b,_),V=L._fullLayout.width,Q=L._fullLayout.height;function K(){p.purge(L),document.body.removeChild(L)}if(b==="full-json"){var Z=x.graphJson(L,!1,"keepdata","object",!0,!0);return Z.version=i,Z=JSON.stringify(Z),K(),D(k?Z:e.encodeJSON(Z))}if(K(),b==="svg")return D(k?H:e.encodeSVG(H));var $=document.createElement("canvas");$.id=y.randstr(),t({format:b,width:V,height:Q,scale:_,canvas:$,svg:H,promise:!0}).then(D).catch(F)})}return new Promise(function(D,F){p.newPlot(L,a,M,I).then(P).then(S).then(E).then(function(H){D(function(V){return k?V.replace(e.IMAGE_URL_PREFIX,""):V}(H))}).catch(function(H){F(H)})})}},{"../lib":503,"../plots/plots":619,"../snapshot/helpers":642,"../snapshot/svgtoimg":644,"../snapshot/tosvg":646,"../version":1119,"./plot_api":540,"fast-isnumeric":190}],547:[function(u,q,W){var o=u("../lib"),p=u("../plots/plots"),x=u("./plot_schema"),y=u("./plot_config").dfltConfig,e=o.isPlainObject,r=Array.isArray,t=o.isArrayOrTypedArray;function i(m,c,b,g,w,_){_=_||[];for(var T=Object.keys(m),k=0;k<T.length;k++){var L=T[k];if(L!=="transforms"){var M=_.slice();M.push(L);var I=m[L],P=c[L],S=f(b,L),E=(S||{}).valType,D=E==="info_array",F=E==="colorscale",H=(S||{}).items;if(l(b,L))if(e(I)&&e(P)&&E!=="any")i(I,P,S,g,w,M);else if(D&&r(I)){I.length>P.length&&g.push(a("unused",w,M.concat(P.length)));var V,Q,K,Z,$,re=P.length,R=Array.isArray(H);if(R&&(re=Math.min(re,H.length)),S.dimensions===2)for(Q=0;Q<re;Q++)if(r(I[Q])){I[Q].length>P[Q].length&&g.push(a("unused",w,M.concat(Q,P[Q].length)));var N=P[Q].length;for(V=0;V<(R?Math.min(N,H[Q].length):N);V++)K=R?H[Q][V]:H,Z=I[Q][V],$=P[Q][V],o.validate(Z,K)?$!==Z&&$!==+Z&&g.push(a("dynamic",w,M.concat(Q,V),Z,$)):g.push(a("value",w,M.concat(Q,V),Z))}else g.push(a("array",w,M.concat(Q),I[Q]));else for(Q=0;Q<re;Q++)K=R?H[Q]:H,Z=I[Q],$=P[Q],o.validate(Z,K)?$!==Z&&$!==+Z&&g.push(a("dynamic",w,M.concat(Q),Z,$)):g.push(a("value",w,M.concat(Q),Z))}else if(S.items&&!D&&r(I)){var U,te,j=H[Object.keys(H)[0]],Y=[];for(U=0;U<P.length;U++){var J=P[U]._index||U;if((te=M.slice()).push(J),e(I[J])&&e(P[U])){Y.push(J);var ee=I[J],ne=P[U];e(ee)&&ee.visible!==!1&&ne.visible===!1?g.push(a("invisible",w,te)):i(ee,ne,j,g,w,te)}}for(U=0;U<I.length;U++)(te=M.slice()).push(U),e(I[U])?Y.indexOf(U)===-1&&g.push(a("unused",w,te)):g.push(a("object",w,te,I[U]))}else!e(I)&&e(P)?g.push(a("object",w,M,I)):t(I)||!t(P)||D||F?L in c?o.validate(I,S)?S.valType==="enumerated"&&(S.coerceNumber&&I!==+P||I!==P)&&g.push(a("dynamic",w,M,I,P)):g.push(a("value",w,M,I)):g.push(a("unused",w,M,I)):g.push(a("array",w,M,I));else g.push(a("schema",w,M))}}return g}function n(m,c){for(var b=m.layout.layoutAttributes,g=0;g<c.length;g++){var w=c[g],_=m.traces[w.type],T=_.layoutAttributes;T&&(w.subplot?o.extendFlat(b[_.attributes.subplot.dflt],T):o.extendFlat(b,T))}return b}q.exports=function(m,c){m===void 0&&(m=[]),c===void 0&&(c={});var b,g,w=x.get(),_=[],T={_context:o.extendFlat({},y)};r(m)?(T.data=o.extendDeep([],m),b=m):(T.data=[],b=[],_.push(a("array","data"))),e(c)?(T.layout=o.extendDeep({},c),g=c):(T.layout={},g={},arguments.length>1&&_.push(a("object","layout"))),p.supplyDefaults(T);for(var k=T._fullData,L=b.length,M=0;M<L;M++){var I=b[M],P=["data",M];if(e(I)){var S=k[M],E=S.type,D=w.traces[E].attributes;D.type={valType:"enumerated",values:[E]},S.visible===!1&&I.visible!==!1&&_.push(a("invisible",P)),i(I,S,D,_,P);var F=I.transforms,H=S.transforms;if(F){r(F)||_.push(a("array",P,["transforms"])),P.push("transforms");for(var V=0;V<F.length;V++){var Q=["transforms",V],K=F[V].type;if(e(F[V])){var Z=w.transforms[K]?w.transforms[K].attributes:{};Z.type={valType:"enumerated",values:Object.keys(w.transforms)},i(F[V],H[V],Z,_,P,Q)}else _.push(a("object",P,Q))}}}else _.push(a("object",P))}var $=T._fullLayout,re=n(w,k);return i(g,$,re,_,"layout"),_.length===0?void 0:_};var h={object:function(m,c){return(m==="layout"&&c===""?"The layout argument":m[0]==="data"&&c===""?"Trace "+m[1]+" in the data argument":s(m)+"key "+c)+" must be linked to an object container"},array:function(m,c){return(m==="data"?"The data argument":s(m)+"key "+c)+" must be linked to an array container"},schema:function(m,c){return s(m)+"key "+c+" is not part of the schema"},unused:function(m,c,b){var g=e(b)?"container":"key";return s(m)+g+" "+c+" did not get coerced"},dynamic:function(m,c,b,g){return[s(m)+"key",c,"(set to '"+b+"')","got reset to","'"+g+"'","during defaults."].join(" ")},invisible:function(m,c){return(c?s(m)+"item "+c:"Trace "+m[1])+" got defaulted to be not visible"},value:function(m,c,b){return[s(m)+"key "+c,"is set to an invalid value ("+b+")"].join(" ")}};function s(m){return r(m)?"In data trace "+m[1]+", ":"In "+m+", "}function a(m,c,b,g,w){var _,T;b=b||"",r(c)?(_=c[0],T=c[1]):(_=c,T=null);var k=function(M){if(!r(M))return String(M);for(var I="",P=0;P<M.length;P++){var S=M[P];typeof S=="number"?I=I.substr(0,I.length-1)+"["+S+"]":I+=S,P<M.length-1&&(I+=".")}return I}(b),L=h[m](c,k,g,w);return o.log(L),{code:m,container:_,trace:T,path:b,astr:k,msg:L}}function l(m,c){var b=v(c),g=b.keyMinusId,w=b.id;return!!(g in m&&m[g]._isSubplotObj&&w)||c in m}function f(m,c){return c in m?m[c]:m[v(c).keyMinusId]}var d=o.counterRegex("([a-z]+)");function v(m){var c=m.match(d);return{keyMinusId:c&&c[1],id:c&&c[2]}}},{"../lib":503,"../plots/plots":619,"./plot_config":541,"./plot_schema":542}],548:[function(u,q,W){q.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],549:[function(u,q,W){var o=u("../lib"),p=u("../plot_api/plot_template");q.exports=function(x,y,e){var r,t,i=e.name,n=e.inclusionAttr||"visible",h=y[i],s=o.isArrayOrTypedArray(x[i])?x[i]:[],a=y[i]=[],l=p.arrayTemplater(y,i,n);for(r=0;r<s.length;r++){var f=s[r];o.isPlainObject(f)?t=l.newItem(f):(t=l.newItem({}))[n]=!1,t._index=r,t[n]!==!1&&e.handleItemDefaults(f,t,y,e),a.push(t)}var d=l.defaultItems();for(r=0;r<d.length;r++)(t=d[r])._index=a.length,e.handleItemDefaults({},t,y,e,{}),a.push(t);if(o.isArrayOrTypedArray(h)){var v=Math.min(h.length,a.length);for(r=0;r<v;r++)o.relinkPrivateKeys(a[r],h[r])}return a}},{"../lib":503,"../plot_api/plot_template":543}],550:[function(u,q,W){var o=u("./font_attributes"),p=u("../components/fx/attributes");q.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:o({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:p.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":397,"./font_attributes":585}],551:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../lib"),x=p.dateTime2ms,y=p.incrementMonth,e=u("../../constants/numerical").ONEAVGMONTH;q.exports=function(r,t,i,n){if(t.type!=="date")return{vals:n};var h=r[i+"periodalignment"];if(!h)return{vals:n};var s,a=r[i+"period"];if(o(a)){if((a=+a)<=0)return{vals:n}}else if(typeof a=="string"&&a.charAt(0)==="M"){var l=+a.substring(1);if(!(l>0&&Math.round(l)===l))return{vals:n};s=l}for(var f=t.calendar,d=h==="start",v=h==="end",m=r[i+"period0"],c=x(m,f)||0,b=[],g=[],w=[],_=n.length,T=0;T<_;T++){var k,L,M,I=n[T];if(s){for(k=Math.round((I-c)/(s*e)),M=y(c,s*k,f);M>I;)M=y(M,-s,f);for(;M<=I;)M=y(M,s,f);L=y(M,-s,f)}else{for(M=c+(k=Math.round((I-c)/a))*a;M>I;)M-=a;for(;M<=I;)M+=a;L=M-a}b[T]=d?L:v?M:(L+M)/2,g[T]=L,w[T]=M}return{vals:b,starts:g,ends:w}}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],552:[function(u,q,W){q.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],553:[function(u,q,W){var o=u("@plotly/d3"),p=u("fast-isnumeric"),x=u("../../lib"),y=u("../../constants/numerical").FP_SAFE,e=u("../../registry"),r=u("../../components/drawing"),t=u("./axis_ids"),i=t.getFromId,n=t.isLinked;function h(g,w){var _,T,k=[],L=g._fullLayout,M=a(L,w,0),I=a(L,w,1),P=l(g,w),S=P.min,E=P.max;if(S.length===0||E.length===0)return x.simpleMap(w.range,w.r2l);var D=S[0].val,F=E[0].val;for(_=1;_<S.length&&D===F;_++)D=Math.min(D,S[_].val);for(_=1;_<E.length&&D===F;_++)F=Math.max(F,E[_].val);var H=!1;if(w.range){var V=x.simpleMap(w.range,w.r2l);H=V[1]<V[0]}w.autorange==="reversed"&&(H=!0,w.autorange=!0);var Q,K,Z,$,re,R,N=w.rangemode,U=N==="tozero",te=N==="nonnegative",j=w._length,Y=j/10,J=0;for(_=0;_<S.length;_++)for(Q=S[_],T=0;T<E.length;T++)(R=(K=E[T]).val-Q.val-s(w,Q.val,K.val))>0&&((re=j-M(Q)-I(K))>Y?R/re>J&&(Z=Q,$=K,J=R/re):R/j>J&&(Z={val:Q.val,nopad:1},$={val:K.val,nopad:1},J=R/j));if(D===F){var ee=D-1,ne=D+1;if(U)if(D===0)k=[0,1];else{var se=(D>0?E:S).reduce(function(he,le){return Math.max(he,I(le))},0),oe=D/(1-Math.min(.5,se/j));k=D>0?[0,oe]:[oe,0]}else k=te?[Math.max(0,ee),Math.max(1,ne)]:[ee,ne]}else U?(Z.val>=0&&(Z={val:0,nopad:1}),$.val<=0&&($={val:0,nopad:1})):te&&(Z.val-J*M(Z)<0&&(Z={val:0,nopad:1}),$.val<=0&&($={val:1,nopad:1})),J=($.val-Z.val-s(w,Q.val,K.val))/(j-M(Z)-I($)),k=[Z.val-J*M(Z),$.val+J*I($)];return H&&k.reverse(),x.simpleMap(k,w.l2r||Number)}function s(g,w,_){var T=0;if(g.rangebreaks)for(var k=g.locateBreaks(w,_),L=0;L<k.length;L++){var M=k[L];T+=M.max-M.min}return T}function a(g,w,_){var T=.05*w._length,k=w._anchorAxis||{};if((w.ticklabelposition||"").indexOf("inside")!==-1||(k.ticklabelposition||"").indexOf("inside")!==-1){var L=w.autorange==="reversed";if(!L){var M=x.simpleMap(w.range,w.r2l);L=M[1]<M[0]}L&&(_=!_)}var I=0;return n(g,w._id)||(I=function(P,S,E){var D=0,F=S._id.charAt(0)==="x";for(var H in P._plots){var V=P._plots[H];if(S._id===V.xaxis._id||S._id===V.yaxis._id){var Q=(F?V.yaxis:V.xaxis)||{};if((Q.ticklabelposition||"").indexOf("inside")!==-1&&(!E&&(Q.side==="left"||Q.side==="bottom")||E&&(Q.side==="top"||Q.side==="right"))){if(Q._vals){var K=x.deg2rad(Q._tickAngles[Q._id+"tick"]||0),Z=Math.abs(Math.cos(K)),$=Math.abs(Math.sin(K));if(!Q._vals[0].bb){var re=Q._id+"tick";Q._selections[re].each(function(j){var Y=o.select(this);Y.select(".text-math-group").empty()&&(j.bb=r.bBox(Y.node()))})}for(var R=0;R<Q._vals.length;R++){var N=Q._vals[R].bb;if(N){var U=6+N.width,te=6+N.height;D=Math.max(D,F?Math.max(U*Z,te*$):Math.max(te*Z,U*$))}}}Q.ticks==="inside"&&Q.ticklabelposition==="inside"&&(D+=Q.ticklen||0)}}}return D}(g,w,_)),T=Math.max(I,T),w.constrain==="domain"&&w._inputDomain&&(T*=(w._inputDomain[1]-w._inputDomain[0])/(w.domain[1]-w.domain[0])),function(P){return P.nopad?0:P.pad+(P.extrapad?T:I)}}q.exports={getAutoRange:h,makePadFn:a,doAutoRange:function(g,w,_){if(w.setScale(),w.autorange){w.range=_?_.slice():h(g,w),w._r=w.range.slice(),w._rl=x.simpleMap(w._r,w.r2l);var T=w._input,k={};k[w._attr+".range"]=w.range,k[w._attr+".autorange"]=w.autorange,e.call("_storeDirectGUIEdit",g.layout,g._fullLayout._preGUI,k),T.range=w.range.slice(),T.autorange=w.autorange}var L=w._anchorAxis;if(L&&L.rangeslider){var M=L.rangeslider[w._name];M&&M.rangemode==="auto"&&(M.range=h(g,w)),L._input.rangeslider[w._name]=x.extendFlat({},M)}},findExtremes:function(g,w,_){_||(_={}),g._m||g.setScale();var T,k,L,M,I,P,S,E,D,F=[],H=[],V=w.length,Q=_.padded||!1,K=_.tozero&&(g.type==="linear"||g.type==="-"),Z=g.type==="log",$=!1,re=_.vpadLinearized||!1;function R(ne){if(Array.isArray(ne))return $=!0,function(oe){return Math.max(Number(ne[oe]||0),0)};var se=Math.max(Number(ne||0),0);return function(){return se}}var N=R((g._m>0?_.ppadplus:_.ppadminus)||_.ppad||0),U=R((g._m>0?_.ppadminus:_.ppadplus)||_.ppad||0),te=R(_.vpadplus||_.vpad),j=R(_.vpadminus||_.vpad);if(!$){if(E=1/0,D=-1/0,Z)for(T=0;T<V;T++)(k=w[T])<E&&k>0&&(E=k),k>D&&k<y&&(D=k);else for(T=0;T<V;T++)(k=w[T])<E&&k>-y&&(E=k),k>D&&k<y&&(D=k);w=[E,D],V=2}var Y={tozero:K,extrapad:Q};function J(ne){L=w[ne],p(L)&&(P=N(ne),S=U(ne),re?(M=g.c2l(L)-j(ne),I=g.c2l(L)+te(ne)):(E=L-j(ne),D=L+te(ne),Z&&E<D/10&&(E=D/10),M=g.c2l(E),I=g.c2l(D)),K&&(M=Math.min(0,M),I=Math.max(0,I)),m(M)&&f(F,M,S,Y),m(I)&&d(H,I,P,Y))}var ee=Math.min(6,V);for(T=0;T<ee;T++)J(T);for(T=V-1;T>=ee;T--)J(T);return{min:F,max:H,opts:_}},concatExtremes:l};function l(g,w,_){var T,k,L,M=w._id,I=g._fullData,P=g._fullLayout,S=[],E=[];function D(K,Z){for(T=0;T<Z.length;T++){var $=K[Z[T]],re=($._extremes||{})[M];if($.visible===!0&&re){for(k=0;k<re.min.length;k++)L=re.min[k],f(S,L.val,L.pad,{extrapad:L.extrapad});for(k=0;k<re.max.length;k++)L=re.max[k],d(E,L.val,L.pad,{extrapad:L.extrapad})}}}if(D(I,w._traceIndices),D(P.annotations||[],w._annIndices||[]),D(P.shapes||[],w._shapeIndices||[]),w._matchGroup&&!_){for(var F in w._matchGroup)if(F!==w._id){var H=i(g,F),V=l(g,H,!0),Q=w._length/H._length;for(k=0;k<V.min.length;k++)L=V.min[k],f(S,L.val,L.pad*Q,{extrapad:L.extrapad});for(k=0;k<V.max.length;k++)L=V.max[k],d(E,L.val,L.pad*Q,{extrapad:L.extrapad})}}return{min:S,max:E}}function f(g,w,_,T){v(g,w,_,T,c)}function d(g,w,_,T){v(g,w,_,T,b)}function v(g,w,_,T,k){for(var L=T.tozero,M=T.extrapad,I=!0,P=0;P<g.length&&I;P++){var S=g[P];if(k(S.val,w)&&S.pad>=_&&(S.extrapad||!M)){I=!1;break}k(w,S.val)&&S.pad<=_&&(M||!S.extrapad)&&(g.splice(P,1),P--)}if(I){var E=L&&w===0;g.push({val:w,pad:E?0:_,extrapad:!E&&M})}}function m(g){return p(g)&&Math.abs(g)<y}function c(g,w){return g<=w}function b(g,w){return g>=w}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../../registry":638,"./axis_ids":558,"@plotly/d3":58,"fast-isnumeric":190}],554:[function(u,q,W){var o=u("@plotly/d3"),p=u("fast-isnumeric"),x=u("../../plots/plots"),y=u("../../registry"),e=u("../../lib"),r=e.strTranslate,t=u("../../lib/svg_text_utils"),i=u("../../components/titles"),n=u("../../components/color"),h=u("../../components/drawing"),s=u("./layout_attributes"),a=u("./clean_ticks"),l=u("../../constants/numerical"),f=l.ONEMAXYEAR,d=l.ONEAVGYEAR,v=l.ONEMINYEAR,m=l.ONEMAXQUARTER,c=l.ONEAVGQUARTER,b=l.ONEMINQUARTER,g=l.ONEMAXMONTH,w=l.ONEAVGMONTH,_=l.ONEMINMONTH,T=l.ONEWEEK,k=l.ONEDAY,L=k/2,M=l.ONEHOUR,I=l.ONEMIN,P=l.ONESEC,S=l.MINUS_SIGN,E=l.BADNUM,D={K:"zeroline"},F={K:"gridline",L:"path"},H={K:"tick",L:"path"},V={K:"tick",L:"text"},Q=u("../../constants/alignment"),K=Q.MID_SHIFT,Z=Q.CAP_SHIFT,$=Q.LINE_SPACING,re=Q.OPPOSITE_SIDE,R=q.exports={};R.setConvert=u("./set_convert");var N=u("./axis_autotype"),U=u("./axis_ids"),te=U.idSort,j=U.isLinked;R.id2name=U.id2name,R.name2id=U.name2id,R.cleanId=U.cleanId,R.list=U.list,R.listIds=U.listIds,R.getFromId=U.getFromId,R.getFromTrace=U.getFromTrace;var Y=u("./autorange");R.getAutoRange=Y.getAutoRange,R.findExtremes=Y.findExtremes;function J(Ve){var Ye=1e-4*(Ve[1]-Ve[0]);return[Ve[0]-Ye,Ve[1]+Ye]}R.coerceRef=function(Ve,Ye,Be,Je,Se,Pe){var De=Je.charAt(Je.length-1),Ie=Be._fullLayout._subplots[De+"axis"],$e=Je+"ref",st={};return Se||(Se=Ie[0]||(typeof Pe=="string"?Pe:Pe[0])),Pe||(Pe=Se),Ie=Ie.concat(Ie.map(function(dt){return dt+" domain"})),st[$e]={valType:"enumerated",values:Ie.concat(Pe?typeof Pe=="string"?[Pe]:Pe:[]),dflt:Se},e.coerce(Ve,Ye,st,$e)},R.getRefType=function(Ve){return Ve===void 0?Ve:Ve==="paper"?"paper":Ve==="pixel"?"pixel":/( domain)$/.test(Ve)?"domain":"range"},R.coercePosition=function(Ve,Ye,Be,Je,Se,Pe){var De,Ie;if(R.getRefType(Je)!=="range")De=e.ensureNumber,Ie=Be(Se,Pe);else{var $e=R.getFromId(Ye,Je);Ie=Be(Se,Pe=$e.fraction2r(Pe)),De=$e.cleanPos}Ve[Se]=De(Ie)},R.cleanPosition=function(Ve,Ye,Be){return(Be==="paper"||Be==="pixel"?e.ensureNumber:R.getFromId(Ye,Be).cleanPos)(Ve)},R.redrawComponents=function(Ve,Ye){Ye=Ye||R.listIds(Ve);var Be=Ve._fullLayout;function Je(Se,Pe,De,Ie){for(var $e=y.getComponentMethod(Se,Pe),st={},dt=0;dt<Ye.length;dt++)for(var ut=Be[R.id2name(Ye[dt])][De],Lt=0;Lt<ut.length;Lt++){var lt=ut[Lt];if(!st[lt]&&($e(Ve,lt),st[lt]=1,Ie))return}}Je("annotations","drawOne","_annIndices"),Je("shapes","drawOne","_shapeIndices"),Je("images","draw","_imgIndices",!0)};var ee=R.getDataConversions=function(Ve,Ye,Be,Je){var Se,Pe=Be==="x"||Be==="y"||Be==="z"?Be:Je;if(Array.isArray(Pe)){if(Se={type:N(Je,void 0,{autotypenumbers:Ve._fullLayout.autotypenumbers}),_categories:[]},R.setConvert(Se),Se.type==="category")for(var De=0;De<Je.length;De++)Se.d2c(Je[De])}else Se=R.getFromTrace(Ve,Ye,Pe);return Se?{d2c:Se.d2c,c2d:Se.c2d}:Pe==="ids"?{d2c:se,c2d:se}:{d2c:ne,c2d:ne}};function ne(Ve){return+Ve}function se(Ve){return String(Ve)}function oe(Ve){return+Ve.substring(1)}R.getDataToCoordFunc=function(Ve,Ye,Be,Je){return ee(Ve,Ye,Be,Je).d2c},R.counterLetter=function(Ve){var Ye=Ve.charAt(0);return Ye==="x"?"y":Ye==="y"?"x":void 0},R.minDtick=function(Ve,Ye,Be,Je){["log","category","multicategory"].indexOf(Ve.type)===-1&&Je?Ve._minDtick===void 0?(Ve._minDtick=Ye,Ve._forceTick0=Be):Ve._minDtick&&((Ve._minDtick/Ye+1e-6)%1<2e-6&&((Be-Ve._forceTick0)/Ye%1+1.000001)%1<2e-6?(Ve._minDtick=Ye,Ve._forceTick0=Be):((Ye/Ve._minDtick+1e-6)%1>2e-6||((Be-Ve._forceTick0)/Ve._minDtick%1+1.000001)%1>2e-6)&&(Ve._minDtick=0)):Ve._minDtick=0},R.saveRangeInitial=function(Ve,Ye){for(var Be=R.list(Ve,"",!0),Je=!1,Se=0;Se<Be.length;Se++){var Pe=Be[Se],De=Pe._rangeInitial===void 0,Ie=De||!(Pe.range[0]===Pe._rangeInitial[0]&&Pe.range[1]===Pe._rangeInitial[1]);(De&&Pe.autorange===!1||Ye&&Ie)&&(Pe._rangeInitial=Pe.range.slice(),Je=!0)}return Je},R.saveShowSpikeInitial=function(Ve,Ye){for(var Be=R.list(Ve,"",!0),Je=!1,Se="on",Pe=0;Pe<Be.length;Pe++){var De=Be[Pe],Ie=De._showSpikeInitial===void 0,$e=Ie||De.showspikes!==De._showspikes;(Ie||Ye&&$e)&&(De._showSpikeInitial=De.showspikes,Je=!0),Se!=="on"||De.showspikes||(Se="off")}return Ve._fullLayout._cartesianSpikesEnabled=Se,Je},R.autoBin=function(Ve,Ye,Be,Je,Se,Pe){var De,Ie=e.aggNums(Math.min,null,Ve),$e=e.aggNums(Math.max,null,Ve);if(Ye.type==="category"||Ye.type==="multicategory")return{start:Ie-.5,end:$e+.5,size:Math.max(1,Math.round(Pe)||1),_dataSpan:$e-Ie};if(Se||(Se=Ye.calendar),De=Ye.type==="log"?{type:"linear",range:[Ie,$e]}:{type:Ye.type,range:e.simpleMap([Ie,$e],Ye.c2r,0,Se),calendar:Se},R.setConvert(De),Pe=Pe&&a.dtick(Pe,De.type))De.dtick=Pe,De.tick0=a.tick0(void 0,De.type,Se);else{var st;if(Be)st=($e-Ie)/Be;else{var dt=e.distinctVals(Ve),ut=Math.pow(10,Math.floor(Math.log(dt.minDiff)/Math.LN10)),Lt=ut*e.roundUp(dt.minDiff/ut,[.9,1.9,4.9,9.9],!0);st=Math.max(Lt,2*e.stdev(Ve)/Math.pow(Ve.length,Je?.25:.4)),p(st)||(st=1)}R.autoTicks(De,st)}var lt,Ct=De.dtick,Pt=R.tickIncrement(R.tickFirst(De),Ct,"reverse",Se);if(typeof Ct=="number")lt=(Pt=function(Ke,mt,Dt,Bt,Zt){var Re=0,ct=0,wt=0,Rt=0;function Vt(or){return(1+100*(or-Ke)/Dt.dtick)%100<2}for(var rr=0;rr<mt.length;rr++)mt[rr]%1==0?wt++:p(mt[rr])||Rt++,Vt(mt[rr])&&Re++,Vt(mt[rr]+Dt.dtick/2)&&ct++;var qt=mt.length-Rt;if(wt===qt&&Dt.type!=="date")Dt.dtick<1?Ke=Bt-.5*Dt.dtick:(Ke-=.5)+Dt.dtick<Bt&&(Ke+=Dt.dtick);else if(ct<.1*qt&&(Re>.3*qt||Vt(Bt)||Vt(Zt))){var Jt=Dt.dtick/2;Ke+=Ke+Jt<Bt?Jt:-Jt}return Ke}(Pt,Ve,De,Ie,$e))+(1+Math.floor(($e-Pt)/Ct))*Ct;else for(De.dtick.charAt(0)==="M"&&(Pt=function(Ke,mt,Dt,Bt,Zt){var Re=e.findExactDates(mt,Zt);if(Re.exactDays>.8){var ct=Number(Dt.substr(1));Re.exactYears>.8&&ct%12==0?Ke=R.tickIncrement(Ke,"M6","reverse")+1.5*k:Re.exactMonths>.8?Ke=R.tickIncrement(Ke,"M1","reverse")+15.5*k:Ke-=L;var wt=R.tickIncrement(Ke,Dt);if(wt<=Bt)return wt}return Ke}(Pt,Ve,Ct,Ie,Se)),lt=Pt,0;lt<=$e;)lt=R.tickIncrement(lt,Ct,!1,Se);return{start:Ye.c2r(Pt,0,Se),end:Ye.c2r(lt,0,Se),size:Ct,_dataSpan:$e-Ie}},R.prepTicks=function(Ve,Ye){var Be=e.simpleMap(Ve.range,Ve.r2l,void 0,void 0,Ye);if(Ve._dtickInit=Ve.dtick,Ve._tick0Init=Ve.tick0,Ve.tickmode==="auto"||!Ve.dtick){var Je,Se=Ve.nticks;Se||(Ve.type==="category"||Ve.type==="multicategory"?(Je=Ve.tickfont?e.bigFont(Ve.tickfont.size||12):15,Se=Ve._length/Je):(Je=Ve._id.charAt(0)==="y"?40:80,Se=e.constrain(Ve._length/Je,4,9)+1),Ve._name==="radialaxis"&&(Se*=2)),Ve.tickmode==="array"&&(Se*=100),Ve._roughDTick=Math.abs(Be[1]-Be[0])/Se,R.autoTicks(Ve,Ve._roughDTick),Ve._minDtick>0&&Ve.dtick<2*Ve._minDtick&&(Ve.dtick=Ve._minDtick,Ve.tick0=Ve.l2r(Ve._forceTick0))}Ve.ticklabelmode==="period"&&function(Pe){var De;function Ie(){return!(p(Pe.dtick)||Pe.dtick.charAt(0)!=="M")}var $e=Ie(),st=R.getTickFormat(Pe);if(st){var dt=Pe._dtickInit!==Pe.dtick;/%[fLQsSMX]/.test(st)||(/%[HI]/.test(st)?(De=M,dt&&!$e&&Pe.dtick<M&&(Pe.dtick=M)):/%p/.test(st)?(De=L,dt&&!$e&&Pe.dtick<L&&(Pe.dtick=L)):/%[Aadejuwx]/.test(st)?(De=k,dt&&!$e&&Pe.dtick<k&&(Pe.dtick=k)):/%[UVW]/.test(st)?(De=T,dt&&!$e&&Pe.dtick<T&&(Pe.dtick=T)):/%[Bbm]/.test(st)?(De=w,dt&&($e?oe(Pe.dtick)<1:Pe.dtick<_)&&(Pe.dtick="M1")):/%[q]/.test(st)?(De=c,dt&&($e?oe(Pe.dtick)<3:Pe.dtick<b)&&(Pe.dtick="M3")):/%[Yy]/.test(st)&&(De=d,dt&&($e?oe(Pe.dtick)<12:Pe.dtick<v)&&(Pe.dtick="M12")))}($e=Ie())&&Pe.tick0===Pe._dowTick0&&(Pe.tick0=Pe._rawTick0),Pe._definedDelta=De}(Ve),Ve.tick0||(Ve.tick0=Ve.type==="date"?"2000-01-01":0),Ve.type==="date"&&Ve.dtick<.1&&(Ve.dtick=.1),me(Ve)},R.calcTicks=function(Ve,Ye){R.prepTicks(Ve,Ye);var Be=e.simpleMap(Ve.range,Ve.r2l,void 0,void 0,Ye);if(Ve.tickmode==="array")return function(rr){var qt=rr.tickvals,Jt=rr.ticktext,or=new Array(qt.length),gr=J(e.simpleMap(rr.range,rr.r2l)),dr=Math.min(gr[0],gr[1]),ur=Math.max(gr[0],gr[1]),cr=0;Array.isArray(Jt)||(Jt=[]);var mr=rr.type==="category"?rr.d2l_noadd:rr.d2l;rr.type==="log"&&String(rr.dtick).charAt(0)!=="L"&&(rr.dtick="L"+Math.pow(10,Math.floor(Math.min(rr.range[0],rr.range[1]))-1));for(var Dr=0;Dr<qt.length;Dr++){var yr=mr(qt[Dr]);yr>dr&&yr<ur&&(Jt[Dr]===void 0?or[cr]=R.tickText(rr,yr):or[cr]=ke(rr,yr,String(Jt[Dr])),cr++)}return cr<qt.length&&or.splice(cr,qt.length-cr),rr.rangebreaks&&(or=or.filter(function(Br){return rr.maskBreaks(Br.x)!==E})),or}(Ve);var Je=J(Be),Se=Je[0],Pe=Je[1],De=Be[1]<Be[0],Ie=Math.min(Be[0],Be[1]),$e=Math.max(Be[0],Be[1]),st=Ve.type==="log"&&!(p(Ve.dtick)||Ve.dtick.charAt(0)==="L"),dt=Ve.ticklabelmode==="period";if(Ve._tmin=R.tickFirst(Ve,Ye),Ve._tmin<Se!==De)return[];Ve.type!=="category"&&Ve.type!=="multicategory"||(Pe=De?Math.max(-.5,Pe):Math.min(Ve._categories.length-.5,Pe));var ut=Ve._tmin;Ve.rangebreaks&&Ve._tick0Init!==Ve.tick0&&(ut=At(ut,Ve),De||(ut=R.tickIncrement(ut,Ve.dtick,!De,Ve.calendar))),dt&&(ut=R.tickIncrement(ut,Ve.dtick,!De,Ve.calendar));for(var Lt,lt=Math.max(1e3,Ve._length||0),Ct=[],Pt=null;De?ut>=Pe:ut<=Pe;ut=R.tickIncrement(ut,Ve.dtick,De,Ve.calendar)){if(Ve.rangebreaks&&!De){if(ut<Se)continue;if(Ve.maskBreaks(ut)===E&&At(ut,Ve)>=$e)break}if(Ct.length>lt||ut===Pt)break;Pt=ut;var Ke=!1;st&&ut!==(0|ut)&&(Ke=!0),Ct.push({minor:Ke,value:ut})}if(dt&&function(rr,qt,Jt){for(var or=0;or<rr.length;or++){var gr=rr[or].value,dr=or,ur=or+1;or<rr.length-1?(dr=or,ur=or+1):or>0?(dr=or-1,ur=or):(dr=or,ur=or);var cr,mr=rr[dr].value,Dr=rr[ur].value,yr=Math.abs(Dr-mr),Br=Jt||yr,Kr=0;Br>=v?Kr=yr>=v&&yr<=f?yr:d:Jt===c&&Br>=b?Kr=yr>=b&&yr<=m?yr:c:Br>=_?Kr=yr>=_&&yr<=g?yr:w:Jt===T&&Br>=T?Kr=T:Br>=k?Kr=k:Jt===L&&Br>=L?Kr=L:Jt===M&&Br>=M&&(Kr=M),Kr>=yr&&(Kr=yr,cr=!0);var an=gr+Kr;if(qt.rangebreaks&&Kr>0){for(var Ln=0,Pn=0;Pn<84;Pn++){var An=(Pn+.5)/84;qt.maskBreaks(gr*(1-An)+An*an)!==E&&Ln++}(Kr*=Ln/84)||(rr[or].drop=!0),cr&&yr>T&&(Kr=yr)}(Kr>0||or===0)&&(rr[or].periodX=gr+Kr/2)}}(Ct,Ve,Ve._definedDelta),Ve.rangebreaks){var mt=Ve._id.charAt(0)==="y",Dt=1;Ve.tickmode==="auto"&&(Dt=Ve.tickfont?Ve.tickfont.size:12);var Bt=NaN;for(Lt=Ct.length-1;Lt>-1;Lt--)if(Ct[Lt].drop)Ct.splice(Lt,1);else{Ct[Lt].value=At(Ct[Lt].value,Ve);var Zt=Ve.c2p(Ct[Lt].value);(mt?Bt>Zt-Dt:Bt<Zt+Dt)?Ct.splice(De?Lt+1:Lt,1):Bt=Zt}}rt(Ve)&&Math.abs(Be[1]-Be[0])===360&&Ct.pop(),Ve._tmax=(Ct[Ct.length-1]||{}).value,Ve._prevDateHead="",Ve._inCalcTicks=!0;var Re,ct,wt=[];for(Lt=0;Lt<Ct.length;Lt++){var Rt=Ct[Lt].minor,Vt=Ct[Lt].value;Re=R.tickText(Ve,Vt,!1,Rt),(ct=Ct[Lt].periodX)!==void 0&&(Re.periodX=ct,(ct>$e||ct<Ie)&&(ct>$e&&(Re.periodX=$e),ct<Ie&&(Re.periodX=Ie),Re.text=" ",Ve._prevDateHead="")),wt.push(Re)}return Ve._inCalcTicks=!1,wt};var he=[2,5,10],le=[1,2,3,6,12],de=[1,2,5,10,15,30],xe=[1,2,3,7,14],we=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],be=[-.301,0,.301,.699,1],Ae=[15,30,45,90,180];function fe(Ve,Ye,Be){return Ye*e.roundUp(Ve/Ye,Be)}function me(Ve){var Ye=Ve.dtick;if(Ve._tickexponent=0,p(Ye)||typeof Ye=="string"||(Ye=1),Ve.type!=="category"&&Ve.type!=="multicategory"||(Ve._tickround=null),Ve.type==="date"){var Be=Ve.r2l(Ve.tick0),Je=Ve.l2r(Be).replace(/(^-|i)/g,""),Se=Je.length;if(String(Ye).charAt(0)==="M")Se>10||Je.substr(5)!=="01-01"?Ve._tickround="d":Ve._tickround=+Ye.substr(1)%12==0?"y":"m";else if(Ye>=k&&Se<=10||Ye>=15*k)Ve._tickround="d";else if(Ye>=I&&Se<=16||Ye>=M)Ve._tickround="M";else if(Ye>=P&&Se<=19||Ye>=I)Ve._tickround="S";else{var Pe=Ve.l2r(Be+Ye).replace(/^-/,"").length;Ve._tickround=Math.max(Se,Pe)-20,Ve._tickround<0&&(Ve._tickround=4)}}else if(p(Ye)||Ye.charAt(0)==="L"){var De=Ve.range.map(Ve.r2d||Number);p(Ye)||(Ye=Number(Ye.substr(1))),Ve._tickround=2-Math.floor(Math.log(Ye)/Math.LN10+.01);var Ie=Math.max(Math.abs(De[0]),Math.abs(De[1])),$e=Math.floor(Math.log(Ie)/Math.LN10+.01),st=Ve.minexponent===void 0?3:Ve.minexponent;Math.abs($e)>st&&(Me(Ve.exponentformat)&&!Oe($e)?Ve._tickexponent=3*Math.round(($e-1)/3):Ve._tickexponent=$e)}else Ve._tickround=null}function ke(Ve,Ye,Be){var Je=Ve.tickfont||{};return{x:Ye,dx:0,dy:0,text:Be||"",fontSize:Je.size,font:Je.family,fontColor:Je.color}}R.autoTicks=function(Ve,Ye){var Be;function Je(dt){return Math.pow(dt,Math.floor(Math.log(Ye)/Math.LN10))}if(Ve.type==="date"){Ve.tick0=e.dateTick0(Ve.calendar,0);var Se=2*Ye;if(Se>d)Ye/=d,Be=Je(10),Ve.dtick="M"+12*fe(Ye,Be,he);else if(Se>w)Ye/=w,Ve.dtick="M"+fe(Ye,1,le);else if(Se>k){Ve.dtick=fe(Ye,k,Ve._hasDayOfWeekBreaks?[1,2,7,14]:xe);var Pe=R.getTickFormat(Ve),De=Ve.ticklabelmode==="period";De&&(Ve._rawTick0=Ve.tick0),/%[uVW]/.test(Pe)?Ve.tick0=e.dateTick0(Ve.calendar,2):Ve.tick0=e.dateTick0(Ve.calendar,1),De&&(Ve._dowTick0=Ve.tick0)}else Se>M?Ve.dtick=fe(Ye,M,le):Se>I?Ve.dtick=fe(Ye,I,de):Se>P?Ve.dtick=fe(Ye,P,de):(Be=Je(10),Ve.dtick=fe(Ye,Be,he))}else if(Ve.type==="log"){Ve.tick0=0;var Ie=e.simpleMap(Ve.range,Ve.r2l);if(Ye>.7)Ve.dtick=Math.ceil(Ye);else if(Math.abs(Ie[1]-Ie[0])<1){var $e=1.5*Math.abs((Ie[1]-Ie[0])/Ye);Ye=Math.abs(Math.pow(10,Ie[1])-Math.pow(10,Ie[0]))/$e,Be=Je(10),Ve.dtick="L"+fe(Ye,Be,he)}else Ve.dtick=Ye>.3?"D2":"D1"}else Ve.type==="category"||Ve.type==="multicategory"?(Ve.tick0=0,Ve.dtick=Math.ceil(Math.max(Ye,1))):rt(Ve)?(Ve.tick0=0,Be=1,Ve.dtick=fe(Ye,Be,Ae)):(Ve.tick0=0,Be=Je(10),Ve.dtick=fe(Ye,Be,he));if(Ve.dtick===0&&(Ve.dtick=1),!p(Ve.dtick)&&typeof Ve.dtick!="string"){var st=Ve.dtick;throw Ve.dtick=1,"ax.dtick error: "+String(st)}},R.tickIncrement=function(Ve,Ye,Be,Je){var Se=Be?-1:1;if(p(Ye))return e.increment(Ve,Se*Ye);var Pe=Ye.charAt(0),De=Se*Number(Ye.substr(1));if(Pe==="M")return e.incrementMonth(Ve,De,Je);if(Pe==="L")return Math.log(Math.pow(10,Ve)+De)/Math.LN10;if(Pe==="D"){var Ie=Ye==="D2"?be:we,$e=Ve+.01*Se,st=e.roundUp(e.mod($e,1),Ie,Be);return Math.floor($e)+Math.log(o.round(Math.pow(10,st),1))/Math.LN10}throw"unrecognized dtick "+String(Ye)},R.tickFirst=function(Ve,Ye){var Be=Ve.r2l||Number,Je=e.simpleMap(Ve.range,Be,void 0,void 0,Ye),Se=Je[1]<Je[0],Pe=Se?Math.floor:Math.ceil,De=J(Je)[0],Ie=Ve.dtick,$e=Be(Ve.tick0);if(p(Ie)){var st=Pe((De-$e)/Ie)*Ie+$e;return Ve.type!=="category"&&Ve.type!=="multicategory"||(st=e.constrain(st,0,Ve._categories.length-1)),st}var dt=Ie.charAt(0),ut=Number(Ie.substr(1));if(dt==="M"){for(var Lt,lt,Ct,Pt=0,Ke=$e;Pt<10;){if(((Lt=R.tickIncrement(Ke,Ie,Se,Ve.calendar))-De)*(Ke-De)<=0)return Se?Math.min(Ke,Lt):Math.max(Ke,Lt);lt=(De-(Ke+Lt)/2)/(Lt-Ke),Ct=dt+(Math.abs(Math.round(lt))||1)*ut,Ke=R.tickIncrement(Ke,Ct,lt<0?!Se:Se,Ve.calendar),Pt++}return e.error("tickFirst did not converge",Ve),Ke}if(dt==="L")return Math.log(Pe((Math.pow(10,De)-$e)/ut)*ut+$e)/Math.LN10;if(dt==="D"){var mt=Ie==="D2"?be:we,Dt=e.roundUp(e.mod(De,1),mt,Se);return Math.floor(De)+Math.log(o.round(Math.pow(10,Dt),1))/Math.LN10}throw"unrecognized dtick "+String(Ie)},R.tickText=function(Ve,Ye,Be,Je){var Se,Pe=ke(Ve,Ye),De=Ve.tickmode==="array",Ie=Be||De,$e=Ve.type,st=$e==="category"?Ve.d2l_noadd:Ve.d2l;if(De&&Array.isArray(Ve.ticktext)){var dt=e.simpleMap(Ve.range,Ve.r2l),ut=(Math.abs(dt[1]-dt[0])-(Ve._lBreaks||0))/1e4;for(Se=0;Se<Ve.ticktext.length&&!(Math.abs(Ye-st(Ve.tickvals[Se]))<ut);Se++);if(Se<Ve.ticktext.length)return Pe.text=String(Ve.ticktext[Se]),Pe}function Lt(Pt){if(Pt===void 0)return!0;if(Be)return Pt==="none";var Ke={first:Ve._tmin,last:Ve._tmax}[Pt];return Pt!=="all"&&Ye!==Ke}var lt=Be?"never":Ve.exponentformat!=="none"&&Lt(Ve.showexponent)?"hide":"";if($e==="date"?function(Pt,Ke,mt,Dt){var Bt=Pt._tickround,Zt=mt&&Pt.hoverformat||R.getTickFormat(Pt);Dt&&(Bt=p(Bt)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Bt]);var Re,ct=e.formatDate(Ke.x,Zt,Bt,Pt._dateFormat,Pt.calendar,Pt._extraFormat),wt=ct.indexOf(`
`);if(wt!==-1&&(Re=ct.substr(wt+1),ct=ct.substr(0,wt)),Dt&&(ct==="00:00:00"||ct==="00:00"?(ct=Re,Re=""):ct.length===8&&(ct=ct.replace(/:00$/,""))),Re)if(mt)Bt==="d"?ct+=", "+Re:ct=Re+(ct?", "+ct:"");else if(Pt._inCalcTicks&&Pt._prevDateHead===Re){var Rt=Gt(Pt),Vt=Pt._trueSide||Pt.side;(!Rt&&Vt==="top"||Rt&&Vt==="bottom")&&(ct+="<br> ")}else Pt._prevDateHead=Re,ct+="<br>"+Re;Ke.text=ct}(Ve,Pe,Be,Ie):$e==="log"?function(Pt,Ke,mt,Dt,Bt){var Zt=Pt.dtick,Re=Ke.x,ct=Pt.tickformat,wt=typeof Zt=="string"&&Zt.charAt(0);if(Bt==="never"&&(Bt=""),Dt&&wt!=="L"&&(Zt="L3",wt="L"),ct||wt==="L")Ke.text=Fe(Math.pow(10,Re),Pt,Bt,Dt);else if(p(Zt)||wt==="D"&&e.mod(Re+.01,1)<.1){var Rt=Math.round(Re),Vt=Math.abs(Rt),rr=Pt.exponentformat;rr==="power"||Me(rr)&&Oe(Rt)?(Ke.text=Rt===0?1:Rt===1?"10":"10<sup>"+(Rt>1?"":S)+Vt+"</sup>",Ke.fontSize*=1.25):(rr==="e"||rr==="E")&&Vt>2?Ke.text="1"+rr+(Rt>0?"+":S)+Vt:(Ke.text=Fe(Math.pow(10,Re),Pt,"","fakehover"),Zt==="D1"&&Pt._id.charAt(0)==="y"&&(Ke.dy-=Ke.fontSize/6))}else{if(wt!=="D")throw"unrecognized dtick "+String(Zt);Ke.text=String(Math.round(Math.pow(10,e.mod(Re,1)))),Ke.fontSize*=.75}if(Pt.dtick==="D1"){var qt=String(Ke.text).charAt(0);qt!=="0"&&qt!=="1"||(Pt._id.charAt(0)==="y"?Ke.dx-=Ke.fontSize/4:(Ke.dy+=Ke.fontSize/2,Ke.dx+=(Pt.range[1]>Pt.range[0]?1:-1)*Ke.fontSize*(Re<0?.5:.25)))}}(Ve,Pe,0,Ie,lt):$e==="category"?function(Pt,Ke){var mt=Pt._categories[Math.round(Ke.x)];mt===void 0&&(mt=""),Ke.text=String(mt)}(Ve,Pe):$e==="multicategory"?function(Pt,Ke,mt){var Dt=Math.round(Ke.x),Bt=Pt._categories[Dt]||[],Zt=Bt[1]===void 0?"":String(Bt[1]),Re=Bt[0]===void 0?"":String(Bt[0]);mt?Ke.text=Re+" - "+Zt:(Ke.text=Zt,Ke.text2=Re)}(Ve,Pe,Be):rt(Ve)?function(Pt,Ke,mt,Dt,Bt){if(Pt.thetaunit!=="radians"||mt)Ke.text=Fe(Ke.x,Pt,Bt,Dt);else{var Zt=Ke.x/180;if(Zt===0)Ke.text="0";else{var Re=function(wt){function Rt(Jt,or){return Math.abs(Jt-or)<=1e-6}var Vt=function(Jt){for(var or=1;!Rt(Math.round(Jt*or)/or,Jt);)or*=10;return or}(wt),rr=wt*Vt,qt=Math.abs(function Jt(or,gr){return Rt(gr,0)?or:Jt(gr,or%gr)}(rr,Vt));return[Math.round(rr/qt),Math.round(Vt/qt)]}(Zt);if(Re[1]>=100)Ke.text=Fe(e.deg2rad(Ke.x),Pt,Bt,Dt);else{var ct=Ke.x<0;Re[1]===1?Re[0]===1?Ke.text="\u03C0":Ke.text=Re[0]+"\u03C0":Ke.text=["<sup>",Re[0],"</sup>","\u2044","<sub>",Re[1],"</sub>","\u03C0"].join(""),ct&&(Ke.text=S+Ke.text)}}}}(Ve,Pe,Be,Ie,lt):function(Pt,Ke,mt,Dt,Bt){Bt==="never"?Bt="":Pt.showexponent==="all"&&Math.abs(Ke.x/Pt.dtick)<1e-6&&(Bt="hide"),Ke.text=Fe(Ke.x,Pt,Bt,Dt)}(Ve,Pe,0,Ie,lt),Je||(Ve.tickprefix&&!Lt(Ve.showtickprefix)&&(Pe.text=Ve.tickprefix+Pe.text),Ve.ticksuffix&&!Lt(Ve.showticksuffix)&&(Pe.text+=Ve.ticksuffix)),Ve.tickson==="boundaries"||Ve.showdividers){var Ct=function(Pt){var Ke=Ve.l2p(Pt);return Ke>=0&&Ke<=Ve._length?Pt:null};Pe.xbnd=[Ct(Pe.x-.5),Ct(Pe.x+Ve.dtick-.5)]}return Pe},R.hoverLabelText=function(Ve,Ye,Be){Be&&(Ve=e.extendFlat({},Ve,{hoverformat:Be}));var Je=Array.isArray(Ye)?Ye[0]:Ye,Se=Array.isArray(Ye)?Ye[1]:void 0;if(Se!==void 0&&Se!==Je)return R.hoverLabelText(Ve,Je,Be)+" - "+R.hoverLabelText(Ve,Se,Be);var Pe=Ve.type==="log"&&Je<=0,De=R.tickText(Ve,Ve.c2l(Pe?-Je:Je),"hover").text;return Pe?Je===0?"0":S+De:De};var Te=["f","p","n","\u03BC","m","","k","M","G","T"];function Me(Ve){return Ve==="SI"||Ve==="B"}function Oe(Ve){return Ve>14||Ve<-15}function Fe(Ve,Ye,Be,Je){var Se=Ve<0,Pe=Ye._tickround,De=Be||Ye.exponentformat||"B",Ie=Ye._tickexponent,$e=R.getTickFormat(Ye),st=Ye.separatethousands;if(Je){var dt={exponentformat:De,minexponent:Ye.minexponent,dtick:Ye.showexponent==="none"?Ye.dtick:p(Ve)&&Math.abs(Ve)||1,range:Ye.showexponent==="none"?Ye.range.map(Ye.r2d):[0,Ve||1]};me(dt),Pe=(Number(dt._tickround)||0)+4,Ie=dt._tickexponent,Ye.hoverformat&&($e=Ye.hoverformat)}if($e)return Ye._numFormat($e)(Ve).replace(/-/g,S);var ut,Lt=Math.pow(10,-Pe)/2;if(De==="none"&&(Ie=0),(Ve=Math.abs(Ve))<Lt)Ve="0",Se=!1;else{if(Ve+=Lt,Ie&&(Ve*=Math.pow(10,-Ie),Pe+=Ie),Pe===0)Ve=String(Math.floor(Ve));else if(Pe<0){Ve=(Ve=String(Math.round(Ve))).substr(0,Ve.length+Pe);for(var lt=Pe;lt<0;lt++)Ve+="0"}else{var Ct=(Ve=String(Ve)).indexOf(".")+1;Ct&&(Ve=Ve.substr(0,Ct+Pe).replace(/\.?0+$/,""))}Ve=e.numSeparate(Ve,Ye._separators,st)}return Ie&&De!=="hide"&&(Me(De)&&Oe(Ie)&&(De="power"),ut=Ie<0?S+-Ie:De!=="power"?"+"+Ie:String(Ie),De==="e"||De==="E"?Ve+=De+ut:De==="power"?Ve+="\xD710<sup>"+ut+"</sup>":De==="B"&&Ie===9?Ve+="B":Me(De)&&(Ve+=Te[Ie/3+5])),Se?S+Ve:Ve}function qe(Ve,Ye){for(var Be=[],Je={},Se=0;Se<Ye.length;Se++){var Pe=Ye[Se];Je[Pe.text2]?Je[Pe.text2].push(Pe.x):Je[Pe.text2]=[Pe.x]}for(var De in Je)Be.push(ke(Ve,e.interp(Je[De],.5),De));return Be}function et(Ve){return Ve.periodX!==void 0?Ve.periodX:Ve.x}function ze(Ve){return[Ve.text,Ve.x,Ve.axInfo,Ve.font,Ve.fontSize,Ve.fontColor].join("_")}function Ue(Ve){var Ye=Ve.title.font.size,Be=(Ve.title.text.match(t.BR_TAG_ALL)||[]).length;return Ve.title.hasOwnProperty("standoff")?Be?Ye*(Z+Be*$):Ye*Z:Be?Ye*(Be+1)*$:Ye}function We(Ve,Ye){var Be=Ve.l2p(Ye);return Be>1&&Be<Ve._length-1}function Ze(Ve){var Ye=o.select(Ve),Be=Ye.select(".text-math-group");return Be.empty()?Ye.select("text"):Be}function nt(Ve){return Ve._id+".automargin"}function ft(Ve){return nt(Ve)+".mirror"}function xt(Ve){return Ve._id+".rangeslider"}function It(Ve,Ye){for(var Be=0;Be<Ye.length;Be++)Ve.indexOf(Ye[Be])===-1&&Ve.push(Ye[Be])}function Et(Ve,Ye,Be){var Je,Se,Pe=[],De=[],Ie=Ve.layout;for(Je=0;Je<Ye.length;Je++)Pe.push(R.getFromId(Ve,Ye[Je]));for(Je=0;Je<Be.length;Je++)De.push(R.getFromId(Ve,Be[Je]));var $e=Object.keys(s),st=["anchor","domain","overlaying","position","side","tickangle","editType"],dt=["linear","log"];for(Je=0;Je<$e.length;Je++){var ut=$e[Je],Lt=Pe[0][ut],lt=De[0][ut],Ct=!0,Pt=!1,Ke=!1;if(ut.charAt(0)!=="_"&&typeof Lt!="function"&&st.indexOf(ut)===-1){for(Se=1;Se<Pe.length&&Ct;Se++){var mt=Pe[Se][ut];ut==="type"&&dt.indexOf(Lt)!==-1&&dt.indexOf(mt)!==-1&&Lt!==mt?Pt=!0:mt!==Lt&&(Ct=!1)}for(Se=1;Se<De.length&&Ct;Se++){var Dt=De[Se][ut];ut==="type"&&dt.indexOf(lt)!==-1&&dt.indexOf(Dt)!==-1&&lt!==Dt?Ke=!0:De[Se][ut]!==lt&&(Ct=!1)}Ct&&(Pt&&(Ie[Pe[0]._name].type="linear"),Ke&&(Ie[De[0]._name].type="linear"),it(Ie,ut,Pe,De,Ve._fullLayout._dfltTitle))}}for(Je=0;Je<Ve._fullLayout.annotations.length;Je++){var Bt=Ve._fullLayout.annotations[Je];Ye.indexOf(Bt.xref)!==-1&&Be.indexOf(Bt.yref)!==-1&&e.swapAttrs(Ie.annotations[Je],["?"])}}function it(Ve,Ye,Be,Je,Se){var Pe,De=e.nestedProperty,Ie=De(Ve[Be[0]._name],Ye).get(),$e=De(Ve[Je[0]._name],Ye).get();for(Ye==="title"&&(Ie&&Ie.text===Se.x&&(Ie.text=Se.y),$e&&$e.text===Se.y&&($e.text=Se.x)),Pe=0;Pe<Be.length;Pe++)De(Ve,Be[Pe]._name+"."+Ye).set($e);for(Pe=0;Pe<Je.length;Pe++)De(Ve,Je[Pe]._name+"."+Ye).set(Ie)}function rt(Ve){return Ve._id==="angularaxis"}function At(Ve,Ye){for(var Be=Ye._rangebreaks.length,Je=0;Je<Be;Je++){var Se=Ye._rangebreaks[Je];if(Ve>=Se.min&&Ve<Se.max)return Se.max}return Ve}function Gt(Ve){return(Ve.ticklabelposition||"").indexOf("inside")!==-1}function Qt(Ve,Ye){Gt(Ve._anchorAxis||{})&&Ve._hideCounterAxisInsideTickLabels&&Ve._hideCounterAxisInsideTickLabels(Ye)}R.getTickFormat=function(Ve){var Ye,Be,Je,Se,Pe,De,Ie,$e;function st(Lt){return typeof Lt!="string"?Lt:Number(Lt.replace("M",""))*w}function dt(Lt,lt){var Ct=["L","D"];if(typeof Lt==typeof lt){if(typeof Lt=="number")return Lt-lt;var Pt=Ct.indexOf(Lt.charAt(0)),Ke=Ct.indexOf(lt.charAt(0));return Pt===Ke?Number(Lt.replace(/(L|D)/g,""))-Number(lt.replace(/(L|D)/g,"")):Pt-Ke}return typeof Lt=="number"?1:-1}function ut(Lt,lt){var Ct=lt[0]===null,Pt=lt[1]===null,Ke=dt(Lt,lt[0])>=0,mt=dt(Lt,lt[1])<=0;return(Ct||Ke)&&(Pt||mt)}if(Ve.tickformatstops&&Ve.tickformatstops.length>0)switch(Ve.type){case"date":case"linear":for(Ye=0;Ye<Ve.tickformatstops.length;Ye++)if((Je=Ve.tickformatstops[Ye]).enabled&&(Se=Ve.dtick,Pe=Je.dtickrange,De=void 0,Ie=void 0,$e=void 0,De=st||function(Lt){return Lt},Ie=Pe[0],$e=Pe[1],(!Ie&&typeof Ie!="number"||De(Ie)<=De(Se))&&(!$e&&typeof $e!="number"||De($e)>=De(Se)))){Be=Je;break}break;case"log":for(Ye=0;Ye<Ve.tickformatstops.length;Ye++)if((Je=Ve.tickformatstops[Ye]).enabled&&ut(Ve.dtick,Je.dtickrange)){Be=Je;break}}return Be?Be.value:Ve.tickformat},R.getSubplots=function(Ve,Ye){var Be=Ve._fullLayout._subplots,Je=Be.cartesian.concat(Be.gl2d||[]),Se=Ye?R.findSubplotsWithAxis(Je,Ye):Je;return Se.sort(function(Pe,De){var Ie=Pe.substr(1).split("y"),$e=De.substr(1).split("y");return Ie[0]===$e[0]?+Ie[1]-+$e[1]:+Ie[0]-+$e[0]}),Se},R.findSubplotsWithAxis=function(Ve,Ye){for(var Be=new RegExp(Ye._id.charAt(0)==="x"?"^"+Ye._id+"y":Ye._id+"$"),Je=[],Se=0;Se<Ve.length;Se++){var Pe=Ve[Se];Be.test(Pe)&&Je.push(Pe)}return Je},R.makeClipPaths=function(Ve){var Ye=Ve._fullLayout;if(!Ye._hasOnlyLargeSploms){var Be,Je,Se={_offset:0,_length:Ye.width,_id:""},Pe={_offset:0,_length:Ye.height,_id:""},De=R.list(Ve,"x",!0),Ie=R.list(Ve,"y",!0),$e=[];for(Be=0;Be<De.length;Be++)for($e.push({x:De[Be],y:Pe}),Je=0;Je<Ie.length;Je++)Be===0&&$e.push({x:Se,y:Ie[Je]}),$e.push({x:De[Be],y:Ie[Je]});var st=Ye._clips.selectAll(".axesclip").data($e,function(dt){return dt.x._id+dt.y._id});st.enter().append("clipPath").classed("axesclip",!0).attr("id",function(dt){return"clip"+Ye._uid+dt.x._id+dt.y._id}).append("rect"),st.exit().remove(),st.each(function(dt){o.select(this).select("rect").attr({x:dt.x._offset||0,y:dt.y._offset||0,width:dt.x._length||1,height:dt.y._length||1})})}},R.draw=function(Ve,Ye,Be){var Je=Ve._fullLayout;Ye==="redraw"&&Je._paper.selectAll("g.subplot").each(function(Pe){var De=Pe[0],Ie=Je._plots[De];if(Ie){var $e=Ie.xaxis,st=Ie.yaxis;Ie.xaxislayer.selectAll("."+$e._id+"tick").remove(),Ie.yaxislayer.selectAll("."+st._id+"tick").remove(),Ie.xaxislayer.selectAll("."+$e._id+"tick2").remove(),Ie.yaxislayer.selectAll("."+st._id+"tick2").remove(),Ie.xaxislayer.selectAll("."+$e._id+"divider").remove(),Ie.yaxislayer.selectAll("."+st._id+"divider").remove(),Ie.gridlayer&&Ie.gridlayer.selectAll("path").remove(),Ie.zerolinelayer&&Ie.zerolinelayer.selectAll("path").remove(),Je._infolayer.select(".g-"+$e._id+"title").remove(),Je._infolayer.select(".g-"+st._id+"title").remove()}});var Se=Ye&&Ye!=="redraw"?Ye:R.listIds(Ve);return e.syncOrAsync(Se.map(function(Pe){return function(){if(Pe){var De=R.getFromId(Ve,Pe),Ie=R.drawOne(Ve,De,Be);return De._r=De.range.slice(),De._rl=e.simpleMap(De._r,De.r2l),Ie}}}))},R.drawOne=function(Ve,Ye,Be){var Je,Se,Pe;Be=Be||{},Ye.setScale();var De=Ve._fullLayout,Ie=Ye._id,$e=Ie.charAt(0),st=R.counterLetter(Ie),dt=De._plots[Ye._mainSubplot];if(dt){var ut=dt[$e+"axislayer"],Lt=Ye._mainLinePosition,lt=Ye._mainMirrorPosition,Ct=Ye._vals=R.calcTicks(Ye),Pt=[Ye.mirror,Lt,lt].join("_");for(Je=0;Je<Ct.length;Je++)Ct[Je].axInfo=Pt;Ye._selections={},Ye._tickAngles&&(Ye._prevTickAngles=Ye._tickAngles),Ye._tickAngles={},Ye._depth=null;var Ke={};if(Ye.visible){var mt,Dt,Bt=R.makeTransTickFn(Ye),Zt=R.makeTransTickLabelFn(Ye),Re=Ye.ticks==="inside",ct=Ye.ticks==="outside";if(Ye.tickson==="boundaries"){var wt=function(zr,Ar){var qr,On=[],Fr=function(on,Mn){var bn=on.xbnd[Mn];bn!==null&&On.push(e.extendFlat({},on,{x:bn}))};if(Ar.length){for(qr=0;qr<Ar.length;qr++)Fr(Ar[qr],0);Fr(Ar[qr-1],1)}return On}(0,Ct);Dt=R.clipEnds(Ye,wt),mt=Re?Dt:wt}else Dt=R.clipEnds(Ye,Ct),mt=Re&&Ye.ticklabelmode!=="period"?Dt:Ct;var Rt=Ye._gridVals=Dt,Vt=function(zr,Ar){var qr,On,Fr=[],on=Ar.length&&Ar[Ar.length-1].x<Ar[0].x,Mn=function(Dn,tr){var Ot=Dn.xbnd[tr];Ot!==null&&Fr.push(e.extendFlat({},Dn,{x:Ot}))};if(zr.showdividers&&Ar.length){for(qr=0;qr<Ar.length;qr++){var bn=Ar[qr];bn.text2!==On&&Mn(bn,on?1:0),On=bn.text2}Mn(Ar[qr-1],on?0:1)}return Fr}(Ye,Ct);if(!De._hasOnlyLargeSploms){var rr=Ye._subplotsWith,qt={};for(Je=0;Je<rr.length;Je++){Se=rr[Je];var Jt=(Pe=De._plots[Se])[st+"axis"],or=Jt._mainAxis._id;if(!qt[or]){qt[or]=1;var gr=$e==="x"?"M0,"+Jt._offset+"v"+Jt._length:"M"+Jt._offset+",0h"+Jt._length;R.drawGrid(Ve,Ye,{vals:Rt,counterAxis:Jt,layer:Pe.gridlayer.select("."+Ie),path:gr,transFn:Bt}),R.drawZeroLine(Ve,Ye,{counterAxis:Jt,layer:Pe.zerolinelayer,path:gr,transFn:Bt})}}}var dr=R.getTickSigns(Ye),ur=[];if(Ye.ticks){var cr,mr,Dr,yr=R.makeTickPath(Ye,Lt,dr[2]);if(Ye._anchorAxis&&Ye.mirror&&Ye.mirror!==!0?(cr=R.makeTickPath(Ye,lt,dr[3]),mr=yr+cr):(cr="",mr=yr),Ye.showdividers&&ct&&Ye.tickson==="boundaries"){var Br={};for(Je=0;Je<Vt.length;Je++)Br[Vt[Je].x]=1;Dr=function(zr){return Br[zr.x]?cr:mr}}else Dr=mr;R.drawTicks(Ve,Ye,{vals:mt,layer:ut,path:Dr,transFn:Bt}),Ye.mirror==="allticks"&&(ur=Object.keys(Ye._linepositions||{}))}for(Je=0;Je<ur.length;Je++){Se=ur[Je],Pe=De._plots[Se];var Kr=Ye._linepositions[Se]||[],an=R.makeTickPath(Ye,Kr[0],dr[0])+R.makeTickPath(Ye,Kr[1],dr[1]);R.drawTicks(Ve,Ye,{vals:mt,layer:Pe[$e+"axislayer"],path:an,transFn:Bt})}var Ln=[];if(Ln.push(function(){return R.drawLabels(Ve,Ye,{vals:Ct,layer:ut,plotinfo:Pe,transFn:Zt,labelFns:R.makeLabelFns(Ye,Lt)})}),Ye.type==="multicategory"){var Pn={x:2,y:10}[$e];Ln.push(function(){var zr={x:"height",y:"width"}[$e],Ar=tn()[zr]+Pn+(Ye._tickAngles[Ie+"tick"]?Ye.tickfont.size*$:0);return R.drawLabels(Ve,Ye,{vals:qe(Ye,Ct),layer:ut,cls:Ie+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Bt,labelFns:R.makeLabelFns(Ye,Lt+Ar*dr[4])})}),Ln.push(function(){return Ye._depth=dr[4]*(tn("tick2")[Ye.side]-Lt),function(zr,Ar,qr){var On=Ar._id+"divider",Fr=qr.vals,on=qr.layer.selectAll("path."+On).data(Fr,ze);on.exit().remove(),on.enter().insert("path",":first-child").classed(On,1).classed("crisp",1).call(n.stroke,Ar.dividercolor).style("stroke-width",h.crispRound(zr,Ar.dividerwidth,1)+"px"),on.attr("transform",qr.transFn).attr("d",qr.path)}(Ve,Ye,{vals:Vt,layer:ut,path:R.makeTickPath(Ye,Lt,dr[4],Ye._depth),transFn:Bt})})}else Ye.title.hasOwnProperty("standoff")&&Ln.push(function(){Ye._depth=dr[4]*(tn()[Ye.side]-Lt)});var An=y.getComponentMethod("rangeslider","isVisible")(Ye);return Ln.push(function(){var zr,Ar,qr,On,Fr=Ye.side.charAt(0),on=re[Ye.side].charAt(0),Mn=R.getPxPosition(Ve,Ye),bn=ct?Ye.ticklen:0;if((Ye.automargin||An)&&(Ye.type==="multicategory"?zr=tn("tick2"):(zr=tn(),$e==="x"&&Fr==="b"&&(Ye._depth=Math.max(zr.width>0?zr.bottom-Mn:0,bn)))),Ye.automargin){Ar={x:0,y:0,r:0,l:0,t:0,b:0};var Dn=[0,1];if($e==="x"){if(Fr==="b"?Ar[Fr]=Ye._depth:(Ar[Fr]=Ye._depth=Math.max(zr.width>0?Mn-zr.top:0,bn),Dn.reverse()),zr.width>0){var tr=zr.right-(Ye._offset+Ye._length);tr>0&&(Ar.xr=1,Ar.r=tr);var Ot=Ye._offset-zr.left;Ot>0&&(Ar.xl=0,Ar.l=Ot)}}else if(Fr==="l"?Ar[Fr]=Ye._depth=Math.max(zr.height>0?Mn-zr.left:0,bn):(Ar[Fr]=Ye._depth=Math.max(zr.height>0?zr.right-Mn:0,bn),Dn.reverse()),zr.height>0){var Ht=zr.bottom-(Ye._offset+Ye._length);Ht>0&&(Ar.yb=0,Ar.b=Ht);var fr=Ye._offset-zr.top;fr>0&&(Ar.yt=1,Ar.t=fr)}Ar[st]=Ye.anchor==="free"?Ye.position:Ye._anchorAxis.domain[Dn[0]],Ye.title.text!==De._dfltTitle[$e]&&(Ar[Fr]+=Ue(Ye)+(Ye.title.standoff||0)),Ye.mirror&&Ye.anchor!=="free"&&((qr={x:0,y:0,r:0,l:0,t:0,b:0})[on]=Ye.linewidth,Ye.mirror&&Ye.mirror!==!0&&(qr[on]+=bn),Ye.mirror===!0||Ye.mirror==="ticks"?qr[st]=Ye._anchorAxis.domain[Dn[1]]:Ye.mirror!=="all"&&Ye.mirror!=="allticks"||(qr[st]=[Ye._counterDomainMin,Ye._counterDomainMax][Dn[1]]))}An&&(On=y.getComponentMethod("rangeslider","autoMarginOpts")(Ve,Ye)),x.autoMargin(Ve,nt(Ye),Ar),x.autoMargin(Ve,ft(Ye),qr),x.autoMargin(Ve,xt(Ye),On)}),Be.skipTitle||An&&Ye.side==="bottom"||Ln.push(function(){return function(zr,Ar){var qr,On=zr._fullLayout,Fr=Ar._id,on=Fr.charAt(0),Mn=Ar.title.font.size;if(Ar.title.hasOwnProperty("standoff"))qr=Ar._depth+Ar.title.standoff+Ue(Ar);else{var bn=Gt(Ar);if(Ar.type==="multicategory")qr=Ar._depth;else{var Dn=1.5*Mn;bn&&(Dn=.5*Mn,Ar.ticks==="outside"&&(Dn+=Ar.ticklen)),qr=10+Dn+(Ar.linewidth?Ar.linewidth-1:0)}bn||(qr+=on==="x"?Ar.side==="top"?Mn*(Ar.showticklabels?1:0):Mn*(Ar.showticklabels?1.5:.5):Ar.side==="right"?Mn*(Ar.showticklabels?1:.5):Mn*(Ar.showticklabels?.5:0))}var tr,Ot,Ht,fr,Tr=R.getPxPosition(zr,Ar);if(on==="x"?(Ot=Ar._offset+Ar._length/2,Ht=Ar.side==="top"?Tr-qr:Tr+qr):(Ht=Ar._offset+Ar._length/2,Ot=Ar.side==="right"?Tr+qr:Tr-qr,tr={rotate:"-90",offset:0}),Ar.type!=="multicategory"){var Wr=Ar._selections[Ar._id+"tick"];if(fr={selection:Wr,side:Ar.side},Wr&&Wr.node()&&Wr.node().parentNode){var Gr=h.getTranslate(Wr.node().parentNode);fr.offsetLeft=Gr.x,fr.offsetTop=Gr.y}Ar.title.hasOwnProperty("standoff")&&(fr.pad=0)}return i.draw(zr,Fr+"title",{propContainer:Ar,propName:Ar._name+".title.text",placeholder:On._dfltTitle[on],avoid:fr,transform:tr,attributes:{x:Ot,y:Ht,"text-anchor":"middle"}})}(Ve,Ye)}),e.syncOrAsync(Ln)}}function tn(zr){var Ar=Ie+(zr||"tick");return Ke[Ar]||(Ke[Ar]=function(qr,On){var Fr,on,Mn,bn;return qr._selections[On].size()?(Fr=1/0,on=-1/0,Mn=1/0,bn=-1/0,qr._selections[On].each(function(){var Dn=Ze(this),tr=h.bBox(Dn.node().parentNode);Fr=Math.min(Fr,tr.top),on=Math.max(on,tr.bottom),Mn=Math.min(Mn,tr.left),bn=Math.max(bn,tr.right)})):(Fr=0,on=0,Mn=0,bn=0),{top:Fr,bottom:on,left:Mn,right:bn,height:on-Fr,width:bn-Mn}}(Ye,Ar)),Ke[Ar]}},R.getTickSigns=function(Ve){var Ye=Ve._id.charAt(0),Be={x:"top",y:"right"}[Ye],Je=Ve.side===Be?1:-1,Se=[-1,1,Je,-Je];return Ve.ticks!=="inside"==(Ye==="x")&&(Se=Se.map(function(Pe){return-Pe})),Ve.side&&Se.push({l:-1,t:-1,r:1,b:1}[Ve.side.charAt(0)]),Se},R.makeTransTickFn=function(Ve){return Ve._id.charAt(0)==="x"?function(Ye){return r(Ve._offset+Ve.l2p(Ye.x),0)}:function(Ye){return r(0,Ve._offset+Ve.l2p(Ye.x))}},R.makeTransTickLabelFn=function(Ve){var Ye=function(Se){var Pe=Se.ticklabelposition||"",De=function(mt){return Pe.indexOf(mt)!==-1},Ie=De("top"),$e=De("left"),st=De("right"),dt=De("bottom"),ut=De("inside"),Lt=dt||$e||Ie||st;if(!Lt&&!ut)return[0,0];var lt=Se.side,Ct=Lt?(Se.tickwidth||0)/2:0,Pt=3,Ke=Se.tickfont?Se.tickfont.size:12;return(dt||Ie)&&(Ct+=Ke*Z,Pt+=(Se.linewidth||0)/2),($e||st)&&(Ct+=(Se.linewidth||0)/2,Pt+=3),ut&&lt==="top"&&(Pt-=Ke*(1-Z)),($e||Ie)&&(Ct=-Ct),lt!=="bottom"&&lt!=="right"||(Pt=-Pt),[Lt?Ct:0,ut?Pt:0]}(Ve),Be=Ye[0],Je=Ye[1];return Ve._id.charAt(0)==="x"?function(Se){return r(Be+Ve._offset+Ve.l2p(et(Se)),Je)}:function(Se){return r(Je,Be+Ve._offset+Ve.l2p(et(Se)))}},R.makeTickPath=function(Ve,Ye,Be,Je){Je=Je!==void 0?Je:Ve.ticklen;var Se=Ve._id.charAt(0),Pe=(Ve.linewidth||1)/2;return Se==="x"?"M0,"+(Ye+Pe*Be)+"v"+Je*Be:"M"+(Ye+Pe*Be)+",0h"+Je*Be},R.makeLabelFns=function(Ve,Ye,Be){var Je=Ve.ticklabelposition||"",Se=function(qt){return Je.indexOf(qt)!==-1},Pe=Se("top"),De=Se("left"),Ie=Se("right"),$e=Se("bottom")||De||Pe||Ie,st=Se("inside"),dt=Je==="inside"&&Ve.ticks==="inside"||!st&&Ve.ticks==="outside"&&Ve.tickson!=="boundaries",ut=0,Lt=0,lt=dt?Ve.ticklen:0;if(st?lt*=-1:$e&&(lt=0),dt&&(ut+=lt,Be)){var Ct=e.deg2rad(Be);ut=lt*Math.cos(Ct)+1,Lt=lt*Math.sin(Ct)}Ve.showticklabels&&(dt||Ve.showline)&&(ut+=.2*Ve.tickfont.size);var Pt,Ke,mt,Dt,Bt,Zt={labelStandoff:ut+=(Ve.linewidth||1)/2*(st?-1:1),labelShift:Lt},Re=0,ct=Ve.side,wt=Ve._id.charAt(0),Rt=Ve.tickangle;if(wt==="x")Dt=(Bt=!st&&ct==="bottom"||st&&ct==="top")?1:-1,st&&(Dt*=-1),Pt=Lt*Dt,Ke=Ye+ut*Dt,mt=Bt?1:-.2,Math.abs(Rt)===90&&(st?mt+=K:mt=Rt===-90&&ct==="bottom"?Z:Rt===90&&ct==="top"?K:.5,Re=K/2*(Rt/90)),Zt.xFn=function(qt){return qt.dx+Pt+Re*qt.fontSize},Zt.yFn=function(qt){return qt.dy+Ke+qt.fontSize*mt},Zt.anchorFn=function(qt,Jt){if($e){if(De)return"end";if(Ie)return"start"}return p(Jt)&&Jt!==0&&Jt!==180?Jt*Dt<0!==st?"end":"start":"middle"},Zt.heightFn=function(qt,Jt,or){return Jt<-60||Jt>60?-.5*or:Ve.side==="top"!==st?-or:0};else if(wt==="y"){if(Dt=(Bt=!st&&ct==="left"||st&&ct==="right")?1:-1,st&&(Dt*=-1),Pt=ut,Ke=Lt*Dt,mt=0,st||Math.abs(Rt)!==90||(mt=Rt===-90&&ct==="left"||Rt===90&&ct==="right"?Z:.5),st){var Vt=p(Rt)?+Rt:0;if(Vt!==0){var rr=e.deg2rad(Vt);Re=Math.abs(Math.sin(rr))*Z*Dt,mt=0}}Zt.xFn=function(qt){return qt.dx+Ye-(Pt+qt.fontSize*mt)*Dt+Re*qt.fontSize},Zt.yFn=function(qt){return qt.dy+Ke+qt.fontSize*K},Zt.anchorFn=function(qt,Jt){return p(Jt)&&Math.abs(Jt)===90?"middle":Bt?"end":"start"},Zt.heightFn=function(qt,Jt,or){return Ve.side==="right"&&(Jt*=-1),Jt<-30?-or:Jt<30?-.5*or:0}}return Zt},R.drawTicks=function(Ve,Ye,Be){Be=Be||{};var Je=Ye._id+"tick",Se=Be.vals;Ye.ticklabelmode==="period"&&(Se=Se.slice()).shift();var Pe=Be.layer.selectAll("path."+Je).data(Ye.ticks?Se:[],ze);Pe.exit().remove(),Pe.enter().append("path").classed(Je,1).classed("ticks",1).classed("crisp",Be.crisp!==!1).call(n.stroke,Ye.tickcolor).style("stroke-width",h.crispRound(Ve,Ye.tickwidth,1)+"px").attr("d",Be.path).style("display",null),Qt(Ye,[H]),Pe.attr("transform",Be.transFn)},R.drawGrid=function(Ve,Ye,Be){Be=Be||{};var Je=Ye._id+"grid",Se=Be.vals,Pe=Be.counterAxis;if(Ye.showgrid===!1)Se=[];else if(Pe&&R.shouldShowZeroLine(Ve,Ye,Pe))for(var De=Ye.tickmode==="array",Ie=0;Ie<Se.length;Ie++){var $e=Se[Ie].x;if(De?!$e:Math.abs($e)<Ye.dtick/100){if(Se=Se.slice(0,Ie).concat(Se.slice(Ie+1)),!De)break;Ie--}}var st=Be.layer.selectAll("path."+Je).data(Se,ze);st.exit().remove(),st.enter().append("path").classed(Je,1).classed("crisp",Be.crisp!==!1),Ye._gw=h.crispRound(Ve,Ye.gridwidth,1),st.attr("transform",Be.transFn).attr("d",Be.path).call(n.stroke,Ye.gridcolor||"#ddd").style("stroke-width",Ye._gw+"px").style("display",null),Qt(Ye,[F]),typeof Be.path=="function"&&st.attr("d",Be.path)},R.drawZeroLine=function(Ve,Ye,Be){Be=Be||Be;var Je=Ye._id+"zl",Se=R.shouldShowZeroLine(Ve,Ye,Be.counterAxis),Pe=Be.layer.selectAll("path."+Je).data(Se?[{x:0,id:Ye._id}]:[]);Pe.exit().remove(),Pe.enter().append("path").classed(Je,1).classed("zl",1).classed("crisp",Be.crisp!==!1).each(function(){Be.layer.selectAll("path").sort(function(De,Ie){return te(De.id,Ie.id)})}),Pe.attr("transform",Be.transFn).attr("d",Be.path).call(n.stroke,Ye.zerolinecolor||n.defaultLine).style("stroke-width",h.crispRound(Ve,Ye.zerolinewidth,Ye._gw||1)+"px").style("display",null),Qt(Ye,[D])},R.drawLabels=function(Ve,Ye,Be){Be=Be||{};var Je=Ve._fullLayout,Se=Ye._id,Pe=Se.charAt(0),De=Be.cls||Se+"tick",Ie=Be.vals,$e=Be.labelFns,st=Be.secondary?0:Ye.tickangle,dt=(Ye._prevTickAngles||{})[De],ut=Be.layer.selectAll("g."+De).data(Ye.showticklabels?Ie:[],ze),Lt=[];function lt(Dt,Bt){Dt.each(function(Zt){var Re=o.select(this),ct=Re.select(".text-math-group"),wt=$e.anchorFn(Zt,Bt),Rt=Be.transFn.call(Re.node(),Zt)+(p(Bt)&&+Bt!=0?" rotate("+Bt+","+$e.xFn(Zt)+","+($e.yFn(Zt)-Zt.fontSize/2)+")":""),Vt=t.lineCount(Re),rr=$*Zt.fontSize,qt=$e.heightFn(Zt,p(Bt)?+Bt:0,(Vt-1)*rr);if(qt&&(Rt+=r(0,qt)),ct.empty()){var Jt=Re.select("text");Jt.attr({transform:Rt,"text-anchor":wt}),Jt.style("opacity",1),Ye._adjustTickLabelsOverflow&&Ye._adjustTickLabelsOverflow()}else{var or=h.bBox(ct.node()).width*{end:-.5,start:.5}[wt];ct.attr("transform",Rt+r(or,0))}})}ut.enter().append("g").classed(De,1).append("text").attr("text-anchor","middle").each(function(Dt){var Bt=o.select(this),Zt=Ve._promises.length;Bt.call(t.positionText,$e.xFn(Dt),$e.yFn(Dt)).call(h.font,Dt.font,Dt.fontSize,Dt.fontColor).text(Dt.text).call(t.convertToTspans,Ve),Ve._promises[Zt]?Lt.push(Ve._promises.pop().then(function(){lt(Bt,st)})):lt(Bt,st)}),Qt(Ye,[V]),ut.exit().remove(),Be.repositionOnUpdate&&ut.each(function(Dt){o.select(this).select("text").call(t.positionText,$e.xFn(Dt),$e.yFn(Dt))}),Ye._adjustTickLabelsOverflow=function(){var Dt=Ye.ticklabeloverflow;if(Dt&&Dt!=="allow"){var Bt=Dt.indexOf("hide")!==-1,Zt=Ye._id.charAt(0)==="x",Re=0,ct=Zt?Ve._fullLayout.width:Ve._fullLayout.height;if(Dt.indexOf("domain")!==-1){var wt=e.simpleMap(Ye.range,Ye.r2l);Re=Ye.l2p(wt[0])+Ye._offset,ct=Ye.l2p(wt[1])+Ye._offset}var Rt=Math.min(Re,ct),Vt=Math.max(Re,ct),rr=Ye.side,qt=1/0,Jt=-1/0;for(var or in ut.each(function(ur){var cr=o.select(this);if(cr.select(".text-math-group").empty()){var mr=h.bBox(cr.node()),Dr=0;Zt?(mr.right>Vt||mr.left<Rt)&&(Dr=1):(mr.bottom>Vt||mr.top+(Ye.tickangle?0:ur.fontSize/4)<Rt)&&(Dr=1);var yr=cr.select("text");Dr?Bt&&yr.style("opacity",0):(yr.style("opacity",1),qt=rr==="bottom"||rr==="right"?Math.min(qt,Zt?mr.top:mr.left):-1/0,Jt=rr==="top"||rr==="left"?Math.max(Jt,Zt?mr.bottom:mr.right):1/0)}}),Je._plots){var gr=Je._plots[or];if(Ye._id===gr.xaxis._id||Ye._id===gr.yaxis._id){var dr=Zt?gr.yaxis:gr.xaxis;dr&&(dr["_visibleLabelMin_"+Ye._id]=qt,dr["_visibleLabelMax_"+Ye._id]=Jt)}}}},Ye._hideCounterAxisInsideTickLabels=function(Dt){var Bt=Ye._id.charAt(0)==="x",Zt=[];for(var Re in Je._plots){var ct=Je._plots[Re];Ye._id!==ct.xaxis._id&&Ye._id!==ct.yaxis._id||Zt.push(Bt?ct.yaxis:ct.xaxis)}Zt.forEach(function(wt,Rt){wt&&Gt(wt)&&(Dt||[D,F,H,V]).forEach(function(Vt){var rr=Vt.K==="tick"&&Vt.L==="text"&&Ye.ticklabelmode==="period",qt=Je._plots[Ye._mainSubplot];(Vt.K===D.K?qt.zerolinelayer.selectAll("."+Ye._id+"zl"):Vt.K===F.K?qt.gridlayer.selectAll("."+Ye._id):qt[Ye._id.charAt(0)+"axislayer"]).each(function(){var Jt=o.select(this);Vt.L&&(Jt=Jt.selectAll(Vt.L)),Jt.each(function(or){var gr=Ye.l2p(rr?et(or):or.x)+Ye._offset,dr=o.select(this);gr<Ye["_visibleLabelMax_"+wt._id]&&gr>Ye["_visibleLabelMin_"+wt._id]?dr.style("display","none"):Vt.K!=="tick"||Rt||dr.style("display",null)})})})})},lt(ut,dt+1?dt:st);var Ct=null;Ye._selections&&(Ye._selections[De]=ut);var Pt=[function(){return Lt.length&&Promise.all(Lt)}];Ye.automargin&&Je._redrawFromAutoMarginCount&&dt===90?(Ct=90,Pt.push(function(){lt(ut,dt)})):Pt.push(function(){if(lt(ut,st),Ie.length&&Pe==="x"&&!p(st)&&(Ye.type!=="log"||String(Ye.dtick).charAt(0)!=="D")){Ct=0;var Dt,Bt=0,Zt=[];if(ut.each(function(cr){Bt=Math.max(Bt,cr.fontSize);var mr=Ye.l2p(cr.x),Dr=Ze(this),yr=h.bBox(Dr.node());Zt.push({top:0,bottom:10,height:10,left:mr-yr.width/2,right:mr+yr.width/2+2,width:yr.width+2})}),Ye.tickson!=="boundaries"&&!Ye.showdividers||Be.secondary){var Re=Ie.length,ct=Math.abs((Ie[Re-1].x-Ie[0].x)*Ye._m)/(Re-1),wt=Ye.ticklabelposition||"",Rt=function(cr){return wt.indexOf(cr)!==-1},Vt=Rt("top"),rr=Rt("left"),qt=Rt("right"),Jt=Rt("bottom")||rr||Vt||qt?(Ye.tickwidth||0)+6:0,or=ct<2.5*Bt||Ye.type==="multicategory"||Ye._name==="realaxis";for(Dt=0;Dt<Zt.length-1;Dt++)if(e.bBoxIntersect(Zt[Dt],Zt[Dt+1],Jt)){Ct=or?90:30;break}}else{var gr=2;for(Ye.ticks&&(gr+=Ye.tickwidth/2),Dt=0;Dt<Zt.length;Dt++){var dr=Ie[Dt].xbnd,ur=Zt[Dt];if(dr[0]!==null&&ur.left-Ye.l2p(dr[0])<gr||dr[1]!==null&&Ye.l2p(dr[1])-ur.right<gr){Ct=90;break}}}Ct&&lt(ut,Ct)}}),Ye._tickAngles&&Pt.push(function(){Ye._tickAngles[De]=Ct===null?p(st)?st:0:Ct});var Ke=Ye._anchorAxis;Ke&&Ke.autorange&&Gt(Ye)&&!j(Je,Ye._id)&&(Je._insideTickLabelsAutorange||(Je._insideTickLabelsAutorange={}),Je._insideTickLabelsAutorange[Ke._name+".autorange"]=Ke.autorange,Pt.push(function(){ut.each(function(Dt,Bt){var Zt=Ze(this);Zt.select(".text-math-group").empty()&&(Ye._vals[Bt].bb=h.bBox(Zt.node()))})}));var mt=e.syncOrAsync(Pt);return mt&&mt.then&&Ve._promises.push(mt),mt},R.getPxPosition=function(Ve,Ye){var Be,Je=Ve._fullLayout._size,Se=Ye._id.charAt(0),Pe=Ye.side;return Ye.anchor!=="free"?Be=Ye._anchorAxis:Se==="x"?Be={_offset:Je.t+(1-(Ye.position||0))*Je.h,_length:0}:Se==="y"&&(Be={_offset:Je.l+(Ye.position||0)*Je.w,_length:0}),Pe==="top"||Pe==="left"?Be._offset:Pe==="bottom"||Pe==="right"?Be._offset+Be._length:void 0},R.shouldShowZeroLine=function(Ve,Ye,Be){var Je=e.simpleMap(Ye.range,Ye.r2l);return Je[0]*Je[1]<=0&&Ye.zeroline&&(Ye.type==="linear"||Ye.type==="-")&&!(Ye.rangebreaks&&Ye.maskBreaks(0)===E)&&(We(Ye,0)||!function(Se,Pe,De,Ie){var $e=De._mainAxis;if(!$e)return;var st=Se._fullLayout,dt=Pe._id.charAt(0),ut=R.counterLetter(Pe._id),Lt=Pe._offset+(Math.abs(Ie[0])<Math.abs(Ie[1])==(dt==="x")?0:Pe._length);function lt(Dt){if(!Dt.showline||!Dt.linewidth)return!1;var Bt=Math.max((Dt.linewidth+Pe.zerolinewidth)/2,1);function Zt(wt){return typeof wt=="number"&&Math.abs(wt-Lt)<Bt}if(Zt(Dt._mainLinePosition)||Zt(Dt._mainMirrorPosition))return!0;var Re=Dt._linepositions||{};for(var ct in Re)if(Zt(Re[ct][0])||Zt(Re[ct][1]))return!0}var Ct=st._plots[De._mainSubplot];if(!(Ct.mainplotinfo||Ct).overlays.length)return lt(De);for(var Pt=R.list(Se,ut),Ke=0;Ke<Pt.length;Ke++){var mt=Pt[Ke];if(mt._mainAxis===$e&&lt(mt))return!0}}(Ve,Ye,Be,Je)||function(Se,Pe){for(var De=Se._fullData,Ie=Pe._mainSubplot,$e=Pe._id.charAt(0),st=0;st<De.length;st++){var dt=De[st];if(dt.visible===!0&&dt.xaxis+dt.yaxis===Ie&&(y.traceIs(dt,"bar-like")&&dt.orientation==={x:"h",y:"v"}[$e]||dt.fill&&dt.fill.charAt(dt.fill.length-1)===$e))return!0}return!1}(Ve,Ye))},R.clipEnds=function(Ve,Ye){return Ye.filter(function(Be){return We(Ve,Be.x)})},R.allowAutoMargin=function(Ve){for(var Ye=R.list(Ve,"",!0),Be=0;Be<Ye.length;Be++){var Je=Ye[Be];Je.automargin&&(x.allowAutoMargin(Ve,nt(Je)),Je.mirror&&x.allowAutoMargin(Ve,ft(Je))),y.getComponentMethod("rangeslider","isVisible")(Je)&&x.allowAutoMargin(Ve,xt(Je))}},R.swap=function(Ve,Ye){for(var Be=function(Se,Pe){var De,Ie,$e=[];for(De=0;De<Pe.length;De++){var st=[],dt=Se._fullData[Pe[De]].xaxis,ut=Se._fullData[Pe[De]].yaxis;if(dt&&ut){for(Ie=0;Ie<$e.length;Ie++)$e[Ie].x.indexOf(dt)===-1&&$e[Ie].y.indexOf(ut)===-1||st.push(Ie);if(st.length){var Lt,lt=$e[st[0]];if(st.length>1)for(Ie=1;Ie<st.length;Ie++)Lt=$e[st[Ie]],It(lt.x,Lt.x),It(lt.y,Lt.y);It(lt.x,[dt]),It(lt.y,[ut])}else $e.push({x:[dt],y:[ut]})}}return $e}(Ve,Ye),Je=0;Je<Be.length;Je++)Et(Ve,Be[Je].x,Be[Je].y)}},{"../../components/color":366,"../../components/drawing":388,"../../components/titles":464,"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"./autorange":553,"./axis_autotype":555,"./axis_ids":558,"./clean_ticks":560,"./layout_attributes":569,"./set_convert":576,"@plotly/d3":58,"fast-isnumeric":190}],555:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../lib"),x=u("../../constants/numerical").BADNUM,y=p.isArrayOrTypedArray,e=p.isDateTime,r=p.cleanNumber,t=Math.round;function i(h,s){return s?o(h):typeof h=="number"}function n(h){return Math.max(1,(h-1)/1e3)}q.exports=function(h,s,a){var l=h,f=a.noMultiCategory;if(y(l)&&!l.length)return"-";if(!f&&function(b){return y(b[0])&&y(b[1])}(l))return"multicategory";if(f&&Array.isArray(l[0])){for(var d=[],v=0;v<l.length;v++)if(y(l[v]))for(var m=0;m<l[v].length;m++)d.push(l[v][m]);l=d}if(function(b,g){for(var w=b.length,_=n(w),T=0,k=0,L={},M=0;M<w;M+=_){var I=t(M),P=b[I],S=String(P);L[S]||(L[S]=1,e(P,g)&&T++,o(P)&&k++)}return T>2*k}(l,s))return"date";var c=a.autotypenumbers!=="strict";return function(b,g){for(var w=b.length,_=n(w),T=0,k=0,L={},M=0;M<w;M+=_){var I=t(M),P=b[I],S=String(P);if(!L[S]){L[S]=1;var E=typeof P;E==="boolean"?k++:(g?r(P)!==x:E==="number")?T++:E==="string"&&k++}}return k>2*T}(l,c)?"category":function(b,g){for(var w=b.length,_=0;_<w;_++)if(i(b[_],g))return!0;return!1}(l,c)?"linear":"-"}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],556:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../registry"),x=u("../../lib"),y=u("../array_container_defaults"),e=u("./layout_attributes"),r=u("./tick_value_defaults"),t=u("./tick_mark_defaults"),i=u("./tick_label_defaults"),n=u("./prefix_suffix_defaults"),h=u("./category_order_defaults"),s=u("./line_grid_defaults"),a=u("./set_convert"),l=u("./constants").WEEKDAY_PATTERN,f=u("./constants").HOUR_PATTERN;function d(c,b,g){function w(S,E){return x.coerce(c,b,e.rangebreaks,S,E)}if(w("enabled")){var _=w("bounds");if(_&&_.length>=2){var T,k,L="";if(_.length===2){for(T=0;T<2;T++)if(k=m(_[T])){L=l;break}}var M=w("pattern",L);if(M===l)for(T=0;T<2;T++)(k=m(_[T]))&&(b.bounds[T]=_[T]=k-1);if(M)for(T=0;T<2;T++)switch(k=_[T],M){case l:if(!o(k)||(k=+k)!==Math.floor(k)||k<0||k>=7)return void(b.enabled=!1);b.bounds[T]=_[T]=k;break;case f:if(!o(k)||(k=+k)<0||k>24)return void(b.enabled=!1);b.bounds[T]=_[T]=k}if(g.autorange===!1){var I=g.range;if(I[0]<I[1]){if(_[0]<I[0]&&_[1]>I[1])return void(b.enabled=!1)}else if(_[0]>I[0]&&_[1]<I[1])return void(b.enabled=!1)}}else{var P=w("values");if(!P||!P.length)return void(b.enabled=!1);w("dvalue")}}}q.exports=function(c,b,g,w,_){var T,k=w.letter,L=w.font||{},M=w.splomStash||{},I=g("visible",!w.visibleDflt),P=b._template||{},S=b.type||P.type||"-";S==="date"&&(p.getComponentMethod("calendars","handleDefaults")(c,b,"calendar",w.calendar),w.noTicklabelmode||(T=g("ticklabelmode")));var E="";w.noTicklabelposition&&S!=="multicategory"||(E=x.coerce(c,b,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:T==="period"?["outside","inside"]:k==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),w.noTicklabeloverflow||g("ticklabeloverflow",E.indexOf("inside")!==-1?"hide past domain":S==="category"||S==="multicategory"?"allow":"hide past div"),a(b,_);var D=!b.isValidRange(c.range);D&&w.reverseDflt&&(D="reversed"),!g("autorange",D)||S!=="linear"&&S!=="-"||g("rangemode"),g("range"),b.cleanRange(),h(c,b,g,w),S==="category"||w.noHover||g("hoverformat");var F=g("color"),H=F!==e.color.dflt?F:L.color,V=M.label||_._dfltTitle[k];if(n(c,b,g,S,w),!I)return b;g("title.text",V),x.coerceFont(g,"title.font",{family:L.family,size:x.bigFont(L.size),color:H}),r(c,b,g,S),i(c,b,g,S,w),t(c,b,g,w),s(c,b,g,{dfltColor:F,bgColor:w.bgColor,showGrid:w.showGrid,attributes:e}),(b.showline||b.ticks)&&g("mirror"),w.automargin&&g("automargin");var Q,K=S==="multicategory";if(w.noTickson||S!=="category"&&!K||!b.ticks&&!b.showgrid||(K&&(Q="boundaries"),g("tickson",Q)==="boundaries"&&delete b.ticklabelposition),K&&g("showdividers")&&(g("dividercolor"),g("dividerwidth")),S==="date")if(y(c,b,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:d}),b.rangebreaks.length){for(var Z=0;Z<b.rangebreaks.length;Z++)if(b.rangebreaks[Z].pattern===l){b._hasDayOfWeekBreaks=!0;break}if(a(b,_),_._has("scattergl")||_._has("splom"))for(var $=0;$<w.data.length;$++){var re=w.data[$];re.type!=="scattergl"&&re.type!=="splom"||(re.visible=!1,x.warn(re.type+" traces do not work on axes with rangebreaks. Setting trace "+re.index+" to `visible: false`."))}}else delete b.rangebreaks;return b};var v={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function m(c){if(typeof c=="string")return v[c.substr(0,3).toLowerCase()]}},{"../../lib":503,"../../registry":638,"../array_container_defaults":549,"./category_order_defaults":559,"./constants":561,"./layout_attributes":569,"./line_grid_defaults":571,"./prefix_suffix_defaults":573,"./set_convert":576,"./tick_label_defaults":578,"./tick_mark_defaults":579,"./tick_value_defaults":580,"fast-isnumeric":190}],557:[function(u,q,W){var o=u("../../constants/docs"),p=o.FORMAT_LINK,x=o.DATE_FORMAT_LINK;function y(r,t){return["Sets the "+r+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+p+"."].join(" ")}function e(r,t){return y(r,t)+[" And for dates see: "+x+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}q.exports={axisHoverFormat:function(r,t){return{valType:"string",dflt:"",editType:"none",description:(t?y:e)("hover text",r)+["By default the values are formatted using "+(t?"generic number format":"`"+r+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:y,descriptionWithDates:e}},{"../../constants/docs":474}],558:[function(u,q,W){var o=u("../../registry"),p=u("./constants");function x(y,e){if(e&&e.length){for(var r=0;r<e.length;r++)if(e[r][y])return!0}return!1}W.id2name=function(y){if(typeof y=="string"&&y.match(p.AX_ID_PATTERN)){var e=y.split(" ")[0].substr(1);return e==="1"&&(e=""),y.charAt(0)+"axis"+e}},W.name2id=function(y){if(y.match(p.AX_NAME_PATTERN)){var e=y.substr(5);return e==="1"&&(e=""),y.charAt(0)+e}},W.cleanId=function(y,e,r){var t=/( domain)$/.test(y);if(typeof y=="string"&&y.match(p.AX_ID_PATTERN)&&(!e||y.charAt(0)===e)&&(!t||r)){var i=y.split(" ")[0].substr(1).replace(/^0+/,"");return i==="1"&&(i=""),y.charAt(0)+i+(t&&r?" domain":"")}},W.list=function(y,e,r){var t=y._fullLayout;if(!t)return[];var i,n=W.listIds(y,e),h=new Array(n.length);for(i=0;i<n.length;i++){var s=n[i];h[i]=t[s.charAt(0)+"axis"+s.substr(1)]}if(!r){var a=t._subplots.gl3d||[];for(i=0;i<a.length;i++){var l=t[a[i]];e?h.push(l[e+"axis"]):h.push(l.xaxis,l.yaxis,l.zaxis)}}return h},W.listIds=function(y,e){var r=y._fullLayout;if(!r)return[];var t=r._subplots;return e?t[e+"axis"]:t.xaxis.concat(t.yaxis)},W.getFromId=function(y,e,r){var t=y._fullLayout;return e=e===void 0||typeof e!="string"?e:e.replace(" domain",""),r==="x"?e=e.replace(/y[0-9]*/,""):r==="y"&&(e=e.replace(/x[0-9]*/,"")),t[W.id2name(e)]},W.getFromTrace=function(y,e,r){var t=y._fullLayout,i=null;if(o.traceIs(e,"gl3d")){var n=e.scene;n.substr(0,5)==="scene"&&(i=t[n][r+"axis"])}else i=W.getFromId(y,e[r+"axis"]||r);return i},W.idSort=function(y,e){var r=y.charAt(0),t=e.charAt(0);return r!==t?r>t?1:-1:+(y.substr(1)||1)-+(e.substr(1)||1)},W.ref2id=function(y){return!!/^[xyz]/.test(y)&&y.split(" ")[0]},W.isLinked=function(y,e){return x(e,y._axisMatchGroups)||x(e,y._axisConstraintGroups)}},{"../../registry":638,"./constants":561}],559:[function(u,q,W){q.exports=function(o,p,x,y){if(p.type==="category"){var e,r=o.categoryarray,t=Array.isArray(r)&&r.length>0;t&&(e="array");var i,n=x("categoryorder",e);n==="array"&&(i=x("categoryarray")),t||n!=="array"||(n=p.categoryorder="trace"),n==="trace"?p._initialCategories=[]:n==="array"?p._initialCategories=i.slice():(i=function(h,s){var a,l,f,d=s.dataAttr||h._id.charAt(0),v={};if(s.axData)a=s.axData;else for(a=[],l=0;l<s.data.length;l++){var m=s.data[l];m[d+"axis"]===h._id&&a.push(m)}for(l=0;l<a.length;l++){var c=a[l][d];for(f=0;f<c.length;f++){var b=c[f];b!=null&&(v[b]=1)}}return Object.keys(v)}(p,y).sort(),n==="category ascending"?p._initialCategories=i:n==="category descending"&&(p._initialCategories=i.reverse()))}}},{}],560:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../lib"),x=u("../../constants/numerical"),y=x.ONEDAY,e=x.ONEWEEK;W.dtick=function(r,t){var i=t==="log",n=t==="date",h=t==="category",s=n?y:1;if(!r)return s;if(o(r))return(r=Number(r))<=0?s:h?Math.max(1,Math.round(r)):n?Math.max(.1,r):r;if(typeof r!="string"||!n&&!i)return s;var a=r.charAt(0),l=r.substr(1);return(l=o(l)?Number(l):0)<=0||!(n&&a==="M"&&l===Math.round(l)||i&&a==="L"||i&&a==="D"&&(l===1||l===2))?s:r},W.tick0=function(r,t,i,n){return t==="date"?p.cleanDate(r,p.dateTick0(i,n%e==0?1:0)):n!=="D1"&&n!=="D2"?o(r)?Number(r):0:void 0}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],561:[function(u,q,W){var o=u("../../lib/regex").counter;q.exports={idRegex:{x:o("x","( domain)?"),y:o("y","( domain)?")},attrRegex:o("[xy]axis"),xAxisMatch:o("xaxis"),yAxisMatch:o("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":520}],562:[function(u,q,W){var o=u("../../lib"),p=u("./autorange"),x=u("./axis_ids").id2name,y=u("./layout_attributes"),e=u("./scale_zoom"),r=u("./set_convert"),t=u("../../constants/numerical").ALMOST_EQUAL,i=u("../../constants/alignment").FROM_BL;function n(v,m,c){var b=c.axIds,g=c.layoutOut,w=c.hasImage,_=g._axisConstraintGroups,T=g._axisMatchGroups,k=m._id,L=k.charAt(0),M=((g._splomAxes||{})[L]||{})[k]||{},I=m._id,P=I.charAt(0)==="x";function S(te,j){return o.coerce(v,m,y,te,j)}m._matchGroup=null,m._constraintGroup=null,S("constrain",w?"domain":"range"),o.coerce(v,m,{constraintoward:{valType:"enumerated",values:P?["left","center","right"]:["bottom","middle","top"],dflt:P?"center":"middle"}},"constraintoward");var E,D,F=m.type,H=[];for(E=0;E<b.length;E++)(D=b[E])!==I&&g[x(D)].type===F&&H.push(D);var V=s(_,I);if(V){var Q=[];for(E=0;E<H.length;E++)V[D=H[E]]||Q.push(D);H=Q}var K,Z,$=H.length;$&&(v.matches||M.matches)&&(K=o.coerce(v,m,{matches:{valType:"enumerated",values:H,dflt:H.indexOf(M.matches)!==-1?M.matches:void 0}},"matches"));var re=w&&!P?m.anchor:void 0;if($&&!K&&(v.scaleanchor||re)&&(Z=o.coerce(v,m,{scaleanchor:{valType:"enumerated",values:H}},"scaleanchor",re)),K){m._matchGroup=a(T,I,K,1);var R=g[x(K)],N=h(g,m)/h(g,R);P!==(K.charAt(0)==="x")&&(N=(P?"x":"y")+N),a(_,I,K,N)}else v.matches&&b.indexOf(v.matches)!==-1&&o.warn("ignored "+m._name+'.matches: "'+v.matches+'" to avoid an infinite loop');if(Z){var U=S("scaleratio");U||(U=m.scaleratio=1),a(_,I,Z,U)}else v.scaleanchor&&b.indexOf(v.scaleanchor)!==-1&&o.warn("ignored "+m._name+'.scaleanchor: "'+v.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function h(v,m){var c=m.domain;return c||(c=v[x(m.overlaying)].domain),c[1]-c[0]}function s(v,m){for(var c=0;c<v.length;c++)if(v[c][m])return v[c];return null}function a(v,m,c,b){var g,w,_,T,k,L=s(v,m);L===null?((L={})[m]=1,k=v.length,v.push(L)):k=v.indexOf(L);var M=Object.keys(L);for(g=0;g<v.length;g++)if(_=v[g],g!==k&&_[c]){var I=_[c];for(w=0;w<M.length;w++)_[T=M[w]]=l(I,l(b,L[T]));return void v.splice(k,1)}if(b!==1)for(w=0;w<M.length;w++){var P=M[w];L[P]=l(b,L[P])}L[c]=1}function l(v,m){var c,b,g="",w="";typeof v=="string"&&(c=(g=v.match(/^[xy]*/)[0]).length,v=+v.substr(c)),typeof m=="string"&&(b=(w=m.match(/^[xy]*/)[0]).length,m=+m.substr(b));var _=v*m;return c||b?c&&b&&g.charAt(0)!==w.charAt(0)?c===b?_:(c>b?g.substr(b):w.substr(c))+_:g+w+v*m:_}function f(v,m){for(var c=m._size,b=c.h/c.w,g={},w=Object.keys(v),_=0;_<w.length;_++){var T=w[_],k=v[T];if(typeof k=="string"){var L=k.match(/^[xy]*/)[0],M=L.length;k=+k.substr(M);for(var I=L.charAt(0)==="y"?b:1/b,P=0;P<M;P++)k*=I}g[T]=k}return g}function d(v,m){var c=v._inputDomain,b=i[v.constraintoward],g=c[0]+(c[1]-c[0])*b;v.domain=v._input.domain=[g+(c[0]-g)/m,g+(c[1]-g)/m],v.setScale()}W.handleDefaults=function(v,m,c){var b,g,w,_,T,k,L,M,I=c.axIds,P=c.axHasImage,S=m._axisConstraintGroups=[],E=m._axisMatchGroups=[];for(b=0;b<I.length;b++)n(T=v[_=x(I[b])],k=m[_],{axIds:I,layoutOut:m,hasImage:P[_]});function D(R,N){for(b=0;b<R.length;b++)for(w in g=R[b])m[x(w)][N]=g}for(D(E,"_matchGroup"),b=0;b<S.length;b++)for(w in g=S[b])if((k=m[x(w)]).fixedrange){for(var F in g){var H=x(F);(v[H]||{}).fixedrange===!1&&o.warn("fixedrange was specified as false for axis "+H+" but was overridden because another axis in its constraint group has fixedrange true"),m[H].fixedrange=!0}break}for(b=0;b<S.length;){for(w in g=S[b]){(k=m[x(w)])._matchGroup&&Object.keys(k._matchGroup).length===Object.keys(g).length&&(S.splice(b,1),b--);break}b++}D(S,"_constraintGroup");var V=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],Q=!1,K=!1;function Z(){M=k[L],L==="rangebreaks"&&(K=k._hasDayOfWeekBreaks)}for(b=0;b<E.length;b++){g=E[b];for(var $=0;$<V.length;$++){var re;for(w in L=V[$],M=null,g)if(T=v[_=x(w)],k=m[_],L in k){if(!k.matches&&(re=k,L in T)){Z();break}M===null&&L in T&&Z()}if(L==="range"&&M&&(Q=!0),L==="autorange"&&M===null&&Q&&(M=!1),M===null&&L in re&&(M=re[L]),M!==null)for(w in g)(k=m[x(w)])[L]=L==="range"?M.slice():M,L==="rangebreaks"&&(k._hasDayOfWeekBreaks=K,r(k,m))}}},W.enforce=function(v){var m,c,b,g,w,_,T,k,L=v._fullLayout,M=L._axisConstraintGroups||[];for(m=0;m<M.length;m++){b=f(M[m],L);var I=Object.keys(b),P=1/0,S=0,E=1/0,D={},F={},H=!1;for(c=0;c<I.length;c++)F[g=I[c]]=w=L[x(g)],w._inputDomain?w.domain=w._inputDomain.slice():w._inputDomain=w.domain.slice(),w._inputRange||(w._inputRange=w.range.slice()),w.setScale(),D[g]=_=Math.abs(w._m)/b[g],P=Math.min(P,_),w.constrain!=="domain"&&w._constraintShrinkable||(E=Math.min(E,_)),delete w._constraintShrinkable,S=Math.max(S,_),w.constrain==="domain"&&(H=!0);if(!(P>t*S)||H){for(c=0;c<I.length;c++)if(_=D[g=I[c]],T=(w=F[g]).constrain,_!==E||T==="domain")if(k=_/E,T==="range")e(w,k);else{var V=w._inputDomain,Q=(w.domain[1]-w.domain[0])/(V[1]-V[0]),K=(w.r2l(w.range[1])-w.r2l(w.range[0]))/(w.r2l(w._inputRange[1])-w.r2l(w._inputRange[0]));if((k/=Q)*K<1){w.domain=w._input.domain=V.slice(),e(w,k);continue}if(K<1&&(w.range=w._input.range=w._inputRange.slice(),k*=K),w.autorange){var Z=w.r2l(w.range[0]),$=w.r2l(w.range[1]),re=(Z+$)/2,R=re,N=re,U=Math.abs($-re),te=re-U*k*1.0001,j=re+U*k*1.0001,Y=p.makePadFn(L,w,0),J=p.makePadFn(L,w,1);d(w,k);var ee,ne,se=Math.abs(w._m),oe=p.concatExtremes(v,w),he=oe.min,le=oe.max;for(ne=0;ne<he.length;ne++)(ee=he[ne].val-Y(he[ne])/se)>te&&ee<R&&(R=ee);for(ne=0;ne<le.length;ne++)(ee=le[ne].val+J(le[ne])/se)<j&&ee>N&&(N=ee);k/=(N-R)/(2*U),R=w.l2r(R),N=w.l2r(N),w.range=w._input.range=Z<$?[R,N]:[N,R]}d(w,k)}}}},W.getAxisGroup=function(v,m){for(var c=v._axisMatchGroups,b=0;b<c.length;b++)if(c[b][m])return"g"+b;return m},W.clean=function(v,m){if(m._inputDomain){for(var c=!1,b=m._id,g=v._fullLayout._axisConstraintGroups,w=0;w<g.length;w++)if(g[w][b]){c=!0;break}c&&m.constrain==="domain"||(m._input.domain=m.domain=m._inputDomain,delete m._inputDomain)}}},{"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"./autorange":553,"./axis_ids":558,"./layout_attributes":569,"./scale_zoom":574,"./set_convert":576}],563:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../lib"),x=p.numberFormat,y=u("tinycolor2"),e=u("has-passive-events"),r=u("../../registry"),t=p.strTranslate,i=u("../../lib/svg_text_utils"),n=u("../../components/color"),h=u("../../components/drawing"),s=u("../../components/fx"),a=u("./axes"),l=u("../../lib/setcursor"),f=u("../../components/dragelement"),d=u("../../components/dragelement/helpers"),v=d.selectingOrDrawing,m=d.freeMode,c=u("../../constants/alignment").FROM_TL,b=u("../../lib/clear_gl_canvases"),g=u("../../plot_api/subroutines").redrawReglTraces,w=u("../plots"),_=u("./axis_ids").getFromId,T=u("./select").prepSelect,k=u("./select").clearSelect,L=u("./select").selectOnClick,M=u("./scale_zoom"),I=u("./constants"),P=I.MINDRAG,S=I.MINZOOM,E=!0;function D(ee,ne,se,oe){var he=p.ensureSingle(ee.draglayer,ne,se,function(le){le.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ee.id)});return he.call(l,oe),he.node()}function F(ee,ne,se,oe,he,le,de){var xe=D(ee,"rect",ne,se);return o.select(xe).call(h.setRect,oe,he,le,de),xe}function H(ee,ne){for(var se=0;se<ee.length;se++)if(!ee[se].fixedrange)return ne;return""}function V(ee,ne,se,oe,he){for(var le=0;le<ee.length;le++){var de=ee[le];if(!de.fixedrange)if(de.rangebreaks){var xe=de._id.charAt(0)==="y",we=xe?1-ne:ne,be=xe?1-se:se;oe[de._name+".range[0]"]=de.l2r(de.p2l(we*de._length)),oe[de._name+".range[1]"]=de.l2r(de.p2l(be*de._length))}else{var Ae=de._rl[0],fe=de._rl[1]-Ae;oe[de._name+".range[0]"]=de.l2r(Ae+fe*ne),oe[de._name+".range[1]"]=de.l2r(Ae+fe*se)}}if(he&&he.length){var me=(ne+(1-se))/2;V(he,me,1-me,oe,[])}}function Q(ee,ne){for(var se=0;se<ee.length;se++){var oe=ee[se];if(!oe.fixedrange)if(oe.rangebreaks){var he=oe._length,le=(oe.p2l(0+ne)-oe.p2l(0)+(oe.p2l(he+ne)-oe.p2l(he)))/2;oe.range=[oe.l2r(oe._rl[0]-le),oe.l2r(oe._rl[1]-le)]}else oe.range=[oe.l2r(oe._rl[0]-ne/oe._m),oe.l2r(oe._rl[1]-ne/oe._m)]}}function K(ee){return 1-(ee>=0?Math.min(ee,.9):1/(1/Math.max(ee,-.3)+3.222))}function Z(ee,ne,se,oe,he){return ee.append("path").attr("class","zoombox").style({fill:ne>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",t(se,oe)).attr("d",he+"Z")}function $(ee,ne,se){return ee.append("path").attr("class","zoombox-corners").style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,opacity:0}).attr("transform",t(ne,se)).attr("d","M0,0Z")}function re(ee,ne,se,oe,he,le){ee.attr("d",oe+"M"+se.l+","+se.t+"v"+se.h+"h"+se.w+"v-"+se.h+"h-"+se.w+"Z"),R(ee,ne,he,le)}function R(ee,ne,se,oe){se||(ee.transition().style("fill",oe>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ne.transition().style("opacity",1).duration(200))}function N(ee){o.select(ee).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function U(ee){E&&ee.data&&ee._context.showTips&&(p.notifier(p._(ee,"Double-click to zoom back out"),"long"),E=!1)}function te(ee){var ne=Math.floor(Math.min(ee.b-ee.t,ee.r-ee.l,S)/2);return"M"+(ee.l-3.5)+","+(ee.t-.5+ne)+"h3v"+-ne+"h"+ne+"v-3h-"+(ne+3)+"ZM"+(ee.r+3.5)+","+(ee.t-.5+ne)+"h-3v"+-ne+"h"+-ne+"v-3h"+(ne+3)+"ZM"+(ee.r+3.5)+","+(ee.b+.5-ne)+"h-3v"+ne+"h"+-ne+"v3h"+(ne+3)+"ZM"+(ee.l-3.5)+","+(ee.b+.5-ne)+"h3v"+ne+"h"+ne+"v3h-"+(ne+3)+"Z"}function j(ee,ne,se,oe,he){for(var le,de,xe,we,be=!1,Ae={},fe={},me=(he||{}).xaHash,ke=(he||{}).yaHash,Te=0;Te<ne.length;Te++){var Me=ne[Te];for(le in se)if(Me[le]){for(xe in Me)he&&(me[xe]||ke[xe])||(xe.charAt(0)==="x"?se:oe)[xe]||(Ae[xe]=le);for(de in oe)he&&(me[de]||ke[de])||!Me[de]||(be=!0)}for(de in oe)if(Me[de])for(we in Me)he&&(me[we]||ke[we])||(we.charAt(0)==="x"?se:oe)[we]||(fe[we]=de)}be&&(p.extendFlat(Ae,fe),fe={});var Oe={},Fe=[];for(xe in Ae){var qe=_(ee,xe);Fe.push(qe),Oe[qe._id]=qe}var et={},ze=[];for(we in fe){var Ue=_(ee,we);ze.push(Ue),et[Ue._id]=Ue}return{xaHash:Oe,yaHash:et,xaxes:Fe,yaxes:ze,xLinks:Ae,yLinks:fe,isSubplotConstrained:be}}function Y(ee,ne){if(e){var se=ee.onwheel!==void 0?"wheel":"mousewheel";ee._onwheel&&ee.removeEventListener(se,ee._onwheel),ee._onwheel=ne,ee.addEventListener(se,ne,{passive:!1})}else ee.onwheel!==void 0?ee.onwheel=ne:ee.onmousewheel!==void 0?ee.onmousewheel=ne:ee.isAddedWheelEvent||(ee.isAddedWheelEvent=!0,ee.addEventListener("wheel",ne,{passive:!1}))}function J(ee){var ne=[];for(var se in ee)ne.push(ee[se]);return ne}q.exports={makeDragBox:function(ee,ne,se,oe,he,le,de,xe){var we,be,Ae,fe,me,ke,Te,Me,Oe,Fe,qe,et,ze,Ue,We,Ze,nt,ft,xt,It,Et,it,rt,At=ee._fullLayout._zoomlayer,Gt=de+xe==="nsew",Qt=(de+xe).length===1;function Ve(){if(we=ne.xaxis,be=ne.yaxis,Oe=we._length,Fe=be._length,Te=we._offset,Me=be._offset,(Ae={})[we._id]=we,(fe={})[be._id]=be,de&&xe)for(var ur=ne.overlays,cr=0;cr<ur.length;cr++){var mr=ur[cr].xaxis;Ae[mr._id]=mr;var Dr=ur[cr].yaxis;fe[Dr._id]=Dr}me=J(Ae),ke=J(fe),ze=H(me,xe),Ue=H(ke,de),We=!Ue&&!ze,et=j(ee,ee._fullLayout._axisMatchGroups,Ae,fe);var yr=(qe=j(ee,ee._fullLayout._axisConstraintGroups,Ae,fe,et)).isSubplotConstrained||et.isSubplotConstrained;Ze=xe||yr,nt=de||yr;var Br=ee._fullLayout;ft=Br._has("scattergl"),xt=Br._has("splom"),It=Br._has("svg")}Ve();var Ye=function(ur,cr,mr){return ur?ur==="nsew"?mr?"":cr==="pan"?"move":"crosshair":ur.toLowerCase()+"-resize":"pointer"}(Ue+ze,ee._fullLayout.dragmode,Gt),Be=F(ne,de+xe+"drag",Ye,se,oe,he,le);if(We&&!Gt)return Be.onmousedown=null,Be.style.pointerEvents="none",Be;var Je,Se,Pe,De,Ie,$e,st,dt,ut,Lt,lt={element:Be,gd:ee,plotinfo:ne};function Ct(){lt.plotinfo.selection=!1,k(ee)}function Pt(ur,cr){var mr=lt.gd;if(mr._fullLayout._activeShapeIndex>=0)mr._fullLayout._deactivateShape(mr);else{var Dr=mr._fullLayout.clickmode;if(N(mr),ur!==2||Qt||rr(),Gt)Dr.indexOf("select")>-1&&L(cr,mr,me,ke,ne.id,lt),Dr.indexOf("event")>-1&&s.click(mr,cr,ne.id);else if(ur===1&&Qt){var yr=de?be:we,Br=de==="s"||xe==="w"?0:1,Kr=yr._name+".range["+Br+"]",an=function(An,tn){var zr,Ar=An.range[tn],qr=Math.abs(Ar-An.range[1-tn]);return An.type==="date"?Ar:An.type==="log"?(zr=Math.ceil(Math.max(0,-Math.log(qr)/Math.LN10))+3,x("."+zr+"g")(Math.pow(10,Ar))):(zr=Math.floor(Math.log(Math.abs(Ar))/Math.LN10)-Math.floor(Math.log(qr)/Math.LN10)+4,x("."+String(zr)+"g")(Ar))}(yr,Br),Ln="left",Pn="middle";if(yr.fixedrange)return;de?(Pn=de==="n"?"top":"bottom",yr.side==="right"&&(Ln="right")):xe==="e"&&(Ln="right"),mr._context.showAxisRangeEntryBoxes&&o.select(Be).call(i.makeEditable,{gd:mr,immediate:!0,background:mr._fullLayout.paper_bgcolor,text:String(an),fill:yr.tickfont?yr.tickfont.color:"#444",horizontalAlign:Ln,verticalAlign:Pn}).on("edit",function(An){var tn=yr.d2r(An);tn!==void 0&&r.call("_guiRelayout",mr,Kr,tn)})}}}function Ke(ur,cr){if(ee._transitioningWithDuration)return!1;var mr=Math.max(0,Math.min(Oe,it*ur+Je)),Dr=Math.max(0,Math.min(Fe,rt*cr+Se)),yr=Math.abs(mr-Je),Br=Math.abs(Dr-Se);function Kr(){st="",Pe.r=Pe.l,Pe.t=Pe.b,ut.attr("d","M0,0Z")}if(Pe.l=Math.min(Je,mr),Pe.r=Math.max(Je,mr),Pe.t=Math.min(Se,Dr),Pe.b=Math.max(Se,Dr),qe.isSubplotConstrained)yr>S||Br>S?(st="xy",yr/Oe>Br/Fe?(Br=yr*Fe/Oe,Se>Dr?Pe.t=Se-Br:Pe.b=Se+Br):(yr=Br*Oe/Fe,Je>mr?Pe.l=Je-yr:Pe.r=Je+yr),ut.attr("d",te(Pe))):Kr();else if(et.isSubplotConstrained)if(yr>S||Br>S){st="xy";var an=Math.min(Pe.l/Oe,(Fe-Pe.b)/Fe),Ln=Math.max(Pe.r/Oe,(Fe-Pe.t)/Fe);Pe.l=an*Oe,Pe.r=Ln*Oe,Pe.b=(1-an)*Fe,Pe.t=(1-Ln)*Fe,ut.attr("d",te(Pe))}else Kr();else!Ue||Br<Math.min(Math.max(.6*yr,P),S)?yr<P||!ze?Kr():(Pe.t=0,Pe.b=Fe,st="x",ut.attr("d",function(Pn,An){return"M"+(Pn.l-.5)+","+(An-S-.5)+"h-3v"+(2*S+1)+"h3ZM"+(Pn.r+.5)+","+(An-S-.5)+"h3v"+(2*S+1)+"h-3Z"}(Pe,Se))):!ze||yr<Math.min(.6*Br,S)?(Pe.l=0,Pe.r=Oe,st="y",ut.attr("d",function(Pn,An){return"M"+(An-S-.5)+","+(Pn.t-.5)+"v-3h"+(2*S+1)+"v3ZM"+(An-S-.5)+","+(Pn.b+.5)+"v3h"+(2*S+1)+"v-3Z"}(Pe,Je))):(st="xy",ut.attr("d",te(Pe)));Pe.w=Pe.r-Pe.l,Pe.h=Pe.b-Pe.t,st&&(Lt=!0),ee._dragged=Lt,re(dt,ut,Pe,Ie,$e,De),mt(),ee.emit("plotly_relayouting",Et),$e=!0}function mt(){Et={},st!=="xy"&&st!=="x"||(V(me,Pe.l/Oe,Pe.r/Oe,Et,qe.xaxes),Rt("x",Et)),st!=="xy"&&st!=="y"||(V(ke,(Fe-Pe.b)/Fe,(Fe-Pe.t)/Fe,Et,qe.yaxes),Rt("y",Et))}function Dt(){mt(),N(ee),qt(),U(ee)}lt.prepFn=function(ur,cr,mr){var Dr=lt.dragmode,yr=ee._fullLayout.dragmode;yr!==Dr&&(lt.dragmode=yr),Ve(),it=ee._fullLayout._invScaleX,rt=ee._fullLayout._invScaleY,We||(Gt?ur.shiftKey?yr==="pan"?yr="zoom":v(yr)||(yr="pan"):ur.ctrlKey&&(yr="pan"):yr="pan"),m(yr)?lt.minDrag=1:lt.minDrag=void 0,v(yr)?(lt.xaxes=me,lt.yaxes=ke,T(ur,cr,mr,lt,yr)):(lt.clickFn=Pt,v(Dr)&&Ct(),We||(yr==="zoom"?(lt.moveFn=Ke,lt.doneFn=Dt,lt.minDrag=1,function(Br,Kr,an){var Ln=Be.getBoundingClientRect();Je=Kr-Ln.left,Se=an-Ln.top,ee._fullLayout._calcInverseTransform(ee);var Pn=p.apply3DTransform(ee._fullLayout._invTransform)(Je,Se);Je=Pn[0],Se=Pn[1],Pe={l:Je,r:Je,w:0,t:Se,b:Se,h:0},De=ee._hmpixcount?ee._hmlumcount/ee._hmpixcount:y(ee._fullLayout.plot_bgcolor).getLuminance(),$e=!1,st="xy",Lt=!1,dt=Z(At,De,Te,Me,Ie="M0,0H"+Oe+"V"+Fe+"H0V0"),ut=$(At,Te,Me)}(0,cr,mr)):yr==="pan"&&(lt.moveFn=wt,lt.doneFn=qt))),ee._fullLayout._redrag=function(){var Br=ee._dragdata;if(Br&&Br.element===Be){var Kr=ee._fullLayout.dragmode;v(Kr)||(Ve(),Jt([0,0,Oe,Fe]),lt.moveFn(Br.dx,Br.dy))}}},f.init(lt);var Bt=[0,0,Oe,Fe],Zt=null,Re=I.REDRAWDELAY,ct=ne.mainplot?ee._fullLayout._plots[ne.mainplot]:ne;function wt(ur,cr){if(ur*=it,cr*=rt,!ee._transitioningWithDuration){if(ee._fullLayout._replotting=!0,ze==="ew"||Ue==="ns"){var mr=ze?-ur:0,Dr=Ue?-cr:0;if(et.isSubplotConstrained){if(ze&&Ue){var yr=(ur/Oe-cr/Fe)/2;mr=-(ur=yr*Oe),Dr=-(cr=-yr*Fe)}Ue?mr=-Dr*Oe/Fe:Dr=-mr*Fe/Oe}return ze&&(Q(me,ur),Rt("x")),Ue&&(Q(ke,cr),Rt("y")),Jt([mr,Dr,Oe,Fe]),Vt(),void ee.emit("plotly_relayouting",Et)}var Br,Kr,an=ze==="w"==(Ue==="n")?1:-1;if(ze&&Ue&&(qe.isSubplotConstrained||et.isSubplotConstrained)){var Ln=(ur/Oe+an*cr/Fe)/2;ur=Ln*Oe,cr=an*Ln*Fe}if(ze==="w"?ur=zr(me,0,ur):ze==="e"?ur=zr(me,1,-ur):ze||(ur=0),Ue==="n"?cr=zr(ke,1,cr):Ue==="s"?cr=zr(ke,0,-cr):Ue||(cr=0),Br=ze==="w"?ur:0,Kr=Ue==="n"?cr:0,qe.isSubplotConstrained&&!et.isSubplotConstrained||et.isSubplotConstrained&&ze&&Ue&&an>0){var Pn;if(et.isSubplotConstrained||!ze&&Ue.length===1){for(Pn=0;Pn<me.length;Pn++)me[Pn].range=me[Pn]._r.slice(),M(me[Pn],1-cr/Fe);Br=(ur=cr*Oe/Fe)/2}if(et.isSubplotConstrained||!Ue&&ze.length===1){for(Pn=0;Pn<ke.length;Pn++)ke[Pn].range=ke[Pn]._r.slice(),M(ke[Pn],1-ur/Oe);Kr=(cr=ur*Fe/Oe)/2}}et.isSubplotConstrained&&Ue||Rt("x"),et.isSubplotConstrained&&ze||Rt("y");var An=Oe-ur,tn=Fe-cr;!et.isSubplotConstrained||ze&&Ue||(ze?(Kr=Br?0:ur*Fe/Oe,tn=An*Fe/Oe):(Br=Kr?0:cr*Oe/Fe,An=tn*Oe/Fe)),Jt([Br,Kr,An,tn]),Vt(),ee.emit("plotly_relayouting",Et)}function zr(Ar,qr,On){for(var Fr,on,Mn=1-qr,bn=0;bn<Ar.length;bn++){var Dn=Ar[bn];if(!Dn.fixedrange){Fr=Dn,on=Dn._rl[Mn]+(Dn._rl[qr]-Dn._rl[Mn])/K(On/Dn._length);var tr=Dn.l2r(on);tr!==!1&&tr!==void 0&&(Dn.range[qr]=tr)}}return Fr._length*(Fr._rl[qr]-on)/(Fr._rl[qr]-Fr._rl[Mn])}}function Rt(ur,cr){for(var mr=et.isSubplotConstrained?{x:ke,y:me}[ur]:et[ur+"axes"],Dr=et.isSubplotConstrained?{x:me,y:ke}[ur]:[],yr=0;yr<mr.length;yr++){var Br=mr[yr],Kr=Br._id,an=et.xLinks[Kr]||et.yLinks[Kr],Ln=Dr[0]||Ae[an]||fe[an];Ln&&(cr?(cr[Br._name+".range[0]"]=cr[Ln._name+".range[0]"],cr[Br._name+".range[1]"]=cr[Ln._name+".range[1]"]):Br.range=Ln.range.slice())}}function Vt(){var ur,cr=[];function mr(Br){for(ur=0;ur<Br.length;ur++)Br[ur].fixedrange||cr.push(Br[ur]._id)}for(Ze&&(mr(me),mr(qe.xaxes),mr(et.xaxes)),nt&&(mr(ke),mr(qe.yaxes),mr(et.yaxes)),Et={},ur=0;ur<cr.length;ur++){var Dr=cr[ur],yr=_(ee,Dr);a.drawOne(ee,yr,{skipTitle:!0}),Et[yr._name+".range[0]"]=yr.range[0],Et[yr._name+".range[1]"]=yr.range[1]}a.redrawComponents(ee,cr)}function rr(){if(!ee._transitioningWithDuration){var ur=ee._context.doubleClick,cr=[];ze&&(cr=cr.concat(me)),Ue&&(cr=cr.concat(ke)),et.xaxes&&(cr=cr.concat(et.xaxes)),et.yaxes&&(cr=cr.concat(et.yaxes));var mr,Dr,yr,Br={};if(ur==="reset+autosize"){for(ur="autosize",Dr=0;Dr<cr.length;Dr++)if((mr=cr[Dr])._rangeInitial&&(mr.range[0]!==mr._rangeInitial[0]||mr.range[1]!==mr._rangeInitial[1])||!mr._rangeInitial&&!mr.autorange){ur="reset";break}}if(ur==="autosize")for(Dr=0;Dr<cr.length;Dr++)(mr=cr[Dr]).fixedrange||(Br[mr._name+".autorange"]=!0);else if(ur==="reset")for((ze||qe.isSubplotConstrained)&&(cr=cr.concat(qe.xaxes)),Ue&&!qe.isSubplotConstrained&&(cr=cr.concat(qe.yaxes)),qe.isSubplotConstrained&&(ze?Ue||(cr=cr.concat(ke)):cr=cr.concat(me)),Dr=0;Dr<cr.length;Dr++)(mr=cr[Dr]).fixedrange||(mr._rangeInitial?(yr=mr._rangeInitial,Br[mr._name+".range[0]"]=yr[0],Br[mr._name+".range[1]"]=yr[1]):Br[mr._name+".autorange"]=!0);ee.emit("plotly_doubleclick",null),r.call("_guiRelayout",ee,Br)}}function qt(){Jt([0,0,Oe,Fe]),p.syncOrAsync([w.previousPromises,function(){ee._fullLayout._replotting=!1,r.call("_guiRelayout",ee,Et)}],ee)}function Jt(ur){var cr,mr,Dr,yr,Br=ee._fullLayout,Kr=Br._plots,an=Br._subplots.cartesian;if(xt&&r.subplotsRegistry.splom.drag(ee),ft){for(cr=0;cr<an.length;cr++)if(Dr=(mr=Kr[an[cr]]).xaxis,yr=mr.yaxis,mr._scene){var Ln=p.simpleMap(Dr.range,Dr.r2l),Pn=p.simpleMap(yr.range,yr.r2l);mr._scene.update({range:[Ln[0],Pn[0],Ln[1],Pn[1]]})}}if((xt||ft)&&(b(ee),g(ee)),It){var An=ur[2]/we._length,tn=ur[3]/be._length;for(cr=0;cr<an.length;cr++){Dr=(mr=Kr[an[cr]]).xaxis,yr=mr.yaxis;var zr,Ar,qr,On,Fr=(Ze||et.isSubplotConstrained)&&!Dr.fixedrange&&Ae[Dr._id],on=(nt||et.isSubplotConstrained)&&!yr.fixedrange&&fe[yr._id];if(Fr?(zr=An,qr=xe||et.isSubplotConstrained?ur[0]:dr(Dr,zr)):et.xaHash[Dr._id]?(zr=An,qr=ur[0]*Dr._length/we._length):et.yaHash[Dr._id]?(zr=tn,qr=Ue==="ns"?-ur[1]*Dr._length/be._length:dr(Dr,zr,{n:"top",s:"bottom"}[Ue])):qr=gr(Dr,zr=or(Dr,An,tn)),on?(Ar=tn,On=de||et.isSubplotConstrained?ur[1]:dr(yr,Ar)):et.yaHash[yr._id]?(Ar=tn,On=ur[1]*yr._length/be._length):et.xaHash[yr._id]?(Ar=An,On=ze==="ew"?-ur[0]*yr._length/we._length:dr(yr,Ar,{e:"right",w:"left"}[ze])):On=gr(yr,Ar=or(yr,An,tn)),zr||Ar){zr||(zr=1),Ar||(Ar=1);var Mn=Dr._offset-qr/zr,bn=yr._offset-On/Ar;mr.clipRect.call(h.setTranslate,qr,On).call(h.setScale,zr,Ar),mr.plot.call(h.setTranslate,Mn,bn).call(h.setScale,1/zr,1/Ar),zr===mr.xScaleFactor&&Ar===mr.yScaleFactor||(h.setPointGroupScale(mr.zoomScalePts,zr,Ar),h.setTextPointsScale(mr.zoomScaleTxt,zr,Ar)),h.hideOutsideRangePoints(mr.clipOnAxisFalseTraces,mr),mr.xScaleFactor=zr,mr.yScaleFactor=Ar}}}}function or(ur,cr,mr){return ur.fixedrange?0:Ze&&qe.xaHash[ur._id]?cr:nt&&(qe.isSubplotConstrained?qe.xaHash:qe.yaHash)[ur._id]?mr:0}function gr(ur,cr){return cr?(ur.range=ur._r.slice(),M(ur,cr),dr(ur,cr)):0}function dr(ur,cr,mr){return ur._length*(1-cr)*c[mr||ur.constraintoward||"middle"]}return de.length*xe.length!=1&&Y(Be,function(ur){if(ee._context._scrollZoom.cartesian||ee._fullLayout._enablescrollzoom){if(Ct(),ee._transitioningWithDuration)return ur.preventDefault(),void ur.stopPropagation();Ve(),clearTimeout(Zt);var cr=-ur.deltaY;if(isFinite(cr)||(cr=ur.wheelDelta/10),isFinite(cr)){var mr,Dr=Math.exp(-Math.min(Math.max(cr,-20),20)/200),yr=ct.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Br=(ur.clientX-yr.left)/yr.width,Kr=(yr.bottom-ur.clientY)/yr.height;if(Ze){for(xe||(Br=.5),mr=0;mr<me.length;mr++)an(me[mr],Br,Dr);Rt("x"),Bt[2]*=Dr,Bt[0]+=Bt[2]*Br*(1/Dr-1)}if(nt){for(de||(Kr=.5),mr=0;mr<ke.length;mr++)an(ke[mr],Kr,Dr);Rt("y"),Bt[3]*=Dr,Bt[1]+=Bt[3]*(1-Kr)*(1/Dr-1)}Jt(Bt),Vt(),ee.emit("plotly_relayouting",Et),Zt=setTimeout(function(){ee._fullLayout&&(Bt=[0,0,Oe,Fe],qt())},Re),ur.preventDefault()}else p.log("Did not find wheel motion attributes: ",ur)}function an(Ln,Pn,An){if(!Ln.fixedrange){var tn=p.simpleMap(Ln.range,Ln.r2l),zr=tn[0]+(tn[1]-tn[0])*Pn;Ln.range=tn.map(function(Ar){return Ln.l2r(zr+(Ar-zr)*An)})}}}),Be},makeDragger:D,makeRectDragger:F,makeZoombox:Z,makeCorners:$,updateZoombox:re,xyCorners:te,transitionZoombox:R,removeZoombox:N,showDoubleClickNotifier:U,attachWheelEventHandler:Y}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/subroutines":544,"../../registry":638,"../plots":619,"./axes":554,"./axis_ids":558,"./constants":561,"./scale_zoom":574,"./select":575,"@plotly/d3":58,"has-passive-events":229,tinycolor2:312}],564:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../components/fx"),x=u("../../components/dragelement"),y=u("../../lib/setcursor"),e=u("./dragbox").makeDragBox,r=u("./constants").DRAGGERSIZE;W.initInteractions=function(t){var i=t._fullLayout;if(t._context.staticPlot)o.select(t).selectAll(".drag").remove();else if(i._has("cartesian")||i._has("splom")){Object.keys(i._plots||{}).sort(function(h,s){if((i._plots[h].mainplot&&!0)===(i._plots[s].mainplot&&!0)){var a=h.split("y"),l=s.split("y");return a[0]===l[0]?Number(a[1]||1)-Number(l[1]||1):Number(a[0]||1)-Number(l[0]||1)}return i._plots[h].mainplot?1:-1}).forEach(function(h){var s=i._plots[h],a=s.xaxis,l=s.yaxis;if(!s.mainplot){var f=e(t,s,a._offset,l._offset,a._length,l._length,"ns","ew");f.onmousemove=function(m){t._fullLayout._rehover=function(){t._fullLayout._hoversubplot===h&&t._fullLayout._plots[h]&&p.hover(t,m,h)},p.hover(t,m,h),t._fullLayout._lasthover=f,t._fullLayout._hoversubplot=h},f.onmouseout=function(m){t._dragging||(t._fullLayout._hoversubplot=null,x.unhover(t,m))},t._context.showAxisDragHandles&&(e(t,s,a._offset-r,l._offset-r,r,r,"n","w"),e(t,s,a._offset+a._length,l._offset-r,r,r,"n","e"),e(t,s,a._offset-r,l._offset+l._length,r,r,"s","w"),e(t,s,a._offset+a._length,l._offset+l._length,r,r,"s","e"))}if(t._context.showAxisDragHandles){if(h===a._mainSubplot){var d=a._mainLinePosition;a.side==="top"&&(d-=r),e(t,s,a._offset+.1*a._length,d,.8*a._length,r,"","ew"),e(t,s,a._offset,d,.1*a._length,r,"","w"),e(t,s,a._offset+.9*a._length,d,.1*a._length,r,"","e")}if(h===l._mainSubplot){var v=l._mainLinePosition;l.side!=="right"&&(v-=r),e(t,s,v,l._offset+.1*l._length,r,.8*l._length,"ns",""),e(t,s,v,l._offset+.9*l._length,r,.1*l._length,"s",""),e(t,s,v,l._offset,r,.1*l._length,"n","")}}});var n=i._hoverlayer.node();n.onmousemove=function(h){h.target=t._fullLayout._lasthover,p.hover(t,h,i._hoversubplot)},n.onclick=function(h){h.target=t._fullLayout._lasthover,p.click(t,h)},n.onmousedown=function(h){t._fullLayout._lasthover.onmousedown(h)},W.updateFx(t)}},W.updateFx=function(t){var i=t._fullLayout,n=i.dragmode==="pan"?"move":"crosshair";y(i._draggers,n)}},{"../../components/dragelement":385,"../../components/fx":406,"../../lib/setcursor":524,"./constants":561,"./dragbox":563,"@plotly/d3":58}],565:[function(u,q,W){q.exports={clearOutlineControllers:function(o){var p=o._fullLayout._zoomlayer;p&&p.selectAll(".outline-controllers").remove()},clearSelect:function(o){var p=o._fullLayout._zoomlayer;p&&p.selectAll(".select-outline").remove(),o._fullLayout._drawing=!1}}},{}],566:[function(u,q,W){var o=u("../../lib").strTranslate;function p(x,y){switch(x.type){case"log":return x.p2d(y);case"date":return x.p2r(y,0,x.calendar);default:return x.p2r(y)}}q.exports={p2r:p,r2p:function(x,y){switch(x.type){case"log":return x.d2p(y);case"date":return x.r2p(y,0,x.calendar);default:return x.r2p(y)}},axValue:function(x){var y=x._id.charAt(0)==="y"?1:0;return function(e){return p(x,e[y])}},getTransform:function(x){return o(x.xaxis._offset,x.yaxis._offset)}}},{"../../lib":503}],567:[function(u,q,W){var o=u("../../registry"),p=u("../../lib"),x=u("./axis_ids");q.exports=function(y){return function(e,r){var t=e[y];if(Array.isArray(t))for(var i=o.subplotsRegistry.cartesian,n=i.idRegex,h=r._subplots,s=h.xaxis,a=h.yaxis,l=h.cartesian,f=r._has("cartesian")||r._has("gl2d"),d=0;d<t.length;d++){var v=t[d];if(p.isPlainObject(v)){var m=x.cleanId(v.xref,"x",!1),c=x.cleanId(v.yref,"y",!1),b=n.x.test(m),g=n.y.test(c);if(b||g){f||p.pushUnique(r._basePlotModules,i);var w=!1;b&&s.indexOf(m)===-1&&(s.push(m),w=!0),g&&a.indexOf(c)===-1&&(a.push(c),w=!0),w&&b&&g&&l.push(m+c)}}}}}},{"../../lib":503,"../../registry":638,"./axis_ids":558}],568:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../registry"),x=u("../../lib"),y=u("../plots"),e=u("../../components/drawing"),r=u("../get_data").getModuleCalcData,t=u("./axis_ids"),i=u("./constants"),n=u("../../constants/xmlns_namespaces"),h=x.ensureSingle;function s(v,m,c){return x.ensureSingle(v,m,c,function(b){b.datum(c)})}function a(v,m,c,b,g){for(var w,_,T,k=i.traceLayerClasses,L=v._fullLayout,M=L._modules,I=[],P=[],S=0;S<M.length;S++){var E=(w=M[S]).name,D=p.modules[E].categories;if(D.svg){var F=w.layerName||E+"layer",H=w.plot;T=(_=r(c,H))[0],c=_[1],T.length&&I.push({i:k.indexOf(F),className:F,plotMethod:H,cdModule:T}),D.zoomScale&&P.push("."+F)}}I.sort(function(K,Z){return K.i-Z.i});var V=m.plot.selectAll("g.mlayer").data(I,function(K){return K.className});if(V.enter().append("g").attr("class",function(K){return K.className}).classed("mlayer",!0).classed("rangeplot",m.isRangePlot),V.exit().remove(),V.order(),V.each(function(K){var Z=o.select(this),$=K.className;K.plotMethod(v,m,K.cdModule,Z,b,g),i.clipOnAxisFalseQuery.indexOf("."+$)===-1&&e.setClipUrl(Z,m.layerClipId,v)}),L._has("scattergl")&&(w=p.getModule("scattergl"),T=r(c,w)[0],w.plot(v,m,T)),!v._context.staticPlot&&(m._hasClipOnAxisFalse&&(m.clipOnAxisFalseTraces=m.plot.selectAll(i.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),P.length)){var Q=m.plot.selectAll(P.join(",")).selectAll(".trace");m.zoomScalePts=Q.selectAll("path.point"),m.zoomScaleTxt=Q.selectAll(".textpoint")}}function l(v,m){var c=m.plotgroup,b=m.id,g=i.layerValue2layerClass[m.xaxis.layer],w=i.layerValue2layerClass[m.yaxis.layer],_=v._fullLayout._hasOnlyLargeSploms;if(m.mainplot){var T=m.mainplotinfo,k=T.plotgroup,L=b+"-x",M=b+"-y";m.gridlayer=T.gridlayer,m.zerolinelayer=T.zerolinelayer,h(T.overlinesBelow,"path",L),h(T.overlinesBelow,"path",M),h(T.overaxesBelow,"g",L),h(T.overaxesBelow,"g",M),m.plot=h(T.overplot,"g",b),h(T.overlinesAbove,"path",L),h(T.overlinesAbove,"path",M),h(T.overaxesAbove,"g",L),h(T.overaxesAbove,"g",M),m.xlines=k.select(".overlines-"+g).select("."+L),m.ylines=k.select(".overlines-"+w).select("."+M),m.xaxislayer=k.select(".overaxes-"+g).select("."+L),m.yaxislayer=k.select(".overaxes-"+w).select("."+M)}else if(_)m.xlines=h(c,"path","xlines-above"),m.ylines=h(c,"path","ylines-above"),m.xaxislayer=h(c,"g","xaxislayer-above"),m.yaxislayer=h(c,"g","yaxislayer-above");else{var I=h(c,"g","layer-subplot");m.shapelayer=h(I,"g","shapelayer"),m.imagelayer=h(I,"g","imagelayer"),m.gridlayer=h(c,"g","gridlayer"),m.zerolinelayer=h(c,"g","zerolinelayer"),h(c,"path","xlines-below"),h(c,"path","ylines-below"),m.overlinesBelow=h(c,"g","overlines-below"),h(c,"g","xaxislayer-below"),h(c,"g","yaxislayer-below"),m.overaxesBelow=h(c,"g","overaxes-below"),m.plot=h(c,"g","plot"),m.overplot=h(c,"g","overplot"),m.xlines=h(c,"path","xlines-above"),m.ylines=h(c,"path","ylines-above"),m.overlinesAbove=h(c,"g","overlines-above"),h(c,"g","xaxislayer-above"),h(c,"g","yaxislayer-above"),m.overaxesAbove=h(c,"g","overaxes-above"),m.xlines=c.select(".xlines-"+g),m.ylines=c.select(".ylines-"+w),m.xaxislayer=c.select(".xaxislayer-"+g),m.yaxislayer=c.select(".yaxislayer-"+w)}_||(s(m.gridlayer,"g",m.xaxis._id),s(m.gridlayer,"g",m.yaxis._id),m.gridlayer.selectAll("g").map(function(P){return P[0]}).sort(t.idSort)),m.xlines.style("fill","none").classed("crisp",!0),m.ylines.style("fill","none").classed("crisp",!0)}function f(v,m){if(v){var c={};for(var b in v.each(function(T){var k=T[0];o.select(this).remove(),d(k,m),c[k]=!0}),m._plots)for(var g=m._plots[b].overlays||[],w=0;w<g.length;w++){var _=g[w];c[_.id]&&_.plot.selectAll(".trace").remove()}}}function d(v,m){m._draggers.selectAll("g."+v).remove(),m._defs.select("#clip"+m._uid+v+"plot").remove()}W.name="cartesian",W.attr=["xaxis","yaxis"],W.idRoot=["x","y"],W.idRegex=i.idRegex,W.attrRegex=i.attrRegex,W.attributes=u("./attributes"),W.layoutAttributes=u("./layout_attributes"),W.supplyLayoutDefaults=u("./layout_defaults"),W.transitionAxes=u("./transition_axes"),W.finalizeSubplots=function(v,m){var c,b,g,w=m._subplots,_=w.xaxis,T=w.yaxis,k=w.cartesian,L=k.concat(w.gl2d||[]),M={},I={};for(c=0;c<L.length;c++){var P=L[c].split("y");M[P[0]]=1,I["y"+P[1]]=1}for(c=0;c<_.length;c++)M[b=_[c]]||(g=(v[t.id2name(b)]||{}).anchor,i.idRegex.y.test(g)||(g="y"),k.push(b+g),L.push(b+g),I[g]||(I[g]=1,x.pushUnique(T,g)));for(c=0;c<T.length;c++)I[g=T[c]]||(b=(v[t.id2name(g)]||{}).anchor,i.idRegex.x.test(b)||(b="x"),k.push(b+g),L.push(b+g),M[b]||(M[b]=1,x.pushUnique(_,b)));if(!L.length){for(var S in b="",g="",v)i.attrRegex.test(S)&&(S.charAt(0)==="x"?(!b||+S.substr(5)<+b.substr(5))&&(b=S):(!g||+S.substr(5)<+g.substr(5))&&(g=S));b=b?t.name2id(b):"x",g=g?t.name2id(g):"y",_.push(b),T.push(g),k.push(b+g)}},W.plot=function(v,m,c,b){var g,w=v._fullLayout,_=w._subplots.cartesian,T=v.calcdata;if(!Array.isArray(m))for(m=[],g=0;g<T.length;g++)m.push(g);for(g=0;g<_.length;g++){for(var k,L=_[g],M=w._plots[L],I=[],P=0;P<T.length;P++){var S=T[P],E=S[0].trace;E.xaxis+E.yaxis===L&&((m.indexOf(E.index)!==-1||E.carpet)&&(k&&k[0].trace.xaxis+k[0].trace.yaxis===L&&["tonextx","tonexty","tonext"].indexOf(E.fill)!==-1&&I.indexOf(k)===-1&&I.push(k),I.push(S)),k=S)}a(v,M,I,c,b)}},W.clean=function(v,m,c,b){var g,w,_,T=b._plots||{},k=m._plots||{},L=b._subplots||{};if(b._hasOnlyLargeSploms&&!m._hasOnlyLargeSploms)for(_ in T)(g=T[_]).plotgroup&&g.plotgroup.remove();var M=b._has&&b._has("gl"),I=m._has&&m._has("gl");if(M&&!I)for(_ in T)(g=T[_])._scene&&g._scene.destroy();if(L.xaxis&&L.yaxis){var P=t.listIds({_fullLayout:b});for(w=0;w<P.length;w++){var S=P[w];m[t.id2name(S)]||b._infolayer.selectAll(".g-"+S+"title").remove()}}var E=b._has&&b._has("cartesian"),D=m._has&&m._has("cartesian");if(E&&!D)f(b._cartesianlayer.selectAll(".subplot"),b),b._defs.selectAll(".axesclip").remove(),delete b._axisConstraintGroups,delete b._axisMatchGroups;else if(L.cartesian)for(w=0;w<L.cartesian.length;w++){var F=L.cartesian[w];if(!k[F]){var H="."+F+",."+F+"-x,."+F+"-y";b._cartesianlayer.selectAll(H).remove(),d(F,b)}}},W.drawFramework=function(v){var m=v._fullLayout,c=function(g){var w,_,T,k,L,M,I=g._fullLayout,P=I._subplots.cartesian,S=P.length,E=[],D=[];for(w=0;w<S;w++){T=P[w],k=I._plots[T],L=k.xaxis,M=k.yaxis;var F=L._mainAxis,H=M._mainAxis,V=F._id+H._id,Q=I._plots[V];k.overlays=[],V!==T&&Q?(k.mainplot=V,k.mainplotinfo=Q,D.push(T)):(k.mainplot=void 0,k.mainplotinfo=void 0,E.push(T))}for(w=0;w<D.length;w++)T=D[w],(k=I._plots[T]).mainplotinfo.overlays.push(k);var K=E.concat(D),Z=new Array(S);for(w=0;w<S;w++){T=K[w],k=I._plots[T],L=k.xaxis,M=k.yaxis;var $=[T,L.layer,M.layer,L.overlaying||"",M.overlaying||""];for(_=0;_<k.overlays.length;_++)$.push(k.overlays[_].id);Z[w]=$}return Z}(v),b=m._cartesianlayer.selectAll(".subplot").data(c,String);b.enter().append("g").attr("class",function(g){return"subplot "+g[0]}),b.order(),b.exit().call(f,m),b.each(function(g){var w=g[0],_=m._plots[w];_.plotgroup=o.select(this),l(v,_),_.draglayer=h(m._draggers,"g",w)})},W.rangePlot=function(v,m,c){l(v,m),a(v,m,c),y.style(v)},W.toSVG=function(v){var m=v._fullLayout._glimages,c=o.select(v).selectAll(".svg-container");c.filter(function(b,g){return g===c.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var b=this.toDataURL("image/png");m.append("svg:image").attr({xmlns:n.svg,"xlink:href":b,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})},W.updateFx=u("./graph_interact").updateFx},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../registry":638,"../get_data":593,"../plots":619,"./attributes":552,"./axis_ids":558,"./constants":561,"./graph_interact":564,"./layout_attributes":569,"./layout_defaults":570,"./transition_axes":581,"@plotly/d3":58}],569:[function(u,q,W){var o=u("../font_attributes"),p=u("../../components/color/attributes"),x=u("../../components/drawing/attributes").dash,y=u("../../lib/extend").extendFlat,e=u("../../plot_api/plot_template").templatedArray,r=u("../../plots/cartesian/axis_format_attributes").descriptionWithDates,t=u("../../constants/numerical").ONEDAY,i=u("./constants"),n=i.HOUR_PATTERN,h=i.WEEKDAY_PATTERN;q.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:p.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:o({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[i.idRegex.x.toString(),i.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[i.idRegex.x.toString(),i.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[h,n,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:t},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:p.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:y({},x,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:o({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:r("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:r("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:p.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:p.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:p.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:p.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",i.idRegex.x.toString(),i.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",i.idRegex.x.toString(),i.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:o({editType:"ticks"})}}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../constants/numerical":479,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../font_attributes":585,"./constants":561}],570:[function(u,q,W){var o=u("../../lib"),p=u("../../components/color"),x=u("../../components/fx/helpers").isUnifiedHover,y=u("../../components/fx/hovermode_defaults"),e=u("../../plot_api/plot_template"),r=u("../layout_attributes"),t=u("./layout_attributes"),i=u("./type_defaults"),n=u("./axis_defaults"),h=u("./constraints"),s=u("./position_defaults"),a=u("./axis_ids"),l=a.id2name,f=a.name2id,d=u("./constants").AX_ID_PATTERN,v=u("../../registry"),m=v.traceIs,c=v.getComponentMethod;function b(g,w,_){Array.isArray(g[w])?g[w].push(_):g[w]=[_]}q.exports=function(g,w,_){var T,k,L=w.autotypenumbers,M={},I={},P={},S={},E={},D={},F={},H={},V={},Q={};for(T=0;T<_.length;T++){var K=_[T];if(m(K,"cartesian")||m(K,"gl2d")){var Z,$;if(K.xaxis)Z=l(K.xaxis),b(M,Z,K);else if(K.xaxes)for(k=0;k<K.xaxes.length;k++)b(M,l(K.xaxes[k]),K);if(K.yaxis)$=l(K.yaxis),b(M,$,K);else if(K.yaxes)for(k=0;k<K.yaxes.length;k++)b(M,l(K.yaxes[k]),K);K.type==="funnel"?K.orientation==="h"?(Z&&(I[Z]=!0),$&&(F[$]=!0)):$&&(P[$]=!0):K.type==="image"?($&&(H[$]=!0),Z&&(H[Z]=!0)):($&&(E[$]=!0,D[$]=!0),m(K,"carpet")&&(K.type!=="carpet"||K._cheater)||Z&&(S[Z]=!0)),K.type==="carpet"&&K._cheater&&Z&&(I[Z]=!0),m(K,"2dMap")&&(V[Z]=!0,V[$]=!0),m(K,"oriented")&&(Q[K.orientation==="h"?$:Z]=!0)}}var re=w._subplots,R=re.xaxis,N=re.yaxis,U=o.simpleMap(R,l),te=o.simpleMap(N,l),j=U.concat(te),Y=p.background;R.length&&N.length&&(Y=o.coerce(g,w,r,"plot_bgcolor"));var J,ee,ne,se,oe,he=p.combine(Y,w.paper_bgcolor);function le(){var rt=M[J]||[];oe._traceIndices=rt.map(function(At){return At._expandedIndex}),oe._annIndices=[],oe._shapeIndices=[],oe._imgIndices=[],oe._subplotsWith=[],oe._counterAxes=[],oe._name=oe._attr=J,oe._id=ee}function de(rt,At){return o.coerce(se,oe,t,rt,At)}function xe(rt,At){return o.coerce2(se,oe,t,rt,At)}function we(rt){return rt==="x"?N:R}function be(rt,At){for(var Gt=rt==="x"?U:te,Qt=[],Ve=0;Ve<Gt.length;Ve++){var Ye=Gt[Ve];Ye===At||(g[Ye]||{}).overlaying||Qt.push(f(Ye))}return Qt}var Ae={x:we("x"),y:we("y")},fe=Ae.x.concat(Ae.y),me={},ke=[];function Te(){var rt=se.matches;d.test(rt)&&fe.indexOf(rt)===-1&&(me[rt]=se.type,ke=Object.keys(me))}var Me=y(g,w),Oe=x(Me);for(T=0;T<j.length;T++){J=j[T],ee=f(J),ne=J.charAt(0),o.isPlainObject(g[J])||(g[J]={}),se=g[J],oe=e.newContainer(w,J,ne+"axis"),le();var Fe=ne==="x"&&!S[J]&&I[J]||ne==="y"&&!E[J]&&P[J],qe=ne==="y"&&(!D[J]&&F[J]||H[J]),et={letter:ne,font:w.font,outerTicks:V[J],showGrid:!Q[J],data:M[J]||[],bgColor:he,calendar:w.calendar,automargin:!0,visibleDflt:Fe,reverseDflt:qe,autotypenumbersDflt:L,splomStash:((w._splomAxes||{})[ne]||{})[ee]};de("uirevision",w.uirevision),i(se,oe,de,et),n(se,oe,de,et,w);var ze=Oe&&ne===Me.charAt(0),Ue=xe("spikecolor",Oe?oe.color:void 0),We=xe("spikethickness",Oe?1.5:void 0),Ze=xe("spikedash",Oe?"dot":void 0),nt=xe("spikemode",Oe?"across":void 0),ft=xe("spikesnap");de("showspikes",!!(ze||Ue||We||Ze||nt||ft))||(delete oe.spikecolor,delete oe.spikethickness,delete oe.spikedash,delete oe.spikemode,delete oe.spikesnap),s(se,oe,de,{letter:ne,counterAxes:Ae[ne],overlayableAxes:be(ne,J),grid:w.grid}),de("title.standoff"),Te(),oe._input=se}for(T=0;T<ke.length;){ee=ke[T++],ne=(J=l(ee)).charAt(0),o.isPlainObject(g[J])||(g[J]={}),se=g[J],oe=e.newContainer(w,J,ne+"axis"),le();var xt={letter:ne,font:w.font,outerTicks:V[J],showGrid:!Q[J],data:[],bgColor:he,calendar:w.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:L,splomStash:((w._splomAxes||{})[ne]||{})[ee]};de("uirevision",w.uirevision),oe.type=me[ee]||"linear",n(se,oe,de,xt,w),s(se,oe,de,{letter:ne,counterAxes:Ae[ne],overlayableAxes:be(ne,J),grid:w.grid}),de("fixedrange"),Te(),oe._input=se}var It=c("rangeslider","handleDefaults"),Et=c("rangeselector","handleDefaults");for(T=0;T<U.length;T++)J=U[T],se=g[J],oe=w[J],It(g,w,J),oe.type==="date"&&Et(se,oe,w,te,oe.calendar),de("fixedrange");for(T=0;T<te.length;T++){J=te[T],se=g[J],oe=w[J];var it=w[l(oe.anchor)];de("fixedrange",c("rangeslider","isVisible")(it))}h.handleDefaults(g,w,{axIds:fe.concat(ke).sort(a.idSort),axHasImage:H})}},{"../../components/color":366,"../../components/fx/helpers":402,"../../components/fx/hovermode_defaults":405,"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../layout_attributes":610,"./axis_defaults":556,"./axis_ids":558,"./constants":561,"./constraints":562,"./layout_attributes":569,"./position_defaults":572,"./type_defaults":582}],571:[function(u,q,W){var o=u("tinycolor2").mix,p=u("../../components/color/attributes").lightFraction,x=u("../../lib");q.exports=function(y,e,r,t){var i=(t=t||{}).dfltColor;function n(v,m){return x.coerce2(y,e,t.attributes,v,m)}var h=n("linecolor",i),s=n("linewidth");r("showline",t.showLine||!!h||!!s)||(delete e.linecolor,delete e.linewidth);var a=n("gridcolor",o(i,t.bgColor,t.blend||p).toRgbString()),l=n("gridwidth");if(r("showgrid",t.showGrid||!!a||!!l)||(delete e.gridcolor,delete e.gridwidth),!t.noZeroLine){var f=n("zerolinecolor",i),d=n("zerolinewidth");r("zeroline",t.showGrid||!!f||!!d)||(delete e.zerolinecolor,delete e.zerolinewidth)}}},{"../../components/color/attributes":365,"../../lib":503,tinycolor2:312}],572:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../lib");q.exports=function(x,y,e,r){var t,i,n,h,s=r.counterAxes||[],a=r.overlayableAxes||[],l=r.letter,f=r.grid;f&&(i=f._domains[l][f._axisMap[y._id]],t=f._anchors[y._id],i&&(n=f[l+"side"].split(" ")[0],h=f.domain[l][n==="right"||n==="top"?1:0])),i=i||[0,1],t=t||(o(x.position)?"free":s[0]||"free"),n=n||(l==="x"?"bottom":"left"),h=h||0,p.coerce(x,y,{anchor:{valType:"enumerated",values:["free"].concat(s),dflt:t}},"anchor")==="free"&&e("position",h),p.coerce(x,y,{side:{valType:"enumerated",values:l==="x"?["bottom","top"]:["left","right"],dflt:n}},"side");var d=!1;if(a.length&&(d=p.coerce(x,y,{overlaying:{valType:"enumerated",values:[!1].concat(a),dflt:!1}},"overlaying")),!d){var v=e("domain",i);v[0]>v[1]-1/4096&&(y.domain=i),p.noneOrAll(x.domain,y.domain,i)}return e("layer"),y}},{"../../lib":503,"fast-isnumeric":190}],573:[function(u,q,W){var o=u("./show_dflt");q.exports=function(p,x,y,e,r){r||(r={});var t=r.tickSuffixDflt,i=o(p);y("tickprefix")&&y("showtickprefix",i),y("ticksuffix",t)&&y("showticksuffix",i)}},{"./show_dflt":577}],574:[function(u,q,W){var o=u("../../constants/alignment").FROM_BL;q.exports=function(p,x,y){y===void 0&&(y=o[p.constraintoward||"center"]);var e=[p.r2l(p.range[0]),p.r2l(p.range[1])],r=e[0]+(e[1]-e[0])*y;p.range=p._input.range=[p.l2r(r+(e[0]-r)*x),p.l2r(r+(e[1]-r)*x)],p.setScale()}},{"../../constants/alignment":471}],575:[function(u,q,W){var o=u("polybooljs"),p=u("../../registry"),x=u("../../components/drawing").dashStyle,y=u("../../components/color"),e=u("../../components/fx"),r=u("../../components/fx/helpers").makeEventData,t=u("../../components/dragelement/helpers"),i=t.freeMode,n=t.rectMode,h=t.drawMode,s=t.openMode,a=t.selectMode,l=u("../../components/shapes/draw_newshape/display_outlines"),f=u("../../components/shapes/draw_newshape/helpers").handleEllipse,d=u("../../components/shapes/draw_newshape/newshapes"),v=u("../../lib"),m=u("../../lib/polygon"),c=u("../../lib/throttle"),b=u("./axis_ids").getFromId,g=u("../../lib/clear_gl_canvases"),w=u("../../plot_api/subroutines").redrawReglTraces,_=u("./constants"),T=_.MINSELECT,k=m.filter,L=m.tester,M=u("./handle_outline").clearSelect,I=u("./helpers"),P=I.p2r,S=I.axValue,E=I.getTransform;function D(U,te,j,Y,J,ee,ne){var se,oe,he,le,de,xe,we,be,Ae,fe=te._hoverdata,me=te._fullLayout.clickmode.indexOf("event")>-1,ke=[];if(function(qe){return qe&&Array.isArray(qe)&&qe[0].hoverOnBox!==!0}(fe)){Q(U,te,ee);var Te=function(qe,et){var ze,Ue,We=qe[0],Ze=-1,nt=[];for(Ue=0;Ue<et.length;Ue++)if(ze=et[Ue],We.fullData._expandedIndex===ze.cd[0].trace._expandedIndex){if(We.hoverOnBox===!0)break;We.pointNumber!==void 0?Ze=We.pointNumber:We.binNumber!==void 0&&(Ze=We.binNumber,nt=We.pointNumbers);break}return{pointNumber:Ze,pointNumbers:nt,searchInfo:ze}}(fe,se=Z(te,j,Y,J));if(Te.pointNumbers.length>0?function(qe,et){var ze,Ue,We,Ze=[];for(We=0;We<qe.length;We++)(ze=qe[We]).cd[0].trace.selectedpoints&&ze.cd[0].trace.selectedpoints.length>0&&Ze.push(ze);if(Ze.length===1&&Ze[0]===et.searchInfo&&(Ue=et.searchInfo.cd[0].trace).selectedpoints.length===et.pointNumbers.length){for(We=0;We<et.pointNumbers.length;We++)if(Ue.selectedpoints.indexOf(et.pointNumbers[We])<0)return!1;return!0}return!1}(se,Te):function(qe){var et,ze,Ue,We=0;for(Ue=0;Ue<qe.length;Ue++)if(et=qe[Ue],(ze=et.cd[0].trace).selectedpoints&&(ze.selectedpoints.length>1||(We+=ze.selectedpoints.length)>1))return!1;return We===1}(se)&&(xe=$(Te))){for(ne&&ne.remove(),Ae=0;Ae<se.length;Ae++)(oe=se[Ae])._module.selectPoints(oe,!1);re(te,se),K(ee),me&&te.emit("plotly_deselect",null)}else{for(we=U.shiftKey&&(xe!==void 0?xe:$(Te)),he=function(qe,et,ze){return{pointNumber:qe,searchInfo:et,subtract:ze}}(Te.pointNumber,Te.searchInfo,we),le=V(ee.selectionDefs.concat([he])),Ae=0;Ae<se.length;Ae++)if(de=R(se[Ae]._module.selectPoints(se[Ae],le),se[Ae]),ke.length)for(var Me=0;Me<de.length;Me++)ke.push(de[Me]);else ke=de;if(re(te,se,be={points:ke}),he&&ee&&ee.selectionDefs.push(he),ne){var Oe=ee.mergedPolygons,Fe=s(ee.dragmode);l(N(Oe,Fe),ne,ee)}me&&te.emit("plotly_selected",be)}}}function F(U){return"pointNumber"in U&&"searchInfo"in U}function H(U){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(te,j,Y,J){var ee=U.searchInfo.cd[0].trace._expandedIndex;return J.cd[0].trace._expandedIndex===ee&&Y===U.pointNumber},isRect:!1,degenerate:!1,subtract:U.subtract}}function V(U){for(var te=[],j=F(U[0])?0:U[0][0][0],Y=j,J=F(U[0])?0:U[0][0][1],ee=J,ne=0;ne<U.length;ne++)if(F(U[ne]))te.push(H(U[ne]));else{var se=m.tester(U[ne]);se.subtract=U[ne].subtract,te.push(se),j=Math.min(j,se.xmin),Y=Math.max(Y,se.xmax),J=Math.min(J,se.ymin),ee=Math.max(ee,se.ymax)}return{xmin:j,xmax:Y,ymin:J,ymax:ee,pts:[],contains:function(oe,he,le,de){for(var xe=!1,we=0;we<te.length;we++)te[we].contains(oe,he,le,de)&&(xe=te[we].subtract===!1);return xe},isRect:!1,degenerate:!1}}function Q(U,te,j){te._fullLayout._drawing=!1;var Y=te._fullLayout,J=j.plotinfo,ee=j.dragmode,ne=Y._lastSelectedSubplot&&Y._lastSelectedSubplot===J.id,se=(U.shiftKey||U.altKey)&&!(h(ee)&&s(ee));ne&&se&&J.selection&&J.selection.selectionDefs&&!j.selectionDefs?(j.selectionDefs=J.selection.selectionDefs,j.mergedPolygons=J.selection.mergedPolygons):se&&J.selection||K(j),ne||(M(te),Y._lastSelectedSubplot=J.id)}function K(U){var te=U.dragmode,j=U.plotinfo,Y=U.gd;if(Y._fullLayout._activeShapeIndex>=0&&Y._fullLayout._deactivateShape(Y),h(te)){var J=Y._fullLayout._zoomlayer.selectAll(".select-outline-"+j.id);if(J&&Y._fullLayout._drawing){var ee=d(J,U);ee&&p.call("_guiRelayout",Y,{shapes:ee}),Y._fullLayout._drawing=!1}}j.selection={},j.selection.selectionDefs=U.selectionDefs=[],j.selection.mergedPolygons=U.mergedPolygons=[]}function Z(U,te,j,Y){var J,ee,ne,se=[],oe=te.map(function(we){return we._id}),he=j.map(function(we){return we._id});for(ne=0;ne<U.calcdata.length;ne++)if((ee=(J=U.calcdata[ne])[0].trace).visible===!0&&ee._module&&ee._module.selectPoints)if(!Y||ee.subplot!==Y&&ee.geo!==Y)if(ee.type==="splom"&&ee._xaxes[oe[0]]&&ee._yaxes[he[0]]){var le=xe(ee._module,J,te[0],j[0]);le.scene=U._fullLayout._splomScenes[ee.uid],se.push(le)}else if(ee.type==="sankey"){var de=xe(ee._module,J,te[0],j[0]);se.push(de)}else{if(oe.indexOf(ee.xaxis)===-1||he.indexOf(ee.yaxis)===-1)continue;se.push(xe(ee._module,J,b(U,ee.xaxis),b(U,ee.yaxis)))}else se.push(xe(ee._module,J,te[0],j[0]));return se;function xe(we,be,Ae,fe){return{_module:we,cd:be,xaxis:Ae,yaxis:fe}}}function $(U){var te=U.searchInfo.cd[0].trace,j=U.pointNumber,Y=U.pointNumbers,J=Y.length>0?Y[0]:j;return!!te.selectedpoints&&te.selectedpoints.indexOf(J)>-1}function re(U,te,j){var Y,J,ee,ne;for(Y=0;Y<te.length;Y++){var se=te[Y].cd[0].trace._fullInput,oe=U._fullLayout._tracePreGUI[se.uid]||{};oe.selectedpoints===void 0&&(oe.selectedpoints=se._input.selectedpoints||null)}if(j){var he=j.points||[];for(Y=0;Y<te.length;Y++)(ne=te[Y].cd[0].trace)._input.selectedpoints=ne._fullInput.selectedpoints=[],ne._fullInput!==ne&&(ne.selectedpoints=[]);for(Y=0;Y<he.length;Y++){var le=he[Y],de=le.data,xe=le.fullData;le.pointIndices?([].push.apply(de.selectedpoints,le.pointIndices),ne._fullInput!==ne&&[].push.apply(xe.selectedpoints,le.pointIndices)):(de.selectedpoints.push(le.pointIndex),ne._fullInput!==ne&&xe.selectedpoints.push(le.pointIndex))}}else for(Y=0;Y<te.length;Y++)delete(ne=te[Y].cd[0].trace).selectedpoints,delete ne._input.selectedpoints,ne._fullInput!==ne&&delete ne._fullInput.selectedpoints;var we=!1;for(Y=0;Y<te.length;Y++){ne=(ee=(J=te[Y]).cd)[0].trace,p.traceIs(ne,"regl")&&(we=!0);var be=J._module,Ae=be.styleOnSelect||be.style;Ae&&(Ae(U,ee,ee[0].node3),ee[0].nodeRangePlot3&&Ae(U,ee,ee[0].nodeRangePlot3))}we&&(g(U),w(U))}function R(U,te){if(Array.isArray(U))for(var j=te.cd,Y=te.cd[0].trace,J=0;J<U.length;J++)U[J]=r(U[J],Y,j);return U}function N(U,te){for(var j=[],Y=0;Y<U.length;Y++){j[Y]=[];for(var J=0;J<U[Y].length;J++){j[Y][J]=[],j[Y][J][0]=J?"L":"M";for(var ee=0;ee<U[Y][J].length;ee++)j[Y][J].push(U[Y][J][ee])}te||j[Y].push(["Z",j[Y][0][1],j[Y][0][2]])}return j}q.exports={prepSelect:function(U,te,j,Y,J){var ee=i(J),ne=n(J),se=s(J),oe=h(J),he=a(J),le=J==="drawcircle",de=J==="drawline"||le,xe=Y.gd,we=xe._fullLayout,be=we._zoomlayer,Ae=Y.element.getBoundingClientRect(),fe=Y.plotinfo,me=E(fe),ke=te-Ae.left,Te=j-Ae.top;we._calcInverseTransform(xe);var Me=v.apply3DTransform(we._invTransform)(ke,Te);ke=Me[0],Te=Me[1];var Oe,Fe,qe,et,ze,Ue,We,Ze=we._invScaleX,nt=we._invScaleY,ft=ke,xt=Te,It="M"+ke+","+Te,Et=Y.xaxes[0]._length,it=Y.yaxes[0]._length,rt=Y.xaxes.concat(Y.yaxes),At=U.altKey&&!(h(J)&&se);Q(U,xe,Y),ee&&(Oe=k([[ke,Te]],_.BENDPX));var Gt=be.selectAll("path.select-outline-"+fe.id).data(oe?[0]:[1,2]),Qt=we.newshape;Gt.enter().append("path").attr("class",function(De){return"select-outline select-outline-"+De+" select-outline-"+fe.id}).style(oe?{opacity:Qt.opacity/2,fill:se?void 0:Qt.fillcolor,stroke:Qt.line.color,"stroke-dasharray":x(Qt.line.dash,Qt.line.width),"stroke-width":Qt.line.width+"px"}:{}).attr("fill-rule",Qt.fillrule).classed("cursor-move",!!oe).attr("transform",me).attr("d",It+"Z");var Ve,Ye=be.append("path").attr("class","zoombox-corners").style({fill:y.background,stroke:y.defaultLine,"stroke-width":1}).attr("transform",me).attr("d","M0,0Z"),Be=we._uid+_.SELECTID,Je=[],Se=Z(xe,Y.xaxes,Y.yaxes,Y.subplot);function Pe(De,Ie){return De-Ie}Ve=fe.fillRangeItems?fe.fillRangeItems:ne?function(De,Ie){var $e=De.range={};for(ze=0;ze<rt.length;ze++){var st=rt[ze],dt=st._id.charAt(0);$e[st._id]=[P(st,Ie[dt+"min"]),P(st,Ie[dt+"max"])].sort(Pe)}}:function(De,Ie,$e){var st=De.lassoPoints={};for(ze=0;ze<rt.length;ze++){var dt=rt[ze];st[dt._id]=$e.filtered.map(S(dt))}},Y.moveFn=function(De,Ie){ft=Math.max(0,Math.min(Et,Ze*De+ke)),xt=Math.max(0,Math.min(it,nt*Ie+Te));var $e=Math.abs(ft-ke),st=Math.abs(xt-Te);if(ne){var dt,ut,Lt;if(he){var lt=we.selectdirection;switch(dt=lt==="any"?st<Math.min(.6*$e,T)?"h":$e<Math.min(.6*st,T)?"v":"d":lt){case"h":ut=le?it/2:0,Lt=it;break;case"v":ut=le?Et/2:0,Lt=Et}}if(oe)switch(we.newshape.drawdirection){case"vertical":dt="h",ut=le?it/2:0,Lt=it;break;case"horizontal":dt="v",ut=le?Et/2:0,Lt=Et;break;case"ortho":$e<st?(dt="h",ut=Te,Lt=xt):(dt="v",ut=ke,Lt=ft);break;default:dt="d"}dt==="h"?((et=de?f(le,[ft,ut],[ft,Lt]):[[ke,ut],[ke,Lt],[ft,Lt],[ft,ut]]).xmin=de?ft:Math.min(ke,ft),et.xmax=de?ft:Math.max(ke,ft),et.ymin=Math.min(ut,Lt),et.ymax=Math.max(ut,Lt),Ye.attr("d","M"+et.xmin+","+(Te-T)+"h-4v"+2*T+"h4ZM"+(et.xmax-1)+","+(Te-T)+"h4v"+2*T+"h-4Z")):dt==="v"?((et=de?f(le,[ut,xt],[Lt,xt]):[[ut,Te],[ut,xt],[Lt,xt],[Lt,Te]]).xmin=Math.min(ut,Lt),et.xmax=Math.max(ut,Lt),et.ymin=de?xt:Math.min(Te,xt),et.ymax=de?xt:Math.max(Te,xt),Ye.attr("d","M"+(ke-T)+","+et.ymin+"v-4h"+2*T+"v4ZM"+(ke-T)+","+(et.ymax-1)+"v4h"+2*T+"v-4Z")):dt==="d"&&((et=de?f(le,[ke,Te],[ft,xt]):[[ke,Te],[ke,xt],[ft,xt],[ft,Te]]).xmin=Math.min(ke,ft),et.xmax=Math.max(ke,ft),et.ymin=Math.min(Te,xt),et.ymax=Math.max(Te,xt),Ye.attr("d","M0,0Z"))}else ee&&(Oe.addPt([ft,xt]),et=Oe.filtered);Y.selectionDefs&&Y.selectionDefs.length?(qe=function(Ct,Pt,Ke){return Ke?o.difference({regions:Ct,inverted:!1},{regions:[Pt],inverted:!1}).regions:o.union({regions:Ct,inverted:!1},{regions:[Pt],inverted:!1}).regions}(Y.mergedPolygons,et,At),et.subtract=At,Fe=V(Y.selectionDefs.concat([et]))):(qe=[et],Fe=L(et)),l(N(qe,se),Gt,Y),he&&c.throttle(Be,_.SELECTDELAY,function(){var Ct;Je=[];var Pt;for(ze=0;ze<Se.length;ze++)if(Pt=(Ue=Se[ze])._module.selectPoints(Ue,Fe),Ct=R(Pt,Ue),Je.length)for(var Ke=0;Ke<Ct.length;Ke++)Je.push(Ct[Ke]);else Je=Ct;re(xe,Se,We={points:Je}),Ve(We,et,Oe),Y.gd.emit("plotly_selecting",We)})},Y.clickFn=function(De,Ie){if(Ye.remove(),xe._fullLayout._activeShapeIndex>=0)xe._fullLayout._deactivateShape(xe);else if(!oe){var $e=we.clickmode;c.done(Be).then(function(){if(c.clear(Be),De===2){for(Gt.remove(),ze=0;ze<Se.length;ze++)(Ue=Se[ze])._module.selectPoints(Ue,!1);re(xe,Se),K(Y),xe.emit("plotly_deselect",null)}else $e.indexOf("select")>-1&&D(Ie,xe,Y.xaxes,Y.yaxes,Y.subplot,Y,Gt),$e==="event"&&xe.emit("plotly_selected",void 0);e.click(xe,Ie)}).catch(v.error)}},Y.doneFn=function(){Ye.remove(),c.done(Be).then(function(){c.clear(Be),Y.gd.emit("plotly_selected",We),et&&Y.selectionDefs&&(et.subtract=At,Y.selectionDefs.push(et),Y.mergedPolygons.length=0,[].push.apply(Y.mergedPolygons,qe)),Y.doneFnCompleted&&Y.doneFnCompleted(Je)}).catch(v.error),oe&&K(Y)}},clearSelect:M,clearSelectionsCache:K,selectOnClick:D}},{"../../components/color":366,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/fx/helpers":402,"../../components/shapes/draw_newshape/display_outlines":454,"../../components/shapes/draw_newshape/helpers":455,"../../components/shapes/draw_newshape/newshapes":456,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/polygon":515,"../../lib/throttle":530,"../../plot_api/subroutines":544,"../../registry":638,"./axis_ids":558,"./constants":561,"./handle_outline":565,"./helpers":566,polybooljs:254}],576:[function(u,q,W){var o=u("@plotly/d3"),p=u("d3-time-format").utcFormat,x=u("../../lib"),y=x.numberFormat,e=u("fast-isnumeric"),r=x.cleanNumber,t=x.ms2DateTime,i=x.dateTime2ms,n=x.ensureNumber,h=x.isArrayOrTypedArray,s=u("../../constants/numerical"),a=s.FP_SAFE,l=s.BADNUM,f=s.LOG_CLIP,d=s.ONEWEEK,v=s.ONEDAY,m=s.ONEHOUR,c=s.ONEMIN,b=s.ONESEC,g=u("./axis_ids"),w=u("./constants"),_=w.HOUR_PATTERN,T=w.WEEKDAY_PATTERN;function k(M){return Math.pow(10,M)}function L(M){return M!=null}q.exports=function(M,I){I=I||{};var P=M._id||"x",S=P.charAt(0);function E(j,Y){if(j>0)return Math.log(j)/Math.LN10;if(j<=0&&Y&&M.range&&M.range.length===2){var J=M.range[0],ee=M.range[1];return .5*(J+ee-2*f*Math.abs(J-ee))}return l}function D(j,Y,J,ee){if((ee||{}).msUTC&&e(j))return+j;var ne=i(j,J||M.calendar);if(ne===l){if(!e(j))return l;j=+j;var se=Math.floor(10*x.mod(j+.05,1)),oe=Math.round(j-se/10);ne=i(new Date(oe))+se/10}return ne}function F(j,Y,J){return t(j,Y,J||M.calendar)}function H(j){return M._categories[Math.round(j)]}function V(j){if(L(j)){if(M._categoriesMap===void 0&&(M._categoriesMap={}),M._categoriesMap[j]!==void 0)return M._categoriesMap[j];M._categories.push(typeof j=="number"?String(j):j);var Y=M._categories.length-1;return M._categoriesMap[j]=Y,Y}return l}function Q(j){if(M._categoriesMap)return M._categoriesMap[j]}function K(j){var Y=Q(j);return Y!==void 0?Y:e(j)?+j:void 0}function Z(j){return e(j)?+j:Q(j)}function $(j,Y,J){return o.round(J+Y*j,2)}function re(j,Y,J){return(j-J)/Y}var R=function(j){return e(j)?$(j,M._m,M._b):l},N=function(j){return re(j,M._m,M._b)};if(M.rangebreaks){var U=S==="y";R=function(j){if(!e(j))return l;var Y=M._rangebreaks.length;if(!Y)return $(j,M._m,M._b);var J=U;M.range[0]>M.range[1]&&(J=!J);for(var ee=J?-1:1,ne=ee*j,se=0,oe=0;oe<Y;oe++){var he=ee*M._rangebreaks[oe].min,le=ee*M._rangebreaks[oe].max;if(ne<he)break;if(!(ne>le)){se=ne<(he+le)/2?oe:oe+1;break}se=oe+1}var de=M._B[se]||0;return isFinite(de)?$(j,M._m2,de):0},N=function(j){var Y=M._rangebreaks.length;if(!Y)return re(j,M._m,M._b);for(var J=0,ee=0;ee<Y&&!(j<M._rangebreaks[ee].pmin);ee++)j>M._rangebreaks[ee].pmax&&(J=ee+1);return re(j,M._m2,M._B[J])}}M.c2l=M.type==="log"?E:n,M.l2c=M.type==="log"?k:n,M.l2p=R,M.p2l=N,M.c2p=M.type==="log"?function(j,Y){return R(E(j,Y))}:R,M.p2c=M.type==="log"?function(j){return k(N(j))}:N,["linear","-"].indexOf(M.type)!==-1?(M.d2r=M.r2d=M.d2c=M.r2c=M.d2l=M.r2l=r,M.c2d=M.c2r=M.l2d=M.l2r=n,M.d2p=M.r2p=function(j){return M.l2p(r(j))},M.p2d=M.p2r=N,M.cleanPos=n):M.type==="log"?(M.d2r=M.d2l=function(j,Y){return E(r(j),Y)},M.r2d=M.r2c=function(j){return k(r(j))},M.d2c=M.r2l=r,M.c2d=M.l2r=n,M.c2r=E,M.l2d=k,M.d2p=function(j,Y){return M.l2p(M.d2r(j,Y))},M.p2d=function(j){return k(N(j))},M.r2p=function(j){return M.l2p(r(j))},M.p2r=N,M.cleanPos=n):M.type==="date"?(M.d2r=M.r2d=x.identity,M.d2c=M.r2c=M.d2l=M.r2l=D,M.c2d=M.c2r=M.l2d=M.l2r=F,M.d2p=M.r2p=function(j,Y,J){return M.l2p(D(j,0,J))},M.p2d=M.p2r=function(j,Y,J){return F(N(j),Y,J)},M.cleanPos=function(j){return x.cleanDate(j,l,M.calendar)}):M.type==="category"?(M.d2c=M.d2l=V,M.r2d=M.c2d=M.l2d=H,M.d2r=M.d2l_noadd=K,M.r2c=function(j){var Y=Z(j);return Y!==void 0?Y:M.fraction2r(.5)},M.l2r=M.c2r=n,M.r2l=Z,M.d2p=function(j){return M.l2p(M.r2c(j))},M.p2d=function(j){return H(N(j))},M.r2p=M.d2p,M.p2r=N,M.cleanPos=function(j){return typeof j=="string"&&j!==""?j:n(j)}):M.type==="multicategory"&&(M.r2d=M.c2d=M.l2d=H,M.d2r=M.d2l_noadd=K,M.r2c=function(j){var Y=K(j);return Y!==void 0?Y:M.fraction2r(.5)},M.r2c_just_indices=Q,M.l2r=M.c2r=n,M.r2l=K,M.d2p=function(j){return M.l2p(M.r2c(j))},M.p2d=function(j){return H(N(j))},M.r2p=M.d2p,M.p2r=N,M.cleanPos=function(j){return Array.isArray(j)||typeof j=="string"&&j!==""?j:n(j)},M.setupMultiCategory=function(j){var Y,J,ee=M._traceIndices,ne=M._matchGroup;if(ne&&M._categories.length===0){for(var se in ne)if(se!==P){var oe=I[g.id2name(se)];ee=ee.concat(oe._traceIndices)}}var he=[[0,{}],[0,{}]],le=[];for(Y=0;Y<ee.length;Y++){var de=j[ee[Y]];if(S in de){var xe=de[S],we=de._length||x.minRowLength(xe);if(h(xe[0])&&h(xe[1]))for(J=0;J<we;J++){var be=xe[0][J],Ae=xe[1][J];L(be)&&L(Ae)&&(le.push([be,Ae]),be in he[0][1]||(he[0][1][be]=he[0][0]++),Ae in he[1][1]||(he[1][1][Ae]=he[1][0]++))}}}for(le.sort(function(fe,me){var ke=he[0][1],Te=ke[fe[0]]-ke[me[0]];if(Te)return Te;var Me=he[1][1];return Me[fe[1]]-Me[me[1]]}),Y=0;Y<le.length;Y++)V(le[Y])}),M.fraction2r=function(j){var Y=M.r2l(M.range[0]),J=M.r2l(M.range[1]);return M.l2r(Y+j*(J-Y))},M.r2fraction=function(j){var Y=M.r2l(M.range[0]),J=M.r2l(M.range[1]);return(M.r2l(j)-Y)/(J-Y)},M.cleanRange=function(j,Y){Y||(Y={}),j||(j="range");var J,ee,ne=x.nestedProperty(M,j).get();if(ee=(ee=M.type==="date"?x.dfltRange(M.calendar):S==="y"?w.DFLTRANGEY:M._name==="realaxis"?[0,1]:Y.dfltRange||w.DFLTRANGEX).slice(),M.rangemode!=="tozero"&&M.rangemode!=="nonnegative"||(ee[0]=0),ne&&ne.length===2)for(M.type!=="date"||M.autorange||(ne[0]=x.cleanDate(ne[0],l,M.calendar),ne[1]=x.cleanDate(ne[1],l,M.calendar)),J=0;J<2;J++)if(M.type==="date"){if(!x.isDateTime(ne[J],M.calendar)){M[j]=ee;break}if(M.r2l(ne[0])===M.r2l(ne[1])){var se=x.constrain(M.r2l(ne[0]),x.MIN_MS+1e3,x.MAX_MS-1e3);ne[0]=M.l2r(se-1e3),ne[1]=M.l2r(se+1e3);break}}else{if(!e(ne[J])){if(!e(ne[1-J])){M[j]=ee;break}ne[J]=ne[1-J]*(J?10:.1)}if(ne[J]<-a?ne[J]=-a:ne[J]>a&&(ne[J]=a),ne[0]===ne[1]){var oe=Math.max(1,Math.abs(1e-6*ne[0]));ne[0]-=oe,ne[1]+=oe}}else x.nestedProperty(M,j).set(ee)},M.setScale=function(j){var Y=I._size;if(M.overlaying){var J=g.getFromId({_fullLayout:I},M.overlaying);M.domain=J.domain}var ee=j&&M._r?"_r":"range",ne=M.calendar;M.cleanRange(ee);var se,oe,he=M.r2l(M[ee][0],ne),le=M.r2l(M[ee][1],ne),de=S==="y";if(de?(M._offset=Y.t+(1-M.domain[1])*Y.h,M._length=Y.h*(M.domain[1]-M.domain[0]),M._m=M._length/(he-le),M._b=-M._m*le):(M._offset=Y.l+M.domain[0]*Y.w,M._length=Y.w*(M.domain[1]-M.domain[0]),M._m=M._length/(le-he),M._b=-M._m*he),M._rangebreaks=[],M._lBreaks=0,M._m2=0,M._B=[],M.rangebreaks&&(M._rangebreaks=M.locateBreaks(Math.min(he,le),Math.max(he,le)),M._rangebreaks.length)){for(se=0;se<M._rangebreaks.length;se++)oe=M._rangebreaks[se],M._lBreaks+=Math.abs(oe.max-oe.min);var xe=de;he>le&&(xe=!xe),xe&&M._rangebreaks.reverse();var we=xe?-1:1;for(M._m2=we*M._length/(Math.abs(le-he)-M._lBreaks),M._B.push(-M._m2*(de?le:he)),se=0;se<M._rangebreaks.length;se++)oe=M._rangebreaks[se],M._B.push(M._B[M._B.length-1]-we*M._m2*(oe.max-oe.min));for(se=0;se<M._rangebreaks.length;se++)(oe=M._rangebreaks[se]).pmin=R(oe.min),oe.pmax=R(oe.max)}if(!isFinite(M._m)||!isFinite(M._b)||M._length<0)throw I._replotting=!1,new Error("Something went wrong with axis scaling")},M.maskBreaks=function(j){var Y,J,ee,ne,se,oe=M.rangebreaks||[];oe._cachedPatterns||(oe._cachedPatterns=oe.map(function(be){return be.enabled&&be.bounds?x.simpleMap(be.bounds,be.pattern?r:M.d2c):null})),oe._cachedValues||(oe._cachedValues=oe.map(function(be){return be.enabled&&be.values?x.simpleMap(be.values,M.d2c).sort(x.sorterAsc):null}));for(var he=0;he<oe.length;he++){var le=oe[he];if(le.enabled){if(le.bounds){var de=le.pattern;switch(J=(Y=oe._cachedPatterns[he])[0],ee=Y[1],de){case T:ne=(se=new Date(j)).getUTCDay(),J>ee&&(ee+=7,ne<J&&(ne+=7));break;case _:ne=(se=new Date(j)).getUTCHours()+(se.getUTCMinutes()/60+se.getUTCSeconds()/3600+se.getUTCMilliseconds()/36e5),J>ee&&(ee+=24,ne<J&&(ne+=24));break;case"":ne=j}if(ne>=J&&ne<ee)return l}else for(var xe=oe._cachedValues[he],we=0;we<xe.length;we++)if(ee=(J=xe[we])+le.dvalue,j>=J&&j<ee)return l}}return j},M.locateBreaks=function(j,Y){var J,ee,ne,se,oe=[];if(!M.rangebreaks)return oe;var he=M.rangebreaks.slice().sort(function(Me,Oe){return Me.pattern===T&&Oe.pattern===_?-1:Oe.pattern===T&&Me.pattern===_?1:0}),le=function(Me,Oe){if((Me=x.constrain(Me,j,Y))!==(Oe=x.constrain(Oe,j,Y))){for(var Fe=!0,qe=0;qe<oe.length;qe++){var et=oe[qe];Me<et.max&&Oe>=et.min&&(Me<et.min&&(et.min=Me),Oe>et.max&&(et.max=Oe),Fe=!1)}Fe&&oe.push({min:Me,max:Oe})}};for(J=0;J<he.length;J++){var de=he[J];if(de.enabled)if(de.bounds){var xe=j,we=Y;de.pattern&&(xe=Math.floor(xe)),ne=(ee=x.simpleMap(de.bounds,de.pattern?r:M.r2l))[0],se=ee[1];var be,Ae,fe=new Date(xe);switch(de.pattern){case T:Ae=d,be=(se-ne+(se<ne?7:0))*v,xe+=ne*v-(fe.getUTCDay()*v+fe.getUTCHours()*m+fe.getUTCMinutes()*c+fe.getUTCSeconds()*b+fe.getUTCMilliseconds());break;case _:Ae=v,be=(se-ne+(se<ne?24:0))*m,xe+=ne*m-(fe.getUTCHours()*m+fe.getUTCMinutes()*c+fe.getUTCSeconds()*b+fe.getUTCMilliseconds());break;default:xe=Math.min(ee[0],ee[1]),be=Ae=(we=Math.max(ee[0],ee[1]))-xe}for(var me=xe;me<we;me+=Ae)le(me,me+be)}else for(var ke=x.simpleMap(de.values,M.d2c),Te=0;Te<ke.length;Te++)le(ne=ke[Te],se=ne+de.dvalue)}return oe.sort(function(Me,Oe){return Me.min-Oe.min}),oe},M.makeCalcdata=function(j,Y,J){var ee,ne,se,oe,he=M.type,le=he==="date"&&j[Y+"calendar"];if(Y in j){if(ee=j[Y],oe=j._length||x.minRowLength(ee),x.isTypedArray(ee)&&(he==="linear"||he==="log")){if(oe===ee.length)return ee;if(ee.subarray)return ee.subarray(0,oe)}if(he==="multicategory")return function(we,be){for(var Ae=new Array(be),fe=0;fe<be;fe++){var me=(we[0]||[])[fe],ke=(we[1]||[])[fe];Ae[fe]=Q([me,ke])}return Ae}(ee,oe);for(ne=new Array(oe),se=0;se<oe;se++)ne[se]=M.d2c(ee[se],0,le,J)}else{var de=Y+"0"in j?M.d2c(j[Y+"0"],0,le):0,xe=j["d"+Y]?Number(j["d"+Y]):1;for(ee=j[{x:"y",y:"x"}[Y]],oe=j._length||ee.length,ne=new Array(oe),se=0;se<oe;se++)ne[se]=de+se*xe}if(M.rangebreaks)for(se=0;se<oe;se++)ne[se]=M.maskBreaks(ne[se]);return ne},M.isValidRange=function(j){return Array.isArray(j)&&j.length===2&&e(M.r2l(j[0]))&&e(M.r2l(j[1]))},M.isPtWithinRange=function(j,Y){var J=M.c2l(j[S],null,Y),ee=M.r2l(M.range[0]),ne=M.r2l(M.range[1]);return ee<ne?ee<=J&&J<=ne:ne<=J&&J<=ee},M._emptyCategories=function(){M._categories=[],M._categoriesMap={}},M.clearCalc=function(){var j=M._matchGroup;if(j){var Y=null,J=null;for(var ee in j){var ne=I[g.id2name(ee)];if(ne._categories){Y=ne._categories,J=ne._categoriesMap;break}}Y&&J?(M._categories=Y,M._categoriesMap=J):M._emptyCategories()}else M._emptyCategories();if(M._initialCategories)for(var se=0;se<M._initialCategories.length;se++)V(M._initialCategories[se])},M.sortByInitialCategories=function(){var j=[];if(M._emptyCategories(),M._initialCategories)for(var Y=0;Y<M._initialCategories.length;Y++)V(M._initialCategories[Y]);j=j.concat(M._traceIndices);var J=M._matchGroup;for(var ee in J)if(P!==ee){var ne=I[g.id2name(ee)];ne._categories=M._categories,ne._categoriesMap=M._categoriesMap,j=j.concat(ne._traceIndices)}return j};var te=I._d3locale;M.type==="date"&&(M._dateFormat=te?te.timeFormat:p,M._extraFormat=I._extraFormat),M._separators=I.separators,M._numFormat=te?te.numberFormat:y,delete M._minDtick,delete M._forceTick0}},{"../../constants/numerical":479,"../../lib":503,"./axis_ids":558,"./constants":561,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],577:[function(u,q,W){q.exports=function(o){var p=["showexponent","showtickprefix","showticksuffix"].filter(function(x){return o[x]!==void 0});if(p.every(function(x){return o[x]===o[p[0]]})||p.length===1)return o[p[0]]}},{}],578:[function(u,q,W){var o=u("../../lib"),p=u("../../components/color").contrast,x=u("./layout_attributes"),y=u("./show_dflt"),e=u("../array_container_defaults");function r(t,i){function n(h,s){return o.coerce(t,i,x.tickformatstops,h,s)}n("enabled")&&(n("dtickrange"),n("value"))}q.exports=function(t,i,n,h,s){s||(s={});var a=y(t);if(n("showticklabels")){var l=s.font||{},f=i.color,d=(i.ticklabelposition||"").indexOf("inside")!==-1?p(s.bgColor):f&&f!==x.color.dflt?f:l.color;if(o.coerceFont(n,"tickfont",{family:l.family,size:l.size,color:d}),s.noAng||n("tickangle"),h!=="category"){var v=n("tickformat");e(t,i,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:r}),i.tickformatstops.length||delete i.tickformatstops,s.noExp||v||h==="date"||(n("showexponent",a),n("exponentformat"),n("minexponent"),n("separatethousands"))}}}},{"../../components/color":366,"../../lib":503,"../array_container_defaults":549,"./layout_attributes":569,"./show_dflt":577}],579:[function(u,q,W){var o=u("../../lib"),p=u("./layout_attributes");q.exports=function(x,y,e,r){var t=o.coerce2(x,y,p,"ticklen"),i=o.coerce2(x,y,p,"tickwidth"),n=o.coerce2(x,y,p,"tickcolor",y.color);e("ticks",r.outerTicks||t||i||n?"outside":"")||(delete y.ticklen,delete y.tickwidth,delete y.tickcolor)}},{"../../lib":503,"./layout_attributes":569}],580:[function(u,q,W){var o=u("./clean_ticks"),p=u("../../lib").isArrayOrTypedArray;q.exports=function(x,y,e,r){function t(l){var f=x[l];return f!==void 0?f:(y._template||{})[l]}var i=t("tick0"),n=t("dtick"),h=t("tickvals"),s=e("tickmode",p(h)?"array":n?"linear":"auto");if(s==="auto")e("nticks");else if(s==="linear"){var a=y.dtick=o.dtick(n,r);y.tick0=o.tick0(i,r,y.calendar,a)}else r!=="multicategory"&&(e("tickvals")===void 0?y.tickmode="auto":e("ticktext"))}},{"../../lib":503,"./clean_ticks":560}],581:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../registry"),x=u("../../lib"),y=u("../../components/drawing"),e=u("./axes");q.exports=function(r,t,i,n){var h=r._fullLayout;if(t.length!==0){var s,a,l,f;n&&(s=n());var d=o.ease(i.easing);return r._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(f),f=null,function(){for(var c={},b=0;b<t.length;b++){var g=t[b],w=g.plotinfo.xaxis,_=g.plotinfo.yaxis;g.xr0&&(c[w._name+".range"]=g.xr0.slice()),g.yr0&&(c[_._name+".range"]=g.yr0.slice())}return p.call("relayout",r,c).then(function(){for(var T=0;T<t.length;T++)v(t[T].plotinfo)})}()}),a=Date.now(),f=window.requestAnimationFrame(function c(){l=Date.now();for(var b=Math.min(1,(l-a)/i.duration),g=d(b),w=0;w<t.length;w++)m(t[w],g);l-a>i.duration?(function(){for(var _={},T=0;T<t.length;T++){var k=t[T],L=k.plotinfo.xaxis,M=k.plotinfo.yaxis;k.xr1&&(_[L._name+".range"]=k.xr1.slice()),k.yr1&&(_[M._name+".range"]=k.yr1.slice())}s&&s(),p.call("relayout",r,_).then(function(){for(var I=0;I<t.length;I++)v(t[I].plotinfo)})}(),f=window.cancelAnimationFrame(c)):f=window.requestAnimationFrame(c)}),Promise.resolve()}function v(c){var b=c.xaxis,g=c.yaxis;h._defs.select("#"+c.clipId+"> rect").call(y.setTranslate,0,0).call(y.setScale,1,1),c.plot.call(y.setTranslate,b._offset,g._offset).call(y.setScale,1,1);var w=c.plot.selectAll(".scatterlayer .trace");w.selectAll(".point").call(y.setPointGroupScale,1,1),w.selectAll(".textpoint").call(y.setTextPointsScale,1,1),w.call(y.hideOutsideRangePoints,c)}function m(c,b){var g=c.plotinfo,w=g.xaxis,_=g.yaxis,T=w._length,k=_._length,L=!!c.xr1,M=!!c.yr1,I=[];if(L){var P=x.simpleMap(c.xr0,w.r2l),S=x.simpleMap(c.xr1,w.r2l),E=P[1]-P[0],D=S[1]-S[0];I[0]=(P[0]*(1-b)+b*S[0]-P[0])/(P[1]-P[0])*T,I[2]=T*(1-b+b*D/E),w.range[0]=w.l2r(P[0]*(1-b)+b*S[0]),w.range[1]=w.l2r(P[1]*(1-b)+b*S[1])}else I[0]=0,I[2]=T;if(M){var F=x.simpleMap(c.yr0,_.r2l),H=x.simpleMap(c.yr1,_.r2l),V=F[1]-F[0],Q=H[1]-H[0];I[1]=(F[1]*(1-b)+b*H[1]-F[1])/(F[0]-F[1])*k,I[3]=k*(1-b+b*Q/V),_.range[0]=w.l2r(F[0]*(1-b)+b*H[0]),_.range[1]=_.l2r(F[1]*(1-b)+b*H[1])}else I[1]=0,I[3]=k;e.drawOne(r,w,{skipTitle:!0}),e.drawOne(r,_,{skipTitle:!0}),e.redrawComponents(r,[w._id,_._id]);var K=L?T/I[2]:1,Z=M?k/I[3]:1,$=L?I[0]:0,re=M?I[1]:0,R=L?I[0]/I[2]*T:0,N=M?I[1]/I[3]*k:0,U=w._offset-R,te=_._offset-N;g.clipRect.call(y.setTranslate,$,re).call(y.setScale,1/K,1/Z),g.plot.call(y.setTranslate,U,te).call(y.setScale,K,Z),y.setPointGroupScale(g.zoomScalePts,1/K,1/Z),y.setTextPointsScale(g.zoomScaleTxt,1/K,1/Z)}e.redrawComponents(r)}},{"../../components/drawing":388,"../../lib":503,"../../registry":638,"./axes":554,"@plotly/d3":58}],582:[function(u,q,W){var o=u("../../registry").traceIs,p=u("./axis_autotype");function x(e){return{v:"x",h:"y"}[e.orientation||"v"]}function y(e,r){var t=x(e),i=o(e,"box-violin"),n=o(e._fullInput||{},"candlestick");return i&&!n&&r===t&&e[t]===void 0&&e[t+"0"]===void 0}q.exports=function(e,r,t,i){t("autotypenumbers",i.autotypenumbersDflt),t("type",(i.splomStash||{}).type)==="-"&&(function(n,h){if(n.type==="-"){var s,a=n._id,l=a.charAt(0);a.indexOf("scene")!==-1&&(a=l);var f=function(_,T,k){for(var L=0;L<_.length;L++){var M=_[L];if(M.type==="splom"&&M._length>0&&(M["_"+k+"axes"]||{})[T]||(M[k+"axis"]||k)===T&&(y(M,k)||(M[k]||[]).length||M[k+"0"]))return M}}(h,a,l);if(!!f){if(f.type==="histogram"&&l==={v:"y",h:"x"}[f.orientation||"v"])return void(n.type="linear");var d=l+"calendar",v=f[d],m={noMultiCategory:!o(f,"cartesian")||o(f,"noMultiCategory")};if(f.type==="box"&&f._hasPreCompStats&&l==={h:"x",v:"y"}[f.orientation||"v"]&&(m.noMultiCategory=!0),m.autotypenumbers=n.autotypenumbers,y(f,l)){var c=x(f),b=[];for(s=0;s<h.length;s++){var g=h[s];o(g,"box-violin")&&(g[l+"axis"]||l)===a&&(g[c]!==void 0?b.push(g[c][0]):g.name!==void 0?b.push(g.name):b.push("text"),g[d]!==v&&(v=void 0))}n.type=p(b,v,m)}else if(f.type==="splom"){var w=f.dimensions[f._axesDim[a]];w.visible&&(n.type=p(w.values,v,m))}else n.type=p(f[l]||[f[l+"0"]],v,m)}}}(r,i.data),r.type==="-"?r.type="linear":e.type=r.type)}},{"../../registry":638,"./axis_autotype":555}],583:[function(u,q,W){var o=u("../registry"),p=u("../lib");function x(t,i,n){var h,s,a,l=!1;if(i.type==="data")h=t._fullData[i.traces!==null?i.traces[0]:0];else{if(i.type!=="layout")return!1;h=t._fullLayout}return s=p.nestedProperty(h,i.prop).get(),(a=n[i.type]=n[i.type]||{}).hasOwnProperty(i.prop)&&a[i.prop]!==s&&(l=!0),a[i.prop]=s,{changed:l,value:s}}function y(t,i){var n=[],h=i[0],s={};if(typeof h=="string")s[h]=i[1];else{if(!p.isPlainObject(h))return n;s=h}return r(s,function(a,l,f){n.push({type:"layout",prop:a,value:f})},"",0),n}function e(t,i){var n,h,s,a,l=[];if(h=i[0],s=i[1],n=i[2],a={},typeof h=="string")a[h]=s;else{if(!p.isPlainObject(h))return l;a=h,n===void 0&&(n=s)}return n===void 0&&(n=null),r(a,function(f,d,v){var m,c;if(Array.isArray(v)){c=v.slice();var b=Math.min(c.length,t.data.length);n&&(b=Math.min(b,n.length)),m=[];for(var g=0;g<b;g++)m[g]=n?n[g]:g}else c=v,m=n?n.slice():null;if(m===null)Array.isArray(c)&&(c=c[0]);else if(Array.isArray(m)){if(!Array.isArray(c)){var w=c;c=[];for(var _=0;_<m.length;_++)c[_]=w}c.length=Math.min(m.length,c.length)}l.push({type:"data",prop:f,traces:m,value:c})},"",0),l}function r(t,i,n,h){Object.keys(t).forEach(function(s){var a=t[s];if(s[0]!=="_"){var l=n+(h>0?".":"")+s;p.isPlainObject(a)?r(a,i,l,h+1):i(l,s,a)}})}W.manageCommandObserver=function(t,i,n,h){var s={},a=!0;i&&i._commandObserver&&(s=i._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var l=W.hasSimpleAPICommandBindings(t,n,s.lookupTable);if(i&&i._commandObserver){if(l)return s;if(i._commandObserver.remove)return i._commandObserver.remove(),i._commandObserver=null,s}if(l){x(t,l,s.cache),s.check=function(){if(a){var v=x(t,l,s.cache);return v.changed&&h&&s.lookupTable[v.value]!==void 0&&(s.disable(),Promise.resolve(h({value:v.value,type:l.type,prop:l.prop,traces:l.traces,index:s.lookupTable[v.value]})).then(s.enable,s.enable)),v.changed}};for(var f=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],d=0;d<f.length;d++)t._internalOn(f[d],s.check);s.remove=function(){for(var v=0;v<f.length;v++)t._removeInternalListener(f[v],s.check)}}else p.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){a=!1},s.enable=function(){a=!0},i&&(i._commandObserver=s),s},W.hasSimpleAPICommandBindings=function(t,i,n){var h,s,a=i.length;for(h=0;h<a;h++){var l,f=i[h],d=f.method,v=f.args;if(Array.isArray(v)||(v=[]),!d)return!1;var m=W.computeAPICommandBindings(t,d,v);if(m.length!==1)return!1;if(s){if((l=m[0]).type!==s.type||l.prop!==s.prop)return!1;if(Array.isArray(s.traces)){if(!Array.isArray(l.traces))return!1;l.traces.sort();for(var c=0;c<s.traces.length;c++)if(s.traces[c]!==l.traces[c])return!1}else if(l.prop!==s.prop)return!1}else s=m[0],Array.isArray(s.traces)&&s.traces.sort();var b=(l=m[0]).value;if(Array.isArray(b)){if(b.length!==1)return!1;b=b[0]}n&&(n[b]=h)}return s},W.executeAPICommand=function(t,i,n){if(i==="skip")return Promise.resolve();var h=o.apiMethodRegistry[i],s=[t];Array.isArray(n)||(n=[]);for(var a=0;a<n.length;a++)s.push(n[a]);return h.apply(null,s).catch(function(l){return p.warn("API call to Plotly."+i+" rejected.",l),Promise.reject(l)})},W.computeAPICommandBindings=function(t,i,n){var h;switch(Array.isArray(n)||(n=[]),i){case"restyle":h=e(t,n);break;case"relayout":h=y(t,n);break;case"update":h=e(t,[n[0],n[2]]).concat(y(t,[n[1]]));break;case"animate":h=function(s,a){return Array.isArray(a[0])&&a[0].length===1&&["string","number"].indexOf(typeof a[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:a[0][0].toString()}]:[]}(0,n);break;default:h=[]}return h}},{"../lib":503,"../registry":638}],584:[function(u,q,W){var o=u("../lib/extend").extendFlat;W.attributes=function(p,x){x=x||{};var y={valType:"info_array",editType:(p=p||{}).editType,items:[{valType:"number",min:0,max:1,editType:p.editType},{valType:"number",min:0,max:1,editType:p.editType}],dflt:[0,1]},e=(p.name&&p.name,p.trace,x.description&&x.description,{x:o({},y,{}),y:o({},y,{}),editType:p.editType});return p.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:p.editType},e.column={valType:"integer",min:0,dflt:0,editType:p.editType}),e},W.defaults=function(p,x,y,e){var r=e&&e.x||[0,1],t=e&&e.y||[0,1],i=x.grid;if(i){var n=y("domain.column");n!==void 0&&(n<i.columns?r=i._domains.x[n]:delete p.domain.column);var h=y("domain.row");h!==void 0&&(h<i.rows?t=i._domains.y[h]:delete p.domain.row)}var s=y("domain.x",r),a=y("domain.y",t);s[0]<s[1]||(p.domain.x=r.slice()),a[0]<a[1]||(p.domain.y=t.slice())}},{"../lib/extend":493}],585:[function(u,q,W){q.exports=function(o){var p=o.editType,x=o.colorEditType;x===void 0&&(x=p);var y={family:{valType:"string",noBlank:!0,strict:!0,editType:p},size:{valType:"number",min:1,editType:p},color:{valType:"color",editType:x},editType:p};return o.autoSize&&(y.size.dflt="auto"),o.autoColor&&(y.color.dflt="auto"),o.arrayOk&&(y.family.arrayOk=!0,y.size.arrayOk=!0,y.color.arrayOk=!0),y}},{}],586:[function(u,q,W){q.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],587:[function(u,q,W){W.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},W.axesNames=["lonaxis","lataxis"],W.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},W.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},W.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},W.clipPad=.001,W.precision=.1,W.landColor="#F0DC82",W.waterColor="#3399FF",W.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},W.sphereSVG={type:"Sphere"},W.fillLayers={ocean:1,land:1,lakes:1},W.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},W.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],W.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],W.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],588:[function(u,q,W){var o=u("@plotly/d3"),p=u("d3-geo"),x=p.geoPath,y=p.geoDistance,e=u("d3-geo-projection"),r=u("../../registry"),t=u("../../lib"),i=t.strTranslate,n=u("../../components/color"),h=u("../../components/drawing"),s=u("../../components/fx"),a=u("../plots"),l=u("../cartesian/axes"),f=u("../cartesian/autorange").getAutoRange,d=u("../../components/dragelement"),v=u("../cartesian/select").prepSelect,m=u("../cartesian/select").clearSelect,c=u("../cartesian/select").selectOnClick,b=u("./zoom"),g=u("./constants"),w=u("../../lib/geo_location_utils"),_=u("../../lib/topojson_utils"),T=u("topojson-client").feature;function k(I){this.id=I.id,this.graphDiv=I.graphDiv,this.container=I.container,this.topojsonURL=I.topojsonURL,this.isStatic=I.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var L=k.prototype;function M(I,P){var S=g.clipPad,E=I[0]+S,D=I[1]-S,F=P[0]+S,H=P[1]-S;E>0&&D<0&&(D+=360);var V=(D-E)/4;return{type:"Polygon",coordinates:[[[E,F],[E,H],[E+V,H],[E+2*V,H],[E+3*V,H],[D,H],[D,F],[D-V,F],[D-2*V,F],[D-3*V,F],[E,F]]]}}q.exports=function(I){return new k(I)},L.plot=function(I,P,S){var E=this,D=P[this.id],F=[],H=!1;for(var V in g.layerNameToAdjective)if(V!=="frame"&&D["show"+V]){H=!0;break}for(var Q=0;Q<I.length;Q++)if(I[0][0].trace.locationmode){H=!0;break}if(H){var K=_.getTopojsonName(D);E.topojson!==null&&K===E.topojsonName||(E.topojsonName=K,PlotlyGeoAssets.topojson[E.topojsonName]===void 0&&F.push(E.fetchTopojson()))}F=F.concat(w.fetchTraceGeoData(I)),S.push(new Promise(function(Z,$){Promise.all(F).then(function(){E.topojson=PlotlyGeoAssets.topojson[E.topojsonName],E.update(I,P),Z()}).catch($)}))},L.fetchTopojson=function(){var I=this,P=_.getTopojsonPath(I.topojsonURL,I.topojsonName);return new Promise(function(S,E){o.json(P,function(D,F){if(D)return D.status===404?E(new Error(["plotly.js could not find topojson file at",P,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):E(new Error(["unexpected error while fetching topojson file at",P].join(" ")));PlotlyGeoAssets.topojson[I.topojsonName]=F,S()})})},L.update=function(I,P){var S=P[this.id];this.hasChoropleth=!1;for(var E=0;E<I.length;E++){var D=I[E],F=D[0].trace;F.type==="choropleth"&&(this.hasChoropleth=!0),F.visible===!0&&F._length>0&&F._module.calcGeoJSON(D,P)}if(!this.updateProjection(I,P)){this.viewInitial&&this.scope===S.scope||this.saveViewInitial(S),this.scope=S.scope,this.updateBaseLayers(P,S),this.updateDims(P,S),this.updateFx(P,S),a.generalUpdatePerTraceModule(this.graphDiv,this,I,S);var H=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=H.selectAll(".point"),this.dataPoints.text=H.selectAll("text"),this.dataPaths.line=H.selectAll(".js-line");var V=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=V.selectAll("path"),this.render()}},L.updateProjection=function(I,P){var S=this.graphDiv,E=P[this.id],D=P._size,F=E.domain,H=E.projection,V=E.lonaxis,Q=E.lataxis,K=V._ax,Z=Q._ax,$=this.projection=function(fe){var me=fe.projection,ke=me.type,Te=g.projNames[ke];Te="geo"+t.titleCase(Te);for(var Me=(p[Te]||e[Te])(),Oe=fe._isSatellite?180*Math.acos(1/me.distance)/Math.PI:fe._isClipped?g.lonaxisSpan[ke]/2:null,Fe=["center","rotate","parallels","clipExtent"],qe=function(Ue){return Ue?Me:[]},et=0;et<Fe.length;et++){var ze=Fe[et];typeof Me[ze]!="function"&&(Me[ze]=qe)}return Me.isLonLatOverEdges=function(Ue){if(Me(Ue)===null)return!0;if(Oe){var We=Me.rotate();return y(Ue,[-We[0],-We[1]])>Oe*Math.PI/180}return!1},Me.getPath=function(){return x().projection(Me)},Me.getBounds=function(Ue){return Me.getPath().bounds(Ue)},Me.precision(g.precision),fe._isSatellite&&Me.tilt(me.tilt).distance(me.distance),Oe&&Me.clipAngle(Oe-g.clipPad),Me}(E),re=[[D.l+D.w*F.x[0],D.t+D.h*(1-F.y[1])],[D.l+D.w*F.x[1],D.t+D.h*(1-F.y[0])]],R=E.center||{},N=H.rotation||{},U=V.range||[],te=Q.range||[];if(E.fitbounds){K._length=re[1][0]-re[0][0],Z._length=re[1][1]-re[0][1],K.range=f(S,K),Z.range=f(S,Z);var j=(K.range[0]+K.range[1])/2,Y=(Z.range[0]+Z.range[1])/2;if(E._isScoped)R={lon:j,lat:Y};else if(E._isClipped){R={lon:j,lat:Y},N={lon:j,lat:Y,roll:N.roll};var J=H.type,ee=g.lonaxisSpan[J]/2||180,ne=g.lataxisSpan[J]/2||90;U=[j-ee,j+ee],te=[Y-ne,Y+ne]}else R={lon:j,lat:Y},N={lon:j,lat:N.lat,roll:N.roll}}$.center([R.lon-N.lon,R.lat-N.lat]).rotate([-N.lon,-N.lat,N.roll]).parallels(H.parallels);var se=M(U,te);$.fitExtent(re,se);var oe=this.bounds=$.getBounds(se),he=this.fitScale=$.scale(),le=$.translate();if(E.fitbounds){var de=$.getBounds(M(K.range,Z.range)),xe=Math.min((oe[1][0]-oe[0][0])/(de[1][0]-de[0][0]),(oe[1][1]-oe[0][1])/(de[1][1]-de[0][1]));isFinite(xe)?$.scale(xe*he):t.warn("Something went wrong during"+this.id+"fitbounds computations.")}else $.scale(H.scale*he);var we=this.midPt=[(oe[0][0]+oe[1][0])/2,(oe[0][1]+oe[1][1])/2];if($.translate([le[0]+(we[0]-le[0]),le[1]+(we[1]-le[1])]).clipExtent(oe),E._isAlbersUsa){var be=$([R.lon,R.lat]),Ae=$.translate();$.translate([Ae[0]-(be[0]-Ae[0]),Ae[1]-(be[1]-Ae[1])])}},L.updateBaseLayers=function(I,P){var S=this,E=S.topojson,D=S.layers,F=S.basePaths;function H($){return $==="lonaxis"||$==="lataxis"}function V($){return Boolean(g.lineLayers[$])}function Q($){return Boolean(g.fillLayers[$])}var K=(this.hasChoropleth?g.layersForChoropleth:g.layers).filter(function($){return V($)||Q($)?P["show"+$]:!H($)||P[$].showgrid}),Z=S.framework.selectAll(".layer").data(K,String);Z.exit().each(function($){delete D[$],delete F[$],o.select(this).remove()}),Z.enter().append("g").attr("class",function($){return"layer "+$}).each(function($){var re=D[$]=o.select(this);$==="bg"?S.bgRect=re.append("rect").style("pointer-events","all"):H($)?F[$]=re.append("path").style("fill","none"):$==="backplot"?re.append("g").classed("choroplethlayer",!0):$==="frontplot"?re.append("g").classed("scatterlayer",!0):V($)?F[$]=re.append("path").style("fill","none").style("stroke-miterlimit",2):Q($)&&(F[$]=re.append("path").style("stroke","none"))}),Z.order(),Z.each(function($){var re=F[$],R=g.layerNameToAdjective[$];$==="frame"?re.datum(g.sphereSVG):V($)||Q($)?re.datum(T(E,E.objects[$])):H($)&&re.datum(function(N,U,te){var j,Y,J,ee=U[N],ne=g.scopeDefaults[U.scope];N==="lonaxis"?(j=ne.lonaxisRange,Y=ne.lataxisRange,J=function(Ae,fe){return[Ae,fe]}):N==="lataxis"&&(j=ne.lataxisRange,Y=ne.lonaxisRange,J=function(Ae,fe){return[fe,Ae]});var se={type:"linear",range:[j[0],j[1]-1e-6],tick0:ee.tick0,dtick:ee.dtick};l.setConvert(se,te);var oe=l.calcTicks(se);U.isScoped||N!=="lonaxis"||oe.pop();for(var he=oe.length,le=new Array(he),de=0;de<he;de++)for(var xe=oe[de].x,we=le[de]=[],be=Y[0];be<Y[1]+2.5;be+=2.5)we.push(J(xe,be));return{type:"MultiLineString",coordinates:le}}($,P,I)).call(n.stroke,P[$].gridcolor).call(h.dashLine,"",P[$].gridwidth),V($)?re.call(n.stroke,P[R+"color"]).call(h.dashLine,"",P[R+"width"]):Q($)&&re.call(n.fill,P[R+"color"])})},L.updateDims=function(I,P){var S=this.bounds,E=(P.framewidth||0)/2,D=S[0][0]-E,F=S[0][1]-E,H=S[1][0]-D+E,V=S[1][1]-F+E;h.setRect(this.clipRect,D,F,H,V),this.bgRect.call(h.setRect,D,F,H,V).call(n.fill,P.bgcolor),this.xaxis._offset=D,this.xaxis._length=H,this.yaxis._offset=F,this.yaxis._length=V},L.updateFx=function(I,P){var S=this,E=S.graphDiv,D=S.bgRect,F=I.dragmode,H=I.clickmode;if(!S.isStatic){var V;F==="select"?V=function(Z,$){(Z.range={})[S.id]=[K([$.xmin,$.ymin]),K([$.xmax,$.ymax])]}:F==="lasso"&&(V=function(Z,$,re){(Z.lassoPoints={})[S.id]=re.filtered.map(K)});var Q={element:S.bgRect.node(),gd:E,plotinfo:{id:S.id,xaxis:S.xaxis,yaxis:S.yaxis,fillRangeItems:V},xaxes:[S.xaxis],yaxes:[S.yaxis],subplot:S.id,clickFn:function(Z){Z===2&&m(E)}};F==="pan"?(D.node().onmousedown=null,D.call(b(S,P)),D.on("dblclick.zoom",function(){var Z=S.viewInitial,$={};for(var re in Z)$[S.id+"."+re]=Z[re];r.call("_guiRelayout",E,$),E.emit("plotly_doubleclick",null)}),E._context._scrollZoom.geo||D.on("wheel.zoom",null)):F!=="select"&&F!=="lasso"||(D.on(".zoom",null),Q.prepFn=function(Z,$,re){v(Z,$,re,Q,F)},d.init(Q)),D.on("mousemove",function(){var Z=S.projection.invert(t.getPositionFromD3Event());if(!Z)return d.unhover(E,o.event);S.xaxis.p2c=function(){return Z[0]},S.yaxis.p2c=function(){return Z[1]},s.hover(E,o.event,S.id)}),D.on("mouseout",function(){E._dragging||d.unhover(E,o.event)}),D.on("click",function(){F!=="select"&&F!=="lasso"&&(H.indexOf("select")>-1&&c(o.event,E,[S.xaxis],[S.yaxis],S.id,Q),H.indexOf("event")>-1&&s.click(E,o.event))})}function K(Z){return S.projection.invert([Z[0]+S.xaxis._offset,Z[1]+S.yaxis._offset])}},L.makeFramework=function(){var I=this,P=I.graphDiv,S=P._fullLayout,E="clip"+S._uid+I.id;I.clipDef=S._clips.append("clipPath").attr("id",E),I.clipRect=I.clipDef.append("rect"),I.framework=o.select(I.container).append("g").attr("class","geo "+I.id).call(h.setClipUrl,E,P),I.project=function(D){var F=I.projection(D);return F?[F[0]-I.xaxis._offset,F[1]-I.yaxis._offset]:[null,null]},I.xaxis={_id:"x",c2p:function(D){return I.project(D)[0]}},I.yaxis={_id:"y",c2p:function(D){return I.project(D)[1]}},I.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},l.setConvert(I.mockAxis,S)},L.saveViewInitial=function(I){var P,S=I.center||{},E=I.projection,D=E.rotation||{};this.viewInitial={fitbounds:I.fitbounds,"projection.scale":E.scale},P=I._isScoped?{"center.lon":S.lon,"center.lat":S.lat}:I._isClipped?{"projection.rotation.lon":D.lon,"projection.rotation.lat":D.lat}:{"center.lon":S.lon,"center.lat":S.lat,"projection.rotation.lon":D.lon},t.extendFlat(this.viewInitial,P)},L.render=function(){var I,P=this.projection,S=P.getPath();function E(F){var H=P(F.lonlat);return H?i(H[0],H[1]):null}function D(F){return P.isLonLatOverEdges(F.lonlat)?"none":null}for(I in this.basePaths)this.basePaths[I].attr("d",S);for(I in this.dataPaths)this.dataPaths[I].attr("d",function(F){return S(F.geojson)});for(I in this.dataPoints)this.dataPoints[I].attr("display",D).attr("transform",E)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../registry":638,"../cartesian/autorange":553,"../cartesian/axes":554,"../cartesian/select":575,"../plots":619,"./constants":587,"./zoom":592,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":315}],589:[function(u,q,W){var o=u("../../plots/get_data").getSubplotCalcData,p=u("../../lib").counterRegex,x=u("./geo"),y="geo",e=p(y),r={};r.geo={valType:"subplotid",dflt:y,editType:"calc"},q.exports={attr:y,name:y,idRoot:y,idRegex:e,attrRegex:e,attributes:r,layoutAttributes:u("./layout_attributes"),supplyLayoutDefaults:u("./layout_defaults"),plot:function(t){for(var i=t._fullLayout,n=t.calcdata,h=i._subplots.geo,s=0;s<h.length;s++){var a=h[s],l=o(n,y,a),f=i[a]._subplot;f||(f=x({id:a,graphDiv:t,container:i._geolayer.node(),topojsonURL:t._context.topojsonURL,staticPlot:t._context.staticPlot}),i[a]._subplot=f),f.plot(l,i,t._promises)}},updateFx:function(t){for(var i=t._fullLayout,n=i._subplots.geo,h=0;h<n.length;h++){var s=i[n[h]];s._subplot.updateFx(i,s)}},clean:function(t,i,n,h){for(var s=h._subplots.geo||[],a=0;a<s.length;a++){var l=s[a],f=h[l]._subplot;!i[l]&&f&&(f.framework.remove(),f.clipDef.remove())}}}},{"../../lib":503,"../../plots/get_data":593,"./geo":588,"./layout_attributes":590,"./layout_defaults":591}],590:[function(u,q,W){var o=u("../../components/color/attributes"),p=u("../domain").attributes,x=u("./constants"),y=u("../../plot_api/edit_types").overrideAll,e=u("../../lib/sort_object_keys"),r={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:o.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};(q.exports=y({domain:p({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:e(x.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:e(x.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:o.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:x.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:x.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:x.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:x.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:o.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:o.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:o.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:o.background},lonaxis:r,lataxis:r},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../domain":584,"./constants":587}],591:[function(u,q,W){var o=u("../../lib"),p=u("../subplot_defaults"),x=u("../get_data").getSubplotData,y=u("./constants"),e=u("./layout_attributes"),r=y.axesNames;function t(i,n,h,s){var a=x(s.fullData,"geo",s.id).map(function(N){return N._expandedIndex}),l=h("resolution"),f=h("scope"),d=y.scopeDefaults[f],v=h("projection.type",d.projType),m=n._isAlbersUsa=v==="albers usa";m&&(f=n.scope="usa");var c=n._isScoped=f!=="world",b=n._isSatellite=v==="satellite",g=n._isConic=v.indexOf("conic")!==-1||v==="albers",w=n._isClipped=!!y.lonaxisSpan[v];if(i.visible===!1){var _=o.extendDeep({},n._template);_.showcoastlines=!1,_.showcountries=!1,_.showframe=!1,_.showlakes=!1,_.showland=!1,_.showocean=!1,_.showrivers=!1,_.showsubunits=!1,_.lonaxis&&(_.lonaxis.showgrid=!1),_.lataxis&&(_.lataxis.showgrid=!1),n._template=_}for(var T=h("visible"),k=0;k<r.length;k++){var L,M=r[k],I=[30,10][k];if(c)L=d[M+"Range"];else{var P=y[M+"Span"],S=(P[v]||P["*"])/2,E=h("projection.rotation."+M.substr(0,3),d.projRotate[k]);L=[E-S,E+S]}var D=h(M+".range",L);h(M+".tick0"),h(M+".dtick",I),h(M+".showgrid",!!T&&void 0)&&(h(M+".gridcolor"),h(M+".gridwidth")),n[M]._ax={type:"linear",_id:M.slice(0,3),_traceIndices:a,setScale:o.identity,c2l:o.identity,r2l:o.identity,autorange:!0,range:D.slice(),_m:1,_input:{}}}var F=n.lonaxis.range,H=n.lataxis.range,V=F[0],Q=F[1];V>0&&Q<0&&(Q+=360);var K,Z,$,re=(V+Q)/2;if(!m){var R=c?d.projRotate:[re,0,0];K=h("projection.rotation.lon",R[0]),h("projection.rotation.lat",R[1]),h("projection.rotation.roll",R[2]),h("showcoastlines",!c&&T)&&(h("coastlinecolor"),h("coastlinewidth")),h("showocean",!!T&&void 0)&&h("oceancolor")}m?(Z=-96.6,$=38.7):(Z=c?re:K,$=(H[0]+H[1])/2),h("center.lon",Z),h("center.lat",$),b&&(h("projection.tilt"),h("projection.distance")),g&&h("projection.parallels",d.projParallels||[0,60]),h("projection.scale"),h("showland",!!T&&void 0)&&h("landcolor"),h("showlakes",!!T&&void 0)&&h("lakecolor"),h("showrivers",!!T&&void 0)&&(h("rivercolor"),h("riverwidth")),h("showcountries",c&&f!=="usa"&&T)&&(h("countrycolor"),h("countrywidth")),(f==="usa"||f==="north america"&&l===50)&&(h("showsubunits",T),h("subunitcolor"),h("subunitwidth")),c||h("showframe",T)&&(h("framecolor"),h("framewidth")),h("bgcolor"),h("fitbounds")&&(delete n.projection.scale,c?(delete n.center.lon,delete n.center.lat):w?(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon,delete n.projection.rotation.lat,delete n.lonaxis.range,delete n.lataxis.range):(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon))}q.exports=function(i,n,h){p(i,n,h,{type:"geo",attributes:e,handleDefaults:t,fullData:h,partition:"y"})}},{"../../lib":503,"../get_data":593,"../subplot_defaults":632,"./constants":587,"./layout_attributes":590}],592:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../lib"),x=u("../../registry"),y=Math.PI/180,e=180/Math.PI,r={cursor:"pointer"},t={cursor:"auto"};function i(T,k){return o.behavior.zoom().translate(k.translate()).scale(k.scale())}function n(T,k,L){var M=T.id,I=T.graphDiv,P=I.layout,S=P[M],E=I._fullLayout,D=E[M],F={},H={};function V(Q,K){F[M+"."+Q]=p.nestedProperty(S,Q).get(),x.call("_storeDirectGUIEdit",P,E._preGUI,F);var Z=p.nestedProperty(D,Q);Z.get()!==K&&(Z.set(K),p.nestedProperty(S,Q).set(K),H[M+"."+Q]=K)}L(V),V("projection.scale",k.scale()/T.fitScale),V("fitbounds",!1),I.emit("plotly_relayout",H)}function h(T,k){var L=i(0,k);function M(I){var P=k.invert(T.midPt);I("center.lon",P[0]),I("center.lat",P[1])}return L.on("zoomstart",function(){o.select(this).style(r)}).on("zoom",function(){k.scale(o.event.scale).translate(o.event.translate),T.render();var I=k.invert(T.midPt);T.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/T.fitScale,"geo.center.lon":I[0],"geo.center.lat":I[1]})}).on("zoomend",function(){o.select(this).style(t),n(T,k,M)}),L}function s(T,k){var L,M,I,P,S,E,D,F,H,V=i(0,k);function Q(Z){return k.invert(Z)}function K(Z){var $=k.rotate(),re=k.invert(T.midPt);Z("projection.rotation.lon",-$[0]),Z("center.lon",re[0]),Z("center.lat",re[1])}return V.on("zoomstart",function(){o.select(this).style(r),L=o.mouse(this),M=k.rotate(),I=k.translate(),P=M,S=Q(L)}).on("zoom",function(){if(E=o.mouse(this),function(re){var R=Q(re);if(!R)return!0;var N=k(R);return Math.abs(N[0]-re[0])>2||Math.abs(N[1]-re[1])>2}(L))return V.scale(k.scale()),void V.translate(k.translate());k.scale(o.event.scale),k.translate([I[0],o.event.translate[1]]),S?Q(E)&&(F=Q(E),D=[P[0]+(F[0]-S[0]),M[1],M[2]],k.rotate(D),P=D):S=Q(L=E),H=!0,T.render();var Z=k.rotate(),$=k.invert(T.midPt);T.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/T.fitScale,"geo.center.lon":$[0],"geo.center.lat":$[1],"geo.projection.rotation.lon":-Z[0]})}).on("zoomend",function(){o.select(this).style(t),H&&n(T,k,K)}),V}function a(T,k){var L,M={r:k.rotate(),k:k.scale()},I=i(0,k),P=function(Q){for(var K=0,Z=arguments.length,$=[];++K<Z;)$.push(arguments[K]);var re=o.dispatch.apply(null,$);return re.of=function(R,N){return function(U){var te;try{te=U.sourceEvent=o.event,U.target=Q,o.event=U,re[U.type].apply(R,N)}finally{o.event=te}}},re}(I,"zoomstart","zoom","zoomend"),S=0,E=I.on;function D(Q){S++||Q({type:"zoomstart"})}function F(Q){Q({type:"zoom"})}function H(Q){--S||Q({type:"zoomend"})}function V(Q){var K=k.rotate();Q("projection.rotation.lon",-K[0]),Q("projection.rotation.lat",-K[1])}return I.on("zoomstart",function(){o.select(this).style(r);var Q=o.mouse(this),K=k.rotate(),Z=K,$=k.translate(),re=f(K);L=l(k,Q),E.call(I,"zoom",function(){var R=o.mouse(this);if(k.scale(M.k=o.event.scale),L){if(l(k,R)){k.rotate(K).translate($);var N=l(k,R),U=v(L,N),te=w(d(re,U)),j=M.r=m(te,L,Z);isFinite(j[0])&&isFinite(j[1])&&isFinite(j[2])||(j=Z),k.rotate(j),Z=j}}else L=l(k,Q=R);F(P.of(this,arguments))}),D(P.of(this,arguments))}).on("zoomend",function(){o.select(this).style(t),E.call(I,"zoom",null),H(P.of(this,arguments)),n(T,k,V)}).on("zoom.redraw",function(){T.render();var Q=k.rotate();T.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/T.fitScale,"geo.projection.rotation.lon":-Q[0],"geo.projection.rotation.lat":-Q[1]})}),o.rebind(I,P,"on")}function l(T,k){var L=T.invert(k);return L&&isFinite(L[0])&&isFinite(L[1])&&function(M){var I=M[0]*y,P=M[1]*y,S=Math.cos(P);return[S*Math.cos(I),S*Math.sin(I),Math.sin(P)]}(L)}function f(T){var k=.5*T[0]*y,L=.5*T[1]*y,M=.5*T[2]*y,I=Math.sin(k),P=Math.cos(k),S=Math.sin(L),E=Math.cos(L),D=Math.sin(M),F=Math.cos(M);return[P*E*F+I*S*D,I*E*F-P*S*D,P*S*F+I*E*D,P*E*D-I*S*F]}function d(T,k){var L=T[0],M=T[1],I=T[2],P=T[3],S=k[0],E=k[1],D=k[2],F=k[3];return[L*S-M*E-I*D-P*F,L*E+M*S+I*F-P*D,L*D-M*F+I*S+P*E,L*F+M*D-I*E+P*S]}function v(T,k){if(T&&k){var L=function(S,E){return[S[1]*E[2]-S[2]*E[1],S[2]*E[0]-S[0]*E[2],S[0]*E[1]-S[1]*E[0]]}(T,k),M=Math.sqrt(_(L,L)),I=.5*Math.acos(Math.max(-1,Math.min(1,_(T,k)))),P=Math.sin(I)/M;return M&&[Math.cos(I),L[2]*P,-L[1]*P,L[0]*P]}}function m(T,k,L){var M=g(k,2,T[0]);M=g(M,1,T[1]),M=g(M,0,T[2]-L[2]);var I,P,S=k[0],E=k[1],D=k[2],F=M[0],H=M[1],V=M[2],Q=Math.atan2(E,S)*e,K=Math.sqrt(S*S+E*E);Math.abs(H)>K?(P=(H>0?90:-90)-Q,I=0):(P=Math.asin(H/K)*e-Q,I=Math.sqrt(K*K-H*H));var Z=180-P-2*Q,$=(Math.atan2(V,F)-Math.atan2(D,I))*e,re=(Math.atan2(V,F)-Math.atan2(D,-I))*e;return c(L[0],L[1],P,$)<=c(L[0],L[1],Z,re)?[P,$,L[2]]:[Z,re,L[2]]}function c(T,k,L,M){var I=b(L-T),P=b(M-k);return Math.sqrt(I*I+P*P)}function b(T){return(T%360+540)%360-180}function g(T,k,L){var M=L*y,I=T.slice(),P=k===0?1:0,S=k===2?1:2,E=Math.cos(M),D=Math.sin(M);return I[P]=T[P]*E-T[S]*D,I[S]=T[S]*E+T[P]*D,I}function w(T){return[Math.atan2(2*(T[0]*T[1]+T[2]*T[3]),1-2*(T[1]*T[1]+T[2]*T[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(T[0]*T[2]-T[3]*T[1]))))*e,Math.atan2(2*(T[0]*T[3]+T[1]*T[2]),1-2*(T[2]*T[2]+T[3]*T[3]))*e]}function _(T,k){for(var L=0,M=0,I=T.length;M<I;++M)L+=T[M]*k[M];return L}q.exports=function(T,k){var L=T.projection;return(k._isScoped?h:k._isClipped?a:s)(T,L)}},{"../../lib":503,"../../registry":638,"@plotly/d3":58}],593:[function(u,q,W){var o=u("../registry"),p=u("./cartesian/constants").SUBPLOT_PATTERN;W.getSubplotCalcData=function(x,y,e){var r=o.subplotsRegistry[y];if(!r)return[];for(var t=r.attr,i=[],n=0;n<x.length;n++){var h=x[n];h[0].trace[t]===e&&i.push(h)}return i},W.getModuleCalcData=function(x,y){var e,r=[],t=[];if(!(e=typeof y=="string"?o.getModule(y).plot:typeof y=="function"?y:y.plot))return[r,x];for(var i=0;i<x.length;i++){var n=x[i],h=n[0].trace;h.visible===!0&&h._length!==0&&(h._module.plot===e?r.push(n):t.push(n))}return[r,t]},W.getSubplotData=function(x,y,e){if(!o.subplotsRegistry[y])return[];var r,t,i,n=o.subplotsRegistry[y].attr,h=[];if(y==="gl2d"){var s=e.match(p);t="x"+s[1],i="y"+s[2]}for(var a=0;a<x.length;a++)r=x[a],y==="gl2d"&&o.traceIs(r,"gl2d")?r[n[0]]===t&&r[n[1]]===i&&h.push(r):r[n]===e&&h.push(r);return h}},{"../registry":638,"./cartesian/constants":561}],594:[function(u,q,W){var o=u("mouse-change"),p=u("mouse-wheel"),x=u("mouse-event-offset"),y=u("../cartesian/constants"),e=u("has-passive-events");function r(t,i){this.element=t,this.plot=i,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}q.exports=function(t){var i=t.mouseContainer,n=t.glplot,h=new r(i,n);function s(){t.xaxis.autorange=!1,t.yaxis.autorange=!1}function a(l,f,d){var v,m,c=t.calcDataBox(),b=n.viewBox,g=h.lastPos[0],w=h.lastPos[1],_=y.MINDRAG*n.pixelRatio,T=y.MINZOOM*n.pixelRatio;function k(E,D,F){var H=Math.min(D,F),V=Math.max(D,F);H!==V?(c[E]=H,c[E+2]=V,h.dataBox=c,t.setRanges(c)):(t.selectBox.selectBox=[0,0,1,1],t.glplot.setDirty())}switch(f*=n.pixelRatio,d*=n.pixelRatio,d=b[3]-b[1]-d,t.fullLayout.dragmode){case"zoom":if(l){var L=f/(b[2]-b[0])*(c[2]-c[0])+c[0],M=d/(b[3]-b[1])*(c[3]-c[1])+c[1];h.boxInited||(h.boxStart[0]=L,h.boxStart[1]=M,h.dragStart[0]=f,h.dragStart[1]=d),h.boxEnd[0]=L,h.boxEnd[1]=M,h.boxInited=!0,h.boxEnabled||h.boxStart[0]===h.boxEnd[0]&&h.boxStart[1]===h.boxEnd[1]||(h.boxEnabled=!0);var I=Math.abs(h.dragStart[0]-f)<T,P=Math.abs(h.dragStart[1]-d)<T;if(!function(){for(var E=t.graphDiv._fullLayout._axisConstraintGroups,D=t.xaxis._id,F=t.yaxis._id,H=0;H<E.length;H++)if(E[H][D]!==-1){if(E[H][F]!==-1)return!0;break}return!1}()||I&&P)I&&(h.boxEnd[0]=h.boxStart[0]),P&&(h.boxEnd[1]=h.boxStart[1]);else{v=h.boxEnd[0]-h.boxStart[0],m=h.boxEnd[1]-h.boxStart[1];var S=(c[3]-c[1])/(c[2]-c[0]);Math.abs(v*S)>Math.abs(m)?(h.boxEnd[1]=h.boxStart[1]+Math.abs(v)*S*(m>=0?1:-1),h.boxEnd[1]<c[1]?(h.boxEnd[1]=c[1],h.boxEnd[0]=h.boxStart[0]+(c[1]-h.boxStart[1])/Math.abs(S)):h.boxEnd[1]>c[3]&&(h.boxEnd[1]=c[3],h.boxEnd[0]=h.boxStart[0]+(c[3]-h.boxStart[1])/Math.abs(S))):(h.boxEnd[0]=h.boxStart[0]+Math.abs(m)/S*(v>=0?1:-1),h.boxEnd[0]<c[0]?(h.boxEnd[0]=c[0],h.boxEnd[1]=h.boxStart[1]+(c[0]-h.boxStart[0])*Math.abs(S)):h.boxEnd[0]>c[2]&&(h.boxEnd[0]=c[2],h.boxEnd[1]=h.boxStart[1]+(c[2]-h.boxStart[0])*Math.abs(S)))}}else h.boxEnabled?(v=h.boxStart[0]!==h.boxEnd[0],m=h.boxStart[1]!==h.boxEnd[1],v||m?(v&&(k(0,h.boxStart[0],h.boxEnd[0]),t.xaxis.autorange=!1),m&&(k(1,h.boxStart[1],h.boxEnd[1]),t.yaxis.autorange=!1),t.relayoutCallback()):t.glplot.setDirty(),h.boxEnabled=!1,h.boxInited=!1):h.boxInited&&(h.boxInited=!1);break;case"pan":h.boxEnabled=!1,h.boxInited=!1,l?(h.panning||(h.dragStart[0]=f,h.dragStart[1]=d),Math.abs(h.dragStart[0]-f)<_&&(f=h.dragStart[0]),Math.abs(h.dragStart[1]-d)<_&&(d=h.dragStart[1]),v=(g-f)*(c[2]-c[0])/(n.viewBox[2]-n.viewBox[0]),m=(w-d)*(c[3]-c[1])/(n.viewBox[3]-n.viewBox[1]),c[0]+=v,c[2]+=v,c[1]+=m,c[3]+=m,t.setRanges(c),h.panning=!0,h.lastInputTime=Date.now(),s(),t.cameraChanged(),t.handleAnnotations()):h.panning&&(h.panning=!1,t.relayoutCallback())}h.lastPos[0]=f,h.lastPos[1]=d}return h.mouseListener=o(i,a),i.addEventListener("touchstart",function(l){var f=x(l.changedTouches[0],i);a(0,f[0],f[1]),a(1,f[0],f[1]),l.preventDefault()},!!e&&{passive:!1}),i.addEventListener("touchmove",function(l){l.preventDefault();var f=x(l.changedTouches[0],i);a(1,f[0],f[1]),l.preventDefault()},!!e&&{passive:!1}),i.addEventListener("touchend",function(l){a(0,h.lastPos[0],h.lastPos[1]),l.preventDefault()},!!e&&{passive:!1}),h.wheelListener=p(i,function(l,f){if(!t.scrollZoom)return!1;var d=t.calcDataBox(),v=n.viewBox,m=h.lastPos[0],c=h.lastPos[1],b=Math.exp(5*f/(v[3]-v[1])),g=m/(v[2]-v[0])*(d[2]-d[0])+d[0],w=c/(v[3]-v[1])*(d[3]-d[1])+d[1];return d[0]=(d[0]-g)*b+g,d[2]=(d[2]-g)*b+g,d[1]=(d[1]-w)*b+w,d[3]=(d[3]-w)*b+w,t.setRanges(d),h.lastInputTime=Date.now(),s(),t.cameraChanged(),t.handleAnnotations(),t.relayoutCallback(),!0},!0),h}},{"../cartesian/constants":561,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],595:[function(u,q,W){var o=u("../cartesian/axes"),p=u("../../lib/str2rgbarray");function x(r){this.scene=r,this.gl=r.gl,this.pixelRatio=r.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var y=x.prototype,e=["xaxis","yaxis"];y.merge=function(r){var t,i,n,h,s,a,l,f,d,v,m;for(this.titleEnable=!1,this.backgroundColor=p(r.plot_bgcolor),v=0;v<2;++v){var c=(t=e[v]).charAt(0);for(n=(i=r[this.scene[t]._name]).title.text===this.scene.fullLayout._dfltTitle[c]?"":i.title.text,m=0;m<=2;m+=2)this.labelEnable[v+m]=!1,this.labels[v+m]=n,this.labelColor[v+m]=p(i.title.font.color),this.labelFont[v+m]=i.title.font.family,this.labelSize[v+m]=i.title.font.size,this.labelPad[v+m]=this.getLabelPad(t,i),this.tickEnable[v+m]=!1,this.tickColor[v+m]=p((i.tickfont||{}).color),this.tickAngle[v+m]=i.tickangle==="auto"?0:Math.PI*-i.tickangle/180,this.tickPad[v+m]=this.getTickPad(i),this.tickMarkLength[v+m]=0,this.tickMarkWidth[v+m]=i.tickwidth||0,this.tickMarkColor[v+m]=p(i.tickcolor),this.borderLineEnable[v+m]=!1,this.borderLineColor[v+m]=p(i.linecolor),this.borderLineWidth[v+m]=i.linewidth||0;l=this.hasSharedAxis(i),s=this.hasAxisInDfltPos(t,i)&&!l,a=this.hasAxisInAltrPos(t,i)&&!l,h=i.mirror||!1,f=l?String(h).indexOf("all")!==-1:!!h,d=l?h==="allticks":String(h).indexOf("ticks")!==-1,s?this.labelEnable[v]=!0:a&&(this.labelEnable[v+2]=!0),s?this.tickEnable[v]=i.showticklabels:a&&(this.tickEnable[v+2]=i.showticklabels),(s||f)&&(this.borderLineEnable[v]=i.showline),(a||f)&&(this.borderLineEnable[v+2]=i.showline),(s||d)&&(this.tickMarkLength[v]=this.getTickMarkLength(i)),(a||d)&&(this.tickMarkLength[v+2]=this.getTickMarkLength(i)),this.gridLineEnable[v]=i.showgrid,this.gridLineColor[v]=p(i.gridcolor),this.gridLineWidth[v]=i.gridwidth,this.zeroLineEnable[v]=i.zeroline,this.zeroLineColor[v]=p(i.zerolinecolor),this.zeroLineWidth[v]=i.zerolinewidth}},y.hasSharedAxis=function(r){var t=this.scene,i=t.fullLayout._subplots.gl2d;return o.findSubplotsWithAxis(i,r).indexOf(t.id)!==0},y.hasAxisInDfltPos=function(r,t){var i=t.side;return r==="xaxis"?i==="bottom":r==="yaxis"?i==="left":void 0},y.hasAxisInAltrPos=function(r,t){var i=t.side;return r==="xaxis"?i==="top":r==="yaxis"?i==="right":void 0},y.getLabelPad=function(r,t){var i=t.title.font.size,n=t.showticklabels;return r==="xaxis"?t.side==="top"?i*(1.5+(n?1:0))-10:i*(1.5+(n?.5:0))-10:r==="yaxis"?t.side==="right"?10+i*(1.5+(n?1:.5)):10+i*(1.5+(n?.5:0)):void 0},y.getTickPad=function(r){return r.ticks==="outside"?10+r.ticklen:15},y.getTickMarkLength=function(r){if(!r.ticks)return 0;var t=r.ticklen;return r.ticks==="inside"?-t:t},q.exports=function(r){return new x(r)}},{"../../lib/str2rgbarray":528,"../cartesian/axes":554}],596:[function(u,q,W){var o=u("../../plot_api/edit_types").overrideAll,p=u("./scene2d"),x=u("../layout_attributes"),y=u("../../constants/xmlns_namespaces"),e=u("../cartesian/constants"),r=u("../cartesian"),t=u("../../components/fx/layout_attributes"),i=u("../get_data").getSubplotData;W.name="gl2d",W.attr=["xaxis","yaxis"],W.idRoot=["x","y"],W.idRegex=e.idRegex,W.attrRegex=e.attrRegex,W.attributes=u("../cartesian/attributes"),W.supplyLayoutDefaults=function(n,h,s){h._has("cartesian")||r.supplyLayoutDefaults(n,h,s)},W.layoutAttrOverrides=o(r.layoutAttributes,"plot","from-root"),W.baseLayoutAttrOverrides=o({plot_bgcolor:x.plot_bgcolor,hoverlabel:t.hoverlabel},"plot","nested"),W.plot=function(n){for(var h=n._fullLayout,s=n._fullData,a=h._subplots.gl2d,l=0;l<a.length;l++){var f=a[l],d=h._plots[f],v=i(s,"gl2d",f),m=d._scene2d;m===void 0&&(m=new p({id:f,graphDiv:n,container:n.querySelector(".gl-container"),staticPlot:n._context.staticPlot,plotGlPixelRatio:n._context.plotGlPixelRatio},h),d._scene2d=m),m.plot(v,n.calcdata,h,n.layout)}},W.clean=function(n,h,s,a){for(var l=a._subplots.gl2d||[],f=0;f<l.length;f++){var d=l[f],v=a._plots[d];if(v._scene2d){var m=i(n,"gl2d",d);m.length===0&&(v._scene2d.destroy(),delete a._plots[d])}}r.clean.apply(this,arguments)},W.drawFramework=function(n){n._context.staticPlot||r.drawFramework(n)},W.toSVG=function(n){for(var h=n._fullLayout,s=h._subplots.gl2d,a=0;a<s.length;a++){var l=h._plots[s[a]]._scene2d,f=l.toImage("png");h._glimages.append("svg:image").attr({xmlns:y.svg,"xlink:href":f,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),l.destroy()}},W.updateFx=function(n){for(var h=n._fullLayout,s=h._subplots.gl2d,a=0;a<s.length;a++)h._plots[s[a]]._scene2d.updateFx(h.dragmode)}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../plot_api/edit_types":536,"../cartesian":568,"../cartesian/attributes":552,"../cartesian/constants":561,"../get_data":593,"../layout_attributes":610,"./scene2d":597}],597:[function(u,q,W){var o,p,x=u("../../registry"),y=u("../../plots/cartesian/axes"),e=u("../../components/fx"),r=u("../../../stackgl_modules").gl_plot2d,t=u("../../../stackgl_modules").gl_spikes2d,i=u("../../../stackgl_modules").gl_select_box,n=u("webgl-context"),h=u("./convert"),s=u("./camera"),a=u("../../lib/show_no_webgl_msg"),l=u("../cartesian/constraints"),f=l.enforce,d=l.clean,v=u("../cartesian/autorange").doAutoRange,m=u("../../components/dragelement/helpers"),c=m.drawMode,b=m.selectMode,g=["xaxis","yaxis"],w=u("../cartesian/constants").SUBPLOT_PATTERN;function _(k,L){this.container=k.container,this.graphDiv=k.graphDiv,this.pixelRatio=k.plotGlPixelRatio||window.devicePixelRatio,this.id=k.id,this.staticPlot=!!k.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(L),this.makeFramework(),this.stopped||(this.glplotOptions=h(this),this.glplotOptions.merge(L),this.glplot=r(this.glplotOptions),this.camera=s(this),this.traces={},this.spikes=t(this.glplot),this.selectBox=i(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}q.exports=_;var T=_.prototype;T.makeFramework=function(){if(this.staticPlot){if(!(p||(o=document.createElement("canvas"),p=n({canvas:o,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=o,this.gl=p}else{var k=this.container.querySelector(".gl-canvas-focus"),L=n({canvas:k,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!L)return a(this),void(this.stopped=!0);this.canvas=k,this.gl=L}var M=this.canvas;M.style.width="100%",M.style.height="100%",M.style.position="absolute",M.style.top="0px",M.style.left="0px",M.style["pointer-events"]="none",this.updateSize(M);var I=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");I.style.position="absolute",I.style.top=I.style.left="0px",I.style.width=I.style.height="100%",I.style["z-index"]=20,I.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var S=this.container;S.appendChild(I),S.appendChild(P);var E=this;P.addEventListener("mouseout",function(){E.isMouseOver=!1,E.unhover()}),P.addEventListener("mouseover",function(){E.isMouseOver=!0})},T.toImage=function(k){k||(k="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(o),this.updateSize(this.canvas);var L=this.glplot.gl,M=L.drawingBufferWidth,I=L.drawingBufferHeight;L.clearColor(1,1,1,0),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),L.bindFramebuffer(L.FRAMEBUFFER,null);var P=new Uint8Array(M*I*4);L.readPixels(0,0,M,I,L.RGBA,L.UNSIGNED_BYTE,P);for(var S=0,E=I-1;S<E;++S,--E)for(var D=0;D<M;++D)for(var F=0;F<4;++F){var H=P[4*(M*S+D)+F];P[4*(M*S+D)+F]=P[4*(M*E+D)+F],P[4*(M*E+D)+F]=H}var V=document.createElement("canvas");V.width=M,V.height=I;var Q,K=V.getContext("2d"),Z=K.createImageData(M,I);switch(Z.data.set(P),K.putImageData(Z,0,0),k){case"jpeg":Q=V.toDataURL("image/jpeg");break;case"webp":Q=V.toDataURL("image/webp");break;default:Q=V.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(o),Q},T.updateSize=function(k){k||(k=this.canvas);var L=this.pixelRatio,M=this.fullLayout,I=M.width,P=M.height,S=0|Math.ceil(L*I),E=0|Math.ceil(L*P);return k.width===S&&k.height===E||(k.width=S,k.height=E),k},T.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var k=[y.calcTicks(this.xaxis),y.calcTicks(this.yaxis)],L=0;L<2;++L)for(var M=0;M<k[L].length;++M)k[L][M].text=k[L][M].text+"";return k},T.updateRefs=function(k){this.fullLayout=k;var L=this.id.match(w),M="xaxis"+L[1],I="yaxis"+L[2];this.xaxis=this.fullLayout[M],this.yaxis=this.fullLayout[I]},T.relayoutCallback=function(){var k=this.graphDiv,L=this.xaxis,M=this.yaxis,I=k.layout,P={},S=P[L._name+".range"]=L.range.slice(),E=P[M._name+".range"]=M.range.slice();P[L._name+".autorange"]=L.autorange,P[M._name+".autorange"]=M.autorange,x.call("_storeDirectGUIEdit",k.layout,k._fullLayout._preGUI,P);var D=I[L._name];D.range=S,D.autorange=L.autorange;var F=I[M._name];F.range=E,F.autorange=M.autorange,P.lastInputTime=this.camera.lastInputTime,k.emit("plotly_relayout",P)},T.cameraChanged=function(){var k=this.camera;this.glplot.setDataBox(this.calcDataBox());var L=this.computeTickMarks();(function(M,I){for(var P=0;P<2;++P){var S=M[P],E=I[P];if(S.length!==E.length)return!0;for(var D=0;D<S.length;++D)if(S[D].x!==E[D].x)return!0}return!1})(L,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=L,this.glplotOptions.dataBox=k.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},T.handleAnnotations=function(){for(var k=this.graphDiv,L=this.fullLayout.annotations,M=0;M<L.length;M++){var I=L[M];I.xref===this.xaxis._id&&I.yref===this.yaxis._id&&x.getComponentMethod("annotations","drawOne")(k,M)}},T.destroy=function(){if(this.glplot){var k=this.traces;k&&Object.keys(k).map(function(L){k[L].dispose(),delete k[L]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},T.plot=function(k,L,M){var I=this.glplot;this.updateRefs(M),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(k,L),this.updateFx(M.dragmode);var P=M.width,S=M.height;this.updateSize(this.canvas);var E=this.glplotOptions;E.merge(M),E.screenBox=[0,0,P,S];var D={_fullLayout:{_axisConstraintGroups:M._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:M._size}};d(D,this.xaxis),d(D,this.yaxis);var F,H,V=M._size,Q=this.xaxis.domain,K=this.yaxis.domain;for(E.viewBox=[V.l+Q[0]*V.w,V.b+K[0]*V.h,P-V.r-(1-Q[1])*V.w,S-V.t-(1-K[1])*V.h],this.mouseContainer.style.width=V.w*(Q[1]-Q[0])+"px",this.mouseContainer.style.height=V.h*(K[1]-K[0])+"px",this.mouseContainer.height=V.h*(K[1]-K[0]),this.mouseContainer.style.left=V.l+Q[0]*V.w+"px",this.mouseContainer.style.top=V.t+(1-K[1])*V.h+"px",H=0;H<2;++H)(F=this[g[H]])._length=E.viewBox[H+2]-E.viewBox[H],v(this.graphDiv,F),F.setScale();f(D),E.ticks=this.computeTickMarks(),E.dataBox=this.calcDataBox(),E.merge(M),I.update(E),this.glplot.draw()},T.calcDataBox=function(){var k=this.xaxis,L=this.yaxis,M=k.range,I=L.range,P=k.r2l,S=L.r2l;return[P(M[0]),S(I[0]),P(M[1]),S(I[1])]},T.setRanges=function(k){var L=this.xaxis,M=this.yaxis,I=L.l2r,P=M.l2r;L.range=[I(k[0]),I(k[2])],M.range=[P(k[1]),P(k[3])]},T.updateTraces=function(k,L){var M,I,P,S=Object.keys(this.traces);this.fullData=k;e:for(M=0;M<S.length;M++){var E=S[M],D=this.traces[E];for(I=0;I<k.length;I++)if((P=k[I]).uid===E&&P.type===D.type)continue e;D.dispose(),delete this.traces[E]}for(M=0;M<k.length;M++){P=k[M];var F=L[M],H=this.traces[P.uid];H?H.update(P,F):(H=P._module.plot(this,P,F),this.traces[P.uid]=H)}this.glplot.objects.sort(function(V,Q){return V._trace.index-Q._trace.index})},T.updateFx=function(k){b(k)||c(k)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor=k==="pan"?"move":k==="zoom"?"crosshair":null},T.emitPointAction=function(k,L){for(var M,I=k.trace.uid,P=k.pointIndex,S=0;S<this.fullData.length;S++)this.fullData[S].uid===I&&(M=this.fullData[S]);var E={x:k.traceCoord[0],y:k.traceCoord[1],curveNumber:M.index,pointNumber:P,data:M._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};e.appendArrayPointValue(E,M,P),this.graphDiv.emit(L,{points:[E]})},T.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var k=this.glplot,L=this.camera,M=L.mouseListener,I=this.lastButtonState===1&&M.buttons===0,P=this.fullLayout;this.lastButtonState=M.buttons,this.cameraChanged();var S,E=M.x*k.pixelRatio,D=this.canvas.height-k.pixelRatio*M.y;if(L.boxEnabled&&P.dragmode==="zoom"){this.selectBox.enabled=!0;for(var F=this.selectBox.selectBox=[Math.min(L.boxStart[0],L.boxEnd[0]),Math.min(L.boxStart[1],L.boxEnd[1]),Math.max(L.boxStart[0],L.boxEnd[0]),Math.max(L.boxStart[1],L.boxEnd[1])],H=0;H<2;H++)L.boxStart[H]===L.boxEnd[H]&&(F[H]=k.dataBox[H],F[H+2]=k.dataBox[H+2]);k.setDirty()}else if(!L.panning&&this.isMouseOver){this.selectBox.enabled=!1;var V=P._size,Q=this.xaxis.domain,K=this.yaxis.domain,Z=(S=k.pick(E/k.pixelRatio+V.l+Q[0]*V.w,D/k.pixelRatio-(V.t+(1-K[1])*V.h)))&&S.object._trace.handlePick(S);if(Z&&I&&this.emitPointAction(Z,"plotly_click"),S&&S.object._trace.hoverinfo!=="skip"&&P.hovermode&&Z&&(!this.lastPickResult||this.lastPickResult.traceUid!==Z.trace.uid||this.lastPickResult.dataCoord[0]!==Z.dataCoord[0]||this.lastPickResult.dataCoord[1]!==Z.dataCoord[1])){var $=Z;this.lastPickResult={traceUid:Z.trace?Z.trace.uid:null,dataCoord:Z.dataCoord.slice()},this.spikes.update({center:S.dataCoord}),$.screenCoord=[((k.viewBox[2]-k.viewBox[0])*(S.dataCoord[0]-k.dataBox[0])/(k.dataBox[2]-k.dataBox[0])+k.viewBox[0])/k.pixelRatio,(this.canvas.height-(k.viewBox[3]-k.viewBox[1])*(S.dataCoord[1]-k.dataBox[1])/(k.dataBox[3]-k.dataBox[1])-k.viewBox[1])/k.pixelRatio],this.emitPointAction(Z,"plotly_hover");var re=this.fullData[$.trace.index]||{},R=$.pointIndex,N=e.castHoverinfo(re,P,R);if(N&&N!=="all"){var U=N.split("+");U.indexOf("x")===-1&&($.traceCoord[0]=void 0),U.indexOf("y")===-1&&($.traceCoord[1]=void 0),U.indexOf("z")===-1&&($.traceCoord[2]=void 0),U.indexOf("text")===-1&&($.textLabel=void 0),U.indexOf("name")===-1&&($.name=void 0)}e.loneHover({x:$.screenCoord[0],y:$.screenCoord[1],xLabel:this.hoverFormatter("xaxis",$.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",$.traceCoord[1]),zLabel:$.traceCoord[2],text:$.textLabel,name:$.name,color:e.castHoverOption(re,R,"bgcolor")||$.color,borderColor:e.castHoverOption(re,R,"bordercolor"),fontFamily:e.castHoverOption(re,R,"font.family"),fontSize:e.castHoverOption(re,R,"font.size"),fontColor:e.castHoverOption(re,R,"font.color"),nameLength:e.castHoverOption(re,R,"namelength"),textAlign:e.castHoverOption(re,R,"align")},{container:this.svgContainer,gd:this.graphDiv})}}S||this.unhover(),k.draw()}},T.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),e.loneUnhover(this.svgContainer))},T.hoverFormatter=function(k,L){if(L!==void 0){var M=this[k];return y.tickText(M,M.c2l(L),"hover").text}}},{"../../../stackgl_modules":1120,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib/show_no_webgl_msg":525,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/constants":561,"../cartesian/constraints":562,"./camera":594,"./convert":595,"webgl-context":331}],598:[function(u,q,W){var o=u("../../plot_api/edit_types").overrideAll,p=u("../../components/fx/layout_attributes"),x=u("./scene"),y=u("../get_data").getSubplotData,e=u("../../lib"),r=u("../../constants/xmlns_namespaces");W.name="gl3d",W.attr="scene",W.idRoot="scene",W.idRegex=W.attrRegex=e.counterRegex("scene"),W.attributes=u("./layout/attributes"),W.layoutAttributes=u("./layout/layout_attributes"),W.baseLayoutAttrOverrides=o({hoverlabel:p.hoverlabel},"plot","nested"),W.supplyLayoutDefaults=u("./layout/defaults"),W.plot=function(t){for(var i=t._fullLayout,n=t._fullData,h=i._subplots.gl3d,s=0;s<h.length;s++){var a=h[s],l=y(n,"gl3d",a),f=i[a],d=f.camera,v=f._scene;v||(v=new x({id:a,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio,camera:d},i),f._scene=v),v.viewInitial||(v.viewInitial={up:{x:d.up.x,y:d.up.y,z:d.up.z},eye:{x:d.eye.x,y:d.eye.y,z:d.eye.z},center:{x:d.center.x,y:d.center.y,z:d.center.z}}),v.plot(l,i,t.layout)}},W.clean=function(t,i,n,h){for(var s=h._subplots.gl3d||[],a=0;a<s.length;a++){var l=s[a];!i[l]&&h[l]._scene&&(h[l]._scene.destroy(),h._infolayer&&h._infolayer.selectAll(".annotation-"+l).remove())}},W.toSVG=function(t){for(var i=t._fullLayout,n=i._subplots.gl3d,h=i._size,s=0;s<n.length;s++){var a=i[n[s]],l=a.domain,f=a._scene,d=f.toImage("png");i._glimages.append("svg:image").attr({xmlns:r.svg,"xlink:href":d,x:h.l+h.w*l.x[0],y:h.t+h.h*(1-l.y[1]),width:h.w*(l.x[1]-l.x[0]),height:h.h*(l.y[1]-l.y[0]),preserveAspectRatio:"none"}),f.destroy()}},W.cleanId=function(t){if(t.match(/^scene[0-9]*$/)){var i=t.substr(5);return i==="1"&&(i=""),"scene"+i}},W.updateFx=function(t){for(var i=t._fullLayout,n=i._subplots.gl3d,h=0;h<n.length;h++)i[n[h]]._scene.updateFx(i.dragmode,i.hovermode)}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../plot_api/edit_types":536,"../get_data":593,"./layout/attributes":599,"./layout/defaults":603,"./layout/layout_attributes":604,"./scene":608}],599:[function(u,q,W){q.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],600:[function(u,q,W){var o=u("../../../components/color"),p=u("../../cartesian/layout_attributes"),x=u("../../../lib/extend").extendFlat,y=u("../../../plot_api/edit_types").overrideAll;q.exports=y({visible:p.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:o.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:p.color,categoryorder:p.categoryorder,categoryarray:p.categoryarray,title:{text:p.title.text,font:p.title.font},type:x({},p.type,{values:["-","linear","log","date","category"]}),autotypenumbers:p.autotypenumbers,autorange:p.autorange,rangemode:p.rangemode,range:x({},p.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:p.tickmode,nticks:p.nticks,tick0:p.tick0,dtick:p.dtick,tickvals:p.tickvals,ticktext:p.ticktext,ticks:p.ticks,mirror:p.mirror,ticklen:p.ticklen,tickwidth:p.tickwidth,tickcolor:p.tickcolor,showticklabels:p.showticklabels,tickfont:p.tickfont,tickangle:p.tickangle,tickprefix:p.tickprefix,showtickprefix:p.showtickprefix,ticksuffix:p.ticksuffix,showticksuffix:p.showticksuffix,showexponent:p.showexponent,exponentformat:p.exponentformat,minexponent:p.minexponent,separatethousands:p.separatethousands,tickformat:p.tickformat,tickformatstops:p.tickformatstops,hoverformat:p.hoverformat,showline:p.showline,linecolor:p.linecolor,linewidth:p.linewidth,showgrid:p.showgrid,gridcolor:x({},p.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:p.gridwidth,zeroline:p.zeroline,zerolinecolor:p.zerolinecolor,zerolinewidth:p.zerolinewidth,_deprecated:{title:p._deprecated.title,titlefont:p._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":366,"../../../lib/extend":493,"../../../plot_api/edit_types":536,"../../cartesian/layout_attributes":569}],601:[function(u,q,W){var o=u("tinycolor2").mix,p=u("../../../lib"),x=u("../../../plot_api/plot_template"),y=u("./axis_attributes"),e=u("../../cartesian/type_defaults"),r=u("../../cartesian/axis_defaults"),t=["xaxis","yaxis","zaxis"];q.exports=function(i,n,h){var s,a;function l(v,m){return p.coerce(s,a,y,v,m)}for(var f=0;f<t.length;f++){var d=t[f];s=i[d]||{},(a=x.newContainer(n,d))._id=d[0]+h.scene,a._name=d,e(s,a,l,h),r(s,a,l,{font:h.font,letter:d[0],data:h.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:h.bgColor,calendar:h.calendar},h.fullLayout),l("gridcolor",o(a.color,h.bgColor,13600/187).toRgbString()),l("title.text",d[0]),a.setScale=p.noop,l("showspikes")&&(l("spikesides"),l("spikethickness"),l("spikecolor",a.color)),l("showaxeslabels"),l("showbackground")&&l("backgroundcolor")}}},{"../../../lib":503,"../../../plot_api/plot_template":543,"../../cartesian/axis_defaults":556,"../../cartesian/type_defaults":582,"./axis_attributes":600,tinycolor2:312}],602:[function(u,q,W){var o=u("../../../lib/str2rgbarray"),p=u("../../../lib"),x=["xaxis","yaxis","zaxis"];function y(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}y.prototype.merge=function(e,r){for(var t=0;t<3;++t){var i=r[x[t]];i.visible?(this.labels[t]=e._meta?p.templateString(i.title.text,e._meta):i.title.text,"font"in i.title&&(i.title.font.color&&(this.labelColor[t]=o(i.title.font.color)),i.title.font.family&&(this.labelFont[t]=i.title.font.family),i.title.font.size&&(this.labelSize[t]=i.title.font.size)),"showline"in i&&(this.lineEnable[t]=i.showline),"linecolor"in i&&(this.lineColor[t]=o(i.linecolor)),"linewidth"in i&&(this.lineWidth[t]=i.linewidth),"showgrid"in i&&(this.gridEnable[t]=i.showgrid),"gridcolor"in i&&(this.gridColor[t]=o(i.gridcolor)),"gridwidth"in i&&(this.gridWidth[t]=i.gridwidth),i.type==="log"?this.zeroEnable[t]=!1:"zeroline"in i&&(this.zeroEnable[t]=i.zeroline),"zerolinecolor"in i&&(this.zeroLineColor[t]=o(i.zerolinecolor)),"zerolinewidth"in i&&(this.zeroLineWidth[t]=i.zerolinewidth),"ticks"in i&&i.ticks?this.lineTickEnable[t]=!0:this.lineTickEnable[t]=!1,"ticklen"in i&&(this.lineTickLength[t]=this._defaultLineTickLength[t]=i.ticklen),"tickcolor"in i&&(this.lineTickColor[t]=o(i.tickcolor)),"tickwidth"in i&&(this.lineTickWidth[t]=i.tickwidth),"tickangle"in i&&(this.tickAngle[t]=i.tickangle==="auto"?-3600:Math.PI*-i.tickangle/180),"showticklabels"in i&&(this.tickEnable[t]=i.showticklabels),"tickfont"in i&&(i.tickfont.color&&(this.tickColor[t]=o(i.tickfont.color)),i.tickfont.family&&(this.tickFont[t]=i.tickfont.family),i.tickfont.size&&(this.tickSize[t]=i.tickfont.size)),"mirror"in i?["ticks","all","allticks"].indexOf(i.mirror)!==-1?(this.lineTickMirror[t]=!0,this.lineMirror[t]=!0):i.mirror===!0?(this.lineTickMirror[t]=!1,this.lineMirror[t]=!0):(this.lineTickMirror[t]=!1,this.lineMirror[t]=!1):this.lineMirror[t]=!1,"showbackground"in i&&i.showbackground!==!1?(this.backgroundEnable[t]=!0,this.backgroundColor[t]=o(i.backgroundcolor)):this.backgroundEnable[t]=!1):(this.tickEnable[t]=!1,this.labelEnable[t]=!1,this.lineEnable[t]=!1,this.lineTickEnable[t]=!1,this.gridEnable[t]=!1,this.zeroEnable[t]=!1,this.backgroundEnable[t]=!1)}},q.exports=function(e,r){var t=new y;return t.merge(e,r),t}},{"../../../lib":503,"../../../lib/str2rgbarray":528}],603:[function(u,q,W){var o=u("../../../lib"),p=u("../../../components/color"),x=u("../../../registry"),y=u("../../subplot_defaults"),e=u("./axis_defaults"),r=u("./layout_attributes"),t=u("../../get_data").getSubplotData;function i(n,h,s,a){for(var l=s("bgcolor"),f=p.combine(l,a.paper_bgcolor),d=["up","center","eye"],v=0;v<d.length;v++)s("camera."+d[v]+".x"),s("camera."+d[v]+".y"),s("camera."+d[v]+".z");s("camera.projection.type");var m=!!s("aspectratio.x")&&!!s("aspectratio.y")&&!!s("aspectratio.z"),c=s("aspectmode",m?"manual":"auto");m||(n.aspectratio=h.aspectratio={x:1,y:1,z:1},c==="manual"&&(h.aspectmode="auto"),n.aspectmode=h.aspectmode);var b=t(a.fullData,"gl3d",a.id);e(n,h,{font:a.font,scene:a.id,data:b,bgColor:f,calendar:a.calendar,autotypenumbersDflt:a.autotypenumbersDflt,fullLayout:a.fullLayout}),x.getComponentMethod("annotations3d","handleDefaults")(n,h,a);var g=a.getDfltFromLayout("dragmode");if(g!==!1&&!g)if(g="orbit",n.camera&&n.camera.up){var w=n.camera.up.x,_=n.camera.up.y,T=n.camera.up.z;T!==0&&(w&&_&&T?T/Math.sqrt(w*w+_*_+T*T)>.999&&(g="turntable"):g="turntable")}else g="turntable";s("dragmode",g),s("hovermode",a.getDfltFromLayout("hovermode"))}q.exports=function(n,h,s){var a=h._basePlotModules.length>1;y(n,h,s,{type:"gl3d",attributes:r,handleDefaults:i,fullLayout:h,font:h.font,fullData:s,getDfltFromLayout:function(l){if(!a)return o.validate(n[l],r[l])?n[l]:void 0},autotypenumbersDflt:h.autotypenumbers,paper_bgcolor:h.paper_bgcolor,calendar:h.calendar})}},{"../../../components/color":366,"../../../lib":503,"../../../registry":638,"../../get_data":593,"../../subplot_defaults":632,"./axis_defaults":601,"./layout_attributes":604}],604:[function(u,q,W){var o=u("./axis_attributes"),p=u("../../domain").attributes,x=u("../../../lib/extend").extendFlat,y=u("../../../lib").counterRegex;function e(r,t,i){return{x:{valType:"number",dflt:r,editType:"camera"},y:{valType:"number",dflt:t,editType:"camera"},z:{valType:"number",dflt:i,editType:"camera"},editType:"camera"}}q.exports={_arrayAttrRegexps:[y("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:x(e(0,0,1),{}),center:x(e(0,0,0),{}),eye:x(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:p({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:o,yaxis:o,zaxis:o,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":503,"../../../lib/extend":493,"../../domain":584,"./axis_attributes":600}],605:[function(u,q,W){var o=u("../../../lib/str2rgbarray"),p=["xaxis","yaxis","zaxis"];function x(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}x.prototype.merge=function(y){for(var e=0;e<3;++e){var r=y[p[e]];r.visible?(this.enabled[e]=r.showspikes,this.colors[e]=o(r.spikecolor),this.drawSides[e]=r.spikesides,this.lineWidth[e]=r.spikethickness):(this.enabled[e]=!1,this.drawSides[e]=!1)}},q.exports=function(y){var e=new x;return e.merge(y),e}},{"../../../lib/str2rgbarray":528}],606:[function(u,q,W){q.exports=function(e){for(var r=e.axesOptions,t=e.glplot.axesPixels,i=e.fullSceneLayout,n=[[],[],[]],h=0;h<3;++h){var s=i[x[h]];if(s._length=(t[h].hi-t[h].lo)*t[h].pixelsPerDataUnit/e.dataScale[h],Math.abs(s._length)===1/0||isNaN(s._length))n[h]=[];else{s._input_range=s.range.slice(),s.range[0]=t[h].lo/e.dataScale[h],s.range[1]=t[h].hi/e.dataScale[h],s._m=1/(e.dataScale[h]*t[h].pixelsPerDataUnit),s.range[0]===s.range[1]&&(s.range[0]-=1,s.range[1]+=1);var a=s.tickmode;if(s.tickmode==="auto"){s.tickmode="linear";var l=s.nticks||p.constrain(s._length/40,4,9);o.autoTicks(s,Math.abs(s.range[1]-s.range[0])/l)}for(var f=o.calcTicks(s,{msUTC:!0}),d=0;d<f.length;++d)f[d].x=f[d].x*e.dataScale[h],s.type==="date"&&(f[d].text=f[d].text.replace(/\<br\>/g," "));n[h]=f,s.tickmode=a}}for(r.ticks=n,h=0;h<3;++h)for(y[h]=.5*(e.glplot.bounds[0][h]+e.glplot.bounds[1][h]),d=0;d<2;++d)r.bounds[d][h]=e.glplot.bounds[d][h];e.contourLevels=function(v){for(var m=new Array(3),c=0;c<3;++c){for(var b=v[c],g=new Array(b.length),w=0;w<b.length;++w)g[w]=b[w].x;m[c]=g}return m}(n)};var o=u("../../cartesian/axes"),p=u("../../../lib"),x=["xaxis","yaxis","zaxis"],y=[0,0,0]},{"../../../lib":503,"../../cartesian/axes":554}],607:[function(u,q,W){function o(p,x){var y,e,r=[0,0,0,0];for(y=0;y<4;++y)for(e=0;e<4;++e)r[e]+=p[4*y+e]*x[y];return r}q.exports=function(p,x){return o(p.projection,o(p.view,o(p.model,[x[0],x[1],x[2],1])))}},{}],608:[function(u,q,W){var o,p,x=u("../../../stackgl_modules").gl_plot3d,y=x.createCamera,e=x.createScene,r=u("webgl-context"),t=u("has-passive-events"),i=u("../../registry"),n=u("../../lib"),h=n.preserveDrawingBuffer(),s=u("../../plots/cartesian/axes"),a=u("../../components/fx"),l=u("../../lib/str2rgbarray"),f=u("../../lib/show_no_webgl_msg"),d=u("./project"),v=u("./layout/convert"),m=u("./layout/spikes"),c=u("./layout/tick_marks");function b(k,L){var M=document.createElement("div"),I=k.container;this.graphDiv=k.graphDiv;var P=document.createElementNS("http://www.w3.org/2000/svg","svg");P.style.position="absolute",P.style.top=P.style.left="0px",P.style.width=P.style.height="100%",P.style["z-index"]=20,P.style["pointer-events"]="none",M.appendChild(P),this.svgContainer=P,M.id=k.id,M.style.position="absolute",M.style.top=M.style.left="0px",M.style.width=M.style.height="100%",I.appendChild(M),this.fullLayout=L,this.id=k.id||"scene",this.fullSceneLayout=L[this.id],this.plotArgs=[[],{},{}],this.axesOptions=v(L,L[this.id]),this.spikeOptions=m(L[this.id]),this.container=M,this.staticMode=!!k.staticPlot,this.pixelRatio=this.pixelRatio||k.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=i.getComponentMethod("annotations3d","convert"),this.drawAnnotations=i.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var g=b.prototype;g.prepareOptions=function(){var k={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:h,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!(p||(o=document.createElement("canvas"),p=r({canvas:o,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");k.gl=p,k.canvas=o}return k};var w=!0;g.tryCreatePlot=function(){var k=this.prepareOptions(),L=!0;try{this.glplot=e(k)}catch{if(this.staticMode||!w||h)L=!1;else{n.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{h=k.glOptions.preserveDrawingBuffer=!0,this.glplot=e(k)}catch{h=k.glOptions.preserveDrawingBuffer=!1,L=!1}}}return w=!1,L},g.initializeGLCamera=function(){var k=this.fullSceneLayout.camera,L=k.projection.type==="orthographic";this.camera=y(this.container,{center:[k.center.x,k.center.y,k.center.z],eye:[k.eye.x,k.eye.y,k.eye.z],up:[k.up.x,k.up.y,k.up.z],_ortho:L,zoomMin:.01,zoomMax:100,mode:"orbit"})},g.initializeGLPlot=function(){var k=this;if(k.initializeGLCamera(),!k.tryCreatePlot())return f(k);k.traces={},k.make4thDimension();var L=k.graphDiv,M=L.layout,I=function(){var S={};return k.isCameraChanged(M)&&(S[k.id+".camera"]=k.getCamera()),k.isAspectChanged(M)&&(S[k.id+".aspectratio"]=k.glplot.getAspectratio(),M[k.id].aspectmode!=="manual"&&(k.fullSceneLayout.aspectmode=M[k.id].aspectmode=S[k.id+".aspectmode"]="manual")),S},P=function(S){if(S.fullSceneLayout.dragmode!==!1){var E=I();S.saveLayout(M),S.graphDiv.emit("plotly_relayout",E)}};return k.glplot.canvas&&(k.glplot.canvas.addEventListener("mouseup",function(){P(k)}),k.glplot.canvas.addEventListener("wheel",function(S){if(L._context._scrollZoom.gl3d){if(k.camera._ortho){var E=S.deltaX>S.deltaY?1.1:1/1.1,D=k.glplot.getAspectratio();k.glplot.setAspectratio({x:E*D.x,y:E*D.y,z:E*D.z})}P(k)}},!!t&&{passive:!1}),k.glplot.canvas.addEventListener("mousemove",function(){if(k.fullSceneLayout.dragmode!==!1&&k.camera.mouseListener.buttons!==0){var S=I();k.graphDiv.emit("plotly_relayouting",S)}}),k.staticMode||k.glplot.canvas.addEventListener("webglcontextlost",function(S){L&&L.emit&&L.emit("plotly_webglcontextlost",{event:S,layer:k.id})},!1)),k.glplot.oncontextloss=function(){k.recoverContext()},k.glplot.onrender=function(){k.render()},!0},g.render=function(){var k,L=this,M=L.graphDiv,I=L.svgContainer,P=L.container.getBoundingClientRect();M._fullLayout._calcInverseTransform(M);var S=M._fullLayout._invScaleX,E=M._fullLayout._invScaleY,D=P.width*S,F=P.height*E;I.setAttributeNS(null,"viewBox","0 0 "+D+" "+F),I.setAttributeNS(null,"width",D),I.setAttributeNS(null,"height",F),c(L),L.glplot.axes.update(L.axesOptions);for(var H=Object.keys(L.traces),V=null,Q=L.glplot.selection,K=0;K<H.length;++K)(k=L.traces[H[K]]).data.hoverinfo!=="skip"&&k.handlePick(Q)&&(V=k),k.setContourLevels&&k.setContourLevels();function Z(oe,he,le){var de=L.fullSceneLayout[oe+"axis"];return de.type!=="log"&&(he=de.d2l(he)),s.hoverLabelText(de,he,le)}if(V!==null){var $=d(L.glplot.cameraParams,Q.dataCoordinate);k=V.data;var re,R=M._fullData[k.index],N=Q.index,U={xLabel:Z("x",Q.traceCoordinate[0],k.xhoverformat),yLabel:Z("y",Q.traceCoordinate[1],k.yhoverformat),zLabel:Z("z",Q.traceCoordinate[2],k.zhoverformat)},te=a.castHoverinfo(R,L.fullLayout,N),j=(te||"").split("+"),Y=te&&te==="all";R.hovertemplate||Y||(j.indexOf("x")===-1&&(U.xLabel=void 0),j.indexOf("y")===-1&&(U.yLabel=void 0),j.indexOf("z")===-1&&(U.zLabel=void 0),j.indexOf("text")===-1&&(Q.textLabel=void 0),j.indexOf("name")===-1&&(V.name=void 0));var J=[];k.type==="cone"||k.type==="streamtube"?(U.uLabel=Z("x",Q.traceCoordinate[3],k.uhoverformat),(Y||j.indexOf("u")!==-1)&&J.push("u: "+U.uLabel),U.vLabel=Z("y",Q.traceCoordinate[4],k.vhoverformat),(Y||j.indexOf("v")!==-1)&&J.push("v: "+U.vLabel),U.wLabel=Z("z",Q.traceCoordinate[5],k.whoverformat),(Y||j.indexOf("w")!==-1)&&J.push("w: "+U.wLabel),U.normLabel=Q.traceCoordinate[6].toPrecision(3),(Y||j.indexOf("norm")!==-1)&&J.push("norm: "+U.normLabel),k.type==="streamtube"&&(U.divergenceLabel=Q.traceCoordinate[7].toPrecision(3),(Y||j.indexOf("divergence")!==-1)&&J.push("divergence: "+U.divergenceLabel)),Q.textLabel&&J.push(Q.textLabel),re=J.join("<br>")):k.type==="isosurface"||k.type==="volume"?(U.valueLabel=s.hoverLabelText(L._mockAxis,L._mockAxis.d2l(Q.traceCoordinate[3]),k.valuehoverformat),J.push("value: "+U.valueLabel),Q.textLabel&&J.push(Q.textLabel),re=J.join("<br>")):re=Q.textLabel;var ee={x:Q.traceCoordinate[0],y:Q.traceCoordinate[1],z:Q.traceCoordinate[2],data:R._input,fullData:R,curveNumber:R.index,pointNumber:N};a.appendArrayPointValue(ee,R,N),k._module.eventData&&(ee=R._module.eventData(ee,Q,R,{},N));var ne={points:[ee]};if(L.fullSceneLayout.hovermode){var se=[];a.loneHover({trace:R,x:(.5+.5*$[0]/$[3])*D,y:(.5-.5*$[1]/$[3])*F,xLabel:U.xLabel,yLabel:U.yLabel,zLabel:U.zLabel,text:re,name:V.name,color:a.castHoverOption(R,N,"bgcolor")||V.color,borderColor:a.castHoverOption(R,N,"bordercolor"),fontFamily:a.castHoverOption(R,N,"font.family"),fontSize:a.castHoverOption(R,N,"font.size"),fontColor:a.castHoverOption(R,N,"font.color"),nameLength:a.castHoverOption(R,N,"namelength"),textAlign:a.castHoverOption(R,N,"align"),hovertemplate:n.castOption(R,N,"hovertemplate"),hovertemplateLabels:n.extendFlat({},ee,U),eventData:[ee]},{container:I,gd:M,inOut_bbox:se}),ee.bbox=se[0]}Q.buttons&&Q.distance<5?M.emit("plotly_click",ne):M.emit("plotly_hover",ne),this.oldEventData=ne}else a.loneUnhover(I),this.oldEventData&&M.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;L.drawAnnotations(L)},g.recoverContext=function(){var k=this;k.glplot.dispose();var L=function(){k.glplot.gl.isContextLost()?requestAnimationFrame(L):k.initializeGLPlot()?k.plot.apply(k,k.plotArgs):n.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(L)};var _=["xaxis","yaxis","zaxis"];function T(k,L,M){for(var I=k.fullSceneLayout,P=0;P<3;P++){var S=_[P],E=S.charAt(0),D=I[S],F=L[E],H=L[E+"calendar"],V=L["_"+E+"length"];if(n.isArrayOrTypedArray(F))for(var Q,K=0;K<(V||F.length);K++)if(n.isArrayOrTypedArray(F[K]))for(var Z=0;Z<F[K].length;++Z)Q=D.d2l(F[K][Z],0,H),!isNaN(Q)&&isFinite(Q)&&(M[0][P]=Math.min(M[0][P],Q),M[1][P]=Math.max(M[1][P],Q));else Q=D.d2l(F[K],0,H),!isNaN(Q)&&isFinite(Q)&&(M[0][P]=Math.min(M[0][P],Q),M[1][P]=Math.max(M[1][P],Q));else M[0][P]=Math.min(M[0][P],0),M[1][P]=Math.max(M[1][P],V-1)}}g.plot=function(k,L,M){if(this.plotArgs=[k,L,M],!this.glplot.contextLost){var I,P,S,E,D,F,H=L[this.id],V=M[this.id];this.fullLayout=L,this.fullSceneLayout=H,this.axesOptions.merge(L,H),this.spikeOptions.merge(H),this.setViewport(H),this.updateFx(H.dragmode,H.hovermode),this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d,this.glplot.setClearColor(l(H.bgcolor)),this.setConvert(D),k?Array.isArray(k)||(k=[k]):k=[];var Q=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(S=0;S<k.length;++S)(I=k[S]).visible===!0&&I._length!==0&&T(this,I,Q);(function(ke,Te){for(var Me=ke.fullSceneLayout,Oe=Me.annotations||[],Fe=0;Fe<3;Fe++)for(var qe=_[Fe],et=qe.charAt(0),ze=Me[qe],Ue=0;Ue<Oe.length;Ue++){var We=Oe[Ue];if(We.visible){var Ze=ze.r2l(We[et]);!isNaN(Ze)&&isFinite(Ze)&&(Te[0][Fe]=Math.min(Te[0][Fe],Ze),Te[1][Fe]=Math.max(Te[1][Fe],Ze))}}})(this,Q);var K=[1,1,1];for(E=0;E<3;++E)Q[1][E]===Q[0][E]?K[E]=1:K[E]=1/(Q[1][E]-Q[0][E]);for(this.dataScale=K,this.convertAnnotations(this),S=0;S<k.length;++S)(I=k[S]).visible===!0&&I._length!==0&&((P=this.traces[I.uid])?P.data.type===I.type?P.update(I):(P.dispose(),P=I._module.plot(this,I),this.traces[I.uid]=P):(P=I._module.plot(this,I),this.traces[I.uid]=P),P.name=I.name);var Z=Object.keys(this.traces);e:for(S=0;S<Z.length;++S){for(E=0;E<k.length;++E)if(k[E].uid===Z[S]&&k[E].visible===!0&&k[E]._length!==0)continue e;(P=this.traces[Z[S]]).dispose(),delete this.traces[Z[S]]}this.glplot.objects.sort(function(ke,Te){return ke._trace.data.index-Te._trace.data.index});var $,re=[[0,0,0],[0,0,0]],R=[],N={};for(S=0;S<3;++S){if((F=(D=H[_[S]]).type)in N?(N[F].acc*=K[S],N[F].count+=1):N[F]={acc:K[S],count:1},D.autorange){re[0][S]=1/0,re[1][S]=-1/0;var U=this.glplot.objects,te=this.fullSceneLayout.annotations||[],j=D._name.charAt(0);for(E=0;E<U.length;E++){var Y=U[E],J=Y.bounds,ee=Y._trace.data._pad||0;Y.constructor.name==="ErrorBars"&&D._lowerLogErrorBound?re[0][S]=Math.min(re[0][S],D._lowerLogErrorBound):re[0][S]=Math.min(re[0][S],J[0][S]/K[S]-ee),re[1][S]=Math.max(re[1][S],J[1][S]/K[S]+ee)}for(E=0;E<te.length;E++){var ne=te[E];if(ne.visible){var se=D.r2l(ne[j]);re[0][S]=Math.min(re[0][S],se),re[1][S]=Math.max(re[1][S],se)}}if("rangemode"in D&&D.rangemode==="tozero"&&(re[0][S]=Math.min(re[0][S],0),re[1][S]=Math.max(re[1][S],0)),re[0][S]>re[1][S])re[0][S]=-1,re[1][S]=1;else{var oe=re[1][S]-re[0][S];re[0][S]-=oe/32,re[1][S]+=oe/32}if(D.autorange==="reversed"){var he=re[0][S];re[0][S]=re[1][S],re[1][S]=he}}else{var le=D.range;re[0][S]=D.r2l(le[0]),re[1][S]=D.r2l(le[1])}re[0][S]===re[1][S]&&(re[0][S]-=1,re[1][S]+=1),R[S]=re[1][S]-re[0][S],this.glplot.setBounds(S,{min:re[0][S]*K[S],max:re[1][S]*K[S]})}var de=H.aspectmode;if(de==="cube")$=[1,1,1];else if(de==="manual"){var xe=H.aspectratio;$=[xe.x,xe.y,xe.z]}else{if(de!=="auto"&&de!=="data")throw new Error("scene.js aspectRatio was not one of the enumerated types");var we=[1,1,1];for(S=0;S<3;++S){var be=N[F=(D=H[_[S]]).type];we[S]=Math.pow(be.acc,1/be.count)/K[S]}$=de==="data"||Math.max.apply(null,we)/Math.min.apply(null,we)<=4?we:[1,1,1]}H.aspectratio.x=V.aspectratio.x=$[0],H.aspectratio.y=V.aspectratio.y=$[1],H.aspectratio.z=V.aspectratio.z=$[2],this.glplot.setAspectratio(H.aspectratio),this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:H.aspectratio.x,y:H.aspectratio.y,z:H.aspectratio.z}),this.viewInitial.aspectmode||(this.viewInitial.aspectmode=H.aspectmode);var Ae=H.domain||null,fe=L._size||null;if(Ae&&fe){var me=this.container.style;me.position="absolute",me.left=fe.l+Ae.x[0]*fe.w+"px",me.top=fe.t+(1-Ae.y[1])*fe.h+"px",me.width=fe.w*(Ae.x[1]-Ae.x[0])+"px",me.height=fe.h*(Ae.y[1]-Ae.y[0])+"px"}this.glplot.redraw()}},g.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},g.getCamera=function(){var k;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(k=this.camera).up[0],y:k.up[1],z:k.up[2]},center:{x:k.center[0],y:k.center[1],z:k.center[2]},eye:{x:k.eye[0],y:k.eye[1],z:k.eye[2]},projection:{type:k._ortho===!0?"orthographic":"perspective"}}},g.setViewport=function(k){var L,M=k.camera;this.camera.lookAt.apply(this,[[(L=M).eye.x,L.eye.y,L.eye.z],[L.center.x,L.center.y,L.center.z],[L.up.x,L.up.y,L.up.z]]),this.glplot.setAspectratio(k.aspectratio),M.projection.type==="orthographic"!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},g.isCameraChanged=function(k){var L=this.getCamera(),M=n.nestedProperty(k,this.id+".camera").get();function I(D,F,H,V){var Q=["up","center","eye"],K=["x","y","z"];return F[Q[H]]&&D[Q[H]][K[V]]===F[Q[H]][K[V]]}var P=!1;if(M===void 0)P=!0;else{for(var S=0;S<3;S++)for(var E=0;E<3;E++)if(!I(L,M,S,E)){P=!0;break}(!M.projection||L.projection&&L.projection.type!==M.projection.type)&&(P=!0)}return P},g.isAspectChanged=function(k){var L=this.glplot.getAspectratio(),M=n.nestedProperty(k,this.id+".aspectratio").get();return M===void 0||M.x!==L.x||M.y!==L.y||M.z!==L.z},g.saveLayout=function(k){var L,M,I,P,S,E,D=this.fullLayout,F=this.isCameraChanged(k),H=this.isAspectChanged(k),V=F||H;if(V){var Q={};F&&(L=this.getCamera(),I=(M=n.nestedProperty(k,this.id+".camera")).get(),Q[this.id+".camera"]=I),H&&(P=this.glplot.getAspectratio(),E=(S=n.nestedProperty(k,this.id+".aspectratio")).get(),Q[this.id+".aspectratio"]=E),i.call("_storeDirectGUIEdit",k,D._preGUI,Q),F&&(M.set(L),n.nestedProperty(D,this.id+".camera").set(L)),H&&(S.set(P),n.nestedProperty(D,this.id+".aspectratio").set(P),this.glplot.redraw())}return V},g.updateFx=function(k,L){var M=this.camera;if(M)if(k==="orbit")M.mode="orbit",M.keyBindingMode="rotate";else if(k==="turntable"){M.up=[0,0,1],M.mode="turntable",M.keyBindingMode="rotate";var I=this.graphDiv,P=I._fullLayout,S=this.fullSceneLayout.camera,E=S.up.x,D=S.up.y,F=S.up.z;if(F/Math.sqrt(E*E+D*D+F*F)<.999){var H=this.id+".camera.up",V={x:0,y:0,z:1},Q={};Q[H]=V;var K=I.layout;i.call("_storeDirectGUIEdit",K,P._preGUI,Q),S.up=V,n.nestedProperty(K,H).set(V)}}else M.keyBindingMode=k;this.fullSceneLayout.hovermode=L},g.toImage=function(k){k||(k="png"),this.staticMode&&this.container.appendChild(o),this.glplot.redraw();var L=this.glplot.gl,M=L.drawingBufferWidth,I=L.drawingBufferHeight;L.bindFramebuffer(L.FRAMEBUFFER,null);var P=new Uint8Array(M*I*4);L.readPixels(0,0,M,I,L.RGBA,L.UNSIGNED_BYTE,P),function(H,V,Q){for(var K=0,Z=Q-1;K<Z;++K,--Z)for(var $=0;$<V;++$)for(var re=0;re<4;++re){var R=4*(V*K+$)+re,N=4*(V*Z+$)+re,U=H[R];H[R]=H[N],H[N]=U}}(P,M,I),function(H,V,Q){for(var K=0;K<Q;++K)for(var Z=0;Z<V;++Z){var $=4*(V*K+Z),re=H[$+3];if(re>0)for(var R=255/re,N=0;N<3;++N)H[$+N]=Math.min(R*H[$+N],255)}}(P,M,I);var S=document.createElement("canvas");S.width=M,S.height=I;var E,D=S.getContext("2d"),F=D.createImageData(M,I);switch(F.data.set(P),D.putImageData(F,0,0),k){case"jpeg":E=S.toDataURL("image/jpeg");break;case"webp":E=S.toDataURL("image/webp");break;default:E=S.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(o),E},g.setConvert=function(){for(var k=0;k<3;k++){var L=this.fullSceneLayout[_[k]];s.setConvert(L,this.fullLayout),L.setScale=n.noop}},g.make4thDimension=function(){var k=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},s.setConvert(this._mockAxis,k)},q.exports=b},{"../../../stackgl_modules":1120,"../../components/fx":406,"../../lib":503,"../../lib/show_no_webgl_msg":525,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../../registry":638,"./layout/convert":602,"./layout/spikes":605,"./layout/tick_marks":606,"./project":607,"has-passive-events":229,"webgl-context":331}],609:[function(u,q,W){q.exports=function(o,p,x,y){y=y||o.length;for(var e=new Array(y),r=0;r<y;r++)e[r]=[o[r],p[r],x[r]];return e}},{}],610:[function(u,q,W){var o=u("./font_attributes"),p=u("./animation_attributes"),x=u("../components/color/attributes"),y=u("../components/shapes/draw_newshape/attributes"),e=u("./pad_attributes"),r=u("../lib/extend").extendFlat,t=o({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=x.defaultLine,q.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:o({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:r(e({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:x.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:x.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:x.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:y.newshape,activeshape:y.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:r({},p.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:o({editType:"layoutstyle"})}}},{"../components/color/attributes":365,"../components/shapes/draw_newshape/attributes":451,"../lib/extend":493,"./animation_attributes":548,"./font_attributes":585,"./pad_attributes":618}],611:[function(u,q,W){var o=u("../../lib/sort_object_keys"),p='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',x=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',p].join(" "),y=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),e={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:p,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:x,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:x,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:y,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:y,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},r=o(e);q.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:e,styleValuesNonMapbox:r,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@1.10.1."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",r.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},{"../../lib/sort_object_keys":526}],612:[function(u,q,W){var o=u("../../lib");q.exports=function(p,x){var y=p.split(" "),e=y[0],r=y[1],t=o.isArrayOrTypedArray(x)?o.mean(x):x,i=.5+t/100,n=1.5+t/100,h=["",""],s=[0,0];switch(e){case"top":h[0]="top",s[1]=-n;break;case"bottom":h[0]="bottom",s[1]=n}switch(r){case"left":h[1]="right",s[0]=-i;break;case"right":h[1]="left",s[0]=i}return{anchor:h[0]&&h[1]?h.join("-"):h[0]?h[0]:h[1]?h[1]:"center",offset:s}}},{"../../lib":503}],613:[function(u,q,W){var o=u("mapbox-gl/dist/mapbox-gl-unminified"),p=u("../../lib"),x=p.strTranslate,y=p.strScale,e=u("../../plots/get_data").getSubplotCalcData,r=u("../../constants/xmlns_namespaces"),t=u("@plotly/d3"),i=u("../../components/drawing"),n=u("../../lib/svg_text_utils"),h=u("./mapbox"),s=W.constants=u("./constants");function a(l){return typeof l=="string"&&(s.styleValuesMapbox.indexOf(l)!==-1||l.indexOf("mapbox://")===0)}W.name="mapbox",W.attr="subplot",W.idRoot="mapbox",W.idRegex=W.attrRegex=p.counterRegex("mapbox"),W.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},W.layoutAttributes=u("./layout_attributes"),W.supplyLayoutDefaults=u("./layout_defaults"),W.plot=function(l){var f=l._fullLayout,d=l.calcdata,v=f._subplots.mapbox;if(o.version!==s.requiredVersion)throw new Error(s.wrongVersionErrorMsg);var m=function(T,k){var L=T._fullLayout;if(T._context.mapboxAccessToken==="")return"";for(var M=[],I=[],P=!1,S=!1,E=0;E<k.length;E++){var D=L[k[E]],F=D.accesstoken;a(D.style)&&(F?p.pushUnique(M,F):(a(D._input.style)&&(p.error("Uses Mapbox map style, but did not set an access token."),P=!0),S=!0)),F&&p.pushUnique(I,F)}if(S){var H=P?s.noAccessTokenErrorMsg:s.missingStyleErrorMsg;throw p.error(H),new Error(H)}return M.length?(M.length>1&&p.warn(s.multipleTokensErrorMsg),M[0]):(I.length&&p.log(["Listed mapbox access token(s)",I.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(l,v);o.accessToken=m;for(var c=0;c<v.length;c++){var b=v[c],g=e(d,"mapbox",b),w=f[b],_=w._subplot;_||(_=new h(l,b),f[b]._subplot=_),_.viewInitial||(_.viewInitial={center:p.extendFlat({},w.center),zoom:w.zoom,bearing:w.bearing,pitch:w.pitch}),_.plot(g,f,l._promises)}},W.clean=function(l,f,d,v){for(var m=v._subplots.mapbox||[],c=0;c<m.length;c++){var b=m[c];!f[b]&&v[b]._subplot&&v[b]._subplot.destroy()}},W.toSVG=function(l){for(var f=l._fullLayout,d=f._subplots.mapbox,v=f._size,m=0;m<d.length;m++){var c=f[d[m]],b=c.domain,g=c._subplot.toImage("png");f._glimages.append("svg:image").attr({xmlns:r.svg,"xlink:href":g,x:v.l+v.w*b.x[0],y:v.t+v.h*(1-b.y[1]),width:v.w*(b.x[1]-b.x[0]),height:v.h*(b.y[1]-b.y[0]),preserveAspectRatio:"none"});var w=t.select(c._subplot.div);if(w.select(".mapboxgl-ctrl-logo").node().offsetParent!==null){var _=f._glimages.append("g");_.attr("transform",x(v.l+v.w*b.x[0]+10,v.t+v.h*(1-b.y[0])-31)),_.append("path").attr("d",s.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),_.append("path").attr("d",s.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),_.append("path").attr("d",s.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),_.append("polygon").attr("points",s.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var T=w.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),k=f._glimages.append("g"),L=k.append("text");L.text(T).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":T});var M=i.bBox(L.node()),I=v.w*(b.x[1]-b.x[0]);if(M.width>I/2){var P=T.split("|").join("<br>");L.text(P).attr("data-unformatted",P).call(n.convertToTspans,l),M=i.bBox(L.node())}L.attr("transform",x(-3,8-M.height)),k.insert("rect",".static-attribution").attr({x:-M.width-6,y:-M.height-3,width:M.width+6,height:M.height+3,fill:"rgba(255, 255, 255, 0.75)"});var S=1;M.width+6>I&&(S=I/(M.width+6));var E=[v.l+v.w*b.x[1],v.t+v.h*(1-b.y[0])];k.attr("transform",x(E[0],E[1])+y(S))}},W.updateFx=function(l){for(var f=l._fullLayout,d=f._subplots.mapbox,v=0;v<d.length;v++)f[d[v]]._subplot.updateFx(f)}},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/get_data":593,"./constants":611,"./layout_attributes":615,"./layout_defaults":616,"./mapbox":617,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],614:[function(u,q,W){var o=u("../../lib"),p=u("../../lib/svg_text_utils").sanitizeHTML,x=u("./convert_text_opts"),y=u("./constants");function e(n,h){this.subplot=n,this.uid=n.uid+"-"+h,this.index=h,this.idSource="source-"+this.uid,this.idLayer=y.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var r=e.prototype;function t(n){if(!n.visible)return!1;var h=n.source;if(Array.isArray(h)&&h.length>0){for(var s=0;s<h.length;s++)if(typeof h[s]!="string"||h[s].length===0)return!1;return!0}return o.isPlainObject(h)||typeof h=="string"&&h.length>0}function i(n){var h={},s={};switch(n.type){case"circle":o.extendFlat(s,{"circle-radius":n.circle.radius,"circle-color":n.color,"circle-opacity":n.opacity});break;case"line":o.extendFlat(s,{"line-width":n.line.width,"line-color":n.color,"line-opacity":n.opacity,"line-dasharray":n.line.dash});break;case"fill":o.extendFlat(s,{"fill-color":n.color,"fill-outline-color":n.fill.outlinecolor,"fill-opacity":n.opacity});break;case"symbol":var a=n.symbol,l=x(a.textposition,a.iconsize);o.extendFlat(h,{"icon-image":a.icon+"-15","icon-size":a.iconsize/10,"text-field":a.text,"text-size":a.textfont.size,"text-anchor":l.anchor,"text-offset":l.offset,"symbol-placement":a.placement}),o.extendFlat(s,{"icon-color":n.color,"text-color":a.textfont.color,"text-opacity":n.opacity});break;case"raster":o.extendFlat(s,{"raster-fade-duration":0,"raster-opacity":n.opacity})}return{layout:h,paint:s}}r.update=function(n){this.visible?this.needsNewImage(n)?this.updateImage(n):this.needsNewSource(n)?(this.removeLayer(),this.updateSource(n),this.updateLayer(n)):this.needsNewLayer(n)?this.updateLayer(n):this.updateStyle(n):(this.updateSource(n),this.updateLayer(n)),this.visible=t(n)},r.needsNewImage=function(n){return this.subplot.map.getSource(this.idSource)&&this.sourceType==="image"&&n.sourcetype==="image"&&(this.source!==n.source||JSON.stringify(this.coordinates)!==JSON.stringify(n.coordinates))},r.needsNewSource=function(n){return this.sourceType!==n.sourcetype||JSON.stringify(this.source)!==JSON.stringify(n.source)||this.layerType!==n.type},r.needsNewLayer=function(n){return this.layerType!==n.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},r.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},r.updateImage=function(n){this.subplot.map.getSource(this.idSource).updateImage({url:n.source,coordinates:n.coordinates});var h=this.findFollowingMapboxLayerId(this.lookupBelow());h!==null&&this.subplot.map.moveLayer(this.idLayer,h)},r.updateSource=function(n){var h=this.subplot.map;if(h.getSource(this.idSource)&&h.removeSource(this.idSource),this.sourceType=n.sourcetype,this.source=n.source,t(n)){var s=function(a){var l,f=a.sourcetype,d=a.source,v={type:f};return f==="geojson"?l="data":f==="vector"?l=typeof d=="string"?"url":"tiles":f==="raster"?(l="tiles",v.tileSize=256):f==="image"&&(l="url",v.coordinates=a.coordinates),v[l]=d,a.sourceattribution&&(v.attribution=p(a.sourceattribution)),v}(n);h.addSource(this.idSource,s)}},r.findFollowingMapboxLayerId=function(n){if(n==="traces")for(var h=this.subplot.getMapLayers(),s=0;s<h.length;s++){var a=h[s].id;if(typeof a=="string"&&a.indexOf(y.traceLayerPrefix)===0){n=a;break}}return n},r.updateLayer=function(n){var h=this.subplot,s=i(n),a=this.lookupBelow(),l=this.findFollowingMapboxLayerId(a);this.removeLayer(),t(n)&&h.addLayer({id:this.idLayer,source:this.idSource,"source-layer":n.sourcelayer||"",type:n.type,minzoom:n.minzoom,maxzoom:n.maxzoom,layout:s.layout,paint:s.paint},l),this.layerType=n.type,this.below=a},r.updateStyle=function(n){if(t(n)){var h=i(n);this.subplot.setOptions(this.idLayer,"setLayoutProperty",h.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",h.paint)}},r.removeLayer=function(){var n=this.subplot.map;n.getLayer(this.idLayer)&&n.removeLayer(this.idLayer)},r.dispose=function(){var n=this.subplot.map;n.getLayer(this.idLayer)&&n.removeLayer(this.idLayer),n.getSource(this.idSource)&&n.removeSource(this.idSource)},q.exports=function(n,h,s){var a=new e(n,h);return a.update(s),a}},{"../../lib":503,"../../lib/svg_text_utils":529,"./constants":611,"./convert_text_opts":612}],615:[function(u,q,W){var o=u("../../lib"),p=u("../../components/color").defaultLine,x=u("../domain").attributes,y=u("../font_attributes"),e=u("../../traces/scatter/attributes").textposition,r=u("../../plot_api/edit_types").overrideAll,t=u("../../plot_api/plot_template").templatedArray,i=u("./constants"),n=y({});n.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(q.exports=r({_arrayAttrRegexps:[o.counterRegex("mapbox",".layers",!0)],domain:x({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:i.styleValuesMapbox.concat(i.styleValuesNonMapbox),dflt:i.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:t("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:p},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:p}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:n,textposition:o.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":366,"../../lib":503,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":926,"../domain":584,"../font_attributes":585,"./constants":611}],616:[function(u,q,W){var o=u("../../lib"),p=u("../subplot_defaults"),x=u("../array_container_defaults"),y=u("./layout_attributes");function e(t,i,n,h){n("accesstoken",h.accessToken),n("style"),n("center.lon"),n("center.lat"),n("zoom"),n("bearing"),n("pitch"),x(t,i,{name:"layers",handleItemDefaults:r}),i._input=t}function r(t,i){function n(f,d){return o.coerce(t,i,y.layers,f,d)}if(n("visible")){var h,s=n("sourcetype"),a=s==="raster"||s==="image";n("source"),n("sourceattribution"),s==="vector"&&n("sourcelayer"),s==="image"&&n("coordinates"),a&&(h="raster");var l=n("type",h);a&&l!=="raster"&&(l=i.type="raster",o.log("Source types *raster* and *image* must drawn *raster* layer type.")),n("below"),n("color"),n("opacity"),n("minzoom"),n("maxzoom"),l==="circle"&&n("circle.radius"),l==="line"&&(n("line.width"),n("line.dash")),l==="fill"&&n("fill.outlinecolor"),l==="symbol"&&(n("symbol.icon"),n("symbol.iconsize"),n("symbol.text"),o.coerceFont(n,"symbol.textfont"),n("symbol.textposition"),n("symbol.placement"))}}q.exports=function(t,i,n){p(t,i,n,{type:"mapbox",attributes:y,handleDefaults:e,partition:"y",accessToken:i._mapboxAccessToken})}},{"../../lib":503,"../array_container_defaults":549,"../subplot_defaults":632,"./layout_attributes":615}],617:[function(u,q,W){var o=u("mapbox-gl/dist/mapbox-gl-unminified"),p=u("../../lib"),x=u("../../lib/geo_location_utils"),y=u("../../registry"),e=u("../cartesian/axes"),r=u("../../components/dragelement"),t=u("../../components/fx"),i=u("../../components/dragelement/helpers"),n=i.rectMode,h=i.drawMode,s=i.selectMode,a=u("../cartesian/select").prepSelect,l=u("../cartesian/select").clearSelect,f=u("../cartesian/select").clearSelectionsCache,d=u("../cartesian/select").selectOnClick,v=u("./constants"),m=u("./layers");function c(k,L){this.id=L,this.gd=k;var M=k._fullLayout,I=k._context;this.container=M._glcontainer.node(),this.isStatic=I.staticPlot,this.uid=M._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(M),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var b=c.prototype;b.plot=function(k,L,M){var I,P=this,S=L[P.id];P.map&&S.accesstoken!==P.accessToken&&(P.map.remove(),P.map=null,P.styleObj=null,P.traceHash={},P.layerList=[]),I=P.map?new Promise(function(E,D){P.updateMap(k,L,E,D)}):new Promise(function(E,D){P.createMap(k,L,E,D)}),M.push(I)},b.createMap=function(k,L,M,I){var P=this,S=L[P.id],E=P.styleObj=w(S.style);P.accessToken=S.accesstoken;var D=P.map=new o.Map({container:P.div,style:E.style,center:T(S.center),zoom:S.zoom,bearing:S.bearing,pitch:S.pitch,interactive:!P.isStatic,preserveDrawingBuffer:P.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new o.AttributionControl({compact:!0}));D._canvas.style.left="0px",D._canvas.style.top="0px",P.rejectOnError(I),P.isStatic||P.initFx(k,L);var F=[];F.push(new Promise(function(H){D.once("load",H)})),F=F.concat(x.fetchTraceGeoData(k)),Promise.all(F).then(function(){P.fillBelowLookup(k,L),P.updateData(k),P.updateLayout(L),P.resolveOnRender(M)}).catch(I)},b.updateMap=function(k,L,M,I){var P=this,S=P.map,E=L[this.id];P.rejectOnError(I);var D=[],F=w(E.style);JSON.stringify(P.styleObj)!==JSON.stringify(F)&&(P.styleObj=F,S.setStyle(F.style),P.traceHash={},D.push(new Promise(function(H){S.once("styledata",H)}))),D=D.concat(x.fetchTraceGeoData(k)),Promise.all(D).then(function(){P.fillBelowLookup(k,L),P.updateData(k),P.updateLayout(L),P.resolveOnRender(M)}).catch(I)},b.fillBelowLookup=function(k,L){var M,I,P=L[this.id].layers,S=this.belowLookup={},E=!1;for(M=0;M<k.length;M++){var D=k[M][0].trace,F=D._module;typeof D.below=="string"?I=D.below:F.getBelow&&(I=F.getBelow(D,this)),I===""&&(E=!0),S["trace-"+D.uid]=I||""}for(M=0;M<P.length;M++){var H=P[M];I=typeof H.below=="string"?H.below:E?"traces":"",S["layout-"+M]=I}var V,Q,K={};for(V in S)K[I=S[V]]?K[I].push(V):K[I]=[V];for(I in K){var Z=K[I];if(Z.length>1)for(M=0;M<Z.length;M++)(V=Z[M]).indexOf("trace-")===0?(Q=V.split("trace-")[1],this.traceHash[Q]&&(this.traceHash[Q].below=null)):V.indexOf("layout-")===0&&(Q=V.split("layout-")[1],this.layerList[Q]&&(this.layerList[Q].below=null))}};var g={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function w(k){var L={};return p.isPlainObject(k)?(L.id=k.id,L.style=k):typeof k=="string"?(L.id=k,v.styleValuesMapbox.indexOf(k)!==-1?L.style=_(k):v.stylesNonMapbox[k]?L.style=v.stylesNonMapbox[k]:L.style=k):(L.id=v.styleValueDflt,L.style=_(v.styleValueDflt)),L.transition={duration:0,delay:0},L}function _(k){return v.styleUrlPrefix+k+"-"+v.styleUrlSuffix}function T(k){return[k.lon,k.lat]}b.updateData=function(k){var L,M,I,P,S=this.traceHash,E=k.slice().sort(function(Q,K){return g[Q[0].trace.type]-g[K[0].trace.type]});for(I=0;I<E.length;I++){var D=E[I],F=!1;(L=S[(M=D[0].trace).uid])&&(L.type===M.type?(L.update(D),F=!0):L.dispose()),!F&&M._module&&(S[M.uid]=M._module.plot(this,D))}var H=Object.keys(S);e:for(I=0;I<H.length;I++){var V=H[I];for(P=0;P<k.length;P++)if(V===(M=k[P][0].trace).uid)continue e;(L=S[V]).dispose(),delete S[V]}},b.updateLayout=function(k){var L=this.map,M=k[this.id];this.dragging||this.wheeling||(L.setCenter(T(M.center)),L.setZoom(M.zoom),L.setBearing(M.bearing),L.setPitch(M.pitch)),this.updateLayers(k),this.updateFramework(k),this.updateFx(k),this.map.resize(),this.gd._context._scrollZoom.mapbox?L.scrollZoom.enable():L.scrollZoom.disable()},b.resolveOnRender=function(k){var L=this.map;L.on("render",function M(){L.loaded()&&(L.off("render",M),setTimeout(k,10))})},b.rejectOnError=function(k){var L=this.map;function M(){k(new Error(v.mapOnErrorMsg))}L.once("error",M),L.once("style.error",M),L.once("source.error",M),L.once("tile.error",M),L.once("layer.error",M)},b.createFramework=function(k){var L=this,M=L.div=document.createElement("div");M.id=L.uid,M.style.position="absolute",L.container.appendChild(M),L.xaxis={_id:"x",c2p:function(I){return L.project(I).x}},L.yaxis={_id:"y",c2p:function(I){return L.project(I).y}},L.updateFramework(k),L.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(L.mockAxis,k)},b.initFx=function(k,L){var M=this,I=M.gd,P=M.map;function S(){t.loneUnhover(L._hoverlayer)}function E(){var D=M.getView();I.emit("plotly_relayouting",M.getViewEditsWithDerived(D))}P.on("moveend",function(D){if(M.map){var F=I._fullLayout;if(D.originalEvent||M.wheeling){var H=F[M.id];y.call("_storeDirectGUIEdit",I.layout,F._preGUI,M.getViewEdits(H));var V=M.getView();H._input.center=H.center=V.center,H._input.zoom=H.zoom=V.zoom,H._input.bearing=H.bearing=V.bearing,H._input.pitch=H.pitch=V.pitch,I.emit("plotly_relayout",M.getViewEditsWithDerived(V))}D.originalEvent&&D.originalEvent.type==="mouseup"?M.dragging=!1:M.wheeling&&(M.wheeling=!1),F._rehover&&F._rehover()}}),P.on("wheel",function(){M.wheeling=!0}),P.on("mousemove",function(D){var F=M.div.getBoundingClientRect(),H=[D.originalEvent.offsetX,D.originalEvent.offsetY];D.target.getBoundingClientRect=function(){return F},M.xaxis.p2c=function(){return P.unproject(H).lng},M.yaxis.p2c=function(){return P.unproject(H).lat},I._fullLayout._rehover=function(){I._fullLayout._hoversubplot===M.id&&I._fullLayout[M.id]&&t.hover(I,D,M.id)},t.hover(I,D,M.id),I._fullLayout._hoversubplot=M.id}),P.on("dragstart",function(){M.dragging=!0,S()}),P.on("zoomstart",S),P.on("mouseout",function(){I._fullLayout._hoversubplot=null}),P.on("drag",E),P.on("zoom",E),P.on("dblclick",function(){var D=I._fullLayout[M.id];y.call("_storeDirectGUIEdit",I.layout,I._fullLayout._preGUI,M.getViewEdits(D));var F=M.viewInitial;P.setCenter(T(F.center)),P.setZoom(F.zoom),P.setBearing(F.bearing),P.setPitch(F.pitch);var H=M.getView();D._input.center=D.center=H.center,D._input.zoom=D.zoom=H.zoom,D._input.bearing=D.bearing=H.bearing,D._input.pitch=D.pitch=H.pitch,I.emit("plotly_doubleclick",null),I.emit("plotly_relayout",M.getViewEditsWithDerived(H))}),M.clearSelect=function(){f(M.dragOptions),l(M.dragOptions.gd)},M.onClickInPanFn=function(D){return function(F){var H=I._fullLayout.clickmode;H.indexOf("select")>-1&&d(F.originalEvent,I,[M.xaxis],[M.yaxis],M.id,D),H.indexOf("event")>-1&&t.click(I,F.originalEvent)}}},b.updateFx=function(k){var L=this,M=L.map,I=L.gd;if(!L.isStatic){var P,S=k.dragmode;P=n(S)?function(F,H){(F.range={})[L.id]=[D([H.xmin,H.ymin]),D([H.xmax,H.ymax])]}:function(F,H,V){(F.lassoPoints={})[L.id]=V.filtered.map(D)};var E=L.dragOptions;L.dragOptions=p.extendDeep(E||{},{dragmode:k.dragmode,element:L.div,gd:I,plotinfo:{id:L.id,domain:k[L.id].domain,xaxis:L.xaxis,yaxis:L.yaxis,fillRangeItems:P},xaxes:[L.xaxis],yaxes:[L.yaxis],subplot:L.id}),M.off("click",L.onClickInPanHandler),s(S)||h(S)?(M.dragPan.disable(),M.on("zoomstart",L.clearSelect),L.dragOptions.prepFn=function(F,H,V){a(F,H,V,L.dragOptions,S)},r.init(L.dragOptions)):(M.dragPan.enable(),M.off("zoomstart",L.clearSelect),L.div.onmousedown=null,L.onClickInPanHandler=L.onClickInPanFn(L.dragOptions),M.on("click",L.onClickInPanHandler))}function D(F){var H=L.map.unproject(F);return[H.lng,H.lat]}},b.updateFramework=function(k){var L=k[this.id].domain,M=k._size,I=this.div.style;I.width=M.w*(L.x[1]-L.x[0])+"px",I.height=M.h*(L.y[1]-L.y[0])+"px",I.left=M.l+L.x[0]*M.w+"px",I.top=M.t+(1-L.y[1])*M.h+"px",this.xaxis._offset=M.l+L.x[0]*M.w,this.xaxis._length=M.w*(L.x[1]-L.x[0]),this.yaxis._offset=M.t+(1-L.y[1])*M.h,this.yaxis._length=M.h*(L.y[1]-L.y[0])},b.updateLayers=function(k){var L,M=k[this.id].layers,I=this.layerList;if(M.length!==I.length){for(L=0;L<I.length;L++)I[L].dispose();for(I=this.layerList=[],L=0;L<M.length;L++)I.push(m(this,L,M[L]))}else for(L=0;L<M.length;L++)I[L].update(M[L])},b.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},b.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},b.setOptions=function(k,L,M){for(var I in M)this.map[L](k,I,M[I])},b.getMapLayers=function(){return this.map.getStyle().layers},b.addLayer=function(k,L){var M=this.map;if(typeof L=="string"){if(L==="")return void M.addLayer(k,L);for(var I=this.getMapLayers(),P=0;P<I.length;P++)if(L===I[P].id)return void M.addLayer(k,L);p.warn(["Trying to add layer with *below* value",L,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}M.addLayer(k)},b.project=function(k){return this.map.project(new o.LngLat(k[0],k[1]))},b.getView=function(){var k=this.map,L=k.getCenter(),M={lon:L.lng,lat:L.lat},I=k.getCanvas(),P=parseInt(I.style.width),S=parseInt(I.style.height);return{center:M,zoom:k.getZoom(),bearing:k.getBearing(),pitch:k.getPitch(),_derived:{coordinates:[k.unproject([0,0]).toArray(),k.unproject([P,0]).toArray(),k.unproject([P,S]).toArray(),k.unproject([0,S]).toArray()]}}},b.getViewEdits=function(k){for(var L=this.id,M=["center","zoom","bearing","pitch"],I={},P=0;P<M.length;P++){var S=M[P];I[L+"."+S]=k[S]}return I},b.getViewEditsWithDerived=function(k){var L=this.id,M=this.getViewEdits(k);return M[L+"._derived"]=k._derived,M},q.exports=c},{"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../registry":638,"../cartesian/axes":554,"../cartesian/select":575,"./constants":611,"./layers":614,"mapbox-gl/dist/mapbox-gl-unminified":239}],618:[function(u,q,W){q.exports=function(o){var p=o.editType;return{t:{valType:"number",dflt:0,editType:p},r:{valType:"number",dflt:0,editType:p},b:{valType:"number",dflt:0,editType:p},l:{valType:"number",dflt:0,editType:p},editType:p}}},{}],619:[function(u,q,W){var o=u("@plotly/d3"),p=u("d3-time-format").timeFormatLocale,x=u("d3-format").formatLocale,y=u("fast-isnumeric"),e=u("../registry"),r=u("../plot_api/plot_schema"),t=u("../plot_api/plot_template"),i=u("../lib"),n=u("../components/color"),h=u("../constants/numerical").BADNUM,s=u("./cartesian/axis_ids"),a=u("./cartesian/handle_outline").clearSelect,l=u("./animation_attributes"),f=u("./frame_attributes"),d=u("../plots/get_data").getModuleCalcData,v=i.relinkPrivateKeys,m=i._,c=q.exports={};i.extendFlat(c,e),c.attributes=u("./attributes"),c.attributes.type.values=c.allTypes,c.fontAttrs=u("./font_attributes"),c.layoutAttributes=u("./layout_attributes"),c.fontWeight="normal";var b=c.transformsRegistry,g=u("./command");c.executeAPICommand=g.executeAPICommand,c.computeAPICommandBindings=g.computeAPICommandBindings,c.manageCommandObserver=g.manageCommandObserver,c.hasSimpleAPICommandBindings=g.hasSimpleAPICommandBindings,c.redrawText=function(V){return V=i.getGraphDiv(V),new Promise(function(Q){setTimeout(function(){V._fullLayout&&(e.getComponentMethod("annotations","draw")(V),e.getComponentMethod("legend","draw")(V),e.getComponentMethod("colorbar","draw")(V),Q(c.previousPromises(V)))},300)})},c.resize=function(V){var Q;V=i.getGraphDiv(V);var K=new Promise(function(Z,$){V&&!i.isHidden(V)||$(new Error("Resize must be passed a displayed plot div element.")),V._redrawTimer&&clearTimeout(V._redrawTimer),V._resolveResize&&(Q=V._resolveResize),V._resolveResize=Z,V._redrawTimer=setTimeout(function(){if(!V.layout||V.layout.width&&V.layout.height||i.isHidden(V))Z(V);else{delete V.layout.width,delete V.layout.height;var re=V.changed;V.autoplay=!0,e.call("relayout",V,{autosize:!0}).then(function(){V.changed=re,V._resolveResize===Z&&(delete V._resolveResize,Z(V))})}},100)});return Q&&Q(K),K},c.previousPromises=function(V){if((V._promises||[]).length)return Promise.all(V._promises).then(function(){V._promises=[]})},c.addLinks=function(V){if(V._context.showLink||V._context.showSources){var Q=V._fullLayout,K=i.ensureSingle(Q._paper,"text","js-plot-link-container",function(U){U.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:n.defaultLine,"pointer-events":"all"}).each(function(){var te=o.select(this);te.append("tspan").classed("js-link-to-tool",!0),te.append("tspan").classed("js-link-spacer",!0),te.append("tspan").classed("js-sourcelinks",!0)})}),Z=K.node(),$={y:Q._paper.attr("height")-9};document.body.contains(Z)&&Z.getComputedTextLength()>=Q.width-20?($["text-anchor"]="start",$.x=5):($["text-anchor"]="end",$.x=Q._paper.attr("width")-7),K.attr($);var re=K.select(".js-link-to-tool"),R=K.select(".js-link-spacer"),N=K.select(".js-sourcelinks");V._context.showSources&&V._context.showSources(V),V._context.showLink&&function(U,te){te.text("");var j=te.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(U._context.linkText+" "+String.fromCharCode(187));if(U._context.sendData)j.on("click",function(){c.sendDataToCloud(U)});else{var Y=window.location.pathname.split("/"),J=window.location.search;j.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+Y[2].split(".")[0]+"/"+Y[1]+J})}}(V,re),R.text(re.text()&&N.text()?" - ":"")}},c.sendDataToCloud=function(V){var Q=(window.PLOTLYENV||{}).BASE_URL||V._context.plotlyServerURL;if(Q){V.emit("plotly_beforeexport");var K=o.select(V).append("div").attr("id","hiddenform").style("display","none"),Z=K.append("form").attr({action:Q+"/external",method:"post",target:"_blank"});return Z.append("input").attr({type:"text",name:"data"}).node().value=c.graphJson(V,!1,"keepdata"),Z.node().submit(),K.remove(),V.emit("plotly_afterexport"),!1}};var w=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],_=["year","month","dayMonth","dayMonthYear"];function T(V,Q){var K=V._context.locale;K||(K="en-US");var Z=!1,$={};function re(Y){for(var J=!0,ee=0;ee<Q.length;ee++){var ne=Q[ee];$[ne]||(Y[ne]?$[ne]=Y[ne]:J=!1)}J&&(Z=!0)}for(var R=0;R<2;R++){for(var N=V._context.locales,U=0;U<2;U++){var te=(N[K]||{}).format;if(te&&(re(te),Z))break;N=e.localeRegistry}var j=K.split("-")[0];if(Z||j===K)break;K=j}return Z||re(e.localeRegistry.en.format),$}function k(V,Q){var K={_fullLayout:Q},Z=V._id.charAt(0)==="x",$=V._mainAxis._anchorAxis,re="",R="",N="";if($&&(N=$._mainAxis._id,re=Z?V._id+N:N+V._id),!re||!Q._plots[re]){re="";for(var U=V._counterAxes,te=0;te<U.length;te++){var j=U[te],Y=Z?V._id+j:j+V._id;R||(R=Y);var J=s.getFromId(K,j);if(N&&J.overlaying===N){re=Y;break}}}return re||R}function L(V){var Q=V.transforms;if(Array.isArray(Q)&&Q.length)for(var K=0;K<Q.length;K++){var Z=Q[K],$=Z._module||b[Z.type];if($&&$.makesData)return!0}return!1}function M(V,Q,K,Z){for(var $=V.transforms,re=[V],R=0;R<$.length;R++){var N=$[R],U=b[N.type];U&&U.transform&&(re=U.transform(re,{transform:N,fullTrace:V,fullData:Q,layout:K,fullLayout:Z,transformIndex:R}))}return re}function I(V){return typeof V=="string"&&V.substr(V.length-2)==="px"&&parseFloat(V)}function P(V){var Q=V.margin;if(!V._size){var K=V._size={l:Math.round(Q.l),r:Math.round(Q.r),t:Math.round(Q.t),b:Math.round(Q.b),p:Math.round(Q.pad)};K.w=Math.round(V.width)-K.l-K.r,K.h=Math.round(V.height)-K.t-K.b}V._pushmargin||(V._pushmargin={}),V._pushmarginIds||(V._pushmarginIds={})}c.supplyDefaults=function(V,Q){var K=Q&&Q.skipUpdateCalc,Z=V._fullLayout||{};if(Z._skipDefaults)delete Z._skipDefaults;else{var $,re=V._fullLayout={},R=V.layout||{},N=V._fullData||[],U=V._fullData=[],te=V.data||[],j=V.calcdata||[],Y=V._context||{};V._transitionData||c.createTransitionData(V),re._dfltTitle={plot:m(V,"Click to enter Plot title"),x:m(V,"Click to enter X axis title"),y:m(V,"Click to enter Y axis title"),colorbar:m(V,"Click to enter Colorscale title"),annotation:m(V,"new text")},re._traceWord=m(V,"trace");var J=T(V,w);if(re._mapboxAccessToken=Y.mapboxAccessToken,Z._initialAutoSizeIsDone){var ee=Z.width,ne=Z.height;c.supplyLayoutGlobalDefaults(R,re,J),R.width||(re.width=ee),R.height||(re.height=ne),c.sanitizeMargins(re)}else{c.supplyLayoutGlobalDefaults(R,re,J);var se=!R.width||!R.height,oe=re.autosize,he=Y.autosizable;se&&(oe||he)?c.plotAutoSize(V,R,re):se&&c.sanitizeMargins(re),!oe&&se&&(R.width=re.width,R.height=re.height)}re._d3locale=function(Ue,We){return Ue.decimal=We.charAt(0),Ue.thousands=We.charAt(1),{numberFormat:function(Ze){try{Ze=x(Ue).format(i.adjustFormat(Ze))}catch{return i.warnBadFormat(Ze),i.noFormat}return Ze},timeFormat:p(Ue).utcFormat}}(J,re.separators),re._extraFormat=T(V,_),re._initialAutoSizeIsDone=!0,re._dataLength=te.length,re._modules=[],re._visibleModules=[],re._basePlotModules=[];var le=re._subplots=function(){var Ue,We,Ze=e.collectableSubplotTypes,nt={};if(!Ze){Ze=[];var ft=e.subplotsRegistry;for(var xt in ft){var It=ft[xt].attr;if(It&&(Ze.push(xt),Array.isArray(It)))for(We=0;We<It.length;We++)i.pushUnique(Ze,It[We])}}for(Ue=0;Ue<Ze.length;Ue++)nt[Ze[Ue]]=[];return nt}(),de=re._splomAxes={x:{},y:{}},xe=re._splomSubplots={};re._splomGridDflt={},re._scatterStackOpts={},re._firstScatter={},re._alignmentOpts={},re._colorAxes={},re._requestRangeslider={},re._traceUids=function(Ue,We){var Ze,nt,ft=We.length,xt=[];for(Ze=0;Ze<Ue.length;Ze++){var It=Ue[Ze]._fullInput;It!==nt&&xt.push(It),nt=It}var Et=xt.length,it=new Array(ft),rt={};function At(Ve,Ye){it[Ye]=Ve,rt[Ve]=1}function Gt(Ve,Ye){if(Ve&&typeof Ve=="string"&&!rt[Ve])return At(Ve,Ye),!0}for(Ze=0;Ze<ft;Ze++){var Qt=We[Ze].uid;typeof Qt=="number"&&(Qt=String(Qt)),Gt(Qt,Ze)||Ze<Et&&Gt(xt[Ze].uid,Ze)||At(i.randstr(rt),Ze)}return it}(N,te),re._globalTransforms=(V._context||{}).globalTransforms,c.supplyDataDefaults(te,U,R,re);var we=Object.keys(de.x),be=Object.keys(de.y);if(we.length>1&&be.length>1){for(e.getComponentMethod("grid","sizeDefaults")(R,re),$=0;$<we.length;$++)i.pushUnique(le.xaxis,we[$]);for($=0;$<be.length;$++)i.pushUnique(le.yaxis,be[$]);for(var Ae in xe)i.pushUnique(le.cartesian,Ae)}if(re._has=c._hasPlotType.bind(re),N.length===U.length)for($=0;$<U.length;$++)v(U[$],N[$]);c.supplyLayoutModuleDefaults(R,re,U,V._transitionData);var fe=re._visibleModules,me=[];for($=0;$<fe.length;$++){var ke=fe[$].crossTraceDefaults;ke&&i.pushUnique(me,ke)}for($=0;$<me.length;$++)me[$](U,re);re._hasOnlyLargeSploms=re._basePlotModules.length===1&&re._basePlotModules[0].name==="splom"&&we.length>15&&be.length>15&&re.shapes.length===0&&re.images.length===0,c.linkSubplots(U,re,N,Z),c.cleanPlot(U,re,N,Z);var Te=!(!Z._has||!Z._has("gl2d")),Me=!(!re._has||!re._has("gl2d")),Oe=!(!Z._has||!Z._has("cartesian"))||Te,Fe=!(!re._has||!re._has("cartesian"))||Me;Oe&&!Fe?Z._bgLayer.remove():Fe&&!Oe&&(re._shouldCreateBgLayer=!0),Z._zoomlayer&&!V._dragging&&a({_fullLayout:Z}),function(Ue,We){var Ze,nt=[];We.meta&&(Ze=We._meta={meta:We.meta,layout:{meta:We.meta}});for(var ft=0;ft<Ue.length;ft++){var xt=Ue[ft];xt.meta?nt[xt.index]=xt._meta={meta:xt.meta}:We.meta&&(xt._meta={meta:We.meta}),We.meta&&(xt._meta.layout={meta:We.meta})}nt.length&&(Ze||(Ze=We._meta={}),Ze.data=nt)}(U,re),v(re,Z),e.getComponentMethod("colorscale","crossTraceDefaults")(U,re),re._preGUI||(re._preGUI={}),re._tracePreGUI||(re._tracePreGUI={});var qe,et=re._tracePreGUI,ze={};for(qe in et)ze[qe]="old";for($=0;$<U.length;$++)ze[qe=U[$]._fullInput.uid]||(et[qe]={}),ze[qe]="new";for(qe in ze)ze[qe]==="old"&&delete et[qe];P(re),e.getComponentMethod("rangeslider","makeData")(re),K||j.length!==U.length||c.supplyDefaultsUpdateCalc(j,U)}},c.supplyDefaultsUpdateCalc=function(V,Q){for(var K=0;K<Q.length;K++){var Z=Q[K],$=(V[K]||[])[0];if($&&$.trace){var re=$.trace;if(re._hasCalcTransform){var R,N,U,te=re._arrayAttrs;for(R=0;R<te.length;R++)N=te[R],U=i.nestedProperty(re,N).get().slice(),i.nestedProperty(Z,N).set(U)}$.trace=Z}}},c.createTransitionData=function(V){V._transitionData||(V._transitionData={}),V._transitionData._frames||(V._transitionData._frames=[]),V._transitionData._frameHash||(V._transitionData._frameHash={}),V._transitionData._counter||(V._transitionData._counter=0),V._transitionData._interruptCallbacks||(V._transitionData._interruptCallbacks=[])},c._hasPlotType=function(V){var Q,K=this._basePlotModules||[];for(Q=0;Q<K.length;Q++)if(K[Q].name===V)return!0;var Z=this._modules||[];for(Q=0;Q<Z.length;Q++){var $=Z[Q].name;if($===V)return!0;var re=e.modules[$];if(re&&re.categories[V])return!0}return!1},c.cleanPlot=function(V,Q,K,Z){var $,re,R=Z._basePlotModules||[];for($=0;$<R.length;$++){var N=R[$];N.clean&&N.clean(V,Q,K,Z)}var U=Z._has&&Z._has("gl"),te=Q._has&&Q._has("gl");U&&!te&&Z._glcontainer!==void 0&&(Z._glcontainer.selectAll(".gl-canvas").remove(),Z._glcontainer.selectAll(".no-webgl").remove(),Z._glcanvas=null);var j=!!Z._infolayer;e:for($=0;$<K.length;$++){var Y=K[$].uid;for(re=0;re<V.length;re++)if(Y===V[re].uid)continue e;j&&Z._infolayer.select(".cb"+Y).remove()}},c.linkSubplots=function(V,Q,K,Z){var $,re,R=Z._plots||{},N=Q._plots={},U=Q._subplots,te={_fullData:V,_fullLayout:Q},j=U.cartesian.concat(U.gl2d||[]);for($=0;$<j.length;$++){var Y,J=j[$],ee=R[J],ne=s.getFromId(te,J,"x"),se=s.getFromId(te,J,"y");for(ee?Y=N[J]=ee:(Y=N[J]={}).id=J,ne._counterAxes.push(se._id),se._counterAxes.push(ne._id),ne._subplotsWith.push(J),se._subplotsWith.push(J),Y.xaxis=ne,Y.yaxis=se,Y._hasClipOnAxisFalse=!1,re=0;re<V.length;re++){var oe=V[re];if(oe.xaxis===Y.xaxis._id&&oe.yaxis===Y.yaxis._id&&oe.cliponaxis===!1){Y._hasClipOnAxisFalse=!0;break}}}var he,le=s.list(te,null,!0);for($=0;$<le.length;$++){var de=null;(he=le[$]).overlaying&&(de=s.getFromId(te,he.overlaying))&&de.overlaying&&(he.overlaying=!1,de=null),he._mainAxis=de||he,de&&(he.domain=de.domain.slice()),he._anchorAxis=he.anchor==="free"?null:s.getFromId(te,he.anchor)}for($=0;$<le.length;$++)if((he=le[$])._counterAxes.sort(s.idSort),he._subplotsWith.sort(i.subplotSort),he._mainSubplot=k(he,Q),he._counterAxes.length&&(he.spikemode&&he.spikemode.indexOf("across")!==-1||he.automargin&&he.mirror&&he.anchor!=="free"||e.getComponentMethod("rangeslider","isVisible")(he))){var xe=1,we=0;for(re=0;re<he._counterAxes.length;re++){var be=s.getFromId(te,he._counterAxes[re]);xe=Math.min(xe,be.domain[0]),we=Math.max(we,be.domain[1])}xe<we&&(he._counterDomainMin=xe,he._counterDomainMax=we)}},c.clearExpandedTraceDefaultColors=function(V){var Q,K,Z;for(K=[],(Q=V._module._colorAttrs)||(V._module._colorAttrs=Q=[],r.crawl(V._module.attributes,function($,re,R,N){K[N]=re,K.length=N+1,$.valType==="color"&&$.dflt===void 0&&Q.push(K.join("."))})),Z=0;Z<Q.length;Z++)i.nestedProperty(V,"_input."+Q[Z]).get()||i.nestedProperty(V,Q[Z]).set(null)},c.supplyDataDefaults=function(V,Q,K,Z){var $,re,R,N=Z._modules,U=Z._visibleModules,te=Z._basePlotModules,j=0,Y=0;function J(Ae){Q.push(Ae);var fe=Ae._module;fe&&(i.pushUnique(N,fe),Ae.visible===!0&&i.pushUnique(U,fe),i.pushUnique(te,Ae._module.basePlotModule),j++,Ae._input.visible!==!1&&Y++)}Z._transformModules=[];var ee={},ne=[],se=(K.template||{}).data||{},oe=t.traceTemplater(se);for($=0;$<V.length;$++){if(R=V[$],(re=oe.newTrace(R)).uid=Z._traceUids[$],c.supplyTraceDefaults(R,re,Y,Z,$),re.index=$,re._input=R,re._expandedIndex=j,re.transforms&&re.transforms.length)for(var he=R.visible!==!1&&re.visible===!1,le=M(re,Q,K,Z),de=0;de<le.length;de++){var xe=le[de],we={_template:re._template,type:re.type,uid:re.uid+de};he&&xe.visible===!1&&delete xe.visible,c.supplyTraceDefaults(xe,we,j,Z,$),v(we,xe),we.index=$,we._input=R,we._fullInput=re,we._expandedIndex=j,we._expandedInput=xe,J(we)}else re._fullInput=re,re._expandedInput=re,J(re);e.traceIs(re,"carpetAxis")&&(ee[re.carpet]=re),e.traceIs(re,"carpetDependent")&&ne.push($)}for($=0;$<ne.length;$++)if((re=Q[ne[$]]).visible){var be=ee[re.carpet];re._carpet=be,be&&be.visible?(re.xaxis=be.xaxis,re.yaxis=be.yaxis):re.visible=!1}},c.supplyAnimationDefaults=function(V){var Q;V=V||{};var K={};function Z($,re){return i.coerce(V||{},K,l,$,re)}if(Z("mode"),Z("direction"),Z("fromcurrent"),Array.isArray(V.frame))for(K.frame=[],Q=0;Q<V.frame.length;Q++)K.frame[Q]=c.supplyAnimationFrameDefaults(V.frame[Q]||{});else K.frame=c.supplyAnimationFrameDefaults(V.frame||{});if(Array.isArray(V.transition))for(K.transition=[],Q=0;Q<V.transition.length;Q++)K.transition[Q]=c.supplyAnimationTransitionDefaults(V.transition[Q]||{});else K.transition=c.supplyAnimationTransitionDefaults(V.transition||{});return K},c.supplyAnimationFrameDefaults=function(V){var Q={};function K(Z,$){return i.coerce(V||{},Q,l.frame,Z,$)}return K("duration"),K("redraw"),Q},c.supplyAnimationTransitionDefaults=function(V){var Q={};function K(Z,$){return i.coerce(V||{},Q,l.transition,Z,$)}return K("duration"),K("easing"),Q},c.supplyFrameDefaults=function(V){var Q={};function K(Z,$){return i.coerce(V,Q,f,Z,$)}return K("group"),K("name"),K("traces"),K("baseframe"),K("data"),K("layout"),Q},c.supplyTraceDefaults=function(V,Q,K,Z,$){var re,R=Z.colorway||n.defaults,N=R[K%R.length];function U(le,de){return i.coerce(V,Q,c.attributes,le,de)}var te=U("visible");U("type"),U("name",Z._traceWord+" "+$),U("uirevision",Z.uirevision);var j=c.getModule(Q);if(Q._module=j,j){var Y=j.basePlotModule,J=Y.attr,ee=Y.attributes;if(J&&ee){var ne=Z._subplots,se="";if(te||Y.name!=="gl2d"){if(Array.isArray(J))for(re=0;re<J.length;re++){var oe=J[re],he=i.coerce(V,Q,ee,oe);ne[oe]&&i.pushUnique(ne[oe],he),se+=he}else se=i.coerce(V,Q,ee,J);ne[Y.name]&&i.pushUnique(ne[Y.name],se)}}}return te&&(U("customdata"),U("ids"),U("meta"),e.traceIs(Q,"showLegend")?(i.coerce(V,Q,j.attributes.showlegend?j.attributes:c.attributes,"showlegend"),U("legendgroup"),U("legendgrouptitle.text"),U("legendrank"),Q._dfltShowLegend=!0):Q._dfltShowLegend=!1,j&&j.supplyDefaults(V,Q,N,Z),e.traceIs(Q,"noOpacity")||U("opacity"),e.traceIs(Q,"notLegendIsolatable")&&(Q.visible=!!Q.visible),e.traceIs(Q,"noHover")||(Q.hovertemplate||i.coerceHoverinfo(V,Q,Z),Q.type!=="parcats"&&e.getComponentMethod("fx","supplyDefaults")(V,Q,N,Z)),j&&j.selectPoints&&U("selectedpoints"),c.supplyTransformDefaults(V,Q,Z)),Q},c.hasMakesDataTransform=L,c.supplyTransformDefaults=function(V,Q,K){if(Q._length||L(V)){var Z=K._globalTransforms||[],$=K._transformModules||[];if(Array.isArray(V.transforms)||Z.length!==0)for(var re=V.transforms||[],R=Z.concat(re),N=Q.transforms=[],U=0;U<R.length;U++){var te,j=R[U],Y=j.type,J=b[Y],ee=!(j._module&&j._module===J),ne=J&&typeof J.transform=="function";J||i.warn("Unrecognized transform type "+Y+"."),J&&J.supplyDefaults&&(ee||ne)?((te=J.supplyDefaults(j,Q,K,V)).type=Y,te._module=J,i.pushUnique($,J)):te=i.extendFlat({},j),N.push(te)}}},c.supplyLayoutGlobalDefaults=function(V,Q,K){function Z(U,te){return i.coerce(V,Q,c.layoutAttributes,U,te)}var $=V.template;i.isPlainObject($)&&(Q.template=$,Q._template=$.layout,Q._dataTemplate=$.data),Z("autotypenumbers");var re=i.coerceFont(Z,"font"),R=re.size;i.coerceFont(Z,"title.font",i.extendFlat({},re,{size:Math.round(1.4*R)})),Z("title.text",Q._dfltTitle.plot),Z("title.xref"),Z("title.yref"),Z("title.x"),Z("title.y"),Z("title.xanchor"),Z("title.yanchor"),Z("title.pad.t"),Z("title.pad.r"),Z("title.pad.b"),Z("title.pad.l"),Z("uniformtext.mode")&&Z("uniformtext.minsize"),Z("autosize",!(V.width&&V.height)),Z("width"),Z("height"),Z("margin.l"),Z("margin.r"),Z("margin.t"),Z("margin.b"),Z("margin.pad"),Z("margin.autoexpand"),V.width&&V.height&&c.sanitizeMargins(Q),e.getComponentMethod("grid","sizeDefaults")(V,Q),Z("paper_bgcolor"),Z("separators",K.decimal+K.thousands),Z("hidesources"),Z("colorway"),Z("datarevision");var N=Z("uirevision");Z("editrevision",N),Z("selectionrevision",N),e.getComponentMethod("modebar","supplyLayoutDefaults")(V,Q),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(V,Q,Z),Z("meta"),i.isPlainObject(V.transition)&&(Z("transition.duration"),Z("transition.easing"),Z("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(V,Q,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(V,Q,Z)},c.plotAutoSize=function(V,Q,K){var Z,$,re=V._context||{},R=re.frameMargins,N=i.isPlotDiv(V);if(N&&V.emit("plotly_autosize"),re.fillFrame)Z=window.innerWidth,$=window.innerHeight,document.body.style.overflow="hidden";else{var U=N?window.getComputedStyle(V):{};if(Z=I(U.width)||I(U.maxWidth)||K.width,$=I(U.height)||I(U.maxHeight)||K.height,y(R)&&R>0){var te=1-2*R;Z=Math.round(te*Z),$=Math.round(te*$)}}var j=c.layoutAttributes.width.min,Y=c.layoutAttributes.height.min;Z<j&&(Z=j),$<Y&&($=Y);var J=!Q.width&&Math.abs(K.width-Z)>1,ee=!Q.height&&Math.abs(K.height-$)>1;(ee||J)&&(J&&(K.width=Z),ee&&(K.height=$)),V._initialAutoSize||(V._initialAutoSize={width:Z,height:$}),c.sanitizeMargins(K)},c.supplyLayoutModuleDefaults=function(V,Q,K,Z){var $,re,R,N=e.componentsRegistry,U=Q._basePlotModules,te=e.subplotsRegistry.cartesian;for($ in N)(R=N[$]).includeBasePlot&&R.includeBasePlot(V,Q);for(var j in U.length||U.push(te),Q._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(V,Q),te.finalizeSubplots(V,Q)),Q._subplots)Q._subplots[j].sort(i.subplotSort);for(re=0;re<U.length;re++)(R=U[re]).supplyLayoutDefaults&&R.supplyLayoutDefaults(V,Q,K);var Y=Q._modules;for(re=0;re<Y.length;re++)(R=Y[re]).supplyLayoutDefaults&&R.supplyLayoutDefaults(V,Q,K);var J=Q._transformModules;for(re=0;re<J.length;re++)(R=J[re]).supplyLayoutDefaults&&R.supplyLayoutDefaults(V,Q,K,Z);for($ in N)(R=N[$]).supplyLayoutDefaults&&R.supplyLayoutDefaults(V,Q,K)},c.purge=function(V){var Q=V._fullLayout||{};Q._glcontainer!==void 0&&(Q._glcontainer.selectAll(".gl-canvas").remove(),Q._glcontainer.remove(),Q._glcanvas=null),Q._modeBar&&Q._modeBar.destroy(),V._transitionData&&(V._transitionData._interruptCallbacks&&(V._transitionData._interruptCallbacks.length=0),V._transitionData._animationRaf&&window.cancelAnimationFrame(V._transitionData._animationRaf)),i.clearThrottle(),i.clearResponsive(V),delete V.data,delete V.layout,delete V._fullData,delete V._fullLayout,delete V.calcdata,delete V.empty,delete V.fid,delete V.undoqueue,delete V.undonum,delete V.autoplay,delete V.changed,delete V._promises,delete V._redrawTimer,delete V._hmlumcount,delete V._hmpixcount,delete V._transitionData,delete V._transitioning,delete V._initialAutoSize,delete V._transitioningWithDuration,delete V._dragging,delete V._dragged,delete V._dragdata,delete V._hoverdata,delete V._snapshotInProgress,delete V._editing,delete V._mouseDownTime,delete V._legendMouseDownTime,V.removeAllListeners&&V.removeAllListeners()},c.style=function(V){var Q,K=V._fullLayout._visibleModules,Z=[];for(Q=0;Q<K.length;Q++){var $=K[Q];$.style&&i.pushUnique(Z,$.style)}for(Q=0;Q<Z.length;Q++)Z[Q](V)},c.sanitizeMargins=function(V){if(V&&V.margin){var Q,K=V.width,Z=V.height,$=V.margin,re=K-($.l+$.r),R=Z-($.t+$.b);re<0&&(Q=(K-1)/($.l+$.r),$.l=Math.floor(Q*$.l),$.r=Math.floor(Q*$.r)),R<0&&(Q=(Z-1)/($.t+$.b),$.t=Math.floor(Q*$.t),$.b=Math.floor(Q*$.b))}},c.clearAutoMarginIds=function(V){V._fullLayout._pushmarginIds={}},c.allowAutoMargin=function(V,Q){V._fullLayout._pushmarginIds[Q]=1},c.autoMargin=function(V,Q,K){var Z=V._fullLayout,$=Z.width,re=Z.height,R=Z.margin,N=i.constrain($-R.l-R.r,2,64),U=i.constrain(re-R.t-R.b,2,64),te=Math.max(0,$-N),j=Math.max(0,re-U),Y=Z._pushmargin,J=Z._pushmarginIds;if(R.autoexpand!==!1){if(K){var ee=K.pad;if(ee===void 0&&(ee=Math.min(12,R.l,R.r,R.t,R.b)),te){var ne=(K.l+K.r)/te;ne>1&&(K.l/=ne,K.r/=ne)}if(j){var se=(K.t+K.b)/j;se>1&&(K.t/=se,K.b/=se)}var oe=K.xl!==void 0?K.xl:K.x,he=K.xr!==void 0?K.xr:K.x,le=K.yt!==void 0?K.yt:K.y,de=K.yb!==void 0?K.yb:K.y;Y[Q]={l:{val:oe,size:K.l+ee},r:{val:he,size:K.r+ee},b:{val:de,size:K.b+ee},t:{val:le,size:K.t+ee}},J[Q]=1}else delete Y[Q],delete J[Q];if(!Z._replotting)return c.doAutoMargin(V)}},c.doAutoMargin=function(V){var Q=V._fullLayout,K=Q.width,Z=Q.height;Q._size||(Q._size={}),P(Q);var $=Q._size,re=Q.margin,R=i.extendFlat({},$),N=re.l,U=re.r,te=re.t,j=re.b,Y=Q._pushmargin,J=Q._pushmarginIds;if(Q.margin.autoexpand!==!1){for(var ee in Y)J[ee]||delete Y[ee];for(var ne in Y.base={l:{val:0,size:N},r:{val:1,size:U},t:{val:1,size:te},b:{val:0,size:j}},Y){var se=Y[ne].l||{},oe=Y[ne].b||{},he=se.val,le=se.size,de=oe.val,xe=oe.size;for(var we in Y){if(y(le)&&Y[we].r){var be=Y[we].r.val,Ae=Y[we].r.size;if(be>he){var fe=(le*be+(Ae-K)*he)/(be-he),me=(Ae*(1-he)+(le-K)*(1-be))/(be-he);fe+me>N+U&&(N=fe,U=me)}}if(y(xe)&&Y[we].t){var ke=Y[we].t.val,Te=Y[we].t.size;if(ke>de){var Me=(xe*ke+(Te-Z)*de)/(ke-de),Oe=(Te*(1-de)+(xe-Z)*(1-ke))/(ke-de);Me+Oe>j+te&&(j=Me,te=Oe)}}}}}var Fe=i.constrain(K-re.l-re.r,2,64),qe=i.constrain(Z-re.t-re.b,2,64),et=Math.max(0,K-Fe),ze=Math.max(0,Z-qe);if(et){var Ue=(N+U)/et;Ue>1&&(N/=Ue,U/=Ue)}if(ze){var We=(j+te)/ze;We>1&&(j/=We,te/=We)}if($.l=Math.round(N),$.r=Math.round(U),$.t=Math.round(te),$.b=Math.round(j),$.p=Math.round(re.pad),$.w=Math.round(K)-$.l-$.r,$.h=Math.round(Z)-$.t-$.b,!Q._replotting&&c.didMarginChange(R,$)){"_redrawFromAutoMarginCount"in Q?Q._redrawFromAutoMarginCount++:Q._redrawFromAutoMarginCount=1;var Ze=3*(1+Object.keys(J).length);if(Q._redrawFromAutoMarginCount<Ze)return e.call("_doPlot",V);Q._size=R,i.warn("Too many auto-margin redraws.")}(function(nt){var ft=s.list(nt,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(xt){for(var It=0;It<ft.length;It++){var Et=ft[It][xt];Et&&Et()}})})(V)};var S=["l","r","t","b","p","w","h"];function E(V,Q,K){var Z=!1,$=[c.previousPromises,function(){if(V._transitionData)return V._transitioning=!1,function(R){var N=Promise.resolve();if(!R)return N;for(;R.length;)N=N.then(R.shift());return N}(V._transitionData._interruptCallbacks)},K.prepareFn,c.rehover,function(){return V.emit("plotly_transitioning",[]),new Promise(function(R){V._transitioning=!0,Q.duration>0&&(V._transitioningWithDuration=!0),V._transitionData._interruptCallbacks.push(function(){Z=!0}),K.redraw&&V._transitionData._interruptCallbacks.push(function(){return e.call("redraw",V)}),V._transitionData._interruptCallbacks.push(function(){V.emit("plotly_transitioninterrupted",[])});var N=0,U=0;function te(){return N++,function(){U++,Z||U!==N||function(j){!V._transitionData||(function(Y){if(Y)for(;Y.length;)Y.shift()}(V._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(K.redraw)return e.call("redraw",V)}).then(function(){V._transitioning=!1,V._transitioningWithDuration=!1,V.emit("plotly_transitioned",[])}).then(j))}(R)}}K.runFn(te),setTimeout(te())})}],re=i.syncOrAsync($,V);return re&&re.then||(re=Promise.resolve()),re.then(function(){return V})}c.didMarginChange=function(V,Q){for(var K=0;K<S.length;K++){var Z=S[K],$=V[Z],re=Q[Z];if(!y($)||Math.abs(re-$)>1)return!0}return!1},c.graphJson=function(V,Q,K,Z,$,re){($&&Q&&!V._fullData||$&&!Q&&!V._fullLayout)&&c.supplyDefaults(V);var R=$?V._fullData:V.data,N=$?V._fullLayout:V.layout,U=(V._transitionData||{})._frames;function te(J,ee){if(typeof J=="function")return ee?"_function_":null;if(i.isPlainObject(J)){var ne,se={};return Object.keys(J).sort().forEach(function(oe){if(["_","["].indexOf(oe.charAt(0))===-1)if(typeof J[oe]!="function"){if(K==="keepdata"){if(oe.substr(oe.length-3)==="src")return}else if(K==="keepstream"){if(typeof(ne=J[oe+"src"])=="string"&&ne.indexOf(":")>0&&!i.isPlainObject(J.stream))return}else if(K!=="keepall"&&typeof(ne=J[oe+"src"])=="string"&&ne.indexOf(":")>0)return;se[oe]=te(J[oe],ee)}else ee&&(se[oe]="_function")}),se}return Array.isArray(J)?J.map(function(oe){return te(oe,ee)}):i.isTypedArray(J)?i.simpleMap(J,i.identity):i.isJSDate(J)?i.ms2DateTimeLocal(+J):J}var j={data:(R||[]).map(function(J){var ee=te(J);return Q&&delete ee.fit,ee})};if(!Q&&(j.layout=te(N),$)){var Y=N._size;j.layout.computed={margin:{b:Y.b,l:Y.l,r:Y.r,t:Y.t}}}return U&&(j.frames=te(U)),re&&(j.config=te(V._context,!0)),Z==="object"?j:JSON.stringify(j)},c.modifyFrames=function(V,Q){var K,Z,$,re=V._transitionData._frames,R=V._transitionData._frameHash;for(K=0;K<Q.length;K++)switch((Z=Q[K]).type){case"replace":$=Z.value;var N=(re[Z.index]||{}).name,U=$.name;re[Z.index]=R[U]=$,U!==N&&(delete R[N],R[U]=$);break;case"insert":R[($=Z.value).name]=$,re.splice(Z.index,0,$);break;case"delete":delete R[($=re[Z.index]).name],re.splice(Z.index,1)}return Promise.resolve()},c.computeFrame=function(V,Q){var K,Z,$,re,R=V._transitionData._frameHash;if(!Q)throw new Error("computeFrame must be given a string frame name");var N=R[Q.toString()];if(!N)return!1;for(var U=[N],te=[N.name];N.baseframe&&(N=R[N.baseframe.toString()])&&te.indexOf(N.name)===-1;)U.push(N),te.push(N.name);for(var j={};N=U.pop();)if(N.layout&&(j.layout=c.extendLayout(j.layout,N.layout)),N.data){if(j.data||(j.data=[]),!(Z=N.traces))for(Z=[],K=0;K<N.data.length;K++)Z[K]=K;for(j.traces||(j.traces=[]),K=0;K<N.data.length;K++)($=Z[K])!=null&&((re=j.traces.indexOf($))===-1&&(re=j.data.length,j.traces[re]=$),j.data[re]=c.extendTrace(j.data[re],N.data[K]))}return j},c.recomputeFrameHash=function(V){for(var Q=V._transitionData._frameHash={},K=V._transitionData._frames,Z=0;Z<K.length;Z++){var $=K[Z];$&&$.name&&(Q[$.name]=$)}},c.extendObjectWithContainers=function(V,Q,K){var Z,$,re,R,N,U,te,j=i.extendDeepNoArrays({},Q||{}),Y=i.expandObjectPaths(j),J={};if(K&&K.length)for(re=0;re<K.length;re++)($=(Z=i.nestedProperty(Y,K[re])).get())===void 0?i.nestedProperty(J,K[re]).set(null):(Z.set(null),i.nestedProperty(J,K[re]).set($));if(V=i.extendDeepNoArrays(V||{},Y),K&&K.length){for(re=0;re<K.length;re++)if(U=i.nestedProperty(J,K[re]).get()){for(te=(N=i.nestedProperty(V,K[re])).get(),Array.isArray(te)||(te=[],N.set(te)),R=0;R<U.length;R++){var ee=U[R];te[R]=ee===null?null:c.extendObjectWithContainers(te[R],ee)}N.set(te)}}return V},c.dataArrayContainers=["transforms","dimensions"],c.layoutArrayContainers=e.layoutArrayContainers,c.extendTrace=function(V,Q){return c.extendObjectWithContainers(V,Q,c.dataArrayContainers)},c.extendLayout=function(V,Q){return c.extendObjectWithContainers(V,Q,c.layoutArrayContainers)},c.transition=function(V,Q,K,Z,$,re){var R={redraw:$.redraw},N={},U=[];return R.prepareFn=function(){for(var te=Array.isArray(Q)?Q.length:0,j=Z.slice(0,te),Y=0;Y<j.length;Y++){var J=j[Y],ee=V._fullData[J]._module;if(ee){if(ee.animatable){var ne=ee.basePlotModule.name;N[ne]||(N[ne]=[]),N[ne].push(J)}V.data[j[Y]]=c.extendTrace(V.data[j[Y]],Q[Y])}}var se=i.expandObjectPaths(i.extendDeepNoArrays({},K)),oe=/^[xy]axis[0-9]*$/;for(var he in se)oe.test(he)&&delete se[he].range;c.extendLayout(V.layout,se),delete V.calcdata,c.supplyDefaults(V),c.doCalcdata(V);var le=i.expandObjectPaths(K);if(le){var de=V._fullLayout._plots;for(var xe in de){var we=de[xe],be=we.xaxis,Ae=we.yaxis,fe=be.range.slice(),me=Ae.range.slice(),ke=null,Te=null,Me=null,Oe=null;Array.isArray(le[be._name+".range"])?ke=le[be._name+".range"].slice():Array.isArray((le[be._name]||{}).range)&&(ke=le[be._name].range.slice()),Array.isArray(le[Ae._name+".range"])?Te=le[Ae._name+".range"].slice():Array.isArray((le[Ae._name]||{}).range)&&(Te=le[Ae._name].range.slice()),fe&&ke&&(be.r2l(fe[0])!==be.r2l(ke[0])||be.r2l(fe[1])!==be.r2l(ke[1]))&&(Me={xr0:fe,xr1:ke}),me&&Te&&(Ae.r2l(me[0])!==Ae.r2l(Te[0])||Ae.r2l(me[1])!==Ae.r2l(Te[1]))&&(Oe={yr0:me,yr1:Te}),(Me||Oe)&&U.push(i.extendFlat({plotinfo:we},Me,Oe))}}return Promise.resolve()},R.runFn=function(te){var j,Y,J=V._fullLayout._basePlotModules,ee=U.length;if(K)for(Y=0;Y<J.length;Y++)J[Y].transitionAxes&&J[Y].transitionAxes(V,U,re,te);for(var ne in ee?((j=i.extendFlat({},re)).duration=0,delete N.cartesian):j=re,N){var se=N[ne];V._fullData[se[0]]._module.basePlotModule.plot(V,se,j,te)}},E(V,re,R)},c.transitionFromReact=function(V,Q,K,Z){var $=V._fullLayout,re=$.transition,R={},N=[];return R.prepareFn=function(){var U=$._plots;for(var te in R.redraw=!1,Q.anim==="some"&&(R.redraw=!0),K.anim==="some"&&(R.redraw=!0),U){var j=U[te],Y=j.xaxis,J=j.yaxis,ee=Z[Y._name].range.slice(),ne=Z[J._name].range.slice(),se=Y.range.slice(),oe=J.range.slice();Y.setScale(),J.setScale();var he=null,le=null;Y.r2l(ee[0])===Y.r2l(se[0])&&Y.r2l(ee[1])===Y.r2l(se[1])||(he={xr0:ee,xr1:se}),J.r2l(ne[0])===J.r2l(oe[0])&&J.r2l(ne[1])===J.r2l(oe[1])||(le={yr0:ne,yr1:oe}),(he||le)&&N.push(i.extendFlat({plotinfo:j},he,le))}return Promise.resolve()},R.runFn=function(U){for(var te,j,Y,J=V._fullData,ee=V._fullLayout._basePlotModules,ne=[],se=0;se<J.length;se++)ne.push(se);function oe(){if(V._fullLayout)for(var le=0;le<ee.length;le++)ee[le].transitionAxes&&ee[le].transitionAxes(V,N,te,U)}function he(){if(V._fullLayout)for(var le=0;le<ee.length;le++)ee[le].plot(V,Y,j,U)}N.length&&Q.anim?re.ordering==="traces first"?(te=i.extendFlat({},re,{duration:0}),Y=ne,j=re,setTimeout(oe,re.duration),he()):(te=re,Y=null,j=i.extendFlat({},re,{duration:0}),setTimeout(he,te.duration),oe()):N.length?(te=re,oe()):Q.anim&&(Y=ne,j=re,he())},E(V,re,R)},c.doCalcdata=function(V,Q){var K,Z,$,re,R=s.list(V),N=V._fullData,U=V._fullLayout,te=new Array(N.length),j=(V.calcdata||[]).slice();for(V.calcdata=te,U._numBoxes=0,U._numViolins=0,U._violinScaleGroupStats={},V._hmpixcount=0,V._hmlumcount=0,U._piecolormap={},U._sunburstcolormap={},U._treemapcolormap={},U._iciclecolormap={},U._funnelareacolormap={},$=0;$<N.length;$++)Array.isArray(Q)&&Q.indexOf($)===-1&&(te[$]=j[$]);for($=0;$<N.length;$++)(K=N[$])._arrayAttrs=r.findArrayAttributes(K),K._extremes={};var Y=U._subplots.polar||[];for($=0;$<Y.length;$++)R.push(U[Y[$]].radialaxis,U[Y[$]].angularaxis);for(var J in U._colorAxes){var ee=U[J];ee.cauto!==!1&&(delete ee.cmin,delete ee.cmax)}var ne=!1;function se(le){if(K=N[le],Z=K._module,K.visible===!0&&K.transforms){if(Z&&Z.calc){var de=Z.calc(V,K);de[0]&&de[0].t&&de[0].t._scene&&delete de[0].t._scene.dirty}for(re=0;re<K.transforms.length;re++){var xe=K.transforms[re];(Z=b[xe.type])&&Z.calcTransform&&(K._hasCalcTransform=!0,ne=!0,Z.calcTransform(V,K,xe))}}}function oe(le,de){if(K=N[le],!!(Z=K._module).isContainer===de){var xe=[];if(K.visible===!0&&K._length!==0){delete K._indexToPoints;var we=K.transforms||[];for(re=we.length-1;re>=0;re--)if(we[re].enabled){K._indexToPoints=we[re]._indexToPoints;break}Z&&Z.calc&&(xe=Z.calc(V,K))}Array.isArray(xe)&&xe[0]||(xe=[{x:h,y:h}]),xe[0].t||(xe[0].t={}),xe[0].trace=K,te[le]=xe}}for(F(R,N,U),$=0;$<N.length;$++)oe($,!0);for($=0;$<N.length;$++)se($);for(ne&&F(R,N,U),$=0;$<N.length;$++)oe($,!0);for($=0;$<N.length;$++)oe($,!1);H(V);var he=function(le,de){var xe,we,be,Ae,fe,me=[];function ke(Je,Se,Pe){var De=Se._id.charAt(0);if(Je==="histogram2dcontour"){var Ie=Se._counterAxes[0],$e=s.getFromId(de,Ie),st=De==="x"||Ie==="x"&&$e.type==="category",dt=De==="y"||Ie==="y"&&$e.type==="category";return function(ut,Lt){return ut===0||Lt===0||st&&ut===Pe[Lt].length-1||dt&&Lt===Pe.length-1?-1:(De==="y"?Lt:ut)-1}}return function(ut,Lt){return De==="y"?Lt:ut}}var Te={min:function(Je){return i.aggNums(Math.min,null,Je)},max:function(Je){return i.aggNums(Math.max,null,Je)},sum:function(Je){return i.aggNums(function(Se,Pe){return Se+Pe},null,Je)},total:function(Je){return i.aggNums(function(Se,Pe){return Se+Pe},null,Je)},mean:function(Je){return i.mean(Je)},median:function(Je){return i.median(Je)}};for(xe=0;xe<le.length;xe++){var Me=le[xe];if(Me.type==="category"){var Oe=Me.categoryorder.match(D);if(Oe){var Fe=Oe[1],qe=Oe[2],et=Me._id.charAt(0),ze=et==="x",Ue=[];for(we=0;we<Me._categories.length;we++)Ue.push([Me._categories[we],[]]);for(we=0;we<Me._traceIndices.length;we++){var We=Me._traceIndices[we],Ze=de._fullData[We];if(Ze.visible===!0){var nt=Ze.type;e.traceIs(Ze,"histogram")&&(delete Ze._xautoBinFinished,delete Ze._yautoBinFinished);var ft=nt==="splom",xt=nt==="scattergl",It=de.calcdata[We];for(be=0;be<It.length;be++){var Et,it,rt=It[be];if(ft){var At=Ze._axesDim[Me._id];if(!ze){var Gt=Ze._diag[At][0];Gt&&(Me=de._fullLayout[s.id2name(Gt)])}var Qt=rt.trace.dimensions[At].values;for(Ae=0;Ae<Qt.length;Ae++)for(Et=Me._categoriesMap[Qt[Ae]],fe=0;fe<rt.trace.dimensions.length;fe++)if(fe!==At){var Ve=rt.trace.dimensions[fe];Ue[Et][1].push(Ve.values[Ae])}}else if(xt){for(Ae=0;Ae<rt.t.x.length;Ae++)ze?(Et=rt.t.x[Ae],it=rt.t.y[Ae]):(Et=rt.t.y[Ae],it=rt.t.x[Ae]),Ue[Et][1].push(it);rt.t&&rt.t._scene&&delete rt.t._scene.dirty}else if(rt.hasOwnProperty("z")){it=rt.z;var Ye=ke(Ze.type,Me,it);for(Ae=0;Ae<it.length;Ae++)for(fe=0;fe<it[Ae].length;fe++)(Et=Ye(fe,Ae))+1&&Ue[Et][1].push(it[Ae][fe])}else for((Et=rt.p)===void 0&&(Et=rt[et]),(it=rt.s)===void 0&&(it=rt.v),it===void 0&&(it=ze?rt.y:rt.x),Array.isArray(it)||(it=it===void 0?[]:[it]),Ae=0;Ae<it.length;Ae++)Ue[Et][1].push(it[Ae])}}}Me._categoriesValue=Ue;var Be=[];for(we=0;we<Ue.length;we++)Be.push([Ue[we][0],Te[Fe](Ue[we][1])]);Be.sort(function(Je,Se){return Je[1]-Se[1]}),Me._categoriesAggregatedValue=Be,Me._initialCategories=Be.map(function(Je){return Je[0]}),qe==="descending"&&Me._initialCategories.reverse(),me=me.concat(Me.sortByInitialCategories())}}}return me}(R,V);if(he.length){for(U._numBoxes=0,U._numViolins=0,$=0;$<he.length;$++)oe(he[$],!0);for($=0;$<he.length;$++)oe(he[$],!1);H(V)}e.getComponentMethod("fx","calc")(V),e.getComponentMethod("errorbars","calc")(V)};var D=/(total|sum|min|max|mean|median) (ascending|descending)/;function F(V,Q,K){var Z={};function $(U){U.clearCalc(),U.type==="multicategory"&&U.setupMultiCategory(Q),Z[U._id]=1}i.simpleMap(V,$);for(var re=K._axisMatchGroups||[],R=0;R<re.length;R++)for(var N in re[R])Z[N]||$(K[s.id2name(N)])}function H(V){var Q,K,Z,$=V._fullLayout,re=$._visibleModules,R={};for(K=0;K<re.length;K++){var N=re[K],U=N.crossTraceCalc;if(U){var te=N.basePlotModule.name;R[te]?i.pushUnique(R[te],U):R[te]=[U]}}for(Z in R){var j=R[Z],Y=$._subplots[Z];if(Array.isArray(Y))for(Q=0;Q<Y.length;Q++){var J=Y[Q],ee=Z==="cartesian"?$._plots[J]:$[J];for(K=0;K<j.length;K++)j[K](V,ee,J)}else for(K=0;K<j.length;K++)j[K](V)}}c.rehover=function(V){V._fullLayout._rehover&&V._fullLayout._rehover()},c.redrag=function(V){V._fullLayout._redrag&&V._fullLayout._redrag()},c.generalUpdatePerTraceModule=function(V,Q,K,Z){var $,re=Q.traceHash,R={};for($=0;$<K.length;$++){var N=K[$],U=N[0].trace;U.visible&&(R[U.type]=R[U.type]||[],R[U.type].push(N))}for(var te in re)if(!R[te]){var j=re[te][0];j[0].trace.visible=!1,R[te]=[j]}for(var Y in R){var J=R[Y];J[0][0].trace._module.plot(V,Q,i.filterVisible(J),Z)}Q.traceHash=R},c.plotBasePlot=function(V,Q,K,Z,$){var re=e.getModule(V),R=d(Q.calcdata,re)[0];re.plot(Q,R,Z,$)},c.cleanBasePlot=function(V,Q,K,Z,$){var re=$._has&&$._has(V),R=K._has&&K._has(V);re&&!R&&$["_"+V+"layer"].selectAll("g.trace").remove()}},{"../components/color":366,"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plot_api/plot_template":543,"../plots/get_data":593,"../registry":638,"./animation_attributes":548,"./attributes":550,"./cartesian/axis_ids":558,"./cartesian/handle_outline":565,"./command":583,"./font_attributes":585,"./frame_attributes":586,"./layout_attributes":610,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],620:[function(u,q,W){q.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],621:[function(u,q,W){var o=u("../../lib"),p=u("../../lib/polygon").tester,x=o.findIndexOfMin,y=o.isAngleInsideSector,e=o.angleDelta,r=o.angleDist;function t(s,a,l,f){var d,v,m=f[0],c=f[1],b=n(Math.sin(a)-Math.sin(s)),g=n(Math.cos(a)-Math.cos(s)),w=Math.tan(l),_=n(1/w),T=b/g,k=c-T*m;return _?b&&g?v=w*(d=k/(w-T)):g?(d=c*_,v=c):(d=m,v=m*w):b&&g?(d=0,v=k):g?(d=0,v=c):d=v=NaN,[d,v]}function i(s,a,l,f){return o.isFullCircle([a,l])?function(d,v){var m,c=v.length,b=new Array(c+1);for(m=0;m<c;m++){var g=v[m];b[m]=[d*Math.cos(g),d*Math.sin(g)]}return b[m]=b[0].slice(),b}(s,f):function(d,v,m,c){var b,g,w=c.length,_=[];function T(F){return[d*Math.cos(F),d*Math.sin(F)]}function k(F,H,V){return t(F,H,V,T(F))}function L(F){return o.mod(F,w)}function M(F){return y(F,[v,m])}var I=x(c,function(F){return M(F)?r(F,v):1/0}),P=k(c[I],c[L(I-1)],v);for(_.push(P),b=I,g=0;g<w;b++,g++){var S=c[L(b)];if(!M(S))break;_.push(T(S))}var E=x(c,function(F){return M(F)?r(F,m):1/0}),D=k(c[E],c[L(E+1)],m);return _.push(D),_.push([0,0]),_.push(_[0].slice()),_}(s,a,l,f)}function n(s){return Math.abs(s)>1e-10?s:0}function h(s,a,l){a=a||0,l=l||0;for(var f=s.length,d=new Array(f),v=0;v<f;v++){var m=s[v];d[v]=[a+m[0],l-m[1]]}return d}q.exports={isPtInsidePolygon:function(s,a,l,f,d){if(!y(a,f))return!1;var v,m;l[0]<l[1]?(v=l[0],m=l[1]):(v=l[1],m=l[0]);var c=p(i(v,f[0],f[1],d)),b=p(i(m,f[0],f[1],d)),g=[s*Math.cos(a),s*Math.sin(a)];return b.contains(g)&&!c.contains(g)},findPolygonOffset:function(s,a,l,f){for(var d=1/0,v=1/0,m=i(s,a,l,f),c=0;c<m.length;c++){var b=m[c];d=Math.min(d,b[0]),v=Math.min(v,-b[1])}return[d,v]},findEnclosingVertexAngles:function(s,a){var l=x(a,function(d){var v=e(d,s);return v>0?v:1/0}),f=o.mod(l+1,a.length);return[a[l],a[f]]},findIntersectionXY:t,findXYatLength:function(s,a,l,f){var d=-a*l,v=a*a+1,m=2*(a*d-l),c=d*d+l*l-s*s,b=Math.sqrt(m*m-4*v*c),g=(-m+b)/(2*v),w=(-m-b)/(2*v);return[[g,a*g+d+f],[w,a*w+d+f]]},clampTiny:n,pathPolygon:function(s,a,l,f,d,v){return"M"+h(i(s,a,l,f),d,v).join("L")},pathPolygonAnnulus:function(s,a,l,f,d,v,m){var c,b;s<a?(c=s,b=a):(c=a,b=s);var g=h(i(c,l,f,d),v,m);return"M"+h(i(b,l,f,d),v,m).reverse().join("L")+"M"+g.join("L")}}},{"../../lib":503,"../../lib/polygon":515}],622:[function(u,q,W){var o=u("../get_data").getSubplotCalcData,p=u("../../lib").counterRegex,x=u("./polar"),y=u("./constants"),e=y.attr,r=y.name,t=p(r),i={};i[e]={valType:"subplotid",dflt:r,editType:"calc"},q.exports={attr:e,name:r,idRoot:r,idRegex:t,attrRegex:t,attributes:i,layoutAttributes:u("./layout_attributes"),supplyLayoutDefaults:u("./layout_defaults"),plot:function(n){for(var h=n._fullLayout,s=n.calcdata,a=h._subplots[r],l=0;l<a.length;l++){var f=a[l],d=o(s,r,f),v=h[f]._subplot;v||(v=x(n,f),h[f]._subplot=v),v.plot(d,h,n._promises)}},clean:function(n,h,s,a){for(var l=a._subplots[r]||[],f=a._has&&a._has("gl"),d=h._has&&h._has("gl"),v=f&&!d,m=0;m<l.length;m++){var c=l[m],b=a[c]._subplot;if(!h[c]&&b)for(var g in b.framework.remove(),b.layers["radial-axis-title"].remove(),b.clipPaths)b.clipPaths[g].remove();v&&b._scene&&(b._scene.destroy(),b._scene=null)}},toSVG:u("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"./constants":620,"./layout_attributes":623,"./layout_defaults":624,"./polar":625}],623:[function(u,q,W){var o=u("../../components/color/attributes"),p=u("../cartesian/layout_attributes"),x=u("../domain").attributes,y=u("../../lib").extendFlat,e=u("../../plot_api/edit_types").overrideAll,r=e({color:p.color,showline:y({},p.showline,{dflt:!0}),linecolor:p.linecolor,linewidth:p.linewidth,showgrid:y({},p.showgrid,{dflt:!0}),gridcolor:p.gridcolor,gridwidth:p.gridwidth},"plot","from-root"),t=e({tickmode:p.tickmode,nticks:p.nticks,tick0:p.tick0,dtick:p.dtick,tickvals:p.tickvals,ticktext:p.ticktext,ticks:p.ticks,ticklen:p.ticklen,tickwidth:p.tickwidth,tickcolor:p.tickcolor,showticklabels:p.showticklabels,showtickprefix:p.showtickprefix,tickprefix:p.tickprefix,showticksuffix:p.showticksuffix,ticksuffix:p.ticksuffix,showexponent:p.showexponent,exponentformat:p.exponentformat,minexponent:p.minexponent,separatethousands:p.separatethousands,tickfont:p.tickfont,tickangle:p.tickangle,tickformat:p.tickformat,tickformatstops:p.tickformatstops,layer:p.layer},"plot","from-root"),i={visible:y({},p.visible,{dflt:!0}),type:y({},p.type,{values:["-","linear","log","date","category"]}),autotypenumbers:p.autotypenumbers,autorange:y({},p.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:y({},p.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:p.categoryorder,categoryarray:p.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:y({},p.title.text,{editType:"plot",dflt:""}),font:y({},p.title.font,{editType:"plot"}),editType:"plot"},hoverformat:p.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:p._deprecated.title,titlefont:p._deprecated.titlefont}};y(i,r,t);var n={visible:y({},p.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:p.autotypenumbers,categoryorder:p.categoryorder,categoryarray:p.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:p.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};y(n,r,t),q.exports={domain:x({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:o.background},radialaxis:i,angularaxis:n,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],624:[function(u,q,W){var o=u("../../lib"),p=u("../../components/color"),x=u("../../plot_api/plot_template"),y=u("../subplot_defaults"),e=u("../get_data").getSubplotData,r=u("../cartesian/tick_value_defaults"),t=u("../cartesian/tick_mark_defaults"),i=u("../cartesian/tick_label_defaults"),n=u("../cartesian/prefix_suffix_defaults"),h=u("../cartesian/category_order_defaults"),s=u("../cartesian/line_grid_defaults"),a=u("../cartesian/axis_autotype"),l=u("./layout_attributes"),f=u("./set_convert"),d=u("./constants"),v=d.axisNames;function m(b,g,w,_){var T=w("bgcolor");_.bgColor=p.combine(T,_.paper_bgcolor);var k=w("sector");w("hole");var L,M=e(_.fullData,d.name,_.id),I=_.layoutOut;function P(te,j){return w(L+"."+te,j)}for(var S=0;S<v.length;S++){L=v[S],o.isPlainObject(b[L])||(b[L]={});var E=b[L],D=x.newContainer(g,L);D._id=D._name=L,D._attr=_.id+"."+L,D._traceIndices=M.map(function(te){return te._expandedIndex});var F=d.axisName2dataArray[L],H=c(E,D,P,M,F,_);h(E,D,P,{axData:M,dataAttr:F});var V=P("visible");switch(f(D,g,I),P("uirevision",g.uirevision),D._m=1,L){case"radialaxis":var Q=P("autorange",!D.isValidRange(E.range));E.autorange=Q,!Q||H!=="linear"&&H!=="-"||P("rangemode"),Q==="reversed"&&(D._m=-1),P("range"),D.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(H==="date"){o.log("Polar plots do not support date angular axes yet.");for(var K=0;K<M.length;K++)M[K].visible=!1;H=E.type=D.type="linear"}P(H==="linear"?"thetaunit":"period");var Z=P("direction");P("rotation",{counterclockwise:0,clockwise:90}[Z])}if(n(E,D,P,D.type,{tickSuffixDflt:D.thetaunit==="degrees"?"\xB0":void 0}),V){var $,re,R,N,U=_.font||{};re=($=P("color"))===E.color?$:U.color,R=U.size,N=U.family,r(E,D,P,D.type),i(E,D,P,D.type,{font:{color:re,size:R,family:N}}),t(E,D,P,{outerTicks:!0}),s(E,D,P,{dfltColor:$,bgColor:_.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l[L]}),P("layer"),L==="radialaxis"&&(P("side"),P("angle",k[0]),P("title.text"),o.coerceFont(P,"title.font",{color:re,size:o.bigFont(R),family:N}))}H!=="category"&&P("hoverformat"),D._input=E}g.angularaxis.type==="category"&&w("gridshape")}function c(b,g,w,_,T,k){var L=w("autotypenumbers",k.autotypenumbersDflt);if(w("type")==="-"){for(var M,I=0;I<_.length;I++)if(_[I].visible){M=_[I];break}M&&M[T]&&(g.type=a(M[T],"gregorian",{noMultiCategory:!0,autotypenumbers:L})),g.type==="-"?g.type="linear":b.type=g.type}return g.type}q.exports=function(b,g,w){y(b,g,w,{type:d.name,attributes:l,handleDefaults:m,font:g.font,autotypenumbersDflt:g.autotypenumbers,paper_bgcolor:g.paper_bgcolor,fullData:w,layoutOut:g})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/axis_autotype":555,"../cartesian/category_order_defaults":559,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../get_data":593,"../subplot_defaults":632,"./constants":620,"./layout_attributes":623,"./set_convert":626}],625:[function(u,q,W){var o=u("@plotly/d3"),p=u("tinycolor2"),x=u("../../registry"),y=u("../../lib"),e=y.strRotate,r=y.strTranslate,t=u("../../components/color"),i=u("../../components/drawing"),n=u("../plots"),h=u("../../plots/cartesian/axes"),s=u("../cartesian/set_convert"),a=u("./set_convert"),l=u("../cartesian/autorange").doAutoRange,f=u("../cartesian/dragbox"),d=u("../../components/dragelement"),v=u("../../components/fx"),m=u("../../components/titles"),c=u("../cartesian/select").prepSelect,b=u("../cartesian/select").selectOnClick,g=u("../cartesian/select").clearSelect,w=u("../../lib/setcursor"),_=u("../../lib/clear_gl_canvases"),T=u("../../plot_api/subroutines").redrawReglTraces,k=u("../../constants/alignment").MID_SHIFT,L=u("./constants"),M=u("./helpers"),I=u("../smith/helpers"),P=I.smith,S=I.reactanceArc,E=I.resistanceArc,D=I.smithTransform,F=y._,H=y.mod,V=y.deg2rad,Q=y.rad2deg;function K(N,U,te){this.isSmith=te||!1,this.id=U,this.gd=N,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var j=N._fullLayout,Y="clip"+j._uid+U;this.clipIds.forTraces=Y+"-for-traces",this.clipPaths.forTraces=j._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=j["_"+(te?"smith":"polar")+"layer"].append("g").attr("class",U),this.getHole=function(J){return this.isSmith?0:J.hole},this.getSector=function(J){return this.isSmith?[0,360]:J.sector},this.getRadial=function(J){return this.isSmith?J.realaxis:J.radialaxis},this.getAngular=function(J){return this.isSmith?J.imaginaryaxis:J.angularaxis},te||(this.radialTickLayout=null,this.angularTickLayout=null)}var Z=K.prototype;function $(N){var U=N.ticks+String(N.ticklen)+String(N.showticklabels);return"side"in N&&(U+=N.side),U}function re(N,U){return U[y.findIndexOfMin(U,function(te){return y.angleDist(N,te)})]}function R(N,U,te){return U?(N.attr("display",null),N.attr(te)):N&&N.attr("display","none"),N}q.exports=function(N,U,te){return new K(N,U,te)},Z.plot=function(N,U){for(var te=U[this.id],j=!1,Y=0;Y<N.length;Y++)if(N[Y][0].trace.cliponaxis===!1){j=!0;break}this._hasClipOnAxisFalse=j,this.updateLayers(U,te),this.updateLayout(U,te),n.generalUpdatePerTraceModule(this.gd,this,N,te),this.updateFx(U,te),this.isSmith&&(delete te.realaxis.range,delete te.imaginaryaxis.range)},Z.updateLayers=function(N,U){var te=this.isSmith,j=this.layers,Y=this.getRadial(U),J=this.getAngular(U),ee=L.layerNames,ne=ee.indexOf("frontplot"),se=ee.slice(0,ne),oe=J.layer==="below traces",he=Y.layer==="below traces";oe&&se.push("angular-line"),he&&se.push("radial-line"),oe&&se.push("angular-axis"),he&&se.push("radial-axis"),se.push("frontplot"),oe||se.push("angular-line"),he||se.push("radial-line"),oe||se.push("angular-axis"),he||se.push("radial-axis");var le=(te?"smith":"polar")+"sublayer",de=this.framework.selectAll("."+le).data(se,String);de.enter().append("g").attr("class",function(xe){return le+" "+xe}).each(function(xe){var we=j[xe]=o.select(this);switch(xe){case"frontplot":te||we.append("g").classed("barlayer",!0),we.append("g").classed("scatterlayer",!0);break;case"backplot":we.append("g").classed("maplayer",!0);break;case"plotbg":j.bg=we.append("path");break;case"radial-grid":case"angular-grid":we.style("fill","none");break;case"radial-line":we.append("line").style("fill","none");break;case"angular-line":we.append("path").style("fill","none")}}),de.order()},Z.updateLayout=function(N,U){var te=this.layers,j=N._size,Y=this.getRadial(U),J=this.getAngular(U),ee=U.domain.x,ne=U.domain.y;this.xOffset=j.l+j.w*ee[0],this.yOffset=j.t+j.h*(1-ne[1]);var se=this.xLength=j.w*(ee[1]-ee[0]),oe=this.yLength=j.h*(ne[1]-ne[0]),he=this.getSector(U);this.sectorInRad=he.map(V);var le,de,xe,we,be,Ae=this.sectorBBox=function(xt){var It,Et,it,rt,At=xt[0],Gt=xt[1]-At,Qt=H(At,360),Ve=Qt+Gt,Ye=Math.cos(V(Qt)),Be=Math.sin(V(Qt)),Je=Math.cos(V(Ve)),Se=Math.sin(V(Ve));return rt=Qt<=90&&Ve>=90||Qt>90&&Ve>=450?1:Be<=0&&Se<=0?0:Math.max(Be,Se),It=Qt<=180&&Ve>=180||Qt>180&&Ve>=540?-1:Ye>=0&&Je>=0?0:Math.min(Ye,Je),Et=Qt<=270&&Ve>=270||Qt>270&&Ve>=630?-1:Be>=0&&Se>=0?0:Math.min(Be,Se),it=Ve>=360?1:Ye<=0&&Je<=0?0:Math.max(Ye,Je),[It,Et,it,rt]}(he),fe=Ae[2]-Ae[0],me=Ae[3]-Ae[1],ke=oe/se,Te=Math.abs(me/fe);ke>Te?(le=se,be=(oe-(de=se*Te))/j.h/2,xe=[ee[0],ee[1]],we=[ne[0]+be,ne[1]-be]):(de=oe,be=(se-(le=oe/Te))/j.w/2,xe=[ee[0]+be,ee[1]-be],we=[ne[0],ne[1]]),this.xLength2=le,this.yLength2=de,this.xDomain2=xe,this.yDomain2=we;var Me,Oe=this.xOffset2=j.l+j.w*xe[0],Fe=this.yOffset2=j.t+j.h*(1-we[1]),qe=this.radius=le/fe,et=this.innerRadius=this.getHole(U)*qe,ze=this.cx=Oe-qe*Ae[0],Ue=this.cy=Fe+qe*Ae[3],We=this.cxx=ze-Oe,Ze=this.cyy=Ue-Fe,nt=Y.side;nt==="counterclockwise"?(Me=nt,nt="top"):nt==="clockwise"&&(Me=nt,nt="bottom"),this.radialAxis=this.mockAxis(N,U,Y,{_id:"x",side:nt,_trueSide:Me,domain:[et/j.w,qe/j.w]}),this.angularAxis=this.mockAxis(N,U,J,{side:"right",domain:[0,Math.PI],autorange:!1}),this.doAutoRange(N,U),this.updateAngularAxis(N,U),this.updateRadialAxis(N,U),this.updateRadialAxisTitle(N,U),this.xaxis=this.mockCartesianAxis(N,U,{_id:"x",domain:xe}),this.yaxis=this.mockCartesianAxis(N,U,{_id:"y",domain:we});var ft=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",ft).attr("transform",r(We,Ze)),te.frontplot.attr("transform",r(Oe,Fe)).call(i.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd),te.bg.attr("d",ft).attr("transform",r(ze,Ue)).call(t.fill,U.bgcolor)},Z.mockAxis=function(N,U,te,j){var Y=y.extendFlat({},te,j);return a(Y,U,N),Y},Z.mockCartesianAxis=function(N,U,te){var j=this,Y=j.isSmith,J=te._id,ee=y.extendFlat({type:"linear"},te);s(ee,N);var ne={x:[0,2],y:[1,3]};return ee.setRange=function(){var se=j.sectorBBox,oe=ne[J],he=j.radialAxis._rl,le=(he[1]-he[0])/(1-j.getHole(U));ee.range=[se[oe[0]]*le,se[oe[1]]*le]},ee.isPtWithinRange=J!=="x"||Y?function(){return!0}:function(se){return j.isPtInside(se)},ee.setRange(),ee.setScale(),ee},Z.doAutoRange=function(N,U){var te=this.gd,j=this.radialAxis,Y=this.getRadial(U);l(te,j);var J=j.range;Y.range=J.slice(),Y._input.range=J.slice(),j._rl=[j.r2l(J[0],null,"gregorian"),j.r2l(J[1],null,"gregorian")]},Z.updateRadialAxis=function(N,U){var te=this,j=te.gd,Y=te.layers,J=te.radius,ee=te.innerRadius,ne=te.cx,se=te.cy,oe=te.getRadial(U),he=H(te.getSector(U)[0],360),le=te.radialAxis,de=ee<J,xe=te.isSmith;xe||(te.fillViewInitialKey("radialaxis.angle",oe.angle),te.fillViewInitialKey("radialaxis.range",le.range.slice()),le.setGeometry()),le.tickangle==="auto"&&he>90&&he<=270&&(le.tickangle=180);var we=xe?function(qe){var et=D(te,P([qe.x,0]));return r(et[0]-ne,et[1]-se)}:function(qe){return r(le.l2p(qe.x)+ee,0)},be=xe?function(qe){return E(te,qe.x,-1/0,1/0)}:function(qe){return te.pathArc(le.r2p(qe.x)+ee)},Ae=$(oe);if(te.radialTickLayout!==Ae&&(Y["radial-axis"].selectAll(".xtick").remove(),te.radialTickLayout=Ae),de){le.setScale();var fe=0,me=xe?(le.tickvals||[]).filter(function(qe){return qe>=0}).map(function(qe){return h.tickText(le,qe,!0,!1)}):h.calcTicks(le),ke=xe?me:h.clipEnds(le,me),Te=h.getTickSigns(le)[2];xe&&((le.ticks==="top"&&le.side==="bottom"||le.ticks==="bottom"&&le.side==="top")&&(Te=-Te),le.ticks==="top"&&le.side==="top"&&(fe=-le.ticklen),le.ticks==="bottom"&&le.side==="bottom"&&(fe=le.ticklen)),h.drawTicks(j,le,{vals:me,layer:Y["radial-axis"],path:h.makeTickPath(le,0,Te),transFn:we,crisp:!1}),h.drawGrid(j,le,{vals:ke,layer:Y["radial-grid"],path:be,transFn:y.noop,crisp:!1}),h.drawLabels(j,le,{vals:me,layer:Y["radial-axis"],transFn:we,labelFns:h.makeLabelFns(le,fe)})}var Me=te.radialAxisAngle=te.vangles?Q(re(V(oe.angle),te.vangles)):oe.angle,Oe=r(ne,se),Fe=Oe+e(-Me);R(Y["radial-axis"],de&&(oe.showticklabels||oe.ticks),{transform:Fe}),R(Y["radial-grid"],de&&oe.showgrid,{transform:xe?"":Oe}),R(Y["radial-line"].select("line"),de&&oe.showline,{x1:xe?-J:ee,y1:0,x2:J,y2:0,transform:Fe}).attr("stroke-width",oe.linewidth).call(t.stroke,oe.linecolor)},Z.updateRadialAxisTitle=function(N,U,te){if(!this.isSmith){var j=this.gd,Y=this.radius,J=this.cx,ee=this.cy,ne=this.getRadial(U),se=this.id+"title",oe=0;if(ne.title){var he=i.bBox(this.layers["radial-axis"].node()).height,le=ne.title.font.size,de=ne.side;oe=de==="top"?le:de==="counterclockwise"?-(he+.4*le):he+.8*le}var xe=te!==void 0?te:this.radialAxisAngle,we=V(xe),be=Math.cos(we),Ae=Math.sin(we),fe=J+Y/2*be+oe*Ae,me=ee-Y/2*Ae+oe*be;this.layers["radial-axis-title"]=m.draw(j,se,{propContainer:ne,propName:this.id+".radialaxis.title",placeholder:F(j,"Click to enter radial axis title"),attributes:{x:fe,y:me,"text-anchor":"middle"},transform:{rotate:-xe}})}},Z.updateAngularAxis=function(N,U){var te=this,j=te.gd,Y=te.layers,J=te.radius,ee=te.innerRadius,ne=te.cx,se=te.cy,oe=te.getAngular(U),he=te.angularAxis,le=te.isSmith;le||(te.fillViewInitialKey("angularaxis.rotation",oe.rotation),he.setGeometry(),he.setScale());var de=le?function(qe){var et=D(te,P([0,qe.x]));return Math.atan2(et[0]-ne,et[1]-se)-Math.PI/2}:function(qe){return he.t2g(qe.x)};he.type==="linear"&&he.thetaunit==="radians"&&(he.tick0=Q(he.tick0),he.dtick=Q(he.dtick));var xe=function(qe){return r(ne+J*Math.cos(qe),se-J*Math.sin(qe))},we=le?function(qe){var et=D(te,P([0,qe.x]));return r(et[0],et[1])}:function(qe){return xe(de(qe))},be=le?function(qe){var et=D(te,P([0,qe.x])),ze=Math.atan2(et[0]-ne,et[1]-se)-Math.PI/2;return r(et[0],et[1])+e(-Q(ze))}:function(qe){var et=de(qe);return xe(et)+e(-Q(et))},Ae=le?function(qe){return S(te,qe.x,0,1/0)}:function(qe){var et=de(qe),ze=Math.cos(et),Ue=Math.sin(et);return"M"+[ne+ee*ze,se-ee*Ue]+"L"+[ne+J*ze,se-J*Ue]},fe=h.makeLabelFns(he,0).labelStandoff,me={xFn:function(qe){var et=de(qe);return Math.cos(et)*fe},yFn:function(qe){var et=de(qe),ze=Math.sin(et)>0?.2:1;return-Math.sin(et)*(fe+qe.fontSize*ze)+Math.abs(Math.cos(et))*(qe.fontSize*k)},anchorFn:function(qe){var et=de(qe),ze=Math.cos(et);return Math.abs(ze)<.1?"middle":ze>0?"start":"end"},heightFn:function(qe,et,ze){var Ue=de(qe);return-.5*(1+Math.sin(Ue))*ze}},ke=$(oe);te.angularTickLayout!==ke&&(Y["angular-axis"].selectAll("."+he._id+"tick").remove(),te.angularTickLayout=ke);var Te,Me=le?[1/0].concat(he.tickvals||[]).map(function(qe){return h.tickText(he,qe,!0,!1)}):h.calcTicks(he);if(le&&(Me[0].text="\u221E",Me[0].fontSize*=1.75),U.gridshape==="linear"?(Te=Me.map(de),y.angleDelta(Te[0],Te[1])<0&&(Te=Te.slice().reverse())):Te=null,te.vangles=Te,he.type==="category"&&(Me=Me.filter(function(qe){return y.isAngleInsideSector(de(qe),te.sectorInRad)})),he.visible){var Oe=he.ticks==="inside"?-1:1,Fe=(he.linewidth||1)/2;h.drawTicks(j,he,{vals:Me,layer:Y["angular-axis"],path:"M"+Oe*Fe+",0h"+Oe*he.ticklen,transFn:be,crisp:!1}),h.drawGrid(j,he,{vals:Me,layer:Y["angular-grid"],path:Ae,transFn:y.noop,crisp:!1}),h.drawLabels(j,he,{vals:Me,layer:Y["angular-axis"],repositionOnUpdate:!0,transFn:we,labelFns:me})}R(Y["angular-line"].select("path"),oe.showline,{d:te.pathSubplot(),transform:r(ne,se)}).attr("stroke-width",oe.linewidth).call(t.stroke,oe.linecolor)},Z.updateFx=function(N,U){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(N),this.updateRadialDrag(N,U,0),this.updateRadialDrag(N,U,1)),this.updateHoverAndMainDrag(N))},Z.updateHoverAndMainDrag=function(N){var U,te,j=this,Y=j.isSmith,J=j.gd,ee=j.layers,ne=N._zoomlayer,se=L.MINZOOM,oe=L.OFFEDGE,he=j.radius,le=j.innerRadius,de=j.cx,xe=j.cy,we=j.cxx,be=j.cyy,Ae=j.sectorInRad,fe=j.vangles,me=j.radialAxis,ke=M.clampTiny,Te=M.findXYatLength,Me=M.findEnclosingVertexAngles,Oe=L.cornerHalfWidth,Fe=L.cornerLen/2,qe=f.makeDragger(ee,"path","maindrag","crosshair");o.select(qe).attr("d",j.pathSubplot()).attr("transform",r(de,xe)),qe.onmousemove=function(st){v.hover(J,st,j.id),J._fullLayout._lasthover=qe,J._fullLayout._hoversubplot=j.id},qe.onmouseout=function(st){J._dragging||d.unhover(J,st)};var et,ze,Ue,We,Ze,nt,ft,xt,It,Et={element:qe,gd:J,subplot:j.id,plotinfo:{id:j.id,xaxis:j.xaxis,yaxis:j.yaxis},xaxes:[j.xaxis],yaxes:[j.yaxis]};function it(st,dt){return Math.sqrt(st*st+dt*dt)}function rt(st,dt){return it(st-we,dt-be)}function At(st,dt){return Math.atan2(be-dt,st-we)}function Gt(st,dt){return[st*Math.cos(dt),st*Math.sin(-dt)]}function Qt(st,dt){if(st===0)return j.pathSector(2*Oe);var ut=Fe/st,Lt=dt-ut,lt=dt+ut,Ct=Math.max(0,Math.min(st,he)),Pt=Ct-Oe,Ke=Ct+Oe;return"M"+Gt(Pt,Lt)+"A"+[Pt,Pt]+" 0,0,0 "+Gt(Pt,lt)+"L"+Gt(Ke,lt)+"A"+[Ke,Ke]+" 0,0,1 "+Gt(Ke,Lt)+"Z"}function Ve(st,dt,ut){if(st===0)return j.pathSector(2*Oe);var Lt,lt,Ct=Gt(st,dt),Pt=Gt(st,ut),Ke=ke((Ct[0]+Pt[0])/2),mt=ke((Ct[1]+Pt[1])/2);if(Ke&&mt){var Dt=mt/Ke,Bt=-1/Dt,Zt=Te(Oe,Dt,Ke,mt);Lt=Te(Fe,Bt,Zt[0][0],Zt[0][1]),lt=Te(Fe,Bt,Zt[1][0],Zt[1][1])}else{var Re,ct;mt?(Re=Fe,ct=Oe):(Re=Oe,ct=Fe),Lt=[[Ke-Re,mt-ct],[Ke+Re,mt-ct]],lt=[[Ke-Re,mt+ct],[Ke+Re,mt+ct]]}return"M"+Lt.join("L")+"L"+lt.reverse().join("L")+"Z"}function Ye(st,dt){return dt=Math.max(Math.min(dt,he),le),st<oe?st=0:he-st<oe?st=he:dt<oe?dt=0:he-dt<oe&&(dt=he),Math.abs(dt-st)>se?(st<dt?(Ue=st,We=dt):(Ue=dt,We=st),!0):(Ue=null,We=null,!1)}function Be(st,dt){st=st||Ze,dt=dt||"M0,0Z",xt.attr("d",st),It.attr("d",dt),f.transitionZoombox(xt,It,nt,ft),nt=!0;var ut={};Ie(ut),J.emit("plotly_relayouting",ut)}function Je(st,dt){var ut,Lt,lt=et+(st*=U),Ct=ze+(dt*=te),Pt=rt(et,ze),Ke=Math.min(rt(lt,Ct),he),mt=At(et,ze);Ye(Pt,Ke)&&(ut=Ze+j.pathSector(We),Ue&&(ut+=j.pathSector(Ue)),Lt=Qt(Ue,mt)+Qt(We,mt)),Be(ut,Lt)}function Se(st,dt,ut,Lt){var lt=M.findIntersectionXY(ut,Lt,ut,[st-we,be-dt]);return it(lt[0],lt[1])}function Pe(st,dt){var ut,Lt,lt=et+st,Ct=ze+dt,Pt=At(et,ze),Ke=At(lt,Ct),mt=Me(Pt,fe),Dt=Me(Ke,fe);Ye(Se(et,ze,mt[0],mt[1]),Math.min(Se(lt,Ct,Dt[0],Dt[1]),he))&&(ut=Ze+j.pathSector(We),Ue&&(ut+=j.pathSector(Ue)),Lt=[Ve(Ue,mt[0],mt[1]),Ve(We,mt[0],mt[1])].join(" ")),Be(ut,Lt)}function De(){if(f.removeZoombox(J),Ue!==null&&We!==null){var st={};Ie(st),f.showDoubleClickNotifier(J),x.call("_guiRelayout",J,st)}}function Ie(st){var dt=me._rl,ut=(dt[1]-dt[0])/(1-le/he)/he,Lt=[dt[0]+(Ue-le)*ut,dt[0]+(We-le)*ut];st[j.id+".radialaxis.range"]=Lt}function $e(st,dt){var ut=J._fullLayout.clickmode;if(f.removeZoombox(J),st===2){var Lt={};for(var lt in j.viewInitial)Lt[j.id+"."+lt]=j.viewInitial[lt];J.emit("plotly_doubleclick",null),x.call("_guiRelayout",J,Lt)}ut.indexOf("select")>-1&&st===1&&b(dt,J,[j.xaxis],[j.yaxis],j.id,Et),ut.indexOf("event")>-1&&v.click(J,dt,j.id)}Et.prepFn=function(st,dt,ut){var Lt=J._fullLayout.dragmode,lt=qe.getBoundingClientRect();J._fullLayout._calcInverseTransform(J);var Ct=J._fullLayout._invTransform;U=J._fullLayout._invScaleX,te=J._fullLayout._invScaleY;var Pt=y.apply3DTransform(Ct)(dt-lt.left,ut-lt.top);if(et=Pt[0],ze=Pt[1],fe){var Ke=M.findPolygonOffset(he,Ae[0],Ae[1],fe);et+=we+Ke[0],ze+=be+Ke[1]}switch(Lt){case"zoom":Et.clickFn=$e,Y||(Et.moveFn=fe?Pe:Je,Et.doneFn=De,function(){Ue=null,We=null,Ze=j.pathSubplot(),nt=!1;var mt=J._fullLayout[j.id];ft=p(mt.bgcolor).getLuminance(),(xt=f.makeZoombox(ne,ft,de,xe,Ze)).attr("fill-rule","evenodd"),It=f.makeCorners(ne,de,xe),g(J)}());break;case"select":case"lasso":c(st,dt,ut,Et,Lt)}},d.init(Et)},Z.updateRadialDrag=function(N,U,te){var j=this,Y=j.gd,J=j.layers,ee=j.radius,ne=j.innerRadius,se=j.cx,oe=j.cy,he=j.radialAxis,le=L.radialDragBoxSize,de=le/2;if(he.visible){var xe,we,be,Ae=V(j.radialAxisAngle),fe=he._rl,me=fe[0],ke=fe[1],Te=fe[te],Me=.75*(fe[1]-fe[0])/(1-j.getHole(U))/ee;te?(xe=se+(ee+de)*Math.cos(Ae),we=oe-(ee+de)*Math.sin(Ae),be="radialdrag"):(xe=se+(ne-de)*Math.cos(Ae),we=oe-(ne-de)*Math.sin(Ae),be="radialdrag-inner");var Oe,Fe,qe,et=f.makeRectDragger(J,be,"crosshair",-de,-de,le,le),ze={element:et,gd:Y};R(o.select(et),he.visible&&ne<ee,{transform:r(xe,we)}),ze.prepFn=function(){Oe=null,Fe=null,qe=null,ze.moveFn=Ue,ze.doneFn=We,g(Y)},ze.clampFn=function(ft,xt){return Math.sqrt(ft*ft+xt*xt)<L.MINDRAG&&(ft=0,xt=0),[ft,xt]},d.init(ze)}function Ue(ft,xt){if(Oe)Oe(ft,xt);else{var It=[ft,-xt],Et=[Math.cos(Ae),Math.sin(Ae)],it=Math.abs(y.dot(It,Et)/Math.sqrt(y.dot(It,It)));isNaN(it)||(Oe=it<.5?Ze:nt)}var rt={};(function(At){Fe!==null?At[j.id+".radialaxis.angle"]=Fe:qe!==null&&(At[j.id+".radialaxis.range["+te+"]"]=qe)})(rt),Y.emit("plotly_relayouting",rt)}function We(){Fe!==null?x.call("_guiRelayout",Y,j.id+".radialaxis.angle",Fe):qe!==null&&x.call("_guiRelayout",Y,j.id+".radialaxis.range["+te+"]",qe)}function Ze(ft,xt){if(te!==0){var It=xe+ft,Et=we+xt;Fe=Math.atan2(oe-Et,It-se),j.vangles&&(Fe=re(Fe,j.vangles)),Fe=Q(Fe);var it=r(se,oe)+e(-Fe);J["radial-axis"].attr("transform",it),J["radial-line"].select("line").attr("transform",it);var rt=j.gd._fullLayout,At=rt[j.id];j.updateRadialAxisTitle(rt,At,Fe)}}function nt(ft,xt){var It=y.dot([ft,-xt],[Math.cos(Ae),Math.sin(Ae)]);if(qe=Te-Me*It,Me>0==(te?qe>me:qe<ke)){var Et=Y._fullLayout,it=Et[j.id];he.range[te]=qe,he._rl[te]=qe,j.updateRadialAxis(Et,it),j.xaxis.setRange(),j.xaxis.setScale(),j.yaxis.setRange(),j.yaxis.setScale();var rt=!1;for(var At in j.traceHash){var Gt=j.traceHash[At],Qt=y.filterVisible(Gt);Gt[0][0].trace._module.plot(Y,j,Qt,it),x.traceIs(At,"gl")&&Qt.length&&(rt=!0)}rt&&(_(Y),T(Y))}else qe=null}},Z.updateAngularDrag=function(N){var U=this,te=U.gd,j=U.layers,Y=U.radius,J=U.angularAxis,ee=U.cx,ne=U.cy,se=U.cxx,oe=U.cyy,he=L.angularDragBoxSize,le=f.makeDragger(j,"path","angulardrag","move"),de={element:le,gd:te};function xe(ze,Ue){return Math.atan2(oe+he-Ue,ze-se-he)}o.select(le).attr("d",U.pathAnnulus(Y,Y+he)).attr("transform",r(ee,ne)).call(w,"move");var we,be,Ae,fe,me,ke,Te=j.frontplot.select(".scatterlayer").selectAll(".trace"),Me=Te.selectAll(".point"),Oe=Te.selectAll(".textpoint");function Fe(ze,Ue){var We=U.gd._fullLayout,Ze=We[U.id],nt=xe(we+ze*N._invScaleX,be+Ue*N._invScaleY),ft=Q(nt-ke);if(fe=Ae+ft,j.frontplot.attr("transform",r(U.xOffset2,U.yOffset2)+e([-ft,se,oe])),U.vangles){me=U.radialAxisAngle+ft;var xt=r(ee,ne)+e(-ft),It=r(ee,ne)+e(-me);j.bg.attr("transform",xt),j["radial-grid"].attr("transform",xt),j["radial-axis"].attr("transform",It),j["radial-line"].select("line").attr("transform",It),U.updateRadialAxisTitle(We,Ze,me)}else U.clipPaths.forTraces.select("path").attr("transform",r(se,oe)+e(ft));Me.each(function(){var Qt=o.select(this),Ve=i.getTranslate(Qt);Qt.attr("transform",r(Ve.x,Ve.y)+e([ft]))}),Oe.each(function(){var Qt=o.select(this),Ve=Qt.select("text"),Ye=i.getTranslate(Qt);Qt.attr("transform",e([ft,Ve.attr("x"),Ve.attr("y")])+r(Ye.x,Ye.y))}),J.rotation=y.modHalf(fe,360),U.updateAngularAxis(We,Ze),U._hasClipOnAxisFalse&&!y.isFullCircle(U.sectorInRad)&&Te.call(i.hideOutsideRangePoints,U);var Et=!1;for(var it in U.traceHash)if(x.traceIs(it,"gl")){var rt=U.traceHash[it],At=y.filterVisible(rt);rt[0][0].trace._module.plot(te,U,At,Ze),At.length&&(Et=!0)}Et&&(_(te),T(te));var Gt={};qe(Gt),te.emit("plotly_relayouting",Gt)}function qe(ze){ze[U.id+".angularaxis.rotation"]=fe,U.vangles&&(ze[U.id+".radialaxis.angle"]=me)}function et(){Oe.select("text").attr("transform",null);var ze={};qe(ze),x.call("_guiRelayout",te,ze)}de.prepFn=function(ze,Ue,We){var Ze=N[U.id];Ae=Ze.angularaxis.rotation;var nt=le.getBoundingClientRect();we=Ue-nt.left,be=We-nt.top,te._fullLayout._calcInverseTransform(te);var ft=y.apply3DTransform(N._invTransform)(we,be);we=ft[0],be=ft[1],ke=xe(we,be),de.moveFn=Fe,de.doneFn=et,g(te)},U.vangles&&!y.isFullCircle(U.sectorInRad)&&(de.prepFn=y.noop,w(o.select(le),null)),d.init(de)},Z.isPtInside=function(N){if(this.isSmith)return!0;var U=this.sectorInRad,te=this.vangles,j=this.angularAxis.c2g(N.theta),Y=this.radialAxis,J=Y.c2l(N.r),ee=Y._rl;return(te?M.isPtInsidePolygon:y.isPtInsideSector)(J,j,ee,U,te)},Z.pathArc=function(N){var U=this.sectorInRad,te=this.vangles;return(te?M.pathPolygon:y.pathArc)(N,U[0],U[1],te)},Z.pathSector=function(N){var U=this.sectorInRad,te=this.vangles;return(te?M.pathPolygon:y.pathSector)(N,U[0],U[1],te)},Z.pathAnnulus=function(N,U){var te=this.sectorInRad,j=this.vangles;return(j?M.pathPolygonAnnulus:y.pathAnnulus)(N,U,te[0],te[1],j)},Z.pathSubplot=function(){var N=this.innerRadius,U=this.radius;return N?this.pathAnnulus(N,U):this.pathSector(U)},Z.fillViewInitialKey=function(N,U){N in this.viewInitial||(this.viewInitial[N]=U)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../plot_api/subroutines":544,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/dragbox":563,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"../smith/helpers":628,"./constants":620,"./helpers":621,"./set_convert":626,"@plotly/d3":58,tinycolor2:312}],626:[function(u,q,W){var o=u("../../lib"),p=u("../cartesian/set_convert"),x=o.deg2rad,y=o.rad2deg;q.exports=function(e,r,t){switch(p(e,t),e._id){case"x":case"radialaxis":(function(i,n){var h=n._subplot;i.setGeometry=function(){var s=i._rl[0],a=i._rl[1],l=h.innerRadius,f=(h.radius-l)/(a-s),d=l/f,v=s>a?function(m){return m<=0}:function(m){return m>=0};i.c2g=function(m){var c=i.c2l(m)-s;return(v(c)?c:0)+d},i.g2c=function(m){return i.l2c(m+s-d)},i.g2p=function(m){return m*f},i.c2p=function(m){return i.g2p(i.c2g(m))}}})(e,r);break;case"angularaxis":(function(i,n){var h=i.type;if(h==="linear"){var s=i.d2c,a=i.c2d;i.d2c=function(l,f){return function(d,v){return v==="degrees"?x(d):d}(s(l),f)},i.c2d=function(l,f){return a(function(d,v){return v==="degrees"?y(d):d}(l,f))}}i.makeCalcdata=function(l,f){var d,v,m=l[f],c=l._length,b=function(k){return i.d2c(k,l.thetaunit)};if(m){if(o.isTypedArray(m)&&h==="linear"){if(c===m.length)return m;if(m.subarray)return m.subarray(0,c)}for(d=new Array(c),v=0;v<c;v++)d[v]=b(m[v])}else{var g=f+"0",w="d"+f,_=g in l?b(l[g]):0,T=l[w]?b(l[w]):(i.period||2*Math.PI)/c;for(d=new Array(c),v=0;v<c;v++)d[v]=_+v*T}return d},i.setGeometry=function(){var l,f,d,v,m=n.sector,c=m.map(x),b={clockwise:-1,counterclockwise:1}[i.direction],g=x(i.rotation),w=function(L){return b*L+g},_=function(L){return(L-g)/b};switch(h){case"linear":f=l=o.identity,v=x,d=y,i.range=o.isFullCircle(c)?[m[0],m[0]+360]:c.map(_).map(y);break;case"category":var T=i._categories.length,k=i.period?Math.max(i.period,T):T;k===0&&(k=1),f=v=function(L){return 2*L*Math.PI/k},l=d=function(L){return L*k/Math.PI/2},i.range=[0,k]}i.c2g=function(L){return w(f(L))},i.g2c=function(L){return l(_(L))},i.t2g=function(L){return w(v(L))},i.g2t=function(L){return d(_(L))}}})(e,r)}}},{"../../lib":503,"../cartesian/set_convert":576}],627:[function(u,q,W){q.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],628:[function(u,q,W){function o(e){return e<0?-1:e>0?1:0}function p(e){var r=e[0],t=e[1];if(!isFinite(r)||!isFinite(t))return[1,0];var i=(r+1)*(r+1)+t*t;return[(r*r+t*t-1)/i,2*t/i]}function x(e,r){var t=r[0],i=r[1];return[t*e.radius+e.cx,-i*e.radius+e.cy]}function y(e,r){return r*e.radius}q.exports={smith:p,reactanceArc:function(e,r,t,i){var n=x(e,p([t,r])),h=n[0],s=n[1],a=x(e,p([i,r])),l=a[0],f=a[1];if(r===0)return["M"+h+","+s,"L"+l+","+f].join(" ");var d=y(e,1/Math.abs(r));return["M"+h+","+s,"A"+d+","+d+" 0 0,"+(r<0?1:0)+" "+l+","+f].join(" ")},resistanceArc:function(e,r,t,i){var n=y(e,1/(r+1)),h=x(e,p([r,t])),s=h[0],a=h[1],l=x(e,p([r,i])),f=l[0],d=l[1];if(o(t)!==o(i)){var v=x(e,p([r,0]));return["M"+s+","+a,"A"+n+","+n+" 0 0,"+(0<t?0:1)+" "+v[0]+","+v[1],"A"+n+","+n+" 0 0,"+(i<0?0:1)+f+","+d].join(" ")}return["M"+s+","+a,"A"+n+","+n+" 0 0,"+(i<t?0:1)+" "+f+","+d].join(" ")},smithTransform:x}},{}],629:[function(u,q,W){var o=u("../get_data").getSubplotCalcData,p=u("../../lib").counterRegex,x=u("../polar/polar"),y=u("./constants"),e=y.attr,r=y.name,t=p(r),i={};i[e]={valType:"subplotid",dflt:r,editType:"calc"},q.exports={attr:e,name:r,idRoot:r,idRegex:t,attrRegex:t,attributes:i,layoutAttributes:u("./layout_attributes"),supplyLayoutDefaults:u("./layout_defaults"),plot:function(n){for(var h=n._fullLayout,s=n.calcdata,a=h._subplots[r],l=0;l<a.length;l++){var f=a[l],d=o(s,r,f),v=h[f]._subplot;v||(v=x(n,f,!0),h[f]._subplot=v),v.plot(d,h,n._promises)}},clean:function(n,h,s,a){for(var l=a._subplots[r]||[],f=0;f<l.length;f++){var d=l[f],v=a[d]._subplot;if(!h[d]&&v)for(var m in v.framework.remove(),v.clipPaths)v.clipPaths[m].remove()}},toSVG:u("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"../polar/polar":625,"./constants":627,"./layout_attributes":630,"./layout_defaults":631}],630:[function(u,q,W){var o=u("../../components/color/attributes"),p=u("../cartesian/layout_attributes"),x=u("../domain").attributes,y=u("../../lib").extendFlat,e=u("../../plot_api/edit_types").overrideAll,r=e({color:p.color,showline:y({},p.showline,{dflt:!0}),linecolor:p.linecolor,linewidth:p.linewidth,showgrid:y({},p.showgrid,{dflt:!0}),gridcolor:p.gridcolor,gridwidth:p.gridwidth},"plot","from-root"),t=e({ticklen:p.ticklen,tickwidth:y({},p.tickwidth,{dflt:2}),tickcolor:p.tickcolor,showticklabels:p.showticklabels,showtickprefix:p.showtickprefix,tickprefix:p.tickprefix,showticksuffix:p.showticksuffix,ticksuffix:p.ticksuffix,tickfont:p.tickfont,tickformat:p.tickformat,hoverformat:p.hoverformat,layer:p.layer},"plot","from-root"),i=y({visible:y({},p.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:y({},p.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},r,t),n=y({visible:y({},p.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:p.ticks,editType:"calc"},r,t);q.exports={domain:x({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:o.background},realaxis:i,imaginaryaxis:n,editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],631:[function(u,q,W){var o,p,x,y=u("../../lib"),e=u("../../components/color"),r=u("../../plot_api/plot_template"),t=u("../subplot_defaults"),i=u("../get_data").getSubplotData,n=u("../cartesian/prefix_suffix_defaults"),h=u("../cartesian/tick_label_defaults"),s=u("../cartesian/line_grid_defaults"),a=u("../cartesian/set_convert"),l=u("./layout_attributes"),f=u("./constants"),d=f.axisNames,v=(o=function(c){return c.slice().reverse().map(function(b){return-b}).concat([0]).concat(c)},p=String,x={},function(c){var b=p?p(c):c;if(b in x)return x[b];var g=o(c);return x[b]=g,g});function m(c,b,g,w){var _=g("bgcolor");w.bgColor=e.combine(_,w.paper_bgcolor);var T,k=i(w.fullData,f.name,w.id),L=w.layoutOut;function M(Z,$){return g(T+"."+Z,$)}for(var I=0;I<d.length;I++){T=d[I],y.isPlainObject(c[T])||(c[T]={});var P=c[T],S=r.newContainer(b,T);S._id=S._name=T,S._attr=w.id+"."+T,S._traceIndices=k.map(function(Z){return Z._expandedIndex});var E=M("visible");if(S.type="linear",a(S,L),n(P,S,M,S.type),E){var D,F,H,V,Q=T==="realaxis";Q&&M("side"),Q?M("tickvals"):M("tickvals",v(b.realaxis.tickvals||l.realaxis.tickvals.dflt));var K=w.font||{};E&&(F=(D=M("color"))===P.color?D:K.color,H=K.size,V=K.family),h(P,S,M,S.type,{noAng:!Q,noExp:!0,font:{color:F,size:H,family:V}}),y.coerce2(c,b,l,T+".ticklen"),y.coerce2(c,b,l,T+".tickwidth"),y.coerce2(c,b,l,T+".tickcolor",b.color),M("ticks")||(delete b[T].ticklen,delete b[T].tickwidth,delete b[T].tickcolor),s(P,S,M,{dfltColor:D,bgColor:w.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l[T]}),M("layer")}M("hoverformat"),delete S.type,S._input=P}}q.exports=function(c,b,g){t(c,b,g,{noUirevision:!0,type:f.name,attributes:l,handleDefaults:m,font:b.font,paper_bgcolor:b.paper_bgcolor,fullData:g,layoutOut:b})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/set_convert":576,"../cartesian/tick_label_defaults":578,"../get_data":593,"../subplot_defaults":632,"./constants":627,"./layout_attributes":630}],632:[function(u,q,W){var o=u("../lib"),p=u("../plot_api/plot_template"),x=u("./domain").defaults;q.exports=function(y,e,r,t){var i,n,h=t.type,s=t.attributes,a=t.handleDefaults,l=t.partition||"x",f=e._subplots[h],d=f.length,v=d&&f[0].replace(/\d+$/,"");function m(w,_){return o.coerce(i,n,s,w,_)}for(var c=0;c<d;c++){var b=f[c];i=y[b]?y[b]:y[b]={},n=p.newContainer(e,b,v),t.noUirevision||m("uirevision",e.uirevision);var g={};g[l]=[c/d,(c+1)/d],x(n,e,m,g),t.id=b,a(i,n,m,t)}}},{"../lib":503,"../plot_api/plot_template":543,"./domain":584}],633:[function(u,q,W){var o=u("../constants/docs");o.FORMAT_LINK,o.DATE_FORMAT_LINK;function p(x){var y=x.description?" "+x.description:"",e=x.keys||[];if(e.length>0){for(var r=[],t=0;t<e.length;t++)r[t]="`"+e[t]+"`";y+="Finally, the template string has access to ",y=e.length===1?"variable "+r[0]:"variables "+r.slice(0,-1).join(", ")+" and "+r.slice(-1)+"."}return y}W.hovertemplateAttrs=function(x,y){x=x||{},p(y=y||{});var e={valType:"string",dflt:"",editType:x.editType||"none"};return x.arrayOk!==!1&&(e.arrayOk=!0),e},W.texttemplateAttrs=function(x,y){x=x||{},p(y=y||{});var e={valType:"string",dflt:"",editType:x.editType||"calc"};return x.arrayOk!==!1&&(e.arrayOk=!0),e}},{"../constants/docs":474}],634:[function(u,q,W){var o=u("./ternary"),p=u("../../plots/get_data").getSubplotCalcData,x=u("../../lib").counterRegex;W.name="ternary";var y=W.attr="subplot";W.idRoot="ternary",W.idRegex=W.attrRegex=x("ternary"),(W.attributes={})[y]={valType:"subplotid",dflt:"ternary",editType:"calc"},W.layoutAttributes=u("./layout_attributes"),W.supplyLayoutDefaults=u("./layout_defaults"),W.plot=function(e){for(var r=e._fullLayout,t=e.calcdata,i=r._subplots.ternary,n=0;n<i.length;n++){var h=i[n],s=p(t,"ternary",h),a=r[h]._subplot;a||(a=new o({id:h,graphDiv:e,container:r._ternarylayer.node()},r),r[h]._subplot=a),a.plot(s,r,e._promises)}},W.clean=function(e,r,t,i){for(var n=i._subplots.ternary||[],h=0;h<n.length;h++){var s=n[h],a=i[s]._subplot;!r[s]&&a&&(a.plotContainer.remove(),a.clipDef.remove(),a.clipDefRelative.remove(),a.layers["a-title"].remove(),a.layers["b-title"].remove(),a.layers["c-title"].remove())}}},{"../../lib":503,"../../plots/get_data":593,"./layout_attributes":635,"./layout_defaults":636,"./ternary":637}],635:[function(u,q,W){var o=u("../../components/color/attributes"),p=u("../domain").attributes,x=u("../cartesian/layout_attributes"),y=u("../../plot_api/edit_types").overrideAll,e=u("../../lib/extend").extendFlat,r={title:{text:x.title.text,font:x.title.font},color:x.color,tickmode:x.tickmode,nticks:e({},x.nticks,{dflt:6,min:1}),tick0:x.tick0,dtick:x.dtick,tickvals:x.tickvals,ticktext:x.ticktext,ticks:x.ticks,ticklen:x.ticklen,tickwidth:x.tickwidth,tickcolor:x.tickcolor,showticklabels:x.showticklabels,showtickprefix:x.showtickprefix,tickprefix:x.tickprefix,showticksuffix:x.showticksuffix,ticksuffix:x.ticksuffix,showexponent:x.showexponent,exponentformat:x.exponentformat,minexponent:x.minexponent,separatethousands:x.separatethousands,tickfont:x.tickfont,tickangle:x.tickangle,tickformat:x.tickformat,tickformatstops:x.tickformatstops,hoverformat:x.hoverformat,showline:e({},x.showline,{dflt:!0}),linecolor:x.linecolor,linewidth:x.linewidth,showgrid:e({},x.showgrid,{dflt:!0}),gridcolor:x.gridcolor,gridwidth:x.gridwidth,layer:x.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:x._deprecated.title,titlefont:x._deprecated.titlefont}},t=q.exports=y({domain:p({name:"ternary"}),bgcolor:{valType:"color",dflt:o.background},sum:{valType:"number",dflt:1,min:0},aaxis:r,baxis:r,caxis:r},"plot","from-root");t.uirevision={valType:"any",editType:"none"},t.aaxis.uirevision=t.baxis.uirevision=t.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],636:[function(u,q,W){var o=u("../../components/color"),p=u("../../plot_api/plot_template"),x=u("../../lib"),y=u("../subplot_defaults"),e=u("../cartesian/tick_label_defaults"),r=u("../cartesian/prefix_suffix_defaults"),t=u("../cartesian/tick_mark_defaults"),i=u("../cartesian/tick_value_defaults"),n=u("../cartesian/line_grid_defaults"),h=u("./layout_attributes"),s=["aaxis","baxis","caxis"];function a(f,d,v,m){var c,b,g,w=v("bgcolor"),_=v("sum");m.bgColor=o.combine(w,m.paper_bgcolor);for(var T=0;T<s.length;T++)b=f[c=s[T]]||{},(g=p.newContainer(d,c))._name=c,l(b,g,m,d);var k=d.aaxis,L=d.baxis,M=d.caxis;k.min+L.min+M.min>=_&&(k.min=0,L.min=0,M.min=0,f.aaxis&&delete f.aaxis.min,f.baxis&&delete f.baxis.min,f.caxis&&delete f.caxis.min)}function l(f,d,v,m){var c=h[d._name];function b(L,M){return x.coerce(f,d,c,L,M)}b("uirevision",m.uirevision),d.type="linear";var g=b("color"),w=g!==c.color.dflt?g:v.font.color,_=d._name.charAt(0).toUpperCase(),T="Component "+_,k=b("title.text",T);d._hovertitle=k===T?k:_,x.coerceFont(b,"title.font",{family:v.font.family,size:x.bigFont(v.font.size),color:w}),b("min"),i(f,d,b,"linear"),r(f,d,b,"linear"),e(f,d,b,"linear"),t(f,d,b,{outerTicks:!0}),b("showticklabels")&&(x.coerceFont(b,"tickfont",{family:v.font.family,size:v.font.size,color:w}),b("tickangle"),b("tickformat")),n(f,d,b,{dfltColor:g,bgColor:v.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:c}),b("hoverformat"),b("layer")}q.exports=function(f,d,v){y(f,d,v,{type:"ternary",attributes:h,handleDefaults:a,font:d.font,paper_bgcolor:d.paper_bgcolor})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../subplot_defaults":632,"./layout_attributes":635}],637:[function(u,q,W){var o=u("@plotly/d3"),p=u("tinycolor2"),x=u("../../registry"),y=u("../../lib"),e=y.strTranslate,r=y._,t=u("../../components/color"),i=u("../../components/drawing"),n=u("../cartesian/set_convert"),h=u("../../lib/extend").extendFlat,s=u("../plots"),a=u("../cartesian/axes"),l=u("../../components/dragelement"),f=u("../../components/fx"),d=u("../../components/dragelement/helpers"),v=d.freeMode,m=d.rectMode,c=u("../../components/titles"),b=u("../cartesian/select").prepSelect,g=u("../cartesian/select").selectOnClick,w=u("../cartesian/select").clearSelect,_=u("../cartesian/select").clearSelectionsCache,T=u("../cartesian/constants");function k(H,V){this.id=H.id,this.graphDiv=H.graphDiv,this.init(V),this.makeFramework(V),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}q.exports=k;var L=k.prototype;L.init=function(H){this.container=H._ternarylayer,this.defs=H._defs,this.layoutId=H._uid,this.traceHash={},this.layers={}},L.plot=function(H,V){var Q=V[this.id],K=V._size;this._hasClipOnAxisFalse=!1;for(var Z=0;Z<H.length;Z++)if(H[Z][0].trace.cliponaxis===!1){this._hasClipOnAxisFalse=!0;break}this.updateLayers(Q),this.adjustLayout(Q,K),s.generalUpdatePerTraceModule(this.graphDiv,this,H,Q),this.layers.plotbg.select("path").call(t.fill,Q.bgcolor)},L.makeFramework=function(H){var V=this.graphDiv,Q=H[this.id],K=this.clipId="clip"+this.layoutId+this.id,Z=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=y.ensureSingleById(H._clips,"clipPath",K,function($){$.append("path").attr("d","M0,0Z")}),this.clipDefRelative=y.ensureSingleById(H._clips,"clipPath",Z,function($){$.append("path").attr("d","M0,0Z")}),this.plotContainer=y.ensureSingle(this.container,"g",this.id),this.updateLayers(Q),i.setClipUrl(this.layers.backplot,K,V),i.setClipUrl(this.layers.grids,K,V)},L.updateLayers=function(H){var V=this.layers,Q=["draglayer","plotbg","backplot","grids"];H.aaxis.layer==="below traces"&&Q.push("aaxis","aline"),H.baxis.layer==="below traces"&&Q.push("baxis","bline"),H.caxis.layer==="below traces"&&Q.push("caxis","cline"),Q.push("frontplot"),H.aaxis.layer==="above traces"&&Q.push("aaxis","aline"),H.baxis.layer==="above traces"&&Q.push("baxis","bline"),H.caxis.layer==="above traces"&&Q.push("caxis","cline");var K=this.plotContainer.selectAll("g.toplevel").data(Q,String),Z=["agrid","bgrid","cgrid"];K.enter().append("g").attr("class",function($){return"toplevel "+$}).each(function($){var re=o.select(this);V[$]=re,$==="frontplot"?re.append("g").classed("scatterlayer",!0):$==="backplot"?re.append("g").classed("maplayer",!0):$==="plotbg"?re.append("path").attr("d","M0,0Z"):$==="aline"||$==="bline"||$==="cline"?re.append("path"):$==="grids"&&Z.forEach(function(R){V[R]=re.append("g").classed("grid "+R,!0)})}),K.order()};var M=Math.sqrt(4/3);L.adjustLayout=function(H,V){var Q,K,Z,$,re,R,N=this,U=H.domain,te=(U.x[0]+U.x[1])/2,j=(U.y[0]+U.y[1])/2,Y=U.x[1]-U.x[0],J=U.y[1]-U.y[0],ee=Y*V.w,ne=J*V.h,se=H.sum,oe=H.aaxis.min,he=H.baxis.min,le=H.caxis.min;ee>M*ne?Z=($=ne)*M:$=(Z=ee)/M,re=Y*Z/ee,R=J*$/ne,Q=V.l+V.w*te-Z/2,K=V.t+V.h*(1-j)-$/2,N.x0=Q,N.y0=K,N.w=Z,N.h=$,N.sum=se,N.xaxis={type:"linear",range:[oe+2*le-se,se-oe-2*he],domain:[te-re/2,te+re/2],_id:"x"},n(N.xaxis,N.graphDiv._fullLayout),N.xaxis.setScale(),N.xaxis.isPtWithinRange=function(Oe){return Oe.a>=N.aaxis.range[0]&&Oe.a<=N.aaxis.range[1]&&Oe.b>=N.baxis.range[1]&&Oe.b<=N.baxis.range[0]&&Oe.c>=N.caxis.range[1]&&Oe.c<=N.caxis.range[0]},N.yaxis={type:"linear",range:[oe,se-he-le],domain:[j-R/2,j+R/2],_id:"y"},n(N.yaxis,N.graphDiv._fullLayout),N.yaxis.setScale(),N.yaxis.isPtWithinRange=function(){return!0};var de=N.yaxis.domain[0],xe=N.aaxis=h({},H.aaxis,{range:[oe,se-he-le],side:"left",tickangle:(+H.aaxis.tickangle||0)-30,domain:[de,de+R*M],anchor:"free",position:0,_id:"y",_length:Z});n(xe,N.graphDiv._fullLayout),xe.setScale();var we=N.baxis=h({},H.baxis,{range:[se-oe-le,he],side:"bottom",domain:N.xaxis.domain,anchor:"free",position:0,_id:"x",_length:Z});n(we,N.graphDiv._fullLayout),we.setScale();var be=N.caxis=h({},H.caxis,{range:[se-oe-he,le],side:"right",tickangle:(+H.caxis.tickangle||0)+30,domain:[de,de+R*M],anchor:"free",position:0,_id:"y",_length:Z});n(be,N.graphDiv._fullLayout),be.setScale();var Ae="M"+Q+","+(K+$)+"h"+Z+"l-"+Z/2+",-"+$+"Z";N.clipDef.select("path").attr("d",Ae),N.layers.plotbg.select("path").attr("d",Ae);var fe="M0,"+$+"h"+Z+"l-"+Z/2+",-"+$+"Z";N.clipDefRelative.select("path").attr("d",fe);var me=e(Q,K);N.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",me),N.clipDefRelative.select("path").attr("transform",null);var ke=e(Q-we._offset,K+$);N.layers.baxis.attr("transform",ke),N.layers.bgrid.attr("transform",ke);var Te=e(Q+Z/2,K)+"rotate(30)"+e(0,-xe._offset);N.layers.aaxis.attr("transform",Te),N.layers.agrid.attr("transform",Te);var Me=e(Q+Z/2,K)+"rotate(-30)"+e(0,-be._offset);N.layers.caxis.attr("transform",Me),N.layers.cgrid.attr("transform",Me),N.drawAxes(!0),N.layers.aline.select("path").attr("d",xe.showline?"M"+Q+","+(K+$)+"l"+Z/2+",-"+$:"M0,0").call(t.stroke,xe.linecolor||"#000").style("stroke-width",(xe.linewidth||0)+"px"),N.layers.bline.select("path").attr("d",we.showline?"M"+Q+","+(K+$)+"h"+Z:"M0,0").call(t.stroke,we.linecolor||"#000").style("stroke-width",(we.linewidth||0)+"px"),N.layers.cline.select("path").attr("d",be.showline?"M"+(Q+Z/2)+","+K+"l"+Z/2+","+$:"M0,0").call(t.stroke,be.linecolor||"#000").style("stroke-width",(be.linewidth||0)+"px"),N.graphDiv._context.staticPlot||N.initInteractions(),i.setClipUrl(N.layers.frontplot,N._hasClipOnAxisFalse?null:N.clipId,N.graphDiv)},L.drawAxes=function(H){var V=this.graphDiv,Q=this.id.substr(7)+"title",K=this.layers,Z=this.aaxis,$=this.baxis,re=this.caxis;if(this.drawAx(Z),this.drawAx($),this.drawAx(re),H){var R=Math.max(Z.showticklabels?Z.tickfont.size/2:0,(re.showticklabels?.75*re.tickfont.size:0)+(re.ticks==="outside"?.87*re.ticklen:0)),N=($.showticklabels?$.tickfont.size:0)+($.ticks==="outside"?$.ticklen:0)+3;K["a-title"]=c.draw(V,"a"+Q,{propContainer:Z,propName:this.id+".aaxis.title",placeholder:r(V,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-Z.title.font.size/3-R,"text-anchor":"middle"}}),K["b-title"]=c.draw(V,"b"+Q,{propContainer:$,propName:this.id+".baxis.title",placeholder:r(V,"Click to enter Component B title"),attributes:{x:this.x0-N,y:this.y0+this.h+.83*$.title.font.size+N,"text-anchor":"middle"}}),K["c-title"]=c.draw(V,"c"+Q,{propContainer:re,propName:this.id+".caxis.title",placeholder:r(V,"Click to enter Component C title"),attributes:{x:this.x0+this.w+N,y:this.y0+this.h+.83*re.title.font.size+N,"text-anchor":"middle"}})}},L.drawAx=function(H){var V,Q=this.graphDiv,K=H._name,Z=K.charAt(0),$=H._id,re=this.layers[K],R=Z+"tickLayout",N=(V=H).ticks+String(V.ticklen)+String(V.showticklabels);this[R]!==N&&(re.selectAll("."+$+"tick").remove(),this[R]=N),H.setScale();var U=a.calcTicks(H),te=a.clipEnds(H,U),j=a.makeTransTickFn(H),Y=a.getTickSigns(H)[2],J=y.deg2rad(30),ee=Y*(H.linewidth||1)/2,ne=Y*H.ticklen,se=this.w,oe=this.h,he=Z==="b"?"M0,"+ee+"l"+Math.sin(J)*ne+","+Math.cos(J)*ne:"M"+ee+",0l"+Math.cos(J)*ne+","+-Math.sin(J)*ne,le={a:"M0,0l"+oe+",-"+se/2,b:"M0,0l-"+se/2+",-"+oe,c:"M0,0l-"+oe+","+se/2}[Z];a.drawTicks(Q,H,{vals:H.ticks==="inside"?te:U,layer:re,path:he,transFn:j,crisp:!1}),a.drawGrid(Q,H,{vals:te,layer:this.layers[Z+"grid"],path:le,transFn:j,crisp:!1}),a.drawLabels(Q,H,{vals:U,layer:re,transFn:j,labelFns:a.makeLabelFns(H,0,30)})};var I=T.MINZOOM/2+.87,P="m-0.87,.5h"+I+"v3h-"+(I+5.2)+"l"+(I/2+2.6)+",-"+(.87*I+4.5)+"l2.6,1.5l-"+I/2+","+.87*I+"Z",S="m0.87,.5h-"+I+"v3h"+(I+5.2)+"l-"+(I/2+2.6)+",-"+(.87*I+4.5)+"l-2.6,1.5l"+I/2+","+.87*I+"Z",E="m0,1l"+I/2+","+.87*I+"l2.6,-1.5l-"+(I/2+2.6)+",-"+(.87*I+4.5)+"l-"+(I/2+2.6)+","+(.87*I+4.5)+"l2.6,1.5l"+I/2+",-"+.87*I+"Z",D=!0;function F(H){o.select(H).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}L.clearSelect=function(){_(this.dragOptions),w(this.dragOptions.gd)},L.initInteractions=function(){var H,V,Q,K,Z,$,re,R,N,U,te,j,Y=this,J=Y.layers.plotbg.select("path").node(),ee=Y.graphDiv,ne=ee._fullLayout._zoomlayer;function se(fe){var me={};return me[Y.id+".aaxis.min"]=fe.a,me[Y.id+".baxis.min"]=fe.b,me[Y.id+".caxis.min"]=fe.c,me}function oe(fe,me){var ke=ee._fullLayout.clickmode;F(ee),fe===2&&(ee.emit("plotly_doubleclick",null),x.call("_guiRelayout",ee,se({a:0,b:0,c:0}))),ke.indexOf("select")>-1&&fe===1&&g(me,ee,[Y.xaxis],[Y.yaxis],Y.id,Y.dragOptions),ke.indexOf("event")>-1&&f.click(ee,me,Y.id)}function he(fe,me){return 1-me/Y.h}function le(fe,me){return 1-(fe+(Y.h-me)/Math.sqrt(3))/Y.w}function de(fe,me){return(fe-(Y.h-me)/Math.sqrt(3))/Y.w}function xe(fe,me){var ke=Q+fe*H,Te=K+me*V,Me=Math.max(0,Math.min(1,he(0,K),he(0,Te))),Oe=Math.max(0,Math.min(1,le(Q,K),le(ke,Te))),Fe=Math.max(0,Math.min(1,de(Q,K),de(ke,Te))),qe=(Me/2+Fe)*Y.w,et=(1-Me/2-Oe)*Y.w,ze=(qe+et)/2,Ue=et-qe,We=(1-Me)*Y.h,Ze=We-Ue/M;Ue<T.MINZOOM?(re=Z,te.attr("d",N),j.attr("d","M0,0Z")):(re={a:Z.a+Me*$,b:Z.b+Oe*$,c:Z.c+Fe*$},te.attr("d",N+"M"+qe+","+We+"H"+et+"L"+ze+","+Ze+"L"+qe+","+We+"Z"),j.attr("d","M"+Q+","+K+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+qe+","+We+P+"M"+et+","+We+S+"M"+ze+","+Ze+E)),U||(te.transition().style("fill",R>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),j.transition().style("opacity",1).duration(200),U=!0),ee.emit("plotly_relayouting",se(re))}function we(){F(ee),re!==Z&&(x.call("_guiRelayout",ee,se(re)),D&&ee.data&&ee._context.showTips&&(y.notifier(r(ee,"Double-click to zoom back out"),"long"),D=!1))}function be(fe,me){var ke=fe/Y.xaxis._m,Te=me/Y.yaxis._m,Me=[(re={a:Z.a-Te,b:Z.b+(ke+Te)/2,c:Z.c-(ke-Te)/2}).a,re.b,re.c].sort(y.sorterAsc),Oe=Me.indexOf(re.a),Fe=Me.indexOf(re.b),qe=Me.indexOf(re.c);Me[0]<0&&(Me[1]+Me[0]/2<0?(Me[2]+=Me[0]+Me[1],Me[0]=Me[1]=0):(Me[2]+=Me[0]/2,Me[1]+=Me[0]/2,Me[0]=0),re={a:Me[Oe],b:Me[Fe],c:Me[qe]},me=(Z.a-re.a)*Y.yaxis._m,fe=(Z.c-re.c-Z.b+re.b)*Y.xaxis._m);var et=e(Y.x0+fe,Y.y0+me);Y.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",et);var ze=e(-fe,-me);Y.clipDefRelative.select("path").attr("transform",ze),Y.aaxis.range=[re.a,Y.sum-re.b-re.c],Y.baxis.range=[Y.sum-re.a-re.c,re.b],Y.caxis.range=[Y.sum-re.a-re.b,re.c],Y.drawAxes(!1),Y._hasClipOnAxisFalse&&Y.plotContainer.select(".scatterlayer").selectAll(".trace").call(i.hideOutsideRangePoints,Y),ee.emit("plotly_relayouting",se(re))}function Ae(){x.call("_guiRelayout",ee,se(re))}this.dragOptions={element:J,gd:ee,plotinfo:{id:Y.id,domain:ee._fullLayout[Y.id].domain,xaxis:Y.xaxis,yaxis:Y.yaxis},subplot:Y.id,prepFn:function(fe,me,ke){Y.dragOptions.xaxes=[Y.xaxis],Y.dragOptions.yaxes=[Y.yaxis],H=ee._fullLayout._invScaleX,V=ee._fullLayout._invScaleY;var Te=Y.dragOptions.dragmode=ee._fullLayout.dragmode;v(Te)?Y.dragOptions.minDrag=1:Y.dragOptions.minDrag=void 0,Te==="zoom"?(Y.dragOptions.moveFn=xe,Y.dragOptions.clickFn=oe,Y.dragOptions.doneFn=we,function(Me,Oe,Fe){var qe=J.getBoundingClientRect();Q=Oe-qe.left,K=Fe-qe.top,ee._fullLayout._calcInverseTransform(ee);var et=ee._fullLayout._invTransform,ze=y.apply3DTransform(et)(Q,K);Q=ze[0],K=ze[1],Z={a:Y.aaxis.range[0],b:Y.baxis.range[1],c:Y.caxis.range[1]},re=Z,$=Y.aaxis.range[1]-Z.a,R=p(Y.graphDiv._fullLayout[Y.id].bgcolor).getLuminance(),N="M0,"+Y.h+"L"+Y.w/2+", 0L"+Y.w+","+Y.h+"Z",U=!1,te=ne.append("path").attr("class","zoombox").attr("transform",e(Y.x0,Y.y0)).style({fill:R>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",N),j=ne.append("path").attr("class","zoombox-corners").attr("transform",e(Y.x0,Y.y0)).style({fill:t.background,stroke:t.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),Y.clearSelect(ee)}(0,me,ke)):Te==="pan"?(Y.dragOptions.moveFn=be,Y.dragOptions.clickFn=oe,Y.dragOptions.doneFn=Ae,Z={a:Y.aaxis.range[0],b:Y.baxis.range[1],c:Y.caxis.range[1]},re=Z,Y.clearSelect(ee)):(m(Te)||v(Te))&&b(fe,me,ke,Y.dragOptions,Te)}},J.onmousemove=function(fe){f.hover(ee,fe,Y.id),ee._fullLayout._lasthover=J,ee._fullLayout._hoversubplot=Y.id},J.onmouseout=function(fe){ee._dragging||l.unhover(ee,fe)},l.init(this.dragOptions)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../lib":503,"../../lib/extend":493,"../../registry":638,"../cartesian/axes":554,"../cartesian/constants":561,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"@plotly/d3":58,tinycolor2:312}],638:[function(u,q,W){var o=u("./lib/loggers"),p=u("./lib/noop"),x=u("./lib/push_unique"),y=u("./lib/is_plain_object"),e=u("./lib/dom").addStyleRule,r=u("./lib/extend"),t=u("./plots/attributes"),i=u("./plots/layout_attributes"),n=r.extendFlat,h=r.extendDeepAll;function s(g){var w=g.name,_=g.categories,T=g.meta;if(W.modules[w])o.log("Type "+w+" already registered");else{W.subplotsRegistry[g.basePlotModule.name]||function(D){var F=D.name;if(W.subplotsRegistry[F])return void o.log("Plot type "+F+" already registered.");for(var H in d(D),W.subplotsRegistry[F]=D,W.componentsRegistry)c(H,D.name)}(g.basePlotModule);for(var k={},L=0;L<_.length;L++)k[_[L]]=!0,W.allCategories[_[L]]=!0;for(var M in W.modules[w]={_module:g,categories:k},T&&Object.keys(T).length&&(W.modules[w].meta=T),W.allTypes.push(w),W.componentsRegistry)v(M,w);g.layoutAttributes&&n(W.traceLayoutAttributes,g.layoutAttributes);var I=g.basePlotModule,P=I.name;if(P==="mapbox"){var S=I.constants.styleRules;for(var E in S)e(".js-plotly-plot .plotly .mapboxgl-"+E,S[E])}P!=="geo"&&P!=="mapbox"||typeof window===void 0||window.PlotlyGeoAssets!==void 0||(window.PlotlyGeoAssets={topojson:{}})}}function a(g){if(typeof g.name!="string")throw new Error("Component module *name* must be a string.");var w=g.name;for(var _ in W.componentsRegistry[w]=g,g.layoutAttributes&&(g.layoutAttributes._isLinkedToArray&&x(W.layoutArrayContainers,w),d(g)),W.modules)v(w,_);for(var T in W.subplotsRegistry)c(w,T);for(var k in W.transformsRegistry)m(w,k);g.schema&&g.schema.layout&&h(i,g.schema.layout)}function l(g){if(typeof g.name!="string")throw new Error("Transform module *name* must be a string.");var w="Transform module "+g.name,_=typeof g.transform=="function",T=typeof g.calcTransform=="function";if(!_&&!T)throw new Error(w+" is missing a *transform* or *calcTransform* method.");for(var k in _&&T&&o.log([w+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),y(g.attributes)||o.log(w+" registered without an *attributes* object."),typeof g.supplyDefaults!="function"&&o.log(w+" registered without a *supplyDefaults* method."),W.transformsRegistry[g.name]=g,W.componentsRegistry)m(k,g.name)}function f(g){var w=g.name,_=w.split("-")[0],T=g.dictionary,k=g.format,L=T&&Object.keys(T).length,M=k&&Object.keys(k).length,I=W.localeRegistry,P=I[w];if(P||(I[w]=P={}),_!==w){var S=I[_];S||(I[_]=S={}),L&&S.dictionary===P.dictionary&&(S.dictionary=T),M&&S.format===P.format&&(S.format=k)}L&&(P.dictionary=T),M&&(P.format=k)}function d(g){if(g.layoutAttributes){var w=g.layoutAttributes._arrayAttrRegexps;if(w)for(var _=0;_<w.length;_++)x(W.layoutArrayRegexes,w[_])}}function v(g,w){var _=W.componentsRegistry[g].schema;if(_&&_.traces){var T=_.traces[w];T&&h(W.modules[w]._module.attributes,T)}}function m(g,w){var _=W.componentsRegistry[g].schema;if(_&&_.transforms){var T=_.transforms[w];T&&h(W.transformsRegistry[w].attributes,T)}}function c(g,w){var _=W.componentsRegistry[g].schema;if(_&&_.subplots){var T=W.subplotsRegistry[w],k=T.layoutAttributes,L=T.attr==="subplot"?T.name:T.attr;Array.isArray(L)&&(L=L[0]);var M=_.subplots[L];k&&M&&h(k,M)}}function b(g){return typeof g=="object"&&(g=g.type),g}W.modules={},W.allCategories={},W.allTypes=[],W.subplotsRegistry={},W.transformsRegistry={},W.componentsRegistry={},W.layoutArrayContainers=[],W.layoutArrayRegexes=[],W.traceLayoutAttributes={},W.localeRegistry={},W.apiMethodRegistry={},W.collectableSubplotTypes=null,W.register=function(g){if(W.collectableSubplotTypes=null,!g)throw new Error("No argument passed to Plotly.register.");g&&!Array.isArray(g)&&(g=[g]);for(var w=0;w<g.length;w++){var _=g[w];if(!_)throw new Error("Invalid module was attempted to be registered!");switch(_.moduleType){case"trace":s(_);break;case"transform":l(_);break;case"component":a(_);break;case"locale":f(_);break;case"apiMethod":var T=_.name;W.apiMethodRegistry[T]=_.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},W.getModule=function(g){var w=W.modules[b(g)];return!!w&&w._module},W.traceIs=function(g,w){if((g=b(g))==="various")return!1;var _=W.modules[g];return _||(g&&o.log("Unrecognized trace type "+g+"."),_=W.modules[t.type.dflt]),!!_.categories[w]},W.getTransformIndices=function(g,w){for(var _=[],T=g.transforms||[],k=0;k<T.length;k++)T[k].type===w&&_.push(k);return _},W.hasTransform=function(g,w){for(var _=g.transforms||[],T=0;T<_.length;T++)if(_[T].type===w)return!0;return!1},W.getComponentMethod=function(g,w){var _=W.componentsRegistry[g];return _&&_[w]||p},W.call=function(){var g=arguments[0],w=[].slice.call(arguments,1);return W.apiMethodRegistry[g].apply(null,w)}},{"./lib/dom":491,"./lib/extend":493,"./lib/is_plain_object":504,"./lib/loggers":507,"./lib/noop":512,"./lib/push_unique":518,"./plots/attributes":550,"./plots/layout_attributes":610}],639:[function(u,q,W){var o=u("../registry"),p=u("../lib"),x=p.extendFlat,y=p.extendDeep;function e(r){var t;switch(r){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}q.exports=function(r,t){var i,n,h=r.data,s=r.layout,a=y([],h),l=y({},s,e(t.tileClass)),f=r._context||{};if(t.width&&(l.width=t.width),t.height&&(l.height=t.height),t.tileClass==="thumbnail"||t.tileClass==="themes__thumb"){l.annotations=[];var d=Object.keys(l);for(i=0;i<d.length;i++)n=d[i],["xaxis","yaxis","zaxis"].indexOf(n.slice(0,5))>-1&&(l[d[i]].title={text:""});for(i=0;i<a.length;i++){var v=a[i];v.showscale=!1,v.marker&&(v.marker.showscale=!1),o.traceIs(v,"pie-like")&&(v.textposition="none")}}if(Array.isArray(t.annotations))for(i=0;i<t.annotations.length;i++)l.annotations.push(t.annotations[i]);var m=Object.keys(l).filter(function(_){return _.match(/^scene\d*$/)});if(m.length){var c={};for(t.tileClass==="thumbnail"&&(c={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),i=0;i<m.length;i++){var b=l[m[i]];b.xaxis||(b.xaxis={}),b.yaxis||(b.yaxis={}),b.zaxis||(b.zaxis={}),x(b.xaxis,c),x(b.yaxis,c),x(b.zaxis,c),b._scene=null}}var g=document.createElement("div");t.tileClass&&(g.className=t.tileClass);var w={gd:g,td:g,layout:l,data:a,config:{staticPlot:t.staticPlot===void 0||t.staticPlot,plotGlPixelRatio:t.plotGlPixelRatio===void 0?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:f.mapboxAccessToken}};return t.setBackground!=="transparent"&&(w.config.setBackground=t.setBackground||"opaque"),w.gd.defaultLayout=e(t.tileClass),w}},{"../lib":503,"../registry":638}],640:[function(u,q,W){var o=u("../lib"),p=u("../plot_api/to_image"),x=u("./filesaver"),y=u("./helpers");q.exports=function(e,r){var t;return o.isPlainObject(e)||(t=o.getGraphDiv(e)),(r=r||{}).format=r.format||"png",r.width=r.width||null,r.height=r.height||null,r.imageDataOnly=!0,new Promise(function(i,n){t&&t._snapshotInProgress&&n(new Error("Snapshotting already in progress.")),o.isIE()&&r.format!=="svg"&&n(new Error(y.MSG_IE_BAD_FORMAT)),t&&(t._snapshotInProgress=!0);var h=p(e,r),s=r.filename||e.fn||"newplot";s+="."+r.format.replace("-","."),h.then(function(a){return t&&(t._snapshotInProgress=!1),x(a,s,r.format)}).then(function(a){i(a)}).catch(function(a){t&&(t._snapshotInProgress=!1),n(a)})})}},{"../lib":503,"../plot_api/to_image":546,"./filesaver":641,"./helpers":642}],641:[function(u,q,W){var o=u("../lib"),p=u("./helpers");q.exports=function(x,y,e){var r=document.createElement("a"),t="download"in r;return new Promise(function(i,n){var h,s;if(o.isIE())return h=p.createBlob(x,"svg"),window.navigator.msSaveBlob(h,y),h=null,i(y);if(t)return h=p.createBlob(x,e),s=p.createObjectURL(h),r.href=s,r.download=y,document.body.appendChild(r),r.click(),document.body.removeChild(r),p.revokeObjectURL(s),h=null,i(y);if(o.isSafari()){var a=e==="svg"?",":";base64,";return p.octetStream(a+encodeURIComponent(x)),i(y)}n(new Error("download error"))})}},{"../lib":503,"./helpers":642}],642:[function(u,q,W){var o=u("../registry");W.getDelay=function(x){return x._has&&(x._has("gl3d")||x._has("gl2d")||x._has("mapbox"))?500:0},W.getRedrawFunc=function(x){return function(){o.getComponentMethod("colorbar","draw")(x)}},W.encodeSVG=function(x){return"data:image/svg+xml,"+encodeURIComponent(x)},W.encodeJSON=function(x){return"data:application/json,"+encodeURIComponent(x)};var p=window.URL||window.webkitURL;W.createObjectURL=function(x){return p.createObjectURL(x)},W.revokeObjectURL=function(x){return p.revokeObjectURL(x)},W.createBlob=function(x,y){if(y==="svg")return new window.Blob([x],{type:"image/svg+xml;charset=utf-8"});if(y==="full-json")return new window.Blob([x],{type:"application/json;charset=utf-8"});var e=function(r){for(var t=r.length,i=new ArrayBuffer(t),n=new Uint8Array(i),h=0;h<t;h++)n[h]=r.charCodeAt(h);return i}(window.atob(x));return new window.Blob([e],{type:"image/"+y})},W.octetStream=function(x){document.location.href="data:application/octet-stream"+x},W.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,W.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":638}],643:[function(u,q,W){var o=u("./helpers"),p={getDelay:o.getDelay,getRedrawFunc:o.getRedrawFunc,clone:u("./cloneplot"),toSVG:u("./tosvg"),svgToImg:u("./svgtoimg"),toImage:u("./toimage"),downloadImage:u("./download")};q.exports=p},{"./cloneplot":639,"./download":640,"./helpers":642,"./svgtoimg":644,"./toimage":645,"./tosvg":646}],644:[function(u,q,W){var o=u("../lib"),p=u("events").EventEmitter,x=u("./helpers");q.exports=function(y){var e=y.emitter||new p,r=new Promise(function(t,i){var n=window.Image,h=y.svg,s=y.format||"png";if(o.isIE()&&s!=="svg"){var a=new Error(x.MSG_IE_BAD_FORMAT);return i(a),y.promise?r:e.emit("error",a)}var l,f,d=y.canvas,v=y.scale||1,m=y.width||300,c=y.height||150,b=v*m,g=v*c,w=d.getContext("2d"),_=new n;s==="svg"||o.isSafari()?f=x.encodeSVG(h):(l=x.createBlob(h,"svg"),f=x.createObjectURL(l)),d.width=b,d.height=g,_.onload=function(){var T;switch(l=null,x.revokeObjectURL(f),s!=="svg"&&w.drawImage(_,0,0,b,g),s){case"jpeg":T=d.toDataURL("image/jpeg");break;case"png":T=d.toDataURL("image/png");break;case"webp":T=d.toDataURL("image/webp");break;case"svg":T=f;break;default:var k="Image format is not jpeg, png, svg or webp.";if(i(new Error(k)),!y.promise)return e.emit("error",k)}t(T),y.promise||e.emit("success",T)},_.onerror=function(T){if(l=null,x.revokeObjectURL(f),i(T),!y.promise)return e.emit("error",T)},_.src=f});return y.promise?r:e}},{"../lib":503,"./helpers":642,events:84}],645:[function(u,q,W){var o=u("events").EventEmitter,p=u("../registry"),x=u("../lib"),y=u("./helpers"),e=u("./cloneplot"),r=u("./tosvg"),t=u("./svgtoimg");q.exports=function(i,n){var h=new o,s=e(i,{format:"png"}),a=s.gd;a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a);var l=y.getRedrawFunc(a);return p.call("_doPlot",a,s.data,s.layout,s.config).then(l).then(function(){var f=y.getDelay(a._fullLayout);setTimeout(function(){var d=r(a),v=document.createElement("canvas");v.id=x.randstr(),(h=t({format:n.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:v,emitter:h,svg:d})).clean=function(){a&&document.body.removeChild(a)}},f)}).catch(function(f){h.emit("error",f)}),h}},{"../lib":503,"../registry":638,"./cloneplot":639,"./helpers":642,"./svgtoimg":644,"./tosvg":646,events:84}],646:[function(u,q,W){var o=u("@plotly/d3"),p=u("../lib"),x=u("../components/drawing"),y=u("../components/color"),e=u("../constants/xmlns_namespaces"),r=/"/g,t=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");q.exports=function(i,n,h){var s,a,l=i._fullLayout,f=l._paper,d=l._toppaper,v=l.width,m=l.height;f.insert("rect",":first-child").call(x.setRect,0,0,v,m).call(y.fill,l.paper_bgcolor);var c=l._basePlotModules||[];for(s=0;s<c.length;s++){var b=c[s];b.toSVG&&b.toSVG(i)}if(d){var g=d.node().childNodes,w=Array.prototype.slice.call(g);for(s=0;s<w.length;s++){var _=w[s];_.childNodes.length&&f.node().appendChild(_)}}l._draggers&&l._draggers.remove(),f.node().style.background="",f.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var L=o.select(this);if(this.style.visibility!=="hidden"&&this.style.display!=="none"){L.style({visibility:null,display:null});var M=this.style.fontFamily;M&&M.indexOf('"')!==-1&&L.style("font-family",M.replace(r,"TOBESTRIPPED"))}else L.remove()});var T=[];if(l._gradientUrlQueryParts)for(a in l._gradientUrlQueryParts)T.push(a);if(l._patternUrlQueryParts)for(a in l._patternUrlQueryParts)T.push(a);T.length&&f.selectAll(T.join(",")).each(function(){var L=o.select(this),M=this.style.fill;M&&M.indexOf("url(")!==-1&&L.style("fill",M.replace(r,"TOBESTRIPPED"));var I=this.style.stroke;I&&I.indexOf("url(")!==-1&&L.style("stroke",I.replace(r,"TOBESTRIPPED"))}),n!=="pdf"&&n!=="eps"||f.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),f.node().setAttributeNS(e.xmlns,"xmlns",e.svg),f.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),n==="svg"&&h&&(f.attr("width",h*v),f.attr("height",h*m),f.attr("viewBox","0 0 "+v+" "+m));var k=new window.XMLSerializer().serializeToString(f.node());return k=function(L){var M=o.select("body").append("div").style({display:"none"}).html(""),I=L.replace(/(&[^;]*;)/gi,function(P){return P==="&lt;"?"&#60;":P==="&rt;"?"&#62;":P.indexOf("<")!==-1||P.indexOf(">")!==-1?"":M.html(P).text()});return M.remove(),I}(k),k=(k=k.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),p.isIE()&&(k=(k=(k=k.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),k}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],647:[function(u,q,W){var o=u("../../lib");q.exports=function(p,x){for(var y=0;y<p.length;y++)p[y].i=y;o.mergeArray(x.text,p,"tx"),o.mergeArray(x.hovertext,p,"htx");var e=x.marker;if(e){o.mergeArray(e.opacity,p,"mo",!0),o.mergeArray(e.color,p,"mc");var r=e.line;r&&(o.mergeArray(r.color,p,"mlc"),o.mergeArrayCastPositive(r.width,p,"mlw"))}}},{"../../lib":503}],648:[function(u,q,W){var o=u("../scatter/attributes"),p=u("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=u("../../plots/template_attributes").hovertemplateAttrs,y=u("../../plots/template_attributes").texttemplateAttrs,e=u("../../components/colorscale/attributes"),r=u("../../plots/font_attributes"),t=u("./constants"),i=u("../../components/drawing/attributes").pattern,n=u("../../lib/extend").extendFlat,h=r({editType:"calc",arrayOk:!0,colorEditType:"style"}),s=n({},o.marker.line.width,{dflt:0}),a=n({width:s,editType:"calc"},e("marker.line")),l=n({line:a,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:i});q.exports={x:o.x,x0:o.x0,dx:o.dx,y:o.y,y0:o.y0,dy:o.dy,xperiod:o.xperiod,yperiod:o.yperiod,xperiod0:o.xperiod0,yperiod0:o.yperiod0,xperiodalignment:o.xperiodalignment,yperiodalignment:o.yperiodalignment,xhoverformat:p("x"),yhoverformat:p("y"),text:o.text,texttemplate:y({editType:"plot"},{keys:t.eventDataKeys}),hovertext:o.hovertext,hovertemplate:x({},{keys:t.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:n({},h,{}),insidetextfont:n({},h,{}),outsidetextfont:n({},h,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:n({},o.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:l,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:o.selected.marker.opacity,color:o.selected.marker.color,editType:"style"},textfont:o.selected.textfont,editType:"style"},unselected:{marker:{opacity:o.unselected.marker.opacity,color:o.unselected.marker.color,editType:"style"},textfont:o.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":926,"./constants":650}],649:[function(u,q,W){var o=u("../../plots/cartesian/axes"),p=u("../../plots/cartesian/align_period"),x=u("../../components/colorscale/helpers").hasColorscale,y=u("../../components/colorscale/calc"),e=u("./arrays_to_calcdata"),r=u("../scatter/calc_selection");q.exports=function(t,i){var n,h,s,a,l,f,d=o.getFromId(t,i.xaxis||"x"),v=o.getFromId(t,i.yaxis||"y"),m={msUTC:!(!i.base&&i.base!==0)};i.orientation==="h"?(n=d.makeCalcdata(i,"x",m),s=v.makeCalcdata(i,"y"),a=p(i,v,"y",s),l=!!i.yperiodalignment,f="y"):(n=v.makeCalcdata(i,"y",m),s=d.makeCalcdata(i,"x"),a=p(i,d,"x",s),l=!!i.xperiodalignment,f="x"),h=a.vals;for(var c=Math.min(h.length,n.length),b=new Array(c),g=0;g<c;g++)b[g]={p:h[g],s:n[g]},l&&(b[g].orig_p=s[g],b[g][f+"End"]=a.ends[g],b[g][f+"Start"]=a.starts[g]),i.ids&&(b[g].id=String(i.ids[g]));return x(i,"marker")&&y(t,i,{vals:i.marker.color,containerStr:"marker",cLetter:"c"}),x(i,"marker.line")&&y(t,i,{vals:i.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(b,i),r(b,i),b}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928,"./arrays_to_calcdata":647}],650:[function(u,q,W){q.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],651:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../lib").isArrayOrTypedArray,x=u("../../constants/numerical").BADNUM,y=u("../../registry"),e=u("../../plots/cartesian/axes"),r=u("../../plots/cartesian/constraints").getAxisGroup,t=u("./sieve.js");function i(c,b,g,w,_){if(w.length){var T,k,L,M;switch(function(I,P){var S,E;for(S=0;S<P.length;S++){var D,F=P[S],H=F[0].trace,V=H.type==="funnel"?H._base:H.base,Q=H.orientation==="h"?H.xcalendar:H.ycalendar,K=I.type==="category"||I.type==="multicategory"?function(){return null}:I.d2c;if(p(V)){for(E=0;E<Math.min(V.length,F.length);E++)D=K(V[E],0,Q),o(D)?(F[E].b=+D,F[E].hasB=1):F[E].b=0;for(;E<F.length;E++)F[E].b=0}else{D=K(V,0,Q);var Z=o(D);for(D=Z?D:0,E=0;E<F.length;E++)F[E].b=D,Z&&(F[E].hasB=1)}}}(g,w),_.mode){case"overlay":n(b,g,w,_);break;case"group":for(T=[],k=[],L=0;L<w.length;L++)(M=w[L])[0].trace.offset===void 0?k.push(M):T.push(M);k.length&&function(I,P,S,E,D){var F=new t(E,{posAxis:P,sepNegVal:!1,overlapNoMerge:!D.norm});(function(H,V,Q,K){for(var Z=H._fullLayout,$=Q.positions,re=Q.distinctPositions,R=Q.minDiff,N=Q.traces,U=N.length,te=$.length!==re.length,j=R*(1-K.gap),Y=r(Z,V._id)+N[0][0].trace.orientation,J=Z._alignmentOpts[Y]||{},ee=0;ee<U;ee++){var ne,se,oe=N[ee],he=oe[0].trace,le=J[he.alignmentgroup]||{},de=Object.keys(le.offsetGroups||{}).length,xe=(ne=de?j/de:te?j/U:j)*(1-(K.groupgap||0));se=de?((2*he._offsetIndex+1-de)*ne-xe)/2:te?((2*ee+1-U)*ne-xe)/2:-xe/2;var we=oe[0].t;we.barwidth=xe,we.poffset=se,we.bargroupwidth=j,we.bardelta=R}Q.binWidth=N[0][0].t.barwidth/100,s(Q),a(V,Q),l(V,Q,te)})(I,P,F,D),function(H,V){for(var Q=H.traces,K=0;K<Q.length;K++){var Z=Q[K];if(Z[0].trace.base===void 0)for(var $=new t([Z],{posAxis:V,sepNegVal:!0,overlapNoMerge:!0}),re=0;re<Z.length;re++){var R=Z[re];if(R.p!==x){var N=$.put(R.p,R.b+R.s);N&&(R.b=N)}}}}(F,P),D.norm?(d(F),v(S,F,D)):f(S,F)}(c,b,g,k,_),T.length&&n(b,g,T,_);break;case"stack":case"relative":for(T=[],k=[],L=0;L<w.length;L++)(M=w[L])[0].trace.base===void 0?k.push(M):T.push(M);k.length&&function(I,P,S,E,D){var F=new t(E,{posAxis:P,sepNegVal:D.mode==="relative",overlapNoMerge:!(D.norm||D.mode==="stack"||D.mode==="relative")});h(P,F,D),function(Z,$,re){var R,N,U,te,j,Y,J=m(Z),ee=$.traces;for(te=0;te<ee.length;te++)if(R=ee[te],(N=R[0].trace).type==="funnel")for(j=0;j<R.length;j++)(Y=R[j]).s!==x&&$.put(Y.p,-.5*Y.s);for(te=0;te<ee.length;te++){R=ee[te],N=R[0].trace,U=N.type==="funnel";var ne=[];for(j=0;j<R.length;j++)if((Y=R[j]).s!==x){var se;se=U?Y.s:Y.s+Y.b;var oe=$.put(Y.p,se),he=oe+se;Y.b=oe,Y[J]=he,re.norm||(ne.push(he),Y.hasB&&ne.push(oe))}re.norm||(N._extremes[Z._id]=e.findExtremes(Z,ne,{tozero:!0,padded:!0}))}}(S,F,D);for(var H=0;H<E.length;H++)for(var V=E[H],Q=0;Q<V.length;Q++){var K=V[Q];K.s!==x&&K.b+K.s===F.get(K.p,K.s)&&(K._outmost=!0)}D.norm&&v(S,F,D)}(0,b,g,k,_),T.length&&n(b,g,T,_)}(function(I,P){var S,E,D,F=m(P),H={},V=1/0,Q=-1/0;for(S=0;S<I.length;S++)for(D=I[S],E=0;E<D.length;E++){var K=D[E].p;o(K)&&(V=Math.min(V,K),Q=Math.max(Q,K))}var Z=1e4/(Q-V),$=H.round=function(Y){return String(Math.round(Z*(Y-V)))};for(S=0;S<I.length;S++){(D=I[S])[0].t.extents=H;var re=D[0].t.poffset,R=Array.isArray(re);for(E=0;E<D.length;E++){var N=D[E],U=N[F]-N.w/2;if(o(U)){var te=N[F]+N.w/2,j=$(N.p);H[j]?H[j]=[Math.min(U,H[j][0]),Math.max(te,H[j][1])]:H[j]=[U,te]}N.p0=N.p+(R?re[E]:re),N.p1=N.p0+N.w,N.s0=N.b,N.s1=N.s0+N.s}}})(w,b)}}function n(c,b,g,w){for(var _=0;_<g.length;_++){var T=g[_],k=new t([T],{posAxis:c,sepNegVal:!1,overlapNoMerge:!w.norm});h(c,k,w),w.norm?(d(k),v(b,k,w)):f(b,k)}}function h(c,b,g){for(var w=b.minDiff,_=b.traces,T=w*(1-g.gap),k=T*(1-(g.groupgap||0)),L=-k/2,M=0;M<_.length;M++){var I=_[M][0].t;I.barwidth=k,I.poffset=L,I.bargroupwidth=T,I.bardelta=w}b.binWidth=_[0][0].t.barwidth/100,s(b),a(c,b),l(c,b)}function s(c){var b,g,w=c.traces;for(b=0;b<w.length;b++){var _,T=w[b],k=T[0],L=k.trace,M=k.t,I=L._offset||L.offset,P=M.poffset;if(p(I)){for(_=Array.prototype.slice.call(I,0,T.length),g=0;g<_.length;g++)o(_[g])||(_[g]=P);for(g=_.length;g<T.length;g++)_.push(P);M.poffset=_}else I!==void 0&&(M.poffset=I);var S=L._width||L.width,E=M.barwidth;if(p(S)){var D=Array.prototype.slice.call(S,0,T.length);for(g=0;g<D.length;g++)o(D[g])||(D[g]=E);for(g=D.length;g<T.length;g++)D.push(E);if(M.barwidth=D,I===void 0){for(_=[],g=0;g<T.length;g++)_.push(P+(E-D[g])/2);M.poffset=_}}else S!==void 0&&(M.barwidth=S,I===void 0&&(M.poffset=P+(E-S)/2))}}function a(c,b){for(var g=b.traces,w=m(c),_=0;_<g.length;_++)for(var T=g[_],k=T[0].t,L=k.poffset,M=Array.isArray(L),I=k.barwidth,P=Array.isArray(I),S=0;S<T.length;S++){var E=T[S],D=E.w=P?I[S]:I;E[w]=E.p+(M?L[S]:L)+D/2}}function l(c,b,g){var w=b.traces,_=b.minDiff/2;e.minDtick(c,b.minDiff,b.distinctPositions[0],g);for(var T=0;T<w.length;T++){var k,L,M,I,P=w[T],S=P[0],E=S.trace,D=[];for(I=0;I<P.length;I++)L=(k=P[I]).p-_,M=k.p+_,D.push(L,M);if(E.width||E.offset){var F=S.t,H=F.poffset,V=F.barwidth,Q=Array.isArray(H),K=Array.isArray(V);for(I=0;I<P.length;I++){k=P[I];var Z=Q?H[I]:H,$=K?V[I]:V;M=(L=k.p+Z)+$,D.push(L,M)}}E._extremes[c._id]=e.findExtremes(c,D,{padded:!1})}}function f(c,b){for(var g=b.traces,w=m(c),_=0;_<g.length;_++){for(var T=g[_],k=T[0].trace,L=[],M=!1,I=0;I<T.length;I++){var P=T[I],S=P.b,E=S+P.s;P[w]=E,L.push(E),P.hasB&&L.push(S),P.hasB&&P.b||(M=!0)}k._extremes[c._id]=e.findExtremes(c,L,{tozero:M,padded:!0})}}function d(c){for(var b=c.traces,g=0;g<b.length;g++)for(var w=b[g],_=0;_<w.length;_++){var T=w[_];T.s!==x&&c.put(T.p,T.b+T.s)}}function v(c,b,g){var w=b.traces,_=m(c),T=g.norm==="fraction"?1:100,k=T/1e9,L=c.l2c(c.c2l(0)),M=g.mode==="stack"?T:L;function I(re){return o(c.c2l(re))&&(re<L-k||re>M+k||!o(L))}for(var P=0;P<w.length;P++){for(var S=w[P],E=S[0].trace,D=[],F=!1,H=!1,V=0;V<S.length;V++){var Q=S[V];if(Q.s!==x){var K=Math.abs(T/b.get(Q.p,Q.s));Q.b*=K,Q.s*=K;var Z=Q.b,$=Z+Q.s;Q[_]=$,D.push($),H=H||I($),Q.hasB&&(D.push(Z),H=H||I(Z)),Q.hasB&&Q.b||(F=!0)}}E._extremes[c._id]=e.findExtremes(c,D,{tozero:F,padded:H})}}function m(c){return c._id.charAt(0)}q.exports={crossTraceCalc:function(c,b){for(var g=b.xaxis,w=b.yaxis,_=c._fullLayout,T=c._fullData,k=c.calcdata,L=[],M=[],I=0;I<T.length;I++){var P=T[I];if(P.visible===!0&&y.traceIs(P,"bar")&&P.xaxis===g._id&&P.yaxis===w._id&&(P.orientation==="h"?L.push(k[I]):M.push(k[I]),P._computePh))for(var S=c.calcdata[I],E=0;E<S.length;E++)typeof S[E].ph0=="function"&&(S[E].ph0=S[E].ph0()),typeof S[E].ph1=="function"&&(S[E].ph1=S[E].ph1())}var D={xCat:g.type==="category"||g.type==="multicategory",yCat:w.type==="category"||w.type==="multicategory",mode:_.barmode,norm:_.barnorm,gap:_.bargap,groupgap:_.bargroupgap};i(c,g,w,M,D),i(c,w,g,L,D)},setGroupPositions:i}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562,"../../registry":638,"./sieve.js":661,"fast-isnumeric":190}],652:[function(u,q,W){var o=u("../../lib"),p=u("../../components/color"),x=u("../../registry"),y=u("../scatter/xy_defaults"),e=u("../scatter/period_defaults"),r=u("./style_defaults"),t=u("../../plots/cartesian/constraints").getAxisGroup,i=u("./attributes"),n=o.coerceFont;function h(a,l,f,d){var v=l.orientation,m=l[{v:"x",h:"y"}[v]+"axis"],c=t(f,m)+v,b=f._alignmentOpts||{},g=d("alignmentgroup"),w=b[c];w||(w=b[c]={});var _=w[g];_?_.traces.push(l):_=w[g]={traces:[l],alignmentIndex:Object.keys(w).length,offsetGroups:{}};var T=d("offsetgroup"),k=_.offsetGroups,L=k[T];T&&(L||(L=k[T]={offsetIndex:Object.keys(k).length}),l._offsetIndex=L.offsetIndex)}function s(a,l,f,d,v,m){var c=(m=m||{}).moduleHasSelected!==!1,b=m.moduleHasUnselected!==!1,g=m.moduleHasConstrain!==!1,w=m.moduleHasCliponaxis!==!1,_=m.moduleHasTextangle!==!1,T=m.moduleHasInsideanchor!==!1,k=!!m.hasPathbar,L=Array.isArray(v)||v==="auto",M=L||v==="inside",I=L||v==="outside";if(M||I){var P=n(d,"textfont",f.font),S=o.extendFlat({},P),E=!(a.textfont&&a.textfont.color);if(E&&delete S.color,n(d,"insidetextfont",S),k){var D=o.extendFlat({},P);E&&delete D.color,n(d,"pathbar.textfont",D)}I&&n(d,"outsidetextfont",P),c&&d("selected.textfont.color"),b&&d("unselected.textfont.color"),g&&d("constraintext"),w&&d("cliponaxis"),_&&d("textangle"),d("texttemplate")}M&&T&&d("insidetextanchor")}q.exports={supplyDefaults:function(a,l,f,d){function v(g,w){return o.coerce(a,l,i,g,w)}if(y(a,l,d,v)){e(a,l,d,v),v("xhoverformat"),v("yhoverformat"),v("orientation",l.x&&!l.y?"h":"v"),v("base"),v("offset"),v("width"),v("text"),v("hovertext"),v("hovertemplate");var m=v("textposition");s(a,l,d,v,m,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),r(a,l,v,f,d);var c=(l.marker.line||{}).color,b=x.getComponentMethod("errorbars","supplyDefaults");b(a,l,c||p.defaultLine,{axis:"y"}),b(a,l,c||p.defaultLine,{axis:"x",inherit:"y"}),o.coerceSelectionMarkerOpacity(l,v)}else l.visible=!1},crossTraceDefaults:function(a,l){var f;function d(m){return o.coerce(f._input,f,i,m)}if(l.barmode==="group")for(var v=0;v<a.length;v++)(f=a[v]).type==="bar"&&(f._input,h(0,f,l,d))},handleGroupingDefaults:h,handleText:s}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/constraints":562,"../../registry":638,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":648,"./style_defaults":663}],653:[function(u,q,W){q.exports=function(o,p,x){return o.x="xVal"in p?p.xVal:p.x,o.y="yVal"in p?p.yVal:p.y,p.xa&&(o.xaxis=p.xa),p.ya&&(o.yaxis=p.ya),x.orientation==="h"?(o.label=o.y,o.value=o.x):(o.label=o.x,o.value=o.y),o}},{}],654:[function(u,q,W){var o=u("fast-isnumeric"),p=u("tinycolor2"),x=u("../../lib").isArrayOrTypedArray;W.coerceString=function(y,e,r){if(typeof e=="string"){if(e||!y.noBlank)return e}else if((typeof e=="number"||e===!0)&&!y.strict)return String(e);return r!==void 0?r:y.dflt},W.coerceNumber=function(y,e,r){if(o(e)){e=+e;var t=y.min,i=y.max;if(!(t!==void 0&&e<t||i!==void 0&&e>i))return e}return r!==void 0?r:y.dflt},W.coerceColor=function(y,e,r){return p(e).isValid()?e:r!==void 0?r:y.dflt},W.coerceEnumerated=function(y,e,r){return y.coerceNumber&&(e=+e),y.values.indexOf(e)!==-1?e:r!==void 0?r:y.dflt},W.getValue=function(y,e){var r;return Array.isArray(y)?e<y.length&&(r=y[e]):r=y,r},W.getLineWidth=function(y,e){return 0<e.mlw?e.mlw:x(y.marker.line.width)?0:y.marker.line.width}},{"../../lib":503,"fast-isnumeric":190,tinycolor2:312}],655:[function(u,q,W){var o=u("../../components/fx"),p=u("../../registry"),x=u("../../components/color"),y=u("../../lib").fillText,e=u("./helpers").getLineWidth,r=u("../../plots/cartesian/axes").hoverLabelText,t=u("../../constants/numerical").BADNUM;function i(h,s,a,l,f){var d,v,m,c,b,g,w,_=h.cd,T=_[0].trace,k=_[0].t,L=l==="closest",M=T.type==="waterfall",I=h.maxHoverDistance,P=h.maxSpikeDistance;T.orientation==="h"?(d=a,v=s,m="y",c="x",b=R,g=$):(d=s,v=a,m="x",c="y",g=R,b=$);var S=T[m+"period"],E=L||S;function D(ne){return H(ne,-1)}function F(ne){return H(ne,1)}function H(ne,se){var oe=ne.w;return ne[m]+se*oe/2}function V(ne){return ne[m+"End"]-ne[m+"Start"]}var Q=L?D:S?function(ne){return ne.p-V(ne)/2}:function(ne){return Math.min(D(ne),ne.p-k.bardelta/2)},K=L?F:S?function(ne){return ne.p+V(ne)/2}:function(ne){return Math.max(F(ne),ne.p+k.bardelta/2)};function Z(ne,se,oe){return f.finiteRange&&(oe=0),o.inbox(ne-d,se-d,oe+Math.min(1,Math.abs(se-ne)/w)-1)}function $(ne){return Z(Q(ne),K(ne),I)}function re(ne){var se=ne[c];if(M){var oe=Math.abs(ne.rawS)||0;v>0?se+=oe:v<0&&(se-=oe)}return se}function R(ne){var se=v,oe=ne.b,he=re(ne);return o.inbox(oe-se,he-se,I+(he-se)/(he-oe)-1)}var N=h[m+"a"],U=h[c+"a"];w=Math.abs(N.r2c(N.range[1])-N.r2c(N.range[0]));var te=o.getDistanceFunction(l,b,g,function(ne){return(b(ne)+g(ne))/2});if(o.getClosest(_,te,h),h.index!==!1&&_[h.index].p!==t){E||(Q=function(ne){return Math.min(D(ne),ne.p-k.bargroupwidth/2)},K=function(ne){return Math.max(F(ne),ne.p+k.bargroupwidth/2)});var j=_[h.index],Y=T.base?j.b+j.s:j.s;h[c+"0"]=h[c+"1"]=U.c2p(j[c],!0),h[c+"LabelVal"]=Y;var J=k.extents[k.extents.round(j.p)];h[m+"0"]=N.c2p(L?Q(j):J[0],!0),h[m+"1"]=N.c2p(L?K(j):J[1],!0);var ee=j.orig_p!==void 0;return h[m+"LabelVal"]=ee?j.orig_p:j.p,h.labelLabel=r(N,h[m+"LabelVal"],T[m+"hoverformat"]),h.valueLabel=r(U,h[c+"LabelVal"],T[c+"hoverformat"]),h.baseLabel=r(U,j.b,T[c+"hoverformat"]),h.spikeDistance=(function(ne){var se=v,oe=ne.b,he=re(ne);return o.inbox(oe-se,he-se,P+(he-se)/(he-oe)-1)}(j)+function(ne){return Z(D(ne),F(ne),P)}(j))/2,h[m+"Spike"]=N.c2p(j.p,!0),y(j,T,h),h.hovertemplate=T.hovertemplate,h}}function n(h,s){var a=s.mcc||h.marker.color,l=s.mlcc||h.marker.line.color,f=e(h,s);return x.opacity(a)?a:x.opacity(l)&&f?l:void 0}q.exports={hoverPoints:function(h,s,a,l,f){var d=i(h,s,a,l,f);if(d){var v=d.cd,m=v[0].trace,c=v[d.index];return d.color=n(m,c),p.getComponentMethod("errorbars","hoverInfo")(c,m,d),[d]}},hoverOnBars:i,getTraceColor:n}},{"../../components/color":366,"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./helpers":654}],656:[function(u,q,W){q.exports={attributes:u("./attributes"),layoutAttributes:u("./layout_attributes"),supplyDefaults:u("./defaults").supplyDefaults,crossTraceDefaults:u("./defaults").crossTraceDefaults,supplyLayoutDefaults:u("./layout_defaults"),calc:u("./calc"),crossTraceCalc:u("./cross_trace_calc").crossTraceCalc,colorbar:u("../scatter/marker_colorbar"),arraysToCalcdata:u("./arrays_to_calcdata"),plot:u("./plot").plot,style:u("./style").style,styleOnSelect:u("./style").styleOnSelect,hoverPoints:u("./hover").hoverPoints,eventData:u("./event_data"),selectPoints:u("./select"),moduleType:"trace",name:"bar",basePlotModule:u("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":944,"./arrays_to_calcdata":647,"./attributes":648,"./calc":649,"./cross_trace_calc":651,"./defaults":652,"./event_data":653,"./hover":655,"./layout_attributes":657,"./layout_defaults":658,"./plot":659,"./select":660,"./style":662}],657:[function(u,q,W){q.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],658:[function(u,q,W){var o=u("../../registry"),p=u("../../plots/cartesian/axes"),x=u("../../lib"),y=u("./layout_attributes");q.exports=function(e,r,t){function i(m,c){return x.coerce(e,r,y,m,c)}for(var n=!1,h=!1,s=!1,a={},l=i("barmode"),f=0;f<t.length;f++){var d=t[f];if(o.traceIs(d,"bar")&&d.visible){if(n=!0,l==="group"){var v=d.xaxis+d.yaxis;a[v]&&(s=!0),a[v]=!0}d.visible&&d.type==="histogram"&&p.getFromId({_fullLayout:r},d[d.orientation==="v"?"xaxis":"yaxis"]).type!=="category"&&(h=!0)}}n?(l!=="overlay"&&i("barnorm"),i("bargap",h&&!s?0:.2),i("bargroupgap")):delete r.barmode}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./layout_attributes":657}],659:[function(u,q,W){var o=u("@plotly/d3"),p=u("fast-isnumeric"),x=u("../../lib"),y=u("../../lib/svg_text_utils"),e=u("../../components/color"),r=u("../../components/drawing"),t=u("../../registry"),i=u("../../plots/cartesian/axes").tickText,n=u("./uniform_text"),h=n.recordMinTextSize,s=n.clearMinTextSize,a=u("./style"),l=u("./helpers"),f=u("./constants"),d=u("./attributes"),v=d.text,m=d.textposition,c=u("../../components/fx/helpers").appendArrayPointValue,b=f.TEXTPAD;function g(P){return P.id}function w(P){if(P.ids)return g}function _(P,S){return P<S?1:-1}function T(P,S,E,D){var F;return!S.uniformtext.mode&&k(E)?(D&&(F=D()),P.transition().duration(E.duration).ease(E.easing).each("end",function(){F&&F()}).each("interrupt",function(){F&&F()})):P}function k(P){return P&&P.duration>0}function L(P){return P==="auto"?0:P}function M(P,S){var E=Math.PI/180*S,D=Math.abs(Math.sin(E)),F=Math.abs(Math.cos(E));return{x:P.width*F+P.height*D,y:P.width*D+P.height*F}}function I(P,S,E,D,F,H){var V=!!H.isHorizontal,Q=!!H.constrained,K=H.angle||0,Z=H.anchor||"end",$=Z==="end",re=Z==="start",R=((H.leftToRight||0)+1)/2,N=1-R,U=F.width,te=F.height,j=Math.abs(S-P),Y=Math.abs(D-E),J=j>2*b&&Y>2*b?b:0;j-=2*J,Y-=2*J;var ee=L(K);K!=="auto"||U<=j&&te<=Y||!(U>j||te>Y)||(U>Y||te>j)&&U<te==j<Y||(ee+=90);var ne=M(F,ee),se=1;Q&&(se=Math.min(1,j/ne.x,Y/ne.y));var oe=F.left*N+F.right*R,he=(F.top+F.bottom)/2,le=(P+b)*N+(S-b)*R,de=(E+D)/2,xe=0,we=0;if(re||$){var be=(V?ne.x:ne.y)/2,Ae=V?_(P,S):_(E,D);V?re?(le=P+Ae*J,xe=-Ae*be):(le=S-Ae*J,xe=Ae*be):re?(de=E+Ae*J,we=-Ae*be):(de=D-Ae*J,we=Ae*be)}return{textX:oe,textY:he,targetX:le,targetY:de,anchorX:xe,anchorY:we,scale:se,rotate:ee}}q.exports={plot:function(P,S,E,D,F,H){var V=S.xaxis,Q=S.yaxis,K=P._fullLayout;F||(F={mode:K.barmode,norm:K.barmode,gap:K.bargap,groupgap:K.bargroupgap},s("bar",K));var Z=x.makeTraceGroups(D,E,"trace bars").each(function($){var re=o.select(this),R=$[0].trace,N=R.type==="waterfall",U=R.type==="funnel",te=R.type==="bar"||U,j=0;N&&R.connector.visible&&R.connector.mode==="between"&&(j=R.connector.line.width/2);var Y=R.orientation==="h",J=k(F),ee=x.ensureSingle(re,"g","points"),ne=w(R),se=ee.selectAll("g.point").data(x.identity,ne);se.enter().append("g").classed("point",!0),se.exit().remove(),se.each(function(he,le){var de,xe,we=o.select(this),be=function(ze,Ue,We,Ze){var nt=[],ft=[],xt=Ze?Ue:We,It=Ze?We:Ue;return nt[0]=xt.c2p(ze.s0,!0),ft[0]=It.c2p(ze.p0,!0),nt[1]=xt.c2p(ze.s1,!0),ft[1]=It.c2p(ze.p1,!0),Ze?[nt,ft]:[ft,nt]}(he,V,Q,Y),Ae=be[0][0],fe=be[0][1],me=be[1][0],ke=be[1][1],Te=(Y?fe-Ae:ke-me)==0;if(Te&&te&&l.getLineWidth(R,he)&&(Te=!1),Te||(Te=!(p(Ae)&&p(fe)&&p(me)&&p(ke))),he.isBlank=Te,Te&&(Y?fe=Ae:ke=me),j&&!Te&&(Y?(Ae-=_(Ae,fe)*j,fe+=_(Ae,fe)*j):(me-=_(me,ke)*j,ke+=_(me,ke)*j)),R.type==="waterfall"){if(!Te){var Me=R[he.dir].marker;de=Me.line.width,xe=Me.color}}else de=l.getLineWidth(R,he),xe=he.mc||R.marker.color;function Oe(ze){var Ue=o.round(de/2%1,2);return F.gap===0&&F.groupgap===0?o.round(Math.round(ze)-Ue,2):ze}if(!P._context.staticPlot){var Fe=e.opacity(xe)<1||de>.01?Oe:function(ze,Ue,We){return We&&ze===Ue?ze:Math.abs(ze-Ue)>=2?Oe(ze):ze>Ue?Math.ceil(ze):Math.floor(ze)};Ae=Fe(Ae,fe,Y),fe=Fe(fe,Ae,Y),me=Fe(me,ke,!Y),ke=Fe(ke,me,!Y)}var qe=T(x.ensureSingle(we,"path"),K,F,H);if(qe.style("vector-effect","non-scaling-stroke").attr("d",isNaN((fe-Ae)*(ke-me))||Te&&P._context.staticPlot?"M0,0Z":"M"+Ae+","+me+"V"+ke+"H"+fe+"V"+me+"Z").call(r.setClipUrl,S.layerClipId,P),!K.uniformtext.mode&&J){var et=r.makePointStyleFns(R);r.singlePointStyle(he,qe,R,et,P)}(function(ze,Ue,We,Ze,nt,ft,xt,It,Et,it,rt){var At,Gt=Ue.xaxis,Qt=Ue.yaxis,Ve=ze._fullLayout;function Ye(qt,Jt,or){return x.ensureSingle(qt,"text").text(Jt).attr({class:"bartext bartext-"+At,"text-anchor":"middle","data-notex":1}).call(r.font,or).call(y.convertToTspans,ze)}var Be=Ze[0].trace,Je=Be.orientation==="h",Se=function(qt,Jt,or,gr,dr){var ur,cr=Jt[0].trace;return ur=cr.texttemplate?function(mr,Dr,yr,Br,Kr){var an=Dr[0].trace,Ln=x.castOption(an,yr,"texttemplate");if(!Ln)return"";var Pn,An,tn,zr,Ar=an.type==="waterfall",qr=an.type==="funnel";an.orientation==="h"?(Pn="y",An=Kr,tn="x",zr=Br):(Pn="x",An=Br,tn="y",zr=Kr);function On(Ot){return i(zr,zr.c2l(Ot),!0).text}var Fr=Dr[yr],on={};on.label=Fr.p,on.labelLabel=on[Pn+"Label"]=(Mn=Fr.p,i(An,An.c2l(Mn),!0).text);var Mn,bn=x.castOption(an,Fr.i,"text");(bn===0||bn)&&(on.text=bn),on.value=Fr.s,on.valueLabel=on[tn+"Label"]=On(Fr.s);var Dn={};c(Dn,an,Fr.i),Ar&&(on.delta=+Fr.rawS||Fr.s,on.deltaLabel=On(on.delta),on.final=Fr.v,on.finalLabel=On(on.final),on.initial=on.final-on.delta,on.initialLabel=On(on.initial)),qr&&(on.value=Fr.s,on.valueLabel=On(on.value),on.percentInitial=Fr.begR,on.percentInitialLabel=x.formatPercent(Fr.begR),on.percentPrevious=Fr.difR,on.percentPreviousLabel=x.formatPercent(Fr.difR),on.percentTotal=Fr.sumR,on.percenTotalLabel=x.formatPercent(Fr.sumR));var tr=x.castOption(an,Fr.i,"customdata");return tr&&(on.customdata=tr),x.texttemplateString(Ln,on,mr._d3locale,Dn,on,an._meta||{})}(qt,Jt,or,gr,dr):cr.textinfo?function(mr,Dr,yr,Br){var Kr=mr[0].trace,an=Kr.orientation==="h",Ln=Kr.type==="waterfall",Pn=Kr.type==="funnel";function An(Ht){return i(an?yr:Br,+Ht,!0).text}var tn,zr=Kr.textinfo,Ar=mr[Dr],qr=zr.split("+"),On=[],Fr=function(Ht){return qr.indexOf(Ht)!==-1};Fr("label")&&On.push((on=mr[Dr].p,i(an?Br:yr,on,!0).text));var on;if(Fr("text")&&((tn=x.castOption(Kr,Ar.i,"text"))===0||tn)&&On.push(tn),Ln){var Mn=+Ar.rawS||Ar.s,bn=Ar.v,Dn=bn-Mn;Fr("initial")&&On.push(An(Dn)),Fr("delta")&&On.push(An(Mn)),Fr("final")&&On.push(An(bn))}if(Pn){Fr("value")&&On.push(An(Ar.s));var tr=0;Fr("percent initial")&&tr++,Fr("percent previous")&&tr++,Fr("percent total")&&tr++;var Ot=tr>1;Fr("percent initial")&&(tn=x.formatPercent(Ar.begR),Ot&&(tn+=" of initial"),On.push(tn)),Fr("percent previous")&&(tn=x.formatPercent(Ar.difR),Ot&&(tn+=" of previous"),On.push(tn)),Fr("percent total")&&(tn=x.formatPercent(Ar.sumR),Ot&&(tn+=" of total"),On.push(tn))}return On.join("<br>")}(Jt,or,gr,dr):l.getValue(cr.text,or),l.coerceString(v,ur)}(Ve,Ze,nt,Gt,Qt);At=function(qt,Jt){var or=l.getValue(qt.textposition,Jt);return l.coerceEnumerated(m,or)}(Be,nt);var Pe=it.mode==="stack"||it.mode==="relative",De=Ze[nt],Ie=!Pe||De._outmost;if(!Se||At==="none"||(De.isBlank||ft===xt||It===Et)&&(At==="auto"||At==="inside"))return void We.select("text").remove();var $e=Ve.font,st=a.getBarColor(Ze[nt],Be),dt=a.getInsideTextFont(Be,nt,$e,st),ut=a.getOutsideTextFont(Be,nt,$e),Lt=We.datum();Je?Gt.type==="log"&&Lt.s0<=0&&(ft=Gt.range[0]<Gt.range[1]?0:Gt._length):Qt.type==="log"&&Lt.s0<=0&&(It=Qt.range[0]<Qt.range[1]?Qt._length:0);var lt,Ct,Pt,Ke,mt,Dt=Math.abs(xt-ft)-2*b,Bt=Math.abs(Et-It)-2*b;if(At==="outside"&&(Ie||De.hasB||(At="inside")),At==="auto")if(Ie){At="inside",mt=x.ensureUniformFontSize(ze,dt),lt=Ye(We,Se,mt),Ct=r.bBox(lt.node()),Pt=Ct.width,Ke=Ct.height;var Zt=Pt<=Dt&&Ke<=Bt,Re=Pt<=Bt&&Ke<=Dt,ct=Je?Dt>=Pt*(Bt/Ke):Bt>=Ke*(Dt/Pt);Pt>0&&Ke>0&&(Zt||Re||ct)?At="inside":(At="outside",lt.remove(),lt=null)}else At="inside";if(!lt){mt=x.ensureUniformFontSize(ze,At==="outside"?ut:dt);var wt=(lt=Ye(We,Se,mt)).attr("transform");if(lt.attr("transform",""),Ct=r.bBox(lt.node()),Pt=Ct.width,Ke=Ct.height,lt.attr("transform",wt),Pt<=0||Ke<=0)return void lt.remove()}var Rt,Vt,rr=Be.textangle;At==="outside"?(Vt=Be.constraintext==="both"||Be.constraintext==="outside",Rt=function(qt,Jt,or,gr,dr,ur){var cr,mr=!!ur.isHorizontal,Dr=!!ur.constrained,yr=ur.angle||0,Br=dr.width,Kr=dr.height,an=Math.abs(Jt-qt),Ln=Math.abs(gr-or);cr=mr?Ln>2*b?b:0:an>2*b?b:0;var Pn=1;Dr&&(Pn=mr?Math.min(1,Ln/Kr):Math.min(1,an/Br));var An=L(yr),tn=M(dr,An),zr=(mr?tn.x:tn.y)/2,Ar=(dr.left+dr.right)/2,qr=(dr.top+dr.bottom)/2,On=(qt+Jt)/2,Fr=(or+gr)/2,on=0,Mn=0,bn=mr?_(Jt,qt):_(or,gr);return mr?(On=Jt-bn*cr,on=bn*zr):(Fr=gr+bn*cr,Mn=-bn*zr),{textX:Ar,textY:qr,targetX:On,targetY:Fr,anchorX:on,anchorY:Mn,scale:Pn,rotate:An}}(ft,xt,It,Et,Ct,{isHorizontal:Je,constrained:Vt,angle:rr})):(Vt=Be.constraintext==="both"||Be.constraintext==="inside",Rt=I(ft,xt,It,Et,Ct,{isHorizontal:Je,constrained:Vt,angle:rr,anchor:Be.insidetextanchor})),Rt.fontSize=mt.size,h(Be.type==="histogram"?"bar":Be.type,Rt,Ve),De.transform=Rt,T(lt,Ve,it,rt).attr("transform",x.getTextTransform(Rt))})(P,S,we,$,le,Ae,fe,me,ke,F,H),S.layerClipId&&r.hideOutsideRangePoint(he,we.select("text"),V,Q,R.xcalendar,R.ycalendar)});var oe=R.cliponaxis===!1;r.setClipUrl(re,oe?null:S.layerClipId,P)});t.getComponentMethod("errorbars","plot")(P,Z,S,F)},toMoveInsideBar:I}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx/helpers":402,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"./attributes":648,"./constants":650,"./helpers":654,"./style":662,"./uniform_text":664,"@plotly/d3":58,"fast-isnumeric":190}],660:[function(u,q,W){function o(p,x,y,e,r){var t=x.c2p(e?p.s0:p.p0,!0),i=x.c2p(e?p.s1:p.p1,!0),n=y.c2p(e?p.p0:p.s0,!0),h=y.c2p(e?p.p1:p.s1,!0);return r?[(t+i)/2,(n+h)/2]:e?[i,(n+h)/2]:[(t+i)/2,h]}q.exports=function(p,x){var y,e=p.cd,r=p.xaxis,t=p.yaxis,i=e[0].trace,n=i.type==="funnel",h=i.orientation==="h",s=[];if(x===!1)for(y=0;y<e.length;y++)e[y].selected=0;else for(y=0;y<e.length;y++){var a=e[y],l="ct"in a?a.ct:o(a,r,t,h,n);x.contains(l,!1,y,p)?(s.push({pointNumber:y,x:r.c2d(a.x),y:t.c2d(a.y)}),a.selected=1):a.selected=0}return s}},{}],661:[function(u,q,W){q.exports=x;var o=u("../../lib").distinctVals,p=u("../../constants/numerical").BADNUM;function x(y,e){this.traces=y,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var r=1/0,t=[],i=0;i<y.length;i++){for(var n=y[i],h=0;h<n.length;h++){var s=n[h];s.p!==p&&t.push(s.p)}n[0]&&n[0].width1&&(r=Math.min(n[0].width1,r))}this.positions=t;var a=o(t);this.distinctPositions=a.vals,a.vals.length===1&&r!==1/0?this.minDiff=r:this.minDiff=Math.min(a.minDiff,r);var l=(e.posAxis||{}).type;l!=="category"&&l!=="multicategory"||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}x.prototype.put=function(y,e){var r=this.getLabel(y,e),t=this.bins[r]||0;return this.bins[r]=t+e,t},x.prototype.get=function(y,e){var r=this.getLabel(y,e);return this.bins[r]||0},x.prototype.getLabel=function(y,e){return(e<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?y:Math.round(y/this.binWidth))}},{"../../constants/numerical":479,"../../lib":503}],662:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../components/color"),x=u("../../components/drawing"),y=u("../../lib"),e=u("../../registry"),r=u("./uniform_text").resizeText,t=u("./attributes"),i=t.textfont,n=t.insidetextfont,h=t.outsidetextfont,s=u("./helpers");function a(g,w,_){x.pointStyle(g.selectAll("path"),w,_),l(g,w,_)}function l(g,w,_){g.selectAll("text").each(function(T){var k=o.select(this),L=y.ensureUniformFontSize(_,f(k,T,w,_));x.font(k,L)})}function f(g,w,_,T){var k=T._fullLayout.font,L=_.textfont;if(g.classed("bartext-inside")){var M=b(w,_);L=v(_,w.i,k,M)}else g.classed("bartext-outside")&&(L=m(_,w.i,k));return L}function d(g,w,_){return c(i,g.textfont,w,_)}function v(g,w,_,T){var k=d(g,w,_);return(g._input.textfont===void 0||g._input.textfont.color===void 0||Array.isArray(g.textfont.color)&&g.textfont.color[w]===void 0)&&(k={color:p.contrast(T),family:k.family,size:k.size}),c(n,g.insidetextfont,w,k)}function m(g,w,_){var T=d(g,w,_);return c(h,g.outsidetextfont,w,T)}function c(g,w,_,T){w=w||{};var k=s.getValue(w.family,_),L=s.getValue(w.size,_),M=s.getValue(w.color,_);return{family:s.coerceString(g.family,k,T.family),size:s.coerceNumber(g.size,L,T.size),color:s.coerceColor(g.color,M,T.color)}}function b(g,w){return w.type==="waterfall"?w[g.dir].marker.color:g.mcc||g.mc||w.marker.color}q.exports={style:function(g){var w=o.select(g).selectAll("g.barlayer").selectAll("g.trace");r(g,w,"bar");var _=w.size(),T=g._fullLayout;w.style("opacity",function(k){return k[0].trace.opacity}).each(function(k){(T.barmode==="stack"&&_>1||T.bargap===0&&T.bargroupgap===0&&!k[0].trace.marker.line.width)&&o.select(this).attr("shape-rendering","crispEdges")}),w.selectAll("g.points").each(function(k){a(o.select(this),k[0].trace,g)}),e.getComponentMethod("errorbars","style")(w)},styleTextPoints:l,styleOnSelect:function(g,w,_){var T=w[0].trace;T.selectedpoints?function(k,L,M){x.selectedPointStyle(k.selectAll("path"),L),function(I,P,S){I.each(function(E){var D,F=o.select(this);if(E.selected){D=y.ensureUniformFontSize(S,f(F,E,P,S));var H=P.selected.textfont&&P.selected.textfont.color;H&&(D.color=H),x.font(F,D)}else x.selectedTextStyle(F,P)})}(k.selectAll("text"),L,M)}(_,T,g):(a(_,T,g),e.getComponentMethod("errorbars","style")(_))},getInsideTextFont:v,getOutsideTextFont:m,getBarColor:b,resizeText:r}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../registry":638,"./attributes":648,"./helpers":654,"./uniform_text":664,"@plotly/d3":58}],663:[function(u,q,W){var o=u("../../components/color"),p=u("../../components/colorscale/helpers").hasColorscale,x=u("../../components/colorscale/defaults"),y=u("../../lib").coercePattern;q.exports=function(e,r,t,i,n){var h=t("marker.color",i),s=p(e,"marker");s&&x(e,r,n,t,{prefix:"marker.",cLetter:"c"}),t("marker.line.color",o.defaultLine),p(e,"marker.line")&&x(e,r,n,t,{prefix:"marker.line.",cLetter:"c"}),t("marker.line.width"),t("marker.opacity"),y(t,"marker.pattern",h,s),t("selected.marker.color"),t("unselected.marker.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],664:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../lib");function x(y){return"_"+y+"Text_minsize"}q.exports={recordMinTextSize:function(y,e,r){if(r.uniformtext.mode){var t=x(y),i=r.uniformtext.minsize,n=e.scale*e.fontSize;e.hide=n<i,r[t]=r[t]||1/0,e.hide||(r[t]=Math.min(r[t],Math.max(n,i)))}},clearMinTextSize:function(y,e){e[x(y)]=void 0},resizeText:function(y,e,r){var t=y._fullLayout,i=t["_"+r+"Text_minsize"];if(i){var n,h=t.uniformtext.mode==="hide";switch(r){case"funnelarea":case"pie":case"sunburst":n="g.slice";break;case"treemap":case"icicle":n="g.slice, g.pathbar";break;default:n="g.points > g.point"}e.selectAll(n).each(function(s){var a=s.transform;a&&(a.scale=h&&a.hide?0:i/a.fontSize,o.select(this).select("text").attr("transform",p.getTextTransform(a)))})}}}},{"../../lib":503,"@plotly/d3":58}],665:[function(u,q,W){var o=u("../../plots/template_attributes").hovertemplateAttrs,p=u("../../lib/extend").extendFlat,x=u("../scatterpolar/attributes"),y=u("../bar/attributes");q.exports={r:x.r,theta:x.theta,r0:x.r0,dr:x.dr,theta0:x.theta0,dtheta:x.dtheta,thetaunit:x.thetaunit,base:p({},y.base,{}),offset:p({},y.offset,{}),width:p({},y.width,{}),text:p({},y.text,{}),hovertext:p({},y.hovertext,{}),marker:y.marker,hoverinfo:x.hoverinfo,hovertemplate:o(),selected:y.selected,unselected:y.unselected}},{"../../lib/extend":493,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatterpolar/attributes":1e3}],666:[function(u,q,W){var o=u("../../components/colorscale/helpers").hasColorscale,p=u("../../components/colorscale/calc"),x=u("../bar/arrays_to_calcdata"),y=u("../bar/cross_trace_calc").setGroupPositions,e=u("../scatter/calc_selection"),r=u("../../registry").traceIs,t=u("../../lib").extendFlat;q.exports={calc:function(i,n){for(var h=i._fullLayout,s=n.subplot,a=h[s].radialaxis,l=h[s].angularaxis,f=a.makeCalcdata(n,"r"),d=l.makeCalcdata(n,"theta"),v=n._length,m=new Array(v),c=f,b=d,g=0;g<v;g++)m[g]={p:b[g],s:c[g]};function w(_){var T=n[_];T!==void 0&&(n["_"+_]=Array.isArray(T)?l.makeCalcdata(n,_):l.d2c(T,n.thetaunit))}return l.type==="linear"&&(w("width"),w("offset")),o(n,"marker")&&p(i,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),o(n,"marker.line")&&p(i,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}),x(m,n),e(m,n),m},crossTraceCalc:function(i,n,h){for(var s=i.calcdata,a=[],l=0;l<s.length;l++){var f=s[l],d=f[0].trace;d.visible===!0&&r(d,"bar")&&d.subplot===h&&a.push(f)}var v=t({},n.radialaxis,{_id:"x"}),m=n.angularaxis;y(i,m,v,a,{mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap})}}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../lib":503,"../../registry":638,"../bar/arrays_to_calcdata":647,"../bar/cross_trace_calc":651,"../scatter/calc_selection":928}],667:[function(u,q,W){var o=u("../../lib"),p=u("../scatterpolar/defaults").handleRThetaDefaults,x=u("../bar/style_defaults"),y=u("./attributes");q.exports=function(e,r,t,i){function n(h,s){return o.coerce(e,r,y,h,s)}p(e,r,i,n)?(n("thetaunit"),n("base"),n("offset"),n("width"),n("text"),n("hovertext"),n("hovertemplate"),x(e,r,n,t,i),o.coerceSelectionMarkerOpacity(r,n)):r.visible=!1}},{"../../lib":503,"../bar/style_defaults":663,"../scatterpolar/defaults":1002,"./attributes":665}],668:[function(u,q,W){var o=u("../../components/fx"),p=u("../../lib"),x=u("../bar/hover").getTraceColor,y=p.fillText,e=u("../scatterpolar/hover").makeHoverPointText,r=u("../../plots/polar/helpers").isPtInsidePolygon;q.exports=function(t,i,n){var h=t.cd,s=h[0].trace,a=t.subplot,l=a.radialAxis,f=a.angularAxis,d=a.vangles,v=d?r:p.isPtInsideSector,m=t.maxHoverDistance,c=f._period||2*Math.PI,b=Math.abs(l.g2p(Math.sqrt(i*i+n*n))),g=Math.atan2(n,i);if(l.range[0]>l.range[1]&&(g+=Math.PI),o.getClosest(h,function(T){return v(b,g,[T.rp0,T.rp1],[T.thetag0,T.thetag1],d)?m+Math.min(1,Math.abs(T.thetag1-T.thetag0)/c)-1+(T.rp1-b)/(T.rp1-T.rp0)-1:1/0},t),t.index!==!1){var w=h[t.index];t.x0=t.x1=w.ct[0],t.y0=t.y1=w.ct[1];var _=p.extendFlat({},w,{r:w.s,theta:w.p});return y(w,s,t),e(_,s,a,t),t.hovertemplate=s.hovertemplate,t.color=x(s,w),t.xLabelVal=t.yLabelVal=void 0,w.s<0&&(t.idealAlign="left"),[t]}}},{"../../components/fx":406,"../../lib":503,"../../plots/polar/helpers":621,"../bar/hover":655,"../scatterpolar/hover":1004}],669:[function(u,q,W){q.exports={moduleType:"trace",name:"barpolar",basePlotModule:u("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:u("./attributes"),layoutAttributes:u("./layout_attributes"),supplyDefaults:u("./defaults"),supplyLayoutDefaults:u("./layout_defaults"),calc:u("./calc").calc,crossTraceCalc:u("./calc").crossTraceCalc,plot:u("./plot"),colorbar:u("../scatter/marker_colorbar"),formatLabels:u("../scatterpolar/format_labels"),style:u("../bar/style").style,styleOnSelect:u("../bar/style").styleOnSelect,hoverPoints:u("./hover"),selectPoints:u("../bar/select"),meta:{}}},{"../../plots/polar":622,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":944,"../scatterpolar/format_labels":1003,"./attributes":665,"./calc":666,"./defaults":667,"./hover":668,"./layout_attributes":670,"./layout_defaults":671,"./plot":672}],670:[function(u,q,W){q.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],671:[function(u,q,W){var o=u("../../lib"),p=u("./layout_attributes");q.exports=function(x,y,e){var r,t={};function i(s,a){return o.coerce(x[r]||{},y[r],p,s,a)}for(var n=0;n<e.length;n++){var h=e[n];h.type==="barpolar"&&h.visible===!0&&(t[r=h.subplot]||(i("barmode"),i("bargap"),t[r]=1))}}},{"../../lib":503,"./layout_attributes":670}],672:[function(u,q,W){var o=u("@plotly/d3"),p=u("fast-isnumeric"),x=u("../../lib"),y=u("../../components/drawing"),e=u("../../plots/polar/helpers");q.exports=function(r,t,i){var n=t.xaxis,h=t.yaxis,s=t.radialAxis,a=t.angularAxis,l=function(d){var v=d.cxx,m=d.cyy;return d.vangles?function(c,b,g,w){var _,T;x.angleDelta(g,w)>0?(_=g,T=w):(_=w,T=g);var k=[e.findEnclosingVertexAngles(_,d.vangles)[0],(_+T)/2,e.findEnclosingVertexAngles(T,d.vangles)[1]];return e.pathPolygonAnnulus(c,b,_,T,k,v,m)}:function(c,b,g,w){return x.pathAnnulus(c,b,g,w,v,m)}}(t),f=t.layers.frontplot.select("g.barlayer");x.makeTraceGroups(f,i,"trace bars").each(function(){var d=o.select(this),v=x.ensureSingle(d,"g","points").selectAll("g.point").data(x.identity);v.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),v.exit().remove(),v.each(function(m){var c,b=o.select(this),g=m.rp0=s.c2p(m.s0),w=m.rp1=s.c2p(m.s1),_=m.thetag0=a.c2g(m.p0),T=m.thetag1=a.c2g(m.p1);if(p(g)&&p(w)&&p(_)&&p(T)&&g!==w&&_!==T){var k=s.c2g(m.s1),L=(_+T)/2;m.ct=[n.c2p(k*Math.cos(L)),h.c2p(k*Math.sin(L))],c=l(g,w,_,T)}else c="M0,0Z";x.ensureSingle(b,"path").attr("d",c)}),y.setClipUrl(d,t._hasClipOnAxisFalse?t.clipIds.forTraces:null,r)})}},{"../../components/drawing":388,"../../lib":503,"../../plots/polar/helpers":621,"@plotly/d3":58,"fast-isnumeric":190}],673:[function(u,q,W){var o=u("../scatter/attributes"),p=u("../bar/attributes"),x=u("../../components/color/attributes"),y=u("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=u("../../plots/template_attributes").hovertemplateAttrs,r=u("../../lib/extend").extendFlat,t=o.marker,i=t.line;q.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:o.xperiod,yperiod:o.yperiod,xperiod0:o.xperiod0,yperiod0:o.yperiod0,xperiodalignment:o.xperiodalignment,yperiodalignment:o.yperiodalignment,xhoverformat:y("x"),yhoverformat:y("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:r({},t.symbol,{arrayOk:!1,editType:"plot"}),opacity:r({},t.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:r({},t.size,{arrayOk:!1,editType:"calc"}),color:r({},t.color,{arrayOk:!1,editType:"style"}),line:{color:r({},i.color,{arrayOk:!1,dflt:x.defaultLine,editType:"style"}),width:r({},i.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:o.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:p.offsetgroup,alignmentgroup:p.alignmentgroup,selected:{marker:o.selected.marker,editType:"style"},unselected:{marker:o.unselected.marker,editType:"style"},text:r({},o.text,{}),hovertext:r({},o.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926}],674:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../plots/cartesian/axes"),x=u("../../plots/cartesian/align_period"),y=u("../../lib"),e=u("../../constants/numerical").BADNUM,r=y._;q.exports=function(v,m){var c,b,g,w,_,T,k,L=v._fullLayout,M=p.getFromId(v,m.xaxis||"x"),I=p.getFromId(v,m.yaxis||"y"),P=[],S=m.type==="violin"?"_numViolins":"_numBoxes";m.orientation==="h"?(g=M,w="x",_=I,T="y",k=!!m.yperiodalignment):(g=I,w="y",_=M,T="x",k=!!m.xperiodalignment);var E,D,F,H,V,Q,K=function(We,Ze,nt,ft){var xt,It=Ze+"0"in We,Et="d"+Ze in We;if(Ze in We||It&&Et){var it=nt.makeCalcdata(We,Ze);return[x(We,nt,Ze,it).vals,it]}xt=It?We[Ze+"0"]:"name"in We&&(nt.type==="category"||o(We.name)&&["linear","log"].indexOf(nt.type)!==-1||y.isDateTime(We.name)&&nt.type==="date")?We.name:ft;for(var rt=nt.type==="multicategory"?nt.r2c_just_indices(xt):nt.d2c(xt,0,We[Ze+"calendar"]),At=We._length,Gt=new Array(At),Qt=0;Qt<At;Qt++)Gt[Qt]=rt;return[Gt]}(m,T,_,L[S]),Z=K[0],$=K[1],re=y.distinctVals(Z,_),R=re.vals,N=re.minDiff/2,U=(m.boxpoints||m.points)==="all"?y.identity:function(We){return We.v<E.lf||We.v>E.uf};if(m._hasPreCompStats){var te=m[w],j=function(We){return g.d2c((m[We]||[])[c])},Y=1/0,J=-1/0;for(c=0;c<m._length;c++){var ee=Z[c];if(o(ee)){if((E={}).pos=E[T]=ee,k&&$&&(E.orig_p=$[c]),E.q1=j("q1"),E.med=j("median"),E.q3=j("q3"),D=[],te&&y.isArrayOrTypedArray(te[c]))for(b=0;b<te[c].length;b++)(Q=g.d2c(te[c][b]))!==e&&(i(V={v:Q,i:[c,b]},m,[c,b]),D.push(V));if(E.pts=D.sort(n),H=(F=E[w]=D.map(h)).length,E.med!==e&&E.q1!==e&&E.q3!==e&&E.med>=E.q1&&E.q3>=E.med){var ne=j("lowerfence");E.lf=ne!==e&&ne<=E.q1?ne:s(E,F,H);var se=j("upperfence");E.uf=se!==e&&se>=E.q3?se:a(E,F,H);var oe=j("mean");E.mean=oe!==e?oe:H?y.mean(F,H):(E.q1+E.q3)/2;var he=j("sd");E.sd=oe!==e&&he>=0?he:H?y.stdev(F,H,E.mean):E.q3-E.q1,E.lo=l(E),E.uo=f(E);var le=j("notchspan");le=le!==e&&le>0?le:d(E,H),E.ln=E.med-le,E.un=E.med+le;var de=E.lf,xe=E.uf;m.boxpoints&&F.length&&(de=Math.min(de,F[0]),xe=Math.max(xe,F[H-1])),m.notched&&(de=Math.min(de,E.ln),xe=Math.max(xe,E.un)),E.min=de,E.max=xe}else{var we;y.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+E.q1,"median = "+E.med,"q3 = "+E.q3].join(`
`)),we=E.med!==e?E.med:E.q1!==e?E.q3!==e?(E.q1+E.q3)/2:E.q1:E.q3!==e?E.q3:0,E.med=we,E.q1=E.q3=we,E.lf=E.uf=we,E.mean=E.sd=we,E.ln=E.un=we,E.min=E.max=we}Y=Math.min(Y,E.min),J=Math.max(J,E.max),E.pts2=D.filter(U),P.push(E)}}m._extremes[g._id]=p.findExtremes(g,[Y,J],{padded:!0})}else{var be=g.makeCalcdata(m,w),Ae=function(We,Ze){for(var nt=We.length,ft=new Array(nt+1),xt=0;xt<nt;xt++)ft[xt]=We[xt]-Ze;return ft[nt]=We[nt-1]+Ze,ft}(R,N),fe=R.length,me=function(We){for(var Ze=new Array(We),nt=0;nt<We;nt++)Ze[nt]=[];return Ze}(fe);for(c=0;c<m._length;c++)if(Q=be[c],o(Q)){var ke=y.findBin(Z[c],Ae);ke>=0&&ke<fe&&(i(V={v:Q,i:c},m,c),me[ke].push(V))}var Te=1/0,Me=-1/0,Oe=m.quartilemethod,Fe=Oe==="exclusive",qe=Oe==="inclusive";for(c=0;c<fe;c++)if(me[c].length>0){var et,ze;(E={}).pos=E[T]=R[c],D=E.pts=me[c].sort(n),H=(F=E[w]=D.map(h)).length,E.min=F[0],E.max=F[H-1],E.mean=y.mean(F,H),E.sd=y.stdev(F,H,E.mean),E.med=y.interp(F,.5),H%2&&(Fe||qe)?(Fe?(et=F.slice(0,H/2),ze=F.slice(H/2+1)):qe&&(et=F.slice(0,H/2+1),ze=F.slice(H/2)),E.q1=y.interp(et,.5),E.q3=y.interp(ze,.5)):(E.q1=y.interp(F,.25),E.q3=y.interp(F,.75)),E.lf=s(E,F,H),E.uf=a(E,F,H),E.lo=l(E),E.uo=f(E);var Ue=d(E,H);E.ln=E.med-Ue,E.un=E.med+Ue,Te=Math.min(Te,E.ln),Me=Math.max(Me,E.un),E.pts2=D.filter(U),P.push(E)}m._extremes[g._id]=p.findExtremes(g,m.notched?be.concat([Te,Me]):be,{padded:!0})}return function(We,Ze){if(y.isArrayOrTypedArray(Ze.selectedpoints))for(var nt=0;nt<We.length;nt++){for(var ft=We[nt].pts||[],xt={},It=0;It<ft.length;It++)xt[ft[It].i]=It;y.tagSelected(ft,Ze,xt)}}(P,m),P.length>0?(P[0].t={num:L[S],dPos:N,posLetter:T,valLetter:w,labels:{med:r(v,"median:"),min:r(v,"min:"),q1:r(v,"q1:"),q3:r(v,"q3:"),max:r(v,"max:"),mean:m.boxmean==="sd"?r(v,"mean \xB1 \u03C3:"):r(v,"mean:"),lf:r(v,"lower fence:"),uf:r(v,"upper fence:")}},L[S]++,P):[{t:{empty:!0}}]};var t={text:"tx",hovertext:"htx"};function i(v,m,c){for(var b in t)y.isArrayOrTypedArray(m[b])&&(Array.isArray(c)?y.isArrayOrTypedArray(m[b][c[0]])&&(v[t[b]]=m[b][c[0]][c[1]]):v[t[b]]=m[b][c])}function n(v,m){return v.v-m.v}function h(v){return v.v}function s(v,m,c){return c===0?v.q1:Math.min(v.q1,m[Math.min(y.findBin(2.5*v.q1-1.5*v.q3,m,!0)+1,c-1)])}function a(v,m,c){return c===0?v.q3:Math.max(v.q3,m[Math.max(y.findBin(2.5*v.q3-1.5*v.q1,m),0)])}function l(v){return 4*v.q1-3*v.q3}function f(v){return 4*v.q3-3*v.q1}function d(v,m){return m===0?0:1.57*(v.q3-v.q1)/Math.sqrt(m)}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"fast-isnumeric":190}],675:[function(u,q,W){var o=u("../../plots/cartesian/axes"),p=u("../../lib"),x=u("../../plots/cartesian/constraints").getAxisGroup,y=["v","h"];function e(r,t,i,n){var h,s,a,l=t.calcdata,f=t._fullLayout,d=n._id,v=d.charAt(0),m=[],c=0;for(h=0;h<i.length;h++)for(a=l[i[h]],s=0;s<a.length;s++)m.push(n.c2l(a[s].pos,!0)),c+=(a[s].pts2||[]).length;if(m.length){var b=p.distinctVals(m);n.type!=="category"&&n.type!=="multicategory"||(b.minDiff=1);var g=b.minDiff/2;o.minDtick(n,b.minDiff,b.vals[0],!0);var w=f[r==="violin"?"_numViolins":"_numBoxes"],_=f[r+"mode"]==="group"&&w>1,T=1-f[r+"gap"],k=1-f[r+"groupgap"];for(h=0;h<i.length;h++){var L,M,I,P,S,E,D=(a=l[i[h]])[0].trace,F=a[0].t,H=D.width,V=D.side;if(H)L=M=P=H/2,I=0;else if(L=g,_){var Q=x(f,n._id)+D.orientation,K=(f._alignmentOpts[Q]||{})[D.alignmentgroup]||{},Z=Object.keys(K.offsetGroups||{}).length,$=Z||w;M=L*T*k/$,I=2*L*(((Z?D._offsetIndex:F.num)+.5)/$-.5)*T,P=L*T/$}else M=L*T*k,I=0,P=L;F.dPos=L,F.bPos=I,F.bdPos=M,F.wHover=P;var re,R,N,U,te,j,Y=I+M,J=Boolean(H);if(V==="positive"?(S=L*(H?1:.5),re=Y,E=re=I):V==="negative"?(S=re=I,E=L*(H?1:.5),R=Y):(S=E=L,re=R=Y),(D.boxpoints||D.points)&&c>0){var ee=D.pointpos,ne=D.jitter,se=D.marker.size/2,oe=0;ee+ne>=0&&((oe=Y*(ee+ne))>S?(J=!0,te=se,N=oe):oe>re&&(te=se,N=S)),oe<=S&&(N=S);var he=0;ee-ne<=0&&((he=-Y*(ee-ne))>E?(J=!0,j=se,U=he):he>R&&(j=se,U=E)),he<=E&&(U=E)}else N=S,U=E;var le=new Array(a.length);for(s=0;s<a.length;s++)le[s]=a[s].pos;D._extremes[d]=o.findExtremes(n,le,{padded:J,vpadminus:U,vpadplus:N,vpadLinearized:!0,ppadminus:{x:j,y:te}[v],ppadplus:{x:te,y:j}[v]})}}}q.exports={crossTraceCalc:function(r,t){for(var i=r.calcdata,n=t.xaxis,h=t.yaxis,s=0;s<y.length;s++){for(var a=y[s],l=a==="h"?h:n,f=[],d=0;d<i.length;d++){var v=i[d],m=v[0].t,c=v[0].trace;c.visible!==!0||c.type!=="box"&&c.type!=="candlestick"||m.empty||(c.orientation||"v")!==a||c.xaxis!==n._id||c.yaxis!==h._id||f.push(d)}e("box",r,f,l)}},setPositionOffset:e}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562}],676:[function(u,q,W){var o=u("../../lib"),p=u("../../registry"),x=u("../../components/color"),y=u("../scatter/period_defaults"),e=u("../bar/defaults").handleGroupingDefaults,r=u("../../plots/cartesian/axis_autotype"),t=u("./attributes");function i(h,s,a,l){function f(V){var Q=0;return V&&V.length&&(Q+=1,o.isArrayOrTypedArray(V[0])&&V[0].length&&(Q+=1)),Q}function d(V){return o.validate(h[V],t[V])}var v,m=a("y"),c=a("x");if(s.type==="box"){var b=a("q1"),g=a("median"),w=a("q3");s._hasPreCompStats=b&&b.length&&g&&g.length&&w&&w.length,v=Math.min(o.minRowLength(b),o.minRowLength(g),o.minRowLength(w))}var _,T,k=f(m),L=f(c),M=k&&o.minRowLength(m),I=L&&o.minRowLength(c),P=l.calendar,S={autotypenumbers:l.autotypenumbers};if(s._hasPreCompStats)switch(String(L)+String(k)){case"00":var E=d("x0")||d("dx");_=(d("y0")||d("dy"))&&!E?"h":"v",T=v;break;case"10":_="v",T=Math.min(v,I);break;case"20":_="h",T=Math.min(v,c.length);break;case"01":_="h",T=Math.min(v,M);break;case"02":_="v",T=Math.min(v,m.length);break;case"12":_="v",T=Math.min(v,I,m.length);break;case"21":_="h",T=Math.min(v,c.length,M);break;case"11":T=0;break;case"22":var D,F=!1;for(D=0;D<c.length;D++)if(r(c[D],P,S)==="category"){F=!0;break}if(F)_="v",T=Math.min(v,I,m.length);else{for(D=0;D<m.length;D++)if(r(m[D],P,S)==="category"){F=!0;break}F?(_="h",T=Math.min(v,c.length,M)):(_="v",T=Math.min(v,I,m.length))}}else k>0?(_="v",T=L>0?Math.min(I,M):Math.min(M)):L>0?(_="h",T=Math.min(I)):T=0;if(T){s._length=T;var H=a("orientation",_);s._hasPreCompStats?H==="v"&&L===0?(a("x0",0),a("dx",1)):H==="h"&&k===0&&(a("y0",0),a("dy",1)):H==="v"&&L===0?a("x0"):H==="h"&&k===0&&a("y0"),p.getComponentMethod("calendars","handleTraceDefaults")(h,s,["x","y"],l)}else s.visible=!1}function n(h,s,a,l){var f=l.prefix,d=o.coerce2(h,s,t,"marker.outliercolor"),v=a("marker.line.outliercolor"),m="outliers";s._hasPreCompStats?m="all":(d||v)&&(m="suspectedoutliers");var c=a(f+"points",m);c?(a("jitter",c==="all"?.3:0),a("pointpos",c==="all"?-1.5:0),a("marker.symbol"),a("marker.opacity"),a("marker.size"),a("marker.color",s.line.color),a("marker.line.color"),a("marker.line.width"),c==="suspectedoutliers"&&(a("marker.line.outliercolor",s.marker.color),a("marker.line.outlierwidth")),a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size"),a("text"),a("hovertext")):delete s.marker;var b=a("hoveron");b!=="all"&&b.indexOf("points")===-1||a("hovertemplate"),o.coerceSelectionMarkerOpacity(s,a)}q.exports={supplyDefaults:function(h,s,a,l){function f(w,_){return o.coerce(h,s,t,w,_)}if(i(h,s,f,l),s.visible!==!1){y(h,s,l,f),f("xhoverformat"),f("yhoverformat");var d=s._hasPreCompStats;d&&(f("lowerfence"),f("upperfence")),f("line.color",(h.marker||{}).color||a),f("line.width"),f("fillcolor",x.addOpacity(s.line.color,.5));var v=!1;if(d){var m=f("mean"),c=f("sd");m&&m.length&&(v=!0,c&&c.length&&(v="sd"))}f("boxmean",v),f("whiskerwidth"),f("width"),f("quartilemethod");var b=!1;if(d){var g=f("notchspan");g&&g.length&&(b=!0)}else o.validate(h.notchwidth,t.notchwidth)&&(b=!0);f("notched",b)&&f("notchwidth"),n(h,s,f,{prefix:"box"})}},crossTraceDefaults:function(h,s){var a,l;function f(m){return o.coerce(l._input,l,t,m)}for(var d=0;d<h.length;d++){var v=(l=h[d]).type;v!=="box"&&v!=="violin"||(a=l._input,s[v+"mode"]==="group"&&e(a,l,s,f))}},handleSampleDefaults:i,handlePointsDefaults:n}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../registry":638,"../bar/defaults":652,"../scatter/period_defaults":946,"./attributes":673}],677:[function(u,q,W){q.exports=function(o,p){return p.hoverOnBox&&(o.hoverOnBox=p.hoverOnBox),"xVal"in p&&(o.x=p.xVal),"yVal"in p&&(o.y=p.yVal),p.xa&&(o.xaxis=p.xa),p.ya&&(o.yaxis=p.ya),o}},{}],678:[function(u,q,W){var o=u("../../plots/cartesian/axes"),p=u("../../lib"),x=u("../../components/fx"),y=u("../../components/color"),e=p.fillText;function r(i,n,h,s){var a,l,f,d,v,m,c,b,g,w,_,T,k,L,M=i.cd,I=i.xa,P=i.ya,S=M[0].trace,E=M[0].t,D=S.type==="violin",F=[],H=E.bdPos,V=E.wHover,Q=function(oe){return f.c2l(oe.pos)+E.bPos-f.c2l(m)};D&&S.side!=="both"?(S.side==="positive"&&(g=function(oe){var he=Q(oe);return x.inbox(he,he+V,w)},T=H,k=0),S.side==="negative"&&(g=function(oe){var he=Q(oe);return x.inbox(he-V,he,w)},T=0,k=H)):(g=function(oe){var he=Q(oe);return x.inbox(he-V,he+V,w)},T=k=H),L=D?function(oe){return x.inbox(oe.span[0]-v,oe.span[1]-v,w)}:function(oe){return x.inbox(oe.min-v,oe.max-v,w)},S.orientation==="h"?(v=n,m=h,c=L,b=g,a="y",f=P,l="x",d=I):(v=h,m=n,c=g,b=L,a="x",f=I,l="y",d=P);var K=Math.min(1,H/Math.abs(f.r2c(f.range[1])-f.r2c(f.range[0])));function Z(oe){return(c(oe)+b(oe))/2}w=i.maxHoverDistance-K,_=i.maxSpikeDistance-K;var $=x.getDistanceFunction(s,c,b,Z);if(x.getClosest(M,$,i),i.index===!1)return[];var re=M[i.index],R=S.line.color,N=(S.marker||{}).color;y.opacity(R)&&S.line.width?i.color=R:y.opacity(N)&&S.boxpoints?i.color=N:i.color=S.fillcolor,i[a+"0"]=f.c2p(re.pos+E.bPos-k,!0),i[a+"1"]=f.c2p(re.pos+E.bPos+T,!0),i[a+"LabelVal"]=re.orig_p!==void 0?re.orig_p:re.pos;var U=a+"Spike";i.spikeDistance=Z(re)*_/w,i[U]=f.c2p(re.pos,!0);var te={},j=["med","q1","q3","min","max"];(S.boxmean||(S.meanline||{}).visible)&&j.push("mean"),(S.boxpoints||S.points)&&j.push("lf","uf");for(var Y=0;Y<j.length;Y++){var J=j[Y];if(J in re&&!(re[J]in te)){te[re[J]]=!0;var ee=re[J],ne=d.c2p(ee,!0),se=p.extendFlat({},i);se.attr=J,se[l+"0"]=se[l+"1"]=ne,se[l+"LabelVal"]=ee,se[l+"Label"]=(E.labels?E.labels[J]+" ":"")+o.hoverLabelText(d,ee,S[l+"hoverformat"]),se.hoverOnBox=!0,J==="mean"&&"sd"in re&&S.boxmean==="sd"&&(se[l+"err"]=re.sd),i.name="",i.spikeDistance=void 0,i[U]=void 0,se.hovertemplate=!1,F.push(se)}}return F}function t(i,n,h){for(var s,a,l,f=i.cd,d=i.xa,v=i.ya,m=f[0].trace,c=d.c2p(n),b=v.c2p(h),g=x.quadrature(function(D){var F=Math.max(3,D.mrc||0);return Math.max(Math.abs(d.c2p(D.x)-c)-F,1-3/F)},function(D){var F=Math.max(3,D.mrc||0);return Math.max(Math.abs(v.c2p(D.y)-b)-F,1-3/F)}),w=!1,_=0;_<f.length;_++){a=f[_];for(var T=0;T<(a.pts||[]).length;T++){var k=g(l=a.pts[T]);k<=i.distance&&(i.distance=k,w=[_,T])}}if(!w)return!1;l=(a=f[w[0]]).pts[w[1]];var L=d.c2p(l.x,!0),M=v.c2p(l.y,!0),I=l.mrc||1;s=p.extendFlat({},i,{index:l.i,color:(m.marker||{}).color,name:m.name,x0:L-I,x1:L+I,y0:M-I,y1:M+I,spikeDistance:i.distance,hovertemplate:m.hovertemplate});var P,S=a.orig_p,E=S!==void 0?S:a.pos;return m.orientation==="h"?(P=v,s.xLabelVal=l.x,s.yLabelVal=E):(P=d,s.xLabelVal=E,s.yLabelVal=l.y),s[P._id.charAt(0)+"Spike"]=P.c2p(a.pos,!0),e(l,m,s),s}q.exports={hoverPoints:function(i,n,h,s){var a,l=i.cd[0].trace.hoveron,f=[];return l.indexOf("boxes")!==-1&&(f=f.concat(r(i,n,h,s))),l.indexOf("points")!==-1&&(a=t(i,n,h)),s==="closest"?a?[a]:f:(a&&f.push(a),f)},hoverOnBoxes:r,hoverOnPoints:t}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],679:[function(u,q,W){q.exports={attributes:u("./attributes"),layoutAttributes:u("./layout_attributes"),supplyDefaults:u("./defaults").supplyDefaults,crossTraceDefaults:u("./defaults").crossTraceDefaults,supplyLayoutDefaults:u("./layout_defaults").supplyLayoutDefaults,calc:u("./calc"),crossTraceCalc:u("./cross_trace_calc").crossTraceCalc,plot:u("./plot").plot,style:u("./style").style,styleOnSelect:u("./style").styleOnSelect,hoverPoints:u("./hover").hoverPoints,eventData:u("./event_data"),selectPoints:u("./select"),moduleType:"trace",name:"box",basePlotModule:u("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./attributes":673,"./calc":674,"./cross_trace_calc":675,"./defaults":676,"./event_data":677,"./hover":678,"./layout_attributes":680,"./layout_defaults":681,"./plot":682,"./select":683,"./style":684}],680:[function(u,q,W){q.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],681:[function(u,q,W){var o=u("../../registry"),p=u("../../lib"),x=u("./layout_attributes");function y(e,r,t,i,n){for(var h=n+"Layout",s=!1,a=0;a<t.length;a++){var l=t[a];if(o.traceIs(l,h)){s=!0;break}}s&&(i(n+"mode"),i(n+"gap"),i(n+"groupgap"))}q.exports={supplyLayoutDefaults:function(e,r,t){y(0,0,t,function(i,n){return p.coerce(e,r,x,i,n)},"box")},_supply:y}},{"../../lib":503,"../../registry":638,"./layout_attributes":680}],682:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../lib"),x=u("../../components/drawing");function y(t,i,n,h){var s,a,l=n.orientation==="h",f=i.val,d=i.pos,v=!!d.rangebreaks,m=h.bPos,c=h.wdPos||0,b=h.bPosPxOffset||0,g=n.whiskerwidth||0,w=n.notched||!1,_=w?1-2*n.notchwidth:1;Array.isArray(h.bdPos)?(s=h.bdPos[0],a=h.bdPos[1]):(s=h.bdPos,a=h.bdPos);var T=t.selectAll("path.box").data(n.type!=="violin"||n.box.visible?p.identity:[]);T.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),T.exit().remove(),T.each(function(k){if(k.empty)return"M0,0Z";var L=d.c2l(k.pos+m,!0),M=d.l2p(L-s)+b,I=d.l2p(L+a)+b,P=v?(M+I)/2:d.l2p(L)+b,S=n.whiskerwidth,E=v?M*S+(1-S)*P:d.l2p(L-c)+b,D=v?I*S+(1-S)*P:d.l2p(L+c)+b,F=d.l2p(L-s*_)+b,H=d.l2p(L+a*_)+b,V=f.c2p(k.q1,!0),Q=f.c2p(k.q3,!0),K=p.constrain(f.c2p(k.med,!0),Math.min(V,Q)+1,Math.max(V,Q)-1),Z=k.lf===void 0||n.boxpoints===!1,$=f.c2p(Z?k.min:k.lf,!0),re=f.c2p(Z?k.max:k.uf,!0),R=f.c2p(k.ln,!0),N=f.c2p(k.un,!0);l?o.select(this).attr("d","M"+K+","+F+"V"+H+"M"+V+","+M+"V"+I+(w?"H"+R+"L"+K+","+H+"L"+N+","+I:"")+"H"+Q+"V"+M+(w?"H"+N+"L"+K+","+F+"L"+R+","+M:"")+"ZM"+V+","+P+"H"+$+"M"+Q+","+P+"H"+re+(g===0?"":"M"+$+","+E+"V"+D+"M"+re+","+E+"V"+D)):o.select(this).attr("d","M"+F+","+K+"H"+H+"M"+M+","+V+"H"+I+(w?"V"+R+"L"+H+","+K+"L"+I+","+N:"")+"V"+Q+"H"+M+(w?"V"+N+"L"+F+","+K+"L"+M+","+R:"")+"ZM"+P+","+V+"V"+$+"M"+P+","+Q+"V"+re+(g===0?"":"M"+E+","+$+"H"+D+"M"+E+","+re+"H"+D))})}function e(t,i,n,h){var s=i.x,a=i.y,l=h.bdPos,f=h.bPos,d=n.boxpoints||n.points;p.seedPseudoRandom();var v=t.selectAll("g.points").data(d?function(c){return c.forEach(function(b){b.t=h,b.trace=n}),c}:[]);v.enter().append("g").attr("class","points"),v.exit().remove();var m=v.selectAll("path").data(function(c){var b,g,w=c.pts2,_=Math.max((c.max-c.min)/10,c.q3-c.q1),T=1e-9*_,k=.01*_,L=[],M=0;if(n.jitter){if(_===0)for(M=1,L=new Array(w.length),b=0;b<w.length;b++)L[b]=1;else for(b=0;b<w.length;b++){var I=Math.max(0,b-5),P=w[I].v,S=Math.min(w.length-1,b+5),E=w[S].v;d!=="all"&&(w[b].v<c.lf?E=Math.min(E,c.lf):P=Math.max(P,c.uf));var D=Math.sqrt(k*(S-I)/(E-P+T))||0;D=p.constrain(Math.abs(D),0,1),L.push(D),M=Math.max(D,M)}g=2*n.jitter/(M||1)}for(b=0;b<w.length;b++){var F=w[b],H=F.v,V=n.jitter?g*L[b]*(p.pseudoRandom()-.5):0,Q=c.pos+f+l*(n.pointpos+V);n.orientation==="h"?(F.y=Q,F.x=H):(F.x=Q,F.y=H),d==="suspectedoutliers"&&H<c.uo&&H>c.lo&&(F.so=!0)}return w});m.enter().append("path").classed("point",!0),m.exit().remove(),m.call(x.translatePoints,s,a)}function r(t,i,n,h){var s,a,l=i.val,f=i.pos,d=!!f.rangebreaks,v=h.bPos,m=h.bPosPxOffset||0,c=n.boxmean||(n.meanline||{}).visible;Array.isArray(h.bdPos)?(s=h.bdPos[0],a=h.bdPos[1]):(s=h.bdPos,a=h.bdPos);var b=t.selectAll("path.mean").data(n.type==="box"&&n.boxmean||n.type==="violin"&&n.box.visible&&n.meanline.visible?p.identity:[]);b.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),b.exit().remove(),b.each(function(g){var w=f.c2l(g.pos+v,!0),_=f.l2p(w-s)+m,T=f.l2p(w+a)+m,k=d?(_+T)/2:f.l2p(w)+m,L=l.c2p(g.mean,!0),M=l.c2p(g.mean-g.sd,!0),I=l.c2p(g.mean+g.sd,!0);n.orientation==="h"?o.select(this).attr("d","M"+L+","+_+"V"+T+(c==="sd"?"m0,0L"+M+","+k+"L"+L+","+_+"L"+I+","+k+"Z":"")):o.select(this).attr("d","M"+_+","+L+"H"+T+(c==="sd"?"m0,0L"+k+","+M+"L"+_+","+L+"L"+k+","+I+"Z":""))})}q.exports={plot:function(t,i,n,h){var s=i.xaxis,a=i.yaxis;p.makeTraceGroups(h,n,"trace boxes").each(function(l){var f,d,v=o.select(this),m=l[0],c=m.t,b=m.trace;c.wdPos=c.bdPos*b.whiskerwidth,b.visible!==!0||c.empty?v.remove():(b.orientation==="h"?(f=a,d=s):(f=s,d=a),y(v,{pos:f,val:d},b,c),e(v,{x:s,y:a},b,c),r(v,{pos:f,val:d},b,c))})},plotBoxAndWhiskers:y,plotPoints:e,plotBoxMean:r}},{"../../components/drawing":388,"../../lib":503,"@plotly/d3":58}],683:[function(u,q,W){q.exports=function(o,p){var x,y,e=o.cd,r=o.xaxis,t=o.yaxis,i=[];if(p===!1)for(x=0;x<e.length;x++)for(y=0;y<(e[x].pts||[]).length;y++)e[x].pts[y].selected=0;else for(x=0;x<e.length;x++)for(y=0;y<(e[x].pts||[]).length;y++){var n=e[x].pts[y],h=r.c2p(n.x),s=t.c2p(n.y);p.contains([h,s],null,n.i,o)?(i.push({pointNumber:n.i,x:r.c2d(n.x),y:t.c2d(n.y)}),n.selected=1):n.selected=0}return i}},{}],684:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../components/color"),x=u("../../components/drawing");q.exports={style:function(y,e,r){var t=r||o.select(y).selectAll("g.trace.boxes");t.style("opacity",function(i){return i[0].trace.opacity}),t.each(function(i){var n=o.select(this),h=i[0].trace,s=h.line.width;function a(d,v,m,c){d.style("stroke-width",v+"px").call(p.stroke,m).call(p.fill,c)}var l=n.selectAll("path.box");if(h.type==="candlestick")l.each(function(d){if(!d.empty){var v=o.select(this),m=h[d.dir];a(v,m.line.width,m.line.color,m.fillcolor),v.style("opacity",h.selectedpoints&&!d.selected?.3:1)}});else{a(l,s,h.line.color,h.fillcolor),n.selectAll("path.mean").style({"stroke-width":s,"stroke-dasharray":2*s+"px,"+s+"px"}).call(p.stroke,h.line.color);var f=n.selectAll("path.point");x.pointStyle(f,h,y)}})},styleOnSelect:function(y,e,r){var t=e[0].trace,i=r.selectAll("path.point");t.selectedpoints?x.selectedPointStyle(i,t):x.pointStyle(i,t,y)}}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],685:[function(u,q,W){var o=u("../../lib").extendFlat,p=u("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=u("../ohlc/attributes"),y=u("../box/attributes");function e(r){return{line:{color:o({},y.line.color,{dflt:r}),width:y.line.width,editType:"style"},fillcolor:y.fillcolor,editType:"style"}}q.exports={xperiod:x.xperiod,xperiod0:x.xperiod0,xperiodalignment:x.xperiodalignment,xhoverformat:p("x"),yhoverformat:p("y"),x:x.x,open:x.open,high:x.high,low:x.low,close:x.close,line:{width:o({},y.line.width,{}),editType:"style"},increasing:e(x.increasing.line.color.dflt),decreasing:e(x.decreasing.line.color.dflt),text:x.text,hovertext:x.hovertext,whiskerwidth:o({},y.whiskerwidth,{dflt:0}),hoverlabel:x.hoverlabel}},{"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673,"../ohlc/attributes":872}],686:[function(u,q,W){var o=u("../../lib"),p=u("../../plots/cartesian/axes"),x=u("../../plots/cartesian/align_period"),y=u("../ohlc/calc").calcCommon;function e(r,t,i,n){return{min:i,q1:Math.min(r,n),med:n,q3:Math.max(r,n),max:t}}q.exports=function(r,t){var i=r._fullLayout,n=p.getFromId(r,t.xaxis),h=p.getFromId(r,t.yaxis),s=n.makeCalcdata(t,"x"),a=x(t,n,"x",s).vals,l=y(r,t,s,a,h,e);return l.length?(o.extendFlat(l[0].t,{num:i._numBoxes,dPos:o.distinctVals(a).minDiff/2,posLetter:"x",valLetter:"y"}),i._numBoxes++,l):[{t:{empty:!0}}]}},{"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../ohlc/calc":873}],687:[function(u,q,W){var o=u("../../lib"),p=u("../../components/color"),x=u("../ohlc/ohlc_defaults"),y=u("../scatter/period_defaults"),e=u("./attributes");function r(t,i,n,h){var s=n(h+".line.color");n(h+".line.width",i.line.width),n(h+".fillcolor",p.addOpacity(s,.5))}q.exports=function(t,i,n,h){function s(a,l){return o.coerce(t,i,e,a,l)}x(t,i,s,h)?(y(t,i,h,s,{x:!0}),s("xhoverformat"),s("yhoverformat"),s("line.width"),r(t,i,s,"increasing"),r(t,i,s,"decreasing"),s("text"),s("hovertext"),s("whiskerwidth"),h._requestRangeslider[i.xaxis]=!0):i.visible=!1}},{"../../components/color":366,"../../lib":503,"../ohlc/ohlc_defaults":877,"../scatter/period_defaults":946,"./attributes":685}],688:[function(u,q,W){q.exports={moduleType:"trace",name:"candlestick",basePlotModule:u("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:u("./attributes"),layoutAttributes:u("../box/layout_attributes"),supplyLayoutDefaults:u("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:u("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:u("./defaults"),calc:u("./calc"),plot:u("../box/plot").plot,layerName:"boxlayer",style:u("../box/style").style,hoverPoints:u("../ohlc/hover").hoverPoints,selectPoints:u("../ohlc/select")}},{"../../plots/cartesian":568,"../box/cross_trace_calc":675,"../box/layout_attributes":680,"../box/layout_defaults":681,"../box/plot":682,"../box/style":684,"../ohlc/hover":875,"../ohlc/select":879,"./attributes":685,"./calc":686,"./defaults":687}],689:[function(u,q,W){var o=u("./axis_defaults"),p=u("../../plot_api/plot_template");q.exports=function(x,y,e,r,t){r("a")||(r("da"),r("a0")),r("b")||(r("db"),r("b0")),function(i,n,h,s){["aaxis","baxis"].forEach(function(a){var l=a.charAt(0),f=i[a]||{},d=p.newContainer(n,a),v={tickfont:"x",id:l+"axis",letter:l,font:n.font,name:a,data:i[l],calendar:n.calendar,dfltColor:s,bgColor:h.paper_bgcolor,autotypenumbersDflt:h.autotypenumbers,fullLayout:h};o(f,d,v),d._categories=d._categories||[],i[a]||f.type==="-"||(i[a]={type:f.type})})}(x,y,e,t)}},{"../../plot_api/plot_template":543,"./axis_defaults":694}],690:[function(u,q,W){var o=u("../../lib").isArrayOrTypedArray;q.exports=function(p){return function x(y,e){if(!o(y)||e>=10)return null;for(var r=1/0,t=-1/0,i=y.length,n=0;n<i;n++){var h=y[n];if(o(h)){var s=x(h,e+1);s&&(r=Math.min(s[0],r),t=Math.max(s[1],t))}else r=Math.min(h,r),t=Math.max(h,t)}return[r,t]}(p,0)}},{"../../lib":503}],691:[function(u,q,W){var o=u("../../plots/font_attributes"),p=u("./axis_attributes"),x=u("../../components/color/attributes"),y=o({editType:"calc"});y.family.dflt='"Open Sans", verdana, arial, sans-serif',y.size.dflt=12,y.color.dflt=x.defaultLine,q.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:p,baxis:p,font:y,color:{valType:"color",dflt:x.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":365,"../../plots/font_attributes":585,"./axis_attributes":693}],692:[function(u,q,W){var o=u("../../lib").isArrayOrTypedArray;q.exports=function(p,x,y,e){var r,t,i,n,h,s,a,l,f,d,v,m,c,b=o(y)?"a":"b",g=(b==="a"?p.aaxis:p.baxis).smoothing,w=b==="a"?p.a2i:p.b2j,_=b==="a"?y:e,T=b==="a"?e:y,k=b==="a"?x.a.length:x.b.length,L=b==="a"?x.b.length:x.a.length,M=Math.floor(b==="a"?p.b2j(T):p.a2i(T)),I=b==="a"?function(re){return p.evalxy([],re,M)}:function(re){return p.evalxy([],M,re)};g&&(i=Math.max(0,Math.min(L-2,M)),n=M-i,t=b==="a"?function(re,R){return p.dxydi([],re,i,R,n)}:function(re,R){return p.dxydj([],i,re,n,R)});var P=w(_[0]),S=w(_[1]),E=P<S?1:-1,D=1e-8*(S-P),F=E>0?Math.floor:Math.ceil,H=E>0?Math.ceil:Math.floor,V=E>0?Math.min:Math.max,Q=E>0?Math.max:Math.min,K=F(P+D),Z=H(S-D),$=[[a=I(P)]];for(r=K;r*E<Z*E;r+=E)h=[],v=Q(P,r),c=(m=V(S,r+E))-v,s=Math.max(0,Math.min(k-2,Math.floor(.5*(v+m)))),l=I(m),g&&(f=t(s,v-s),d=t(s,m-s),h.push([a[0]+f[0]/3*c,a[1]+f[1]/3*c]),h.push([l[0]-d[0]/3*c,l[1]-d[1]/3*c])),h.push(l),$.push(h),a=l;return $}},{"../../lib":503}],693:[function(u,q,W){var o=u("../../plots/font_attributes"),p=u("../../components/color/attributes"),x=u("../../plots/cartesian/layout_attributes"),y=u("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=u("../../plot_api/edit_types").overrideAll;q.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:o({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:x.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:o({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:y("tick label")},tickformatstops:e(x.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:p.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:p.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:o({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":365,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],694:[function(u,q,W){var o=u("./attributes"),p=u("../../components/color").addOpacity,x=u("../../registry"),y=u("../../lib"),e=u("../../plots/cartesian/tick_value_defaults"),r=u("../../plots/cartesian/tick_label_defaults"),t=u("../../plots/cartesian/prefix_suffix_defaults"),i=u("../../plots/cartesian/category_order_defaults"),n=u("../../plots/cartesian/set_convert"),h=u("../../plots/cartesian/axis_autotype");q.exports=function(s,a,l){var f=l.letter,d=l.font||{},v=o[f+"axis"];function m(S,E){return y.coerce(s,a,v,S,E)}function c(S,E){return y.coerce2(s,a,v,S,E)}l.name&&(a._name=l.name,a._id=l.name),m("autotypenumbers",l.autotypenumbersDflt);var b=m("type");b==="-"&&(l.data&&function(S,E){if(S.type==="-"){var D=S._id.charAt(0),F=S[D+"calendar"];S.type=h(E,F,{autotypenumbers:S.autotypenumbers})}}(a,l.data),a.type==="-"?a.type="linear":b=s.type=a.type),m("smoothing"),m("cheatertype"),m("showticklabels"),m("labelprefix",f+" = "),m("labelsuffix"),m("showtickprefix"),m("showticksuffix"),m("separatethousands"),m("tickformat"),m("exponentformat"),m("minexponent"),m("showexponent"),m("categoryorder"),m("tickmode"),m("tickvals"),m("ticktext"),m("tick0"),m("dtick"),a.tickmode==="array"&&(m("arraytick0"),m("arraydtick")),m("labelpadding"),a._hovertitle=f,b==="date"&&x.getComponentMethod("calendars","handleDefaults")(s,a,"calendar",l.calendar),n(a,l.fullLayout),a.c2p=y.identity;var g=m("color",l.dfltColor),w=g===s.color?g:d.color;m("title.text")&&(y.coerceFont(m,"title.font",{family:d.family,size:y.bigFont(d.size),color:w}),m("title.offset")),m("tickangle"),m("autorange",!a.isValidRange(s.range))&&m("rangemode"),m("range"),a.cleanRange(),m("fixedrange"),e(s,a,m,b),t(s,a,m,b,l),r(s,a,m,b,l),i(s,a,m,{data:l.data,dataAttr:f});var _=c("gridcolor",p(g,.3)),T=c("gridwidth"),k=m("showgrid");k||(delete a.gridcolor,delete a.gridwidth);var L=c("startlinecolor",g),M=c("startlinewidth",T);m("startline",a.showgrid||!!L||!!M)||(delete a.startlinecolor,delete a.startlinewidth);var I=c("endlinecolor",g),P=c("endlinewidth",T);return m("endline",a.showgrid||!!I||!!P)||(delete a.endlinecolor,delete a.endlinewidth),k?(m("minorgridcount"),m("minorgridwidth",T),m("minorgridcolor",p(_,.06)),a.minorgridcount||(delete a.minorgridwidth,delete a.minorgridcolor)):(delete a.gridcolor,delete a.gridWidth),a.showticklabels==="none"&&(delete a.tickfont,delete a.tickangle,delete a.showexponent,delete a.exponentformat,delete a.minexponent,delete a.tickformat,delete a.showticksuffix,delete a.showtickprefix),a.showticksuffix||delete a.ticksuffix,a.showtickprefix||delete a.tickprefix,m("tickmode"),a}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../plots/cartesian/category_order_defaults":559,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/set_convert":576,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_value_defaults":580,"../../registry":638,"./attributes":691}],695:[function(u,q,W){var o=u("../../plots/cartesian/axes"),p=u("../../lib").isArray1D,x=u("./cheater_basis"),y=u("./array_minmax"),e=u("./calc_gridlines"),r=u("./calc_labels"),t=u("./calc_clippath"),i=u("../heatmap/clean_2d_array"),n=u("./smooth_fill_2d_array"),h=u("../heatmap/convert_column_xyz"),s=u("./set_convert");q.exports=function(a,l){var f=o.getFromId(a,l.xaxis),d=o.getFromId(a,l.yaxis),v=l.aaxis,m=l.baxis,c=l.x,b=l.y,g=[];c&&p(c)&&g.push("x"),b&&p(b)&&g.push("y"),g.length&&h(l,v,m,"a","b",g);var w=l._a=l._a||l.a,_=l._b=l._b||l.b;c=l._x||l.x,b=l._y||l.y;var T={};if(l._cheater){var k=v.cheatertype==="index"?w.length:w,L=m.cheatertype==="index"?_.length:_;c=x(k,L,l.cheaterslope)}l._x=c=i(c),l._y=b=i(b),n(c,w,_),n(b,w,_),s(l),l.setScale();var M=y(c),I=y(b),P=.5*(M[1]-M[0]),S=.5*(M[1]+M[0]),E=.5*(I[1]-I[0]),D=.5*(I[1]+I[0]);return M=[S-1.3*P,S+1.3*P],I=[D-1.3*E,D+1.3*E],l._extremes[f._id]=o.findExtremes(f,M,{padded:!0}),l._extremes[d._id]=o.findExtremes(d,I,{padded:!0}),e(l,"a","b"),e(l,"b","a"),r(l,v),r(l,m),T.clipsegments=t(l._xctrl,l._yctrl,v,m),T.x=c,T.y=b,T.a=w,T.b=_,[T]}},{"../../lib":503,"../../plots/cartesian/axes":554,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"./array_minmax":690,"./calc_clippath":696,"./calc_gridlines":697,"./calc_labels":698,"./cheater_basis":700,"./set_convert":713,"./smooth_fill_2d_array":714}],696:[function(u,q,W){q.exports=function(o,p,x,y){var e,r,t,i=[],n=!!x.smoothing,h=!!y.smoothing,s=o[0].length-1,a=o.length-1;for(e=0,r=[],t=[];e<=s;e++)r[e]=o[0][e],t[e]=p[0][e];for(i.push({x:r,y:t,bicubic:n}),e=0,r=[],t=[];e<=a;e++)r[e]=o[e][s],t[e]=p[e][s];for(i.push({x:r,y:t,bicubic:h}),e=s,r=[],t=[];e>=0;e--)r[s-e]=o[a][e],t[s-e]=p[a][e];for(i.push({x:r,y:t,bicubic:n}),e=a,r=[],t=[];e>=0;e--)r[a-e]=o[e][0],t[a-e]=p[e][0];return i.push({x:r,y:t,bicubic:h}),i}},{}],697:[function(u,q,W){var o=u("../../plots/cartesian/axes"),p=u("../../lib/extend").extendFlat;q.exports=function(x,y,e){var r,t,i,n,h,s,a,l,f,d,v,m,c,b,g=x["_"+y],w=x[y+"axis"],_=w._gridlines=[],T=w._minorgridlines=[],k=w._boundarylines=[],L=x["_"+e],M=x[e+"axis"];w.tickmode==="array"&&(w.tickvals=g.slice());var I=x._xctrl,P=x._yctrl,S=I[0].length,E=I.length,D=x._a.length,F=x._b.length;o.prepTicks(w),w.tickmode==="array"&&delete w.tickvals;var H=w.smoothing?3:1;function V(K){var Z,$,re,R,N,U,te,j,Y,J,ee,ne,se=[],oe=[],he={};if(y==="b")for($=x.b2j(K),re=Math.floor(Math.max(0,Math.min(F-2,$))),R=$-re,he.length=F,he.crossLength=D,he.xy=function(le){return x.evalxy([],le,$)},he.dxy=function(le,de){return x.dxydi([],le,re,de,R)},Z=0;Z<D;Z++)U=Math.min(D-2,Z),te=Z-U,j=x.evalxy([],Z,$),M.smoothing&&Z>0&&(Y=x.dxydi([],Z-1,re,0,R),se.push(N[0]+Y[0]/3),oe.push(N[1]+Y[1]/3),J=x.dxydi([],Z-1,re,1,R),se.push(j[0]-J[0]/3),oe.push(j[1]-J[1]/3)),se.push(j[0]),oe.push(j[1]),N=j;else for(Z=x.a2i(K),U=Math.floor(Math.max(0,Math.min(D-2,Z))),te=Z-U,he.length=D,he.crossLength=F,he.xy=function(le){return x.evalxy([],Z,le)},he.dxy=function(le,de){return x.dxydj([],U,le,te,de)},$=0;$<F;$++)re=Math.min(F-2,$),R=$-re,j=x.evalxy([],Z,$),M.smoothing&&$>0&&(ee=x.dxydj([],U,$-1,te,0),se.push(N[0]+ee[0]/3),oe.push(N[1]+ee[1]/3),ne=x.dxydj([],U,$-1,te,1),se.push(j[0]-ne[0]/3),oe.push(j[1]-ne[1]/3)),se.push(j[0]),oe.push(j[1]),N=j;return he.axisLetter=y,he.axis=w,he.crossAxis=M,he.value=K,he.constvar=e,he.index=l,he.x=se,he.y=oe,he.smoothing=M.smoothing,he}function Q(K){var Z,$,re,R,N,U=[],te=[],j={};if(j.length=g.length,j.crossLength=L.length,y==="b")for(re=Math.max(0,Math.min(F-2,K)),N=Math.min(1,Math.max(0,K-re)),j.xy=function(Y){return x.evalxy([],Y,K)},j.dxy=function(Y,J){return x.dxydi([],Y,re,J,N)},Z=0;Z<S;Z++)U[Z]=I[K*H][Z],te[Z]=P[K*H][Z];else for($=Math.max(0,Math.min(D-2,K)),R=Math.min(1,Math.max(0,K-$)),j.xy=function(Y){return x.evalxy([],K,Y)},j.dxy=function(Y,J){return x.dxydj([],$,Y,R,J)},Z=0;Z<E;Z++)U[Z]=I[Z][K*H],te[Z]=P[Z][K*H];return j.axisLetter=y,j.axis=w,j.crossAxis=M,j.value=g[K],j.constvar=e,j.index=K,j.x=U,j.y=te,j.smoothing=M.smoothing,j}if(w.tickmode==="array"){for(n=5e-15,s=(h=[Math.floor((g.length-1-w.arraytick0)/w.arraydtick*(1+n)),Math.ceil(-w.arraytick0/w.arraydtick/(1+n))].sort(function(K,Z){return K-Z}))[0]-1,a=h[1]+1,l=s;l<a;l++)(t=w.arraytick0+w.arraydtick*l)<0||t>g.length-1||_.push(p(Q(t),{color:w.gridcolor,width:w.gridwidth}));for(l=s;l<a;l++)if(i=w.arraytick0+w.arraydtick*l,v=Math.min(i+w.arraydtick,g.length-1),!(i<0||i>g.length-1||v<0||v>g.length-1))for(m=g[i],c=g[v],r=0;r<w.minorgridcount;r++)(b=v-i)<=0||(d=m+(c-m)*(r+1)/(w.minorgridcount+1)*(w.arraydtick/b))<g[0]||d>g[g.length-1]||T.push(p(V(d),{color:w.minorgridcolor,width:w.minorgridwidth}));w.startline&&k.push(p(Q(0),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&k.push(p(Q(g.length-1),{color:w.endlinecolor,width:w.endlinewidth}))}else{for(n=5e-15,s=(h=[Math.floor((g[g.length-1]-w.tick0)/w.dtick*(1+n)),Math.ceil((g[0]-w.tick0)/w.dtick/(1+n))].sort(function(K,Z){return K-Z}))[0],a=h[1],l=s;l<=a;l++)f=w.tick0+w.dtick*l,_.push(p(V(f),{color:w.gridcolor,width:w.gridwidth}));for(l=s-1;l<a+1;l++)for(f=w.tick0+w.dtick*l,r=0;r<w.minorgridcount;r++)(d=f+w.dtick*(r+1)/(w.minorgridcount+1))<g[0]||d>g[g.length-1]||T.push(p(V(d),{color:w.minorgridcolor,width:w.minorgridwidth}));w.startline&&k.push(p(V(g[0]),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&k.push(p(V(g[g.length-1]),{color:w.endlinecolor,width:w.endlinewidth}))}}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],698:[function(u,q,W){var o=u("../../plots/cartesian/axes"),p=u("../../lib/extend").extendFlat;q.exports=function(x,y){var e,r,t,i=y._labels=[],n=y._gridlines;for(e=0;e<n.length;e++)t=n[e],["start","both"].indexOf(y.showticklabels)!==-1&&(r=o.tickText(y,t.value),p(r,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:t.xy(0),dxy:t.dxy(0,0),axis:t.axis,length:t.crossAxis.length,font:t.axis.tickfont,isFirst:e===0,isLast:e===n.length-1}),i.push(r)),["end","both"].indexOf(y.showticklabels)!==-1&&(r=o.tickText(y,t.value),p(r,{endAnchor:!1,xy:t.xy(t.crossLength-1),dxy:t.dxy(t.crossLength-2,1),axis:t.axis,length:t.crossAxis.length,font:t.axis.tickfont,isFirst:e===0,isLast:e===n.length-1}),i.push(r))}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],699:[function(u,q,W){q.exports=function(o,p,x,y){var e=o[0]-p[0],r=o[1]-p[1],t=x[0]-p[0],i=x[1]-p[1],n=Math.pow(e*e+r*r,.25),h=Math.pow(t*t+i*i,.25),s=(h*h*e-n*n*t)*y,a=(h*h*r-n*n*i)*y,l=h*(n+h)*3,f=n*(n+h)*3;return[[p[0]+(l&&s/l),p[1]+(l&&a/l)],[p[0]-(f&&s/f),p[1]-(f&&a/f)]]}},{}],700:[function(u,q,W){var o=u("../../lib").isArrayOrTypedArray;q.exports=function(p,x,y){var e,r,t,i,n,h,s=[],a=o(p)?p.length:p,l=o(x)?x.length:x,f=o(p)?p:null,d=o(x)?x:null;f&&(t=(f.length-1)/(f[f.length-1]-f[0])/(a-1)),d&&(i=(d.length-1)/(d[d.length-1]-d[0])/(l-1));var v=1/0,m=-1/0;for(r=0;r<l;r++)for(s[r]=[],n=d?(d[r]-d[0])*i:r/(l-1),e=0;e<a;e++)h=(f?(f[e]-f[0])*t:e/(a-1))-n*y,v=Math.min(h,v),m=Math.max(h,m),s[r][e]=h;var c=1/(m-v),b=-v*c;for(r=0;r<l;r++)for(e=0;e<a;e++)s[r][e]=c*s[r][e]+b;return s}},{"../../lib":503}],701:[function(u,q,W){var o=u("./catmull_rom"),p=u("../../lib").ensureArray;function x(y,e,r){var t=-.5*r[0]+1.5*e[0],i=-.5*r[1]+1.5*e[1];return[(2*t+y[0])/3,(2*i+y[1])/3]}q.exports=function(y,e,r,t,i,n){var h,s,a,l,f,d,v,m,c,b,g=r[0].length,w=r.length,_=i?3*g-2:g,T=n?3*w-2:w;for(y=p(y,T),e=p(e,T),a=0;a<T;a++)y[a]=p(y[a],_),e[a]=p(e[a],_);for(s=0,l=0;s<w;s++,l+=n?3:1)for(f=y[l],d=e[l],v=r[s],m=t[s],h=0,a=0;h<g;h++,a+=i?3:1)f[a]=v[h],d[a]=m[h];if(i)for(s=0,l=0;s<w;s++,l+=n?3:1){for(h=1,a=3;h<g-1;h++,a+=3)c=o([r[s][h-1],t[s][h-1]],[r[s][h],t[s][h]],[r[s][h+1],t[s][h+1]],i),y[l][a-1]=c[0][0],e[l][a-1]=c[0][1],y[l][a+1]=c[1][0],e[l][a+1]=c[1][1];b=x([y[l][0],e[l][0]],[y[l][2],e[l][2]],[y[l][3],e[l][3]]),y[l][1]=b[0],e[l][1]=b[1],b=x([y[l][_-1],e[l][_-1]],[y[l][_-3],e[l][_-3]],[y[l][_-4],e[l][_-4]]),y[l][_-2]=b[0],e[l][_-2]=b[1]}if(n)for(a=0;a<_;a++){for(l=3;l<T-3;l+=3)c=o([y[l-3][a],e[l-3][a]],[y[l][a],e[l][a]],[y[l+3][a],e[l+3][a]],n),y[l-1][a]=c[0][0],e[l-1][a]=c[0][1],y[l+1][a]=c[1][0],e[l+1][a]=c[1][1];b=x([y[0][a],e[0][a]],[y[2][a],e[2][a]],[y[3][a],e[3][a]]),y[1][a]=b[0],e[1][a]=b[1],b=x([y[T-1][a],e[T-1][a]],[y[T-3][a],e[T-3][a]],[y[T-4][a],e[T-4][a]]),y[T-2][a]=b[0],e[T-2][a]=b[1]}if(i&&n)for(l=1;l<T;l+=(l+1)%3==0?2:1){for(a=3;a<_-3;a+=3)c=o([y[l][a-3],e[l][a-3]],[y[l][a],e[l][a]],[y[l][a+3],e[l][a+3]],i),y[l][a-1]=.5*(y[l][a-1]+c[0][0]),e[l][a-1]=.5*(e[l][a-1]+c[0][1]),y[l][a+1]=.5*(y[l][a+1]+c[1][0]),e[l][a+1]=.5*(e[l][a+1]+c[1][1]);b=x([y[l][0],e[l][0]],[y[l][2],e[l][2]],[y[l][3],e[l][3]]),y[l][1]=.5*(y[l][1]+b[0]),e[l][1]=.5*(e[l][1]+b[1]),b=x([y[l][_-1],e[l][_-1]],[y[l][_-3],e[l][_-3]],[y[l][_-4],e[l][_-4]]),y[l][_-2]=.5*(y[l][_-2]+b[0]),e[l][_-2]=.5*(e[l][_-2]+b[1])}return[y,e]}},{"../../lib":503,"./catmull_rom":699}],702:[function(u,q,W){q.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],703:[function(u,q,W){q.exports=function(o,p,x){return p&&x?function(y,e,r,t,i){var n,h,s,a,l,f;y||(y=[]),e*=3,r*=3;var d=t*t,v=1-t,m=v*v,c=v*t*2,b=-3*m,g=3*(m-c),w=3*(c-d),_=3*d,T=i*i,k=T*i,L=1-i,M=L*L,I=M*L;for(f=0;f<o.length;f++)n=b*(l=o[f])[r][e]+g*l[r][e+1]+w*l[r][e+2]+_*l[r][e+3],h=b*l[r+1][e]+g*l[r+1][e+1]+w*l[r+1][e+2]+_*l[r+1][e+3],s=b*l[r+2][e]+g*l[r+2][e+1]+w*l[r+2][e+2]+_*l[r+2][e+3],a=b*l[r+3][e]+g*l[r+3][e+1]+w*l[r+3][e+2]+_*l[r+3][e+3],y[f]=I*n+3*(M*i*h+L*T*s)+k*a;return y}:p?function(y,e,r,t,i){var n,h,s,a;y||(y=[]),e*=3;var l=t*t,f=1-t,d=f*f,v=f*t*2,m=-3*d,c=3*(d-v),b=3*(v-l),g=3*l,w=1-i;for(s=0;s<o.length;s++)n=m*(a=o[s])[r][e]+c*a[r][e+1]+b*a[r][e+2]+g*a[r][e+3],h=m*a[r+1][e]+c*a[r+1][e+1]+b*a[r+1][e+2]+g*a[r+1][e+3],y[s]=w*n+i*h;return y}:x?function(y,e,r,t,i){var n,h,s,a,l,f;y||(y=[]),r*=3;var d=i*i,v=d*i,m=1-i,c=m*m,b=c*m;for(l=0;l<o.length;l++)n=(f=o[l])[r][e+1]-f[r][e],h=f[r+1][e+1]-f[r+1][e],s=f[r+2][e+1]-f[r+2][e],a=f[r+3][e+1]-f[r+3][e],y[l]=b*n+3*(c*i*h+m*d*s)+v*a;return y}:function(y,e,r,t,i){var n,h,s,a;y||(y=[]);var l=1-i;for(s=0;s<o.length;s++)n=(a=o[s])[r][e+1]-a[r][e],h=a[r+1][e+1]-a[r+1][e],y[s]=l*n+i*h;return y}}},{}],704:[function(u,q,W){q.exports=function(o,p,x){return p&&x?function(y,e,r,t,i){var n,h,s,a,l,f;y||(y=[]),e*=3,r*=3;var d=t*t,v=d*t,m=1-t,c=m*m,b=c*m,g=i*i,w=1-i,_=w*w,T=w*i*2,k=-3*_,L=3*(_-T),M=3*(T-g),I=3*g;for(f=0;f<o.length;f++)n=k*(l=o[f])[r][e]+L*l[r+1][e]+M*l[r+2][e]+I*l[r+3][e],h=k*l[r][e+1]+L*l[r+1][e+1]+M*l[r+2][e+1]+I*l[r+3][e+1],s=k*l[r][e+2]+L*l[r+1][e+2]+M*l[r+2][e+2]+I*l[r+3][e+2],a=k*l[r][e+3]+L*l[r+1][e+3]+M*l[r+2][e+3]+I*l[r+3][e+3],y[f]=b*n+3*(c*t*h+m*d*s)+v*a;return y}:p?function(y,e,r,t,i){var n,h,s,a,l,f;y||(y=[]),e*=3;var d=i*i,v=d*i,m=1-i,c=m*m,b=c*m;for(l=0;l<o.length;l++)n=(f=o[l])[r+1][e]-f[r][e],h=f[r+1][e+1]-f[r][e+1],s=f[r+1][e+2]-f[r][e+2],a=f[r+1][e+3]-f[r][e+3],y[l]=b*n+3*(c*i*h+m*d*s)+v*a;return y}:x?function(y,e,r,t,i){var n,h,s,a;y||(y=[]),r*=3;var l=1-t,f=i*i,d=1-i,v=d*d,m=d*i*2,c=-3*v,b=3*(v-m),g=3*(m-f),w=3*f;for(s=0;s<o.length;s++)n=c*(a=o[s])[r][e]+b*a[r+1][e]+g*a[r+2][e]+w*a[r+3][e],h=c*a[r][e+1]+b*a[r+1][e+1]+g*a[r+2][e+1]+w*a[r+3][e+1],y[s]=l*n+t*h;return y}:function(y,e,r,t,i){var n,h,s,a;y||(y=[]);var l=1-t;for(s=0;s<o.length;s++)n=(a=o[s])[r+1][e]-a[r][e],h=a[r+1][e+1]-a[r][e+1],y[s]=l*n+t*h;return y}}},{}],705:[function(u,q,W){q.exports=function(o,p,x,y,e){var r=p-2,t=x-2;return y&&e?function(i,n,h){var s,a,l,f,d,v;i||(i=[]);var m=Math.max(0,Math.min(Math.floor(n),r)),c=Math.max(0,Math.min(Math.floor(h),t)),b=Math.max(0,Math.min(1,n-m)),g=Math.max(0,Math.min(1,h-c));m*=3,c*=3;var w=b*b,_=w*b,T=1-b,k=T*T,L=k*T,M=g*g,I=M*g,P=1-g,S=P*P,E=S*P;for(v=0;v<o.length;v++)s=L*(d=o[v])[c][m]+3*(k*b*d[c][m+1]+T*w*d[c][m+2])+_*d[c][m+3],a=L*d[c+1][m]+3*(k*b*d[c+1][m+1]+T*w*d[c+1][m+2])+_*d[c+1][m+3],l=L*d[c+2][m]+3*(k*b*d[c+2][m+1]+T*w*d[c+2][m+2])+_*d[c+2][m+3],f=L*d[c+3][m]+3*(k*b*d[c+3][m+1]+T*w*d[c+3][m+2])+_*d[c+3][m+3],i[v]=E*s+3*(S*g*a+P*M*l)+I*f;return i}:y?function(i,n,h){i||(i=[]);var s,a,l,f,d,v,m=Math.max(0,Math.min(Math.floor(n),r)),c=Math.max(0,Math.min(Math.floor(h),t)),b=Math.max(0,Math.min(1,n-m)),g=Math.max(0,Math.min(1,h-c));m*=3;var w=b*b,_=w*b,T=1-b,k=T*T,L=k*T,M=1-g;for(d=0;d<o.length;d++)s=M*(v=o[d])[c][m]+g*v[c+1][m],a=M*v[c][m+1]+g*v[c+1][m+1],l=M*v[c][m+2]+g*v[c+1][m+1],f=M*v[c][m+3]+g*v[c+1][m+1],i[d]=L*s+3*(k*b*a+T*w*l)+_*f;return i}:e?function(i,n,h){i||(i=[]);var s,a,l,f,d,v,m=Math.max(0,Math.min(Math.floor(n),r)),c=Math.max(0,Math.min(Math.floor(h),t)),b=Math.max(0,Math.min(1,n-m)),g=Math.max(0,Math.min(1,h-c));c*=3;var w=g*g,_=w*g,T=1-g,k=T*T,L=k*T,M=1-b;for(d=0;d<o.length;d++)s=M*(v=o[d])[c][m]+b*v[c][m+1],a=M*v[c+1][m]+b*v[c+1][m+1],l=M*v[c+2][m]+b*v[c+2][m+1],f=M*v[c+3][m]+b*v[c+3][m+1],i[d]=L*s+3*(k*g*a+T*w*l)+_*f;return i}:function(i,n,h){i||(i=[]);var s,a,l,f,d=Math.max(0,Math.min(Math.floor(n),r)),v=Math.max(0,Math.min(Math.floor(h),t)),m=Math.max(0,Math.min(1,n-d)),c=Math.max(0,Math.min(1,h-v)),b=1-c,g=1-m;for(l=0;l<o.length;l++)s=g*(f=o[l])[v][d]+m*f[v][d+1],a=g*f[v+1][d]+m*f[v+1][d+1],i[l]=b*s+c*a;return i}}},{}],706:[function(u,q,W){var o=u("../../lib"),p=u("./xy_defaults"),x=u("./ab_defaults"),y=u("./attributes"),e=u("../../components/color/attributes");q.exports=function(r,t,i,n){function h(a,l){return o.coerce(r,t,y,a,l)}t._clipPathId="clip"+t.uid+"carpet";var s=h("color",e.defaultLine);o.coerceFont(h,"font"),h("carpet"),x(r,t,n,h,s),t.a&&t.b?(t.a.length<3&&(t.aaxis.smoothing=0),t.b.length<3&&(t.baxis.smoothing=0),p(r,t,h)||(t.visible=!1),t._cheater&&h("cheaterslope")):t.visible=!1}},{"../../components/color/attributes":365,"../../lib":503,"./ab_defaults":689,"./attributes":691,"./xy_defaults":715}],707:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults"),plot:u("./plot"),calc:u("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:u("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"./attributes":691,"./calc":695,"./defaults":706,"./plot":712}],708:[function(u,q,W){q.exports=function(o,p){for(var x,y=o._fullData.length,e=0;e<y;e++){var r=o._fullData[e];if(r.index!==p.index&&r.type==="carpet"&&(x||(x=r),r.carpet===p.carpet))return r}return x}},{}],709:[function(u,q,W){q.exports=function(o,p,x){if(o.length===0)return"";var y,e=[],r=x?3:1;for(y=0;y<o.length;y+=r)e.push(o[y]+","+p[y]),x&&y<o.length-r&&(e.push("C"),e.push([o[y+1]+","+p[y+1],o[y+2]+","+p[y+2]+" "].join(" ")));return e.join(x?"":"L")}},{}],710:[function(u,q,W){var o=u("../../lib").isArrayOrTypedArray;q.exports=function(p,x,y){var e;for(o(p)?p.length>x.length&&(p=p.slice(0,x.length)):p=[],e=0;e<x.length;e++)p[e]=y(x[e]);return p}},{"../../lib":503}],711:[function(u,q,W){q.exports=function(o,p,x,y,e,r){var t=e[0]*o.dpdx(p),i=e[1]*o.dpdy(x),n=1,h=1;if(r){var s=Math.sqrt(e[0]*e[0]+e[1]*e[1]),a=Math.sqrt(r[0]*r[0]+r[1]*r[1]),l=(e[0]*r[0]+e[1]*r[1])/s/a;h=Math.max(0,l)}var f=180*Math.atan2(i,t)/Math.PI;return f<-90?(f+=180,n=-n):f>90&&(f-=180,n=-n),{angle:f,flip:n,p:o.c2p(y,p,x),offsetMultplier:h}}},{}],712:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../components/drawing"),x=u("./map_1d_array"),y=u("./makepath"),e=u("./orient_text"),r=u("../../lib/svg_text_utils"),t=u("../../lib"),i=t.strRotate,n=t.strTranslate,h=u("../../constants/alignment");function s(v,m,c,b,g,w){var _="const-"+g+"-lines",T=c.selectAll("."+_).data(w);T.enter().append("path").classed(_,!0).style("vector-effect","non-scaling-stroke"),T.each(function(k){var L=k,M=L.x,I=L.y,P=x([],M,v.c2p),S=x([],I,m.c2p),E="M"+y(P,S,L.smoothing);o.select(this).attr("d",E).style("stroke-width",L.width).style("stroke",L.color).style("fill","none")}),T.exit().remove()}function a(v,m,c,b,g,w,_,T){var k=w.selectAll("text."+T).data(_);k.enter().append("text").classed(T,!0);var L=0,M={};return k.each(function(I,P){var S;if(I.axis.tickangle==="auto")S=e(b,m,c,I.xy,I.dxy);else{var E=(I.axis.tickangle+180)*Math.PI/180;S=e(b,m,c,I.xy,[Math.cos(E),Math.sin(E)])}P||(M={angle:S.angle,flip:S.flip});var D=(I.endAnchor?-1:1)*S.flip,F=o.select(this).attr({"text-anchor":D>0?"start":"end","data-notex":1}).call(p.font,I.font).text(I.text).call(r.convertToTspans,v),H=p.bBox(this);F.attr("transform",n(S.p[0],S.p[1])+i(S.angle)+n(I.axis.labelpadding*D,.3*H.height)),L=Math.max(L,H.width+I.axis.labelpadding)}),k.exit().remove(),M.maxExtent=L,M}q.exports=function(v,m,c,b){var g=m.xaxis,w=m.yaxis,_=v._fullLayout._clips;t.makeTraceGroups(b,c,"trace").each(function(T){var k=o.select(this),L=T[0],M=L.trace,I=M.aaxis,P=M.baxis,S=t.ensureSingle(k,"g","minorlayer"),E=t.ensureSingle(k,"g","majorlayer"),D=t.ensureSingle(k,"g","boundarylayer"),F=t.ensureSingle(k,"g","labellayer");k.style("opacity",M.opacity),s(g,w,E,I,"a",I._gridlines),s(g,w,E,P,"b",P._gridlines),s(g,w,S,I,"a",I._minorgridlines),s(g,w,S,P,"b",P._minorgridlines),s(g,w,D,I,"a-boundary",I._boundarylines),s(g,w,D,P,"b-boundary",P._boundarylines);var H=a(v,g,w,M,L,F,I._labels,"a-label"),V=a(v,g,w,M,L,F,P._labels,"b-label");(function(Q,K,Z,$,re,R,N,U){var te,j,Y,J,ee=t.aggNums(Math.min,null,Z.a),ne=t.aggNums(Math.max,null,Z.a),se=t.aggNums(Math.min,null,Z.b),oe=t.aggNums(Math.max,null,Z.b);te=.5*(ee+ne),j=se,Y=Z.ab2xy(te,j,!0),J=Z.dxyda_rough(te,j),N.angle===void 0&&t.extendFlat(N,e(Z,re,R,Y,Z.dxydb_rough(te,j))),d(Q,K,Z,$,Y,J,Z.aaxis,re,R,N,"a-title"),te=ee,j=.5*(se+oe),Y=Z.ab2xy(te,j,!0),J=Z.dxydb_rough(te,j),U.angle===void 0&&t.extendFlat(U,e(Z,re,R,Y,Z.dxyda_rough(te,j))),d(Q,K,Z,$,Y,J,Z.baxis,re,R,U,"b-title")})(v,F,M,L,g,w,H,V),function(Q,K,Z,$,re){var R,N,U,te,j=Z.select("#"+Q._clipPathId);j.size()||(j=Z.append("clipPath").classed("carpetclip",!0));var Y=t.ensureSingle(j,"path","carpetboundary"),J=K.clipsegments,ee=[];for(te=0;te<J.length;te++)R=J[te],N=x([],R.x,$.c2p),U=x([],R.y,re.c2p),ee.push(y(N,U,R.bicubic));var ne="M"+ee.join("L")+"Z";j.attr("id",Q._clipPathId),Y.attr("d",ne)}(M,L,_,g,w)})};var l=h.LINE_SPACING,f=(1-h.MID_SHIFT)/l+1;function d(v,m,c,b,g,w,_,T,k,L,M){var I=[];_.title.text&&I.push(_.title.text);var P=m.selectAll("text."+M).data(I),S=L.maxExtent;P.enter().append("text").classed(M,!0),P.each(function(){var E=e(c,T,k,g,w);["start","both"].indexOf(_.showticklabels)===-1&&(S=0);var D=_.title.font.size;S+=D+_.title.offset;var F=(L.angle+(L.flip<0?180:0)-E.angle+450)%360,H=F>90&&F<270,V=o.select(this);V.text(_.title.text).call(r.convertToTspans,v),H&&(S=(-r.lineCount(V)+f)*l*D-S),V.attr("transform",n(E.p[0],E.p[1])+i(E.angle)+n(0,S)).attr("text-anchor","middle").call(p.font,_.title.font)}),P.exit().remove()}},{"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"./makepath":709,"./map_1d_array":710,"./orient_text":711,"@plotly/d3":58}],713:[function(u,q,W){var o=u("./constants"),p=u("../../lib/search").findBin,x=u("./compute_control_points"),y=u("./create_spline_evaluator"),e=u("./create_i_derivative_evaluator"),r=u("./create_j_derivative_evaluator");q.exports=function(t){var i=t._a,n=t._b,h=i.length,s=n.length,a=t.aaxis,l=t.baxis,f=i[0],d=i[h-1],v=n[0],m=n[s-1],c=i[i.length-1]-i[0],b=n[n.length-1]-n[0],g=c*o.RELATIVE_CULL_TOLERANCE,w=b*o.RELATIVE_CULL_TOLERANCE;f-=g,d+=g,v-=w,m+=w,t.isVisible=function(_,T){return _>f&&_<d&&T>v&&T<m},t.isOccluded=function(_,T){return _<f||_>d||T<v||T>m},t.setScale=function(){var _=t._x,T=t._y,k=x(t._xctrl,t._yctrl,_,T,a.smoothing,l.smoothing);t._xctrl=k[0],t._yctrl=k[1],t.evalxy=y([t._xctrl,t._yctrl],h,s,a.smoothing,l.smoothing),t.dxydi=e([t._xctrl,t._yctrl],a.smoothing,l.smoothing),t.dxydj=r([t._xctrl,t._yctrl],a.smoothing,l.smoothing)},t.i2a=function(_){var T=Math.max(0,Math.floor(_[0]),h-2),k=_[0]-T;return(1-k)*i[T]+k*i[T+1]},t.j2b=function(_){var T=Math.max(0,Math.floor(_[1]),h-2),k=_[1]-T;return(1-k)*n[T]+k*n[T+1]},t.ij2ab=function(_){return[t.i2a(_[0]),t.j2b(_[1])]},t.a2i=function(_){var T=Math.max(0,Math.min(p(_,i),h-2)),k=i[T],L=i[T+1];return Math.max(0,Math.min(h-1,T+(_-k)/(L-k)))},t.b2j=function(_){var T=Math.max(0,Math.min(p(_,n),s-2)),k=n[T],L=n[T+1];return Math.max(0,Math.min(s-1,T+(_-k)/(L-k)))},t.ab2ij=function(_){return[t.a2i(_[0]),t.b2j(_[1])]},t.i2c=function(_,T){return t.evalxy([],_,T)},t.ab2xy=function(_,T,k){if(!k&&(_<i[0]||_>i[h-1]|T<n[0]||T>n[s-1]))return[!1,!1];var L=t.a2i(_),M=t.b2j(T),I=t.evalxy([],L,M);if(k){var P,S,E,D,F=0,H=0,V=[];_<i[0]?(P=0,S=0,F=(_-i[0])/(i[1]-i[0])):_>i[h-1]?(P=h-2,S=1,F=(_-i[h-1])/(i[h-1]-i[h-2])):S=L-(P=Math.max(0,Math.min(h-2,Math.floor(L)))),T<n[0]?(E=0,D=0,H=(T-n[0])/(n[1]-n[0])):T>n[s-1]?(E=s-2,D=1,H=(T-n[s-1])/(n[s-1]-n[s-2])):D=M-(E=Math.max(0,Math.min(s-2,Math.floor(M)))),F&&(t.dxydi(V,P,E,S,D),I[0]+=V[0]*F,I[1]+=V[1]*F),H&&(t.dxydj(V,P,E,S,D),I[0]+=V[0]*H,I[1]+=V[1]*H)}return I},t.c2p=function(_,T,k){return[T.c2p(_[0]),k.c2p(_[1])]},t.p2x=function(_,T,k){return[T.p2c(_[0]),k.p2c(_[1])]},t.dadi=function(_){var T=Math.max(0,Math.min(i.length-2,_));return i[T+1]-i[T]},t.dbdj=function(_){var T=Math.max(0,Math.min(n.length-2,_));return n[T+1]-n[T]},t.dxyda=function(_,T,k,L){var M=t.dxydi(null,_,T,k,L),I=t.dadi(_,k);return[M[0]/I,M[1]/I]},t.dxydb=function(_,T,k,L){var M=t.dxydj(null,_,T,k,L),I=t.dbdj(T,L);return[M[0]/I,M[1]/I]},t.dxyda_rough=function(_,T,k){var L=c*(k||.1),M=t.ab2xy(_+L,T,!0),I=t.ab2xy(_-L,T,!0);return[.5*(M[0]-I[0])/L,.5*(M[1]-I[1])/L]},t.dxydb_rough=function(_,T,k){var L=b*(k||.1),M=t.ab2xy(_,T+L,!0),I=t.ab2xy(_,T-L,!0);return[.5*(M[0]-I[0])/L,.5*(M[1]-I[1])/L]},t.dpdx=function(_){return _._m},t.dpdy=function(_){return _._m}}},{"../../lib/search":523,"./compute_control_points":701,"./constants":702,"./create_i_derivative_evaluator":703,"./create_j_derivative_evaluator":704,"./create_spline_evaluator":705}],714:[function(u,q,W){var o=u("../../lib");q.exports=function(p,x,y){var e,r,t,i=[],n=[],h=p[0].length,s=p.length;function a(K,Z){var $,re=0,R=0;return K>0&&($=p[Z][K-1])!==void 0&&(R++,re+=$),K<h-1&&($=p[Z][K+1])!==void 0&&(R++,re+=$),Z>0&&($=p[Z-1][K])!==void 0&&(R++,re+=$),Z<s-1&&($=p[Z+1][K])!==void 0&&(R++,re+=$),re/Math.max(1,R)}var l,f,d,v,m,c,b,g,w,_,T,k=0;for(e=0;e<h;e++)for(r=0;r<s;r++)p[r][e]===void 0&&(i.push(e),n.push(r),p[r][e]=a(e,r)),k=Math.max(k,Math.abs(p[r][e]));if(!i.length)return p;var L=0,M=0,I=i.length;do{for(L=0,t=0;t<I;t++){e=i[t],r=n[t];var P,S,E,D,F,H,V=0,Q=0;e===0?(E=x[F=Math.min(h-1,2)],D=x[1],P=p[r][F],Q+=(S=p[r][1])+(S-P)*(x[0]-D)/(D-E),V++):e===h-1&&(E=x[F=Math.max(0,h-3)],D=x[h-2],P=p[r][F],Q+=(S=p[r][h-2])+(S-P)*(x[h-1]-D)/(D-E),V++),(e===0||e===h-1)&&r>0&&r<s-1&&(l=y[r+1]-y[r],Q+=((f=y[r]-y[r-1])*p[r+1][e]+l*p[r-1][e])/(f+l),V++),r===0?(E=y[H=Math.min(s-1,2)],D=y[1],P=p[H][e],Q+=(S=p[1][e])+(S-P)*(y[0]-D)/(D-E),V++):r===s-1&&(E=y[H=Math.max(0,s-3)],D=y[s-2],P=p[H][e],Q+=(S=p[s-2][e])+(S-P)*(y[s-1]-D)/(D-E),V++),(r===0||r===s-1)&&e>0&&e<h-1&&(l=x[e+1]-x[e],Q+=((f=x[e]-x[e-1])*p[r][e+1]+l*p[r][e-1])/(f+l),V++),V?Q/=V:(d=x[e+1]-x[e],v=x[e]-x[e-1],g=(m=y[r+1]-y[r])*(c=y[r]-y[r-1])*(m+c),Q=((b=d*v*(d+v))*(c*p[r+1][e]+m*p[r-1][e])+g*(v*p[r][e+1]+d*p[r][e-1]))/(g*(v+d)+b*(c+m))),L+=(_=(w=Q-p[r][e])/k)*_,T=V?0:.85,p[r][e]+=w*(1+T)}L=Math.sqrt(L)}while(M++<100&&L>1e-5);return o.log("Smoother converged to",L,"after",M,"iterations"),p}},{"../../lib":503}],715:[function(u,q,W){var o=u("../../lib").isArray1D;q.exports=function(p,x,y){var e=y("x"),r=e&&e.length,t=y("y"),i=t&&t.length;if(!r&&!i)return!1;if(x._cheater=!e,r&&!o(e)||i&&!o(t))x._length=null;else{var n=r?e.length:1/0;i&&(n=Math.min(n,t.length)),x.a&&x.a.length&&(n=Math.min(n,x.a.length)),x.b&&x.b.length&&(n=Math.min(n,x.b.length)),x._length=n}return!0}},{"../../lib":503}],716:[function(u,q,W){var o=u("../../plots/template_attributes").hovertemplateAttrs,p=u("../scattergeo/attributes"),x=u("../../components/colorscale/attributes"),y=u("../../plots/attributes"),e=u("../../components/color/attributes").defaultLine,r=u("../../lib/extend").extendFlat,t=p.marker.line;q.exports=r({locations:{valType:"data_array",editType:"calc"},locationmode:p.locationmode,z:{valType:"data_array",editType:"calc"},geojson:r({},p.geojson,{}),featureidkey:p.featureidkey,text:r({},p.text,{}),hovertext:r({},p.hovertext,{}),marker:{line:{color:r({},t.color,{dflt:e}),width:r({},t.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:p.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:p.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:r({},y.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:o(),showlegend:r({},y.showlegend,{dflt:!1})},x("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattergeo/attributes":968}],717:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../constants/numerical").BADNUM,x=u("../../components/colorscale/calc"),y=u("../scatter/arrays_to_calcdata"),e=u("../scatter/calc_selection");function r(t){return t&&typeof t=="string"}q.exports=function(t,i){var n,h=i._length,s=new Array(h);n=i.geojson?function(v){return r(v)||o(v)}:r;for(var a=0;a<h;a++){var l=s[a]={},f=i.locations[a],d=i.z[a];n(f)&&o(d)?(l.loc=f,l.z=d):(l.loc=null,l.z=p),l.index=a}return y(s,i),x(t,i,{vals:i.z,containerStr:"",cLetter:"z"}),e(s,i),s}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../scatter/arrays_to_calcdata":925,"../scatter/calc_selection":928,"fast-isnumeric":190}],718:[function(u,q,W){var o=u("../../lib"),p=u("../../components/colorscale/defaults"),x=u("./attributes");q.exports=function(y,e,r,t){function i(l,f){return o.coerce(y,e,x,l,f)}var n=i("locations"),h=i("z");if(n&&n.length&&o.isArrayOrTypedArray(h)&&h.length){e._length=Math.min(n.length,h.length);var s,a=i("geojson");(typeof a=="string"&&a!==""||o.isPlainObject(a))&&(s="geojson-id"),i("locationmode",s)==="geojson-id"&&i("featureidkey"),i("text"),i("hovertext"),i("hovertemplate"),i("marker.line.width")&&i("marker.line.color"),i("marker.opacity"),p(y,e,t,i,{prefix:"",cLetter:"z"}),o.coerceSelectionMarkerOpacity(e,i)}else e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":716}],719:[function(u,q,W){q.exports=function(o,p,x,y,e){o.location=p.location,o.z=p.z;var r=y[e];return r.fIn&&r.fIn.properties&&(o.properties=r.fIn.properties),o.ct=r.ct,o}},{}],720:[function(u,q,W){var o=u("../../plots/cartesian/axes"),p=u("./attributes"),x=u("../../lib").fillText;q.exports=function(y,e,r){var t,i,n,h,s=y.cd,a=s[0].trace,l=y.subplot,f=[e,r],d=[e+360,r];for(i=0;i<s.length;i++)if(h=!1,(t=s[i])._polygons){for(n=0;n<t._polygons.length;n++)t._polygons[n].contains(f)&&(h=!h),t._polygons[n].contains(d)&&(h=!h);if(h)break}if(h&&t)return y.x0=y.x1=y.xa.c2p(t.ct),y.y0=y.y1=y.ya.c2p(t.ct),y.index=t.index,y.location=t.loc,y.z=t.z,y.zLabel=o.tickText(l.mockAxis,l.mockAxis.c2l(t.z),"hover").text,y.hovertemplate=t.hovertemplate,function(v,m,c){if(!m.hovertemplate){var b=c.hi||m.hoverinfo,g=String(c.loc),w=b==="all"?p.hoverinfo.flags:b.split("+"),_=w.indexOf("name")!==-1,T=w.indexOf("location")!==-1,k=w.indexOf("z")!==-1,L=w.indexOf("text")!==-1,M=[];!_&&T?v.nameOverride=g:(_&&(v.nameOverride=m.name),T&&M.push(g)),k&&M.push(v.zLabel),L&&x(c,m,M),v.extraText=M.join("<br>")}}(y,a,t),[y]}},{"../../lib":503,"../../plots/cartesian/axes":554,"./attributes":716}],721:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults"),colorbar:u("../heatmap/colorbar"),calc:u("./calc"),calcGeoJSON:u("./plot").calcGeoJSON,plot:u("./plot").plot,style:u("./style").style,styleOnSelect:u("./style").styleOnSelect,hoverPoints:u("./hover"),eventData:u("./event_data"),selectPoints:u("./select"),moduleType:"trace",name:"choropleth",basePlotModule:u("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":589,"../heatmap/colorbar":795,"./attributes":716,"./calc":717,"./defaults":718,"./event_data":719,"./hover":720,"./plot":722,"./select":723,"./style":724}],722:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../lib"),x=u("../../lib/geo_location_utils"),y=u("../../lib/topojson_utils").getTopojsonFeatures,e=u("../../plots/cartesian/autorange").findExtremes,r=u("./style").style;q.exports={calcGeoJSON:function(t,i){for(var n=t[0].trace,h=i[n.geo],s=h._subplot,a=n.locationmode,l=n._length,f=a==="geojson-id"?x.extractTraceFeature(t):y(n,s.topojson),d=[],v=[],m=0;m<l;m++){var c=t[m],b=a==="geojson-id"?c.fOut:x.locationToFeature(a,c.loc,f);if(b){c.geojson=b,c.ct=b.properties.ct,c._polygons=x.feature2polygons(b);var g=x.computeBbox(b);d.push(g[0],g[2]),v.push(g[1],g[3])}else c.geojson=null}if(h.fitbounds==="geojson"&&a==="geojson-id"){var w=x.computeBbox(x.getTraceGeojson(n));d=[w[0],w[2]],v=[w[1],w[3]]}var _={padded:!0};n._extremes.lon=e(h.lonaxis._ax,d,_),n._extremes.lat=e(h.lataxis._ax,v,_)},plot:function(t,i,n){var h=i.layers.backplot.select(".choroplethlayer");p.makeTraceGroups(h,n,"trace choropleth").each(function(s){var a=o.select(this).selectAll("path.choroplethlocation").data(p.identity);a.enter().append("path").classed("choroplethlocation",!0),a.exit().remove(),r(t,s)})}}},{"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"./style":724,"@plotly/d3":58}],723:[function(u,q,W){q.exports=function(o,p){var x,y,e,r,t,i=o.cd,n=o.xaxis,h=o.yaxis,s=[];if(p===!1)for(x=0;x<i.length;x++)i[x].selected=0;else for(x=0;x<i.length;x++)(e=(y=i[x]).ct)&&(r=n.c2p(e),t=h.c2p(e),p.contains([r,t],null,x,o)?(s.push({pointNumber:x,lon:e[0],lat:e[1]}),y.selected=1):y.selected=0);return s}},{}],724:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../components/color"),x=u("../../components/drawing"),y=u("../../components/colorscale");function e(r,t){var i=t[0].trace,n=t[0].node3.selectAll(".choroplethlocation"),h=i.marker||{},s=h.line||{},a=y.makeColorScaleFuncFromTrace(i);n.each(function(l){o.select(this).attr("fill",a(l.z)).call(p.stroke,l.mlc||s.color).call(x.dashLine,"",l.mlw||s.width||0).style("opacity",h.opacity)}),x.selectedPointStyle(n,i,r)}q.exports={style:function(r,t){t&&e(r,t)},styleOnSelect:function(r,t){var i=t[0].node3,n=t[0].trace;n.selectedpoints?x.selectedPointStyle(i.selectAll(".choroplethlocation"),n,r):e(r,t)}}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"@plotly/d3":58}],725:[function(u,q,W){var o=u("../choropleth/attributes"),p=u("../../components/colorscale/attributes"),x=u("../../plots/template_attributes").hovertemplateAttrs,y=u("../../plots/attributes"),e=u("../../lib/extend").extendFlat;q.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},o.featureidkey,{}),below:{valType:"string",editType:"plot"},text:o.text,hovertext:o.hovertext,marker:{line:{color:e({},o.marker.line.color,{editType:"plot"}),width:e({},o.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},o.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},o.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},o.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:o.hoverinfo,hovertemplate:x({},{keys:["properties"]}),showlegend:e({},y.showlegend,{dflt:!1})},p("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../choropleth/attributes":716}],726:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../lib"),x=u("../../components/colorscale"),y=u("../../components/drawing"),e=u("../../lib/geojson_utils").makeBlank,r=u("../../lib/geo_location_utils");function t(i){var n,h=i[0].trace,s=h._opts;if(h.selectedpoints){for(var a=y.makeSelectedPointStyleFns(h),l=0;l<i.length;l++){var f=i[l];f.fOut&&(f.fOut.properties.mo2=a.selectedOpacityFn(f))}n={type:"identity",property:"mo2"}}else n=p.isArrayOrTypedArray(h.marker.opacity)?{type:"identity",property:"mo"}:h.marker.opacity;return p.extendFlat(s.fill.paint,{"fill-opacity":n}),p.extendFlat(s.line.paint,{"line-opacity":n}),s}q.exports={convert:function(i){var n=i[0].trace,h=n.visible===!0&&n._length!==0,s={layout:{visibility:"none"},paint:{}},a={layout:{visibility:"none"},paint:{}},l=n._opts={fill:s,line:a,geojson:e()};if(!h)return l;var f=r.extractTraceFeature(i);if(!f)return l;var d,v,m,c=x.makeColorScaleFuncFromTrace(n),b=n.marker,g=b.line||{};p.isArrayOrTypedArray(b.opacity)&&(d=function(M){var I=M.mo;return o(I)?+p.constrain(I,0,1):0}),p.isArrayOrTypedArray(g.color)&&(v=function(M){return M.mlc}),p.isArrayOrTypedArray(g.width)&&(m=function(M){return M.mlw});for(var w=0;w<i.length;w++){var _=i[w],T=_.fOut;if(T){var k=T.properties;k.fc=c(_.z),d&&(k.mo=d(_)),v&&(k.mlc=v(_)),m&&(k.mlw=m(_)),_.ct=k.ct,_._polygons=r.feature2polygons(T)}}var L=d?{type:"identity",property:"mo"}:b.opacity;return p.extendFlat(s.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":L}),p.extendFlat(a.paint,{"line-color":v?{type:"identity",property:"mlc"}:g.color,"line-width":m?{type:"identity",property:"mlw"}:g.width,"line-opacity":L}),s.layout.visibility="visible",a.layout.visibility="visible",l.geojson={type:"FeatureCollection",features:f},t(i),l},convertOnSelect:t}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"fast-isnumeric":190}],727:[function(u,q,W){var o=u("../../lib"),p=u("../../components/colorscale/defaults"),x=u("./attributes");q.exports=function(y,e,r,t){function i(a,l){return o.coerce(y,e,x,a,l)}var n=i("locations"),h=i("z"),s=i("geojson");o.isArrayOrTypedArray(n)&&n.length&&o.isArrayOrTypedArray(h)&&h.length&&(typeof s=="string"&&s!==""||o.isPlainObject(s))?(i("featureidkey"),e._length=Math.min(n.length,h.length),i("below"),i("text"),i("hovertext"),i("hovertemplate"),i("marker.line.width")&&i("marker.line.color"),i("marker.opacity"),p(y,e,t,i,{prefix:"",cLetter:"z"}),o.coerceSelectionMarkerOpacity(e,i)):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":725}],728:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults"),colorbar:u("../heatmap/colorbar"),calc:u("../choropleth/calc"),plot:u("./plot"),hoverPoints:u("../choropleth/hover"),eventData:u("../choropleth/event_data"),selectPoints:u("../choropleth/select"),styleOnSelect:function(o,p){p&&p[0].trace._glTrace.updateOnSelect(p)},getBelow:function(o,p){for(var x=p.getMapLayers(),y=x.length-2;y>=0;y--){var e=x[y].id;if(typeof e=="string"&&e.indexOf("water")===0){for(var r=y+1;r<x.length;r++)if(typeof(e=x[r].id)=="string"&&e.indexOf("plotly-")===-1)return e}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:u("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":613,"../choropleth/calc":717,"../choropleth/event_data":719,"../choropleth/hover":720,"../choropleth/select":723,"../heatmap/colorbar":795,"./attributes":725,"./defaults":727,"./plot":729}],729:[function(u,q,W){var o=u("./convert").convert,p=u("./convert").convertOnSelect,x=u("../../plots/mapbox/constants").traceLayerPrefix;function y(r,t){this.type="choroplethmapbox",this.subplot=r,this.uid=t,this.sourceId="source-"+t,this.layerList=[["fill",x+t+"-fill"],["line",x+t+"-line"]],this.below=null}var e=y.prototype;e.update=function(r){this._update(o(r))},e.updateOnSelect=function(r){this._update(p(r))},e._update=function(r){var t=this.subplot,i=this.layerList,n=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(r.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(r,n),this.below=n);for(var h=0;h<i.length;h++){var s=i[h],a=s[0],l=s[1],f=r[a];t.setOptions(l,"setLayoutProperty",f.layout),f.layout.visibility==="visible"&&t.setOptions(l,"setPaintProperty",f.paint)}},e._addLayers=function(r,t){for(var i=this.subplot,n=this.layerList,h=this.sourceId,s=0;s<n.length;s++){var a=n[s],l=a[0],f=r[l];i.addLayer({type:l,id:a[1],source:h,layout:f.layout,paint:f.paint},t)}},e._removeLayers=function(){for(var r=this.subplot.map,t=this.layerList,i=t.length-1;i>=0;i--)r.removeLayer(t[i][1])},e.dispose=function(){var r=this.subplot.map;this._removeLayers(),r.removeSource(this.sourceId)},q.exports=function(r,t){var i=t[0].trace,n=new y(r,i.uid),h=n.sourceId,s=o(t),a=n.below=r.belowLookup["trace-"+i.uid];return r.map.addSource(h,{type:"geojson",data:s.geojson}),n._addLayers(s,a),t[0].trace._glTrace=n,n}},{"../../plots/mapbox/constants":611,"./convert":726}],730:[function(u,q,W){var o=u("../../components/colorscale/attributes"),p=u("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=u("../../plots/template_attributes").hovertemplateAttrs,y=u("../mesh3d/attributes"),e=u("../../plots/attributes"),r=u("../../lib/extend").extendFlat,t={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:x({editType:"calc"},{keys:["norm"]}),uhoverformat:p("u",1),vhoverformat:p("v",1),whoverformat:p("w",1),xhoverformat:p("x"),yhoverformat:p("y"),zhoverformat:p("z"),showlegend:r({},e.showlegend,{dflt:!1})};r(t,o("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(i){t[i]=y[i]}),t.hoverinfo=r({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),t.transforms=void 0,q.exports=t},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],731:[function(u,q,W){var o=u("../../components/colorscale/calc");q.exports=function(p,x){for(var y=x.u,e=x.v,r=x.w,t=Math.min(x.x.length,x.y.length,x.z.length,y.length,e.length,r.length),i=-1/0,n=1/0,h=0;h<t;h++){var s=y[h],a=e[h],l=r[h],f=Math.sqrt(s*s+a*a+l*l);i=Math.max(i,f),n=Math.min(n,f)}x._len=t,x._normMax=i,o(p,x,{vals:[n,i],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],732:[function(u,q,W){var o=u("../../../stackgl_modules").gl_cone3d,p=u("../../../stackgl_modules").gl_cone3d.createConeMesh,x=u("../../lib").simpleMap,y=u("../../lib/gl_format_color").parseColorScale,e=u("../../components/colorscale").extractOpts,r=u("../../plots/gl3d/zip3");function t(l,f){this.scene=l,this.uid=f,this.mesh=null,this.data=null}var i=t.prototype;i.handlePick=function(l){if(l.object===this.mesh){var f=l.index=l.data.index,d=this.data.x[f],v=this.data.y[f],m=this.data.z[f],c=this.data.u[f],b=this.data.v[f],g=this.data.w[f];l.traceCoordinate=[d,v,m,c,b,g,Math.sqrt(c*c+b*b+g*g)];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&w[f]!==void 0?l.textLabel=w[f]:w&&(l.textLabel=w),!0}};var n={xaxis:0,yaxis:1,zaxis:2},h={tip:1,tail:0,cm:.25,center:.5},s={tip:1,tail:1,cm:.75,center:.5};function a(l,f){var d=l.fullSceneLayout,v=l.dataScale,m={};function c(_,T){var k=d[T],L=v[n[T]];return x(_,function(M){return k.d2l(M)*L})}m.vectors=r(c(f.u,"xaxis"),c(f.v,"yaxis"),c(f.w,"zaxis"),f._len),m.positions=r(c(f.x,"xaxis"),c(f.y,"yaxis"),c(f.z,"zaxis"),f._len);var b=e(f);m.colormap=y(f),m.vertexIntensityBounds=[b.min/f._normMax,b.max/f._normMax],m.coneOffset=h[f.anchor],f.sizemode==="scaled"?m.coneSize=f.sizeref||.5:m.coneSize=f.sizeref&&f._normMax?f.sizeref/f._normMax:.5;var g=o(m),w=f.lightposition;return g.lightPosition=[w.x,w.y,w.z],g.ambient=f.lighting.ambient,g.diffuse=f.lighting.diffuse,g.specular=f.lighting.specular,g.roughness=f.lighting.roughness,g.fresnel=f.lighting.fresnel,g.opacity=f.opacity,f._pad=s[f.anchor]*g.vectorScale*g.coneScale*f._normMax,g}i.update=function(l){this.data=l;var f=a(this.scene,l);this.mesh.update(f)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},q.exports=function(l,f){var d=l.glplot.gl,v=a(l,f),m=p(d,v),c=new t(l,f.uid);return c.mesh=m,c.data=f,m._trace=c,l.glplot.add(m),c}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],733:[function(u,q,W){var o=u("../../lib"),p=u("../../components/colorscale/defaults"),x=u("./attributes");q.exports=function(y,e,r,t){function i(d,v){return o.coerce(y,e,x,d,v)}var n=i("u"),h=i("v"),s=i("w"),a=i("x"),l=i("y"),f=i("z");n&&n.length&&h&&h.length&&s&&s.length&&a&&a.length&&l&&l.length&&f&&f.length?(i("sizeref"),i("sizemode"),i("anchor"),i("lighting.ambient"),i("lighting.diffuse"),i("lighting.specular"),i("lighting.roughness"),i("lighting.fresnel"),i("lightposition.x"),i("lightposition.y"),i("lightposition.z"),p(y,e,t,i,{prefix:"",cLetter:"c"}),i("text"),i("hovertext"),i("hovertemplate"),i("uhoverformat"),i("vhoverformat"),i("whoverformat"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":730}],734:[function(u,q,W){q.exports={moduleType:"trace",name:"cone",basePlotModule:u("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:u("./attributes"),supplyDefaults:u("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:u("./calc"),plot:u("./convert"),eventData:function(o,p){return o.norm=p.traceCoordinate[6],o},meta:{}}},{"../../plots/gl3d":598,"./attributes":730,"./calc":731,"./convert":732,"./defaults":733}],735:[function(u,q,W){var o=u("../heatmap/attributes"),p=u("../scatter/attributes"),x=u("../../plots/cartesian/axis_format_attributes"),y=x.axisHoverFormat,e=x.descriptionOnlyNumbers,r=u("../../components/colorscale/attributes"),t=u("../../components/drawing/attributes").dash,i=u("../../plots/font_attributes"),n=u("../../lib/extend").extendFlat,h=u("../../constants/filter_ops"),s=h.COMPARISON_OPS2,a=h.INTERVAL_OPS,l=p.line;q.exports=n({z:o.z,x:o.x,x0:o.x0,dx:o.dx,y:o.y,y0:o.y0,dy:o.dy,xperiod:o.xperiod,yperiod:o.yperiod,xperiod0:p.xperiod0,yperiod0:p.yperiod0,xperiodalignment:o.xperiodalignment,yperiodalignment:o.yperiodalignment,text:o.text,hovertext:o.hovertext,transpose:o.transpose,xtype:o.xtype,ytype:o.ytype,xhoverformat:y("x"),yhoverformat:y("y"),zhoverformat:y("z",1),hovertemplate:o.hovertemplate,texttemplate:n({},o.texttemplate,{}),textfont:n({},o.textfont,{}),hoverongaps:o.hoverongaps,connectgaps:n({},o.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:i({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(s).concat(a),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:n({},l.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:t,smoothing:n({},l.smoothing,{}),editType:"plot"}},r("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../constants/filter_ops":475,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../heatmap/attributes":792,"../scatter/attributes":926}],736:[function(u,q,W){var o=u("../../components/colorscale"),p=u("../heatmap/calc"),x=u("./set_contours"),y=u("./end_plus");q.exports=function(e,r){var t=p(e,r),i=t[0].z;x(r,i);var n,h=r.contours,s=o.extractOpts(r);if(h.coloring==="heatmap"&&s.auto&&r.autocontour===!1){var a=h.start,l=y(h),f=h.size||1,d=Math.floor((l-a)/f)+1;isFinite(f)||(f=1,d=1);var v=a-f/2;n=[v,v+d*f]}else n=i;return o.calc(e,r,{vals:n,cLetter:"z"}),t}},{"../../components/colorscale":378,"../heatmap/calc":793,"./end_plus":746,"./set_contours":754}],737:[function(u,q,W){q.exports=function(o,p){var x,y=o[0],e=y.z;switch(p.type){case"levels":var r=Math.min(e[0][0],e[0][1]);for(x=0;x<o.length;x++){var t=o[x];t.prefixBoundary=!t.edgepaths.length&&(r>t.level||t.starts.length&&r===t.level)}break;case"constraint":if(y.prefixBoundary=!1,y.edgepaths.length)return;var i=y.x.length,n=y.y.length,h=-1/0,s=1/0;for(x=0;x<n;x++)s=Math.min(s,e[x][0]),s=Math.min(s,e[x][i-1]),h=Math.max(h,e[x][0]),h=Math.max(h,e[x][i-1]);for(x=1;x<i-1;x++)s=Math.min(s,e[0][x]),s=Math.min(s,e[n-1][x]),h=Math.max(h,e[0][x]),h=Math.max(h,e[n-1][x]);var a,l,f=p.value;switch(p._operation){case">":f>h&&(y.prefixBoundary=!0);break;case"<":(f<s||y.starts.length&&f===s)&&(y.prefixBoundary=!0);break;case"[]":a=Math.min(f[0],f[1]),((l=Math.max(f[0],f[1]))<s||a>h||y.starts.length&&l===s)&&(y.prefixBoundary=!0);break;case"][":a=Math.min(f[0],f[1]),l=Math.max(f[0],f[1]),a<s&&l>h&&(y.prefixBoundary=!0)}}}},{}],738:[function(u,q,W){var o=u("../../components/colorscale"),p=u("./make_color_map"),x=u("./end_plus");q.exports={min:"zmin",max:"zmax",calc:function(y,e,r){var t=e.contours,i=e.line,n=t.size||1,h=t.coloring,s=p(e,{isColorbar:!0});if(h==="heatmap"){var a=o.extractOpts(e);r._fillgradient=a.reversescale?o.flipScale(a.colorscale):a.colorscale,r._zrange=[a.min,a.max]}else h==="fill"&&(r._fillcolor=s);r._line={color:h==="lines"?s:i.color,width:t.showlines!==!1?i.width:0,dash:i.dash},r._levels={start:t.start,end:x(t),size:n}}}},{"../../components/colorscale":378,"./end_plus":746,"./make_color_map":751}],739:[function(u,q,W){q.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],740:[function(u,q,W){var o=u("fast-isnumeric"),p=u("./label_defaults"),x=u("../../components/color"),y=x.addOpacity,e=x.opacity,r=u("../../constants/filter_ops"),t=r.CONSTRAINT_REDUCTION,i=r.COMPARISON_OPS2;q.exports=function(n,h,s,a,l,f){var d,v,m,c=h.contours,b=s("contours.operation");c._operation=t[b],function(g,w){var _;i.indexOf(w.operation)===-1?(g("contours.value",[0,1]),Array.isArray(w.value)?w.value.length>2?w.value=w.value.slice(2):w.length===0?w.value=[0,1]:w.length<2?(_=parseFloat(w.value[0]),w.value=[_,_+1]):w.value=[parseFloat(w.value[0]),parseFloat(w.value[1])]:o(w.value)&&(_=parseFloat(w.value),w.value=[_,_+1])):(g("contours.value",0),o(w.value)||(Array.isArray(w.value)?w.value=parseFloat(w.value[0]):w.value=0))}(s,c),b==="="?d=c.showlines=!0:(d=s("contours.showlines"),m=s("fillcolor",y((n.line||{}).color||l,.5))),d&&(v=s("line.color",m&&e(m)?y(h.fillcolor,1):l),s("line.width",2),s("line.dash")),s("line.smoothing"),p(s,a,v,f)}},{"../../components/color":366,"../../constants/filter_ops":475,"./label_defaults":750,"fast-isnumeric":190}],741:[function(u,q,W){var o=u("../../constants/filter_ops"),p=u("fast-isnumeric");function x(r,t){var i,n=Array.isArray(t);function h(s){return p(s)?+s:null}return o.COMPARISON_OPS2.indexOf(r)!==-1?i=h(n?t[0]:t):o.INTERVAL_OPS.indexOf(r)!==-1?i=n?[h(t[0]),h(t[1])]:[h(t),h(t)]:o.SET_OPS.indexOf(r)!==-1&&(i=n?t.map(h):[h(t)]),i}function y(r){return function(t){t=x(r,t);var i=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]);return{start:i,end:n,size:n-i}}}function e(r){return function(t){return{start:t=x(r,t),end:1/0,size:1/0}}}q.exports={"[]":y("[]"),"][":y("]["),">":e(">"),"<":e("<"),"=":e("=")}},{"../../constants/filter_ops":475,"fast-isnumeric":190}],742:[function(u,q,W){q.exports=function(o,p,x,y){var e=y("contours.start"),r=y("contours.end"),t=e===!1||r===!1,i=x("contours.size");!(t?p.autocontour=!0:x("autocontour",!1))&&i||x("ncontours")}},{}],743:[function(u,q,W){var o=u("../../lib");function p(x){return o.extendFlat({},x,{edgepaths:o.extendDeep([],x.edgepaths),paths:o.extendDeep([],x.paths),starts:o.extendDeep([],x.starts)})}q.exports=function(x,y){var e,r,t,i=function(s){return s.reverse()},n=function(s){return s};switch(y){case"=":case"<":return x;case">":for(x.length!==1&&o.warn("Contour data invalid for the specified inequality operation."),r=x[0],e=0;e<r.edgepaths.length;e++)r.edgepaths[e]=i(r.edgepaths[e]);for(e=0;e<r.paths.length;e++)r.paths[e]=i(r.paths[e]);for(e=0;e<r.starts.length;e++)r.starts[e]=i(r.starts[e]);return x;case"][":var h=i;i=n,n=h;case"[]":for(x.length!==2&&o.warn("Contour data invalid for the specified inequality range operation."),r=p(x[0]),t=p(x[1]),e=0;e<r.edgepaths.length;e++)r.edgepaths[e]=i(r.edgepaths[e]);for(e=0;e<r.paths.length;e++)r.paths[e]=i(r.paths[e]);for(e=0;e<r.starts.length;e++)r.starts[e]=i(r.starts[e]);for(;t.edgepaths.length;)r.edgepaths.push(n(t.edgepaths.shift()));for(;t.paths.length;)r.paths.push(n(t.paths.shift()));for(;t.starts.length;)r.starts.push(n(t.starts.shift()));return[r]}}},{"../../lib":503}],744:[function(u,q,W){var o=u("../../lib"),p=u("../heatmap/xyz_defaults"),x=u("../scatter/period_defaults"),y=u("./constraint_defaults"),e=u("./contours_defaults"),r=u("./style_defaults"),t=u("../heatmap/label_defaults"),i=u("./attributes");q.exports=function(n,h,s,a){function l(d,v){return o.coerce(n,h,i,d,v)}if(p(n,h,l,a)){x(n,h,a,l),l("xhoverformat"),l("yhoverformat"),l("text"),l("hovertext"),l("hoverongaps"),l("hovertemplate");var f=l("contours.type")==="constraint";l("connectgaps",o.isArray1D(h.z)),f?y(n,h,l,a,s):(e(n,h,l,function(d){return o.coerce2(n,h,i,d)}),r(n,h,l,a)),h.contours&&h.contours.coloring==="heatmap"&&t(l,a)}else h.visible=!1}},{"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/xyz_defaults":807,"../scatter/period_defaults":946,"./attributes":735,"./constraint_defaults":740,"./contours_defaults":742,"./style_defaults":756}],745:[function(u,q,W){var o=u("../../lib"),p=u("./constraint_mapping"),x=u("./end_plus");q.exports=function(y,e,r){for(var t=y.type==="constraint"?p[y._operation](y.value):y,i=t.size,n=[],h=x(t),s=r.trace._carpetTrace,a=s?{xaxis:s.aaxis,yaxis:s.baxis,x:r.a,y:r.b}:{xaxis:e.xaxis,yaxis:e.yaxis,x:r.x,y:r.y},l=t.start;l<h;l+=i)if(n.push(o.extendFlat({level:l,crossings:{},starts:[],edgepaths:[],paths:[],z:r.z,smoothing:r.trace.line.smoothing},a)),n.length>1e3){o.warn("Too many contours, clipping at 1000",y);break}return n}},{"../../lib":503,"./constraint_mapping":741,"./end_plus":746}],746:[function(u,q,W){q.exports=function(o){return o.end+o.size/1e6}},{}],747:[function(u,q,W){var o=u("../../lib"),p=u("./constants");function x(r,t,i,n){return Math.abs(r[0]-t[0])<i&&Math.abs(r[1]-t[1])<n}function y(r,t,i,n,h){var s,a=t.join(","),l=r.crossings[a],f=function(Y,J,ee){var ne=0,se=0;return Y>20&&J?Y===208||Y===1114?ne=ee[0]===0?1:-1:se=ee[1]===0?1:-1:p.BOTTOMSTART.indexOf(Y)!==-1?se=1:p.LEFTSTART.indexOf(Y)!==-1?ne=1:p.TOPSTART.indexOf(Y)!==-1?se=-1:ne=-1,[ne,se]}(l,i,t),d=[e(r,t,[-f[0],-f[1]])],v=r.z.length,m=r.z[0].length,c=t.slice(),b=f.slice();for(s=0;s<1e4;s++){if(l>20?(l=p.CHOOSESADDLE[l][(f[0]||f[1])<0?0:1],r.crossings[a]=p.SADDLEREMAINDER[l]):delete r.crossings[a],!(f=p.NEWDELTA[l])){o.log("Found bad marching index:",l,t,r.level);break}d.push(e(r,t,f)),t[0]+=f[0],t[1]+=f[1],a=t.join(","),x(d[d.length-1],d[d.length-2],n,h)&&d.pop();var g=f[0]&&(t[0]<0||t[0]>m-2)||f[1]&&(t[1]<0||t[1]>v-2);if(t[0]===c[0]&&t[1]===c[1]&&f[0]===b[0]&&f[1]===b[1]||i&&g)break;l=r.crossings[a]}s===1e4&&o.log("Infinite loop in contour?");var w,_,T,k,L,M,I,P,S,E,D,F,H,V,Q,K=x(d[0],d[d.length-1],n,h),Z=0,$=.2*r.smoothing,re=[],R=0;for(s=1;s<d.length;s++)F=d[s],H=d[s-1],V=void 0,Q=void 0,V=F[2]-H[2],Q=F[3]-H[3],Z+=I=Math.sqrt(V*V+Q*Q),re.push(I);var N=Z/re.length*$;function U(Y){return d[Y%d.length]}for(s=d.length-2;s>=R;s--)if((w=re[s])<N){for(T=0,_=s-1;_>=R&&w+re[_]<N;_--)w+=re[_];if(K&&s===d.length-2)for(T=0;T<_&&w+re[T]<N;T++)w+=re[T];L=s-_+T+1,M=Math.floor((s+_+T+2)/2),k=K||s!==d.length-2?K||_!==-1?L%2?U(M):[(U(M)[0]+U(M+1)[0])/2,(U(M)[1]+U(M+1)[1])/2]:d[0]:d[d.length-1],d.splice(_+1,s-_+1,k),s=_+1,T&&(R=T),K&&(s===d.length-2?d[T]=d[d.length-1]:s===0&&(d[d.length-1]=d[0]))}for(d.splice(0,R),s=0;s<d.length;s++)d[s].length=2;if(!(d.length<2))if(K)d.pop(),r.paths.push(d);else{i||o.log("Unclosed interior contour?",r.level,c.join(","),d.join("L"));var te=!1;for(P=0;P<r.edgepaths.length;P++)if(E=r.edgepaths[P],!te&&x(E[0],d[d.length-1],n,h)){d.pop(),te=!0;var j=!1;for(S=0;S<r.edgepaths.length;S++)if(x((D=r.edgepaths[S])[D.length-1],d[0],n,h)){j=!0,d.shift(),r.edgepaths.splice(P,1),S===P?r.paths.push(d.concat(D)):(S>P&&S--,r.edgepaths[S]=D.concat(d,E));break}j||(r.edgepaths[P]=d.concat(E))}for(P=0;P<r.edgepaths.length&&!te;P++)x((E=r.edgepaths[P])[E.length-1],d[0],n,h)&&(d.shift(),r.edgepaths[P]=E.concat(d),te=!0);te||r.edgepaths.push(d)}}function e(r,t,i){var n=t[0]+Math.max(i[0],0),h=t[1]+Math.max(i[1],0),s=r.z[h][n],a=r.xaxis,l=r.yaxis;if(i[1]){var f=(r.level-s)/(r.z[h][n+1]-s),d=(f!==1?(1-f)*a.c2l(r.x[n]):0)+(f!==0?f*a.c2l(r.x[n+1]):0);return[a.c2p(a.l2c(d),!0),l.c2p(r.y[h],!0),n+f,h]}var v=(r.level-s)/(r.z[h+1][n]-s),m=(v!==1?(1-v)*l.c2l(r.y[h]):0)+(v!==0?v*l.c2l(r.y[h+1]):0);return[a.c2p(r.x[n],!0),l.c2p(l.l2c(m),!0),n,h+v]}q.exports=function(r,t,i){var n,h,s,a;for(t=t||.01,i=i||.01,h=0;h<r.length;h++){for(s=r[h],a=0;a<s.starts.length;a++)y(s,s.starts[a],"edge",t,i);for(n=0;Object.keys(s.crossings).length&&n<1e4;)n++,y(s,Object.keys(s.crossings)[0].split(",").map(Number),void 0,t,i);n===1e4&&o.log("Infinite loop in contour?")}}},{"../../lib":503,"./constants":739}],748:[function(u,q,W){var o=u("../../components/color"),p=u("../heatmap/hover");q.exports=function(x,y,e,r,t){t||(t={}),t.isContour=!0;var i=p(x,y,e,r,t);return i&&i.forEach(function(n){var h=n.trace;h.contours.type==="constraint"&&(h.fillcolor&&o.opacity(h.fillcolor)?n.color=o.addOpacity(h.fillcolor,1):h.contours.showlines&&o.opacity(h.line.color)&&(n.color=o.addOpacity(h.line.color,1)))}),i}},{"../../components/color":366,"../heatmap/hover":799}],749:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults"),calc:u("./calc"),plot:u("./plot").plot,style:u("./style"),colorbar:u("./colorbar"),hoverPoints:u("./hover"),moduleType:"trace",name:"contour",basePlotModule:u("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":735,"./calc":736,"./colorbar":738,"./defaults":744,"./hover":748,"./plot":753,"./style":755}],750:[function(u,q,W){var o=u("../../lib");q.exports=function(p,x,y,e){if(e||(e={}),p("contours.showlabels")){var r=x.font;o.coerceFont(p,"contours.labelfont",{family:r.family,size:r.size,color:y}),p("contours.labelformat")}e.hasHover!==!1&&p("zhoverformat")}},{"../../lib":503}],751:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../components/colorscale"),x=u("./end_plus");q.exports=function(y){var e=y.contours,r=e.start,t=x(e),i=e.size||1,n=Math.floor((t-r)/i)+1,h=e.coloring==="lines"?0:1,s=p.extractOpts(y);isFinite(i)||(i=1,n=1);var a,l,f=s.reversescale?p.flipScale(s.colorscale):s.colorscale,d=f.length,v=new Array(d),m=new Array(d);if(e.coloring==="heatmap"){var c=s.min,b=s.max;for(l=0;l<d;l++)a=f[l],v[l]=a[0]*(b-c)+c,m[l]=a[1];var g=o.extent([c,b,e.start,e.start+i*(n-1)]),w=g[c<b?0:1],_=g[c<b?1:0];w!==c&&(v.splice(0,0,w),m.splice(0,0,m[0])),_!==b&&(v.push(_),m.push(m[m.length-1]))}else for(l=0;l<d;l++)a=f[l],v[l]=(a[0]*(n+h-1)-h/2)*i+r,m[l]=a[1];return p.makeColorScaleFunc({domain:v,range:m},{noNumericCheck:!0})}},{"../../components/colorscale":378,"./end_plus":746,"@plotly/d3":58}],752:[function(u,q,W){var o=u("./constants");function p(x,y){var e=(y[0][0]>x?0:1)+(y[0][1]>x?0:2)+(y[1][1]>x?0:4)+(y[1][0]>x?0:8);return e===5||e===10?x>(y[0][0]+y[0][1]+y[1][0]+y[1][1])/4?e===5?713:1114:e===5?104:208:e===15?0:e}q.exports=function(x){var y,e,r,t,i,n,h,s,a,l=x[0].z,f=l.length,d=l[0].length,v=f===2||d===2;for(e=0;e<f-1;e++)for(t=[],e===0&&(t=t.concat(o.BOTTOMSTART)),e===f-2&&(t=t.concat(o.TOPSTART)),y=0;y<d-1;y++)for(r=t.slice(),y===0&&(r=r.concat(o.LEFTSTART)),y===d-2&&(r=r.concat(o.RIGHTSTART)),i=y+","+e,n=[[l[e][y],l[e][y+1]],[l[e+1][y],l[e+1][y+1]]],a=0;a<x.length;a++)(h=p((s=x[a]).level,n))&&(s.crossings[i]=h,r.indexOf(h)!==-1&&(s.starts.push([y,e]),v&&r.indexOf(h,r.indexOf(h)+1)!==-1&&s.starts.push([y,e])))}},{"./constants":739}],753:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../lib"),x=u("../../components/drawing"),y=u("../../components/colorscale"),e=u("../../lib/svg_text_utils"),r=u("../../plots/cartesian/axes"),t=u("../../plots/cartesian/set_convert"),i=u("../heatmap/plot"),n=u("./make_crossings"),h=u("./find_all_paths"),s=u("./empty_pathinfo"),a=u("./convert_to_constraints"),l=u("./close_boundaries"),f=u("./constants"),d=f.LABELOPTIMIZER;function v(b,g){var w,_,T,k,L,M,I,P="",S=0,E=b.edgepaths.map(function(K,Z){return Z}),D=!0;function F(K){return Math.abs(K[1]-g[2][1])<.01}function H(K){return Math.abs(K[0]-g[0][0])<.01}function V(K){return Math.abs(K[0]-g[2][0])<.01}for(;E.length;){for(M=x.smoothopen(b.edgepaths[S],b.smoothing),P+=D?M:M.replace(/^M/,"L"),E.splice(E.indexOf(S),1),w=b.edgepaths[S][b.edgepaths[S].length-1],k=-1,T=0;T<4;T++){if(!w){p.log("Missing end?",S,b);break}for(I=w,Math.abs(I[1]-g[0][1])<.01&&!V(w)?_=g[1]:H(w)?_=g[0]:F(w)?_=g[3]:V(w)&&(_=g[2]),L=0;L<b.edgepaths.length;L++){var Q=b.edgepaths[L][0];Math.abs(w[0]-_[0])<.01?Math.abs(w[0]-Q[0])<.01&&(Q[1]-w[1])*(_[1]-Q[1])>=0&&(_=Q,k=L):Math.abs(w[1]-_[1])<.01?Math.abs(w[1]-Q[1])<.01&&(Q[0]-w[0])*(_[0]-Q[0])>=0&&(_=Q,k=L):p.log("endpt to newendpt is not vert. or horz.",w,_,Q)}if(w=_,k>=0)break;P+="L"+_}if(k===b.edgepaths.length){p.log("unclosed perimeter path");break}S=k,(D=E.indexOf(S)===-1)&&(S=E[0],P+="Z")}for(S=0;S<b.paths.length;S++)P+=x.smoothclosed(b.paths[S],b.smoothing);return P}function m(b,g,w,_){var T=g.width/2,k=g.height/2,L=b.x,M=b.y,I=b.theta,P=Math.cos(I)*T,S=Math.sin(I)*T,E=(L>_.center?_.right-L:L-_.left)/(P+Math.abs(Math.sin(I)*k)),D=(M>_.middle?_.bottom-M:M-_.top)/(Math.abs(S)+Math.cos(I)*k);if(E<1||D<1)return 1/0;var F=d.EDGECOST*(1/(E-1)+1/(D-1));F+=d.ANGLECOST*I*I;for(var H=L-P,V=M-S,Q=L+P,K=M+S,Z=0;Z<w.length;Z++){var $=w[Z],re=Math.cos($.theta)*$.width/2,R=Math.sin($.theta)*$.width/2,N=2*p.segmentDistance(H,V,Q,K,$.x-re,$.y-R,$.x+re,$.y+R)/(g.height+$.height),U=$.level===g.level,te=U?d.SAMELEVELDISTANCE:1;if(N<=te)return 1/0;F+=d.NEIGHBORCOST*(U?d.SAMELEVELFACTOR:1)/(N-te)}return F}function c(b){var g,w,_=b.trace._emptypoints,T=[],k=b.z.length,L=b.z[0].length,M=[];for(g=0;g<L;g++)M.push(1);for(g=0;g<k;g++)T.push(M.slice());for(g=0;g<_.length;g++)T[(w=_[g])[0]][w[1]]=0;return b.zmask=T,T}W.plot=function(b,g,w,_){var T=g.xaxis,k=g.yaxis;p.makeTraceGroups(_,w,"contour").each(function(L){var M=o.select(this),I=L[0],P=I.trace,S=I.x,E=I.y,D=P.contours,F=s(D,g,I),H=p.ensureSingle(M,"g","heatmapcoloring"),V=[];D.coloring==="heatmap"&&(V=[L]),i(b,g,V,H),n(F),h(F);var Q=T.c2p(S[0],!0),K=T.c2p(S[S.length-1],!0),Z=k.c2p(E[0],!0),$=k.c2p(E[E.length-1],!0),re=[[Q,$],[K,$],[K,Z],[Q,Z]],R=F;D.type==="constraint"&&(R=a(F,D._operation)),function(N,U,te){var j=p.ensureSingle(N,"g","contourbg").selectAll("path").data(te.coloring==="fill"?[0]:[]);j.enter().append("path"),j.exit().remove(),j.attr("d","M"+U.join("L")+"Z").style("stroke","none")}(M,re,D),function(N,U,te,j){var Y=j.coloring==="fill"||j.type==="constraint"&&j._operation!=="=",J="M"+te.join("L")+"Z";Y&&l(U,j);var ee=p.ensureSingle(N,"g","contourfill").selectAll("path").data(Y?U:[]);ee.enter().append("path"),ee.exit().remove(),ee.each(function(ne){var se=(ne.prefixBoundary?J:"")+v(ne,te);se?o.select(this).attr("d",se).style("stroke","none"):o.select(this).remove()})}(M,R,re,D),function(N,U,te,j,Y){var J=p.ensureSingle(N,"g","contourlines"),ee=Y.showlines!==!1,ne=Y.showlabels,se=ee&&ne,oe=W.createLines(J,ee||ne,U),he=W.createLineClip(J,se,te,j.trace.uid),le=N.selectAll("g.contourlabels").data(ne?[0]:[]);if(le.exit().remove(),le.enter().append("g").classed("contourlabels",!0),ne){var de=[],xe=[];p.clearLocationCache();var we=W.labelFormatter(te,j),be=x.tester.append("text").attr("data-notex",1).call(x.font,Y.labelfont),Ae=U[0].xaxis,fe=U[0].yaxis,me=Ae._length,ke=fe._length,Te=Ae.range,Me=fe.range,Oe=p.aggNums(Math.min,null,j.x),Fe=p.aggNums(Math.max,null,j.x),qe=p.aggNums(Math.min,null,j.y),et=p.aggNums(Math.max,null,j.y),ze=Math.max(Ae.c2p(Oe,!0),0),Ue=Math.min(Ae.c2p(Fe,!0),me),We=Math.max(fe.c2p(et,!0),0),Ze=Math.min(fe.c2p(qe,!0),ke),nt={};Te[0]<Te[1]?(nt.left=ze,nt.right=Ue):(nt.left=Ue,nt.right=ze),Me[0]<Me[1]?(nt.top=We,nt.bottom=Ze):(nt.top=Ze,nt.bottom=We),nt.middle=(nt.top+nt.bottom)/2,nt.center=(nt.left+nt.right)/2,de.push([[nt.left,nt.top],[nt.right,nt.top],[nt.right,nt.bottom],[nt.left,nt.bottom]]);var ft=Math.sqrt(me*me+ke*ke),xt=f.LABELDISTANCE*ft/Math.max(1,U.length/f.LABELINCREASE);oe.each(function(It){var Et=W.calcTextOpts(It.level,we,be,te);o.select(this).selectAll("path").each(function(){var it=p.getVisibleSegment(this,nt,Et.height/2);if(it&&!(it.len<(Et.width+Et.height)*f.LABELMIN))for(var rt=Math.min(Math.ceil(it.len/xt),f.LABELMAX),At=0;At<rt;At++){var Gt=W.findBestTextLocation(this,it,Et,xe,nt);if(!Gt)break;W.addLabelData(Gt,Et,xe,de)}})}),be.remove(),W.drawLabels(le,xe,te,he,se?de:null)}ne&&!ee&&oe.remove()}(M,F,b,I,D),function(N,U,te,j,Y){var J=j.trace,ee=te._fullLayout._clips,ne="clip"+J.uid,se=ee.selectAll("#"+ne).data(J.connectgaps?[]:[0]);if(se.enter().append("clipPath").classed("contourclip",!0).attr("id",ne),se.exit().remove(),J.connectgaps===!1){var oe={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:U.xaxis,yaxis:U.yaxis,x:j.x,y:j.y,z:c(j),smoothing:0};n([oe]),h([oe]),l([oe],{type:"levels"}),p.ensureSingle(se,"path","").attr("d",(oe.prefixBoundary?"M"+Y.join("L")+"Z":"")+v(oe,Y))}else ne=null;x.setClipUrl(N,ne,te)}(M,g,b,I,re)})},W.createLines=function(b,g,w){var _=w[0].smoothing,T=b.selectAll("g.contourlevel").data(g?w:[]);if(T.exit().remove(),T.enter().append("g").classed("contourlevel",!0),g){var k=T.selectAll("path.openline").data(function(M){return M.pedgepaths||M.edgepaths});k.exit().remove(),k.enter().append("path").classed("openline",!0),k.attr("d",function(M){return x.smoothopen(M,_)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var L=T.selectAll("path.closedline").data(function(M){return M.ppaths||M.paths});L.exit().remove(),L.enter().append("path").classed("closedline",!0),L.attr("d",function(M){return x.smoothclosed(M,_)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return T},W.createLineClip=function(b,g,w,_){var T=g?"clipline"+_:null,k=w._fullLayout._clips.selectAll("#"+T).data(g?[0]:[]);return k.exit().remove(),k.enter().append("clipPath").classed("contourlineclip",!0).attr("id",T),x.setClipUrl(b,T,w),k},W.labelFormatter=function(b,g){var w=b._fullLayout,_=g.trace,T=_.contours,k={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(T.labelformat)k.tickformat=T.labelformat,t(k,w);else{var L=y.extractOpts(_);if(L&&L.colorbar&&L.colorbar._axis)k=L.colorbar._axis;else{if(T.type==="constraint"){var M=T.value;Array.isArray(M)?k.range=[M[0],M[M.length-1]]:k.range=[M,M]}else k.range=[T.start,T.end],k.nticks=(T.end-T.start)/T.size;k.range[0]===k.range[1]&&(k.range[1]+=k.range[0]||1),k.nticks||(k.nticks=1e3),t(k,w),r.prepTicks(k),k._tmin=null,k._tmax=null}}return function(I){return r.tickText(k,I).text}},W.calcTextOpts=function(b,g,w,_){var T=g(b);w.text(T).call(e.convertToTspans,_);var k=w.node(),L=x.bBox(k,!0);return{text:T,width:L.width,height:L.height,fontSize:+k.style["font-size"].replace("px",""),level:b,dy:(L.top+L.bottom)/2}},W.findBestTextLocation=function(b,g,w,_,T){var k,L,M,I,P,S=w.width;g.isClosed?(L=g.len/d.INITIALSEARCHPOINTS,k=g.min+L/2,M=g.max):(L=(g.len-S)/(d.INITIALSEARCHPOINTS+1),k=g.min+L+S/2,M=g.max-(L+S)/2);for(var E=1/0,D=0;D<d.ITERATIONS;D++){for(var F=k;F<M;F+=L){var H=p.getTextLocation(b,g.total,F,S),V=m(H,w,_,T);V<E&&(E=V,P=H,I=F)}if(E>2*d.MAXCOST)break;D&&(L/=2),M=(k=I-L/2)+1.5*L}if(E<=d.MAXCOST)return P},W.addLabelData=function(b,g,w,_){var T=g.fontSize,k=g.width+T/3,L=Math.max(0,g.height-T/3),M=b.x,I=b.y,P=b.theta,S=Math.sin(P),E=Math.cos(P),D=function(H,V){return[M+H*E-V*S,I+H*S+V*E]},F=[D(-k/2,-L/2),D(-k/2,L/2),D(k/2,L/2),D(k/2,-L/2)];w.push({text:g.text,x:M,y:I,dy:g.dy,theta:P,level:g.level,width:k,height:L}),_.push(F)},W.drawLabels=function(b,g,w,_,T){var k=b.selectAll("text").data(g,function(I){return I.text+","+I.x+","+I.y+","+I.theta});if(k.exit().remove(),k.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(I){var P=I.x+Math.sin(I.theta)*I.dy,S=I.y-Math.cos(I.theta)*I.dy;o.select(this).text(I.text).attr({x:P,y:S,transform:"rotate("+180*I.theta/Math.PI+" "+P+" "+S+")"}).call(e.convertToTspans,w)}),T){for(var L="",M=0;M<T.length;M++)L+="M"+T[M].join("L")+"Z";p.ensureSingle(_,"path","").attr("d",L)}}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/set_convert":576,"../heatmap/plot":804,"./close_boundaries":737,"./constants":739,"./convert_to_constraints":743,"./empty_pathinfo":745,"./find_all_paths":747,"./make_crossings":752,"@plotly/d3":58}],754:[function(u,q,W){var o=u("../../plots/cartesian/axes"),p=u("../../lib");function x(y,e,r){var t={type:"linear",range:[y,e]};return o.autoTicks(t,(e-y)/(r||15)),t}q.exports=function(y,e){var r=y.contours;if(y.autocontour){var t=y.zmin,i=y.zmax;(y.zauto||t===void 0)&&(t=p.aggNums(Math.min,null,e)),(y.zauto||i===void 0)&&(i=p.aggNums(Math.max,null,e));var n=x(t,i,y.ncontours);r.size=n.dtick,r.start=o.tickFirst(n),n.range.reverse(),r.end=o.tickFirst(n),r.start===t&&(r.start+=r.size),r.end===i&&(r.end-=r.size),r.start>r.end&&(r.start=r.end=(r.start+r.end)/2),y._input.contours||(y._input.contours={}),p.extendFlat(y._input.contours,{start:r.start,end:r.end,size:r.size}),y._input.autocontour=!0}else if(r.type!=="constraint"){var h,s=r.start,a=r.end,l=y._input.contours;s>a&&(r.start=l.start=a,a=r.end=l.end=s,s=r.start),!(r.size>0)&&(h=s===a?1:x(s,a,y.ncontours).dtick,l.size=r.size=h)}}},{"../../lib":503,"../../plots/cartesian/axes":554}],755:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../components/drawing"),x=u("../heatmap/style"),y=u("./make_color_map");q.exports=function(e){var r=o.select(e).selectAll("g.contour");r.style("opacity",function(t){return t[0].trace.opacity}),r.each(function(t){var i=o.select(this),n=t[0].trace,h=n.contours,s=n.line,a=h.size||1,l=h.start,f=h.type==="constraint",d=!f&&h.coloring==="lines",v=!f&&h.coloring==="fill",m=d||v?y(n):null;i.selectAll("g.contourlevel").each(function(g){o.select(this).selectAll("path").call(p.lineGroupStyle,s.width,d?m(g.level):s.color,s.dash)});var c=h.labelfont;if(i.selectAll("g.contourlabels text").each(function(g){p.font(o.select(this),{family:c.family,size:c.size,color:c.color||(d?m(g.level):s.color)})}),f)i.selectAll("g.contourfill path").style("fill",n.fillcolor);else if(v){var b;i.selectAll("g.contourfill path").style("fill",function(g){return b===void 0&&(b=g.level),m(g.level+.5*a)}),b===void 0&&(b=l),i.selectAll("g.contourbg path").style("fill",m(b-.5*a))}}),x(e)}},{"../../components/drawing":388,"../heatmap/style":805,"./make_color_map":751,"@plotly/d3":58}],756:[function(u,q,W){var o=u("../../components/colorscale/defaults"),p=u("./label_defaults");q.exports=function(x,y,e,r,t){var i,n=e("contours.coloring"),h="";n==="fill"&&(i=e("contours.showlines")),i!==!1&&(n!=="lines"&&(h=e("line.color","#000")),e("line.width",.5),e("line.dash")),n!=="none"&&(x.showlegend!==!0&&(y.showlegend=!1),y._dfltShowLegend=!1,o(x,y,r,e,{prefix:"",cLetter:"z"})),e("line.smoothing"),p(e,r,h,t)}},{"../../components/colorscale/defaults":376,"./label_defaults":750}],757:[function(u,q,W){var o=u("../heatmap/attributes"),p=u("../contour/attributes"),x=u("../../components/colorscale/attributes"),y=u("../../lib/extend").extendFlat,e=p.contours;q.exports=y({carpet:{valType:"string",editType:"calc"},z:o.z,a:o.x,a0:o.x0,da:o.dx,b:o.y,b0:o.y0,db:o.dy,text:o.text,hovertext:o.hovertext,transpose:o.transpose,atype:o.xtype,btype:o.ytype,fillcolor:p.fillcolor,autocontour:p.autocontour,ncontours:p.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:p.line.color,width:p.line.width,dash:p.line.dash,smoothing:p.line.smoothing,editType:"plot"},transforms:void 0},x("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../contour/attributes":735,"../heatmap/attributes":792}],758:[function(u,q,W){var o=u("../../components/colorscale/calc"),p=u("../../lib"),x=u("../heatmap/convert_column_xyz"),y=u("../heatmap/clean_2d_array"),e=u("../heatmap/interp2d"),r=u("../heatmap/find_empties"),t=u("../heatmap/make_bound_array"),i=u("./defaults"),n=u("../carpet/lookup_carpetid"),h=u("../contour/set_contours");q.exports=function(s,a){var l=a._carpetTrace=n(s,a);if(l&&l.visible&&l.visible!=="legendonly"){if(!a.a||!a.b){var f=s.data[l.index],d=s.data[a.index];d.a||(d.a=f.a),d.b||(d.b=f.b),i(d,a,a._defaultColor,s._fullLayout)}var v=function(m,c){var b,g,w,_,T,k,L,M=c._carpetTrace,I=M.aaxis,P=M.baxis;I._minDtick=0,P._minDtick=0,p.isArray1D(c.z)&&x(c,I,P,"a","b",["z"]),b=c._a=c._a||c.a,_=c._b=c._b||c.b,b=b?I.makeCalcdata(c,"_a"):[],_=_?P.makeCalcdata(c,"_b"):[],g=c.a0||0,w=c.da||1,T=c.b0||0,k=c.db||1,L=c._z=y(c._z||c.z,c.transpose),c._emptypoints=r(L),e(L,c._emptypoints);var S=p.maxRowLength(L),E=c.xtype==="scaled"?"":b,D=t(c,E,g,w,S,I),F=c.ytype==="scaled"?"":_,H=t(c,F,T,k,L.length,P),V={a:D,b:H,z:L};return c.contours.type==="levels"&&c.contours.coloring!=="none"&&o(m,c,{vals:L,containerStr:"",cLetter:"z"}),[V]}(s,a);return h(a,a._z),v}}},{"../../components/colorscale/calc":374,"../../lib":503,"../carpet/lookup_carpetid":708,"../contour/set_contours":754,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"../heatmap/find_empties":798,"../heatmap/interp2d":801,"../heatmap/make_bound_array":803,"./defaults":759}],759:[function(u,q,W){var o=u("../../lib"),p=u("../heatmap/xyz_defaults"),x=u("./attributes"),y=u("../contour/constraint_defaults"),e=u("../contour/contours_defaults"),r=u("../contour/style_defaults");q.exports=function(t,i,n,h){function s(a,l){return o.coerce(t,i,x,a,l)}if(s("carpet"),t.a&&t.b){if(!p(t,i,s,h,"a","b"))return void(i.visible=!1);s("text"),s("contours.type")==="constraint"?y(t,i,s,h,n,{hasHover:!1}):(e(t,i,s,function(a){return o.coerce2(t,i,x,a)}),r(t,i,s,h,{hasHover:!1}))}else i._defaultColor=n,i._length=null}},{"../../lib":503,"../contour/constraint_defaults":740,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/xyz_defaults":807,"./attributes":757}],760:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults"),colorbar:u("../contour/colorbar"),calc:u("./calc"),plot:u("./plot"),style:u("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:u("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"../contour/colorbar":738,"../contour/style":755,"./attributes":757,"./calc":758,"./defaults":759,"./plot":761}],761:[function(u,q,W){var o=u("@plotly/d3"),p=u("../carpet/map_1d_array"),x=u("../carpet/makepath"),y=u("../../components/drawing"),e=u("../../lib"),r=u("../contour/make_crossings"),t=u("../contour/find_all_paths"),i=u("../contour/plot"),n=u("../contour/constants"),h=u("../contour/convert_to_constraints"),s=u("../contour/empty_pathinfo"),a=u("../contour/close_boundaries"),l=u("../carpet/lookup_carpetid"),f=u("../carpet/axis_aligned_line");function d(c,b,g){var w=c.getPointAtLength(b),_=c.getPointAtLength(g),T=_.x-w.x,k=_.y-w.y,L=Math.sqrt(T*T+k*k);return[T/L,k/L]}function v(c){var b=Math.sqrt(c[0]*c[0]+c[1]*c[1]);return[c[0]/b,c[1]/b]}function m(c,b){var g=Math.abs(c[0]*b[0]+c[1]*b[1]);return Math.sqrt(1-g*g)/g}q.exports=function(c,b,g,w){var _=b.xaxis,T=b.yaxis;e.makeTraceGroups(w,g,"contour").each(function(k){var L=o.select(this),M=k[0],I=M.trace,P=I._carpetTrace=l(c,I),S=c.calcdata[P.index][0];if(P.visible&&P.visible!=="legendonly"){var E=M.a,D=M.b,F=I.contours,H=s(F,b,M),V=F.type==="constraint",Q=F._operation,K=V?Q==="="?"lines":"fill":F.coloring,Z=[[E[0],D[D.length-1]],[E[E.length-1],D[D.length-1]],[E[E.length-1],D[0]],[E[0],D[0]]];r(H);var $=1e-8*(E[E.length-1]-E[0]),re=1e-8*(D[D.length-1]-D[0]);t(H,$,re);var R,N,U,te,j=H;F.type==="constraint"&&(j=h(H,Q)),function(ne,se){var oe,he,le,de,xe,we,be,Ae,fe;for(oe=0;oe<ne.length;oe++){for(de=ne[oe],xe=de.pedgepaths=[],we=de.ppaths=[],he=0;he<de.edgepaths.length;he++){for(fe=de.edgepaths[he],be=[],le=0;le<fe.length;le++)be[le]=se(fe[le]);xe.push(be)}for(he=0;he<de.paths.length;he++){for(fe=de.paths[he],Ae=[],le=0;le<fe.length;le++)Ae[le]=se(fe[le]);we.push(Ae)}}}(H,ee);var Y=[];for(te=S.clipsegments.length-1;te>=0;te--)R=S.clipsegments[te],N=p([],R.x,_.c2p),U=p([],R.y,T.c2p),N.reverse(),U.reverse(),Y.push(x(N,U,R.bicubic));var J="M"+Y.join("L")+"Z";(function(ne,se,oe,he,le,de){var xe,we,be,Ae,fe=e.ensureSingle(ne,"g","contourbg").selectAll("path").data(de!=="fill"||le?[]:[0]);fe.enter().append("path"),fe.exit().remove();var me=[];for(Ae=0;Ae<se.length;Ae++)xe=se[Ae],we=p([],xe.x,oe.c2p),be=p([],xe.y,he.c2p),me.push(x(we,be,xe.bicubic));fe.attr("d","M"+me.join("L")+"Z").style("stroke","none")})(L,S.clipsegments,_,T,V,K),function(ne,se,oe,he,le,de,xe,we,be,Ae,fe){var me=Ae==="fill";me&&a(le,ne.contours);var ke=e.ensureSingle(se,"g","contourfill").selectAll("path").data(me?le:[]);ke.enter().append("path"),ke.exit().remove(),ke.each(function(Te){var Me=(Te.prefixBoundary?fe:"")+function(Oe,Fe,qe,et,ze,Ue,We,Ze){var nt,ft,xt,It,Et,it,rt,At="",Gt=Fe.edgepaths.map(function(st,dt){return dt}),Qt=!0,Ve=1e-4*Math.abs(qe[0][0]-qe[2][0]),Ye=1e-4*Math.abs(qe[0][1]-qe[2][1]);function Be(st){return Math.abs(st[1]-qe[0][1])<Ye}function Je(st){return Math.abs(st[1]-qe[2][1])<Ye}function Se(st){return Math.abs(st[0]-qe[0][0])<Ve}function Pe(st){return Math.abs(st[0]-qe[2][0])<Ve}function De(st,dt){var ut,Lt,lt,Ct,Pt="";for(Be(st)&&!Pe(st)||Je(st)&&!Se(st)?(Ct=ze.aaxis,lt=f(ze,Ue,[st[0],dt[0]],.5*(st[1]+dt[1]))):(Ct=ze.baxis,lt=f(ze,Ue,.5*(st[0]+dt[0]),[st[1],dt[1]])),ut=1;ut<lt.length;ut++)for(Pt+=Ct.smoothing?"C":"L",Lt=0;Lt<lt[ut].length;Lt++){var Ke=lt[ut][Lt];Pt+=[We.c2p(Ke[0]),Ze.c2p(Ke[1])]+" "}return Pt}for(nt=0,ft=null;Gt.length;){var Ie=Fe.edgepaths[nt][0];for(ft&&(At+=De(ft,Ie)),rt=y.smoothopen(Fe.edgepaths[nt].map(et),Fe.smoothing),At+=Qt?rt:rt.replace(/^M/,"L"),Gt.splice(Gt.indexOf(nt),1),ft=Fe.edgepaths[nt][Fe.edgepaths[nt].length-1],Et=-1,It=0;It<4;It++){if(!ft){e.log("Missing end?",nt,Fe);break}for(Be(ft)&&!Pe(ft)?xt=qe[1]:Se(ft)?xt=qe[0]:Je(ft)?xt=qe[3]:Pe(ft)&&(xt=qe[2]),it=0;it<Fe.edgepaths.length;it++){var $e=Fe.edgepaths[it][0];Math.abs(ft[0]-xt[0])<Ve?Math.abs(ft[0]-$e[0])<Ve&&($e[1]-ft[1])*(xt[1]-$e[1])>=0&&(xt=$e,Et=it):Math.abs(ft[1]-xt[1])<Ye?Math.abs(ft[1]-$e[1])<Ye&&($e[0]-ft[0])*(xt[0]-$e[0])>=0&&(xt=$e,Et=it):e.log("endpt to newendpt is not vert. or horz.",ft,xt,$e)}if(Et>=0)break;At+=De(ft,xt),ft=xt}if(Et===Fe.edgepaths.length){e.log("unclosed perimeter path");break}nt=Et,(Qt=Gt.indexOf(nt)===-1)&&(nt=Gt[0],At+=De(ft,xt)+"Z",ft=null)}for(nt=0;nt<Fe.paths.length;nt++)At+=y.smoothclosed(Fe.paths[nt].map(et),Fe.smoothing);return At}(0,Te,de,xe,we,be,oe,he);Me?o.select(this).attr("d",Me).style("stroke","none"):o.select(this).remove()})}(I,L,_,T,j,Z,ee,P,S,K,J),function(ne,se,oe,he,le,de,xe){var we=e.ensureSingle(ne,"g","contourlines"),be=le.showlines!==!1,Ae=le.showlabels,fe=be&&Ae,me=i.createLines(we,be||Ae,se),ke=i.createLineClip(we,fe,oe,he.trace.uid),Te=ne.selectAll("g.contourlabels").data(Ae?[0]:[]);if(Te.exit().remove(),Te.enter().append("g").classed("contourlabels",!0),Ae){var Me=de.xaxis,Oe=de.yaxis,Fe=Me._length,qe=Oe._length,et=[[[0,0],[Fe,0],[Fe,qe],[0,qe]]],ze=[];e.clearLocationCache();var Ue=i.labelFormatter(oe,he),We=y.tester.append("text").attr("data-notex",1).call(y.font,le.labelfont),Ze={left:0,right:Fe,center:Fe/2,top:0,bottom:qe,middle:qe/2},nt=Math.sqrt(Fe*Fe+qe*qe),ft=n.LABELDISTANCE*nt/Math.max(1,se.length/n.LABELINCREASE);me.each(function(xt){var It=i.calcTextOpts(xt.level,Ue,We,oe);o.select(this).selectAll("path").each(function(Et){var it=e.getVisibleSegment(this,Ze,It.height/2);if(it&&(function(Qt,Ve,Ye,Be,Je,Se){for(var Pe,De=0;De<Ye.pedgepaths.length;De++)Ve===Ye.pedgepaths[De]&&(Pe=Ye.edgepaths[De]);if(!Pe)return;var Ie=Je.a[0],$e=Je.a[Je.a.length-1],st=Je.b[0],dt=Je.b[Je.b.length-1];function ut(Ke,mt){var Dt,Bt=0;return(Math.abs(Ke[0]-Ie)<.1||Math.abs(Ke[0]-$e)<.1)&&(Dt=v(Je.dxydb_rough(Ke[0],Ke[1],.1)),Bt=Math.max(Bt,Se*m(mt,Dt)/2)),(Math.abs(Ke[1]-st)<.1||Math.abs(Ke[1]-dt)<.1)&&(Dt=v(Je.dxyda_rough(Ke[0],Ke[1],.1)),Bt=Math.max(Bt,Se*m(mt,Dt)/2)),Bt}var Lt=d(Qt,0,1),lt=d(Qt,Be.total,Be.total-1),Ct=ut(Pe[0],Lt),Pt=Be.total-ut(Pe[Pe.length-1],lt);Be.min<Ct&&(Be.min=Ct),Be.max>Pt&&(Be.max=Pt),Be.len=Be.max-Be.min}(this,Et,xt,it,xe,It.height),!(it.len<(It.width+It.height)*n.LABELMIN)))for(var rt=Math.min(Math.ceil(it.len/ft),n.LABELMAX),At=0;At<rt;At++){var Gt=i.findBestTextLocation(this,it,It,ze,Ze);if(!Gt)break;i.addLabelData(Gt,It,ze,et)}})}),We.remove(),i.drawLabels(Te,ze,oe,ke,fe?et:null)}Ae&&!be&&me.remove()}(L,H,c,M,F,b,P),y.setClipUrl(L,P._clipPathId,c)}function ee(ne){var se=P.ab2xy(ne[0],ne[1],!0);return[_.c2p(se[0]),T.c2p(se[1])]}})}},{"../../components/drawing":388,"../../lib":503,"../carpet/axis_aligned_line":692,"../carpet/lookup_carpetid":708,"../carpet/makepath":709,"../carpet/map_1d_array":710,"../contour/close_boundaries":737,"../contour/constants":739,"../contour/convert_to_constraints":743,"../contour/empty_pathinfo":745,"../contour/find_all_paths":747,"../contour/make_crossings":752,"../contour/plot":753,"@plotly/d3":58}],762:[function(u,q,W){var o=u("../../components/colorscale/attributes"),p=u("../../plots/template_attributes").hovertemplateAttrs,x=u("../../plots/attributes"),y=u("../scattermapbox/attributes"),e=u("../../lib/extend").extendFlat;q.exports=e({lon:y.lon,lat:y.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:y.text,hovertext:y.hovertext,hoverinfo:e({},x.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:p(),showlegend:e({},x.showlegend,{dflt:!1})},o("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattermapbox/attributes":991}],763:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../lib").isArrayOrTypedArray,x=u("../../constants/numerical").BADNUM,y=u("../../components/colorscale/calc"),e=u("../../lib")._;q.exports=function(r,t){for(var i=t._length,n=new Array(i),h=t.z,s=p(h)&&h.length,a=0;a<i;a++){var l=n[a]={},f=t.lon[a],d=t.lat[a];if(l.lonlat=o(f)&&o(d)?[+f,+d]:[x,x],s){var v=h[a];l.z=o(v)?v:x}}return y(r,t,{vals:s?h:[0,1],containerStr:"",cLetter:"z"}),i&&(n[0].t={labels:{lat:e(r,"lat:")+" ",lon:e(r,"lon:")+" "}}),n}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],764:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../lib"),x=u("../../components/color"),y=u("../../components/colorscale"),e=u("../../constants/numerical").BADNUM,r=u("../../lib/geojson_utils").makeBlank;q.exports=function(t){var i=t[0].trace,n=i.visible===!0&&i._length!==0,h=i._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:r()};if(!n)return h;var s,a=[],l=i.z,f=i.radius,d=p.isArrayOrTypedArray(l)&&l.length,v=p.isArrayOrTypedArray(f);for(s=0;s<t.length;s++){var m=t[s],c=m.lonlat;if(c[0]!==e){var b={};if(d){var g=m.z;b.z=g!==e?g:0}v&&(b.r=o(f[s])&&f[s]>0?+f[s]:0),a.push({type:"Feature",geometry:{type:"Point",coordinates:c},properties:b})}}var w=y.extractOpts(i),_=w.reversescale?y.flipScale(w.colorscale):w.colorscale,T=_[0][1],k=["interpolate",["linear"],["heatmap-density"],0,x.opacity(T)<1?T:x.addOpacity(T,0)];for(s=1;s<_.length;s++)k.push(_[s][0],_[s][1]);var L=["interpolate",["linear"],["get","z"],w.min,0,w.max,1];return p.extendFlat(h.heatmap.paint,{"heatmap-weight":d?L:1/(w.max-w.min),"heatmap-color":k,"heatmap-radius":v?{type:"identity",property:"r"}:i.radius,"heatmap-opacity":i.opacity}),h.geojson={type:"FeatureCollection",features:a},h.heatmap.layout.visibility="visible",h}},{"../../components/color":366,"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"fast-isnumeric":190}],765:[function(u,q,W){var o=u("../../lib"),p=u("../../components/colorscale/defaults"),x=u("./attributes");q.exports=function(y,e,r,t){function i(a,l){return o.coerce(y,e,x,a,l)}var n=i("lon")||[],h=i("lat")||[],s=Math.min(n.length,h.length);s?(e._length=s,i("z"),i("radius"),i("below"),i("text"),i("hovertext"),i("hovertemplate"),p(y,e,t,i,{prefix:"",cLetter:"z"})):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":762}],766:[function(u,q,W){q.exports=function(o,p){return o.lon=p.lon,o.lat=p.lat,o.z=p.z,o}},{}],767:[function(u,q,W){var o=u("../../plots/cartesian/axes"),p=u("../scattermapbox/hover").hoverPoints,x=u("../scattermapbox/hover").getExtraText;q.exports=function(y,e,r){var t=p(y,e,r);if(t){var i=t[0],n=i.cd,h=n[0].trace,s=n[i.index];if(delete i.color,"z"in s){var a=i.subplot.mockAxis;i.z=s.z,i.zLabel=o.tickText(a,a.c2l(s.z),"hover").text}return i.extraText=x(h,s,n[0].t.labels),[i]}}},{"../../plots/cartesian/axes":554,"../scattermapbox/hover":996}],768:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults"),colorbar:u("../heatmap/colorbar"),formatLabels:u("../scattermapbox/format_labels"),calc:u("./calc"),plot:u("./plot"),hoverPoints:u("./hover"),eventData:u("./event_data"),getBelow:function(o,p){for(var x=p.getMapLayers(),y=0;y<x.length;y++){var e=x[y],r=e.id;if(e.type==="symbol"&&typeof r=="string"&&r.indexOf("plotly-")===-1)return r}},moduleType:"trace",name:"densitymapbox",basePlotModule:u("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":613,"../heatmap/colorbar":795,"../scattermapbox/format_labels":995,"./attributes":762,"./calc":763,"./defaults":765,"./event_data":766,"./hover":767,"./plot":769}],769:[function(u,q,W){var o=u("./convert"),p=u("../../plots/mapbox/constants").traceLayerPrefix;function x(e,r){this.type="densitymapbox",this.subplot=e,this.uid=r,this.sourceId="source-"+r,this.layerList=[["heatmap",p+r+"-heatmap"]],this.below=null}var y=x.prototype;y.update=function(e){var r=this.subplot,t=this.layerList,i=o(e),n=r.belowLookup["trace-"+this.uid];r.map.getSource(this.sourceId).setData(i.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(i,n),this.below=n);for(var h=0;h<t.length;h++){var s=t[h],a=s[0],l=s[1],f=i[a];r.setOptions(l,"setLayoutProperty",f.layout),f.layout.visibility==="visible"&&r.setOptions(l,"setPaintProperty",f.paint)}},y._addLayers=function(e,r){for(var t=this.subplot,i=this.layerList,n=this.sourceId,h=0;h<i.length;h++){var s=i[h],a=s[0],l=e[a];t.addLayer({type:a,id:s[1],source:n,layout:l.layout,paint:l.paint},r)}},y._removeLayers=function(){for(var e=this.subplot.map,r=this.layerList,t=r.length-1;t>=0;t--)e.removeLayer(r[t][1])},y.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},q.exports=function(e,r){var t=r[0].trace,i=new x(e,t.uid),n=i.sourceId,h=o(r),s=i.below=e.belowLookup["trace-"+t.uid];return e.map.addSource(n,{type:"geojson",data:h.geojson}),i._addLayers(h,s),i}},{"../../plots/mapbox/constants":611,"./convert":764}],770:[function(u,q,W){var o=u("../../lib");q.exports=function(p,x){for(var y=0;y<p.length;y++)p[y].i=y;o.mergeArray(x.text,p,"tx"),o.mergeArray(x.hovertext,p,"htx");var e=x.marker;if(e){o.mergeArray(e.opacity,p,"mo"),o.mergeArray(e.color,p,"mc");var r=e.line;r&&(o.mergeArray(r.color,p,"mlc"),o.mergeArrayCastPositive(r.width,p,"mlw"))}}},{"../../lib":503}],771:[function(u,q,W){var o,p=u("../bar/attributes"),x=u("../scatter/attributes").line,y=u("../../plots/attributes"),e=u("../../plots/cartesian/axis_format_attributes").axisHoverFormat,r=u("../../plots/template_attributes").hovertemplateAttrs,t=u("../../plots/template_attributes").texttemplateAttrs,i=u("./constants"),n=u("../../lib/extend").extendFlat,h=u("../../components/color");q.exports={x:p.x,x0:p.x0,dx:p.dx,y:p.y,y0:p.y0,dy:p.dy,xperiod:p.xperiod,yperiod:p.yperiod,xperiod0:p.xperiod0,yperiod0:p.yperiod0,xperiodalignment:p.xperiodalignment,yperiodalignment:p.yperiodalignment,xhoverformat:e("x"),yhoverformat:e("y"),hovertext:p.hovertext,hovertemplate:r({},{keys:i.eventDataKeys}),hoverinfo:n({},y.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:t({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),text:p.text,textposition:p.textposition,insidetextanchor:n({},p.insidetextanchor,{dflt:"middle"}),textangle:n({},p.textangle,{dflt:0}),textfont:p.textfont,insidetextfont:p.insidetextfont,outsidetextfont:p.outsidetextfont,constraintext:p.constraintext,cliponaxis:p.cliponaxis,orientation:n({},p.orientation,{}),offset:n({},p.offset,{arrayOk:!1}),width:n({},p.width,{arrayOk:!1}),marker:(o=n({},p.marker),delete o.pattern,o),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:n({},x.color,{dflt:h.defaultLine}),width:n({},x.width,{dflt:0,editType:"plot"}),dash:x.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:p.offsetgroup,alignmentgroup:p.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926,"./constants":773}],772:[function(u,q,W){var o=u("../../plots/cartesian/axes"),p=u("../../plots/cartesian/align_period"),x=u("./arrays_to_calcdata"),y=u("../scatter/calc_selection"),e=u("../../constants/numerical").BADNUM;function r(t){return t===e?0:t}q.exports=function(t,i){var n,h,s,a,l,f,d,v,m=o.getFromId(t,i.xaxis||"x"),c=o.getFromId(t,i.yaxis||"y");i.orientation==="h"?(n=m.makeCalcdata(i,"x"),s=c.makeCalcdata(i,"y"),a=p(i,c,"y",s),l=!!i.yperiodalignment,f="y"):(n=c.makeCalcdata(i,"y"),s=m.makeCalcdata(i,"x"),a=p(i,m,"x",s),l=!!i.xperiodalignment,f="x"),h=a.vals;var b,g=Math.min(h.length,n.length),w=new Array(g);for(i._base=[],d=0;d<g;d++){n[d]<0&&(n[d]=e);var _=!1;n[d]!==e&&d+1<g&&n[d+1]!==e&&(_=!0),v=w[d]={p:h[d],s:n[d],cNext:_},i._base[d]=-.5*v.s,l&&(w[d].orig_p=s[d],w[d][f+"End"]=a.ends[d],w[d][f+"Start"]=a.starts[d]),i.ids&&(v.id=String(i.ids[d])),d===0&&(w[0].vTotal=0),w[0].vTotal+=r(v.s),v.begR=r(v.s)/r(w[0].s)}for(d=0;d<g;d++)(v=w[d]).s!==e&&(v.sumR=v.s/w[0].vTotal,v.difR=b!==void 0?v.s/b:1,b=v.s);return x(w,i),y(w,i),w}},{"../../constants/numerical":479,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928,"./arrays_to_calcdata":770}],773:[function(u,q,W){q.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],774:[function(u,q,W){var o=u("../bar/cross_trace_calc").setGroupPositions;q.exports=function(p,x){var y,e,r=p._fullLayout,t=p._fullData,i=p.calcdata,n=x.xaxis,h=x.yaxis,s=[],a=[],l=[];for(e=0;e<t.length;e++){var f=t[e],d=f.orientation==="h";f.visible===!0&&f.xaxis===n._id&&f.yaxis===h._id&&f.type==="funnel"&&(y=i[e],d?l.push(y):a.push(y),s.push(y))}var v={mode:r.funnelmode,norm:r.funnelnorm,gap:r.funnelgap,groupgap:r.funnelgroupgap};for(o(p,n,h,a,v),o(p,h,n,l,v),e=0;e<s.length;e++){y=s[e];for(var m=0;m<y.length;m++)m+1<y.length&&(y[m].nextP0=y[m+1].p0,y[m].nextS0=y[m+1].s0,y[m].nextP1=y[m+1].p1,y[m].nextS1=y[m+1].s1)}}},{"../bar/cross_trace_calc":651}],775:[function(u,q,W){var o=u("../../lib"),p=u("../bar/defaults").handleGroupingDefaults,x=u("../bar/defaults").handleText,y=u("../scatter/xy_defaults"),e=u("../scatter/period_defaults"),r=u("./attributes"),t=u("../../components/color");q.exports={supplyDefaults:function(i,n,h,s){function a(v,m){return o.coerce(i,n,r,v,m)}if(y(i,n,s,a)){e(i,n,s,a),a("xhoverformat"),a("yhoverformat"),a("orientation",n.y&&!n.x?"v":"h"),a("offset"),a("width");var l=a("text");a("hovertext"),a("hovertemplate");var f=a("textposition");x(i,n,s,a,f,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),n.textposition==="none"||n.texttemplate||a("textinfo",Array.isArray(l)?"text+value":"value");var d=a("marker.color",h);a("marker.line.color",t.defaultLine),a("marker.line.width"),a("connector.visible")&&(a("connector.fillcolor",function(v){var m=o.isArrayOrTypedArray(v)?"#000":v;return t.addOpacity(m,.5*t.opacity(m))}(d)),a("connector.line.width")&&(a("connector.line.color"),a("connector.line.dash")))}else n.visible=!1},crossTraceDefaults:function(i,n){var h,s;function a(f){return o.coerce(s._input,s,r,f)}if(n.funnelmode==="group")for(var l=0;l<i.length;l++)h=(s=i[l])._input,p(h,s,n,a)}}},{"../../components/color":366,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":771}],776:[function(u,q,W){q.exports=function(o,p){return o.x="xVal"in p?p.xVal:p.x,o.y="yVal"in p?p.yVal:p.y,"percentInitial"in p&&(o.percentInitial=p.percentInitial),"percentPrevious"in p&&(o.percentPrevious=p.percentPrevious),"percentTotal"in p&&(o.percentTotal=p.percentTotal),p.xa&&(o.xaxis=p.xa),p.ya&&(o.yaxis=p.ya),o}},{}],777:[function(u,q,W){var o=u("../../components/color").opacity,p=u("../bar/hover").hoverOnBars,x=u("../../lib").formatPercent;q.exports=function(y,e,r,t,i){var n=p(y,e,r,t,i);if(n){var h=n.cd,s=h[0].trace,a=s.orientation==="h",l=h[n.index];n[(a?"x":"y")+"LabelVal"]=l.s,n.percentInitial=l.begR,n.percentInitialLabel=x(l.begR,1),n.percentPrevious=l.difR,n.percentPreviousLabel=x(l.difR,1),n.percentTotal=l.sumR,n.percentTotalLabel=x(l.sumR,1);var f=l.hi||s.hoverinfo,d=[];if(f&&f!=="none"&&f!=="skip"){var v=f==="all",m=f.split("+"),c=function(b){return v||m.indexOf(b)!==-1};c("percent initial")&&d.push(n.percentInitialLabel+" of initial"),c("percent previous")&&d.push(n.percentPreviousLabel+" of previous"),c("percent total")&&d.push(n.percentTotalLabel+" of total")}return n.extraText=d.join("<br>"),n.color=function(b,g){var w=b.marker,_=g.mc||w.color,T=g.mlc||w.line.color,k=g.mlw||w.line.width;if(o(_))return _;if(o(T)&&k)return T}(s,l),[n]}}},{"../../components/color":366,"../../lib":503,"../bar/hover":655}],778:[function(u,q,W){q.exports={attributes:u("./attributes"),layoutAttributes:u("./layout_attributes"),supplyDefaults:u("./defaults").supplyDefaults,crossTraceDefaults:u("./defaults").crossTraceDefaults,supplyLayoutDefaults:u("./layout_defaults"),calc:u("./calc"),crossTraceCalc:u("./cross_trace_calc"),plot:u("./plot"),style:u("./style").style,hoverPoints:u("./hover"),eventData:u("./event_data"),selectPoints:u("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:u("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":771,"./calc":772,"./cross_trace_calc":774,"./defaults":775,"./event_data":776,"./hover":777,"./layout_attributes":779,"./layout_defaults":780,"./plot":781,"./style":782}],779:[function(u,q,W){q.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],780:[function(u,q,W){var o=u("../../lib"),p=u("./layout_attributes");q.exports=function(x,y,e){var r=!1;function t(h,s){return o.coerce(x,y,p,h,s)}for(var i=0;i<e.length;i++){var n=e[i];if(n.visible&&n.type==="funnel"){r=!0;break}}r&&(t("funnelmode"),t("funnelgap",.2),t("funnelgroupgap"))}},{"../../lib":503,"./layout_attributes":779}],781:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../lib"),x=u("../../components/drawing"),y=u("../../constants/numerical").BADNUM,e=u("../bar/plot"),r=u("../bar/uniform_text").clearMinTextSize;function t(i,n,h,s){var a=[],l=[],f=s?n:h,d=s?h:n;return a[0]=f.c2p(i.s0,!0),l[0]=d.c2p(i.p0,!0),a[1]=f.c2p(i.s1,!0),l[1]=d.c2p(i.p1,!0),a[2]=f.c2p(i.nextS0,!0),l[2]=d.c2p(i.nextP0,!0),a[3]=f.c2p(i.nextS1,!0),l[3]=d.c2p(i.nextP1,!0),s?[a,l]:[l,a]}q.exports=function(i,n,h,s){var a=i._fullLayout;r("funnel",a),function(l,f,d,v){var m=f.xaxis,c=f.yaxis;p.makeTraceGroups(v,d,"trace bars").each(function(b){var g=o.select(this),w=b[0].trace,_=p.ensureSingle(g,"g","regions");if(w.connector&&w.connector.visible){var T=w.orientation==="h",k=_.selectAll("g.region").data(p.identity);k.enter().append("g").classed("region",!0),k.exit().remove();var L=k.size();k.each(function(M,I){if(I===L-1||M.cNext){var P=t(M,m,c,T),S=P[0],E=P[1],D="";S[0]!==y&&E[0]!==y&&S[1]!==y&&E[1]!==y&&S[2]!==y&&E[2]!==y&&S[3]!==y&&E[3]!==y&&(D+=T?"M"+S[0]+","+E[1]+"L"+S[2]+","+E[2]+"H"+S[3]+"L"+S[1]+","+E[1]+"Z":"M"+S[1]+","+E[1]+"L"+S[2]+","+E[3]+"V"+E[2]+"L"+S[1]+","+E[0]+"Z"),D===""&&(D="M0,0Z"),p.ensureSingle(o.select(this),"path").attr("d",D).call(x.setClipUrl,f.layerClipId,l)}})}else _.remove()})}(i,n,h,s),function(l,f,d,v){var m=f.xaxis,c=f.yaxis;p.makeTraceGroups(v,d,"trace bars").each(function(b){var g=o.select(this),w=b[0].trace,_=p.ensureSingle(g,"g","lines");if(w.connector&&w.connector.visible&&w.connector.line.width){var T=w.orientation==="h",k=_.selectAll("g.line").data(p.identity);k.enter().append("g").classed("line",!0),k.exit().remove();var L=k.size();k.each(function(M,I){if(I===L-1||M.cNext){var P=t(M,m,c,T),S=P[0],E=P[1],D="";S[3]!==void 0&&E[3]!==void 0&&(T?(D+="M"+S[0]+","+E[1]+"L"+S[2]+","+E[2],D+="M"+S[1]+","+E[1]+"L"+S[3]+","+E[2]):(D+="M"+S[1]+","+E[1]+"L"+S[2]+","+E[3],D+="M"+S[1]+","+E[0]+"L"+S[2]+","+E[2])),D===""&&(D="M0,0Z"),p.ensureSingle(o.select(this),"path").attr("d",D).call(x.setClipUrl,f.layerClipId,l)}})}else _.remove()})}(i,n,h,s),e.plot(i,n,h,s,{mode:a.funnelmode,norm:a.funnelmode,gap:a.funnelgap,groupgap:a.funnelgroupgap})}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],782:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../components/drawing"),x=u("../../components/color"),y=u("../../constants/interactions").DESELECTDIM,e=u("../bar/style"),r=u("../bar/uniform_text").resizeText,t=e.styleTextPoints;q.exports={style:function(i,n,h){var s=h||o.select(i).selectAll("g.funnellayer").selectAll("g.trace");r(i,s,"funnel"),s.style("opacity",function(a){return a[0].trace.opacity}),s.each(function(a){var l=o.select(this),f=a[0].trace;l.selectAll(".point > path").each(function(d){if(!d.isBlank){var v=f.marker;o.select(this).call(x.fill,d.mc||v.color).call(x.stroke,d.mlc||v.line.color).call(p.dashLine,v.line.dash,d.mlw||v.line.width).style("opacity",f.selectedpoints&&!d.selected?y:1)}}),t(l,f,i),l.selectAll(".regions").each(function(){o.select(this).selectAll("path").style("stroke-width",0).call(x.fill,f.connector.fillcolor)}),l.selectAll(".lines").each(function(){var d=f.connector.line;p.lineGroupStyle(o.select(this).selectAll("path"),d.width,d.color,d.dash)})})}}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],783:[function(u,q,W){var o=u("../pie/attributes"),p=u("../../plots/attributes"),x=u("../../plots/domain").attributes,y=u("../../plots/template_attributes").hovertemplateAttrs,e=u("../../plots/template_attributes").texttemplateAttrs,r=u("../../lib/extend").extendFlat;q.exports={labels:o.labels,label0:o.label0,dlabel:o.dlabel,values:o.values,marker:{colors:o.marker.colors,line:{color:r({},o.marker.line.color,{dflt:null}),width:r({},o.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:o.text,hovertext:o.hovertext,scalegroup:r({},o.scalegroup,{}),textinfo:r({},o.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:r({},p.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:y({},{keys:["label","color","value","text","percent"]}),textposition:r({},o.textposition,{values:["inside","none"],dflt:"inside"}),textfont:o.textfont,insidetextfont:o.insidetextfont,title:{text:o.title.text,font:o.title.font,position:r({},o.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:x({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900}],784:[function(u,q,W){var o=u("../../plots/plots");W.name="funnelarea",W.plot=function(p,x,y,e){o.plotBasePlot(W.name,p,x,y,e)},W.clean=function(p,x,y,e){o.cleanBasePlot(W.name,p,x,y,e)}},{"../../plots/plots":619}],785:[function(u,q,W){var o=u("../pie/calc");q.exports={calc:function(p,x){return o.calc(p,x)},crossTraceCalc:function(p){o.crossTraceCalc(p,{type:"funnelarea"})}}},{"../pie/calc":902}],786:[function(u,q,W){var o=u("../../lib"),p=u("./attributes"),x=u("../../plots/domain").defaults,y=u("../bar/defaults").handleText,e=u("../pie/defaults").handleLabelsAndValues;q.exports=function(r,t,i,n){function h(b,g){return o.coerce(r,t,p,b,g)}var s=h("labels"),a=h("values"),l=e(s,a),f=l.len;if(t._hasLabels=l.hasLabels,t._hasValues=l.hasValues,!t._hasLabels&&t._hasValues&&(h("label0"),h("dlabel")),f){t._length=f,h("marker.line.width")&&h("marker.line.color",n.paper_bgcolor),h("marker.colors"),h("scalegroup");var d,v=h("text"),m=h("texttemplate");if(m||(d=h("textinfo",Array.isArray(v)?"text+percent":"percent")),h("hovertext"),h("hovertemplate"),m||d&&d!=="none"){var c=h("textposition");y(r,t,n,h,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}x(t,n,h),h("title.text")&&(h("title.position"),o.coerceFont(h,"title.font",n.font)),h("aspectratio"),h("baseratio")}else t.visible=!1}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"../pie/defaults":903,"./attributes":783}],787:[function(u,q,W){q.exports={moduleType:"trace",name:"funnelarea",basePlotModule:u("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:u("./attributes"),layoutAttributes:u("./layout_attributes"),supplyDefaults:u("./defaults"),supplyLayoutDefaults:u("./layout_defaults"),calc:u("./calc").calc,crossTraceCalc:u("./calc").crossTraceCalc,plot:u("./plot"),style:u("./style"),styleOne:u("../pie/style_one"),meta:{}}},{"../pie/style_one":911,"./attributes":783,"./base_plot":784,"./calc":785,"./defaults":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(u,q,W){var o=u("../pie/layout_attributes").hiddenlabels;q.exports={hiddenlabels:o,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":907}],789:[function(u,q,W){var o=u("../../lib"),p=u("./layout_attributes");q.exports=function(x,y){function e(r,t){return o.coerce(x,y,p,r,t)}e("hiddenlabels"),e("funnelareacolorway",y.colorway),e("extendfunnelareacolors")}},{"../../lib":503,"./layout_attributes":788}],790:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../components/drawing"),x=u("../../lib"),y=x.strScale,e=x.strTranslate,r=u("../../lib/svg_text_utils"),t=u("../bar/plot").toMoveInsideBar,i=u("../bar/uniform_text"),n=i.recordMinTextSize,h=i.clearMinTextSize,s=u("../pie/helpers"),a=u("../pie/plot"),l=a.attachFxHandlers,f=a.determineInsideTextFont,d=a.layoutAreas,v=a.prerenderTitles,m=a.positionTitleOutside,c=a.formatSliceLabel;function b(g,w){return"l"+(w[0]-g[0])+","+(w[1]-g[1])}q.exports=function(g,w){var _=g._fullLayout;h("funnelarea",_),v(w,g),d(w,_._size),x.makeTraceGroups(_._funnelarealayer,w,"trace").each(function(T){var k=o.select(this),L=T[0],M=L.trace;(function(I){if(!I.length)return;var P=I[0],S=P.trace,E=S.aspectratio,D=S.baseratio;D>.999&&(D=.999);var F,H=Math.pow(D,2),V=P.vTotal,Q=V,K=V*H/(1-H)/V;function Z(){var be,Ae={x:be=Math.sqrt(K),y:-be};return[Ae.x,Ae.y]}var $,re,R=[];for(R.push(Z()),$=I.length-1;$>-1;$--)if(!(re=I[$]).hidden){var N=re.v/Q;K+=N,R.push(Z())}var U=1/0,te=-1/0;for($=0;$<R.length;$++)F=R[$],U=Math.min(U,F[1]),te=Math.max(te,F[1]);for($=0;$<R.length;$++)R[$][1]-=(te+U)/2;var j=R[R.length-1][0],Y=P.r,J=(te-U)/2,ee=Y/j,ne=Y/J*E;for(P.r=ne*J,$=0;$<R.length;$++)R[$][0]*=ee,R[$][1]*=ne;var se=[-(F=R[0])[0],F[1]],oe=[F[0],F[1]],he=0;for($=I.length-1;$>-1;$--)if(!(re=I[$]).hidden){var le=R[he+=1][0],de=R[he][1];re.TL=[-le,de],re.TR=[le,de],re.BL=se,re.BR=oe,re.pxmid=(xe=re.TR,we=re.BR,[.5*(xe[0]+we[0]),.5*(xe[1]+we[1])]),se=re.TL,oe=re.TR}var xe,we})(T),k.each(function(){var I=o.select(this).selectAll("g.slice").data(T);I.enter().append("g").classed("slice",!0),I.exit().remove(),I.each(function(S,E){if(S.hidden)o.select(this).selectAll("path,g").remove();else{S.pointNumber=S.i,S.curveNumber=M.index;var D=L.cx,F=L.cy,H=o.select(this),V=H.selectAll("path.surface").data([S]);V.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),H.call(l,g,T);var Q="M"+(D+S.TR[0])+","+(F+S.TR[1])+b(S.TR,S.BR)+b(S.BR,S.BL)+b(S.BL,S.TL)+"Z";V.attr("d",Q),c(g,S,L);var K=s.castOption(M.textposition,S.pts),Z=H.selectAll("g.slicetext").data(S.text&&K!=="none"?[0]:[]);Z.enter().append("g").classed("slicetext",!0),Z.exit().remove(),Z.each(function(){var $=x.ensureSingle(o.select(this),"text","",function(J){J.attr("data-notex",1)}),re=x.ensureUniformFontSize(g,f(M,S,_.font));$.text(S.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(p.font,re).call(r.convertToTspans,g);var R,N,U,te=p.bBox($.node()),j=Math.min(S.BL[1],S.BR[1])+F,Y=Math.max(S.TL[1],S.TR[1])+F;N=Math.max(S.TL[0],S.BL[0])+D,U=Math.min(S.TR[0],S.BR[0])+D,(R=t(N,U,j,Y,te,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=re.size,n(M.type,R,_),T[E].transform=R,$.attr("transform",x.getTextTransform(R))})}});var P=o.select(this).selectAll("g.titletext").data(M.title.text?[0]:[]);P.enter().append("g").classed("titletext",!0),P.exit().remove(),P.each(function(){var S=x.ensureSingle(o.select(this),"text","",function(F){F.attr("data-notex",1)}),E=M.title.text;M._meta&&(E=x.templateString(E,M._meta)),S.text(E).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(p.font,M.title.font).call(r.convertToTspans,g);var D=m(L,_._size);S.attr("transform",e(D.x,D.y)+y(Math.min(1,D.scale))+e(D.tx,D.ty))})})})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/plot":659,"../bar/uniform_text":664,"../pie/helpers":905,"../pie/plot":909,"@plotly/d3":58}],791:[function(u,q,W){var o=u("@plotly/d3"),p=u("../pie/style_one"),x=u("../bar/uniform_text").resizeText;q.exports=function(y){var e=y._fullLayout._funnelarealayer.selectAll(".trace");x(y,e,"funnelarea"),e.each(function(r){var t=r[0].trace,i=o.select(this);i.style({opacity:t.opacity}),i.selectAll("path.surface").each(function(n){o.select(this).call(p,n,t)})})}},{"../bar/uniform_text":664,"../pie/style_one":911,"@plotly/d3":58}],792:[function(u,q,W){var o=u("../scatter/attributes"),p=u("../../plots/attributes"),x=u("../../plots/font_attributes"),y=u("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=u("../../plots/template_attributes").hovertemplateAttrs,r=u("../../plots/template_attributes").texttemplateAttrs,t=u("../../components/colorscale/attributes"),i=u("../../lib/extend").extendFlat;q.exports=i({z:{valType:"data_array",editType:"calc"},x:i({},o.x,{impliedEdits:{xtype:"array"}}),x0:i({},o.x0,{impliedEdits:{xtype:"scaled"}}),dx:i({},o.dx,{impliedEdits:{xtype:"scaled"}}),y:i({},o.y,{impliedEdits:{ytype:"array"}}),y0:i({},o.y0,{impliedEdits:{ytype:"scaled"}}),dy:i({},o.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:i({},o.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:i({},o.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:i({},o.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:i({},o.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:i({},o.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:i({},o.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:y("x"),yhoverformat:y("y"),zhoverformat:y("z",1),hovertemplate:e(),texttemplate:r({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:x({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:i({},p.showlegend,{dflt:!1})},{transforms:void 0},t("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":926}],793:[function(u,q,W){var o=u("../../registry"),p=u("../../lib"),x=u("../../plots/cartesian/axes"),y=u("../../plots/cartesian/align_period"),e=u("../histogram2d/calc"),r=u("../../components/colorscale/calc"),t=u("./convert_column_xyz"),i=u("./clean_2d_array"),n=u("./interp2d"),h=u("./find_empties"),s=u("./make_bound_array"),a=u("../../constants/numerical").BADNUM;function l(f){for(var d=[],v=f.length,m=0;m<v;m++){var c=f[m];c!==a&&d.push(c)}return d}q.exports=function(f,d){var v,m,c,b,g,w,_,T,k,L,M,I=x.getFromId(f,d.xaxis||"x"),P=x.getFromId(f,d.yaxis||"y"),S=o.traceIs(d,"contour"),E=o.traceIs(d,"histogram"),D=o.traceIs(d,"gl2d"),F=S?"best":d.zsmooth;if(I._minDtick=0,P._minDtick=0,E)b=(M=e(f,d)).orig_x,v=M.x,m=M.x0,c=M.dx,T=M.orig_y,g=M.y,w=M.y0,_=M.dy,k=M.z;else{var H=d.z;p.isArray1D(H)?(t(d,I,P,"x","y",["z"]),v=d._x,g=d._y,H=d._z):(b=d.x?I.makeCalcdata(d,"x"):[],T=d.y?P.makeCalcdata(d,"y"):[],v=y(d,I,"x",b).vals,g=y(d,P,"y",T).vals,d._x=v,d._y=g),m=d.x0,c=d.dx,w=d.y0,_=d.dy,k=i(H,d,I,P)}function V(J){F=d._input.zsmooth=d.zsmooth=!1,p.warn('cannot use zsmooth: "fast": '+J)}if((I.rangebreaks||P.rangebreaks)&&(k=function(J,ee,ne){for(var se=[],oe=-1,he=0;he<ne.length;he++)if(ee[he]!==a){oe++,se[oe]=[];for(var le=0;le<ne[he].length;le++)J[le]!==a&&se[oe].push(ne[he][le])}return se}(v,g,k),E||(v=l(v),g=l(g),d._x=v,d._y=g)),E||!S&&!d.connectgaps||(d._emptypoints=h(k),n(k,d._emptypoints)),F==="fast"){if(I.type==="log"||P.type==="log")V("log axis found");else if(!E){if(v.length){var Q=(v[v.length-1]-v[0])/(v.length-1),K=Math.abs(Q/100);for(L=0;L<v.length-1;L++)if(Math.abs(v[L+1]-v[L]-Q)>K){V("x scale is not linear");break}}if(g.length&&F==="fast"){var Z=(g[g.length-1]-g[0])/(g.length-1),$=Math.abs(Z/100);for(L=0;L<g.length-1;L++)if(Math.abs(g[L+1]-g[L]-Z)>$){V("y scale is not linear");break}}}}var re=p.maxRowLength(k),R=d.xtype==="scaled"?"":v,N=s(d,R,m,c,re,I),U=d.ytype==="scaled"?"":g,te=s(d,U,w,_,k.length,P);D||(d._extremes[I._id]=x.findExtremes(I,N),d._extremes[P._id]=x.findExtremes(P,te));var j={x:N,y:te,z:k,text:d._text||d.text,hovertext:d._hovertext||d.hovertext};if(d.xperiodalignment&&b&&(j.orig_x=b),d.yperiodalignment&&T&&(j.orig_y=T),R&&R.length===N.length-1&&(j.xCenter=R),U&&U.length===te.length-1&&(j.yCenter=U),E&&(j.xRanges=M.xRanges,j.yRanges=M.yRanges,j.pts=M.pts),S||r(f,d,{vals:k,cLetter:"z"}),S&&d.contours&&d.contours.coloring==="heatmap"){var Y={type:d.type==="contour"?"heatmap":"histogram2d",xcalendar:d.xcalendar,ycalendar:d.ycalendar};j.xfill=s(Y,R,m,c,re,I),j.yfill=s(Y,U,w,_,k.length,P)}return[j]}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../../registry":638,"../histogram2d/calc":826,"./clean_2d_array":794,"./convert_column_xyz":796,"./find_empties":798,"./interp2d":801,"./make_bound_array":803}],794:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../lib"),x=u("../../constants/numerical").BADNUM;q.exports=function(y,e,r,t){var i,n,h,s,a,l;function f(g){if(o(g))return+g}if(e&&e.transpose){for(i=0,a=0;a<y.length;a++)i=Math.max(i,y[a].length);if(i===0)return!1;h=function(g){return g.length},s=function(g,w,_){return(g[_]||[])[w]}}else i=y.length,h=function(g,w){return g[w].length},s=function(g,w,_){return(g[w]||[])[_]};var d=function(g,w,_){return w===x||_===x?x:s(g,w,_)};function v(g){if(e&&e.type!=="carpet"&&e.type!=="contourcarpet"&&g&&g.type==="category"&&e["_"+g._id.charAt(0)].length){var w=g._id.charAt(0),_={},T=e["_"+w+"CategoryMap"]||e[w];for(a=0;a<T.length;a++)_[T[a]]=a;return function(k){var L=_[g._categories[k]];return L+1?L:x}}return p.identity}var m=v(r),c=v(t);t&&t.type==="category"&&(i=t._categories.length);var b=new Array(i);for(a=0;a<i;a++)for(n=r&&r.type==="category"?r._categories.length:h(y,a),b[a]=new Array(n),l=0;l<n;l++)b[a][l]=f(d(y,c(a),m(l)));return b}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],795:[function(u,q,W){q.exports={min:"zmin",max:"zmax"}},{}],796:[function(u,q,W){var o=u("../../lib"),p=u("../../constants/numerical").BADNUM,x=u("../../plots/cartesian/align_period");q.exports=function(y,e,r,t,i,n){var h=y._length,s=e.makeCalcdata(y,t),a=r.makeCalcdata(y,i);s=x(y,e,t,s).vals,a=x(y,r,i,a).vals;var l,f,d,v,m=y.text,c=m!==void 0&&o.isArray1D(m),b=y.hovertext,g=b!==void 0&&o.isArray1D(b),w=o.distinctVals(s),_=w.vals,T=o.distinctVals(a),k=T.vals,L=[],M=k.length,I=_.length;for(l=0;l<n.length;l++)L[l]=o.init2dArray(M,I);c&&(d=o.init2dArray(M,I)),g&&(v=o.init2dArray(M,I));var P=o.init2dArray(M,I);for(l=0;l<h;l++)if(s[l]!==p&&a[l]!==p){var S=o.findBin(s[l]+w.minDiff/2,_),E=o.findBin(a[l]+T.minDiff/2,k);for(f=0;f<n.length;f++){var D=y[n[f]];L[f][E][S]=D[l],P[E][S]=l}c&&(d[E][S]=m[l]),g&&(v[E][S]=b[l])}for(y["_"+t]=_,y["_"+i]=k,f=0;f<n.length;f++)y["_"+n[f]]=L[f];c&&(y._text=d),g&&(y._hovertext=v),e&&e.type==="category"&&(y["_"+t+"CategoryMap"]=_.map(function(F){return e._categories[F]})),r&&r.type==="category"&&(y["_"+i+"CategoryMap"]=k.map(function(F){return r._categories[F]})),y._after2before=P}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551}],797:[function(u,q,W){var o=u("../../lib"),p=u("./xyz_defaults"),x=u("./label_defaults"),y=u("../scatter/period_defaults"),e=u("./style_defaults"),r=u("../../components/colorscale/defaults"),t=u("./attributes");q.exports=function(i,n,h,s){function a(l,f){return o.coerce(i,n,t,l,f)}p(i,n,a,s)?(y(i,n,s,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hovertemplate"),x(a,s),e(i,n,a,s),a("hoverongaps"),a("connectgaps",o.isArray1D(n.z)&&n.zsmooth!==!1),r(i,n,s,a,{prefix:"",cLetter:"z"})):n.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../scatter/period_defaults":946,"./attributes":792,"./label_defaults":802,"./style_defaults":806,"./xyz_defaults":807}],798:[function(u,q,W){var o=u("../../lib").maxRowLength;q.exports=function(p){var x,y,e,r,t,i,n,h,s=[],a={},l=[],f=p[0],d=[],v=[0,0,0],m=o(p);for(y=0;y<p.length;y++)for(x=d,d=f,f=p[y+1]||[],e=0;e<m;e++)d[e]===void 0&&((i=(d[e-1]!==void 0?1:0)+(d[e+1]!==void 0?1:0)+(x[e]!==void 0?1:0)+(f[e]!==void 0?1:0))?(y===0&&i++,e===0&&i++,y===p.length-1&&i++,e===d.length-1&&i++,i<4&&(a[[y,e]]=[y,e,i]),s.push([y,e,i])):l.push([y,e]));for(;l.length;){for(n={},h=!1,t=l.length-1;t>=0;t--)(i=((a[[(y=(r=l[t])[0])-1,e=r[1]]]||v)[2]+(a[[y+1,e]]||v)[2]+(a[[y,e-1]]||v)[2]+(a[[y,e+1]]||v)[2])/20)&&(n[r]=[y,e,i],l.splice(t,1),h=!0);if(!h)throw"findEmpties iterated with no new neighbors";for(r in n)a[r]=n[r],s.push(n[r])}return s.sort(function(c,b){return b[2]-c[2]})}},{"../../lib":503}],799:[function(u,q,W){var o=u("../../components/fx"),p=u("../../lib"),x=u("../../plots/cartesian/axes"),y=u("../../components/colorscale").extractOpts;q.exports=function(e,r,t,i,n){n||(n={});var h,s,a,l,f=n.isContour,d=e.cd[0],v=d.trace,m=e.xa,c=e.ya,b=d.x,g=d.y,w=d.z,_=d.xCenter,T=d.yCenter,k=d.zmask,L=v.zhoverformat,M=b,I=g;if(e.index!==!1){try{a=Math.round(e.index[1]),l=Math.round(e.index[0])}catch{return void p.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(a<0||a>=w[0].length||l<0||l>w.length)return}else{if(o.inbox(r-b[0],r-b[b.length-1],0)>0||o.inbox(t-g[0],t-g[g.length-1],0)>0)return;if(f){var P;for(M=[2*b[0]-b[1]],P=1;P<b.length;P++)M.push((b[P]+b[P-1])/2);for(M.push([2*b[b.length-1]-b[b.length-2]]),I=[2*g[0]-g[1]],P=1;P<g.length;P++)I.push((g[P]+g[P-1])/2);I.push([2*g[g.length-1]-g[g.length-2]])}a=Math.max(0,Math.min(M.length-2,p.findBin(r,M))),l=Math.max(0,Math.min(I.length-2,p.findBin(t,I)))}var S,E,D=m.c2p(b[a]),F=m.c2p(b[a+1]),H=c.c2p(g[l]),V=c.c2p(g[l+1]);f?(S=d.orig_x||b,E=d.orig_y||g,F=D,h=S[a],V=H,s=E[l]):(S=d.orig_x||_||b,E=d.orig_y||T||g,h=_?S[a]:(S[a]+S[a+1])/2,s=T?E[l]:(E[l]+E[l+1])/2,m&&m.type==="category"&&(h=b[a]),c&&c.type==="category"&&(s=g[l]),v.zsmooth&&(D=F=m.c2p(h),H=V=c.c2p(s)));var Q=w[l][a];if(k&&!k[l][a]&&(Q=void 0),Q!==void 0||v.hoverongaps){var K;Array.isArray(d.hovertext)&&Array.isArray(d.hovertext[l])?K=d.hovertext[l][a]:Array.isArray(d.text)&&Array.isArray(d.text[l])&&(K=d.text[l][a]);var Z=y(v),$={type:"linear",range:[Z.min,Z.max],hoverformat:L,_separators:m._separators,_numFormat:m._numFormat},re=x.tickText($,Q,"hover").text;return[p.extendFlat(e,{index:v._after2before?v._after2before[l][a]:[l,a],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:D,x1:F,y0:H,y1:V,xLabelVal:h,yLabelVal:s,zLabelVal:Q,zLabel:re,text:K})]}}},{"../../components/colorscale":378,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],800:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults"),calc:u("./calc"),plot:u("./plot"),colorbar:u("./colorbar"),style:u("./style"),hoverPoints:u("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:u("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":792,"./calc":793,"./colorbar":795,"./defaults":797,"./hover":799,"./plot":804,"./style":805}],801:[function(u,q,W){var o=u("../../lib"),p=[[-1,0],[1,0],[0,-1],[0,1]];function x(e){return .5-.25*Math.min(1,.5*e)}function y(e,r,t){var i,n,h,s,a,l,f,d,v,m,c,b,g,w=0;for(s=0;s<r.length;s++){for(n=(i=r[s])[0],h=i[1],c=e[n][h],m=0,v=0,a=0;a<4;a++)(f=e[n+(l=p[a])[0]])&&(d=f[h+l[1]])!==void 0&&(m===0?b=g=d:(b=Math.min(b,d),g=Math.max(g,d)),v++,m+=d);if(v===0)throw"iterateInterp2d order is wrong: no defined neighbors";e[n][h]=m/v,c===void 0?v<4&&(w=1):(e[n][h]=(1+t)*e[n][h]-t*c,g>b&&(w=Math.max(w,Math.abs(e[n][h]-c)/(g-b))))}return w}q.exports=function(e,r){var t,i=1;for(y(e,r),t=0;t<r.length&&!(r[t][2]<4);t++);for(r=r.slice(t),t=0;t<100&&i>.01;t++)i=y(e,r,x(i));return i>.01&&o.log("interp2d didn't converge quickly",i),e}},{"../../lib":503}],802:[function(u,q,W){var o=u("../../lib");q.exports=function(p,x){p("texttemplate");var y=o.extendFlat({},x.font,{color:"auto",size:"auto"});o.coerceFont(p,"textfont",y)}},{"../../lib":503}],803:[function(u,q,W){var o=u("../../registry"),p=u("../../lib").isArrayOrTypedArray;q.exports=function(x,y,e,r,t,i){var n,h,s,a=[],l=o.traceIs(x,"contour"),f=o.traceIs(x,"histogram"),d=o.traceIs(x,"gl2d");if(p(y)&&y.length>1&&!f&&i.type!=="category"){var v=y.length;if(!(v<=t))return l?y.slice(0,t):y.slice(0,t+1);if(l||d)a=y.slice(0,t);else if(t===1)a=[y[0]-.5,y[0]+.5];else{for(a=[1.5*y[0]-.5*y[1]],s=1;s<v;s++)a.push(.5*(y[s-1]+y[s]));a.push(1.5*y[v-1]-.5*y[v-2])}if(v<t){var m=a[a.length-1],c=m-a[a.length-2];for(s=v;s<t;s++)m+=c,a.push(m)}}else{var b=x[i._id.charAt(0)+"calendar"];for(f?n=i.r2c(e,0,b):p(y)&&y.length===1?n=y[0]:e===void 0?n=0:n=(i.type==="log"?i.d2c:i.r2c)(e,0,b),h=r||1,s=l||d?0:-.5;s<t;s++)a.push(n+h*s)}return a}},{"../../lib":503,"../../registry":638}],804:[function(u,q,W){var o=u("@plotly/d3"),p=u("tinycolor2"),x=u("../../registry"),y=u("../../components/drawing"),e=u("../../plots/cartesian/axes"),r=u("../../lib"),t=u("../../lib/svg_text_utils"),i=u("../scatter/format_labels"),n=u("../../components/color"),h=u("../../components/colorscale").extractOpts,s=u("../../components/colorscale").makeColorScaleFuncFromTrace,a=u("../../constants/xmlns_namespaces"),l=u("../../constants/alignment").LINE_SPACING;function f(b){return b.selectAll("g.heatmap-label")}function d(b){f(b).remove()}function v(b,g){var w=g.length-2,_=r.constrain(r.findBin(b,g),0,w),T=g[_],k=g[_+1],L=r.constrain(_+(b-T)/(k-T)-.5,0,w),M=Math.round(L),I=Math.abs(L-M);return L&&L!==w&&I?{bin0:M,frac:I,bin1:Math.round(M+I/(L-M))}:{bin0:M,bin1:M,frac:0}}function m(b,g){var w=g.length-1,_=r.constrain(r.findBin(b,g),0,w),T=g[_],k=(b-T)/(g[_+1]-T)||0;return k<=0?{bin0:_,bin1:_,frac:0}:k<.5?{bin0:_,bin1:_+1,frac:k}:{bin0:_+1,bin1:_,frac:1-k}}function c(b,g,w){b[g]=w[0],b[g+1]=w[1],b[g+2]=w[2],b[g+3]=Math.round(255*w[3])}q.exports=function(b,g,w,_){var T=g.xaxis,k=g.yaxis;r.makeTraceGroups(_,w,"hm").each(function(L){var M,I,P,S,E,D,F,H,V=o.select(this),Q=L[0],K=Q.trace,Z=K.xgap||0,$=K.ygap||0,re=Q.z,R=Q.x,N=Q.y,U=Q.xCenter,te=Q.yCenter,j=x.traceIs(K,"contour"),Y=j?"best":K.zsmooth,J=re.length,ee=r.maxRowLength(re),ne=!1,se=!1;for(D=0;M===void 0&&D<R.length-1;)M=T.c2p(R[D]),D++;for(D=R.length-1;I===void 0&&D>0;)I=T.c2p(R[D]),D--;for(I<M&&(P=I,I=M,M=P,ne=!0),D=0;S===void 0&&D<N.length-1;)S=k.c2p(N[D]),D++;for(D=N.length-1;E===void 0&&D>0;)E=k.c2p(N[D]),D--;if(E<S&&(P=S,S=E,E=P,se=!0),j&&(U=R,te=N,R=Q.xfill,N=Q.yfill),Y!=="fast"){var oe=Y==="best"?0:.5;M=Math.max(-oe*T._length,M),I=Math.min((1+oe)*T._length,I),S=Math.max(-oe*k._length,S),E=Math.min((1+oe)*k._length,E)}var he,le,de=Math.round(I-M),xe=Math.round(E-S);if(de<=0||xe<=0)return V.selectAll("image").data([]).exit().remove(),void d(V);Y==="fast"?(he=ee,le=J):(he=de,le=xe);var we=document.createElement("canvas");we.width=he,we.height=le;var be,Ae,fe=we.getContext("2d"),me=s(K,{noNumericCheck:!0,returnArray:!0});Y==="fast"?(be=ne?function(zr){return ee-1-zr}:r.identity,Ae=se?function(zr){return J-1-zr}:r.identity):(be=function(zr){return r.constrain(Math.round(T.c2p(R[zr])-M),0,de)},Ae=function(zr){return r.constrain(Math.round(k.c2p(N[zr])-S),0,xe)});var ke,Te,Me,Oe,Fe=Ae(0),qe=[Fe,Fe],et=ne?0:1,ze=se?0:1,Ue=0,We=0,Ze=0,nt=0;function ft(zr,Ar){if(zr!==void 0){var qr=me(zr);return qr[0]=Math.round(qr[0]),qr[1]=Math.round(qr[1]),qr[2]=Math.round(qr[2]),Ue+=Ar,We+=qr[0]*Ar,Ze+=qr[1]*Ar,nt+=qr[2]*Ar,qr}return[0,0,0,0]}function xt(zr,Ar,qr,On){var Fr=zr[qr.bin0];if(Fr===void 0)return ft(void 0,1);var on,Mn=zr[qr.bin1],bn=Ar[qr.bin0],Dn=Ar[qr.bin1],tr=Mn-Fr||0,Ot=bn-Fr||0;return on=Mn===void 0?Dn===void 0?0:bn===void 0?2*(Dn-Fr):2*(2*Dn-bn-Fr)/3:Dn===void 0?bn===void 0?0:2*(2*Fr-Mn-bn)/3:bn===void 0?2*(2*Dn-Mn-Fr)/3:Dn+Fr-Mn-bn,ft(Fr+qr.frac*tr+On.frac*(Ot+qr.frac*on))}if(Y){var It,Et=0;try{It=new Uint8Array(de*xe*4)}catch{It=new Array(de*xe*4)}if(Y==="best"){var it,rt,At,Gt=U||R,Qt=te||N,Ve=new Array(Gt.length),Ye=new Array(Qt.length),Be=new Array(de),Je=U?m:v,Se=te?m:v;for(D=0;D<Gt.length;D++)Ve[D]=Math.round(T.c2p(Gt[D])-M);for(D=0;D<Qt.length;D++)Ye[D]=Math.round(k.c2p(Qt[D])-S);for(D=0;D<de;D++)Be[D]=Je(D,Ve);for(F=0;F<xe;F++)for(rt=re[(it=Se(F,Ye)).bin0],At=re[it.bin1],D=0;D<de;D++,Et+=4)c(It,Et,Oe=xt(rt,At,Be[D],it))}else for(F=0;F<J;F++)for(Me=re[F],qe=Ae(F),D=0;D<de;D++)Oe=ft(Me[D],1),c(It,Et=4*(qe*de+be(D)),Oe);var Pe=fe.createImageData(de,xe);try{Pe.data.set(It)}catch{var De=Pe.data,Ie=De.length;for(F=0;F<Ie;F++)De[F]=It[F]}fe.putImageData(Pe,0,0)}else{var $e=Math.floor(Z/2),st=Math.floor($/2);for(F=0;F<J;F++)if(Me=re[F],qe.reverse(),qe[ze]=Ae(F+1),qe[0]!==qe[1]&&qe[0]!==void 0&&qe[1]!==void 0)for(ke=[Te=be(0),Te],D=0;D<ee;D++)ke.reverse(),ke[et]=be(D+1),ke[0]!==ke[1]&&ke[0]!==void 0&&ke[1]!==void 0&&(Oe=ft(Me[D],(ke[1]-ke[0])*(qe[1]-qe[0])),fe.fillStyle="rgba("+Oe.join(",")+")",fe.fillRect(ke[0]+$e,qe[0]+st,ke[1]-ke[0]-Z,qe[1]-qe[0]-$))}We=Math.round(We/Ue),Ze=Math.round(Ze/Ue),nt=Math.round(nt/Ue);var dt=p("rgb("+We+","+Ze+","+nt+")");b._hmpixcount=(b._hmpixcount||0)+Ue,b._hmlumcount=(b._hmlumcount||0)+Ue*dt.getLuminance();var ut=V.selectAll("image").data(L);ut.enter().append("svg:image").attr({xmlns:a.svg,preserveAspectRatio:"none"}),ut.attr({height:xe,width:de,x:M,y:S,"xlink:href":we.toDataURL("image/png")}),d(V);var Lt=K.texttemplate;if(Lt){var lt=h(K),Ct={type:"linear",range:[lt.min,lt.max],_separators:T._separators,_numFormat:T._numFormat},Pt=K.type==="histogram2dcontour",Ke=K.type==="contour",mt=Ke?J-1:J,Dt=Ke?1:0,Bt=Ke?ee-1:ee,Zt=[];for(D=Ke?1:0;D<mt;D++){var Re;if(Ke)Re=Q.y[D];else if(Pt){if(D===0||D===J-1)continue;Re=Q.y[D]}else if(Q.yCenter)Re=Q.yCenter[D];else{if(D+1===J&&Q.y[D+1]===void 0)continue;Re=(Q.y[D]+Q.y[D+1])/2}var ct=Math.round(k.c2p(Re));if(!(0>ct||ct>k._length))for(F=Dt;F<Bt;F++){var wt;if(Ke)wt=Q.x[F];else if(Pt){if(F===0||F===ee-1)continue;wt=Q.x[F]}else if(Q.xCenter)wt=Q.xCenter[F];else{if(F+1===ee&&Q.x[F+1]===void 0)continue;wt=(Q.x[F]+Q.x[F+1])/2}var Rt=Math.round(T.c2p(wt));if(!(0>Rt||Rt>T._length)){var Vt=i({x:wt,y:Re},K,b._fullLayout);Vt.x=wt,Vt.y=Re;var rr=Q.z[D][F];rr===void 0?(Vt.z="",Vt.zLabel=""):(Vt.z=rr,Vt.zLabel=e.tickText(Ct,rr,"hover").text);var qt=Q.text&&Q.text[D]&&Q.text[D][F];qt!==void 0&&qt!==!1||(qt=""),Vt.text=qt;var Jt=r.texttemplateString(Lt,Vt,b._fullLayout._d3locale,Vt,K._meta||{});if(Jt){var or=Jt.split("<br>"),gr=or.length,dr=0;for(H=0;H<gr;H++)dr=Math.max(dr,or[H].length);Zt.push({l:gr,c:dr,t:Jt,x:Rt,y:ct,z:rr})}}}}var ur=K.textfont,cr=ur.family,mr=ur.size,Dr=b._fullLayout.font.size;if(!mr||mr==="auto"){var yr=1/0,Br=1/0,Kr=0,an=0;for(H=0;H<Zt.length;H++){var Ln=Zt[H];if(Kr=Math.max(Kr,Ln.l),an=Math.max(an,Ln.c),H<Zt.length-1){var Pn=Zt[H+1],An=Math.abs(Pn.x-Ln.x),tn=Math.abs(Pn.y-Ln.y);An&&(yr=Math.min(yr,An)),tn&&(Br=Math.min(Br,tn))}}isFinite(yr)&&isFinite(Br)?(yr-=Z,Br-=$,yr/=an,Br/=Kr,yr/=l/2,Br/=l,mr=Math.min(Math.floor(yr),Math.floor(Br),Dr)):mr=Dr}if(mr<=0||!isFinite(mr))return;f(V).data(Zt).enter().append("g").classed("heatmap-label",1).append("text").attr("text-anchor","middle").each(function(zr){var Ar=o.select(this),qr=ur.color;qr&&qr!=="auto"||(qr=n.contrast("rgba("+me(zr.z).join()+")")),Ar.attr("data-notex",1).call(t.positionText,function(On){return On.x}(zr),function(On){return On.y-mr*(On.l*l/2-1)}(zr)).call(y.font,cr,mr,qr).text(zr.t).call(t.convertToTspans,b)})}})}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"../../constants/alignment":471,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../scatter/format_labels":935,"@plotly/d3":58,tinycolor2:312}],805:[function(u,q,W){var o=u("@plotly/d3");q.exports=function(p){o.select(p).selectAll(".hm image").style("opacity",function(x){return x.trace.opacity})}},{"@plotly/d3":58}],806:[function(u,q,W){q.exports=function(o,p,x){x("zsmooth")===!1&&(x("xgap"),x("ygap")),x("zhoverformat")}},{}],807:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../lib"),x=u("../../registry");function y(e,r){var t=r(e);return(t?r(e+"type","array"):"scaled")==="scaled"&&(r(e+"0"),r("d"+e)),t}q.exports=function(e,r,t,i,n,h){var s,a,l=t("z");if(n=n||"x",h=h||"y",l===void 0||!l.length)return 0;if(p.isArray1D(e.z)){s=t(n),a=t(h);var f=p.minRowLength(s),d=p.minRowLength(a);if(f===0||d===0)return 0;r._length=Math.min(f,d,l.length)}else{if(s=y(n,t),a=y(h,t),!function(v){for(var m,c=!0,b=!1,g=!1,w=0;w<v.length;w++){if(m=v[w],!p.isArrayOrTypedArray(m)){c=!1;break}m.length>0&&(b=!0);for(var _=0;_<m.length;_++)if(o(m[_])){g=!0;break}}return c&&b&&g}(l))return 0;t("transpose"),r._length=null}return e.type==="heatmapgl"||x.getComponentMethod("calendars","handleTraceDefaults")(e,r,[n,h],i),!0}},{"../../lib":503,"../../registry":638,"fast-isnumeric":190}],808:[function(u,q,W){for(var o=u("../heatmap/attributes"),p=u("../../components/colorscale/attributes"),x=u("../../lib/extend").extendFlat,y=u("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],r={},t=0;t<e.length;t++){var i=e[t];r[i]=o[i]}r.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},x(r,p("",{cLetter:"z",autoColorDflt:!1})),q.exports=y(r,"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../heatmap/attributes":792}],809:[function(u,q,W){var o=u("../../../stackgl_modules").gl_heatmap2d,p=u("../../plots/cartesian/axes"),x=u("../../lib/str2rgbarray");function y(r,t){this.scene=r,this.uid=t,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=o(r.glplot,this.options),this.heatmap._trace=this}var e=y.prototype;e.handlePick=function(r){var t=this.options,i=t.shape,n=r.pointId,h=n%i[0],s=Math.floor(n/i[0]),a=n;return{trace:this,dataCoord:r.dataCoord,traceCoord:[t.x[h],t.y[s],t.z[a]],textLabel:this.textLabels[n],name:this.name,pointIndex:[s,h],hoverinfo:this.hoverinfo}},e.update=function(r,t){var i=t[0];this.index=r.index,this.name=r.name,this.hoverinfo=r.hoverinfo;var n=i.z;this.options.z=[].concat.apply([],n);var h=n[0].length,s=n.length;this.options.shape=[h,s],this.options.x=i.x,this.options.y=i.y,this.options.zsmooth=r.zsmooth;var a=function(m){for(var c=m.colorscale,b=m.zmin,g=m.zmax,w=c.length,_=new Array(w),T=new Array(4*w),k=0;k<w;k++){var L=c[k],M=x(L[1]);_[k]=b+L[0]*(g-b);for(var I=0;I<4;I++)T[4*k+I]=M[I]}return{colorLevels:_,colorValues:T}}(r);this.options.colorLevels=a.colorLevels,this.options.colorValues=a.colorValues,this.textLabels=[].concat.apply([],r.text),this.heatmap.update(this.options);var l,f,d=this.scene.xaxis,v=this.scene.yaxis;r.zsmooth===!1&&(l={ppad:i.x[1]-i.x[0]},f={ppad:i.y[1]-i.y[0]}),r._extremes[d._id]=p.findExtremes(d,i.x,l),r._extremes[v._id]=p.findExtremes(v,i.y,f)},e.dispose=function(){this.heatmap.dispose()},q.exports=function(r,t,i){var n=new y(r,t.uid);return n.update(t,i),n}},{"../../../stackgl_modules":1120,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554}],810:[function(u,q,W){var o=u("../../lib"),p=u("../heatmap/xyz_defaults"),x=u("../../components/colorscale/defaults"),y=u("./attributes");q.exports=function(e,r,t,i){function n(h,s){return o.coerce(e,r,y,h,s)}p(e,r,n,i)?(n("text"),n("zsmooth"),x(e,r,i,n,{prefix:"",cLetter:"z"})):r.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/xyz_defaults":807,"./attributes":808}],811:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults"),colorbar:u("../heatmap/colorbar"),calc:u("../heatmap/calc"),plot:u("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:u("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":596,"../heatmap/calc":793,"../heatmap/colorbar":795,"./attributes":808,"./convert":809,"./defaults":810}],812:[function(u,q,W){var o=u("../bar/attributes"),p=u("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=u("../../plots/template_attributes").hovertemplateAttrs,y=u("../../plots/template_attributes").texttemplateAttrs,e=u("../../plots/font_attributes"),r=u("./bin_attributes"),t=u("./constants"),i=u("../../lib/extend").extendFlat;q.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:p("x"),yhoverformat:p("y"),text:i({},o.text,{}),hovertext:i({},o.hovertext,{}),orientation:o.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:r("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:r("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:x({},{keys:t.eventDataKeys}),texttemplate:y({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:i({},o.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:o.insidetextanchor,textangle:o.textangle,cliponaxis:o.cliponaxis,constraintext:o.constraintext,marker:o.marker,offsetgroup:o.offsetgroup,alignmentgroup:o.alignmentgroup,selected:o.selected,unselected:o.unselected,_deprecated:{bardir:o._deprecated.bardir}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../bar/attributes":648,"./bin_attributes":814,"./constants":818}],813:[function(u,q,W){q.exports=function(o,p){for(var x=o.length,y=0,e=0;e<x;e++)p[e]?(o[e]/=p[e],y+=o[e]):o[e]=null;return y}},{}],814:[function(u,q,W){q.exports=function(o,p){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],815:[function(u,q,W){var o=u("fast-isnumeric");q.exports={count:function(p,x,y){return y[p]++,1},sum:function(p,x,y,e){var r=e[x];return o(r)?(r=Number(r),y[p]+=r,r):0},avg:function(p,x,y,e,r){var t=e[x];return o(t)&&(t=Number(t),y[p]+=t,r[p]++),0},min:function(p,x,y,e){var r=e[x];if(o(r)){if(r=Number(r),!o(y[p]))return y[p]=r,r;if(y[p]>r){var t=r-y[p];return y[p]=r,t}}return 0},max:function(p,x,y,e){var r=e[x];if(o(r)){if(r=Number(r),!o(y[p]))return y[p]=r,r;if(y[p]<r){var t=r-y[p];return y[p]=r,t}}return 0}}},{"fast-isnumeric":190}],816:[function(u,q,W){var o=u("../../constants/numerical"),p=o.ONEAVGYEAR,x=o.ONEAVGMONTH,y=o.ONEDAY,e=o.ONEHOUR,r=o.ONEMIN,t=o.ONESEC,i=u("../../plots/cartesian/axes").tickIncrement;function n(l,f,d,v){if(l*f<=0)return 1/0;for(var m=Math.abs(f-l),c=d.type==="date",b=h(m,c),g=0;g<10;g++){var w=h(80*b,c);if(b===w||!s(w,l,f,c,d,v))break;b=w}return b}function h(l,f){return f&&l>t?l>y?l>1.1*p?p:l>1.1*x?x:y:l>e?e:l>r?r:t:Math.pow(10,Math.floor(Math.log(l)/Math.LN10))}function s(l,f,d,v,m,c){if(v&&l>y){var b=a(f,m,c),g=a(d,m,c),w=l===p?0:1;return b[w]!==g[w]}return Math.floor(d/l)-Math.floor(f/l)>.1}function a(l,f,d){var v=f.c2d(l,p,d).split("-");return v[0]===""&&(v.unshift(),v[0]="-"+v[0]),v}q.exports=function(l,f,d,v,m){var c,b,g=-1.1*f,w=-.1*f,_=l-w,T=d[0],k=d[1],L=Math.min(n(T+w,T+_,v,m),n(k+w,k+_,v,m)),M=Math.min(n(T+g,T+w,v,m),n(k+g,k+w,v,m));if(L>M&&M<Math.abs(k-T)/4e3?(c=L,b=!1):(c=Math.min(L,M),b=!0),v.type==="date"&&c>y){var I=c===p?1:6,P=c===p?"M12":"M1";return function(S,E){var D=v.c2d(S,p,m),F=D.indexOf("-",I);F>0&&(D=D.substr(0,F));var H=v.d2c(D,0,m);if(H<S){var V=i(H,P,!1,m);(H+V)/2<S+l&&(H=V)}return E&&b?i(H,P,!0,m):H}}return function(S,E){var D=c*Math.round(S/c);return D+c/10<S&&D+.9*c<S+l&&(D+=c),E&&b&&(D-=c),D}}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554}],817:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../lib"),x=u("../../registry"),y=u("../../plots/cartesian/axes"),e=u("../bar/arrays_to_calcdata"),r=u("./bin_functions"),t=u("./norm_functions"),i=u("./average"),n=u("./bin_label_vals");function h(s,a,l,f,d){var v,m,c,b,g,w,_,T=f+"bins",k=s._fullLayout,L=a["_"+f+"bingroup"],M=k._histogramBinOpts[L],I=k.barmode==="overlay",P=function(le){return l.r2c(le,0,b)},S=function(le){return l.c2r(le,0,b)},E=l.type==="date"?function(le){return le||le===0?p.cleanDate(le,null,b):null}:function(le){return o(le)?Number(le):null};function D(le,de,xe){de[le+"Found"]?(de[le]=E(de[le]),de[le]===null&&(de[le]=xe[le])):(w[le]=de[le]=xe[le],p.nestedProperty(m[0],T+"."+le).set(xe[le]))}if(a["_"+f+"autoBinFinished"])delete a["_"+f+"autoBinFinished"];else{m=M.traces;var F=[],H=!0,V=!1,Q=!1;for(v=0;v<m.length;v++)if((c=m[v]).visible){var K=M.dirs[v];g=c["_"+K+"pos0"]=l.makeCalcdata(c,K),F=p.concat(F,g),delete c["_"+f+"autoBinFinished"],a.visible===!0&&(H?H=!1:(delete c._autoBin,c["_"+f+"autoBinFinished"]=1),x.traceIs(c,"2dMap")&&(V=!0),c.type==="histogram2dcontour"&&(Q=!0))}b=m[0][f+"calendar"];var Z=y.autoBin(F,l,M.nbins,V,b,M.sizeFound&&M.size),$=m[0]._autoBin={};if(w=$[M.dirs[0]]={},Q&&(M.size||(Z.start=S(y.tickIncrement(P(Z.start),Z.size,!0,b))),M.end===void 0&&(Z.end=S(y.tickIncrement(P(Z.end),Z.size,!1,b)))),I&&!x.traceIs(a,"2dMap")&&Z._dataSpan===0&&l.type!=="category"&&l.type!=="multicategory"){if(d)return[Z,g,!0];Z=function(le,de,xe,we,be){var Ae,fe,me,ke=le._fullLayout,Te=function(xt,It){for(var Et=It.xaxis,it=It.yaxis,rt=It.orientation,At=[],Gt=xt._fullData,Qt=0;Qt<Gt.length;Qt++){var Ve=Gt[Qt];Ve.type==="histogram"&&Ve.visible===!0&&Ve.orientation===rt&&Ve.xaxis===Et&&Ve.yaxis===it&&At.push(Ve)}return At}(le,de),Me=!1,Oe=1/0,Fe=[de];for(Ae=0;Ae<Te.length;Ae++)if((fe=Te[Ae])===de)Me=!0;else if(Me){var qe=h(le,fe,xe,we,!0),et=qe[0],ze=qe[2];fe["_"+we+"autoBinFinished"]=1,fe["_"+we+"pos0"]=qe[1],ze?Fe.push(fe):Oe=Math.min(Oe,et.size)}else me=ke._histogramBinOpts[fe["_"+we+"bingroup"]],Oe=Math.min(Oe,me.size||fe[be].size);var Ue=new Array(Fe.length);for(Ae=0;Ae<Fe.length;Ae++)for(var We=Fe[Ae]["_"+we+"pos0"],Ze=0;Ze<We.length;Ze++)if(We[Ze]!==void 0){Ue[Ae]=We[Ze];break}for(isFinite(Oe)||(Oe=p.distinctVals(Ue).minDiff),Ae=0;Ae<Fe.length;Ae++){var nt=(fe=Fe[Ae])[we+"calendar"],ft={start:xe.c2r(Ue[Ae]-Oe/2,0,nt),end:xe.c2r(Ue[Ae]+Oe/2,0,nt),size:Oe};fe._input[be]=fe[be]=ft,(me=ke._histogramBinOpts[fe["_"+we+"bingroup"]])&&p.extendFlat(me,ft)}return de[be]}(s,a,l,f,T)}(_=c.cumulative||{}).enabled&&_.currentbin!=="include"&&(_.direction==="decreasing"?Z.start=S(y.tickIncrement(P(Z.start),Z.size,!0,b)):Z.end=S(y.tickIncrement(P(Z.end),Z.size,!1,b))),M.size=Z.size,M.sizeFound||(w.size=Z.size,p.nestedProperty(m[0],T+".size").set(Z.size)),D("start",M,Z),D("end",M,Z)}g=a["_"+f+"pos0"],delete a["_"+f+"pos0"];var re=a._input[T]||{},R=p.extendFlat({},M),N=M.start,U=l.r2l(re.start),te=U!==void 0;if((M.startFound||te)&&U!==l.r2l(N)){var j=te?U:p.aggNums(Math.min,null,g),Y={type:l.type==="category"||l.type==="multicategory"?"linear":l.type,r2l:l.r2l,dtick:M.size,tick0:N,calendar:b,range:[j,y.tickIncrement(j,M.size,!1,b)].map(l.l2r)},J=y.tickFirst(Y);J>l.r2l(j)&&(J=y.tickIncrement(J,M.size,!0,b)),R.start=l.l2r(J),te||p.nestedProperty(a,T+".start").set(R.start)}var ee=M.end,ne=l.r2l(re.end),se=ne!==void 0;if((M.endFound||se)&&ne!==l.r2l(ee)){var oe=se?ne:p.aggNums(Math.max,null,g);R.end=l.l2r(oe),se||p.nestedProperty(a,T+".start").set(R.end)}var he="autobin"+f;return a._input[he]===!1&&(a._input[T]=p.extendFlat({},a[T]||{}),delete a._input[he],delete a[he]),[R,g]}q.exports={calc:function(s,a){var l,f,d,v,m=[],c=[],b=y.getFromId(s,a.orientation==="h"?a.yaxis:a.xaxis),g=a.orientation==="h"?"y":"x",w={x:"y",y:"x"}[g],_=a[g+"calendar"],T=a.cumulative,k=h(s,a,b,g),L=k[0],M=k[1],I=typeof L.size=="string",P=[],S=I?P:L,E=[],D=[],F=[],H=0,V=a.histnorm,Q=a.histfunc,K=V.indexOf("density")!==-1;T.enabled&&K&&(V=V.replace(/ ?density$/,""),K=!1);var Z,$=Q==="max"||Q==="min"?null:0,re=r.count,R=t[V],N=!1,U=function(Ae){return b.r2c(Ae,0,_)};for(p.isArrayOrTypedArray(a[w])&&Q!=="count"&&(Z=a[w],N=Q==="avg",re=r[Q]),l=U(L.start),d=U(L.end)+(l-y.tickIncrement(l,L.size,!1,_))/1e6;l<d&&m.length<1e6&&(f=y.tickIncrement(l,L.size,!1,_),m.push((l+f)/2),c.push($),F.push([]),P.push(l),K&&E.push(1/(f-l)),N&&D.push(0),!(f<=l));)l=f;P.push(l),I||b.type!=="date"||(S={start:U(S.start),end:U(S.end),size:S.size}),s._fullLayout._roundFnOpts||(s._fullLayout._roundFnOpts={});var te=a["_"+g+"bingroup"],j={leftGap:1/0,rightGap:1/0};te&&(s._fullLayout._roundFnOpts[te]||(s._fullLayout._roundFnOpts[te]=j),j=s._fullLayout._roundFnOpts[te]);var Y,J=c.length,ee=!0,ne=j.leftGap,se=j.rightGap,oe={};for(l=0;l<M.length;l++){var he=M[l];(v=p.findBin(he,S))>=0&&v<J&&(H+=re(v,l,c,Z,D),ee&&F[v].length&&he!==M[F[v][0]]&&(ee=!1),F[v].push(l),oe[l]=v,ne=Math.min(ne,he-P[v]),se=Math.min(se,P[v+1]-he))}j.leftGap=ne,j.rightGap=se,ee||(Y=function(Ae,fe){return function(){var me=s._fullLayout._roundFnOpts[te];return n(me.leftGap,me.rightGap,P,b,_)(Ae,fe)}}),N&&(H=i(c,D)),R&&R(c,H,E),T.enabled&&function(Ae,fe,me){var ke,Te,Me;function Oe(qe){Me=Ae[qe],Ae[qe]/=2}function Fe(qe){Te=Ae[qe],Ae[qe]=Me+Te/2,Me+=Te}if(me==="half")if(fe==="increasing")for(Oe(0),ke=1;ke<Ae.length;ke++)Fe(ke);else for(Oe(Ae.length-1),ke=Ae.length-2;ke>=0;ke--)Fe(ke);else if(fe==="increasing"){for(ke=1;ke<Ae.length;ke++)Ae[ke]+=Ae[ke-1];me==="exclude"&&(Ae.unshift(0),Ae.pop())}else{for(ke=Ae.length-2;ke>=0;ke--)Ae[ke]+=Ae[ke+1];me==="exclude"&&(Ae.push(0),Ae.shift())}}(c,T.direction,T.currentbin);var le=Math.min(m.length,c.length),de=[],xe=0,we=le-1;for(l=0;l<le;l++)if(c[l]){xe=l;break}for(l=le-1;l>=xe;l--)if(c[l]){we=l;break}for(l=xe;l<=we;l++)if(o(m[l])&&o(c[l])){var be={p:m[l],s:c[l],b:0};T.enabled||(be.pts=F[l],ee?be.ph0=be.ph1=F[l].length?M[F[l][0]]:m[l]:(a._computePh=!0,be.ph0=Y(P[l]),be.ph1=Y(P[l+1],!0))),de.push(be)}return de.length===1&&(de[0].width1=y.tickIncrement(de[0].p,L.size,!1,_)-de[0].p),e(de,a),p.isArrayOrTypedArray(a.selectedpoints)&&p.tagSelected(de,a,oe),de},calcAllAutoBins:h}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"../bar/arrays_to_calcdata":647,"./average":813,"./bin_functions":815,"./bin_label_vals":816,"./norm_functions":824,"fast-isnumeric":190}],818:[function(u,q,W){q.exports={eventDataKeys:["binNumber"]}},{}],819:[function(u,q,W){var o=u("../../lib"),p=u("../../plots/cartesian/axis_ids"),x=u("../../registry").traceIs,y=u("../bar/defaults").handleGroupingDefaults,e=o.nestedProperty,r=u("../../plots/cartesian/constraints").getAxisGroup,t=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],i=["x","y"];q.exports=function(n,h){var s,a,l,f,d,v,m,c=h._histogramBinOpts={},b=[],g={},w=[];function _(Z,$){return o.coerce(s._input,s,s._module.attributes,Z,$)}function T(Z){return Z.orientation==="v"?"x":"y"}function k(Z,$,re){var R=Z.uid+"__"+re;$||($=R);var N=function(Y,J){return p.getFromTrace({_fullLayout:h},Y,J).type}(Z,re),U=Z[re+"calendar"]||"",te=c[$],j=!0;te&&(N===te.axType&&U===te.calendar?(j=!1,te.traces.push(Z),te.dirs.push(re)):($=R,N!==te.axType&&o.warn(["Attempted to group the bins of trace",Z.index,"set on a","type:"+N,"axis","with bins on","type:"+te.axType,"axis."].join(" ")),U!==te.calendar&&o.warn(["Attempted to group the bins of trace",Z.index,"set with a",U,"calendar","with bins",te.calendar?"on a "+te.calendar+" calendar":"w/o a set calendar"].join(" ")))),j&&(c[$]={traces:[Z],dirs:[re],axType:N,calendar:Z[re+"calendar"]||""}),Z["_"+re+"bingroup"]=$}for(d=0;d<n.length;d++)s=n[d],x(s,"histogram")&&(b.push(s),delete s._xautoBinFinished,delete s._yautoBinFinished,x(s,"2dMap")||y(s._input,s,h,_));var L=h._alignmentOpts||{};for(d=0;d<b.length;d++){if(s=b[d],l="",!x(s,"2dMap")){if(f=T(s),h.barmode==="group"&&s.alignmentgroup){var M=s[f+"axis"],I=r(h,M)+s.orientation;(L[I]||{})[s.alignmentgroup]&&(l=I)}l||h.barmode==="overlay"||(l=r(h,s.xaxis)+r(h,s.yaxis)+T(s))}l?(g[l]||(g[l]=[]),g[l].push(s)):w.push(s)}for(l in g)if((a=g[l]).length!==1){var P=!1;for(a.length&&(s=a[0],P=_("bingroup")),l=P||l,d=0;d<a.length;d++){var S=(s=a[d])._input.bingroup;S&&S!==l&&o.warn(["Trace",s.index,"must match","within bingroup",l+".","Ignoring its bingroup:",S,"setting."].join(" ")),s.bingroup=l,k(s,l,T(s))}}else w.push(a[0]);for(d=0;d<w.length;d++){s=w[d];var E=_("bingroup");if(x(s,"2dMap"))for(m=0;m<2;m++){var D=_((f=i[m])+"bingroup",E?E+"__"+f:null);k(s,D,f)}else k(s,E,T(s))}for(l in c){var F=c[l];for(a=F.traces,v=0;v<t.length;v++){var H,V,Q=t[v],K=Q.name;if(K!=="nbins"||!F.sizeFound){for(d=0;d<a.length;d++){if(s=a[d],f=F.dirs[d],H=Q.aStr[f],e(s._input,H).get()!==void 0){F[K]=_(H),F[K+"Found"]=!0;break}(V=(s._autoBin||{})[f]||{})[K]&&e(s,H).set(V[K])}if(K==="start"||K==="end")for(;d<a.length;d++)(s=a[d])["_"+f+"bingroup"]&&_(H,(V=(s._autoBin||{})[f]||{})[K]);K!=="nbins"||F.sizeFound||F.nbinsFound||(s=a[0],F[K]=_(H))}}}}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/cartesian/constraints":562,"../../registry":638,"../bar/defaults":652}],820:[function(u,q,W){var o=u("../../registry"),p=u("../../lib"),x=u("../../components/color"),y=u("../bar/defaults").handleText,e=u("../bar/style_defaults"),r=u("./attributes");q.exports=function(t,i,n,h){function s(w,_){return p.coerce(t,i,r,w,_)}var a=s("x"),l=s("y");s("cumulative.enabled")&&(s("cumulative.direction"),s("cumulative.currentbin")),s("text");var f=s("textposition");y(t,i,h,s,f,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat");var d=s("orientation",l&&!a?"h":"v"),v=d==="v"?"x":"y",m=d==="v"?"y":"x",c=a&&l?Math.min(p.minRowLength(a)&&p.minRowLength(l)):p.minRowLength(i[v]||[]);if(c){i._length=c,o.getComponentMethod("calendars","handleTraceDefaults")(t,i,["x","y"],h),i[m]&&s("histfunc"),s("histnorm"),s("autobin"+v),e(t,i,s,n,h),p.coerceSelectionMarkerOpacity(i,s);var b=(i.marker.line||{}).color,g=o.getComponentMethod("errorbars","supplyDefaults");g(t,i,b||x.defaultLine,{axis:"y"}),g(t,i,b||x.defaultLine,{axis:"x",inherit:"y"})}else i.visible=!1}},{"../../components/color":366,"../../lib":503,"../../registry":638,"../bar/defaults":652,"../bar/style_defaults":663,"./attributes":812}],821:[function(u,q,W){q.exports=function(o,p,x,y,e){if(o.x="xVal"in p?p.xVal:p.x,o.y="yVal"in p?p.yVal:p.y,"zLabelVal"in p&&(o.z=p.zLabelVal),p.xa&&(o.xaxis=p.xa),p.ya&&(o.yaxis=p.ya),!(x.cumulative||{}).enabled){var r,t=Array.isArray(e)?y[0].pts[e[0]][e[1]]:y[e].pts;if(o.pointNumbers=t,o.binNumber=o.pointNumber,delete o.pointNumber,delete o.pointIndex,x._indexToPoints){r=[];for(var i=0;i<t.length;i++)r=r.concat(x._indexToPoints[t[i]])}else r=t;o.pointIndices=r}return o}},{}],822:[function(u,q,W){var o=u("../bar/hover").hoverPoints,p=u("../../plots/cartesian/axes").hoverLabelText;q.exports=function(x,y,e,r,t){var i=o(x,y,e,r,t);if(i){var n=(x=i[0]).cd[x.index],h=x.cd[0].trace;if(!h.cumulative.enabled){var s=h.orientation==="h"?"y":"x";x[s+"Label"]=p(x[s+"a"],[n.ph0,n.ph1],h[s+"hoverformat"])}return i}}},{"../../plots/cartesian/axes":554,"../bar/hover":655}],823:[function(u,q,W){q.exports={attributes:u("./attributes"),layoutAttributes:u("../bar/layout_attributes"),supplyDefaults:u("./defaults"),crossTraceDefaults:u("./cross_trace_defaults"),supplyLayoutDefaults:u("../bar/layout_defaults"),calc:u("./calc").calc,crossTraceCalc:u("../bar/cross_trace_calc").crossTraceCalc,plot:u("../bar/plot").plot,layerName:"barlayer",style:u("../bar/style").style,styleOnSelect:u("../bar/style").styleOnSelect,colorbar:u("../scatter/marker_colorbar"),hoverPoints:u("./hover"),selectPoints:u("../bar/select"),eventData:u("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:u("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../bar/cross_trace_calc":651,"../bar/layout_attributes":657,"../bar/layout_defaults":658,"../bar/plot":659,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":944,"./attributes":812,"./calc":817,"./cross_trace_defaults":819,"./defaults":820,"./event_data":821,"./hover":822}],824:[function(u,q,W){q.exports={percent:function(o,p){for(var x=o.length,y=100/p,e=0;e<x;e++)o[e]*=y},probability:function(o,p){for(var x=o.length,y=0;y<x;y++)o[y]/=p},density:function(o,p,x,y){var e=o.length;y=y||1;for(var r=0;r<e;r++)o[r]*=x[r]*y},"probability density":function(o,p,x,y){var e=o.length;y&&(p/=y);for(var r=0;r<e;r++)o[r]*=x[r]/p}}},{}],825:[function(u,q,W){var o=u("../histogram/attributes"),p=u("../histogram/bin_attributes"),x=u("../heatmap/attributes"),y=u("../../plots/attributes"),e=u("../../plots/cartesian/axis_format_attributes").axisHoverFormat,r=u("../../plots/template_attributes").hovertemplateAttrs,t=u("../../plots/template_attributes").texttemplateAttrs,i=u("../../components/colorscale/attributes"),n=u("../../lib/extend").extendFlat;q.exports=n({x:o.x,y:o.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:o.histnorm,histfunc:o.histfunc,nbinsx:o.nbinsx,xbins:p("x"),nbinsy:o.nbinsy,ybins:p("y"),autobinx:o.autobinx,autobiny:o.autobiny,bingroup:n({},o.bingroup,{}),xbingroup:n({},o.bingroup,{}),ybingroup:n({},o.bingroup,{}),xgap:x.xgap,ygap:x.ygap,zsmooth:x.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:r({},{keys:"z"}),texttemplate:t({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:x.textfont,showlegend:n({},y.showlegend,{dflt:!1})},i("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../heatmap/attributes":792,"../histogram/attributes":812,"../histogram/bin_attributes":814}],826:[function(u,q,W){var o=u("../../lib"),p=u("../../plots/cartesian/axes"),x=u("../histogram/bin_functions"),y=u("../histogram/norm_functions"),e=u("../histogram/average"),r=u("../histogram/bin_label_vals"),t=u("../histogram/calc").calcAllAutoBins;function i(s,a,l,f){var d,v=new Array(s);if(f)for(d=0;d<s;d++)v[d]=1/(a[d+1]-a[d]);else{var m=1/l;for(d=0;d<s;d++)v[d]=m}return v}function n(s,a){return{start:s(a.start),end:s(a.end),size:a.size}}function h(s,a,l,f,d,v){var m,c=s.length-1,b=new Array(c),g=r(l,f,s,d,v);for(m=0;m<c;m++){var w=(a||[])[m];b[m]=w===void 0?[g(s[m]),g(s[m+1],!0)]:[w,w]}return b}q.exports=function(s,a){var l,f,d,v,m=p.getFromId(s,a.xaxis),c=p.getFromId(s,a.yaxis),b=a.xcalendar,g=a.ycalendar,w=function(it){return m.r2c(it,0,b)},_=function(it){return c.r2c(it,0,g)},T=t(s,a,m,"x"),k=T[0],L=T[1],M=t(s,a,c,"y"),I=M[0],P=M[1],S=a._length;L.length>S&&L.splice(S,L.length-S),P.length>S&&P.splice(S,P.length-S);var E=[],D=[],F=[],H=typeof k.size=="string",V=typeof I.size=="string",Q=[],K=[],Z=H?Q:k,$=V?K:I,re=0,R=[],N=[],U=a.histnorm,te=a.histfunc,j=U.indexOf("density")!==-1,Y=te==="max"||te==="min"?null:0,J=x.count,ee=y[U],ne=!1,se=[],oe=[],he="z"in a?a.z:"marker"in a&&Array.isArray(a.marker.color)?a.marker.color:"";he&&te!=="count"&&(ne=te==="avg",J=x[te]);var le=k.size,de=w(k.start),xe=w(k.end)+(de-p.tickIncrement(de,le,!1,b))/1e6;for(l=de;l<xe;l=p.tickIncrement(l,le,!1,b))D.push(Y),Q.push(l),ne&&F.push(0);Q.push(l);var we,be=D.length,Ae=(l-de)/be,fe=(we=de+Ae/2,m.c2r(we,0,b)),me=I.size,ke=_(I.start),Te=_(I.end)+(ke-p.tickIncrement(ke,me,!1,g))/1e6;for(l=ke;l<Te;l=p.tickIncrement(l,me,!1,g)){E.push(D.slice()),K.push(l);var Me=new Array(be);for(f=0;f<be;f++)Me[f]=[];N.push(Me),ne&&R.push(F.slice())}K.push(l);var Oe=E.length,Fe=(l-ke)/Oe,qe=function(it){return c.c2r(it,0,g)}(ke+Fe/2);j&&(se=i(D.length,Z,Ae,H),oe=i(E.length,$,Fe,V)),H||m.type!=="date"||(Z=n(w,Z)),V||c.type!=="date"||($=n(_,$));var et=!0,ze=!0,Ue=new Array(be),We=new Array(Oe),Ze=1/0,nt=1/0,ft=1/0,xt=1/0;for(l=0;l<S;l++){var It=L[l],Et=P[l];d=o.findBin(It,Z),v=o.findBin(Et,$),d>=0&&d<be&&v>=0&&v<Oe&&(re+=J(d,l,E[v],he,R[v]),N[v][d].push(l),et&&(Ue[d]===void 0?Ue[d]=It:Ue[d]!==It&&(et=!1)),ze&&(We[v]===void 0?We[v]=Et:We[v]!==Et&&(ze=!1)),Ze=Math.min(Ze,It-Q[d]),nt=Math.min(nt,Q[d+1]-It),ft=Math.min(ft,Et-K[v]),xt=Math.min(xt,K[v+1]-Et))}if(ne)for(v=0;v<Oe;v++)re+=e(E[v],R[v]);if(ee)for(v=0;v<Oe;v++)ee(E[v],re,se,oe[v]);return{x:L,xRanges:h(Q,et&&Ue,Ze,nt,m,b),x0:fe,dx:Ae,y:P,yRanges:h(K,ze&&We,ft,xt,c,g),y0:qe,dy:Fe,z:E,pts:N}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../histogram/average":813,"../histogram/bin_functions":815,"../histogram/bin_label_vals":816,"../histogram/calc":817,"../histogram/norm_functions":824}],827:[function(u,q,W){var o=u("../../lib"),p=u("./sample_defaults"),x=u("../heatmap/style_defaults"),y=u("../../components/colorscale/defaults"),e=u("../heatmap/label_defaults"),r=u("./attributes");q.exports=function(t,i,n,h){function s(a,l){return o.coerce(t,i,r,a,l)}p(t,i,s,h),i.visible!==!1&&(x(t,i,s,h),y(t,i,h,s,{prefix:"",cLetter:"z"}),s("hovertemplate"),e(s,h),s("xhoverformat"),s("yhoverformat"))}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/style_defaults":806,"./attributes":825,"./sample_defaults":830}],828:[function(u,q,W){var o=u("../heatmap/hover"),p=u("../../plots/cartesian/axes").hoverLabelText;q.exports=function(x,y,e,r,t){var i=o(x,y,e,r,t);if(i){var n=(x=i[0]).index,h=n[0],s=n[1],a=x.cd[0],l=a.trace,f=a.xRanges[s],d=a.yRanges[h];return x.xLabel=p(x.xa,[f[0],f[1]],l.xhoverformat),x.yLabel=p(x.ya,[d[0],d[1]],l.yhoverformat),i}}},{"../../plots/cartesian/axes":554,"../heatmap/hover":799}],829:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults"),crossTraceDefaults:u("../histogram/cross_trace_defaults"),calc:u("../heatmap/calc"),plot:u("../heatmap/plot"),layerName:"heatmaplayer",colorbar:u("../heatmap/colorbar"),style:u("../heatmap/style"),hoverPoints:u("./hover"),eventData:u("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:u("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../heatmap/calc":793,"../heatmap/colorbar":795,"../heatmap/plot":804,"../heatmap/style":805,"../histogram/cross_trace_defaults":819,"../histogram/event_data":821,"./attributes":825,"./defaults":827,"./hover":828}],830:[function(u,q,W){var o=u("../../registry"),p=u("../../lib");q.exports=function(x,y,e,r){var t=e("x"),i=e("y"),n=p.minRowLength(t),h=p.minRowLength(i);n&&h?(y._length=Math.min(n,h),o.getComponentMethod("calendars","handleTraceDefaults")(x,y,["x","y"],r),(e("z")||e("marker.color"))&&e("histfunc"),e("histnorm"),e("autobinx"),e("autobiny")):y.visible=!1}},{"../../lib":503,"../../registry":638}],831:[function(u,q,W){var o=u("../histogram2d/attributes"),p=u("../contour/attributes"),x=u("../../components/colorscale/attributes"),y=u("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=u("../../lib/extend").extendFlat;q.exports=e({x:o.x,y:o.y,z:o.z,marker:o.marker,histnorm:o.histnorm,histfunc:o.histfunc,nbinsx:o.nbinsx,xbins:o.xbins,nbinsy:o.nbinsy,ybins:o.ybins,autobinx:o.autobinx,autobiny:o.autobiny,bingroup:o.bingroup,xbingroup:o.xbingroup,ybingroup:o.ybingroup,autocontour:p.autocontour,ncontours:p.ncontours,contours:p.contours,line:{color:p.line.color,width:e({},p.line.width,{dflt:.5}),dash:p.line.dash,smoothing:p.line.smoothing,editType:"plot"},xhoverformat:y("x"),yhoverformat:y("y"),zhoverformat:y("z",1),hovertemplate:o.hovertemplate,texttemplate:p.texttemplate,textfont:p.textfont},x("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../contour/attributes":735,"../histogram2d/attributes":825}],832:[function(u,q,W){var o=u("../../lib"),p=u("../histogram2d/sample_defaults"),x=u("../contour/contours_defaults"),y=u("../contour/style_defaults"),e=u("../heatmap/label_defaults"),r=u("./attributes");q.exports=function(t,i,n,h){function s(a,l){return o.coerce(t,i,r,a,l)}p(t,i,s,h),i.visible!==!1&&(x(t,i,s,function(a){return o.coerce2(t,i,r,a)}),y(t,i,s,h),s("xhoverformat"),s("yhoverformat"),s("hovertemplate"),i.contours&&i.contours.coloring==="heatmap"&&e(s,h))}},{"../../lib":503,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/label_defaults":802,"../histogram2d/sample_defaults":830,"./attributes":831}],833:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults"),crossTraceDefaults:u("../histogram/cross_trace_defaults"),calc:u("../contour/calc"),plot:u("../contour/plot").plot,layerName:"contourlayer",style:u("../contour/style"),colorbar:u("../contour/colorbar"),hoverPoints:u("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:u("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../contour/calc":736,"../contour/colorbar":738,"../contour/hover":748,"../contour/plot":753,"../contour/style":755,"../histogram/cross_trace_defaults":819,"./attributes":831,"./defaults":832}],834:[function(u,q,W){var o=u("../../plots/template_attributes").hovertemplateAttrs,p=u("../../plots/template_attributes").texttemplateAttrs,x=u("../../components/colorscale/attributes"),y=u("../../plots/domain").attributes,e=u("../pie/attributes"),r=u("../sunburst/attributes"),t=u("../treemap/attributes"),i=u("../treemap/constants"),n=u("../../lib/extend").extendFlat;q.exports={labels:r.labels,parents:r.parents,values:r.values,branchvalues:r.branchvalues,count:r.count,level:r.level,maxdepth:r.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:t.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:n({colors:r.marker.colors,line:r.marker.line,editType:"calc"},x("marker",{colorAttr:"colors",anim:!1})),leaf:r.leaf,pathbar:t.pathbar,text:e.text,textinfo:r.textinfo,texttemplate:p({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:r.hoverinfo,hovertemplate:o({},{keys:i.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:t.outsidetextfont,textposition:t.textposition,sort:e.sort,root:r.root,domain:y({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"../sunburst/attributes":1045,"../treemap/attributes":1071,"../treemap/constants":1074}],835:[function(u,q,W){var o=u("../../plots/plots");W.name="icicle",W.plot=function(p,x,y,e){o.plotBasePlot(W.name,p,x,y,e)},W.clean=function(p,x,y,e){o.cleanBasePlot(W.name,p,x,y,e)}},{"../../plots/plots":619}],836:[function(u,q,W){var o=u("../sunburst/calc");W.calc=function(p,x){return o.calc(p,x)},W.crossTraceCalc=function(p){return o._runCrossTraceCalc("icicle",p)}},{"../sunburst/calc":1047}],837:[function(u,q,W){var o=u("../../lib"),p=u("./attributes"),x=u("../../components/color"),y=u("../../plots/domain").defaults,e=u("../bar/defaults").handleText,r=u("../bar/constants").TEXTPAD,t=u("../../components/colorscale"),i=t.hasColorscale,n=t.handleDefaults;q.exports=function(h,s,a,l){function f(w,_){return o.coerce(h,s,p,w,_)}var d=f("labels"),v=f("parents");if(d&&d.length&&v&&v.length){var m=f("values");m&&m.length?f("branchvalues"):f("count"),f("level"),f("maxdepth"),f("tiling.orientation"),f("tiling.flip"),f("tiling.pad");var c=f("text");f("texttemplate"),s.texttemplate||f("textinfo",Array.isArray(c)?"text+label":"label"),f("hovertext"),f("hovertemplate");var b=f("pathbar.visible");e(h,s,l,f,"auto",{hasPathbar:b,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),f("textposition"),f("marker.line.width")&&f("marker.line.color",l.paper_bgcolor),f("marker.colors");var g=s._hasColorscale=i(h,"marker","colors")||(h.marker||{}).coloraxis;g&&n(h,s,l,f,{prefix:"marker.",cLetter:"c"}),f("leaf.opacity",g?1:.7),s._hovered={marker:{line:{width:2,color:x.contrast(l.paper_bgcolor)}}},b&&(f("pathbar.thickness",s.pathbar.textfont.size+2*r),f("pathbar.side"),f("pathbar.edgeshape")),f("sort"),f("root.color"),y(s,l,f),s._length=null}else s.visible=!1}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":834}],838:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../lib"),x=u("../../components/drawing"),y=u("../../lib/svg_text_utils"),e=u("./partition"),r=u("./style").styleOne,t=u("../treemap/constants"),i=u("../sunburst/helpers"),n=u("../sunburst/fx"),h=u("../sunburst/plot").formatSliceLabel;q.exports=function(s,a,l,f,d){var v=d.width,m=d.height,c=d.viewX,b=d.viewY,g=d.pathSlice,w=d.toMoveInsideSlice,_=d.strTransform,T=d.hasTransition,k=d.handleSlicesExit,L=d.makeUpdateSliceInterpolator,M=d.makeUpdateTextInterpolator,I=d.prevEntry,P=s._fullLayout,S=a[0].trace,E=S.textposition.indexOf("left")!==-1,D=S.textposition.indexOf("right")!==-1,F=S.textposition.indexOf("bottom")!==-1,H=e(l,[v,m],{flipX:S.tiling.flip.indexOf("x")>-1,flipY:S.tiling.flip.indexOf("y")>-1,orientation:S.tiling.orientation,pad:{inner:S.tiling.pad},maxDepth:S._maxDepth}).descendants(),V=1/0,Q=-1/0;H.forEach(function(R){var N=R.depth;N>=S._maxDepth?(R.x0=R.x1=(R.x0+R.x1)/2,R.y0=R.y1=(R.y0+R.y1)/2):(V=Math.min(V,N),Q=Math.max(Q,N))}),f=f.data(H,i.getPtId),S._maxVisibleLayers=isFinite(Q)?Q-V+1:0,f.enter().append("g").classed("slice",!0),k(f,!1,{},[v,m],g),f.order();var K=null;if(T&&I){var Z=i.getPtId(I);f.each(function(R){K===null&&i.getPtId(R)===Z&&(K={x0:R.x0,x1:R.x1,y0:R.y0,y1:R.y1})})}var $=function(){return K||{x0:0,x1:v,y0:0,y1:m}},re=f;return T&&(re=re.transition().each("end",function(){var R=o.select(this);i.setSliceCursor(R,s,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),re.each(function(R){R._x0=c(R.x0),R._x1=c(R.x1),R._y0=b(R.y0),R._y1=b(R.y1),R._hoverX=c(R.x1-S.tiling.pad),R._hoverY=b(F?R.y1-S.tiling.pad/2:R.y0+S.tiling.pad/2);var N=o.select(this),U=p.ensureSingle(N,"path","surface",function(J){J.style("pointer-events","all")});T?U.transition().attrTween("d",function(J){var ee=L(J,!1,$(),[v,m],{orientation:S.tiling.orientation,flipX:S.tiling.flip.indexOf("x")>-1,flipY:S.tiling.flip.indexOf("y")>-1});return function(ne){return g(ee(ne))}}):U.attr("d",g),N.call(n,l,s,a,{styleOne:r,eventDataKeys:t.eventDataKeys,transitionTime:t.CLICK_TRANSITION_TIME,transitionEasing:t.CLICK_TRANSITION_EASING}).call(i.setSliceCursor,s,{isTransitioning:s._transitioning}),U.call(r,R,S,{hovered:!1}),R.x0===R.x1||R.y0===R.y1?R._text="":R._text=h(R,l,S,a,P)||"";var te=p.ensureSingle(N,"g","slicetext"),j=p.ensureSingle(te,"text","",function(J){J.attr("data-notex",1)}),Y=p.ensureUniformFontSize(s,i.determineTextFont(S,R,P.font));j.text(R._text||" ").classed("slicetext",!0).attr("text-anchor",D?"end":E?"start":"middle").call(x.font,Y).call(y.convertToTspans,s),R.textBB=x.bBox(j.node()),R.transform=w(R,{fontSize:Y.size}),R.transform.fontSize=Y.size,T?j.transition().attrTween("transform",function(J){var ee=M(J,!1,$(),[v,m]);return function(ne){return _(ee(ne))}}):j.attr("transform",_(R))}),K}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"../sunburst/plot":1055,"../treemap/constants":1074,"./partition":842,"./style":844,"@plotly/d3":58}],839:[function(u,q,W){q.exports={moduleType:"trace",name:"icicle",basePlotModule:u("./base_plot"),categories:[],animatable:!0,attributes:u("./attributes"),layoutAttributes:u("./layout_attributes"),supplyDefaults:u("./defaults"),supplyLayoutDefaults:u("./layout_defaults"),calc:u("./calc").calc,crossTraceCalc:u("./calc").crossTraceCalc,plot:u("./plot"),style:u("./style").style,colorbar:u("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":834,"./base_plot":835,"./calc":836,"./defaults":837,"./layout_attributes":840,"./layout_defaults":841,"./plot":843,"./style":844}],840:[function(u,q,W){q.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],841:[function(u,q,W){var o=u("../../lib"),p=u("./layout_attributes");q.exports=function(x,y){function e(r,t){return o.coerce(x,y,p,r,t)}e("iciclecolorway",y.colorway),e("extendiciclecolors")}},{"../../lib":503,"./layout_attributes":840}],842:[function(u,q,W){var o=u("d3-hierarchy"),p=u("../treemap/flip_tree");q.exports=function(x,y,e){var r=e.flipX,t=e.flipY,i=e.orientation==="h",n=e.maxDepth,h=y[0],s=y[1];n&&(h=(x.height+1)*y[0]/Math.min(x.height+1,n),s=(x.height+1)*y[1]/Math.min(x.height+1,n));var a=o.partition().padding(e.pad.inner).size(i?[y[1],h]:[y[0],s])(x);return(i||r||t)&&p(a,y,{swapXY:i,flipX:r,flipY:t}),a}},{"../treemap/flip_tree":1079,"d3-hierarchy":115}],843:[function(u,q,W){var o=u("../treemap/draw"),p=u("./draw_descendants");q.exports=function(x,y,e,r){return o(x,y,e,r,{type:"icicle",drawDescendants:p})}},{"../treemap/draw":1076,"./draw_descendants":838}],844:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../components/color"),x=u("../../lib"),y=u("../bar/uniform_text").resizeText;function e(r,t,i){var n=t.data.data,h=!t.children,s=n.i,a=x.castOption(i,s,"marker.line.color")||p.defaultLine,l=x.castOption(i,s,"marker.line.width")||0;r.style("stroke-width",l).call(p.fill,n.color).call(p.stroke,a).style("opacity",h?i.leaf.opacity:null)}q.exports={style:function(r){var t=r._fullLayout._iciclelayer.selectAll(".trace");y(r,t,"icicle"),t.each(function(i){var n=o.select(this),h=i[0].trace;n.style("opacity",h.opacity),n.selectAll("path.surface").each(function(s){o.select(this).call(e,s,h)})})},styleOne:e}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],845:[function(u,q,W){for(var o=u("../../plots/attributes"),p=u("../../plots/template_attributes").hovertemplateAttrs,x=u("../../lib/extend").extendFlat,y=u("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],r=[],t=[],i=0;i<e.length;i++){var n=y[e[i]];r.push("For the `"+e[i]+"` colormodel, it is ["+(n.zminDflt||n.min).join(", ")+"]."),t.push("For the `"+e[i]+"` colormodel, it is ["+(n.zmaxDflt||n.max).join(", ")+"].")}q.exports=x({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:x({},o.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:p({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"./constants":847}],846:[function(u,q,W){var o=u("../../lib"),p=u("./constants"),x=u("fast-isnumeric"),y=u("../../plots/cartesian/axes"),e=u("../../lib").maxRowLength,r=u("./helpers").getImageSize;function t(n,h,s,a){return function(l){return o.constrain((l-n)*h,s,a)}}function i(n,h){return function(s){return o.constrain(s,n,h)}}q.exports=function(n,h){var s,a;if(h._hasZ)s=h.z.length,a=e(h.z);else if(h._hasSource){var l=r(h.source);s=l.height,a=l.width}var f,d=y.getFromId(n,h.xaxis||"x"),v=y.getFromId(n,h.yaxis||"y"),m=d.d2c(h.x0)-h.dx/2,c=v.d2c(h.y0)-h.dy/2,b=[m,m+a*h.dx],g=[c,c+s*h.dy];if(d&&d.type==="log")for(f=0;f<a;f++)b.push(m+f*h.dx);if(v&&v.type==="log")for(f=0;f<s;f++)g.push(c+f*h.dy);return h._extremes[d._id]=y.findExtremes(d,b),h._extremes[v._id]=y.findExtremes(v,g),h._scaler=function(w){var _=p.colormodel[w.colormodel],T=(_.colormodel||w.colormodel).length;w._sArray=[];for(var k=0;k<T;k++)_.min[k]!==w.zmin[k]||_.max[k]!==w.zmax[k]?w._sArray.push(t(w.zmin[k],(_.max[k]-_.min[k])/(w.zmax[k]-w.zmin[k]),_.min[k],_.max[k])):w._sArray.push(i(_.min[k],_.max[k]));return function(L){for(var M=L.slice(0,T),I=0;I<T;I++){var P=M[I];if(!x(P))return!1;M[I]=w._sArray[I](P)}return M}}(h),[{x0:m,y0:c,z:h.z,w:a,h:s}]}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":847,"./helpers":850,"fast-isnumeric":190}],847:[function(u,q,W){q.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(o){return o.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(o){return o.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(o){return o.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(o){var p=o.slice(0,3);return p[1]=p[1]+"%",p[2]=p[2]+"%",p},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(o){var p=o.slice(0,4);return p[1]=p[1]+"%",p[2]=p[2]+"%",p},suffix:["\xB0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],848:[function(u,q,W){var o=u("../../lib"),p=u("./attributes"),x=u("./constants"),y=u("../../snapshot/helpers").IMAGE_URL_PREFIX;q.exports=function(e,r){function t(h,s){return o.coerce(e,r,p,h,s)}t("source"),r.source&&!r.source.match(y)&&delete r.source,r._hasSource=!!r.source;var i,n=t("z");r._hasZ=!(n===void 0||!n.length||!n[0]||!n[0].length),r._hasZ||r._hasSource?(t("x0"),t("y0"),t("dx"),t("dy"),r._hasZ?(t("colormodel","rgb"),t("zmin",(i=x.colormodel[r.colormodel]).zminDflt||i.min),t("zmax",i.zmaxDflt||i.max)):r._hasSource&&(r.colormodel="rgba256",i=x.colormodel[r.colormodel],r.zmin=i.zminDflt,r.zmax=i.zmaxDflt),t("zsmooth"),t("text"),t("hovertext"),t("hovertemplate"),r._length=null):r.visible=!1}},{"../../lib":503,"../../snapshot/helpers":642,"./attributes":845,"./constants":847}],849:[function(u,q,W){q.exports=function(o,p){return"xVal"in p&&(o.x=p.xVal),"yVal"in p&&(o.y=p.yVal),p.xa&&(o.xaxis=p.xa),p.ya&&(o.yaxis=p.ya),o.color=p.color,o.colormodel=p.trace.colormodel,o.z||(o.z=p.color),o}},{}],850:[function(u,q,W){var o=u("probe-image-size/sync"),p=u("../../snapshot/helpers").IMAGE_URL_PREFIX,x=u("buffer/").Buffer;W.getImageSize=function(y){var e=y.replace(p,""),r=new x(e,"base64");return o(r)}},{"../../snapshot/helpers":642,"buffer/":85,"probe-image-size/sync":276}],851:[function(u,q,W){var o=u("../../components/fx"),p=u("../../lib"),x=u("./constants");q.exports=function(y,e,r){var t=y.cd[0],i=t.trace,n=y.xa,h=y.ya;if(!(o.inbox(e-t.x0,e-(t.x0+t.w*i.dx),0)>0||o.inbox(r-t.y0,r-(t.y0+t.h*i.dy),0)>0)){var s,a=Math.floor((e-t.x0)/i.dx),l=Math.floor(Math.abs(r-t.y0)/i.dy);if(i._hasZ?s=t.z[l][a]:i._hasSource&&(s=i._canvas.el.getContext("2d").getImageData(a,l,1,1).data),s){var f,d=t.hi||i.hoverinfo;if(d){var v=d.split("+");v.indexOf("all")!==-1&&(v=["color"]),v.indexOf("color")!==-1&&(f=!0)}var m,c=x.colormodel[i.colormodel],b=c.colormodel||i.colormodel,g=b.length,w=i._scaler(s),_=c.suffix,T=[];(i.hovertemplate||f)&&(T.push("["+[w[0]+_[0],w[1]+_[1],w[2]+_[2]].join(", ")),g===4&&T.push(", "+w[3]+_[3]),T.push("]"),T=T.join(""),y.extraText=b.toUpperCase()+": "+T),Array.isArray(i.hovertext)&&Array.isArray(i.hovertext[l])?m=i.hovertext[l][a]:Array.isArray(i.text)&&Array.isArray(i.text[l])&&(m=i.text[l][a]);var k=h.c2p(t.y0+(l+.5)*i.dy),L=t.x0+(a+.5)*i.dx,M=t.y0+(l+.5)*i.dy,I="["+s.slice(0,i.colormodel.length).join(", ")+"]";return[p.extendFlat(y,{index:[l,a],x0:n.c2p(t.x0+a*i.dx),x1:n.c2p(t.x0+(a+1)*i.dx),y0:k,y1:k,color:w,xVal:L,xLabelVal:L,yVal:M,yLabelVal:M,zLabelVal:I,text:m,hovertemplateLabels:{zLabel:I,colorLabel:T,"color[0]Label":w[0]+_[0],"color[1]Label":w[1]+_[1],"color[2]Label":w[2]+_[2],"color[3]Label":w[3]+_[3]}})]}}}},{"../../components/fx":406,"../../lib":503,"./constants":847}],852:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults"),calc:u("./calc"),plot:u("./plot"),style:u("./style"),hoverPoints:u("./hover"),eventData:u("./event_data"),moduleType:"trace",name:"image",basePlotModule:u("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":568,"./attributes":845,"./calc":846,"./defaults":848,"./event_data":849,"./hover":851,"./plot":853,"./style":854}],853:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../lib"),x=p.strTranslate,y=u("../../constants/xmlns_namespaces"),e=u("./constants"),r=p.isIOS()||p.isSafari()||p.isIE();q.exports=function(t,i,n,h){var s=i.xaxis,a=i.yaxis,l=!(r||t._context._exportedPlot);p.makeTraceGroups(h,n,"im").each(function(f){var d=o.select(this),v=f[0],m=v.trace,c=(m.zsmooth==="fast"||m.zsmooth===!1&&l)&&!m._hasZ&&m._hasSource&&s.type==="linear"&&a.type==="linear";m._realImage=c;var b,g,w,_,T,k,L=v.z,M=v.x0,I=v.y0,P=v.w,S=v.h,E=m.dx,D=m.dy;for(k=0;b===void 0&&k<P;)b=s.c2p(M+k*E),k++;for(k=P;g===void 0&&k>0;)g=s.c2p(M+k*E),k--;for(k=0;_===void 0&&k<S;)_=a.c2p(I+k*D),k++;for(k=S;T===void 0&&k>0;)T=a.c2p(I+k*D),k--;g<b&&(w=g,g=b,b=w),T<_&&(w=_,_=T,T=w),!c&&(b=Math.max(-.5*s._length,b),g=Math.min(1.5*s._length,g),_=Math.max(-.5*a._length,_),T=Math.min(1.5*a._length,T));var F=Math.round(g-b),H=Math.round(T-_);if(F<=0||H<=0)d.selectAll("image").data([]).exit().remove();else{var V=d.selectAll("image").data([f]);V.enter().append("svg:image").attr({xmlns:y.svg,preserveAspectRatio:"none"}),V.exit().remove();var Q=m.zsmooth===!1?e.pixelatedStyle:"";if(c){var K=p.simpleMap(s.range,s.r2l),Z=p.simpleMap(a.range,a.r2l),$=K[1]<K[0],re=Z[1]>Z[0];if($||re){var R=b+F/2,N=_+H/2;Q+="transform:"+x(R+"px",N+"px")+"scale("+($?-1:1)+","+(re?-1:1)+")"+x(-R+"px",-N+"px")+";"}}V.attr("style",Q);var U=new Promise(function(j){if(m._hasZ)j();else if(m._hasSource)if(m._canvas&&m._canvas.el.width===P&&m._canvas.el.height===S&&m._canvas.source===m.source)j();else{var Y=document.createElement("canvas");Y.width=P,Y.height=S;var J=Y.getContext("2d");m._image=m._image||new Image;var ee=m._image;ee.onload=function(){J.drawImage(ee,0,0),m._canvas={el:Y,source:m.source},j()},ee.setAttribute("src",m.source)}}).then(function(){var j;if(m._hasZ)j=te(function(J,ee){return L[ee][J]}).toDataURL("image/png");else if(m._hasSource)if(c)j=m.source;else{var Y=m._canvas.el.getContext("2d").getImageData(0,0,P,S).data;j=te(function(J,ee){var ne=4*(ee*P+J);return[Y[ne],Y[ne+1],Y[ne+2],Y[ne+3]]}).toDataURL("image/png")}V.attr({"xlink:href":j,height:H,width:F,x:b,y:_})});t._promises.push(U)}function te(j){var Y=document.createElement("canvas");Y.width=F,Y.height=H;var J,ee=Y.getContext("2d"),ne=function(fe){return p.constrain(Math.round(s.c2p(M+fe*E)-b),0,F)},se=function(fe){return p.constrain(Math.round(a.c2p(I+fe*D)-_),0,H)},oe=e.colormodel[m.colormodel],he=oe.colormodel||m.colormodel,le=oe.fmt;for(k=0;k<v.w;k++){var de=ne(k),xe=ne(k+1);if(xe!==de&&!isNaN(xe)&&!isNaN(de))for(var we=0;we<v.h;we++){var be=se(we),Ae=se(we+1);Ae===be||isNaN(Ae)||isNaN(be)||!j(k,we)||(J=m._scaler(j(k,we)),ee.fillStyle=J?he+"("+le(J).join(",")+")":"rgba(0,0,0,0)",ee.fillRect(de,be,xe-de,Ae-be))}}return Y}})}},{"../../constants/xmlns_namespaces":480,"../../lib":503,"./constants":847,"@plotly/d3":58}],854:[function(u,q,W){var o=u("@plotly/d3");q.exports=function(p){o.select(p).selectAll(".im image").style("opacity",function(x){return x[0].trace.opacity})}},{"@plotly/d3":58}],855:[function(u,q,W){var o=u("../../lib/extend").extendFlat,p=u("../../lib/extend").extendDeep,x=u("../../plot_api/edit_types").overrideAll,y=u("../../plots/font_attributes"),e=u("../../components/color/attributes"),r=u("../../plots/domain").attributes,t=u("../../plots/cartesian/layout_attributes"),i=u("../../plot_api/plot_template").templatedArray,n=u("../../constants/delta.js"),h=u("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,s=y({editType:"plot",colorEditType:"plot"}),a={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},l={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},f=i("step",p({},a,{range:l}));q.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:r({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:o({},s,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:h("value")},font:o({},s,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:h("value")},increasing:{symbol:{valType:"string",dflt:n.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:n.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:o({},s,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:p({},a,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:x({range:l,visible:o({},t.visible,{dflt:!0}),tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:o({},t.ticks,{dflt:"outside"}),ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,tickfont:y({}),tickangle:t.tickangle,tickformat:t.tickformat,tickformatstops:t.tickformatstops,tickprefix:t.tickprefix,showtickprefix:t.showtickprefix,ticksuffix:t.ticksuffix,showticksuffix:t.showticksuffix,separatethousands:t.separatethousands,exponentformat:t.exponentformat,minexponent:t.minexponent,showexponent:t.showexponent,editType:"plot"},"plot"),steps:f,threshold:{line:{color:o({},a.line.color,{}),width:o({},a.line.width,{dflt:1}),editType:"plot"},thickness:o({},a.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":365,"../../constants/delta.js":473,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],856:[function(u,q,W){var o=u("../../plots/plots");W.name="indicator",W.plot=function(p,x,y,e){o.plotBasePlot(W.name,p,x,y,e)},W.clean=function(p,x,y,e){o.cleanBasePlot(W.name,p,x,y,e)}},{"../../plots/plots":619}],857:[function(u,q,W){q.exports={calc:function(o,p){var x=[],y=p.value;typeof p._lastValue!="number"&&(p._lastValue=p.value);var e=p._lastValue,r=e;return p._hasDelta&&typeof p.delta.reference=="number"&&(r=p.delta.reference),x[0]={y,lastY:e,delta:y-r,relativeDelta:(y-r)/r},x}}},{}],858:[function(u,q,W){q.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],859:[function(u,q,W){var o=u("../../lib"),p=u("./attributes"),x=u("../../plots/domain").defaults,y=u("../../plot_api/plot_template"),e=u("../../plots/array_container_defaults"),r=u("./constants.js"),t=u("../../plots/cartesian/tick_value_defaults"),i=u("../../plots/cartesian/tick_mark_defaults"),n=u("../../plots/cartesian/tick_label_defaults"),h=u("../../plots/cartesian/prefix_suffix_defaults");function s(a,l){function f(d,v){return o.coerce(a,l,p.gauge.steps,d,v)}f("color"),f("line.color"),f("line.width"),f("range"),f("thickness")}q.exports={supplyDefaults:function(a,l,f,d){function v(P,S){return o.coerce(a,l,p,P,S)}x(l,d,v),v("mode"),l._hasNumber=l.mode.indexOf("number")!==-1,l._hasDelta=l.mode.indexOf("delta")!==-1,l._hasGauge=l.mode.indexOf("gauge")!==-1;var m=v("value");l._range=[0,typeof m=="number"?1.5*m:1];var c,b,g,w,_,T,k=new Array(2);function L(P,S){return o.coerce(g,w,p.gauge,P,S)}function M(P,S){return o.coerce(_,T,p.gauge.axis,P,S)}if(l._hasNumber&&(v("number.valueformat"),v("number.font.color",d.font.color),v("number.font.family",d.font.family),v("number.font.size"),l.number.font.size===void 0&&(l.number.font.size=r.defaultNumberFontSize,k[0]=!0),v("number.prefix"),v("number.suffix"),c=l.number.font.size),l._hasDelta&&(v("delta.font.color",d.font.color),v("delta.font.family",d.font.family),v("delta.font.size"),l.delta.font.size===void 0&&(l.delta.font.size=(l._hasNumber?.5:1)*(c||r.defaultNumberFontSize),k[1]=!0),v("delta.reference",l.value),v("delta.relative"),v("delta.valueformat",l.delta.relative?"2%":""),v("delta.increasing.symbol"),v("delta.increasing.color"),v("delta.decreasing.symbol"),v("delta.decreasing.color"),v("delta.position"),b=l.delta.font.size),l._scaleNumbers=(!l._hasNumber||k[0])&&(!l._hasDelta||k[1])||!1,v("title.font.color",d.font.color),v("title.font.family",d.font.family),v("title.font.size",.25*(c||b||r.defaultNumberFontSize)),v("title.text"),l._hasGauge){(g=a.gauge)||(g={}),w=y.newContainer(l,"gauge"),L("shape"),(l._isBullet=l.gauge.shape==="bullet")||v("title.align","center"),(l._isAngular=l.gauge.shape==="angular")||v("align","center"),L("bgcolor",d.paper_bgcolor),L("borderwidth"),L("bordercolor"),L("bar.color"),L("bar.line.color"),L("bar.line.width"),L("bar.thickness",r.valueThickness*(l.gauge.shape==="bullet"?.5:1)),e(g,w,{name:"steps",handleItemDefaults:s}),L("threshold.value"),L("threshold.thickness"),L("threshold.line.width"),L("threshold.line.color"),_={},g&&(_=g.axis||{}),T=y.newContainer(w,"axis"),M("visible"),l._range=M("range",l._range);var I={outerTicks:!0};t(_,T,M,"linear"),h(_,T,M,"linear",I),n(_,T,M,"linear",I),i(_,T,M,I)}else v("title.align","center"),v("align","center"),l._isAngular=l._isBullet=!1;l._length=null}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"../../plots/domain":584,"./attributes":855,"./constants.js":858}],860:[function(u,q,W){q.exports={moduleType:"trace",name:"indicator",basePlotModule:u("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:u("./attributes"),supplyDefaults:u("./defaults").supplyDefaults,calc:u("./calc").calc,plot:u("./plot"),meta:{}}},{"./attributes":855,"./base_plot":856,"./calc":857,"./defaults":859,"./plot":861}],861:[function(u,q,W){var o=u("@plotly/d3"),p=u("d3-interpolate").interpolate,x=u("d3-interpolate").interpolateNumber,y=u("../../lib"),e=y.strScale,r=y.strTranslate,t=y.rad2deg,i=u("../../constants/alignment").MID_SHIFT,n=u("../../components/drawing"),h=u("./constants"),s=u("../../lib/svg_text_utils"),a=u("../../plots/cartesian/axes"),l=u("../../plots/cartesian/axis_defaults"),f=u("../../plots/cartesian/position_defaults"),d=u("../../plots/cartesian/layout_attributes"),v=u("../../components/color"),m={left:"start",center:"middle",right:"end"},c={left:0,center:.5,right:1},b=/[yzafpn\xb5mkMGTPEZY]/;function g(M){return M&&M.duration>0}function w(M){M.each(function(I){v.stroke(o.select(this),I.line.color)}).each(function(I){v.fill(o.select(this),I.color)}).style("stroke-width",function(I){return I.line.width})}function _(M,I,P){var S=M._fullLayout,E=y.extendFlat({type:"linear",ticks:"outside",range:P,showline:!0},I),D={type:"linear",_id:"x"+I._id},F={letter:"x",font:S.font,noHover:!0,noTickson:!0};function H(V,Q){return y.coerce(E,D,d,V,Q)}return l(E,D,H,F,S),f(E,D,H,F),D}function T(M,I,P){return[Math.min(I/M.width,P/M.height),M,I+"x"+P]}function k(M,I,P,S){var E=document.createElementNS("http://www.w3.org/2000/svg","text"),D=o.select(E);return D.text(M).attr("x",0).attr("y",0).attr("text-anchor",P).attr("data-unformatted",M).call(s.convertToTspans,S).call(n.font,I),n.bBox(D.node())}function L(M,I,P,S,E,D){var F="_cache"+I;M[F]&&M[F].key===E||(M[F]={key:E,value:P});var H=y.aggNums(D,null,[M[F].value,S],2);return M[F].value=H,H}q.exports=function(M,I,P,S){var E,D=M._fullLayout;g(P)&&S&&(E=S()),y.makeTraceGroups(D._indicatorlayer,I,"trace").each(function(F){var H,V,Q,K,Z,$=F[0].trace,re=o.select(this),R=$._hasGauge,N=$._isAngular,U=$._isBullet,te=$.domain,j={w:D._size.w*(te.x[1]-te.x[0]),h:D._size.h*(te.y[1]-te.y[0]),l:D._size.l+D._size.w*te.x[0],r:D._size.r+D._size.w*(1-te.x[1]),t:D._size.t+D._size.h*(1-te.y[1]),b:D._size.b+D._size.h*te.y[0]},Y=j.l+j.w/2,J=j.t+j.h/2,ee=Math.min(j.w/2,j.h),ne=h.innerRadius*ee,se=$.align||"center";if(V=J,R){if(N&&(H=Y,V=J+ee/2,Q=function(Ae){return function(fe,me){var ke=Math.sqrt(fe.width/2*(fe.width/2)+fe.height*fe.height);return[me/ke,fe,me]}(Ae,.9*ne)}),U){var oe=h.bulletPadding,he=1-h.bulletNumberDomainSize+oe;H=j.l+(he+(1-he)*c[se])*j.w,Q=function(Ae){return T(Ae,(h.bulletNumberDomainSize-oe)*j.w,j.h)}}}else H=j.l+c[se]*j.w,Q=function(Ae){return T(Ae,j.w,j.h)};(function(Ae,fe,me,ke){var Te,Me,Oe,Fe=me[0].trace,qe=ke.numbersX,et=ke.numbersY,ze=Fe.align||"center",Ue=m[ze],We=ke.transitionOpts,Ze=ke.onComplete,nt=y.ensureSingle(fe,"g","numbers"),ft=[];Fe._hasNumber&&ft.push("number"),Fe._hasDelta&&(ft.push("delta"),Fe.delta.position==="left"&&ft.reverse());var xt=nt.selectAll("text").data(ft);function It(Ye,Be,Je,Se){if(!Ye.match("s")||Je>=0==Se>=0||Be(Je).slice(-1).match(b)||Be(Se).slice(-1).match(b))return Be;var Pe=Ye.slice().replace("s","f").replace(/\d+/,function(Ie){return parseInt(Ie)-1}),De=_(Ae,{tickformat:Pe});return function(Ie){return Math.abs(Ie)<1?a.tickText(De,Ie).text:Be(Ie)}}xt.enter().append("text"),xt.attr("text-anchor",function(){return Ue}).attr("class",function(Ye){return Ye}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),xt.exit().remove();var Et,it=Fe.mode+Fe.align;if(Fe._hasDelta&&(Et=function(){var Ye=_(Ae,{tickformat:Fe.delta.valueformat},Fe._range);Ye.setScale(),a.prepTicks(Ye);var Be=function($e){return a.tickText(Ye,$e).text},Je=function($e){return Fe.delta.relative?$e.relativeDelta:$e.delta},Se=function($e,st){return $e===0||typeof $e!="number"||isNaN($e)?"-":($e>0?Fe.delta.increasing.symbol:Fe.delta.decreasing.symbol)+st($e)},Pe=function($e){return $e.delta>=0?Fe.delta.increasing.color:Fe.delta.decreasing.color};Fe._deltaLastValue===void 0&&(Fe._deltaLastValue=Je(me[0]));var De=nt.select("text.delta");function Ie(){De.text(Se(Je(me[0]),Be)).call(v.fill,Pe(me[0])).call(s.convertToTspans,Ae)}return De.call(n.font,Fe.delta.font).call(v.fill,Pe({delta:Fe._deltaLastValue})),g(We)?De.transition().duration(We.duration).ease(We.easing).tween("text",function(){var $e=o.select(this),st=Je(me[0]),dt=Fe._deltaLastValue,ut=It(Fe.delta.valueformat,Be,dt,st),Lt=x(dt,st);return Fe._deltaLastValue=st,function(lt){$e.text(Se(Lt(lt),ut)),$e.call(v.fill,Pe({delta:Lt(lt)}))}}).each("end",function(){Ie(),Ze&&Ze()}).each("interrupt",function(){Ie(),Ze&&Ze()}):Ie(),Me=k(Se(Je(me[0]),Be),Fe.delta.font,Ue,Ae),De}(),it+=Fe.delta.position+Fe.delta.font.size+Fe.delta.font.family+Fe.delta.valueformat,it+=Fe.delta.increasing.symbol+Fe.delta.decreasing.symbol,Oe=Me),Fe._hasNumber&&(function(){var Ye=_(Ae,{tickformat:Fe.number.valueformat},Fe._range);Ye.setScale(),a.prepTicks(Ye);var Be=function(Ie){return a.tickText(Ye,Ie).text},Je=Fe.number.suffix,Se=Fe.number.prefix,Pe=nt.select("text.number");function De(){var Ie=typeof me[0].y=="number"?Se+Be(me[0].y)+Je:"-";Pe.text(Ie).call(n.font,Fe.number.font).call(s.convertToTspans,Ae)}g(We)?Pe.transition().duration(We.duration).ease(We.easing).each("end",function(){De(),Ze&&Ze()}).each("interrupt",function(){De(),Ze&&Ze()}).attrTween("text",function(){var Ie=o.select(this),$e=x(me[0].lastY,me[0].y);Fe._lastValue=me[0].y;var st=It(Fe.number.valueformat,Be,me[0].lastY,me[0].y);return function(dt){Ie.text(Se+st($e(dt))+Je)}}):De(),Te=k(Se+Be(me[0].y)+Je,Fe.number.font,Ue,Ae)}(),it+=Fe.number.font.size+Fe.number.font.family+Fe.number.valueformat+Fe.number.suffix+Fe.number.prefix,Oe=Te),Fe._hasDelta&&Fe._hasNumber){var rt,At,Gt=[(Te.left+Te.right)/2,(Te.top+Te.bottom)/2],Qt=[(Me.left+Me.right)/2,(Me.top+Me.bottom)/2],Ve=.75*Fe.delta.font.size;Fe.delta.position==="left"&&(rt=L(Fe,"deltaPos",0,-1*(Te.width*c[Fe.align]+Me.width*(1-c[Fe.align])+Ve),it,Math.min),At=Gt[1]-Qt[1],Oe={width:Te.width+Me.width+Ve,height:Math.max(Te.height,Me.height),left:Me.left+rt,right:Te.right,top:Math.min(Te.top,Me.top+At),bottom:Math.max(Te.bottom,Me.bottom+At)}),Fe.delta.position==="right"&&(rt=L(Fe,"deltaPos",0,Te.width*(1-c[Fe.align])+Me.width*c[Fe.align]+Ve,it,Math.max),At=Gt[1]-Qt[1],Oe={width:Te.width+Me.width+Ve,height:Math.max(Te.height,Me.height),left:Te.left,right:Me.right+rt,top:Math.min(Te.top,Me.top+At),bottom:Math.max(Te.bottom,Me.bottom+At)}),Fe.delta.position==="bottom"&&(rt=null,At=Me.height,Oe={width:Math.max(Te.width,Me.width),height:Te.height+Me.height,left:Math.min(Te.left,Me.left),right:Math.max(Te.right,Me.right),top:Te.bottom-Te.height,bottom:Te.bottom+Me.height}),Fe.delta.position==="top"&&(rt=null,At=Te.top,Oe={width:Math.max(Te.width,Me.width),height:Te.height+Me.height,left:Math.min(Te.left,Me.left),right:Math.max(Te.right,Me.right),top:Te.bottom-Te.height-Me.height,bottom:Te.bottom}),Et.attr({dx:rt,dy:At})}(Fe._hasNumber||Fe._hasDelta)&&nt.attr("transform",function(){var Ye=ke.numbersScaler(Oe);it+=Ye[2];var Be,Je=L(Fe,"numbersScale",1,Ye[0],it,Math.min);Fe._scaleNumbers||(Je=1),Be=Fe._isAngular?et-Je*Oe.bottom:et-Je*(Oe.top+Oe.bottom)/2,Fe._numbersTop=Je*Oe.top+Be;var Se=Oe[ze];ze==="center"&&(Se=(Oe.left+Oe.right)/2);var Pe=qe-Je*Se;return Pe=L(Fe,"numbersTranslate",0,Pe,it,Math.max),r(Pe,Be)+e(Je)})})(M,re,F,{numbersX:H,numbersY:V,numbersScaler:Q,transitionOpts:P,onComplete:E}),R&&(K={range:$.gauge.axis.range,color:$.gauge.bgcolor,line:{color:$.gauge.bordercolor,width:0},thickness:1},Z={range:$.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:$.gauge.bordercolor,width:$.gauge.borderwidth},thickness:1});var le=re.selectAll("g.angular").data(N?F:[]);le.exit().remove();var de=re.selectAll("g.angularaxis").data(N?F:[]);de.exit().remove(),N&&function(Ae,fe,me,ke){var Te,Me,Oe,Fe,qe=me[0].trace,et=ke.size,ze=ke.radius,Ue=ke.innerRadius,We=ke.gaugeBg,Ze=ke.gaugeOutline,nt=[et.l+et.w/2,et.t+et.h/2+ze/2],ft=ke.gauge,xt=ke.layer,It=ke.transitionOpts,Et=ke.onComplete,it=Math.PI/2;function rt(Pt){var Ke=qe.gauge.axis.range[0],mt=(Pt-Ke)/(qe.gauge.axis.range[1]-Ke)*Math.PI-it;return mt<-it?-it:mt>it?it:mt}function At(Pt){return o.svg.arc().innerRadius((Ue+ze)/2-Pt/2*(ze-Ue)).outerRadius((Ue+ze)/2+Pt/2*(ze-Ue)).startAngle(-it)}function Gt(Pt){Pt.attr("d",function(Ke){return At(Ke.thickness).startAngle(rt(Ke.range[0])).endAngle(rt(Ke.range[1]))()})}ft.enter().append("g").classed("angular",!0),ft.attr("transform",r(nt[0],nt[1])),xt.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),xt.selectAll("g.xangularaxistick,path,text").remove(),(Te=_(Ae,qe.gauge.axis)).type="linear",Te.range=qe.gauge.axis.range,Te._id="xangularaxis",Te.ticklabeloverflow="allow",Te.setScale();var Qt=function(Pt){return(Te.range[0]-Pt.x)/(Te.range[1]-Te.range[0])*Math.PI+Math.PI},Ve={},Ye=a.makeLabelFns(Te,0).labelStandoff;Ve.xFn=function(Pt){var Ke=Qt(Pt);return Math.cos(Ke)*Ye},Ve.yFn=function(Pt){var Ke=Qt(Pt),mt=Math.sin(Ke)>0?.2:1;return-Math.sin(Ke)*(Ye+Pt.fontSize*mt)+Math.abs(Math.cos(Ke))*(Pt.fontSize*i)},Ve.anchorFn=function(Pt){var Ke=Qt(Pt),mt=Math.cos(Ke);return Math.abs(mt)<.1?"middle":mt>0?"start":"end"},Ve.heightFn=function(Pt,Ke,mt){var Dt=Qt(Pt);return-.5*(1+Math.sin(Dt))*mt};var Be=function(Pt){return r(nt[0]+ze*Math.cos(Pt),nt[1]-ze*Math.sin(Pt))};if(Oe=function(Pt){return Be(Qt(Pt))},Me=a.calcTicks(Te),Fe=a.getTickSigns(Te)[2],Te.visible){Fe=Te.ticks==="inside"?-1:1;var Je=(Te.linewidth||1)/2;a.drawTicks(Ae,Te,{vals:Me,layer:xt,path:"M"+Fe*Je+",0h"+Fe*Te.ticklen,transFn:function(Pt){var Ke=Qt(Pt);return Be(Ke)+"rotate("+-t(Ke)+")"}}),a.drawLabels(Ae,Te,{vals:Me,layer:xt,transFn:Oe,labelFns:Ve})}var Se=[We].concat(qe.gauge.steps),Pe=ft.selectAll("g.bg-arc").data(Se);Pe.enter().append("g").classed("bg-arc",!0).append("path"),Pe.select("path").call(Gt).call(w),Pe.exit().remove();var De=At(qe.gauge.bar.thickness),Ie=ft.selectAll("g.value-arc").data([qe.gauge.bar]);Ie.enter().append("g").classed("value-arc",!0).append("path");var $e=Ie.select("path");g(It)?($e.transition().duration(It.duration).ease(It.easing).each("end",function(){Et&&Et()}).each("interrupt",function(){Et&&Et()}).attrTween("d",(st=De,dt=rt(me[0].lastY),ut=rt(me[0].y),function(){var Pt=p(dt,ut);return function(Ke){return st.endAngle(Pt(Ke))()}})),qe._lastValue=me[0].y):$e.attr("d",typeof me[0].y=="number"?De.endAngle(rt(me[0].y)):"M0,0Z");var st,dt,ut;$e.call(w),Ie.exit().remove(),Se=[];var Lt=qe.gauge.threshold.value;(Lt||Lt===0)&&Se.push({range:[Lt,Lt],color:qe.gauge.threshold.color,line:{color:qe.gauge.threshold.line.color,width:qe.gauge.threshold.line.width},thickness:qe.gauge.threshold.thickness});var lt=ft.selectAll("g.threshold-arc").data(Se);lt.enter().append("g").classed("threshold-arc",!0).append("path"),lt.select("path").call(Gt).call(w),lt.exit().remove();var Ct=ft.selectAll("g.gauge-outline").data([Ze]);Ct.enter().append("g").classed("gauge-outline",!0).append("path"),Ct.select("path").call(Gt).call(w),Ct.exit().remove()}(M,0,F,{radius:ee,innerRadius:ne,gauge:le,layer:de,size:j,gaugeBg:K,gaugeOutline:Z,transitionOpts:P,onComplete:E});var xe=re.selectAll("g.bullet").data(U?F:[]);xe.exit().remove();var we=re.selectAll("g.bulletaxis").data(U?F:[]);we.exit().remove(),U&&function(Ae,fe,me,ke){var Te,Me,Oe,Fe,qe,et=me[0].trace,ze=ke.gauge,Ue=ke.layer,We=ke.gaugeBg,Ze=ke.gaugeOutline,nt=ke.size,ft=et.domain,xt=ke.transitionOpts,It=ke.onComplete;ze.enter().append("g").classed("bullet",!0),ze.attr("transform",r(nt.l,nt.t)),Ue.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Ue.selectAll("g.xbulletaxistick,path,text").remove();var Et=nt.h,it=et.gauge.bar.thickness*Et,rt=ft.x[0],At=ft.x[0]+(ft.x[1]-ft.x[0])*(et._hasNumber||et._hasDelta?1-h.bulletNumberDomainSize:1);(Te=_(Ae,et.gauge.axis))._id="xbulletaxis",Te.domain=[rt,At],Te.setScale(),Me=a.calcTicks(Te),Oe=a.makeTransTickFn(Te),Fe=a.getTickSigns(Te)[2],qe=nt.t+nt.h,Te.visible&&(a.drawTicks(Ae,Te,{vals:Te.ticks==="inside"?a.clipEnds(Te,Me):Me,layer:Ue,path:a.makeTickPath(Te,qe,Fe),transFn:Oe}),a.drawLabels(Ae,Te,{vals:Me,layer:Ue,transFn:Oe,labelFns:a.makeLabelFns(Te,qe)}));function Gt(Pe){Pe.attr("width",function(De){return Math.max(0,Te.c2p(De.range[1])-Te.c2p(De.range[0]))}).attr("x",function(De){return Te.c2p(De.range[0])}).attr("y",function(De){return .5*(1-De.thickness)*Et}).attr("height",function(De){return De.thickness*Et})}var Qt=[We].concat(et.gauge.steps),Ve=ze.selectAll("g.bg-bullet").data(Qt);Ve.enter().append("g").classed("bg-bullet",!0).append("rect"),Ve.select("rect").call(Gt).call(w),Ve.exit().remove();var Ye=ze.selectAll("g.value-bullet").data([et.gauge.bar]);Ye.enter().append("g").classed("value-bullet",!0).append("rect"),Ye.select("rect").attr("height",it).attr("y",(Et-it)/2).call(w),g(xt)?Ye.select("rect").transition().duration(xt.duration).ease(xt.easing).each("end",function(){It&&It()}).each("interrupt",function(){It&&It()}).attr("width",Math.max(0,Te.c2p(Math.min(et.gauge.axis.range[1],me[0].y)))):Ye.select("rect").attr("width",typeof me[0].y=="number"?Math.max(0,Te.c2p(Math.min(et.gauge.axis.range[1],me[0].y))):0),Ye.exit().remove();var Be=me.filter(function(){return et.gauge.threshold.value||et.gauge.threshold.value===0}),Je=ze.selectAll("g.threshold-bullet").data(Be);Je.enter().append("g").classed("threshold-bullet",!0).append("line"),Je.select("line").attr("x1",Te.c2p(et.gauge.threshold.value)).attr("x2",Te.c2p(et.gauge.threshold.value)).attr("y1",(1-et.gauge.threshold.thickness)/2*Et).attr("y2",(1-(1-et.gauge.threshold.thickness)/2)*Et).call(v.stroke,et.gauge.threshold.line.color).style("stroke-width",et.gauge.threshold.line.width),Je.exit().remove();var Se=ze.selectAll("g.gauge-outline").data([Ze]);Se.enter().append("g").classed("gauge-outline",!0).append("rect"),Se.select("rect").call(Gt).call(w),Se.exit().remove()}(M,0,F,{gauge:xe,layer:we,size:j,gaugeBg:K,gaugeOutline:Z,transitionOpts:P,onComplete:E});var be=re.selectAll("text.title").data(F);be.exit().remove(),be.enter().append("text").classed("title",!0),be.attr("text-anchor",function(){return U?m.right:m[$.title.align]}).text($.title.text).call(n.font,$.title.font).call(s.convertToTspans,M),be.attr("transform",function(){var Ae,fe=j.l+j.w*c[$.title.align],me=h.titlePadding,ke=n.bBox(be.node());return R?(N&&($.gauge.axis.visible?Ae=n.bBox(de.node()).top-me-ke.bottom:Ae=j.t+j.h/2-ee/2-ke.bottom-me),U&&(Ae=V-(ke.top+ke.bottom)/2,fe=j.l-h.bulletPadding*j.w)):Ae=$._numbersTop-me-ke.bottom,r(fe,Ae)})})}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"./constants":858,"@plotly/d3":58,"d3-interpolate":116}],862:[function(u,q,W){var o=u("../../components/colorscale/attributes"),p=u("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=u("../../plots/template_attributes").hovertemplateAttrs,y=u("../mesh3d/attributes"),e=u("../../plots/attributes"),r=u("../../lib/extend").extendFlat,t=u("../../plot_api/edit_types").overrideAll,i=q.exports=t(r({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:x(),xhoverformat:p("x"),yhoverformat:p("y"),zhoverformat:p("z"),valuehoverformat:p("value",1),showlegend:r({},e.showlegend,{dflt:!1})},o("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:y.opacity,lightposition:y.lightposition,lighting:y.lighting,flatshading:y.flatshading,contour:y.contour,hoverinfo:r({},e.hoverinfo)}),"calc","nested");i.flatshading.dflt=!0,i.lighting.facenormalsepsilon.dflt=0,i.x.editType=i.y.editType=i.z.editType=i.value.editType="calc+clearAxisTypes",i.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],863:[function(u,q,W){var o=u("../../components/colorscale/calc"),p=u("../streamtube/calc").processGrid,x=u("../streamtube/calc").filter;q.exports=function(y,e){e._len=Math.min(e.x.length,e.y.length,e.z.length,e.value.length),e._x=x(e.x,e._len),e._y=x(e.y,e._len),e._z=x(e.z,e._len),e._value=x(e.value,e._len);var r=p(e);e._gridFill=r.fill,e._Xs=r.Xs,e._Ys=r.Ys,e._Zs=r.Zs,e._len=r.len;for(var t=1/0,i=-1/0,n=0;n<e._len;n++){var h=e._value[n];t=Math.min(t,h),i=Math.max(i,h)}e._minValues=t,e._maxValues=i,e._vMin=e.isomin===void 0||e.isomin===null?t:e.isomin,e._vMax=e.isomax===void 0||e.isomin===null?i:e.isomax,o(y,e,{vals:[e._vMin,e._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374,"../streamtube/calc":1041}],864:[function(u,q,W){var o=u("../../../stackgl_modules").gl_mesh3d,p=u("../../lib/gl_format_color").parseColorScale,x=u("../../lib/str2rgbarray"),y=u("../../components/colorscale").extractOpts,e=u("../../plots/gl3d/zip3"),r=function(s,a){for(var l=a.length-1;l>0;l--){var f=Math.min(a[l],a[l-1]),d=Math.max(a[l],a[l-1]);if(d>f&&f<s&&s<=d)return{id:l,distRatio:(d-s)/(d-f)}}return{id:0,distRatio:0}};function t(s,a,l){this.scene=s,this.uid=l,this.mesh=a,this.name="",this.data=null,this.showContour=!1}var i=t.prototype;i.handlePick=function(s){if(s.object===this.mesh){var a=s.data.index,l=this.data._meshX[a],f=this.data._meshY[a],d=this.data._meshZ[a],v=this.data._Ys.length,m=this.data._Zs.length,c=r(l,this.data._Xs).id,b=r(f,this.data._Ys).id,g=r(d,this.data._Zs).id,w=s.index=g+m*b+m*v*c;s.traceCoordinate=[this.data._meshX[w],this.data._meshY[w],this.data._meshZ[w],this.data._value[w]];var _=this.data.hovertext||this.data.text;return Array.isArray(_)&&_[w]!==void 0?s.textLabel=_[w]:_&&(s.textLabel=_),!0}},i.update=function(s){var a=this.scene,l=a.fullSceneLayout;function f(m,c,b,g){return c.map(function(w){return m.d2l(w,0,g)*b})}this.data=h(s);var d={positions:e(f(l.xaxis,s._meshX,a.dataScale[0],s.xcalendar),f(l.yaxis,s._meshY,a.dataScale[1],s.ycalendar),f(l.zaxis,s._meshZ,a.dataScale[2],s.zcalendar)),cells:e(s._meshI,s._meshJ,s._meshK),lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,contourEnable:s.contour.show,contourColor:x(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},v=y(s);d.vertexIntensity=s._meshIntensity,d.vertexIntensityBounds=[v.min,v.max],d.colormap=p(s),this.mesh.update(d)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var n=["xyz","xzy","yxz","yzx","zxy","zyx"];function h(s){s._meshI=[],s._meshJ=[],s._meshK=[];var a,l,f,d,v,m,c,b=s.surface.show,g=s.spaceframe.show,w=s.surface.fill,_=s.spaceframe.fill,T=!1,k=!1,L=0,M=s._Xs,I=s._Ys,P=s._Zs,S=M.length,E=I.length,D=P.length,F=n.indexOf(s._gridFill.replace(/-/g,"").replace(/\+/g,"")),H=function(ze,Ue,We){switch(F){case 5:return We+D*Ue+D*E*ze;case 4:return We+D*ze+D*S*Ue;case 3:return Ue+E*We+E*D*ze;case 2:return Ue+E*ze+E*S*We;case 1:return ze+S*We+S*D*Ue;default:return ze+S*Ue+S*E*We}},V=s._minValues,Q=s._maxValues,K=s._vMin,Z=s._vMax;function $(ze,Ue,We){for(var Ze=m.length,nt=l;nt<Ze;nt++)if(ze===f[nt]&&Ue===d[nt]&&We===v[nt])return nt;return-1}function re(){l=a}function R(){f=[],d=[],v=[],m=[],a=0,re()}function N(ze,Ue,We,Ze){return f.push(ze),d.push(Ue),v.push(We),m.push(Ze),++a-1}function U(ze,Ue,We){for(var Ze=[],nt=0;nt<ze.length;nt++)Ze[nt]=ze[nt]*(1-We)+We*Ue[nt];return Ze}function te(ze){c=ze}function j(ze,Ue){return ze==="all"||ze===null||ze.indexOf(Ue)>-1}function Y(ze,Ue){return ze===null?Ue:ze}function J(ze,Ue,We){re();var Ze,nt,ft,xt=[Ue],It=[We];if(c>=1)xt=[Ue],It=[We];else if(c>0){var Et=function(Je,Se){var Pe=Je[0],De=Je[1],Ie=Je[2],$e=function(Ke,mt,Dt){for(var Bt=[],Zt=0;Zt<Ke.length;Zt++)Bt[Zt]=(Ke[Zt]+mt[Zt]+Dt[Zt])/3;return Bt}(Pe,De,Ie),st=Math.sqrt(1-c),dt=U($e,Pe,st),ut=U($e,De,st),Lt=U($e,Ie,st),lt=Se[0],Ct=Se[1],Pt=Se[2];return{xyzv:[[Pe,De,ut],[ut,dt,Pe],[De,Ie,Lt],[Lt,ut,De],[Ie,Pe,dt],[dt,Lt,Ie]],abc:[[lt,Ct,-1],[-1,-1,lt],[Ct,Pt,-1],[-1,-1,Ct],[Pt,lt,-1],[-1,-1,Pt]]}}(Ue,We);xt=Et.xyzv,It=Et.abc}for(var it=0;it<xt.length;it++){Ue=xt[it],We=It[it];for(var rt=[],At=0;At<3;At++){var Gt=Ue[At][0],Qt=Ue[At][1],Ve=Ue[At][2],Ye=Ue[At][3],Be=We[At]>-1?We[At]:$(Gt,Qt,Ve);rt[At]=Be>-1?Be:N(Gt,Qt,Ve,Y(ze,Ye))}Ze=rt[0],nt=rt[1],ft=rt[2],s._meshI.push(Ze),s._meshJ.push(nt),s._meshK.push(ft),++L}}function ee(ze,Ue,We,Ze){var nt=ze[3];nt<We&&(nt=We),nt>Ze&&(nt=Ze);for(var ft=(ze[3]-nt)/(ze[3]-Ue[3]+1e-9),xt=[],It=0;It<4;It++)xt[It]=(1-ft)*ze[It]+ft*Ue[It];return xt}function ne(ze,Ue,We){return ze>=Ue&&ze<=We}function se(ze){var Ue=.001*(Z-K);return ze>=K-Ue&&ze<=Z+Ue}function oe(ze){for(var Ue=[],We=0;We<4;We++){var Ze=ze[We];Ue.push([s._x[Ze],s._y[Ze],s._z[Ze],s._value[Ze]])}return Ue}function he(ze,Ue,We,Ze,nt,ft){ft||(ft=1),We=[-1,-1,-1];var xt=!1,It=[ne(Ue[0][3],Ze,nt),ne(Ue[1][3],Ze,nt),ne(Ue[2][3],Ze,nt)];if(!It[0]&&!It[1]&&!It[2])return!1;var Et=function(rt,At,Gt){return se(At[0][3])&&se(At[1][3])&&se(At[2][3])?(J(rt,At,Gt),!0):ft<3&&he(rt,At,Gt,K,Z,++ft)};if(It[0]&&It[1]&&It[2])return Et(ze,Ue,We)||xt;var it=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(rt){if(It[rt[0]]&&It[rt[1]]&&!It[rt[2]]){var At=Ue[rt[0]],Gt=Ue[rt[1]],Qt=Ue[rt[2]],Ve=ee(Qt,At,Ze,nt),Ye=ee(Qt,Gt,Ze,nt);xt=Et(ze,[Ye,Ve,At],[-1,-1,We[rt[0]]])||xt,xt=Et(ze,[At,Gt,Ye],[We[rt[0]],We[rt[1]],-1])||xt,it=!0}}),it||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(rt){if(It[rt[0]]&&!It[rt[1]]&&!It[rt[2]]){var At=Ue[rt[0]],Gt=Ue[rt[1]],Qt=Ue[rt[2]],Ve=ee(Gt,At,Ze,nt),Ye=ee(Qt,At,Ze,nt);xt=Et(ze,[Ye,Ve,At],[-1,-1,We[rt[0]]])||xt,it=!0}}),xt}function le(ze,Ue,We,Ze){var nt=!1,ft=oe(Ue),xt=[ne(ft[0][3],We,Ze),ne(ft[1][3],We,Ze),ne(ft[2][3],We,Ze),ne(ft[3][3],We,Ze)];if(!(xt[0]||xt[1]||xt[2]||xt[3]))return nt;if(xt[0]&&xt[1]&&xt[2]&&xt[3])return k&&(nt=function(Et,it,rt){var At=function(Gt,Qt,Ve){J(Et,[it[Gt],it[Qt],it[Ve]],[rt[Gt],rt[Qt],rt[Ve]])};At(0,1,2),At(3,0,1),At(2,3,0),At(1,2,3)}(ze,ft,Ue)||nt),nt;var It=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Et){if(xt[Et[0]]&&xt[Et[1]]&&xt[Et[2]]&&!xt[Et[3]]){var it=ft[Et[0]],rt=ft[Et[1]],At=ft[Et[2]],Gt=ft[Et[3]];if(k)nt=J(ze,[it,rt,At],[Ue[Et[0]],Ue[Et[1]],Ue[Et[2]]])||nt;else{var Qt=ee(Gt,it,We,Ze),Ve=ee(Gt,rt,We,Ze),Ye=ee(Gt,At,We,Ze);nt=J(null,[Qt,Ve,Ye],[-1,-1,-1])||nt}It=!0}}),It||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Et){if(xt[Et[0]]&&xt[Et[1]]&&!xt[Et[2]]&&!xt[Et[3]]){var it=ft[Et[0]],rt=ft[Et[1]],At=ft[Et[2]],Gt=ft[Et[3]],Qt=ee(At,it,We,Ze),Ve=ee(At,rt,We,Ze),Ye=ee(Gt,rt,We,Ze),Be=ee(Gt,it,We,Ze);k?(nt=J(ze,[it,Be,Qt],[Ue[Et[0]],-1,-1])||nt,nt=J(ze,[rt,Ve,Ye],[Ue[Et[1]],-1,-1])||nt):nt=function(Je,Se,Pe){var De=function(Ie,$e,st){J(Je,[Se[Ie],Se[$e],Se[st]],[Pe[Ie],Pe[$e],Pe[st]])};De(0,1,2),De(2,3,0)}(null,[Qt,Ve,Ye,Be],[-1,-1,-1,-1])||nt,It=!0}}),It||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Et){if(xt[Et[0]]&&!xt[Et[1]]&&!xt[Et[2]]&&!xt[Et[3]]){var it=ft[Et[0]],rt=ft[Et[1]],At=ft[Et[2]],Gt=ft[Et[3]],Qt=ee(rt,it,We,Ze),Ve=ee(At,it,We,Ze),Ye=ee(Gt,it,We,Ze);k?(nt=J(ze,[it,Qt,Ve],[Ue[Et[0]],-1,-1])||nt,nt=J(ze,[it,Ve,Ye],[Ue[Et[0]],-1,-1])||nt,nt=J(ze,[it,Ye,Qt],[Ue[Et[0]],-1,-1])||nt):nt=J(null,[Qt,Ve,Ye],[-1,-1,-1])||nt,It=!0}})),nt}function de(ze,Ue,We,Ze,nt,ft,xt,It,Et,it,rt){var At=!1;return T&&(j(ze,"A")&&(At=le(null,[Ue,We,Ze,ft],it,rt)||At),j(ze,"B")&&(At=le(null,[We,Ze,nt,Et],it,rt)||At),j(ze,"C")&&(At=le(null,[We,ft,xt,Et],it,rt)||At),j(ze,"D")&&(At=le(null,[Ze,ft,It,Et],it,rt)||At),j(ze,"E")&&(At=le(null,[We,Ze,ft,Et],it,rt)||At)),k&&(At=le(ze,[We,Ze,ft,Et],it,rt)||At),At}function xe(ze,Ue,We,Ze,nt,ft,xt,It){return[It[0]===!0||he(ze,oe([Ue,We,Ze]),[Ue,We,Ze],ft,xt),It[1]===!0||he(ze,oe([Ze,nt,Ue]),[Ze,nt,Ue],ft,xt)]}function we(ze,Ue,We,Ze,nt,ft,xt,It,Et){return It?xe(ze,Ue,We,nt,Ze,ft,xt,Et):xe(ze,We,nt,Ze,Ue,ft,xt,Et)}function be(ze,Ue,We,Ze,nt,ft,xt){var It,Et,it,rt,At=!1,Gt=function(){At=he(ze,[It,Et,it],[-1,-1,-1],nt,ft)||At,At=he(ze,[it,rt,It],[-1,-1,-1],nt,ft)||At},Qt=xt[0],Ve=xt[1],Ye=xt[2];return Qt&&(It=U(oe([H(Ue,We-0,Ze-0)])[0],oe([H(Ue-1,We-0,Ze-0)])[0],Qt),Et=U(oe([H(Ue,We-0,Ze-1)])[0],oe([H(Ue-1,We-0,Ze-1)])[0],Qt),it=U(oe([H(Ue,We-1,Ze-1)])[0],oe([H(Ue-1,We-1,Ze-1)])[0],Qt),rt=U(oe([H(Ue,We-1,Ze-0)])[0],oe([H(Ue-1,We-1,Ze-0)])[0],Qt),Gt()),Ve&&(It=U(oe([H(Ue-0,We,Ze-0)])[0],oe([H(Ue-0,We-1,Ze-0)])[0],Ve),Et=U(oe([H(Ue-0,We,Ze-1)])[0],oe([H(Ue-0,We-1,Ze-1)])[0],Ve),it=U(oe([H(Ue-1,We,Ze-1)])[0],oe([H(Ue-1,We-1,Ze-1)])[0],Ve),rt=U(oe([H(Ue-1,We,Ze-0)])[0],oe([H(Ue-1,We-1,Ze-0)])[0],Ve),Gt()),Ye&&(It=U(oe([H(Ue-0,We-0,Ze)])[0],oe([H(Ue-0,We-0,Ze-1)])[0],Ye),Et=U(oe([H(Ue-0,We-1,Ze)])[0],oe([H(Ue-0,We-1,Ze-1)])[0],Ye),it=U(oe([H(Ue-1,We-1,Ze)])[0],oe([H(Ue-1,We-1,Ze-1)])[0],Ye),rt=U(oe([H(Ue-1,We-0,Ze)])[0],oe([H(Ue-1,We-0,Ze-1)])[0],Ye),Gt()),At}function Ae(ze,Ue,We,Ze,nt,ft,xt,It,Et,it,rt,At){var Gt=ze;return At?(T&&ze==="even"&&(Gt=null),de(Gt,Ue,We,Ze,nt,ft,xt,It,Et,it,rt)):(T&&ze==="odd"&&(Gt=null),de(Gt,Et,It,xt,ft,nt,Ze,We,Ue,it,rt))}function fe(ze,Ue,We,Ze,nt){for(var ft=[],xt=0,It=0;It<Ue.length;It++)for(var Et=Ue[It],it=1;it<D;it++)for(var rt=1;rt<E;rt++)ft.push(we(ze,H(Et,rt-1,it-1),H(Et,rt-1,it),H(Et,rt,it-1),H(Et,rt,it),We,Ze,(Et+rt+it)%2,nt&&nt[xt]?nt[xt]:[])),xt++;return ft}function me(ze,Ue,We,Ze,nt){for(var ft=[],xt=0,It=0;It<Ue.length;It++)for(var Et=Ue[It],it=1;it<S;it++)for(var rt=1;rt<D;rt++)ft.push(we(ze,H(it-1,Et,rt-1),H(it,Et,rt-1),H(it-1,Et,rt),H(it,Et,rt),We,Ze,(it+Et+rt)%2,nt&&nt[xt]?nt[xt]:[])),xt++;return ft}function ke(ze,Ue,We,Ze,nt){for(var ft=[],xt=0,It=0;It<Ue.length;It++)for(var Et=Ue[It],it=1;it<E;it++)for(var rt=1;rt<S;rt++)ft.push(we(ze,H(rt-1,it-1,Et),H(rt-1,it,Et),H(rt,it-1,Et),H(rt,it,Et),We,Ze,(rt+it+Et)%2,nt&&nt[xt]?nt[xt]:[])),xt++;return ft}function Te(ze,Ue,We){for(var Ze=1;Ze<D;Ze++)for(var nt=1;nt<E;nt++)for(var ft=1;ft<S;ft++)Ae(ze,H(ft-1,nt-1,Ze-1),H(ft-1,nt-1,Ze),H(ft-1,nt,Ze-1),H(ft-1,nt,Ze),H(ft,nt-1,Ze-1),H(ft,nt-1,Ze),H(ft,nt,Ze-1),H(ft,nt,Ze),Ue,We,(ft+nt+Ze)%2)}function Me(ze,Ue,We){T=!0,Te(ze,Ue,We),T=!1}function Oe(ze,Ue,We,Ze,nt,ft){for(var xt=[],It=0,Et=0;Et<Ue.length;Et++)for(var it=Ue[Et],rt=1;rt<D;rt++)for(var At=1;At<E;At++)xt.push(be(ze,it,At,rt,We,Ze,nt[Et],ft&&ft[It]&&ft[It])),It++;return xt}function Fe(ze,Ue,We,Ze,nt,ft){for(var xt=[],It=0,Et=0;Et<Ue.length;Et++)for(var it=Ue[Et],rt=1;rt<S;rt++)for(var At=1;At<D;At++)xt.push(be(ze,rt,it,At,We,Ze,nt[Et],ft&&ft[It]&&ft[It])),It++;return xt}function qe(ze,Ue,We,Ze,nt,ft){for(var xt=[],It=0,Et=0;Et<Ue.length;Et++)for(var it=Ue[Et],rt=1;rt<E;rt++)for(var At=1;At<S;At++)xt.push(be(ze,At,rt,it,We,Ze,nt[Et],ft&&ft[It]&&ft[It])),It++;return xt}function et(ze,Ue){for(var We=[],Ze=ze;Ze<Ue;Ze++)We.push(Ze);return We}return function(){if(R(),function(){for(var It=0;It<S;It++)for(var Et=0;Et<E;Et++)for(var it=0;it<D;it++){var rt=H(It,Et,it);N(s._x[rt],s._y[rt],s._z[rt],s._value[rt])}}(),g&&_&&(te(_),k=!0,Te(null,K,Z),k=!1),b&&w){te(w);for(var ze=s.surface.pattern,Ue=s.surface.count,We=0;We<Ue;We++){var Ze=Ue===1?.5:We/(Ue-1),nt=(1-Ze)*K+Ze*Z,ft=Math.abs(nt-V)>Math.abs(nt-Q)?[V,nt]:[nt,Q];Me(ze,ft[0],ft[1])}}var xt=[[Math.min(K,Q),Math.max(K,Q)],[Math.min(V,Z),Math.max(V,Z)]];["x","y","z"].forEach(function(It){for(var Et=[],it=0;it<xt.length;it++){var rt=0,At=xt[it][0],Gt=xt[it][1],Qt=s.slices[It];if(Qt.show&&Qt.fill){te(Qt.fill);var Ve=[],Ye=[],Be=[];if(Qt.locations.length)for(var Je=0;Je<Qt.locations.length;Je++){var Se=r(Qt.locations[Je],It==="x"?M:It==="y"?I:P);Se.distRatio===0?Ve.push(Se.id):Se.id>0&&(Ye.push(Se.id),It==="x"?Be.push([Se.distRatio,0,0]):It==="y"?Be.push([0,Se.distRatio,0]):Be.push([0,0,Se.distRatio]))}else Ve=et(1,It==="x"?S-1:It==="y"?E-1:D-1);Ye.length>0&&(Et[rt]=It==="x"?Oe(null,Ye,At,Gt,Be,Et[rt]):It==="y"?Fe(null,Ye,At,Gt,Be,Et[rt]):qe(null,Ye,At,Gt,Be,Et[rt]),rt++),Ve.length>0&&(Et[rt]=It==="x"?fe(null,Ve,At,Gt,Et[rt]):It==="y"?me(null,Ve,At,Gt,Et[rt]):ke(null,Ve,At,Gt,Et[rt]),rt++)}var Pe=s.caps[It];Pe.show&&Pe.fill&&(te(Pe.fill),Et[rt]=It==="x"?fe(null,[0,S-1],At,Gt,Et[rt]):It==="y"?me(null,[0,E-1],At,Gt,Et[rt]):ke(null,[0,D-1],At,Gt,Et[rt]),rt++)}}),L===0&&R(),s._meshX=f,s._meshY=d,s._meshZ=v,s._meshIntensity=m,s._Xs=M,s._Ys=I,s._Zs=P}(),s}q.exports={findNearestOnAxis:r,generateIsoMeshes:h,createIsosurfaceTrace:function(s,a){var l=s.glplot.gl,f=o({gl:l}),d=new t(s,f,a.uid);return f._trace=d,d.update(a),s.glplot.add(f),d}}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],865:[function(u,q,W){var o=u("../../lib"),p=u("../../registry"),x=u("./attributes"),y=u("../../components/colorscale/defaults");function e(r,t,i,n,h){var s=h("isomin"),a=h("isomax");a!=null&&s!=null&&s>a&&(t.isomin=null,t.isomax=null);var l=h("x"),f=h("y"),d=h("z"),v=h("value");l&&l.length&&f&&f.length&&d&&d.length&&v&&v.length?(p.getComponentMethod("calendars","handleTraceDefaults")(r,t,["x","y","z"],n),h("valuehoverformat"),["x","y","z"].forEach(function(m){h(m+"hoverformat");var c="caps."+m;h(c+".show")&&h(c+".fill");var b="slices."+m;h(b+".show")&&(h(b+".fill"),h(b+".locations"))}),h("spaceframe.show")&&h("spaceframe.fill"),h("surface.show")&&(h("surface.count"),h("surface.fill"),h("surface.pattern")),h("contour.show")&&(h("contour.color"),h("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(m){h(m)}),y(r,t,n,h,{prefix:"",cLetter:"c"}),t._length=null):t.visible=!1}q.exports={supplyDefaults:function(r,t,i,n){e(r,t,i,n,function(h,s){return o.coerce(r,t,x,h,s)})},supplyIsoDefaults:e}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":862}],866:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults").supplyDefaults,calc:u("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:u("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:u("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":862,"./calc":863,"./convert":864,"./defaults":865}],867:[function(u,q,W){var o=u("../../components/colorscale/attributes"),p=u("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=u("../../plots/template_attributes").hovertemplateAttrs,y=u("../surface/attributes"),e=u("../../plots/attributes"),r=u("../../lib/extend").extendFlat;q.exports=r({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:x({editType:"calc"}),xhoverformat:p("x"),yhoverformat:p("y"),zhoverformat:p("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},o("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:y.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:r({},y.contours.x.show,{}),color:y.contours.x.color,width:y.contours.x.width,editType:"calc"},lightposition:{x:r({},y.lightposition.x,{dflt:1e5}),y:r({},y.lightposition.y,{dflt:1e5}),z:r({},y.lightposition.z,{dflt:0}),editType:"calc"},lighting:r({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},y.lighting),hoverinfo:r({},e.hoverinfo,{editType:"calc"}),showlegend:r({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../surface/attributes":1057}],868:[function(u,q,W){var o=u("../../components/colorscale/calc");q.exports=function(p,x){x.intensity&&o(p,x,{vals:x.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],869:[function(u,q,W){var o=u("../../../stackgl_modules").gl_mesh3d,p=u("../../../stackgl_modules").delaunay_triangulate,x=u("../../../stackgl_modules").alpha_shape,y=u("../../../stackgl_modules").convex_hull,e=u("../../lib/gl_format_color").parseColorScale,r=u("../../lib/str2rgbarray"),t=u("../../components/colorscale").extractOpts,i=u("../../plots/gl3d/zip3");function n(d,v,m){this.scene=d,this.uid=m,this.mesh=v,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var h=n.prototype;function s(d){for(var v=[],m=d.length,c=0;c<m;c++)v[c]=r(d[c]);return v}function a(d,v,m,c){for(var b=[],g=v.length,w=0;w<g;w++)b[w]=d.d2l(v[w],0,c)*m;return b}function l(d){for(var v=[],m=d.length,c=0;c<m;c++)v[c]=Math.round(d[c]);return v}function f(d,v){for(var m=d.length,c=0;c<m;c++)if(d[c]<=-.5||d[c]>=v-.5)return!1;return!0}h.handlePick=function(d){if(d.object===this.mesh){var v=d.index=d.data.index;d.data._cellCenter?d.traceCoordinate=d.data.dataCoordinate:d.traceCoordinate=[this.data.x[v],this.data.y[v],this.data.z[v]];var m=this.data.hovertext||this.data.text;return Array.isArray(m)&&m[v]!==void 0?d.textLabel=m[v]:m&&(d.textLabel=m),!0}},h.update=function(d){var v=this.scene,m=v.fullSceneLayout;this.data=d;var c,b=d.x.length,g=i(a(m.xaxis,d.x,v.dataScale[0],d.xcalendar),a(m.yaxis,d.y,v.dataScale[1],d.ycalendar),a(m.zaxis,d.z,v.dataScale[2],d.zcalendar));if(d.i&&d.j&&d.k){if(d.i.length!==d.j.length||d.j.length!==d.k.length||!f(d.i,b)||!f(d.j,b)||!f(d.k,b))return;c=i(l(d.i),l(d.j),l(d.k))}else c=d.alphahull===0?y(g):d.alphahull>0?x(d.alphahull,g):function(k,L){for(var M=["x","y","z"].indexOf(k),I=[],P=L.length,S=0;S<P;S++)I[S]=[L[S][(M+1)%3],L[S][(M+2)%3]];return p(I)}(d.delaunayaxis,g);var w={positions:g,cells:c,lightPosition:[d.lightposition.x,d.lightposition.y,d.lightposition.z],ambient:d.lighting.ambient,diffuse:d.lighting.diffuse,specular:d.lighting.specular,roughness:d.lighting.roughness,fresnel:d.lighting.fresnel,vertexNormalsEpsilon:d.lighting.vertexnormalsepsilon,faceNormalsEpsilon:d.lighting.facenormalsepsilon,opacity:d.opacity,contourEnable:d.contour.show,contourColor:r(d.contour.color).slice(0,3),contourWidth:d.contour.width,useFacetNormals:d.flatshading};if(d.intensity){var _=t(d);this.color="#fff";var T=d.intensitymode;w[T+"Intensity"]=d.intensity,w[T+"IntensityBounds"]=[_.min,_.max],w.colormap=e(d)}else d.vertexcolor?(this.color=d.vertexcolor[0],w.vertexColors=s(d.vertexcolor)):d.facecolor?(this.color=d.facecolor[0],w.cellColors=s(d.facecolor)):(this.color=d.color,w.meshColor=r(d.color));this.mesh.update(w)},h.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},q.exports=function(d,v){var m=d.glplot.gl,c=o({gl:m}),b=new n(d,c,v.uid);return c._trace=b,b.update(v),d.glplot.add(c),b}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],870:[function(u,q,W){var o=u("../../registry"),p=u("../../lib"),x=u("../../components/colorscale/defaults"),y=u("./attributes");q.exports=function(e,r,t,i){function n(s,a){return p.coerce(e,r,y,s,a)}function h(s){var a=s.map(function(l){var f=n(l);return f&&p.isArrayOrTypedArray(f)?f:null});return a.every(function(l){return l&&l.length===a[0].length})&&a}h(["x","y","z"])?(h(["i","j","k"]),(!r.i||r.j&&r.k)&&(!r.j||r.k&&r.i)&&(!r.k||r.i&&r.j)?(o.getComponentMethod("calendars","handleTraceDefaults")(e,r,["x","y","z"],i),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(s){n(s)}),n("contour.show")&&(n("contour.color"),n("contour.width")),"intensity"in e?(n("intensity"),n("intensitymode"),x(e,r,i,n,{prefix:"",cLetter:"c"})):(r.showscale=!1,"facecolor"in e?n("facecolor"):"vertexcolor"in e?n("vertexcolor"):n("color",t)),n("text"),n("hovertext"),n("hovertemplate"),n("xhoverformat"),n("yhoverformat"),n("zhoverformat"),r._length=null):r.visible=!1):r.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":867}],871:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults"),calc:u("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:u("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:u("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":867,"./calc":868,"./convert":869,"./defaults":870}],872:[function(u,q,W){var o=u("../../lib").extendFlat,p=u("../scatter/attributes"),x=u("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=u("../../components/drawing/attributes").dash,e=u("../../components/fx/attributes"),r=u("../../constants/delta.js"),t=r.INCREASING.COLOR,i=r.DECREASING.COLOR,n=p.line;function h(s){return{line:{color:o({},n.color,{dflt:s}),width:n.width,dash:y,editType:"style"},editType:"style"}}q.exports={xperiod:p.xperiod,xperiod0:p.xperiod0,xperiodalignment:p.xperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:o({},n.width,{}),dash:o({},y,{}),editType:"style"},increasing:h(t),decreasing:h(i),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:o({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":387,"../../components/fx/attributes":397,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":926}],873:[function(u,q,W){var o=u("../../lib"),p=o._,x=u("../../plots/cartesian/axes"),y=u("../../plots/cartesian/align_period"),e=u("../../constants/numerical").BADNUM;function r(i,n,h,s){return{o:i,h:n,l:h,c:s}}function t(i,n,h,s,a,l){for(var f=a.makeCalcdata(n,"open"),d=a.makeCalcdata(n,"high"),v=a.makeCalcdata(n,"low"),m=a.makeCalcdata(n,"close"),c=Array.isArray(n.text),b=Array.isArray(n.hovertext),g=!0,w=null,_=!!n.xperiodalignment,T=[],k=0;k<s.length;k++){var L=s[k],M=f[k],I=d[k],P=v[k],S=m[k];if(L!==e&&M!==e&&I!==e&&P!==e&&S!==e){S===M?w!==null&&S!==w&&(g=S>w):g=S>M,w=S;var E=l(M,I,P,S);E.pos=L,E.yc=(M+S)/2,E.i=k,E.dir=g?"increasing":"decreasing",E.x=E.pos,E.y=[P,I],_&&(E.orig_p=h[k]),c&&(E.tx=n.text[k]),b&&(E.htx=n.hovertext[k]),T.push(E)}else T.push({pos:L,empty:!0})}return n._extremes[a._id]=x.findExtremes(a,o.concat(v,d),{padded:!0}),T.length&&(T[0].t={labels:{open:p(i,"open:")+" ",high:p(i,"high:")+" ",low:p(i,"low:")+" ",close:p(i,"close:")+" "}}),T}q.exports={calc:function(i,n){var h=x.getFromId(i,n.xaxis),s=x.getFromId(i,n.yaxis),a=function(m,c,b){var g=b._minDiff;if(!g){var w,_=m._fullData,T=[];for(g=1/0,w=0;w<_.length;w++){var k=_[w];if(k.type==="ohlc"&&k.visible===!0&&k.xaxis===c._id){T.push(k);var L=c.makeCalcdata(k,"x");k._origX=L;var M=y(b,c,"x",L).vals;k._xcalc=M;var I=o.distinctVals(M).minDiff;I&&isFinite(I)&&(g=Math.min(g,I))}}for(g===1/0&&(g=1),w=0;w<T.length;w++)T[w]._minDiff=g}return g*b.tickwidth}(i,h,n),l=n._minDiff;n._minDiff=null;var f=n._origX;n._origX=null;var d=n._xcalc;n._xcalc=null;var v=t(i,n,f,d,s,r);return n._extremes[h._id]=x.findExtremes(h,d,{vpad:l/2}),v.length?(o.extendFlat(v[0].t,{wHover:l/2,tickLen:a}),v):[{t:{empty:!0}}]},calcCommon:t}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554}],874:[function(u,q,W){var o=u("../../lib"),p=u("./ohlc_defaults"),x=u("../scatter/period_defaults"),y=u("./attributes");function e(r,t,i,n){i(n+".line.color"),i(n+".line.width",t.line.width),i(n+".line.dash",t.line.dash)}q.exports=function(r,t,i,n){function h(s,a){return o.coerce(r,t,y,s,a)}p(r,t,h,n)?(x(r,t,n,h,{x:!0}),h("xhoverformat"),h("yhoverformat"),h("line.width"),h("line.dash"),e(r,t,h,"increasing"),e(r,t,h,"decreasing"),h("text"),h("hovertext"),h("tickwidth"),n._requestRangeslider[t.xaxis]=!0):t.visible=!1}},{"../../lib":503,"../scatter/period_defaults":946,"./attributes":872,"./ohlc_defaults":877}],875:[function(u,q,W){var o=u("../../plots/cartesian/axes"),p=u("../../lib"),x=u("../../components/fx"),y=u("../../components/color"),e=u("../../lib").fillText,r=u("../../constants/delta.js"),t={increasing:r.INCREASING.SYMBOL,decreasing:r.DECREASING.SYMBOL};function i(s,a,l,f){var d,v,m=s.cd,c=s.xa,b=m[0].trace,g=m[0].t,w=b.type,_=w==="ohlc"?"l":"min",T=w==="ohlc"?"h":"max",k=g.bPos||0,L=g.bdPos||g.tickLen,M=g.wHover,I=Math.min(1,L/Math.abs(c.r2c(c.range[1])-c.r2c(c.range[0])));function P(Q){var K=function(Z){return Z.pos+k-a}(Q);return x.inbox(K-M,K+M,d)}function S(Q){var K=Q[_],Z=Q[T];return K===Z||x.inbox(K-l,Z-l,d)}function E(Q){return(P(Q)+S(Q))/2}d=s.maxHoverDistance-I,v=s.maxSpikeDistance-I;var D=x.getDistanceFunction(f,P,S,E);if(x.getClosest(m,D,s),s.index===!1)return null;var F=m[s.index];if(F.empty)return null;var H=b[F.dir],V=H.line.color;return y.opacity(V)&&H.line.width?s.color=V:s.color=H.fillcolor,s.x0=c.c2p(F.pos+k-L,!0),s.x1=c.c2p(F.pos+k+L,!0),s.xLabelVal=F.orig_p!==void 0?F.orig_p:F.pos,s.spikeDistance=E(F)*v/d,s.xSpike=c.c2p(F.pos,!0),s}function n(s,a,l,f){var d=s.cd,v=s.ya,m=d[0].trace,c=d[0].t,b=[],g=i(s,a,l,f);if(!g)return[];var w=d[g.index].hi||m.hoverinfo,_=w.split("+");if(!(w==="all"||_.indexOf("y")!==-1))return[];for(var T=["high","open","close","low"],k={},L=0;L<T.length;L++){var M,I=T[L],P=m[I][g.index],S=v.c2p(P,!0);P in k?(M=k[P]).yLabel+="<br>"+c.labels[I]+o.hoverLabelText(v,P,m.yhoverformat):((M=p.extendFlat({},g)).y0=M.y1=S,M.yLabelVal=P,M.yLabel=c.labels[I]+o.hoverLabelText(v,P,m.yhoverformat),M.name="",b.push(M),k[P]=M)}return b}function h(s,a,l,f){var d=s.cd,v=s.ya,m=d[0].trace,c=d[0].t,b=i(s,a,l,f);if(!b)return[];var g=d[b.index],w=b.index=g.i,_=g.dir;function T(E){return c.labels[E]+o.hoverLabelText(v,m[E][w],m.yhoverformat)}var k=g.hi||m.hoverinfo,L=k.split("+"),M=k==="all",I=M||L.indexOf("y")!==-1,P=M||L.indexOf("text")!==-1,S=I?[T("open"),T("high"),T("low"),T("close")+"  "+t[_]]:[];return P&&e(g,m,S),b.extraText=S.join("<br>"),b.y0=b.y1=v.c2p(g.yc,!0),[b]}q.exports={hoverPoints:function(s,a,l,f){return s.cd[0].trace.hoverlabel.split?n(s,a,l,f):h(s,a,l,f)},hoverSplit:n,hoverOnPoints:h}},{"../../components/color":366,"../../components/fx":406,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axes":554}],876:[function(u,q,W){q.exports={moduleType:"trace",name:"ohlc",basePlotModule:u("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:u("./attributes"),supplyDefaults:u("./defaults"),calc:u("./calc").calc,plot:u("./plot"),style:u("./style"),hoverPoints:u("./hover").hoverPoints,selectPoints:u("./select")}},{"../../plots/cartesian":568,"./attributes":872,"./calc":873,"./defaults":874,"./hover":875,"./plot":878,"./select":879,"./style":880}],877:[function(u,q,W){var o=u("../../registry"),p=u("../../lib");q.exports=function(x,y,e,r){var t=e("x"),i=e("open"),n=e("high"),h=e("low"),s=e("close");if(e("hoverlabel.split"),o.getComponentMethod("calendars","handleTraceDefaults")(x,y,["x"],r),i&&n&&h&&s){var a=Math.min(i.length,n.length,h.length,s.length);return t&&(a=Math.min(a,p.minRowLength(t))),y._length=a,a}}},{"../../lib":503,"../../registry":638}],878:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../lib");q.exports=function(x,y,e,r){var t=y.yaxis,i=y.xaxis,n=!!i.rangebreaks;p.makeTraceGroups(r,e,"trace ohlc").each(function(h){var s=o.select(this),a=h[0],l=a.t;if(a.trace.visible!==!0||l.empty)s.remove();else{var f=l.tickLen,d=s.selectAll("path").data(p.identity);d.enter().append("path"),d.exit().remove(),d.attr("d",function(v){if(v.empty)return"M0,0Z";var m=i.c2p(v.pos-f,!0),c=i.c2p(v.pos+f,!0),b=n?(m+c)/2:i.c2p(v.pos,!0);return"M"+m+","+t.c2p(v.o,!0)+"H"+b+"M"+b+","+t.c2p(v.h,!0)+"V"+t.c2p(v.l,!0)+"M"+c+","+t.c2p(v.c,!0)+"H"+b})}})}},{"../../lib":503,"@plotly/d3":58}],879:[function(u,q,W){q.exports=function(o,p){var x,y=o.cd,e=o.xaxis,r=o.yaxis,t=[],i=y[0].t.bPos||0;if(p===!1)for(x=0;x<y.length;x++)y[x].selected=0;else for(x=0;x<y.length;x++){var n=y[x];p.contains([e.c2p(n.pos+i),r.c2p(n.yc)],null,n.i,o)?(t.push({pointNumber:n.i,x:e.c2d(n.pos),y:r.c2d(n.yc)}),n.selected=1):n.selected=0}return t}},{}],880:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../components/drawing"),x=u("../../components/color");q.exports=function(y,e,r){var t=r||o.select(y).selectAll("g.ohlclayer").selectAll("g.trace");t.style("opacity",function(i){return i[0].trace.opacity}),t.each(function(i){var n=i[0].trace;o.select(this).selectAll("path").each(function(h){if(!h.empty){var s=n[h.dir].line;o.select(this).style("fill","none").call(x.stroke,s.color).call(p.dashLine,s.dash,s.width).style("opacity",n.selectedpoints&&!h.selected?.3:1)}})})}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],881:[function(u,q,W){var o=u("../../lib/extend").extendFlat,p=u("../../plots/attributes"),x=u("../../plots/font_attributes"),y=u("../../components/colorscale/attributes"),e=u("../../plots/template_attributes").hovertemplateAttrs,r=u("../../plots/domain").attributes,t=o({editType:"calc"},y("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});q.exports={domain:r({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:o({},p.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:x({editType:"calc"}),tickfont:x({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:t,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],882:[function(u,q,W){var o=u("../../plots/get_data").getModuleCalcData,p=u("./plot");W.name="parcats",W.plot=function(x,y,e,r){var t=o(x.calcdata,"parcats");if(t.length){var i=t[0];p(x,i,e,r)}},W.clean=function(x,y,e,r){var t=r._has&&r._has("parcats"),i=y._has&&y._has("parcats");t&&!i&&r._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":593,"./plot":887}],883:[function(u,q,W){var o=u("../../lib/gup").wrap,p=u("../../components/colorscale/helpers").hasColorscale,x=u("../../components/colorscale/calc"),y=u("../../lib/filter_unique.js"),e=u("../../components/drawing"),r=u("../../lib"),t=u("fast-isnumeric");function i(s,a,l){s.valueInds.push(a),s.count+=l}function n(s,a,l){return{categoryInds:s,color:a,rawColor:l,valueInds:[],count:0}}function h(s,a,l){s.valueInds.push(a),s.count+=l}q.exports=function(s,a){var l=r.filterVisible(a.dimensions);if(l.length===0)return[];var f,d,v,m=l.map(function($){var re;if($.categoryorder==="trace")re=null;else if($.categoryorder==="array")re=$.categoryarray;else{re=y($.values);for(var R=!0,N=0;N<re.length;N++)if(!t(re[N])){R=!1;break}re.sort(R?r.sorterAsc:void 0),$.categoryorder==="category descending"&&(re=re.reverse())}return function(U,te){te=te==null?[]:te.map(function(he){return he});var j={},Y={},J=[];te.forEach(function(he,le){j[he]=0,Y[he]=le});for(var ee=0;ee<U.length;ee++){var ne,se=U[ee];j[se]===void 0?(j[se]=1,ne=te.push(se)-1,Y[se]=ne):(j[se]++,ne=Y[se]),J.push(ne)}var oe=te.map(function(he){return j[he]});return{uniqueValues:te,uniqueCounts:oe,inds:J}}($.values,re)});f=r.isArrayOrTypedArray(a.counts)?a.counts:[a.counts],function($){var re;if(function(R){for(var N=new Array(R.length),U=0;U<R.length;U++){if(R[U]<0||R[U]>=R.length||N[R[U]]!==void 0)return!1;N[R[U]]=!0}return!0}($.map(function(R){return R.displayindex})))for(re=0;re<$.length;re++)$[re]._displayindex=$[re].displayindex;else for(re=0;re<$.length;re++)$[re]._displayindex=re}(l),l.forEach(function($,re){(function(R,N){R._categoryarray=N.uniqueValues,R.ticktext===null||R.ticktext===void 0?R._ticktext=[]:R._ticktext=R.ticktext.slice();for(var U=R._ticktext.length;U<N.uniqueValues.length;U++)R._ticktext.push(N.uniqueValues[U])})($,m[re])});var c,b=a.line;b?(p(a,"line")&&x(s,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),c=e.tryColorscale(b)):c=r.identity;var g,w,_,T,k,L=l[0].values.length,M={},I=m.map(function($){return $.inds});for(v=0,g=0;g<L;g++){var P=[];for(w=0;w<I.length;w++)P.push(I[w][g]);d=f[g%f.length],v+=d;var S=(_=g,T=void 0,k=void 0,r.isArrayOrTypedArray(b.color)?k=T=b.color[_%b.color.length]:T=b.color,{color:c(T),rawColor:k}),E=P+"-"+S.rawColor;M[E]===void 0&&(M[E]=n(P,S.color,S.rawColor)),h(M[E],g,d)}var D,F=l.map(function($,re){return function(R,N,U,te,j){return{dimensionInd:R,containerInd:N,displayInd:U,dimensionLabel:te,count:j,categories:[],dragX:null}}(re,$._index,$._displayindex,$.label,v)});for(g=0;g<L;g++)for(d=f[g%f.length],w=0;w<F.length;w++){var H=F[w].containerInd,V=m[w].inds[g],Q=F[w].categories;if(Q[V]===void 0){var K=a.dimensions[H]._categoryarray[V],Z=a.dimensions[H]._ticktext[V];Q[V]={dimensionInd:w,categoryInd:D=V,categoryValue:K,displayInd:D,categoryLabel:Z,valueInds:[],count:0,dragY:null}}i(Q[V],g,d)}return o(function($,re,R){var N=$.map(function(U){return U.categories.length}).reduce(function(U,te){return Math.max(U,te)});return{dimensions:$,paths:re,trace:void 0,maxCats:N,count:R}}(F,M,v))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../components/drawing":388,"../../lib":503,"../../lib/filter_unique.js":494,"../../lib/gup":500,"fast-isnumeric":190}],884:[function(u,q,W){var o=u("../../lib"),p=u("../../components/colorscale/helpers").hasColorscale,x=u("../../components/colorscale/defaults"),y=u("../../plots/domain").defaults,e=u("../../plots/array_container_defaults"),r=u("./attributes"),t=u("../parcoords/merge_length");function i(n,h){function s(c,b){return o.coerce(n,h,r.dimensions,c,b)}var a=s("values"),l=s("visible");if(a&&a.length||(l=h.visible=!1),l){s("label"),s("displayindex",h._index);var f,d=n.categoryarray,v=Array.isArray(d)&&d.length>0;v&&(f="array");var m=s("categoryorder",f);m==="array"?(s("categoryarray"),s("ticktext")):(delete n.categoryarray,delete n.ticktext),v||m!=="array"||(h.categoryorder="trace")}}q.exports=function(n,h,s,a){function l(c,b){return o.coerce(n,h,r,c,b)}var f=e(n,h,{name:"dimensions",handleItemDefaults:i}),d=function(c,b,g,w,_){_("line.shape"),_("line.hovertemplate");var T=_("line.color",w.colorway[0]);if(p(c,"line")&&o.isArrayOrTypedArray(T)){if(T.length)return _("line.colorscale"),x(c,b,w,_,{prefix:"line.",cLetter:"c"}),T.length;b.line.color=g}return 1/0}(n,h,s,a,l);y(h,a,l),Array.isArray(f)&&f.length||(h.visible=!1),t(h,f,"values",d),l("hoveron"),l("hovertemplate"),l("arrangement"),l("bundlecolors"),l("sortpaths"),l("counts");var v={family:a.font.family,size:Math.round(a.font.size),color:a.font.color};o.coerceFont(l,"labelfont",v);var m={family:a.font.family,size:Math.round(a.font.size/1.2),color:a.font.color};o.coerceFont(l,"tickfont",m)}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/domain":584,"../parcoords/merge_length":897,"./attributes":881}],885:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults"),calc:u("./calc"),plot:u("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:u("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":881,"./base_plot":882,"./calc":883,"./defaults":884,"./plot":887}],886:[function(u,q,W){var o=u("@plotly/d3"),p=u("d3-interpolate").interpolateNumber,x=u("../../plot_api/plot_api"),y=u("../../components/fx"),e=u("../../lib"),r=e.strTranslate,t=u("../../components/drawing"),i=u("tinycolor2"),n=u("../../lib/svg_text_utils");function h(R,N,U,te){var j=R.map(Q.bind(0,N,U)),Y=te.selectAll("g.parcatslayer").data([null]);Y.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var J=Y.selectAll("g.trace.parcats").data(j,s),ee=J.enter().append("g").attr("class","trace parcats");J.attr("transform",function(be){return r(be.x,be.y)}),ee.append("g").attr("class","paths");var ne=J.select("g.paths").selectAll("path.path").data(function(be){return be.paths},s);ne.attr("fill",function(be){return be.model.color});var se=ne.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(be){return be.model.color}).attr("fill-opacity",0);b(se),ne.attr("d",function(be){return be.svgD}),se.empty()||ne.sort(l),ne.exit().remove(),ne.on("mouseover",f).on("mouseout",d).on("click",c),ee.append("g").attr("class","dimensions");var oe=J.select("g.dimensions").selectAll("g.dimension").data(function(be){return be.dimensions},s);oe.enter().append("g").attr("class","dimension"),oe.attr("transform",function(be){return r(be.x,0)}),oe.exit().remove();var he=oe.selectAll("g.category").data(function(be){return be.categories},s),le=he.enter().append("g").attr("class","category");he.attr("transform",function(be){return r(0,be.y)}),le.append("rect").attr("class","catrect").attr("pointer-events","none"),he.select("rect.catrect").attr("fill","none").attr("width",function(be){return be.width}).attr("height",function(be){return be.height}),w(le);var de=he.selectAll("rect.bandrect").data(function(be){return be.bands},s);de.each(function(){e.raiseToTop(this)}),de.attr("fill",function(be){return be.color});var xe=de.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(be){return be.color}).attr("fill-opacity",0);de.attr("fill",function(be){return be.color}).attr("width",function(be){return be.width}).attr("height",function(be){return be.height}).attr("y",function(be){return be.y}).attr("cursor",function(be){return be.parcatsViewModel.arrangement==="fixed"?"default":be.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),_(xe),de.exit().remove(),le.append("text").attr("class","catlabel").attr("pointer-events","none");var we=N._fullLayout.paper_bgcolor;he.select("text.catlabel").attr("text-anchor",function(be){return a(be)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",n.makeTextShadow(we)).style("fill","rgb(0, 0, 0)").attr("x",function(be){return a(be)?be.width+5:-5}).attr("y",function(be){return be.height/2}).text(function(be){return be.model.categoryLabel}).each(function(be){t.font(o.select(this),be.parcatsViewModel.categorylabelfont),n.convertToTspans(o.select(this),N)}),le.append("text").attr("class","dimlabel"),he.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(be){return be.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(be){return be.width/2}).attr("y",-5).text(function(be,Ae){return Ae===0?be.parcatsViewModel.model.dimensions[be.model.dimensionInd].dimensionLabel:null}).each(function(be){t.font(o.select(this),be.parcatsViewModel.labelfont)}),he.selectAll("rect.bandrect").on("mouseover",I).on("mouseout",P),he.exit().remove(),oe.call(o.behavior.drag().origin(function(be){return{x:be.x,y:0}}).on("dragstart",S).on("drag",E).on("dragend",D)),J.each(function(be){be.traceSelection=o.select(this),be.pathSelection=o.select(this).selectAll("g.paths").selectAll("path.path"),be.dimensionSelection=o.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),J.exit().remove()}function s(R){return R.key}function a(R){var N=R.parcatsViewModel.dimensions.length,U=R.parcatsViewModel.dimensions[N-1].model.dimensionInd;return R.model.dimensionInd===U}function l(R,N){return R.model.rawColor>N.model.rawColor?1:R.model.rawColor<N.model.rawColor?-1:0}function f(R){if(!R.parcatsViewModel.dragDimension&&R.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){e.raiseToTop(this),g(o.select(this));var N=v(R),U=m(R);if(R.parcatsViewModel.graphDiv.emit("plotly_hover",{points:N,event:o.event,constraints:U}),R.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var te,j,Y,J=o.mouse(this)[0],ee=R.parcatsViewModel.graphDiv,ne=R.parcatsViewModel.trace,se=ee._fullLayout,oe=se._paperdiv.node().getBoundingClientRect(),he=R.parcatsViewModel.graphDiv.getBoundingClientRect();for(Y=0;Y<R.leftXs.length-1;Y++)if(R.leftXs[Y]+R.dimWidths[Y]-2<=J&&J<=R.leftXs[Y+1]+2){var le=R.parcatsViewModel.dimensions[Y],de=R.parcatsViewModel.dimensions[Y+1];te=(le.x+le.width+de.x)/2,j=(R.topYs[Y]+R.topYs[Y+1]+R.height)/2;break}var xe=R.parcatsViewModel.x+te,we=R.parcatsViewModel.y+j,be=i.mostReadable(R.model.color,["black","white"]),Ae=R.model.count,fe=Ae/R.parcatsViewModel.model.count,me={countLabel:Ae,probabilityLabel:fe.toFixed(3)},ke=[];R.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&ke.push(["Count:",me.countLabel].join(" ")),R.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&ke.push(["P:",me.probabilityLabel].join(" "));var Te=ke.join("<br>"),Me=o.mouse(ee)[0];y.loneHover({trace:ne,x:xe-oe.left+he.left,y:we-oe.top+he.top,text:Te,color:R.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:be,idealAlign:Me<xe?"right":"left",hovertemplate:(ne.line||{}).hovertemplate,hovertemplateLabels:me,eventData:[{data:ne._input,fullData:ne,count:Ae,probability:fe}]},{container:se._hoverlayer.node(),outerContainer:se._paper.node(),gd:ee})}}}function d(R){if(!R.parcatsViewModel.dragDimension&&(b(o.select(this)),y.loneUnhover(R.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),R.parcatsViewModel.pathSelection.sort(l),R.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var N=v(R),U=m(R);R.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:N,event:o.event,constraints:U})}}function v(R){for(var N=[],U=F(R.parcatsViewModel),te=0;te<R.model.valueInds.length;te++){var j=R.model.valueInds[te];N.push({curveNumber:U,pointNumber:j})}return N}function m(R){for(var N={},U=R.parcatsViewModel.model.dimensions,te=0;te<U.length;te++){var j=U[te],Y=j.categories[R.model.categoryInds[te]];N[j.containerInd]=Y.categoryValue}return R.model.rawColor!==void 0&&(N.color=R.model.rawColor),N}function c(R){if(R.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var N=v(R),U=m(R);R.parcatsViewModel.graphDiv.emit("plotly_click",{points:N,event:o.event,constraints:U})}}function b(R){R.attr("fill",function(N){return N.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function g(R){R.attr("fill-opacity",.8).attr("stroke",function(N){return i.mostReadable(N.model.color,["black","white"])}).attr("stroke-width",.3)}function w(R){R.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function _(R){R.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function T(R){var N=R.parcatsViewModel.pathSelection,U=R.categoryViewModel.model.dimensionInd,te=R.categoryViewModel.model.categoryInd;return N.filter(function(j){return j.model.categoryInds[U]===te&&j.model.color===R.color})}function k(R,N,U){var te=o.select(R).datum(),j=te.categoryViewModel.model,Y=te.parcatsViewModel.graphDiv,J=o.select(R.parentNode).selectAll("rect.bandrect"),ee=[];J.each(function(se){T(se).each(function(oe){Array.prototype.push.apply(ee,v(oe))})});var ne={};ne[j.dimensionInd]=j.categoryValue,Y.emit(N,{points:ee,event:U,constraints:ne})}function L(R,N,U){var te=o.select(R).datum(),j=te.categoryViewModel.model,Y=te.parcatsViewModel.graphDiv,J=T(te),ee=[];J.each(function(se){Array.prototype.push.apply(ee,v(se))});var ne={};ne[j.dimensionInd]=j.categoryValue,te.rawColor!==void 0&&(ne.color=te.rawColor),Y.emit(N,{points:ee,event:U,constraints:ne})}function M(R,N,U){R._fullLayout._calcInverseTransform(R);var te,j,Y=R._fullLayout._invScaleX,J=R._fullLayout._invScaleY,ee=o.select(U.parentNode).select("rect.catrect"),ne=ee.node().getBoundingClientRect(),se=ee.datum(),oe=se.parcatsViewModel,he=oe.model.dimensions[se.model.dimensionInd],le=oe.trace,de=ne.top+ne.height/2;oe.dimensions.length>1&&he.displayInd===oe.dimensions.length-1?(te=ne.left,j="left"):(te=ne.left+ne.width,j="right");var xe=se.model.count,we=se.model.categoryLabel,be=xe/se.parcatsViewModel.model.count,Ae={countLabel:xe,categoryLabel:we,probabilityLabel:be.toFixed(3)},fe=[];se.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&fe.push(["Count:",Ae.countLabel].join(" ")),se.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&fe.push(["P("+Ae.categoryLabel+"):",Ae.probabilityLabel].join(" "));var me=fe.join("<br>");return{trace:le,x:Y*(te-N.left),y:J*(de-N.top),text:me,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:j,hovertemplate:le.hovertemplate,hovertemplateLabels:Ae,eventData:[{data:le._input,fullData:le,count:xe,category:we,probability:be}]}}function I(R){if(!R.parcatsViewModel.dragDimension&&R.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){if(o.mouse(this)[1]<-1)return;var N,U=R.parcatsViewModel.graphDiv,te=U._fullLayout,j=te._paperdiv.node().getBoundingClientRect(),Y=R.parcatsViewModel.hoveron;Y==="color"?(function(J){var ee=o.select(J).datum(),ne=T(ee);g(ne),ne.each(function(){e.raiseToTop(this)}),o.select(J.parentNode).selectAll("rect.bandrect").filter(function(se){return se.color===ee.color}).each(function(){e.raiseToTop(this),o.select(this).attr("stroke","black").attr("stroke-width",1.5)})}(this),L(this,"plotly_hover",o.event)):(function(J){o.select(J.parentNode).selectAll("rect.bandrect").each(function(ee){var ne=T(ee);g(ne),ne.each(function(){e.raiseToTop(this)})}),o.select(J.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(this),k(this,"plotly_hover",o.event)),R.parcatsViewModel.hoverinfoItems.indexOf("none")===-1&&(Y==="category"?N=M(U,j,this):Y==="color"?N=function(J,ee,ne){J._fullLayout._calcInverseTransform(J);var se,oe,he=J._fullLayout._invScaleX,le=J._fullLayout._invScaleY,de=ne.getBoundingClientRect(),xe=o.select(ne).datum(),we=xe.categoryViewModel,be=we.parcatsViewModel,Ae=be.model.dimensions[we.model.dimensionInd],fe=be.trace,me=de.y+de.height/2;be.dimensions.length>1&&Ae.displayInd===be.dimensions.length-1?(se=de.left,oe="left"):(se=de.left+de.width,oe="right");var ke=we.model.categoryLabel,Te=xe.parcatsViewModel.model.count,Me=0;xe.categoryViewModel.bands.forEach(function(ft){ft.color===xe.color&&(Me+=ft.count)});var Oe=we.model.count,Fe=0;be.pathSelection.each(function(ft){ft.model.color===xe.color&&(Fe+=ft.model.count)});var qe=Me/Te,et=Me/Fe,ze=Me/Oe,Ue={countLabel:Te,categoryLabel:ke,probabilityLabel:qe.toFixed(3)},We=[];we.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&We.push(["Count:",Ue.countLabel].join(" ")),we.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(We.push("P(color \u2229 "+ke+"): "+Ue.probabilityLabel),We.push("P("+ke+" | color): "+et.toFixed(3)),We.push("P(color | "+ke+"): "+ze.toFixed(3)));var Ze=We.join("<br>"),nt=i.mostReadable(xe.color,["black","white"]);return{trace:fe,x:he*(se-ee.left),y:le*(me-ee.top),text:Ze,color:xe.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:nt,fontSize:10,idealAlign:oe,hovertemplate:fe.hovertemplate,hovertemplateLabels:Ue,eventData:[{data:fe._input,fullData:fe,category:ke,count:Te,probability:qe,categorycount:Oe,colorcount:Fe,bandcolorcount:Me}]}}(U,j,this):Y==="dimension"&&(N=function(J,ee,ne){var se=[];return o.select(ne.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){se.push(M(J,ee,this))}),se}(U,j,this)),N&&y.loneHover(N,{container:te._hoverlayer.node(),outerContainer:te._paper.node(),gd:U}))}}function P(R){var N=R.parcatsViewModel;!N.dragDimension&&(b(N.pathSelection),w(N.dimensionSelection.selectAll("g.category")),_(N.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),y.loneUnhover(N.graphDiv._fullLayout._hoverlayer.node()),N.pathSelection.sort(l),N.hoverinfoItems.indexOf("skip")===-1)&&(R.parcatsViewModel.hoveron==="color"?L(this,"plotly_unhover",o.event):k(this,"plotly_unhover",o.event))}function S(R){R.parcatsViewModel.arrangement!=="fixed"&&(R.dragDimensionDisplayInd=R.model.displayInd,R.initialDragDimensionDisplayInds=R.parcatsViewModel.model.dimensions.map(function(N){return N.displayInd}),R.dragHasMoved=!1,R.dragCategoryDisplayInd=null,o.select(this).selectAll("g.category").select("rect.catrect").each(function(N){var U=o.mouse(this)[0],te=o.mouse(this)[1];-2<=U&&U<=N.width+2&&-2<=te&&te<=N.height+2&&(R.dragCategoryDisplayInd=N.model.displayInd,R.initialDragCategoryDisplayInds=R.model.categories.map(function(j){return j.displayInd}),N.model.dragY=N.y,e.raiseToTop(this.parentNode),o.select(this.parentNode).selectAll("rect.bandrect").each(function(j){j.y<te&&te<=j.y+j.height&&(R.potentialClickBand=this)}))}),R.parcatsViewModel.dragDimension=R,y.loneUnhover(R.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function E(R){if(R.parcatsViewModel.arrangement!=="fixed"&&(R.dragHasMoved=!0,R.dragDimensionDisplayInd!==null)){var N=R.dragDimensionDisplayInd,U=N-1,te=N+1,j=R.parcatsViewModel.dimensions[N];if(R.dragCategoryDisplayInd!==null){var Y=j.categories[R.dragCategoryDisplayInd];Y.model.dragY+=o.event.dy;var J=Y.model.dragY,ee=Y.model.displayInd,ne=j.categories,se=ne[ee-1],oe=ne[ee+1];se!==void 0&&J<se.y+se.height/2&&(Y.model.displayInd=se.model.displayInd,se.model.displayInd=ee),oe!==void 0&&J+Y.height>oe.y+oe.height/2&&(Y.model.displayInd=oe.model.displayInd,oe.model.displayInd=ee),R.dragCategoryDisplayInd=Y.model.displayInd}if(R.dragCategoryDisplayInd===null||R.parcatsViewModel.arrangement==="freeform"){j.model.dragX=o.event.x;var he=R.parcatsViewModel.dimensions[U],le=R.parcatsViewModel.dimensions[te];he!==void 0&&j.model.dragX<he.x+he.width&&(j.model.displayInd=he.model.displayInd,he.model.displayInd=N),le!==void 0&&j.model.dragX+j.width>le.x&&(j.model.displayInd=le.model.displayInd,le.model.displayInd=R.dragDimensionDisplayInd),R.dragDimensionDisplayInd=j.model.displayInd}$(R.parcatsViewModel),Z(R.parcatsViewModel),V(R.parcatsViewModel),H(R.parcatsViewModel)}}function D(R){if(R.parcatsViewModel.arrangement!=="fixed"&&R.dragDimensionDisplayInd!==null){o.select(this).selectAll("text").attr("font-weight","normal");var N={},U=F(R.parcatsViewModel),te=R.parcatsViewModel.model.dimensions.map(function(oe){return oe.displayInd}),j=R.initialDragDimensionDisplayInds.some(function(oe,he){return oe!==te[he]});j&&te.forEach(function(oe,he){var le=R.parcatsViewModel.model.dimensions[he].containerInd;N["dimensions["+le+"].displayindex"]=oe});var Y=!1;if(R.dragCategoryDisplayInd!==null){var J=R.model.categories.map(function(oe){return oe.displayInd});if(Y=R.initialDragCategoryDisplayInds.some(function(oe,he){return oe!==J[he]})){var ee=R.model.categories.slice().sort(function(oe,he){return oe.displayInd-he.displayInd}),ne=ee.map(function(oe){return oe.categoryValue}),se=ee.map(function(oe){return oe.categoryLabel});N["dimensions["+R.model.containerInd+"].categoryarray"]=[ne],N["dimensions["+R.model.containerInd+"].ticktext"]=[se],N["dimensions["+R.model.containerInd+"].categoryorder"]="array"}}R.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!R.dragHasMoved&&R.potentialClickBand&&(R.parcatsViewModel.hoveron==="color"?L(R.potentialClickBand,"plotly_click",o.event.sourceEvent):k(R.potentialClickBand,"plotly_click",o.event.sourceEvent)),R.model.dragX=null,R.dragCategoryDisplayInd!==null&&(R.parcatsViewModel.dimensions[R.dragDimensionDisplayInd].categories[R.dragCategoryDisplayInd].model.dragY=null,R.dragCategoryDisplayInd=null),R.dragDimensionDisplayInd=null,R.parcatsViewModel.dragDimension=null,R.dragHasMoved=null,R.potentialClickBand=null,$(R.parcatsViewModel),Z(R.parcatsViewModel),o.transition().duration(300).ease("cubic-in-out").each(function(){V(R.parcatsViewModel,!0),H(R.parcatsViewModel,!0)}).each("end",function(){(j||Y)&&x.restyle(R.parcatsViewModel.graphDiv,N,[U])})}}function F(R){for(var N,U=R.graphDiv._fullData,te=0;te<U.length;te++)if(R.key===U[te].uid){N=te;break}return N}function H(R,N){var U;N===void 0&&(N=!1),R.pathSelection.data(function(te){return te.paths},s),(U=R.pathSelection,N?U.transition():U).attr("d",function(te){return te.svgD})}function V(R,N){function U(J){return N?J.transition():J}N===void 0&&(N=!1),R.dimensionSelection.data(function(J){return J.dimensions},s);var te=R.dimensionSelection.selectAll("g.category").data(function(J){return J.categories},s);U(R.dimensionSelection).attr("transform",function(J){return r(J.x,0)}),U(te).attr("transform",function(J){return r(0,J.y)}),te.select(".dimlabel").text(function(J,ee){return ee===0?J.parcatsViewModel.model.dimensions[J.model.dimensionInd].dimensionLabel:null}),te.select(".catlabel").attr("text-anchor",function(J){return a(J)?"start":"end"}).attr("x",function(J){return a(J)?J.width+5:-5}).each(function(J){var ee,ne;a(J)?(ee=J.width+5,ne="start"):(ee=-5,ne="end"),o.select(this).selectAll("tspan").attr("x",ee).attr("text-anchor",ne)});var j=te.selectAll("rect.bandrect").data(function(J){return J.bands},s),Y=j.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(J){return J.color}).attr("fill-opacity",0);j.attr("fill",function(J){return J.color}).attr("width",function(J){return J.width}).attr("height",function(J){return J.height}).attr("y",function(J){return J.y}),_(Y),j.each(function(){e.raiseToTop(this)}),j.exit().remove()}function Q(R,N,U){var te,j=U[0],Y=N.margin||{l:80,r:80,t:100,b:80},J=j.trace,ee=J.domain,ne=N.width,se=N.height,oe=Math.floor(ne*(ee.x[1]-ee.x[0])),he=Math.floor(se*(ee.y[1]-ee.y[0])),le=ee.x[0]*ne+Y.l,de=N.height-ee.y[1]*N.height+Y.t,xe=J.line.shape;te=J.hoverinfo==="all"?["count","probability"]:(J.hoverinfo||"").split("+");var we={trace:J,key:J.uid,model:j,x:le,y:de,width:oe,height:he,hoveron:J.hoveron,hoverinfoItems:te,arrangement:J.arrangement,bundlecolors:J.bundlecolors,sortpaths:J.sortpaths,labelfont:J.labelfont,categorylabelfont:J.tickfont,pathShape:xe,dragDimension:null,margin:Y,paths:[],dimensions:[],graphDiv:R,traceSelection:null,pathSelection:null,dimensionSelection:null};return j.dimensions&&($(we),Z(we)),we}function K(R,N,U,te,j){var Y,J,ee=[],ne=[];for(J=0;J<U.length-1;J++)Y=p(U[J]+R[J],R[J+1]),ee.push(Y(j)),ne.push(Y(1-j));var se="M "+R[0]+","+N[0];for(se+="l"+U[0]+",0 ",J=1;J<U.length;J++)se+="C"+ee[J-1]+","+N[J-1]+" "+ne[J-1]+","+N[J]+" "+R[J]+","+N[J],se+="l"+U[J]+",0 ";for(se+="l0,"+te+" ",se+="l -"+U[U.length-1]+",0 ",J=U.length-2;J>=0;J--)se+="C"+ne[J]+","+(N[J+1]+te)+" "+ee[J]+","+(N[J]+te)+" "+(R[J]+U[J])+","+(N[J]+te),se+="l-"+U[J]+",0 ";return se+="Z"}function Z(R){var N=R.dimensions,U=R.model,te=N.map(function(We){return We.categories.map(function(Ze){return Ze.y})}),j=R.model.dimensions.map(function(We){return We.categories.map(function(Ze){return Ze.displayInd})}),Y=R.model.dimensions.map(function(We){return We.displayInd}),J=R.dimensions.map(function(We){return We.model.dimensionInd}),ee=N.map(function(We){return We.x}),ne=N.map(function(We){return We.width}),se=[];for(var oe in U.paths)U.paths.hasOwnProperty(oe)&&se.push(U.paths[oe]);function he(We){var Ze=We.categoryInds.map(function(nt,ft){return j[ft][nt]});return J.map(function(nt){return Ze[nt]})}se.sort(function(We,Ze){var nt=he(We),ft=he(Ze);return R.sortpaths==="backward"&&(nt.reverse(),ft.reverse()),nt.push(We.valueInds[0]),ft.push(Ze.valueInds[0]),R.bundlecolors&&(nt.unshift(We.rawColor),ft.unshift(Ze.rawColor)),nt<ft?-1:nt>ft?1:0});for(var le=new Array(se.length),de=N[0].model.count,xe=N[0].categories.map(function(We){return We.height}).reduce(function(We,Ze){return We+Ze}),we=0;we<se.length;we++){var be,Ae=se[we];be=de>0?xe*(Ae.count/de):0;for(var fe,me=new Array(te.length),ke=0;ke<Ae.categoryInds.length;ke++){var Te=Ae.categoryInds[ke],Me=j[ke][Te],Oe=Y[ke];me[Oe]=te[Oe][Me],te[Oe][Me]+=be;var Fe=R.dimensions[Oe].categories[Me],qe=Fe.bands.length,et=Fe.bands[qe-1];if(et===void 0||Ae.rawColor!==et.rawColor){var ze=et===void 0?0:et.y+et.height;Fe.bands.push({key:ze,color:Ae.color,rawColor:Ae.rawColor,height:be,width:Fe.width,count:Ae.count,y:ze,categoryViewModel:Fe,parcatsViewModel:R})}else{var Ue=Fe.bands[qe-1];Ue.height+=be,Ue.count+=Ae.count}}fe=R.pathShape==="hspline"?K(ee,me,ne,be,.5):K(ee,me,ne,be,0),le[we]={key:Ae.valueInds[0],model:Ae,height:be,leftXs:ee,topYs:me,dimWidths:ne,svgD:fe,parcatsViewModel:R}}R.paths=le}function $(R){var N=R.model.dimensions.map(function(J){return{displayInd:J.displayInd,dimensionInd:J.dimensionInd}});N.sort(function(J,ee){return J.displayInd-ee.displayInd});var U=[];for(var te in N){var j=N[te].dimensionInd,Y=R.model.dimensions[j];U.push(re(R,Y))}R.dimensions=U}function re(R,N){var U,te=R.model.dimensions.length,j=N.displayInd;U=40+(te>1?(R.width-80-16)/(te-1):0)*j;var Y,J,ee,ne,se,oe=[],he=R.model.maxCats,le=N.categories.length,de=N.count,xe=R.height-8*(he-1),we=8*(he-le)/2,be=N.categories.map(function(Ae){return{displayInd:Ae.displayInd,categoryInd:Ae.categoryInd}});for(be.sort(function(Ae,fe){return Ae.displayInd-fe.displayInd}),se=0;se<le;se++)ne=be[se].categoryInd,J=N.categories[ne],Y=de>0?J.count/de*xe:0,ee={key:J.valueInds[0],model:J,width:16,height:Y,y:J.dragY!==null?J.dragY:we,bands:[],parcatsViewModel:R},we=we+Y+8,oe.push(ee);return{key:N.dimensionInd,x:N.dragX!==null?N.dragX:U,y:0,width:16,model:N,categories:oe,parcatsViewModel:R,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}q.exports=function(R,N,U,te){h(U,R,te,N)}},{"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_api":540,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:312}],887:[function(u,q,W){var o=u("./parcats");q.exports=function(p,x,y,e){var r=p._fullLayout,t=r._paper,i=r._size;o(p,t,x,{width:i.w,height:i.h,margin:{t:i.t,r:i.r,b:i.b,l:i.l}},y,e)}},{"./parcats":886}],888:[function(u,q,W){var o=u("../../components/colorscale/attributes"),p=u("../../plots/cartesian/layout_attributes"),x=u("../../plots/font_attributes"),y=u("../../plots/domain").attributes,e=u("../../lib/extend").extendFlat,r=u("../../plot_api/plot_template").templatedArray;q.exports={domain:y({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:x({editType:"plot"}),tickfont:x({editType:"plot"}),rangefont:x({editType:"plot"}),dimensions:r("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},p.tickvals,{editType:"plot"}),ticktext:e({},p.ticktext,{editType:"plot"}),tickformat:e({},p.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},o("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],889:[function(u,q,W){var o=u("./constants"),p=u("@plotly/d3"),x=u("../../lib/gup").keyFun,y=u("../../lib/gup").repeat,e=u("../../lib").sorterAsc,r=u("../../lib").strTranslate,t=o.bar.snapRatio;function i(M,I){return M*(1-t)+I*t}var n=o.bar.snapClose;function h(M,I){return M*(1-n)+I*n}function s(M,I,P,S){if(function(re,R){for(var N=0;N<R.length;N++)if(re>=R[N][0]&&re<=R[N][1])return!0;return!1}(P,S))return P;var E=M?-1:1,D=0,F=I.length-1;if(E<0){var H=D;D=F,F=H}for(var V=I[D],Q=V,K=D;E*K<E*F;K+=E){var Z=K+E,$=I[Z];if(E*P<E*h(V,$))return i(V,Q);if(E*P<E*$||Z===F)return i($,V);Q=V,V=$}}function a(M){M.attr("x",-o.bar.captureWidth/2).attr("width",o.bar.captureWidth)}function l(M){M.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function f(M){if(!M.brush.filterSpecified)return"0,"+M.height;for(var I,P,S,E=d(M.brush.filter.getConsolidated(),M.height),D=[0],F=E.length?E[0][0]:null,H=0;H<E.length;H++)P=(I=E[H])[1]-I[0],D.push(F),D.push(P),(S=H+1)<E.length&&(F=E[S][0]-I[1]);return D.push(M.height),D}function d(M,I){return M.map(function(P){return P.map(function(S){return Math.max(0,S*I)}).sort(e)})}function v(){p.select(document.body).style("cursor",null)}function m(M){M.attr("stroke-dasharray",f)}function c(M,I){var P=p.select(M).selectAll(".highlight, .highlight-shadow");m(I?P.transition().duration(o.bar.snapDuration).each("end",I):P)}function b(M,I){var P,S=M.brush,E=NaN,D={};if(S.filterSpecified){var F=M.height,H=S.filter.getConsolidated(),V=d(H,F),Q=NaN,K=NaN,Z=NaN;for(P=0;P<=V.length;P++){var $=V[P];if($&&$[0]<=I&&I<=$[1]){Q=P;break}if(K=P?P-1:NaN,$&&$[0]>I){Z=P;break}}if(E=Q,isNaN(E)&&(E=isNaN(K)||isNaN(Z)?isNaN(K)?Z:K:I-V[K][1]<V[Z][0]-I?K:Z),!isNaN(E)){var re=V[E],R=function(j,Y){var J=o.bar.handleHeight;if(!(Y>j[1]+J||Y<j[0]-J))return Y>=.9*j[1]+.1*j[0]?"n":Y<=.9*j[0]+.1*j[1]?"s":"ns"}(re,I);R&&(D.interval=H[E],D.intervalPix=re,D.region=R)}}if(M.ordinal&&!D.region){var N=M.unitTickvals,U=M.unitToPaddedPx.invert(I);for(P=0;P<N.length;P++){var te=[.25*N[Math.max(P-1,0)]+.75*N[P],.25*N[Math.min(P+1,N.length-1)]+.75*N[P]];if(U>=te[0]&&U<=te[1]){D.clickableOrdinalRange=te;break}}}return D}function g(M,I){p.event.sourceEvent.stopPropagation();var P=I.height-p.mouse(M)[1]-2*o.verticalPadding,S=I.brush.svgBrush;S.wasDragged=!0,S._dragging=!0,S.grabbingBar?S.newExtent=[P-S.grabPoint,P+S.barLength-S.grabPoint].map(I.unitToPaddedPx.invert):S.newExtent=[S.startExtent,I.unitToPaddedPx.invert(P)].sort(e),I.brush.filterSpecified=!0,S.extent=S.stayingIntervals.concat([S.newExtent]),S.brushCallback(I),c(M.parentNode)}function w(M,I){var P=b(I,I.height-p.mouse(M)[1]-2*o.verticalPadding),S="crosshair";P.clickableOrdinalRange?S="pointer":P.region&&(S=P.region+"-resize"),p.select(document.body).style("cursor",S)}function _(M){M.on("mousemove",function(I){p.event.preventDefault(),I.parent.inBrushDrag||w(this,I)}).on("mouseleave",function(I){I.parent.inBrushDrag||v()}).call(p.behavior.drag().on("dragstart",function(I){(function(P,S){p.event.sourceEvent.stopPropagation();var E=S.height-p.mouse(P)[1]-2*o.verticalPadding,D=S.unitToPaddedPx.invert(E),F=S.brush,H=b(S,E),V=H.interval,Q=F.svgBrush;if(Q.wasDragged=!1,Q.grabbingBar=H.region==="ns",Q.grabbingBar){var K=V.map(S.unitToPaddedPx);Q.grabPoint=E-K[0]-o.verticalPadding,Q.barLength=K[1]-K[0]}Q.clickableOrdinalRange=H.clickableOrdinalRange,Q.stayingIntervals=S.multiselect&&F.filterSpecified?F.filter.getConsolidated():[],V&&(Q.stayingIntervals=Q.stayingIntervals.filter(function(Z){return Z[0]!==V[0]&&Z[1]!==V[1]})),Q.startExtent=H.region?V[H.region==="s"?1:0]:D,S.parent.inBrushDrag=!0,Q.brushStartCallback()})(this,I)}).on("drag",function(I){g(this,I)}).on("dragend",function(I){(function(P,S){var E=S.brush,D=E.filter,F=E.svgBrush;F._dragging||(w(P,S),g(P,S),S.brush.svgBrush.wasDragged=!1),F._dragging=!1,p.event.sourceEvent.stopPropagation();var H=F.grabbingBar;if(F.grabbingBar=!1,F.grabLocation=void 0,S.parent.inBrushDrag=!1,v(),!F.wasDragged)return F.wasDragged=void 0,F.clickableOrdinalRange?E.filterSpecified&&S.multiselect?F.extent.push(F.clickableOrdinalRange):(F.extent=[F.clickableOrdinalRange],E.filterSpecified=!0):H?(F.extent=F.stayingIntervals,F.extent.length===0&&k(E)):k(E),F.brushCallback(S),c(P.parentNode),void F.brushEndCallback(E.filterSpecified?D.getConsolidated():[]);var V=function(){D.set(D.getConsolidated())};if(S.ordinal){var Q=S.unitTickvals;Q[Q.length-1]<Q[0]&&Q.reverse(),F.newExtent=[s(0,Q,F.newExtent[0],F.stayingIntervals),s(1,Q,F.newExtent[1],F.stayingIntervals)];var K=F.newExtent[1]>F.newExtent[0];F.extent=F.stayingIntervals.concat(K?[F.newExtent]:[]),F.extent.length||k(E),F.brushCallback(S),K?c(P.parentNode,V):(V(),c(P.parentNode))}else V();F.brushEndCallback(E.filterSpecified?D.getConsolidated():[])})(this,I)}))}function T(M,I){return M[0]-I[0]}function k(M){M.filterSpecified=!1,M.svgBrush.extent=[[-1/0,1/0]]}function L(M){for(var I,P=M.slice(),S=[],E=P.shift();E;){for(I=E.slice();(E=P.shift())&&E[0]<=I[1];)I[1]=Math.max(I[1],E[1]);S.push(I)}return S.length===1&&S[0][0]>S[0][1]&&(S=[]),S}q.exports={makeBrush:function(M,I,P,S,E,D){var F,H=function(){var V,Q,K=[];return{set:function(Z){(K=Z.map(function($){return $.slice().sort(e)}).sort(T)).length===1&&K[0][0]===-1/0&&K[0][1]===1/0&&(K=[[0,-1]]),V=L(K),Q=K.reduce(function($,re){return[Math.min($[0],re[0]),Math.max($[1],re[1])]},[1/0,-1/0])},get:function(){return K.slice()},getConsolidated:function(){return V},getBounds:function(){return Q}}}();return H.set(P),{filter:H,filterSpecified:I,svgBrush:{extent:[],brushStartCallback:S,brushCallback:(F=E,function(V){var Q=V.brush,K=function(Z){return Z.svgBrush.extent.map(function($){return $.slice()})}(Q).slice();Q.filter.set(K),F()}),brushEndCallback:D}}},ensureAxisBrush:function(M,I){var P=M.selectAll("."+o.cn.axisBrush).data(y,x);P.enter().append("g").classed(o.cn.axisBrush,!0),function(S,E){var D=S.selectAll(".background").data(y);D.enter().append("rect").classed("background",!0).call(a).call(l).style("pointer-events","auto").attr("transform",r(0,o.verticalPadding)),D.call(_).attr("height",function(V){return V.height-o.verticalPadding});var F=S.selectAll(".highlight-shadow").data(y);F.enter().append("line").classed("highlight-shadow",!0).attr("x",-o.bar.width/2).attr("stroke-width",o.bar.width+o.bar.strokeWidth).attr("stroke",E).attr("opacity",o.bar.strokeOpacity).attr("stroke-linecap","butt"),F.attr("y1",function(V){return V.height}).call(m);var H=S.selectAll(".highlight").data(y);H.enter().append("line").classed("highlight",!0).attr("x",-o.bar.width/2).attr("stroke-width",o.bar.width-o.bar.strokeWidth).attr("stroke",o.bar.fillColor).attr("opacity",o.bar.fillOpacity).attr("stroke-linecap","butt"),H.attr("y1",function(V){return V.height}).call(m)}(P,I)},cleanRanges:function(M,I){if(Array.isArray(M[0])?(M=M.map(function(S){return S.sort(e)}),M=I.multiselect?L(M.sort(T)):[M[0]]):M=[M.sort(e)],I.tickvals){var P=I.tickvals.slice().sort(e);if(!(M=M.map(function(S){var E=[s(0,P,S[0],[]),s(1,P,S[1],[])];if(E[1]>E[0])return E}).filter(function(S){return S})).length)return}return M.length>1?M:M[0]}}},{"../../lib":503,"../../lib/gup":500,"./constants":892,"@plotly/d3":58}],890:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../plots/get_data").getModuleCalcData,x=u("./plot"),y=u("../../constants/xmlns_namespaces");W.name="parcoords",W.plot=function(e){var r=p(e.calcdata,"parcoords")[0];r.length&&x(e,r)},W.clean=function(e,r,t,i){var n=i._has&&i._has("parcoords"),h=r._has&&r._has("parcoords");n&&!h&&(i._paperdiv.selectAll(".parcoords").remove(),i._glimages.selectAll("*").remove())},W.toSVG=function(e){var r=e._fullLayout._glimages,t=o.select(e).selectAll(".svg-container");t.filter(function(i,n){return n===t.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var i=this.toDataURL("image/png");r.append("svg:image").attr({xmlns:y.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})}),window.setTimeout(function(){o.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":480,"../../plots/get_data":593,"./plot":899,"@plotly/d3":58}],891:[function(u,q,W){var o=u("../../lib").isArrayOrTypedArray,p=u("../../components/colorscale"),x=u("../../lib/gup").wrap;q.exports=function(y,e){var r,t;return p.hasColorscale(e,"line")&&o(e.line.color)?(r=e.line.color,t=p.extractOpts(e.line).colorscale,p.calc(y,e,{vals:r,containerStr:"line",cLetter:"c"})):(r=function(i){for(var n=new Array(i),h=0;h<i;h++)n[h]=.5;return n}(e._length),t=[[0,e.line.color],[1,e.line.color]]),x({lineColor:r,cscale:t})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500}],892:[function(u,q,W){q.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],893:[function(u,q,W){var o=u("../../lib"),p=u("../../components/colorscale/helpers").hasColorscale,x=u("../../components/colorscale/defaults"),y=u("../../plots/domain").defaults,e=u("../../plots/array_container_defaults"),r=u("../../plots/cartesian/axes"),t=u("./attributes"),i=u("./axisbrush"),n=u("./constants").maxDimensionCount,h=u("./merge_length");function s(a,l,f,d){function v(w,_){return o.coerce(a,l,t.dimensions,w,_)}var m=v("values"),c=v("visible");if(m&&m.length||(c=l.visible=!1),c){v("label"),v("tickvals"),v("ticktext"),v("tickformat");var b=v("range");l._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:b},r.setConvert(l._ax,d.layout),v("multiselect");var g=v("constraintrange");g&&(l.constraintrange=i.cleanRanges(g,l))}}q.exports=function(a,l,f,d){function v(w,_){return o.coerce(a,l,t,w,_)}var m=a.dimensions;Array.isArray(m)&&m.length>n&&(o.log("parcoords traces support up to "+n+" dimensions at the moment"),m.splice(n));var c=e(a,l,{name:"dimensions",layout:d,handleItemDefaults:s}),b=function(w,_,T,k,L){var M=L("line.color",T);if(p(w,"line")&&o.isArrayOrTypedArray(M)){if(M.length)return L("line.colorscale"),x(w,_,k,L,{prefix:"line.",cLetter:"c"}),M.length;_.line.color=T}return 1/0}(a,l,f,d,v);y(l,d,v),Array.isArray(c)&&c.length||(l.visible=!1),h(l,c,"values",b);var g={family:d.font.family,size:Math.round(d.font.size/1.2),color:d.font.color};o.coerceFont(v,"labelfont",g),o.coerceFont(v,"tickfont",g),o.coerceFont(v,"rangefont",g),v("labelangle"),v("labelside")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../../plots/domain":584,"./attributes":888,"./axisbrush":889,"./constants":892,"./merge_length":897}],894:[function(u,q,W){var o=u("../../lib").isTypedArray;W.convertTypedArray=function(p){return o(p)?Array.prototype.slice.call(p):p},W.isOrdinal=function(p){return!!p.tickvals},W.isVisible=function(p){return p.visible||!("visible"in p)}},{"../../lib":503}],895:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults"),calc:u("./calc"),plot:u("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:u("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":888,"./base_plot":890,"./calc":891,"./defaults":893,"./plot":899}],896:[function(u,q,W){var o=u("glslify"),p=o([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),x=o([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),y=u("./constants").maxDimensionCount,e=u("../../lib"),r=new Uint8Array(4),t=new Uint8Array(4),i={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function n(c,b,g,w,_){var T=c._gl;T.enable(T.SCISSOR_TEST),T.scissor(b,g,w,_),c.clear({color:[0,0,0,0],depth:1})}function h(c,b,g,w,_,T){var k=T.key;g.drawCompleted||(function(L){L.read({x:0,y:0,width:1,height:1,data:r})}(c),g.drawCompleted=!0),function L(M){var I=Math.min(w,_-M*w);M===0&&(window.cancelAnimationFrame(g.currentRafs[k]),delete g.currentRafs[k],n(c,T.scissorX,T.scissorY,T.scissorWidth,T.viewBoxSize[1])),g.clearOnly||(T.count=2*I,T.offset=2*M*w,b(T),M*w+I<_&&(g.currentRafs[k]=window.requestAnimationFrame(function(){L(M+1)})),g.drawCompleted=!1)}(0)}function s(c,b){for(var g=new Array(256),w=0;w<256;w++)g[w]=c(w/255).concat(b);return g}function a(c,b){return(c>>>8*b)%256/255}function l(c,b,g){for(var w=new Array(8*b),_=0,T=0;T<b;T++)for(var k=0;k<2;k++)for(var L=0;L<4;L++){var M=4*c+L,I=g[64*T+M];M===63&&k===0&&(I*=-1),w[_++]=I}return w}function f(c){var b="0"+c;return b.substr(b.length-2)}function d(c){return c<y?"p"+f(c+1)+"_"+f(c+4):"colors"}function v(c,b,g,w,_,T,k,L,M,I,P,S,E,D){for(var F=[[],[]],H=0;H<64;H++)F[0][H]=H===_?1:0,F[1][H]=H===T?1:0;k*=D,L*=D,M*=D,I*=D;var V=c.lines.canvasOverdrag*D,Q=c.domain,K=c.canvasWidth*D,Z=c.canvasHeight*D,$=c.pad.l*D,re=c.pad.b*D,R=c.layoutHeight*D,N=c.layoutWidth*D,U=c.deselectedLines.color;return e.extendFlat({key:P,resolution:[K,Z],viewBoxPos:[k+V,L],viewBoxSize:[M,I],i0:_,i1:T,dim0A:F[0].slice(0,16),dim0B:F[0].slice(16,32),dim0C:F[0].slice(32,48),dim0D:F[0].slice(48,64),dim1A:F[1].slice(0,16),dim1B:F[1].slice(16,32),dim1C:F[1].slice(32,48),dim1D:F[1].slice(48,64),drwLayer:S,contextColor:[U[0]/255,U[1]/255,U[2]/255,U[3]<1?U[3]:Math.max(1/255,Math.pow(1/c.lines.color.length,1/3))],scissorX:(w===b?0:k+V)+($-V)+N*Q.x[0],scissorWidth:(w===g?K-k+V:M+.5)+(w===b?k+V:0),scissorY:L+re+R*Q.y[0],scissorHeight:I,viewportX:$-V+N*Q.x[0],viewportY:re+R*Q.y[0],viewportWidth:K,viewportHeight:Z},E)}function m(c){var b=Math.max(0,Math.floor(2047*c[0]),0),g=Math.min(2047,Math.ceil(2047*c[1]),2047);return[Math.min(b,g),Math.max(b,g)]}q.exports=function(c,b){var g,w,_,T,k,L=b.context,M=b.pick,I=b.regl,P=I._gl,S=P.getParameter(P.ALIASED_LINE_WIDTH_RANGE),E=Math.max(S[0],Math.min(S[1],b.viewModel.plotGlPixelRatio)),D={currentRafs:{},drawCompleted:!0,clearOnly:!1},F=function(Z){for(var $={},re=0;re<=y;re+=4)$[d(re)]=Z.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return $}(I),H=I.texture(i),V=[];K(b);var Q=I({profile:!1,blend:{enable:L,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!L,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:I.prop("scissorX"),y:I.prop("scissorY"),width:I.prop("scissorWidth"),height:I.prop("scissorHeight")}},viewport:{x:I.prop("viewportX"),y:I.prop("viewportY"),width:I.prop("viewportWidth"),height:I.prop("viewportHeight")},dither:!1,vert:p,frag:x,primitive:"lines",lineWidth:E,attributes:F,uniforms:{resolution:I.prop("resolution"),viewBoxPos:I.prop("viewBoxPos"),viewBoxSize:I.prop("viewBoxSize"),dim0A:I.prop("dim0A"),dim1A:I.prop("dim1A"),dim0B:I.prop("dim0B"),dim1B:I.prop("dim1B"),dim0C:I.prop("dim0C"),dim1C:I.prop("dim1C"),dim0D:I.prop("dim0D"),dim1D:I.prop("dim1D"),loA:I.prop("loA"),hiA:I.prop("hiA"),loB:I.prop("loB"),hiB:I.prop("hiB"),loC:I.prop("loC"),hiC:I.prop("hiC"),loD:I.prop("loD"),hiD:I.prop("hiD"),palette:H,contextColor:I.prop("contextColor"),maskTexture:I.prop("maskTexture"),drwLayer:I.prop("drwLayer"),maskHeight:I.prop("maskHeight")},offset:I.prop("offset"),count:I.prop("count")});function K(Z){g=Z.model,w=Z.viewModel,_=w.dimensions.slice(),T=_[0]?_[0].values.length:0;var $=g.lines,re=M?$.color.map(function(N,U){return U/$.color.length}):$.color,R=function(N,U,te){for(var j,Y=new Array(N*(y+4)),J=0,ee=0;ee<N;ee++){for(var ne=0;ne<y;ne++)Y[J++]=ne<U.length?U[ne].paddedUnitValues[ee]:.5;Y[J++]=a(ee,2),Y[J++]=a(ee,1),Y[J++]=a(ee,0),Y[J++]=(j=te[ee],Math.max(1e-6,Math.min(.999999,j)))}return Y}(T,_,re);(function(N,U,te){for(var j=0;j<=y;j+=4)N[d(j)](l(j/4,U,te))})(F,T,R),L||M||(H=I.texture(e.extendFlat({data:s(g.unitToColor,255)},i)))}return{render:function(Z,$,re){var R,N,U,te=Z.length,j=1/0,Y=-1/0;for(R=0;R<te;R++)Z[R].dim0.canvasX<j&&(j=Z[R].dim0.canvasX,N=R),Z[R].dim1.canvasX>Y&&(Y=Z[R].dim1.canvasX,U=R);te===0&&n(I,0,0,g.canvasWidth,g.canvasHeight);var J=function(be){var Ae,fe,me,ke=[[],[]];for(me=0;me<64;me++){var Te=!be&&me<_.length?_[me].brush.filter.getBounds():[-1/0,1/0];ke[0][me]=Te[0],ke[1][me]=Te[1]}var Me=new Array(16384);for(Ae=0;Ae<16384;Ae++)Me[Ae]=255;if(!be)for(Ae=0;Ae<_.length;Ae++){var Oe=Ae%8,Fe=(Ae-Oe)/8,qe=Math.pow(2,Oe),et=_[Ae].brush.filter.get();if(!(et.length<2)){var ze=m(et[0])[1];for(fe=1;fe<et.length;fe++){var Ue=m(et[fe]);for(me=ze+1;me<Ue[0];me++)Me[8*me+Fe]&=~qe;ze=Math.max(ze,Ue[1])}}}var We={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Me};return k?k(We):k=I.texture(We),{maskTexture:k,maskHeight:2048,loA:ke[0].slice(0,16),loB:ke[0].slice(16,32),loC:ke[0].slice(32,48),loD:ke[0].slice(48,64),hiA:ke[1].slice(0,16),hiB:ke[1].slice(16,32),hiC:ke[1].slice(32,48),hiD:ke[1].slice(48,64)}}(L);for(R=0;R<te;R++){var ee=Z[R],ne=ee.dim0.crossfilterDimensionIndex,se=ee.dim1.crossfilterDimensionIndex,oe=ee.canvasX,he=ee.canvasY,le=oe+ee.panelSizeX,de=ee.plotGlPixelRatio;if($||!V[ne]||V[ne][0]!==oe||V[ne][1]!==le){V[ne]=[oe,le];var xe=v(g,N,U,R,ne,se,oe,he,ee.panelSizeX,ee.panelSizeY,ee.dim0.crossfilterDimensionIndex,L?0:M?2:1,J,de);D.clearOnly=re;var we=$?g.lines.blockLineCount:T;h(I,Q,D,we,T,xe)}}},readPixel:function(Z,$){return I.read({x:Z,y:$,width:1,height:1,data:t}),t},readPixels:function(Z,$,re,R){var N=new Uint8Array(4*re*R);return I.read({x:Z,y:$,width:re,height:R,data:N}),N},destroy:function(){for(var Z in c.style["pointer-events"]="none",H.destroy(),k&&k.destroy(),F)F[Z].destroy()},update:K}}},{"../../lib":503,"./constants":892,glslify:227}],897:[function(u,q,W){q.exports=function(o,p,x,y){var e,r;for(y||(y=1/0),e=0;e<p.length;e++)(r=p[e]).visible&&(y=Math.min(y,r[x].length));for(y===1/0&&(y=0),o._length=y,e=0;e<p.length;e++)(r=p[e]).visible&&(r._length=y);return y}},{}],898:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../lib"),x=p.numberFormat,y=u("color-rgba"),e=u("../../plots/cartesian/axes"),r=p.strRotate,t=p.strTranslate,i=u("../../lib/svg_text_utils"),n=u("../../components/drawing"),h=u("../../components/colorscale"),s=u("../../lib/gup"),a=s.keyFun,l=s.repeat,f=s.unwrap,d=u("./helpers"),v=u("./constants"),m=u("./axisbrush"),c=u("./lines");function b(V,Q,K){return p.aggNums(V,null,Q,K)}function g(V,Q){return _(b(Math.min,V,Q),b(Math.max,V,Q))}function w(V){var Q=V.range;return Q?_(Q[0],Q[1]):g(V.values,V._length)}function _(V,Q){return!isNaN(V)&&isFinite(V)||(V=0),!isNaN(Q)&&isFinite(Q)||(Q=0),V===Q&&(V===0?(V-=1,Q+=1):(V*=.9,Q*=1.1)),[V,Q]}function T(V,Q,K,Z,$){var re,R,N=w(K);return Z?o.scale.ordinal().domain(Z.map((re=x(K.tickformat),R=$,R?function(U,te){var j=R[te];return j==null?re(U):j}:re))).range(Z.map(function(U){var te=(U-N[0])/(N[1]-N[0]);return V-Q+te*(2*Q-V)})):o.scale.linear().domain(N).range([V-Q,Q])}function k(V){if(V.tickvals){var Q=w(V);return o.scale.ordinal().domain(V.tickvals).range(V.tickvals.map(function(K){return(K-Q[0])/(Q[1]-Q[0])}))}}function L(V){var Q=V.map(function($){return $[0]}),K=V.map(function($){var re=y($[1]);return o.rgb("rgb("+re[0]+","+re[1]+","+re[2]+")")}),Z="rgb".split("").map(function($){return o.scale.linear().clamp(!0).domain(Q).range(K.map((re=$,function(R){return R[re]})));var re});return function($){return Z.map(function(re){return re($)})}}function M(V){return V.dimensions.some(function(Q){return Q.brush.filterSpecified})}function I(V,Q,K){var Z=f(Q),$=Z.trace,re=d.convertTypedArray(Z.lineColor),R=$.line,N={color:y(v.deselectedLineColor)},U=h.extractOpts(R),te=U.reversescale?h.flipScale(Z.cscale):Z.cscale,j=$.domain,Y=$.dimensions,J=V.width,ee=$.labelangle,ne=$.labelside,se=$.labelfont,oe=$.tickfont,he=$.rangefont,le=p.extendDeepNoArrays({},R,{color:re.map(o.scale.linear().domain(w({values:re,range:[U.min,U.max],_length:$._length}))),blockLineCount:v.blockLineCount,canvasOverdrag:v.overdrag*v.canvasPixelRatio}),de=Math.floor(J*(j.x[1]-j.x[0])),xe=Math.floor(V.height*(j.y[1]-j.y[0])),we=V.margin||{l:80,r:80,t:100,b:80},be=de,Ae=xe;return{key:K,colCount:Y.filter(d.isVisible).length,dimensions:Y,tickDistance:v.tickDistance,unitToColor:L(te),lines:le,deselectedLines:N,labelAngle:ee,labelSide:ne,labelFont:se,tickFont:oe,rangeFont:he,layoutWidth:J,layoutHeight:V.height,domain:j,translateX:j.x[0]*J,translateY:V.height-j.y[1]*V.height,pad:we,canvasWidth:be*v.canvasPixelRatio+2*le.canvasOverdrag,canvasHeight:Ae*v.canvasPixelRatio,width:be,height:Ae,canvasPixelRatio:v.canvasPixelRatio}}function P(V,Q,K){var Z=K.width,$=K.height,re=K.dimensions,R=K.canvasPixelRatio,N=function(J){return Z*J/Math.max(1,K.colCount-1)},U=v.verticalPadding/$,te=function(J,ee){return o.scale.linear().range([ee,J-ee])}($,v.verticalPadding),j={key:K.key,xScale:N,model:K,inBrushDrag:!1},Y={};return j.dimensions=re.filter(d.isVisible).map(function(J,ee){var ne=function(Me,Oe){return o.scale.linear().domain(w(Me)).range([Oe,1-Oe])}(J,U),se=Y[J.label];Y[J.label]=(se||0)+1;var oe=J.label+(se?"__"+se:""),he=J.constraintrange,le=he&&he.length;le&&!Array.isArray(he[0])&&(he=[he]);var de=le?he.map(function(Me){return Me.map(ne)}):[[-1/0,1/0]],xe=J.values;xe.length>J._length&&(xe=xe.slice(0,J._length));var we,be=J.tickvals;function Ae(Me,Oe){return{val:Me,text:we[Oe]}}function fe(Me,Oe){return Me.val-Oe.val}if(Array.isArray(be)&&be.length){we=J.ticktext,Array.isArray(we)&&we.length?we.length>be.length?we=we.slice(0,be.length):be.length>we.length&&(be=be.slice(0,we.length)):we=be.map(x(J.tickformat));for(var me=1;me<be.length;me++)if(be[me]<be[me-1]){for(var ke=be.map(Ae).sort(fe),Te=0;Te<be.length;Te++)be[Te]=ke[Te].val,we[Te]=ke[Te].text;break}}else be=void 0;return xe=d.convertTypedArray(xe),{key:oe,label:J.label,tickFormat:J.tickformat,tickvals:be,ticktext:we,ordinal:d.isOrdinal(J),multiselect:J.multiselect,xIndex:ee,crossfilterDimensionIndex:ee,visibleIndex:J._index,height:$,values:xe,paddedUnitValues:xe.map(ne),unitTickvals:be&&be.map(ne),xScale:N,x:N(ee),canvasX:N(ee)*R,unitToPaddedPx:te,domainScale:T($,v.verticalPadding,J,be,we),ordinalScale:k(J),parent:j,model:K,brush:m.makeBrush(V,le,de,function(){V.linePickActive(!1)},function(){var Me=j;Me.focusLayer&&Me.focusLayer.render(Me.panels,!0);var Oe=M(Me);!V.contextShown()&&Oe?(Me.contextLayer&&Me.contextLayer.render(Me.panels,!0),V.contextShown(!0)):V.contextShown()&&!Oe&&(Me.contextLayer&&Me.contextLayer.render(Me.panels,!0,!0),V.contextShown(!1))},function(Me){if(j.focusLayer.render(j.panels,!0),j.pickLayer&&j.pickLayer.render(j.panels,!0),V.linePickActive(!0),Q&&Q.filterChanged){var Oe=ne.invert,Fe=Me.map(function(qe){return qe.map(Oe).sort(p.sorterAsc)}).sort(function(qe,et){return qe[0]-et[0]});Q.filterChanged(j.key,J._index,Fe)}})}}),j}function S(V){V.classed(v.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function E(V,Q){var K=Q==="top"?1:-1,Z=V*Math.PI/180;return{dir:K,dx:Math.sin(Z),dy:Math.cos(Z),degrees:V}}function D(V,Q,K){for(var Z=Q.panels||(Q.panels=[]),$=V.data(),re=0;re<$.length-1;re++){var R=Z[re]||(Z[re]={}),N=$[re],U=$[re+1];R.dim0=N,R.dim1=U,R.canvasX=N.canvasX,R.panelSizeX=U.canvasX-N.canvasX,R.panelSizeY=Q.model.canvasHeight,R.y=0,R.canvasY=0,R.plotGlPixelRatio=K}}function F(V,Q){return e.tickText(V._ax,Q,!1).text}function H(V,Q){if(V.ordinal)return"";var K=V.domainScale.domain(),Z=K[Q?K.length-1:0];return F(V.model.dimensions[V.visibleIndex],Z)}q.exports=function(V,Q,K,Z){var $=V._fullLayout,re=$._toppaper,R=$._glcontainer,N=V._context.plotGlPixelRatio,U=V._fullLayout.paper_bgcolor;(function(Te){for(var Me=0;Me<Te.length;Me++)for(var Oe=0;Oe<Te[Me].length;Oe++)for(var Fe=Te[Me][Oe].trace,qe=Fe.dimensions,et=0;et<qe.length;et++){var ze=qe[et].values,Ue=qe[et]._ax;Ue&&(Ue.range?Ue.range=_(Ue.range[0],Ue.range[1]):Ue.range=g(ze,Fe._length),Ue.dtick||(Ue.dtick=.01*(Math.abs(Ue.range[1]-Ue.range[0])||1)),Ue.tickformat=qe[et].tickformat,e.calcTicks(Ue),Ue.cleanRange())}})(Q);var te,j,Y=(te=!0,j=!1,{linePickActive:function(Te){return arguments.length?te=!!Te:te},contextShown:function(Te){return arguments.length?j=!!Te:j}}),J=Q.filter(function(Te){return f(Te).trace.visible}).map(I.bind(0,K)).map(P.bind(0,Y,Z));R.each(function(Te,Me){return p.extendFlat(Te,J[Me])});var ee=R.selectAll(".gl-canvas").each(function(Te){Te.viewModel=J[0],Te.viewModel.plotGlPixelRatio=N,Te.viewModel.paperColor=U,Te.model=Te.viewModel?Te.viewModel.model:null}),ne=null;ee.filter(function(Te){return Te.pick}).style("pointer-events","auto").on("mousemove",function(Te){if(Y.linePickActive()&&Te.lineLayer&&Z&&Z.hover){var Me=o.event,Oe=this.width,Fe=this.height,qe=o.mouse(this),et=qe[0],ze=qe[1];if(et<0||ze<0||et>=Oe||ze>=Fe)return;var Ue=Te.lineLayer.readPixel(et,Fe-1-ze),We=Ue[3]!==0,Ze=We?Ue[2]+256*(Ue[1]+256*Ue[0]):null,nt={x:et,y:ze,clientX:Me.clientX,clientY:Me.clientY,dataIndex:Te.model.key,curveNumber:Ze};Ze!==ne&&(We?Z.hover(nt):Z.unhover&&Z.unhover(nt),ne=Ze)}}),ee.style("opacity",function(Te){return Te.pick?0:1}),re.style("background","rgba(255, 255, 255, 0)");var se=re.selectAll("."+v.cn.parcoords).data(J,a);se.exit().remove(),se.enter().append("g").classed(v.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),se.attr("transform",function(Te){return t(Te.model.translateX,Te.model.translateY)});var oe=se.selectAll("."+v.cn.parcoordsControlView).data(l,a);oe.enter().append("g").classed(v.cn.parcoordsControlView,!0),oe.attr("transform",function(Te){return t(Te.model.pad.l,Te.model.pad.t)});var he=oe.selectAll("."+v.cn.yAxis).data(function(Te){return Te.dimensions},a);he.enter().append("g").classed(v.cn.yAxis,!0),oe.each(function(Te){D(he,Te,N)}),ee.each(function(Te){if(Te.viewModel){!Te.lineLayer||Z?Te.lineLayer=c(this,Te):Te.lineLayer.update(Te),(Te.key||Te.key===0)&&(Te.viewModel[Te.key]=Te.lineLayer);var Me=!Te.context||Z;Te.lineLayer.render(Te.viewModel.panels,Me)}}),he.attr("transform",function(Te){return t(Te.xScale(Te.xIndex),0)}),he.call(o.behavior.drag().origin(function(Te){return Te}).on("drag",function(Te){var Me=Te.parent;Y.linePickActive(!1),Te.x=Math.max(-v.overdrag,Math.min(Te.model.width+v.overdrag,o.event.x)),Te.canvasX=Te.x*Te.model.canvasPixelRatio,he.sort(function(Oe,Fe){return Oe.x-Fe.x}).each(function(Oe,Fe){Oe.xIndex=Fe,Oe.x=Te===Oe?Oe.x:Oe.xScale(Oe.xIndex),Oe.canvasX=Oe.x*Oe.model.canvasPixelRatio}),D(he,Me,N),he.filter(function(Oe){return Math.abs(Te.xIndex-Oe.xIndex)!==0}).attr("transform",function(Oe){return t(Oe.xScale(Oe.xIndex),0)}),o.select(this).attr("transform",t(Te.x,0)),he.each(function(Oe,Fe,qe){qe===Te.parent.key&&(Me.dimensions[Fe]=Oe)}),Me.contextLayer&&Me.contextLayer.render(Me.panels,!1,!M(Me)),Me.focusLayer.render&&Me.focusLayer.render(Me.panels)}).on("dragend",function(Te){var Me=Te.parent;Te.x=Te.xScale(Te.xIndex),Te.canvasX=Te.x*Te.model.canvasPixelRatio,D(he,Me,N),o.select(this).attr("transform",function(Oe){return t(Oe.x,0)}),Me.contextLayer&&Me.contextLayer.render(Me.panels,!1,!M(Me)),Me.focusLayer&&Me.focusLayer.render(Me.panels),Me.pickLayer&&Me.pickLayer.render(Me.panels,!0),Y.linePickActive(!0),Z&&Z.axesMoved&&Z.axesMoved(Me.key,Me.dimensions.map(function(Oe){return Oe.crossfilterDimensionIndex}))})),he.exit().remove();var le=he.selectAll("."+v.cn.axisOverlays).data(l,a);le.enter().append("g").classed(v.cn.axisOverlays,!0),le.selectAll("."+v.cn.axis).remove();var de=le.selectAll("."+v.cn.axis).data(l,a);de.enter().append("g").classed(v.cn.axis,!0),de.each(function(Te){var Me=Te.model.height/Te.model.tickDistance,Oe=Te.domainScale,Fe=Oe.domain();o.select(this).call(o.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Me,Te.tickFormat).tickValues(Te.ordinal?Fe:null).tickFormat(function(qe){return d.isOrdinal(Te)?qe:F(Te.model.dimensions[Te.visibleIndex],qe)}).scale(Oe)),n.font(de.selectAll("text"),Te.model.tickFont)}),de.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),de.selectAll("text").style("text-shadow",i.makeTextShadow(U)).style("cursor","default");var xe=le.selectAll("."+v.cn.axisHeading).data(l,a);xe.enter().append("g").classed(v.cn.axisHeading,!0);var we=xe.selectAll("."+v.cn.axisTitle).data(l,a);we.enter().append("text").classed(v.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),we.text(function(Te){return Te.label}).each(function(Te){var Me=o.select(this);n.font(Me,Te.model.labelFont),i.convertToTspans(Me,V)}).attr("transform",function(Te){var Me=E(Te.model.labelAngle,Te.model.labelSide),Oe=v.axisTitleOffset;return(Me.dir>0?"":t(0,2*Oe+Te.model.height))+r(Me.degrees)+t(-Oe*Me.dx,-Oe*Me.dy)}).attr("text-anchor",function(Te){var Me=E(Te.model.labelAngle,Te.model.labelSide);return 2*Math.abs(Me.dx)>Math.abs(Me.dy)?Me.dir*Me.dx<0?"start":"end":"middle"});var be=le.selectAll("."+v.cn.axisExtent).data(l,a);be.enter().append("g").classed(v.cn.axisExtent,!0);var Ae=be.selectAll("."+v.cn.axisExtentTop).data(l,a);Ae.enter().append("g").classed(v.cn.axisExtentTop,!0),Ae.attr("transform",t(0,-v.axisExtentOffset));var fe=Ae.selectAll("."+v.cn.axisExtentTopText).data(l,a);fe.enter().append("text").classed(v.cn.axisExtentTopText,!0).call(S),fe.text(function(Te){return H(Te,!0)}).each(function(Te){n.font(o.select(this),Te.model.rangeFont)});var me=be.selectAll("."+v.cn.axisExtentBottom).data(l,a);me.enter().append("g").classed(v.cn.axisExtentBottom,!0),me.attr("transform",function(Te){return t(0,Te.model.height+v.axisExtentOffset)});var ke=me.selectAll("."+v.cn.axisExtentBottomText).data(l,a);ke.enter().append("text").classed(v.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(S),ke.text(function(Te){return H(Te,!1)}).each(function(Te){n.font(o.select(this),Te.model.rangeFont)}),m.ensureAxisBrush(le,U)}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"./axisbrush":889,"./constants":892,"./helpers":894,"./lines":896,"@plotly/d3":58,"color-rgba":91}],899:[function(u,q,W){var o=u("./parcoords"),p=u("../../lib/prepare_regl"),x=u("./helpers").isVisible;function y(e,r,t){var i=r.indexOf(t),n=e.indexOf(i);return n===-1&&(n+=r.length),n}q.exports=function(e,r){var t=e._fullLayout;if(p(e)){var i={},n={},h={},s={},a=t._size;r.forEach(function(l,f){var d=l[0].trace;h[f]=d.index;var v=s[f]=d._fullInput.index;i[f]=e.data[v].dimensions,n[f]=e.data[v].dimensions.slice()}),o(e,r,{width:a.w,height:a.h,margin:{t:a.t,r:a.r,b:a.b,l:a.l}},{filterChanged:function(l,f,d){var v=n[l][f],m=d.map(function(T){return T.slice()}),c="dimensions["+f+"].constraintrange",b=t._tracePreGUI[e._fullData[h[l]]._fullInput.uid];if(b[c]===void 0){var g=v.constraintrange;b[c]=g||null}var w=e._fullData[h[l]].dimensions[f];m.length?(m.length===1&&(m=m[0]),v.constraintrange=m,w.constraintrange=m.slice(),m=[m]):(delete v.constraintrange,delete w.constraintrange,m=null);var _={};_[c]=m,e.emit("plotly_restyle",[_,[s[l]]])},hover:function(l){e.emit("plotly_hover",l)},unhover:function(l){e.emit("plotly_unhover",l)},axesMoved:function(l,f){var d=function(v,m){return function(c,b){return y(v,m,c)-y(v,m,b)}}(f,n[l].filter(x));i[l].sort(d),n[l].filter(function(v){return!x(v)}).sort(function(v){return n[l].indexOf(v)}).forEach(function(v){i[l].splice(i[l].indexOf(v),1),i[l].splice(n[l].indexOf(v),0,v)}),e.emit("plotly_restyle",[{dimensions:[i[l]]},[s[l]]])}})}}},{"../../lib/prepare_regl":516,"./helpers":894,"./parcoords":898}],900:[function(u,q,W){var o=u("../../plots/attributes"),p=u("../../plots/domain").attributes,x=u("../../plots/font_attributes"),y=u("../../components/color/attributes"),e=u("../../plots/template_attributes").hovertemplateAttrs,r=u("../../plots/template_attributes").texttemplateAttrs,t=u("../../lib/extend").extendFlat,i=x({editType:"plot",arrayOk:!0,colorEditType:"plot"});q.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:y.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:t({},o.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:r({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:t({},i,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:t({},i,{}),outsidetextfont:t({},i,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:t({},i,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:p({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:t({},i,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],901:[function(u,q,W){var o=u("../../plots/plots");W.name="pie",W.plot=function(p,x,y,e){o.plotBasePlot(W.name,p,x,y,e)},W.clean=function(p,x,y,e){o.cleanBasePlot(W.name,p,x,y,e)}},{"../../plots/plots":619}],902:[function(u,q,W){var o=u("fast-isnumeric"),p=u("tinycolor2"),x=u("../../components/color"),y={};function e(t){return function(i,n){return!!i&&!!(i=p(i)).isValid()&&(i=x.addOpacity(i,i.getAlpha()),t[n]||(t[n]=i),i)}}function r(t,i){var n,h=JSON.stringify(t),s=i[h];if(!s){for(s=t.slice(),n=0;n<t.length;n++)s.push(p(t[n]).lighten(20).toHexString());for(n=0;n<t.length;n++)s.push(p(t[n]).darken(20).toHexString());i[h]=s}return s}q.exports={calc:function(t,i){var n,h,s=[],a=t._fullLayout,l=a.hiddenlabels||[],f=i.labels,d=i.marker.colors||[],v=i.values,m=i._length,c=i._hasValues&&m;if(i.dlabel)for(f=new Array(m),n=0;n<m;n++)f[n]=String(i.label0+n*i.dlabel);var b={},g=e(a["_"+i.type+"colormap"]),w=0,_=!1;for(n=0;n<m;n++){var T,k,L;if(c){if(T=v[n],!o(T))continue;T=+T}else T=1;(k=f[n])!==void 0&&k!==""||(k=n);var M=b[k=String(k)];M===void 0?(b[k]=s.length,(L=l.indexOf(k)!==-1)||(w+=T),s.push({v:T,label:k,color:g(d[n],k),i:n,pts:[n],hidden:L})):(_=!0,(h=s[M]).v+=T,h.pts.push(n),h.hidden||(w+=T),h.color===!1&&d[n]&&(h.color=g(d[n],k)))}return s=s.filter(function(I){return I.v>=0}),(i.type==="funnelarea"?_:i.sort)&&s.sort(function(I,P){return P.v-I.v}),s[0]&&(s[0].vTotal=w),s},crossTraceCalc:function(t,i){var n=(i||{}).type;n||(n="pie");var h=t._fullLayout,s=t.calcdata,a=h[n+"colorway"],l=h["_"+n+"colormap"];h["extend"+n+"colors"]&&(a=r(a,y));for(var f=0,d=0;d<s.length;d++){var v=s[d];if(v[0].trace.type===n)for(var m=0;m<v.length;m++){var c=v[m];c.color===!1&&(l[c.label]?c.color=l[c.label]:(l[c.label]=c.color=a[f%a.length],f++))}}},makePullColorFn:e,generateExtendedColors:r}},{"../../components/color":366,"fast-isnumeric":190,tinycolor2:312}],903:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../lib"),x=u("./attributes"),y=u("../../plots/domain").defaults,e=u("../bar/defaults").handleText;function r(t,i){var n=Array.isArray(t),h=p.isArrayOrTypedArray(i),s=Math.min(n?t.length:1/0,h?i.length:1/0);if(isFinite(s)||(s=0),s&&h){for(var a,l=0;l<s;l++){var f=i[l];if(o(f)&&f>0){a=!0;break}}a||(s=0)}return{hasLabels:n,hasValues:h,len:s}}q.exports={handleLabelsAndValues:r,supplyDefaults:function(t,i,n,h){function s(g,w){return p.coerce(t,i,x,g,w)}var a=r(s("labels"),s("values")),l=a.len;if(i._hasLabels=a.hasLabels,i._hasValues=a.hasValues,!i._hasLabels&&i._hasValues&&(s("label0"),s("dlabel")),l){i._length=l,s("marker.line.width")&&s("marker.line.color"),s("marker.colors"),s("scalegroup");var f,d=s("text"),v=s("texttemplate");if(v||(f=s("textinfo",Array.isArray(d)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),v||f&&f!=="none"){var m=s("textposition");e(t,i,h,s,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(m)||m==="auto"||m==="outside")&&s("automargin"),(m==="inside"||m==="auto"||Array.isArray(m))&&s("insidetextorientation")}y(i,h,s);var c=s("hole");if(s("title.text")){var b=s("title.position",c?"middle center":"top center");c||b!=="middle center"||(i.title.position="top center"),p.coerceFont(s,"title.font",h.font)}s("sort"),s("direction"),s("rotation"),s("pull")}else i.visible=!1}}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":900,"fast-isnumeric":190}],904:[function(u,q,W){var o=u("../../components/fx/helpers").appendArrayMultiPointValues;q.exports=function(p,x){var y={curveNumber:x.index,pointNumbers:p.pts,data:x._input,fullData:x,label:p.label,color:p.color,value:p.v,percent:p.percent,text:p.text,bbox:p.bbox,v:p.v};return p.pts.length===1&&(y.pointNumber=y.i=p.pts[0]),o(y,x,p.pts),x.type==="funnelarea"&&(delete y.v,delete y.i),y}},{"../../components/fx/helpers":402}],905:[function(u,q,W){var o=u("../../lib");function p(x){return x.indexOf("e")!==-1?x.replace(/[.]?0+e/,"e"):x.indexOf(".")!==-1?x.replace(/[.]?0+$/,""):x}W.formatPiePercent=function(x,y){var e=p((100*x).toPrecision(3));return o.numSeparate(e,y)+"%"},W.formatPieValue=function(x,y){var e=p(x.toPrecision(10));return o.numSeparate(e,y)},W.getFirstFilled=function(x,y){if(Array.isArray(x))for(var e=0;e<y.length;e++){var r=x[y[e]];if(r||r===0||r==="")return r}},W.castOption=function(x,y){return Array.isArray(x)?W.getFirstFilled(x,y):x||void 0},W.getRotationAngle=function(x){return(x==="auto"?0:x)*Math.PI/180}},{"../../lib":503}],906:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults").supplyDefaults,supplyLayoutDefaults:u("./layout_defaults"),layoutAttributes:u("./layout_attributes"),calc:u("./calc").calc,crossTraceCalc:u("./calc").crossTraceCalc,plot:u("./plot").plot,style:u("./style"),styleOne:u("./style_one"),moduleType:"trace",name:"pie",basePlotModule:u("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":900,"./base_plot":901,"./calc":902,"./defaults":903,"./layout_attributes":907,"./layout_defaults":908,"./plot":909,"./style":910,"./style_one":911}],907:[function(u,q,W){q.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],908:[function(u,q,W){var o=u("../../lib"),p=u("./layout_attributes");q.exports=function(x,y){function e(r,t){return o.coerce(x,y,p,r,t)}e("hiddenlabels"),e("piecolorway",y.colorway),e("extendpiecolors")}},{"../../lib":503,"./layout_attributes":907}],909:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../plots/plots"),x=u("../../components/fx"),y=u("../../components/color"),e=u("../../components/drawing"),r=u("../../lib"),t=r.strScale,i=r.strTranslate,n=u("../../lib/svg_text_utils"),h=u("../bar/uniform_text"),s=h.recordMinTextSize,a=h.clearMinTextSize,l=u("../bar/constants").TEXTPAD,f=u("./helpers"),d=u("./event_data"),v=u("../../lib").isValidTextValue;function m(Q,K,Z){var $=Z[0],re=$.cx,R=$.cy,N=$.trace,U=N.type==="funnelarea";"_hasHoverLabel"in N||(N._hasHoverLabel=!1),"_hasHoverEvent"in N||(N._hasHoverEvent=!1),Q.on("mouseover",function(te){var j=K._fullLayout,Y=K._fullData[N.index];if(!K._dragging&&j.hovermode!==!1){var J=Y.hoverinfo;if(Array.isArray(J)&&(J=x.castHoverinfo({hoverinfo:[f.castOption(J,te.pts)],_module:N._module},j,0)),J==="all"&&(J="label+text+value+percent+name"),Y.hovertemplate||J!=="none"&&J!=="skip"&&J){var ee=te.rInscribed||0,ne=re+te.pxmid[0]*(1-ee),se=R+te.pxmid[1]*(1-ee),oe=j.separators,he=[];if(J&&J.indexOf("label")!==-1&&he.push(te.label),te.text=f.castOption(Y.hovertext||Y.text,te.pts),J&&J.indexOf("text")!==-1){var le=te.text;r.isValidTextValue(le)&&he.push(le)}te.value=te.v,te.valueLabel=f.formatPieValue(te.v,oe),J&&J.indexOf("value")!==-1&&he.push(te.valueLabel),te.percent=te.v/$.vTotal,te.percentLabel=f.formatPiePercent(te.percent,oe),J&&J.indexOf("percent")!==-1&&he.push(te.percentLabel);var de=Y.hoverlabel,xe=de.font,we=[];x.loneHover({trace:N,x0:ne-ee*$.r,x1:ne+ee*$.r,y:se,_x0:U?re+te.TL[0]:ne-ee*$.r,_x1:U?re+te.TR[0]:ne+ee*$.r,_y0:U?R+te.TL[1]:se-ee*$.r,_y1:U?R+te.BL[1]:se+ee*$.r,text:he.join("<br>"),name:Y.hovertemplate||J.indexOf("name")!==-1?Y.name:void 0,idealAlign:te.pxmid[0]<0?"left":"right",color:f.castOption(de.bgcolor,te.pts)||te.color,borderColor:f.castOption(de.bordercolor,te.pts),fontFamily:f.castOption(xe.family,te.pts),fontSize:f.castOption(xe.size,te.pts),fontColor:f.castOption(xe.color,te.pts),nameLength:f.castOption(de.namelength,te.pts),textAlign:f.castOption(de.align,te.pts),hovertemplate:f.castOption(Y.hovertemplate,te.pts),hovertemplateLabels:te,eventData:[d(te,Y)]},{container:j._hoverlayer.node(),outerContainer:j._paper.node(),gd:K,inOut_bbox:we}),te.bbox=we[0],N._hasHoverLabel=!0}N._hasHoverEvent=!0,K.emit("plotly_hover",{points:[d(te,Y)],event:o.event})}}),Q.on("mouseout",function(te){var j=K._fullLayout,Y=K._fullData[N.index],J=o.select(this).datum();N._hasHoverEvent&&(te.originalEvent=o.event,K.emit("plotly_unhover",{points:[d(J,Y)],event:o.event}),N._hasHoverEvent=!1),N._hasHoverLabel&&(x.loneUnhover(j._hoverlayer.node()),N._hasHoverLabel=!1)}),Q.on("click",function(te){var j=K._fullLayout,Y=K._fullData[N.index];K._dragging||j.hovermode===!1||(K._hoverdata=[d(te,Y)],x.click(K,o.event))})}function c(Q,K,Z){var $=f.castOption(Q.insidetextfont.color,K.pts);!$&&Q._input.textfont&&($=f.castOption(Q._input.textfont.color,K.pts));var re=f.castOption(Q.insidetextfont.family,K.pts)||f.castOption(Q.textfont.family,K.pts)||Z.family,R=f.castOption(Q.insidetextfont.size,K.pts)||f.castOption(Q.textfont.size,K.pts)||Z.size;return{color:$||y.contrast(K.color),family:re,size:R}}function b(Q,K){for(var Z,$,re=0;re<Q.length;re++)if(($=(Z=Q[re][0]).trace).title.text){var R=$.title.text;$._meta&&(R=r.templateString(R,$._meta));var N=e.tester.append("text").attr("data-notex",1).text(R).call(e.font,$.title.font).call(n.convertToTspans,K),U=e.bBox(N.node(),!0);Z.titleBox={width:U.width,height:U.height},N.remove()}}function g(Q,K,Z){var $=Z.r||K.rpx1,re=K.rInscribed;if(K.startangle===K.stopangle)return{rCenter:1-re,scale:0,rotate:0,textPosAngle:0};var R,N=K.ring,U=N===1&&Math.abs(K.startangle-K.stopangle)===2*Math.PI,te=K.halfangle,j=K.midangle,Y=Z.trace.insidetextorientation,J=Y==="horizontal",ee=Y==="tangential",ne=Y==="radial",se=Y==="auto",oe=[];if(!se){var he,le=function(fe,me){if(function(Oe,Fe){var qe=Oe.startangle,et=Oe.stopangle;return qe>Fe&&Fe>et||qe<Fe&&Fe<et}(K,fe)){var ke=Math.abs(fe-K.startangle),Te=Math.abs(fe-K.stopangle),Me=ke<Te?ke:Te;(R=me==="tan"?_(Q,$,N,Me,0):w(Q,$,N,Me,Math.PI/2)).textPosAngle=fe,oe.push(R)}};if(J||ee){for(he=4;he>=-4;he-=2)le(Math.PI*he,"tan");for(he=4;he>=-4;he-=2)le(Math.PI*(he+1),"tan")}if(J||ne){for(he=4;he>=-4;he-=2)le(Math.PI*(he+1.5),"rad");for(he=4;he>=-4;he-=2)le(Math.PI*(he+.5),"rad")}}if(U||se||J){var de=Math.sqrt(Q.width*Q.width+Q.height*Q.height);if((R={scale:re*$*2/de,rCenter:1-re,rotate:0}).textPosAngle=(K.startangle+K.stopangle)/2,R.scale>=1)return R;oe.push(R)}(se||ne)&&((R=w(Q,$,N,te,j)).textPosAngle=(K.startangle+K.stopangle)/2,oe.push(R)),(se||ee)&&((R=_(Q,$,N,te,j)).textPosAngle=(K.startangle+K.stopangle)/2,oe.push(R));for(var xe=0,we=0,be=0;be<oe.length;be++){var Ae=oe[be].scale;if(we<Ae&&(we=Ae,xe=be),!se&&we>=1)break}return oe[xe]}function w(Q,K,Z,$,re){K=Math.max(0,K-2*l);var R=Q.width/Q.height,N=L(R,$,K,Z);return{scale:2*N/Q.height,rCenter:T(R,N/K),rotate:k(re)}}function _(Q,K,Z,$,re){K=Math.max(0,K-2*l);var R=Q.height/Q.width,N=L(R,$,K,Z);return{scale:2*N/Q.width,rCenter:T(R,N/K),rotate:k(re+Math.PI/2)}}function T(Q,K){return Math.cos(K)-Q*K}function k(Q){return(180/Math.PI*Q+720)%180-90}function L(Q,K,Z,$){var re=Q+1/(2*Math.tan(K));return Z*Math.min(1/(Math.sqrt(re*re+.5)+re),$/(Math.sqrt(Q*Q+$/2)+Q))}function M(Q,K){return Q.v!==K.vTotal||K.trace.hole?Math.min(1/(1+1/Math.sin(Q.halfangle)),Q.ring/2):1}function I(Q,K){var Z=K.pxmid[0],$=K.pxmid[1],re=Q.width/2,R=Q.height/2;return Z<0&&(re*=-1),$<0&&(R*=-1),{scale:1,rCenter:1,rotate:0,x:re+Math.abs(R)*(re>0?1:-1)/2,y:R/(1+Z*Z/($*$)),outside:!0}}function P(Q,K){var Z,$,re,R=Q.trace,N={x:Q.cx,y:Q.cy},U={tx:0,ty:0};U.ty+=R.title.font.size,re=E(R),R.title.position.indexOf("top")!==-1?(N.y-=(1+re)*Q.r,U.ty-=Q.titleBox.height):R.title.position.indexOf("bottom")!==-1&&(N.y+=(1+re)*Q.r);var te,j,Y=(te=Q.r,j=Q.trace.aspectratio,te/(j===void 0?1:j)),J=K.w*(R.domain.x[1]-R.domain.x[0])/2;return R.title.position.indexOf("left")!==-1?(J+=Y,N.x-=(1+re)*Y,U.tx+=Q.titleBox.width/2):R.title.position.indexOf("center")!==-1?J*=2:R.title.position.indexOf("right")!==-1&&(J+=Y,N.x+=(1+re)*Y,U.tx-=Q.titleBox.width/2),Z=J/Q.titleBox.width,$=S(Q,K)/Q.titleBox.height,{x:N.x,y:N.y,scale:Math.min(Z,$),tx:U.tx,ty:U.ty}}function S(Q,K){var Z=Q.trace,$=K.h*(Z.domain.y[1]-Z.domain.y[0]);return Math.min(Q.titleBox.height,$/2)}function E(Q){var K,Z=Q.pull;if(!Z)return 0;if(Array.isArray(Z))for(Z=0,K=0;K<Q.pull.length;K++)Q.pull[K]>Z&&(Z=Q.pull[K]);return Z}function D(Q,K){for(var Z=[],$=0;$<Q.length;$++){var re=Q[$][0],R=re.trace,N=R.domain,U=K.w*(N.x[1]-N.x[0]),te=K.h*(N.y[1]-N.y[0]);R.title.text&&R.title.position!=="middle center"&&(te-=S(re,K));var j=U/2,Y=te/2;R.type!=="funnelarea"||R.scalegroup||(Y/=R.aspectratio),re.r=Math.min(j,Y)/(1+E(R)),re.cx=K.l+K.w*(R.domain.x[1]+R.domain.x[0])/2,re.cy=K.t+K.h*(1-R.domain.y[0])-te/2,R.title.text&&R.title.position.indexOf("bottom")!==-1&&(re.cy-=S(re,K)),R.scalegroup&&Z.indexOf(R.scalegroup)===-1&&Z.push(R.scalegroup)}(function(J,ee){for(var ne,se,oe,he=0;he<ee.length;he++){var le=1/0,de=ee[he];for(se=0;se<J.length;se++)if(ne=J[se][0],(oe=ne.trace).scalegroup===de){var xe;if(oe.type==="pie")xe=ne.r*ne.r;else if(oe.type==="funnelarea"){var we,be;oe.aspectratio>1?(we=ne.r,be=we/oe.aspectratio):(be=ne.r,we=be*oe.aspectratio),we*=(1+oe.baseratio)/2,xe=we*be}le=Math.min(le,xe/ne.vTotal)}for(se=0;se<J.length;se++)if(ne=J[se][0],(oe=ne.trace).scalegroup===de){var Ae=le*ne.vTotal;oe.type==="funnelarea"&&(Ae/=(1+oe.baseratio)/2,Ae/=oe.aspectratio),ne.r=Math.sqrt(Ae)}}})(Q,Z)}function F(Q,K){return[Q*Math.sin(K),-Q*Math.cos(K)]}function H(Q,K,Z){var $=Q._fullLayout,re=Z.trace,R=re.texttemplate,N=re.textinfo;if(!R&&N&&N!=="none"){var U,te=N.split("+"),j=function(xe){return te.indexOf(xe)!==-1},Y=j("label"),J=j("text"),ee=j("value"),ne=j("percent"),se=$.separators;if(U=Y?[K.label]:[],J){var oe=f.getFirstFilled(re.text,K.pts);v(oe)&&U.push(oe)}ee&&U.push(f.formatPieValue(K.v,se)),ne&&U.push(f.formatPiePercent(K.v/Z.vTotal,se)),K.text=U.join("<br>")}if(R){var he=r.castOption(re,K.i,"texttemplate");if(he){var le=function(xe){return{label:xe.label,value:xe.v,valueLabel:f.formatPieValue(xe.v,$.separators),percent:xe.v/Z.vTotal,percentLabel:f.formatPiePercent(xe.v/Z.vTotal,$.separators),color:xe.color,text:xe.text,customdata:r.castOption(re,xe.i,"customdata")}}(K),de=f.getFirstFilled(re.text,K.pts);(v(de)||de==="")&&(le.text=de),K.text=r.texttemplateString(he,le,Q._fullLayout._d3locale,le,re._meta||{})}else K.text=""}}function V(Q,K){var Z=Q.rotate*Math.PI/180,$=Math.cos(Z),re=Math.sin(Z),R=(K.left+K.right)/2,N=(K.top+K.bottom)/2;Q.textX=R*$-N*re,Q.textY=R*re+N*$,Q.noCenter=!0}q.exports={plot:function(Q,K){var Z=Q._fullLayout,$=Z._size;a("pie",Z),b(K,Q),D(K,$);var re=r.makeTraceGroups(Z._pielayer,K,"trace").each(function(R){var N=o.select(this),U=R[0],te=U.trace;(function(j){var Y,J,ee,ne=j[0],se=ne.r,oe=ne.trace,he=f.getRotationAngle(oe.rotation),le=2*Math.PI/ne.vTotal,de="px0",xe="px1";if(oe.direction==="counterclockwise"){for(Y=0;Y<j.length&&j[Y].hidden;Y++);if(Y===j.length)return;he+=le*j[Y].v,le*=-1,de="px1",xe="px0"}for(ee=F(se,he),Y=0;Y<j.length;Y++)(J=j[Y]).hidden||(J[de]=ee,J.startangle=he,he+=le*J.v/2,J.pxmid=F(se,he),J.midangle=he,he+=le*J.v/2,ee=F(se,he),J.stopangle=he,J[xe]=ee,J.largeArc=J.v>ne.vTotal/2?1:0,J.halfangle=Math.PI*Math.min(J.v/ne.vTotal,.5),J.ring=1-oe.hole,J.rInscribed=M(J,ne))})(R),N.attr("stroke-linejoin","round"),N.each(function(){var j=o.select(this).selectAll("g.slice").data(R);j.enter().append("g").classed("slice",!0),j.exit().remove();var Y=[[[],[]],[[],[]]],J=!1;j.each(function(xe,we){if(xe.hidden)o.select(this).selectAll("path,g").remove();else{xe.pointNumber=xe.i,xe.curveNumber=te.index,Y[xe.pxmid[1]<0?0:1][xe.pxmid[0]<0?0:1].push(xe);var be=U.cx,Ae=U.cy,fe=o.select(this),me=fe.selectAll("path.surface").data([xe]);if(me.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),fe.call(m,Q,R),te.pull){var ke=+f.castOption(te.pull,xe.pts)||0;ke>0&&(be+=ke*xe.pxmid[0],Ae+=ke*xe.pxmid[1])}xe.cxFinal=be,xe.cyFinal=Ae;var Te=te.hole;if(xe.v===U.vTotal){var Me="M"+(be+xe.px0[0])+","+(Ae+xe.px0[1])+ze(xe.px0,xe.pxmid,!0,1)+ze(xe.pxmid,xe.px0,!0,1)+"Z";Te?me.attr("d","M"+(be+Te*xe.px0[0])+","+(Ae+Te*xe.px0[1])+ze(xe.px0,xe.pxmid,!1,Te)+ze(xe.pxmid,xe.px0,!1,Te)+"Z"+Me):me.attr("d",Me)}else{var Oe=ze(xe.px0,xe.px1,!0,1);if(Te){var Fe=1-Te;me.attr("d","M"+(be+Te*xe.px1[0])+","+(Ae+Te*xe.px1[1])+ze(xe.px1,xe.px0,!1,Te)+"l"+Fe*xe.px0[0]+","+Fe*xe.px0[1]+Oe+"Z")}else me.attr("d","M"+be+","+Ae+"l"+xe.px0[0]+","+xe.px0[1]+Oe+"Z")}H(Q,xe,U);var qe=f.castOption(te.textposition,xe.pts),et=fe.selectAll("g.slicetext").data(xe.text&&qe!=="none"?[0]:[]);et.enter().append("g").classed("slicetext",!0),et.exit().remove(),et.each(function(){var Ue=r.ensureSingle(o.select(this),"text","",function(it){it.attr("data-notex",1)}),We=r.ensureUniformFontSize(Q,qe==="outside"?function(it,rt,At){var Gt=f.castOption(it.outsidetextfont.color,rt.pts)||f.castOption(it.textfont.color,rt.pts)||At.color,Qt=f.castOption(it.outsidetextfont.family,rt.pts)||f.castOption(it.textfont.family,rt.pts)||At.family,Ve=f.castOption(it.outsidetextfont.size,rt.pts)||f.castOption(it.textfont.size,rt.pts)||At.size;return{color:Gt,family:Qt,size:Ve}}(te,xe,Z.font):c(te,xe,Z.font));Ue.text(xe.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,We).call(n.convertToTspans,Q);var Ze,nt=e.bBox(Ue.node());if(qe==="outside")Ze=I(nt,xe);else if(Ze=g(nt,xe,U),qe==="auto"&&Ze.scale<1){var ft=r.ensureUniformFontSize(Q,te.outsidetextfont);Ue.call(e.font,ft),Ze=I(nt=e.bBox(Ue.node()),xe)}var xt=Ze.textPosAngle,It=xt===void 0?xe.pxmid:F(U.r,xt);if(Ze.targetX=be+It[0]*Ze.rCenter+(Ze.x||0),Ze.targetY=Ae+It[1]*Ze.rCenter+(Ze.y||0),V(Ze,nt),Ze.outside){var Et=Ze.targetY;xe.yLabelMin=Et-nt.height/2,xe.yLabelMid=Et,xe.yLabelMax=Et+nt.height/2,xe.labelExtraX=0,xe.labelExtraY=0,J=!0}Ze.fontSize=We.size,s(te.type,Ze,Z),R[we].transform=Ze,Ue.attr("transform",r.getTextTransform(Ze))})}function ze(Ue,We,Ze,nt){var ft=nt*(We[0]-Ue[0]),xt=nt*(We[1]-Ue[1]);return"a"+nt*U.r+","+nt*U.r+" 0 "+xe.largeArc+(Ze?" 1 ":" 0 ")+ft+","+xt}});var ee=o.select(this).selectAll("g.titletext").data(te.title.text?[0]:[]);if(ee.enter().append("g").classed("titletext",!0),ee.exit().remove(),ee.each(function(){var xe,we=r.ensureSingle(o.select(this),"text","",function(Ae){Ae.attr("data-notex",1)}),be=te.title.text;te._meta&&(be=r.templateString(be,te._meta)),we.text(be).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,te.title.font).call(n.convertToTspans,Q),xe=te.title.position==="middle center"?function(Ae){var fe=Math.sqrt(Ae.titleBox.width*Ae.titleBox.width+Ae.titleBox.height*Ae.titleBox.height);return{x:Ae.cx,y:Ae.cy,scale:Ae.trace.hole*Ae.r*2/fe,tx:0,ty:-Ae.titleBox.height/2+Ae.trace.title.font.size}}(U):P(U,$),we.attr("transform",i(xe.x,xe.y)+t(Math.min(1,xe.scale))+i(xe.tx,xe.ty))}),J&&function(xe,we){var be,Ae,fe,me,ke,Te,Me,Oe,Fe,qe,et,ze,Ue;function We(xt,It){return xt.pxmid[1]-It.pxmid[1]}function Ze(xt,It){return It.pxmid[1]-xt.pxmid[1]}function nt(xt,It){It||(It={});var Et,it,rt,At,Gt=It.labelExtraY+(Ae?It.yLabelMax:It.yLabelMin),Qt=Ae?xt.yLabelMin:xt.yLabelMax,Ve=Ae?xt.yLabelMax:xt.yLabelMin,Ye=xt.cyFinal+ke(xt.px0[1],xt.px1[1]),Be=Gt-Qt;if(Be*Me>0&&(xt.labelExtraY=Be),Array.isArray(we.pull))for(it=0;it<qe.length;it++)(rt=qe[it])===xt||(f.castOption(we.pull,xt.pts)||0)>=(f.castOption(we.pull,rt.pts)||0)||((xt.pxmid[1]-rt.pxmid[1])*Me>0?(Be=rt.cyFinal+ke(rt.px0[1],rt.px1[1])-Qt-xt.labelExtraY)*Me>0&&(xt.labelExtraY+=Be):(Ve+xt.labelExtraY-Ye)*Me>0&&(Et=3*Te*Math.abs(it-qe.indexOf(xt)),(At=rt.cxFinal+me(rt.px0[0],rt.px1[0])+Et-(xt.cxFinal+xt.pxmid[0])-xt.labelExtraX)*Te>0&&(xt.labelExtraX+=At)))}for(Ae=0;Ae<2;Ae++)for(fe=Ae?We:Ze,ke=Ae?Math.max:Math.min,Me=Ae?1:-1,be=0;be<2;be++){for(me=be?Math.max:Math.min,Te=be?1:-1,(Oe=xe[Ae][be]).sort(fe),Fe=xe[1-Ae][be],qe=Fe.concat(Oe),ze=[],et=0;et<Oe.length;et++)Oe[et].yLabelMid!==void 0&&ze.push(Oe[et]);for(Ue=!1,et=0;Ae&&et<Fe.length;et++)if(Fe[et].yLabelMid!==void 0){Ue=Fe[et];break}for(et=0;et<ze.length;et++){var ft=et&&ze[et-1];Ue&&!et&&(ft=Ue),nt(ze[et],ft)}}}(Y,te),function(xe,we){xe.each(function(be){var Ae=o.select(this);if(be.labelExtraX||be.labelExtraY){var fe=Ae.select("g.slicetext text");be.transform.targetX+=be.labelExtraX,be.transform.targetY+=be.labelExtraY,fe.attr("transform",r.getTextTransform(be.transform));var me=be.cxFinal+be.pxmid[0],ke="M"+me+","+(be.cyFinal+be.pxmid[1]),Te=(be.yLabelMax-be.yLabelMin)*(be.pxmid[0]<0?-1:1)/4;if(be.labelExtraX){var Me=be.labelExtraX*be.pxmid[1]/be.pxmid[0],Oe=be.yLabelMid+be.labelExtraY-(be.cyFinal+be.pxmid[1]);Math.abs(Me)>Math.abs(Oe)?ke+="l"+Oe*be.pxmid[0]/be.pxmid[1]+","+Oe+"H"+(me+be.labelExtraX+Te):ke+="l"+be.labelExtraX+","+Me+"v"+(Oe-Me)+"h"+Te}else ke+="V"+(be.yLabelMid+be.labelExtraY)+"h"+Te;r.ensureSingle(Ae,"path","textline").call(y.stroke,we.outsidetextfont.color).attr({"stroke-width":Math.min(2,we.outsidetextfont.size/8),d:ke,fill:"none"})}else Ae.select("path.textline").remove()})}(j,te),J&&te.automargin){var ne=e.bBox(N.node()),se=te.domain,oe=$.w*(se.x[1]-se.x[0]),he=$.h*(se.y[1]-se.y[0]),le=(.5*oe-U.r)/$.w,de=(.5*he-U.r)/$.h;p.autoMargin(Q,"pie."+te.uid+".automargin",{xl:se.x[0]-le,xr:se.x[1]+le,yb:se.y[0]-de,yt:se.y[1]+de,l:Math.max(U.cx-U.r-ne.left,0),r:Math.max(ne.right-(U.cx+U.r),0),b:Math.max(ne.bottom-(U.cy+U.r),0),t:Math.max(U.cy-U.r-ne.top,0),pad:5})}})});setTimeout(function(){re.selectAll("tspan").each(function(){var R=o.select(this);R.attr("dy")&&R.attr("dy",R.attr("dy"))})},0)},formatSliceLabel:H,transformInsideText:g,determineInsideTextFont:c,positionTitleOutside:P,prerenderTitles:b,layoutAreas:D,attachFxHandlers:m,computeTransform:V}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../bar/constants":650,"../bar/uniform_text":664,"./event_data":904,"./helpers":905,"@plotly/d3":58}],910:[function(u,q,W){var o=u("@plotly/d3"),p=u("./style_one"),x=u("../bar/uniform_text").resizeText;q.exports=function(y){var e=y._fullLayout._pielayer.selectAll(".trace");x(y,e,"pie"),e.each(function(r){var t=r[0].trace,i=o.select(this);i.style({opacity:t.opacity}),i.selectAll("path.surface").each(function(n){o.select(this).call(p,n,t)})})}},{"../bar/uniform_text":664,"./style_one":911,"@plotly/d3":58}],911:[function(u,q,W){var o=u("../../components/color"),p=u("./helpers").castOption;q.exports=function(x,y,e){var r=e.marker.line,t=p(r.color,y.pts)||o.defaultLine,i=p(r.width,y.pts)||0;x.style("stroke-width",i).call(o.fill,y.color).call(o.stroke,t)}},{"../../components/color":366,"./helpers":905}],912:[function(u,q,W){var o=u("../scatter/attributes");q.exports={x:o.x,y:o.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:o.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":926}],913:[function(u,q,W){var o=u("../../../stackgl_modules").gl_pointcloud2d,p=u("../../lib/str2rgbarray"),x=u("../../plots/cartesian/autorange").findExtremes,y=u("../scatter/get_trace_color");function e(t,i){this.scene=t,this.uid=i,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=o(t.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var r=e.prototype;r.handlePick=function(t){var i=this.idToIndex[t.pointId];return{trace:this,dataCoord:t.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*i],this.pickXYData[2*i+1]]:[this.pickXData[i],this.pickYData[i]],textLabel:Array.isArray(this.textLabels)?this.textLabels[i]:this.textLabels,color:this.color,name:this.name,pointIndex:i,hoverinfo:this.hoverinfo}},r.update=function(t){this.index=t.index,this.textLabels=t.text,this.name=t.name,this.hoverinfo=t.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(t),this.color=y(t,{})},r.updateFast=function(t){var i,n,h,s,a,l,f=this.xData=this.pickXData=t.x,d=this.yData=this.pickYData=t.y,v=this.pickXYData=t.xy,m=t.xbounds&&t.ybounds,c=t.indices,b=this.bounds;if(v){if(h=v,i=v.length>>>1,m)b[0]=t.xbounds[0],b[2]=t.xbounds[1],b[1]=t.ybounds[0],b[3]=t.ybounds[1];else for(l=0;l<i;l++)s=h[2*l],a=h[2*l+1],s<b[0]&&(b[0]=s),s>b[2]&&(b[2]=s),a<b[1]&&(b[1]=a),a>b[3]&&(b[3]=a);if(c)n=c;else for(n=new Int32Array(i),l=0;l<i;l++)n[l]=l}else for(i=f.length,h=new Float32Array(2*i),n=new Int32Array(i),l=0;l<i;l++)s=f[l],a=d[l],n[l]=l,h[2*l]=s,h[2*l+1]=a,s<b[0]&&(b[0]=s),s>b[2]&&(b[2]=s),a<b[1]&&(b[1]=a),a>b[3]&&(b[3]=a);this.idToIndex=n,this.pointcloudOptions.idToIndex=n,this.pointcloudOptions.positions=h;var g=p(t.marker.color),w=p(t.marker.border.color),_=t.opacity*t.marker.opacity;g[3]*=_,this.pointcloudOptions.color=g;var T=t.marker.blend;T===null&&(T=f.length<100||d.length<100),this.pointcloudOptions.blend=T,w[3]*=_,this.pointcloudOptions.borderColor=w;var k=t.marker.sizemin,L=Math.max(t.marker.sizemax,t.marker.sizemin);this.pointcloudOptions.sizeMin=k,this.pointcloudOptions.sizeMax=L,this.pointcloudOptions.areaRatio=t.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var M=this.scene.xaxis,I=this.scene.yaxis,P=L/2||.5;t._extremes[M._id]=x(M,[b[0],b[2]],{ppad:P}),t._extremes[I._id]=x(I,[b[1],b[3]],{ppad:P})},r.dispose=function(){this.pointcloud.dispose()},q.exports=function(t,i){var n=new e(t,i.uid);return n.update(i),n}},{"../../../stackgl_modules":1120,"../../lib/str2rgbarray":528,"../../plots/cartesian/autorange":553,"../scatter/get_trace_color":936}],914:[function(u,q,W){var o=u("../../lib"),p=u("./attributes");q.exports=function(x,y,e){function r(t,i){return o.coerce(x,y,p,t,i)}r("x"),r("y"),r("xbounds"),r("ybounds"),x.xy&&x.xy instanceof Float32Array&&(y.xy=x.xy),x.indices&&x.indices instanceof Int32Array&&(y.indices=x.indices),r("text"),r("marker.color",e),r("marker.opacity"),r("marker.blend"),r("marker.sizemin"),r("marker.sizemax"),r("marker.border.color",e),r("marker.border.arearatio"),y._length=null}},{"../../lib":503,"./attributes":912}],915:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults"),calc:u("../scatter3d/calc"),plot:u("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:u("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":596,"../scatter3d/calc":955,"./attributes":912,"./convert":913,"./defaults":914}],916:[function(u,q,W){var o=u("../../plots/font_attributes"),p=u("../../plots/attributes"),x=u("../../components/color/attributes"),y=u("../../components/fx/attributes"),e=u("../../plots/domain").attributes,r=u("../../plots/template_attributes").hovertemplateAttrs,t=u("../../components/colorscale/attributes"),i=u("../../plot_api/plot_template").templatedArray,n=u("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,h=u("../../lib/extend").extendFlat,s=u("../../plot_api/edit_types").overrideAll;(q.exports=s({hoverinfo:h({},p.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:y.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:n("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:o({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:x.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:y.hoverlabel,hovertemplate:r({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:x.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:y.hoverlabel,hovertemplate:r({},{keys:["value","label"]}),colorscales:i("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:h(t().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../components/fx/attributes":397,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],917:[function(u,q,W){var o=u("../../plot_api/edit_types").overrideAll,p=u("../../plots/get_data").getModuleCalcData,x=u("./plot"),y=u("../../components/fx/layout_attributes"),e=u("../../lib/setcursor"),r=u("../../components/dragelement"),t=u("../../plots/cartesian/select").prepSelect,i=u("../../lib"),n=u("../../registry");function h(s,a){var l=s._fullData[a],f=s._fullLayout,d=f.dragmode,v=f.dragmode==="pan"?"move":"crosshair",m=l._bgRect;if(d!=="pan"&&d!=="zoom"){e(m,v);var c={_id:"x",c2p:i.identity,_offset:l._sankey.translateX,_length:l._sankey.width},b={_id:"y",c2p:i.identity,_offset:l._sankey.translateY,_length:l._sankey.height},g={gd:s,element:m.node(),plotinfo:{id:a,xaxis:c,yaxis:b,fillRangeItems:i.noop},subplot:a,xaxes:[c],yaxes:[b],doneFnCompleted:function(w){var _,T=s._fullData[a],k=T.node.groups.slice(),L=[];function M(E){for(var D=T._sankey.graph.nodes,F=0;F<D.length;F++)if(D[F].pointNumber===E)return D[F]}for(var I=0;I<w.length;I++){var P=M(w[I].pointNumber);if(P)if(P.group){for(var S=0;S<P.childrenNodes.length;S++)L.push(P.childrenNodes[S].pointNumber);k[P.pointNumber-T.node._count]=!1}else L.push(P.pointNumber)}_=k.filter(Boolean).concat([L]),n.call("_guiRestyle",s,{"node.groups":[_]},a)},prepFn:function(w,_,T){t(w,_,T,g,d)}};r.init(g)}}W.name="sankey",W.baseLayoutAttrOverrides=o({hoverlabel:y.hoverlabel},"plot","nested"),W.plot=function(s){var a=p(s.calcdata,"sankey")[0];x(s,a),W.updateFx(s)},W.clean=function(s,a,l,f){var d=f._has&&f._has("sankey"),v=a._has&&a._has("sankey");d&&!v&&(f._paperdiv.selectAll(".sankey").remove(),f._paperdiv.selectAll(".bgsankey").remove())},W.updateFx=function(s){for(var a=0;a<s._fullData.length;a++)h(s,a)}},{"../../components/dragelement":385,"../../components/fx/layout_attributes":407,"../../lib":503,"../../lib/setcursor":524,"../../plot_api/edit_types":536,"../../plots/cartesian/select":575,"../../plots/get_data":593,"../../registry":638,"./plot":922}],918:[function(u,q,W){var o=u("strongly-connected-components"),p=u("../../lib"),x=u("../../lib/gup").wrap,y=p.isArrayOrTypedArray,e=p.isIndex,r=u("../../components/colorscale");function t(i){var n,h=i.node,s=i.link,a=[],l=y(s.color),f=y(s.customdata),d={},v={},m=s.colorscales.length;for(n=0;n<m;n++){var c=s.colorscales[n],b=r.extractScale(c,{cLetter:"c"}),g=r.makeColorScaleFunc(b);v[c.label]=g}var w=0;for(n=0;n<s.value.length;n++)s.source[n]>w&&(w=s.source[n]),s.target[n]>w&&(w=s.target[n]);var _,T=w+1;i.node._count=T;var k=i.node.groups,L={};for(n=0;n<k.length;n++){var M=k[n];for(_=0;_<M.length;_++){var I=M[_],P=T+n;L.hasOwnProperty(I)?p.warn("Node "+I+" is already part of a group."):L[I]=P}}var S={source:[],target:[]};for(n=0;n<s.value.length;n++){var E=s.value[n],D=s.source[n],F=s.target[n];if(E>0&&e(D,T)&&e(F,T)&&(!L.hasOwnProperty(D)||!L.hasOwnProperty(F)||L[D]!==L[F])){L.hasOwnProperty(F)&&(F=L[F]),L.hasOwnProperty(D)&&(D=L[D]),F=+F,d[D=+D]=d[F]=!0;var H="";s.label&&s.label[n]&&(H=s.label[n]);var V=null;H&&v.hasOwnProperty(H)&&(V=v[H]),a.push({pointNumber:n,label:H,color:l?s.color[n]:s.color,customdata:f?s.customdata[n]:s.customdata,concentrationscale:V,source:D,target:F,value:+E}),S.source.push(D),S.target.push(F)}}var Q=T+k.length,K=y(h.color),Z=y(h.customdata),$=[];for(n=0;n<Q;n++)if(d[n]){var re=h.label[n];$.push({group:n>T-1,childrenNodes:[],pointNumber:n,label:re,color:K?h.color[n]:h.color,customdata:Z?h.customdata[n]:h.customdata})}var R=!1;return function(N,U,te){for(var j=p.init2dArray(N,0),Y=0;Y<Math.min(U.length,te.length);Y++)if(p.isIndex(U[Y],N)&&p.isIndex(te[Y],N)){if(U[Y]===te[Y])return!0;j[U[Y]].push(te[Y])}return o(j).components.some(function(J){return J.length>1})}(Q,S.source,S.target)&&(R=!0),{circular:R,links:a,nodes:$,groups:k,groupLookup:L}}q.exports=function(i,n){var h=t(n);return x({circular:h.circular,_nodes:h.nodes,_links:h.links,_groups:h.groups,_groupLookup:h.groupLookup})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500,"strongly-connected-components":306}],919:[function(u,q,W){q.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],920:[function(u,q,W){var o=u("../../lib"),p=u("./attributes"),x=u("../../components/color"),y=u("tinycolor2"),e=u("../../plots/domain").defaults,r=u("../../components/fx/hoverlabel_defaults"),t=u("../../plot_api/plot_template"),i=u("../../plots/array_container_defaults");function n(h,s){function a(l,f){return o.coerce(h,s,p.link.colorscales,l,f)}a("label"),a("cmin"),a("cmax"),a("colorscale")}q.exports=function(h,s,a,l){function f(L,M){return o.coerce(h,s,p,L,M)}var d=o.extendDeep(l.hoverlabel,h.hoverlabel),v=h.node,m=t.newContainer(s,"node");function c(L,M){return o.coerce(v,m,p.node,L,M)}c("label"),c("groups"),c("x"),c("y"),c("pad"),c("thickness"),c("line.color"),c("line.width"),c("hoverinfo",h.hoverinfo),r(v,m,c,d),c("hovertemplate");var b=l.colorway;c("color",m.label.map(function(L,M){return x.addOpacity(function(I){return b[I%b.length]}(M),.8)})),c("customdata");var g=h.link||{},w=t.newContainer(s,"link");function _(L,M){return o.coerce(g,w,p.link,L,M)}_("label"),_("source"),_("target"),_("value"),_("line.color"),_("line.width"),_("hoverinfo",h.hoverinfo),r(g,w,_,d),_("hovertemplate");var T,k=y(l.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";_("color",o.repeat(k,w.value.length)),_("customdata"),i(g,w,{name:"colorscales",handleItemDefaults:n}),e(s,l,f),f("orientation"),f("valueformat"),f("valuesuffix"),m.x.length&&m.y.length&&(T="freeform"),f("arrangement",T),o.coerceFont(f,"textfont",o.extendFlat({},l.font)),s._length=null}},{"../../components/color":366,"../../components/fx/hoverlabel_defaults":404,"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/domain":584,"./attributes":916,tinycolor2:312}],921:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults"),calc:u("./calc"),plot:u("./plot"),moduleType:"trace",name:"sankey",basePlotModule:u("./base_plot"),selectPoints:u("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":916,"./base_plot":917,"./calc":918,"./defaults":920,"./plot":922,"./select.js":924}],922:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../lib"),x=p.numberFormat,y=u("./render"),e=u("../../components/fx"),r=u("../../components/color"),t=u("./constants").cn,i=p._;function n(g){return g!==""}function h(g,w){return g.filter(function(_){return _.key===w.traceId})}function s(g,w){o.select(g).select("path").style("fill-opacity",w),o.select(g).select("rect").style("fill-opacity",w)}function a(g){o.select(g).select("text.name").style("fill","black")}function l(g){return function(w){return g.node.sourceLinks.indexOf(w.link)!==-1||g.node.targetLinks.indexOf(w.link)!==-1}}function f(g){return function(w){return w.node.sourceLinks.indexOf(g.link)!==-1||w.node.targetLinks.indexOf(g.link)!==-1}}function d(g,w,_){w&&_&&h(_,w).selectAll("."+t.sankeyLink).filter(l(w)).call(m.bind(0,w,_,!1))}function v(g,w,_){w&&_&&h(_,w).selectAll("."+t.sankeyLink).filter(l(w)).call(c.bind(0,w,_,!1))}function m(g,w,_,T){var k=T.datum().link.label;T.style("fill-opacity",function(L){if(!L.link.concentrationscale)return .4}),k&&h(w,g).selectAll("."+t.sankeyLink).filter(function(L){return L.link.label===k}).style("fill-opacity",function(L){if(!L.link.concentrationscale)return .4}),_&&h(w,g).selectAll("."+t.sankeyNode).filter(f(g)).call(d)}function c(g,w,_,T){var k=T.datum().link.label;T.style("fill-opacity",function(L){return L.tinyColorAlpha}),k&&h(w,g).selectAll("."+t.sankeyLink).filter(function(L){return L.link.label===k}).style("fill-opacity",function(L){return L.tinyColorAlpha}),_&&h(w,g).selectAll(t.sankeyNode).filter(f(g)).call(v)}function b(g,w){var _=g.hoverlabel||{},T=p.nestedProperty(_,w).get();return!Array.isArray(T)&&T}q.exports=function(g,w){for(var _=g._fullLayout,T=_._paper,k=_._size,L=0;L<g._fullData.length;L++)if(g._fullData[L].visible&&g._fullData[L].type===t.sankey&&!g._fullData[L]._viewInitial){var M=g._fullData[L].node;g._fullData[L]._viewInitial={node:{groups:M.groups.slice(),x:M.x.slice(),y:M.y.slice()}}}var I=i(g,"source:")+" ",P=i(g,"target:")+" ",S=i(g,"concentration:")+" ",E=i(g,"incoming flow count:")+" ",D=i(g,"outgoing flow count:")+" ";y(g,T,w,{width:k.w,height:k.h,margin:{t:k.t,r:k.r,b:k.b,l:k.l}},{linkEvents:{hover:function(F,H,V){g._fullLayout.hovermode!==!1&&(o.select(F).call(m.bind(0,H,V,!0)),H.link.trace.link.hoverinfo!=="skip"&&(H.link.fullData=H.link.trace,g.emit("plotly_hover",{event:o.event,points:[H.link]})))},follow:function(F,H){if(g._fullLayout.hovermode!==!1){var V=H.link.trace.link;if(V.hoverinfo!=="none"&&V.hoverinfo!=="skip"){for(var Q=[],K=0,Z=0;Z<H.flow.links.length;Z++){var $=H.flow.links[Z];if(g._fullLayout.hovermode!=="closest"||H.link.pointNumber===$.pointNumber){H.link.pointNumber===$.pointNumber&&(K=Z),$.fullData=$.trace,V=H.link.trace.link;var re=N($),R={valueLabel:x(H.valueFormat)($.value)+H.valueSuffix};Q.push({x:re[0],y:re[1],name:R.valueLabel,text:[$.label||"",I+$.source.label,P+$.target.label,$.concentrationscale?S+x("%0.2f")($.flow.labelConcentration):""].filter(n).join("<br>"),color:b(V,"bgcolor")||r.addOpacity($.color,1),borderColor:b(V,"bordercolor"),fontFamily:b(V,"font.family"),fontSize:b(V,"font.size"),fontColor:b(V,"font.color"),nameLength:b(V,"namelength"),textAlign:b(V,"align"),idealAlign:o.event.x<re[0]?"right":"left",hovertemplate:V.hovertemplate,hovertemplateLabels:R,eventData:[$]})}}e.loneHover(Q,{container:_._hoverlayer.node(),outerContainer:_._paper.node(),gd:g,anchorIndex:K}).each(function(){H.link.concentrationscale||s(this,.65),a(this)})}}function N(U){var te,j;U.circular?(te=(U.circularPathData.leftInnerExtent+U.circularPathData.rightInnerExtent)/2,j=U.circularPathData.verticalFullExtent):(te=(U.source.x1+U.target.x0)/2,j=(U.y0+U.y1)/2);var Y=[te,j];return U.trace.orientation==="v"&&Y.reverse(),Y[0]+=H.parent.translateX,Y[1]+=H.parent.translateY,Y}},unhover:function(F,H,V){g._fullLayout.hovermode!==!1&&(o.select(F).call(c.bind(0,H,V,!0)),H.link.trace.link.hoverinfo!=="skip"&&(H.link.fullData=H.link.trace,g.emit("plotly_unhover",{event:o.event,points:[H.link]})),e.loneUnhover(_._hoverlayer.node()))},select:function(F,H){var V=H.link;V.originalEvent=o.event,g._hoverdata=[V],e.click(g,{target:!0})}},nodeEvents:{hover:function(F,H,V){g._fullLayout.hovermode!==!1&&(o.select(F).call(d,H,V),H.node.trace.node.hoverinfo!=="skip"&&(H.node.fullData=H.node.trace,g.emit("plotly_hover",{event:o.event,points:[H.node]})))},follow:function(F,H){if(g._fullLayout.hovermode!==!1){var V=H.node.trace.node;if(V.hoverinfo!=="none"&&V.hoverinfo!=="skip"){var Q=o.select(F).select("."+t.nodeRect),K=g._fullLayout._paperdiv.node().getBoundingClientRect(),Z=Q.node().getBoundingClientRect(),$=Z.left-2-K.left,re=Z.right+2-K.left,R=Z.top+Z.height/4-K.top,N={valueLabel:x(H.valueFormat)(H.node.value)+H.valueSuffix};H.node.fullData=H.node.trace,g._fullLayout._calcInverseTransform(g);var U=g._fullLayout._invScaleX,te=g._fullLayout._invScaleY,j=e.loneHover({x0:U*$,x1:U*re,y:te*R,name:x(H.valueFormat)(H.node.value)+H.valueSuffix,text:[H.node.label,E+H.node.targetLinks.length,D+H.node.sourceLinks.length].filter(n).join("<br>"),color:b(V,"bgcolor")||H.tinyColorHue,borderColor:b(V,"bordercolor"),fontFamily:b(V,"font.family"),fontSize:b(V,"font.size"),fontColor:b(V,"font.color"),nameLength:b(V,"namelength"),textAlign:b(V,"align"),idealAlign:"left",hovertemplate:V.hovertemplate,hovertemplateLabels:N,eventData:[H.node]},{container:_._hoverlayer.node(),outerContainer:_._paper.node(),gd:g});s(j,.85),a(j)}}},unhover:function(F,H,V){g._fullLayout.hovermode!==!1&&(o.select(F).call(v,H,V),H.node.trace.node.hoverinfo!=="skip"&&(H.node.fullData=H.node.trace,g.emit("plotly_unhover",{event:o.event,points:[H.node]})),e.loneUnhover(_._hoverlayer.node()))},select:function(F,H,V){var Q=H.node;Q.originalEvent=o.event,g._hoverdata=[Q],o.select(F).call(v,H,V),e.click(g,{target:!0})}}})}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"./constants":919,"./render":923,"@plotly/d3":58}],923:[function(u,q,W){var o=u("d3-force"),p=u("d3-interpolate").interpolateNumber,x=u("@plotly/d3"),y=u("@plotly/d3-sankey"),e=u("@plotly/d3-sankey-circular"),r=u("./constants"),t=u("tinycolor2"),i=u("../../components/color"),n=u("../../components/drawing"),h=u("../../lib"),s=h.strTranslate,a=h.strRotate,l=u("../../lib/gup"),f=l.keyFun,d=l.repeat,v=l.unwrap,m=u("../../lib/svg_text_utils"),c=u("../../registry"),b=u("../../constants/alignment"),g=b.CAP_SHIFT,w=b.LINE_SPACING;function _(Z,$,re){var R,N=v($),U=N.trace,te=U.domain,j=U.orientation==="h",Y=U.node.pad,J=U.node.thickness,ee=Z.width*(te.x[1]-te.x[0]),ne=Z.height*(te.y[1]-te.y[0]),se=N._nodes,oe=N._links,he=N.circular;(R=he?e.sankeyCircular().circularLinkGap(0):y.sankey()).iterations(r.sankeyIterations).size(j?[ee,ne]:[ne,ee]).nodeWidth(J).nodePadding(Y).nodeId(function(Me){return Me.pointNumber}).nodes(se).links(oe);var le,de,xe,we=R();for(var be in R.nodePadding()<Y&&h.warn("node.pad was reduced to ",R.nodePadding()," to fit within the figure."),N._groupLookup){var Ae,fe=parseInt(N._groupLookup[be]);for(le=0;le<we.nodes.length;le++)if(we.nodes[le].pointNumber===fe){Ae=we.nodes[le];break}if(Ae){var me={pointNumber:parseInt(be),x0:Ae.x0,x1:Ae.x1,y0:Ae.y0,y1:Ae.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};we.nodes.unshift(me),Ae.childrenNodes.unshift(me)}}if(function(){for(le=0;le<we.nodes.length;le++){var Me,Oe,Fe=we.nodes[le],qe={};for(de=0;de<Fe.targetLinks.length;de++)Me=(Oe=Fe.targetLinks[de]).source.pointNumber+":"+Oe.target.pointNumber,qe.hasOwnProperty(Me)||(qe[Me]=[]),qe[Me].push(Oe);var et=Object.keys(qe);for(de=0;de<et.length;de++){var ze=qe[Me=et[de]],Ue=0,We={};for(xe=0;xe<ze.length;xe++)We[(Oe=ze[xe]).label]||(We[Oe.label]=0),We[Oe.label]+=Oe.value,Ue+=Oe.value;for(xe=0;xe<ze.length;xe++)(Oe=ze[xe]).flow={value:Ue,labelConcentration:We[Oe.label]/Ue,concentration:Oe.value/Ue,links:ze},Oe.concentrationscale&&(Oe.color=t(Oe.concentrationscale(Oe.flow.labelConcentration)))}var Ze=0;for(de=0;de<Fe.sourceLinks.length;de++)Ze+=Fe.sourceLinks[de].value;for(de=0;de<Fe.sourceLinks.length;de++)(Oe=Fe.sourceLinks[de]).concentrationOut=Oe.value/Ze;var nt=0;for(de=0;de<Fe.targetLinks.length;de++)nt+=Fe.targetLinks[de].value;for(de=0;de<Fe.targetLinks.length;de++)(Oe=Fe.targetLinks[de]).concenrationIn=Oe.value/nt}}(),U.node.x.length&&U.node.y.length){for(le=0;le<Math.min(U.node.x.length,U.node.y.length,we.nodes.length);le++)if(U.node.x[le]&&U.node.y[le]){var ke=[U.node.x[le]*ee,U.node.y[le]*ne];we.nodes[le].x0=ke[0]-J/2,we.nodes[le].x1=ke[0]+J/2;var Te=we.nodes[le].y1-we.nodes[le].y0;we.nodes[le].y0=ke[1]-Te/2,we.nodes[le].y1=ke[1]+Te/2}U.arrangement==="snap"&&function(Me){Me.forEach(function(Oe){var Fe,qe,et,ze=0,Ue=Oe.length;for(Oe.sort(function(We,Ze){return We.y0-Ze.y0}),et=0;et<Ue;++et)(Fe=Oe[et]).y0>=ze||(qe=ze-Fe.y0)>1e-6&&(Fe.y0+=qe,Fe.y1+=qe),ze=Fe.y1+Y})}(function(Me){var Oe,Fe,qe=Me.map(function(Ze,nt){return{x0:Ze.x0,index:nt}}).sort(function(Ze,nt){return Ze.x0-nt.x0}),et=[],ze=-1,Ue=-1/0;for(le=0;le<qe.length;le++){var We=Me[qe[le].index];We.x0>Ue+J&&(ze+=1,Oe=We.x0),Ue=We.x0,et[ze]||(et[ze]=[]),et[ze].push(We),Fe=Oe-We.x0,We.x0+=Fe,We.x1+=Fe}return et}(se=we.nodes)),R.update(we)}return{circular:he,key:re,trace:U,guid:h.randstr(),horizontal:j,width:ee,height:ne,nodePad:U.node.pad,nodeLineColor:U.node.line.color,nodeLineWidth:U.node.line.width,linkLineColor:U.link.line.color,linkLineWidth:U.link.line.width,valueFormat:U.valueformat,valueSuffix:U.valuesuffix,textFont:U.textfont,translateX:te.x[0]*Z.width+Z.margin.l,translateY:Z.height-te.y[1]*Z.height+Z.margin.t,dragParallel:j?ne:ee,dragPerpendicular:j?ee:ne,arrangement:U.arrangement,sankey:R,graph:we,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function T(Z,$,re){var R=t($.color),N=$.source.label+"|"+$.target.label+"__"+re;return $.trace=Z.trace,$.curveNumber=Z.trace.index,{circular:Z.circular,key:N,traceId:Z.key,pointNumber:$.pointNumber,link:$,tinyColorHue:i.tinyRGB(R),tinyColorAlpha:R.getAlpha(),linkPath:k,linkLineColor:Z.linkLineColor,linkLineWidth:Z.linkLineWidth,valueFormat:Z.valueFormat,valueSuffix:Z.valueSuffix,sankey:Z.sankey,parent:Z,interactionState:Z.interactionState,flow:$.flow}}function k(){return function(Z){if(Z.link.circular)return $=Z.link,re=$.width/2,R=$.circularPathData,$.circularLinkType==="top"?"M "+R.targetX+" "+(R.targetY+re)+" L"+R.rightInnerExtent+" "+(R.targetY+re)+"A"+(R.rightLargeArcRadius+re)+" "+(R.rightSmallArcRadius+re)+" 0 0 1 "+(R.rightFullExtent-re)+" "+(R.targetY-R.rightSmallArcRadius)+"L"+(R.rightFullExtent-re)+" "+R.verticalRightInnerExtent+"A"+(R.rightLargeArcRadius+re)+" "+(R.rightLargeArcRadius+re)+" 0 0 1 "+R.rightInnerExtent+" "+(R.verticalFullExtent-re)+"L"+R.leftInnerExtent+" "+(R.verticalFullExtent-re)+"A"+(R.leftLargeArcRadius+re)+" "+(R.leftLargeArcRadius+re)+" 0 0 1 "+(R.leftFullExtent+re)+" "+R.verticalLeftInnerExtent+"L"+(R.leftFullExtent+re)+" "+(R.sourceY-R.leftSmallArcRadius)+"A"+(R.leftLargeArcRadius+re)+" "+(R.leftSmallArcRadius+re)+" 0 0 1 "+R.leftInnerExtent+" "+(R.sourceY+re)+"L"+R.sourceX+" "+(R.sourceY+re)+"L"+R.sourceX+" "+(R.sourceY-re)+"L"+R.leftInnerExtent+" "+(R.sourceY-re)+"A"+(R.leftLargeArcRadius-re)+" "+(R.leftSmallArcRadius-re)+" 0 0 0 "+(R.leftFullExtent-re)+" "+(R.sourceY-R.leftSmallArcRadius)+"L"+(R.leftFullExtent-re)+" "+R.verticalLeftInnerExtent+"A"+(R.leftLargeArcRadius-re)+" "+(R.leftLargeArcRadius-re)+" 0 0 0 "+R.leftInnerExtent+" "+(R.verticalFullExtent+re)+"L"+R.rightInnerExtent+" "+(R.verticalFullExtent+re)+"A"+(R.rightLargeArcRadius-re)+" "+(R.rightLargeArcRadius-re)+" 0 0 0 "+(R.rightFullExtent+re)+" "+R.verticalRightInnerExtent+"L"+(R.rightFullExtent+re)+" "+(R.targetY-R.rightSmallArcRadius)+"A"+(R.rightLargeArcRadius-re)+" "+(R.rightSmallArcRadius-re)+" 0 0 0 "+R.rightInnerExtent+" "+(R.targetY-re)+"L"+R.targetX+" "+(R.targetY-re)+"Z":"M "+R.targetX+" "+(R.targetY-re)+" L"+R.rightInnerExtent+" "+(R.targetY-re)+"A"+(R.rightLargeArcRadius+re)+" "+(R.rightSmallArcRadius+re)+" 0 0 0 "+(R.rightFullExtent-re)+" "+(R.targetY+R.rightSmallArcRadius)+"L"+(R.rightFullExtent-re)+" "+R.verticalRightInnerExtent+"A"+(R.rightLargeArcRadius+re)+" "+(R.rightLargeArcRadius+re)+" 0 0 0 "+R.rightInnerExtent+" "+(R.verticalFullExtent+re)+"L"+R.leftInnerExtent+" "+(R.verticalFullExtent+re)+"A"+(R.leftLargeArcRadius+re)+" "+(R.leftLargeArcRadius+re)+" 0 0 0 "+(R.leftFullExtent+re)+" "+R.verticalLeftInnerExtent+"L"+(R.leftFullExtent+re)+" "+(R.sourceY+R.leftSmallArcRadius)+"A"+(R.leftLargeArcRadius+re)+" "+(R.leftSmallArcRadius+re)+" 0 0 0 "+R.leftInnerExtent+" "+(R.sourceY-re)+"L"+R.sourceX+" "+(R.sourceY-re)+"L"+R.sourceX+" "+(R.sourceY+re)+"L"+R.leftInnerExtent+" "+(R.sourceY+re)+"A"+(R.leftLargeArcRadius-re)+" "+(R.leftSmallArcRadius-re)+" 0 0 1 "+(R.leftFullExtent-re)+" "+(R.sourceY+R.leftSmallArcRadius)+"L"+(R.leftFullExtent-re)+" "+R.verticalLeftInnerExtent+"A"+(R.leftLargeArcRadius-re)+" "+(R.leftLargeArcRadius-re)+" 0 0 1 "+R.leftInnerExtent+" "+(R.verticalFullExtent-re)+"L"+R.rightInnerExtent+" "+(R.verticalFullExtent-re)+"A"+(R.rightLargeArcRadius-re)+" "+(R.rightLargeArcRadius-re)+" 0 0 1 "+(R.rightFullExtent+re)+" "+R.verticalRightInnerExtent+"L"+(R.rightFullExtent+re)+" "+(R.targetY+R.rightSmallArcRadius)+"A"+(R.rightLargeArcRadius-re)+" "+(R.rightSmallArcRadius-re)+" 0 0 1 "+R.rightInnerExtent+" "+(R.targetY+re)+"L"+R.targetX+" "+(R.targetY+re)+"Z";var $,re,R,N=Z.link.source.x1,U=Z.link.target.x0,te=p(N,U),j=te(.5),Y=te(.5),J=Z.link.y0-Z.link.width/2,ee=Z.link.y0+Z.link.width/2,ne=Z.link.y1-Z.link.width/2,se=Z.link.y1+Z.link.width/2;return"M"+N+","+J+"C"+j+","+J+" "+Y+","+ne+" "+U+","+ne+"L"+U+","+se+"C"+Y+","+se+" "+j+","+ee+" "+N+","+ee+"Z"}}function L(Z,$){var re=t($.color),R=r.nodePadAcross,N=Z.nodePad/2;$.dx=$.x1-$.x0,$.dy=$.y1-$.y0;var U=$.dx,te=Math.max(.5,$.dy),j="node_"+$.pointNumber;return $.group&&(j=h.randstr()),$.trace=Z.trace,$.curveNumber=Z.trace.index,{index:$.pointNumber,key:j,partOfGroup:$.partOfGroup||!1,group:$.group,traceId:Z.key,trace:Z.trace,node:$,nodePad:Z.nodePad,nodeLineColor:Z.nodeLineColor,nodeLineWidth:Z.nodeLineWidth,textFont:Z.textFont,size:Z.horizontal?Z.height:Z.width,visibleWidth:Math.ceil(U),visibleHeight:te,zoneX:-R,zoneY:-N,zoneWidth:U+2*R,zoneHeight:te+2*N,labelY:Z.horizontal?$.dy/2+1:$.dx/2+1,left:$.originalLayer===1,sizeAcross:Z.width,forceLayouts:Z.forceLayouts,horizontal:Z.horizontal,darkBackground:re.getBrightness()<=128,tinyColorHue:i.tinyRGB(re),tinyColorAlpha:re.getAlpha(),valueFormat:Z.valueFormat,valueSuffix:Z.valueSuffix,sankey:Z.sankey,graph:Z.graph,arrangement:Z.arrangement,uniqueNodeLabelPathId:[Z.guid,Z.key,j].join("_"),interactionState:Z.interactionState,figure:Z}}function M(Z){Z.attr("transform",function($){return s($.node.x0.toFixed(3),$.node.y0.toFixed(3))})}function I(Z){Z.call(M)}function P(Z,$){Z.call(I),$.attr("d",k())}function S(Z){Z.attr("width",function($){return $.node.x1-$.node.x0}).attr("height",function($){return $.visibleHeight})}function E(Z){return Z.link.width>1||Z.linkLineWidth>0}function D(Z){return s(Z.translateX,Z.translateY)+(Z.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function F(Z,$,re){Z.on(".basic",null).on("mouseover.basic",function(R){R.interactionState.dragInProgress||R.partOfGroup||(re.hover(this,R,$),R.interactionState.hovered=[this,R])}).on("mousemove.basic",function(R){R.interactionState.dragInProgress||R.partOfGroup||(re.follow(this,R),R.interactionState.hovered=[this,R])}).on("mouseout.basic",function(R){R.interactionState.dragInProgress||R.partOfGroup||(re.unhover(this,R,$),R.interactionState.hovered=!1)}).on("click.basic",function(R){R.interactionState.hovered&&(re.unhover(this,R,$),R.interactionState.hovered=!1),R.interactionState.dragInProgress||R.partOfGroup||re.select(this,R,$)})}function H(Z,$,re,R){var N=x.behavior.drag().origin(function(U){return{x:U.node.x0+U.visibleWidth/2,y:U.node.y0+U.visibleHeight/2}}).on("dragstart",function(U){if(U.arrangement!=="fixed"&&(h.ensureSingle(R._fullLayout._infolayer,"g","dragcover",function(j){R._fullLayout._dragCover=j}),h.raiseToTop(this),U.interactionState.dragInProgress=U.node,Q(U.node),U.interactionState.hovered&&(re.nodeEvents.unhover.apply(0,U.interactionState.hovered),U.interactionState.hovered=!1),U.arrangement==="snap")){var te=U.traceId+"|"+U.key;U.forceLayouts[te]?U.forceLayouts[te].alpha(1):function(j,Y,J,ee){(function(se){for(var oe=0;oe<se.length;oe++)se[oe].y=(se[oe].y0+se[oe].y1)/2,se[oe].x=(se[oe].x0+se[oe].x1)/2})(J.graph.nodes);var ne=J.graph.nodes.filter(function(se){return se.originalX===J.node.originalX}).filter(function(se){return!se.partOfGroup});J.forceLayouts[Y]=o.forceSimulation(ne).alphaDecay(0).force("collide",o.forceCollide().radius(function(se){return se.dy/2+J.nodePad/2}).strength(1).iterations(r.forceIterations)).force("constrain",function(se,oe,he,le){return function(){for(var de=0,xe=0;xe<he.length;xe++){var we=he[xe];we===le.interactionState.dragInProgress?(we.x=we.lastDraggedX,we.y=we.lastDraggedY):(we.vx=(we.originalX-we.x)/r.forceTicksPerFrame,we.y=Math.min(le.size-we.dy/2,Math.max(we.dy/2,we.y))),de=Math.max(de,Math.abs(we.vx),Math.abs(we.vy))}!le.interactionState.dragInProgress&&de<.1&&le.forceLayouts[oe].alpha()>0&&le.forceLayouts[oe].alpha(0)}}(0,Y,ne,J)).stop()}(0,te,U),function(j,Y,J,ee,ne){window.requestAnimationFrame(function se(){var oe;for(oe=0;oe<r.forceTicksPerFrame;oe++)J.forceLayouts[ee].tick();if(function(le){for(var de=0;de<le.length;de++)le[de].y0=le[de].y-le[de].dy/2,le[de].y1=le[de].y0+le[de].dy,le[de].x0=le[de].x-le[de].dx/2,le[de].x1=le[de].x0+le[de].dx}(J.graph.nodes),J.sankey.update(J.graph),P(j.filter(K(J)),Y),J.forceLayouts[ee].alpha()>0)window.requestAnimationFrame(se);else{var he=J.node.originalX;J.node.x0=he-J.visibleWidth/2,J.node.x1=he+J.visibleWidth/2,V(J,ne)}})}(Z,$,U,te,R)}}).on("drag",function(U){if(U.arrangement!=="fixed"){var te=x.event.x,j=x.event.y;U.arrangement==="snap"?(U.node.x0=te-U.visibleWidth/2,U.node.x1=te+U.visibleWidth/2,U.node.y0=j-U.visibleHeight/2,U.node.y1=j+U.visibleHeight/2):(U.arrangement==="freeform"&&(U.node.x0=te-U.visibleWidth/2,U.node.x1=te+U.visibleWidth/2),j=Math.max(0,Math.min(U.size-U.visibleHeight/2,j)),U.node.y0=j-U.visibleHeight/2,U.node.y1=j+U.visibleHeight/2),Q(U.node),U.arrangement!=="snap"&&(U.sankey.update(U.graph),P(Z.filter(K(U)),$))}}).on("dragend",function(U){if(U.arrangement!=="fixed"){U.interactionState.dragInProgress=!1;for(var te=0;te<U.node.childrenNodes.length;te++)U.node.childrenNodes[te].x=U.node.x,U.node.childrenNodes[te].y=U.node.y;U.arrangement!=="snap"&&V(U,R)}});Z.on(".drag",null).call(N)}function V(Z,$){for(var re=[],R=[],N=0;N<Z.graph.nodes.length;N++){var U=(Z.graph.nodes[N].x0+Z.graph.nodes[N].x1)/2,te=(Z.graph.nodes[N].y0+Z.graph.nodes[N].y1)/2;re.push(U/Z.figure.width),R.push(te/Z.figure.height)}c.call("_guiRestyle",$,{"node.x":[re],"node.y":[R]},Z.trace.index).then(function(){$._fullLayout._dragCover&&$._fullLayout._dragCover.remove()})}function Q(Z){Z.lastDraggedX=Z.x0+Z.dx/2,Z.lastDraggedY=Z.y0+Z.dy/2}function K(Z){return function($){return $.node.originalX===Z.node.originalX}}q.exports=function(Z,$,re,R,N){var U=!1;h.ensureSingle(Z._fullLayout._infolayer,"g","first-render",function(){U=!0});var te=Z._fullLayout._dragCover,j=re.filter(function(le){return v(le).trace.visible}).map(_.bind(null,R)),Y=$.selectAll("."+r.cn.sankey).data(j,f);Y.exit().remove(),Y.enter().append("g").classed(r.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",D),Y.each(function(le,de){Z._fullData[de]._sankey=le;var xe="bgsankey-"+le.trace.uid+"-"+de;h.ensureSingle(Z._fullLayout._draggers,"rect",xe),Z._fullData[de]._bgRect=x.select("."+xe),Z._fullData[de]._bgRect.style("pointer-events","all").attr("width",le.width).attr("height",le.height).attr("x",le.translateX).attr("y",le.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),Y.transition().ease(r.ease).duration(r.duration).attr("transform",D);var J=Y.selectAll("."+r.cn.sankeyLinks).data(d,f);J.enter().append("g").classed(r.cn.sankeyLinks,!0).style("fill","none");var ee=J.selectAll("."+r.cn.sankeyLink).data(function(le){return le.graph.links.filter(function(de){return de.value}).map(T.bind(null,le))},f);ee.enter().append("path").classed(r.cn.sankeyLink,!0).call(F,Y,N.linkEvents),ee.style("stroke",function(le){return E(le)?i.tinyRGB(t(le.linkLineColor)):le.tinyColorHue}).style("stroke-opacity",function(le){return E(le)?i.opacity(le.linkLineColor):le.tinyColorAlpha}).style("fill",function(le){return le.tinyColorHue}).style("fill-opacity",function(le){return le.tinyColorAlpha}).style("stroke-width",function(le){return E(le)?le.linkLineWidth:1}).attr("d",k()),ee.style("opacity",function(){return Z._context.staticPlot||U||te?1:0}).transition().ease(r.ease).duration(r.duration).style("opacity",1),ee.exit().transition().ease(r.ease).duration(r.duration).style("opacity",0).remove();var ne=Y.selectAll("."+r.cn.sankeyNodeSet).data(d,f);ne.enter().append("g").classed(r.cn.sankeyNodeSet,!0),ne.style("cursor",function(le){switch(le.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var se=ne.selectAll("."+r.cn.sankeyNode).data(function(le){var de=le.graph.nodes;return function(xe){var we,be=[];for(we=0;we<xe.length;we++)xe[we].originalX=(xe[we].x0+xe[we].x1)/2,xe[we].originalY=(xe[we].y0+xe[we].y1)/2,be.indexOf(xe[we].originalX)===-1&&be.push(xe[we].originalX);for(be.sort(function(Ae,fe){return Ae-fe}),we=0;we<xe.length;we++)xe[we].originalLayerIndex=be.indexOf(xe[we].originalX),xe[we].originalLayer=xe[we].originalLayerIndex/(be.length-1)}(de),de.map(L.bind(null,le))},f);se.enter().append("g").classed(r.cn.sankeyNode,!0).call(M).style("opacity",function(le){return!Z._context.staticPlot&&!U||le.partOfGroup?0:1}),se.call(F,Y,N.nodeEvents).call(H,ee,N,Z),se.transition().ease(r.ease).duration(r.duration).call(M).style("opacity",function(le){return le.partOfGroup?0:1}),se.exit().transition().ease(r.ease).duration(r.duration).style("opacity",0).remove();var oe=se.selectAll("."+r.cn.nodeRect).data(d);oe.enter().append("rect").classed(r.cn.nodeRect,!0).call(S),oe.style("stroke-width",function(le){return le.nodeLineWidth}).style("stroke",function(le){return i.tinyRGB(t(le.nodeLineColor))}).style("stroke-opacity",function(le){return i.opacity(le.nodeLineColor)}).style("fill",function(le){return le.tinyColorHue}).style("fill-opacity",function(le){return le.tinyColorAlpha}),oe.transition().ease(r.ease).duration(r.duration).call(S);var he=se.selectAll("."+r.cn.nodeLabel).data(d);he.enter().append("text").classed(r.cn.nodeLabel,!0).style("cursor","default"),he.attr("data-notex",1).text(function(le){return le.node.label}).each(function(le){var de=x.select(this);n.font(de,le.textFont),m.convertToTspans(de,Z)}).style("text-shadow",m.makeTextShadow(Z._fullLayout.paper_bgcolor)).attr("text-anchor",function(le){return le.horizontal&&le.left?"end":"start"}).attr("transform",function(le){var de=x.select(this),xe=m.lineCount(de),we=le.textFont.size*((xe-1)*w-g),be=le.nodeLineWidth/2+3,Ae=((le.horizontal?le.visibleHeight:le.visibleWidth)-we)/2;le.horizontal&&(le.left?be=-be:be+=le.visibleWidth);var fe=le.horizontal?"":"scale(-1,1)"+a(90);return s(le.horizontal?be:Ae,le.horizontal?Ae:be)+fe}),he.transition().ease(r.ease).duration(r.duration)}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../registry":638,"./constants":919,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:312}],924:[function(u,q,W){q.exports=function(o,p){for(var x=[],y=o.cd[0].trace,e=y._sankey.graph.nodes,r=0;r<e.length;r++){var t=e[r];if(!t.partOfGroup){var i=[(t.x0+t.x1)/2,(t.y0+t.y1)/2];y.orientation==="v"&&i.reverse(),p&&p.contains(i,!1,r,o)&&x.push({pointNumber:t.pointNumber})}}return x}},{}],925:[function(u,q,W){var o=u("../../lib");q.exports=function(p,x){for(var y=0;y<p.length;y++)p[y].i=y;o.mergeArray(x.text,p,"tx"),o.mergeArray(x.texttemplate,p,"txt"),o.mergeArray(x.hovertext,p,"htx"),o.mergeArray(x.customdata,p,"data"),o.mergeArray(x.textposition,p,"tp"),x.textfont&&(o.mergeArrayCastPositive(x.textfont.size,p,"ts"),o.mergeArray(x.textfont.color,p,"tc"),o.mergeArray(x.textfont.family,p,"tf"));var e=x.marker;if(e){o.mergeArrayCastPositive(e.size,p,"ms"),o.mergeArrayCastPositive(e.opacity,p,"mo"),o.mergeArray(e.symbol,p,"mx"),o.mergeArray(e.color,p,"mc");var r=e.line;e.line&&(o.mergeArray(r.color,p,"mlc"),o.mergeArrayCastPositive(r.width,p,"mlw"));var t=e.gradient;t&&t.type!=="none"&&(o.mergeArray(t.type,p,"mgt"),o.mergeArray(t.color,p,"mgc"))}}},{"../../lib":503}],926:[function(u,q,W){var o=u("../../plots/cartesian/axis_format_attributes").axisHoverFormat,p=u("../../plots/template_attributes").texttemplateAttrs,x=u("../../plots/template_attributes").hovertemplateAttrs,y=u("../../components/colorscale/attributes"),e=u("../../plots/font_attributes"),r=u("../../components/drawing/attributes").dash,t=u("../../components/drawing"),i=u("./constants"),n=u("../../lib/extend").extendFlat;q.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:o("x"),yhoverformat:o("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:p({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:x({},{keys:i.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:n({},r,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:n({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:n({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},y("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},y("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":373,"../../components/drawing":388,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"./constants":930}],927:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../lib"),x=u("../../plots/cartesian/axes"),y=u("../../plots/cartesian/align_period"),e=u("../../constants/numerical").BADNUM,r=u("./subtypes"),t=u("./colorscale_calc"),i=u("./arrays_to_calcdata"),n=u("./calc_selection");function h(d,v,m,c,b,g,w){var _=v._length,T=d._fullLayout,k=m._id,L=c._id,M=T._firstScatter[l(v)]===v.uid,I=(f(v,T,m,c)||{}).orientation,P=v.fill;m._minDtick=0,c._minDtick=0;var S={padded:!0},E={padded:!0};w&&(S.ppad=E.ppad=w);var D=_<2||b[0]!==b[_-1]||g[0]!==g[_-1];D&&(P==="tozerox"||P==="tonextx"&&(M||I==="h"))?S.tozero=!0:(v.error_y||{}).visible||P!=="tonexty"&&P!=="tozeroy"&&(r.hasMarkers(v)||r.hasText(v))||(S.padded=!1,S.ppad=0),D&&(P==="tozeroy"||P==="tonexty"&&(M||I==="v"))?E.tozero=!0:P!=="tonextx"&&P!=="tozerox"||(E.padded=!1),k&&(v._extremes[k]=x.findExtremes(m,b,S)),L&&(v._extremes[L]=x.findExtremes(c,g,E))}function s(d,v){if(r.hasMarkers(d)){var m,c=d.marker,b=1.6*(d.marker.sizeref||1);if(m=d.marker.sizemode==="area"?function(k){return Math.max(Math.sqrt((k||0)/b),3)}:function(k){return Math.max((k||0)/b,3)},p.isArrayOrTypedArray(c.size)){var g={type:"linear"};x.setConvert(g);for(var w=g.makeCalcdata(d.marker,"size"),_=new Array(v),T=0;T<v;T++)_[T]=m(w[T]);return _}return m(c.size)}}function a(d,v){var m=l(v),c=d._firstScatter;c[m]||(c[m]=v.uid)}function l(d){var v=d.stackgroup;return d.xaxis+d.yaxis+d.type+(v?"-"+v:"")}function f(d,v,m,c){var b=d.stackgroup;if(b){var g=v._scatterStackOpts[m._id+c._id][b],w=g.orientation==="v"?c:m;return w.type==="linear"||w.type==="log"?g:void 0}}q.exports={calc:function(d,v){var m,c,b,g,w,_,T=d._fullLayout,k=x.getFromId(d,v.xaxis||"x"),L=x.getFromId(d,v.yaxis||"y"),M=k.makeCalcdata(v,"x"),I=L.makeCalcdata(v,"y"),P=y(v,k,"x",M),S=y(v,L,"y",I),E=P.vals,D=S.vals,F=v._length,H=new Array(F),V=v.ids,Q=f(v,T,k,L),K=!1;a(T,v);var Z,$="x",re="y";Q?(p.pushUnique(Q.traceIndices,v._expandedIndex),(m=Q.orientation==="v")?(re="s",Z="x"):($="s",Z="y"),w=Q.stackgaps==="interpolate"):h(d,v,k,L,E,D,s(v,F));var R=!!v.xperiodalignment,N=!!v.yperiodalignment;for(c=0;c<F;c++){var U=H[c]={},te=o(E[c]),j=o(D[c]);te&&j?(U[$]=E[c],U[re]=D[c],R&&(U.orig_x=M[c],U.xEnd=P.ends[c],U.xStart=P.starts[c]),N&&(U.orig_y=I[c],U.yEnd=S.ends[c],U.yStart=S.starts[c])):Q&&(m?te:j)?(U[Z]=m?E[c]:D[c],U.gap=!0,w?(U.s=e,K=!0):U.s=0):U[$]=U[re]=e,V&&(U.id=String(V[c]))}if(i(H,v),t(d,v),n(H,v),Q){for(c=0;c<H.length;)H[c][Z]===e?H.splice(c,1):c++;if(p.sort(H,function(ne,se){return ne[Z]-se[Z]||ne.i-se.i}),K){for(c=0;c<H.length-1&&H[c].gap;)c++;for((_=H[c].s)||(_=H[c].s=0),b=0;b<c;b++)H[b].s=_;for(g=H.length-1;g>c&&H[g].gap;)g--;for(_=H[g].s,b=H.length-1;b>g;b--)H[b].s=_;for(;c<g;)if(H[++c].gap){for(b=c+1;H[b].gap;)b++;for(var Y=H[c-1][Z],J=H[c-1].s,ee=(H[b].s-J)/(H[b][Z]-Y);c<b;)H[c].s=J+(H[c][Z]-Y)*ee,c++}}}return H},calcMarkerSize:s,calcAxisExpansion:h,setFirstScatter:a,getStackOpts:f}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"./arrays_to_calcdata":925,"./calc_selection":928,"./colorscale_calc":929,"./subtypes":951,"fast-isnumeric":190}],928:[function(u,q,W){var o=u("../../lib");q.exports=function(p,x){o.isArrayOrTypedArray(x.selectedpoints)&&o.tagSelected(p,x)}},{"../../lib":503}],929:[function(u,q,W){var o=u("../../components/colorscale/helpers").hasColorscale,p=u("../../components/colorscale/calc"),x=u("./subtypes");q.exports=function(y,e){x.hasLines(e)&&o(e,"line")&&p(y,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),x.hasMarkers(e)&&(o(e,"marker")&&p(y,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),o(e,"marker.line")&&p(y,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"./subtypes":951}],930:[function(u,q,W){q.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],931:[function(u,q,W){var o=u("./calc");function p(x,y,e,r,t,i,n){t[r]=!0;var h={i:null,gap:!0,s:0};if(h[n]=e,x.splice(y,0,h),y&&e===x[y-1][n]){var s=x[y-1];h.s=s.s,h.i=s.i,h.gap=s.gap}else i&&(h.s=function(a,l,f,d){var v=a[l-1],m=a[l+1];return m?v?v.s+(m.s-v.s)*(f-v[d])/(m[d]-v[d]):m.s:v.s}(x,y,e,n));y||(x[0].t=x[1].t,x[0].trace=x[1].trace,delete x[1].t,delete x[1].trace)}q.exports=function(x,y){var e=y.xaxis,r=y.yaxis,t=e._id+r._id,i=x._fullLayout._scatterStackOpts[t];if(i){var n,h,s,a,l,f,d,v,m,c,b,g,w,_,T,k=x.calcdata;for(var L in i){var M=(c=i[L]).traceIndices;if(M.length){for(b=c.stackgaps==="interpolate",g=c.groupnorm,c.orientation==="v"?(w="x",_="y"):(w="y",_="x"),T=new Array(M.length),n=0;n<T.length;n++)T[n]=!1;f=k[M[0]];var I=new Array(f.length);for(n=0;n<f.length;n++)I[n]=f[n][w];for(n=1;n<M.length;n++){for(l=k[M[n]],h=s=0;h<l.length;h++){for(d=l[h][w];d>I[s]&&s<I.length;s++)p(l,h,I[s],n,T,b,w),h++;if(d!==I[s]){for(a=0;a<n;a++)p(k[M[a]],s,d,a,T,b,w);I.splice(s,0,d)}s++}for(;s<I.length;s++)p(l,h,I[s],n,T,b,w),h++}var P=I.length;for(h=0;h<f.length;h++){for(v=f[h][_]=f[h].s,n=1;n<M.length;n++)(l=k[M[n]])[0].trace._rawLength=l[0].trace._length,l[0].trace._length=P,v+=l[h].s,l[h][_]=v;if(g)for(m=(g==="fraction"?v:v/100)||1,n=0;n<M.length;n++){var S=k[M[n]][h];S[_]/=m,S.sNorm=S.s/m}}for(n=0;n<M.length;n++){var E=(l=k[M[n]])[0].trace,D=o.calcMarkerSize(E,E._rawLength),F=Array.isArray(D);if(D&&T[n]||F){var H=D;for(D=new Array(P),h=0;h<P;h++)D[h]=l[h].gap?0:F?H[l[h].i]:H}var V=new Array(P),Q=new Array(P);for(h=0;h<P;h++)V[h]=l[h].x,Q[h]=l[h].y;o.calcAxisExpansion(x,E,e,r,V,Q,D),l[0].t.orientation=c.orientation}}}}}},{"./calc":927}],932:[function(u,q,W){q.exports=function(o){for(var p=0;p<o.length;p++){var x=o[p];if(x.type==="scatter"){var y=x.fill;if(y!=="none"&&y!=="toself"&&(x.opacity=void 0,y==="tonexty"||y==="tonextx"))for(var e=p-1;e>=0;e--){var r=o[e];if(r.type==="scatter"&&r.xaxis===x.xaxis&&r.yaxis===x.yaxis){r.opacity=void 0;break}}}}}},{}],933:[function(u,q,W){var o=u("../../lib"),p=u("../../registry"),x=u("./attributes"),y=u("./constants"),e=u("./subtypes"),r=u("./xy_defaults"),t=u("./period_defaults"),i=u("./stack_defaults"),n=u("./marker_defaults"),h=u("./line_defaults"),s=u("./line_shape_defaults"),a=u("./text_defaults"),l=u("./fillcolor_defaults");q.exports=function(f,d,v,m){function c(M,I){return o.coerce(f,d,x,M,I)}var b=r(f,d,m,c);if(b||(d.visible=!1),d.visible){t(f,d,m,c),c("xhoverformat"),c("yhoverformat");var g=i(f,d,m,c),w=!g&&b<y.PTS_LINESONLY?"lines+markers":"lines";c("text"),c("hovertext"),c("mode",w),e.hasLines(d)&&(h(f,d,v,m,c),s(f,d,c),c("connectgaps"),c("line.simplify")),e.hasMarkers(d)&&n(f,d,v,m,c,{gradient:!0}),e.hasText(d)&&(c("texttemplate"),a(f,d,m,c));var _=[];(e.hasMarkers(d)||e.hasText(d))&&(c("cliponaxis"),c("marker.maxdisplayed"),_.push("points")),c("fill",g?g.fillDflt:"none"),d.fill!=="none"&&(l(f,d,v,c),e.hasLines(d)||s(f,d,c));var T=(d.line||{}).color,k=(d.marker||{}).color;d.fill!=="tonext"&&d.fill!=="toself"||_.push("fills"),c("hoveron",_.join("+")||"points"),d.hoveron!=="fills"&&c("hovertemplate");var L=p.getComponentMethod("errorbars","supplyDefaults");L(f,d,T||k||v,{axis:"y"}),L(f,d,T||k||v,{axis:"x",inherit:"y"}),o.coerceSelectionMarkerOpacity(d,c)}}},{"../../lib":503,"../../registry":638,"./attributes":926,"./constants":930,"./fillcolor_defaults":934,"./line_defaults":939,"./line_shape_defaults":941,"./marker_defaults":945,"./period_defaults":946,"./stack_defaults":949,"./subtypes":951,"./text_defaults":952,"./xy_defaults":953}],934:[function(u,q,W){var o=u("../../components/color"),p=u("../../lib").isArrayOrTypedArray;q.exports=function(x,y,e,r){var t=!1;if(y.marker){var i=y.marker.color,n=(y.marker.line||{}).color;i&&!p(i)?t=i:n&&!p(n)&&(t=n)}r("fillcolor",o.addOpacity((y.line||{}).color||t||e,.5))}},{"../../components/color":366,"../../lib":503}],935:[function(u,q,W){var o=u("../../plots/cartesian/axes");q.exports=function(p,x,y){var e={},r={_fullLayout:y},t=o.getFromTrace(r,x,"x"),i=o.getFromTrace(r,x,"y");return e.xLabel=o.tickText(t,t.c2l(p.x),!0).text,e.yLabel=o.tickText(i,i.c2l(p.y),!0).text,e}},{"../../plots/cartesian/axes":554}],936:[function(u,q,W){var o=u("../../components/color"),p=u("./subtypes");q.exports=function(x,y){var e,r;if(x.mode==="lines")return(e=x.line.color)&&o.opacity(e)?e:x.fillcolor;if(x.mode==="none")return x.fill?x.fillcolor:"";var t=y.mcc||(x.marker||{}).color,i=y.mlcc||((x.marker||{}).line||{}).color;return(r=t&&o.opacity(t)?t:i&&o.opacity(i)&&(y.mlw||((x.marker||{}).line||{}).width)?i:"")?o.opacity(r)<.3?o.addOpacity(r,.3):r:(e=(x.line||{}).color)&&o.opacity(e)&&p.hasLines(x)&&x.line.width?e:x.fillcolor}},{"../../components/color":366,"./subtypes":951}],937:[function(u,q,W){var o=u("../../lib"),p=u("../../components/fx"),x=u("../../registry"),y=u("./get_trace_color"),e=u("../../components/color"),r=o.fillText;q.exports=function(t,i,n,h){var s=t.cd,a=s[0].trace,l=t.xa,f=t.ya,d=l.c2p(i),v=f.c2p(n),m=[d,v],c=a.hoveron||"",b=a.mode.indexOf("markers")!==-1?3:.5,g=!!a.xperiodalignment,w=!!a.yperiodalignment;if(c.indexOf("points")!==-1){var _=function(oe){var he=Math.max(b,oe.mrc||0),le=l.c2p(oe.x)-d,de=f.c2p(oe.y)-v;return Math.max(Math.sqrt(le*le+de*de)-he,1-b/he)},T=p.getDistanceFunction(h,function(oe){if(g){var he=l.c2p(oe.xStart),le=l.c2p(oe.xEnd);return d>=Math.min(he,le)&&d<=Math.max(he,le)?0:1/0}var de=Math.max(3,oe.mrc||0),xe=1-1/de,we=Math.abs(l.c2p(oe.x)-d);return we<de?xe*we/de:we-de+xe},function(oe){if(w){var he=f.c2p(oe.yStart),le=f.c2p(oe.yEnd);return v>=Math.min(he,le)&&v<=Math.max(he,le)?0:1/0}var de=Math.max(3,oe.mrc||0),xe=1-1/de,we=Math.abs(f.c2p(oe.y)-v);return we<de?xe*we/de:we-de+xe},_);if(p.getClosest(s,T,t),t.index!==!1){var k=s[t.index],L=l.c2p(k.x,!0),M=f.c2p(k.y,!0),I=k.mrc||1;t.index=k.i;var P=s[0].t.orientation,S=P&&(k.sNorm||k.s),E=P==="h"?S:k.orig_x!==void 0?k.orig_x:k.x,D=P==="v"?S:k.orig_y!==void 0?k.orig_y:k.y;return o.extendFlat(t,{color:y(a,k),x0:L-I,x1:L+I,xLabelVal:E,y0:M-I,y1:M+I,yLabelVal:D,spikeDistance:_(k),hovertemplate:a.hovertemplate}),r(k,a,t),x.getComponentMethod("errorbars","hoverInfo")(k,a,t),[t]}}if(c.indexOf("fills")!==-1&&a._polygons){var F,H,V,Q,K,Z,$,re,R,N=a._polygons,U=[],te=!1,j=1/0,Y=-1/0,J=1/0,ee=-1/0;for(F=0;F<N.length;F++)(V=N[F]).contains(m)&&(te=!te,U.push(V),J=Math.min(J,V.ymin),ee=Math.max(ee,V.ymax));if(te){var ne=((J=Math.max(J,0))+(ee=Math.min(ee,f._length)))/2;for(F=0;F<U.length;F++)for(Q=U[F].pts,H=1;H<Q.length;H++)(re=Q[H-1][1])>ne!=(R=Q[H][1])>=ne&&(Z=Q[H-1][0],$=Q[H][0],R-re&&(K=Z+($-Z)*(ne-re)/(R-re),j=Math.min(j,K),Y=Math.max(Y,K)));j=Math.max(j,0),Y=Math.min(Y,l._length);var se=e.defaultLine;return e.opacity(a.fillcolor)?se=a.fillcolor:e.opacity((a.line||{}).color)&&(se=a.line.color),o.extendFlat(t,{distance:t.maxHoverDistance,x0:j,x1:Y,y0:ne,y1:ne,color:se,hovertemplate:!1}),delete t.index,a.text&&!Array.isArray(a.text)?t.text=String(a.text):t.text=a.name,[t]}}}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../registry":638,"./get_trace_color":936}],938:[function(u,q,W){var o=u("./subtypes");q.exports={hasLines:o.hasLines,hasMarkers:o.hasMarkers,hasText:o.hasText,isBubble:o.isBubble,attributes:u("./attributes"),supplyDefaults:u("./defaults"),crossTraceDefaults:u("./cross_trace_defaults"),calc:u("./calc").calc,crossTraceCalc:u("./cross_trace_calc"),arraysToCalcdata:u("./arrays_to_calcdata"),plot:u("./plot"),colorbar:u("./marker_colorbar"),formatLabels:u("./format_labels"),style:u("./style").style,styleOnSelect:u("./style").styleOnSelect,hoverPoints:u("./hover"),selectPoints:u("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:u("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./arrays_to_calcdata":925,"./attributes":926,"./calc":927,"./cross_trace_calc":931,"./cross_trace_defaults":932,"./defaults":933,"./format_labels":935,"./hover":937,"./marker_colorbar":944,"./plot":947,"./select":948,"./style":950,"./subtypes":951}],939:[function(u,q,W){var o=u("../../lib").isArrayOrTypedArray,p=u("../../components/colorscale/helpers").hasColorscale,x=u("../../components/colorscale/defaults");q.exports=function(y,e,r,t,i,n){var h=(y.marker||{}).color;i("line.color",r),p(y,"line")?x(y,e,t,i,{prefix:"line.",cLetter:"c"}):i("line.color",!o(h)&&h||r),i("line.width"),(n||{}).noDash||i("line.dash")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],940:[function(u,q,W){var o=u("../../constants/numerical"),p=o.BADNUM,x=o.LOG_CLIP,y=x+.5,e=x-.5,r=u("../../lib"),t=r.segmentsIntersect,i=r.constrain,n=u("./constants");q.exports=function(h,s){var a,l,f,d,v,m,c,b,g,w,_,T,k,L,M,I,P,S,E=s.xaxis,D=s.yaxis,F=E.type==="log",H=D.type==="log",V=E._length,Q=D._length,K=s.connectGaps,Z=s.baseTolerance,$=s.shape,re=$==="linear",R=s.fill&&s.fill!=="none",N=[],U=n.minTolerance,te=h.length,j=new Array(te),Y=0;function J(Ze){var nt=h[Ze];if(!nt)return!1;var ft=s.linearized?E.l2p(nt.x):E.c2p(nt.x),xt=s.linearized?D.l2p(nt.y):D.c2p(nt.y);if(ft===p){if(F&&(ft=E.c2p(nt.x,!0)),ft===p)return!1;H&&xt===p&&(ft*=Math.abs(E._m*Q*(E._m>0?y:e)/(D._m*V*(D._m>0?y:e)))),ft*=1e3}if(xt===p){if(H&&(xt=D.c2p(nt.y,!0)),xt===p)return!1;xt*=1e3}return[ft,xt]}function ee(Ze,nt,ft,xt){var It=ft-Ze,Et=xt-nt,it=.5-Ze,rt=.5-nt,At=It*It+Et*Et,Gt=It*it+Et*rt;if(Gt>0&&Gt<At){var Qt=it*Et-rt*It;if(Qt*Qt<At)return!0}}function ne(Ze,nt){var ft=Ze[0]/V,xt=Ze[1]/Q,It=Math.max(0,-ft,ft-1,-xt,xt-1);return It&&P!==void 0&&ee(ft,xt,P,S)&&(It=0),It&&nt&&ee(ft,xt,nt[0]/V,nt[1]/Q)&&(It=0),(1+n.toleranceGrowth*It)*Z}function se(Ze,nt){var ft=Ze[0]-nt[0],xt=Ze[1]-nt[1];return Math.sqrt(ft*ft+xt*xt)}var oe,he,le,de,xe,we,be,Ae=n.maxScreensAway,fe=-V*Ae,me=V*(1+Ae),ke=-Q*Ae,Te=Q*(1+Ae),Me=[[fe,ke,me,ke],[me,ke,me,Te],[me,Te,fe,Te],[fe,Te,fe,ke]];function Oe(Ze){if(Ze[0]<fe||Ze[0]>me||Ze[1]<ke||Ze[1]>Te)return[i(Ze[0],fe,me),i(Ze[1],ke,Te)]}function Fe(Ze,nt){return Ze[0]===nt[0]&&(Ze[0]===fe||Ze[0]===me)||Ze[1]===nt[1]&&(Ze[1]===ke||Ze[1]===Te)||void 0}function qe(Ze,nt,ft){return function(xt,It){var Et=Oe(xt),it=Oe(It),rt=[];if(Et&&it&&Fe(Et,it))return rt;Et&&rt.push(Et),it&&rt.push(it);var At=2*r.constrain((xt[Ze]+It[Ze])/2,nt,ft)-((Et||xt)[Ze]+(it||It)[Ze]);return At&&((Et&&it?At>0==Et[Ze]>it[Ze]?Et:it:Et||it)[Ze]+=At),rt}}function et(Ze){var nt=Ze[0],ft=Ze[1],xt=nt===j[Y-1][0],It=ft===j[Y-1][1];if(!xt||!It)if(Y>1){var Et=nt===j[Y-2][0],it=ft===j[Y-2][1];xt&&(nt===fe||nt===me)&&Et?it?Y--:j[Y-1]=Ze:It&&(ft===ke||ft===Te)&&it?Et?Y--:j[Y-1]=Ze:j[Y++]=Ze}else j[Y++]=Ze}function ze(Ze){j[Y-1][0]!==Ze[0]&&j[Y-1][1]!==Ze[1]&&et([le,de]),et(Ze),xe=null,le=de=0}function Ue(Ze){if(P=Ze[0]/V,S=Ze[1]/Q,oe=Ze[0]<fe?fe:Ze[0]>me?me:0,he=Ze[1]<ke?ke:Ze[1]>Te?Te:0,oe||he){if(Y)if(xe){var nt=be(xe,Ze);nt.length>1&&(ze(nt[0]),j[Y++]=nt[1])}else we=be(j[Y-1],Ze)[0],j[Y++]=we;else j[Y++]=[oe||Ze[0],he||Ze[1]];var ft=j[Y-1];oe&&he&&(ft[0]!==oe||ft[1]!==he)?(xe&&(le!==oe&&de!==he?et(le&&de?(xt=xe,Et=(It=Ze)[0]-xt[0],it=(It[1]-xt[1])/Et,(xt[1]*It[0]-It[1]*xt[0])/Et>0?[it>0?fe:me,Te]:[it>0?me:fe,ke]):[le||oe,de||he]):le&&de&&et([le,de])),et([oe,he])):le-oe&&de-he&&et([oe||le,he||de]),xe=Ze,le=oe,de=he}else xe&&ze(be(xe,Ze)[0]),j[Y++]=Ze;var xt,It,Et,it}for($==="linear"||$==="spline"?be=function(Ze,nt){for(var ft=[],xt=0,It=0;It<4;It++){var Et=Me[It],it=t(Ze[0],Ze[1],nt[0],nt[1],Et[0],Et[1],Et[2],Et[3]);it&&(!xt||Math.abs(it.x-ft[0][0])>1||Math.abs(it.y-ft[0][1])>1)&&(it=[it.x,it.y],xt&&se(it,Ze)<se(ft[0],Ze)?ft.unshift(it):ft.push(it),xt++)}return ft}:$==="hv"||$==="vh"?be=function(Ze,nt){var ft=[],xt=Oe(Ze),It=Oe(nt);return xt&&It&&Fe(xt,It)||(xt&&ft.push(xt),It&&ft.push(It)),ft}:$==="hvh"?be=qe(0,fe,me):$==="vhv"&&(be=qe(1,ke,Te)),a=0;a<te;a++)if(l=J(a)){for(Y=0,xe=null,Ue(l),a++;a<te;a++){if(!(d=J(a))){if(K)continue;break}if(re&&s.simplify){var We=J(a+1);if(w=se(d,l),R&&(Y===0||Y===te-1)||!(w<ne(d,We)*U)){for(b=[(d[0]-l[0])/w,(d[1]-l[1])/w],v=l,_=w,T=L=M=0,c=!1,f=d,a++;a<h.length;a++){if(m=We,We=J(a+1),!m){if(K)continue;break}if(I=(g=[m[0]-l[0],m[1]-l[1]])[0]*b[1]-g[1]*b[0],L=Math.min(L,I),(M=Math.max(M,I))-L>ne(m,We))break;f=m,(k=g[0]*b[0]+g[1]*b[1])>_?(_=k,d=m,c=!1):k<T&&(T=k,v=m,c=!0)}if(c?(Ue(d),f!==v&&Ue(v)):(v!==l&&Ue(v),f!==d&&Ue(d)),Ue(f),a>=h.length||!m)break;Ue(m),l=m}}else Ue(d)}xe&&et([le||xe[0],de||xe[1]]),N.push(j.slice(0,Y))}return N}},{"../../constants/numerical":479,"../../lib":503,"./constants":930}],941:[function(u,q,W){q.exports=function(o,p,x){x("line.shape")==="spline"&&x("line.smoothing")}},{}],942:[function(u,q,W){var o={tonextx:1,tonexty:1,tonext:1};q.exports=function(p,x,y){var e,r,t,i,n,h={},s=!1,a=-1,l=0,f=-1;for(r=0;r<y.length;r++)(t=(e=y[r][0].trace).stackgroup||"")?t in h?n=h[t]:(n=h[t]=l,l++):e.fill in o&&f>=0?n=f:(n=f=l,l++),n<a&&(s=!0),e._groupIndex=a=n;var d=y.slice();s&&d.sort(function(m,c){var b=m[0].trace,g=c[0].trace;return b._groupIndex-g._groupIndex||b.index-g.index});var v={};for(r=0;r<d.length;r++)t=(e=d[r][0].trace).stackgroup||"",e.visible===!0?(e._nexttrace=null,e.fill in o&&(i=v[t],e._prevtrace=i||null,i&&(i._nexttrace=e)),e._ownfill=e.fill&&(e.fill.substr(0,6)==="tozero"||e.fill==="toself"||e.fill.substr(0,2)==="to"&&!e._prevtrace),v[t]=e):e._prevtrace=e._nexttrace=e._ownfill=null;return d}},{}],943:[function(u,q,W){var o=u("fast-isnumeric");q.exports=function(p,x){x||(x=2);var y=p.marker,e=y.sizeref||1,r=y.sizemin||0,t=y.sizemode==="area"?function(i){return Math.sqrt(i/e)}:function(i){return i/e};return function(i){var n=t(i/x);return o(n)&&n>0?Math.max(n,r):0}}},{"fast-isnumeric":190}],944:[function(u,q,W){q.exports={container:"marker",min:"cmin",max:"cmax"}},{}],945:[function(u,q,W){var o=u("../../components/color"),p=u("../../components/colorscale/helpers").hasColorscale,x=u("../../components/colorscale/defaults"),y=u("./subtypes");q.exports=function(e,r,t,i,n,h){var s=y.isBubble(e),a=(e.line||{}).color;h=h||{},a&&(t=a),n("marker.symbol"),n("marker.opacity",s?.7:1),n("marker.size"),n("marker.color",t),p(e,"marker")&&x(e,r,i,n,{prefix:"marker.",cLetter:"c"}),h.noSelect||(n("selected.marker.color"),n("unselected.marker.color"),n("selected.marker.size"),n("unselected.marker.size")),h.noLine||(n("marker.line.color",a&&!Array.isArray(a)&&r.marker.color!==a?a:s?o.background:o.defaultLine),p(e,"marker.line")&&x(e,r,i,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width",s?1:0)),s&&(n("marker.sizeref"),n("marker.sizemin"),n("marker.sizemode")),h.gradient&&n("marker.gradient.type")!=="none"&&n("marker.gradient.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"./subtypes":951}],946:[function(u,q,W){var o=u("../../lib").dateTick0,p=u("../../constants/numerical").ONEWEEK;function x(y,e){return o(e,y%p==0?1:0)}q.exports=function(y,e,r,t,i){if(i||(i={x:!0,y:!0}),i.x){var n=t("xperiod");n&&(t("xperiod0",x(n,e.xcalendar)),t("xperiodalignment"))}if(i.y){var h=t("yperiod");h&&(t("yperiod0",x(h,e.ycalendar)),t("yperiodalignment"))}}},{"../../constants/numerical":479,"../../lib":503}],947:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../registry"),x=u("../../lib"),y=x.ensureSingle,e=x.identity,r=u("../../components/drawing"),t=u("./subtypes"),i=u("./line_points"),n=u("./link_traces"),h=u("../../lib/polygon").tester;function s(a,l,f,d,v,m,c){var b;(function(me,ke,Te,Me,Oe){var Fe=Te.xaxis,qe=Te.yaxis,et=o.extent(x.simpleMap(Fe.range,Fe.r2c)),ze=o.extent(x.simpleMap(qe.range,qe.r2c)),Ue=Me[0].trace;if(!!t.hasMarkers(Ue)){var We=Ue.marker.maxdisplayed;if(We!==0){var Ze=Me.filter(function(It){return It.x>=et[0]&&It.x<=et[1]&&It.y>=ze[0]&&It.y<=ze[1]}),nt=Math.ceil(Ze.length/We),ft=0;Oe.forEach(function(It,Et){var it=It[0].trace;t.hasMarkers(it)&&it.marker.maxdisplayed>0&&Et<ke&&ft++});var xt=Math.round(ft*nt/3+Math.floor(ft/3)*nt/7.1);Me.forEach(function(It){delete It.vis}),Ze.forEach(function(It,Et){Math.round((Et+xt)%nt)===0&&(It.vis=!0)})}}})(0,l,f,d,v);var g=!!c&&c.duration>0;function w(me){return g?me.transition():me}var _=f.xaxis,T=f.yaxis,k=d[0].trace,L=k.line,M=o.select(m),I=y(M,"g","errorbars"),P=y(M,"g","lines"),S=y(M,"g","points"),E=y(M,"g","text");if(p.getComponentMethod("errorbars","plot")(a,I,f,c),k.visible===!0){var D,F;w(M).style("opacity",k.opacity);var H=k.fill.charAt(k.fill.length-1);H!=="x"&&H!=="y"&&(H=""),d[0][f.isRangePlot?"nodeRangePlot3":"node3"]=M;var V,Q,K="",Z=[],$=k._prevtrace;$&&(K=$._prevRevpath||"",F=$._nextFill,Z=$._polygons);var re,R,N,U,te,j,Y,J="",ee="",ne=[],se=x.noop;if(D=k._ownFill,t.hasLines(k)||k.fill!=="none"){for(F&&F.datum(d),["hv","vh","hvh","vhv"].indexOf(L.shape)!==-1?(re=r.steps(L.shape),R=r.steps(L.shape.split("").reverse().join(""))):re=R=L.shape==="spline"?function(me){var ke=me[me.length-1];return me.length>1&&me[0][0]===ke[0]&&me[0][1]===ke[1]?r.smoothclosed(me.slice(1),L.smoothing):r.smoothopen(me,L.smoothing)}:function(me){return"M"+me.join("L")},N=function(me){return R(me.reverse())},ne=i(d,{xaxis:_,yaxis:T,connectGaps:k.connectgaps,baseTolerance:Math.max(L.width||1,3)/4,shape:L.shape,simplify:L.simplify,fill:k.fill}),Y=k._polygons=new Array(ne.length),b=0;b<ne.length;b++)k._polygons[b]=h(ne[b]);ne.length&&(U=ne[0][0],j=(te=ne[ne.length-1])[te.length-1]),se=function(me){return function(ke){if(V=re(ke),Q=N(ke),J?H?(J+="L"+V.substr(1),ee=Q+"L"+ee.substr(1)):(J+="Z"+V,ee=Q+"Z"+ee):(J=V,ee=Q),t.hasLines(k)&&ke.length>1){var Te=o.select(this);if(Te.datum(d),me)w(Te.style("opacity",0).attr("d",V).call(r.lineGroupStyle)).style("opacity",1);else{var Me=w(Te);Me.attr("d",V),r.singleLineStyle(d,Me)}}}}}var oe=P.selectAll(".js-line").data(ne);w(oe.exit()).style("opacity",0).remove(),oe.each(se(!1)),oe.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(r.lineGroupStyle).each(se(!0)),r.setClipUrl(oe,f.layerClipId,a),ne.length?(D?(D.datum(d),U&&j&&(H?(H==="y"?U[1]=j[1]=T.c2p(0,!0):H==="x"&&(U[0]=j[0]=_.c2p(0,!0)),w(D).attr("d","M"+j+"L"+U+"L"+J.substr(1)).call(r.singleFillStyle)):w(D).attr("d",J+"Z").call(r.singleFillStyle))):F&&(k.fill.substr(0,6)==="tonext"&&J&&K?(k.fill==="tonext"?w(F).attr("d",J+"Z"+K+"Z").call(r.singleFillStyle):w(F).attr("d",J+"L"+K.substr(1)+"Z").call(r.singleFillStyle),k._polygons=k._polygons.concat(Z)):(le(F),k._polygons=null)),k._prevRevpath=ee,k._prevPolygons=Y):(D?le(D):F&&le(F),k._polygons=k._prevRevpath=k._prevPolygons=null),S.datum(d),E.datum(d),function(me,ke,Te){var Me,Oe=Te[0].trace,Fe=t.hasMarkers(Oe),qe=t.hasText(Oe),et=Ae(Oe),ze=fe,Ue=fe;if(Fe||qe){var We=e,Ze=Oe.stackgroup,nt=Ze&&a._fullLayout._scatterStackOpts[_._id+T._id][Ze].stackgaps==="infer zero";Oe.marker.maxdisplayed||Oe._needsCull?We=nt?xe:de:Ze&&!nt&&(We=we),Fe&&(ze=We),qe&&(Ue=We)}var ft,xt=(Me=me.selectAll("path.point").data(ze,et)).enter().append("path").classed("point",!0);g&&xt.call(r.pointStyle,Oe,a).call(r.translatePoints,_,T).style("opacity",0).transition().style("opacity",1),Me.order(),Fe&&(ft=r.makePointStyleFns(Oe)),Me.each(function(It){var Et=o.select(this),it=w(Et);r.translatePoint(It,it,_,T)?(r.singlePointStyle(It,it,Oe,ft,a),f.layerClipId&&r.hideOutsideRangePoint(It,it,_,T,Oe.xcalendar,Oe.ycalendar),Oe.customdata&&Et.classed("plotly-customdata",It.data!==null&&It.data!==void 0)):it.remove()}),g?Me.exit().transition().style("opacity",0).remove():Me.exit().remove(),(Me=ke.selectAll("g").data(Ue,et)).enter().append("g").classed("textpoint",!0).append("text"),Me.order(),Me.each(function(It){var Et=o.select(this),it=w(Et.select("text"));r.translatePoint(It,it,_,T)?f.layerClipId&&r.hideOutsideRangePoint(It,Et,_,T,Oe.xcalendar,Oe.ycalendar):Et.remove()}),Me.selectAll("text").call(r.textPointStyle,Oe,a).each(function(It){var Et=_.c2p(It.x),it=T.c2p(It.y);o.select(this).selectAll("tspan.line").each(function(){w(o.select(this)).attr({x:Et,y:it})})}),Me.exit().remove()}(S,E,d);var he=k.cliponaxis===!1?null:f.layerClipId;r.setClipUrl(S,he,a),r.setClipUrl(E,he,a)}function le(me){w(me).attr("d","M0,0Z")}function de(me){return me.filter(function(ke){return!ke.gap&&ke.vis})}function xe(me){return me.filter(function(ke){return ke.vis})}function we(me){return me.filter(function(ke){return!ke.gap})}function be(me){return me.id}function Ae(me){if(me.ids)return be}function fe(){return!1}}q.exports=function(a,l,f,d,v,m){var c,b,g=!v,w=!!v&&v.duration>0,_=n(a,l,f);(c=d.selectAll("g.trace").data(_,function(T){return T[0].trace.uid})).enter().append("g").attr("class",function(T){return"trace scatter trace"+T[0].trace.uid}).style("stroke-miterlimit",2),c.order(),function(T,k,L){k.each(function(M){var I=y(o.select(this),"g","fills");r.setClipUrl(I,L.layerClipId,T);var P=M[0].trace,S=[];P._ownfill&&S.push("_ownFill"),P._nexttrace&&S.push("_nextFill");var E=I.selectAll("g").data(S,e);E.enter().append("g"),E.exit().each(function(D){P[D]=null}).remove(),E.order().each(function(D){P[D]=y(o.select(this),"path","js-fill")})})}(a,c,l),w?(m&&(b=m()),o.transition().duration(v.duration).ease(v.easing).each("end",function(){b&&b()}).each("interrupt",function(){b&&b()}).each(function(){d.selectAll("g.trace").each(function(T,k){s(a,k,l,T,_,this,v)})})):c.each(function(T,k){s(a,k,l,T,_,this,v)}),g&&c.exit().remove(),d.selectAll("path:not([d])").remove()}},{"../../components/drawing":388,"../../lib":503,"../../lib/polygon":515,"../../registry":638,"./line_points":940,"./link_traces":942,"./subtypes":951,"@plotly/d3":58}],948:[function(u,q,W){var o=u("./subtypes");q.exports=function(p,x){var y,e,r,t,i=p.cd,n=p.xaxis,h=p.yaxis,s=[],a=i[0].trace;if(!o.hasMarkers(a)&&!o.hasText(a))return[];if(x===!1)for(y=0;y<i.length;y++)i[y].selected=0;else for(y=0;y<i.length;y++)e=i[y],r=n.c2p(e.x),t=h.c2p(e.y),e.i!==null&&x.contains([r,t],!1,y,p)?(s.push({pointNumber:e.i,x:n.c2d(e.x),y:h.c2d(e.y)}),e.selected=1):e.selected=0;return s}},{"./subtypes":951}],949:[function(u,q,W){var o=["orientation","groupnorm","stackgaps"];q.exports=function(p,x,y,e){var r=y._scatterStackOpts,t=e("stackgroup");if(t){var i=x.xaxis+x.yaxis,n=r[i];n||(n=r[i]={});var h=n[t],s=!1;h?h.traces.push(x):(h=n[t]={traceIndices:[],traces:[x]},s=!0);for(var a={orientation:x.x&&!x.y?"h":"v"},l=0;l<o.length;l++){var f=o[l],d=f+"Found";if(!h[d]){var v=p[f]!==void 0,m=f==="orientation";if((v||s)&&(h[f]=e(f,a[f]),m&&(h.fillDflt=h[f]==="h"?"tonextx":"tonexty"),v&&(h[d]=!0,!s&&(delete h.traces[0][f],m))))for(var c=0;c<h.traces.length-1;c++){var b=h.traces[c];b._input.fill!==b.fill&&(b.fill=h.fillDflt)}}}return h}}},{}],950:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../components/drawing"),x=u("../../registry");function y(r,t,i){p.pointStyle(r.selectAll("path.point"),t,i)}function e(r,t,i){p.textPointStyle(r.selectAll("text"),t,i)}q.exports={style:function(r){var t=o.select(r).selectAll("g.trace.scatter");t.style("opacity",function(i){return i[0].trace.opacity}),t.selectAll("g.points").each(function(i){y(o.select(this),i.trace||i[0].trace,r)}),t.selectAll("g.text").each(function(i){e(o.select(this),i.trace||i[0].trace,r)}),t.selectAll("g.trace path.js-line").call(p.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(p.fillGroupStyle),x.getComponentMethod("errorbars","style")(t)},stylePoints:y,styleText:e,styleOnSelect:function(r,t,i){var n=t[0].trace;n.selectedpoints?(p.selectedPointStyle(i.selectAll("path.point"),n),p.selectedTextStyle(i.selectAll("text"),n)):(y(i,n,r),e(i,n,r))}}},{"../../components/drawing":388,"../../registry":638,"@plotly/d3":58}],951:[function(u,q,W){var o=u("../../lib");q.exports={hasLines:function(p){return p.visible&&p.mode&&p.mode.indexOf("lines")!==-1},hasMarkers:function(p){return p.visible&&(p.mode&&p.mode.indexOf("markers")!==-1||p.type==="splom")},hasText:function(p){return p.visible&&p.mode&&p.mode.indexOf("text")!==-1},isBubble:function(p){return o.isPlainObject(p.marker)&&o.isArrayOrTypedArray(p.marker.size)}}},{"../../lib":503}],952:[function(u,q,W){var o=u("../../lib");q.exports=function(p,x,y,e,r){r=r||{},e("textposition"),o.coerceFont(e,"textfont",y.font),r.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":503}],953:[function(u,q,W){var o=u("../../lib"),p=u("../../registry");q.exports=function(x,y,e,r){var t,i=r("x"),n=r("y");if(p.getComponentMethod("calendars","handleTraceDefaults")(x,y,["x","y"],e),i){var h=o.minRowLength(i);n?t=Math.min(h,o.minRowLength(n)):(t=h,r("y0"),r("dy"))}else{if(!n)return 0;t=o.minRowLength(n),r("x0"),r("dx")}return y._length=t,t}},{"../../lib":503,"../../registry":638}],954:[function(u,q,W){var o=u("../scatter/attributes"),p=u("../../components/colorscale/attributes"),x=u("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=u("../../plots/template_attributes").hovertemplateAttrs,e=u("../../plots/template_attributes").texttemplateAttrs,r=u("../../plots/attributes"),t=u("../../constants/gl3d_dashes"),i=u("../../constants/gl3d_markers"),n=u("../../lib/extend").extendFlat,h=u("../../plot_api/edit_types").overrideAll,s=u("../../lib/sort_object_keys"),a=o.line,l=o.marker,f=l.line,d=n({width:a.width,dash:{valType:"enumerated",values:s(t),dflt:"solid"}},p("line")),v=q.exports=h({x:o.x,y:o.y,z:{valType:"data_array"},text:n({},o.text,{}),texttemplate:e({},{}),hovertext:n({},o.hovertext,{}),hovertemplate:y(),xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z"),mode:n({},o.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:o.connectgaps,line:d,marker:n({symbol:{valType:"enumerated",values:s(i),dflt:"circle",arrayOk:!0},size:n({},l.size,{dflt:8}),sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,opacity:n({},l.opacity,{arrayOk:!1}),colorbar:l.colorbar,line:n({width:n({},f.width,{arrayOk:!1})},p("marker.line"))},p("marker")),textposition:n({},o.textposition,{dflt:"top center"}),textfont:{color:o.textfont.color,size:o.textfont.size,family:n({},o.textfont.family,{arrayOk:!1})},opacity:r.opacity,hoverinfo:n({},r.hoverinfo)},"calc","nested");v.x.editType=v.y.editType=v.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":373,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../scatter/attributes":926}],955:[function(u,q,W){var o=u("../scatter/arrays_to_calcdata"),p=u("../scatter/colorscale_calc");q.exports=function(x,y){var e=[{x:!1,y:!1,trace:y,t:{}}];return o(e,y),p(x,y),e}},{"../scatter/arrays_to_calcdata":925,"../scatter/colorscale_calc":929}],956:[function(u,q,W){var o=u("../../registry");function p(x,y,e,r){if(!y||!y.visible)return null;for(var t=o.getComponentMethod("errorbars","makeComputeError")(y),i=new Array(x.length),n=0;n<x.length;n++){var h=t(+x[n],n);if(r.type==="log"){var s=r.c2l(x[n]),a=x[n]-h[0],l=x[n]+h[1];if(i[n]=[(r.c2l(a,!0)-s)*e,(r.c2l(l,!0)-s)*e],a>0){var f=r.c2l(a);r._lowerLogErrorBound||(r._lowerLogErrorBound=f),r._lowerErrorBound=Math.min(r._lowerLogErrorBound,f)}}else i[n]=[-h[0]*e,h[1]*e]}return i}q.exports=function(x,y,e){var r=[p(x.x,x.error_x,y[0],e.xaxis),p(x.y,x.error_y,y[1],e.yaxis),p(x.z,x.error_z,y[2],e.zaxis)],t=function(l){for(var f=0;f<l.length;f++)if(l[f])return l[f].length;return 0}(r);if(t===0)return null;for(var i=new Array(t),n=0;n<t;n++){for(var h=[[0,0,0],[0,0,0]],s=0;s<3;s++)if(r[s])for(var a=0;a<2;a++)h[a][s]=r[s][n][a];i[n]=h}return i}},{"../../registry":638}],957:[function(u,q,W){var o=u("../../../stackgl_modules").gl_line3d,p=u("../../../stackgl_modules").gl_scatter3d,x=u("../../../stackgl_modules").gl_error3d,y=u("../../../stackgl_modules").gl_mesh3d,e=u("../../../stackgl_modules").delaunay_triangulate,r=u("../../lib"),t=u("../../lib/str2rgbarray"),i=u("../../lib/gl_format_color").formatColor,n=u("../scatter/make_bubble_size_func"),h=u("../../constants/gl3d_dashes"),s=u("../../constants/gl3d_markers"),a=u("../../plots/cartesian/axes"),l=u("../../components/fx/helpers").appendArrayPointValue,f=u("./calc_errors");function d(L,M){this.scene=L,this.uid=M,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var v=d.prototype;function m(L){return L==null?0:L.indexOf("left")>-1?-1:L.indexOf("right")>-1?1:0}function c(L){return L==null?0:L.indexOf("top")>-1?-1:L.indexOf("bottom")>-1?1:0}function b(L,M){return M(4*L)}function g(L){return s[L]}function w(L,M,I,P,S){var E=null;if(r.isArrayOrTypedArray(L)){E=[];for(var D=0;D<M;D++)L[D]===void 0?E[D]=P:E[D]=I(L[D],S)}else E=I(L,r.identity);return E}function _(L,M){var I,P,S,E,D,F,H=[],V=L.fullSceneLayout,Q=L.dataScale,K=V.xaxis,Z=V.yaxis,$=V.zaxis,re=M.marker,R=M.line,N=M.x||[],U=M.y||[],te=M.z||[],j=N.length,Y=M.xcalendar,J=M.ycalendar,ee=M.zcalendar;for(D=0;D<j;D++)I=K.d2l(N[D],0,Y)*Q[0],P=Z.d2l(U[D],0,J)*Q[1],S=$.d2l(te[D],0,ee)*Q[2],H[D]=[I,P,S];if(Array.isArray(M.text))F=M.text;else if(M.text!==void 0)for(F=new Array(j),D=0;D<j;D++)F[D]=M.text;function ne(Me,Oe){var Fe=V[Me];return a.tickText(Fe,Fe.d2l(Oe),!0).text}var se=M.texttemplate;if(se){var oe=L.fullLayout._d3locale,he=Array.isArray(se),le=he?Math.min(se.length,j):j,de=he?function(Me){return se[Me]}:function(){return se};for(F=new Array(le),D=0;D<le;D++){var xe={x:N[D],y:U[D],z:te[D]},we={xLabel:ne("xaxis",N[D]),yLabel:ne("yaxis",U[D]),zLabel:ne("zaxis",te[D])},be={};l(be,M,D);var Ae=M._meta||{};F[D]=r.texttemplateString(de(D),we,oe,be,xe,Ae)}}if(E={position:H,mode:M.mode,text:F},"line"in M&&(E.lineColor=i(R,1,j),E.lineWidth=R.width,E.lineDashes=R.dash),"marker"in M){var fe=n(M);E.scatterColor=i(re,1,j),E.scatterSize=w(re.size,j,b,20,fe),E.scatterMarker=w(re.symbol,j,g,"\u25CF"),E.scatterLineWidth=re.line.width,E.scatterLineColor=i(re.line,1,j),E.scatterAngle=0}"textposition"in M&&(E.textOffset=function(Me){var Oe=[0,0];if(Array.isArray(Me))for(var Fe=0;Fe<Me.length;Fe++)Oe[Fe]=[0,0],Me[Fe]&&(Oe[Fe][0]=m(Me[Fe]),Oe[Fe][1]=c(Me[Fe]));else Oe[0]=m(Me),Oe[1]=c(Me);return Oe}(M.textposition),E.textColor=i(M.textfont,1,j),E.textSize=w(M.textfont.size,j,r.identity,12),E.textFont=M.textfont.family,E.textAngle=0);var me=["x","y","z"];for(E.project=[!1,!1,!1],E.projectScale=[1,1,1],E.projectOpacity=[1,1,1],D=0;D<3;++D){var ke=M.projection[me[D]];(E.project[D]=ke.show)&&(E.projectOpacity[D]=ke.opacity,E.projectScale[D]=ke.scale)}E.errorBounds=f(M,Q,V);var Te=function(Me){for(var Oe=[0,0,0],Fe=[[0,0,0],[0,0,0],[0,0,0]],qe=[1,1,1],et=0;et<3;et++){var ze=Me[et];ze&&ze.copy_zstyle!==!1&&Me[2].visible!==!1&&(ze=Me[2]),ze&&ze.visible&&(Oe[et]=ze.width/2,Fe[et]=t(ze.color),qe[et]=ze.thickness)}return{capSize:Oe,color:Fe,lineWidth:qe}}([M.error_x,M.error_y,M.error_z]);return E.errorColor=Te.color,E.errorLineWidth=Te.lineWidth,E.errorCapSize=Te.capSize,E.delaunayAxis=M.surfaceaxis,E.delaunayColor=t(M.surfacecolor),E}function T(L){if(r.isArrayOrTypedArray(L)){var M=L[0];return r.isArrayOrTypedArray(M)&&(L=M),"rgb("+L.slice(0,3).map(function(I){return Math.round(255*I)})+")"}return null}function k(L){return r.isArrayOrTypedArray(L)?L.length===4&&typeof L[0]=="number"?T(L):L.map(T):null}v.handlePick=function(L){if(L.object&&(L.object===this.linePlot||L.object===this.delaunayMesh||L.object===this.textMarkers||L.object===this.scatterPlot)){var M=L.index=L.data.index;return L.object.highlight&&L.object.highlight(null),this.scatterPlot&&(L.object=this.scatterPlot,this.scatterPlot.highlight(L.data)),L.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[M]||this.textLabels[M]===0)&&(L.textLabel=this.textLabels[M]):L.textLabel=this.textLabels),L.traceCoordinate=[this.data.x[M],this.data.y[M],this.data.z[M]],!0}},v.update=function(L){var M,I,P,S,E=this.scene.glplot.gl,D=h.solid;this.data=L;var F=_(this.scene,L);"mode"in F&&(this.mode=F.mode),"lineDashes"in F&&F.lineDashes in h&&(D=h[F.lineDashes]),this.color=k(F.scatterColor)||k(F.lineColor),this.dataPoints=F.position,M={gl:this.scene.glplot.gl,position:F.position,color:F.lineColor,lineWidth:F.lineWidth||1,dashes:D[0],dashScale:D[1],opacity:L.opacity,connectGaps:L.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(M):(this.linePlot=o(M),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var H=L.opacity;if(L.marker&&L.marker.opacity&&(H*=L.marker.opacity),I={gl:this.scene.glplot.gl,position:F.position,color:F.scatterColor,size:F.scatterSize,glyph:F.scatterMarker,opacity:H,orthographic:!0,lineWidth:F.scatterLineWidth,lineColor:F.scatterLineColor,project:F.project,projectScale:F.projectScale,projectOpacity:F.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(I):(this.scatterPlot=p(I),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),S={gl:this.scene.glplot.gl,position:F.position,glyph:F.text,color:F.textColor,size:F.textSize,angle:F.textAngle,alignment:F.textOffset,font:F.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:L.opacity},this.textLabels=L.hovertext||L.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(S):(this.textMarkers=p(S),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),P={gl:this.scene.glplot.gl,position:F.position,color:F.errorColor,error:F.errorBounds,lineWidth:F.errorLineWidth,capSize:F.errorCapSize,opacity:L.opacity},this.errorBars?F.errorBounds?this.errorBars.update(P):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):F.errorBounds&&(this.errorBars=x(P),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),F.delaunayAxis>=0){var V=function(Q,K,Z){var $,re=(Z+1)%3,R=(Z+2)%3,N=[],U=[];for($=0;$<Q.length;++$){var te=Q[$];!isNaN(te[re])&&isFinite(te[re])&&!isNaN(te[R])&&isFinite(te[R])&&(N.push([te[re],te[R]]),U.push($))}var j=e(N);for($=0;$<j.length;++$)for(var Y=j[$],J=0;J<Y.length;++J)Y[J]=U[Y[J]];return{positions:Q,cells:j,meshColor:K}}(F.position,F.delaunayColor,F.delaunayAxis);V.opacity=L.opacity,this.delaunayMesh?this.delaunayMesh.update(V):(V.gl=E,this.delaunayMesh=y(V),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},v.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},q.exports=function(L,M){var I=new d(L,M.uid);return I.update(M),I}},{"../../../stackgl_modules":1120,"../../components/fx/helpers":402,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../scatter/make_bubble_size_func":943,"./calc_errors":956}],958:[function(u,q,W){var o=u("../../registry"),p=u("../../lib"),x=u("../scatter/subtypes"),y=u("../scatter/marker_defaults"),e=u("../scatter/line_defaults"),r=u("../scatter/text_defaults"),t=u("./attributes");q.exports=function(i,n,h,s){function a(b,g){return p.coerce(i,n,t,b,g)}if(function(b,g,w,_){var T=0,k=w("x"),L=w("y"),M=w("z");return o.getComponentMethod("calendars","handleTraceDefaults")(b,g,["x","y","z"],_),k&&L&&M&&(T=Math.min(k.length,L.length,M.length),g._length=g._xlength=g._ylength=g._zlength=T),T}(i,n,a,s)){a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),a("mode"),x.hasLines(n)&&(a("connectgaps"),e(i,n,h,s,a)),x.hasMarkers(n)&&y(i,n,h,s,a,{noSelect:!0}),x.hasText(n)&&(a("texttemplate"),r(i,n,s,a,{noSelect:!0}));var l=(n.line||{}).color,f=(n.marker||{}).color;a("surfaceaxis")>=0&&a("surfacecolor",l||f);for(var d=["x","y","z"],v=0;v<3;++v){var m="projection."+d[v];a(m+".show")&&(a(m+".opacity"),a(m+".scale"))}var c=o.getComponentMethod("errorbars","supplyDefaults");c(i,n,l||f||h,{axis:"z"}),c(i,n,l||f||h,{axis:"y",inherit:"z"}),c(i,n,l||f||h,{axis:"x",inherit:"z"})}else n.visible=!1}},{"../../lib":503,"../../registry":638,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":954}],959:[function(u,q,W){q.exports={plot:u("./convert"),attributes:u("./attributes"),markerSymbols:u("../../constants/gl3d_markers"),supplyDefaults:u("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:u("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:u("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":477,"../../plots/gl3d":598,"./attributes":954,"./calc":955,"./convert":957,"./defaults":958}],960:[function(u,q,W){var o=u("../scatter/attributes"),p=u("../../plots/attributes"),x=u("../../plots/template_attributes").hovertemplateAttrs,y=u("../../plots/template_attributes").texttemplateAttrs,e=u("../../components/colorscale/attributes"),r=u("../../lib/extend").extendFlat,t=o.marker,i=o.line,n=t.line;q.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:r({},o.mode,{dflt:"markers"}),text:r({},o.text,{}),texttemplate:y({editType:"plot"},{keys:["a","b","text"]}),hovertext:r({},o.hovertext,{}),line:{color:i.color,width:i.width,dash:i.dash,shape:r({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:o.connectgaps,fill:r({},o.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:o.fillcolor,marker:r({symbol:t.symbol,opacity:t.opacity,maxdisplayed:t.maxdisplayed,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:r({width:n.width,editType:"calc"},e("marker.line")),gradient:t.gradient,editType:"calc"},e("marker")),textfont:o.textfont,textposition:o.textposition,selected:o.selected,unselected:o.unselected,hoverinfo:r({},p.hoverinfo,{flags:["a","b","text","name"]}),hoveron:o.hoveron,hovertemplate:x()}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],961:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../scatter/colorscale_calc"),x=u("../scatter/arrays_to_calcdata"),y=u("../scatter/calc_selection"),e=u("../scatter/calc").calcMarkerSize,r=u("../carpet/lookup_carpetid");q.exports=function(t,i){var n=i._carpetTrace=r(t,i);if(n&&n.visible&&n.visible!=="legendonly"){var h;i.xaxis=n.xaxis,i.yaxis=n.yaxis;var s,a,l=i._length,f=new Array(l),d=!1;for(h=0;h<l;h++)if(s=i.a[h],a=i.b[h],o(s)&&o(a)){var v=n.ab2xy(+s,+a,!0),m=n.isVisible(+s,+a);m||(d=!0),f[h]={x:v[0],y:v[1],a:s,b:a,vis:m}}else f[h]={x:!1,y:!1};return i._needsCull=d,f[0].carpet=n,f[0].trace=i,e(i,l),p(t,i),x(f,i),y(f,i),f}}},{"../carpet/lookup_carpetid":708,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],962:[function(u,q,W){var o=u("../../lib"),p=u("../scatter/constants"),x=u("../scatter/subtypes"),y=u("../scatter/marker_defaults"),e=u("../scatter/line_defaults"),r=u("../scatter/line_shape_defaults"),t=u("../scatter/text_defaults"),i=u("../scatter/fillcolor_defaults"),n=u("./attributes");q.exports=function(h,s,a,l){function f(b,g){return o.coerce(h,s,n,b,g)}f("carpet"),s.xaxis="x",s.yaxis="y";var d=f("a"),v=f("b"),m=Math.min(d.length,v.length);if(m){s._length=m,f("text"),f("texttemplate"),f("hovertext"),f("mode",m<p.PTS_LINESONLY?"lines+markers":"lines"),x.hasLines(s)&&(e(h,s,a,l,f),r(h,s,f),f("connectgaps")),x.hasMarkers(s)&&y(h,s,a,l,f,{gradient:!0}),x.hasText(s)&&t(h,s,l,f);var c=[];(x.hasMarkers(s)||x.hasText(s))&&(f("marker.maxdisplayed"),c.push("points")),f("fill"),s.fill!=="none"&&(i(h,s,a,f),x.hasLines(s)||r(h,s,f)),s.fill!=="tonext"&&s.fill!=="toself"||c.push("fills"),f("hoveron",c.join("+")||"points")!=="fills"&&f("hovertemplate"),o.coerceSelectionMarkerOpacity(s,f)}else s.visible=!1}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":960}],963:[function(u,q,W){q.exports=function(o,p,x,y,e){var r=y[e];return o.a=r.a,o.b=r.b,o.y=r.y,o}},{}],964:[function(u,q,W){q.exports=function(o,p){var x={},y=p._carpet,e=y.ab2ij([o.a,o.b]),r=Math.floor(e[0]),t=e[0]-r,i=Math.floor(e[1]),n=e[1]-i,h=y.evalxy([],r,i,t,n);return x.yLabel=h[1].toFixed(3),x}},{}],965:[function(u,q,W){var o=u("../scatter/hover"),p=u("../../lib").fillText;q.exports=function(x,y,e,r){var t=o(x,y,e,r);if(t&&t[0].index!==!1){var i=t[0];if(i.index===void 0){var n=1-i.y0/x.ya._length,h=x.xa._length,s=h*n/2,a=h-s;return i.x0=Math.max(Math.min(i.x0,a),s),i.x1=Math.max(Math.min(i.x1,a),s),t}var l=i.cd[i.index];i.a=l.a,i.b=l.b,i.xLabelVal=void 0,i.yLabelVal=void 0;var f=i.trace,d=f._carpet,v=f._module.formatLabels(l,f);i.yLabel=v.yLabel,delete i.text;var m=[];if(!f.hovertemplate){var c=(l.hi||f.hoverinfo).split("+");c.indexOf("all")!==-1&&(c=["a","b","text"]),c.indexOf("a")!==-1&&b(d.aaxis,l.a),c.indexOf("b")!==-1&&b(d.baxis,l.b),m.push("y: "+i.yLabel),c.indexOf("text")!==-1&&p(l,f,m),i.extraText=m.join("<br>")}return t}function b(g,w){var _;_=g.labelprefix&&g.labelprefix.length>0?g.labelprefix.replace(/ = $/,""):g._hovertitle,m.push(_+": "+w.toFixed(3)+g.labelsuffix)}}},{"../../lib":503,"../scatter/hover":937}],966:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults"),colorbar:u("../scatter/marker_colorbar"),formatLabels:u("./format_labels"),calc:u("./calc"),plot:u("./plot"),style:u("../scatter/style").style,styleOnSelect:u("../scatter/style").styleOnSelect,hoverPoints:u("./hover"),selectPoints:u("../scatter/select"),eventData:u("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:u("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":960,"./calc":961,"./defaults":962,"./event_data":963,"./format_labels":964,"./hover":965,"./plot":967}],967:[function(u,q,W){var o=u("../scatter/plot"),p=u("../../plots/cartesian/axes"),x=u("../../components/drawing");q.exports=function(y,e,r,t){var i,n,h,s=r[0][0].carpet,a={xaxis:p.getFromId(y,s.xaxis||"x"),yaxis:p.getFromId(y,s.yaxis||"y"),plot:e.plot};for(o(y,a,r,t),i=0;i<r.length;i++)n=r[i][0].trace,h=t.selectAll("g.trace"+n.uid+" .js-line"),x.setClipUrl(h,r[i][0].carpet._clipPathId,y)}},{"../../components/drawing":388,"../../plots/cartesian/axes":554,"../scatter/plot":947}],968:[function(u,q,W){var o=u("../../plots/template_attributes").hovertemplateAttrs,p=u("../../plots/template_attributes").texttemplateAttrs,x=u("../scatter/attributes"),y=u("../../plots/attributes"),e=u("../../components/colorscale/attributes"),r=u("../../components/drawing/attributes").dash,t=u("../../lib/extend").extendFlat,i=u("../../plot_api/edit_types").overrideAll,n=x.marker,h=x.line,s=n.line;q.exports=i({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:t({},x.mode,{dflt:"markers"}),text:t({},x.text,{}),texttemplate:p({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:t({},x.hovertext,{}),textfont:x.textfont,textposition:x.textposition,line:{color:h.color,width:h.width,dash:r},connectgaps:x.connectgaps,marker:t({symbol:n.symbol,opacity:n.opacity,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,colorbar:n.colorbar,line:t({width:s.width},e("marker.line")),gradient:n.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:x.fillcolor,selected:x.selected,unselected:x.unselected,hoverinfo:t({},y.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:o()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],969:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../constants/numerical").BADNUM,x=u("../scatter/colorscale_calc"),y=u("../scatter/arrays_to_calcdata"),e=u("../scatter/calc_selection"),r=u("../../lib")._;function t(i){return i&&typeof i=="string"}q.exports=function(i,n){var h,s=Array.isArray(n.locations),a=s?n.locations.length:n._length,l=new Array(a);h=n.geojson?function(b){return t(b)||o(b)}:t;for(var f=0;f<a;f++){var d=l[f]={};if(s){var v=n.locations[f];d.loc=h(v)?v:null}else{var m=n.lon[f],c=n.lat[f];o(m)&&o(c)?d.lonlat=[+m,+c]:d.lonlat=[p,p]}}return y(l,n),x(i,n),e(l,n),a&&(l[0].t={labels:{lat:r(i,"lat:")+" ",lon:r(i,"lon:")+" "}}),l}},{"../../constants/numerical":479,"../../lib":503,"../scatter/arrays_to_calcdata":925,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],970:[function(u,q,W){var o=u("../../lib"),p=u("../scatter/subtypes"),x=u("../scatter/marker_defaults"),y=u("../scatter/line_defaults"),e=u("../scatter/text_defaults"),r=u("../scatter/fillcolor_defaults"),t=u("./attributes");q.exports=function(i,n,h,s){function a(b,g){return o.coerce(i,n,t,b,g)}var l,f=a("locations");if(f&&f.length){var d,v=a("geojson");(typeof v=="string"&&v!==""||o.isPlainObject(v))&&(d="geojson-id"),a("locationmode",d)==="geojson-id"&&a("featureidkey"),l=f.length}else{var m=a("lon")||[],c=a("lat")||[];l=Math.min(m.length,c.length)}l?(n._length=l,a("text"),a("hovertext"),a("hovertemplate"),a("mode"),p.hasLines(n)&&(y(i,n,h,s,a),a("connectgaps")),p.hasMarkers(n)&&x(i,n,h,s,a,{gradient:!0}),p.hasText(n)&&(a("texttemplate"),e(i,n,s,a)),a("fill"),n.fill!=="none"&&r(i,n,h,a),o.coerceSelectionMarkerOpacity(n,a)):n.visible=!1}},{"../../lib":503,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":968}],971:[function(u,q,W){q.exports=function(o,p,x,y,e){o.lon=p.lon,o.lat=p.lat,o.location=p.loc?p.loc:null;var r=y[e];return r.fIn&&r.fIn.properties&&(o.properties=r.fIn.properties),o}},{}],972:[function(u,q,W){var o=u("../../plots/cartesian/axes");q.exports=function(p,x,y){var e={},r=y[x.geo]._subplot.mockAxis,t=p.lonlat;return e.lonLabel=o.tickText(r,r.c2l(t[0]),!0).text,e.latLabel=o.tickText(r,r.c2l(t[1]),!0).text,e}},{"../../plots/cartesian/axes":554}],973:[function(u,q,W){var o=u("../../components/fx"),p=u("../../constants/numerical").BADNUM,x=u("../scatter/get_trace_color"),y=u("../../lib").fillText,e=u("./attributes");q.exports=function(r,t,i){var n=r.cd,h=n[0].trace,s=r.xa,a=r.ya,l=r.subplot,f=l.projection.isLonLatOverEdges,d=l.project;if(o.getClosest(n,function(_){var T=_.lonlat;if(T[0]===p||f(T))return 1/0;var k=d(T),L=d([t,i]),M=Math.abs(k[0]-L[0]),I=Math.abs(k[1]-L[1]),P=Math.max(3,_.mrc||0);return Math.max(Math.sqrt(M*M+I*I)-P,1-3/P)},r),r.index!==!1){var v=n[r.index],m=v.lonlat,c=[s.c2p(m),a.c2p(m)],b=v.mrc||1;r.x0=c[0]-b,r.x1=c[0]+b,r.y0=c[1]-b,r.y1=c[1]+b,r.loc=v.loc,r.lon=m[0],r.lat=m[1];var g={};g[h.geo]={_subplot:l};var w=h._module.formatLabels(v,h,g);return r.lonLabel=w.lonLabel,r.latLabel=w.latLabel,r.color=x(h,v),r.extraText=function(_,T,k,L){if(_.hovertemplate)return;var M=T.hi||_.hoverinfo,I=M==="all"?e.hoverinfo.flags:M.split("+"),P=I.indexOf("location")!==-1&&Array.isArray(_.locations),S=I.indexOf("lon")!==-1,E=I.indexOf("lat")!==-1,D=I.indexOf("text")!==-1,F=[];function H(V){return V+"\xB0"}return P?F.push(T.loc):S&&E?F.push("("+H(k.latLabel)+", "+H(k.lonLabel)+")"):S?F.push(L.lon+H(k.lonLabel)):E&&F.push(L.lat+H(k.latLabel)),D&&y(T,_,F),F.join("<br>")}(h,v,r,n[0].t.labels),r.hovertemplate=h.hovertemplate,[r]}}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":936,"./attributes":968}],974:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults"),colorbar:u("../scatter/marker_colorbar"),formatLabels:u("./format_labels"),calc:u("./calc"),calcGeoJSON:u("./plot").calcGeoJSON,plot:u("./plot").plot,style:u("./style"),styleOnSelect:u("../scatter/style").styleOnSelect,hoverPoints:u("./hover"),eventData:u("./event_data"),selectPoints:u("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:u("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":589,"../scatter/marker_colorbar":944,"../scatter/style":950,"./attributes":968,"./calc":969,"./defaults":970,"./event_data":971,"./format_labels":972,"./hover":973,"./plot":975,"./select":976,"./style":977}],975:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../lib"),x=u("../../lib/topojson_utils").getTopojsonFeatures,y=u("../../lib/geojson_utils"),e=u("../../lib/geo_location_utils"),r=u("../../plots/cartesian/autorange").findExtremes,t=u("../../constants/numerical").BADNUM,i=u("../scatter/calc").calcMarkerSize,n=u("../scatter/subtypes"),h=u("./style");q.exports={calcGeoJSON:function(s,a){var l,f,d=s[0].trace,v=a[d.geo],m=v._subplot,c=d._length;if(Array.isArray(d.locations)){var b=d.locationmode,g=b==="geojson-id"?e.extractTraceFeature(s):x(d,m.topojson);for(l=0;l<c;l++){f=s[l];var w=b==="geojson-id"?f.fOut:e.locationToFeature(b,f.loc,g);f.lonlat=w?w.properties.ct:[t,t]}}var _,T,k={padded:!0};if(v.fitbounds==="geojson"&&d.locationmode==="geojson-id"){var L=e.computeBbox(e.getTraceGeojson(d));_=[L[0],L[2]],T=[L[1],L[3]]}else{for(_=new Array(c),T=new Array(c),l=0;l<c;l++)f=s[l],_[l]=f.lonlat[0],T[l]=f.lonlat[1];k.ppad=i(d,c)}d._extremes.lon=r(v.lonaxis._ax,_,k),d._extremes.lat=r(v.lataxis._ax,T,k)},plot:function(s,a,l){var f=a.layers.frontplot.select(".scatterlayer"),d=p.makeTraceGroups(f,l,"trace scattergeo");function v(m,c){m.lonlat[0]===t&&o.select(c).remove()}d.selectAll("*").remove(),d.each(function(m){var c=o.select(this),b=m[0].trace;if(n.hasLines(b)||b.fill!=="none"){var g=y.calcTraceToLineCoords(m),w=b.fill!=="none"?y.makePolygon(g):y.makeLine(g);c.selectAll("path.js-line").data([{geojson:w,trace:b}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}n.hasMarkers(b)&&c.selectAll("path.point").data(p.identity).enter().append("path").classed("point",!0).each(function(_){v(_,this)}),n.hasText(b)&&c.selectAll("g").data(p.identity).enter().append("g").append("text").each(function(_){v(_,this)}),h(s,m)})}}},{"../../constants/numerical":479,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"../scatter/calc":927,"../scatter/subtypes":951,"./style":977,"@plotly/d3":58}],976:[function(u,q,W){var o=u("../scatter/subtypes"),p=u("../../constants/numerical").BADNUM;q.exports=function(x,y){var e,r,t,i,n,h=x.cd,s=x.xaxis,a=x.yaxis,l=[],f=h[0].trace;if(!o.hasMarkers(f)&&!o.hasText(f))return[];if(y===!1)for(n=0;n<h.length;n++)h[n].selected=0;else for(n=0;n<h.length;n++)(r=(e=h[n]).lonlat)[0]!==p&&(t=s.c2p(r),i=a.c2p(r),y.contains([t,i],null,n,x)?(l.push({pointNumber:n,lon:r[0],lat:r[1]}),e.selected=1):e.selected=0);return l}},{"../../constants/numerical":479,"../scatter/subtypes":951}],977:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../components/drawing"),x=u("../../components/color"),y=u("../scatter/style"),e=y.stylePoints,r=y.styleText;q.exports=function(t,i){i&&function(n,h){var s=h[0].trace,a=h[0].node3;a.style("opacity",h[0].trace.opacity),e(a,s,n),r(a,s,n),a.selectAll("path.js-line").style("fill","none").each(function(l){var f=o.select(this),d=l.trace,v=d.line||{};f.call(x.stroke,v.color).call(p.dashLine,v.dash||"",v.width||0),d.fill!=="none"&&f.call(x.fill,d.fillcolor)})}(t,i)}},{"../../components/color":366,"../../components/drawing":388,"../scatter/style":950,"@plotly/d3":58}],978:[function(u,q,W){var o=u("../../plots/attributes"),p=u("../scatter/attributes"),x=u("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=u("../../components/colorscale/attributes"),e=u("../../lib/sort_object_keys"),r=u("../../lib/extend").extendFlat,t=u("../../plot_api/edit_types").overrideAll,i=u("./constants").DASHES,n=p.line,h=p.marker,s=h.line,a=q.exports=t({x:p.x,x0:p.x0,dx:p.dx,y:p.y,y0:p.y0,dy:p.dy,xperiod:p.xperiod,yperiod:p.yperiod,xperiod0:p.xperiod0,yperiod0:p.yperiod0,xperiodalignment:p.xperiodalignment,yperiodalignment:p.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),text:p.text,hovertext:p.hovertext,textposition:p.textposition,textfont:p.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:n.color,width:n.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(i),dflt:"solid"}},marker:r({},y("marker"),{symbol:h.symbol,size:h.size,sizeref:h.sizeref,sizemin:h.sizemin,sizemode:h.sizemode,opacity:h.opacity,colorbar:h.colorbar,line:r({},y("marker.line"),{width:s.width})}),connectgaps:p.connectgaps,fill:r({},p.fill,{dflt:"none"}),fillcolor:p.fillcolor,selected:{marker:p.selected.marker,textfont:p.selected.textfont},unselected:{marker:p.unselected.marker,textfont:p.unselected.textfont},opacity:o.opacity},"calc","nested");a.x.editType=a.y.editType=a.x0.editType=a.y0.editType="calc+clearAxisTypes",a.hovertemplate=p.hovertemplate,a.texttemplate=p.texttemplate},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":926,"./constants":980}],979:[function(u,q,W){var o=u("@plotly/point-cluster"),p=u("../../lib"),x=u("../../plots/cartesian/axis_ids"),y=u("../../plots/cartesian/autorange").findExtremes,e=u("../../plots/cartesian/align_period"),r=u("../scatter/calc"),t=r.calcMarkerSize,i=r.calcAxisExpansion,n=r.setFirstScatter,h=u("../scatter/colorscale_calc"),s=u("./convert"),a=u("./scene_update"),l=u("../../constants/numerical").BADNUM,f=u("./constants").TOO_MANY_POINTS;function d(v,m,c){var b=v._extremes[m._id],g=y(m,c._bnds,{padded:!0});b.min=b.min.concat(g.min),b.max=b.max.concat(g.max)}q.exports=function(v,m){var c,b=v._fullLayout,g=x.getFromId(v,m.xaxis),w=x.getFromId(v,m.yaxis),_=b._plots[m.xaxis+m.yaxis],T=m._length,k=T>=f,L=2*T,M={},I=g.makeCalcdata(m,"x"),P=w.makeCalcdata(m,"y"),S=e(m,g,"x",I),E=e(m,w,"y",P),D=S.vals,F=E.vals;m._x=D,m._y=F,m.xperiodalignment&&(m._origX=I,m._xStarts=S.starts,m._xEnds=S.ends),m.yperiodalignment&&(m._origY=P,m._yStarts=E.starts,m._yEnds=E.ends);var H=new Array(L),V=new Array(T);for(c=0;c<T;c++)H[2*c]=D[c]===l?NaN:D[c],H[2*c+1]=F[c]===l?NaN:F[c],V[c]=c;if(g.type==="log")for(c=0;c<L;c+=2)H[c]=g.c2l(H[c]);if(w.type==="log")for(c=1;c<L;c+=2)H[c]=w.c2l(H[c]);k&&g.type!=="log"&&w.type!=="log"?M.tree=o(H):M.ids=V,h(v,m);var Q,K=function($,re,R,N,U,te){var j=s.style($,R);if(j.marker&&(j.marker.positions=N),j.line&&N.length>1&&p.extendFlat(j.line,s.linePositions($,R,N)),j.errorX||j.errorY){var Y=s.errorBarPositions($,R,N,U,te);j.errorX&&p.extendFlat(j.errorX,Y.x),j.errorY&&p.extendFlat(j.errorY,Y.y)}return j.text&&(p.extendFlat(j.text,{positions:N},s.textPosition($,R,j.text,j.marker)),p.extendFlat(j.textSel,{positions:N},s.textPosition($,R,j.text,j.markerSel)),p.extendFlat(j.textUnsel,{positions:N},s.textPosition($,R,j.text,j.markerUnsel))),j}(v,0,m,H,D,F),Z=a(v,_);return n(b,m),k?K.marker&&(Q=K.marker.sizeAvg||Math.max(K.marker.size,3)):Q=t(m,T),i(v,m,g,w,D,F,Q),K.errorX&&d(m,g,K.errorX),K.errorY&&d(m,w,K.errorY),K.fill&&!Z.fill2d&&(Z.fill2d=!0),K.marker&&!Z.scatter2d&&(Z.scatter2d=!0),K.line&&!Z.line2d&&(Z.line2d=!0),!K.errorX&&!K.errorY||Z.error2d||(Z.error2d=!0),K.text&&!Z.glText&&(Z.glText=!0),K.marker&&(K.marker.snap=T),Z.lineOptions.push(K.line),Z.errorXOptions.push(K.errorX),Z.errorYOptions.push(K.errorY),Z.fillOptions.push(K.fill),Z.markerOptions.push(K.marker),Z.markerSelectedOptions.push(K.markerSel),Z.markerUnselectedOptions.push(K.markerUnsel),Z.textOptions.push(K.text),Z.textSelectedOptions.push(K.textSel),Z.textUnselectedOptions.push(K.textUnsel),Z.selectBatch.push([]),Z.unselectBatch.push([]),M._scene=Z,M.index=Z.count,M.x=D,M.y=F,M.positions=H,Z.count++,[{x:!1,y:!1,t:M,trace:m}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"../scatter/calc":927,"../scatter/colorscale_calc":929,"./constants":980,"./convert":981,"./scene_update":989,"@plotly/point-cluster":59}],980:[function(u,q,W){q.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],981:[function(u,q,W){var o=u("fast-isnumeric"),p=u("svg-path-sdf"),x=u("color-normalize"),y=u("../../registry"),e=u("../../lib"),r=u("../../components/drawing"),t=u("../../plots/cartesian/axis_ids"),i=u("../../lib/gl_format_color").formatColor,n=u("../scatter/subtypes"),h=u("../scatter/make_bubble_size_func"),s=u("./helpers"),a=u("./constants"),l=u("../../constants/interactions").DESELECTDIM,f={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},d=u("../../components/fx/helpers").appendArrayPointValue;function v(I,P){var S,E=I._fullLayout,D=P._length,F=P.textfont,H=P.textposition,V=Array.isArray(H)?H:[H],Q=F.color,K=F.size,Z=F.family,$={},re=I._context.plotGlPixelRatio,R=P.texttemplate;if(R){$.text=[];var N=E._d3locale,U=Array.isArray(R),te=U?Math.min(R.length,D):D,j=U?function(he){return R[he]}:function(){return R};for(S=0;S<te;S++){var Y={i:S},J=P._module.formatLabels(Y,P,E),ee={};d(ee,P,S);var ne=P._meta||{};$.text.push(e.texttemplateString(j(S),J,N,ee,Y,ne))}}else Array.isArray(P.text)&&P.text.length<D?$.text=P.text.slice():$.text=P.text;if(Array.isArray($.text))for(S=$.text.length;S<D;S++)$.text[S]="";for($.opacity=P.opacity,$.font={},$.align=[],$.baseline=[],S=0;S<V.length;S++){var se=V[S].split(/\s+/);switch(se[1]){case"left":$.align.push("right");break;case"right":$.align.push("left");break;default:$.align.push(se[1])}switch(se[0]){case"top":$.baseline.push("bottom");break;case"bottom":$.baseline.push("top");break;default:$.baseline.push(se[0])}}if(Array.isArray(Q))for($.color=new Array(D),S=0;S<D;S++)$.color[S]=Q[S];else $.color=Q;if(e.isArrayOrTypedArray(K)||Array.isArray(Z))for($.font=new Array(D),S=0;S<D;S++){var oe=$.font[S]={};oe.size=(e.isTypedArray(K)?K[S]:Array.isArray(K)?o(K[S])?K[S]:0:K)*re,oe.family=Array.isArray(Z)?Z[S]:Z}else $.font={size:K*re,family:Z};return $}function m(I){var P,S,E=I._length,D=I.marker,F={},H=e.isArrayOrTypedArray(D.symbol),V=e.isArrayOrTypedArray(D.color),Q=e.isArrayOrTypedArray(D.line.color),K=e.isArrayOrTypedArray(D.opacity),Z=e.isArrayOrTypedArray(D.size),$=e.isArrayOrTypedArray(D.line.width);if(H||(S=s.isOpenSymbol(D.symbol)),H||V||Q||K){F.colors=new Array(E),F.borderColors=new Array(E);var re=i(D,D.opacity,E),R=i(D.line,D.opacity,E);if(!Array.isArray(R[0])){var N=R;for(R=Array(E),P=0;P<E;P++)R[P]=N}if(!Array.isArray(re[0])){var U=re;for(re=Array(E),P=0;P<E;P++)re[P]=U}for(F.colors=re,F.borderColors=R,P=0;P<E;P++){if(H){var te=D.symbol[P];S=s.isOpenSymbol(te)}S&&(R[P]=re[P].slice(),re[P]=re[P].slice(),re[P][3]=0)}F.opacity=I.opacity}else S?(F.color=x(D.color,"uint8"),F.color[3]=0,F.borderColor=x(D.color,"uint8")):(F.color=x(D.color,"uint8"),F.borderColor=x(D.line.color,"uint8")),F.opacity=I.opacity*D.opacity;if(H)for(F.markers=new Array(E),P=0;P<E;P++)F.markers[P]=M(D.symbol[P]);else F.marker=M(D.symbol);var j,Y=h(I,1);if(Z||$){var J,ee=F.sizes=new Array(E),ne=F.borderSizes=new Array(E),se=0;if(Z){for(P=0;P<E;P++)ee[P]=Y(D.size[P]),se+=ee[P];J=se/E}else for(j=Y(D.size),P=0;P<E;P++)ee[P]=j;if($)for(P=0;P<E;P++)ne[P]=D.line.width[P];else for(j=D.line.width,P=0;P<E;P++)ne[P]=j;F.sizeAvg=J}else F.size=Y(D&&D.size||10),F.borderSizes=Y(D.line.width);return F}function c(I,P){var S=I.marker,E={};return P&&(P.marker&&P.marker.symbol?E=m(e.extendFlat({},S,P.marker)):P.marker&&(P.marker.size&&(E.size=P.marker.size),P.marker.color&&(E.colors=P.marker.color),P.marker.opacity!==void 0&&(E.opacity=P.marker.opacity))),E}function b(I,P,S){var E={};if(!S)return E;if(S.textfont){var D={opacity:1,text:P.text,texttemplate:P.texttemplate,textposition:P.textposition,textfont:e.extendFlat({},P.textfont)};S.textfont&&e.extendFlat(D.textfont,S.textfont),E=v(I,D)}return E}function g(I,P,S){var E={capSize:2*P.width*S,lineWidth:P.thickness*S,color:P.color};return P.copy_ystyle&&(E=I.error_y),E}var w=a.SYMBOL_SDF_SIZE,_=a.SYMBOL_SIZE,T=a.SYMBOL_STROKE,k={},L=r.symbolFuncs[0](.05*_);function M(I){if(I==="circle")return null;var P,S,E=r.symbolNumber(I),D=r.symbolFuncs[E%100],F=!!r.symbolNoDot[E%100],H=!!r.symbolNoFill[E%100],V=s.isDotSymbol(I);return k[I]?k[I]:(P=V&&!F?D(1.1*_)+L:D(_),S=p(P,{w,h:w,viewBox:[-_,-_,_,_],stroke:H?T:-T}),k[I]=S,S||null)}q.exports={style:function(I,P){var S,E={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},D=I._context.plotGlPixelRatio;if(P.visible!==!0)return E;if(n.hasText(P)&&(E.text=v(I,P),E.textSel=b(I,P,P.selected),E.textUnsel=b(I,P,P.unselected)),n.hasMarkers(P)&&(E.marker=m(P),E.markerSel=c(P,P.selected),E.markerUnsel=c(P,P.unselected),!P.unselected&&e.isArrayOrTypedArray(P.marker.opacity))){var F=P.marker.opacity;for(E.markerUnsel.opacity=new Array(F.length),S=0;S<F.length;S++)E.markerUnsel.opacity[S]=l*F[S]}if(n.hasLines(P)){E.line={overlay:!0,thickness:P.line.width*D,color:P.line.color,opacity:P.opacity};var H=(a.DASHES[P.line.dash]||[1]).slice();for(S=0;S<H.length;++S)H[S]*=P.line.width*D;E.line.dashes=H}return P.error_x&&P.error_x.visible&&(E.errorX=g(P,P.error_x,D)),P.error_y&&P.error_y.visible&&(E.errorY=g(P,P.error_y,D)),P.fill&&P.fill!=="none"&&(E.fill={closed:!0,fill:P.fillcolor,thickness:0}),E},markerStyle:m,markerSelection:c,linePositions:function(I,P,S){var E,D,F=S.length,H=F/2;if(n.hasLines(P)&&H)if(P.line.shape==="hv"){for(E=[],D=0;D<H-1;D++)isNaN(S[2*D])||isNaN(S[2*D+1])?E.push(NaN,NaN,NaN,NaN):(E.push(S[2*D],S[2*D+1]),isNaN(S[2*D+2])||isNaN(S[2*D+3])?E.push(NaN,NaN):E.push(S[2*D+2],S[2*D+1]));E.push(S[F-2],S[F-1])}else if(P.line.shape==="hvh"){for(E=[],D=0;D<H-1;D++)if(isNaN(S[2*D])||isNaN(S[2*D+1])||isNaN(S[2*D+2])||isNaN(S[2*D+3]))isNaN(S[2*D])||isNaN(S[2*D+1])?E.push(NaN,NaN):E.push(S[2*D],S[2*D+1]),E.push(NaN,NaN);else{var V=(S[2*D]+S[2*D+2])/2;E.push(S[2*D],S[2*D+1],V,S[2*D+1],V,S[2*D+3])}E.push(S[F-2],S[F-1])}else if(P.line.shape==="vhv"){for(E=[],D=0;D<H-1;D++)if(isNaN(S[2*D])||isNaN(S[2*D+1])||isNaN(S[2*D+2])||isNaN(S[2*D+3]))isNaN(S[2*D])||isNaN(S[2*D+1])?E.push(NaN,NaN):E.push(S[2*D],S[2*D+1]),E.push(NaN,NaN);else{var Q=(S[2*D+1]+S[2*D+3])/2;E.push(S[2*D],S[2*D+1],S[2*D],Q,S[2*D+2],Q)}E.push(S[F-2],S[F-1])}else if(P.line.shape==="vh"){for(E=[],D=0;D<H-1;D++)isNaN(S[2*D])||isNaN(S[2*D+1])?E.push(NaN,NaN,NaN,NaN):(E.push(S[2*D],S[2*D+1]),isNaN(S[2*D+2])||isNaN(S[2*D+3])?E.push(NaN,NaN):E.push(S[2*D],S[2*D+3]));E.push(S[F-2],S[F-1])}else E=S;var K=!1;for(D=0;D<E.length;D++)if(isNaN(E[D])){K=!0;break}var Z=K||E.length>a.TOO_MANY_POINTS||n.hasMarkers(P)?"rect":"round";if(K&&P.connectgaps){var $=E[0],re=E[1];for(D=0;D<E.length;D+=2)isNaN(E[D])||isNaN(E[D+1])?(E[D]=$,E[D+1]=re):($=E[D],re=E[D+1])}return{join:Z,positions:E}},errorBarPositions:function(I,P,S,E,D){var F=y.getComponentMethod("errorbars","makeComputeError"),H=t.getFromId(I,P.xaxis),V=t.getFromId(I,P.yaxis),Q=S.length/2,K={};function Z($,re){var R=re._id.charAt(0),N=P["error_"+R];if(N&&N.visible&&(re.type==="linear"||re.type==="log")){for(var U=F(N),te={x:0,y:1}[R],j={x:[0,1,2,3],y:[2,3,0,1]}[R],Y=new Float64Array(4*Q),J=1/0,ee=-1/0,ne=0,se=0;ne<Q;ne++,se+=4){var oe=$[ne];if(o(oe)){var he=S[2*ne+te],le=U(oe,ne),de=le[0],xe=le[1];if(o(de)&&o(xe)){var we=oe-de,be=oe+xe;Y[se+j[0]]=he-re.c2l(we),Y[se+j[1]]=re.c2l(be)-he,Y[se+j[2]]=0,Y[se+j[3]]=0,J=Math.min(J,oe-de),ee=Math.max(ee,oe+xe)}}}K[R]={positions:S,errors:Y,_bnds:[J,ee]}}}return Z(E,H),Z(D,V),K},textPosition:function(I,P,S,E){var D,F=P._length,H={};if(n.hasMarkers(P)){var V=S.font,Q=S.align,K=S.baseline;for(H.offset=new Array(F),D=0;D<F;D++){var Z=E.sizes?E.sizes[D]:E.size,$=Array.isArray(V)?V[D].size:V.size,re=Array.isArray(Q)?Q.length>1?Q[D]:Q[0]:Q,R=Array.isArray(K)?K.length>1?K[D]:K[0]:K,N=f[re],U=f[R],te=Z?Z/.8+1:0,j=-U*te-.5*U;H.offset[D]=[N*te/$,j/$]}}return H}}},{"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/interactions":478,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../scatter/make_bubble_size_func":943,"../scatter/subtypes":951,"./constants":980,"./helpers":985,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":310}],982:[function(u,q,W){var o=u("../../lib"),p=u("../../registry"),x=u("./helpers"),y=u("./attributes"),e=u("../scatter/constants"),r=u("../scatter/subtypes"),t=u("../scatter/xy_defaults"),i=u("../scatter/period_defaults"),n=u("../scatter/marker_defaults"),h=u("../scatter/line_defaults"),s=u("../scatter/fillcolor_defaults"),a=u("../scatter/text_defaults");q.exports=function(l,f,d,v){function m(L,M){return o.coerce(l,f,y,L,M)}var c=!!l.marker&&x.isOpenSymbol(l.marker.symbol),b=r.isBubble(l),g=t(l,f,v,m);if(g){i(l,f,v,m),m("xhoverformat"),m("yhoverformat");var w=g<e.PTS_LINESONLY?"lines+markers":"lines";m("text"),m("hovertext"),m("hovertemplate"),m("mode",w),r.hasLines(f)&&(m("connectgaps"),h(l,f,d,v,m),m("line.shape")),r.hasMarkers(f)&&(n(l,f,d,v,m),m("marker.line.width",c||b?1:0)),r.hasText(f)&&(m("texttemplate"),a(l,f,v,m));var _=(f.line||{}).color,T=(f.marker||{}).color;m("fill"),f.fill!=="none"&&s(l,f,d,m);var k=p.getComponentMethod("errorbars","supplyDefaults");k(l,f,_||T||d,{axis:"y"}),k(l,f,_||T||d,{axis:"x",inherit:"y"}),o.coerceSelectionMarkerOpacity(f,m)}else f.visible=!1}},{"../../lib":503,"../../registry":638,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/period_defaults":946,"../scatter/subtypes":951,"../scatter/text_defaults":952,"../scatter/xy_defaults":953,"./attributes":978,"./helpers":985}],983:[function(u,q,W){var o=u("../../lib"),p=u("../../components/color"),x=u("../../constants/interactions").DESELECTDIM;q.exports={styleTextSelection:function(y){var e,r,t=y[0],i=t.trace,n=t.t,h=n._scene,s=n.index,a=h.selectBatch[s],l=h.unselectBatch[s],f=h.textOptions[s],d=h.textSelectedOptions[s]||{},v=h.textUnselectedOptions[s]||{},m=o.extendFlat({},f);if(a.length||l.length){var c=d.color,b=v.color,g=f.color,w=Array.isArray(g);for(m.color=new Array(i._length),e=0;e<a.length;e++)r=a[e],m.color[r]=c||(w?g[r]:g);for(e=0;e<l.length;e++){r=l[e];var _=w?g[r]:g;m.color[r]=b||(c?_:p.addOpacity(_,x))}}h.glText[s].update(m)}}},{"../../components/color":366,"../../constants/interactions":478,"../../lib":503}],984:[function(u,q,W){var o=u("../scatter/format_labels");q.exports=function(p,x,y){var e=p.i;return"x"in p||(p.x=x._x[e]),"y"in p||(p.y=x._y[e]),o(p,x,y)}},{"../scatter/format_labels":935}],985:[function(u,q,W){var o=u("./constants");W.isOpenSymbol=function(p){return typeof p=="string"?o.OPEN_RE.test(p):p%200>100},W.isDotSymbol=function(p){return typeof p=="string"?o.DOT_RE.test(p):p>200}},{"./constants":980}],986:[function(u,q,W){var o=u("../../registry"),p=u("../../lib"),x=u("../scatter/get_trace_color");function y(e,r,t,i){var n=e.xa,h=e.ya,s=e.distance,a=e.dxy,l=e.index,f={pointNumber:l,x:r[l],y:t[l]};f.tx=Array.isArray(i.text)?i.text[l]:i.text,f.htx=Array.isArray(i.hovertext)?i.hovertext[l]:i.hovertext,f.data=Array.isArray(i.customdata)?i.customdata[l]:i.customdata,f.tp=Array.isArray(i.textposition)?i.textposition[l]:i.textposition;var d=i.textfont;d&&(f.ts=p.isArrayOrTypedArray(d.size)?d.size[l]:d.size,f.tc=Array.isArray(d.color)?d.color[l]:d.color,f.tf=Array.isArray(d.family)?d.family[l]:d.family);var v=i.marker;v&&(f.ms=p.isArrayOrTypedArray(v.size)?v.size[l]:v.size,f.mo=p.isArrayOrTypedArray(v.opacity)?v.opacity[l]:v.opacity,f.mx=p.isArrayOrTypedArray(v.symbol)?v.symbol[l]:v.symbol,f.mc=p.isArrayOrTypedArray(v.color)?v.color[l]:v.color);var m=v&&v.line;m&&(f.mlc=Array.isArray(m.color)?m.color[l]:m.color,f.mlw=p.isArrayOrTypedArray(m.width)?m.width[l]:m.width);var c=v&&v.gradient;c&&c.type!=="none"&&(f.mgt=Array.isArray(c.type)?c.type[l]:c.type,f.mgc=Array.isArray(c.color)?c.color[l]:c.color);var b=n.c2p(f.x,!0),g=h.c2p(f.y,!0),w=f.mrc||1,_=i.hoverlabel;_&&(f.hbg=Array.isArray(_.bgcolor)?_.bgcolor[l]:_.bgcolor,f.hbc=Array.isArray(_.bordercolor)?_.bordercolor[l]:_.bordercolor,f.hts=p.isArrayOrTypedArray(_.font.size)?_.font.size[l]:_.font.size,f.htc=Array.isArray(_.font.color)?_.font.color[l]:_.font.color,f.htf=Array.isArray(_.font.family)?_.font.family[l]:_.font.family,f.hnl=p.isArrayOrTypedArray(_.namelength)?_.namelength[l]:_.namelength);var T=i.hoverinfo;T&&(f.hi=Array.isArray(T)?T[l]:T);var k=i.hovertemplate;k&&(f.ht=Array.isArray(k)?k[l]:k);var L={};L[e.index]=f;var M=i._origX,I=i._origY,P=p.extendFlat({},e,{color:x(i,f),x0:b-w,x1:b+w,xLabelVal:M?M[l]:f.x,y0:g-w,y1:g+w,yLabelVal:I?I[l]:f.y,cd:L,distance:s,spikeDistance:a,hovertemplate:f.ht});return f.htx?P.text=f.htx:f.tx?P.text=f.tx:i.text&&(P.text=i.text),p.fillText(f,i,P),o.getComponentMethod("errorbars","hoverInfo")(f,i,P),P}q.exports={hoverPoints:function(e,r,t,i){var n,h,s,a,l,f,d,v,m,c,b=e.cd,g=b[0].t,w=b[0].trace,_=e.xa,T=e.ya,k=g.x,L=g.y,M=_.c2p(r),I=T.c2p(t),P=e.distance;if(g.tree){var S=_.p2c(M-P),E=_.p2c(M+P),D=T.p2c(I-P),F=T.p2c(I+P);n=i==="x"?g.tree.range(Math.min(S,E),Math.min(T._rl[0],T._rl[1]),Math.max(S,E),Math.max(T._rl[0],T._rl[1])):g.tree.range(Math.min(S,E),Math.min(D,F),Math.max(S,E),Math.max(D,F))}else n=g.ids;var H=P;if(i==="x"){var V=!!w.xperiodalignment,Q=!!w.yperiodalignment;for(f=0;f<n.length;f++){if(a=k[h=n[f]],d=Math.abs(_.c2p(a)-M),V){var K=_.c2p(w._xStarts[h]),Z=_.c2p(w._xEnds[h]);d=M>=Math.min(K,Z)&&M<=Math.max(K,Z)?0:1/0}if(d<H){if(H=d,l=L[h],v=T.c2p(l)-I,Q){var $=T.c2p(w._yStarts[h]),re=T.c2p(w._yEnds[h]);v=I>=Math.min($,re)&&I<=Math.max($,re)?0:1/0}c=Math.sqrt(d*d+v*v),s=n[f]}}}else for(f=n.length-1;f>-1;f--)a=k[h=n[f]],l=L[h],d=_.c2p(a)-M,v=T.c2p(l)-I,(m=Math.sqrt(d*d+v*v))<H&&(H=c=m,s=h);return e.index=s,e.distance=H,e.dxy=c,s===void 0?[e]:[y(e,k,L,w)]},calcHover:y}},{"../../lib":503,"../../registry":638,"../scatter/get_trace_color":936}],987:[function(u,q,W){var o=u("./hover");q.exports={moduleType:"trace",name:"scattergl",basePlotModule:u("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:u("./attributes"),supplyDefaults:u("./defaults"),crossTraceDefaults:u("../scatter/cross_trace_defaults"),colorbar:u("../scatter/marker_colorbar"),formatLabels:u("./format_labels"),calc:u("./calc"),plot:u("./plot"),hoverPoints:o.hoverPoints,selectPoints:u("./select"),meta:{}}},{"../../plots/cartesian":568,"../scatter/cross_trace_defaults":932,"../scatter/marker_colorbar":944,"./attributes":978,"./calc":979,"./defaults":982,"./format_labels":984,"./hover":986,"./plot":988,"./select":990}],988:[function(u,q,W){var o=u("regl-scatter2d"),p=u("regl-line2d"),x=u("regl-error2d"),y=u("gl-text"),e=u("../../lib"),r=u("../../components/dragelement/helpers").selectMode,t=u("../../lib/prepare_regl"),i=u("../scatter/subtypes"),n=u("../scatter/link_traces"),h=u("./edit_style").styleTextSelection;function s(a,l,f,d){var v=a._size,m=a.width*d,c=a.height*d,b=v.l*d,g=v.b*d,w=v.r*d,_=v.t*d,T=v.w*d,k=v.h*d;return[b+l.domain[0]*T,g+f.domain[0]*k,m-w-(1-l.domain[1])*T,c-_-(1-f.domain[1])*k]}q.exports=function(a,l,f){if(f.length){var d,v,m=a._fullLayout,c=l._scene,b=l.xaxis,g=l.yaxis;if(c)if(t(a,["ANGLE_instanced_arrays","OES_element_index_uint"])){var w=c.count,_=m._glcanvas.data()[0].regl;if(n(a,l,f),c.dirty){if(c.error2d===!0&&(c.error2d=x(_)),c.line2d===!0&&(c.line2d=p(_)),c.scatter2d===!0&&(c.scatter2d=o(_)),c.fill2d===!0&&(c.fill2d=p(_)),c.glText===!0)for(c.glText=new Array(w),d=0;d<w;d++)c.glText[d]=new y(_);if(c.glText){if(w>c.glText.length){var T=w-c.glText.length;for(d=0;d<T;d++)c.glText.push(new y(_))}else if(w<c.glText.length){var k=c.glText.length-w;c.glText.splice(w,k).forEach(function(j){j.destroy()})}for(d=0;d<w;d++)c.glText[d].update(c.textOptions[d])}if(c.line2d&&(c.line2d.update(c.lineOptions),c.lineOptions=c.lineOptions.map(function(j){if(j&&j.positions){for(var Y=j.positions,J=0;J<Y.length&&(isNaN(Y[J])||isNaN(Y[J+1]));)J+=2;for(var ee=Y.length-2;ee>J&&(isNaN(Y[ee])||isNaN(Y[ee+1]));)ee-=2;j.positions=Y.slice(J,ee+2)}return j}),c.line2d.update(c.lineOptions)),c.error2d){var L=(c.errorXOptions||[]).concat(c.errorYOptions||[]);c.error2d.update(L)}c.scatter2d&&c.scatter2d.update(c.markerOptions),c.fillOrder=e.repeat(null,w),c.fill2d&&(c.fillOptions=c.fillOptions.map(function(j,Y){var J=f[Y];if(j&&J&&J[0]&&J[0].trace){var ee,ne,se=J[0],oe=se.trace,he=se.t,le=c.lineOptions[Y],de=[];oe._ownfill&&de.push(Y),oe._nexttrace&&de.push(Y+1),de.length&&(c.fillOrder[Y]=de);var xe,we,be=[],Ae=le&&le.positions||he.positions;if(oe.fill==="tozeroy"){for(xe=0;xe<Ae.length&&isNaN(Ae[xe+1]);)xe+=2;for(we=Ae.length-2;we>xe&&isNaN(Ae[we+1]);)we-=2;Ae[xe+1]!==0&&(be=[Ae[xe],0]),be=be.concat(Ae.slice(xe,we+2)),Ae[we+1]!==0&&(be=be.concat([Ae[we],0]))}else if(oe.fill==="tozerox"){for(xe=0;xe<Ae.length&&isNaN(Ae[xe]);)xe+=2;for(we=Ae.length-2;we>xe&&isNaN(Ae[we]);)we-=2;Ae[xe]!==0&&(be=[0,Ae[xe+1]]),be=be.concat(Ae.slice(xe,we+2)),Ae[we]!==0&&(be=be.concat([0,Ae[we+1]]))}else if(oe.fill==="toself"||oe.fill==="tonext"){for(be=[],ee=0,j.splitNull=!0,ne=0;ne<Ae.length;ne+=2)(isNaN(Ae[ne])||isNaN(Ae[ne+1]))&&((be=be.concat(Ae.slice(ee,ne))).push(Ae[ee],Ae[ee+1]),be.push(null,null),ee=ne+2);be=be.concat(Ae.slice(ee)),ee&&be.push(Ae[ee],Ae[ee+1])}else{var fe=oe._nexttrace;if(fe){var me=c.lineOptions[Y+1];if(me){var ke=me.positions;if(oe.fill==="tonexty"){for(be=Ae.slice(),Y=Math.floor(ke.length/2);Y--;){var Te=ke[2*Y],Me=ke[2*Y+1];isNaN(Te)||isNaN(Me)||be.push(Te,Me)}j.fill=fe.fillcolor}}}}if(oe._prevtrace&&oe._prevtrace.fill==="tonext"){var Oe=c.lineOptions[Y-1].positions,Fe=be.length/2,qe=[ee=Fe];for(ne=0;ne<Oe.length;ne+=2)(isNaN(Oe[ne])||isNaN(Oe[ne+1]))&&(qe.push(ne/2+Fe+1),ee=ne+2);be=be.concat(Oe),j.hole=qe}return j.fillmode=oe.fill,j.opacity=oe.opacity,j.positions=be,j}}),c.fill2d.update(c.fillOptions))}var M=m.dragmode,I=r(M),P=m.clickmode.indexOf("select")>-1;for(d=0;d<w;d++){var S=f[d][0],E=S.trace,D=S.t,F=D.index,H=E._length,V=D.x,Q=D.y;if(E.selectedpoints||I||P){if(I||(I=!0),E.selectedpoints){var K=c.selectBatch[F]=e.selIndices2selPoints(E),Z={};for(v=0;v<K.length;v++)Z[K[v]]=1;var $=[];for(v=0;v<H;v++)Z[v]||$.push(v);c.unselectBatch[F]=$}var re=D.xpx=new Array(H),R=D.ypx=new Array(H);for(v=0;v<H;v++)re[v]=b.c2p(V[v]),R[v]=g.c2p(Q[v])}else D.xpx=D.ypx=null}if(I){if(c.select2d||(c.select2d=o(m._glcanvas.data()[1].regl)),c.scatter2d){var N=new Array(w);for(d=0;d<w;d++)N[d]=c.selectBatch[d].length||c.unselectBatch[d].length?c.markerUnselectedOptions[d]:{};c.scatter2d.update(N)}c.select2d&&(c.select2d.update(c.markerOptions),c.select2d.update(c.markerSelectedOptions)),c.glText&&f.forEach(function(j){var Y=((j||[])[0]||{}).trace||{};i.hasText(Y)&&h(j)})}else c.scatter2d&&c.scatter2d.update(c.markerOptions);var U={viewport:s(m,b,g,a._context.plotGlPixelRatio),range:[(b._rl||b.range)[0],(g._rl||g.range)[0],(b._rl||b.range)[1],(g._rl||g.range)[1]]},te=e.repeat(U,c.count);c.fill2d&&c.fill2d.update(te),c.line2d&&c.line2d.update(te),c.error2d&&c.error2d.update(te.concat(te)),c.scatter2d&&c.scatter2d.update(te),c.select2d&&c.select2d.update(te),c.glText&&c.glText.forEach(function(j){j.update(U)})}else c.init()}}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../lib/prepare_regl":516,"../scatter/link_traces":942,"../scatter/subtypes":951,"./edit_style":983,"gl-text":225,"regl-error2d":279,"regl-line2d":280,"regl-scatter2d":281}],989:[function(u,q,W){var o=u("../../lib");q.exports=function(p,x){var y=x._scene,e={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},r={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return x._scene||((y=x._scene={}).init=function(){o.extendFlat(y,r,e)},y.init(),y.update=function(t){var i=o.repeat(t,y.count);if(y.fill2d&&y.fill2d.update(i),y.scatter2d&&y.scatter2d.update(i),y.line2d&&y.line2d.update(i),y.error2d&&y.error2d.update(i.concat(i)),y.select2d&&y.select2d.update(i),y.glText)for(var n=0;n<y.count;n++)y.glText[n].update(t)},y.draw=function(){for(var t=y.count,i=y.fill2d,n=y.error2d,h=y.line2d,s=y.scatter2d,a=y.glText,l=y.select2d,f=y.selectBatch,d=y.unselectBatch,v=0;v<t;v++){if(i&&y.fillOrder[v]&&i.draw(y.fillOrder[v]),h&&y.lineOptions[v]&&h.draw(v),n&&(y.errorXOptions[v]&&n.draw(v),y.errorYOptions[v]&&n.draw(v+t)),s&&y.markerOptions[v])if(d[v].length){var m=o.repeat([],y.count);m[v]=d[v],s.draw(m)}else f[v].length||s.draw(v);a[v]&&y.textOptions[v]&&a[v].render()}l&&l.draw(f),y.dirty=!1},y.destroy=function(){y.fill2d&&y.fill2d.destroy&&y.fill2d.destroy(),y.scatter2d&&y.scatter2d.destroy&&y.scatter2d.destroy(),y.error2d&&y.error2d.destroy&&y.error2d.destroy(),y.line2d&&y.line2d.destroy&&y.line2d.destroy(),y.select2d&&y.select2d.destroy&&y.select2d.destroy(),y.glText&&y.glText.forEach(function(t){t.destroy&&t.destroy()}),y.lineOptions=null,y.fillOptions=null,y.markerOptions=null,y.markerSelectedOptions=null,y.markerUnselectedOptions=null,y.errorXOptions=null,y.errorYOptions=null,y.textOptions=null,y.textSelectedOptions=null,y.textUnselectedOptions=null,y.selectBatch=null,y.unselectBatch=null,x._scene=null}),y.dirty||o.extendFlat(y,e),y}},{"../../lib":503}],990:[function(u,q,W){var o=u("../scatter/subtypes"),p=u("./edit_style").styleTextSelection;q.exports=function(x,y){var e=x.cd,r=x.xaxis,t=x.yaxis,i=[],n=e[0].trace,h=e[0].t,s=n._length,a=h.x,l=h.y,f=h._scene,d=h.index;if(!f)return i;var v=o.hasText(n),m=o.hasMarkers(n),c=!m&&!v;if(n.visible!==!0||c)return i;var b=[],g=[];if(y!==!1&&!y.degenerate)for(var w=0;w<s;w++)y.contains([h.xpx[w],h.ypx[w]],!1,w,x)?(b.push(w),i.push({pointNumber:w,x:r.c2d(a[w]),y:t.c2d(l[w])})):g.push(w);if(m){var _=f.scatter2d;if(b.length||g.length){if(!f.selectBatch[d].length&&!f.unselectBatch[d].length){var T=new Array(f.count);T[d]=f.markerUnselectedOptions[d],_.update.apply(_,T)}}else{var k=new Array(f.count);k[d]=f.markerOptions[d],_.update.apply(_,k)}}return f.selectBatch[d]=b,f.unselectBatch[d]=g,v&&p(e),i}},{"../scatter/subtypes":951,"./edit_style":983}],991:[function(u,q,W){var o=u("../../plots/template_attributes").hovertemplateAttrs,p=u("../../plots/template_attributes").texttemplateAttrs,x=u("../scattergeo/attributes"),y=u("../scatter/attributes"),e=u("../../plots/mapbox/layout_attributes"),r=u("../../plots/attributes"),t=u("../../components/colorscale/attributes"),i=u("../../lib/extend").extendFlat,n=u("../../plot_api/edit_types").overrideAll,h=x.line,s=x.marker;q.exports=n({lon:x.lon,lat:x.lat,mode:i({},y.mode,{dflt:"markers"}),text:i({},y.text,{}),texttemplate:p({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:i({},y.hovertext,{}),line:{color:h.color,width:h.width},connectgaps:y.connectgaps,marker:i({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:s.opacity,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode},t("marker")),fill:x.fill,fillcolor:y.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:y.selected.marker},unselected:{marker:y.unselected.marker},hoverinfo:i({},r.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:o()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/mapbox/layout_attributes":615,"../../plots/template_attributes":633,"../scatter/attributes":926,"../scattergeo/attributes":968}],992:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../lib"),x=u("../../constants/numerical").BADNUM,y=u("../../lib/geojson_utils"),e=u("../../components/colorscale"),r=u("../../components/drawing"),t=u("../scatter/make_bubble_size_func"),i=u("../scatter/subtypes"),n=u("../../plots/mapbox/convert_text_opts"),h=u("../../components/fx/helpers").appendArrayPointValue,s=u("../../lib/svg_text_utils").NEWLINES,a=u("../../lib/svg_text_utils").BR_TAG_ALL;function l(){return{geojson:y.makeBlank(),layout:{visibility:"none"},paint:{}}}function f(m,c){return p.isArrayOrTypedArray(m)?c?function(b){return o(m[b])?+m[b]:0}:function(b){return m[b]}:m?function(){return m}:d}function d(){return""}function v(m){return m[0]===x}q.exports=function(m,c){var b,g=c[0].trace,w=g.visible===!0&&g._length!==0,_=g.fill!=="none",T=i.hasLines(g),k=i.hasMarkers(g),L=i.hasText(g),M=k&&g.marker.symbol==="circle",I=k&&g.marker.symbol!=="circle",P=l(),S=l(),E=l(),D=l(),F={fill:P,line:S,circle:E,symbol:D};if(!w)return F;if((_||T)&&(b=y.calcTraceToLineCoords(c)),_&&(P.geojson=y.makePolygon(b),P.layout.visibility="visible",p.extendFlat(P.paint,{"fill-color":g.fillcolor})),T&&(S.geojson=y.makeLine(b),S.layout.visibility="visible",p.extendFlat(S.paint,{"line-width":g.line.width,"line-color":g.line.color,"line-opacity":g.opacity})),M){var H=function(K){var Z,$,re,R,N=K[0].trace,U=N.marker,te=N.selectedpoints,j=p.isArrayOrTypedArray(U.color),Y=p.isArrayOrTypedArray(U.size),J=p.isArrayOrTypedArray(U.opacity);function ee(we){return N.opacity*we}j&&($=e.hasColorscale(N,"marker")?e.makeColorScaleFuncFromTrace(U):p.identity),Y&&(re=t(N)),J&&(R=function(we){return ee(o(we)?+p.constrain(we,0,1):0)});var ne,se=[];for(Z=0;Z<K.length;Z++){var oe=K[Z],he=oe.lonlat;if(!v(he)){var le={};$&&(le.mcc=oe.mcc=$(oe.mc)),re&&(le.mrc=oe.mrc=re(oe.ms)),R&&(le.mo=R(oe.mo)),te&&(le.selected=oe.selected||0),se.push({type:"Feature",geometry:{type:"Point",coordinates:he},properties:le})}}if(te)for(ne=r.makeSelectedPointStyleFns(N),Z=0;Z<se.length;Z++){var de=se[Z].properties;ne.selectedOpacityFn&&(de.mo=ee(ne.selectedOpacityFn(de))),ne.selectedColorFn&&(de.mcc=ne.selectedColorFn(de)),ne.selectedSizeFn&&(de.mrc=ne.selectedSizeFn(de))}return{geojson:{type:"FeatureCollection",features:se},mcc:j||ne&&ne.selectedColorFn?{type:"identity",property:"mcc"}:U.color,mrc:Y||ne&&ne.selectedSizeFn?{type:"identity",property:"mrc"}:(xe=U.size,xe/2),mo:J||ne&&ne.selectedOpacityFn?{type:"identity",property:"mo"}:ee(U.opacity)};var xe}(c);E.geojson=H.geojson,E.layout.visibility="visible",p.extendFlat(E.paint,{"circle-color":H.mcc,"circle-radius":H.mrc,"circle-opacity":H.mo})}if((I||L)&&(D.geojson=function(K,Z){for(var $=Z._fullLayout,re=K[0].trace,R=re.marker||{},N=R.symbol,U=R.angle,te=N!=="circle"?f(N):d,j=U!=="auto"?f(U,!0):d,Y=i.hasText(re)?f(re.text):d,J=[],ee=0;ee<K.length;ee++){var ne=K[ee];if(!v(ne.lonlat)){var se,oe=re.texttemplate;if(oe){var he=Array.isArray(oe)?oe[ee]||"":oe,le=re._module.formatLabels(ne,re,$),de={};h(de,re,ne.i);var xe=re._meta||{};se=p.texttemplateString(he,le,$._d3locale,de,ne,xe)}else se=Y(ee);se&&(se=se.replace(s,"").replace(a,`
`)),J.push({type:"Feature",geometry:{type:"Point",coordinates:ne.lonlat},properties:{symbol:te(ee),angle:j(ee),text:se}})}}return{type:"FeatureCollection",features:J}}(c,m),p.extendFlat(D.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),I&&(p.extendFlat(D.layout,{"icon-size":g.marker.size/10}),"angle"in g.marker&&g.marker.angle!=="auto"&&p.extendFlat(D.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),D.layout["icon-allow-overlap"]=g.marker.allowoverlap,p.extendFlat(D.paint,{"icon-opacity":g.opacity*g.marker.opacity,"icon-color":g.marker.color})),L)){var V=(g.marker||{}).size,Q=n(g.textposition,V);p.extendFlat(D.layout,{"text-size":g.textfont.size,"text-anchor":Q.anchor,"text-offset":Q.offset}),p.extendFlat(D.paint,{"text-color":g.textfont.color,"text-opacity":g.opacity})}return F}},{"../../components/colorscale":378,"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"../../lib/svg_text_utils":529,"../../plots/mapbox/convert_text_opts":612,"../scatter/make_bubble_size_func":943,"../scatter/subtypes":951,"fast-isnumeric":190}],993:[function(u,q,W){var o=u("../../lib"),p=u("../scatter/subtypes"),x=u("../scatter/marker_defaults"),y=u("../scatter/line_defaults"),e=u("../scatter/text_defaults"),r=u("../scatter/fillcolor_defaults"),t=u("./attributes");q.exports=function(i,n,h,s){function a(f,d){return o.coerce(i,n,t,f,d)}if(function(f,d,v){var m=v("lon")||[],c=v("lat")||[],b=Math.min(m.length,c.length);return d._length=b,b}(0,n,a)){if(a("text"),a("texttemplate"),a("hovertext"),a("hovertemplate"),a("mode"),a("below"),p.hasLines(n)&&(y(i,n,h,s,a,{noDash:!0}),a("connectgaps")),p.hasMarkers(n)){x(i,n,h,s,a,{noLine:!0}),a("marker.allowoverlap"),a("marker.angle");var l=n.marker;l.symbol!=="circle"&&(o.isArrayOrTypedArray(l.size)&&(l.size=l.size[0]),o.isArrayOrTypedArray(l.color)&&(l.color=l.color[0]))}p.hasText(n)&&e(i,n,s,a,{noSelect:!0}),a("fill"),n.fill!=="none"&&r(i,n,h,a),o.coerceSelectionMarkerOpacity(n,a)}else n.visible=!1}},{"../../lib":503,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":991}],994:[function(u,q,W){q.exports=function(o,p){return o.lon=p.lon,o.lat=p.lat,o}},{}],995:[function(u,q,W){var o=u("../../plots/cartesian/axes");q.exports=function(p,x,y){var e={},r=y[x.subplot]._subplot.mockAxis,t=p.lonlat;return e.lonLabel=o.tickText(r,r.c2l(t[0]),!0).text,e.latLabel=o.tickText(r,r.c2l(t[1]),!0).text,e}},{"../../plots/cartesian/axes":554}],996:[function(u,q,W){var o=u("../../components/fx"),p=u("../../lib"),x=u("../scatter/get_trace_color"),y=p.fillText,e=u("../../constants/numerical").BADNUM;function r(t,i,n){if(!t.hovertemplate){var h=(i.hi||t.hoverinfo).split("+"),s=h.indexOf("all")!==-1,a=h.indexOf("lon")!==-1,l=h.indexOf("lat")!==-1,f=i.lonlat,d=[];return s||a&&l?d.push("("+v(f[1])+", "+v(f[0])+")"):a?d.push(n.lon+v(f[0])):l&&d.push(n.lat+v(f[1])),(s||h.indexOf("text")!==-1)&&y(i,t,d),d.join("<br>")}function v(m){return m+"\xB0"}}q.exports={hoverPoints:function(t,i,n){var h=t.cd,s=h[0].trace,a=t.xa,l=t.ya,f=t.subplot,d=360*(i>=0?Math.floor((i+180)/360):Math.ceil((i-180)/360)),v=i-d;if(o.getClosest(h,function(L){var M=L.lonlat;if(M[0]===e)return 1/0;var I=p.modHalf(M[0],360),P=M[1],S=f.project([I,P]),E=S.x-a.c2p([v,P]),D=S.y-l.c2p([I,n]),F=Math.max(3,L.mrc||0);return Math.max(Math.sqrt(E*E+D*D)-F,1-3/F)},t),t.index!==!1){var m=h[t.index],c=m.lonlat,b=[p.modHalf(c[0],360)+d,c[1]],g=a.c2p(b),w=l.c2p(b),_=m.mrc||1;t.x0=g-_,t.x1=g+_,t.y0=w-_,t.y1=w+_;var T={};T[s.subplot]={_subplot:f};var k=s._module.formatLabels(m,s,T);return t.lonLabel=k.lonLabel,t.latLabel=k.latLabel,t.color=x(s,m),t.extraText=r(s,m,h[0].t.labels),t.hovertemplate=s.hovertemplate,[t]}},getExtraText:r}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":936}],997:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults"),colorbar:u("../scatter/marker_colorbar"),formatLabels:u("./format_labels"),calc:u("../scattergeo/calc"),plot:u("./plot"),hoverPoints:u("./hover").hoverPoints,eventData:u("./event_data"),selectPoints:u("./select"),styleOnSelect:function(o,p){p&&p[0].trace._glTrace.update(p)},moduleType:"trace",name:"scattermapbox",basePlotModule:u("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":613,"../scatter/marker_colorbar":944,"../scattergeo/calc":969,"./attributes":991,"./defaults":993,"./event_data":994,"./format_labels":995,"./hover":996,"./plot":998,"./select":999}],998:[function(u,q,W){var o=u("./convert"),p=u("../../plots/mapbox/constants").traceLayerPrefix,x=["fill","line","circle","symbol"];function y(r,t){this.type="scattermapbox",this.subplot=r,this.uid=t,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol"},this.layerIds={fill:p+t+"-fill",line:p+t+"-line",circle:p+t+"-circle",symbol:p+t+"-symbol"},this.below=null}var e=y.prototype;e.addSource=function(r,t){this.subplot.map.addSource(this.sourceIds[r],{type:"geojson",data:t.geojson})},e.setSourceData=function(r,t){this.subplot.map.getSource(this.sourceIds[r]).setData(t.geojson)},e.addLayer=function(r,t,i){this.subplot.addLayer({type:r,id:this.layerIds[r],source:this.sourceIds[r],layout:t.layout,paint:t.paint},i)},e.update=function(r){var t,i,n,h=this.subplot,s=h.map,a=o(h.gd,r),l=h.belowLookup["trace-"+this.uid];if(l!==this.below){for(t=x.length-1;t>=0;t--)i=x[t],s.removeLayer(this.layerIds[i]);for(t=0;t<x.length;t++)n=a[i=x[t]],this.addLayer(i,n,l);this.below=l}for(t=0;t<x.length;t++)n=a[i=x[t]],h.setOptions(this.layerIds[i],"setLayoutProperty",n.layout),n.layout.visibility==="visible"&&(this.setSourceData(i,n),h.setOptions(this.layerIds[i],"setPaintProperty",n.paint));r[0].trace._glTrace=this},e.dispose=function(){for(var r=this.subplot.map,t=x.length-1;t>=0;t--){var i=x[t];r.removeLayer(this.layerIds[i]),r.removeSource(this.sourceIds[i])}},q.exports=function(r,t){for(var i=t[0].trace,n=new y(r,i.uid),h=o(r.gd,t),s=n.below=r.belowLookup["trace-"+i.uid],a=0;a<x.length;a++){var l=x[a],f=h[l];n.addSource(l,f),n.addLayer(l,f,s)}return t[0].trace._glTrace=n,n}},{"../../plots/mapbox/constants":611,"./convert":992}],999:[function(u,q,W){var o=u("../../lib"),p=u("../scatter/subtypes"),x=u("../../constants/numerical").BADNUM;q.exports=function(y,e){var r,t=y.cd,i=y.xaxis,n=y.yaxis,h=[],s=t[0].trace;if(!p.hasMarkers(s))return[];if(e===!1)for(r=0;r<t.length;r++)t[r].selected=0;else for(r=0;r<t.length;r++){var a=t[r],l=a.lonlat;if(l[0]!==x){var f=[o.modHalf(l[0],360),l[1]],d=[i.c2p(f),n.c2p(f)];e.contains(d,null,r,y)?(h.push({pointNumber:r,lon:l[0],lat:l[1]}),a.selected=1):a.selected=0}}return h}},{"../../constants/numerical":479,"../../lib":503,"../scatter/subtypes":951}],1e3:[function(u,q,W){var o=u("../../plots/template_attributes").hovertemplateAttrs,p=u("../../plots/template_attributes").texttemplateAttrs,x=u("../../lib/extend").extendFlat,y=u("../scatter/attributes"),e=u("../../plots/attributes"),r=y.line;q.exports={mode:y.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:y.text,texttemplate:p({editType:"plot"},{keys:["r","theta","text"]}),hovertext:y.hovertext,line:{color:r.color,width:r.width,dash:r.dash,shape:x({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:y.connectgaps,marker:y.marker,cliponaxis:x({},y.cliponaxis,{dflt:!1}),textposition:y.textposition,textfont:y.textfont,fill:x({},y.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:y.fillcolor,hoverinfo:x({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:y.hoveron,hovertemplate:o(),selected:y.selected,unselected:y.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1001:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../constants/numerical").BADNUM,x=u("../../plots/cartesian/axes"),y=u("../scatter/colorscale_calc"),e=u("../scatter/arrays_to_calcdata"),r=u("../scatter/calc_selection"),t=u("../scatter/calc").calcMarkerSize;q.exports=function(i,n){for(var h=i._fullLayout,s=n.subplot,a=h[s].radialaxis,l=h[s].angularaxis,f=a.makeCalcdata(n,"r"),d=l.makeCalcdata(n,"theta"),v=n._length,m=new Array(v),c=0;c<v;c++){var b=f[c],g=d[c],w=m[c]={};o(b)&&o(g)?(w.r=b,w.theta=g):w.r=p}var _=t(n,v);return n._extremes.x=x.findExtremes(a,f,{ppad:_}),y(i,n),e(m,n),r(m,n),m}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1002:[function(u,q,W){var o=u("../../lib"),p=u("../scatter/subtypes"),x=u("../scatter/marker_defaults"),y=u("../scatter/line_defaults"),e=u("../scatter/line_shape_defaults"),r=u("../scatter/text_defaults"),t=u("../scatter/fillcolor_defaults"),i=u("../scatter/constants").PTS_LINESONLY,n=u("./attributes");function h(s,a,l,f){var d,v=f("r"),m=f("theta");if(v)m?d=Math.min(v.length,m.length):(d=v.length,f("theta0"),f("dtheta"));else{if(!m)return 0;d=a.theta.length,f("r0"),f("dr")}return a._length=d,d}q.exports={handleRThetaDefaults:h,supplyDefaults:function(s,a,l,f){function d(c,b){return o.coerce(s,a,n,c,b)}var v=h(s,a,f,d);if(v){d("thetaunit"),d("mode",v<i?"lines+markers":"lines"),d("text"),d("hovertext"),a.hoveron!=="fills"&&d("hovertemplate"),p.hasLines(a)&&(y(s,a,l,f,d),e(s,a,d),d("connectgaps")),p.hasMarkers(a)&&x(s,a,l,f,d,{gradient:!0}),p.hasText(a)&&(d("texttemplate"),r(s,a,f,d));var m=[];(p.hasMarkers(a)||p.hasText(a))&&(d("cliponaxis"),d("marker.maxdisplayed"),m.push("points")),d("fill"),a.fill!=="none"&&(t(s,a,l,d),p.hasLines(a)||e(s,a,d)),a.fill!=="tonext"&&a.fill!=="toself"||m.push("fills"),d("hoveron",m.join("+")||"points"),o.coerceSelectionMarkerOpacity(a,d)}else a.visible=!1}}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1e3}],1003:[function(u,q,W){var o=u("../../lib"),p=u("../../plots/cartesian/axes");q.exports=function(x,y,e){var r,t,i={},n=e[y.subplot]._subplot;n?(r=n.radialAxis,t=n.angularAxis):(r=(n=e[y.subplot]).radialaxis,t=n.angularaxis);var h=r.c2l(x.r);i.rLabel=p.tickText(r,h,!0).text;var s=t.thetaunit==="degrees"?o.rad2deg(x.theta):x.theta;return i.thetaLabel=p.tickText(t,s,!0).text,i}},{"../../lib":503,"../../plots/cartesian/axes":554}],1004:[function(u,q,W){var o=u("../scatter/hover");function p(x,y,e,r){var t=e.radialAxis,i=e.angularAxis;t._hovertitle="r",i._hovertitle="\u03B8";var n={};n[y.subplot]={_subplot:e};var h=y._module.formatLabels(x,y,n);r.rLabel=h.rLabel,r.thetaLabel=h.thetaLabel;var s=x.hi||y.hoverinfo,a=[];function l(d,v){a.push(d._hovertitle+": "+v)}if(!y.hovertemplate){var f=s.split("+");f.indexOf("all")!==-1&&(f=["r","theta","text"]),f.indexOf("r")!==-1&&l(t,r.rLabel),f.indexOf("theta")!==-1&&l(i,r.thetaLabel),f.indexOf("text")!==-1&&r.text&&(a.push(r.text),delete r.text),r.extraText=a.join("<br>")}}q.exports={hoverPoints:function(x,y,e,r){var t=o(x,y,e,r);if(t&&t[0].index!==!1){var i=t[0];if(i.index===void 0)return t;var n=x.subplot,h=i.cd[i.index],s=i.trace;if(n.isPtInside(h))return i.xLabelVal=void 0,i.yLabelVal=void 0,p(h,s,n,i),i.hovertemplate=s.hovertemplate,t}},makeHoverPointText:p}},{"../scatter/hover":937}],1005:[function(u,q,W){q.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:u("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:u("./attributes"),supplyDefaults:u("./defaults").supplyDefaults,colorbar:u("../scatter/marker_colorbar"),formatLabels:u("./format_labels"),calc:u("./calc"),plot:u("./plot"),style:u("../scatter/style").style,styleOnSelect:u("../scatter/style").styleOnSelect,hoverPoints:u("./hover").hoverPoints,selectPoints:u("../scatter/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1e3,"./calc":1001,"./defaults":1002,"./format_labels":1003,"./hover":1004,"./plot":1006}],1006:[function(u,q,W){var o=u("../scatter/plot"),p=u("../../constants/numerical").BADNUM;q.exports=function(x,y,e){for(var r=y.layers.frontplot.select("g.scatterlayer"),t={xaxis:y.xaxis,yaxis:y.yaxis,plot:y.framework,layerClipId:y._hasClipOnAxisFalse?y.clipIds.forTraces:null},i=y.radialAxis,n=y.angularAxis,h=0;h<e.length;h++)for(var s=e[h],a=0;a<s.length;a++){var l=s[a],f=l.r;if(f===p)l.x=l.y=p;else{var d=i.c2g(f),v=n.c2g(l.theta);l.x=d*Math.cos(v),l.y=d*Math.sin(v)}}o(x,t,e,r)}},{"../../constants/numerical":479,"../scatter/plot":947}],1007:[function(u,q,W){var o=u("../scatterpolar/attributes"),p=u("../scattergl/attributes"),x=u("../../plots/template_attributes").texttemplateAttrs;q.exports={mode:o.mode,r:o.r,theta:o.theta,r0:o.r0,dr:o.dr,theta0:o.theta0,dtheta:o.dtheta,thetaunit:o.thetaunit,text:o.text,texttemplate:x({editType:"plot"},{keys:["r","theta","text"]}),hovertext:o.hovertext,hovertemplate:o.hovertemplate,line:p.line,connectgaps:p.connectgaps,marker:p.marker,fill:p.fill,fillcolor:p.fillcolor,textposition:p.textposition,textfont:p.textfont,hoverinfo:o.hoverinfo,selected:o.selected,unselected:o.unselected}},{"../../plots/template_attributes":633,"../scattergl/attributes":978,"../scatterpolar/attributes":1e3}],1008:[function(u,q,W){var o=u("../scatter/colorscale_calc"),p=u("../scatter/calc").calcMarkerSize,x=u("../scattergl/convert"),y=u("../../plots/cartesian/axes"),e=u("../scattergl/constants").TOO_MANY_POINTS;q.exports=function(r,t){var i=r._fullLayout,n=t.subplot,h=i[n].radialaxis,s=i[n].angularaxis,a=t._r=h.makeCalcdata(t,"r"),l=t._theta=s.makeCalcdata(t,"theta"),f=t._length,d={};f<a.length&&(a=a.slice(0,f)),f<l.length&&(l=l.slice(0,f)),d.r=a,d.theta=l,o(r,t);var v,m=d.opts=x.style(r,t);return f<e?v=p(t,f):m.marker&&(v=2*(m.marker.sizeAvg||Math.max(m.marker.size,3))),t._extremes.x=y.findExtremes(h,a,{ppad:v}),[{x:!1,y:!1,t:d,trace:t}]}},{"../../plots/cartesian/axes":554,"../scatter/calc":927,"../scatter/colorscale_calc":929,"../scattergl/constants":980,"../scattergl/convert":981}],1009:[function(u,q,W){var o=u("../../lib"),p=u("../scatter/subtypes"),x=u("../scatterpolar/defaults").handleRThetaDefaults,y=u("../scatter/marker_defaults"),e=u("../scatter/line_defaults"),r=u("../scatter/text_defaults"),t=u("../scatter/fillcolor_defaults"),i=u("../scatter/constants").PTS_LINESONLY,n=u("./attributes");q.exports=function(h,s,a,l){function f(v,m){return o.coerce(h,s,n,v,m)}var d=x(h,s,l,f);d?(f("thetaunit"),f("mode",d<i?"lines+markers":"lines"),f("text"),f("hovertext"),s.hoveron!=="fills"&&f("hovertemplate"),p.hasLines(s)&&(e(h,s,a,l,f),f("connectgaps")),p.hasMarkers(s)&&y(h,s,a,l,f),p.hasText(s)&&(f("texttemplate"),r(h,s,l,f)),f("fill"),s.fill!=="none"&&t(h,s,a,f),o.coerceSelectionMarkerOpacity(s,f)):s.visible=!1}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"../scatterpolar/defaults":1002,"./attributes":1007}],1010:[function(u,q,W){var o=u("../scatterpolar/format_labels");q.exports=function(p,x,y){var e=p.i;return"r"in p||(p.r=x._r[e]),"theta"in p||(p.theta=x._theta[e]),o(p,x,y)}},{"../scatterpolar/format_labels":1003}],1011:[function(u,q,W){var o=u("../scattergl/hover"),p=u("../scatterpolar/hover").makeHoverPointText;q.exports={hoverPoints:function(x,y,e,r){var t=x.cd[0].t,i=t.r,n=t.theta,h=o.hoverPoints(x,y,e,r);if(h&&h[0].index!==!1){var s=h[0];if(s.index===void 0)return h;var a=x.subplot,l=s.cd[s.index],f=s.trace;if(l.r=i[s.index],l.theta=n[s.index],a.isPtInside(l))return s.xLabelVal=void 0,s.yLabelVal=void 0,p(l,f,a,s),h}}}},{"../scattergl/hover":986,"../scatterpolar/hover":1004}],1012:[function(u,q,W){q.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:u("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:u("./attributes"),supplyDefaults:u("./defaults"),colorbar:u("../scatter/marker_colorbar"),formatLabels:u("./format_labels"),calc:u("./calc"),plot:u("./plot"),hoverPoints:u("./hover").hoverPoints,selectPoints:u("../scattergl/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":944,"../scattergl/select":990,"./attributes":1007,"./calc":1008,"./defaults":1009,"./format_labels":1010,"./hover":1011,"./plot":1013}],1013:[function(u,q,W){var o=u("@plotly/point-cluster"),p=u("fast-isnumeric"),x=u("../scattergl/plot"),y=u("../scattergl/scene_update"),e=u("../scattergl/convert"),r=u("../../lib"),t=u("../scattergl/constants").TOO_MANY_POINTS;q.exports=function(i,n,h){if(h.length){var s=n.radialAxis,a=n.angularAxis,l=y(i,n);return h.forEach(function(f){if(f&&f[0]&&f[0].trace){var d,v=f[0],m=v.trace,c=v.t,b=m._length,g=c.r,w=c.theta,_=c.opts,T=g.slice(),k=w.slice();for(d=0;d<g.length;d++)n.isPtInside({r:g[d],theta:w[d]})||(T[d]=NaN,k[d]=NaN);var L=new Array(2*b),M=Array(b),I=Array(b);for(d=0;d<b;d++){var P,S,E=T[d];if(p(E)){var D=s.c2g(E),F=a.c2g(k[d],m.thetaunit);P=D*Math.cos(F),S=D*Math.sin(F)}else P=S=NaN;M[d]=L[2*d]=P,I[d]=L[2*d+1]=S}c.tree=o(L),_.marker&&b>=t&&(_.marker.cluster=c.tree),_.marker&&(_.markerSel.positions=_.markerUnsel.positions=_.marker.positions=L),_.line&&L.length>1&&r.extendFlat(_.line,e.linePositions(i,m,L)),_.text&&(r.extendFlat(_.text,{positions:L},e.textPosition(i,m,_.text,_.marker)),r.extendFlat(_.textSel,{positions:L},e.textPosition(i,m,_.text,_.markerSel)),r.extendFlat(_.textUnsel,{positions:L},e.textPosition(i,m,_.text,_.markerUnsel))),_.fill&&!l.fill2d&&(l.fill2d=!0),_.marker&&!l.scatter2d&&(l.scatter2d=!0),_.line&&!l.line2d&&(l.line2d=!0),_.text&&!l.glText&&(l.glText=!0),l.lineOptions.push(_.line),l.fillOptions.push(_.fill),l.markerOptions.push(_.marker),l.markerSelectedOptions.push(_.markerSel),l.markerUnselectedOptions.push(_.markerUnsel),l.textOptions.push(_.text),l.textSelectedOptions.push(_.textSel),l.textUnselectedOptions.push(_.textUnsel),l.selectBatch.push([]),l.unselectBatch.push([]),c.x=M,c.y=I,c.rawx=M,c.rawy=I,c.r=g,c.theta=w,c.positions=L,c._scene=l,c.index=l.count,l.count++}}),x(i,n,h)}}},{"../../lib":503,"../scattergl/constants":980,"../scattergl/convert":981,"../scattergl/plot":988,"../scattergl/scene_update":989,"@plotly/point-cluster":59,"fast-isnumeric":190}],1014:[function(u,q,W){var o=u("../../plots/template_attributes").hovertemplateAttrs,p=u("../../plots/template_attributes").texttemplateAttrs,x=u("../../lib/extend").extendFlat,y=u("../scatter/attributes"),e=u("../../plots/attributes"),r=y.line;q.exports={mode:y.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:y.text,texttemplate:p({editType:"plot"},{keys:["real","imag","text"]}),hovertext:y.hovertext,line:{color:r.color,width:r.width,dash:r.dash,shape:x({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:y.connectgaps,marker:y.marker,cliponaxis:x({},y.cliponaxis,{dflt:!1}),textposition:y.textposition,textfont:y.textfont,fill:x({},y.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:y.fillcolor,hoverinfo:x({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:y.hoveron,hovertemplate:o(),selected:y.selected,unselected:y.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1015:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../../constants/numerical").BADNUM,x=u("../scatter/colorscale_calc"),y=u("../scatter/arrays_to_calcdata"),e=u("../scatter/calc_selection"),r=u("../scatter/calc").calcMarkerSize;q.exports=function(t,i){for(var n=t._fullLayout,h=i.subplot,s=n[h].realaxis,a=n[h].imaginaryaxis,l=s.makeCalcdata(i,"real"),f=a.makeCalcdata(i,"imag"),d=i._length,v=new Array(d),m=0;m<d;m++){var c=l[m],b=f[m],g=v[m]={};o(c)&&o(b)?(g.real=c,g.imag=b):g.real=p}return r(i,d),x(t,i),y(v,i),e(v,i),v}},{"../../constants/numerical":479,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1016:[function(u,q,W){var o=u("../../lib"),p=u("../scatter/subtypes"),x=u("../scatter/marker_defaults"),y=u("../scatter/line_defaults"),e=u("../scatter/line_shape_defaults"),r=u("../scatter/text_defaults"),t=u("../scatter/fillcolor_defaults"),i=u("../scatter/constants").PTS_LINESONLY,n=u("./attributes");q.exports=function(h,s,a,l){function f(m,c){return o.coerce(h,s,n,m,c)}var d=function(m,c,b,g){var w,_=g("real"),T=g("imag");return _&&T&&(w=Math.min(_.length,T.length)),c._length=w,w}(0,s,0,f);if(d){f("mode",d<i?"lines+markers":"lines"),f("text"),f("hovertext"),s.hoveron!=="fills"&&f("hovertemplate"),p.hasLines(s)&&(y(h,s,a,l,f),e(h,s,f),f("connectgaps")),p.hasMarkers(s)&&x(h,s,a,l,f,{gradient:!0}),p.hasText(s)&&(f("texttemplate"),r(h,s,l,f));var v=[];(p.hasMarkers(s)||p.hasText(s))&&(f("cliponaxis"),f("marker.maxdisplayed"),v.push("points")),f("fill"),s.fill!=="none"&&(t(h,s,a,f),p.hasLines(s)||e(h,s,f)),s.fill!=="tonext"&&s.fill!=="toself"||v.push("fills"),f("hoveron",v.join("+")||"points"),o.coerceSelectionMarkerOpacity(s,f)}else s.visible=!1}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1014}],1017:[function(u,q,W){var o=u("../../plots/cartesian/axes");q.exports=function(p,x,y){var e={},r=y[x.subplot]._subplot;return e.realLabel=o.tickText(r.radialAxis,p.real,!0).text,e.imagLabel=o.tickText(r.angularAxis,p.imag,!0).text,e}},{"../../plots/cartesian/axes":554}],1018:[function(u,q,W){var o=u("../scatter/hover");function p(x,y,e,r){var t=e.radialAxis,i=e.angularAxis;t._hovertitle="real",i._hovertitle="imag";var n={};n[y.subplot]={_subplot:e};var h=y._module.formatLabels(x,y,n);r.realLabel=h.realLabel,r.imagLabel=h.imagLabel;var s=x.hi||y.hoverinfo,a=[];function l(d,v){a.push(d._hovertitle+": "+v)}if(!y.hovertemplate){var f=s.split("+");f.indexOf("all")!==-1&&(f=["real","imag","text"]),f.indexOf("real")!==-1&&l(t,r.realLabel),f.indexOf("imag")!==-1&&l(i,r.imagLabel),f.indexOf("text")!==-1&&r.text&&(a.push(r.text),delete r.text),r.extraText=a.join("<br>")}}q.exports={hoverPoints:function(x,y,e,r){var t=o(x,y,e,r);if(t&&t[0].index!==!1){var i=t[0];if(i.index===void 0)return t;var n=x.subplot,h=i.cd[i.index],s=i.trace;if(n.isPtInside(h))return i.xLabelVal=void 0,i.yLabelVal=void 0,p(h,s,n,i),i.hovertemplate=s.hovertemplate,t}},makeHoverPointText:p}},{"../scatter/hover":937}],1019:[function(u,q,W){q.exports={moduleType:"trace",name:"scattersmith",basePlotModule:u("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:u("./attributes"),supplyDefaults:u("./defaults"),colorbar:u("../scatter/marker_colorbar"),formatLabels:u("./format_labels"),calc:u("./calc"),plot:u("./plot"),style:u("../scatter/style").style,styleOnSelect:u("../scatter/style").styleOnSelect,hoverPoints:u("./hover").hoverPoints,selectPoints:u("../scatter/select"),meta:{}}},{"../../plots/smith":629,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1014,"./calc":1015,"./defaults":1016,"./format_labels":1017,"./hover":1018,"./plot":1020}],1020:[function(u,q,W){var o=u("../scatter/plot"),p=u("../../constants/numerical").BADNUM,x=u("../../plots/smith/helpers").smith;q.exports=function(y,e,r){for(var t=e.layers.frontplot.select("g.scatterlayer"),i={xaxis:e.xaxis,yaxis:e.yaxis,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},n=0;n<r.length;n++)for(var h=r[n],s=0;s<h.length;s++){var a=h[s],l=a.real;if(l===p)a.x=a.y=p;else{var f=x([l,a.imag]);a.x=f[0],a.y=f[1]}}o(y,i,r,t)}},{"../../constants/numerical":479,"../../plots/smith/helpers":628,"../scatter/plot":947}],1021:[function(u,q,W){var o=u("../../plots/template_attributes").hovertemplateAttrs,p=u("../../plots/template_attributes").texttemplateAttrs,x=u("../scatter/attributes"),y=u("../../plots/attributes"),e=u("../../components/colorscale/attributes"),r=u("../../components/drawing/attributes").dash,t=u("../../lib/extend").extendFlat,i=x.marker,n=x.line,h=i.line;q.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:t({},x.mode,{dflt:"markers"}),text:t({},x.text,{}),texttemplate:p({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:t({},x.hovertext,{}),line:{color:n.color,width:n.width,dash:r,shape:t({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:x.connectgaps,cliponaxis:x.cliponaxis,fill:t({},x.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:x.fillcolor,marker:t({symbol:i.symbol,opacity:i.opacity,maxdisplayed:i.maxdisplayed,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,line:t({width:h.width,editType:"calc"},e("marker.line")),gradient:i.gradient,editType:"calc"},e("marker")),textfont:x.textfont,textposition:x.textposition,selected:x.selected,unselected:x.unselected,hoverinfo:t({},y.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:x.hoveron,hovertemplate:o()}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1022:[function(u,q,W){var o=u("fast-isnumeric"),p=u("../scatter/colorscale_calc"),x=u("../scatter/arrays_to_calcdata"),y=u("../scatter/calc_selection"),e=u("../scatter/calc").calcMarkerSize,r=["a","b","c"],t={a:["b","c"],b:["a","c"],c:["a","b"]};q.exports=function(i,n){var h,s,a,l,f,d,v=i._fullLayout[n.subplot].sum,m=n.sum||v,c={a:n.a,b:n.b,c:n.c};for(h=0;h<r.length;h++)if(!c[a=r[h]]){for(f=c[t[a][0]],d=c[t[a][1]],l=new Array(f.length),s=0;s<f.length;s++)l[s]=m-f[s]-d[s];c[a]=l}var b,g,w,_,T,k,L=n._length,M=new Array(L);for(h=0;h<L;h++)b=c.a[h],g=c.b[h],w=c.c[h],o(b)&&o(g)&&o(w)?((_=v/((b=+b)+(g=+g)+(w=+w)))!=1&&(b*=_,g*=_,w*=_),k=b,T=w-g,M[h]={x:T,y:k,a:b,b:g,c:w}):M[h]={x:!1,y:!1};return e(n,L),p(i,n),x(M,n),y(M,n),M}},{"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1023:[function(u,q,W){var o=u("../../lib"),p=u("../scatter/constants"),x=u("../scatter/subtypes"),y=u("../scatter/marker_defaults"),e=u("../scatter/line_defaults"),r=u("../scatter/line_shape_defaults"),t=u("../scatter/text_defaults"),i=u("../scatter/fillcolor_defaults"),n=u("./attributes");q.exports=function(h,s,a,l){function f(g,w){return o.coerce(h,s,n,g,w)}var d,v=f("a"),m=f("b"),c=f("c");if(v?(d=v.length,m?(d=Math.min(d,m.length),c&&(d=Math.min(d,c.length))):d=c?Math.min(d,c.length):0):m&&c&&(d=Math.min(m.length,c.length)),d){s._length=d,f("sum"),f("text"),f("hovertext"),s.hoveron!=="fills"&&f("hovertemplate"),f("mode",d<p.PTS_LINESONLY?"lines+markers":"lines"),x.hasLines(s)&&(e(h,s,a,l,f),r(h,s,f),f("connectgaps")),x.hasMarkers(s)&&y(h,s,a,l,f,{gradient:!0}),x.hasText(s)&&(f("texttemplate"),t(h,s,l,f));var b=[];(x.hasMarkers(s)||x.hasText(s))&&(f("cliponaxis"),f("marker.maxdisplayed"),b.push("points")),f("fill"),s.fill!=="none"&&(i(h,s,a,f),x.hasLines(s)||r(h,s,f)),s.fill!=="tonext"&&s.fill!=="toself"||b.push("fills"),f("hoveron",b.join("+")||"points"),o.coerceSelectionMarkerOpacity(s,f)}else s.visible=!1}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1021}],1024:[function(u,q,W){q.exports=function(o,p,x,y,e){if(p.xa&&(o.xaxis=p.xa),p.ya&&(o.yaxis=p.ya),y[e]){var r=y[e];o.a=r.a,o.b=r.b,o.c=r.c}else o.a=p.a,o.b=p.b,o.c=p.c;return o}},{}],1025:[function(u,q,W){var o=u("../../plots/cartesian/axes");q.exports=function(p,x,y){var e={},r=y[x.subplot]._subplot;return e.aLabel=o.tickText(r.aaxis,p.a,!0).text,e.bLabel=o.tickText(r.baxis,p.b,!0).text,e.cLabel=o.tickText(r.caxis,p.c,!0).text,e}},{"../../plots/cartesian/axes":554}],1026:[function(u,q,W){var o=u("../scatter/hover");q.exports=function(p,x,y,e){var r=o(p,x,y,e);if(r&&r[0].index!==!1){var t=r[0];if(t.index===void 0){var i=1-t.y0/p.ya._length,n=p.xa._length,h=n*i/2,s=n-h;return t.x0=Math.max(Math.min(t.x0,s),h),t.x1=Math.max(Math.min(t.x1,s),h),r}var a=t.cd[t.index],l=t.trace,f=t.subplot;t.a=a.a,t.b=a.b,t.c=a.c,t.xLabelVal=void 0,t.yLabelVal=void 0;var d={};d[l.subplot]={_subplot:f};var v=l._module.formatLabels(a,l,d);t.aLabel=v.aLabel,t.bLabel=v.bLabel,t.cLabel=v.cLabel;var m=a.hi||l.hoverinfo,c=[];if(!l.hovertemplate){var b=m.split("+");b.indexOf("all")!==-1&&(b=["a","b","c"]),b.indexOf("a")!==-1&&g(f.aaxis,t.aLabel),b.indexOf("b")!==-1&&g(f.baxis,t.bLabel),b.indexOf("c")!==-1&&g(f.caxis,t.cLabel)}return t.extraText=c.join("<br>"),t.hovertemplate=l.hovertemplate,r}function g(w,_){c.push(w._hovertitle+": "+_)}}},{"../scatter/hover":937}],1027:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults"),colorbar:u("../scatter/marker_colorbar"),formatLabels:u("./format_labels"),calc:u("./calc"),plot:u("./plot"),style:u("../scatter/style").style,styleOnSelect:u("../scatter/style").styleOnSelect,hoverPoints:u("./hover"),selectPoints:u("../scatter/select"),eventData:u("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:u("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":634,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1021,"./calc":1022,"./defaults":1023,"./event_data":1024,"./format_labels":1025,"./hover":1026,"./plot":1028}],1028:[function(u,q,W){var o=u("../scatter/plot");q.exports=function(p,x,y){var e=x.plotContainer;e.select(".scatterlayer").selectAll("*").remove();var r={xaxis:x.xaxis,yaxis:x.yaxis,plot:e,layerClipId:x._hasClipOnAxisFalse?x.clipIdRelative:null},t=x.layers.frontplot.select("g.scatterlayer");o(p,r,y,t)}},{"../scatter/plot":947}],1029:[function(u,q,W){var o=u("../scatter/attributes"),p=u("../../components/colorscale/attributes"),x=u("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=u("../../plots/template_attributes").hovertemplateAttrs,e=u("../scattergl/attributes"),r=u("../../plots/cartesian/constants").idRegex,t=u("../../plot_api/plot_template").templatedArray,i=u("../../lib/extend").extendFlat,n=o.marker,h=n.line,s=i(p("marker.line",{editTypeOverride:"calc"}),{width:i({},h.width,{editType:"calc"}),editType:"calc"}),a=i(p("marker"),{symbol:n.symbol,size:i({},n.size,{editType:"markerSize"}),sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,opacity:n.opacity,colorbar:n.colorbar,line:s,editType:"calc"});function l(f){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:r[f],editType:"plot"}}}a.color.editType=a.cmin.editType=a.cmax.editType="style",q.exports={dimensions:t("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:i({},e.text,{}),hovertext:i({},e.hovertext,{}),hovertemplate:y(),xhoverformat:x("x"),yhoverformat:x("y"),marker:a,xaxes:l("x"),yaxes:l("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/constants":561,"../../plots/template_attributes":633,"../scatter/attributes":926,"../scattergl/attributes":978}],1030:[function(u,q,W){var o=u("regl-line2d"),p=u("../../registry"),x=u("../../lib/prepare_regl"),y=u("../../plots/get_data").getModuleCalcData,e=u("../../plots/cartesian"),r=u("../../plots/cartesian/axis_ids").getFromId,t=u("../../plots/cartesian/axes").shouldShowZeroLine;function i(h,s,a){for(var l=a.matrixOptions.data.length,f=s._visibleDims,d=a.viewOpts.ranges=new Array(l),v=0;v<f.length;v++){var m=f[v],c=d[v]=new Array(4),b=r(h,s._diag[m][0]);b&&(c[0]=b.r2l(b.range[0]),c[2]=b.r2l(b.range[1]));var g=r(h,s._diag[m][1]);g&&(c[1]=g.r2l(g.range[0]),c[3]=g.r2l(g.range[1]))}a.selectBatch.length||a.unselectBatch.length?a.matrix.update({ranges:d},{ranges:d}):a.matrix.update({ranges:d})}function n(h){var s=h._fullLayout,a=s._glcanvas.data()[0].regl,l=s._splomGrid;l||(l=s._splomGrid=o(a)),l.update(function(f){var d,v=f._context.plotGlPixelRatio,m=f._fullLayout,c=m._size,b=[0,0,m.width*v,m.height*v],g={};function w(K,Z,$,re,R,N){$*=v,re*=v,R*=v,N*=v;var U=Z[K+"color"],te=Z[K+"width"],j=String(U+te);j in g?g[j].data.push(NaN,NaN,$,re,R,N):g[j]={data:[$,re,R,N],join:"rect",thickness:te*v,color:U,viewport:b,range:b,overlay:!1}}for(d in m._splomSubplots){var _,T,k=m._plots[d],L=k.xaxis,M=k.yaxis,I=L._gridVals,P=M._gridVals,S=L._offset,E=L._length,D=M._length,F=c.b+M.domain[0]*c.h,H=-M._m,V=-H*M.r2l(M.range[0],M.calendar);if(L.showgrid)for(d=0;d<I.length;d++)_=S+L.l2p(I[d].x),w("grid",L,_,F,_,F+D);if(M.showgrid)for(d=0;d<P.length;d++)T=F+V+H*P[d].x,w("grid",M,S,T,S+E,T);t(f,L,M)&&(_=S+L.l2p(0),w("zeroline",L,_,F,_,F+D)),t(f,M,L)&&w("zeroline",M,S,T=F+V+0,S+E,T)}var Q=[];for(d in g)Q.push(g[d]);return Q}(h))}q.exports={name:"splom",attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:function(h){var s=h._fullLayout,a=p.getModule("splom"),l=y(h.calcdata,a)[0];x(h,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(s._hasOnlyLargeSploms&&n(h),a.plot(h,{},l))},drag:function(h){var s=h.calcdata,a=h._fullLayout;a._hasOnlyLargeSploms&&n(h);for(var l=0;l<s.length;l++){var f=s[l][0].trace,d=a._splomScenes[f.uid];f.type==="splom"&&d&&d.matrix&&i(h,f,d)}},updateGrid:n,clean:function(h,s,a,l){var f,d={};if(l._splomScenes){for(f=0;f<h.length;f++){var v=h[f];v.type==="splom"&&(d[v.uid]=1)}for(f=0;f<a.length;f++){var m=a[f];if(!d[m.uid]){var c=l._splomScenes[m.uid];c&&c.destroy&&c.destroy(),l._splomScenes[m.uid]=null,delete l._splomScenes[m.uid]}}}Object.keys(l._splomScenes||{}).length===0&&delete l._splomScenes,l._splomGrid&&!s._hasOnlyLargeSploms&&l._hasOnlyLargeSploms&&(l._splomGrid.destroy(),l._splomGrid=null,delete l._splomGrid),e.clean(h,s,a,l)},updateFx:e.updateFx,toSVG:e.toSVG}},{"../../lib/prepare_regl":516,"../../plots/cartesian":568,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../../plots/get_data":593,"../../registry":638,"regl-line2d":280}],1031:[function(u,q,W){var o=u("../../lib"),p=u("../../plots/cartesian/axis_ids"),x=u("../scatter/calc").calcMarkerSize,y=u("../scatter/calc").calcAxisExpansion,e=u("../scatter/colorscale_calc"),r=u("../scattergl/convert").markerSelection,t=u("../scattergl/convert").markerStyle,i=u("./scene_update"),n=u("../../constants/numerical").BADNUM,h=u("../scattergl/constants").TOO_MANY_POINTS;q.exports=function(s,a){var l,f,d,v,m,c,b=a.dimensions,g=a._length,w={},_=w.cdata=[],T=w.data=[],k=a._visibleDims=[];function L(I,P){for(var S=I.makeCalcdata({v:P.values,vcalendar:a.calendar},"v"),E=0;E<S.length;E++)S[E]=S[E]===n?NaN:S[E];_.push(S),T.push(I.type==="log"?o.simpleMap(S,I.c2l):S)}for(l=0;l<b.length;l++)if((d=b[l]).visible){if(v=p.getFromId(s,a._diag[l][0]),m=p.getFromId(s,a._diag[l][1]),v&&m&&v.type!==m.type){o.log("Skipping splom dimension "+l+" with conflicting axis types");continue}v?(L(v,d),m&&m.type==="category"&&(m._categories=v._categories.slice())):L(m,d),k.push(l)}for(e(s,a),o.extendFlat(w,t(a)),c=_.length*g>h?w.sizeAvg||Math.max(w.size,3):x(a,g),f=0;f<k.length;f++)d=b[l=k[f]],v=p.getFromId(s,a._diag[l][0])||{},m=p.getFromId(s,a._diag[l][1])||{},y(s,a,v,m,_[f],_[f],c);var M=i(s,a);return M.matrix||(M.matrix=!0),M.matrixOptions=w,M.selectedOptions=r(a,a.selected),M.unselectedOptions=r(a,a.unselected),[{x:!1,y:!1,t:{},trace:a}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../scatter/calc":927,"../scatter/colorscale_calc":929,"../scattergl/constants":980,"../scattergl/convert":981,"./scene_update":1038}],1032:[function(u,q,W){var o=u("../../lib"),p=u("../../plots/array_container_defaults"),x=u("./attributes"),y=u("../scatter/subtypes"),e=u("../scatter/marker_defaults"),r=u("../parcoords/merge_length"),t=u("../scattergl/helpers").isOpenSymbol;function i(n,h){function s(l,f){return o.coerce(n,h,x.dimensions,l,f)}s("label");var a=s("values");a&&a.length?s("visible"):h.visible=!1,s("axis.type"),s("axis.matches")}q.exports=function(n,h,s,a){function l(g,w){return o.coerce(n,h,x,g,w)}var f=p(n,h,{name:"dimensions",handleItemDefaults:i}),d=l("diagonal.visible"),v=l("showupperhalf"),m=l("showlowerhalf");if(r(h,f,"values")&&(d||v||m)){l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),e(n,h,s,a,l);var c=t(h.marker.symbol),b=y.isBubble(h);l("marker.line.width",c||b?1:0),function(g,w,_,T){var k,L,M=w.dimensions,I=M.length,P=w.showupperhalf,S=w.showlowerhalf,E=w.diagonal.visible,D=new Array(I),F=new Array(I);for(k=0;k<I;k++){var H=k?k+1:"";D[k]="x"+H,F[k]="y"+H}var V=T("xaxes",D),Q=T("yaxes",F),K=w._diag=new Array(I);w._xaxes={},w._yaxes={};var Z=[],$=[];function re(ne,se,oe,he){if(ne){var le=ne.charAt(0),de=_._splomAxes[le];if(w["_"+le+"axes"][ne]=1,he.push(ne),!(ne in de)){var xe=de[ne]={};oe&&(xe.label=oe.label||"",oe.visible&&oe.axis&&(oe.axis.type&&(xe.type=oe.axis.type),oe.axis.matches&&(xe.matches=se)))}}}var R=!E&&!S,N=!E&&!P;for(w._axesDim={},k=0;k<I;k++){var U=M[k],te=k===0,j=k===I-1,Y=te&&R||j&&N?void 0:V[k],J=te&&N||j&&R?void 0:Q[k];re(Y,J,U,Z),re(J,Y,U,$),K[k]=[Y,J],w._axesDim[Y]=k,w._axesDim[J]=k}for(k=0;k<Z.length;k++)for(L=0;L<$.length;L++){var ee=Z[k]+$[L];k>L&&P||k<L&&S?_._splomSubplots[ee]=1:k!==L||!E&&S&&P||(_._splomSubplots[ee]=1)}(!S||!E&&P&&S)&&(_._splomGridDflt.xside="bottom",_._splomGridDflt.yside="left")}(0,h,a,l),o.coerceSelectionMarkerOpacity(h,l)}else h.visible=!1}},{"../../lib":503,"../../plots/array_container_defaults":549,"../parcoords/merge_length":897,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scattergl/helpers":985,"./attributes":1029}],1033:[function(u,q,W){var o=u("../../lib"),p=u("../scatter/colorscale_calc"),x=u("../scattergl/convert").markerStyle;q.exports=function(y,e){var r=e.trace,t=y._fullLayout._splomScenes[r.uid];if(t){p(y,r),o.extendFlat(t.matrixOptions,x(r));var i=o.extendFlat({},t.matrixOptions,t.viewOpts);t.matrix.update(i,null)}}},{"../../lib":503,"../scatter/colorscale_calc":929,"../scattergl/convert":981}],1034:[function(u,q,W){W.getDimIndex=function(o,p){for(var x=p._id,y={x:0,y:1}[x.charAt(0)],e=o._visibleDims,r=0;r<e.length;r++){var t=e[r];if(o._diag[t][y]===x)return r}return!1}},{}],1035:[function(u,q,W){var o=u("./helpers"),p=u("../scattergl/hover").calcHover;q.exports={hoverPoints:function(x,y,e){var r=x.cd[0].trace,t=x.scene.matrixOptions.cdata,i=x.xa,n=x.ya,h=i.c2p(y),s=n.c2p(e),a=x.distance,l=o.getDimIndex(r,i),f=o.getDimIndex(r,n);if(l===!1||f===!1)return[x];for(var d,v,m=t[l],c=t[f],b=a,g=0;g<m.length;g++){var w=m[g],_=c[g],T=i.c2p(w)-h,k=n.c2p(_)-s,L=Math.sqrt(T*T+k*k);L<b&&(b=v=L,d=g)}return x.index=d,x.distance=b,x.dxy=v,d===void 0?[x]:[p(x,m,c,r)]}}},{"../scattergl/hover":986,"./helpers":1034}],1036:[function(u,q,W){var o=u("../../registry"),p=u("../../components/grid");q.exports={moduleType:"trace",name:"splom",basePlotModule:u("./base_plot"),categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:u("./attributes"),supplyDefaults:u("./defaults"),colorbar:u("../scatter/marker_colorbar"),calc:u("./calc"),plot:u("./plot"),hoverPoints:u("./hover").hoverPoints,selectPoints:u("./select"),editStyle:u("./edit_style"),meta:{}},o.register(p)},{"../../components/grid":410,"../../registry":638,"../scatter/marker_colorbar":944,"./attributes":1029,"./base_plot":1030,"./calc":1031,"./defaults":1032,"./edit_style":1033,"./hover":1035,"./plot":1037,"./select":1039}],1037:[function(u,q,W){var o=u("regl-splom"),p=u("../../lib"),x=u("../../plots/cartesian/axis_ids"),y=u("../../components/dragelement/helpers").selectMode;function e(r,t){var i,n,h,s,a,l=r._fullLayout,f=l._size,d=t.trace,v=t.t,m=l._splomScenes[d.uid],c=m.matrixOptions,b=c.cdata,g=l._glcanvas.data()[0].regl,w=l.dragmode;if(b.length!==0){c.lower=d.showupperhalf,c.upper=d.showlowerhalf,c.diagonal=d.diagonal.visible;var _=d._visibleDims,T=b.length,k=m.viewOpts={};for(k.ranges=new Array(T),k.domains=new Array(T),a=0;a<_.length;a++){h=_[a];var L=k.ranges[a]=new Array(4),M=k.domains[a]=new Array(4);(i=x.getFromId(r,d._diag[h][0]))&&(L[0]=i._rl[0],L[2]=i._rl[1],M[0]=i.domain[0],M[2]=i.domain[1]),(n=x.getFromId(r,d._diag[h][1]))&&(L[1]=n._rl[0],L[3]=n._rl[1],M[1]=n.domain[0],M[3]=n.domain[1])}var I=r._context.plotGlPixelRatio,P=f.l*I,S=f.b*I,E=f.w*I,D=f.h*I;k.viewport=[P,S,E+P,D+S],m.matrix===!0&&(m.matrix=o(g));var F=l.clickmode.indexOf("select")>-1,H=!0;if(y(w)||!!d.selectedpoints||F){var V=d._length;if(d.selectedpoints){m.selectBatch=d.selectedpoints;var Q=d.selectedpoints,K={};for(h=0;h<Q.length;h++)K[Q[h]]=!0;var Z=[];for(h=0;h<V;h++)K[h]||Z.push(h);m.unselectBatch=Z}var $=v.xpx=new Array(T),re=v.ypx=new Array(T);for(a=0;a<_.length;a++){if(h=_[a],i=x.getFromId(r,d._diag[h][0]))for($[a]=new Array(V),s=0;s<V;s++)$[a][s]=i.c2p(b[a][s]);if(n=x.getFromId(r,d._diag[h][1]))for(re[a]=new Array(V),s=0;s<V;s++)re[a][s]=n.c2p(b[a][s])}if(m.selectBatch.length||m.unselectBatch.length){var R=p.extendFlat({},c,m.unselectedOptions,k),N=p.extendFlat({},c,m.selectedOptions,k);m.matrix.update(R,N),H=!1}}else v.xpx=v.ypx=null;if(H){var U=p.extendFlat({},c,k);m.matrix.update(U,null)}}}q.exports=function(r,t,i){if(i.length)for(var n=0;n<i.length;n++)e(r,i[n][0])}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../plots/cartesian/axis_ids":558,"regl-splom":282}],1038:[function(u,q,W){var o=u("../../lib");q.exports=function(p,x){var y=p._fullLayout,e=x.uid,r=y._splomScenes;r||(r=y._splomScenes={});var t={dirty:!0,selectBatch:[],unselectBatch:[]},i=r[x.uid];return i||((i=r[e]=o.extendFlat({},t,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){i.matrix&&i.matrix.draw&&(i.selectBatch.length||i.unselectBatch.length?i.matrix.draw(i.unselectBatch,i.selectBatch):i.matrix.draw()),i.dirty=!1},i.destroy=function(){i.matrix&&i.matrix.destroy&&i.matrix.destroy(),i.matrixOptions=null,i.selectBatch=null,i.unselectBatch=null,i=null}),i.dirty||o.extendFlat(i,t),i}},{"../../lib":503}],1039:[function(u,q,W){var o=u("../../lib"),p=u("../scatter/subtypes"),x=u("./helpers");q.exports=function(y,e){var r=y.cd,t=r[0].trace,i=r[0].t,n=y.scene,h=n.matrixOptions.cdata,s=y.xaxis,a=y.yaxis,l=[];if(!n)return l;var f=!p.hasMarkers(t)&&!p.hasText(t);if(t.visible!==!0||f)return l;var d=x.getDimIndex(t,s),v=x.getDimIndex(t,a);if(d===!1||v===!1)return l;var m=i.xpx[d],c=i.ypx[v],b=h[d],g=h[v],w=[],_=[];if(e!==!1&&!e.degenerate)for(var T=0;T<b.length;T++)e.contains([m[T],c[T]],null,T,y)?(w.push(T),l.push({pointNumber:T,x:b[T],y:g[T]})):_.push(T);var k=n.matrixOptions;return w.length||_.length?n.selectBatch.length||n.unselectBatch.length||n.matrix.update(n.unselectedOptions,o.extendFlat({},k,n.selectedOptions,n.viewOpts)):n.matrix.update(k,null),n.selectBatch=w,n.unselectBatch=_,l}},{"../../lib":503,"../scatter/subtypes":951,"./helpers":1034}],1040:[function(u,q,W){var o=u("../../components/colorscale/attributes"),p=u("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=u("../../plots/template_attributes").hovertemplateAttrs,y=u("../mesh3d/attributes"),e=u("../../plots/attributes"),r=u("../../lib/extend").extendFlat,t={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:x({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:p("u",1),vhoverformat:p("v",1),whoverformat:p("w",1),xhoverformat:p("x"),yhoverformat:p("y"),zhoverformat:p("z"),showlegend:r({},e.showlegend,{dflt:!1})};r(t,o("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(i){t[i]=y[i]}),t.hoverinfo=r({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),t.transforms=void 0,q.exports=t},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],1041:[function(u,q,W){var o=u("../../lib"),p=u("../../components/colorscale/calc");function x(r){var t,i,n,h,s,a,l,f,d,v,m,c,b=r._x,g=r._y,w=r._z,_=r._len,T=-1/0,k=1/0,L=-1/0,M=1/0,I=-1/0,P=1/0,S="";for(_&&(l=b[0],d=g[0],m=w[0]),_>1&&(f=b[_-1],v=g[_-1],c=w[_-1]),t=0;t<_;t++)T=Math.max(T,b[t]),k=Math.min(k,b[t]),L=Math.max(L,g[t]),M=Math.min(M,g[t]),I=Math.max(I,w[t]),P=Math.min(P,w[t]),h||b[t]===l||(h=!0,S+="x"),s||g[t]===d||(s=!0,S+="y"),a||w[t]===m||(a=!0,S+="z");h||(S+="x"),s||(S+="y"),a||(S+="z");var E=y(r._x),D=y(r._y),F=y(r._z);S=(S=(S=S.replace("x",(l>f?"-":"+")+"x")).replace("y",(d>v?"-":"+")+"y")).replace("z",(m>c?"-":"+")+"z");var H=function(){_=0,E=[],D=[],F=[]};(!_||_<E.length*D.length*F.length)&&H();var V=function(le){return le==="x"?b:le==="y"?g:w},Q=function(le){return le==="x"?E:le==="y"?D:F},K=function(le){return le[_-1]<le[0]?-1:1},Z=V(S[1]),$=V(S[3]),re=V(S[5]),R=Q(S[1]).length,N=Q(S[3]).length,U=Q(S[5]).length,te=!1,j=function(le,de,xe){return R*(N*le+de)+xe},Y=K(V(S[1])),J=K(V(S[3])),ee=K(V(S[5]));for(t=0;t<U-1;t++){for(i=0;i<N-1;i++){for(n=0;n<R-1;n++){var ne=j(t,i,n),se=j(t,i,n+1),oe=j(t,i+1,n),he=j(t+1,i,n);if(Z[ne]*Y<Z[se]*Y&&$[ne]*J<$[oe]*J&&re[ne]*ee<re[he]*ee||(te=!0),te)break}if(te)break}if(te)break}return te&&(o.warn("Encountered arbitrary coordinates! Unable to input data grid."),H()),{xMin:k,yMin:M,zMin:P,xMax:T,yMax:L,zMax:I,Xs:E,Ys:D,Zs:F,len:_,fill:S}}function y(r){return o.distinctVals(r).vals}function e(r,t){if(t===void 0&&(t=r.length),o.isTypedArray(r))return r.subarray(0,t);for(var i=[],n=0;n<t;n++)i[n]=+r[n];return i}q.exports={calc:function(r,t){t._len=Math.min(t.u.length,t.v.length,t.w.length,t.x.length,t.y.length,t.z.length),t._u=e(t.u,t._len),t._v=e(t.v,t._len),t._w=e(t.w,t._len),t._x=e(t.x,t._len),t._y=e(t.y,t._len),t._z=e(t.z,t._len);var i=x(t);t._gridFill=i.fill,t._Xs=i.Xs,t._Ys=i.Ys,t._Zs=i.Zs,t._len=i.len;var n,h,s,a=0;t.starts&&(n=e(t.starts.x||[]),h=e(t.starts.y||[]),s=e(t.starts.z||[]),a=Math.min(n.length,h.length,s.length)),t._startsX=n||[],t._startsY=h||[],t._startsZ=s||[];var l,f=0,d=1/0;for(l=0;l<t._len;l++){var v=t._u[l],m=t._v[l],c=t._w[l],b=Math.sqrt(v*v+m*m+c*c);f=Math.max(f,b),d=Math.min(d,b)}for(p(r,t,{vals:[d,f],containerStr:"",cLetter:"c"}),l=0;l<a;l++){var g=n[l];i.xMax=Math.max(i.xMax,g),i.xMin=Math.min(i.xMin,g);var w=h[l];i.yMax=Math.max(i.yMax,w),i.yMin=Math.min(i.yMin,w);var _=s[l];i.zMax=Math.max(i.zMax,_),i.zMin=Math.min(i.zMin,_)}t._slen=a,t._normMax=f,t._xbnds=[i.xMin,i.xMax],t._ybnds=[i.yMin,i.yMax],t._zbnds=[i.zMin,i.zMax]},filter:e,processGrid:x}},{"../../components/colorscale/calc":374,"../../lib":503}],1042:[function(u,q,W){var o=u("../../../stackgl_modules").gl_streamtube3d,p=o.createTubeMesh,x=u("../../lib"),y=u("../../lib/gl_format_color").parseColorScale,e=u("../../components/colorscale").extractOpts,r=u("../../plots/gl3d/zip3"),t={xaxis:0,yaxis:1,zaxis:2};function i(l,f){this.scene=l,this.uid=f,this.mesh=null,this.data=null}var n=i.prototype;function h(l){var f=l.length;return f>2?l.slice(1,f-1):f===2?[(l[0]+l[1])/2]:l}function s(l){var f=l.length;return f===1?[.5,.5]:[l[1]-l[0],l[f-1]-l[f-2]]}function a(l,f){var d=l.fullSceneLayout,v=l.dataScale,m=f._len,c={};function b(R,N){var U=d[N],te=v[t[N]];return x.simpleMap(R,function(j){return U.d2l(j)*te})}if(c.vectors=r(b(f._u,"xaxis"),b(f._v,"yaxis"),b(f._w,"zaxis"),m),!m)return{positions:[],cells:[]};var g=b(f._Xs,"xaxis"),w=b(f._Ys,"yaxis"),_=b(f._Zs,"zaxis");if(c.meshgrid=[g,w,_],c.gridFill=f._gridFill,f._slen)c.startingPositions=r(b(f._startsX,"xaxis"),b(f._startsY,"yaxis"),b(f._startsZ,"zaxis"));else{for(var T=w[0],k=h(g),L=h(_),M=new Array(k.length*L.length),I=0,P=0;P<k.length;P++)for(var S=0;S<L.length;S++)M[I++]=[k[P],T,L[S]];c.startingPositions=M}c.colormap=y(f),c.tubeSize=f.sizeref,c.maxLength=f.maxdisplayed;var E=b(f._xbnds,"xaxis"),D=b(f._ybnds,"yaxis"),F=b(f._zbnds,"zaxis"),H=s(g),V=s(w),Q=s(_),K=[[E[0]-H[0],D[0]-V[0],F[0]-Q[0]],[E[1]+H[1],D[1]+V[1],F[1]+Q[1]]],Z=o(c,K),$=e(f);Z.vertexIntensityBounds=[$.min/f._normMax,$.max/f._normMax];var re=f.lightposition;return Z.lightPosition=[re.x,re.y,re.z],Z.ambient=f.lighting.ambient,Z.diffuse=f.lighting.diffuse,Z.specular=f.lighting.specular,Z.roughness=f.lighting.roughness,Z.fresnel=f.lighting.fresnel,Z.opacity=f.opacity,f._pad=Z.tubeScale*f.sizeref*2,Z}n.handlePick=function(l){var f=this.scene.fullSceneLayout,d=this.scene.dataScale;function v(b,g){var w=f[g],_=d[t[g]];return w.l2c(b)/_}if(l.object===this.mesh){var m=l.data.position,c=l.data.velocity;return l.traceCoordinate=[v(m[0],"xaxis"),v(m[1],"yaxis"),v(m[2],"zaxis"),v(c[0],"xaxis"),v(c[1],"yaxis"),v(c[2],"zaxis"),l.data.intensity*this.data._normMax,l.data.divergence],l.textLabel=this.data.hovertext||this.data.text,!0}},n.update=function(l){this.data=l;var f=a(this.scene,l);this.mesh.update(f)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},q.exports=function(l,f){var d=l.glplot.gl,v=a(l,f),m=p(d,v),c=new i(l,f.uid);return c.mesh=m,c.data=f,m._trace=c,l.glplot.add(m),c}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],1043:[function(u,q,W){var o=u("../../lib"),p=u("../../components/colorscale/defaults"),x=u("./attributes");q.exports=function(y,e,r,t){function i(d,v){return o.coerce(y,e,x,d,v)}var n=i("u"),h=i("v"),s=i("w"),a=i("x"),l=i("y"),f=i("z");n&&n.length&&h&&h.length&&s&&s.length&&a&&a.length&&l&&l.length&&f&&f.length?(i("starts.x"),i("starts.y"),i("starts.z"),i("maxdisplayed"),i("sizeref"),i("lighting.ambient"),i("lighting.diffuse"),i("lighting.specular"),i("lighting.roughness"),i("lighting.fresnel"),i("lightposition.x"),i("lightposition.y"),i("lightposition.z"),p(y,e,t,i,{prefix:"",cLetter:"c"}),i("text"),i("hovertext"),i("hovertemplate"),i("uhoverformat"),i("vhoverformat"),i("whoverformat"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":1040}],1044:[function(u,q,W){q.exports={moduleType:"trace",name:"streamtube",basePlotModule:u("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:u("./attributes"),supplyDefaults:u("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:u("./calc").calc,plot:u("./convert"),eventData:function(o,p){return o.tubex=o.x,o.tubey=o.y,o.tubez=o.z,o.tubeu=p.traceCoordinate[3],o.tubev=p.traceCoordinate[4],o.tubew=p.traceCoordinate[5],o.norm=p.traceCoordinate[6],o.divergence=p.traceCoordinate[7],delete o.x,delete o.y,delete o.z,o},meta:{}}},{"../../plots/gl3d":598,"./attributes":1040,"./calc":1041,"./convert":1042,"./defaults":1043}],1045:[function(u,q,W){var o=u("../../plots/attributes"),p=u("../../plots/template_attributes").hovertemplateAttrs,x=u("../../plots/template_attributes").texttemplateAttrs,y=u("../../components/colorscale/attributes"),e=u("../../plots/domain").attributes,r=u("../pie/attributes"),t=u("./constants"),i=u("../../lib/extend").extendFlat;q.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:i({colors:{valType:"data_array",editType:"calc"},line:{color:i({},r.marker.line.color,{dflt:null}),width:i({},r.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},y("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:r.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:x({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:r.hovertext,hoverinfo:i({},o.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:p({},{keys:t.eventDataKeys}),textfont:r.textfont,insidetextorientation:r.insidetextorientation,insidetextfont:r.insidetextfont,outsidetextfont:i({},r.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:r.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"./constants":1048}],1046:[function(u,q,W){var o=u("../../plots/plots");W.name="sunburst",W.plot=function(p,x,y,e){o.plotBasePlot(W.name,p,x,y,e)},W.clean=function(p,x,y,e){o.cleanBasePlot(W.name,p,x,y,e)}},{"../../plots/plots":619}],1047:[function(u,q,W){var o=u("d3-hierarchy"),p=u("fast-isnumeric"),x=u("../../lib"),y=u("../../components/colorscale").makeColorScaleFuncFromTrace,e=u("../pie/calc").makePullColorFn,r=u("../pie/calc").generateExtendedColors,t=u("../../components/colorscale").calc,i=u("../../constants/numerical").ALMOST_EQUAL,n={},h={},s={};W.calc=function(a,l){var f,d,v,m,c,b,g=a._fullLayout,w=l.ids,_=x.isArrayOrTypedArray(w),T=l.labels,k=l.parents,L=l.values,M=x.isArrayOrTypedArray(L),I=[],P={},S={},E=function(J){return J||typeof J=="number"},D=function(J){return!M||p(L[J])&&L[J]>=0};_?(f=Math.min(w.length,k.length),d=function(J){return E(w[J])&&D(J)},v=function(J){return String(w[J])}):(f=Math.min(T.length,k.length),d=function(J){return E(T[J])&&D(J)},v=function(J){return String(T[J])}),M&&(f=Math.min(f,L.length));for(var F=0;F<f;F++)if(d(F)){var H=v(F),V=E(k[F])?String(k[F]):"",Q={i:F,id:H,pid:V,label:E(T[F])?String(T[F]):""};M&&(Q.v=+L[F]),I.push(Q),c=H,P[m=V]?P[m].push(c):P[m]=[c],S[c]=1}if(P[""]){if(P[""].length>1){for(var K=x.randstr(),Z=0;Z<I.length;Z++)I[Z].pid===""&&(I[Z].pid=K);I.unshift({hasMultipleRoots:!0,id:K,pid:"",label:""})}}else{var $,re=[];for($ in P)S[$]||re.push($);if(re.length!==1)return x.warn(["Multiple implied roots, cannot build",l.type,"hierarchy of",l.name+".","These roots include:",re.join(", ")].join(" "));$=re[0],I.unshift({hasImpliedRoot:!0,id:$,pid:"",label:$})}try{b=o.stratify().id(function(J){return J.id}).parentId(function(J){return J.pid})(I)}catch(J){return x.warn(["Failed to build",l.type,"hierarchy of",l.name+".","Error:",J.message].join(" "))}var R=o.hierarchy(b),N=!1;if(M)switch(l.branchvalues){case"remainder":R.sum(function(J){return J.data.v});break;case"total":R.each(function(J){var ee=J.data.data,ne=ee.v;if(J.children){var se=J.children.reduce(function(oe,he){return oe+he.data.data.v},0);if((ee.hasImpliedRoot||ee.hasMultipleRoots)&&(ne=se),ne<se*i)return N=!0,x.warn(["Total value for node",J.data.data.id,"of",l.name,"is smaller than the sum of its children.",`
parent value =`,ne,`
children sum =`,se].join(" "))}J.value=ne})}else(function J(ee,ne,se){var oe=0,he=ee.children;if(he){for(var le=he.length,de=0;de<le;de++)oe+=J(he[de],ne,se);se.branches&&oe++}else se.leaves&&oe++;return ee.value=ee.data.data.value=oe,ne._values||(ne._values=[]),ne._values[ee.data.data.i]=oe,oe})(R,l,{branches:l.count.indexOf("branches")!==-1,leaves:l.count.indexOf("leaves")!==-1});if(!N){var U,te;l.sort&&R.sort(function(J,ee){return ee.value-J.value});var j=l.marker.colors||[],Y=!!j.length;return l._hasColorscale?(Y||(j=M?l.values:l._values),t(a,l,{vals:j,containerStr:"marker",cLetter:"c"}),te=y(l.marker)):U=e(g["_"+l.type+"colormap"]),R.each(function(J){var ee=J.data.data;ee.color=l._hasColorscale?te(j[ee.i]):U(j[ee.i],ee.id)}),I[0].hierarchy=R,I}},W._runCrossTraceCalc=function(a,l){var f=l._fullLayout,d=l.calcdata,v=f[a+"colorway"],m=f["_"+a+"colormap"];f["extend"+a+"colors"]&&(v=r(v,a==="icicle"?s:a==="treemap"?h:n));var c,b=0;function g(T){var k=T.data.data,L=k.id;k.color===!1&&(m[L]?k.color=m[L]:T.parent?T.parent.parent?k.color=T.parent.data.data.color:(m[L]=k.color=v[b%v.length],b++):k.color=c)}for(var w=0;w<d.length;w++){var _=d[w][0];_.trace.type===a&&_.hierarchy&&(c=_.trace.root.color,_.hierarchy.each(g))}},W.crossTraceCalc=function(a){return W._runCrossTraceCalc("sunburst",a)}},{"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../pie/calc":902,"d3-hierarchy":115,"fast-isnumeric":190}],1048:[function(u,q,W){q.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1049:[function(u,q,W){var o=u("../../lib"),p=u("./attributes"),x=u("../../plots/domain").defaults,y=u("../bar/defaults").handleText,e=u("../../components/colorscale"),r=e.hasColorscale,t=e.handleDefaults;q.exports=function(i,n,h,s){function a(c,b){return o.coerce(i,n,p,c,b)}var l=a("labels"),f=a("parents");if(l&&l.length&&f&&f.length){var d=a("values");d&&d.length?a("branchvalues"):a("count"),a("level"),a("maxdepth"),a("marker.line.width")&&a("marker.line.color",s.paper_bgcolor),a("marker.colors");var v=n._hasColorscale=r(i,"marker","colors")||(i.marker||{}).coloraxis;v&&t(i,n,s,a,{prefix:"marker.",cLetter:"c"}),a("leaf.opacity",v?1:.7);var m=a("text");a("texttemplate"),n.texttemplate||a("textinfo",Array.isArray(m)?"text+label":"label"),a("hovertext"),a("hovertemplate"),y(i,n,s,a,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),a("insidetextorientation"),a("sort"),a("rotation"),a("root.color"),x(n,s,a),n._length=null}else n.visible=!1}},{"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":1045}],1050:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../registry"),x=u("../../components/fx/helpers").appendArrayPointValue,y=u("../../components/fx"),e=u("../../lib"),r=u("../../lib/events"),t=u("./helpers"),i=u("../pie/helpers").formatPieValue;function n(h,s,a){for(var l=h.data.data,f={curveNumber:s.index,pointNumber:l.i,data:s._input,fullData:s},d=0;d<a.length;d++){var v=a[d];v in h&&(f[v]=h[v])}return"parentString"in h&&!t.isHierarchyRoot(h)&&(f.parent=h.parentString),x(f,s,l.i),f}q.exports=function(h,s,a,l,f){var d=l[0],v=d.trace,m=d.hierarchy,c=v.type==="sunburst",b=v.type==="treemap"||v.type==="icicle";"_hasHoverLabel"in v||(v._hasHoverLabel=!1),"_hasHoverEvent"in v||(v._hasHoverEvent=!1),h.on("mouseover",function(g){var w=a._fullLayout;if(!a._dragging&&w.hovermode!==!1){var _,T=a._fullData[v.index],k=g.data.data,L=k.i,M=t.isHierarchyRoot(g),I=t.getParent(m,g),P=t.getValue(g),S=function(Y){return e.castOption(T,L,Y)},E=S("hovertemplate"),D=y.castHoverinfo(T,w,L),F=w.separators;if(E||D&&D!=="none"&&D!=="skip"){var H,V;c&&(H=d.cx+g.pxmid[0]*(1-g.rInscribed),V=d.cy+g.pxmid[1]*(1-g.rInscribed)),b&&(H=g._hoverX,V=g._hoverY);var Q,K={},Z=[],$=[],re=function(Y){return Z.indexOf(Y)!==-1};D&&(Z=D==="all"?T._module.attributes.hoverinfo.flags:D.split("+")),K.label=k.label,re("label")&&K.label&&$.push(K.label),k.hasOwnProperty("v")&&(K.value=k.v,K.valueLabel=i(K.value,F),re("value")&&$.push(K.valueLabel)),K.currentPath=g.currentPath=t.getPath(g.data),re("current path")&&!M&&$.push(K.currentPath);var R=[],N=function(){R.indexOf(Q)===-1&&($.push(Q),R.push(Q))};K.percentParent=g.percentParent=P/t.getValue(I),K.parent=g.parentString=t.getPtLabel(I),re("percent parent")&&(Q=t.formatPercent(K.percentParent,F)+" of "+K.parent,N()),K.percentEntry=g.percentEntry=P/t.getValue(s),K.entry=g.entry=t.getPtLabel(s),!re("percent entry")||M||g.onPathbar||(Q=t.formatPercent(K.percentEntry,F)+" of "+K.entry,N()),K.percentRoot=g.percentRoot=P/t.getValue(m),K.root=g.root=t.getPtLabel(m),re("percent root")&&!M&&(Q=t.formatPercent(K.percentRoot,F)+" of "+K.root,N()),K.text=S("hovertext")||S("text"),re("text")&&(Q=K.text,e.isValidTextValue(Q)&&$.push(Q)),_=[n(g,T,f.eventDataKeys)];var U={trace:T,y:V,_x0:g._x0,_x1:g._x1,_y0:g._y0,_y1:g._y1,text:$.join("<br>"),name:E||re("name")?T.name:void 0,color:S("hoverlabel.bgcolor")||k.color,borderColor:S("hoverlabel.bordercolor"),fontFamily:S("hoverlabel.font.family"),fontSize:S("hoverlabel.font.size"),fontColor:S("hoverlabel.font.color"),nameLength:S("hoverlabel.namelength"),textAlign:S("hoverlabel.align"),hovertemplate:E,hovertemplateLabels:K,eventData:_};c&&(U.x0=H-g.rInscribed*g.rpx1,U.x1=H+g.rInscribed*g.rpx1,U.idealAlign=g.pxmid[0]<0?"left":"right"),b&&(U.x=H,U.idealAlign=H<0?"left":"right");var te=[];y.loneHover(U,{container:w._hoverlayer.node(),outerContainer:w._paper.node(),gd:a,inOut_bbox:te}),_[0].bbox=te[0],v._hasHoverLabel=!0}if(b){var j=h.select("path.surface");f.styleOne(j,g,T,{hovered:!0})}v._hasHoverEvent=!0,a.emit("plotly_hover",{points:_||[n(g,T,f.eventDataKeys)],event:o.event})}}),h.on("mouseout",function(g){var w=a._fullLayout,_=a._fullData[v.index],T=o.select(this).datum();if(v._hasHoverEvent&&(g.originalEvent=o.event,a.emit("plotly_unhover",{points:[n(T,_,f.eventDataKeys)],event:o.event}),v._hasHoverEvent=!1),v._hasHoverLabel&&(y.loneUnhover(w._hoverlayer.node()),v._hasHoverLabel=!1),b){var k=h.select("path.surface");f.styleOne(k,T,_,{hovered:!1})}}),h.on("click",function(g){var w=a._fullLayout,_=a._fullData[v.index],T=c&&(t.isHierarchyRoot(g)||t.isLeaf(g)),k=t.getPtId(g),L=t.isEntry(g)?t.findEntryWithChild(m,k):t.findEntryWithLevel(m,k),M=t.getPtId(L),I={points:[n(g,_,f.eventDataKeys)],event:o.event};T||(I.nextLevel=M);var P=r.triggerHandler(a,"plotly_"+v.type+"click",I);if(P!==!1&&w.hovermode&&(a._hoverdata=[n(g,_,f.eventDataKeys)],y.click(a,o.event)),!T&&P!==!1&&!a._dragging&&!a._transitioning){p.call("_storeDirectGUIEdit",_,w._tracePreGUI[_.uid],{level:_.level});var S={data:[{level:M}],traces:[v.index]},E={frame:{redraw:!1,duration:f.transitionTime},transition:{duration:f.transitionTime,easing:f.transitionEasing},mode:"immediate",fromcurrent:!0};y.loneUnhover(w._hoverlayer.node()),p.call("animate",a,S,E)}})}},{"../../components/fx":406,"../../components/fx/helpers":402,"../../lib":503,"../../lib/events":492,"../../registry":638,"../pie/helpers":905,"./helpers":1051,"@plotly/d3":58}],1051:[function(u,q,W){var o=u("../../lib"),p=u("../../components/color"),x=u("../../lib/setcursor"),y=u("../pie/helpers");function e(r){return r.data.data.pid}W.findEntryWithLevel=function(r,t){var i;return t&&r.eachAfter(function(n){if(W.getPtId(n)===t)return i=n.copy()}),i||r},W.findEntryWithChild=function(r,t){var i;return r.eachAfter(function(n){for(var h=n.children||[],s=0;s<h.length;s++){var a=h[s];if(W.getPtId(a)===t)return i=n.copy()}}),i||r},W.isEntry=function(r){return!r.parent},W.isLeaf=function(r){return!r.children},W.getPtId=function(r){return r.data.data.id},W.getPtLabel=function(r){return r.data.data.label},W.getValue=function(r){return r.value},W.isHierarchyRoot=function(r){return e(r)===""},W.setSliceCursor=function(r,t,i){var n=i.isTransitioning;if(!n){var h=r.datum();n=i.hideOnRoot&&W.isHierarchyRoot(h)||i.hideOnLeaves&&W.isLeaf(h)}x(r,n?null:"pointer")},W.getInsideTextFontKey=function(r,t,i,n,h){var s=(h||{}).onPathbar?"pathbar.textfont":"insidetextfont",a=i.data.data.i;return o.castOption(t,a,s+"."+r)||o.castOption(t,a,"textfont."+r)||n.size},W.getOutsideTextFontKey=function(r,t,i,n){var h=i.data.data.i;return o.castOption(t,h,"outsidetextfont."+r)||o.castOption(t,h,"textfont."+r)||n.size},W.isOutsideText=function(r,t){return!r._hasColorscale&&W.isHierarchyRoot(t)},W.determineTextFont=function(r,t,i,n){return W.isOutsideText(r,t)?function(h,s,a){return{color:W.getOutsideTextFontKey("color",h,s,a),family:W.getOutsideTextFontKey("family",h,s,a),size:W.getOutsideTextFontKey("size",h,s,a)}}(r,t,i):function(h,s,a,l){var f=(l||{}).onPathbar,d=s.data.data,v=d.i,m=o.castOption(h,v,(f?"pathbar.textfont":"insidetextfont")+".color");return!m&&h._input.textfont&&(m=o.castOption(h._input,v,"textfont.color")),{color:m||p.contrast(d.color),family:W.getInsideTextFontKey("family",h,s,a,l),size:W.getInsideTextFontKey("size",h,s,a,l)}}(r,t,i,n)},W.hasTransition=function(r){return!!(r&&r.duration>0)},W.getMaxDepth=function(r){return r.maxdepth>=0?r.maxdepth:1/0},W.isHeader=function(r,t){return!(W.isLeaf(r)||r.depth===t._maxDepth-1)},W.getParent=function(r,t){return W.findEntryWithLevel(r,e(t))},W.listPath=function(r,t){var i=r.parent;if(!i)return[];var n=t?[i.data[t]]:[i];return W.listPath(i,t).concat(n)},W.getPath=function(r){return W.listPath(r,"label").join("/")+"/"},W.formatValue=y.formatPieValue,W.formatPercent=function(r,t){var i=o.formatPercent(r,0);return i==="0%"&&(i=y.formatPiePercent(r,t)),i}},{"../../components/color":366,"../../lib":503,"../../lib/setcursor":524,"../pie/helpers":905}],1052:[function(u,q,W){q.exports={moduleType:"trace",name:"sunburst",basePlotModule:u("./base_plot"),categories:[],animatable:!0,attributes:u("./attributes"),layoutAttributes:u("./layout_attributes"),supplyDefaults:u("./defaults"),supplyLayoutDefaults:u("./layout_defaults"),calc:u("./calc").calc,crossTraceCalc:u("./calc").crossTraceCalc,plot:u("./plot").plot,style:u("./style").style,colorbar:u("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":1045,"./base_plot":1046,"./calc":1047,"./defaults":1049,"./layout_attributes":1053,"./layout_defaults":1054,"./plot":1055,"./style":1056}],1053:[function(u,q,W){q.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1054:[function(u,q,W){var o=u("../../lib"),p=u("./layout_attributes");q.exports=function(x,y){function e(r,t){return o.coerce(x,y,p,r,t)}e("sunburstcolorway",y.colorway),e("extendsunburstcolors")}},{"../../lib":503,"./layout_attributes":1053}],1055:[function(u,q,W){var o=u("@plotly/d3"),p=u("d3-hierarchy"),x=u("d3-interpolate").interpolate,y=u("../../components/drawing"),e=u("../../lib"),r=u("../../lib/svg_text_utils"),t=u("../bar/uniform_text"),i=t.recordMinTextSize,n=t.clearMinTextSize,h=u("../pie/plot"),s=u("../pie/helpers").getRotationAngle,a=h.computeTransform,l=h.transformInsideText,f=u("./style").styleOne,d=u("../bar/style").resizeText,v=u("./fx"),m=u("./constants"),c=u("./helpers");function b(w,_,T,k){var L=w._fullLayout,M=!L.uniformtext.mode&&c.hasTransition(k),I=o.select(T).selectAll("g.slice"),P=_[0],S=P.trace,E=P.hierarchy,D=c.findEntryWithLevel(E,S.level),F=c.getMaxDepth(S),H=L._size,V=S.domain,Q=H.w*(V.x[1]-V.x[0]),K=H.h*(V.y[1]-V.y[0]),Z=.5*Math.min(Q,K),$=P.cx=H.l+H.w*(V.x[1]+V.x[0])/2,re=P.cy=H.t+H.h*(1-V.y[0])-K/2;if(!D)return I.remove();var R=null,N={};M&&I.each(function(Ae){N[c.getPtId(Ae)]={rpx0:Ae.rpx0,rpx1:Ae.rpx1,x0:Ae.x0,x1:Ae.x1,transform:Ae.transform},!R&&c.isEntry(Ae)&&(R=Ae)});var U=function(Ae){return p.partition().size([2*Math.PI,Ae.height+1])(Ae)}(D).descendants(),te=D.height+1,j=0,Y=F;P.hasMultipleRoots&&c.isHierarchyRoot(D)&&(U=U.slice(1),te-=1,j=1,Y+=1),U=U.filter(function(Ae){return Ae.y1<=Y});var J=s(S.rotation);J&&U.forEach(function(Ae){Ae.x0+=J,Ae.x1+=J});var ee=Math.min(te,F),ne=function(Ae){return(Ae-j)/ee*Z},se=function(Ae,fe){return[Ae*Math.cos(fe),-Ae*Math.sin(fe)]},oe=function(Ae){return e.pathAnnulus(Ae.rpx0,Ae.rpx1,Ae.x0,Ae.x1,$,re)},he=function(Ae){return $+g(Ae)[0]*(Ae.transform.rCenter||0)+(Ae.transform.x||0)},le=function(Ae){return re+g(Ae)[1]*(Ae.transform.rCenter||0)+(Ae.transform.y||0)};(I=I.data(U,c.getPtId)).enter().append("g").classed("slice",!0),M?I.exit().transition().each(function(){var Ae=o.select(this);Ae.select("path.surface").transition().attrTween("d",function(fe){var me=function(ke){var Te,Me=c.getPtId(ke),Oe=N[Me],Fe=N[c.getPtId(D)];if(Fe){var qe=(ke.x1>Fe.x1?2*Math.PI:0)+J;Te=ke.rpx1<Fe.rpx1?{x0:ke.x0,x1:ke.x1,rpx0:0,rpx1:0}:{x0:qe,x1:qe,rpx0:ke.rpx0,rpx1:ke.rpx1}}else{var et,ze=c.getPtId(ke.parent);I.each(function(ft){if(c.getPtId(ft)===ze)return et=ft});var Ue,We=et.children;We.forEach(function(ft,xt){if(c.getPtId(ft)===Me)return Ue=xt});var Ze=We.length,nt=x(et.x0,et.x1);Te={rpx0:Z,rpx1:Z,x0:nt(Ue/Ze),x1:nt((Ue+1)/Ze)}}return x(Oe,Te)}(fe);return function(ke){return oe(me(ke))}}),Ae.select("g.slicetext").attr("opacity",0)}).remove():I.exit().remove(),I.order();var de=null;if(M&&R){var xe=c.getPtId(R);I.each(function(Ae){de===null&&c.getPtId(Ae)===xe&&(de=Ae.x1)})}var we=I;function be(Ae){var fe=Ae.parent,me=N[c.getPtId(fe)],ke={};if(me){var Te=fe.children,Me=Te.indexOf(Ae),Oe=Te.length,Fe=x(me.x0,me.x1);ke.x0=Fe(Me/Oe),ke.x1=Fe(Me/Oe)}else ke.x0=ke.x1=0;return ke}M&&(we=we.transition().each("end",function(){var Ae=o.select(this);c.setSliceCursor(Ae,w,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),we.each(function(Ae){var fe=o.select(this),me=e.ensureSingle(fe,"path","surface",function(qe){qe.style("pointer-events","all")});Ae.rpx0=ne(Ae.y0),Ae.rpx1=ne(Ae.y1),Ae.xmid=(Ae.x0+Ae.x1)/2,Ae.pxmid=se(Ae.rpx1,Ae.xmid),Ae.midangle=-(Ae.xmid-Math.PI/2),Ae.startangle=-(Ae.x0-Math.PI/2),Ae.stopangle=-(Ae.x1-Math.PI/2),Ae.halfangle=.5*Math.min(e.angleDelta(Ae.x0,Ae.x1)||Math.PI,Math.PI),Ae.ring=1-Ae.rpx0/Ae.rpx1,Ae.rInscribed=function(qe){return qe.rpx0===0&&e.isFullCircle([qe.x0,qe.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(qe.halfangle)),qe.ring/2))}(Ae),M?me.transition().attrTween("d",function(qe){var et=function(ze){var Ue,We=N[c.getPtId(ze)],Ze={x0:ze.x0,x1:ze.x1,rpx0:ze.rpx0,rpx1:ze.rpx1};if(We)Ue=We;else if(R)if(ze.parent)if(de){var nt=(ze.x1>de?2*Math.PI:0)+J;Ue={x0:nt,x1:nt}}else Ue={rpx0:Z,rpx1:Z},e.extendFlat(Ue,be(ze));else Ue={rpx0:0,rpx1:0};else Ue={x0:J,x1:J};return x(Ue,Ze)}(qe);return function(ze){return oe(et(ze))}}):me.attr("d",oe),fe.call(v,D,w,_,{eventDataKeys:m.eventDataKeys,transitionTime:m.CLICK_TRANSITION_TIME,transitionEasing:m.CLICK_TRANSITION_EASING}).call(c.setSliceCursor,w,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:w._transitioning}),me.call(f,Ae,S);var ke=e.ensureSingle(fe,"g","slicetext"),Te=e.ensureSingle(ke,"text","",function(qe){qe.attr("data-notex",1)}),Me=e.ensureUniformFontSize(w,c.determineTextFont(S,Ae,L.font));Te.text(W.formatSliceLabel(Ae,D,S,_,L)).classed("slicetext",!0).attr("text-anchor","middle").call(y.font,Me).call(r.convertToTspans,w);var Oe=y.bBox(Te.node());Ae.transform=l(Oe,Ae,P),Ae.transform.targetX=he(Ae),Ae.transform.targetY=le(Ae);var Fe=function(qe,et){var ze=qe.transform;return a(ze,et),ze.fontSize=Me.size,i(S.type,ze,L),e.getTextTransform(ze)};M?Te.transition().attrTween("transform",function(qe){var et=function(ze){var Ue,We=N[c.getPtId(ze)],Ze=ze.transform;if(We)Ue=We;else if(Ue={rpx1:ze.rpx1,transform:{textPosAngle:Ze.textPosAngle,scale:0,rotate:Ze.rotate,rCenter:Ze.rCenter,x:Ze.x,y:Ze.y}},R)if(ze.parent)if(de){var nt=ze.x1>de?2*Math.PI:0;Ue.x0=Ue.x1=nt}else e.extendFlat(Ue,be(ze));else Ue.x0=Ue.x1=J;else Ue.x0=Ue.x1=J;var ft=x(Ue.transform.textPosAngle,ze.transform.textPosAngle),xt=x(Ue.rpx1,ze.rpx1),It=x(Ue.x0,ze.x0),Et=x(Ue.x1,ze.x1),it=x(Ue.transform.scale,Ze.scale),rt=x(Ue.transform.rotate,Ze.rotate),At=Ze.rCenter===0?3:Ue.transform.rCenter===0?1/3:1,Gt=x(Ue.transform.rCenter,Ze.rCenter);return function(Qt){var Ve=xt(Qt),Ye=It(Qt),Be=Et(Qt),Je=function(Pe){return Gt(Math.pow(Pe,At))}(Qt),Se={pxmid:se(Ve,(Ye+Be)/2),rpx1:Ve,transform:{textPosAngle:ft(Qt),rCenter:Je,x:Ze.x,y:Ze.y}};return i(S.type,Ze,L),{transform:{targetX:he(Se),targetY:le(Se),scale:it(Qt),rotate:rt(Qt),rCenter:Je}}}}(qe);return function(ze){return Fe(et(ze),Oe)}}):Te.attr("transform",Fe(Ae,Oe))})}function g(w){return _=w.rpx1,T=w.transform.textPosAngle,[_*Math.sin(T),-_*Math.cos(T)];var _,T}W.plot=function(w,_,T,k){var L,M,I=w._fullLayout,P=I._sunburstlayer,S=!T,E=!I.uniformtext.mode&&c.hasTransition(T);n("sunburst",I),(L=P.selectAll("g.trace.sunburst").data(_,function(D){return D[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),L.order(),E?(k&&(M=k()),o.transition().duration(T.duration).ease(T.easing).each("end",function(){M&&M()}).each("interrupt",function(){M&&M()}).each(function(){P.selectAll("g.trace").each(function(D){b(w,D,this,T)})})):(L.each(function(D){b(w,D,this,T)}),I.uniformtext.mode&&d(w,I._sunburstlayer.selectAll(".trace"),"sunburst")),S&&L.exit().remove()},W.formatSliceLabel=function(w,_,T,k,L){var M=T.texttemplate,I=T.textinfo;if(!(M||I&&I!=="none"))return"";var P=L.separators,S=k[0],E=w.data.data,D=S.hierarchy,F=c.isHierarchyRoot(w),H=c.getParent(D,w),V=c.getValue(w);if(!M){var Q,K=I.split("+"),Z=function(J){return K.indexOf(J)!==-1},$=[];if(Z("label")&&E.label&&$.push(E.label),E.hasOwnProperty("v")&&Z("value")&&$.push(c.formatValue(E.v,P)),!F){Z("current path")&&$.push(c.getPath(w.data));var re=0;Z("percent parent")&&re++,Z("percent entry")&&re++,Z("percent root")&&re++;var R=re>1;if(re){var N,U=function(J){Q=c.formatPercent(N,P),R&&(Q+=" of "+J),$.push(Q)};Z("percent parent")&&!F&&(N=V/c.getValue(H),U("parent")),Z("percent entry")&&(N=V/c.getValue(_),U("entry")),Z("percent root")&&(N=V/c.getValue(D),U("root"))}}return Z("text")&&(Q=e.castOption(T,E.i,"text"),e.isValidTextValue(Q)&&$.push(Q)),$.join("<br>")}var te=e.castOption(T,E.i,"texttemplate");if(!te)return"";var j={};E.label&&(j.label=E.label),E.hasOwnProperty("v")&&(j.value=E.v,j.valueLabel=c.formatValue(E.v,P)),j.currentPath=c.getPath(w.data),F||(j.percentParent=V/c.getValue(H),j.percentParentLabel=c.formatPercent(j.percentParent,P),j.parent=c.getPtLabel(H)),j.percentEntry=V/c.getValue(_),j.percentEntryLabel=c.formatPercent(j.percentEntry,P),j.entry=c.getPtLabel(_),j.percentRoot=V/c.getValue(D),j.percentRootLabel=c.formatPercent(j.percentRoot,P),j.root=c.getPtLabel(D),E.hasOwnProperty("color")&&(j.color=E.color);var Y=e.castOption(T,E.i,"text");return(e.isValidTextValue(Y)||Y==="")&&(j.text=Y),j.customdata=e.castOption(T,E.i,"customdata"),e.texttemplateString(te,j,L._d3locale,j,T._meta||{})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/style":662,"../bar/uniform_text":664,"../pie/helpers":905,"../pie/plot":909,"./constants":1048,"./fx":1050,"./helpers":1051,"./style":1056,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1056:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../components/color"),x=u("../../lib"),y=u("../bar/uniform_text").resizeText;function e(r,t,i){var n=t.data.data,h=!t.children,s=n.i,a=x.castOption(i,s,"marker.line.color")||p.defaultLine,l=x.castOption(i,s,"marker.line.width")||0;r.style("stroke-width",l).call(p.fill,n.color).call(p.stroke,a).style("opacity",h?i.leaf.opacity:null)}q.exports={style:function(r){var t=r._fullLayout._sunburstlayer.selectAll(".trace");y(r,t,"sunburst"),t.each(function(i){var n=o.select(this),h=i[0].trace;n.style("opacity",h.opacity),n.selectAll("path.surface").each(function(s){o.select(this).call(e,s,h)})})},styleOne:e}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],1057:[function(u,q,W){var o=u("../../components/color"),p=u("../../components/colorscale/attributes"),x=u("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=u("../../plots/template_attributes").hovertemplateAttrs,e=u("../../plots/attributes"),r=u("../../lib/extend").extendFlat,t=u("../../plot_api/edit_types").overrideAll;function i(h){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:o.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:o.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var n=q.exports=t(r({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:y(),xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},p("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:i(),y:i(),z:i()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:r({},p.zauto,{}),zmin:r({},p.zmin,{}),zmax:r({},p.zmax,{})},hoverinfo:r({},e.hoverinfo),showlegend:r({},e.showlegend,{dflt:!1})}),"calc","nested");n.x.editType=n.y.editType=n.z.editType="calc+clearAxisTypes",n.transforms=void 0},{"../../components/color":366,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633}],1058:[function(u,q,W){var o=u("../../components/colorscale/calc");q.exports=function(p,x){x.surfacecolor?o(p,x,{vals:x.surfacecolor,containerStr:"",cLetter:"c"}):o(p,x,{vals:x.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],1059:[function(u,q,W){var o=u("../../../stackgl_modules").gl_surface3d,p=u("../../../stackgl_modules").ndarray,x=u("../../../stackgl_modules").ndarray_linear_interpolate.d2,y=u("../heatmap/interp2d"),e=u("../heatmap/find_empties"),r=u("../../lib").isArrayOrTypedArray,t=u("../../lib/gl_format_color").parseColorScale,i=u("../../lib/str2rgbarray"),n=u("../../components/colorscale").extractOpts;function h(T,k,L){this.scene=T,this.uid=L,this.surface=k,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var s=h.prototype;s.getXat=function(T,k,L,M){var I=r(this.data.x)?r(this.data.x[0])?this.data.x[k][T]:this.data.x[T]:T;return L===void 0?I:M.d2l(I,0,L)},s.getYat=function(T,k,L,M){var I=r(this.data.y)?r(this.data.y[0])?this.data.y[k][T]:this.data.y[k]:k;return L===void 0?I:M.d2l(I,0,L)},s.getZat=function(T,k,L,M){var I=this.data.z[k][T];return I===null&&this.data.connectgaps&&this.data._interpolatedZ&&(I=this.data._interpolatedZ[k][T]),L===void 0?I:M.d2l(I,0,L)},s.handlePick=function(T){if(T.object===this.surface){var k=(T.data.index[0]-1)/this.dataScaleX-1,L=(T.data.index[1]-1)/this.dataScaleY-1,M=Math.max(Math.min(Math.round(k),this.data.z[0].length-1),0),I=Math.max(Math.min(Math.round(L),this.data._ylength-1),0);T.index=[M,I],T.traceCoordinate=[this.getXat(M,I),this.getYat(M,I),this.getZat(M,I)],T.dataCoordinate=[this.getXat(M,I,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(M,I,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(M,I,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var P=0;P<3;P++){var S=T.dataCoordinate[P];S!=null&&(T.dataCoordinate[P]*=this.scene.dataScale[P])}var E=this.data.hovertext||this.data.text;return Array.isArray(E)&&E[I]&&E[I][M]!==void 0?T.textLabel=E[I][M]:T.textLabel=E||"",T.data.dataCoordinate=T.dataCoordinate.slice(),this.surface.highlight(T.data),this.scene.glplot.spikes.position=T.dataCoordinate,!0}};var a=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function l(T,k){if(T<k)return 0;for(var L=0;Math.floor(T%k)===0;)T/=k,L++;return L}function f(T){for(var k=[],L=0;L<a.length;L++){var M=a[L];k.push(l(T,M))}return k}function d(T){for(var k=f(T),L=T,M=0;M<a.length;M++)if(k[M]>0){L=a[M];break}return L}function v(T,k){if(!(T<1||k<1)){for(var L=f(T),M=f(k),I=1,P=0;P<a.length;P++)I*=Math.pow(a[P],Math.max(L[P],M[P]));return I}}s.calcXnums=function(T){var k,L=[];for(k=1;k<T;k++){var M=this.getXat(k-1,0),I=this.getXat(k,0);L[k-1]=I!==M&&M!=null&&I!=null?Math.abs(I-M):0}var P=0;for(k=1;k<T;k++)P+=L[k-1];for(k=1;k<T;k++)L[k-1]===0?L[k-1]=1:L[k-1]=Math.round(P/L[k-1]);return L},s.calcYnums=function(T){var k,L=[];for(k=1;k<T;k++){var M=this.getYat(0,k-1),I=this.getYat(0,k);L[k-1]=I!==M&&M!=null&&I!=null?Math.abs(I-M):0}var P=0;for(k=1;k<T;k++)P+=L[k-1];for(k=1;k<T;k++)L[k-1]===0?L[k-1]=1:L[k-1]=Math.round(P/L[k-1]);return L};var m=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],c=m[9],b=m[13];function g(T,k,L){var M=L[8]+L[2]*k[0]+L[5]*k[1];return T[0]=(L[6]+L[0]*k[0]+L[3]*k[1])/M,T[1]=(L[7]+L[1]*k[0]+L[4]*k[1])/M,T}function w(T,k,L){return function(M,I,P,S){for(var E=[0,0],D=M.shape[0],F=M.shape[1],H=0;H<D;H++)for(var V=0;V<F;V++)P(E,[H,V],S),M.set(H,V,x(I,E[0],E[1]))}(T,k,g,L),T}function _(T,k){for(var L=!1,M=0;M<T.length;M++)if(k===T[M]){L=!0;break}L===!1&&T.push(k)}s.estimateScale=function(T,k){for(var L=1+function(I){if(I.length!==0){for(var P=1,S=0;S<I.length;S++)P=v(P,I[S]);return P}}(k===0?this.calcXnums(T):this.calcYnums(T));L<c;)L*=2;for(;L>b;)L--,L/=d(L),++L<c&&(L=b);var M=Math.round(L/T);return M>1?M:1},s.refineCoords=function(T){for(var k=this.dataScaleX,L=this.dataScaleY,M=T[0].shape[0],I=T[0].shape[1],P=0|Math.floor(T[0].shape[0]*k+1),S=0|Math.floor(T[0].shape[1]*L+1),E=1+M+1,D=1+I+1,F=p(new Float32Array(E*D),[E,D]),H=[1/k,0,0,0,1/L,0,0,0,1],V=0;V<T.length;++V){this.surface.padField(F,T[V]);var Q=p(new Float32Array(P*S),[P,S]);w(Q,F,H),T[V]=Q}},s.setContourLevels=function(){var T,k,L,M=[[],[],[]],I=[!1,!1,!1],P=!1;for(T=0;T<3;++T)if(this.showContour[T]&&(P=!0,this.contourSize[T]>0&&this.contourStart[T]!==null&&this.contourEnd[T]!==null&&this.contourEnd[T]>this.contourStart[T]))for(I[T]=!0,k=this.contourStart[T];k<this.contourEnd[T];k+=this.contourSize[T])L=k*this.scene.dataScale[T],_(M[T],L);if(P){var S=[[],[],[]];for(T=0;T<3;++T)this.showContour[T]&&(S[T]=I[T]?M[T]:this.scene.contourLevels[T]);this.surface.update({levels:S})}},s.update=function(T){var k,L,M,I,P=this.scene,S=P.fullSceneLayout,E=this.surface,D=t(T),F=P.dataScale,H=T.z[0].length,V=T._ylength,Q=P.contourLevels;this.data=T;var K=[];for(k=0;k<3;k++)for(K[k]=[],L=0;L<H;L++)K[k][L]=[];for(L=0;L<H;L++)for(M=0;M<V;M++)K[0][L][M]=this.getXat(L,M,T.xcalendar,S.xaxis),K[1][L][M]=this.getYat(L,M,T.ycalendar,S.yaxis),K[2][L][M]=this.getZat(L,M,T.zcalendar,S.zaxis);if(T.connectgaps)for(T._emptypoints=e(K[2]),y(K[2],T._emptypoints),T._interpolatedZ=[],L=0;L<H;L++)for(T._interpolatedZ[L]=[],M=0;M<V;M++)T._interpolatedZ[L][M]=K[2][L][M];for(k=0;k<3;k++)for(L=0;L<H;L++)for(M=0;M<V;M++)(I=K[k][L][M])==null?K[k][L][M]=NaN:I=K[k][L][M]*=F[k];for(k=0;k<3;k++)for(L=0;L<H;L++)for(M=0;M<V;M++)(I=K[k][L][M])!=null&&(this.minValues[k]>I&&(this.minValues[k]=I),this.maxValues[k]<I&&(this.maxValues[k]=I));for(k=0;k<3;k++)this.objectOffset[k]=.5*(this.minValues[k]+this.maxValues[k]);for(k=0;k<3;k++)for(L=0;L<H;L++)for(M=0;M<V;M++)(I=K[k][L][M])!=null&&(K[k][L][M]-=this.objectOffset[k]);var Z=[p(new Float32Array(H*V),[H,V]),p(new Float32Array(H*V),[H,V]),p(new Float32Array(H*V),[H,V])];for(k=0;k<3;k++)for(L=0;L<H;L++)for(M=0;M<V;M++)Z[k].set(L,M,K[k][L][M]);K=[];var $={colormap:D,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!T.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:T.opacityscale,opacity:T.opacity},re=n(T);if($.intensityBounds=[re.min,re.max],T.surfacecolor){var R=p(new Float32Array(H*V),[H,V]);for(L=0;L<H;L++)for(M=0;M<V;M++)R.set(L,M,T.surfacecolor[M][L]);Z.push(R)}else $.intensityBounds[0]*=F[2],$.intensityBounds[1]*=F[2];(b<Z[0].shape[0]||b<Z[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(Z[0].shape[0],0),this.dataScaleY=this.estimateScale(Z[0].shape[1],1),this.dataScaleX===1&&this.dataScaleY===1||this.refineCoords(Z)),T.surfacecolor&&($.intensity=Z.pop());var N=[!0,!0,!0],U=["x","y","z"];for(k=0;k<3;++k){var te=T.contours[U[k]];N[k]=te.highlight,$.showContour[k]=te.show||te.highlight,$.showContour[k]&&($.contourProject[k]=[te.project.x,te.project.y,te.project.z],te.show?(this.showContour[k]=!0,$.levels[k]=Q[k],E.highlightColor[k]=$.contourColor[k]=i(te.color),te.usecolormap?E.highlightTint[k]=$.contourTint[k]=0:E.highlightTint[k]=$.contourTint[k]=1,$.contourWidth[k]=te.width,this.contourStart[k]=te.start,this.contourEnd[k]=te.end,this.contourSize[k]=te.size):(this.showContour[k]=!1,this.contourStart[k]=null,this.contourEnd[k]=null,this.contourSize[k]=0),te.highlight&&($.dynamicColor[k]=i(te.highlightcolor),$.dynamicWidth[k]=te.highlightwidth))}(function(j){var Y=j[0].rgb,J=j[j.length-1].rgb;return Y[0]===J[0]&&Y[1]===J[1]&&Y[2]===J[2]&&Y[3]===J[3]})(D)&&($.vertexColor=!0),$.objectOffset=this.objectOffset,$.coords=Z,E.update($),E.visible=T.visible,E.enableDynamic=N,E.enableHighlight=N,E.snapToData=!0,"lighting"in T&&(E.ambientLight=T.lighting.ambient,E.diffuseLight=T.lighting.diffuse,E.specularLight=T.lighting.specular,E.roughness=T.lighting.roughness,E.fresnel=T.lighting.fresnel),"lightposition"in T&&(E.lightPosition=[T.lightposition.x,T.lightposition.y,T.lightposition.z])},s.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},q.exports=function(T,k){var L=T.glplot.gl,M=o({gl:L}),I=new h(T,M,k.uid);return M._trace=I,I.update(k),T.glplot.add(M),I}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../heatmap/find_empties":798,"../heatmap/interp2d":801}],1060:[function(u,q,W){var o=u("../../registry"),p=u("../../lib"),x=u("../../components/colorscale/defaults"),y=u("./attributes");function e(t,i,n,h){var s=h("opacityscale");s==="max"?i.opacityscale=[[0,.1],[1,1]]:s==="min"?i.opacityscale=[[0,1],[1,.1]]:s==="extremes"?i.opacityscale=function(a,l){for(var f=[],d=0;d<32;d++){var v=d/31,m=l+(1-l)*(1-Math.pow(Math.sin(a*v*Math.PI),2));f.push([v,Math.max(0,Math.min(1,m))])}return f}(1,.1):function(a){var l=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||+a[0][0]!=0||+a[a.length-1][0]!=1)return!1;for(var f=0;f<a.length;f++){var d=a[f];if(d.length!==2||+d[0]<l)return!1;l=+d[0]}return!0}(s)||(i.opacityscale=void 0)}function r(t,i,n){i in t&&!(n in t)&&(t[n]=t[i])}q.exports={supplyDefaults:function(t,i,n,h){var s,a;function l(_,T){return p.coerce(t,i,y,_,T)}var f=l("x"),d=l("y"),v=l("z");if(!v||!v.length||f&&f.length<1||d&&d.length<1)i.visible=!1;else{i._xlength=Array.isArray(f)&&p.isArrayOrTypedArray(f[0])?v.length:v[0].length,i._ylength=v.length,o.getComponentMethod("calendars","handleTraceDefaults")(t,i,["x","y","z"],h),l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(_){l(_)});var m=l("surfacecolor"),c=["x","y","z"];for(s=0;s<3;++s){var b="contours."+c[s],g=l(b+".show"),w=l(b+".highlight");if(g||w)for(a=0;a<3;++a)l(b+".project."+c[a]);g&&(l(b+".color"),l(b+".width"),l(b+".usecolormap")),w&&(l(b+".highlightcolor"),l(b+".highlightwidth")),l(b+".start"),l(b+".end"),l(b+".size")}m||(r(t,"zmin","cmin"),r(t,"zmax","cmax"),r(t,"zauto","cauto")),x(t,i,h,l,{prefix:"",cLetter:"c"}),e(t,i,h,l),i._length=null}},opacityscaleDefaults:e}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":1057}],1061:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:u("./calc"),plot:u("./convert"),moduleType:"trace",name:"surface",basePlotModule:u("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":1057,"./calc":1058,"./convert":1059,"./defaults":1060}],1062:[function(u,q,W){var o=u("../../components/annotations/attributes"),p=u("../../lib/extend").extendFlat,x=u("../../plot_api/edit_types").overrideAll,y=u("../../plots/font_attributes"),e=u("../../plots/domain").attributes,r=u("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers;(q.exports=x({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:r("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:p({},o.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:p({},y({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:r("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:p({},o.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:p({},y({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":349,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585}],1063:[function(u,q,W){var o=u("../../plots/get_data").getModuleCalcData,p=u("./plot");W.name="table",W.plot=function(x){var y=o(x.calcdata,"table")[0];y.length&&p(x,y)},W.clean=function(x,y,e,r){var t=r._has&&r._has("table"),i=y._has&&y._has("table");t&&!i&&r._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":593,"./plot":1070}],1064:[function(u,q,W){var o=u("../../lib/gup").wrap;q.exports=function(){return o({})}},{"../../lib/gup":500}],1065:[function(u,q,W){q.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1066:[function(u,q,W){var o=u("./constants"),p=u("../../lib/extend").extendFlat,x=u("fast-isnumeric");function y(s){if(Array.isArray(s)){for(var a=0,l=0;l<s.length;l++)a=Math.max(a,y(s[l]));return a}return s}function e(s,a){return s+a}function r(s){var a,l=s.slice(),f=1/0,d=0;for(a=0;a<l.length;a++)Array.isArray(l[a])||(l[a]=[l[a]]),f=Math.min(f,l[a].length),d=Math.max(d,l[a].length);if(f!==d)for(a=0;a<l.length;a++){var v=d-l[a].length;v&&(l[a]=l[a].concat(t(v)))}return l}function t(s){for(var a=new Array(s),l=0;l<s;l++)a[l]="";return a}function i(s){return s.calcdata.columns.reduce(function(a,l){return l.xIndex<s.xIndex?a+l.columnWidth:a},0)}function n(s,a){return Object.keys(s).map(function(l){return p({},s[l],{auxiliaryBlocks:a})})}function h(s,a){for(var l,f={},d=0,v=0,m={firstRowIndex:null,lastRowIndex:null,rows:[]},c=0,b=0,g=0;g<s.length;g++)l=s[g],m.rows.push({rowIndex:g,rowHeight:l}),((v+=l)>=a||g===s.length-1)&&(f[d]=m,m.key=b++,m.firstRowIndex=c,m.lastRowIndex=g,m={firstRowIndex:null,lastRowIndex:null,rows:[]},d+=v,c=g+1,v=0);return f}q.exports=function(s,a){var l=r(a.cells.values),f=function(F){return F.slice(a.header.values.length,F.length)},d=r(a.header.values);d.length&&!d[0].length&&(d[0]=[""],d=r(d));var v=d.concat(f(l).map(function(){return t((d[0]||[""]).length)})),m=a.domain,c=Math.floor(s._fullLayout._size.w*(m.x[1]-m.x[0])),b=Math.floor(s._fullLayout._size.h*(m.y[1]-m.y[0])),g=a.header.values.length?v[0].map(function(){return a.header.height}):[o.emptyHeaderHeight],w=l.length?l[0].map(function(){return a.cells.height}):[],_=g.reduce(e,0),T=h(w,b-_+o.uplift),k=n(h(g,_),[]),L=n(T,k),M={},I=a._fullInput.columnorder.concat(f(l.map(function(F,H){return H}))),P=v.map(function(F,H){var V=Array.isArray(a.columnwidth)?a.columnwidth[Math.min(H,a.columnwidth.length-1)]:a.columnwidth;return x(V)?Number(V):1}),S=P.reduce(e,0);P=P.map(function(F){return F/S*c});var E=Math.max(y(a.header.line.width),y(a.cells.line.width)),D={key:a.uid+s._context.staticPlot,translateX:m.x[0]*s._fullLayout._size.w,translateY:s._fullLayout._size.h*(1-m.y[1]),size:s._fullLayout._size,width:c,maxLineWidth:E,height:b,columnOrder:I,groupHeight:b,rowBlocks:L,headerRowBlocks:k,scrollY:0,cells:p({},a.cells,{values:l}),headerCells:p({},a.header,{values:v}),gdColumns:v.map(function(F){return F[0]}),gdColumnsOriginalOrder:v.map(function(F){return F[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:v.map(function(F,H){var V=M[F];return M[F]=(V||0)+1,{key:F+"__"+M[F],label:F,specIndex:H,xIndex:I[H],xScale:i,x:void 0,calcdata:void 0,columnWidth:P[H]}})};return D.columns.forEach(function(F){F.calcdata=D,F.x=i(F)}),D}},{"../../lib/extend":493,"./constants":1065,"fast-isnumeric":190}],1067:[function(u,q,W){var o=u("../../lib/extend").extendFlat;W.splitToPanels=function(p){var x=[0,0],y=o({},p,{key:"header",type:"header",page:0,prevPages:x,currentRepaint:[null,null],dragHandle:!0,values:p.calcdata.headerCells.values[p.specIndex],rowBlocks:p.calcdata.headerRowBlocks,calcdata:o({},p.calcdata,{cells:p.calcdata.headerCells})});return[o({},p,{key:"cells1",type:"cells",page:0,prevPages:x,currentRepaint:[null,null],dragHandle:!1,values:p.calcdata.cells.values[p.specIndex],rowBlocks:p.calcdata.rowBlocks}),o({},p,{key:"cells2",type:"cells",page:1,prevPages:x,currentRepaint:[null,null],dragHandle:!1,values:p.calcdata.cells.values[p.specIndex],rowBlocks:p.calcdata.rowBlocks}),y]},W.splitToCells=function(p){var x=function(y){var e=y.rowBlocks[y.page],r=e?e.rows[0].rowIndex:0,t=e?r+e.rows.length:0;return[r,t]}(p);return(p.values||[]).slice(x[0],x[1]).map(function(y,e){return{keyWithinBlock:e+(typeof y=="string"&&y.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:x[0]+e,column:p,calcdata:p.calcdata,page:p.page,rowBlocks:p.rowBlocks,value:y}})}},{"../../lib/extend":493}],1068:[function(u,q,W){var o=u("../../lib"),p=u("./attributes"),x=u("../../plots/domain").defaults;q.exports=function(y,e,r,t){function i(n,h){return o.coerce(y,e,p,n,h)}x(e,t,i),i("columnwidth"),i("header.values"),i("header.format"),i("header.align"),i("header.prefix"),i("header.suffix"),i("header.height"),i("header.line.width"),i("header.line.color"),i("header.fill.color"),o.coerceFont(i,"header.font",o.extendFlat({},t.font)),function(n,h){for(var s=n.columnorder||[],a=n.header.values.length,l=s.slice(0,a),f=l.slice().sort(function(m,c){return m-c}),d=l.map(function(m){return f.indexOf(m)}),v=d.length;v<a;v++)d.push(v);h("columnorder",d)}(e,i),i("cells.values"),i("cells.format"),i("cells.align"),i("cells.prefix"),i("cells.suffix"),i("cells.height"),i("cells.line.width"),i("cells.line.color"),i("cells.fill.color"),o.coerceFont(i,"cells.font",o.extendFlat({},t.font)),e._length=null}},{"../../lib":503,"../../plots/domain":584,"./attributes":1062}],1069:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults"),calc:u("./calc"),plot:u("./plot"),moduleType:"trace",name:"table",basePlotModule:u("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1062,"./base_plot":1063,"./calc":1064,"./defaults":1068,"./plot":1070}],1070:[function(u,q,W){var o=u("./constants"),p=u("@plotly/d3"),x=u("../../lib").numberFormat,y=u("../../lib/gup"),e=u("../../components/drawing"),r=u("../../lib/svg_text_utils"),t=u("../../lib").raiseToTop,i=u("../../lib").strTranslate,n=u("../../lib").cancelTransition,h=u("./data_preparation_helper"),s=u("./data_split_helpers"),a=u("../../components/color");function l(Z){return Math.ceil(Z.calcdata.maxLineWidth/2)}function f(Z,$){return"clip"+Z._fullLayout._uid+"_scrollAreaBottomClip_"+$.key}function d(Z,$){return"clip"+Z._fullLayout._uid+"_columnBoundaryClippath_"+$.calcdata.key+"_"+$.specIndex}function v(Z){return[].concat.apply([],Z.map(function($){return $})).map(function($){return $.__data__})}function m(Z,$,re){var R=Z.selectAll("."+o.cn.scrollbarKit).data(y.repeat,y.keyFun);R.enter().append("g").classed(o.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),R.each(function(Y){var J=Y.scrollbarState;J.totalHeight=function(ee){var ne=ee.rowBlocks;return H(ne,ne.length-1)+(ne.length?V(ne[ne.length-1],1/0):1)}(Y),J.scrollableAreaHeight=Y.groupHeight-L(Y),J.currentlyVisibleHeight=Math.min(J.totalHeight,J.scrollableAreaHeight),J.ratio=J.currentlyVisibleHeight/J.totalHeight,J.barLength=Math.max(J.ratio*J.currentlyVisibleHeight,o.goldenRatio*o.scrollbarWidth),J.barWiggleRoom=J.currentlyVisibleHeight-J.barLength,J.wiggleRoom=Math.max(0,J.totalHeight-J.scrollableAreaHeight),J.topY=J.barWiggleRoom===0?0:Y.scrollY/J.wiggleRoom*J.barWiggleRoom,J.bottomY=J.topY+J.barLength,J.dragMultiplier=J.wiggleRoom/J.barWiggleRoom}).attr("transform",function(Y){var J=Y.width+o.scrollbarWidth/2+o.scrollbarOffset;return i(J,L(Y))});var N=R.selectAll("."+o.cn.scrollbar).data(y.repeat,y.keyFun);N.enter().append("g").classed(o.cn.scrollbar,!0);var U=N.selectAll("."+o.cn.scrollbarSlider).data(y.repeat,y.keyFun);U.enter().append("g").classed(o.cn.scrollbarSlider,!0),U.attr("transform",function(Y){return i(0,Y.scrollbarState.topY||0)});var te=U.selectAll("."+o.cn.scrollbarGlyph).data(y.repeat,y.keyFun);te.enter().append("line").classed(o.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",o.scrollbarWidth).attr("stroke-linecap","round").attr("y1",o.scrollbarWidth/2),te.attr("y2",function(Y){return Y.scrollbarState.barLength-o.scrollbarWidth/2}).attr("stroke-opacity",function(Y){return Y.columnDragInProgress||!Y.scrollbarState.barWiggleRoom||re?0:.4}),te.transition().delay(0).duration(0),te.transition().delay(o.scrollbarHideDelay).duration(o.scrollbarHideDuration).attr("stroke-opacity",0);var j=N.selectAll("."+o.cn.scrollbarCaptureZone).data(y.repeat,y.keyFun);j.enter().append("line").classed(o.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",o.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(Y){var J=p.event.y,ee=this.getBoundingClientRect(),ne=Y.scrollbarState,se=J-ee.top,oe=p.scale.linear().domain([0,ne.scrollableAreaHeight]).range([0,ne.totalHeight]).clamp(!0);ne.topY<=se&&se<=ne.bottomY||I($,Z,null,oe(se-ne.barLength/2))(Y)}).call(p.behavior.drag().origin(function(Y){return p.event.stopPropagation(),Y.scrollbarState.scrollbarScrollInProgress=!0,Y}).on("drag",I($,Z)).on("dragend",function(){})),j.attr("y2",function(Y){return Y.scrollbarState.scrollableAreaHeight}),$._context.staticPlot&&(te.remove(),j.remove())}function c(Z,$,re,R){var N=function(te){var j=te.selectAll("."+o.cn.columnCell).data(s.splitToCells,function(Y){return Y.keyWithinBlock});return j.enter().append("g").classed(o.cn.columnCell,!0),j.exit().remove(),j}(function(te){var j=te.selectAll("."+o.cn.columnCells).data(y.repeat,y.keyFun);return j.enter().append("g").classed(o.cn.columnCells,!0),j.exit().remove(),j}(re));(function(te){te.each(function(j,Y){var J=j.calcdata.cells.font,ee=j.column.specIndex,ne={size:w(J.size,ee,Y),color:w(J.color,ee,Y),family:w(J.family,ee,Y)};j.rowNumber=j.key,j.align=w(j.calcdata.cells.align,ee,Y),j.cellBorderWidth=w(j.calcdata.cells.line.width,ee,Y),j.font=ne})})(N),function(te){te.attr("width",function(j){return j.column.columnWidth}).attr("stroke-width",function(j){return j.cellBorderWidth}).each(function(j){var Y=p.select(this);a.stroke(Y,w(j.calcdata.cells.line.color,j.column.specIndex,j.rowNumber)),a.fill(Y,w(j.calcdata.cells.fill.color,j.column.specIndex,j.rowNumber))})}(function(te){var j=te.selectAll("."+o.cn.cellRect).data(y.repeat,function(Y){return Y.keyWithinBlock});return j.enter().append("rect").classed(o.cn.cellRect,!0),j}(N));var U=function(te){var j=te.selectAll("."+o.cn.cellText).data(y.repeat,function(Y){return Y.keyWithinBlock});return j.enter().append("text").classed(o.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){p.event.stopPropagation()}),j}(function(te){var j=te.selectAll("."+o.cn.cellTextHolder).data(y.repeat,function(Y){return Y.keyWithinBlock});return j.enter().append("g").classed(o.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),j}(N));(function(te){te.each(function(j){e.font(p.select(this),j.font)})})(U),b(U,$,R,Z),F(N)}function b(Z,$,re,R){Z.text(function(N){var U=N.column.specIndex,te=N.rowNumber,j=N.value,Y=typeof j=="string",J=Y&&j.match(/<br>/i),ee=!Y||J;N.mayHaveMarkup=Y&&j.match(/[<&>]/);var ne,se=typeof(ne=j)=="string"&&ne.match(o.latexCheck);N.latex=se;var oe,he,le=se?"":w(N.calcdata.cells.prefix,U,te)||"",de=se?"":w(N.calcdata.cells.suffix,U,te)||"",xe=se?null:w(N.calcdata.cells.format,U,te)||null,we=le+(xe?x(xe)(N.value):N.value)+de;if(N.wrappingNeeded=!N.wrapped&&!ee&&!se&&(oe=g(we)),N.cellHeightMayIncrease=J||se||N.mayHaveMarkup||(oe===void 0?g(we):oe),N.needsConvertToTspans=N.mayHaveMarkup||N.wrappingNeeded||N.latex,N.wrappingNeeded){var be=(o.wrapSplitCharacter===" "?we.replace(/<a href=/gi,"<a_href="):we).split(o.wrapSplitCharacter),Ae=o.wrapSplitCharacter===" "?be.map(function(fe){return fe.replace(/<a_href=/gi,"<a href=")}):be;N.fragments=Ae.map(function(fe){return{text:fe,width:null}}),N.fragments.push({fragment:o.wrapSpacer,width:null}),he=Ae.join(o.lineBreaker)+o.lineBreaker+o.wrapSpacer}else delete N.fragments,he=we;return he}).attr("dy",function(N){return N.needsConvertToTspans?0:"0.75em"}).each(function(N){var U=p.select(this),te=N.wrappingNeeded?S:E;N.needsConvertToTspans?r.convertToTspans(U,R,te(re,this,$,R,N)):p.select(this.parentNode).attr("transform",function(j){return i(D(j),o.cellPad)}).attr("text-anchor",function(j){return{left:"start",center:"middle",right:"end"}[j.align]})})}function g(Z){return Z.indexOf(o.wrapSplitCharacter)!==-1}function w(Z,$,re){if(Array.isArray(Z)){var R=Z[Math.min($,Z.length-1)];return Array.isArray(R)?R[Math.min(re,R.length-1)]:R}return Z}function _(Z,$,re){Z.transition().ease(o.releaseTransitionEase).duration(o.releaseTransitionDuration).attr("transform",i($.x,re))}function T(Z){return Z.type==="cells"}function k(Z){return Z.type==="header"}function L(Z){return(Z.rowBlocks.length?Z.rowBlocks[0].auxiliaryBlocks:[]).reduce(function($,re){return $+V(re,1/0)},0)}function M(Z,$,re){var R=v($)[0];if(R!==void 0){var N=R.rowBlocks,U=R.calcdata,te=H(N,N.length),j=R.calcdata.groupHeight-L(R),Y=U.scrollY=Math.max(0,Math.min(te-j,U.scrollY)),J=function(ee,ne,se){for(var oe=[],he=0,le=0;le<ee.length;le++){for(var de=ee[le],xe=de.rows,we=0,be=0;be<xe.length;be++)we+=xe[be].rowHeight;de.allRowsHeight=we,ne<he+we&&ne+se>he&&oe.push(le),he+=we}return oe}(N,Y,j);J.length===1&&(J[0]===N.length-1?J.unshift(J[0]-1):J.push(J[0]+1)),J[0]%2&&J.reverse(),$.each(function(ee,ne){ee.page=J[ne],ee.scrollY=Y}),$.attr("transform",function(ee){var ne=H(ee.rowBlocks,ee.page)-ee.scrollY;return i(0,ne)}),Z&&(P(Z,re,$,J,R.prevPages,R,0),P(Z,re,$,J,R.prevPages,R,1),m(re,Z))}}function I(Z,$,re,R){return function(N){var U=N.calcdata?N.calcdata:N,te=$.filter(function(ee){return U.key===ee.key}),j=re||U.scrollbarState.dragMultiplier,Y=U.scrollY;U.scrollY=R===void 0?U.scrollY+j*p.event.dy:R;var J=te.selectAll("."+o.cn.yColumn).selectAll("."+o.cn.columnBlock).filter(T);return M(Z,J,te),U.scrollY===Y}}function P(Z,$,re,R,N,U,te){R[te]!==N[te]&&(clearTimeout(U.currentRepaint[te]),U.currentRepaint[te]=setTimeout(function(){var j=re.filter(function(Y,J){return J===te&&R[J]!==N[J]});c(Z,$,j,re),N[te]=R[te]}))}function S(Z,$,re,R){return function(){var N=p.select($.parentNode);N.each(function(U){var te=U.fragments;N.selectAll("tspan.line").each(function(he,le){te[le].width=this.getComputedTextLength()});var j,Y,J=te[te.length-1].width,ee=te.slice(0,-1),ne=[],se=0,oe=U.column.columnWidth-2*o.cellPad;for(U.value="";ee.length;)se+(Y=(j=ee.shift()).width+J)>oe&&(U.value+=ne.join(o.wrapSpacer)+o.lineBreaker,ne=[],se=0),ne.push(j.text),se+=Y;se&&(U.value+=ne.join(o.wrapSpacer)),U.wrapped=!0}),N.selectAll("tspan.line").remove(),b(N.select("."+o.cn.cellText),re,Z,R),p.select($.parentNode.parentNode).call(F)}}function E(Z,$,re,R,N){return function(){if(!N.settledY){var U=p.select($.parentNode),te=K(N),j=N.key-te.firstRowIndex,Y=te.rows[j].rowHeight,J=N.cellHeightMayIncrease?$.parentNode.getBoundingClientRect().height+2*o.cellPad:Y,ee=Math.max(J,Y);ee-te.rows[j].rowHeight&&(te.rows[j].rowHeight=ee,Z.selectAll("."+o.cn.columnCell).call(F),M(null,Z.filter(T),0),m(re,R,!0)),U.attr("transform",function(){var ne=this.parentNode.getBoundingClientRect(),se=p.select(this.parentNode).select("."+o.cn.cellRect).node().getBoundingClientRect(),oe=this.transform.baseVal.consolidate(),he=se.top-ne.top+(oe?oe.matrix.f:o.cellPad);return i(D(N,p.select(this.parentNode).select("."+o.cn.cellTextHolder).node().getBoundingClientRect().width),he)}),N.settledY=!0}}}function D(Z,$){switch(Z.align){case"left":return o.cellPad;case"right":return Z.column.columnWidth-($||0)-o.cellPad;case"center":return(Z.column.columnWidth-($||0))/2;default:return o.cellPad}}function F(Z){Z.attr("transform",function($){var re=$.rowBlocks[0].auxiliaryBlocks.reduce(function(N,U){return N+V(U,1/0)},0),R=V(K($),$.key);return i(0,R+re)}).selectAll("."+o.cn.cellRect).attr("height",function($){return(re=K($),R=$.key,re.rows[R-re.firstRowIndex]).rowHeight;var re,R})}function H(Z,$){for(var re=0,R=$-1;R>=0;R--)re+=Q(Z[R]);return re}function V(Z,$){for(var re=0,R=0;R<Z.rows.length&&Z.rows[R].rowIndex<$;R++)re+=Z.rows[R].rowHeight;return re}function Q(Z){var $=Z.allRowsHeight;if($!==void 0)return $;for(var re=0,R=0;R<Z.rows.length;R++)re+=Z.rows[R].rowHeight;return Z.allRowsHeight=re,re}function K(Z){return Z.rowBlocks[Z.page]}q.exports=function(Z,$){var re=!Z._context.staticPlot,R=Z._fullLayout._paper.selectAll("."+o.cn.table).data($.map(function(de){var xe=y.unwrap(de).trace;return h(Z,xe)}),y.keyFun);R.exit().remove(),R.enter().append("g").classed(o.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),R.attr("width",function(de){return de.width+de.size.l+de.size.r}).attr("height",function(de){return de.height+de.size.t+de.size.b}).attr("transform",function(de){return i(de.translateX,de.translateY)});var N=R.selectAll("."+o.cn.tableControlView).data(y.repeat,y.keyFun),U=N.enter().append("g").classed(o.cn.tableControlView,!0).style("box-sizing","content-box");if(re){var te="onwheel"in document?"wheel":"mousewheel";U.on("mousemove",function(de){N.filter(function(xe){return de===xe}).call(m,Z)}).on(te,function(de){if(!de.scrollbarState.wheeling){de.scrollbarState.wheeling=!0;var xe=de.scrollY+p.event.deltaY;I(Z,N,null,xe)(de)||(p.event.stopPropagation(),p.event.preventDefault()),de.scrollbarState.wheeling=!1}}).call(m,Z,!0)}N.attr("transform",function(de){return i(de.size.l,de.size.t)});var j=N.selectAll("."+o.cn.scrollBackground).data(y.repeat,y.keyFun);j.enter().append("rect").classed(o.cn.scrollBackground,!0).attr("fill","none"),j.attr("width",function(de){return de.width}).attr("height",function(de){return de.height}),N.each(function(de){e.setClipUrl(p.select(this),f(Z,de),Z)});var Y=N.selectAll("."+o.cn.yColumn).data(function(de){return de.columns},y.keyFun);Y.enter().append("g").classed(o.cn.yColumn,!0),Y.exit().remove(),Y.attr("transform",function(de){return i(de.x,0)}),re&&Y.call(p.behavior.drag().origin(function(de){return _(p.select(this),de,-o.uplift),t(this),de.calcdata.columnDragInProgress=!0,m(N.filter(function(xe){return de.calcdata.key===xe.key}),Z),de}).on("drag",function(de){var xe=p.select(this),we=function(be){return(de===be?p.event.x:be.x)+be.columnWidth/2};de.x=Math.max(-o.overdrag,Math.min(de.calcdata.width+o.overdrag-de.columnWidth,p.event.x)),v(Y).filter(function(be){return be.calcdata.key===de.calcdata.key}).sort(function(be,Ae){return we(be)-we(Ae)}).forEach(function(be,Ae){be.xIndex=Ae,be.x=de===be?be.x:be.xScale(be)}),Y.filter(function(be){return de!==be}).transition().ease(o.transitionEase).duration(o.transitionDuration).attr("transform",function(be){return i(be.x,0)}),xe.call(n).attr("transform",i(de.x,-o.uplift))}).on("dragend",function(de){var xe=p.select(this),we=de.calcdata;de.x=de.xScale(de),de.calcdata.columnDragInProgress=!1,_(xe,de,0),function(be,Ae,fe){var me=Ae.gdColumnsOriginalOrder;Ae.gdColumns.sort(function(ke,Te){return fe[me.indexOf(ke)]-fe[me.indexOf(Te)]}),Ae.columnorder=fe,be.emit("plotly_restyle")}(Z,we,we.columns.map(function(be){return be.xIndex}))})),Y.each(function(de){e.setClipUrl(p.select(this),d(Z,de),Z)});var J=Y.selectAll("."+o.cn.columnBlock).data(s.splitToPanels,y.keyFun);J.enter().append("g").classed(o.cn.columnBlock,!0).attr("id",function(de){return de.key}),J.style("cursor",function(de){return de.dragHandle?"ew-resize":de.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ee=J.filter(k),ne=J.filter(T);re&&ne.call(p.behavior.drag().origin(function(de){return p.event.stopPropagation(),de}).on("drag",I(Z,N,-1)).on("dragend",function(){})),c(Z,N,ee,J),c(Z,N,ne,J);var se=N.selectAll("."+o.cn.scrollAreaClip).data(y.repeat,y.keyFun);se.enter().append("clipPath").classed(o.cn.scrollAreaClip,!0).attr("id",function(de){return f(Z,de)});var oe=se.selectAll("."+o.cn.scrollAreaClipRect).data(y.repeat,y.keyFun);oe.enter().append("rect").classed(o.cn.scrollAreaClipRect,!0).attr("x",-o.overdrag).attr("y",-o.uplift).attr("fill","none"),oe.attr("width",function(de){return de.width+2*o.overdrag}).attr("height",function(de){return de.height+o.uplift}),Y.selectAll("."+o.cn.columnBoundary).data(y.repeat,y.keyFun).enter().append("g").classed(o.cn.columnBoundary,!0);var he=Y.selectAll("."+o.cn.columnBoundaryClippath).data(y.repeat,y.keyFun);he.enter().append("clipPath").classed(o.cn.columnBoundaryClippath,!0),he.attr("id",function(de){return d(Z,de)});var le=he.selectAll("."+o.cn.columnBoundaryRect).data(y.repeat,y.keyFun);le.enter().append("rect").classed(o.cn.columnBoundaryRect,!0).attr("fill","none"),le.attr("width",function(de){return de.columnWidth+2*l(de)}).attr("height",function(de){return de.calcdata.height+2*l(de)+o.uplift}).attr("x",function(de){return-l(de)}).attr("y",function(de){return-l(de)}),M(null,ne,N)}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"./constants":1065,"./data_preparation_helper":1066,"./data_split_helpers":1067,"@plotly/d3":58}],1071:[function(u,q,W){var o=u("../../plots/template_attributes").hovertemplateAttrs,p=u("../../plots/template_attributes").texttemplateAttrs,x=u("../../components/colorscale/attributes"),y=u("../../plots/domain").attributes,e=u("../pie/attributes"),r=u("../sunburst/attributes"),t=u("./constants"),i=u("../../lib/extend").extendFlat;q.exports={labels:r.labels,parents:r.parents,values:r.values,branchvalues:r.branchvalues,count:r.count,level:r.level,maxdepth:r.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:i({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:r.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:r.marker.line,editType:"calc"},x("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:i({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:r.textinfo,texttemplate:p({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:r.hoverinfo,hovertemplate:o({},{keys:t.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:i({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:r.root,domain:y({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"../sunburst/attributes":1045,"./constants":1074}],1072:[function(u,q,W){var o=u("../../plots/plots");W.name="treemap",W.plot=function(p,x,y,e){o.plotBasePlot(W.name,p,x,y,e)},W.clean=function(p,x,y,e){o.cleanBasePlot(W.name,p,x,y,e)}},{"../../plots/plots":619}],1073:[function(u,q,W){var o=u("../sunburst/calc");W.calc=function(p,x){return o.calc(p,x)},W.crossTraceCalc=function(p){return o._runCrossTraceCalc("treemap",p)}},{"../sunburst/calc":1047}],1074:[function(u,q,W){q.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1075:[function(u,q,W){var o=u("../../lib"),p=u("./attributes"),x=u("../../components/color"),y=u("../../plots/domain").defaults,e=u("../bar/defaults").handleText,r=u("../bar/constants").TEXTPAD,t=u("../../components/colorscale"),i=t.hasColorscale,n=t.handleDefaults;q.exports=function(h,s,a,l){function f(T,k){return o.coerce(h,s,p,T,k)}var d=f("labels"),v=f("parents");if(d&&d.length&&v&&v.length){var m=f("values");m&&m.length?f("branchvalues"):f("count"),f("level"),f("maxdepth"),f("tiling.packing")==="squarify"&&f("tiling.squarifyratio"),f("tiling.flip"),f("tiling.pad");var c=f("text");f("texttemplate"),s.texttemplate||f("textinfo",Array.isArray(c)?"text+label":"label"),f("hovertext"),f("hovertemplate");var b=f("pathbar.visible");e(h,s,l,f,"auto",{hasPathbar:b,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),f("textposition");var g=s.textposition.indexOf("bottom")!==-1;f("marker.line.width")&&f("marker.line.color",l.paper_bgcolor);var w=f("marker.colors");(s._hasColorscale=i(h,"marker","colors")||(h.marker||{}).coloraxis)?n(h,s,l,f,{prefix:"marker.",cLetter:"c"}):f("marker.depthfade",!(w||[]).length);var _=2*s.textfont.size;f("marker.pad.t",g?_/4:_),f("marker.pad.l",_/4),f("marker.pad.r",_/4),f("marker.pad.b",g?_:_/4),s._hovered={marker:{line:{width:2,color:x.contrast(l.paper_bgcolor)}}},b&&(f("pathbar.thickness",s.pathbar.textfont.size+2*r),f("pathbar.side"),f("pathbar.edgeshape")),f("sort"),f("root.color"),y(s,l,f),s._length=null}else s.visible=!1}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":1071}],1076:[function(u,q,W){var o=u("@plotly/d3"),p=u("../sunburst/helpers"),x=u("../bar/uniform_text").clearMinTextSize,y=u("../bar/style").resizeText,e=u("./plot_one");q.exports=function(r,t,i,n,h){var s,a,l=h.type,f=h.drawDescendants,d=r._fullLayout,v=d["_"+l+"layer"],m=!i;x(l,d),(s=v.selectAll("g.trace."+l).data(t,function(c){return c[0].trace.uid})).enter().append("g").classed("trace",!0).classed(l,!0),s.order(),!d.uniformtext.mode&&p.hasTransition(i)?(n&&(a=n()),o.transition().duration(i.duration).ease(i.easing).each("end",function(){a&&a()}).each("interrupt",function(){a&&a()}).each(function(){v.selectAll("g.trace").each(function(c){e(r,c,this,i,f)})})):(s.each(function(c){e(r,c,this,i,f)}),d.uniformtext.mode&&y(r,v.selectAll(".trace"),l)),m&&s.exit().remove()}},{"../bar/style":662,"../bar/uniform_text":664,"../sunburst/helpers":1051,"./plot_one":1085,"@plotly/d3":58}],1077:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../lib"),x=u("../../components/drawing"),y=u("../../lib/svg_text_utils"),e=u("./partition"),r=u("./style").styleOne,t=u("./constants"),i=u("../sunburst/helpers"),n=u("../sunburst/fx");q.exports=function(h,s,a,l,f){var d=f.barDifY,v=f.width,m=f.height,c=f.viewX,b=f.viewY,g=f.pathSlice,w=f.toMoveInsideSlice,_=f.strTransform,T=f.hasTransition,k=f.handleSlicesExit,L=f.makeUpdateSliceInterpolator,M=f.makeUpdateTextInterpolator,I={},P=h._fullLayout,S=s[0],E=S.trace,D=S.hierarchy,F=v/E._entryDepth,H=i.listPath(a.data,"id"),V=e(D.copy(),[v,m],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(V=V.filter(function(K){var Z=H.indexOf(K.data.id);return Z!==-1&&(K.x0=F*Z,K.x1=F*(Z+1),K.y0=d,K.y1=d+m,K.onPathbar=!0,!0)})).reverse(),(l=l.data(V,i.getPtId)).enter().append("g").classed("pathbar",!0),k(l,!0,I,[v,m],g),l.order();var Q=l;T&&(Q=Q.transition().each("end",function(){var K=o.select(this);i.setSliceCursor(K,h,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),Q.each(function(K){K._x0=c(K.x0),K._x1=c(K.x1),K._y0=b(K.y0),K._y1=b(K.y1),K._hoverX=c(K.x1-Math.min(v,m)/2),K._hoverY=b(K.y1-m/2);var Z=o.select(this),$=p.ensureSingle(Z,"path","surface",function(U){U.style("pointer-events","all")});T?$.transition().attrTween("d",function(U){var te=L(U,!0,I,[v,m]);return function(j){return g(te(j))}}):$.attr("d",g),Z.call(n,a,h,s,{styleOne:r,eventDataKeys:t.eventDataKeys,transitionTime:t.CLICK_TRANSITION_TIME,transitionEasing:t.CLICK_TRANSITION_EASING}).call(i.setSliceCursor,h,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:h._transitioning}),$.call(r,K,E,{hovered:!1}),K._text=(i.getPtLabel(K)||"").split("<br>").join(" ")||"";var re=p.ensureSingle(Z,"g","slicetext"),R=p.ensureSingle(re,"text","",function(U){U.attr("data-notex",1)}),N=p.ensureUniformFontSize(h,i.determineTextFont(E,K,P.font,{onPathbar:!0}));R.text(K._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(x.font,N).call(y.convertToTspans,h),K.textBB=x.bBox(R.node()),K.transform=w(K,{fontSize:N.size,onPathbar:!0}),K.transform.fontSize=N.size,T?R.transition().attrTween("transform",function(U){var te=M(U,!0,I,[v,m]);return function(j){return _(te(j))}}):R.attr("transform",_(K))})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"./constants":1074,"./partition":1083,"./style":1086,"@plotly/d3":58}],1078:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../lib"),x=u("../../components/drawing"),y=u("../../lib/svg_text_utils"),e=u("./partition"),r=u("./style").styleOne,t=u("./constants"),i=u("../sunburst/helpers"),n=u("../sunburst/fx"),h=u("../sunburst/plot").formatSliceLabel;q.exports=function(s,a,l,f,d){var v=d.width,m=d.height,c=d.viewX,b=d.viewY,g=d.pathSlice,w=d.toMoveInsideSlice,_=d.strTransform,T=d.hasTransition,k=d.handleSlicesExit,L=d.makeUpdateSliceInterpolator,M=d.makeUpdateTextInterpolator,I=d.prevEntry,P=s._fullLayout,S=a[0].trace,E=S.textposition.indexOf("left")!==-1,D=S.textposition.indexOf("right")!==-1,F=S.textposition.indexOf("bottom")!==-1,H=!F&&!S.marker.pad.t||F&&!S.marker.pad.b,V=e(l,[v,m],{packing:S.tiling.packing,squarifyratio:S.tiling.squarifyratio,flipX:S.tiling.flip.indexOf("x")>-1,flipY:S.tiling.flip.indexOf("y")>-1,pad:{inner:S.tiling.pad,top:S.marker.pad.t,left:S.marker.pad.l,right:S.marker.pad.r,bottom:S.marker.pad.b}}).descendants(),Q=1/0,K=-1/0;V.forEach(function(N){var U=N.depth;U>=S._maxDepth?(N.x0=N.x1=(N.x0+N.x1)/2,N.y0=N.y1=(N.y0+N.y1)/2):(Q=Math.min(Q,U),K=Math.max(K,U))}),f=f.data(V,i.getPtId),S._maxVisibleLayers=isFinite(K)?K-Q+1:0,f.enter().append("g").classed("slice",!0),k(f,!1,{},[v,m],g),f.order();var Z=null;if(T&&I){var $=i.getPtId(I);f.each(function(N){Z===null&&i.getPtId(N)===$&&(Z={x0:N.x0,x1:N.x1,y0:N.y0,y1:N.y1})})}var re=function(){return Z||{x0:0,x1:v,y0:0,y1:m}},R=f;return T&&(R=R.transition().each("end",function(){var N=o.select(this);i.setSliceCursor(N,s,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),R.each(function(N){var U=i.isHeader(N,S);N._x0=c(N.x0),N._x1=c(N.x1),N._y0=b(N.y0),N._y1=b(N.y1),N._hoverX=c(N.x1-S.marker.pad.r),N._hoverY=b(F?N.y1-S.marker.pad.b/2:N.y0+S.marker.pad.t/2);var te=o.select(this),j=p.ensureSingle(te,"path","surface",function(ne){ne.style("pointer-events","all")});T?j.transition().attrTween("d",function(ne){var se=L(ne,!1,re(),[v,m]);return function(oe){return g(se(oe))}}):j.attr("d",g),te.call(n,l,s,a,{styleOne:r,eventDataKeys:t.eventDataKeys,transitionTime:t.CLICK_TRANSITION_TIME,transitionEasing:t.CLICK_TRANSITION_EASING}).call(i.setSliceCursor,s,{isTransitioning:s._transitioning}),j.call(r,N,S,{hovered:!1}),N.x0===N.x1||N.y0===N.y1?N._text="":N._text=U?H?"":i.getPtLabel(N)||"":h(N,l,S,a,P)||"";var Y=p.ensureSingle(te,"g","slicetext"),J=p.ensureSingle(Y,"text","",function(ne){ne.attr("data-notex",1)}),ee=p.ensureUniformFontSize(s,i.determineTextFont(S,N,P.font));J.text(N._text||" ").classed("slicetext",!0).attr("text-anchor",D?"end":E||U?"start":"middle").call(x.font,ee).call(y.convertToTspans,s),N.textBB=x.bBox(J.node()),N.transform=w(N,{fontSize:ee.size,isHeader:U}),N.transform.fontSize=ee.size,T?J.transition().attrTween("transform",function(ne){var se=M(ne,!1,re(),[v,m]);return function(oe){return _(se(oe))}}):J.attr("transform",_(N))}),Z}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"../sunburst/plot":1055,"./constants":1074,"./partition":1083,"./style":1086,"@plotly/d3":58}],1079:[function(u,q,W){q.exports=function o(p,x,y){var e;y.swapXY&&(e=p.x0,p.x0=p.y0,p.y0=e,e=p.x1,p.x1=p.y1,p.y1=e),y.flipX&&(e=p.x0,p.x0=x[0]-p.x1,p.x1=x[0]-e),y.flipY&&(e=p.y0,p.y0=x[1]-p.y1,p.y1=x[1]-e);var r=p.children;if(r)for(var t=0;t<r.length;t++)o(r[t],x,y)}},{}],1080:[function(u,q,W){q.exports={moduleType:"trace",name:"treemap",basePlotModule:u("./base_plot"),categories:[],animatable:!0,attributes:u("./attributes"),layoutAttributes:u("./layout_attributes"),supplyDefaults:u("./defaults"),supplyLayoutDefaults:u("./layout_defaults"),calc:u("./calc").calc,crossTraceCalc:u("./calc").crossTraceCalc,plot:u("./plot"),style:u("./style").style,colorbar:u("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":1071,"./base_plot":1072,"./calc":1073,"./defaults":1075,"./layout_attributes":1081,"./layout_defaults":1082,"./plot":1084,"./style":1086}],1081:[function(u,q,W){q.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1082:[function(u,q,W){var o=u("../../lib"),p=u("./layout_attributes");q.exports=function(x,y){function e(r,t){return o.coerce(x,y,p,r,t)}e("treemapcolorway",y.colorway),e("extendtreemapcolors")}},{"../../lib":503,"./layout_attributes":1081}],1083:[function(u,q,W){var o=u("d3-hierarchy"),p=u("./flip_tree");q.exports=function(x,y,e){var r,t=e.flipX,i=e.flipY,n=e.packing==="dice-slice",h=e.pad[i?"bottom":"top"],s=e.pad[t?"right":"left"],a=e.pad[t?"left":"right"],l=e.pad[i?"top":"bottom"];n&&(r=s,s=h,h=r,r=a,a=l,l=r);var f=o.treemap().tile(function(d,v){switch(d){case"squarify":return o.treemapSquarify.ratio(v);case"binary":return o.treemapBinary;case"dice":return o.treemapDice;case"slice":return o.treemapSlice;default:return o.treemapSliceDice}}(e.packing,e.squarifyratio)).paddingInner(e.pad.inner).paddingLeft(s).paddingRight(a).paddingTop(h).paddingBottom(l).size(n?[y[1],y[0]]:y)(x);return(n||t||i)&&p(f,y,{swapXY:n,flipX:t,flipY:i}),f}},{"./flip_tree":1079,"d3-hierarchy":115}],1084:[function(u,q,W){var o=u("./draw"),p=u("./draw_descendants");q.exports=function(x,y,e,r){return o(x,y,e,r,{type:"treemap",drawDescendants:p})}},{"./draw":1076,"./draw_descendants":1078}],1085:[function(u,q,W){var o=u("@plotly/d3"),p=u("d3-interpolate").interpolate,x=u("../sunburst/helpers"),y=u("../../lib"),e=u("../bar/constants").TEXTPAD,r=u("../bar/plot").toMoveInsideBar,t=u("../bar/uniform_text").recordMinTextSize,i=u("./constants"),n=u("./draw_ancestors");function h(s){return x.isHierarchyRoot(s)?"":x.getPtId(s)}q.exports=function(s,a,l,f,d){var v=s._fullLayout,m=a[0],c=m.trace,b=c.type==="icicle",g=m.hierarchy,w=x.findEntryWithLevel(g,c.level),_=o.select(l),T=_.selectAll("g.pathbar"),k=_.selectAll("g.slice");if(!w)return T.remove(),void k.remove();var L=x.isHierarchyRoot(w),M=!v.uniformtext.mode&&x.hasTransition(f),I=x.getMaxDepth(c),P=v._size,S=c.domain,E=P.w*(S.x[1]-S.x[0]),D=P.h*(S.y[1]-S.y[0]),F=E,H=c.pathbar.thickness,V=c.marker.line.width+i.gapWithPathbar,Q=c.pathbar.visible?c.pathbar.side.indexOf("bottom")>-1?D+V:-(H+V):0,K={x0:F,x1:F,y0:Q,y1:Q+H},Z=function(Me,Oe,Fe){var qe=c.tiling.pad,et=function(Ze){return Ze-qe<=Oe.x0},ze=function(Ze){return Ze+qe>=Oe.x1},Ue=function(Ze){return Ze-qe<=Oe.y0},We=function(Ze){return Ze+qe>=Oe.y1};return Me.x0===Oe.x0&&Me.x1===Oe.x1&&Me.y0===Oe.y0&&Me.y1===Oe.y1?{x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1}:{x0:et(Me.x0-qe)?0:ze(Me.x0-qe)?Fe[0]:Me.x0,x1:et(Me.x1+qe)?0:ze(Me.x1+qe)?Fe[0]:Me.x1,y0:Ue(Me.y0-qe)?0:We(Me.y0-qe)?Fe[1]:Me.y0,y1:Ue(Me.y1+qe)?0:We(Me.y1+qe)?Fe[1]:Me.y1}},$=null,re={},R={},N=null,U=function(Me,Oe){return Oe?re[h(Me)]:R[h(Me)]},te=function(Me,Oe,Fe,qe){if(Oe)return re[h(g)]||K;var et=R[c.level]||Fe;return function(ze){return ze.data.depth-w.data.depth<I}(Me)?Z(Me,et,qe):{}};m.hasMultipleRoots&&L&&I++,c._maxDepth=I,c._backgroundColor=v.paper_bgcolor,c._entryDepth=w.data.depth,c._atRootLevel=L;var j=-E/2+P.l+P.w*(S.x[1]+S.x[0])/2,Y=-D/2+P.t+P.h*(1-(S.y[1]+S.y[0])/2),J=function(Me){return j+Me},ee=function(Me){return Y+Me},ne=ee(0),se=J(0),oe=function(Me){return se+Me},he=function(Me){return ne+Me};function le(Me,Oe){return Me+","+Oe}var de=oe(0),xe=function(Me){Me.x=Math.max(de,Me.x)},we=c.pathbar.edgeshape,be=function(Me,Oe){var Fe=Me.x0,qe=Me.x1,et=Me.y0,ze=Me.y1,Ue=Me.textBB,We=function(At){return c.textposition.indexOf(At)!==-1},Ze=We("bottom"),nt=We("top")||Oe.isHeader&&!Ze?"start":Ze?"end":"middle",ft=We("right"),xt=We("left")||Oe.onPathbar?-1:ft?1:0,It=c[b?"tiling":"marker"].pad;if(Oe.isHeader){if((Fe+=(b?It:It.l)-e)>=(qe-=(b?It:It.r)-e)){var Et=(Fe+qe)/2;Fe=Et,qe=Et}var it;Ze?et<(it=ze-(b?It:It.b))&&it<ze&&(et=it):et<(it=et+(b?It:It.t))&&it<ze&&(ze=it)}var rt=r(Fe,qe,et,ze,Ue,{isHorizontal:!1,constrained:!0,angle:0,anchor:nt,leftToRight:xt});return rt.fontSize=Oe.fontSize,rt.targetX=J(rt.targetX),rt.targetY=ee(rt.targetY),isNaN(rt.targetX)||isNaN(rt.targetY)?{}:(Fe!==qe&&et!==ze&&t(c.type,rt,v),{scale:rt.scale,rotate:rt.rotate,textX:rt.textX,textY:rt.textY,anchorX:rt.anchorX,anchorY:rt.anchorY,targetX:rt.targetX,targetY:rt.targetY})},Ae=function(Me,Oe){for(var Fe,qe=0,et=Me;!Fe&&qe<I;)qe++,(et=et.parent)?Fe=U(et,Oe):qe=I;return Fe||{}},fe=function(Me,Oe,Fe,qe,et){var ze,Ue=U(Me,Oe);if(Ue)ze=Ue;else if(Oe)ze=K;else if($)if(Me.parent){var We=N||Fe;We&&!Oe?ze=Z(Me,We,qe):(ze={},y.extendFlat(ze,Ae(Me,Oe)))}else ze=y.extendFlat({},Me),b&&(et.orientation==="h"?et.flipX?ze.x0=Me.x1:ze.x1=0:et.flipY?ze.y0=Me.y1:ze.y1=0);else ze={};return p(ze,{x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1})},me=function(Me,Oe,Fe,qe){var et=U(Me,Oe),ze={},Ue=te(Me,Oe,Fe,qe);y.extendFlat(ze,{transform:be({x0:Ue.x0,x1:Ue.x1,y0:Ue.y0,y1:Ue.y1,textBB:Me.textBB,_text:Me._text},{isHeader:x.isHeader(Me,c)})}),et?ze=et:Me.parent&&y.extendFlat(ze,Ae(Me,Oe));var We=Me.transform;return Me.x0!==Me.x1&&Me.y0!==Me.y1&&t(c.type,We,v),p(ze,{transform:{scale:We.scale,rotate:We.rotate,textX:We.textX,textY:We.textY,anchorX:We.anchorX,anchorY:We.anchorY,targetX:We.targetX,targetY:We.targetY}})},ke=function(Me,Oe,Fe,qe,et){var ze=qe[0],Ue=qe[1];M?Me.exit().transition().each(function(){var We=o.select(this);We.select("path.surface").transition().attrTween("d",function(Ze){var nt=function(ft,xt,It,Et){var it,rt=U(ft,xt);if(xt)it=K;else{var At=U(w,xt);it=At?Z(ft,At,Et):{}}return p(rt,it)}(Ze,Oe,0,[ze,Ue]);return function(ft){return et(nt(ft))}}),We.select("g.slicetext").attr("opacity",0)}).remove():Me.exit().remove()},Te=function(Me){var Oe=Me.transform;return Me.x0!==Me.x1&&Me.y0!==Me.y1&&t(c.type,Oe,v),y.getTextTransform({textX:Oe.textX,textY:Oe.textY,anchorX:Oe.anchorX,anchorY:Oe.anchorY,targetX:Oe.targetX,targetY:Oe.targetY,scale:Oe.scale,rotate:Oe.rotate})};M&&(T.each(function(Me){re[h(Me)]={x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1},Me.transform&&(re[h(Me)].transform={textX:Me.transform.textX,textY:Me.transform.textY,anchorX:Me.transform.anchorX,anchorY:Me.transform.anchorY,targetX:Me.transform.targetX,targetY:Me.transform.targetY,scale:Me.transform.scale,rotate:Me.transform.rotate})}),k.each(function(Me){R[h(Me)]={x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1},Me.transform&&(R[h(Me)].transform={textX:Me.transform.textX,textY:Me.transform.textY,anchorX:Me.transform.anchorX,anchorY:Me.transform.anchorY,targetX:Me.transform.targetX,targetY:Me.transform.targetY,scale:Me.transform.scale,rotate:Me.transform.rotate}),!$&&x.isEntry(Me)&&($=Me)})),N=d(s,a,w,k,{width:E,height:D,viewX:J,viewY:ee,pathSlice:function(Me){var Oe=J(Me.x0),Fe=J(Me.x1),qe=ee(Me.y0),et=ee(Me.y1),ze=Fe-Oe,Ue=et-qe;return!ze||!Ue?"":"M"+le(Oe,qe+0)+"L"+le(Fe-0,qe)+"L"+le(Fe,et-0)+"L"+le(Oe+0,et)+"Z"},toMoveInsideSlice:be,prevEntry:$,makeUpdateSliceInterpolator:fe,makeUpdateTextInterpolator:me,handleSlicesExit:ke,hasTransition:M,strTransform:Te}),c.pathbar.visible?n(s,a,w,T,{barDifY:Q,width:F,height:H,viewX:oe,viewY:he,pathSlice:function(Me){var Oe=oe(Math.max(Math.min(Me.x0,Me.x0),0)),Fe=oe(Math.min(Math.max(Me.x1,Me.x1),F)),qe=he(Me.y0),et=he(Me.y1),ze=H/2,Ue={},We={};Ue.x=Oe,We.x=Fe,Ue.y=We.y=(qe+et)/2;var Ze={x:Oe,y:qe},nt={x:Fe,y:qe},ft={x:Fe,y:et},xt={x:Oe,y:et};return we===">"?(Ze.x-=ze,nt.x-=ze,ft.x-=ze,xt.x-=ze):we==="/"?(ft.x-=ze,xt.x-=ze,Ue.x-=ze/2,We.x-=ze/2):we==="\\"?(Ze.x-=ze,nt.x-=ze,Ue.x-=ze/2,We.x-=ze/2):we==="<"&&(Ue.x-=ze,We.x-=ze),xe(Ze),xe(xt),xe(Ue),xe(nt),xe(ft),xe(We),"M"+le(Ze.x,Ze.y)+"L"+le(nt.x,nt.y)+"L"+le(We.x,We.y)+"L"+le(ft.x,ft.y)+"L"+le(xt.x,xt.y)+"L"+le(Ue.x,Ue.y)+"Z"},toMoveInsideSlice:be,makeUpdateSliceInterpolator:fe,makeUpdateTextInterpolator:me,handleSlicesExit:ke,hasTransition:M,strTransform:Te}):T.remove()}},{"../../lib":503,"../bar/constants":650,"../bar/plot":659,"../bar/uniform_text":664,"../sunburst/helpers":1051,"./constants":1074,"./draw_ancestors":1077,"@plotly/d3":58,"d3-interpolate":116}],1086:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../components/color"),x=u("../../lib"),y=u("../sunburst/helpers"),e=u("../bar/uniform_text").resizeText;function r(t,i,n,h){var s,a,l=(h||{}).hovered,f=i.data.data,d=f.i,v=f.color,m=y.isHierarchyRoot(i),c=1;if(l)s=n._hovered.marker.line.color,a=n._hovered.marker.line.width;else if(m&&v===n.root.color)c=100,s="rgba(0,0,0,0)",a=0;else if(s=x.castOption(n,d,"marker.line.color")||p.defaultLine,a=x.castOption(n,d,"marker.line.width")||0,!n._hasColorscale&&!i.onPathbar){var b=n.marker.depthfade;if(b){var g,w=p.combine(p.addOpacity(n._backgroundColor,.75),v);if(b===!0){var _=y.getMaxDepth(n);g=isFinite(_)?y.isLeaf(i)?0:n._maxVisibleLayers-(i.data.depth-n._entryDepth):i.data.height+1}else g=i.data.depth-n._entryDepth,n._atRootLevel||g++;if(g>0)for(var T=0;T<g;T++){var k=.5*T/g;v=p.combine(p.addOpacity(w,k),v)}}}t.style("stroke-width",a).call(p.fill,v).call(p.stroke,s).style("opacity",c)}q.exports={style:function(t){var i=t._fullLayout._treemaplayer.selectAll(".trace");e(t,i,"treemap"),i.each(function(n){var h=o.select(this),s=n[0].trace;h.style("opacity",s.opacity),h.selectAll("path.surface").each(function(a){o.select(this).call(r,a,s,{hovered:!1})})})},styleOne:r}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"../sunburst/helpers":1051,"@plotly/d3":58}],1087:[function(u,q,W){var o=u("../box/attributes"),p=u("../../lib/extend").extendFlat,x=u("../../plots/cartesian/axis_format_attributes").axisHoverFormat;q.exports={y:o.y,x:o.x,x0:o.x0,y0:o.y0,xhoverformat:x("x"),yhoverformat:x("y"),name:p({},o.name,{}),orientation:p({},o.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:o.fillcolor,points:p({},o.boxpoints,{}),jitter:p({},o.jitter,{}),pointpos:p({},o.pointpos,{}),width:p({},o.width,{}),marker:o.marker,text:o.text,hovertext:o.hovertext,hovertemplate:o.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:o.offsetgroup,alignmentgroup:o.alignmentgroup,selected:o.selected,unselected:o.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673}],1088:[function(u,q,W){var o=u("../../lib"),p=u("../../plots/cartesian/axes"),x=u("../box/calc"),y=u("./helpers"),e=u("../../constants/numerical").BADNUM;function r(i,n,h){var s=n.max-n.min;if(!s)return i.bandwidth?i.bandwidth:0;if(i.bandwidth)return Math.max(i.bandwidth,s/1e4);var a=h.length,l=o.stdev(h,a-1,n.mean);return Math.max(function(f,d,v){return 1.059*Math.min(d,v/1.349)*Math.pow(f,-.2)}(a,l,n.q3-n.q1),s/100)}function t(i,n,h,s){var a,l=i.spanmode,f=i.span||[],d=[n.min,n.max],v=[n.min-2*s,n.max+2*s];function m(b){var g=f[b],w=h.type==="multicategory"?h.r2c(g):h.d2c(g,0,i[n.valLetter+"calendar"]);return w===e?v[b]:w}var c={type:"linear",range:a=l==="soft"?v:l==="hard"?d:[m(0),m(1)]};return p.setConvert(c),c.cleanRange(),a}q.exports=function(i,n){var h=x(i,n);if(h[0].t.empty)return h;for(var s=i._fullLayout,a=p.getFromId(i,n[n.orientation==="h"?"xaxis":"yaxis"]),l=1/0,f=-1/0,d=0,v=0,m=0;m<h.length;m++){var c=h[m],b=c.pts.map(y.extractVal),g=c.bandwidth=r(n,c,b),w=c.span=t(n,c,a,g);if(c.min===c.max&&g===0)w=c.span=[c.min,c.max],c.density=[{v:1,t:w[0]}],c.bandwidth=g,d=Math.max(d,1);else{var _=w[1]-w[0],T=Math.ceil(_/(g/3)),k=_/T;if(!isFinite(k)||!isFinite(T))return o.error("Something went wrong with computing the violin span"),h[0].t.empty=!0,h;var L=y.makeKDE(c,n,b);c.density=new Array(T);for(var M=0,I=w[0];I<w[1]+k/2;M++,I+=k){var P=L(I);c.density[M]={v:P,t:I},d=Math.max(d,P)}}v=Math.max(v,b.length),l=Math.min(l,w[0]),f=Math.max(f,w[1])}var S=p.findExtremes(a,[l,f],{padded:!0});if(n._extremes[a._id]=S,n.width)h[0].t.maxKDE=d;else{var E=s._violinScaleGroupStats,D=n.scalegroup,F=E[D];F?(F.maxKDE=Math.max(F.maxKDE,d),F.maxCount=Math.max(F.maxCount,v)):E[D]={maxKDE:d,maxCount:v}}return h[0].t.labels.kde=o._(i,"kde:"),h}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../box/calc":674,"./helpers":1091}],1089:[function(u,q,W){var o=u("../box/cross_trace_calc").setPositionOffset,p=["v","h"];q.exports=function(x,y){for(var e=x.calcdata,r=y.xaxis,t=y.yaxis,i=0;i<p.length;i++){for(var n=p[i],h=n==="h"?t:r,s=[],a=0;a<e.length;a++){var l=e[a],f=l[0].t,d=l[0].trace;d.visible!==!0||d.type!=="violin"||f.empty||d.orientation!==n||d.xaxis!==r._id||d.yaxis!==t._id||s.push(a)}o("violin",x,s,h)}}},{"../box/cross_trace_calc":675}],1090:[function(u,q,W){var o=u("../../lib"),p=u("../../components/color"),x=u("../box/defaults"),y=u("./attributes");q.exports=function(e,r,t,i){function n(_,T){return o.coerce(e,r,y,_,T)}function h(_,T){return o.coerce2(e,r,y,_,T)}if(x.handleSampleDefaults(e,r,n,i),r.visible!==!1){n("bandwidth"),n("side"),n("width")||(n("scalegroup",r.name),n("scalemode"));var s,a=n("span");Array.isArray(a)&&(s="manual"),n("spanmode",s);var l=n("line.color",(e.marker||{}).color||t),f=n("line.width"),d=n("fillcolor",p.addOpacity(r.line.color,.5));x.handlePointsDefaults(e,r,n,{prefix:""});var v=h("box.width"),m=h("box.fillcolor",d),c=h("box.line.color",l),b=h("box.line.width",f);n("box.visible",Boolean(v||m||c||b))||(r.box={visible:!1});var g=h("meanline.color",l),w=h("meanline.width",f);n("meanline.visible",Boolean(g||w))||(r.meanline={visible:!1})}}},{"../../components/color":366,"../../lib":503,"../box/defaults":676,"./attributes":1087}],1091:[function(u,q,W){var o=u("../../lib"),p=function(x){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*x*x)};W.makeKDE=function(x,y,e){var r=e.length,t=p,i=x.bandwidth,n=1/(r*i);return function(h){for(var s=0,a=0;a<r;a++)s+=t((h-e[a])/i);return n*s}},W.getPositionOnKdePath=function(x,y,e){var r,t;y.orientation==="h"?(r="y",t="x"):(r="x",t="y");var i=o.findPointOnPath(x.path,e,t,{pathLength:x.pathLength}),n=x.posCenterPx,h=i[r];return[h,y.side==="both"?2*n-h:n]},W.getKdeValue=function(x,y,e){var r=x.pts.map(W.extractVal);return W.makeKDE(x,y,r)(e)/x.posDensityScale},W.extractVal=function(x){return x.v}},{"../../lib":503}],1092:[function(u,q,W){var o=u("../../lib"),p=u("../../plots/cartesian/axes"),x=u("../box/hover"),y=u("./helpers");q.exports=function(e,r,t,i,n){n||(n={});var h,s,a=n.hoverLayer,l=e.cd,f=l[0].trace,d=f.hoveron,v=d.indexOf("violins")!==-1,m=d.indexOf("kde")!==-1,c=[];if(v||m){var b=x.hoverOnBoxes(e,r,t,i);if(m&&b.length>0){var g,w,_,T,k,L=e.xa,M=e.ya;f.orientation==="h"?(k=r,g="y",_=M,w="x",T=L):(k=t,g="x",_=L,w="y",T=M);var I=l[e.index];if(k>=I.span[0]&&k<=I.span[1]){var P=o.extendFlat({},e),S=T.c2p(k,!0),E=y.getKdeValue(I,f,k),D=y.getPositionOnKdePath(I,f,S),F=_._offset,H=_._length;P[g+"0"]=D[0],P[g+"1"]=D[1],P[w+"0"]=P[w+"1"]=S,P[w+"Label"]=w+": "+p.hoverLabelText(T,k,f[w+"hoverformat"])+", "+l[0].t.labels.kde+" "+E.toFixed(3),P.spikeDistance=b[0].spikeDistance;var V=g+"Spike";P[V]=b[0][V],b[0].spikeDistance=void 0,b[0][V]=void 0,P.hovertemplate=!1,c.push(P),(s={stroke:e.color})[g+"1"]=o.constrain(F+D[0],F,F+H),s[g+"2"]=o.constrain(F+D[1],F,F+H),s[w+"1"]=s[w+"2"]=T._offset+S}}v&&(c=c.concat(b))}d.indexOf("points")!==-1&&(h=x.hoverOnPoints(e,r,t));var Q=a.selectAll(".violinline-"+f.uid).data(s?[0]:[]);return Q.enter().append("line").classed("violinline-"+f.uid,!0).attr("stroke-width",1.5),Q.exit().remove(),Q.attr(s),i==="closest"?h?[h]:c:(h&&c.push(h),c)}},{"../../lib":503,"../../plots/cartesian/axes":554,"../box/hover":678,"./helpers":1091}],1093:[function(u,q,W){q.exports={attributes:u("./attributes"),layoutAttributes:u("./layout_attributes"),supplyDefaults:u("./defaults"),crossTraceDefaults:u("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:u("./layout_defaults"),calc:u("./calc"),crossTraceCalc:u("./cross_trace_calc"),plot:u("./plot"),style:u("./style"),styleOnSelect:u("../scatter/style").styleOnSelect,hoverPoints:u("./hover"),selectPoints:u("../box/select"),moduleType:"trace",name:"violin",basePlotModule:u("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../box/defaults":676,"../box/select":683,"../scatter/style":950,"./attributes":1087,"./calc":1088,"./cross_trace_calc":1089,"./defaults":1090,"./hover":1092,"./layout_attributes":1094,"./layout_defaults":1095,"./plot":1096,"./style":1097}],1094:[function(u,q,W){var o=u("../box/layout_attributes"),p=u("../../lib").extendFlat;q.exports={violinmode:p({},o.boxmode,{}),violingap:p({},o.boxgap,{}),violingroupgap:p({},o.boxgroupgap,{})}},{"../../lib":503,"../box/layout_attributes":680}],1095:[function(u,q,W){var o=u("../../lib"),p=u("./layout_attributes"),x=u("../box/layout_defaults");q.exports=function(y,e,r){x._supply(y,e,r,function(t,i){return o.coerce(y,e,p,t,i)},"violin")}},{"../../lib":503,"../box/layout_defaults":681,"./layout_attributes":1094}],1096:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../lib"),x=u("../../components/drawing"),y=u("../box/plot"),e=u("../scatter/line_points"),r=u("./helpers");q.exports=function(t,i,n,h){var s=t._fullLayout,a=i.xaxis,l=i.yaxis;function f(d){var v=e(d,{xaxis:a,yaxis:l,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return x.smoothopen(v[0],1)}p.makeTraceGroups(h,n,"trace violins").each(function(d){var v=o.select(this),m=d[0],c=m.t,b=m.trace;if(b.visible!==!0||c.empty)v.remove();else{var g=c.bPos,w=c.bdPos,_=i[c.valLetter+"axis"],T=i[c.posLetter+"axis"],k=b.side==="both",L=k||b.side==="positive",M=k||b.side==="negative",I=v.selectAll("path.violin").data(p.identity);I.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),I.exit().remove(),I.each(function(Q){var K,Z,$,re,R,N,U,te,j=o.select(this),Y=Q.density,J=Y.length,ee=T.c2l(Q.pos+g,!0),ne=T.l2p(ee);if(b.width)K=c.maxKDE/w;else{var se=s._violinScaleGroupStats[b.scalegroup];K=b.scalemode==="count"?se.maxKDE/w*(se.maxCount/Q.pts.length):se.maxKDE/w}if(L){for(U=new Array(J),R=0;R<J;R++)(te=U[R]={})[c.posLetter]=ee+Y[R].v/K,te[c.valLetter]=_.c2l(Y[R].t,!0);Z=f(U)}if(M){for(U=new Array(J),N=0,R=J-1;N<J;N++,R--)(te=U[N]={})[c.posLetter]=ee-Y[R].v/K,te[c.valLetter]=_.c2l(Y[R].t,!0);$=f(U)}if(k)re=Z+"L"+$.substr(1)+"Z";else{var oe=[ne,_.c2p(Y[0].t)],he=[ne,_.c2p(Y[J-1].t)];b.orientation==="h"&&(oe.reverse(),he.reverse()),re=L?"M"+oe+"L"+Z.substr(1)+"L"+he:"M"+he+"L"+$.substr(1)+"L"+oe}j.attr("d",re),Q.posCenterPx=ne,Q.posDensityScale=K*w,Q.path=j.node(),Q.pathLength=Q.path.getTotalLength()/(k?2:1)});var P,S,E,D=b.box,F=D.width,H=(D.line||{}).width;k?(P=w*F,S=0):L?(P=[0,w*F/2],S=H*{x:1,y:-1}[c.posLetter]):(P=[w*F/2,0],S=H*{x:-1,y:1}[c.posLetter]),y.plotBoxAndWhiskers(v,{pos:T,val:_},b,{bPos:g,bdPos:P,bPosPxOffset:S}),y.plotBoxMean(v,{pos:T,val:_},b,{bPos:g,bdPos:P,bPosPxOffset:S}),!b.box.visible&&b.meanline.visible&&(E=p.identity);var V=v.selectAll("path.meanline").data(E||[]);V.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),V.exit().remove(),V.each(function(Q){var K=_.c2p(Q.mean,!0),Z=r.getPositionOnKdePath(Q,b,K);o.select(this).attr("d",b.orientation==="h"?"M"+K+","+Z[0]+"V"+Z[1]:"M"+Z[0]+","+K+"H"+Z[1])}),y.plotPoints(v,{x:a,y:l},b,c)}})}},{"../../components/drawing":388,"../../lib":503,"../box/plot":682,"../scatter/line_points":940,"./helpers":1091,"@plotly/d3":58}],1097:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../components/color"),x=u("../scatter/style").stylePoints;q.exports=function(y){var e=o.select(y).selectAll("g.trace.violins");e.style("opacity",function(r){return r[0].trace.opacity}),e.each(function(r){var t=r[0].trace,i=o.select(this),n=t.box||{},h=n.line||{},s=t.meanline||{},a=s.width;i.selectAll("path.violin").style("stroke-width",t.line.width+"px").call(p.stroke,t.line.color).call(p.fill,t.fillcolor),i.selectAll("path.box").style("stroke-width",h.width+"px").call(p.stroke,h.color).call(p.fill,n.fillcolor);var l={"stroke-width":a+"px","stroke-dasharray":2*a+"px,"+a+"px"};i.selectAll("path.mean").style(l).call(p.stroke,s.color),i.selectAll("path.meanline").style(l).call(p.stroke,s.color),x(i,t,y)})}},{"../../components/color":366,"../scatter/style":950,"@plotly/d3":58}],1098:[function(u,q,W){var o=u("../../components/colorscale/attributes"),p=u("../isosurface/attributes"),x=u("../surface/attributes"),y=u("../../plots/attributes"),e=u("../../lib/extend").extendFlat,r=u("../../plot_api/edit_types").overrideAll,t=q.exports=r(e({x:p.x,y:p.y,z:p.z,value:p.value,isomin:p.isomin,isomax:p.isomax,surface:p.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:p.slices,caps:p.caps,text:p.text,hovertext:p.hovertext,xhoverformat:p.xhoverformat,yhoverformat:p.yhoverformat,zhoverformat:p.zhoverformat,valuehoverformat:p.valuehoverformat,hovertemplate:p.hovertemplate},o("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:p.colorbar,opacity:p.opacity,opacityscale:x.opacityscale,lightposition:p.lightposition,lighting:p.lighting,flatshading:p.flatshading,contour:p.contour,hoverinfo:e({},y.hoverinfo),showlegend:e({},y.showlegend,{dflt:!1})}),"calc","nested");t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../isosurface/attributes":862,"../surface/attributes":1057}],1099:[function(u,q,W){var o=u("../../../stackgl_modules").gl_mesh3d,p=u("../../lib/gl_format_color").parseColorScale,x=u("../../lib/str2rgbarray"),y=u("../../components/colorscale").extractOpts,e=u("../../plots/gl3d/zip3"),r=u("../isosurface/convert").findNearestOnAxis,t=u("../isosurface/convert").generateIsoMeshes;function i(h,s,a){this.scene=h,this.uid=a,this.mesh=s,this.name="",this.data=null,this.showContour=!1}var n=i.prototype;n.handlePick=function(h){if(h.object===this.mesh){var s=h.data.index,a=this.data._meshX[s],l=this.data._meshY[s],f=this.data._meshZ[s],d=this.data._Ys.length,v=this.data._Zs.length,m=r(a,this.data._Xs).id,c=r(l,this.data._Ys).id,b=r(f,this.data._Zs).id,g=h.index=b+v*c+v*d*m;h.traceCoordinate=[this.data._meshX[g],this.data._meshY[g],this.data._meshZ[g],this.data._value[g]];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&w[g]!==void 0?h.textLabel=w[g]:w&&(h.textLabel=w),!0}},n.update=function(h){var s=this.scene,a=s.fullSceneLayout;function l(v,m,c,b){return m.map(function(g){return v.d2l(g,0,b)*c})}this.data=t(h);var f={positions:e(l(a.xaxis,h._meshX,s.dataScale[0],h.xcalendar),l(a.yaxis,h._meshY,s.dataScale[1],h.ycalendar),l(a.zaxis,h._meshZ,s.dataScale[2],h.zcalendar)),cells:e(h._meshI,h._meshJ,h._meshK),lightPosition:[h.lightposition.x,h.lightposition.y,h.lightposition.z],ambient:h.lighting.ambient,diffuse:h.lighting.diffuse,specular:h.lighting.specular,roughness:h.lighting.roughness,fresnel:h.lighting.fresnel,vertexNormalsEpsilon:h.lighting.vertexnormalsepsilon,faceNormalsEpsilon:h.lighting.facenormalsepsilon,opacity:h.opacity,opacityscale:h.opacityscale,contourEnable:h.contour.show,contourColor:x(h.contour.color).slice(0,3),contourWidth:h.contour.width,useFacetNormals:h.flatshading},d=y(h);f.vertexIntensity=h._meshIntensity,f.vertexIntensityBounds=[d.min,d.max],f.colormap=p(h),this.mesh.update(f)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},q.exports=function(h,s){var a=h.glplot.gl,l=o({gl:a}),f=new i(h,l,s.uid);return l._trace=f,f.update(s),h.glplot.add(l),f}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609,"../isosurface/convert":864}],1100:[function(u,q,W){var o=u("../../lib"),p=u("./attributes"),x=u("../isosurface/defaults").supplyIsoDefaults,y=u("../surface/defaults").opacityscaleDefaults;q.exports=function(e,r,t,i){function n(h,s){return o.coerce(e,r,p,h,s)}x(e,r,t,i,n),y(e,r,i,n)}},{"../../lib":503,"../isosurface/defaults":865,"../surface/defaults":1060,"./attributes":1098}],1101:[function(u,q,W){q.exports={attributes:u("./attributes"),supplyDefaults:u("./defaults"),calc:u("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:u("./convert"),moduleType:"trace",name:"volume",basePlotModule:u("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"../isosurface/calc":863,"./attributes":1098,"./convert":1099,"./defaults":1100}],1102:[function(u,q,W){var o=u("../bar/attributes"),p=u("../scatter/attributes").line,x=u("../../plots/attributes"),y=u("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=u("../../plots/template_attributes").hovertemplateAttrs,r=u("../../plots/template_attributes").texttemplateAttrs,t=u("./constants"),i=u("../../lib/extend").extendFlat,n=u("../../components/color");function h(s){return{marker:{color:i({},o.marker.color,{arrayOk:!1,editType:"style"}),line:{color:i({},o.marker.line.color,{arrayOk:!1,editType:"style"}),width:i({},o.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}q.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:o.x,x0:o.x0,dx:o.dx,y:o.y,y0:o.y0,dy:o.dy,xperiod:o.xperiod,yperiod:o.yperiod,xperiod0:o.xperiod0,yperiod0:o.yperiod0,xperiodalignment:o.xperiodalignment,yperiodalignment:o.yperiodalignment,xhoverformat:y("x"),yhoverformat:y("y"),hovertext:o.hovertext,hovertemplate:e({},{keys:t.eventDataKeys}),hoverinfo:i({},x.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:r({editType:"plot"},{keys:t.eventDataKeys.concat(["label"])}),text:o.text,textposition:o.textposition,insidetextanchor:o.insidetextanchor,textangle:o.textangle,textfont:o.textfont,insidetextfont:o.insidetextfont,outsidetextfont:o.outsidetextfont,constraintext:o.constraintext,cliponaxis:o.cliponaxis,orientation:o.orientation,offset:o.offset,width:o.width,increasing:h(),decreasing:h(),totals:h(),connector:{line:{color:i({},p.color,{dflt:n.defaultLine}),width:i({},p.width,{editType:"plot"}),dash:p.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:o.offsetgroup,alignmentgroup:o.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926,"./constants":1104}],1103:[function(u,q,W){var o=u("../../plots/cartesian/axes"),p=u("../../plots/cartesian/align_period"),x=u("../../lib").mergeArray,y=u("../scatter/calc_selection"),e=u("../../constants/numerical").BADNUM;function r(i){return i==="a"||i==="absolute"}function t(i){return i==="t"||i==="total"}q.exports=function(i,n){var h,s,a,l,f,d,v=o.getFromId(i,n.xaxis||"x"),m=o.getFromId(i,n.yaxis||"y");n.orientation==="h"?(h=v.makeCalcdata(n,"x"),a=m.makeCalcdata(n,"y"),l=p(n,m,"y",a),f=!!n.yperiodalignment,d="y"):(h=m.makeCalcdata(n,"y"),a=v.makeCalcdata(n,"x"),l=p(n,v,"x",a),f=!!n.xperiodalignment,d="x"),s=l.vals;for(var c,b=Math.min(s.length,h.length),g=new Array(b),w=0,_=!1,T=0;T<b;T++){var k=h[T]||0,L=!1;(h[T]!==e||t(n.measure[T])||r(n.measure[T]))&&T+1<b&&(h[T+1]!==e||t(n.measure[T+1])||r(n.measure[T+1]))&&(L=!0);var M=g[T]={i:T,p:s[T],s:k,rawS:k,cNext:L};r(n.measure[T])?(w=M.s,M.isSum=!0,M.dir="totals",M.s=w):t(n.measure[T])?(M.isSum=!0,M.dir="totals",M.s=w):(M.isSum=!1,M.dir=M.rawS<0?"decreasing":"increasing",c=M.s,M.s=w+c,w+=c),M.dir==="totals"&&(_=!0),f&&(g[T].orig_p=a[T],g[T][d+"End"]=l.ends[T],g[T][d+"Start"]=l.starts[T]),n.ids&&(M.id=String(n.ids[T])),M.v=(n.base||0)+w}return g.length&&(g[0].hasTotals=_),x(n.text,g,"tx"),x(n.hovertext,g,"htx"),y(g,n),g}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928}],1104:[function(u,q,W){q.exports={eventDataKeys:["initial","delta","final"]}},{}],1105:[function(u,q,W){var o=u("../bar/cross_trace_calc").setGroupPositions;q.exports=function(p,x){var y,e,r=p._fullLayout,t=p._fullData,i=p.calcdata,n=x.xaxis,h=x.yaxis,s=[],a=[],l=[];for(e=0;e<t.length;e++){var f=t[e];f.visible===!0&&f.xaxis===n._id&&f.yaxis===h._id&&f.type==="waterfall"&&(y=i[e],f.orientation==="h"?l.push(y):a.push(y),s.push(y))}var d={mode:r.waterfallmode,norm:r.waterfallnorm,gap:r.waterfallgap,groupgap:r.waterfallgroupgap};for(o(p,n,h,a,d),o(p,h,n,l,d),e=0;e<s.length;e++){y=s[e];for(var v=0;v<y.length;v++){var m=y[v];m.isSum===!1&&(m.s0+=v===0?0:y[v-1].s),v+1<y.length&&(y[v].nextP0=y[v+1].p0,y[v].nextS0=y[v+1].s0)}}}},{"../bar/cross_trace_calc":651}],1106:[function(u,q,W){var o=u("../../lib"),p=u("../bar/defaults").handleGroupingDefaults,x=u("../bar/defaults").handleText,y=u("../scatter/xy_defaults"),e=u("../scatter/period_defaults"),r=u("./attributes"),t=u("../../components/color"),i=u("../../constants/delta.js"),n=i.INCREASING.COLOR,h=i.DECREASING.COLOR;function s(a,l,f){a(l+".marker.color",f),a(l+".marker.line.color",t.defaultLine),a(l+".marker.line.width")}q.exports={supplyDefaults:function(a,l,f,d){function v(c,b){return o.coerce(a,l,r,c,b)}if(y(a,l,d,v)){e(a,l,d,v),v("xhoverformat"),v("yhoverformat"),v("measure"),v("orientation",l.x&&!l.y?"h":"v"),v("base"),v("offset"),v("width"),v("text"),v("hovertext"),v("hovertemplate");var m=v("textposition");x(a,l,d,v,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),l.textposition!=="none"&&(v("texttemplate"),l.texttemplate||v("textinfo")),s(v,"increasing",n),s(v,"decreasing",h),s(v,"totals","#4499FF"),v("connector.visible")&&(v("connector.mode"),v("connector.line.width")&&(v("connector.line.color"),v("connector.line.dash")))}else l.visible=!1},crossTraceDefaults:function(a,l){var f,d;function v(c){return o.coerce(d._input,d,r,c)}if(l.waterfallmode==="group")for(var m=0;m<a.length;m++)f=(d=a[m])._input,p(f,d,l,v)}}},{"../../components/color":366,"../../constants/delta.js":473,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":1102}],1107:[function(u,q,W){q.exports=function(o,p){return o.x="xVal"in p?p.xVal:p.x,o.y="yVal"in p?p.yVal:p.y,"initial"in p&&(o.initial=p.initial),"delta"in p&&(o.delta=p.delta),"final"in p&&(o.final=p.final),p.xa&&(o.xaxis=p.xa),p.ya&&(o.yaxis=p.ya),o}},{}],1108:[function(u,q,W){var o=u("../../plots/cartesian/axes").hoverLabelText,p=u("../../components/color").opacity,x=u("../bar/hover").hoverOnBars,y=u("../../constants/delta.js"),e=y.INCREASING.SYMBOL,r=y.DECREASING.SYMBOL;q.exports=function(t,i,n,h,s){var a=x(t,i,n,h,s);if(a){var l=a.cd,f=l[0].trace,d=f.orientation==="h",v=d?"x":"y",m=d?t.xa:t.ya,c=l[a.index],b=c.isSum?c.b+c.s:c.rawS;if(!c.isSum){a.initial=c.b+c.s-b,a.delta=b,a.final=a.initial+a.delta;var g=M(Math.abs(a.delta));a.deltaLabel=b<0?"("+g+")":g,a.finalLabel=M(a.final),a.initialLabel=M(a.initial)}var w=c.hi||f.hoverinfo,_=[];if(w&&w!=="none"&&w!=="skip"){var T=w==="all",k=w.split("+"),L=function(I){return T||k.indexOf(I)!==-1};c.isSum||(!L("final")||L(d?"x":"y")||_.push(a.finalLabel),L("delta")&&(b<0?_.push(a.deltaLabel+" "+r):_.push(a.deltaLabel+" "+e)),L("initial")&&_.push("Initial: "+a.initialLabel))}return _.length&&(a.extraText=_.join("<br>")),a.color=function(I,P){var S=I[P.dir].marker,E=S.color,D=S.line.color,F=S.line.width;if(p(E))return E;if(p(D)&&F)return D}(f,c),[a]}function M(I){return o(m,I,f[v+"hoverformat"])}}},{"../../components/color":366,"../../constants/delta.js":473,"../../plots/cartesian/axes":554,"../bar/hover":655}],1109:[function(u,q,W){q.exports={attributes:u("./attributes"),layoutAttributes:u("./layout_attributes"),supplyDefaults:u("./defaults").supplyDefaults,crossTraceDefaults:u("./defaults").crossTraceDefaults,supplyLayoutDefaults:u("./layout_defaults"),calc:u("./calc"),crossTraceCalc:u("./cross_trace_calc"),plot:u("./plot"),style:u("./style").style,hoverPoints:u("./hover"),eventData:u("./event_data"),selectPoints:u("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:u("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":1102,"./calc":1103,"./cross_trace_calc":1105,"./defaults":1106,"./event_data":1107,"./hover":1108,"./layout_attributes":1110,"./layout_defaults":1111,"./plot":1112,"./style":1113}],1110:[function(u,q,W){q.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1111:[function(u,q,W){var o=u("../../lib"),p=u("./layout_attributes");q.exports=function(x,y,e){var r=!1;function t(h,s){return o.coerce(x,y,p,h,s)}for(var i=0;i<e.length;i++){var n=e[i];if(n.visible&&n.type==="waterfall"){r=!0;break}}r&&(t("waterfallmode"),t("waterfallgap",.2),t("waterfallgroupgap"))}},{"../../lib":503,"./layout_attributes":1110}],1112:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../lib"),x=u("../../components/drawing"),y=u("../../constants/numerical").BADNUM,e=u("../bar/plot"),r=u("../bar/uniform_text").clearMinTextSize;q.exports=function(t,i,n,h){var s=t._fullLayout;r("waterfall",s),e.plot(t,i,n,h,{mode:s.waterfallmode,norm:s.waterfallmode,gap:s.waterfallgap,groupgap:s.waterfallgroupgap}),function(a,l,f,d){var v=l.xaxis,m=l.yaxis;p.makeTraceGroups(d,f,"trace bars").each(function(c){var b=o.select(this),g=c[0].trace,w=p.ensureSingle(b,"g","lines");if(g.connector&&g.connector.visible){var _=g.orientation==="h",T=g.connector.mode,k=w.selectAll("g.line").data(p.identity);k.enter().append("g").classed("line",!0),k.exit().remove();var L=k.size();k.each(function(M,I){if(I===L-1||M.cNext){var P=function(F,H,V,Q){var K=[],Z=[],$=Q?H:V,re=Q?V:H;return K[0]=$.c2p(F.s0,!0),Z[0]=re.c2p(F.p0,!0),K[1]=$.c2p(F.s1,!0),Z[1]=re.c2p(F.p1,!0),K[2]=$.c2p(F.nextS0,!0),Z[2]=re.c2p(F.nextP0,!0),Q?[K,Z]:[Z,K]}(M,v,m,_),S=P[0],E=P[1],D="";S[0]!==y&&E[0]!==y&&S[1]!==y&&E[1]!==y&&(T==="spanning"&&!M.isSum&&I>0&&(D+=_?"M"+S[0]+","+E[1]+"V"+E[0]:"M"+S[1]+","+E[0]+"H"+S[0]),T!=="between"&&(M.isSum||I<L-1)&&(D+=_?"M"+S[1]+","+E[0]+"V"+E[1]:"M"+S[0]+","+E[1]+"H"+S[1]),S[2]!==y&&E[2]!==y&&(D+=_?"M"+S[1]+","+E[1]+"V"+E[2]:"M"+S[1]+","+E[1]+"H"+S[2])),D===""&&(D="M0,0Z"),p.ensureSingle(o.select(this),"path").attr("d",D).call(x.setClipUrl,l.layerClipId,a)}})}else w.remove()})}(t,i,n,h)}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],1113:[function(u,q,W){var o=u("@plotly/d3"),p=u("../../components/drawing"),x=u("../../components/color"),y=u("../../constants/interactions").DESELECTDIM,e=u("../bar/style"),r=u("../bar/uniform_text").resizeText,t=e.styleTextPoints;q.exports={style:function(i,n,h){var s=h||o.select(i).selectAll("g.waterfalllayer").selectAll("g.trace");r(i,s,"waterfall"),s.style("opacity",function(a){return a[0].trace.opacity}),s.each(function(a){var l=o.select(this),f=a[0].trace;l.selectAll(".point > path").each(function(d){if(!d.isBlank){var v=f[d.dir].marker;o.select(this).call(x.fill,v.color).call(x.stroke,v.line.color).call(p.dashLine,v.line.dash,v.line.width).style("opacity",f.selectedpoints&&!d.selected?y:1)}}),t(l,f,i),l.selectAll(".lines").each(function(){var d=f.connector.line;p.lineGroupStyle(o.select(this).selectAll("path"),d.width,d.color,d.dash)})})}}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],1114:[function(u,q,W){var o=u("../plots/cartesian/axes"),p=u("../lib"),x=u("../plot_api/plot_schema"),y=u("./helpers").pointsAccessorFunction,e=u("../constants/numerical").BADNUM;W.moduleType="transform",W.name="aggregate";var r=W.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},t=r.aggregations;function i(a,l,f,d){if(d.enabled){for(var v=d.target,m=p.nestedProperty(l,v),c=m.get(),b=function(_,T){var k=_.func,L=T.d2c,M=T.c2d;switch(k){case"count":return n;case"first":return h;case"last":return s;case"sum":return function(I,P){for(var S=0,E=0;E<P.length;E++){var D=L(I[P[E]]);D!==e&&(S+=D)}return M(S)};case"avg":return function(I,P){for(var S=0,E=0,D=0;D<P.length;D++){var F=L(I[P[D]]);F!==e&&(S+=F,E++)}return E?M(S/E):e};case"min":return function(I,P){for(var S=1/0,E=0;E<P.length;E++){var D=L(I[P[E]]);D!==e&&(S=Math.min(S,D))}return S===1/0?e:M(S)};case"max":return function(I,P){for(var S=-1/0,E=0;E<P.length;E++){var D=L(I[P[E]]);D!==e&&(S=Math.max(S,D))}return S===-1/0?e:M(S)};case"range":return function(I,P){for(var S=1/0,E=-1/0,D=0;D<P.length;D++){var F=L(I[P[D]]);F!==e&&(S=Math.min(S,F),E=Math.max(E,F))}return E===-1/0||S===1/0?e:M(E-S)};case"change":return function(I,P){var S=L(I[P[0]]),E=L(I[P[P.length-1]]);return S===e||E===e?e:M(E-S)};case"median":return function(I,P){for(var S=[],E=0;E<P.length;E++){var D=L(I[P[E]]);D!==e&&S.push(D)}if(!S.length)return e;S.sort(p.sorterAsc);var F=(S.length-1)/2;return M((S[Math.floor(F)]+S[Math.ceil(F)])/2)};case"mode":return function(I,P){for(var S={},E=0,D=e,F=0;F<P.length;F++){var H=L(I[P[F]]);if(H!==e){var V=S[H]=(S[H]||0)+1;V>E&&(E=V,D=H)}}return E?M(D):e};case"rms":return function(I,P){for(var S=0,E=0,D=0;D<P.length;D++){var F=L(I[P[D]]);F!==e&&(S+=F*F,E++)}return E?M(Math.sqrt(S/E)):e};case"stddev":return function(I,P){var S,E=0,D=0,F=1,H=e;for(S=0;S<P.length&&H===e;S++)H=L(I[P[S]]);if(H===e)return e;for(;S<P.length;S++){var V=L(I[P[S]]);if(V!==e){var Q=V-H;E+=Q,D+=Q*Q,F++}}var K=_.funcmode==="sample"?F-1:F;return K?Math.sqrt((D-E*E/F)/K):0}}}(d,o.getDataConversions(a,l,v,c)),g=new Array(f.length),w=0;w<f.length;w++)g[w]=b(c,f[w]);m.set(g),d.func==="count"&&p.pushUnique(l._arrayAttrs,v)}}function n(a,l){return l.length}function h(a,l){return a[l[0]]}function s(a,l){return a[l[l.length-1]]}W.supplyDefaults=function(a,l){var f,d={};function v(M,I){return p.coerce(a,d,r,M,I)}if(!v("enabled"))return d;var m=x.findArrayAttributes(l),c={};for(f=0;f<m.length;f++)c[m[f]]=1;var b=v("groups");if(!Array.isArray(b)){if(!c[b])return d.enabled=!1,d;c[b]=0}var g,w=a.aggregations||[],_=d.aggregations=new Array(w.length);function T(M,I){return p.coerce(w[f],g,t,M,I)}for(f=0;f<w.length;f++){g={_index:f};var k=T("target"),L=T("func");T("enabled")&&k&&(c[k]||L==="count"&&c[k]===void 0)?(L==="stddev"&&T("funcmode"),c[k]=0,_[f]=g):_[f]={enabled:!1,_index:f}}for(f=0;f<m.length;f++)c[m[f]]&&_.push({target:m[f],func:t.func.dflt,enabled:!0,_index:-1});return d},W.calcTransform=function(a,l,f){if(f.enabled){var d=f.groups,v=p.getTargetArray(l,{target:d});if(v){var m,c,b,g,w={},_={},T=[],k=y(l.transforms,f),L=v.length;for(l._length&&(L=Math.min(L,l._length)),m=0;m<L;m++)(b=w[c=v[m]])===void 0?(w[c]=T.length,g=[m],T.push(g),_[w[c]]=k(m)):(T[b].push(m),_[w[c]]=(_[w[c]]||[]).concat(k(m)));f._indexToPoints=_;var M=f.aggregations;for(m=0;m<M.length;m++)i(a,l,T,M[m]);typeof d=="string"&&i(a,l,T,{target:d,func:"first",enabled:!0}),l._length=T.length}}}},{"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plots/cartesian/axes":554,"./helpers":1117}],1115:[function(u,q,W){var o=u("../lib"),p=u("../registry"),x=u("../plots/cartesian/axes"),y=u("./helpers").pointsAccessorFunction,e=u("../constants/filter_ops"),r=e.COMPARISON_OPS,t=e.INTERVAL_OPS,i=e.SET_OPS;W.moduleType="transform",W.name="filter",W.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(r).concat(t).concat(i),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},W.supplyDefaults=function(n){var h={};function s(f,d){return o.coerce(n,h,W.attributes,f,d)}if(s("enabled")){var a=s("target");if(o.isArrayOrTypedArray(a)&&a.length===0)return h.enabled=!1,h;s("preservegaps"),s("operation"),s("value");var l=p.getComponentMethod("calendars","handleDefaults");l(n,h,"valuecalendar",null),l(n,h,"targetcalendar",null)}return h},W.calcTransform=function(n,h,s){if(s.enabled){var a=o.getTargetArray(h,s);if(a){var l=s.target,f=a.length;h._length&&(f=Math.min(f,h._length));var d=s.targetcalendar,v=h._arrayAttrs,m=s.preservegaps;if(typeof l=="string"){var c=o.nestedProperty(h,l+"calendar").get();c&&(d=c)}var b,g,w=function(P,S,E){var D=P.operation,F=P.value,H=Array.isArray(F);function V($){return $.indexOf(D)!==-1}var Q,K=function($){return S($,0,P.valuecalendar)},Z=function($){return S($,0,E)};switch(V(r)?Q=K(H?F[0]:F):V(t)?Q=H?[K(F[0]),K(F[1])]:[K(F),K(F)]:V(i)&&(Q=H?F.map(K):[K(F)]),D){case"=":return function($){return Z($)===Q};case"!=":return function($){return Z($)!==Q};case"<":return function($){return Z($)<Q};case"<=":return function($){return Z($)<=Q};case">":return function($){return Z($)>Q};case">=":return function($){return Z($)>=Q};case"[]":return function($){var re=Z($);return re>=Q[0]&&re<=Q[1]};case"()":return function($){var re=Z($);return re>Q[0]&&re<Q[1]};case"[)":return function($){var re=Z($);return re>=Q[0]&&re<Q[1]};case"(]":return function($){var re=Z($);return re>Q[0]&&re<=Q[1]};case"][":return function($){var re=Z($);return re<=Q[0]||re>=Q[1]};case")(":return function($){var re=Z($);return re<Q[0]||re>Q[1]};case"](":return function($){var re=Z($);return re<=Q[0]||re>Q[1]};case")[":return function($){var re=Z($);return re<Q[0]||re>=Q[1]};case"{}":return function($){return Q.indexOf(Z($))!==-1};case"}{":return function($){return Q.indexOf(Z($))===-1}}}(s,x.getDataToCoordFunc(n,h,l,a),d),_={},T={},k=0;m?(b=function(P){_[P.astr]=o.extendDeep([],P.get()),P.set(new Array(f))},g=function(P,S){var E=_[P.astr][S];P.get()[S]=E}):(b=function(P){_[P.astr]=o.extendDeep([],P.get()),P.set([])},g=function(P,S){var E=_[P.astr][S];P.get().push(E)}),I(b);for(var L=y(h.transforms,s),M=0;M<f;M++)w(a[M])?(I(g,M),T[k++]=L(M)):m&&k++;s._indexToPoints=T,h._length=k}}function I(P,S){for(var E=0;E<v.length;E++)P(o.nestedProperty(h,v[E]),S)}}},{"../constants/filter_ops":475,"../lib":503,"../plots/cartesian/axes":554,"../registry":638,"./helpers":1117}],1116:[function(u,q,W){var o=u("../lib"),p=u("../plot_api/plot_schema"),x=u("../plots/plots"),y=u("./helpers").pointsAccessorFunction;function e(r,t){var i,n,h,s,a,l,f,d,v,m,c=t.transform,b=t.transformIndex,g=r.transforms[b].groups,w=y(r.transforms,c);if(!o.isArrayOrTypedArray(g)||g.length===0)return[r];var _=o.filterUnique(g),T=new Array(_.length),k=g.length,L=p.findArrayAttributes(r),M=c.styles||[],I={};for(i=0;i<M.length;i++)I[M[i].target]=M[i].value;c.styles&&(m=o.keyedContainer(c,"styles","target","value.name"));var P={},S={};for(i=0;i<_.length;i++){P[l=_[i]]=i,S[l]=0,(f=T[i]=o.extendDeepNoArrays({},r))._group=l,f.transforms[b]._indexToPoints={};var E=null;for(m&&(E=m.get(l)),f.name=E||E===""?E:o.templateString(c.nameformat,{trace:r.name,group:l}),d=f.transforms,f.transforms=[],n=0;n<d.length;n++)f.transforms[n]=o.extendDeepNoArrays({},d[n]);for(n=0;n<L.length;n++)o.nestedProperty(f,L[n]).set([])}for(h=0;h<L.length;h++){for(s=L[h],n=0,v=[];n<_.length;n++)v[n]=o.nestedProperty(T[n],s).get();for(a=o.nestedProperty(r,s).get(),n=0;n<k;n++)v[P[g[n]]].push(a[n])}for(n=0;n<k;n++)(f=T[P[g[n]]]).transforms[b]._indexToPoints[S[g[n]]]=w(n),S[g[n]]++;for(i=0;i<_.length;i++)l=_[i],f=T[i],x.clearExpandedTraceDefaultColors(f),f=o.extendDeepNoArrays(f,I[l]||{});return T}W.moduleType="transform",W.name="groupby",W.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},W.supplyDefaults=function(r,t,i){var n,h={};function s(v,m){return o.coerce(r,h,W.attributes,v,m)}if(!s("enabled"))return h;s("groups"),s("nameformat",i._dataLength>1?"%{group} (%{trace})":"%{group}");var a=r.styles,l=h.styles=[];if(a)for(n=0;n<a.length;n++){var f=l[n]={};o.coerce(a[n],l[n],W.attributes.styles,"target");var d=o.coerce(a[n],l[n],W.attributes.styles,"value");o.isPlainObject(d)?f.value=o.extendDeep({},d):d&&delete f.value}return h},W.transform=function(r,t){var i,n,h,s=[];for(n=0;n<r.length;n++)for(i=e(r[n],t),h=0;h<i.length;h++)s.push(i[h]);return s}},{"../lib":503,"../plot_api/plot_schema":542,"../plots/plots":619,"./helpers":1117}],1117:[function(u,q,W){W.pointsAccessorFunction=function(o,p){for(var x,y,e=0;e<o.length&&(x=o[e])!==p;e++)x._indexToPoints&&x.enabled!==!1&&(y=x._indexToPoints);return y?function(r){return y[r]}:function(r){return[r]}}},{}],1118:[function(u,q,W){var o=u("../lib"),p=u("../plots/cartesian/axes"),x=u("./helpers").pointsAccessorFunction,y=u("../constants/numerical").BADNUM;W.moduleType="transform",W.name="sort",W.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},W.supplyDefaults=function(e){var r={};function t(i,n){return o.coerce(e,r,W.attributes,i,n)}return t("enabled")&&(t("target"),t("order")),r},W.calcTransform=function(e,r,t){if(t.enabled){var i=o.getTargetArray(r,t);if(i){var n=t.target,h=i.length;r._length&&(h=Math.min(h,r._length));var s,a,l=r._arrayAttrs,f=function(g,w,_,T){var k,L=new Array(T),M=new Array(T);for(k=0;k<T;k++)L[k]={v:w[k],i:k};for(L.sort(function(I,P){switch(I.order){case"ascending":return function(S,E){var D=P(S.v),F=P(E.v);return D===y?1:F===y?-1:D-F};case"descending":return function(S,E){var D=P(S.v),F=P(E.v);return D===y?1:F===y?-1:F-D}}}(g,_)),k=0;k<T;k++)M[k]=L[k].i;return M}(t,i,p.getDataToCoordFunc(e,r,n,i),h),d=x(r.transforms,t),v={};for(s=0;s<l.length;s++){var m=o.nestedProperty(r,l[s]),c=m.get(),b=new Array(h);for(a=0;a<h;a++)b[a]=c[f[a]];m.set(b)}for(a=0;a<h;a++)v[a]=d(f[a]);t._indexToPoints=v,r._length=h}}}},{"../constants/numerical":479,"../lib":503,"../plots/cartesian/axes":554,"./helpers":1117}],1119:[function(u,q,W){W.version="2.8.1"},{}],1120:[function(u,q,W){(function(o){(function(){(function(p){typeof W=="object"&&q!==void 0?q.exports=p():(typeof window!="undefined"?window:o!==void 0?o:typeof self!="undefined"?self:this).stackgl=p()})(function(){return function p(x,y,e){function r(n,h){if(!y[n]){if(!x[n]){var s=typeof u=="function"&&u;if(!h&&s)return s(n,!0);if(t)return t(n,!0);var a=new Error("Cannot find module '"+n+"'");throw a.code="MODULE_NOT_FOUND",a}var l=y[n]={exports:{}};x[n][0].call(l.exports,function(f){return r(x[n][1][f]||f)},l,l.exports,p,x,y,e)}return y[n].exports}for(var t=typeof u=="function"&&u,i=0;i<e.length;i++)r(e[i]);return r}({1:[function(p,x,y){y.byteLength=function(l){var f=s(l),d=f[0],v=f[1];return 3*(d+v)/4-v},y.toByteArray=function(l){var f,d,v=s(l),m=v[0],c=v[1],b=new t(function(_,T,k){return 3*(T+k)/4-k}(0,m,c)),g=0,w=c>0?m-4:m;for(d=0;d<w;d+=4)f=r[l.charCodeAt(d)]<<18|r[l.charCodeAt(d+1)]<<12|r[l.charCodeAt(d+2)]<<6|r[l.charCodeAt(d+3)],b[g++]=f>>16&255,b[g++]=f>>8&255,b[g++]=255&f;return c===2&&(f=r[l.charCodeAt(d)]<<2|r[l.charCodeAt(d+1)]>>4,b[g++]=255&f),c===1&&(f=r[l.charCodeAt(d)]<<10|r[l.charCodeAt(d+1)]<<4|r[l.charCodeAt(d+2)]>>2,b[g++]=f>>8&255,b[g++]=255&f),b},y.fromByteArray=function(l){for(var f,d=l.length,v=d%3,m=[],c=0,b=d-v;c<b;c+=16383)m.push(a(l,c,c+16383>b?b:c+16383));return v===1?(f=l[d-1],m.push(e[f>>2]+e[f<<4&63]+"==")):v===2&&(f=(l[d-2]<<8)+l[d-1],m.push(e[f>>10]+e[f>>4&63]+e[f<<2&63]+"=")),m.join("")};for(var e=[],r=[],t=typeof Uint8Array!="undefined"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,h=i.length;n<h;++n)e[n]=i[n],r[i.charCodeAt(n)]=n;function s(l){var f=l.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var d=l.indexOf("=");return d===-1&&(d=f),[d,d===f?0:4-d%4]}function a(l,f,d){for(var v,m,c=[],b=f;b<d;b+=3)v=(l[b]<<16&16711680)+(l[b+1]<<8&65280)+(255&l[b+2]),c.push(e[(m=v)>>18&63]+e[m>>12&63]+e[m>>6&63]+e[63&m]);return c.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},{}],2:[function(p,x,y){},{}],3:[function(p,x,y){(function(e){(function(){var r=p("base64-js"),t=p("ieee754");y.Buffer=n,y.SlowBuffer=function(j){return+j!=j&&(j=0),n.alloc(+j)},y.INSPECT_MAX_BYTES=50;function i(j){if(j>2147483647)throw new RangeError('The value "'+j+'" is invalid for option "size"');var Y=new Uint8Array(j);return Y.__proto__=n.prototype,Y}function n(j,Y,J){if(typeof j=="number"){if(typeof Y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return a(j)}return h(j,Y,J)}function h(j,Y,J){if(typeof j=="string")return function(se,oe){if(typeof oe=="string"&&oe!==""||(oe="utf8"),!n.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);var he=0|d(se,oe),le=i(he),de=le.write(se,oe);return de!==he&&(le=le.slice(0,de)),le}(j,Y);if(ArrayBuffer.isView(j))return l(j);if(j==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(U(j,ArrayBuffer)||j&&U(j.buffer,ArrayBuffer))return function(se,oe,he){if(oe<0||se.byteLength<oe)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<oe+(he||0))throw new RangeError('"length" is outside of buffer bounds');var le;return le=oe===void 0&&he===void 0?new Uint8Array(se):he===void 0?new Uint8Array(se,oe):new Uint8Array(se,oe,he),le.__proto__=n.prototype,le}(j,Y,J);if(typeof j=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ee=j.valueOf&&j.valueOf();if(ee!=null&&ee!==j)return n.from(ee,Y,J);var ne=function(se){if(n.isBuffer(se)){var oe=0|f(se.length),he=i(oe);return he.length===0||se.copy(he,0,0,oe),he}if(se.length!==void 0)return typeof se.length!="number"||te(se.length)?i(0):l(se);if(se.type==="Buffer"&&Array.isArray(se.data))return l(se.data)}(j);if(ne)return ne;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof j[Symbol.toPrimitive]=="function")return n.from(j[Symbol.toPrimitive]("string"),Y,J);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}function s(j){if(typeof j!="number")throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function a(j){return s(j),i(j<0?0:0|f(j))}function l(j){for(var Y=j.length<0?0:0|f(j.length),J=i(Y),ee=0;ee<Y;ee+=1)J[ee]=255&j[ee];return J}function f(j){if(j>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes");return 0|j}function d(j,Y){if(n.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||U(j,ArrayBuffer))return j.byteLength;if(typeof j!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);var J=j.length,ee=arguments.length>2&&arguments[2]===!0;if(!ee&&J===0)return 0;for(var ne=!1;;)switch(Y){case"ascii":case"latin1":case"binary":return J;case"utf8":case"utf-8":return re(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*J;case"hex":return J>>>1;case"base64":return R(j).length;default:if(ne)return ee?-1:re(j).length;Y=(""+Y).toLowerCase(),ne=!0}}function v(j,Y,J){var ee=!1;if((Y===void 0||Y<0)&&(Y=0),Y>this.length||((J===void 0||J>this.length)&&(J=this.length),J<=0)||(J>>>=0)<=(Y>>>=0))return"";for(j||(j="utf8");;)switch(j){case"hex":return E(this,Y,J);case"utf8":case"utf-8":return I(this,Y,J);case"ascii":return P(this,Y,J);case"latin1":case"binary":return S(this,Y,J);case"base64":return M(this,Y,J);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,Y,J);default:if(ee)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),ee=!0}}function m(j,Y,J){var ee=j[Y];j[Y]=j[J],j[J]=ee}function c(j,Y,J,ee,ne){if(j.length===0)return-1;if(typeof J=="string"?(ee=J,J=0):J>2147483647?J=2147483647:J<-2147483648&&(J=-2147483648),te(J=+J)&&(J=ne?0:j.length-1),J<0&&(J=j.length+J),J>=j.length){if(ne)return-1;J=j.length-1}else if(J<0){if(!ne)return-1;J=0}if(typeof Y=="string"&&(Y=n.from(Y,ee)),n.isBuffer(Y))return Y.length===0?-1:b(j,Y,J,ee,ne);if(typeof Y=="number")return Y&=255,typeof Uint8Array.prototype.indexOf=="function"?ne?Uint8Array.prototype.indexOf.call(j,Y,J):Uint8Array.prototype.lastIndexOf.call(j,Y,J):b(j,[Y],J,ee,ne);throw new TypeError("val must be string, number or Buffer")}function b(j,Y,J,ee,ne){var se,oe=1,he=j.length,le=Y.length;if(ee!==void 0&&((ee=String(ee).toLowerCase())==="ucs2"||ee==="ucs-2"||ee==="utf16le"||ee==="utf-16le")){if(j.length<2||Y.length<2)return-1;oe=2,he/=2,le/=2,J/=2}function de(Ae,fe){return oe===1?Ae[fe]:Ae.readUInt16BE(fe*oe)}if(ne){var xe=-1;for(se=J;se<he;se++)if(de(j,se)===de(Y,xe===-1?0:se-xe)){if(xe===-1&&(xe=se),se-xe+1===le)return xe*oe}else xe!==-1&&(se-=se-xe),xe=-1}else for(J+le>he&&(J=he-le),se=J;se>=0;se--){for(var we=!0,be=0;be<le;be++)if(de(j,se+be)!==de(Y,be)){we=!1;break}if(we)return se}return-1}function g(j,Y,J,ee){J=Number(J)||0;var ne=j.length-J;ee?(ee=Number(ee))>ne&&(ee=ne):ee=ne;var se=Y.length;ee>se/2&&(ee=se/2);for(var oe=0;oe<ee;++oe){var he=parseInt(Y.substr(2*oe,2),16);if(te(he))return oe;j[J+oe]=he}return oe}function w(j,Y,J,ee){return N(re(Y,j.length-J),j,J,ee)}function _(j,Y,J,ee){return N(function(ne){for(var se=[],oe=0;oe<ne.length;++oe)se.push(255&ne.charCodeAt(oe));return se}(Y),j,J,ee)}function T(j,Y,J,ee){return _(j,Y,J,ee)}function k(j,Y,J,ee){return N(R(Y),j,J,ee)}function L(j,Y,J,ee){return N(function(ne,se){for(var oe,he,le,de=[],xe=0;xe<ne.length&&!((se-=2)<0);++xe)oe=ne.charCodeAt(xe),he=oe>>8,le=oe%256,de.push(le),de.push(he);return de}(Y,j.length-J),j,J,ee)}function M(j,Y,J){return Y===0&&J===j.length?r.fromByteArray(j):r.fromByteArray(j.slice(Y,J))}function I(j,Y,J){J=Math.min(j.length,J);for(var ee=[],ne=Y;ne<J;){var se,oe,he,le,de=j[ne],xe=null,we=de>239?4:de>223?3:de>191?2:1;if(ne+we<=J)switch(we){case 1:de<128&&(xe=de);break;case 2:(192&(se=j[ne+1]))==128&&(le=(31&de)<<6|63&se)>127&&(xe=le);break;case 3:se=j[ne+1],oe=j[ne+2],(192&se)==128&&(192&oe)==128&&(le=(15&de)<<12|(63&se)<<6|63&oe)>2047&&(le<55296||le>57343)&&(xe=le);break;case 4:se=j[ne+1],oe=j[ne+2],he=j[ne+3],(192&se)==128&&(192&oe)==128&&(192&he)==128&&(le=(15&de)<<18|(63&se)<<12|(63&oe)<<6|63&he)>65535&&le<1114112&&(xe=le)}xe===null?(xe=65533,we=1):xe>65535&&(xe-=65536,ee.push(xe>>>10&1023|55296),xe=56320|1023&xe),ee.push(xe),ne+=we}return function(be){var Ae=be.length;if(Ae<=4096)return String.fromCharCode.apply(String,be);for(var fe="",me=0;me<Ae;)fe+=String.fromCharCode.apply(String,be.slice(me,me+=4096));return fe}(ee)}y.kMaxLength=2147483647,n.TYPED_ARRAY_SUPPORT=function(){try{var j=new Uint8Array(1);return j.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},j.foo()===42}catch{return!1}}(),n.TYPED_ARRAY_SUPPORT||typeof console=="undefined"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),typeof Symbol!="undefined"&&Symbol.species!=null&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),n.poolSize=8192,n.from=function(j,Y,J){return h(j,Y,J)},n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array,n.alloc=function(j,Y,J){return function(ee,ne,se){return s(ee),ee<=0?i(ee):ne!==void 0?typeof se=="string"?i(ee).fill(ne,se):i(ee).fill(ne):i(ee)}(j,Y,J)},n.allocUnsafe=function(j){return a(j)},n.allocUnsafeSlow=function(j){return a(j)},n.isBuffer=function(j){return j!=null&&j._isBuffer===!0&&j!==n.prototype},n.compare=function(j,Y){if(U(j,Uint8Array)&&(j=n.from(j,j.offset,j.byteLength)),U(Y,Uint8Array)&&(Y=n.from(Y,Y.offset,Y.byteLength)),!n.isBuffer(j)||!n.isBuffer(Y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===Y)return 0;for(var J=j.length,ee=Y.length,ne=0,se=Math.min(J,ee);ne<se;++ne)if(j[ne]!==Y[ne]){J=j[ne],ee=Y[ne];break}return J<ee?-1:ee<J?1:0},n.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(j,Y){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(j.length===0)return n.alloc(0);var J;if(Y===void 0)for(Y=0,J=0;J<j.length;++J)Y+=j[J].length;var ee=n.allocUnsafe(Y),ne=0;for(J=0;J<j.length;++J){var se=j[J];if(U(se,Uint8Array)&&(se=n.from(se)),!n.isBuffer(se))throw new TypeError('"list" argument must be an Array of Buffers');se.copy(ee,ne),ne+=se.length}return ee},n.byteLength=d,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var j=this.length;if(j%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Y=0;Y<j;Y+=2)m(this,Y,Y+1);return this},n.prototype.swap32=function(){var j=this.length;if(j%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Y=0;Y<j;Y+=4)m(this,Y,Y+3),m(this,Y+1,Y+2);return this},n.prototype.swap64=function(){var j=this.length;if(j%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Y=0;Y<j;Y+=8)m(this,Y,Y+7),m(this,Y+1,Y+6),m(this,Y+2,Y+5),m(this,Y+3,Y+4);return this},n.prototype.toString=function(){var j=this.length;return j===0?"":arguments.length===0?I(this,0,j):v.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(j){if(!n.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j||n.compare(this,j)===0},n.prototype.inspect=function(){var j="",Y=y.INSPECT_MAX_BYTES;return j=this.toString("hex",0,Y).replace(/(.{2})/g,"$1 ").trim(),this.length>Y&&(j+=" ... "),"<Buffer "+j+">"},n.prototype.compare=function(j,Y,J,ee,ne){if(U(j,Uint8Array)&&(j=n.from(j,j.offset,j.byteLength)),!n.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(Y===void 0&&(Y=0),J===void 0&&(J=j?j.length:0),ee===void 0&&(ee=0),ne===void 0&&(ne=this.length),Y<0||J>j.length||ee<0||ne>this.length)throw new RangeError("out of range index");if(ee>=ne&&Y>=J)return 0;if(ee>=ne)return-1;if(Y>=J)return 1;if(this===j)return 0;for(var se=(ne>>>=0)-(ee>>>=0),oe=(J>>>=0)-(Y>>>=0),he=Math.min(se,oe),le=this.slice(ee,ne),de=j.slice(Y,J),xe=0;xe<he;++xe)if(le[xe]!==de[xe]){se=le[xe],oe=de[xe];break}return se<oe?-1:oe<se?1:0},n.prototype.includes=function(j,Y,J){return this.indexOf(j,Y,J)!==-1},n.prototype.indexOf=function(j,Y,J){return c(this,j,Y,J,!0)},n.prototype.lastIndexOf=function(j,Y,J){return c(this,j,Y,J,!1)},n.prototype.write=function(j,Y,J,ee){if(Y===void 0)ee="utf8",J=this.length,Y=0;else if(J===void 0&&typeof Y=="string")ee=Y,J=this.length,Y=0;else{if(!isFinite(Y))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Y>>>=0,isFinite(J)?(J>>>=0,ee===void 0&&(ee="utf8")):(ee=J,J=void 0)}var ne=this.length-Y;if((J===void 0||J>ne)&&(J=ne),j.length>0&&(J<0||Y<0)||Y>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee||(ee="utf8");for(var se=!1;;)switch(ee){case"hex":return g(this,j,Y,J);case"utf8":case"utf-8":return w(this,j,Y,J);case"ascii":return _(this,j,Y,J);case"latin1":case"binary":return T(this,j,Y,J);case"base64":return k(this,j,Y,J);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,j,Y,J);default:if(se)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),se=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(j,Y,J){var ee="";J=Math.min(j.length,J);for(var ne=Y;ne<J;++ne)ee+=String.fromCharCode(127&j[ne]);return ee}function S(j,Y,J){var ee="";J=Math.min(j.length,J);for(var ne=Y;ne<J;++ne)ee+=String.fromCharCode(j[ne]);return ee}function E(j,Y,J){var ee=j.length;(!Y||Y<0)&&(Y=0),(!J||J<0||J>ee)&&(J=ee);for(var ne="",se=Y;se<J;++se)ne+=$(j[se]);return ne}function D(j,Y,J){for(var ee=j.slice(Y,J),ne="",se=0;se<ee.length;se+=2)ne+=String.fromCharCode(ee[se]+256*ee[se+1]);return ne}function F(j,Y,J){if(j%1!=0||j<0)throw new RangeError("offset is not uint");if(j+Y>J)throw new RangeError("Trying to access beyond buffer length")}function H(j,Y,J,ee,ne,se){if(!n.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(Y>ne||Y<se)throw new RangeError('"value" argument is out of bounds');if(J+ee>j.length)throw new RangeError("Index out of range")}function V(j,Y,J,ee,ne,se){if(J+ee>j.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("Index out of range")}function Q(j,Y,J,ee,ne){return Y=+Y,J>>>=0,ne||V(j,0,J,4),t.write(j,Y,J,ee,23,4),J+4}function K(j,Y,J,ee,ne){return Y=+Y,J>>>=0,ne||V(j,0,J,8),t.write(j,Y,J,ee,52,8),J+8}n.prototype.slice=function(j,Y){var J=this.length;(j=~~j)<0?(j+=J)<0&&(j=0):j>J&&(j=J),(Y=Y===void 0?J:~~Y)<0?(Y+=J)<0&&(Y=0):Y>J&&(Y=J),Y<j&&(Y=j);var ee=this.subarray(j,Y);return ee.__proto__=n.prototype,ee},n.prototype.readUIntLE=function(j,Y,J){j>>>=0,Y>>>=0,J||F(j,Y,this.length);for(var ee=this[j],ne=1,se=0;++se<Y&&(ne*=256);)ee+=this[j+se]*ne;return ee},n.prototype.readUIntBE=function(j,Y,J){j>>>=0,Y>>>=0,J||F(j,Y,this.length);for(var ee=this[j+--Y],ne=1;Y>0&&(ne*=256);)ee+=this[j+--Y]*ne;return ee},n.prototype.readUInt8=function(j,Y){return j>>>=0,Y||F(j,1,this.length),this[j]},n.prototype.readUInt16LE=function(j,Y){return j>>>=0,Y||F(j,2,this.length),this[j]|this[j+1]<<8},n.prototype.readUInt16BE=function(j,Y){return j>>>=0,Y||F(j,2,this.length),this[j]<<8|this[j+1]},n.prototype.readUInt32LE=function(j,Y){return j>>>=0,Y||F(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+16777216*this[j+3]},n.prototype.readUInt32BE=function(j,Y){return j>>>=0,Y||F(j,4,this.length),16777216*this[j]+(this[j+1]<<16|this[j+2]<<8|this[j+3])},n.prototype.readIntLE=function(j,Y,J){j>>>=0,Y>>>=0,J||F(j,Y,this.length);for(var ee=this[j],ne=1,se=0;++se<Y&&(ne*=256);)ee+=this[j+se]*ne;return ee>=(ne*=128)&&(ee-=Math.pow(2,8*Y)),ee},n.prototype.readIntBE=function(j,Y,J){j>>>=0,Y>>>=0,J||F(j,Y,this.length);for(var ee=Y,ne=1,se=this[j+--ee];ee>0&&(ne*=256);)se+=this[j+--ee]*ne;return se>=(ne*=128)&&(se-=Math.pow(2,8*Y)),se},n.prototype.readInt8=function(j,Y){return j>>>=0,Y||F(j,1,this.length),128&this[j]?-1*(255-this[j]+1):this[j]},n.prototype.readInt16LE=function(j,Y){j>>>=0,Y||F(j,2,this.length);var J=this[j]|this[j+1]<<8;return 32768&J?4294901760|J:J},n.prototype.readInt16BE=function(j,Y){j>>>=0,Y||F(j,2,this.length);var J=this[j+1]|this[j]<<8;return 32768&J?4294901760|J:J},n.prototype.readInt32LE=function(j,Y){return j>>>=0,Y||F(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},n.prototype.readInt32BE=function(j,Y){return j>>>=0,Y||F(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},n.prototype.readFloatLE=function(j,Y){return j>>>=0,Y||F(j,4,this.length),t.read(this,j,!0,23,4)},n.prototype.readFloatBE=function(j,Y){return j>>>=0,Y||F(j,4,this.length),t.read(this,j,!1,23,4)},n.prototype.readDoubleLE=function(j,Y){return j>>>=0,Y||F(j,8,this.length),t.read(this,j,!0,52,8)},n.prototype.readDoubleBE=function(j,Y){return j>>>=0,Y||F(j,8,this.length),t.read(this,j,!1,52,8)},n.prototype.writeUIntLE=function(j,Y,J,ee){j=+j,Y>>>=0,J>>>=0,ee||H(this,j,Y,J,Math.pow(2,8*J)-1,0);var ne=1,se=0;for(this[Y]=255&j;++se<J&&(ne*=256);)this[Y+se]=j/ne&255;return Y+J},n.prototype.writeUIntBE=function(j,Y,J,ee){j=+j,Y>>>=0,J>>>=0,ee||H(this,j,Y,J,Math.pow(2,8*J)-1,0);var ne=J-1,se=1;for(this[Y+ne]=255&j;--ne>=0&&(se*=256);)this[Y+ne]=j/se&255;return Y+J},n.prototype.writeUInt8=function(j,Y,J){return j=+j,Y>>>=0,J||H(this,j,Y,1,255,0),this[Y]=255&j,Y+1},n.prototype.writeUInt16LE=function(j,Y,J){return j=+j,Y>>>=0,J||H(this,j,Y,2,65535,0),this[Y]=255&j,this[Y+1]=j>>>8,Y+2},n.prototype.writeUInt16BE=function(j,Y,J){return j=+j,Y>>>=0,J||H(this,j,Y,2,65535,0),this[Y]=j>>>8,this[Y+1]=255&j,Y+2},n.prototype.writeUInt32LE=function(j,Y,J){return j=+j,Y>>>=0,J||H(this,j,Y,4,4294967295,0),this[Y+3]=j>>>24,this[Y+2]=j>>>16,this[Y+1]=j>>>8,this[Y]=255&j,Y+4},n.prototype.writeUInt32BE=function(j,Y,J){return j=+j,Y>>>=0,J||H(this,j,Y,4,4294967295,0),this[Y]=j>>>24,this[Y+1]=j>>>16,this[Y+2]=j>>>8,this[Y+3]=255&j,Y+4},n.prototype.writeIntLE=function(j,Y,J,ee){if(j=+j,Y>>>=0,!ee){var ne=Math.pow(2,8*J-1);H(this,j,Y,J,ne-1,-ne)}var se=0,oe=1,he=0;for(this[Y]=255&j;++se<J&&(oe*=256);)j<0&&he===0&&this[Y+se-1]!==0&&(he=1),this[Y+se]=(j/oe>>0)-he&255;return Y+J},n.prototype.writeIntBE=function(j,Y,J,ee){if(j=+j,Y>>>=0,!ee){var ne=Math.pow(2,8*J-1);H(this,j,Y,J,ne-1,-ne)}var se=J-1,oe=1,he=0;for(this[Y+se]=255&j;--se>=0&&(oe*=256);)j<0&&he===0&&this[Y+se+1]!==0&&(he=1),this[Y+se]=(j/oe>>0)-he&255;return Y+J},n.prototype.writeInt8=function(j,Y,J){return j=+j,Y>>>=0,J||H(this,j,Y,1,127,-128),j<0&&(j=255+j+1),this[Y]=255&j,Y+1},n.prototype.writeInt16LE=function(j,Y,J){return j=+j,Y>>>=0,J||H(this,j,Y,2,32767,-32768),this[Y]=255&j,this[Y+1]=j>>>8,Y+2},n.prototype.writeInt16BE=function(j,Y,J){return j=+j,Y>>>=0,J||H(this,j,Y,2,32767,-32768),this[Y]=j>>>8,this[Y+1]=255&j,Y+2},n.prototype.writeInt32LE=function(j,Y,J){return j=+j,Y>>>=0,J||H(this,j,Y,4,2147483647,-2147483648),this[Y]=255&j,this[Y+1]=j>>>8,this[Y+2]=j>>>16,this[Y+3]=j>>>24,Y+4},n.prototype.writeInt32BE=function(j,Y,J){return j=+j,Y>>>=0,J||H(this,j,Y,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[Y]=j>>>24,this[Y+1]=j>>>16,this[Y+2]=j>>>8,this[Y+3]=255&j,Y+4},n.prototype.writeFloatLE=function(j,Y,J){return Q(this,j,Y,!0,J)},n.prototype.writeFloatBE=function(j,Y,J){return Q(this,j,Y,!1,J)},n.prototype.writeDoubleLE=function(j,Y,J){return K(this,j,Y,!0,J)},n.prototype.writeDoubleBE=function(j,Y,J){return K(this,j,Y,!1,J)},n.prototype.copy=function(j,Y,J,ee){if(!n.isBuffer(j))throw new TypeError("argument should be a Buffer");if(J||(J=0),ee||ee===0||(ee=this.length),Y>=j.length&&(Y=j.length),Y||(Y=0),ee>0&&ee<J&&(ee=J),ee===J||j.length===0||this.length===0)return 0;if(Y<0)throw new RangeError("targetStart out of bounds");if(J<0||J>=this.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length),j.length-Y<ee-J&&(ee=j.length-Y+J);var ne=ee-J;if(this===j&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(Y,J,ee);else if(this===j&&J<Y&&Y<ee)for(var se=ne-1;se>=0;--se)j[se+Y]=this[se+J];else Uint8Array.prototype.set.call(j,this.subarray(J,ee),Y);return ne},n.prototype.fill=function(j,Y,J,ee){if(typeof j=="string"){if(typeof Y=="string"?(ee=Y,Y=0,J=this.length):typeof J=="string"&&(ee=J,J=this.length),ee!==void 0&&typeof ee!="string")throw new TypeError("encoding must be a string");if(typeof ee=="string"&&!n.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);if(j.length===1){var ne=j.charCodeAt(0);(ee==="utf8"&&ne<128||ee==="latin1")&&(j=ne)}}else typeof j=="number"&&(j&=255);if(Y<0||this.length<Y||this.length<J)throw new RangeError("Out of range index");if(J<=Y)return this;var se;if(Y>>>=0,J=J===void 0?this.length:J>>>0,j||(j=0),typeof j=="number")for(se=Y;se<J;++se)this[se]=j;else{var oe=n.isBuffer(j)?j:n.from(j,ee),he=oe.length;if(he===0)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for(se=0;se<J-Y;++se)this[se+Y]=oe[se%he]}return this};var Z=/[^+/0-9A-Za-z-_]/g;function $(j){return j<16?"0"+j.toString(16):j.toString(16)}function re(j,Y){var J;Y=Y||1/0;for(var ee=j.length,ne=null,se=[],oe=0;oe<ee;++oe){if((J=j.charCodeAt(oe))>55295&&J<57344){if(!ne){if(J>56319){(Y-=3)>-1&&se.push(239,191,189);continue}if(oe+1===ee){(Y-=3)>-1&&se.push(239,191,189);continue}ne=J;continue}if(J<56320){(Y-=3)>-1&&se.push(239,191,189),ne=J;continue}J=65536+(ne-55296<<10|J-56320)}else ne&&(Y-=3)>-1&&se.push(239,191,189);if(ne=null,J<128){if((Y-=1)<0)break;se.push(J)}else if(J<2048){if((Y-=2)<0)break;se.push(J>>6|192,63&J|128)}else if(J<65536){if((Y-=3)<0)break;se.push(J>>12|224,J>>6&63|128,63&J|128)}else{if(!(J<1114112))throw new Error("Invalid code point");if((Y-=4)<0)break;se.push(J>>18|240,J>>12&63|128,J>>6&63|128,63&J|128)}}return se}function R(j){return r.toByteArray(function(Y){if((Y=(Y=Y.split("=")[0]).trim().replace(Z,"")).length<2)return"";for(;Y.length%4!=0;)Y+="=";return Y}(j))}function N(j,Y,J,ee){for(var ne=0;ne<ee&&!(ne+J>=Y.length||ne>=j.length);++ne)Y[ne+J]=j[ne];return ne}function U(j,Y){return j instanceof Y||j!=null&&j.constructor!=null&&j.constructor.name!=null&&j.constructor.name===Y.name}function te(j){return j!=j}}).call(this)}).call(this,p("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(p,x,y){y.read=function(e,r,t,i,n){var h,s,a=8*n-i-1,l=(1<<a)-1,f=l>>1,d=-7,v=t?n-1:0,m=t?-1:1,c=e[r+v];for(v+=m,h=c&(1<<-d)-1,c>>=-d,d+=a;d>0;h=256*h+e[r+v],v+=m,d-=8);for(s=h&(1<<-d)-1,h>>=-d,d+=i;d>0;s=256*s+e[r+v],v+=m,d-=8);if(h===0)h=1-f;else{if(h===l)return s?NaN:1/0*(c?-1:1);s+=Math.pow(2,i),h-=f}return(c?-1:1)*s*Math.pow(2,h-i)},y.write=function(e,r,t,i,n,h){var s,a,l,f=8*h-n-1,d=(1<<f)-1,v=d>>1,m=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=i?0:h-1,b=i?1:-1,g=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(a=isNaN(r)?1:0,s=d):(s=Math.floor(Math.log(r)/Math.LN2),r*(l=Math.pow(2,-s))<1&&(s--,l*=2),(r+=s+v>=1?m/l:m*Math.pow(2,1-v))*l>=2&&(s++,l/=2),s+v>=d?(a=0,s=d):s+v>=1?(a=(r*l-1)*Math.pow(2,n),s+=v):(a=r*Math.pow(2,v-1)*Math.pow(2,n),s=0));n>=8;e[t+c]=255&a,c+=b,a/=256,n-=8);for(s=s<<n|a,f+=n;f>0;e[t+c]=255&s,c+=b,s/=256,f-=8);e[t+c-b]|=128*g}},{}],5:[function(p,x,y){var e,r,t=x.exports={};function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function h(b){if(e===setTimeout)return setTimeout(b,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(b,0);try{return e(b,0)}catch{try{return e.call(null,b,0)}catch{return e.call(this,b,0)}}}(function(){try{e=typeof setTimeout=="function"?setTimeout:i}catch{e=i}try{r=typeof clearTimeout=="function"?clearTimeout:n}catch{r=n}})();var s,a=[],l=!1,f=-1;function d(){l&&s&&(l=!1,s.length?a=s.concat(a):f=-1,a.length&&v())}function v(){if(!l){var b=h(d);l=!0;for(var g=a.length;g;){for(s=a,a=[];++f<g;)s&&s[f].run();f=-1,g=a.length}s=null,l=!1,function(w){if(r===clearTimeout)return clearTimeout(w);if((r===n||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(w);try{r(w)}catch{try{return r.call(null,w)}catch{return r.call(this,w)}}}(b)}}function m(b,g){this.fun=b,this.array=g}function c(){}t.nextTick=function(b){var g=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)g[w-1]=arguments[w];a.push(new m(b,g)),a.length!==1||l||h(v)},m.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=c,t.addListener=c,t.once=c,t.off=c,t.removeListener=c,t.removeAllListeners=c,t.emit=c,t.prependListener=c,t.prependOnceListener=c,t.listeners=function(b){return[]},t.binding=function(b){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(b){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],6:[function(p,x,y){x.exports={alpha_shape:p("alpha-shape"),convex_hull:p("convex-hull"),delaunay_triangulate:p("delaunay-triangulate"),gl_cone3d:p("gl-cone3d"),gl_error3d:p("gl-error3d"),gl_heatmap2d:p("gl-heatmap2d"),gl_line3d:p("gl-line3d"),gl_mesh3d:p("gl-mesh3d"),gl_plot2d:p("gl-plot2d"),gl_plot3d:p("gl-plot3d"),gl_pointcloud2d:p("gl-pointcloud2d"),gl_scatter3d:p("gl-scatter3d"),gl_select_box:p("gl-select-box"),gl_spikes2d:p("gl-spikes2d"),gl_streamtube3d:p("gl-streamtube3d"),gl_surface3d:p("gl-surface3d"),ndarray:p("ndarray"),ndarray_linear_interpolate:p("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(p,x,y){x.exports=function(h){var s=(h=h||{}).eye||[0,0,1],a=h.center||[0,0,0],l=h.up||[0,1,0],f=h.distanceLimits||[0,1/0],d=h.mode||"turntable",v=e(),m=r(),c=t();return v.setDistanceLimits(f[0],f[1]),v.lookAt(0,s,a,l),m.setDistanceLimits(f[0],f[1]),m.lookAt(0,s,a,l),c.setDistanceLimits(f[0],f[1]),c.lookAt(0,s,a,l),new i({turntable:v,orbit:m,matrix:c},d)};var e=p("turntable-camera-controller"),r=p("orbit-camera-controller"),t=p("matrix-camera-controller");function i(h,s){this._controllerNames=Object.keys(h),this._controllerList=this._controllerNames.map(function(a){return h[a]}),this._mode=s,this._active=h[s],this._active||(this._mode="turntable",this._active=h.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var n=i.prototype;n.flush=function(h){for(var s=this._controllerList,a=0;a<s.length;++a)s[a].flush(h)},n.idle=function(h){for(var s=this._controllerList,a=0;a<s.length;++a)s[a].idle(h)},n.lookAt=function(h,s,a,l){for(var f=this._controllerList,d=0;d<f.length;++d)f[d].lookAt(h,s,a,l)},n.rotate=function(h,s,a,l){for(var f=this._controllerList,d=0;d<f.length;++d)f[d].rotate(h,s,a,l)},n.pan=function(h,s,a,l){for(var f=this._controllerList,d=0;d<f.length;++d)f[d].pan(h,s,a,l)},n.translate=function(h,s,a,l){for(var f=this._controllerList,d=0;d<f.length;++d)f[d].translate(h,s,a,l)},n.setMatrix=function(h,s){for(var a=this._controllerList,l=0;l<a.length;++l)a[l].setMatrix(h,s)},n.setDistanceLimits=function(h,s){for(var a=this._controllerList,l=0;l<a.length;++l)a[l].setDistanceLimits(h,s)},n.setDistance=function(h,s){for(var a=this._controllerList,l=0;l<a.length;++l)a[l].setDistance(h,s)},n.recalcMatrix=function(h){this._active.recalcMatrix(h)},n.getDistance=function(h){return this._active.getDistance(h)},n.getDistanceLimits=function(h){return this._active.getDistanceLimits(h)},n.lastT=function(){return this._active.lastT()},n.setMode=function(h){if(h!==this._mode){var s=this._controllerNames.indexOf(h);if(!(s<0)){var a=this._active,l=this._controllerList[s],f=Math.max(a.lastT(),l.lastT());a.recalcMatrix(f),l.setMatrix(f,a.computedMatrix),this._active=l,this._mode=h,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},n.getMode=function(){return this._mode}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(p,x,y){var e=typeof WeakMap=="undefined"?p("weak-map"):WeakMap,r=p("gl-buffer"),t=p("gl-vao"),i=new e;x.exports=function(n){var h=i.get(n),s=h&&(h._triangleBuffer.handle||h._triangleBuffer.buffer);if(!s||!n.isBuffer(s)){var a=r(n,new Float32Array([-1,-1,-1,4,4,-1]));(h=t(n,[{buffer:a,type:n.FLOAT,size:2}]))._triangleBuffer=a,i.set(n,h)}h.bind(),n.drawArrays(n.TRIANGLES,0,3),h.unbind()}},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(p,x,y){var e=p("pad-left");x.exports=function(r,t,i){t=typeof t=="number"?t:1,i=i||": ";var n=r.split(/\r?\n/),h=String(n.length+t-1).length;return n.map(function(s,a){var l=a+t,f=String(l).length;return e(l,h-f)+i+s}).join(`
`)}},{"pad-left":264}],10:[function(p,x,y){x.exports=function(t){var i=t.length;if(i===0)return[];if(i===1)return[0];for(var n=t[0].length,h=[t[0]],s=[0],a=1;a<i;++a)if(h.push(t[a]),r(h,n)){if(s.push(a),s.length===n+1)return s}else h.pop();return s};var e=p("robust-orientation");function r(t,i){for(var n=new Array(i+1),h=0;h<t.length;++h)n[h]=t[h];for(h=0;h<=t.length;++h){for(var s=t.length;s<=i;++s){for(var a=new Array(i),l=0;l<i;++l)a[l]=Math.pow(s+1-h,l);n[s]=a}if(e.apply(void 0,n))return!0}return!1}},{"robust-orientation":284}],11:[function(p,x,y){x.exports=function(t,i){return e(i).filter(function(n){for(var h=new Array(n.length),s=0;s<n.length;++s)h[s]=i[n[s]];return r(h)*t<1})};var e=p("delaunay-triangulate"),r=p("circumradius")},{circumradius:49,"delaunay-triangulate":63}],12:[function(p,x,y){x.exports=function(t,i){return r(e(t,i))};var e=p("alpha-complex"),r=p("simplicial-complex-boundary")},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(p,x,y){x.exports=function(e){return atob(e)}},{}],14:[function(p,x,y){x.exports=function(t,i){for(var n=i.length,h=new Array(n+1),s=0;s<n;++s){for(var a=new Array(n+1),l=0;l<=n;++l)a[l]=t[l][s];h[s]=a}for(h[n]=new Array(n+1),s=0;s<=n;++s)h[n][s]=1;var f=new Array(n+1);for(s=0;s<n;++s)f[s]=i[s];f[n]=1;var d=e(h,f),v=r(d[n+1]);v===0&&(v=1);var m=new Array(n+1);for(s=0;s<=n;++s)m[s]=r(d[s])/v;return m};var e=p("robust-linear-solve");function r(t){for(var i=0,n=0;n<t.length;++n)i+=t[n];return i}},{"robust-linear-solve":283}],15:[function(p,x,y){var e=p("./lib/rationalize");x.exports=function(r,t){return e(r[0].mul(t[1]).add(t[0].mul(r[1])),r[1].mul(t[1]))}},{"./lib/rationalize":25}],16:[function(p,x,y){x.exports=function(e,r){return e[0].mul(r[1]).cmp(r[0].mul(e[1]))}},{}],17:[function(p,x,y){var e=p("./lib/rationalize");x.exports=function(r,t){return e(r[0].mul(t[1]),r[1].mul(t[0]))}},{"./lib/rationalize":25}],18:[function(p,x,y){var e=p("./is-rat"),r=p("./lib/is-bn"),t=p("./lib/num-to-bn"),i=p("./lib/str-to-bn"),n=p("./lib/rationalize"),h=p("./div");x.exports=function s(a,l){if(e(a))return l?h(a,s(l)):[a[0].clone(),a[1].clone()];var f,d,v=0;if(r(a))f=a.clone();else if(typeof a=="string")f=i(a);else{if(a===0)return[t(0),t(1)];if(a===Math.floor(a))f=t(a);else{for(;a!==Math.floor(a);)a*=Math.pow(2,256),v-=256;f=t(a)}}if(e(l))f.mul(l[1]),d=l[0].clone();else if(r(l))d=l.clone();else if(typeof l=="string")d=i(l);else if(l)if(l===Math.floor(l))d=t(l);else{for(;l!==Math.floor(l);)l*=Math.pow(2,256),v+=256;d=t(l)}else d=t(1);return v>0?f=f.ushln(v):v<0&&(d=d.ushln(-v)),n(f,d)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(p,x,y){var e=p("./lib/is-bn");x.exports=function(r){return Array.isArray(r)&&r.length===2&&e(r[0])&&e(r[1])}},{"./lib/is-bn":23}],20:[function(p,x,y){var e=p("bn.js");x.exports=function(r){return r.cmp(new e(0))}},{"bn.js":33}],21:[function(p,x,y){var e=p("./bn-sign");x.exports=function(r){var t=r.length,i=r.words,n=0;if(t===1)n=i[0];else if(t===2)n=i[0]+67108864*i[1];else for(var h=0;h<t;h++){var s=i[h];n+=s*Math.pow(67108864,h)}return e(r)*n}},{"./bn-sign":20}],22:[function(p,x,y){var e=p("double-bits"),r=p("bit-twiddle").countTrailingZeros;x.exports=function(t){var i=r(e.lo(t));if(i<32)return i;var n=r(e.hi(t));return n>20?52:n+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(p,x,y){p("bn.js"),x.exports=function(e){return e&&typeof e=="object"&&Boolean(e.words)}},{"bn.js":33}],24:[function(p,x,y){var e=p("bn.js"),r=p("double-bits");x.exports=function(t){var i=r.exponent(t);return i<52?new e(t):new e(t*Math.pow(2,52-i)).ushln(i-52)}},{"bn.js":33,"double-bits":64}],25:[function(p,x,y){var e=p("./num-to-bn"),r=p("./bn-sign");x.exports=function(t,i){var n=r(t),h=r(i);if(n===0)return[e(0),e(1)];if(h===0)return[e(0),e(0)];h<0&&(t=t.neg(),i=i.neg());var s=t.gcd(i);return s.cmpn(1)?[t.div(s),i.div(s)]:[t,i]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(p,x,y){var e=p("bn.js");x.exports=function(r){return new e(r)}},{"bn.js":33}],27:[function(p,x,y){var e=p("./lib/rationalize");x.exports=function(r,t){return e(r[0].mul(t[0]),r[1].mul(t[1]))}},{"./lib/rationalize":25}],28:[function(p,x,y){var e=p("./lib/bn-sign");x.exports=function(r){return e(r[0])*e(r[1])}},{"./lib/bn-sign":20}],29:[function(p,x,y){var e=p("./lib/rationalize");x.exports=function(r,t){return e(r[0].mul(t[1]).sub(r[1].mul(t[0])),r[1].mul(t[1]))}},{"./lib/rationalize":25}],30:[function(p,x,y){var e=p("./lib/bn-to-num"),r=p("./lib/ctz");x.exports=function(t){var i=t[0],n=t[1];if(i.cmpn(0)===0)return 0;var h=i.abs().divmod(n.abs()),s=h.div,a=e(s),l=h.mod,f=i.negative!==n.negative?-1:1;if(l.cmpn(0)===0)return f*a;if(a){var d=r(a)+4,v=e(l.ushln(d).divRound(n));return f*(a+v*Math.pow(2,-d))}var m=n.bitLength()-l.bitLength()+53;return v=e(l.ushln(m).divRound(n)),m<1023?f*v*Math.pow(2,-m):(v*=Math.pow(2,-1023),f*v*Math.pow(2,1023-m))}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(p,x,y){function e(s,a,l,f,d){for(var v=d+1;f<=d;){var m=f+d>>>1,c=s[m];(l!==void 0?l(c,a):c-a)>=0?(v=m,d=m-1):f=m+1}return v}function r(s,a,l,f,d){for(var v=d+1;f<=d;){var m=f+d>>>1,c=s[m];(l!==void 0?l(c,a):c-a)>0?(v=m,d=m-1):f=m+1}return v}function t(s,a,l,f,d){for(var v=f-1;f<=d;){var m=f+d>>>1,c=s[m];(l!==void 0?l(c,a):c-a)<0?(v=m,f=m+1):d=m-1}return v}function i(s,a,l,f,d){for(var v=f-1;f<=d;){var m=f+d>>>1,c=s[m];(l!==void 0?l(c,a):c-a)<=0?(v=m,f=m+1):d=m-1}return v}function n(s,a,l,f,d){for(;f<=d;){var v=f+d>>>1,m=s[v],c=l!==void 0?l(m,a):m-a;if(c===0)return v;c<=0?f=v+1:d=v-1}return-1}function h(s,a,l,f,d,v){return typeof l=="function"?v(s,a,l,f===void 0?0:0|f,d===void 0?s.length-1:0|d):v(s,a,void 0,l===void 0?0:0|l,f===void 0?s.length-1:0|f)}x.exports={ge:function(s,a,l,f,d){return h(s,a,l,f,d,e)},gt:function(s,a,l,f,d){return h(s,a,l,f,d,r)},lt:function(s,a,l,f,d){return h(s,a,l,f,d,t)},le:function(s,a,l,f,d){return h(s,a,l,f,d,i)},eq:function(s,a,l,f,d){return h(s,a,l,f,d,n)}}},{}],32:[function(p,x,y){function e(t){var i=32;return(t&=-t)&&i--,65535&t&&(i-=16),16711935&t&&(i-=8),252645135&t&&(i-=4),858993459&t&&(i-=2),1431655765&t&&(i-=1),i}y.INT_BITS=32,y.INT_MAX=2147483647,y.INT_MIN=-1<<31,y.sign=function(t){return(t>0)-(t<0)},y.abs=function(t){var i=t>>31;return(t^i)-i},y.min=function(t,i){return i^(t^i)&-(t<i)},y.max=function(t,i){return t^(t^i)&-(t<i)},y.isPow2=function(t){return!(t&t-1||!t)},y.log2=function(t){var i,n;return i=(t>65535)<<4,i|=n=((t>>>=i)>255)<<3,i|=n=((t>>>=n)>15)<<2,(i|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1},y.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},y.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},y.countTrailingZeros=e,y.nextPow2=function(t){return t+=t===0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},y.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},y.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var r=new Array(256);(function(t){for(var i=0;i<256;++i){var n=i,h=i,s=7;for(n>>>=1;n;n>>>=1)h<<=1,h|=1&n,--s;t[i]=h<<s&255}})(r),y.reverse=function(t){return r[255&t]<<24|r[t>>>8&255]<<16|r[t>>>16&255]<<8|r[t>>>24&255]},y.interleave2=function(t,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i&=65535)|i<<8))|i<<4))|i<<2))|i<<1))<<1},y.deinterleave2=function(t,i){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>i&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},y.interleave3=function(t,i,n){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},y.deinterleave3=function(t,i){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>i&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},y.nextCombination=function(t){var i=t|t-1;return i+1|(~i&-~i)-1>>>e(t)+1}},{}],33:[function(p,x,y){(function(e,r){function t(S,E){if(!S)throw new Error(E||"Assertion failed")}function i(S,E){S.super_=E;var D=function(){};D.prototype=E.prototype,S.prototype=new D,S.prototype.constructor=S}function n(S,E,D){if(n.isBN(S))return S;this.negative=0,this.words=null,this.length=0,this.red=null,S!==null&&(E!=="le"&&E!=="be"||(D=E,E=10),this._init(S||0,E||10,D||"be"))}var h;typeof e=="object"?e.exports=n:r.BN=n,n.BN=n,n.wordSize=26;try{h=typeof window!="undefined"&&window.Buffer!==void 0?window.Buffer:p("buffer").Buffer}catch{}function s(S,E){var D=S.charCodeAt(E);return D>=65&&D<=70?D-55:D>=97&&D<=102?D-87:D-48&15}function a(S,E,D){var F=s(S,D);return D-1>=E&&(F|=s(S,D-1)<<4),F}function l(S,E,D,F){for(var H=0,V=Math.min(S.length,D),Q=E;Q<V;Q++){var K=S.charCodeAt(Q)-48;H*=F,H+=K>=49?K-49+10:K>=17?K-17+10:K}return H}n.isBN=function(S){return S instanceof n||S!==null&&typeof S=="object"&&S.constructor.wordSize===n.wordSize&&Array.isArray(S.words)},n.max=function(S,E){return S.cmp(E)>0?S:E},n.min=function(S,E){return S.cmp(E)<0?S:E},n.prototype._init=function(S,E,D){if(typeof S=="number")return this._initNumber(S,E,D);if(typeof S=="object")return this._initArray(S,E,D);E==="hex"&&(E=16),t(E===(0|E)&&E>=2&&E<=36);var F=0;(S=S.toString().replace(/\s+/g,""))[0]==="-"&&(F++,this.negative=1),F<S.length&&(E===16?this._parseHex(S,F,D):(this._parseBase(S,E,F),D==="le"&&this._initArray(this.toArray(),E,D)))},n.prototype._initNumber=function(S,E,D){S<0&&(this.negative=1,S=-S),S<67108864?(this.words=[67108863&S],this.length=1):S<4503599627370496?(this.words=[67108863&S,S/67108864&67108863],this.length=2):(t(S<9007199254740992),this.words=[67108863&S,S/67108864&67108863,1],this.length=3),D==="le"&&this._initArray(this.toArray(),E,D)},n.prototype._initArray=function(S,E,D){if(t(typeof S.length=="number"),S.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(S.length/3),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var H,V,Q=0;if(D==="be")for(F=S.length-1,H=0;F>=0;F-=3)V=S[F]|S[F-1]<<8|S[F-2]<<16,this.words[H]|=V<<Q&67108863,this.words[H+1]=V>>>26-Q&67108863,(Q+=24)>=26&&(Q-=26,H++);else if(D==="le")for(F=0,H=0;F<S.length;F+=3)V=S[F]|S[F+1]<<8|S[F+2]<<16,this.words[H]|=V<<Q&67108863,this.words[H+1]=V>>>26-Q&67108863,(Q+=24)>=26&&(Q-=26,H++);return this.strip()},n.prototype._parseHex=function(S,E,D){this.length=Math.ceil((S.length-E)/6),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var H,V=0,Q=0;if(D==="be")for(F=S.length-1;F>=E;F-=2)H=a(S,E,F)<<V,this.words[Q]|=67108863&H,V>=18?(V-=18,Q+=1,this.words[Q]|=H>>>26):V+=8;else for(F=(S.length-E)%2==0?E+1:E;F<S.length;F+=2)H=a(S,E,F)<<V,this.words[Q]|=67108863&H,V>=18?(V-=18,Q+=1,this.words[Q]|=H>>>26):V+=8;this.strip()},n.prototype._parseBase=function(S,E,D){this.words=[0],this.length=1;for(var F=0,H=1;H<=67108863;H*=E)F++;F--,H=H/E|0;for(var V=S.length-D,Q=V%F,K=Math.min(V,V-Q)+D,Z=0,$=D;$<K;$+=F)Z=l(S,$,$+F,E),this.imuln(H),this.words[0]+Z<67108864?this.words[0]+=Z:this._iaddn(Z);if(Q!==0){var re=1;for(Z=l(S,$,S.length,E),$=0;$<Q;$++)re*=E;this.imuln(re),this.words[0]+Z<67108864?this.words[0]+=Z:this._iaddn(Z)}this.strip()},n.prototype.copy=function(S){S.words=new Array(this.length);for(var E=0;E<this.length;E++)S.words[E]=this.words[E];S.length=this.length,S.negative=this.negative,S.red=this.red},n.prototype.clone=function(){var S=new n(null);return this.copy(S),S},n.prototype._expand=function(S){for(;this.length<S;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(S,E,D){D.negative=E.negative^S.negative;var F=S.length+E.length|0;D.length=F,F=F-1|0;var H=0|S.words[0],V=0|E.words[0],Q=H*V,K=67108863&Q,Z=Q/67108864|0;D.words[0]=K;for(var $=1;$<F;$++){for(var re=Z>>>26,R=67108863&Z,N=Math.min($,E.length-1),U=Math.max(0,$-S.length+1);U<=N;U++){var te=$-U|0;re+=(Q=(H=0|S.words[te])*(V=0|E.words[U])+R)/67108864|0,R=67108863&Q}D.words[$]=0|R,Z=0|re}return Z!==0?D.words[$]=0|Z:D.length--,D.strip()}n.prototype.toString=function(S,E){var D;if(E=0|E||1,(S=S||10)===16||S==="hex"){D="";for(var F=0,H=0,V=0;V<this.length;V++){var Q=this.words[V],K=(16777215&(Q<<F|H)).toString(16);D=(H=Q>>>24-F&16777215)!=0||V!==this.length-1?f[6-K.length]+K+D:K+D,(F+=2)>=26&&(F-=26,V--)}for(H!==0&&(D=H.toString(16)+D);D.length%E!=0;)D="0"+D;return this.negative!==0&&(D="-"+D),D}if(S===(0|S)&&S>=2&&S<=36){var Z=d[S],$=v[S];D="";var re=this.clone();for(re.negative=0;!re.isZero();){var R=re.modn($).toString(S);D=(re=re.idivn($)).isZero()?R+D:f[Z-R.length]+R+D}for(this.isZero()&&(D="0"+D);D.length%E!=0;)D="0"+D;return this.negative!==0&&(D="-"+D),D}t(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var S=this.words[0];return this.length===2?S+=67108864*this.words[1]:this.length===3&&this.words[2]===1?S+=4503599627370496+67108864*this.words[1]:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-S:S},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(S,E){return t(h!==void 0),this.toArrayLike(h,S,E)},n.prototype.toArray=function(S,E){return this.toArrayLike(Array,S,E)},n.prototype.toArrayLike=function(S,E,D){var F=this.byteLength(),H=D||Math.max(1,F);t(F<=H,"byte array longer than desired length"),t(H>0,"Requested array length <= 0"),this.strip();var V,Q,K=E==="le",Z=new S(H),$=this.clone();if(K){for(Q=0;!$.isZero();Q++)V=$.andln(255),$.iushrn(8),Z[Q]=V;for(;Q<H;Q++)Z[Q]=0}else{for(Q=0;Q<H-F;Q++)Z[Q]=0;for(Q=0;!$.isZero();Q++)V=$.andln(255),$.iushrn(8),Z[H-Q-1]=V}return Z},Math.clz32?n.prototype._countBits=function(S){return 32-Math.clz32(S)}:n.prototype._countBits=function(S){var E=S,D=0;return E>=4096&&(D+=13,E>>>=13),E>=64&&(D+=7,E>>>=7),E>=8&&(D+=4,E>>>=4),E>=2&&(D+=2,E>>>=2),D+E},n.prototype._zeroBits=function(S){if(S===0)return 26;var E=S,D=0;return(8191&E)==0&&(D+=13,E>>>=13),(127&E)==0&&(D+=7,E>>>=7),(15&E)==0&&(D+=4,E>>>=4),(3&E)==0&&(D+=2,E>>>=2),(1&E)==0&&D++,D},n.prototype.bitLength=function(){var S=this.words[this.length-1],E=this._countBits(S);return 26*(this.length-1)+E},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var S=0,E=0;E<this.length;E++){var D=this._zeroBits(this.words[E]);if(S+=D,D!==26)break}return S},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(S){return this.negative!==0?this.abs().inotn(S).iaddn(1):this.clone()},n.prototype.fromTwos=function(S){return this.testn(S-1)?this.notn(S).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(S){for(;this.length<S.length;)this.words[this.length++]=0;for(var E=0;E<S.length;E++)this.words[E]=this.words[E]|S.words[E];return this.strip()},n.prototype.ior=function(S){return t((this.negative|S.negative)==0),this.iuor(S)},n.prototype.or=function(S){return this.length>S.length?this.clone().ior(S):S.clone().ior(this)},n.prototype.uor=function(S){return this.length>S.length?this.clone().iuor(S):S.clone().iuor(this)},n.prototype.iuand=function(S){var E;E=this.length>S.length?S:this;for(var D=0;D<E.length;D++)this.words[D]=this.words[D]&S.words[D];return this.length=E.length,this.strip()},n.prototype.iand=function(S){return t((this.negative|S.negative)==0),this.iuand(S)},n.prototype.and=function(S){return this.length>S.length?this.clone().iand(S):S.clone().iand(this)},n.prototype.uand=function(S){return this.length>S.length?this.clone().iuand(S):S.clone().iuand(this)},n.prototype.iuxor=function(S){var E,D;this.length>S.length?(E=this,D=S):(E=S,D=this);for(var F=0;F<D.length;F++)this.words[F]=E.words[F]^D.words[F];if(this!==E)for(;F<E.length;F++)this.words[F]=E.words[F];return this.length=E.length,this.strip()},n.prototype.ixor=function(S){return t((this.negative|S.negative)==0),this.iuxor(S)},n.prototype.xor=function(S){return this.length>S.length?this.clone().ixor(S):S.clone().ixor(this)},n.prototype.uxor=function(S){return this.length>S.length?this.clone().iuxor(S):S.clone().iuxor(this)},n.prototype.inotn=function(S){t(typeof S=="number"&&S>=0);var E=0|Math.ceil(S/26),D=S%26;this._expand(E),D>0&&E--;for(var F=0;F<E;F++)this.words[F]=67108863&~this.words[F];return D>0&&(this.words[F]=~this.words[F]&67108863>>26-D),this.strip()},n.prototype.notn=function(S){return this.clone().inotn(S)},n.prototype.setn=function(S,E){t(typeof S=="number"&&S>=0);var D=S/26|0,F=S%26;return this._expand(D+1),this.words[D]=E?this.words[D]|1<<F:this.words[D]&~(1<<F),this.strip()},n.prototype.iadd=function(S){var E,D,F;if(this.negative!==0&&S.negative===0)return this.negative=0,E=this.isub(S),this.negative^=1,this._normSign();if(this.negative===0&&S.negative!==0)return S.negative=0,E=this.isub(S),S.negative=1,E._normSign();this.length>S.length?(D=this,F=S):(D=S,F=this);for(var H=0,V=0;V<F.length;V++)E=(0|D.words[V])+(0|F.words[V])+H,this.words[V]=67108863&E,H=E>>>26;for(;H!==0&&V<D.length;V++)E=(0|D.words[V])+H,this.words[V]=67108863&E,H=E>>>26;if(this.length=D.length,H!==0)this.words[this.length]=H,this.length++;else if(D!==this)for(;V<D.length;V++)this.words[V]=D.words[V];return this},n.prototype.add=function(S){var E;return S.negative!==0&&this.negative===0?(S.negative=0,E=this.sub(S),S.negative^=1,E):S.negative===0&&this.negative!==0?(this.negative=0,E=S.sub(this),this.negative=1,E):this.length>S.length?this.clone().iadd(S):S.clone().iadd(this)},n.prototype.isub=function(S){if(S.negative!==0){S.negative=0;var E=this.iadd(S);return S.negative=1,E._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(S),this.negative=1,this._normSign();var D,F,H=this.cmp(S);if(H===0)return this.negative=0,this.length=1,this.words[0]=0,this;H>0?(D=this,F=S):(D=S,F=this);for(var V=0,Q=0;Q<F.length;Q++)V=(E=(0|D.words[Q])-(0|F.words[Q])+V)>>26,this.words[Q]=67108863&E;for(;V!==0&&Q<D.length;Q++)V=(E=(0|D.words[Q])+V)>>26,this.words[Q]=67108863&E;if(V===0&&Q<D.length&&D!==this)for(;Q<D.length;Q++)this.words[Q]=D.words[Q];return this.length=Math.max(this.length,Q),D!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(S){return this.clone().isub(S)};var c=function(S,E,D){var F,H,V,Q=S.words,K=E.words,Z=D.words,$=0,re=0|Q[0],R=8191&re,N=re>>>13,U=0|Q[1],te=8191&U,j=U>>>13,Y=0|Q[2],J=8191&Y,ee=Y>>>13,ne=0|Q[3],se=8191&ne,oe=ne>>>13,he=0|Q[4],le=8191&he,de=he>>>13,xe=0|Q[5],we=8191&xe,be=xe>>>13,Ae=0|Q[6],fe=8191&Ae,me=Ae>>>13,ke=0|Q[7],Te=8191&ke,Me=ke>>>13,Oe=0|Q[8],Fe=8191&Oe,qe=Oe>>>13,et=0|Q[9],ze=8191&et,Ue=et>>>13,We=0|K[0],Ze=8191&We,nt=We>>>13,ft=0|K[1],xt=8191&ft,It=ft>>>13,Et=0|K[2],it=8191&Et,rt=Et>>>13,At=0|K[3],Gt=8191&At,Qt=At>>>13,Ve=0|K[4],Ye=8191&Ve,Be=Ve>>>13,Je=0|K[5],Se=8191&Je,Pe=Je>>>13,De=0|K[6],Ie=8191&De,$e=De>>>13,st=0|K[7],dt=8191&st,ut=st>>>13,Lt=0|K[8],lt=8191&Lt,Ct=Lt>>>13,Pt=0|K[9],Ke=8191&Pt,mt=Pt>>>13;D.negative=S.negative^E.negative,D.length=19;var Dt=($+(F=Math.imul(R,Ze))|0)+((8191&(H=(H=Math.imul(R,nt))+Math.imul(N,Ze)|0))<<13)|0;$=((V=Math.imul(N,nt))+(H>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,F=Math.imul(te,Ze),H=(H=Math.imul(te,nt))+Math.imul(j,Ze)|0,V=Math.imul(j,nt);var Bt=($+(F=F+Math.imul(R,xt)|0)|0)+((8191&(H=(H=H+Math.imul(R,It)|0)+Math.imul(N,xt)|0))<<13)|0;$=((V=V+Math.imul(N,It)|0)+(H>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,F=Math.imul(J,Ze),H=(H=Math.imul(J,nt))+Math.imul(ee,Ze)|0,V=Math.imul(ee,nt),F=F+Math.imul(te,xt)|0,H=(H=H+Math.imul(te,It)|0)+Math.imul(j,xt)|0,V=V+Math.imul(j,It)|0;var Zt=($+(F=F+Math.imul(R,it)|0)|0)+((8191&(H=(H=H+Math.imul(R,rt)|0)+Math.imul(N,it)|0))<<13)|0;$=((V=V+Math.imul(N,rt)|0)+(H>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,F=Math.imul(se,Ze),H=(H=Math.imul(se,nt))+Math.imul(oe,Ze)|0,V=Math.imul(oe,nt),F=F+Math.imul(J,xt)|0,H=(H=H+Math.imul(J,It)|0)+Math.imul(ee,xt)|0,V=V+Math.imul(ee,It)|0,F=F+Math.imul(te,it)|0,H=(H=H+Math.imul(te,rt)|0)+Math.imul(j,it)|0,V=V+Math.imul(j,rt)|0;var Re=($+(F=F+Math.imul(R,Gt)|0)|0)+((8191&(H=(H=H+Math.imul(R,Qt)|0)+Math.imul(N,Gt)|0))<<13)|0;$=((V=V+Math.imul(N,Qt)|0)+(H>>>13)|0)+(Re>>>26)|0,Re&=67108863,F=Math.imul(le,Ze),H=(H=Math.imul(le,nt))+Math.imul(de,Ze)|0,V=Math.imul(de,nt),F=F+Math.imul(se,xt)|0,H=(H=H+Math.imul(se,It)|0)+Math.imul(oe,xt)|0,V=V+Math.imul(oe,It)|0,F=F+Math.imul(J,it)|0,H=(H=H+Math.imul(J,rt)|0)+Math.imul(ee,it)|0,V=V+Math.imul(ee,rt)|0,F=F+Math.imul(te,Gt)|0,H=(H=H+Math.imul(te,Qt)|0)+Math.imul(j,Gt)|0,V=V+Math.imul(j,Qt)|0;var ct=($+(F=F+Math.imul(R,Ye)|0)|0)+((8191&(H=(H=H+Math.imul(R,Be)|0)+Math.imul(N,Ye)|0))<<13)|0;$=((V=V+Math.imul(N,Be)|0)+(H>>>13)|0)+(ct>>>26)|0,ct&=67108863,F=Math.imul(we,Ze),H=(H=Math.imul(we,nt))+Math.imul(be,Ze)|0,V=Math.imul(be,nt),F=F+Math.imul(le,xt)|0,H=(H=H+Math.imul(le,It)|0)+Math.imul(de,xt)|0,V=V+Math.imul(de,It)|0,F=F+Math.imul(se,it)|0,H=(H=H+Math.imul(se,rt)|0)+Math.imul(oe,it)|0,V=V+Math.imul(oe,rt)|0,F=F+Math.imul(J,Gt)|0,H=(H=H+Math.imul(J,Qt)|0)+Math.imul(ee,Gt)|0,V=V+Math.imul(ee,Qt)|0,F=F+Math.imul(te,Ye)|0,H=(H=H+Math.imul(te,Be)|0)+Math.imul(j,Ye)|0,V=V+Math.imul(j,Be)|0;var wt=($+(F=F+Math.imul(R,Se)|0)|0)+((8191&(H=(H=H+Math.imul(R,Pe)|0)+Math.imul(N,Se)|0))<<13)|0;$=((V=V+Math.imul(N,Pe)|0)+(H>>>13)|0)+(wt>>>26)|0,wt&=67108863,F=Math.imul(fe,Ze),H=(H=Math.imul(fe,nt))+Math.imul(me,Ze)|0,V=Math.imul(me,nt),F=F+Math.imul(we,xt)|0,H=(H=H+Math.imul(we,It)|0)+Math.imul(be,xt)|0,V=V+Math.imul(be,It)|0,F=F+Math.imul(le,it)|0,H=(H=H+Math.imul(le,rt)|0)+Math.imul(de,it)|0,V=V+Math.imul(de,rt)|0,F=F+Math.imul(se,Gt)|0,H=(H=H+Math.imul(se,Qt)|0)+Math.imul(oe,Gt)|0,V=V+Math.imul(oe,Qt)|0,F=F+Math.imul(J,Ye)|0,H=(H=H+Math.imul(J,Be)|0)+Math.imul(ee,Ye)|0,V=V+Math.imul(ee,Be)|0,F=F+Math.imul(te,Se)|0,H=(H=H+Math.imul(te,Pe)|0)+Math.imul(j,Se)|0,V=V+Math.imul(j,Pe)|0;var Rt=($+(F=F+Math.imul(R,Ie)|0)|0)+((8191&(H=(H=H+Math.imul(R,$e)|0)+Math.imul(N,Ie)|0))<<13)|0;$=((V=V+Math.imul(N,$e)|0)+(H>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,F=Math.imul(Te,Ze),H=(H=Math.imul(Te,nt))+Math.imul(Me,Ze)|0,V=Math.imul(Me,nt),F=F+Math.imul(fe,xt)|0,H=(H=H+Math.imul(fe,It)|0)+Math.imul(me,xt)|0,V=V+Math.imul(me,It)|0,F=F+Math.imul(we,it)|0,H=(H=H+Math.imul(we,rt)|0)+Math.imul(be,it)|0,V=V+Math.imul(be,rt)|0,F=F+Math.imul(le,Gt)|0,H=(H=H+Math.imul(le,Qt)|0)+Math.imul(de,Gt)|0,V=V+Math.imul(de,Qt)|0,F=F+Math.imul(se,Ye)|0,H=(H=H+Math.imul(se,Be)|0)+Math.imul(oe,Ye)|0,V=V+Math.imul(oe,Be)|0,F=F+Math.imul(J,Se)|0,H=(H=H+Math.imul(J,Pe)|0)+Math.imul(ee,Se)|0,V=V+Math.imul(ee,Pe)|0,F=F+Math.imul(te,Ie)|0,H=(H=H+Math.imul(te,$e)|0)+Math.imul(j,Ie)|0,V=V+Math.imul(j,$e)|0;var Vt=($+(F=F+Math.imul(R,dt)|0)|0)+((8191&(H=(H=H+Math.imul(R,ut)|0)+Math.imul(N,dt)|0))<<13)|0;$=((V=V+Math.imul(N,ut)|0)+(H>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,F=Math.imul(Fe,Ze),H=(H=Math.imul(Fe,nt))+Math.imul(qe,Ze)|0,V=Math.imul(qe,nt),F=F+Math.imul(Te,xt)|0,H=(H=H+Math.imul(Te,It)|0)+Math.imul(Me,xt)|0,V=V+Math.imul(Me,It)|0,F=F+Math.imul(fe,it)|0,H=(H=H+Math.imul(fe,rt)|0)+Math.imul(me,it)|0,V=V+Math.imul(me,rt)|0,F=F+Math.imul(we,Gt)|0,H=(H=H+Math.imul(we,Qt)|0)+Math.imul(be,Gt)|0,V=V+Math.imul(be,Qt)|0,F=F+Math.imul(le,Ye)|0,H=(H=H+Math.imul(le,Be)|0)+Math.imul(de,Ye)|0,V=V+Math.imul(de,Be)|0,F=F+Math.imul(se,Se)|0,H=(H=H+Math.imul(se,Pe)|0)+Math.imul(oe,Se)|0,V=V+Math.imul(oe,Pe)|0,F=F+Math.imul(J,Ie)|0,H=(H=H+Math.imul(J,$e)|0)+Math.imul(ee,Ie)|0,V=V+Math.imul(ee,$e)|0,F=F+Math.imul(te,dt)|0,H=(H=H+Math.imul(te,ut)|0)+Math.imul(j,dt)|0,V=V+Math.imul(j,ut)|0;var rr=($+(F=F+Math.imul(R,lt)|0)|0)+((8191&(H=(H=H+Math.imul(R,Ct)|0)+Math.imul(N,lt)|0))<<13)|0;$=((V=V+Math.imul(N,Ct)|0)+(H>>>13)|0)+(rr>>>26)|0,rr&=67108863,F=Math.imul(ze,Ze),H=(H=Math.imul(ze,nt))+Math.imul(Ue,Ze)|0,V=Math.imul(Ue,nt),F=F+Math.imul(Fe,xt)|0,H=(H=H+Math.imul(Fe,It)|0)+Math.imul(qe,xt)|0,V=V+Math.imul(qe,It)|0,F=F+Math.imul(Te,it)|0,H=(H=H+Math.imul(Te,rt)|0)+Math.imul(Me,it)|0,V=V+Math.imul(Me,rt)|0,F=F+Math.imul(fe,Gt)|0,H=(H=H+Math.imul(fe,Qt)|0)+Math.imul(me,Gt)|0,V=V+Math.imul(me,Qt)|0,F=F+Math.imul(we,Ye)|0,H=(H=H+Math.imul(we,Be)|0)+Math.imul(be,Ye)|0,V=V+Math.imul(be,Be)|0,F=F+Math.imul(le,Se)|0,H=(H=H+Math.imul(le,Pe)|0)+Math.imul(de,Se)|0,V=V+Math.imul(de,Pe)|0,F=F+Math.imul(se,Ie)|0,H=(H=H+Math.imul(se,$e)|0)+Math.imul(oe,Ie)|0,V=V+Math.imul(oe,$e)|0,F=F+Math.imul(J,dt)|0,H=(H=H+Math.imul(J,ut)|0)+Math.imul(ee,dt)|0,V=V+Math.imul(ee,ut)|0,F=F+Math.imul(te,lt)|0,H=(H=H+Math.imul(te,Ct)|0)+Math.imul(j,lt)|0,V=V+Math.imul(j,Ct)|0;var qt=($+(F=F+Math.imul(R,Ke)|0)|0)+((8191&(H=(H=H+Math.imul(R,mt)|0)+Math.imul(N,Ke)|0))<<13)|0;$=((V=V+Math.imul(N,mt)|0)+(H>>>13)|0)+(qt>>>26)|0,qt&=67108863,F=Math.imul(ze,xt),H=(H=Math.imul(ze,It))+Math.imul(Ue,xt)|0,V=Math.imul(Ue,It),F=F+Math.imul(Fe,it)|0,H=(H=H+Math.imul(Fe,rt)|0)+Math.imul(qe,it)|0,V=V+Math.imul(qe,rt)|0,F=F+Math.imul(Te,Gt)|0,H=(H=H+Math.imul(Te,Qt)|0)+Math.imul(Me,Gt)|0,V=V+Math.imul(Me,Qt)|0,F=F+Math.imul(fe,Ye)|0,H=(H=H+Math.imul(fe,Be)|0)+Math.imul(me,Ye)|0,V=V+Math.imul(me,Be)|0,F=F+Math.imul(we,Se)|0,H=(H=H+Math.imul(we,Pe)|0)+Math.imul(be,Se)|0,V=V+Math.imul(be,Pe)|0,F=F+Math.imul(le,Ie)|0,H=(H=H+Math.imul(le,$e)|0)+Math.imul(de,Ie)|0,V=V+Math.imul(de,$e)|0,F=F+Math.imul(se,dt)|0,H=(H=H+Math.imul(se,ut)|0)+Math.imul(oe,dt)|0,V=V+Math.imul(oe,ut)|0,F=F+Math.imul(J,lt)|0,H=(H=H+Math.imul(J,Ct)|0)+Math.imul(ee,lt)|0,V=V+Math.imul(ee,Ct)|0;var Jt=($+(F=F+Math.imul(te,Ke)|0)|0)+((8191&(H=(H=H+Math.imul(te,mt)|0)+Math.imul(j,Ke)|0))<<13)|0;$=((V=V+Math.imul(j,mt)|0)+(H>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,F=Math.imul(ze,it),H=(H=Math.imul(ze,rt))+Math.imul(Ue,it)|0,V=Math.imul(Ue,rt),F=F+Math.imul(Fe,Gt)|0,H=(H=H+Math.imul(Fe,Qt)|0)+Math.imul(qe,Gt)|0,V=V+Math.imul(qe,Qt)|0,F=F+Math.imul(Te,Ye)|0,H=(H=H+Math.imul(Te,Be)|0)+Math.imul(Me,Ye)|0,V=V+Math.imul(Me,Be)|0,F=F+Math.imul(fe,Se)|0,H=(H=H+Math.imul(fe,Pe)|0)+Math.imul(me,Se)|0,V=V+Math.imul(me,Pe)|0,F=F+Math.imul(we,Ie)|0,H=(H=H+Math.imul(we,$e)|0)+Math.imul(be,Ie)|0,V=V+Math.imul(be,$e)|0,F=F+Math.imul(le,dt)|0,H=(H=H+Math.imul(le,ut)|0)+Math.imul(de,dt)|0,V=V+Math.imul(de,ut)|0,F=F+Math.imul(se,lt)|0,H=(H=H+Math.imul(se,Ct)|0)+Math.imul(oe,lt)|0,V=V+Math.imul(oe,Ct)|0;var or=($+(F=F+Math.imul(J,Ke)|0)|0)+((8191&(H=(H=H+Math.imul(J,mt)|0)+Math.imul(ee,Ke)|0))<<13)|0;$=((V=V+Math.imul(ee,mt)|0)+(H>>>13)|0)+(or>>>26)|0,or&=67108863,F=Math.imul(ze,Gt),H=(H=Math.imul(ze,Qt))+Math.imul(Ue,Gt)|0,V=Math.imul(Ue,Qt),F=F+Math.imul(Fe,Ye)|0,H=(H=H+Math.imul(Fe,Be)|0)+Math.imul(qe,Ye)|0,V=V+Math.imul(qe,Be)|0,F=F+Math.imul(Te,Se)|0,H=(H=H+Math.imul(Te,Pe)|0)+Math.imul(Me,Se)|0,V=V+Math.imul(Me,Pe)|0,F=F+Math.imul(fe,Ie)|0,H=(H=H+Math.imul(fe,$e)|0)+Math.imul(me,Ie)|0,V=V+Math.imul(me,$e)|0,F=F+Math.imul(we,dt)|0,H=(H=H+Math.imul(we,ut)|0)+Math.imul(be,dt)|0,V=V+Math.imul(be,ut)|0,F=F+Math.imul(le,lt)|0,H=(H=H+Math.imul(le,Ct)|0)+Math.imul(de,lt)|0,V=V+Math.imul(de,Ct)|0;var gr=($+(F=F+Math.imul(se,Ke)|0)|0)+((8191&(H=(H=H+Math.imul(se,mt)|0)+Math.imul(oe,Ke)|0))<<13)|0;$=((V=V+Math.imul(oe,mt)|0)+(H>>>13)|0)+(gr>>>26)|0,gr&=67108863,F=Math.imul(ze,Ye),H=(H=Math.imul(ze,Be))+Math.imul(Ue,Ye)|0,V=Math.imul(Ue,Be),F=F+Math.imul(Fe,Se)|0,H=(H=H+Math.imul(Fe,Pe)|0)+Math.imul(qe,Se)|0,V=V+Math.imul(qe,Pe)|0,F=F+Math.imul(Te,Ie)|0,H=(H=H+Math.imul(Te,$e)|0)+Math.imul(Me,Ie)|0,V=V+Math.imul(Me,$e)|0,F=F+Math.imul(fe,dt)|0,H=(H=H+Math.imul(fe,ut)|0)+Math.imul(me,dt)|0,V=V+Math.imul(me,ut)|0,F=F+Math.imul(we,lt)|0,H=(H=H+Math.imul(we,Ct)|0)+Math.imul(be,lt)|0,V=V+Math.imul(be,Ct)|0;var dr=($+(F=F+Math.imul(le,Ke)|0)|0)+((8191&(H=(H=H+Math.imul(le,mt)|0)+Math.imul(de,Ke)|0))<<13)|0;$=((V=V+Math.imul(de,mt)|0)+(H>>>13)|0)+(dr>>>26)|0,dr&=67108863,F=Math.imul(ze,Se),H=(H=Math.imul(ze,Pe))+Math.imul(Ue,Se)|0,V=Math.imul(Ue,Pe),F=F+Math.imul(Fe,Ie)|0,H=(H=H+Math.imul(Fe,$e)|0)+Math.imul(qe,Ie)|0,V=V+Math.imul(qe,$e)|0,F=F+Math.imul(Te,dt)|0,H=(H=H+Math.imul(Te,ut)|0)+Math.imul(Me,dt)|0,V=V+Math.imul(Me,ut)|0,F=F+Math.imul(fe,lt)|0,H=(H=H+Math.imul(fe,Ct)|0)+Math.imul(me,lt)|0,V=V+Math.imul(me,Ct)|0;var ur=($+(F=F+Math.imul(we,Ke)|0)|0)+((8191&(H=(H=H+Math.imul(we,mt)|0)+Math.imul(be,Ke)|0))<<13)|0;$=((V=V+Math.imul(be,mt)|0)+(H>>>13)|0)+(ur>>>26)|0,ur&=67108863,F=Math.imul(ze,Ie),H=(H=Math.imul(ze,$e))+Math.imul(Ue,Ie)|0,V=Math.imul(Ue,$e),F=F+Math.imul(Fe,dt)|0,H=(H=H+Math.imul(Fe,ut)|0)+Math.imul(qe,dt)|0,V=V+Math.imul(qe,ut)|0,F=F+Math.imul(Te,lt)|0,H=(H=H+Math.imul(Te,Ct)|0)+Math.imul(Me,lt)|0,V=V+Math.imul(Me,Ct)|0;var cr=($+(F=F+Math.imul(fe,Ke)|0)|0)+((8191&(H=(H=H+Math.imul(fe,mt)|0)+Math.imul(me,Ke)|0))<<13)|0;$=((V=V+Math.imul(me,mt)|0)+(H>>>13)|0)+(cr>>>26)|0,cr&=67108863,F=Math.imul(ze,dt),H=(H=Math.imul(ze,ut))+Math.imul(Ue,dt)|0,V=Math.imul(Ue,ut),F=F+Math.imul(Fe,lt)|0,H=(H=H+Math.imul(Fe,Ct)|0)+Math.imul(qe,lt)|0,V=V+Math.imul(qe,Ct)|0;var mr=($+(F=F+Math.imul(Te,Ke)|0)|0)+((8191&(H=(H=H+Math.imul(Te,mt)|0)+Math.imul(Me,Ke)|0))<<13)|0;$=((V=V+Math.imul(Me,mt)|0)+(H>>>13)|0)+(mr>>>26)|0,mr&=67108863,F=Math.imul(ze,lt),H=(H=Math.imul(ze,Ct))+Math.imul(Ue,lt)|0,V=Math.imul(Ue,Ct);var Dr=($+(F=F+Math.imul(Fe,Ke)|0)|0)+((8191&(H=(H=H+Math.imul(Fe,mt)|0)+Math.imul(qe,Ke)|0))<<13)|0;$=((V=V+Math.imul(qe,mt)|0)+(H>>>13)|0)+(Dr>>>26)|0,Dr&=67108863;var yr=($+(F=Math.imul(ze,Ke))|0)+((8191&(H=(H=Math.imul(ze,mt))+Math.imul(Ue,Ke)|0))<<13)|0;return $=((V=Math.imul(Ue,mt))+(H>>>13)|0)+(yr>>>26)|0,yr&=67108863,Z[0]=Dt,Z[1]=Bt,Z[2]=Zt,Z[3]=Re,Z[4]=ct,Z[5]=wt,Z[6]=Rt,Z[7]=Vt,Z[8]=rr,Z[9]=qt,Z[10]=Jt,Z[11]=or,Z[12]=gr,Z[13]=dr,Z[14]=ur,Z[15]=cr,Z[16]=mr,Z[17]=Dr,Z[18]=yr,$!==0&&(Z[19]=$,D.length++),D};function b(S,E,D){return new g().mulp(S,E,D)}function g(S,E){this.x=S,this.y=E}Math.imul||(c=m),n.prototype.mulTo=function(S,E){var D=this.length+S.length;return this.length===10&&S.length===10?c(this,S,E):D<63?m(this,S,E):D<1024?function(F,H,V){V.negative=H.negative^F.negative,V.length=F.length+H.length;for(var Q=0,K=0,Z=0;Z<V.length-1;Z++){var $=K;K=0;for(var re=67108863&Q,R=Math.min(Z,H.length-1),N=Math.max(0,Z-F.length+1);N<=R;N++){var U=Z-N,te=(0|F.words[U])*(0|H.words[N]),j=67108863&te;re=67108863&(j=j+re|0),K+=($=($=$+(te/67108864|0)|0)+(j>>>26)|0)>>>26,$&=67108863}V.words[Z]=re,Q=$,$=K}return Q!==0?V.words[Z]=Q:V.length--,V.strip()}(this,S,E):b(this,S,E)},g.prototype.makeRBT=function(S){for(var E=new Array(S),D=n.prototype._countBits(S)-1,F=0;F<S;F++)E[F]=this.revBin(F,D,S);return E},g.prototype.revBin=function(S,E,D){if(S===0||S===D-1)return S;for(var F=0,H=0;H<E;H++)F|=(1&S)<<E-H-1,S>>=1;return F},g.prototype.permute=function(S,E,D,F,H,V){for(var Q=0;Q<V;Q++)F[Q]=E[S[Q]],H[Q]=D[S[Q]]},g.prototype.transform=function(S,E,D,F,H,V){this.permute(V,S,E,D,F,H);for(var Q=1;Q<H;Q<<=1)for(var K=Q<<1,Z=Math.cos(2*Math.PI/K),$=Math.sin(2*Math.PI/K),re=0;re<H;re+=K)for(var R=Z,N=$,U=0;U<Q;U++){var te=D[re+U],j=F[re+U],Y=D[re+U+Q],J=F[re+U+Q],ee=R*Y-N*J;J=R*J+N*Y,Y=ee,D[re+U]=te+Y,F[re+U]=j+J,D[re+U+Q]=te-Y,F[re+U+Q]=j-J,U!==K&&(ee=Z*R-$*N,N=Z*N+$*R,R=ee)}},g.prototype.guessLen13b=function(S,E){var D=1|Math.max(E,S),F=1&D,H=0;for(D=D/2|0;D;D>>>=1)H++;return 1<<H+1+F},g.prototype.conjugate=function(S,E,D){if(!(D<=1))for(var F=0;F<D/2;F++){var H=S[F];S[F]=S[D-F-1],S[D-F-1]=H,H=E[F],E[F]=-E[D-F-1],E[D-F-1]=-H}},g.prototype.normalize13b=function(S,E){for(var D=0,F=0;F<E/2;F++){var H=8192*Math.round(S[2*F+1]/E)+Math.round(S[2*F]/E)+D;S[F]=67108863&H,D=H<67108864?0:H/67108864|0}return S},g.prototype.convert13b=function(S,E,D,F){for(var H=0,V=0;V<E;V++)H+=0|S[V],D[2*V]=8191&H,H>>>=13,D[2*V+1]=8191&H,H>>>=13;for(V=2*E;V<F;++V)D[V]=0;t(H===0),t((-8192&H)==0)},g.prototype.stub=function(S){for(var E=new Array(S),D=0;D<S;D++)E[D]=0;return E},g.prototype.mulp=function(S,E,D){var F=2*this.guessLen13b(S.length,E.length),H=this.makeRBT(F),V=this.stub(F),Q=new Array(F),K=new Array(F),Z=new Array(F),$=new Array(F),re=new Array(F),R=new Array(F),N=D.words;N.length=F,this.convert13b(S.words,S.length,Q,F),this.convert13b(E.words,E.length,$,F),this.transform(Q,V,K,Z,F,H),this.transform($,V,re,R,F,H);for(var U=0;U<F;U++){var te=K[U]*re[U]-Z[U]*R[U];Z[U]=K[U]*R[U]+Z[U]*re[U],K[U]=te}return this.conjugate(K,Z,F),this.transform(K,Z,N,V,F,H),this.conjugate(N,V,F),this.normalize13b(N,F),D.negative=S.negative^E.negative,D.length=S.length+E.length,D.strip()},n.prototype.mul=function(S){var E=new n(null);return E.words=new Array(this.length+S.length),this.mulTo(S,E)},n.prototype.mulf=function(S){var E=new n(null);return E.words=new Array(this.length+S.length),b(this,S,E)},n.prototype.imul=function(S){return this.clone().mulTo(S,this)},n.prototype.imuln=function(S){t(typeof S=="number"),t(S<67108864);for(var E=0,D=0;D<this.length;D++){var F=(0|this.words[D])*S,H=(67108863&F)+(67108863&E);E>>=26,E+=F/67108864|0,E+=H>>>26,this.words[D]=67108863&H}return E!==0&&(this.words[D]=E,this.length++),this},n.prototype.muln=function(S){return this.clone().imuln(S)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(S){var E=function(V){for(var Q=new Array(V.bitLength()),K=0;K<Q.length;K++){var Z=K/26|0,$=K%26;Q[K]=(V.words[Z]&1<<$)>>>$}return Q}(S);if(E.length===0)return new n(1);for(var D=this,F=0;F<E.length&&E[F]===0;F++,D=D.sqr());if(++F<E.length)for(var H=D.sqr();F<E.length;F++,H=H.sqr())E[F]!==0&&(D=D.mul(H));return D},n.prototype.iushln=function(S){t(typeof S=="number"&&S>=0);var E,D=S%26,F=(S-D)/26,H=67108863>>>26-D<<26-D;if(D!==0){var V=0;for(E=0;E<this.length;E++){var Q=this.words[E]&H,K=(0|this.words[E])-Q<<D;this.words[E]=K|V,V=Q>>>26-D}V&&(this.words[E]=V,this.length++)}if(F!==0){for(E=this.length-1;E>=0;E--)this.words[E+F]=this.words[E];for(E=0;E<F;E++)this.words[E]=0;this.length+=F}return this.strip()},n.prototype.ishln=function(S){return t(this.negative===0),this.iushln(S)},n.prototype.iushrn=function(S,E,D){var F;t(typeof S=="number"&&S>=0),F=E?(E-E%26)/26:0;var H=S%26,V=Math.min((S-H)/26,this.length),Q=67108863^67108863>>>H<<H,K=D;if(F-=V,F=Math.max(0,F),K){for(var Z=0;Z<V;Z++)K.words[Z]=this.words[Z];K.length=V}if(V!==0)if(this.length>V)for(this.length-=V,Z=0;Z<this.length;Z++)this.words[Z]=this.words[Z+V];else this.words[0]=0,this.length=1;var $=0;for(Z=this.length-1;Z>=0&&($!==0||Z>=F);Z--){var re=0|this.words[Z];this.words[Z]=$<<26-H|re>>>H,$=re&Q}return K&&$!==0&&(K.words[K.length++]=$),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(S,E,D){return t(this.negative===0),this.iushrn(S,E,D)},n.prototype.shln=function(S){return this.clone().ishln(S)},n.prototype.ushln=function(S){return this.clone().iushln(S)},n.prototype.shrn=function(S){return this.clone().ishrn(S)},n.prototype.ushrn=function(S){return this.clone().iushrn(S)},n.prototype.testn=function(S){t(typeof S=="number"&&S>=0);var E=S%26,D=(S-E)/26,F=1<<E;return!(this.length<=D)&&!!(this.words[D]&F)},n.prototype.imaskn=function(S){t(typeof S=="number"&&S>=0);var E=S%26,D=(S-E)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=D)return this;if(E!==0&&D++,this.length=Math.min(D,this.length),E!==0){var F=67108863^67108863>>>E<<E;this.words[this.length-1]&=F}return this.strip()},n.prototype.maskn=function(S){return this.clone().imaskn(S)},n.prototype.iaddn=function(S){return t(typeof S=="number"),t(S<67108864),S<0?this.isubn(-S):this.negative!==0?this.length===1&&(0|this.words[0])<S?(this.words[0]=S-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(S),this.negative=1,this):this._iaddn(S)},n.prototype._iaddn=function(S){this.words[0]+=S;for(var E=0;E<this.length&&this.words[E]>=67108864;E++)this.words[E]-=67108864,E===this.length-1?this.words[E+1]=1:this.words[E+1]++;return this.length=Math.max(this.length,E+1),this},n.prototype.isubn=function(S){if(t(typeof S=="number"),t(S<67108864),S<0)return this.iaddn(-S);if(this.negative!==0)return this.negative=0,this.iaddn(S),this.negative=1,this;if(this.words[0]-=S,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var E=0;E<this.length&&this.words[E]<0;E++)this.words[E]+=67108864,this.words[E+1]-=1;return this.strip()},n.prototype.addn=function(S){return this.clone().iaddn(S)},n.prototype.subn=function(S){return this.clone().isubn(S)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(S,E,D){var F,H,V=S.length+D;this._expand(V);var Q=0;for(F=0;F<S.length;F++){H=(0|this.words[F+D])+Q;var K=(0|S.words[F])*E;Q=((H-=67108863&K)>>26)-(K/67108864|0),this.words[F+D]=67108863&H}for(;F<this.length-D;F++)Q=(H=(0|this.words[F+D])+Q)>>26,this.words[F+D]=67108863&H;if(Q===0)return this.strip();for(t(Q===-1),Q=0,F=0;F<this.length;F++)Q=(H=-(0|this.words[F])+Q)>>26,this.words[F]=67108863&H;return this.negative=1,this.strip()},n.prototype._wordDiv=function(S,E){var D=(this.length,S.length),F=this.clone(),H=S,V=0|H.words[H.length-1];(D=26-this._countBits(V))!=0&&(H=H.ushln(D),F.iushln(D),V=0|H.words[H.length-1]);var Q,K=F.length-H.length;if(E!=="mod"){(Q=new n(null)).length=K+1,Q.words=new Array(Q.length);for(var Z=0;Z<Q.length;Z++)Q.words[Z]=0}var $=F.clone()._ishlnsubmul(H,1,K);$.negative===0&&(F=$,Q&&(Q.words[K]=1));for(var re=K-1;re>=0;re--){var R=67108864*(0|F.words[H.length+re])+(0|F.words[H.length+re-1]);for(R=Math.min(R/V|0,67108863),F._ishlnsubmul(H,R,re);F.negative!==0;)R--,F.negative=0,F._ishlnsubmul(H,1,re),F.isZero()||(F.negative^=1);Q&&(Q.words[re]=R)}return Q&&Q.strip(),F.strip(),E!=="div"&&D!==0&&F.iushrn(D),{div:Q||null,mod:F}},n.prototype.divmod=function(S,E,D){return t(!S.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:this.negative!==0&&S.negative===0?(V=this.neg().divmod(S,E),E!=="mod"&&(F=V.div.neg()),E!=="div"&&(H=V.mod.neg(),D&&H.negative!==0&&H.iadd(S)),{div:F,mod:H}):this.negative===0&&S.negative!==0?(V=this.divmod(S.neg(),E),E!=="mod"&&(F=V.div.neg()),{div:F,mod:V.mod}):(this.negative&S.negative)!=0?(V=this.neg().divmod(S.neg(),E),E!=="div"&&(H=V.mod.neg(),D&&H.negative!==0&&H.isub(S)),{div:V.div,mod:H}):S.length>this.length||this.cmp(S)<0?{div:new n(0),mod:this}:S.length===1?E==="div"?{div:this.divn(S.words[0]),mod:null}:E==="mod"?{div:null,mod:new n(this.modn(S.words[0]))}:{div:this.divn(S.words[0]),mod:new n(this.modn(S.words[0]))}:this._wordDiv(S,E);var F,H,V},n.prototype.div=function(S){return this.divmod(S,"div",!1).div},n.prototype.mod=function(S){return this.divmod(S,"mod",!1).mod},n.prototype.umod=function(S){return this.divmod(S,"mod",!0).mod},n.prototype.divRound=function(S){var E=this.divmod(S);if(E.mod.isZero())return E.div;var D=E.div.negative!==0?E.mod.isub(S):E.mod,F=S.ushrn(1),H=S.andln(1),V=D.cmp(F);return V<0||H===1&&V===0?E.div:E.div.negative!==0?E.div.isubn(1):E.div.iaddn(1)},n.prototype.modn=function(S){t(S<=67108863);for(var E=(1<<26)%S,D=0,F=this.length-1;F>=0;F--)D=(E*D+(0|this.words[F]))%S;return D},n.prototype.idivn=function(S){t(S<=67108863);for(var E=0,D=this.length-1;D>=0;D--){var F=(0|this.words[D])+67108864*E;this.words[D]=F/S|0,E=F%S}return this.strip()},n.prototype.divn=function(S){return this.clone().idivn(S)},n.prototype.egcd=function(S){t(S.negative===0),t(!S.isZero());var E=this,D=S.clone();E=E.negative!==0?E.umod(S):E.clone();for(var F=new n(1),H=new n(0),V=new n(0),Q=new n(1),K=0;E.isEven()&&D.isEven();)E.iushrn(1),D.iushrn(1),++K;for(var Z=D.clone(),$=E.clone();!E.isZero();){for(var re=0,R=1;(E.words[0]&R)==0&&re<26;++re,R<<=1);if(re>0)for(E.iushrn(re);re-- >0;)(F.isOdd()||H.isOdd())&&(F.iadd(Z),H.isub($)),F.iushrn(1),H.iushrn(1);for(var N=0,U=1;(D.words[0]&U)==0&&N<26;++N,U<<=1);if(N>0)for(D.iushrn(N);N-- >0;)(V.isOdd()||Q.isOdd())&&(V.iadd(Z),Q.isub($)),V.iushrn(1),Q.iushrn(1);E.cmp(D)>=0?(E.isub(D),F.isub(V),H.isub(Q)):(D.isub(E),V.isub(F),Q.isub(H))}return{a:V,b:Q,gcd:D.iushln(K)}},n.prototype._invmp=function(S){t(S.negative===0),t(!S.isZero());var E=this,D=S.clone();E=E.negative!==0?E.umod(S):E.clone();for(var F,H=new n(1),V=new n(0),Q=D.clone();E.cmpn(1)>0&&D.cmpn(1)>0;){for(var K=0,Z=1;(E.words[0]&Z)==0&&K<26;++K,Z<<=1);if(K>0)for(E.iushrn(K);K-- >0;)H.isOdd()&&H.iadd(Q),H.iushrn(1);for(var $=0,re=1;(D.words[0]&re)==0&&$<26;++$,re<<=1);if($>0)for(D.iushrn($);$-- >0;)V.isOdd()&&V.iadd(Q),V.iushrn(1);E.cmp(D)>=0?(E.isub(D),H.isub(V)):(D.isub(E),V.isub(H))}return(F=E.cmpn(1)===0?H:V).cmpn(0)<0&&F.iadd(S),F},n.prototype.gcd=function(S){if(this.isZero())return S.abs();if(S.isZero())return this.abs();var E=this.clone(),D=S.clone();E.negative=0,D.negative=0;for(var F=0;E.isEven()&&D.isEven();F++)E.iushrn(1),D.iushrn(1);for(;;){for(;E.isEven();)E.iushrn(1);for(;D.isEven();)D.iushrn(1);var H=E.cmp(D);if(H<0){var V=E;E=D,D=V}else if(H===0||D.cmpn(1)===0)break;E.isub(D)}return D.iushln(F)},n.prototype.invm=function(S){return this.egcd(S).a.umod(S)},n.prototype.isEven=function(){return(1&this.words[0])==0},n.prototype.isOdd=function(){return(1&this.words[0])==1},n.prototype.andln=function(S){return this.words[0]&S},n.prototype.bincn=function(S){t(typeof S=="number");var E=S%26,D=(S-E)/26,F=1<<E;if(this.length<=D)return this._expand(D+1),this.words[D]|=F,this;for(var H=F,V=D;H!==0&&V<this.length;V++){var Q=0|this.words[V];H=(Q+=H)>>>26,Q&=67108863,this.words[V]=Q}return H!==0&&(this.words[V]=H,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(S){var E,D=S<0;if(this.negative!==0&&!D)return-1;if(this.negative===0&&D)return 1;if(this.strip(),this.length>1)E=1;else{D&&(S=-S),t(S<=67108863,"Number is too big");var F=0|this.words[0];E=F===S?0:F<S?-1:1}return this.negative!==0?0|-E:E},n.prototype.cmp=function(S){if(this.negative!==0&&S.negative===0)return-1;if(this.negative===0&&S.negative!==0)return 1;var E=this.ucmp(S);return this.negative!==0?0|-E:E},n.prototype.ucmp=function(S){if(this.length>S.length)return 1;if(this.length<S.length)return-1;for(var E=0,D=this.length-1;D>=0;D--){var F=0|this.words[D],H=0|S.words[D];if(F!==H){F<H?E=-1:F>H&&(E=1);break}}return E},n.prototype.gtn=function(S){return this.cmpn(S)===1},n.prototype.gt=function(S){return this.cmp(S)===1},n.prototype.gten=function(S){return this.cmpn(S)>=0},n.prototype.gte=function(S){return this.cmp(S)>=0},n.prototype.ltn=function(S){return this.cmpn(S)===-1},n.prototype.lt=function(S){return this.cmp(S)===-1},n.prototype.lten=function(S){return this.cmpn(S)<=0},n.prototype.lte=function(S){return this.cmp(S)<=0},n.prototype.eqn=function(S){return this.cmpn(S)===0},n.prototype.eq=function(S){return this.cmp(S)===0},n.red=function(S){return new I(S)},n.prototype.toRed=function(S){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),S.convertTo(this)._forceRed(S)},n.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(S){return this.red=S,this},n.prototype.forceRed=function(S){return t(!this.red,"Already a number in reduction context"),this._forceRed(S)},n.prototype.redAdd=function(S){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,S)},n.prototype.redIAdd=function(S){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,S)},n.prototype.redSub=function(S){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,S)},n.prototype.redISub=function(S){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,S)},n.prototype.redShl=function(S){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,S)},n.prototype.redMul=function(S){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.mul(this,S)},n.prototype.redIMul=function(S){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.imul(this,S)},n.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(S){return t(this.red&&!S.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,S)};var w={k256:null,p224:null,p192:null,p25519:null};function _(S,E){this.name=S,this.p=new n(E,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function T(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function k(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function L(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(S){if(typeof S=="string"){var E=n._prime(S);this.m=E.p,this.prime=E}else t(S.gtn(1),"modulus must be greater than 1"),this.m=S,this.prime=null}function P(S){I.call(this,S),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var S=new n(null);return S.words=new Array(Math.ceil(this.n/13)),S},_.prototype.ireduce=function(S){var E,D=S;do this.split(D,this.tmp),E=(D=(D=this.imulK(D)).iadd(this.tmp)).bitLength();while(E>this.n);var F=E<this.n?-1:D.ucmp(this.p);return F===0?(D.words[0]=0,D.length=1):F>0?D.isub(this.p):D.strip!==void 0?D.strip():D._strip(),D},_.prototype.split=function(S,E){S.iushrn(this.n,0,E)},_.prototype.imulK=function(S){return S.imul(this.k)},i(T,_),T.prototype.split=function(S,E){for(var D=Math.min(S.length,9),F=0;F<D;F++)E.words[F]=S.words[F];if(E.length=D,S.length<=9)return S.words[0]=0,void(S.length=1);var H=S.words[9];for(E.words[E.length++]=4194303&H,F=10;F<S.length;F++){var V=0|S.words[F];S.words[F-10]=(4194303&V)<<4|H>>>22,H=V}H>>>=22,S.words[F-10]=H,H===0&&S.length>10?S.length-=10:S.length-=9},T.prototype.imulK=function(S){S.words[S.length]=0,S.words[S.length+1]=0,S.length+=2;for(var E=0,D=0;D<S.length;D++){var F=0|S.words[D];E+=977*F,S.words[D]=67108863&E,E=64*F+(E/67108864|0)}return S.words[S.length-1]===0&&(S.length--,S.words[S.length-1]===0&&S.length--),S},i(k,_),i(L,_),i(M,_),M.prototype.imulK=function(S){for(var E=0,D=0;D<S.length;D++){var F=19*(0|S.words[D])+E,H=67108863&F;F>>>=26,S.words[D]=H,E=F}return E!==0&&(S.words[S.length++]=E),S},n._prime=function(S){if(w[S])return w[S];var E;if(S==="k256")E=new T;else if(S==="p224")E=new k;else if(S==="p192")E=new L;else{if(S!=="p25519")throw new Error("Unknown prime "+S);E=new M}return w[S]=E,E},I.prototype._verify1=function(S){t(S.negative===0,"red works only with positives"),t(S.red,"red works only with red numbers")},I.prototype._verify2=function(S,E){t((S.negative|E.negative)==0,"red works only with positives"),t(S.red&&S.red===E.red,"red works only with red numbers")},I.prototype.imod=function(S){return this.prime?this.prime.ireduce(S)._forceRed(this):S.umod(this.m)._forceRed(this)},I.prototype.neg=function(S){return S.isZero()?S.clone():this.m.sub(S)._forceRed(this)},I.prototype.add=function(S,E){this._verify2(S,E);var D=S.add(E);return D.cmp(this.m)>=0&&D.isub(this.m),D._forceRed(this)},I.prototype.iadd=function(S,E){this._verify2(S,E);var D=S.iadd(E);return D.cmp(this.m)>=0&&D.isub(this.m),D},I.prototype.sub=function(S,E){this._verify2(S,E);var D=S.sub(E);return D.cmpn(0)<0&&D.iadd(this.m),D._forceRed(this)},I.prototype.isub=function(S,E){this._verify2(S,E);var D=S.isub(E);return D.cmpn(0)<0&&D.iadd(this.m),D},I.prototype.shl=function(S,E){return this._verify1(S),this.imod(S.ushln(E))},I.prototype.imul=function(S,E){return this._verify2(S,E),this.imod(S.imul(E))},I.prototype.mul=function(S,E){return this._verify2(S,E),this.imod(S.mul(E))},I.prototype.isqr=function(S){return this.imul(S,S.clone())},I.prototype.sqr=function(S){return this.mul(S,S)},I.prototype.sqrt=function(S){if(S.isZero())return S.clone();var E=this.m.andln(3);if(t(E%2==1),E===3){var D=this.m.add(new n(1)).iushrn(2);return this.pow(S,D)}for(var F=this.m.subn(1),H=0;!F.isZero()&&F.andln(1)===0;)H++,F.iushrn(1);t(!F.isZero());var V=new n(1).toRed(this),Q=V.redNeg(),K=this.m.subn(1).iushrn(1),Z=this.m.bitLength();for(Z=new n(2*Z*Z).toRed(this);this.pow(Z,K).cmp(Q)!==0;)Z.redIAdd(Q);for(var $=this.pow(Z,F),re=this.pow(S,F.addn(1).iushrn(1)),R=this.pow(S,F),N=H;R.cmp(V)!==0;){for(var U=R,te=0;U.cmp(V)!==0;te++)U=U.redSqr();t(te<N);var j=this.pow($,new n(1).iushln(N-te-1));re=re.redMul(j),$=j.redSqr(),R=R.redMul($),N=te}return re},I.prototype.invm=function(S){var E=S._invmp(this.m);return E.negative!==0?(E.negative=0,this.imod(E).redNeg()):this.imod(E)},I.prototype.pow=function(S,E){if(E.isZero())return new n(1).toRed(this);if(E.cmpn(1)===0)return S.clone();var D=new Array(16);D[0]=new n(1).toRed(this),D[1]=S;for(var F=2;F<D.length;F++)D[F]=this.mul(D[F-1],S);var H=D[0],V=0,Q=0,K=E.bitLength()%26;for(K===0&&(K=26),F=E.length-1;F>=0;F--){for(var Z=E.words[F],$=K-1;$>=0;$--){var re=Z>>$&1;H!==D[0]&&(H=this.sqr(H)),re!==0||V!==0?(V<<=1,V|=re,(++Q==4||F===0&&$===0)&&(H=this.mul(H,D[V]),Q=0,V=0)):Q=0}K=26}return H},I.prototype.convertTo=function(S){var E=S.umod(this.m);return E===S?E.clone():E},I.prototype.convertFrom=function(S){var E=S.clone();return E.red=null,E},n.mont=function(S){return new P(S)},i(P,I),P.prototype.convertTo=function(S){return this.imod(S.ushln(this.shift))},P.prototype.convertFrom=function(S){var E=this.imod(S.mul(this.rinv));return E.red=null,E},P.prototype.imul=function(S,E){if(S.isZero()||E.isZero())return S.words[0]=0,S.length=1,S;var D=S.imul(E),F=D.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=D.isub(F).iushrn(this.shift),V=H;return H.cmp(this.m)>=0?V=H.isub(this.m):H.cmpn(0)<0&&(V=H.iadd(this.m)),V._forceRed(this)},P.prototype.mul=function(S,E){if(S.isZero()||E.isZero())return new n(0)._forceRed(this);var D=S.mul(E),F=D.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=D.isub(F).iushrn(this.shift),V=H;return H.cmp(this.m)>=0?V=H.isub(this.m):H.cmpn(0)<0&&(V=H.iadd(this.m)),V._forceRed(this)},P.prototype.invm=function(S){return this.imod(S._invmp(this.m).mul(this.r2))._forceRed(this)}})(x===void 0||x,this)},{buffer:2}],34:[function(p,x,y){x.exports=function(e){var r,t,i,n=e.length,h=0;for(r=0;r<n;++r)h+=e[r].length;var s=new Array(h),a=0;for(r=0;r<n;++r){var l=e[r],f=l.length;for(t=0;t<f;++t){var d=s[a++]=new Array(f-1),v=0;for(i=0;i<f;++i)i!==t&&(d[v++]=l[i]);if(1&t){var m=d[1];d[1]=d[0],d[0]=m}}}return s}},{}],35:[function(p,x,y){x.exports=function(d,v,m){switch(arguments.length){case 1:return l(d);case 2:return typeof v=="function"?s(d,d,v,!0):f(d,v);case 3:return s(d,v,m,!1);default:throw new Error("box-intersect: Invalid arguments")}};var e,r=p("typedarray-pool"),t=p("./lib/sweep"),i=p("./lib/intersect");function n(d,v){for(var m=0;m<d;++m)if(!(v[m]<=v[m+d]))return!0;return!1}function h(d,v,m,c){for(var b=0,g=0,w=0,_=d.length;w<_;++w){var T=d[w];if(!n(v,T)){for(var k=0;k<2*v;++k)m[b++]=T[k];c[g++]=w}}return g}function s(d,v,m,c){var b=d.length,g=v.length;if(!(b<=0||g<=0)){var w=d[0].length>>>1;if(!(w<=0)){var _,T=r.mallocDouble(2*w*b),k=r.mallocInt32(b);if((b=h(d,w,T,k))>0){if(w===1&&c)t.init(b),_=t.sweepComplete(w,m,0,b,T,k,0,b,T,k);else{var L=r.mallocDouble(2*w*g),M=r.mallocInt32(g);(g=h(v,w,L,M))>0&&(t.init(b+g),_=w===1?t.sweepBipartite(w,m,0,b,T,k,0,g,L,M):i(w,m,c,b,T,k,g,L,M),r.free(L),r.free(M))}r.free(T),r.free(k)}return _}}}function a(d,v){e.push([d,v])}function l(d){return e=[],s(d,d,a,!0),e}function f(d,v){return e=[],s(d,v,a,!1),e}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(p,x,y){function e(r){return r?function(t,i,n,h,s,a,l,f,d,v,m){return s-h>d-f?function(c,b,g,w,_,T,k,L,M,I,P){for(var S=2*c,E=w,D=S*w;E<_;++E,D+=S){var F=T[b+D],H=T[b+D+c],V=k[E];e:for(var Q=L,K=S*L;Q<M;++Q,K+=S){var Z=I[b+K],$=I[b+K+c],re=P[Q];if(!($<F||H<Z)){for(var R=b+1;R<c;++R){var N=T[R+D],U=T[R+c+D],te=I[R+K],j=I[R+c+K];if(U<te||j<N)continue e}var Y=g(V,re);if(Y!==void 0)return Y}}}}(t,i,n,h,s,a,l,f,d,v,m):function(c,b,g,w,_,T,k,L,M,I,P){for(var S=2*c,E=L,D=S*L;E<M;++E,D+=S){var F=I[b+D],H=I[b+D+c],V=P[E];e:for(var Q=w,K=S*w;Q<_;++Q,K+=S){var Z=T[b+K],$=T[b+K+c],re=k[Q];if(!(H<Z||$<F)){for(var R=b+1;R<c;++R){var N=T[R+K],U=T[R+c+K],te=I[R+D],j=I[R+c+D];if(U<te||j<N)continue e}var Y=g(re,V);if(Y!==void 0)return Y}}}}(t,i,n,h,s,a,l,f,d,v,m)}:function(t,i,n,h,s,a,l,f,d,v,m,c){return a-s>v-d?h?function(b,g,w,_,T,k,L,M,I,P,S){for(var E=2*b,D=_,F=E*_;D<T;++D,F+=E){var H=k[g+F],V=k[g+F+b],Q=L[D];e:for(var K=M,Z=E*M;K<I;++K,Z+=E){var $=P[g+Z],re=S[K];if(!($<=H||V<$)){for(var R=g+1;R<b;++R){var N=k[R+F],U=k[R+b+F],te=P[R+Z],j=P[R+b+Z];if(U<te||j<N)continue e}var Y=w(re,Q);if(Y!==void 0)return Y}}}}(t,i,n,s,a,l,f,d,v,m,c):function(b,g,w,_,T,k,L,M,I,P,S){for(var E=2*b,D=_,F=E*_;D<T;++D,F+=E){var H=k[g+F],V=k[g+F+b],Q=L[D];e:for(var K=M,Z=E*M;K<I;++K,Z+=E){var $=P[g+Z],re=S[K];if(!($<H||V<$)){for(var R=g+1;R<b;++R){var N=k[R+F],U=k[R+b+F],te=P[R+Z],j=P[R+b+Z];if(U<te||j<N)continue e}var Y=w(Q,re);if(Y!==void 0)return Y}}}}(t,i,n,s,a,l,f,d,v,m,c):h?function(b,g,w,_,T,k,L,M,I,P,S){for(var E=2*b,D=M,F=E*M;D<I;++D,F+=E){var H=P[g+F],V=S[D];e:for(var Q=_,K=E*_;Q<T;++Q,K+=E){var Z=k[g+K],$=k[g+K+b],re=L[Q];if(!(H<=Z||$<H)){for(var R=g+1;R<b;++R){var N=k[R+K],U=k[R+b+K],te=P[R+F],j=P[R+b+F];if(U<te||j<N)continue e}var Y=w(V,re);if(Y!==void 0)return Y}}}}(t,i,n,s,a,l,f,d,v,m,c):function(b,g,w,_,T,k,L,M,I,P,S){for(var E=2*b,D=M,F=E*M;D<I;++D,F+=E){var H=P[g+F],V=S[D];e:for(var Q=_,K=E*_;Q<T;++Q,K+=E){var Z=k[g+K],$=k[g+K+b],re=L[Q];if(!(H<Z||$<H)){for(var R=g+1;R<b;++R){var N=k[R+K],U=k[R+b+K],te=P[R+F],j=P[R+b+F];if(U<te||j<N)continue e}var Y=w(re,V);if(Y!==void 0)return Y}}}}(t,i,n,s,a,l,f,d,v,m,c)}}y.partial=e(!1),y.full=e(!0)},{}],37:[function(p,x,y){x.exports=function(k,L,M,I,P,S,E,D,F){(function(ke,Te){var Me=8*r.log2(Te+1)*(ke+1)|0,Oe=r.nextPow2(6*Me);b.length<Oe&&(e.free(b),b=e.mallocInt32(Oe));var Fe=r.nextPow2(2*Me);g.length<Fe&&(e.free(g),g=e.mallocDouble(Fe))})(k,I+E);var H,V=0,Q=2*k;for(w(V++,0,0,I,0,E,M?16:0,-1/0,1/0),M||w(V++,0,0,E,0,I,1,-1/0,1/0);V>0;){var K=6*(V-=1),Z=b[K],$=b[K+1],re=b[K+2],R=b[K+3],N=b[K+4],U=b[K+5],te=2*V,j=g[te],Y=g[te+1],J=1&U,ee=!!(16&U),ne=P,se=S,oe=D,he=F;if(J&&(ne=D,se=F,oe=P,he=S),!(2&U&&(re=d(k,Z,$,re,ne,se,Y),$>=re)||4&U&&($=v(k,Z,$,re,ne,se,j))>=re)){var le=re-$,de=N-R;if(ee){if(k*le*(le+de)<1<<22){if((H=h.scanComplete(k,Z,L,$,re,ne,se,R,N,oe,he))!==void 0)return H;continue}}else{if(k*Math.min(le,de)<128){if((H=i(k,Z,L,J,$,re,ne,se,R,N,oe,he))!==void 0)return H;continue}if(k*le*de<1<<22){if((H=h.scanBipartite(k,Z,L,J,$,re,ne,se,R,N,oe,he))!==void 0)return H;continue}}var xe=l(k,Z,$,re,ne,se,j,Y);if($<xe)if(k*(xe-$)<128){if((H=n(k,Z+1,L,$,xe,ne,se,R,N,oe,he))!==void 0)return H}else if(Z===k-2){if((H=J?h.sweepBipartite(k,L,R,N,oe,he,$,xe,ne,se):h.sweepBipartite(k,L,$,xe,ne,se,R,N,oe,he))!==void 0)return H}else w(V++,Z+1,$,xe,R,N,J,-1/0,1/0),w(V++,Z+1,R,N,$,xe,1^J,-1/0,1/0);if(xe<re){var we=s(k,Z,R,N,oe,he),be=oe[Q*we+Z],Ae=f(k,Z,we,N,oe,he,be);if(Ae<N&&w(V++,Z,xe,re,Ae,N,(4|J)+(ee?16:0),be,Y),R<we&&w(V++,Z,xe,re,R,we,(2|J)+(ee?16:0),j,be),we+1===Ae){if((H=ee?T(k,Z,L,xe,re,ne,se,we,oe,he[we]):_(k,Z,L,J,xe,re,ne,se,we,oe,he[we]))!==void 0)return H}else if(we<Ae){var fe;if(ee){if(fe=m(k,Z,xe,re,ne,se,be),xe<fe){var me=f(k,Z,xe,fe,ne,se,be);if(Z===k-2){if(xe<me&&(H=h.sweepComplete(k,L,xe,me,ne,se,we,Ae,oe,he))!==void 0||me<fe&&(H=h.sweepBipartite(k,L,me,fe,ne,se,we,Ae,oe,he))!==void 0)return H}else xe<me&&w(V++,Z+1,xe,me,we,Ae,16,-1/0,1/0),me<fe&&(w(V++,Z+1,me,fe,we,Ae,0,-1/0,1/0),w(V++,Z+1,we,Ae,me,fe,1,-1/0,1/0))}}else fe=J?c(k,Z,xe,re,ne,se,be):m(k,Z,xe,re,ne,se,be),xe<fe&&(Z===k-2?H=J?h.sweepBipartite(k,L,we,Ae,oe,he,xe,fe,ne,se):h.sweepBipartite(k,L,xe,fe,ne,se,we,Ae,oe,he):(w(V++,Z+1,xe,fe,we,Ae,J,-1/0,1/0),w(V++,Z+1,we,Ae,xe,fe,1^J,-1/0,1/0)))}}}}};var e=p("typedarray-pool"),r=p("bit-twiddle"),t=p("./brute"),i=t.partial,n=t.full,h=p("./sweep"),s=p("./median"),a=p("./partition"),l=a("!(lo>=p0)&&!(p1>=hi)"),f=a("lo===p0"),d=a("lo<p0"),v=a("hi<=p0"),m=a("lo<=p0&&p0<=hi"),c=a("lo<p0&&p0<=hi"),b=e.mallocInt32(1024),g=e.mallocDouble(1024);function w(k,L,M,I,P,S,E,D,F){var H=6*k;b[H]=L,b[H+1]=M,b[H+2]=I,b[H+3]=P,b[H+4]=S,b[H+5]=E;var V=2*k;g[V]=D,g[V+1]=F}function _(k,L,M,I,P,S,E,D,F,H,V){var Q=2*k,K=F*Q,Z=H[K+L];e:for(var $=P,re=P*Q;$<S;++$,re+=Q){var R=E[re+L],N=E[re+L+k];if(!(Z<R||N<Z)&&(!I||Z!==R)){for(var U,te=D[$],j=L+1;j<k;++j){R=E[re+j],N=E[re+j+k];var Y=H[K+j],J=H[K+j+k];if(N<Y||J<R)continue e}if((U=I?M(V,te):M(te,V))!==void 0)return U}}}function T(k,L,M,I,P,S,E,D,F,H){var V=2*k,Q=D*V,K=F[Q+L];e:for(var Z=I,$=I*V;Z<P;++Z,$+=V){var re=E[Z];if(re!==H){var R=S[$+L],N=S[$+L+k];if(!(K<R||N<K)){for(var U=L+1;U<k;++U){R=S[$+U],N=S[$+U+k];var te=F[Q+U],j=F[Q+U+k];if(N<te||j<R)continue e}var Y=M(re,H);if(Y!==void 0)return Y}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(p,x,y){x.exports=function(t,i,n,h,s,a){if(h<=n+1)return n;for(var l=n,f=h,d=h+n>>>1,v=2*t,m=d,c=s[v*d+i];l<f;){if(f-l<8){r(t,i,l,f,s,a),c=s[v*d+i];break}var b=f-l,g=Math.random()*b+l|0,w=s[v*g+i],_=Math.random()*b+l|0,T=s[v*_+i],k=Math.random()*b+l|0,L=s[v*k+i];w<=T?L>=T?(m=_,c=T):w>=L?(m=g,c=w):(m=k,c=L):T>=L?(m=_,c=T):L>=w?(m=g,c=w):(m=k,c=L);for(var M=v*(f-1),I=v*m,P=0;P<v;++P,++M,++I){var S=s[M];s[M]=s[I],s[I]=S}var E=a[f-1];for(a[f-1]=a[m],a[m]=E,m=e(t,i,l,f-1,s,a,c),M=v*(f-1),I=v*m,P=0;P<v;++P,++M,++I)S=s[M],s[M]=s[I],s[I]=S;if(E=a[f-1],a[f-1]=a[m],a[m]=E,d<m){for(f=m-1;l<f&&s[v*(f-1)+i]===c;)f-=1;f+=1}else{if(!(m<d))break;for(l=m+1;l<f&&s[v*l+i]===c;)l+=1}}return e(t,i,n,d,s,a,s[v*d+i])};var e=p("./partition")("lo<p0");function r(t,i,n,h,s,a){for(var l=2*t,f=l*(n+1)+i,d=n+1;d<h;++d,f+=l)for(var v=s[f],m=d,c=l*(d-1);m>n&&s[c+i]>v;--m,c-=l){for(var b=c,g=c+l,w=0;w<l;++w,++b,++g){var _=s[b];s[b]=s[g],s[g]=_}var T=a[m];a[m]=a[m-1],a[m-1]=T}}},{"./partition":39}],39:[function(p,x,y){x.exports=function(r){return e[r]};var e={"lo===p0":function(r,t,i,n,h,s,a){for(var l=2*r,f=l*i,d=f,v=i,m=t,c=i;n>c;++c,f+=l)if(h[f+m]===a)if(v===c)v+=1,d+=l;else{for(var b=0;l>b;++b){var g=h[f+b];h[f+b]=h[d],h[d++]=g}var w=s[c];s[c]=s[v],s[v++]=w}return v},"lo<p0":function(r,t,i,n,h,s,a){for(var l=2*r,f=l*i,d=f,v=i,m=t,c=i;n>c;++c,f+=l)if(h[f+m]<a)if(v===c)v+=1,d+=l;else{for(var b=0;l>b;++b){var g=h[f+b];h[f+b]=h[d],h[d++]=g}var w=s[c];s[c]=s[v],s[v++]=w}return v},"lo<=p0":function(r,t,i,n,h,s,a){for(var l=2*r,f=l*i,d=f,v=i,m=r+t,c=i;n>c;++c,f+=l)if(h[f+m]<=a)if(v===c)v+=1,d+=l;else{for(var b=0;l>b;++b){var g=h[f+b];h[f+b]=h[d],h[d++]=g}var w=s[c];s[c]=s[v],s[v++]=w}return v},"hi<=p0":function(r,t,i,n,h,s,a){for(var l=2*r,f=l*i,d=f,v=i,m=r+t,c=i;n>c;++c,f+=l)if(h[f+m]<=a)if(v===c)v+=1,d+=l;else{for(var b=0;l>b;++b){var g=h[f+b];h[f+b]=h[d],h[d++]=g}var w=s[c];s[c]=s[v],s[v++]=w}return v},"lo<p0&&p0<=hi":function(r,t,i,n,h,s,a){for(var l=2*r,f=l*i,d=f,v=i,m=t,c=r+t,b=i;n>b;++b,f+=l){var g=h[f+m],w=h[f+c];if(g<a&&a<=w)if(v===b)v+=1,d+=l;else{for(var _=0;l>_;++_){var T=h[f+_];h[f+_]=h[d],h[d++]=T}var k=s[b];s[b]=s[v],s[v++]=k}}return v},"lo<=p0&&p0<=hi":function(r,t,i,n,h,s,a){for(var l=2*r,f=l*i,d=f,v=i,m=t,c=r+t,b=i;n>b;++b,f+=l){var g=h[f+m],w=h[f+c];if(g<=a&&a<=w)if(v===b)v+=1,d+=l;else{for(var _=0;l>_;++_){var T=h[f+_];h[f+_]=h[d],h[d++]=T}var k=s[b];s[b]=s[v],s[v++]=k}}return v},"!(lo>=p0)&&!(p1>=hi)":function(r,t,i,n,h,s,a,l){for(var f=2*r,d=f*i,v=d,m=i,c=t,b=r+t,g=i;n>g;++g,d+=f){var w=h[d+c],_=h[d+b];if(!(w>=a||l>=_))if(m===g)m+=1,v+=f;else{for(var T=0;f>T;++T){var k=h[d+T];h[d+T]=h[v],h[v++]=k}var L=s[g];s[g]=s[m],s[m++]=L}}return m}}},{}],40:[function(p,x,y){x.exports=function(a,l){l<=128?e(0,l-1,a):function f(d,v,m){var c=(v-d+1)/6|0,b=d+c,g=v-c,w=d+v>>1,_=w-c,T=w+c,k=b,L=_,M=w,I=T,P=g,S=d+1,E=v-1,D=0;h(k,L,m)&&(D=k,k=L,L=D),h(I,P,m)&&(D=I,I=P,P=D),h(k,M,m)&&(D=k,k=M,M=D),h(L,M,m)&&(D=L,L=M,M=D),h(k,I,m)&&(D=k,k=I,I=D),h(M,I,m)&&(D=M,M=I,I=D),h(L,P,m)&&(D=L,L=P,P=D),h(L,M,m)&&(D=L,L=M,M=D),h(I,P,m)&&(D=I,I=P,P=D);for(var F=m[2*L],H=m[2*L+1],V=m[2*I],Q=m[2*I+1],K=2*k,Z=2*M,$=2*P,re=2*b,R=2*w,N=2*g,U=0;U<2;++U){var te=m[K+U],j=m[Z+U],Y=m[$+U];m[re+U]=te,m[R+U]=j,m[N+U]=Y}t(_,d,m),t(T,v,m);for(var J=S;J<=E;++J)if(s(J,F,H,m))J!==S&&r(J,S,m),++S;else if(!s(J,V,Q,m))for(;;){if(s(E,V,Q,m)){s(E,F,H,m)?(i(J,S,E,m),++S,--E):(r(J,E,m),--E);break}if(--E<J)break}n(d,S-1,F,H,m),n(v,E+1,V,Q,m),S-2-d<=32?e(d,S-2,m):f(d,S-2,m),v-(E+2)<=32?e(E+2,v,m):f(E+2,v,m),E-S<=32?e(S,E,m):f(S,E,m)}(0,l-1,a)};function e(a,l,f){for(var d=2*(a+1),v=a+1;v<=l;++v){for(var m=f[d++],c=f[d++],b=v,g=d-2;b-- >a;){var w=f[g-2],_=f[g-1];if(w<m||w===m&&_<c)break;f[g]=w,f[g+1]=_,g-=2}f[g]=m,f[g+1]=c}}function r(a,l,f){l*=2;var d=f[a*=2],v=f[a+1];f[a]=f[l],f[a+1]=f[l+1],f[l]=d,f[l+1]=v}function t(a,l,f){l*=2,f[a*=2]=f[l],f[a+1]=f[l+1]}function i(a,l,f,d){l*=2,f*=2;var v=d[a*=2],m=d[a+1];d[a]=d[l],d[a+1]=d[l+1],d[l]=d[f],d[l+1]=d[f+1],d[f]=v,d[f+1]=m}function n(a,l,f,d,v){l*=2,v[a*=2]=v[l],v[l]=f,v[a+1]=v[l+1],v[l+1]=d}function h(a,l,f){l*=2;var d=f[a*=2],v=f[l];return!(d<v)&&(d!==v||f[a+1]>f[l+1])}function s(a,l,f,d){var v=d[a*=2];return v<l||v===l&&d[a+1]<f}},{}],41:[function(p,x,y){x.exports={init:function(m){var c=r.nextPow2(m);i.length<c&&(e.free(i),i=e.mallocInt32(c)),n.length<c&&(e.free(n),n=e.mallocInt32(c)),h.length<c&&(e.free(h),h=e.mallocInt32(c)),s.length<c&&(e.free(s),s=e.mallocInt32(c)),a.length<c&&(e.free(a),a=e.mallocInt32(c)),l.length<c&&(e.free(l),l=e.mallocInt32(c));var b=8*c;f.length<b&&(e.free(f),f=e.mallocDouble(b))},sweepBipartite:function(m,c,b,g,w,_,T,k,L,M){for(var I=0,P=2*m,S=m-1,E=P-1,D=b;D<g;++D){var F=_[D],H=P*D;f[I++]=w[H+S],f[I++]=-(F+1),f[I++]=w[H+E],f[I++]=F}for(D=T;D<k;++D){F=M[D]+(1<<28);var V=P*D;f[I++]=L[V+S],f[I++]=-F,f[I++]=L[V+E],f[I++]=F}var Q=I>>>1;t(f,Q);var K=0,Z=0;for(D=0;D<Q;++D){var $=0|f[2*D+1];if($>=1<<28)d(h,s,Z--,$=$-(1<<28)|0);else if($>=0)d(i,n,K--,$);else if($<=-(1<<28)){$=-$-(1<<28)|0;for(var re=0;re<K;++re)if((R=c(i[re],$))!==void 0)return R;v(h,s,Z++,$)}else{for($=-$-1|0,re=0;re<Z;++re){var R;if((R=c($,h[re]))!==void 0)return R}v(i,n,K++,$)}}},sweepComplete:function(m,c,b,g,w,_,T,k,L,M){for(var I=0,P=2*m,S=m-1,E=P-1,D=b;D<g;++D){var F=_[D]+1<<1,H=P*D;f[I++]=w[H+S],f[I++]=-F,f[I++]=w[H+E],f[I++]=F}for(D=T;D<k;++D){F=M[D]+1<<1;var V=P*D;f[I++]=L[V+S],f[I++]=1|-F,f[I++]=L[V+E],f[I++]=1|F}var Q=I>>>1;t(f,Q);var K=0,Z=0,$=0;for(D=0;D<Q;++D){var re=0|f[2*D+1],R=1&re;if(D<Q-1&&re>>1==f[2*D+3]>>1&&(R=2,D+=1),re<0){for(var N=-(re>>1)-1,U=0;U<$;++U)if((te=c(a[U],N))!==void 0)return te;if(R!==0){for(U=0;U<K;++U)if((te=c(i[U],N))!==void 0)return te}if(R!==1)for(U=0;U<Z;++U){var te;if((te=c(h[U],N))!==void 0)return te}R===0?v(i,n,K++,N):R===1?v(h,s,Z++,N):R===2&&v(a,l,$++,N)}else N=(re>>1)-1,R===0?d(i,n,K--,N):R===1?d(h,s,Z--,N):R===2&&d(a,l,$--,N)}},scanBipartite:function(m,c,b,g,w,_,T,k,L,M,I,P){var S=0,E=2*m,D=c,F=c+m,H=1,V=1;g?V=1<<28:H=1<<28;for(var Q=w;Q<_;++Q){var K=Q+H,Z=E*Q;f[S++]=T[Z+D],f[S++]=-K,f[S++]=T[Z+F],f[S++]=K}for(Q=L;Q<M;++Q){K=Q+V;var $=E*Q;f[S++]=I[$+D],f[S++]=-K}var re=S>>>1;t(f,re);var R=0;for(Q=0;Q<re;++Q){var N=0|f[2*Q+1];if(N<0){var U=!1;if((K=-N)>=1<<28?(U=!g,K-=1<<28):(U=!!g,K-=1),U)v(i,n,R++,K);else{var te=P[K],j=E*K,Y=I[j+c+1],J=I[j+c+1+m];e:for(var ee=0;ee<R;++ee){var ne=i[ee],se=E*ne;if(!(J<T[se+c+1]||T[se+c+1+m]<Y)){for(var oe=c+2;oe<m;++oe)if(I[j+oe+m]<T[se+oe]||T[se+oe+m]<I[j+oe])continue e;var he,le=k[ne];if((he=g?b(te,le):b(le,te))!==void 0)return he}}}}else d(i,n,R--,N-H)}},scanComplete:function(m,c,b,g,w,_,T,k,L,M,I){for(var P=0,S=2*m,E=c,D=c+m,F=g;F<w;++F){var H=F+(1<<28),V=S*F;f[P++]=_[V+E],f[P++]=-H,f[P++]=_[V+D],f[P++]=H}for(F=k;F<L;++F){H=F+1;var Q=S*F;f[P++]=M[Q+E],f[P++]=-H}var K=P>>>1;t(f,K);var Z=0;for(F=0;F<K;++F){var $=0|f[2*F+1];if($<0)if((H=-$)>=1<<28)i[Z++]=H-(1<<28);else{var re=I[H-=1],R=S*H,N=M[R+c+1],U=M[R+c+1+m];e:for(var te=0;te<Z;++te){var j=i[te],Y=T[j];if(Y===re)break;var J=S*j;if(!(U<_[J+c+1]||_[J+c+1+m]<N)){for(var ee=c+2;ee<m;++ee)if(M[R+ee+m]<_[J+ee]||_[J+ee+m]<M[R+ee])continue e;var ne=b(Y,re);if(ne!==void 0)return ne}}}else{for(H=$-(1<<28),te=Z-1;te>=0;--te)if(i[te]===H){for(ee=te+1;ee<Z;++ee)i[ee-1]=i[ee];break}--Z}}}};var e=p("typedarray-pool"),r=p("bit-twiddle"),t=p("./sort"),i=e.mallocInt32(1024),n=e.mallocInt32(1024),h=e.mallocInt32(1024),s=e.mallocInt32(1024),a=e.mallocInt32(1024),l=e.mallocInt32(1024),f=e.mallocDouble(8192);function d(m,c,b,g){var w=c[g],_=m[b-1];m[w]=_,c[_]=w}function v(m,c,b,g){m[b]=g,c[g]=b}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(p,x,y){var e=p("./lib/monotone"),r=p("./lib/triangulation"),t=p("./lib/delaunay"),i=p("./lib/filter");function n(a){return[Math.min(a[0],a[1]),Math.max(a[0],a[1])]}function h(a,l){return a[0]-l[0]||a[1]-l[1]}function s(a,l,f){return l in a?a[l]:f}x.exports=function(a,l,f){Array.isArray(l)?(f=f||{},l=l||[]):(f=l||{},l=[]);var d=!!s(f,"delaunay",!0),v=!!s(f,"interior",!0),m=!!s(f,"exterior",!0),c=!!s(f,"infinity",!1);if(!v&&!m||a.length===0)return[];var b=e(a,l);if(d||v!==m||c){for(var g=r(a.length,function(T){return T.map(n).sort(h)}(l)),w=0;w<b.length;++w){var _=b[w];g.addTriangle(_[0],_[1],_[2])}return d&&t(a,g),m?v?c?i(g,0,c):g.cells():i(g,1,c):i(g,-1)}return b}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(p,x,y){var e=p("robust-in-sphere")[4];p("binary-search-bounds");function r(t,i,n,h,s,a){var l=i.opposite(h,s);if(!(l<0)){if(s<h){var f=h;h=s,s=f,f=a,a=l,l=f}i.isConstraint(h,s)||e(t[h],t[s],t[a],t[l])<0&&n.push(h,s)}}x.exports=function(t,i){for(var n=[],h=t.length,s=i.stars,a=0;a<h;++a)for(var l=s[a],f=1;f<l.length;f+=2)if(!((c=l[f])<a)&&!i.isConstraint(a,c)){for(var d=l[f-1],v=-1,m=1;m<l.length;m+=2)if(l[m-1]===c){v=l[m];break}v<0||e(t[a],t[c],t[d],t[v])<0&&n.push(a,c)}for(;n.length>0;){for(var c=n.pop(),b=(a=n.pop(),d=-1,v=-1,l=s[a],1);b<l.length;b+=2){var g=l[b-1],w=l[b];g===c?v=w:w===c&&(d=g)}d<0||v<0||e(t[a],t[c],t[d],t[v])>=0||(i.flip(a,c),r(t,i,n,d,a,v),r(t,i,n,a,v,d),r(t,i,n,v,c,d),r(t,i,n,c,d,v))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(p,x,y){var e,r=p("binary-search-bounds");function t(n,h,s,a,l,f,d){this.cells=n,this.neighbor=h,this.flags=a,this.constraint=s,this.active=l,this.next=f,this.boundary=d}function i(n,h){return n[0]-h[0]||n[1]-h[1]||n[2]-h[2]}x.exports=function(n,h,s){var a=function(L,M){for(var I=L.cells(),P=I.length,S=0;S<P;++S){var E=(R=I[S])[0],D=R[1],F=R[2];D<F?D<E&&(R[0]=D,R[1]=F,R[2]=E):F<E&&(R[0]=F,R[1]=E,R[2]=D)}I.sort(i);var H=new Array(P);for(S=0;S<H.length;++S)H[S]=0;var V=[],Q=[],K=new Array(3*P),Z=new Array(3*P),$=null;M&&($=[]);var re=new t(I,K,Z,H,V,Q,$);for(S=0;S<P;++S)for(var R=I[S],N=0;N<3;++N){E=R[N],D=R[(N+1)%3];var U=K[3*S+N]=re.locate(D,E,L.opposite(D,E)),te=Z[3*S+N]=L.isConstraint(E,D);U<0&&(te?Q.push(S):(V.push(S),H[S]=1),M&&$.push([D,E,-1]))}return re}(n,s);if(h===0)return s?a.cells.concat(a.boundary):a.cells;for(var l=1,f=a.active,d=a.next,v=a.flags,m=a.cells,c=a.constraint,b=a.neighbor;f.length>0||d.length>0;){for(;f.length>0;){var g=f.pop();if(v[g]!==-l){v[g]=l,m[g];for(var w=0;w<3;++w){var _=b[3*g+w];_>=0&&v[_]===0&&(c[3*g+w]?d.push(_):(f.push(_),v[_]=l))}}}var T=d;d=f,f=T,d.length=0,l=-l}var k=function(L,M,I){for(var P=0,S=0;S<L.length;++S)M[S]===I&&(L[P++]=L[S]);return L.length=P,L}(m,v,h);return s?k.concat(a.boundary):k},t.prototype.locate=(e=[0,0,0],function(n,h,s){var a=n,l=h,f=s;return h<s?h<n&&(a=h,l=s,f=n):s<n&&(a=s,l=n,f=h),a<0?-1:(e[0]=a,e[1]=l,e[2]=f,r.eq(this.cells,e,i))})},{"binary-search-bounds":31}],45:[function(p,x,y){var e=p("binary-search-bounds"),r=p("robust-orientation")[3];function t(d,v,m,c,b){this.a=d,this.b=v,this.idx=m,this.lowerIds=c,this.upperIds=b}function i(d,v,m,c){this.a=d,this.b=v,this.type=m,this.idx=c}function n(d,v){var m=d.a[0]-v.a[0]||d.a[1]-v.a[1]||d.type-v.type;return m||(d.type!==0&&(m=r(d.a,d.b,v.b))?m:d.idx-v.idx)}function h(d,v){return r(d.a,d.b,v)}function s(d,v,m,c,b){for(var g=e.lt(v,c,h),w=e.gt(v,c,h),_=g;_<w;++_){for(var T=v[_],k=T.lowerIds,L=k.length;L>1&&r(m[k[L-2]],m[k[L-1]],c)>0;)d.push([k[L-1],k[L-2],b]),L-=1;k.length=L,k.push(b);var M=T.upperIds;for(L=M.length;L>1&&r(m[M[L-2]],m[M[L-1]],c)<0;)d.push([M[L-2],M[L-1],b]),L-=1;M.length=L,M.push(b)}}function a(d,v){var m;return(m=d.a[0]<v.a[0]?r(d.a,d.b,v.a):r(v.b,v.a,d.a))?m:(m=v.b[0]<d.b[0]?r(d.a,d.b,v.b):r(v.b,v.a,d.b))||d.idx-v.idx}function l(d,v,m){var c=e.le(d,m,a),b=d[c],g=b.upperIds,w=g[g.length-1];b.upperIds=[w],d.splice(c+1,0,new t(m.a,m.b,m.idx,[w],g))}function f(d,v,m){var c=m.a;m.a=m.b,m.b=c;var b=e.eq(d,m,a),g=d[b];d[b-1].upperIds=g.upperIds,d.splice(b,1)}x.exports=function(d,v){for(var m=d.length,c=v.length,b=[],g=0;g<m;++g)b.push(new i(d[g],null,0,g));for(g=0;g<c;++g){var w=v[g],_=d[w[0]],T=d[w[1]];_[0]<T[0]?b.push(new i(_,T,2,g),new i(T,_,1,g)):_[0]>T[0]&&b.push(new i(T,_,2,g),new i(_,T,1,g))}b.sort(n);for(var k=b[0].a[0]-(1+Math.abs(b[0].a[0]))*Math.pow(2,-52),L=[new t([k,1],[k,0],-1,[],[],[],[])],M=[],I=(g=0,b.length);g<I;++g){var P=b[g],S=P.type;S===0?s(M,L,d,P.a,P.idx):S===2?l(L,d,P):f(L,d,P)}return M}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(p,x,y){var e=p("binary-search-bounds");function r(n,h){this.stars=n,this.edges=h}x.exports=function(n,h){for(var s=new Array(n),a=0;a<n;++a)s[a]=[];return new r(s,h)};var t=r.prototype;function i(n,h,s){for(var a=1,l=n.length;a<l;a+=2)if(n[a-1]===h&&n[a]===s)return n[a-1]=n[l-2],n[a]=n[l-1],void(n.length=l-2)}t.isConstraint=function(){var n=[0,0];function h(s,a){return s[0]-a[0]||s[1]-a[1]}return function(s,a){return n[0]=Math.min(s,a),n[1]=Math.max(s,a),e.eq(this.edges,n,h)>=0}}(),t.removeTriangle=function(n,h,s){var a=this.stars;i(a[n],h,s),i(a[h],s,n),i(a[s],n,h)},t.addTriangle=function(n,h,s){var a=this.stars;a[n].push(h,s),a[h].push(s,n),a[s].push(n,h)},t.opposite=function(n,h){for(var s=this.stars[h],a=1,l=s.length;a<l;a+=2)if(s[a]===n)return s[a-1];return-1},t.flip=function(n,h){var s=this.opposite(n,h),a=this.opposite(h,n);this.removeTriangle(n,h,s),this.removeTriangle(h,n,a),this.addTriangle(n,a,s),this.addTriangle(h,s,a)},t.edges=function(){for(var n=this.stars,h=[],s=0,a=n.length;s<a;++s)for(var l=n[s],f=0,d=l.length;f<d;f+=2)h.push([l[f],l[f+1]]);return h},t.cells=function(){for(var n=this.stars,h=[],s=0,a=n.length;s<a;++s)for(var l=n[s],f=0,d=l.length;f<d;f+=2){var v=l[f],m=l[f+1];s<Math.min(v,m)&&h.push([s,v,m])}return h}},{"binary-search-bounds":31}],47:[function(p,x,y){x.exports=function(e){for(var r=1,t=1;t<e.length;++t)for(var i=0;i<t;++i)if(e[t]<e[i])r=-r;else if(e[i]===e[t])return 0;return r}},{}],48:[function(p,x,y){var e=p("dup"),r=p("robust-linear-solve");function t(h,s){for(var a=0,l=h.length,f=0;f<l;++f)a+=h[f]*s[f];return a}function i(h){var s=h.length;if(s===0)return[];h[0].length;var a=e([h.length+1,h.length+1],1),l=e([h.length+1],1);a[s][s]=0;for(var f=0;f<s;++f){for(var d=0;d<=f;++d)a[d][f]=a[f][d]=2*t(h[f],h[d]);l[f]=t(h[f],h[f])}var v=r(a,l),m=0,c=v[s+1];for(f=0;f<c.length;++f)m+=c[f];var b=new Array(s);for(f=0;f<s;++f){c=v[f];var g=0;for(d=0;d<c.length;++d)g+=c[d];b[f]=g/m}return b}function n(h){if(h.length===0)return[];for(var s=h[0].length,a=e([s]),l=i(h),f=0;f<h.length;++f)for(var d=0;d<s;++d)a[d]+=h[f][d]*l[f];return a}n.barycenetric=i,x.exports=n},{dup:65,"robust-linear-solve":283}],49:[function(p,x,y){x.exports=function(r){for(var t=e(r),i=0,n=0;n<r.length;++n)for(var h=r[n],s=0;s<t.length;++s)i+=Math.pow(h[s]-t[s],2);return Math.sqrt(i/r.length)};var e=p("circumcenter")},{circumcenter:48}],50:[function(p,x,y){x.exports=function(w,_,T){var k;if(T){k=_;for(var L=new Array(_.length),M=0;M<_.length;++M){var I=_[M];L[M]=[I[0],I[1],T[M]]}_=L}for(var P=function(S,E,D){var F=v(S,[],d(S));return b(E,F,D),!!F}(w,_,!!T);g(w,_,!!T);)P=!0;if(T&&P)for(k.length=0,T.length=0,M=0;M<_.length;++M)I=_[M],k.push([I[0],I[1]]),T.push(I[2]);return P};var e=p("union-find"),r=p("box-intersect"),t=p("robust-segment-intersect"),i=p("big-rat"),n=p("big-rat/cmp"),h=p("big-rat/to-float"),s=p("rat-vec"),a=p("nextafter"),l=p("./lib/rat-seg-intersect");function f(w){var _=h(w);return[a(_,-1/0),a(_,1/0)]}function d(w){for(var _=new Array(w.length),T=0;T<w.length;++T){var k=w[T];_[T]=[a(k[0],-1/0),a(k[1],-1/0),a(k[0],1/0),a(k[1],1/0)]}return _}function v(w,_,T){for(var k=_.length,L=new e(k),M=[],I=0;I<_.length;++I){var P=_[I],S=f(P[0]),E=f(P[1]);M.push([a(S[0],-1/0),a(E[0],-1/0),a(S[1],1/0),a(E[1],1/0)])}r(M,function(Q,K){L.link(Q,K)});var D=!0,F=new Array(k);for(I=0;I<k;++I)(V=L.find(I))!==I&&(D=!1,w[V]=[Math.min(w[I][0],w[V][0]),Math.min(w[I][1],w[V][1])]);if(D)return null;var H=0;for(I=0;I<k;++I){var V;(V=L.find(I))===I?(F[I]=H,w[H++]=w[I]):F[I]=-1}for(w.length=H,I=0;I<k;++I)F[I]<0&&(F[I]=F[L.find(I)]);return F}function m(w,_){return w[0]-_[0]||w[1]-_[1]}function c(w,_){var T=w[0]-_[0]||w[1]-_[1];return T||(w[2]<_[2]?-1:w[2]>_[2]?1:0)}function b(w,_,T){if(w.length!==0){if(_)for(var k=0;k<w.length;++k){var L=_[(I=w[k])[0]],M=_[I[1]];I[0]=Math.min(L,M),I[1]=Math.max(L,M)}else for(k=0;k<w.length;++k){var I;L=(I=w[k])[0],M=I[1],I[0]=Math.min(L,M),I[1]=Math.max(L,M)}T?w.sort(c):w.sort(m);var P=1;for(k=1;k<w.length;++k){var S=w[k-1],E=w[k];(E[0]!==S[0]||E[1]!==S[1]||T&&E[2]!==S[2])&&(w[P++]=E)}w.length=P}}function g(w,_,T){var k=function(S,E){for(var D=new Array(E.length),F=0;F<E.length;++F){var H=E[F],V=S[H[0]],Q=S[H[1]];D[F]=[a(Math.min(V[0],Q[0]),-1/0),a(Math.min(V[1],Q[1]),-1/0),a(Math.max(V[0],Q[0]),1/0),a(Math.max(V[1],Q[1]),1/0)]}return D}(w,_),L=function(S,E,D){var F=[];return r(D,function(H,V){var Q=E[H],K=E[V];if(Q[0]!==K[0]&&Q[0]!==K[1]&&Q[1]!==K[0]&&Q[1]!==K[1]){var Z=S[Q[0]],$=S[Q[1]],re=S[K[0]],R=S[K[1]];t(Z,$,re,R)&&F.push([H,V])}}),F}(w,_,k),M=d(w),I=function(S,E,D,F){var H=[];return r(D,F,function(V,Q){var K=E[V];if(K[0]!==Q&&K[1]!==Q){var Z=S[Q],$=S[K[0]],re=S[K[1]];t($,re,Z,Z)&&H.push([V,Q])}}),H}(w,_,k,M),P=v(w,function(S,E,D,F,H){var V,Q,K=S.map(function(de){return[i(de[0]),i(de[1])]});for(V=0;V<D.length;++V){var Z=D[V];Q=Z[0];var $=Z[1],re=E[Q],R=E[$],N=l(s(S[re[0]]),s(S[re[1]]),s(S[R[0]]),s(S[R[1]]));if(N){var U=S.length;S.push([h(N[0]),h(N[1])]),K.push(N),F.push([Q,U],[$,U])}}for(F.sort(function(de,xe){if(de[0]!==xe[0])return de[0]-xe[0];var we=K[de[1]],be=K[xe[1]];return n(we[0],be[0])||n(we[1],be[1])}),V=F.length-1;V>=0;--V){var te=E[Q=(he=F[V])[0]],j=te[0],Y=te[1],J=S[j],ee=S[Y];if((J[0]-ee[0]||J[1]-ee[1])<0){var ne=j;j=Y,Y=ne}te[0]=j;var se,oe=te[1]=he[1];for(H&&(se=te[2]);V>0&&F[V-1][0]===Q;){var he,le=(he=F[--V])[1];H?E.push([oe,le,se]):E.push([oe,le]),oe=le}H?E.push([oe,Y,se]):E.push([oe,Y])}return K}(w,_,L,I,T));return b(_,P,T),!!P||L.length>0||I.length>0}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(p,x,y){x.exports=function(l,f,d,v){var m=n(f,l),c=n(v,d),b=a(m,c);if(i(b)===0)return null;var g=n(l,d),w=a(c,g),_=r(w,b),T=s(m,_);return h(l,T)};var e=p("big-rat/mul"),r=p("big-rat/div"),t=p("big-rat/sub"),i=p("big-rat/sign"),n=p("rat-vec/sub"),h=p("rat-vec/add"),s=p("rat-vec/muls");function a(l,f){return t(e(l[0],f[1]),e(l[1],f[0]))}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(p,x,y){x.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(p,x,y){var e=p("./colorScale"),r=p("lerp");function t(h){return[h[0]/255,h[1]/255,h[2]/255,h[3]]}function i(h){for(var s,a="#",l=0;l<3;++l)a+=("00"+(s=(s=h[l]).toString(16))).substr(s.length);return a}function n(h){return"rgba("+h.join(",")+")"}x.exports=function(h){var s,a,l,f,d,v,m,c,b,g;if(h||(h={}),c=(h.nshades||72)-1,m=h.format||"hex",(v=h.colormap)||(v="jet"),typeof v=="string"){if(v=v.toLowerCase(),!e[v])throw Error(v+" not a supported colorscale");d=e[v]}else{if(!Array.isArray(v))throw Error("unsupported colormap option",v);d=v.slice()}if(d.length>c+1)throw new Error(v+" map requires nshades to be at least size "+d.length);b=Array.isArray(h.alpha)?h.alpha.length!==2?[1,1]:h.alpha.slice():typeof h.alpha=="number"?[h.alpha,h.alpha]:[1,1],s=d.map(function(L){return Math.round(L.index*c)}),b[0]=Math.min(Math.max(b[0],0),1),b[1]=Math.min(Math.max(b[1],0),1);var w=d.map(function(L,M){var I=d[M].index,P=d[M].rgb.slice();return P.length===4&&P[3]>=0&&P[3]<=1||(P[3]=b[0]+(b[1]-b[0])*I),P}),_=[];for(g=0;g<s.length-1;++g){f=s[g+1]-s[g],a=w[g],l=w[g+1];for(var T=0;T<f;T++){var k=T/f;_.push([Math.round(r(a[0],l[0],k)),Math.round(r(a[1],l[1],k)),Math.round(r(a[2],l[2],k)),r(a[3],l[3],k)])}}return _.push(d[d.length-1].rgb.concat(b[1])),m==="hex"?_=_.map(i):m==="rgbaString"?_=_.map(n):m==="float"&&(_=_.map(t)),_}},{"./colorScale":52,lerp:240}],54:[function(p,x,y){x.exports=function(s,a,l,f){var d=e(a,l,f);if(d===0){var v=r(e(s,a,l)),m=r(e(s,a,f));if(v===m){if(v===0){var c=h(s,a,l),b=h(s,a,f);return c===b?0:c?1:-1}return 0}return m===0?v>0||h(s,a,f)?-1:1:v===0?m>0||h(s,a,l)?1:-1:r(m-v)}var g=e(s,a,l);return g>0?d>0&&e(s,a,f)>0?1:-1:g<0?d>0||e(s,a,f)>0?1:-1:e(s,a,f)>0||h(s,a,l)?1:-1};var e=p("robust-orientation"),r=p("signum"),t=p("two-sum"),i=p("robust-product"),n=p("robust-sum");function h(s,a,l){var f=t(s[0],-a[0]),d=t(s[1],-a[1]),v=t(l[0],-a[0]),m=t(l[1],-a[1]),c=n(i(f,v),i(d,m));return c[c.length-1]>=0}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(p,x,y){x.exports=function(e){return e<0?-1:e>0?1:0}},{}],56:[function(p,x,y){x.exports=function(t,i){var n=t.length,h=t.length-i.length;if(h)return h;switch(n){case 0:return 0;case 1:return t[0]-i[0];case 2:return t[0]+t[1]-i[0]-i[1]||e(t[0],t[1])-e(i[0],i[1]);case 3:var s=t[0]+t[1],a=i[0]+i[1];if(h=s+t[2]-(a+i[2]))return h;var l=e(t[0],t[1]),f=e(i[0],i[1]);return e(l,t[2])-e(f,i[2])||e(l+t[2],s)-e(f+i[2],a);case 4:var d=t[0],v=t[1],m=t[2],c=t[3],b=i[0],g=i[1],w=i[2],_=i[3];return d+v+m+c-(b+g+w+_)||e(d,v,m,c)-e(b,g,w,_,b)||e(d+v,d+m,d+c,v+m,v+c,m+c)-e(b+g,b+w,b+_,g+w,g+_,w+_)||e(d+v+m,d+v+c,d+m+c,v+m+c)-e(b+g+w,b+g+_,b+w+_,g+w+_);default:for(var T=t.slice().sort(r),k=i.slice().sort(r),L=0;L<n;++L)if(h=T[L]-k[L])return h;return 0}};var e=Math.min;function r(t,i){return t-i}},{}],57:[function(p,x,y){var e=p("compare-cell"),r=p("cell-orientation");x.exports=function(t,i){return e(t,i)||r(t)-r(i)}},{"cell-orientation":47,"compare-cell":56}],58:[function(p,x,y){var e=p("./lib/ch1d"),r=p("./lib/ch2d"),t=p("./lib/chnd");x.exports=function(i){var n=i.length;if(n===0)return[];if(n===1)return[[0]];var h=i[0].length;return h===0?[]:h===1?e(i):h===2?r(i):t(i,h)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(p,x,y){x.exports=function(e){for(var r=0,t=0,i=1;i<e.length;++i)e[i][0]<e[r][0]&&(r=i),e[i][0]>e[t][0]&&(t=i);return r<t?[[r],[t]]:r>t?[[t],[r]]:[[r]]}},{}],60:[function(p,x,y){x.exports=function(r){var t=e(r),i=t.length;if(i<=2)return[];for(var n=new Array(i),h=t[i-1],s=0;s<i;++s){var a=t[s];n[s]=[h,a],h=a}return n};var e=p("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":246}],61:[function(p,x,y){x.exports=function(t,i){try{return e(t,!0)}catch{var n=r(t);if(n.length<=i)return[];var h=function(a,l){for(var f=a.length,d=new Array(f),v=0;v<l.length;++v)d[v]=a[l[v]];var m=l.length;for(v=0;v<f;++v)l.indexOf(v)<0&&(d[m++]=a[v]);return d}(t,n);return function(a,l){for(var f=a.length,d=l.length,v=0;v<f;++v)for(var m=a[v],c=0;c<m.length;++c){var b=m[c];if(b<d)m[c]=l[b];else{b-=d;for(var g=0;g<d;++g)b>=l[g]&&(b+=1);m[c]=b}}return a}(e(h,!0),n)}};var e=p("incremental-convex-hull"),r=p("affine-hull")},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(p,x,y){x.exports=function(e,r,t,i,n,h){var s=n-1,a=n*n,l=s*s,f=(1+2*n)*l,d=n*l,v=a*(3-2*n),m=a*s;if(e.length){h||(h=new Array(e.length));for(var c=e.length-1;c>=0;--c)h[c]=f*e[c]+d*r[c]+v*t[c]+m*i[c];return h}return f*e+d*r+v*t+m*i},x.exports.derivative=function(e,r,t,i,n,h){var s=6*n*n-6*n,a=3*n*n-4*n+1,l=-6*n*n+6*n,f=3*n*n-2*n;if(e.length){h||(h=new Array(e.length));for(var d=e.length-1;d>=0;--d)h[d]=s*e[d]+a*r[d]+l*t[d]+f*i[d];return h}return s*e+a*r+l*t[d]+f*i}},{}],63:[function(p,x,y){var e=p("incremental-convex-hull"),r=p("uniq");function t(n,h){this.point=n,this.index=h}function i(n,h){for(var s=n.point,a=h.point,l=s.length,f=0;f<l;++f){var d=a[f]-s[f];if(d)return d}return 0}x.exports=function(n,h){var s=n.length;if(s===0)return[];var a=n[0].length;if(a<1)return[];if(a===1)return function(I,P,S){if(I===1)return S?[[-1,0]]:[];var E=P.map(function(Q,K){return[Q[0],K]});E.sort(function(Q,K){return Q[0]-K[0]});for(var D=new Array(I-1),F=1;F<I;++F){var H=E[F-1],V=E[F];D[F-1]=[H[1],V[1]]}return S&&D.push([-1,D[0][1]],[D[I-1][1],-1]),D}(s,n,h);for(var l=new Array(s),f=1,d=0;d<s;++d){for(var v=n[d],m=new Array(a+1),c=0,b=0;b<a;++b){var g=v[b];m[b]=g,c+=g*g}m[a]=c,l[d]=new t(m,d),f=Math.max(c,f)}r(l,i),s=l.length;var w=new Array(s+a+1),_=new Array(s+a+1),T=(a+1)*(a+1)*f,k=new Array(a+1);for(d=0;d<=a;++d)k[d]=0;for(k[a]=T,w[0]=k.slice(),_[0]=-1,d=0;d<=a;++d)(m=k.slice())[d]=1,w[d+1]=m,_[d+1]=-1;for(d=0;d<s;++d){var L=l[d];w[d+a+1]=L.point,_[d+a+1]=L.index}var M=e(w,!1);if(M=h?M.filter(function(I){for(var P=0,S=0;S<=a;++S){var E=_[I[S]];if(E<0&&++P>=2)return!1;I[S]=E}return!0}):M.filter(function(I){for(var P=0;P<=a;++P){var S=_[I[P]];if(S<0)return!1;I[P]=S}return!0}),1&a)for(d=0;d<M.length;++d)m=(L=M[d])[0],L[0]=L[1],L[1]=m;return M}},{"incremental-convex-hull":233,uniq:310}],64:[function(p,x,y){(function(e){(function(){var r=!1;if(typeof Float64Array!="undefined"){var t=new Float64Array(1),i=new Uint32Array(t.buffer);t[0]=1,r=!0,i[1]===1072693248?(x.exports=function(h){return t[0]=h,[i[0],i[1]]},x.exports.pack=function(h,s){return i[0]=h,i[1]=s,t[0]},x.exports.lo=function(h){return t[0]=h,i[0]},x.exports.hi=function(h){return t[0]=h,i[1]}):i[0]===1072693248?(x.exports=function(h){return t[0]=h,[i[1],i[0]]},x.exports.pack=function(h,s){return i[1]=h,i[0]=s,t[0]},x.exports.lo=function(h){return t[0]=h,i[1]},x.exports.hi=function(h){return t[0]=h,i[0]}):r=!1}if(!r){var n=new e(8);x.exports=function(h){return n.writeDoubleLE(h,0,!0),[n.readUInt32LE(0,!0),n.readUInt32LE(4,!0)]},x.exports.pack=function(h,s){return n.writeUInt32LE(h,0,!0),n.writeUInt32LE(s,4,!0),n.readDoubleLE(0,!0)},x.exports.lo=function(h){return n.writeDoubleLE(h,0,!0),n.readUInt32LE(0,!0)},x.exports.hi=function(h){return n.writeDoubleLE(h,0,!0),n.readUInt32LE(4,!0)}}x.exports.sign=function(h){return x.exports.hi(h)>>>31},x.exports.exponent=function(h){return(x.exports.hi(h)<<1>>>21)-1023},x.exports.fraction=function(h){var s=x.exports.lo(h),a=x.exports.hi(h),l=1048575&a;return 2146435072&a&&(l+=1<<20),[s,l]},x.exports.denormalized=function(h){return!(2146435072&x.exports.hi(h))}}).call(this)}).call(this,p("buffer").Buffer)},{buffer:3}],65:[function(p,x,y){x.exports=function(e,r){switch(r===void 0&&(r=0),typeof e){case"number":if(e>0)return function(t,i){var n,h;for(n=new Array(t),h=0;h<t;++h)n[h]=i;return n}(0|e,r);break;case"object":if(typeof e.length=="number")return function t(i,n,h){var s=0|i[h];if(s<=0)return[];var a,l=new Array(s);if(h===i.length-1)for(a=0;a<s;++a)l[a]=n;else for(a=0;a<s;++a)l[a]=t(i,n,h+1);return l}(e,r,0)}return[]}},{}],66:[function(p,x,y){x.exports=function(r,t){var i=r.length;if(typeof t!="number"){t=0;for(var n=0;n<i;++n){var h=r[n];t=Math.max(t,h[0],h[1])}t=1+(0|t)}t|=0;var s=new Array(t);for(n=0;n<t;++n)s[n]=[];for(n=0;n<i;++n)h=r[n],s[h[0]].push(h[1]),s[h[1]].push(h[0]);for(var a=0;a<t;++a)e(s[a],function(l,f){return l-f});return s};var e=p("uniq")},{uniq:310}],67:[function(p,x,y){x.exports=function(e,r,t){var i=r||0,n=t||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[i*e[12]+e[8],i*e[13]+e[9],i*e[14]+e[10],i*e[15]+e[11]],[n*e[12]-e[8],n*e[13]-e[9],n*e[14]-e[10],n*e[15]-e[11]]]}},{}],68:[function(p,x,y){x.exports=function(s,a,l){switch(arguments.length){case 0:return new i([0],[0],0);case 1:return typeof s=="number"?new i(f=h(s),f,0):new i(s,h(s.length),0);case 2:if(typeof a=="number"){var f=h(s.length);return new i(s,f,+a)}l=0;case 3:if(s.length!==a.length)throw new Error("state and velocity lengths must match");return new i(s,a,l)}};var e=p("cubic-hermite"),r=p("binary-search-bounds");function t(s,a,l){return Math.min(a,Math.max(s,l))}function i(s,a,l){this.dimension=s.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var f=0;f<this.dimension;++f)this.bounds[0][f]=-1/0,this.bounds[1][f]=1/0;this._state=s.slice().reverse(),this._velocity=a.slice().reverse(),this._time=[l],this._scratch=[s.slice(),s.slice(),s.slice(),s.slice(),s.slice()]}var n=i.prototype;function h(s){for(var a=new Array(s),l=0;l<s;++l)a[l]=0;return a}n.flush=function(s){var a=r.gt(this._time,s)-1;a<=0||(this._time.splice(0,a),this._state.splice(0,a*this.dimension),this._velocity.splice(0,a*this.dimension))},n.curve=function(s){var a=this._time,l=a.length,f=r.le(a,s),d=this._scratch[0],v=this._state,m=this._velocity,c=this.dimension,b=this.bounds;if(f<0)for(var g=c-1,w=0;w<c;++w,--g)d[w]=v[g];else if(f>=l-1){g=v.length-1;var _=s-a[l-1];for(w=0;w<c;++w,--g)d[w]=v[g]+_*m[g]}else{g=c*(f+1)-1;var T=a[f],k=a[f+1]-T||1,L=this._scratch[1],M=this._scratch[2],I=this._scratch[3],P=this._scratch[4],S=!0;for(w=0;w<c;++w,--g)L[w]=v[g],I[w]=m[g]*k,M[w]=v[g+c],P[w]=m[g+c]*k,S=S&&L[w]===M[w]&&I[w]===P[w]&&I[w]===0;if(S)for(w=0;w<c;++w)d[w]=L[w];else e(L,I,M,P,(s-T)/k,d)}var E=b[0],D=b[1];for(w=0;w<c;++w)d[w]=t(E[w],D[w],d[w]);return d},n.dcurve=function(s){var a=this._time,l=a.length,f=r.le(a,s),d=this._scratch[0],v=this._state,m=this._velocity,c=this.dimension;if(f>=l-1)for(var b=v.length-1,g=(a[l-1],0);g<c;++g,--b)d[g]=m[b];else{b=c*(f+1)-1;var w=a[f],_=a[f+1]-w||1,T=this._scratch[1],k=this._scratch[2],L=this._scratch[3],M=this._scratch[4],I=!0;for(g=0;g<c;++g,--b)T[g]=v[b],L[g]=m[b]*_,k[g]=v[b+c],M[g]=m[b+c]*_,I=I&&T[g]===k[g]&&L[g]===M[g]&&L[g]===0;if(I)for(g=0;g<c;++g)d[g]=0;else for(e.derivative(T,L,k,M,(s-w)/_,d),g=0;g<c;++g)d[g]/=_}return d},n.lastT=function(){var s=this._time;return s[s.length-1]},n.stable=function(){for(var s=this._velocity,a=s.length,l=this.dimension-1;l>=0;--l)if(s[--a])return!1;return!0},n.jump=function(s){var a=this.lastT(),l=this.dimension;if(!(s<a||arguments.length!==l+1)){var f=this._state,d=this._velocity,v=f.length-this.dimension,m=this.bounds,c=m[0],b=m[1];this._time.push(a,s);for(var g=0;g<2;++g)for(var w=0;w<l;++w)f.push(f[v++]),d.push(0);for(this._time.push(s),w=l;w>0;--w)f.push(t(c[w-1],b[w-1],arguments[w])),d.push(0)}},n.push=function(s){var a=this.lastT(),l=this.dimension;if(!(s<a||arguments.length!==l+1)){var f=this._state,d=this._velocity,v=f.length-this.dimension,m=s-a,c=this.bounds,b=c[0],g=c[1],w=m>1e-6?1/m:0;this._time.push(s);for(var _=l;_>0;--_){var T=t(b[_-1],g[_-1],arguments[_]);f.push(T),d.push((T-f[v++])*w)}}},n.set=function(s){var a=this.dimension;if(!(s<this.lastT()||arguments.length!==a+1)){var l=this._state,f=this._velocity,d=this.bounds,v=d[0],m=d[1];this._time.push(s);for(var c=a;c>0;--c)l.push(t(v[c-1],m[c-1],arguments[c])),f.push(0)}},n.move=function(s){var a=this.lastT(),l=this.dimension;if(!(s<=a||arguments.length!==l+1)){var f=this._state,d=this._velocity,v=f.length-this.dimension,m=this.bounds,c=m[0],b=m[1],g=s-a,w=g>1e-6?1/g:0;this._time.push(s);for(var _=l;_>0;--_){var T=arguments[_];f.push(t(c[_-1],b[_-1],f[v++]+T)),d.push(T*w)}}},n.idle=function(s){var a=this.lastT();if(!(s<a)){var l=this.dimension,f=this._state,d=this._velocity,v=f.length-l,m=this.bounds,c=m[0],b=m[1],g=s-a;this._time.push(s);for(var w=l-1;w>=0;--w)f.push(t(c[w],b[w],f[v]+g*d[v])),d.push(0),v+=1}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(p,x,y){x.exports=function(c){return new n(c||m,null)};function e(c,b,g,w,_,T){this._color=c,this.key=b,this.value=g,this.left=w,this.right=_,this._count=T}function r(c){return new e(c._color,c.key,c.value,c.left,c.right,c._count)}function t(c,b){return new e(c,b.key,b.value,b.left,b.right,b._count)}function i(c){c._count=1+(c.left?c.left._count:0)+(c.right?c.right._count:0)}function n(c,b){this._compare=c,this.root=b}var h=n.prototype;function s(c,b){var g;return b.left&&(g=s(c,b.left))?g:(g=c(b.key,b.value))||(b.right?s(c,b.right):void 0)}function a(c,b,g,w){if(b(c,w.key)<=0){var _;if(w.left&&(_=a(c,b,g,w.left))||(_=g(w.key,w.value)))return _}if(w.right)return a(c,b,g,w.right)}function l(c,b,g,w,_){var T,k=g(c,_.key),L=g(b,_.key);if(k<=0&&(_.left&&(T=l(c,b,g,w,_.left))||L>0&&(T=w(_.key,_.value))))return T;if(L>0&&_.right)return l(c,b,g,w,_.right)}function f(c,b){this.tree=c,this._stack=b}Object.defineProperty(h,"keys",{get:function(){var c=[];return this.forEach(function(b,g){c.push(b)}),c}}),Object.defineProperty(h,"values",{get:function(){var c=[];return this.forEach(function(b,g){c.push(g)}),c}}),Object.defineProperty(h,"length",{get:function(){return this.root?this.root._count:0}}),h.insert=function(c,b){for(var g=this._compare,w=this.root,_=[],T=[];w;){var k=g(c,w.key);_.push(w),T.push(k),w=k<=0?w.left:w.right}_.push(new e(0,c,b,null,null,1));for(var L=_.length-2;L>=0;--L)w=_[L],T[L]<=0?_[L]=new e(w._color,w.key,w.value,_[L+1],w.right,w._count+1):_[L]=new e(w._color,w.key,w.value,w.left,_[L+1],w._count+1);for(L=_.length-1;L>1;--L){var M=_[L-1];if(w=_[L],M._color===1||w._color===1)break;var I=_[L-2];if(I.left===M)if(M.left===w){if(!(P=I.right)||P._color!==0){I._color=0,I.left=M.right,M._color=1,M.right=I,_[L-2]=M,_[L-1]=w,i(I),i(M),L>=3&&((S=_[L-3]).left===I?S.left=M:S.right=M);break}M._color=1,I.right=t(1,P),I._color=0,L-=1}else{if(!(P=I.right)||P._color!==0){M.right=w.left,I._color=0,I.left=w.right,w._color=1,w.left=M,w.right=I,_[L-2]=w,_[L-1]=M,i(I),i(M),i(w),L>=3&&((S=_[L-3]).left===I?S.left=w:S.right=w);break}M._color=1,I.right=t(1,P),I._color=0,L-=1}else if(M.right===w){if(!(P=I.left)||P._color!==0){I._color=0,I.right=M.left,M._color=1,M.left=I,_[L-2]=M,_[L-1]=w,i(I),i(M),L>=3&&((S=_[L-3]).right===I?S.right=M:S.left=M);break}M._color=1,I.left=t(1,P),I._color=0,L-=1}else{var P;if(!(P=I.left)||P._color!==0){var S;M.left=w.right,I._color=0,I.right=w.left,w._color=1,w.right=M,w.left=I,_[L-2]=w,_[L-1]=M,i(I),i(M),i(w),L>=3&&((S=_[L-3]).right===I?S.right=w:S.left=w);break}M._color=1,I.left=t(1,P),I._color=0,L-=1}}return _[0]._color=1,new n(g,_[0])},h.forEach=function(c,b,g){if(this.root)switch(arguments.length){case 1:return s(c,this.root);case 2:return a(b,this._compare,c,this.root);case 3:return this._compare(b,g)>=0?void 0:l(b,g,this._compare,c,this.root)}},Object.defineProperty(h,"begin",{get:function(){for(var c=[],b=this.root;b;)c.push(b),b=b.left;return new f(this,c)}}),Object.defineProperty(h,"end",{get:function(){for(var c=[],b=this.root;b;)c.push(b),b=b.right;return new f(this,c)}}),h.at=function(c){if(c<0)return new f(this,[]);for(var b=this.root,g=[];;){if(g.push(b),b.left){if(c<b.left._count){b=b.left;continue}c-=b.left._count}if(!c)return new f(this,g);if(c-=1,!b.right||c>=b.right._count)break;b=b.right}return new f(this,[])},h.ge=function(c){for(var b=this._compare,g=this.root,w=[],_=0;g;){var T=b(c,g.key);w.push(g),T<=0&&(_=w.length),g=T<=0?g.left:g.right}return w.length=_,new f(this,w)},h.gt=function(c){for(var b=this._compare,g=this.root,w=[],_=0;g;){var T=b(c,g.key);w.push(g),T<0&&(_=w.length),g=T<0?g.left:g.right}return w.length=_,new f(this,w)},h.lt=function(c){for(var b=this._compare,g=this.root,w=[],_=0;g;){var T=b(c,g.key);w.push(g),T>0&&(_=w.length),g=T<=0?g.left:g.right}return w.length=_,new f(this,w)},h.le=function(c){for(var b=this._compare,g=this.root,w=[],_=0;g;){var T=b(c,g.key);w.push(g),T>=0&&(_=w.length),g=T<0?g.left:g.right}return w.length=_,new f(this,w)},h.find=function(c){for(var b=this._compare,g=this.root,w=[];g;){var _=b(c,g.key);if(w.push(g),_===0)return new f(this,w);g=_<=0?g.left:g.right}return new f(this,[])},h.remove=function(c){var b=this.find(c);return b?b.remove():this},h.get=function(c){for(var b=this._compare,g=this.root;g;){var w=b(c,g.key);if(w===0)return g.value;g=w<=0?g.left:g.right}};var d=f.prototype;function v(c,b){c.key=b.key,c.value=b.value,c.left=b.left,c.right=b.right,c._color=b._color,c._count=b._count}function m(c,b){return c<b?-1:c>b?1:0}Object.defineProperty(d,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(d,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),d.clone=function(){return new f(this.tree,this._stack.slice())},d.remove=function(){var c=this._stack;if(c.length===0)return this.tree;var b=new Array(c.length),g=c[c.length-1];b[b.length-1]=new e(g._color,g.key,g.value,g.left,g.right,g._count);for(var w=c.length-2;w>=0;--w)(g=c[w]).left===c[w+1]?b[w]=new e(g._color,g.key,g.value,b[w+1],g.right,g._count):b[w]=new e(g._color,g.key,g.value,g.left,b[w+1],g._count);if((g=b[b.length-1]).left&&g.right){var _=b.length;for(g=g.left;g.right;)b.push(g),g=g.right;var T=b[_-1];for(b.push(new e(g._color,T.key,T.value,g.left,g.right,g._count)),b[_-1].key=g.key,b[_-1].value=g.value,w=b.length-2;w>=_;--w)g=b[w],b[w]=new e(g._color,g.key,g.value,g.left,b[w+1],g._count);b[_-1].left=b[_]}if((g=b[b.length-1])._color===0){var k=b[b.length-2];for(k.left===g?k.left=null:k.right===g&&(k.right=null),b.pop(),w=0;w<b.length;++w)b[w]._count--;return new n(this.tree._compare,b[0])}if(g.left||g.right){for(g.left?v(g,g.left):g.right&&v(g,g.right),g._color=1,w=0;w<b.length-1;++w)b[w]._count--;return new n(this.tree._compare,b[0])}if(b.length===1)return new n(this.tree._compare,null);for(w=0;w<b.length;++w)b[w]._count--;var L=b[b.length-2];return function(M){for(var I,P,S,E,D=M.length-1;D>=0;--D){if(I=M[D],D===0)return void(I._color=1);if((P=M[D-1]).left===I){if((S=P.right).right&&S.right._color===0)return E=(S=P.right=r(S)).right=r(S.right),P.right=S.left,S.left=P,S.right=E,S._color=P._color,I._color=1,P._color=1,E._color=1,i(P),i(S),D>1&&((F=M[D-2]).left===P?F.left=S:F.right=S),void(M[D-1]=S);if(S.left&&S.left._color===0)return E=(S=P.right=r(S)).left=r(S.left),P.right=E.left,S.left=E.right,E.left=P,E.right=S,E._color=P._color,P._color=1,S._color=1,I._color=1,i(P),i(S),i(E),D>1&&((F=M[D-2]).left===P?F.left=E:F.right=E),void(M[D-1]=E);if(S._color===1){if(P._color===0)return P._color=1,void(P.right=t(0,S));P.right=t(0,S);continue}S=r(S),P.right=S.left,S.left=P,S._color=P._color,P._color=0,i(P),i(S),D>1&&((F=M[D-2]).left===P?F.left=S:F.right=S),M[D-1]=S,M[D]=P,D+1<M.length?M[D+1]=I:M.push(I),D+=2}else{if((S=P.left).left&&S.left._color===0)return E=(S=P.left=r(S)).left=r(S.left),P.left=S.right,S.right=P,S.left=E,S._color=P._color,I._color=1,P._color=1,E._color=1,i(P),i(S),D>1&&((F=M[D-2]).right===P?F.right=S:F.left=S),void(M[D-1]=S);if(S.right&&S.right._color===0)return E=(S=P.left=r(S)).right=r(S.right),P.left=E.right,S.right=E.left,E.right=P,E.left=S,E._color=P._color,P._color=1,S._color=1,I._color=1,i(P),i(S),i(E),D>1&&((F=M[D-2]).right===P?F.right=E:F.left=E),void(M[D-1]=E);if(S._color===1){if(P._color===0)return P._color=1,void(P.left=t(0,S));P.left=t(0,S);continue}var F;S=r(S),P.left=S.right,S.right=P,S._color=P._color,P._color=0,i(P),i(S),D>1&&((F=M[D-2]).right===P?F.right=S:F.left=S),M[D-1]=S,M[D]=P,D+1<M.length?M[D+1]=I:M.push(I),D+=2}}}(b),L.left===g?L.left=null:L.right=null,new n(this.tree._compare,b[0])},Object.defineProperty(d,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(d,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(d,"index",{get:function(){var c=0,b=this._stack;if(b.length===0){var g=this.tree.root;return g?g._count:0}b[b.length-1].left&&(c=b[b.length-1].left._count);for(var w=b.length-2;w>=0;--w)b[w+1]===b[w].right&&(++c,b[w].left&&(c+=b[w].left._count));return c},enumerable:!0}),d.next=function(){var c=this._stack;if(c.length!==0){var b=c[c.length-1];if(b.right)for(b=b.right;b;)c.push(b),b=b.left;else for(c.pop();c.length>0&&c[c.length-1].right===b;)b=c[c.length-1],c.pop()}},Object.defineProperty(d,"hasNext",{get:function(){var c=this._stack;if(c.length===0)return!1;if(c[c.length-1].right)return!0;for(var b=c.length-1;b>0;--b)if(c[b-1].left===c[b])return!0;return!1}}),d.update=function(c){var b=this._stack;if(b.length===0)throw new Error("Can't update empty node!");var g=new Array(b.length),w=b[b.length-1];g[g.length-1]=new e(w._color,w.key,c,w.left,w.right,w._count);for(var _=b.length-2;_>=0;--_)(w=b[_]).left===b[_+1]?g[_]=new e(w._color,w.key,w.value,g[_+1],w.right,w._count):g[_]=new e(w._color,w.key,w.value,w.left,g[_+1],w._count);return new n(this.tree._compare,g[0])},d.prev=function(){var c=this._stack;if(c.length!==0){var b=c[c.length-1];if(b.left)for(b=b.left;b;)c.push(b),b=b.right;else for(c.pop();c.length>0&&c[c.length-1].left===b;)b=c[c.length-1],c.pop()}},Object.defineProperty(d,"hasPrev",{get:function(){var c=this._stack;if(c.length===0)return!1;if(c[c.length-1].left)return!0;for(var b=c.length-1;b>0;--b)if(c[b-1].right===c[b])return!0;return!1}})},{}],70:[function(p,x,y){x.exports=function(_,T){var k=new a(_);return k.update(T),k};var e=p("./lib/text.js"),r=p("./lib/lines.js"),t=p("./lib/background.js"),i=p("./lib/cube.js"),n=p("./lib/ticks.js"),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function s(_,T){return _[0]=T[0],_[1]=T[1],_[2]=T[2],_}function a(_){this.gl=_,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=t(_)}var l=a.prototype;function f(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}l.update=function(_){function T(Q,K,Z){if(Z in _){var $,re=_[Z],R=this[Z];(Q?Array.isArray(re)&&Array.isArray(re[0]):Array.isArray(re))?this[Z]=$=[K(re[0]),K(re[1]),K(re[2])]:this[Z]=$=[K(re),K(re),K(re)];for(var N=0;N<3;++N)if($[N]!==R[N])return!0}return!1}_=_||{};var k,L=T.bind(this,!1,Number),M=T.bind(this,!1,Boolean),I=T.bind(this,!1,String),P=T.bind(this,!0,function(Q){if(Array.isArray(Q)){if(Q.length===3)return[+Q[0],+Q[1],+Q[2],1];if(Q.length===4)return[+Q[0],+Q[1],+Q[2],+Q[3]]}return[0,0,0,1]}),S=!1,E=!1;if("bounds"in _)for(var D=_.bounds,F=0;F<2;++F)for(var H=0;H<3;++H)D[F][H]!==this.bounds[F][H]&&(E=!0),this.bounds[F][H]=D[F][H];if("ticks"in _)for(k=_.ticks,S=!0,this.autoTicks=!1,F=0;F<3;++F)this.tickSpacing[F]=0;else L("tickSpacing")&&(this.autoTicks=!0,E=!0);if(this._firstInit&&("ticks"in _||"tickSpacing"in _||(this.autoTicks=!0),E=!0,S=!0,this._firstInit=!1),E&&this.autoTicks&&(k=n.create(this.bounds,this.tickSpacing),S=!0),S){for(F=0;F<3;++F)k[F].sort(function(Q,K){return Q.x-K.x});n.equal(k,this.ticks)?S=!1:this.ticks=k}M("tickEnable"),I("tickFont")&&(S=!0),L("tickSize"),L("tickAngle"),L("tickPad"),P("tickColor");var V=I("labels");I("labelFont")&&(V=!0),M("labelEnable"),L("labelSize"),L("labelPad"),P("labelColor"),M("lineEnable"),M("lineMirror"),L("lineWidth"),P("lineColor"),M("lineTickEnable"),M("lineTickMirror"),L("lineTickLength"),L("lineTickWidth"),P("lineTickColor"),M("gridEnable"),L("gridWidth"),P("gridColor"),M("zeroEnable"),P("zeroLineColor"),L("zeroLineWidth"),M("backgroundEnable"),P("backgroundColor"),this._text?this._text&&(V||S)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&S&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=r(this.gl,this.bounds,this.ticks))};var d=[new f,new f,new f];function v(_,T,k,L,M){for(var I=_.primalOffset,P=_.primalMinor,S=_.mirrorOffset,E=_.mirrorMinor,D=L[T],F=0;F<3;++F)if(T!==F){var H=I,V=S,Q=P,K=E;D&1<<F&&(H=S,V=I,Q=E,K=P),H[F]=k[0][F],V[F]=k[1][F],M[F]>0?(Q[F]=-1,K[F]=0):(Q[F]=0,K[F]=1)}}var m=[0,0,0],c={model:h,view:h,projection:h,_ortho:!1};l.isOpaque=function(){return!0},l.isTransparent=function(){return!1},l.drawTransparent=function(_){};var b=[0,0,0],g=[0,0,0],w=[0,0,0];l.draw=function(_){_=_||c;for(var T=this.gl,k=_.model||h,L=_.view||h,M=_.projection||h,I=this.bounds,P=_._ortho||!1,S=i(k,L,M,I,P),E=S.cubeEdges,D=S.axis,F=L[12],H=L[13],V=L[14],Q=L[15],K=(P?2:1)*this.pixelRatio*(M[3]*F+M[7]*H+M[11]*V+M[15]*Q)/T.drawingBufferHeight,Z=0;Z<3;++Z)this.lastCubeProps.cubeEdges[Z]=E[Z],this.lastCubeProps.axis[Z]=D[Z];var $=d;for(Z=0;Z<3;++Z)v(d[Z],Z,this.bounds,E,D);T=this.gl;var re,R=m;for(Z=0;Z<3;++Z)this.backgroundEnable[Z]?R[Z]=D[Z]:R[Z]=0;for(this._background.draw(k,L,M,I,R,this.backgroundColor),this._lines.bind(k,L,M,this),Z=0;Z<3;++Z){var N=[0,0,0];D[Z]>0?N[Z]=I[1][Z]:N[Z]=I[0][Z];for(var U=0;U<2;++U){var te=(Z+1+U)%3,j=(Z+1+(1^U))%3;this.gridEnable[te]&&this._lines.drawGrid(te,j,this.bounds,N,this.gridColor[te],this.gridWidth[te]*this.pixelRatio)}for(U=0;U<2;++U)te=(Z+1+U)%3,j=(Z+1+(1^U))%3,this.zeroEnable[j]&&Math.min(I[0][j],I[1][j])<=0&&Math.max(I[0][j],I[1][j])>=0&&this._lines.drawZero(te,j,this.bounds,N,this.zeroLineColor[j],this.zeroLineWidth[j]*this.pixelRatio)}for(Z=0;Z<3;++Z){this.lineEnable[Z]&&this._lines.drawAxisLine(Z,this.bounds,$[Z].primalOffset,this.lineColor[Z],this.lineWidth[Z]*this.pixelRatio),this.lineMirror[Z]&&this._lines.drawAxisLine(Z,this.bounds,$[Z].mirrorOffset,this.lineColor[Z],this.lineWidth[Z]*this.pixelRatio);var Y=s(b,$[Z].primalMinor),J=s(g,$[Z].mirrorMinor),ee=this.lineTickLength;for(U=0;U<3;++U){var ne=K/k[5*U];Y[U]*=ee[U]*ne,J[U]*=ee[U]*ne}this.lineTickEnable[Z]&&this._lines.drawAxisTicks(Z,$[Z].primalOffset,Y,this.lineTickColor[Z],this.lineTickWidth[Z]*this.pixelRatio),this.lineTickMirror[Z]&&this._lines.drawAxisTicks(Z,$[Z].mirrorOffset,J,this.lineTickColor[Z],this.lineTickWidth[Z]*this.pixelRatio)}this._lines.unbind(),this._text.bind(k,L,M,this.pixelRatio);var se,oe;function he(Ae){(oe=[0,0,0])[Ae]=1}function le(Ae,fe,me){var ke=(Ae+1)%3,Te=(Ae+2)%3,Me=fe[ke],Oe=fe[Te],Fe=me[ke],qe=me[Te];Me>0&&qe>0||Me>0&&qe<0||Me<0&&qe>0||Me<0&&qe<0?he(ke):(Oe>0&&Fe>0||Oe>0&&Fe<0||Oe<0&&Fe>0||Oe<0&&Fe<0)&&he(Te)}for(Z=0;Z<3;++Z){var de=$[Z].primalMinor,xe=$[Z].mirrorMinor,we=s(w,$[Z].primalOffset);for(U=0;U<3;++U)this.lineTickEnable[Z]&&(we[U]+=K*de[U]*Math.max(this.lineTickLength[U],0)/k[5*U]);var be=[0,0,0];if(be[Z]=1,this.tickEnable[Z]){for(this.tickAngle[Z]===-3600?(this.tickAngle[Z]=0,this.tickAlign[Z]="auto"):this.tickAlign[Z]=-1,se=1,(re=[this.tickAlign[Z],.5,se])[0]==="auto"?re[0]=0:re[0]=parseInt(""+re[0]),oe=[0,0,0],le(Z,de,xe),U=0;U<3;++U)we[U]+=K*de[U]*this.tickPad[U]/k[5*U];this._text.drawTicks(Z,this.tickSize[Z],this.tickAngle[Z],we,this.tickColor[Z],be,oe,re)}if(this.labelEnable[Z]){for(se=0,oe=[0,0,0],this.labels[Z].length>4&&(he(Z),se=1),(re=[this.labelAlign[Z],.5,se])[0]==="auto"?re[0]=0:re[0]=parseInt(""+re[0]),U=0;U<3;++U)we[U]+=K*de[U]*this.labelPad[U]/k[5*U];we[Z]+=.5*(I[0][Z]+I[1][Z]),this._text.drawLabel(Z,this.labelSize[Z],this.labelAngle[Z],we,this.labelColor[Z],[0,0,0],oe,re)}}this._text.unbind()},l.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(p,x,y){x.exports=function(h){for(var s=[],a=[],l=0,f=0;f<3;++f)for(var d=(f+1)%3,v=(f+2)%3,m=[0,0,0],c=[0,0,0],b=-1;b<=1;b+=2){a.push(l,l+2,l+1,l+1,l+2,l+3),m[f]=b,c[f]=b;for(var g=-1;g<=1;g+=2){m[d]=g;for(var w=-1;w<=1;w+=2)m[v]=w,s.push(m[0],m[1],m[2],c[0],c[1],c[2]),l+=1}var _=d;d=v,v=_}var T=e(h,new Float32Array(s)),k=e(h,new Uint16Array(a),h.ELEMENT_ARRAY_BUFFER),L=r(h,[{buffer:T,type:h.FLOAT,size:3,offset:0,stride:24},{buffer:T,type:h.FLOAT,size:3,offset:12,stride:24}],k),M=t(h);return M.attributes.position.location=0,M.attributes.normal.location=1,new i(h,T,L,M)};var e=p("gl-buffer"),r=p("gl-vao"),t=p("./shaders").bg;function i(h,s,a,l){this.gl=h,this.buffer=s,this.vao=a,this.shader=l}var n=i.prototype;n.draw=function(h,s,a,l,f,d){for(var v=!1,m=0;m<3;++m)v=v||f[m];if(v){var c=this.gl;c.enable(c.POLYGON_OFFSET_FILL),c.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:h,view:s,projection:a,bounds:l,enable:f,colors:d},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),c.disable(c.POLYGON_OFFSET_FILL)}},n.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(p,x,y){x.exports=function(g,w,_,T,k){r(n,w,g),r(n,_,n);for(var L=0,M=0;M<2;++M){a[2]=T[M][2];for(var I=0;I<2;++I){a[1]=T[I][1];for(var P=0;P<2;++P)a[0]=T[P][0],f(h[L],a,n),L+=1}}var S=-1;for(M=0;M<8;++M){for(var E=h[M][3],D=0;D<3;++D)s[M][D]=h[M][D]/E;k&&(s[M][2]*=-1),E<0&&(S<0||s[M][2]<s[S][2])&&(S=M)}if(S<0){S=0;for(var F=0;F<3;++F){for(var H=(F+2)%3,V=(F+1)%3,Q=-1,K=-1,Z=0;Z<2;++Z){var $=(R=Z<<F)+(Z<<H)+(1-Z<<V),re=R+(1-Z<<H)+(Z<<V);i(s[R],s[$],s[re],l)<0||(Z?Q=1:K=1)}if(Q<0||K<0)K>Q&&(S|=1<<F);else{for(Z=0;Z<2;++Z){$=(R=Z<<F)+(Z<<H)+(1-Z<<V),re=R+(1-Z<<H)+(Z<<V);var R,N=v([h[R],h[$],h[re],h[R+(1<<H)+(1<<V)]]);Z?Q=N:K=N}K>Q&&(S|=1<<F)}}}var U=7^S,te=-1;for(M=0;M<8;++M)M!==S&&M!==U&&(te<0||s[te][1]>s[M][1])&&(te=M);var j=-1;for(M=0;M<3;++M)(J=te^1<<M)!==S&&J!==U&&(j<0&&(j=J),(V=s[J])[0]<s[j][0]&&(j=J));var Y=-1;for(M=0;M<3;++M){var J;(J=te^1<<M)!==S&&J!==U&&J!==j&&(Y<0&&(Y=J),(V=s[J])[0]>s[Y][0]&&(Y=J))}var ee=m;ee[0]=ee[1]=ee[2]=0,ee[e.log2(j^te)]=te&j,ee[e.log2(te^Y)]=te&Y;var ne=7^Y;ne===S||ne===U?(ne=7^j,ee[e.log2(Y^ne)]=ne&Y):ee[e.log2(j^ne)]=ne&j;var se=c,oe=S;for(F=0;F<3;++F)se[F]=oe&1<<F?-1:1;return b};var e=p("bit-twiddle"),r=p("gl-mat4/multiply"),t=p("split-polygon"),i=p("robust-orientation"),n=new Array(16),h=new Array(8),s=new Array(8),a=new Array(3),l=[0,0,0];function f(g,w,_){for(var T=0;T<4;++T){g[T]=_[12+T];for(var k=0;k<3;++k)g[T]+=w[k]*_[4*k+T]}}(function(){for(var g=0;g<8;++g)h[g]=[1,1,1,1],s[g]=[1,1,1]})();var d=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function v(g){for(var w=0;w<d.length;++w)if((g=t.positive(g,d[w])).length<3)return 0;var _=g[0],T=_[0]/_[3],k=_[1]/_[3],L=0;for(w=1;w+1<g.length;++w){var M=g[w],I=g[w+1],P=M[0]/M[3]-T,S=M[1]/M[3]-k,E=I[0]/I[3]-T,D=I[1]/I[3]-k;L+=Math.abs(P*D-S*E)}return L}var m=[1,1,1],c=[0,0,0],b={cubeEdges:m,axis:c}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(p,x,y){x.exports=function(m,c,b){var g=[],w=[0,0,0],_=[0,0,0],T=[0,0,0],k=[0,0,0];g.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var L=0;L<3;++L){for(var M=g.length/3|0,I=0;I<b[L].length;++I){var P=+b[L][I].x;g.push(P,0,1,P,1,1,P,0,-1,P,0,-1,P,1,1,P,1,-1)}var S=g.length/3|0;w[L]=M,_[L]=S-M,M=g.length/3|0;for(var E=0;E<b[L].length;++E)P=+b[L][E].x,g.push(P,0,1,P,1,1,P,0,-1,P,0,-1,P,1,1,P,1,-1);S=g.length/3|0,T[L]=M,k[L]=S-M}var D=e(m,new Float32Array(g)),F=r(m,[{buffer:D,type:m.FLOAT,size:3,stride:0,offset:0}]),H=t(m);return H.attributes.position.location=0,new d(m,D,F,H,_,w,k,T)};var e=p("gl-buffer"),r=p("gl-vao"),t=p("./shaders").line,i=[0,0,0],n=[0,0,0],h=[0,0,0],s=[0,0,0],a=[1,1];function l(m){return m[0]=m[1]=m[2]=0,m}function f(m,c){return m[0]=c[0],m[1]=c[1],m[2]=c[2],m}function d(m,c,b,g,w,_,T,k){this.gl=m,this.vertBuffer=c,this.vao=b,this.shader=g,this.tickCount=w,this.tickOffset=_,this.gridCount=T,this.gridOffset=k}var v=d.prototype;v.bind=function(m,c,b){this.shader.bind(),this.shader.uniforms.model=m,this.shader.uniforms.view=c,this.shader.uniforms.projection=b,a[0]=this.gl.drawingBufferWidth,a[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=a,this.vao.bind()},v.unbind=function(){this.vao.unbind()},v.drawAxisLine=function(m,c,b,g,w){var _=l(n);this.shader.uniforms.majorAxis=n,_[m]=c[1][m]-c[0][m],this.shader.uniforms.minorAxis=_;var T,k=f(s,b);k[m]+=c[0][m],this.shader.uniforms.offset=k,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=g,(T=l(h))[(m+2)%3]=1,this.shader.uniforms.screenAxis=T,this.vao.draw(this.gl.TRIANGLES,6),(T=l(h))[(m+1)%3]=1,this.shader.uniforms.screenAxis=T,this.vao.draw(this.gl.TRIANGLES,6)},v.drawAxisTicks=function(m,c,b,g,w){if(this.tickCount[m]){var _=l(i);_[m]=1,this.shader.uniforms.majorAxis=_,this.shader.uniforms.offset=c,this.shader.uniforms.minorAxis=b,this.shader.uniforms.color=g,this.shader.uniforms.lineWidth=w;var T=l(h);T[m]=1,this.shader.uniforms.screenAxis=T,this.vao.draw(this.gl.TRIANGLES,this.tickCount[m],this.tickOffset[m])}},v.drawGrid=function(m,c,b,g,w,_){if(this.gridCount[m]){var T=l(n);T[c]=b[1][c]-b[0][c],this.shader.uniforms.minorAxis=T;var k=f(s,g);k[c]+=b[0][c],this.shader.uniforms.offset=k;var L=l(i);L[m]=1,this.shader.uniforms.majorAxis=L;var M=l(h);M[m]=1,this.shader.uniforms.screenAxis=M,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,this.gridCount[m],this.gridOffset[m])}},v.drawZero=function(m,c,b,g,w,_){var T=l(n);this.shader.uniforms.majorAxis=T,T[m]=b[1][m]-b[0][m],this.shader.uniforms.minorAxis=T;var k=f(s,g);k[m]+=b[0][m],this.shader.uniforms.offset=k;var L=l(h);L[c]=1,this.shader.uniforms.screenAxis=L,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,6)},v.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(p,x,y){var e=p("glslify"),r=p("gl-shader"),t=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),i=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);y.line=function(l){return r(l,t,i,null,[{name:"position",type:"vec3"}])};var n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),h=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);y.text=function(l){return r(l,n,h,null,[{name:"position",type:"vec3"}])};var s=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),a=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);y.bg=function(l){return r(l,s,a,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(p,x,y){(function(e){(function(){x.exports=function(d,v,m,c,b,g){var w=r(d),_=t(d,[{buffer:w,size:3}]),T=n(d);T.attributes.position.location=0;var k=new a(d,T,w,_);return k.update(v,m,c,b,g),k};var r=p("gl-buffer"),t=p("gl-vao"),i=p("vectorize-text"),n=p("./shaders").text,h=window||e.global||{},s=h.__TEXT_CACHE||{};h.__TEXT_CACHE={};function a(d,v,m,c){this.gl=d,this.shader=v,this.buffer=m,this.vao=c,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var l=a.prototype,f=[0,0];l.bind=function(d,v,m,c){this.vao.bind(),this.shader.bind();var b=this.shader.uniforms;b.model=d,b.view=v,b.projection=m,b.pixelScale=c,f[0]=this.gl.drawingBufferWidth,f[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=f},l.unbind=function(){this.vao.unbind()},l.update=function(d,v,m,c,b){var g=[];function w(S,E,D,F,H,V){var Q=s[D];Q||(Q=s[D]={});var K=Q[E];K||(K=Q[E]=function(Y,J){try{return i(Y,J)}catch(ee){return console.warn('error vectorizing text:"'+Y+'" error:',ee),{cells:[],positions:[]}}}(E,{triangles:!0,font:D,textAlign:"center",textBaseline:"middle",lineSpacing:H,styletags:V}));for(var Z=(F||12)/12,$=K.positions,re=K.cells,R=0,N=re.length;R<N;++R)for(var U=re[R],te=2;te>=0;--te){var j=$[U[te]];g.push(Z*j[0],-Z*j[1],S)}}for(var _=[0,0,0],T=[0,0,0],k=[0,0,0],L=[0,0,0],M={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},I=0;I<3;++I){k[I]=g.length/3|0,w(.5*(d[0][I]+d[1][I]),v[I],m[I],12,1.25,M),L[I]=(g.length/3|0)-k[I],_[I]=g.length/3|0;for(var P=0;P<c[I].length;++P)c[I][P].text&&w(c[I][P].x,c[I][P].text,c[I][P].font||b,c[I][P].fontSize||12,1.25,M);T[I]=(g.length/3|0)-_[I]}this.buffer.update(g),this.tickOffset=_,this.tickCount=T,this.labelOffset=k,this.labelCount=L},l.drawTicks=function(d,v,m,c,b,g,w,_){this.tickCount[d]&&(this.shader.uniforms.axis=g,this.shader.uniforms.color=b,this.shader.uniforms.angle=m,this.shader.uniforms.scale=v,this.shader.uniforms.offset=c,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=_,this.vao.draw(this.gl.TRIANGLES,this.tickCount[d],this.tickOffset[d]))},l.drawLabel=function(d,v,m,c,b,g,w,_){this.labelCount[d]&&(this.shader.uniforms.axis=g,this.shader.uniforms.color=b,this.shader.uniforms.angle=m,this.shader.uniforms.scale=v,this.shader.uniforms.offset=c,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=_,this.vao.draw(this.gl.TRIANGLES,this.labelCount[d],this.labelOffset[d]))},l.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this)}).call(this,p("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(p,x,y){function e(r,t){var i=r+"",n=i.indexOf("."),h=0;n>=0&&(h=i.length-n-1);var s=Math.pow(10,h),a=Math.round(r*t*s),l=a+"";if(l.indexOf("e")>=0)return l;var f=a/s,d=a%s;a<0?(f=0|-Math.ceil(f),d=0|-d):(f=0|Math.floor(f),d|=0);var v=""+f;if(a<0&&(v="-"+v),h){for(var m=""+d;m.length<h;)m="0"+m;return v+"."+m}return v}y.create=function(r,t){for(var i=[],n=0;n<3;++n){for(var h=[],s=(r[0][n],r[1][n],0);s*t[n]<=r[1][n];++s)h.push({x:s*t[n],text:e(t[n],s)});for(s=-1;s*t[n]>=r[0][n];--s)h.push({x:s*t[n],text:e(t[n],s)});i.push(h)}return i},y.equal=function(r,t){for(var i=0;i<3;++i){if(r[i].length!==t[i].length)return!1;for(var n=0;n<r[i].length;++n){var h=r[i][n],s=t[i][n];if(h.x!==s.x||h.text!==s.text||h.font!==s.font||h.fontColor!==s.fontColor||h.fontSize!==s.fontSize||h.dx!==s.dx||h.dy!==s.dy)return!1}}return!0}},{}],77:[function(p,x,y){x.exports=function(b,g,w,_,T){var k=g.model||s,L=g.view||s,M=g.projection||s,I=g._ortho||!1,P=b.bounds,S=(T=T||t(k,L,M,P,I)).axis;i(a,L,k),i(a,M,a);for(var E=m,D=0;D<3;++D)E[D].lo=1/0,E[D].hi=-1/0,E[D].pixelsPerDataUnit=1/0;var F=e(n(a,a));n(a,a);for(var H=0;H<3;++H){var V=(H+1)%3,Q=(H+2)%3,K=c;e:for(D=0;D<2;++D){var Z=[];if(S[H]<0!=!!D){K[H]=P[D][H];for(var $=0;$<2;++$){K[V]=P[$^D][V];for(var re=0;re<2;++re)K[Q]=P[re^$^D][Q],Z.push(K.slice())}var R=I?5:4;for($=R;$===R;++$){if(Z.length===0)continue e;Z=r.positive(Z,F[$])}for($=0;$<Z.length;++$){Q=Z[$];var N=v(c,a,Q,w,_);for(re=0;re<3;++re)E[re].lo=Math.min(E[re].lo,Q[re]),E[re].hi=Math.max(E[re].hi,Q[re]),re!==H&&(E[re].pixelsPerDataUnit=Math.min(E[re].pixelsPerDataUnit,Math.abs(N[re])))}}}}return E};var e=p("extract-frustum-planes"),r=p("split-polygon"),t=p("./lib/cube.js"),i=p("gl-mat4/multiply"),n=p("gl-mat4/transpose"),h=p("gl-vec4/transformMat4"),s=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),a=new Float32Array(16);function l(b,g,w){this.lo=b,this.hi=g,this.pixelsPerDataUnit=w}var f=[0,0,0,1],d=[0,0,0,1];function v(b,g,w,_,T){for(var k=0;k<3;++k){for(var L=f,M=d,I=0;I<3;++I)M[I]=L[I]=w[I];M[3]=L[3]=1,M[k]+=1,h(M,M,g),M[3]<0&&(b[k]=1/0),L[k]-=1,h(L,L,g),L[3]<0&&(b[k]=1/0);var P=(L[0]/L[3]-M[0]/M[3])*_,S=(L[1]/L[3]-M[1]/M[3])*T;b[k]=.25*Math.sqrt(P*P+S*S)}return b}var m=[new l(1/0,-1/0,1/0),new l(1/0,-1/0,1/0),new l(1/0,-1/0,1/0)],c=[0,0,0]},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(p,x,y){var e=p("typedarray-pool"),r=p("ndarray-ops"),t=p("ndarray"),i=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function n(l,f,d,v,m){this.gl=l,this.type=f,this.handle=d,this.length=v,this.usage=m}var h=n.prototype;function s(l,f,d,v,m,c){var b=m.length*m.BYTES_PER_ELEMENT;if(c<0)return l.bufferData(f,m,v),b;if(b+c>d)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return l.bufferSubData(f,c,m),d}function a(l,f){for(var d=e.malloc(l.length,f),v=l.length,m=0;m<v;++m)d[m]=l[m];return d}h.bind=function(){this.gl.bindBuffer(this.type,this.handle)},h.unbind=function(){this.gl.bindBuffer(this.type,null)},h.dispose=function(){this.gl.deleteBuffer(this.handle)},h.update=function(l,f){if(typeof f!="number"&&(f=-1),this.bind(),typeof l=="object"&&l.shape!==void 0){var d=l.dtype;if(i.indexOf(d)<0&&(d="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(d=gl.getExtension("OES_element_index_uint")&&d!=="uint16"?"uint32":"uint16"),d===l.dtype&&function(b,g){for(var w=1,_=g.length-1;_>=0;--_){if(g[_]!==w)return!1;w*=b[_]}return!0}(l.shape,l.stride))l.offset===0&&l.data.length===l.shape[0]?this.length=s(this.gl,this.type,this.length,this.usage,l.data,f):this.length=s(this.gl,this.type,this.length,this.usage,l.data.subarray(l.offset,l.shape[0]),f);else{var v=e.malloc(l.size,d),m=t(v,l.shape);r.assign(m,l),this.length=s(this.gl,this.type,this.length,this.usage,f<0?v:v.subarray(0,l.size),f),e.free(v)}}else if(Array.isArray(l)){var c;c=this.type===this.gl.ELEMENT_ARRAY_BUFFER?a(l,"uint16"):a(l,"float32"),this.length=s(this.gl,this.type,this.length,this.usage,f<0?c:c.subarray(0,l.length),f),e.free(c)}else if(typeof l=="object"&&typeof l.length=="number")this.length=s(this.gl,this.type,this.length,this.usage,l,f);else{if(typeof l!="number"&&l!==void 0)throw new Error("gl-buffer: Invalid data type");if(f>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(l|=0)<=0&&(l=1),this.gl.bufferData(this.type,0|l,this.usage),this.length=l}},x.exports=function(l,f,d,v){if(d=d||l.ARRAY_BUFFER,v=v||l.DYNAMIC_DRAW,d!==l.ARRAY_BUFFER&&d!==l.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(v!==l.DYNAMIC_DRAW&&v!==l.STATIC_DRAW&&v!==l.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var m=l.createBuffer(),c=new n(l,d,m,0,v);return c.update(f),c}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(p,x,y){var e=p("gl-vec3");x.exports=function(t,i){var n=t.positions,h=t.vectors,s={positions:[],vertexIntensity:[],vertexIntensityBounds:t.vertexIntensityBounds,vectors:[],cells:[],coneOffset:t.coneOffset,colormap:t.colormap};if(t.positions.length===0)return i&&(i[0]=[0,0,0],i[1]=[0,0,0]),s;for(var a=0,l=1/0,f=-1/0,d=1/0,v=-1/0,m=1/0,c=-1/0,b=null,g=null,w=[],_=1/0,T=!1,k=0;k<n.length;k++){var L=n[k];l=Math.min(L[0],l),f=Math.max(L[0],f),d=Math.min(L[1],d),v=Math.max(L[1],v),m=Math.min(L[2],m),c=Math.max(L[2],c);var M=h[k];if(e.length(M)>a&&(a=e.length(M)),k){var I=2*e.distance(b,L)/(e.length(g)+e.length(M));I?(_=Math.min(_,I),T=!1):T=!0}T||(b=L,g=M),w.push(M)}var P=[l,d,m],S=[f,v,c];i&&(i[0]=P,i[1]=S),a===0&&(a=1);var E=1/a;isFinite(_)||(_=1),s.vectorScale=_;var D=t.coneSize||.5;t.absoluteConeSize&&(D=t.absoluteConeSize*E),s.coneScale=D,k=0;for(var F=0;k<n.length;k++)for(var H=(L=n[k])[0],V=L[1],Q=L[2],K=w[k],Z=e.length(K)*E,$=0;$<8;$++){s.positions.push([H,V,Q,F++]),s.positions.push([H,V,Q,F++]),s.positions.push([H,V,Q,F++]),s.positions.push([H,V,Q,F++]),s.positions.push([H,V,Q,F++]),s.positions.push([H,V,Q,F++]),s.vectors.push(K),s.vectors.push(K),s.vectors.push(K),s.vectors.push(K),s.vectors.push(K),s.vectors.push(K),s.vertexIntensity.push(Z,Z,Z),s.vertexIntensity.push(Z,Z,Z);var re=s.positions.length;s.cells.push([re-6,re-5,re-4],[re-3,re-2,re-1])}return s};var r=p("./lib/shaders");x.exports.createMesh=p("./create_mesh"),x.exports.createConeMesh=function(t,i){return x.exports.createMesh(t,i,{shaders:r,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(p,x,y){var e=p("gl-shader"),r=p("gl-buffer"),t=p("gl-vao"),i=p("gl-texture2d"),n=p("gl-mat4/multiply"),h=p("gl-mat4/invert"),s=p("ndarray"),a=p("colormap"),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function f(c,b,g,w,_,T,k,L,M,I,P){this.gl=c,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=b,this.dirty=!0,this.triShader=g,this.pickShader=w,this.trianglePositions=_,this.triangleVectors=T,this.triangleColors=L,this.triangleUVs=M,this.triangleIds=k,this.triangleVAO=I,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=P,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=l,this._view=l,this._projection=l,this._resolution=[1,1]}var d=f.prototype;function v(c,b){var g=e(c,b.meshShader.vertex,b.meshShader.fragment,null,b.meshShader.attributes);return g.attributes.position.location=0,g.attributes.color.location=2,g.attributes.uv.location=3,g.attributes.vector.location=4,g}function m(c,b){var g=e(c,b.pickShader.vertex,b.pickShader.fragment,null,b.pickShader.attributes);return g.attributes.position.location=0,g.attributes.id.location=1,g.attributes.vector.location=4,g}d.isOpaque=function(){return this.opacity>=1},d.isTransparent=function(){return this.opacity<1},d.pickSlots=1,d.setPickBase=function(c){this.pickId=c},d.update=function(c){c=c||{};var b=this.gl;this.dirty=!0,"lightPosition"in c&&(this.lightPosition=c.lightPosition),"opacity"in c&&(this.opacity=c.opacity),"ambient"in c&&(this.ambientLight=c.ambient),"diffuse"in c&&(this.diffuseLight=c.diffuse),"specular"in c&&(this.specularLight=c.specular),"roughness"in c&&(this.roughness=c.roughness),"fresnel"in c&&(this.fresnel=c.fresnel),c.tubeScale!==void 0&&(this.tubeScale=c.tubeScale),c.vectorScale!==void 0&&(this.vectorScale=c.vectorScale),c.coneScale!==void 0&&(this.coneScale=c.coneScale),c.coneOffset!==void 0&&(this.coneOffset=c.coneOffset),c.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=b.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=b.LINEAR,this.texture.setPixels(function(te){for(var j=a({colormap:te,nshades:256,format:"rgba"}),Y=new Uint8Array(1024),J=0;J<256;++J){for(var ee=j[J],ne=0;ne<3;++ne)Y[4*J+ne]=ee[ne];Y[4*J+3]=255*ee[3]}return s(Y,[256,256,4],[4,0,1])}(c.colormap)),this.texture.generateMipmap());var g=c.cells,w=c.positions,_=c.vectors;if(w&&g&&_){var T=[],k=[],L=[],M=[],I=[];this.cells=g,this.positions=w,this.vectors=_;var P=c.meshColor||[1,1,1,1],S=c.vertexIntensity,E=1/0,D=-1/0;if(S)if(c.vertexIntensityBounds)E=+c.vertexIntensityBounds[0],D=+c.vertexIntensityBounds[1];else for(var F=0;F<S.length;++F){var H=S[F];E=Math.min(E,H),D=Math.max(D,H)}else for(F=0;F<w.length;++F)H=w[F][2],E=Math.min(E,H),D=Math.max(D,H);for(this.intensity=S||function(te){for(var j=te.length,Y=new Array(j),J=0;J<j;++J)Y[J]=te[J][2];return Y}(w),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],F=0;F<w.length;++F)for(var V=w[F],Q=0;Q<3;++Q)!isNaN(V[Q])&&isFinite(V[Q])&&(this.bounds[0][Q]=Math.min(this.bounds[0][Q],V[Q]),this.bounds[1][Q]=Math.max(this.bounds[1][Q],V[Q]));var K=0;e:for(F=0;F<g.length;++F){var Z=g[F];switch(Z.length){case 3:for(Q=0;Q<3;++Q){V=w[re=Z[Q]];for(var $=0;$<3;++$)if(isNaN(V[$])||!isFinite(V[$]))continue e}for(Q=0;Q<3;++Q){var re;V=w[re=Z[2-Q]],T.push(V[0],V[1],V[2],V[3]);var R=_[re];k.push(R[0],R[1],R[2],R[3]||0);var N,U=P;U.length===3?L.push(U[0],U[1],U[2],1):L.push(U[0],U[1],U[2],U[3]),N=S?[(S[re]-E)/(D-E),0]:[(V[2]-E)/(D-E),0],M.push(N[0],N[1]),I.push(F)}K+=1}}this.triangleCount=K,this.trianglePositions.update(T),this.triangleVectors.update(k),this.triangleColors.update(L),this.triangleUVs.update(M),this.triangleIds.update(new Uint32Array(I))}},d.drawTransparent=d.draw=function(c){c=c||{};for(var b=this.gl,g=c.model||l,w=c.view||l,_=c.projection||l,T=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],k=0;k<3;++k)T[0][k]=Math.max(T[0][k],this.clipBounds[0][k]),T[1][k]=Math.min(T[1][k],this.clipBounds[1][k]);var L={model:g,view:w,projection:_,inverseModel:l.slice(),clipBounds:T,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};L.inverseModel=h(L.inverseModel,L.model),b.disable(b.CULL_FACE),this.texture.bind(0);var M=new Array(16);for(n(M,L.view,L.model),n(M,L.projection,M),h(M,M),k=0;k<3;++k)L.eyePosition[k]=M[12+k]/M[15];var I=M[15];for(k=0;k<3;++k)I+=this.lightPosition[k]*M[4*k+3];for(k=0;k<3;++k){for(var P=M[12+k],S=0;S<3;++S)P+=M[4*S+k]*this.lightPosition[S];L.lightPosition[k]=P/I}if(this.triangleCount>0){var E=this.triShader;E.bind(),E.uniforms=L,this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},d.drawPick=function(c){c=c||{};for(var b=this.gl,g=c.model||l,w=c.view||l,_=c.projection||l,T=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],k=0;k<3;++k)T[0][k]=Math.max(T[0][k],this.clipBounds[0][k]),T[1][k]=Math.min(T[1][k],this.clipBounds[1][k]);this._model=[].slice.call(g),this._view=[].slice.call(w),this._projection=[].slice.call(_),this._resolution=[b.drawingBufferWidth,b.drawingBufferHeight];var L={model:g,view:w,projection:_,clipBounds:T,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},M=this.pickShader;M.bind(),M.uniforms=L,this.triangleCount>0&&(this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},d.pick=function(c){if(!c||c.id!==this.pickId)return null;var b=c.value[0]+256*c.value[1]+65536*c.value[2],g=this.cells[b],w=this.positions[g[1]].slice(0,3),_={position:w,dataCoordinate:w,index:Math.floor(g[1]/48)};return this.traceType==="cone"?_.index=Math.floor(g[1]/48):this.traceType==="streamtube"&&(_.intensity=this.intensity[g[1]],_.velocity=this.vectors[g[1]].slice(0,3),_.divergence=this.vectors[g[1]][3],_.index=b),_},d.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},x.exports=function(c,b,g){var w=g.shaders;arguments.length===1&&(c=(b=c).gl);var _=v(c,w),T=m(c,w),k=i(c,s(new Uint8Array([255,255,255,255]),[1,1,4]));k.generateMipmap(),k.minFilter=c.LINEAR_MIPMAP_LINEAR,k.magFilter=c.LINEAR;var L=r(c),M=r(c),I=r(c),P=r(c),S=r(c),E=t(c,[{buffer:L,type:c.FLOAT,size:4},{buffer:S,type:c.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:I,type:c.FLOAT,size:4},{buffer:P,type:c.FLOAT,size:2},{buffer:M,type:c.FLOAT,size:4}]),D=new f(c,k,_,T,L,M,S,I,P,E,g.traceType||"cone");return D.update(b),D}},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(p,x,y){var e=p("glslify"),r=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),t=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),i=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);y.meshShader={vertex:r,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},y.pickShader={vertex:i,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(p,x,y){x.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(p,x,y){var e=p("./1.0/numbers");x.exports=function(r){return e[r]}},{"./1.0/numbers":82}],84:[function(p,x,y){x.exports=function(f){var d=f.gl,v=e(d),m=r(d,[{buffer:v,type:d.FLOAT,size:3,offset:0,stride:40},{buffer:v,type:d.FLOAT,size:4,offset:12,stride:40},{buffer:v,type:d.FLOAT,size:3,offset:28,stride:40}]),c=t(d);c.attributes.position.location=0,c.attributes.color.location=1,c.attributes.offset.location=2;var b=new n(d,v,m,c);return b.update(f),b};var e=p("gl-buffer"),r=p("gl-vao"),t=p("./shaders/index"),i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function n(f,d,v,m){this.gl=f,this.shader=m,this.buffer=d,this.vao=v,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var h=n.prototype;function s(f,d){for(var v=0;v<3;++v)f[0][v]=Math.min(f[0][v],d[v]),f[1][v]=Math.max(f[1][v],d[v])}h.isOpaque=function(){return!this.hasAlpha},h.isTransparent=function(){return this.hasAlpha},h.drawTransparent=h.draw=function(f){var d=this.gl,v=this.shader.uniforms;this.shader.bind();var m=v.view=f.view||i,c=v.projection=f.projection||i;v.model=f.model||i,v.clipBounds=this.clipBounds,v.opacity=this.opacity;var b=m[12],g=m[13],w=m[14],_=m[15],T=(f._ortho?2:1)*this.pixelRatio*(c[3]*b+c[7]*g+c[11]*w+c[15]*_)/d.drawingBufferHeight;this.vao.bind();for(var k=0;k<3;++k)d.lineWidth(this.lineWidth[k]*this.pixelRatio),v.capSize=this.capSize[k]*T,this.lineCount[k]&&d.drawArrays(d.LINES,this.lineOffset[k],this.lineCount[k]);this.vao.unbind()};var a=function(){for(var f=new Array(3),d=0;d<3;++d){for(var v=[],m=1;m<=2;++m)for(var c=-1;c<=1;c+=2){var b=[0,0,0];b[(m+d)%3]=c,v.push(b)}f[d]=v}return f}();function l(f,d,v,m){for(var c=a[m],b=0;b<c.length;++b){var g=c[b];f.push(d[0],d[1],d[2],v[0],v[1],v[2],v[3],g[0],g[1],g[2])}return c.length}h.update=function(f){"lineWidth"in(f=f||{})&&(this.lineWidth=f.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in f&&(this.capSize=f.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in f&&(this.opacity=+f.opacity,this.opacity<1&&(this.hasAlpha=!0));var d=f.color||[[0,0,0],[0,0,0],[0,0,0]],v=f.position,m=f.error;if(Array.isArray(d[0])||(d=[d,d,d]),v&&m){var c=[],b=v.length,g=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var w=0;w<3;++w){this.lineOffset[w]=g;e:for(var _=0;_<b;++_){for(var T=v[_],k=0;k<3;++k)if(isNaN(T[k])||!isFinite(T[k]))continue e;var L=m[_],M=d[w];if(Array.isArray(M[0])&&(M=d[_]),M.length===3?M=[M[0],M[1],M[2],1]:M.length===4&&(M=[M[0],M[1],M[2],M[3]],!this.hasAlpha&&M[3]<1&&(this.hasAlpha=!0)),!isNaN(L[0][w])&&!isNaN(L[1][w])){var I;L[0][w]<0&&((I=T.slice())[w]+=L[0][w],c.push(T[0],T[1],T[2],M[0],M[1],M[2],M[3],0,0,0,I[0],I[1],I[2],M[0],M[1],M[2],M[3],0,0,0),s(this.bounds,I),g+=2+l(c,I,M,w)),L[1][w]>0&&((I=T.slice())[w]+=L[1][w],c.push(T[0],T[1],T[2],M[0],M[1],M[2],M[3],0,0,0,I[0],I[1],I[2],M[0],M[1],M[2],M[3],0,0,0),s(this.bounds,I),g+=2+l(c,I,M,w))}}this.lineCount[w]=g-this.lineOffset[w]}this.buffer.update(c)}},h.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(p,x,y){var e=p("glslify"),r=p("gl-shader"),t=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),i=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);x.exports=function(n){return r(n,t,i,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(p,x,y){var e=p("gl-texture2d");x.exports=function(b,g,w,_){r||(r=b.FRAMEBUFFER_UNSUPPORTED,t=b.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,i=b.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,n=b.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var T=b.getExtension("WEBGL_draw_buffers");if(!h&&T&&function(E,D){var F=E.getParameter(D.MAX_COLOR_ATTACHMENTS_WEBGL);h=new Array(F+1);for(var H=0;H<=F;++H){for(var V=new Array(F),Q=0;Q<H;++Q)V[Q]=E.COLOR_ATTACHMENT0+Q;for(Q=H;Q<F;++Q)V[Q]=E.NONE;h[H]=V}}(b,T),Array.isArray(g)&&(_=w,w=0|g[1],g=0|g[0]),typeof g!="number")throw new Error("gl-fbo: Missing shape parameter");var k=b.getParameter(b.MAX_RENDERBUFFER_SIZE);if(g<0||g>k||w<0||w>k)throw new Error("gl-fbo: Parameters are too large for FBO");var L=1;if("color"in(_=_||{})){if((L=Math.max(0|_.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(L>1){if(!T)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(L>b.getParameter(T.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+L+" draw buffers")}}var M=b.UNSIGNED_BYTE,I=b.getExtension("OES_texture_float");if(_.float&&L>0){if(!I)throw new Error("gl-fbo: Context does not support floating point textures");M=b.FLOAT}else _.preferFloat&&L>0&&I&&(M=b.FLOAT);var P=!0;"depth"in _&&(P=!!_.depth);var S=!1;return"stencil"in _&&(S=!!_.stencil),new v(b,g,w,M,L,P,S,T)};var r,t,i,n,h=null;function s(b){return[b.getParameter(b.FRAMEBUFFER_BINDING),b.getParameter(b.RENDERBUFFER_BINDING),b.getParameter(b.TEXTURE_BINDING_2D)]}function a(b,g){b.bindFramebuffer(b.FRAMEBUFFER,g[0]),b.bindRenderbuffer(b.RENDERBUFFER,g[1]),b.bindTexture(b.TEXTURE_2D,g[2])}function l(b){switch(b){case r:throw new Error("gl-fbo: Framebuffer unsupported");case t:throw new Error("gl-fbo: Framebuffer incomplete attachment");case i:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case n:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function f(b,g,w,_,T,k){if(!_)return null;var L=e(b,g,w,T,_);return L.magFilter=b.NEAREST,L.minFilter=b.NEAREST,L.mipSamples=1,L.bind(),b.framebufferTexture2D(b.FRAMEBUFFER,k,b.TEXTURE_2D,L.handle,0),L}function d(b,g,w,_,T){var k=b.createRenderbuffer();return b.bindRenderbuffer(b.RENDERBUFFER,k),b.renderbufferStorage(b.RENDERBUFFER,_,g,w),b.framebufferRenderbuffer(b.FRAMEBUFFER,T,b.RENDERBUFFER,k),k}function v(b,g,w,_,T,k,L,M){this.gl=b,this._shape=[0|g,0|w],this._destroyed=!1,this._ext=M,this.color=new Array(T);for(var I=0;I<T;++I)this.color[I]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=_,this._useDepth=k,this._useStencil=L;var P=this,S=[0|g,0|w];Object.defineProperties(S,{0:{get:function(){return P._shape[0]},set:function(E){return P.width=E}},1:{get:function(){return P._shape[1]},set:function(E){return P.height=E}}}),this._shapeVector=S,function(E){var D=s(E.gl),F=E.gl,H=E.handle=F.createFramebuffer(),V=E._shape[0],Q=E._shape[1],K=E.color.length,Z=E._ext,$=E._useStencil,re=E._useDepth,R=E._colorType;F.bindFramebuffer(F.FRAMEBUFFER,H);for(var N=0;N<K;++N)E.color[N]=f(F,V,Q,R,F.RGBA,F.COLOR_ATTACHMENT0+N);K===0?(E._color_rb=d(F,V,Q,F.RGBA4,F.COLOR_ATTACHMENT0),Z&&Z.drawBuffersWEBGL(h[0])):K>1&&Z.drawBuffersWEBGL(h[K]);var U=F.getExtension("WEBGL_depth_texture");U?$?E.depth=f(F,V,Q,U.UNSIGNED_INT_24_8_WEBGL,F.DEPTH_STENCIL,F.DEPTH_STENCIL_ATTACHMENT):re&&(E.depth=f(F,V,Q,F.UNSIGNED_SHORT,F.DEPTH_COMPONENT,F.DEPTH_ATTACHMENT)):re&&$?E._depth_rb=d(F,V,Q,F.DEPTH_STENCIL,F.DEPTH_STENCIL_ATTACHMENT):re?E._depth_rb=d(F,V,Q,F.DEPTH_COMPONENT16,F.DEPTH_ATTACHMENT):$&&(E._depth_rb=d(F,V,Q,F.STENCIL_INDEX,F.STENCIL_ATTACHMENT));var te=F.checkFramebufferStatus(F.FRAMEBUFFER);if(te!==F.FRAMEBUFFER_COMPLETE){for(E._destroyed=!0,F.bindFramebuffer(F.FRAMEBUFFER,null),F.deleteFramebuffer(E.handle),E.handle=null,E.depth&&(E.depth.dispose(),E.depth=null),E._depth_rb&&(F.deleteRenderbuffer(E._depth_rb),E._depth_rb=null),N=0;N<E.color.length;++N)E.color[N].dispose(),E.color[N]=null;E._color_rb&&(F.deleteRenderbuffer(E._color_rb),E._color_rb=null),a(F,D),l(te)}a(F,D)}(this)}var m=v.prototype;function c(b,g,w){if(b._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(b._shape[0]!==g||b._shape[1]!==w){var _=b.gl,T=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(g<0||g>T||w<0||w>T)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");b._shape[0]=g,b._shape[1]=w;for(var k=s(_),L=0;L<b.color.length;++L)b.color[L].shape=b._shape;b._color_rb&&(_.bindRenderbuffer(_.RENDERBUFFER,b._color_rb),_.renderbufferStorage(_.RENDERBUFFER,_.RGBA4,b._shape[0],b._shape[1])),b.depth&&(b.depth.shape=b._shape),b._depth_rb&&(_.bindRenderbuffer(_.RENDERBUFFER,b._depth_rb),b._useDepth&&b._useStencil?_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_STENCIL,b._shape[0],b._shape[1]):b._useDepth?_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_COMPONENT16,b._shape[0],b._shape[1]):b._useStencil&&_.renderbufferStorage(_.RENDERBUFFER,_.STENCIL_INDEX,b._shape[0],b._shape[1])),_.bindFramebuffer(_.FRAMEBUFFER,b.handle);var M=_.checkFramebufferStatus(_.FRAMEBUFFER);M!==_.FRAMEBUFFER_COMPLETE&&(b.dispose(),a(_,k),l(M)),a(_,k)}}Object.defineProperties(m,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(b){if(Array.isArray(b)||(b=[0|b,0|b]),b.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var g=0|b[0],w=0|b[1];return c(this,g,w),[g,w]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(b){return c(this,b|=0,this._shape[1]),b},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(b){return b|=0,c(this,this._shape[0],b),b},enumerable:!1}}),m.bind=function(){if(!this._destroyed){var b=this.gl;b.bindFramebuffer(b.FRAMEBUFFER,this.handle),b.viewport(0,0,this._shape[0],this._shape[1])}},m.dispose=function(){if(!this._destroyed){this._destroyed=!0;var b=this.gl;b.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(b.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var g=0;g<this.color.length;++g)this.color[g].dispose(),this.color[g]=null;this._color_rb&&(b.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":146}],87:[function(p,x,y){var e=p("sprintf-js").sprintf,r=p("gl-constants/lookup"),t=p("glsl-shader-name"),i=p("add-line-numbers");x.exports=function(n,h,s){var a=t(h)||"of unknown name (see npm glsl-shader-name)",l="unknown type";s!==void 0&&(l=s===r.FRAGMENT_SHADER?"fragment":"vertex");for(var f=e(`Error compiling %s shader %s:
`,l,a),d=e("%s%s",f,n),v=n.split(`
`),m={},c=0;c<v.length;c++){var b=v[c];if(b!==""&&b!=="\0"){var g=parseInt(b.split(":")[2]);if(isNaN(g))throw new Error(e("Could not parse error: %s",b));m[g]=b}}var w=i(h).split(`
`);for(c=0;c<w.length;c++)if(m[c+3]||m[c+2]||m[c+1]){var _=w[c];if(f+=_+`
`,m[c+1]){var T=m[c+1];T=T.substr(T.split(":",3).join(":").length+1).trim(),f+=e(`^^^ %s

`,T)}}return{long:f.trim(),short:d.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(p,x,y){x.exports=function(d,v){var m=d.gl,c=i(m,h.vertex,h.fragment),b=i(m,h.pickVertex,h.pickFragment),g=n(m),w=n(m),_=n(m),T=n(m),k=new s(d,c,b,g,w,_,T);return k.update(v),d.addObject(k),k};var e=p("binary-search-bounds"),r=p("iota-array"),t=p("typedarray-pool"),i=p("gl-shader"),n=p("gl-buffer"),h=p("./lib/shaders");function s(d,v,m,c,b,g,w){this.plot=d,this.shader=v,this.pickShader=m,this.positionBuffer=c,this.weightBuffer=b,this.colorBuffer=g,this.idBuffer=w,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var a,l=s.prototype,f=[0,0,1,0,0,1,1,0,1,1,0,1];l.draw=(a=[1,0,0,0,1,0,0,0,1],function(){var d=this.plot,v=this.shader,m=this.bounds,c=this.numVertices;if(!(c<=0)){var b=d.gl,g=d.dataBox,w=m[2]-m[0],_=m[3]-m[1],T=g[2]-g[0],k=g[3]-g[1];a[0]=2*w/T,a[4]=2*_/k,a[6]=2*(m[0]-g[0])/T-1,a[7]=2*(m[1]-g[1])/k-1,v.bind();var L=v.uniforms;L.viewTransform=a,L.shape=this.shape;var M=v.attributes;this.positionBuffer.bind(),M.position.pointer(),this.weightBuffer.bind(),M.weight.pointer(b.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),M.color.pointer(b.UNSIGNED_BYTE,!0),b.drawArrays(b.TRIANGLES,0,c)}}),l.drawPick=function(){var d=[1,0,0,0,1,0,0,0,1],v=[0,0,0,0];return function(m){var c=this.plot,b=this.pickShader,g=this.bounds,w=this.numVertices;if(!(w<=0)){var _=c.gl,T=c.dataBox,k=g[2]-g[0],L=g[3]-g[1],M=T[2]-T[0],I=T[3]-T[1];d[0]=2*k/M,d[4]=2*L/I,d[6]=2*(g[0]-T[0])/M-1,d[7]=2*(g[1]-T[1])/I-1;for(var P=0;P<4;++P)v[P]=m>>8*P&255;this.pickOffset=m,b.bind();var S=b.uniforms;S.viewTransform=d,S.pickOffset=v,S.shape=this.shape;var E=b.attributes;return this.positionBuffer.bind(),E.position.pointer(),this.weightBuffer.bind(),E.weight.pointer(_.UNSIGNED_BYTE,!1),this.idBuffer.bind(),E.pickId.pointer(_.UNSIGNED_BYTE,!1),_.drawArrays(_.TRIANGLES,0,w),m+this.shape[0]*this.shape[1]}}}(),l.pick=function(d,v,m){var c=this.pickOffset,b=this.shape[0]*this.shape[1];if(m<c||m>=c+b)return null;var g=m-c,w=this.xData,_=this.yData;return{object:this,pointId:g,dataCoord:[w[g%this.shape[0]],_[g/this.shape[0]|0]]}},l.update=function(d){var v=(d=d||{}).shape||[0,0],m=d.x||r(v[0]),c=d.y||r(v[1]),b=d.z||new Float32Array(v[0]*v[1]),g=d.zsmooth!==!1;this.xData=m,this.yData=c;var w,_,T,k,L=d.colorLevels||[0],M=d.colorValues||[0,0,0,1],I=L.length,P=this.bounds;g?(w=P[0]=m[0],_=P[1]=c[0],T=P[2]=m[m.length-1],k=P[3]=c[c.length-1]):(w=P[0]=m[0]+(m[1]-m[0])/2,_=P[1]=c[0]+(c[1]-c[0])/2,T=P[2]=m[m.length-1]+(m[m.length-1]-m[m.length-2])/2,k=P[3]=c[c.length-1]+(c[c.length-1]-c[c.length-2])/2);var S=1/(T-w),E=1/(k-_),D=v[0],F=v[1];this.shape=[D,F];var H=(g?(D-1)*(F-1):D*F)*(f.length>>>1);this.numVertices=H;for(var V=t.mallocUint8(4*H),Q=t.mallocFloat32(2*H),K=t.mallocUint8(2*H),Z=t.mallocUint32(H),$=0,re=g?D-1:D,R=g?F-1:F,N=0;N<R;++N){var U,te;g?(U=E*(c[N]-_),te=E*(c[N+1]-_)):(U=N<F-1?E*(c[N]-(c[N+1]-c[N])/2-_):E*(c[N]-(c[N]-c[N-1])/2-_),te=N<F-1?E*(c[N]+(c[N+1]-c[N])/2-_):E*(c[N]+(c[N]-c[N-1])/2-_));for(var j=0;j<re;++j){var Y,J;g?(Y=S*(m[j]-w),J=S*(m[j+1]-w)):(Y=j<D-1?S*(m[j]-(m[j+1]-m[j])/2-w):S*(m[j]-(m[j]-m[j-1])/2-w),J=j<D-1?S*(m[j]+(m[j+1]-m[j])/2-w):S*(m[j]+(m[j]-m[j-1])/2-w));for(var ee=0;ee<f.length;ee+=2){var ne,se,oe,he,le=f[ee],de=f[ee+1],xe=b[g?(N+de)*D+(j+le):N*D+j],we=e.le(L,xe);if(we<0)ne=M[0],se=M[1],oe=M[2],he=M[3];else if(we===I-1)ne=M[4*I-4],se=M[4*I-3],oe=M[4*I-2],he=M[4*I-1];else{var be=(xe-L[we])/(L[we+1]-L[we]),Ae=1-be,fe=4*we,me=4*(we+1);ne=Ae*M[fe]+be*M[me],se=Ae*M[fe+1]+be*M[me+1],oe=Ae*M[fe+2]+be*M[me+2],he=Ae*M[fe+3]+be*M[me+3]}V[4*$]=255*ne,V[4*$+1]=255*se,V[4*$+2]=255*oe,V[4*$+3]=255*he,Q[2*$]=.5*Y+.5*J,Q[2*$+1]=.5*U+.5*te,K[2*$]=le,K[2*$+1]=de,Z[$]=N*D+j,$+=1}}}this.positionBuffer.update(Q),this.weightBuffer.update(K),this.colorBuffer.update(V),this.idBuffer.update(Z),t.free(Q),t.free(V),t.free(K),t.free(Z)},l.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(p,x,y){var e=p("glslify");x.exports={fragment:e([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:231}],90:[function(p,x,y){var e=p("glslify"),r=p("gl-shader"),t=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),i=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),h=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];y.createShader=function(s){return r(s,t,i,null,h)},y.createPickShader=function(s){return r(s,t,n,null,h)}},{"gl-shader":132,glslify:231}],91:[function(p,x,y){x.exports=function(w){var _=w.gl||w.scene&&w.scene.gl,T=l(_);T.attributes.position.location=0,T.attributes.nextPosition.location=1,T.attributes.arcLength.location=2,T.attributes.lineWidth.location=3,T.attributes.color.location=4;var k=f(_);k.attributes.position.location=0,k.attributes.nextPosition.location=1,k.attributes.arcLength.location=2,k.attributes.lineWidth.location=3,k.attributes.color.location=4;for(var L=e(_),M=r(_,[{buffer:L,size:3,offset:0,stride:48},{buffer:L,size:3,offset:12,stride:48},{buffer:L,size:1,offset:24,stride:48},{buffer:L,size:1,offset:28,stride:48},{buffer:L,size:4,offset:32,stride:48}]),I=s(new Array(1024),[256,1,4]),P=0;P<1024;++P)I.data[P]=255;var S=t(_,I);S.wrap=_.REPEAT;var E=new b(_,T,k,L,M,S);return E.update(w),E};var e=p("gl-buffer"),r=p("gl-vao"),t=p("gl-texture2d"),i=new Uint8Array(4),n=new Float32Array(i.buffer),h=p("binary-search-bounds"),s=p("ndarray"),a=p("./lib/shaders"),l=a.createShader,f=a.createPickShader,d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function v(w,_){for(var T=0,k=0;k<3;++k){var L=w[k]-_[k];T+=L*L}return Math.sqrt(T)}function m(w){for(var _=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],T=0;T<3;++T)_[0][T]=Math.max(w[0][T],_[0][T]),_[1][T]=Math.min(w[1][T],_[1][T]);return _}function c(w,_,T,k){this.arcLength=w,this.position=_,this.index=T,this.dataCoordinate=k}function b(w,_,T,k,L,M){this.gl=w,this.shader=_,this.pickShader=T,this.buffer=k,this.vao=L,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=M,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var g=b.prototype;g.isTransparent=function(){return this.hasAlpha},g.isOpaque=function(){return!this.hasAlpha},g.pickSlots=1,g.setPickBase=function(w){this.pickId=w},g.drawTransparent=g.draw=function(w){if(this.vertexCount){var _=this.gl,T=this.shader,k=this.vao;T.bind(),T.uniforms={model:w.model||d,view:w.view||d,projection:w.projection||d,clipBounds:m(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},k.bind(),k.draw(_.TRIANGLE_STRIP,this.vertexCount),k.unbind()}},g.drawPick=function(w){if(this.vertexCount){var _=this.gl,T=this.pickShader,k=this.vao;T.bind(),T.uniforms={model:w.model||d,view:w.view||d,projection:w.projection||d,pickId:this.pickId,clipBounds:m(this.clipBounds),screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},k.bind(),k.draw(_.TRIANGLE_STRIP,this.vertexCount),k.unbind()}},g.update=function(w){var _,T;this.dirty=!0;var k=!!w.connectGaps;"dashScale"in w&&(this.dashScale=w.dashScale),this.hasAlpha=!1,"opacity"in w&&(this.opacity=+w.opacity,this.opacity<1&&(this.hasAlpha=!0));var L=[],M=[],I=[],P=0,S=0,E=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],D=w.position||w.positions;if(D){var F=w.color||w.colors||[0,0,0,1],H=w.lineWidth||1,V=!1;e:for(_=1;_<D.length;++_){var Q,K,Z,$=D[_-1],re=D[_];for(M.push(P),I.push($.slice()),T=0;T<3;++T){if(isNaN($[T])||isNaN(re[T])||!isFinite($[T])||!isFinite(re[T])){if(!k&&L.length>0){for(var R=0;R<24;++R)L.push(L[L.length-12]);S+=2,V=!0}continue e}E[0][T]=Math.min(E[0][T],$[T],re[T]),E[1][T]=Math.max(E[1][T],$[T],re[T])}Array.isArray(F[0])?(Q=F.length>_-1?F[_-1]:F.length>0?F[F.length-1]:[0,0,0,1],K=F.length>_?F[_]:F.length>0?F[F.length-1]:[0,0,0,1]):Q=K=F,Q.length===3&&(Q=[Q[0],Q[1],Q[2],1]),K.length===3&&(K=[K[0],K[1],K[2],1]),!this.hasAlpha&&Q[3]<1&&(this.hasAlpha=!0),Z=Array.isArray(H)?H.length>_-1?H[_-1]:H.length>0?H[H.length-1]:[0,0,0,1]:H;var N=P;if(P+=v($,re),V){for(T=0;T<2;++T)L.push($[0],$[1],$[2],re[0],re[1],re[2],N,Z,Q[0],Q[1],Q[2],Q[3]);S+=2,V=!1}L.push($[0],$[1],$[2],re[0],re[1],re[2],N,Z,Q[0],Q[1],Q[2],Q[3],$[0],$[1],$[2],re[0],re[1],re[2],N,-Z,Q[0],Q[1],Q[2],Q[3],re[0],re[1],re[2],$[0],$[1],$[2],P,-Z,K[0],K[1],K[2],K[3],re[0],re[1],re[2],$[0],$[1],$[2],P,Z,K[0],K[1],K[2],K[3]),S+=4}}if(this.buffer.update(L),M.push(P),I.push(D[D.length-1].slice()),this.bounds=E,this.vertexCount=S,this.points=I,this.arcLength=M,"dashes"in w){var U=w.dashes.slice();for(U.unshift(0),_=1;_<U.length;++_)U[_]=U[_-1]+U[_];var te=s(new Array(1024),[256,1,4]);for(_=0;_<256;++_){for(T=0;T<4;++T)te.set(_,0,T,0);1&h.le(U,U[U.length-1]*_/255)?te.set(_,0,0,0):te.set(_,0,0,255)}this.texture.setPixels(te)}},g.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},g.pick=function(w){if(!w||w.id!==this.pickId)return null;var _=function(D,F,H,V){return i[0]=V,i[1]=H,i[2]=F,i[3]=D,n[0]}(w.value[0],w.value[1],w.value[2],0),T=h.le(this.arcLength,_);if(T<0)return null;if(T===this.arcLength.length-1)return new c(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),T);for(var k=this.points[T],L=this.points[Math.min(T+1,this.points.length-1)],M=(_-this.arcLength[T])/(this.arcLength[T+1]-this.arcLength[T]),I=1-M,P=[0,0,0],S=0;S<3;++S)P[S]=I*k[S]+M*L[S];var E=Math.min(M<.5?T:T+1,this.points.length-1);return new c(_,P,E,this.points[E])}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(p,x,y){x.exports=function(e){var r=new Float32Array(16);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}},{}],93:[function(p,x,y){x.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],94:[function(p,x,y){x.exports=function(e){var r=e[0],t=e[1],i=e[2],n=e[3],h=e[4],s=e[5],a=e[6],l=e[7],f=e[8],d=e[9],v=e[10],m=e[11],c=e[12],b=e[13],g=e[14],w=e[15];return(r*s-t*h)*(v*w-m*g)-(r*a-i*h)*(d*w-m*b)+(r*l-n*h)*(d*g-v*b)+(t*a-i*s)*(f*w-m*c)-(t*l-n*s)*(f*g-v*c)+(i*l-n*a)*(f*b-d*c)}},{}],95:[function(p,x,y){x.exports=function(e,r){var t=r[0],i=r[1],n=r[2],h=r[3],s=t+t,a=i+i,l=n+n,f=t*s,d=i*s,v=i*a,m=n*s,c=n*a,b=n*l,g=h*s,w=h*a,_=h*l;return e[0]=1-v-b,e[1]=d+_,e[2]=m-w,e[3]=0,e[4]=d-_,e[5]=1-f-b,e[6]=c+g,e[7]=0,e[8]=m+w,e[9]=c-g,e[10]=1-f-v,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],96:[function(p,x,y){x.exports=function(e,r,t){var i=r[0],n=r[1],h=r[2],s=r[3],a=i+i,l=n+n,f=h+h,d=i*a,v=i*l,m=i*f,c=n*l,b=n*f,g=h*f,w=s*a,_=s*l,T=s*f;return e[0]=1-(c+g),e[1]=v+T,e[2]=m-_,e[3]=0,e[4]=v-T,e[5]=1-(d+g),e[6]=b+w,e[7]=0,e[8]=m+_,e[9]=b-w,e[10]=1-(d+c),e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}},{}],97:[function(p,x,y){x.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],98:[function(p,x,y){x.exports=function(e,r){var t=r[0],i=r[1],n=r[2],h=r[3],s=r[4],a=r[5],l=r[6],f=r[7],d=r[8],v=r[9],m=r[10],c=r[11],b=r[12],g=r[13],w=r[14],_=r[15],T=t*a-i*s,k=t*l-n*s,L=t*f-h*s,M=i*l-n*a,I=i*f-h*a,P=n*f-h*l,S=d*g-v*b,E=d*w-m*b,D=d*_-c*b,F=v*w-m*g,H=v*_-c*g,V=m*_-c*w,Q=T*V-k*H+L*F+M*D-I*E+P*S;return Q?(Q=1/Q,e[0]=(a*V-l*H+f*F)*Q,e[1]=(n*H-i*V-h*F)*Q,e[2]=(g*P-w*I+_*M)*Q,e[3]=(m*I-v*P-c*M)*Q,e[4]=(l*D-s*V-f*E)*Q,e[5]=(t*V-n*D+h*E)*Q,e[6]=(w*L-b*P-_*k)*Q,e[7]=(d*P-m*L+c*k)*Q,e[8]=(s*H-a*D+f*S)*Q,e[9]=(i*D-t*H-h*S)*Q,e[10]=(b*I-g*L+_*T)*Q,e[11]=(v*L-d*I-c*T)*Q,e[12]=(a*E-s*F-l*S)*Q,e[13]=(t*F-i*E+n*S)*Q,e[14]=(g*k-b*M-w*T)*Q,e[15]=(d*M-v*k+m*T)*Q,e):null}},{}],99:[function(p,x,y){var e=p("./identity");x.exports=function(r,t,i,n){var h,s,a,l,f,d,v,m,c,b,g=t[0],w=t[1],_=t[2],T=n[0],k=n[1],L=n[2],M=i[0],I=i[1],P=i[2];return Math.abs(g-M)<1e-6&&Math.abs(w-I)<1e-6&&Math.abs(_-P)<1e-6?e(r):(v=g-M,m=w-I,c=_-P,b=1/Math.sqrt(v*v+m*m+c*c),h=k*(c*=b)-L*(m*=b),s=L*(v*=b)-T*c,a=T*m-k*v,(b=Math.sqrt(h*h+s*s+a*a))?(h*=b=1/b,s*=b,a*=b):(h=0,s=0,a=0),l=m*a-c*s,f=c*h-v*a,d=v*s-m*h,(b=Math.sqrt(l*l+f*f+d*d))?(l*=b=1/b,f*=b,d*=b):(l=0,f=0,d=0),r[0]=h,r[1]=l,r[2]=v,r[3]=0,r[4]=s,r[5]=f,r[6]=m,r[7]=0,r[8]=a,r[9]=d,r[10]=c,r[11]=0,r[12]=-(h*g+s*w+a*_),r[13]=-(l*g+f*w+d*_),r[14]=-(v*g+m*w+c*_),r[15]=1,r)}},{"./identity":97}],100:[function(p,x,y){x.exports=function(e,r,t){var i=r[0],n=r[1],h=r[2],s=r[3],a=r[4],l=r[5],f=r[6],d=r[7],v=r[8],m=r[9],c=r[10],b=r[11],g=r[12],w=r[13],_=r[14],T=r[15],k=t[0],L=t[1],M=t[2],I=t[3];return e[0]=k*i+L*a+M*v+I*g,e[1]=k*n+L*l+M*m+I*w,e[2]=k*h+L*f+M*c+I*_,e[3]=k*s+L*d+M*b+I*T,k=t[4],L=t[5],M=t[6],I=t[7],e[4]=k*i+L*a+M*v+I*g,e[5]=k*n+L*l+M*m+I*w,e[6]=k*h+L*f+M*c+I*_,e[7]=k*s+L*d+M*b+I*T,k=t[8],L=t[9],M=t[10],I=t[11],e[8]=k*i+L*a+M*v+I*g,e[9]=k*n+L*l+M*m+I*w,e[10]=k*h+L*f+M*c+I*_,e[11]=k*s+L*d+M*b+I*T,k=t[12],L=t[13],M=t[14],I=t[15],e[12]=k*i+L*a+M*v+I*g,e[13]=k*n+L*l+M*m+I*w,e[14]=k*h+L*f+M*c+I*_,e[15]=k*s+L*d+M*b+I*T,e}},{}],101:[function(p,x,y){x.exports=function(e,r,t,i,n,h,s){var a=1/(r-t),l=1/(i-n),f=1/(h-s);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*f,e[11]=0,e[12]=(r+t)*a,e[13]=(n+i)*l,e[14]=(s+h)*f,e[15]=1,e}},{}],102:[function(p,x,y){x.exports=function(e,r,t,i,n){var h=1/Math.tan(r/2),s=1/(i-n);return e[0]=h/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=h,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(n+i)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*n*i*s,e[15]=0,e}},{}],103:[function(p,x,y){x.exports=function(e,r,t,i){var n,h,s,a,l,f,d,v,m,c,b,g,w,_,T,k,L,M,I,P,S,E,D,F,H=i[0],V=i[1],Q=i[2],K=Math.sqrt(H*H+V*V+Q*Q);return Math.abs(K)<1e-6?null:(H*=K=1/K,V*=K,Q*=K,n=Math.sin(t),h=Math.cos(t),s=1-h,a=r[0],l=r[1],f=r[2],d=r[3],v=r[4],m=r[5],c=r[6],b=r[7],g=r[8],w=r[9],_=r[10],T=r[11],k=H*H*s+h,L=V*H*s+Q*n,M=Q*H*s-V*n,I=H*V*s-Q*n,P=V*V*s+h,S=Q*V*s+H*n,E=H*Q*s+V*n,D=V*Q*s-H*n,F=Q*Q*s+h,e[0]=a*k+v*L+g*M,e[1]=l*k+m*L+w*M,e[2]=f*k+c*L+_*M,e[3]=d*k+b*L+T*M,e[4]=a*I+v*P+g*S,e[5]=l*I+m*P+w*S,e[6]=f*I+c*P+_*S,e[7]=d*I+b*P+T*S,e[8]=a*E+v*D+g*F,e[9]=l*E+m*D+w*F,e[10]=f*E+c*D+_*F,e[11]=d*E+b*D+T*F,r!==e&&(e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e)}},{}],104:[function(p,x,y){x.exports=function(e,r,t){var i=Math.sin(t),n=Math.cos(t),h=r[4],s=r[5],a=r[6],l=r[7],f=r[8],d=r[9],v=r[10],m=r[11];return r!==e&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[4]=h*n+f*i,e[5]=s*n+d*i,e[6]=a*n+v*i,e[7]=l*n+m*i,e[8]=f*n-h*i,e[9]=d*n-s*i,e[10]=v*n-a*i,e[11]=m*n-l*i,e}},{}],105:[function(p,x,y){x.exports=function(e,r,t){var i=Math.sin(t),n=Math.cos(t),h=r[0],s=r[1],a=r[2],l=r[3],f=r[8],d=r[9],v=r[10],m=r[11];return r!==e&&(e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=h*n-f*i,e[1]=s*n-d*i,e[2]=a*n-v*i,e[3]=l*n-m*i,e[8]=h*i+f*n,e[9]=s*i+d*n,e[10]=a*i+v*n,e[11]=l*i+m*n,e}},{}],106:[function(p,x,y){x.exports=function(e,r,t){var i=Math.sin(t),n=Math.cos(t),h=r[0],s=r[1],a=r[2],l=r[3],f=r[4],d=r[5],v=r[6],m=r[7];return r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=h*n+f*i,e[1]=s*n+d*i,e[2]=a*n+v*i,e[3]=l*n+m*i,e[4]=f*n-h*i,e[5]=d*n-s*i,e[6]=v*n-a*i,e[7]=m*n-l*i,e}},{}],107:[function(p,x,y){x.exports=function(e,r,t){var i=t[0],n=t[1],h=t[2];return e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i,e[3]=r[3]*i,e[4]=r[4]*n,e[5]=r[5]*n,e[6]=r[6]*n,e[7]=r[7]*n,e[8]=r[8]*h,e[9]=r[9]*h,e[10]=r[10]*h,e[11]=r[11]*h,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}},{}],108:[function(p,x,y){x.exports=function(e,r,t){var i,n,h,s,a,l,f,d,v,m,c,b,g=t[0],w=t[1],_=t[2];return r===e?(e[12]=r[0]*g+r[4]*w+r[8]*_+r[12],e[13]=r[1]*g+r[5]*w+r[9]*_+r[13],e[14]=r[2]*g+r[6]*w+r[10]*_+r[14],e[15]=r[3]*g+r[7]*w+r[11]*_+r[15]):(i=r[0],n=r[1],h=r[2],s=r[3],a=r[4],l=r[5],f=r[6],d=r[7],v=r[8],m=r[9],c=r[10],b=r[11],e[0]=i,e[1]=n,e[2]=h,e[3]=s,e[4]=a,e[5]=l,e[6]=f,e[7]=d,e[8]=v,e[9]=m,e[10]=c,e[11]=b,e[12]=i*g+a*w+v*_+r[12],e[13]=n*g+l*w+m*_+r[13],e[14]=h*g+f*w+c*_+r[14],e[15]=s*g+d*w+b*_+r[15]),e}},{}],109:[function(p,x,y){x.exports=function(e,r){if(e===r){var t=r[1],i=r[2],n=r[3],h=r[6],s=r[7],a=r[11];e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=t,e[6]=r[9],e[7]=r[13],e[8]=i,e[9]=h,e[11]=r[14],e[12]=n,e[13]=s,e[14]=a}else e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=r[1],e[5]=r[5],e[6]=r[9],e[7]=r[13],e[8]=r[2],e[9]=r[6],e[10]=r[10],e[11]=r[14],e[12]=r[3],e[13]=r[7],e[14]=r[11],e[15]=r[15];return e}},{}],110:[function(p,x,y){var e=p("barycentric"),r=p("polytope-closest-point/lib/closest_point_2d.js");function t(h,s){for(var a=[0,0,0,0],l=0;l<4;++l)for(var f=0;f<4;++f)a[f]+=h[4*l+f]*s[l];return a}function i(h,s,a,l,f){for(var d=t(l,t(a,t(s,[h[0],h[1],h[2],1]))),v=0;v<3;++v)d[v]/=d[3];return[.5*f[0]*(1+d[0]),.5*f[1]*(1-d[1])]}function n(h,s){for(var a=[0,0,0],l=0;l<h.length;++l)for(var f=h[l],d=s[l],v=0;v<3;++v)a[v]+=d*f[v];return a}x.exports=function(h,s,a,l,f,d){if(h.length===1)return[0,h[0].slice()];for(var v=new Array(h.length),m=0;m<h.length;++m)v[m]=i(h[m],a,l,f,d);var c=0,b=1/0;for(m=0;m<v.length;++m){for(var g=0,w=0;w<2;++w)g+=Math.pow(v[m][w]-s[w],2);g<b&&(b=g,c=m)}var _=function(k,L){if(k.length===2){for(var M=0,I=0,P=0;P<2;++P)M+=Math.pow(L[P]-k[0][P],2),I+=Math.pow(L[P]-k[1][P],2);return M=Math.sqrt(M),I=Math.sqrt(I),M+I<1e-6?[1,0]:[I/(M+I),M/(I+M)]}if(k.length===3){var S=[0,0];return r(k[0],k[1],k[2],L,S),e(k,S)}return[]}(v,s),T=0;for(m=0;m<3;++m){if(_[m]<-.001||_[m]>1.0001)return null;T+=_[m]}return Math.abs(T-1)>.001?null:[c,n(h,_),_]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(p,x,y){var e=p("glslify"),r=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),t=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),i=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),n=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),h=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),s=e([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),a=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),l=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),f=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),d=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),v=e([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);y.meshShader={vertex:r,fragment:t,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},y.wireShader={vertex:i,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},y.pointShader={vertex:h,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},y.pickShader={vertex:a,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},y.pointPickShader={vertex:f,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},y.contourShader={vertex:d,fragment:v,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(p,x,y){var e=p("gl-shader"),r=p("gl-buffer"),t=p("gl-vao"),i=p("gl-texture2d"),n=p("normals"),h=p("gl-mat4/multiply"),s=p("gl-mat4/invert"),a=p("ndarray"),l=p("colormap"),f=p("simplicial-complex-contour"),d=p("typedarray-pool"),v=p("./lib/shaders"),m=p("./lib/closest-point"),c=v.meshShader,b=v.wireShader,g=v.pointShader,w=v.pickShader,_=v.pointPickShader,T=v.contourShader,k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function L(V,Q,K,Z,$,re,R,N,U,te,j,Y,J,ee,ne,se,oe,he,le,de,xe,we,be,Ae,fe,me,ke){this.gl=V,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=Q,this.dirty=!0,this.triShader=K,this.lineShader=Z,this.pointShader=$,this.pickShader=re,this.pointPickShader=R,this.contourShader=N,this.trianglePositions=U,this.triangleColors=j,this.triangleNormals=J,this.triangleUVs=Y,this.triangleIds=te,this.triangleVAO=ee,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ne,this.edgeColors=oe,this.edgeUVs=he,this.edgeIds=se,this.edgeVAO=le,this.edgeCount=0,this.pointPositions=de,this.pointColors=we,this.pointUVs=be,this.pointSizes=Ae,this.pointIds=xe,this.pointVAO=fe,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=me,this.contourVAO=ke,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=k,this._view=k,this._projection=k,this._resolution=[1,1]}var M=L.prototype;function I(V,Q){if(!Q||!Q.length)return 1;for(var K=0;K<Q.length;++K){if(Q.length<2)return 1;if(Q[K][0]===V)return Q[K][1];if(Q[K][0]>V&&K>0){var Z=(Q[K][0]-V)/(Q[K][0]-Q[K-1][0]);return Q[K][1]*(1-Z)+Z*Q[K-1][1]}}return 1}function P(V){var Q=e(V,c.vertex,c.fragment);return Q.attributes.position.location=0,Q.attributes.color.location=2,Q.attributes.uv.location=3,Q.attributes.normal.location=4,Q}function S(V){var Q=e(V,b.vertex,b.fragment);return Q.attributes.position.location=0,Q.attributes.color.location=2,Q.attributes.uv.location=3,Q}function E(V){var Q=e(V,g.vertex,g.fragment);return Q.attributes.position.location=0,Q.attributes.color.location=2,Q.attributes.uv.location=3,Q.attributes.pointSize.location=4,Q}function D(V){var Q=e(V,w.vertex,w.fragment);return Q.attributes.position.location=0,Q.attributes.id.location=1,Q}function F(V){var Q=e(V,_.vertex,_.fragment);return Q.attributes.position.location=0,Q.attributes.id.location=1,Q.attributes.pointSize.location=4,Q}function H(V){var Q=e(V,T.vertex,T.fragment);return Q.attributes.position.location=0,Q}M.isOpaque=function(){return!this.hasAlpha},M.isTransparent=function(){return this.hasAlpha},M.pickSlots=1,M.setPickBase=function(V){this.pickId=V},M.highlight=function(V){if(V&&this.contourEnable){for(var Q=f(this.cells,this.intensity,V.intensity),K=Q.cells,Z=Q.vertexIds,$=Q.vertexWeights,re=K.length,R=d.mallocFloat32(6*re),N=0,U=0;U<re;++U)for(var te=K[U],j=0;j<2;++j){var Y=te[0];te.length===2&&(Y=te[j]);for(var J=Z[Y][0],ee=Z[Y][1],ne=$[Y],se=1-ne,oe=this.positions[J],he=this.positions[ee],le=0;le<3;++le)R[N++]=ne*oe[le]+se*he[le]}this.contourCount=N/3|0,this.contourPositions.update(R.subarray(0,N)),d.free(R)}else this.contourCount=0},M.update=function(V){V=V||{};var Q=this.gl;this.dirty=!0,"contourEnable"in V&&(this.contourEnable=V.contourEnable),"contourColor"in V&&(this.contourColor=V.contourColor),"lineWidth"in V&&(this.lineWidth=V.lineWidth),"lightPosition"in V&&(this.lightPosition=V.lightPosition),this.hasAlpha=!1,"opacity"in V&&(this.opacity=V.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in V&&(this.opacityscale=V.opacityscale,this.hasAlpha=!0),"ambient"in V&&(this.ambientLight=V.ambient),"diffuse"in V&&(this.diffuseLight=V.diffuse),"specular"in V&&(this.specularLight=V.specular),"roughness"in V&&(this.roughness=V.roughness),"fresnel"in V&&(this.fresnel=V.fresnel),V.texture?(this.texture.dispose(),this.texture=i(Q,V.texture)):V.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=Q.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=Q.LINEAR,this.texture.setPixels(function(Qt,Ve){for(var Ye=l({colormap:Qt,nshades:256,format:"rgba"}),Be=new Uint8Array(1024),Je=0;Je<256;++Je){for(var Se=Ye[Je],Pe=0;Pe<3;++Pe)Be[4*Je+Pe]=Se[Pe];Be[4*Je+3]=Ve?255*I(Je/255,Ve):255*Se[3]}return a(Be,[256,256,4],[4,0,1])}(V.colormap,this.opacityscale)),this.texture.generateMipmap());var K=V.cells,Z=V.positions;if(Z&&K){var $=[],re=[],R=[],N=[],U=[],te=[],j=[],Y=[],J=[],ee=[],ne=[],se=[],oe=[],he=[];this.cells=K,this.positions=Z;var le=V.vertexNormals,de=V.cellNormals,xe=V.vertexNormalsEpsilon===void 0?1e-6:V.vertexNormalsEpsilon,we=V.faceNormalsEpsilon===void 0?1e-6:V.faceNormalsEpsilon;V.useFacetNormals&&!de&&(de=n.faceNormals(K,Z,we)),de||le||(le=n.vertexNormals(K,Z,xe));var be=V.vertexColors,Ae=V.cellColors,fe=V.meshColor||[1,1,1,1],me=V.vertexUVs,ke=V.vertexIntensity,Te=V.cellUVs,Me=V.cellIntensity,Oe=1/0,Fe=-1/0;if(!me&&!Te)if(ke)if(V.vertexIntensityBounds)Oe=+V.vertexIntensityBounds[0],Fe=+V.vertexIntensityBounds[1];else for(var qe=0;qe<ke.length;++qe){var et=ke[qe];Oe=Math.min(Oe,et),Fe=Math.max(Fe,et)}else if(Me)if(V.cellIntensityBounds)Oe=+V.cellIntensityBounds[0],Fe=+V.cellIntensityBounds[1];else for(qe=0;qe<Me.length;++qe)et=Me[qe],Oe=Math.min(Oe,et),Fe=Math.max(Fe,et);else for(qe=0;qe<Z.length;++qe)et=Z[qe][2],Oe=Math.min(Oe,et),Fe=Math.max(Fe,et);this.intensity=ke||Me||function(Qt){for(var Ve=Qt.length,Ye=new Array(Ve),Be=0;Be<Ve;++Be)Ye[Be]=Qt[Be][2];return Ye}(Z),this.pickVertex=!(Me||Ae);var ze=V.pointSizes,Ue=V.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],qe=0;qe<Z.length;++qe)for(var We=Z[qe],Ze=0;Ze<3;++Ze)!isNaN(We[Ze])&&isFinite(We[Ze])&&(this.bounds[0][Ze]=Math.min(this.bounds[0][Ze],We[Ze]),this.bounds[1][Ze]=Math.max(this.bounds[1][Ze],We[Ze]));var nt=0,ft=0,xt=0;e:for(qe=0;qe<K.length;++qe){var It=K[qe];switch(It.length){case 1:for(We=Z[it=It[0]],Ze=0;Ze<3;++Ze)if(isNaN(We[Ze])||!isFinite(We[Ze]))continue e;ee.push(We[0],We[1],We[2]),rt=be?be[it]:Ae?Ae[qe]:fe,this.opacityscale&&ke?re.push(rt[0],rt[1],rt[2],this.opacity*I((ke[it]-Oe)/(Fe-Oe),this.opacityscale)):rt.length===3?ne.push(rt[0],rt[1],rt[2],this.opacity):(ne.push(rt[0],rt[1],rt[2],rt[3]*this.opacity),rt[3]<1&&(this.hasAlpha=!0)),At=me?me[it]:ke?[(ke[it]-Oe)/(Fe-Oe),0]:Te?Te[qe]:Me?[(Me[qe]-Oe)/(Fe-Oe),0]:[(We[2]-Oe)/(Fe-Oe),0],se.push(At[0],At[1]),ze?oe.push(ze[it]):oe.push(Ue),he.push(qe),xt+=1;break;case 2:for(Ze=0;Ze<2;++Ze){We=Z[it=It[Ze]];for(var Et=0;Et<3;++Et)if(isNaN(We[Et])||!isFinite(We[Et]))continue e}for(Ze=0;Ze<2;++Ze)We=Z[it=It[Ze]],te.push(We[0],We[1],We[2]),rt=be?be[it]:Ae?Ae[qe]:fe,this.opacityscale&&ke?re.push(rt[0],rt[1],rt[2],this.opacity*I((ke[it]-Oe)/(Fe-Oe),this.opacityscale)):rt.length===3?j.push(rt[0],rt[1],rt[2],this.opacity):(j.push(rt[0],rt[1],rt[2],rt[3]*this.opacity),rt[3]<1&&(this.hasAlpha=!0)),At=me?me[it]:ke?[(ke[it]-Oe)/(Fe-Oe),0]:Te?Te[qe]:Me?[(Me[qe]-Oe)/(Fe-Oe),0]:[(We[2]-Oe)/(Fe-Oe),0],Y.push(At[0],At[1]),J.push(qe);ft+=1;break;case 3:for(Ze=0;Ze<3;++Ze)for(We=Z[it=It[Ze]],Et=0;Et<3;++Et)if(isNaN(We[Et])||!isFinite(We[Et]))continue e;for(Ze=0;Ze<3;++Ze){var it,rt,At,Gt;We=Z[it=It[2-Ze]],$.push(We[0],We[1],We[2]),(rt=be?be[it]:Ae?Ae[qe]:fe)?this.opacityscale&&ke?re.push(rt[0],rt[1],rt[2],this.opacity*I((ke[it]-Oe)/(Fe-Oe),this.opacityscale)):rt.length===3?re.push(rt[0],rt[1],rt[2],this.opacity):(re.push(rt[0],rt[1],rt[2],rt[3]*this.opacity),rt[3]<1&&(this.hasAlpha=!0)):re.push(.5,.5,.5,1),At=me?me[it]:ke?[(ke[it]-Oe)/(Fe-Oe),0]:Te?Te[qe]:Me?[(Me[qe]-Oe)/(Fe-Oe),0]:[(We[2]-Oe)/(Fe-Oe),0],N.push(At[0],At[1]),Gt=le?le[it]:de[qe],R.push(Gt[0],Gt[1],Gt[2]),U.push(qe)}nt+=1}}this.pointCount=xt,this.edgeCount=ft,this.triangleCount=nt,this.pointPositions.update(ee),this.pointColors.update(ne),this.pointUVs.update(se),this.pointSizes.update(oe),this.pointIds.update(new Uint32Array(he)),this.edgePositions.update(te),this.edgeColors.update(j),this.edgeUVs.update(Y),this.edgeIds.update(new Uint32Array(J)),this.trianglePositions.update($),this.triangleColors.update(re),this.triangleUVs.update(N),this.triangleNormals.update(R),this.triangleIds.update(new Uint32Array(U))}},M.drawTransparent=M.draw=function(V){V=V||{};for(var Q=this.gl,K=V.model||k,Z=V.view||k,$=V.projection||k,re=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],R=0;R<3;++R)re[0][R]=Math.max(re[0][R],this.clipBounds[0][R]),re[1][R]=Math.min(re[1][R],this.clipBounds[1][R]);var N={model:K,view:Z,projection:$,inverseModel:k.slice(),clipBounds:re,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};N.inverseModel=s(N.inverseModel,N.model),Q.disable(Q.CULL_FACE),this.texture.bind(0);var U=new Array(16);for(h(U,N.view,N.model),h(U,N.projection,U),s(U,U),R=0;R<3;++R)N.eyePosition[R]=U[12+R]/U[15];var te,j=U[15];for(R=0;R<3;++R)j+=this.lightPosition[R]*U[4*R+3];for(R=0;R<3;++R){for(var Y=U[12+R],J=0;J<3;++J)Y+=U[4*J+R]*this.lightPosition[J];N.lightPosition[R]=Y/j}this.triangleCount>0&&((te=this.triShader).bind(),te.uniforms=N,this.triangleVAO.bind(),Q.drawArrays(Q.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((te=this.lineShader).bind(),te.uniforms=N,this.edgeVAO.bind(),Q.lineWidth(this.lineWidth*this.pixelRatio),Q.drawArrays(Q.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((te=this.pointShader).bind(),te.uniforms=N,this.pointVAO.bind(),Q.drawArrays(Q.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((te=this.contourShader).bind(),te.uniforms=N,this.contourVAO.bind(),Q.drawArrays(Q.LINES,0,this.contourCount),this.contourVAO.unbind())},M.drawPick=function(V){V=V||{};for(var Q=this.gl,K=V.model||k,Z=V.view||k,$=V.projection||k,re=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],R=0;R<3;++R)re[0][R]=Math.max(re[0][R],this.clipBounds[0][R]),re[1][R]=Math.min(re[1][R],this.clipBounds[1][R]);this._model=[].slice.call(K),this._view=[].slice.call(Z),this._projection=[].slice.call($),this._resolution=[Q.drawingBufferWidth,Q.drawingBufferHeight];var N,U={model:K,view:Z,projection:$,clipBounds:re,pickId:this.pickId/255};(N=this.pickShader).bind(),N.uniforms=U,this.triangleCount>0&&(this.triangleVAO.bind(),Q.drawArrays(Q.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),Q.lineWidth(this.lineWidth*this.pixelRatio),Q.drawArrays(Q.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((N=this.pointPickShader).bind(),N.uniforms=U,this.pointVAO.bind(),Q.drawArrays(Q.POINTS,0,this.pointCount),this.pointVAO.unbind())},M.pick=function(V){if(!V||V.id!==this.pickId)return null;for(var Q=V.value[0]+256*V.value[1]+65536*V.value[2],K=this.cells[Q],Z=this.positions,$=new Array(K.length),re=0;re<K.length;++re)$[re]=Z[K[re]];var R=V.coord[0],N=V.coord[1];if(!this.pickVertex){var U=this.positions[K[0]],te=this.positions[K[1]],j=this.positions[K[2]],Y=[(U[0]+te[0]+j[0])/3,(U[1]+te[1]+j[1])/3,(U[2]+te[2]+j[2])/3];return{_cellCenter:!0,position:[R,N],index:Q,cell:K,cellId:Q,intensity:this.intensity[Q],dataCoordinate:Y}}var J=m($,[R*this.pixelRatio,this._resolution[1]-N*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!J)return null;var ee=J[2],ne=0;for(re=0;re<K.length;++re)ne+=ee[re]*this.intensity[K[re]];return{position:J[1],index:K[J[0]],cell:K,cellId:Q,intensity:ne,dataCoordinate:this.positions[K[J[0]]]}},M.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},x.exports=function(V,Q){arguments.length===1&&(V=(Q=V).gl);var K=V.getExtension("OES_standard_derivatives")||V.getExtension("MOZ_OES_standard_derivatives")||V.getExtension("WEBKIT_OES_standard_derivatives");if(!K)throw new Error("derivatives not supported");var Z=P(V),$=S(V),re=E(V),R=D(V),N=F(V),U=H(V),te=i(V,a(new Uint8Array([255,255,255,255]),[1,1,4]));te.generateMipmap(),te.minFilter=V.LINEAR_MIPMAP_LINEAR,te.magFilter=V.LINEAR;var j=r(V),Y=r(V),J=r(V),ee=r(V),ne=r(V),se=t(V,[{buffer:j,type:V.FLOAT,size:3},{buffer:ne,type:V.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Y,type:V.FLOAT,size:4},{buffer:J,type:V.FLOAT,size:2},{buffer:ee,type:V.FLOAT,size:3}]),oe=r(V),he=r(V),le=r(V),de=r(V),xe=t(V,[{buffer:oe,type:V.FLOAT,size:3},{buffer:de,type:V.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:he,type:V.FLOAT,size:4},{buffer:le,type:V.FLOAT,size:2}]),we=r(V),be=r(V),Ae=r(V),fe=r(V),me=r(V),ke=t(V,[{buffer:we,type:V.FLOAT,size:3},{buffer:me,type:V.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:be,type:V.FLOAT,size:4},{buffer:Ae,type:V.FLOAT,size:2},{buffer:fe,type:V.FLOAT,size:1}]),Te=r(V),Me=t(V,[{buffer:Te,type:V.FLOAT,size:3}]),Oe=new L(V,te,Z,$,re,R,N,U,j,ne,Y,J,ee,se,oe,de,he,le,xe,we,me,be,Ae,fe,ke,Te,Me);return Oe.update(Q),Oe}},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(p,x,y){x.exports=function(a){var l=a.gl,f=e(l,[0,0,0,1,1,0,1,1]),d=r(l,t.boxVert,t.lineFrag);return new i(a,f,d)};var e=p("gl-buffer"),r=p("gl-shader"),t=p("./shaders");function i(a,l,f){this.plot=a,this.vbo=l,this.shader=f}var n,h,s=i.prototype;s.bind=function(){var a=this.shader;this.vbo.bind(),this.shader.bind(),a.attributes.coord.pointer(),a.uniforms.screenBox=this.plot.screenBox},s.drawBox=(n=[0,0],h=[0,0],function(a,l,f,d,v){var m=this.plot,c=this.shader,b=m.gl;n[0]=a,n[1]=l,h[0]=f,h[1]=d,c.uniforms.lo=n,c.uniforms.hi=h,c.uniforms.color=v,b.drawArrays(b.TRIANGLE_STRIP,0,4)}),s.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(p,x,y){x.exports=function(m){var c=m.gl,b=e(c),g=r(c,i.gridVert,i.gridFrag),w=r(c,i.tickVert,i.gridFrag);return new n(m,b,g,w)};var e=p("gl-buffer"),r=p("gl-shader"),t=p("binary-search-bounds"),i=p("./shaders");function n(m,c,b,g){this.plot=m,this.vbo=c,this.shader=b,this.tickShader=g,this.ticks=[[],[]]}function h(m,c){return m-c}var s,a,l,f,d,v=n.prototype;v.draw=(s=[0,0],a=[0,0],l=[0,0],function(){for(var m=this.plot,c=this.vbo,b=this.shader,g=this.ticks,w=m.gl,_=m._tickBounds,T=m.dataBox,k=m.viewBox,L=m.gridLineWidth,M=m.gridLineColor,I=m.gridLineEnable,P=m.pixelRatio,S=0;S<2;++S){var E=_[S],D=_[S+2]-E,F=.5*(T[S+2]+T[S]),H=T[S+2]-T[S];a[S]=2*D/H,s[S]=2*(E-F)/H}b.bind(),c.bind(),b.attributes.dataCoord.pointer(),b.uniforms.dataShift=s,b.uniforms.dataScale=a;var V=0;for(S=0;S<2;++S){l[0]=l[1]=0,l[S]=1,b.uniforms.dataAxis=l,b.uniforms.lineWidth=L[S]/(k[S+2]-k[S])*P,b.uniforms.color=M[S];var Q=6*g[S].length;I[S]&&Q&&w.drawArrays(w.TRIANGLES,V,Q),V+=Q}}),v.drawTickMarks=function(){var m=[0,0],c=[0,0],b=[1,0],g=[0,1],w=[0,0],_=[0,0];return function(){for(var T=this.plot,k=this.vbo,L=this.tickShader,M=this.ticks,I=T.gl,P=T._tickBounds,S=T.dataBox,E=T.viewBox,D=T.pixelRatio,F=T.screenBox,H=F[2]-F[0],V=F[3]-F[1],Q=E[2]-E[0],K=E[3]-E[1],Z=0;Z<2;++Z){var $=P[Z],re=P[Z+2]-$,R=.5*(S[Z+2]+S[Z]),N=S[Z+2]-S[Z];c[Z]=2*re/N,m[Z]=2*($-R)/N}c[0]*=Q/H,m[0]*=Q/H,c[1]*=K/V,m[1]*=K/V,L.bind(),k.bind(),L.attributes.dataCoord.pointer();var U=L.uniforms;U.dataShift=m,U.dataScale=c;var te=T.tickMarkLength,j=T.tickMarkWidth,Y=T.tickMarkColor,J=6*M[0].length,ee=Math.min(t.ge(M[0],(S[0]-P[0])/(P[2]-P[0]),h),M[0].length),ne=Math.min(t.gt(M[0],(S[2]-P[0])/(P[2]-P[0]),h),M[0].length),se=0+6*ee,oe=6*Math.max(0,ne-ee),he=Math.min(t.ge(M[1],(S[1]-P[1])/(P[3]-P[1]),h),M[1].length),le=Math.min(t.gt(M[1],(S[3]-P[1])/(P[3]-P[1]),h),M[1].length),de=J+6*he,xe=6*Math.max(0,le-he);w[0]=2*(E[0]-te[1])/H-1,w[1]=(E[3]+E[1])/V-1,_[0]=te[1]*D/H,_[1]=j[1]*D/V,xe&&(U.color=Y[1],U.tickScale=_,U.dataAxis=g,U.screenOffset=w,I.drawArrays(I.TRIANGLES,de,xe)),w[0]=(E[2]+E[0])/H-1,w[1]=2*(E[1]-te[0])/V-1,_[0]=j[0]*D/H,_[1]=te[0]*D/V,oe&&(U.color=Y[0],U.tickScale=_,U.dataAxis=b,U.screenOffset=w,I.drawArrays(I.TRIANGLES,se,oe)),w[0]=2*(E[2]+te[3])/H-1,w[1]=(E[3]+E[1])/V-1,_[0]=te[3]*D/H,_[1]=j[3]*D/V,xe&&(U.color=Y[3],U.tickScale=_,U.dataAxis=g,U.screenOffset=w,I.drawArrays(I.TRIANGLES,de,xe)),w[0]=(E[2]+E[0])/H-1,w[1]=2*(E[3]+te[2])/V-1,_[0]=j[2]*D/H,_[1]=te[2]*D/V,oe&&(U.color=Y[2],U.tickScale=_,U.dataAxis=b,U.screenOffset=w,I.drawArrays(I.TRIANGLES,se,oe))}}(),v.update=(f=[1,1,-1,-1,1,-1],d=[1,-1,1,1,-1,-1],function(m){for(var c=m.ticks,b=m.bounds,g=new Float32Array(18*(c[0].length+c[1].length)),w=(this.plot.zeroLineEnable,0),_=[[],[]],T=0;T<2;++T)for(var k=_[T],L=c[T],M=b[T],I=b[T+2],P=0;P<L.length;++P){var S=(L[P].x-M)/(I-M);k.push(S);for(var E=0;E<6;++E)g[w++]=S,g[w++]=f[E],g[w++]=d[E]}this.ticks=_,this.vbo.update(g)}),v.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(p,x,y){x.exports=function(a){var l=a.gl,f=e(l,[-1,-1,-1,1,1,-1,1,1]),d=r(l,t.lineVert,t.lineFrag);return new i(a,f,d)};var e=p("gl-buffer"),r=p("gl-shader"),t=p("./shaders");function i(a,l,f){this.plot=a,this.vbo=l,this.shader=f}var n,h,s=i.prototype;s.bind=function(){var a=this.shader;this.vbo.bind(),this.shader.bind(),a.attributes.coord.pointer(),a.uniforms.screenBox=this.plot.screenBox},s.drawLine=(n=[0,0],h=[0,0],function(a,l,f,d,v,m){var c=this.plot,b=this.shader,g=c.gl;n[0]=a,n[1]=l,h[0]=f,h[1]=d,b.uniforms.start=n,b.uniforms.end=h,b.uniforms.width=v*c.pixelRatio,b.uniforms.color=m,g.drawArrays(g.TRIANGLE_STRIP,0,4)}),s.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(p,x,y){var e=p("glslify"),r=e([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);x.exports={lineVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:r,textVert:e([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:r,gridVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:r,boxVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:231}],117:[function(p,x,y){x.exports=function(c){var b=c.gl,g=e(b),w=r(b,n.textVert,n.textFrag);return new h(c,g,w)};var e=p("gl-buffer"),r=p("gl-shader"),t=p("text-cache"),i=p("binary-search-bounds"),n=p("./shaders");function h(c,b,g){this.plot=c,this.vbo=b,this.shader=g,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var s,a,l,f,d,v,m=h.prototype;m.drawTicks=(s=[0,0],a=[0,0],l=[0,0],function(c){var b=this.plot,g=this.shader,w=this.tickX[c],_=this.tickOffset[c],T=b.gl,k=b.viewBox,L=b.dataBox,M=b.screenBox,I=b.pixelRatio,P=b.tickEnable,S=b.tickPad,E=b.tickColor,D=b.tickAngle,F=b.labelEnable,H=b.labelPad,V=b.labelColor,Q=b.labelAngle,K=this.labelOffset[c],Z=this.labelCount[c],$=i.lt(w,L[c]),re=i.le(w,L[c+2]);s[0]=s[1]=0,s[c]=1,a[c]=(k[2+c]+k[c])/(M[2+c]-M[c])-1;var R=2/M[2+(1^c)]-M[1^c];a[1^c]=R*k[1^c]-1,P[c]&&(a[1^c]-=R*I*S[c],$<re&&_[re]>_[$]&&(g.uniforms.dataAxis=s,g.uniforms.screenOffset=a,g.uniforms.color=E[c],g.uniforms.angle=D[c],T.drawArrays(T.TRIANGLES,_[$],_[re]-_[$]))),F[c]&&Z&&(a[1^c]-=R*I*H[c],g.uniforms.dataAxis=l,g.uniforms.screenOffset=a,g.uniforms.color=V[c],g.uniforms.angle=Q[c],T.drawArrays(T.TRIANGLES,K,Z)),a[1^c]=R*k[2+(1^c)]-1,P[c+2]&&(a[1^c]+=R*I*S[c+2],$<re&&_[re]>_[$]&&(g.uniforms.dataAxis=s,g.uniforms.screenOffset=a,g.uniforms.color=E[c+2],g.uniforms.angle=D[c+2],T.drawArrays(T.TRIANGLES,_[$],_[re]-_[$]))),F[c+2]&&Z&&(a[1^c]+=R*I*H[c+2],g.uniforms.dataAxis=l,g.uniforms.screenOffset=a,g.uniforms.color=V[c+2],g.uniforms.angle=Q[c+2],T.drawArrays(T.TRIANGLES,K,Z))}),m.drawTitle=function(){var c=[0,0],b=[0,0];return function(){var g=this.plot,w=this.shader,_=g.gl,T=g.screenBox,k=g.titleCenter,L=g.titleAngle,M=g.titleColor,I=g.pixelRatio;if(this.titleCount){for(var P=0;P<2;++P)b[P]=2*(k[P]*I-T[P])/(T[2+P]-T[P])-1;w.bind(),w.uniforms.dataAxis=c,w.uniforms.screenOffset=b,w.uniforms.angle=L,w.uniforms.color=M,_.drawArrays(_.TRIANGLES,this.titleOffset,this.titleCount)}}}(),m.bind=(f=[0,0],d=[0,0],v=[0,0],function(){var c=this.plot,b=this.shader,g=c._tickBounds,w=c.dataBox,_=c.screenBox,T=c.viewBox;b.bind();for(var k=0;k<2;++k){var L=g[k],M=g[k+2]-L,I=.5*(w[k+2]+w[k]),P=w[k+2]-w[k],S=T[k],E=T[k+2]-S,D=_[k],F=_[k+2]-D;d[k]=2*M/P*E/F,f[k]=2*(L-I)/P*E/F}v[1]=2*c.pixelRatio/(_[3]-_[1]),v[0]=v[1]*(_[3]-_[1])/(_[2]-_[0]),b.uniforms.dataScale=d,b.uniforms.dataShift=f,b.uniforms.textScale=v,this.vbo.bind(),b.attributes.textCoordinate.pointer()}),m.update=function(c){var b,g,w,_,T,k=[],L=c.ticks,M=c.bounds;for(T=0;T<2;++T){var I=[Math.floor(k.length/3)],P=[-1/0],S=L[T];for(b=0;b<S.length;++b){var E=S[b],D=E.x,F=E.text,H=E.font||"sans-serif";_=E.fontSize||12;for(var V=1/(M[T+2]-M[T]),Q=M[T],K=F.split(`
`),Z=0;Z<K.length;Z++)for(w=t(H,K[Z]).data,g=0;g<w.length;g+=2)k.push(w[g]*_,-w[g+1]*_-Z*_*1.2,(D-Q)*V);I.push(Math.floor(k.length/3)),P.push(D)}this.tickOffset[T]=I,this.tickX[T]=P}for(T=0;T<2;++T){for(this.labelOffset[T]=Math.floor(k.length/3),w=t(c.labelFont[T],c.labels[T],{textAlign:"center"}).data,_=c.labelSize[T],b=0;b<w.length;b+=2)k.push(w[b]*_,-w[b+1]*_,0);this.labelCount[T]=Math.floor(k.length/3)-this.labelOffset[T]}for(this.titleOffset=Math.floor(k.length/3),w=t(c.titleFont,c.title).data,_=c.titleSize,b=0;b<w.length;b+=2)k.push(w[b]*_,-w[b+1]*_,0);this.titleCount=Math.floor(k.length/3)-this.titleOffset,this.vbo.update(k)},m.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(p,x,y){x.exports=function(f){var d=f.gl,v=e(d,[d.drawingBufferWidth,d.drawingBufferHeight]),m=new h(d,v);return m.grid=r(m),m.text=t(m),m.line=i(m),m.box=n(m),m.update(f),m};var e=p("gl-select-static"),r=p("./lib/grid"),t=p("./lib/text"),i=p("./lib/line"),n=p("./lib/box");function h(f,d){this.gl=f,this.pickBuffer=d,this.screenBox=[0,0,f.drawingBufferWidth,f.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var s=h.prototype;function a(f){for(var d=f.slice(),v=0;v<d.length;++v)d[v]=d[v].slice();return d}function l(f,d){return f.x-d.x}s.setDirty=function(){this.dirty=this.pickDirty=!0},s.setOverlayDirty=function(){this.dirty=!0},s.nextDepthValue=function(){return this._depthCounter++/65536},s.draw=function(){var f=this.gl,d=this.screenBox,v=this.viewBox,m=this.dataBox,c=this.pixelRatio,b=this.grid,g=this.line,w=this.text,_=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,f.bindFramebuffer(f.FRAMEBUFFER,null),f.enable(f.SCISSOR_TEST),f.disable(f.DEPTH_TEST),f.depthFunc(f.LESS),f.depthMask(!1),f.enable(f.BLEND),f.blendEquation(f.FUNC_ADD,f.FUNC_ADD),f.blendFunc(f.ONE,f.ONE_MINUS_SRC_ALPHA),this.borderColor){f.scissor(d[0],d[1],d[2]-d[0],d[3]-d[1]);var T=this.borderColor;f.clearColor(T[0]*T[3],T[1]*T[3],T[2]*T[3],T[3]),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT)}f.scissor(v[0],v[1],v[2]-v[0],v[3]-v[1]),f.viewport(v[0],v[1],v[2]-v[0],v[3]-v[1]);var k=this.backgroundColor;f.clearColor(k[0]*k[3],k[1]*k[3],k[2]*k[3],k[3]),f.clear(f.COLOR_BUFFER_BIT),b.draw();var L=this.zeroLineEnable,M=this.zeroLineColor,I=this.zeroLineWidth;if(L[0]||L[1]){g.bind();for(var P=0;P<2;++P)if(L[P]&&m[P]<=0&&m[P+2]>=0){var S=d[P]-m[P]*(d[P+2]-d[P])/(m[P+2]-m[P]);P===0?g.drawLine(S,d[1],S,d[3],I[P],M[P]):g.drawLine(d[0],S,d[2],S,I[P],M[P])}}for(P=0;P<_.length;++P)_[P].draw();f.viewport(d[0],d[1],d[2]-d[0],d[3]-d[1]),f.scissor(d[0],d[1],d[2]-d[0],d[3]-d[1]),this.grid.drawTickMarks(),g.bind();var E=this.borderLineEnable,D=this.borderLineWidth,F=this.borderLineColor;for(E[1]&&g.drawLine(v[0],v[1]-.5*D[1]*c,v[0],v[3]+.5*D[3]*c,D[1],F[1]),E[0]&&g.drawLine(v[0]-.5*D[0]*c,v[1],v[2]+.5*D[2]*c,v[1],D[0],F[0]),E[3]&&g.drawLine(v[2],v[1]-.5*D[1]*c,v[2],v[3]+.5*D[3]*c,D[3],F[3]),E[2]&&g.drawLine(v[0]-.5*D[0]*c,v[3],v[2]+.5*D[2]*c,v[3],D[2],F[2]),w.bind(),P=0;P<2;++P)w.drawTicks(P);this.titleEnable&&w.drawTitle();var H=this.overlays;for(P=0;P<H.length;++P)H[P].draw();f.disable(f.SCISSOR_TEST),f.disable(f.BLEND),f.depthMask(!0)}},s.drawPick=function(){if(!this.static){var f=this.pickBuffer;this.gl,this._pickTimeout=null,f.begin();for(var d=1,v=this.objects,m=0;m<v.length;++m)d=v[m].drawPick(d);f.end()}},s.pick=function(f,d){if(!this.static){var v=this.pixelRatio,m=this.pickPixelRatio,c=this.viewBox,b=0|Math.round((f-c[0]/v)*m),g=0|Math.round((d-c[1]/v)*m),w=this.pickBuffer.query(b,g,this.pickRadius);if(!w)return null;for(var _=w.id+(w.value[0]<<8)+(w.value[1]<<16)+(w.value[2]<<24),T=this.objects,k=0;k<T.length;++k){var L=T[k].pick(b,g,_);if(L)return L}return null}},s.setScreenBox=function(f){var d=this.screenBox,v=this.pixelRatio;d[0]=0|Math.round(f[0]*v),d[1]=0|Math.round(f[1]*v),d[2]=0|Math.round(f[2]*v),d[3]=0|Math.round(f[3]*v),this.setDirty()},s.setDataBox=function(f){var d=this.dataBox;(d[0]!==f[0]||d[1]!==f[1]||d[2]!==f[2]||d[3]!==f[3])&&(d[0]=f[0],d[1]=f[1],d[2]=f[2],d[3]=f[3],this.setDirty())},s.setViewBox=function(f){var d=this.pixelRatio,v=this.viewBox;v[0]=0|Math.round(f[0]*d),v[1]=0|Math.round(f[1]*d),v[2]=0|Math.round(f[2]*d),v[3]=0|Math.round(f[3]*d);var m=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((f[2]-f[0])*m),0|Math.round((f[3]-f[1])*m)],this.setDirty()},s.update=function(f){f=f||{};var d=this.gl;this.pixelRatio=f.pixelRatio||1;var v=this.pixelRatio;this.pickPixelRatio=Math.max(v,1),this.setScreenBox(f.screenBox||[0,0,d.drawingBufferWidth/v,d.drawingBufferHeight/v]),this.screenBox,this.setViewBox(f.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/v,.125*(this.screenBox[3]-this.screenBox[1])/v,.875*(this.screenBox[2]-this.screenBox[0])/v,.875*(this.screenBox[3]-this.screenBox[1])/v]);var m=this.viewBox,c=(m[2]-m[0])/(m[3]-m[1]);this.setDataBox(f.dataBox||[-10,-10/c,10,10/c]),this.borderColor=f.borderColor!==!1&&(f.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(f.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(f.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(f.gridLineWidth||[1,1]).slice(),this.gridLineColor=a(f.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(f.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(f.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=a(f.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(f.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(f.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=a(f.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(f.titleCenter||[.5*(m[0]+m[2])/v,(m[3]+120)/v]).slice(),this.titleEnable=!("titleEnable"in f)||!!f.titleEnable,this.titleAngle=f.titleAngle||0,this.titleColor=(f.titleColor||[0,0,0,1]).slice(),this.labelPad=(f.labelPad||[15,15,15,15]).slice(),this.labelAngle=(f.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(f.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=a(f.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(f.tickPad||[15,15,15,15]).slice(),this.tickAngle=(f.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(f.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=a(f.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(f.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(f.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=a(f.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var b=f.ticks||[[],[]],g=this._tickBounds;g[0]=g[1]=1/0,g[2]=g[3]=-1/0;for(var w=0;w<2;++w){var _=b[w].slice(0);_.length!==0&&(_.sort(l),g[w]=Math.min(g[w],_[0].x),g[w+2]=Math.max(g[w+2],_[_.length-1].x))}this.grid.update({bounds:g,ticks:b}),this.text.update({bounds:g,ticks:b,labels:f.labels||["x","y"],labelSize:f.labelSize||[12,12],labelFont:f.labelFont||["sans-serif","sans-serif"],title:f.title||"",titleSize:f.titleSize||18,titleFont:f.titleFont||"sans-serif"}),this.static=!!f.static,this.setDirty()},s.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var f=this.objects.length-1;f>=0;--f)this.objects[f].dispose();for(this.objects.length=0,f=this.overlays.length-1;f>=0;--f)this.overlays[f].dispose();this.overlays.length=0,this.gl=null},s.addObject=function(f){this.objects.indexOf(f)<0&&(this.objects.push(f),this.setDirty())},s.removeObject=function(f){for(var d=this.objects,v=0;v<d.length;++v)if(d[v]===f){d.splice(v,1),this.setDirty();break}},s.addOverlay=function(f){this.overlays.indexOf(f)<0&&(this.overlays.push(f),this.setOverlayDirty())},s.removeOverlay=function(f){for(var d=this.overlays,v=0;v<d.length;++v)if(d[v]===f){d.splice(v,1),this.setOverlayDirty();break}}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(p,x,y){x.exports=function(s,a){s=s||document.body,a=a||{};var l=[.01,1/0];"distanceLimits"in a&&(l[0]=a.distanceLimits[0],l[1]=a.distanceLimits[1]),"zoomMin"in a&&(l[0]=a.zoomMin),"zoomMax"in a&&(l[1]=a.zoomMax);var f=r({center:a.center||[0,0,0],up:a.up||[0,1,0],eye:a.eye||[0,0,10],mode:a.mode||"orbit",distanceLimits:l}),d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v=0,m=s.clientWidth,c=s.clientHeight,b={keyBindingMode:"rotate",enableWheel:!0,view:f,element:s,delay:a.delay||16,rotateSpeed:a.rotateSpeed||1,zoomSpeed:a.zoomSpeed||1,translateSpeed:a.translateSpeed||1,flipX:!!a.flipX,flipY:!!a.flipY,modes:f.modes,_ortho:a._ortho||a.projection&&a.projection.type==="orthographic"||!1,tick:function(){var g=e(),w=this.delay,_=g-2*w;f.idle(g-w),f.recalcMatrix(_),f.flush(g-(100+2*w));for(var T=!0,k=f.computedMatrix,L=0;L<16;++L)T=T&&d[L]===k[L],d[L]=k[L];var M=s.clientWidth===m&&s.clientHeight===c;return m=s.clientWidth,c=s.clientHeight,T?!M:(v=Math.exp(f.computedRadius[0]),!0)},lookAt:function(g,w,_){f.lookAt(f.lastT(),g,w,_)},rotate:function(g,w,_){f.rotate(f.lastT(),g,w,_)},pan:function(g,w,_){f.pan(f.lastT(),g,w,_)},translate:function(g,w,_){f.translate(f.lastT(),g,w,_)}};return Object.defineProperties(b,{matrix:{get:function(){return f.computedMatrix},set:function(g){return f.setMatrix(f.lastT(),g),f.computedMatrix},enumerable:!0},mode:{get:function(){return f.getMode()},set:function(g){var w=f.computedUp.slice(),_=f.computedEye.slice(),T=f.computedCenter.slice();if(f.setMode(g),g==="turntable"){var k=e();f._active.lookAt(k,_,T,w),f._active.lookAt(k+500,_,T,[0,0,1]),f._active.flush(k)}return f.getMode()},enumerable:!0},center:{get:function(){return f.computedCenter},set:function(g){return f.lookAt(f.lastT(),null,g),f.computedCenter},enumerable:!0},eye:{get:function(){return f.computedEye},set:function(g){return f.lookAt(f.lastT(),g),f.computedEye},enumerable:!0},up:{get:function(){return f.computedUp},set:function(g){return f.lookAt(f.lastT(),null,null,g),f.computedUp},enumerable:!0},distance:{get:function(){return v},set:function(g){return f.setDistance(f.lastT(),g),g},enumerable:!0},distanceLimits:{get:function(){return f.getDistanceLimits(l)},set:function(g){return f.setDistanceLimits(g),g},enumerable:!0}}),s.addEventListener("contextmenu",function(g){return g.preventDefault(),!1}),b._lastX=-1,b._lastY=-1,b._lastMods={shift:!1,control:!1,alt:!1,meta:!1},b.enableMouseListeners=function(){function g(w,_,T,k){var L=b.keyBindingMode;if(L!==!1){var M=L==="rotate",I=L==="pan",P=L==="zoom",S=!!k.control,E=!!k.alt,D=!!k.shift,F=!!(1&w),H=!!(2&w),V=!!(4&w),Q=1/s.clientHeight,K=Q*(_-b._lastX),Z=Q*(T-b._lastY),$=b.flipX?1:-1,re=b.flipY?1:-1,R=Math.PI*b.rotateSpeed,N=e();if(b._lastX!==-1&&b._lastY!==-1&&((M&&F&&!S&&!E&&!D||F&&!S&&!E&&D)&&f.rotate(N,$*R*K,-re*R*Z,0),(I&&F&&!S&&!E&&!D||H||F&&S&&!E&&!D)&&f.pan(N,-b.translateSpeed*K*v,b.translateSpeed*Z*v,0),P&&F&&!S&&!E&&!D||V||F&&!S&&E&&!D)){var U=-b.zoomSpeed*Z/window.innerHeight*(N-f.lastT())*100;f.pan(N,0,0,v*(Math.exp(U)-1))}return b._lastX=_,b._lastY=T,b._lastMods=k,!0}}b.mouseListener=t(s,g),s.addEventListener("touchstart",function(w){var _=n(w.changedTouches[0],s);g(0,_[0],_[1],b._lastMods),g(1,_[0],_[1],b._lastMods)},!!h&&{passive:!0}),s.addEventListener("touchmove",function(w){var _=n(w.changedTouches[0],s);g(1,_[0],_[1],b._lastMods),w.preventDefault()},!!h&&{passive:!1}),s.addEventListener("touchend",function(w){g(0,b._lastX,b._lastY,b._lastMods)},!!h&&{passive:!0}),b.wheelListener=i(s,function(w,_){if(b.keyBindingMode!==!1&&b.enableWheel){var T=b.flipX?1:-1,k=b.flipY?1:-1,L=e();if(Math.abs(w)>Math.abs(_))f.rotate(L,0,0,-w*T*Math.PI*b.rotateSpeed/window.innerWidth);else if(!b._ortho){var M=-b.zoomSpeed*k*_/window.innerHeight*(L-f.lastT())/20;f.pan(L,0,0,v*(Math.exp(M)-1))}}},!0)},b.enableMouseListeners(),b};var e=p("right-now"),r=p("3d-view"),t=p("mouse-change"),i=p("mouse-wheel"),n=p("mouse-event-offset"),h=p("has-passive-events")},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(p,x,y){var e=p("glslify"),r=p("gl-shader"),t=e([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),i=e([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);x.exports=function(n){return r(n,t,i,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(p,x,y){var e=p("./camera.js"),r=p("gl-axes3d"),t=p("gl-axes3d/properties"),i=p("gl-spikes3d"),n=p("gl-select-static"),h=p("gl-fbo"),s=p("a-big-triangle"),a=p("mouse-change"),l=p("gl-mat4/perspective"),f=p("gl-mat4/ortho"),d=p("./lib/shader"),v=p("is-mobile")({tablet:!0,featureDetect:!0});function m(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function c(g){var w=Math.round(Math.log(Math.abs(g))/Math.log(10));if(w<0){var _=Math.round(Math.pow(10,-w));return Math.ceil(g*_)/_}return w>0?(_=Math.round(Math.pow(10,w)),Math.ceil(g/_)*_):Math.ceil(g)}function b(g){return typeof g!="boolean"||g}x.exports={createScene:function(g){(g=g||{}).camera=g.camera||{};var w=g.canvas;w||(w=document.createElement("canvas"),g.container?g.container.appendChild(w):document.body.appendChild(w));var _=g.gl;if(_||(g.glOptions&&(v=!!g.glOptions.preserveDrawingBuffer),_=function(le,de){var xe=null;try{(xe=le.getContext("webgl",de))||(xe=le.getContext("experimental-webgl",de))}catch{return null}return xe}(w,g.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:v})),!_)throw new Error("webgl not supported");var T=g.bounds||[[-10,-10,-10],[10,10,10]],k=new m,L=h(_,_.drawingBufferWidth,_.drawingBufferHeight,{preferFloat:!v}),M=d(_),I=g.cameraObject&&g.cameraObject._ortho===!0||g.camera.projection&&g.camera.projection.type==="orthographic"||!1,P={eye:g.camera.eye||[2,0,0],center:g.camera.center||[0,0,0],up:g.camera.up||[0,1,0],zoomMin:g.camera.zoomMax||.1,zoomMax:g.camera.zoomMin||100,mode:g.camera.mode||"turntable",_ortho:I},S=g.axes||{},E=r(_,S);E.enable=!S.disable;var D=g.spikes||{},F=i(_,D),H=[],V=[],Q=[],K=[],Z=!0,$=!0,re=new Array(16),R=new Array(16),N={view:null,projection:re,model:R,_ortho:!1},U=($=!0,[_.drawingBufferWidth,_.drawingBufferHeight]),te=g.cameraObject||e(w,P),j={gl:_,contextLost:!1,pixelRatio:g.pixelRatio||1,canvas:w,selection:k,camera:te,axes:E,axesPixels:null,spikes:F,bounds:T,objects:H,shape:U,aspect:g.aspectRatio||[1,1,1],pickRadius:g.pickRadius||10,zNear:g.zNear||.01,zFar:g.zFar||1e3,fovy:g.fovy||Math.PI/4,clearColor:g.clearColor||[0,0,0,0],autoResize:b(g.autoResize),autoBounds:b(g.autoBounds),autoScale:!!g.autoScale,autoCenter:b(g.autoCenter),clipToBounds:b(g.clipToBounds),snapToData:!!g.snapToData,onselect:g.onselect||null,onrender:g.onrender||null,onclick:g.onclick||null,cameraParams:N,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(le){this.aspect[0]=le.x,this.aspect[1]=le.y,this.aspect[2]=le.z,$=!0},setBounds:function(le,de){this.bounds[0][le]=de.min,this.bounds[1][le]=de.max},setClearColor:function(le){this.clearColor=le},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},Y=[_.drawingBufferWidth/j.pixelRatio|0,_.drawingBufferHeight/j.pixelRatio|0];function J(){if(!j._stopped&&j.autoResize){var le=w.parentNode,de=1,xe=1;le&&le!==document.body?(de=le.clientWidth,xe=le.clientHeight):(de=window.innerWidth,xe=window.innerHeight);var we=0|Math.ceil(de*j.pixelRatio),be=0|Math.ceil(xe*j.pixelRatio);if(we!==w.width||be!==w.height){w.width=we,w.height=be;var Ae=w.style;Ae.position=Ae.position||"absolute",Ae.left="0px",Ae.top="0px",Ae.width=de+"px",Ae.height=xe+"px",Z=!0}}}j.autoResize&&J();function ee(){for(var le=H.length,de=K.length,xe=0;xe<de;++xe)Q[xe]=0;e:for(xe=0;xe<le;++xe){var we=H[xe],be=we.pickSlots;if(be){for(var Ae=0;Ae<de;++Ae)if(Q[Ae]+be<255){V[xe]=Ae,we.setPickBase(Q[Ae]+1),Q[Ae]+=be;continue e}var fe=n(_,U);V[xe]=de,K.push(fe),Q.push(be),we.setPickBase(1),de+=1}else V[xe]=-1}for(;de>0&&Q[de-1]===0;)Q.pop(),K.pop().dispose()}function ne(){if(j.contextLost)return!0;_.isContextLost()&&(j.contextLost=!0,j.mouseListener.enabled=!1,j.selection.object=null,j.oncontextloss&&j.oncontextloss())}window.addEventListener("resize",J),j.update=function(le){j._stopped||(Z=!0,$=!0)},j.add=function(le){j._stopped||(le.axes=E,H.push(le),V.push(-1),Z=!0,$=!0,ee())},j.remove=function(le){if(!j._stopped){var de=H.indexOf(le);de<0||(H.splice(de,1),V.pop(),Z=!0,$=!0,ee())}},j.dispose=function(){if(!j._stopped&&(j._stopped=!0,window.removeEventListener("resize",J),w.removeEventListener("webglcontextlost",ne),j.mouseListener.enabled=!1,!j.contextLost)){E.dispose(),F.dispose();for(var le=0;le<H.length;++le)H[le].dispose();for(L.dispose(),le=0;le<K.length;++le)K[le].dispose();M.dispose(),_=null,E=null,F=null,H=[]}},j._mouseRotating=!1,j._prevButtons=0,j.enableMouseListeners=function(){j.mouseListener=a(w,function(le,de,xe){if(!j._stopped){var we=K.length,be=H.length,Ae=k.object;k.distance=1/0,k.mouse[0]=de,k.mouse[1]=xe,k.object=null,k.screen=null,k.dataCoordinate=k.dataPosition=null;var fe=!1;if(le&&j._prevButtons)j._mouseRotating=!0;else{j._mouseRotating&&($=!0),j._mouseRotating=!1;for(var me=0;me<we;++me){var ke=K[me].query(de,Y[1]-xe-1,j.pickRadius);if(ke){if(ke.distance>k.distance)continue;for(var Te=0;Te<be;++Te){var Me=H[Te];if(V[Te]===me){var Oe=Me.pick(ke);Oe&&(k.buttons=le,k.screen=ke.coord,k.distance=ke.distance,k.object=Me,k.index=Oe.distance,k.dataPosition=Oe.position,k.dataCoordinate=Oe.dataCoordinate,k.data=Oe,fe=!0)}}}}}Ae&&Ae!==k.object&&(Ae.highlight&&Ae.highlight(null),Z=!0),k.object&&(k.object.highlight&&k.object.highlight(k.data),Z=!0),(fe=fe||k.object!==Ae)&&j.onselect&&j.onselect(k),1&le&&!(1&j._prevButtons)&&j.onclick&&j.onclick(k),j._prevButtons=le}})},w.addEventListener("webglcontextlost",ne);var se=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],oe=[se[0].slice(),se[1].slice()];function he(){if(!ne()){J();var le=j.camera.tick();N.view=j.camera.matrix,Z=Z||le,$=$||le,E.pixelRatio=j.pixelRatio,F.pixelRatio=j.pixelRatio;var de=H.length,xe=se[0],we=se[1];xe[0]=xe[1]=xe[2]=1/0,we[0]=we[1]=we[2]=-1/0;for(var be=0;be<de;++be){(Ue=H[be]).pixelRatio=j.pixelRatio,Ue.axes=j.axes,Z=Z||!!Ue.dirty,$=$||!!Ue.dirty;var Ae=Ue.bounds;if(Ae)for(var fe=Ae[0],me=Ae[1],ke=0;ke<3;++ke)xe[ke]=Math.min(xe[ke],fe[ke]),we[ke]=Math.max(we[ke],me[ke])}var Te=j.bounds;if(j.autoBounds)for(ke=0;ke<3;++ke){if(we[ke]<xe[ke])xe[ke]=-1,we[ke]=1;else{xe[ke]===we[ke]&&(xe[ke]-=1,we[ke]+=1);var Me=.05*(we[ke]-xe[ke]);xe[ke]=xe[ke]-Me,we[ke]=we[ke]+Me}Te[0][ke]=xe[ke],Te[1][ke]=we[ke]}var Oe=!1;for(ke=0;ke<3;++ke)Oe=Oe||oe[0][ke]!==Te[0][ke]||oe[1][ke]!==Te[1][ke],oe[0][ke]=Te[0][ke],oe[1][ke]=Te[1][ke];if($=$||Oe,Z=Z||Oe){if(Oe){var Fe=[0,0,0];for(be=0;be<3;++be)Fe[be]=c((Te[1][be]-Te[0][be])/10);E.autoTicks?E.update({bounds:Te,tickSpacing:Fe}):E.update({bounds:Te})}var qe=_.drawingBufferWidth,et=_.drawingBufferHeight;for(U[0]=qe,U[1]=et,Y[0]=0|Math.max(qe/j.pixelRatio,1),Y[1]=0|Math.max(et/j.pixelRatio,1),function(We,Ze){var nt=We.bounds,ft=We.cameraParams,xt=ft.projection,It=ft.model,Et=We.gl.drawingBufferWidth,it=We.gl.drawingBufferHeight,rt=We.zNear,At=We.zFar,Gt=We.fovy,Qt=Et/it;Ze?(f(xt,-Qt,Qt,-1,1,rt,At),ft._ortho=!0):(l(xt,Gt,Qt,rt,At),ft._ortho=!1);for(var Ve=0;Ve<16;++Ve)It[Ve]=0;It[15]=1;var Ye=0;for(Ve=0;Ve<3;++Ve)Ye=Math.max(Ye,nt[1][Ve]-nt[0][Ve]);for(Ve=0;Ve<3;++Ve)We.autoScale?It[5*Ve]=We.aspect[Ve]/(nt[1][Ve]-nt[0][Ve]):It[5*Ve]=1/Ye,We.autoCenter&&(It[12+Ve]=.5*-It[5*Ve]*(nt[0][Ve]+nt[1][Ve]))}(j,I),be=0;be<de;++be)(Ue=H[be]).axesBounds=Te,j.clipToBounds&&(Ue.clipBounds=Te);k.object&&(j.snapToData?F.position=k.dataCoordinate:F.position=k.dataPosition,F.bounds=Te),$&&($=!1,function(){if(!ne()){_.colorMask(!0,!0,!0,!0),_.depthMask(!0),_.disable(_.BLEND),_.enable(_.DEPTH_TEST),_.depthFunc(_.LEQUAL);for(var We=H.length,Ze=K.length,nt=0;nt<Ze;++nt){var ft=K[nt];ft.shape=Y,ft.begin();for(var xt=0;xt<We;++xt)if(V[xt]===nt){var It=H[xt];It.drawPick&&(It.pixelRatio=1,It.drawPick(N))}ft.end()}}}()),j.axesPixels=t(j.axes,N,qe,et),j.onrender&&j.onrender(),_.bindFramebuffer(_.FRAMEBUFFER,null),_.viewport(0,0,qe,et),j.clearRGBA(),_.depthMask(!0),_.colorMask(!0,!0,!0,!0),_.enable(_.DEPTH_TEST),_.depthFunc(_.LEQUAL),_.disable(_.BLEND),_.disable(_.CULL_FACE);var ze=!1;for(E.enable&&(ze=ze||E.isTransparent(),E.draw(N)),F.axes=E,k.object&&F.draw(N),_.disable(_.CULL_FACE),be=0;be<de;++be)(Ue=H[be]).axes=E,Ue.pixelRatio=j.pixelRatio,Ue.isOpaque&&Ue.isOpaque()&&Ue.draw(N),Ue.isTransparent&&Ue.isTransparent()&&(ze=!0);if(ze){for(L.shape=U,L.bind(),_.clear(_.DEPTH_BUFFER_BIT),_.colorMask(!1,!1,!1,!1),_.depthMask(!0),_.depthFunc(_.LESS),E.enable&&E.isTransparent()&&E.drawTransparent(N),be=0;be<de;++be)(Ue=H[be]).isOpaque&&Ue.isOpaque()&&Ue.draw(N);for(_.enable(_.BLEND),_.blendEquation(_.FUNC_ADD),_.blendFunc(_.ONE,_.ONE_MINUS_SRC_ALPHA),_.colorMask(!0,!0,!0,!0),_.depthMask(!1),_.clearColor(0,0,0,0),_.clear(_.COLOR_BUFFER_BIT),E.isTransparent()&&E.drawTransparent(N),be=0;be<de;++be){var Ue;(Ue=H[be]).isTransparent&&Ue.isTransparent()&&Ue.drawTransparent(N)}_.bindFramebuffer(_.FRAMEBUFFER,null),_.blendFunc(_.ONE,_.ONE_MINUS_SRC_ALPHA),_.disable(_.DEPTH_TEST),M.bind(),L.color[0].bind(0),M.uniforms.accumBuffer=0,s(_),_.disable(_.BLEND)}for(Z=!1,be=0;be<de;++be)H[be].dirty=!1}}}return j.enableMouseListeners(),function le(){j._stopped||j.contextLost||(he(),requestAnimationFrame(le))}(),j.redraw=function(){j._stopped||(Z=!0,he())},j},createCamera:e}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(p,x,y){var e=p("glslify");y.pointVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),y.pointFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),y.pickVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),y.pickFragment=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:231}],123:[function(p,x,y){var e=p("gl-shader"),r=p("gl-buffer"),t=p("typedarray-pool"),i=p("./lib/shader");function n(l,f,d,v,m){this.plot=l,this.offsetBuffer=f,this.pickBuffer=d,this.shader=v,this.pickShader=m,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}x.exports=function(l,f){var d=l.gl,v=r(d),m=r(d),c=e(d,i.pointVertex,i.pointFragment),b=e(d,i.pickVertex,i.pickFragment),g=new n(l,v,m,c,b);return g.update(f),l.addObject(g),g};var h,s,a=n.prototype;a.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},a.update=function(l){var f;function d(_,T){return _ in l?l[_]:T}l=l||{},this.sizeMin=d("sizeMin",.5),this.sizeMax=d("sizeMax",20),this.color=d("color",[1,0,0,1]).slice(),this.areaRatio=d("areaRatio",1),this.borderColor=d("borderColor",[0,0,0,1]).slice(),this.blend=d("blend",!1);var v=l.positions.length>>>1,m=l.positions instanceof Float32Array,c=l.idToIndex instanceof Int32Array&&l.idToIndex.length>=v,b=l.positions,g=m?b:t.mallocFloat32(b.length),w=c?l.idToIndex:t.mallocInt32(v);if(m||g.set(b),!c)for(g.set(b),f=0;f<v;f++)w[f]=f;this.points=b,this.offsetBuffer.update(g),this.pickBuffer.update(w),m||t.free(g),c||t.free(w),this.pointCount=v,this.pickOffset=0},a.unifiedDraw=(h=[1,0,0,0,1,0,0,0,1],s=[0,0,0,0],function(l){var f=l!==void 0,d=f?this.pickShader:this.shader,v=this.plot.gl,m=this.plot.dataBox;if(this.pointCount===0)return l;var c=m[2]-m[0],b=m[3]-m[1],g=function(k,L){var M,I=0,P=k.length>>>1;for(M=0;M<P;M++){var S=k[2*M],E=k[2*M+1];S>=L[0]&&S<=L[2]&&E>=L[1]&&E<=L[3]&&I++}return I}(this.points,m),w=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(g,.33333)));h[0]=2/c,h[4]=2/b,h[6]=-2*m[0]/c-1,h[7]=-2*m[1]/b-1,this.offsetBuffer.bind(),d.bind(),d.attributes.position.pointer(),d.uniforms.matrix=h,d.uniforms.color=this.color,d.uniforms.borderColor=this.borderColor,d.uniforms.pointCloud=w<5,d.uniforms.pointSize=w,d.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),f&&(s[0]=255&l,s[1]=l>>8&255,s[2]=l>>16&255,s[3]=l>>24&255,this.pickBuffer.bind(),d.attributes.pickId.pointer(v.UNSIGNED_BYTE),d.uniforms.pickOffset=s,this.pickOffset=l);var _=v.getParameter(v.BLEND),T=v.getParameter(v.DITHER);return _&&!this.blend&&v.disable(v.BLEND),T&&v.disable(v.DITHER),v.drawArrays(v.POINTS,0,this.pointCount),_&&!this.blend&&v.enable(v.BLEND),T&&v.enable(v.DITHER),l+this.pointCount}),a.draw=a.unifiedDraw,a.drawPick=a.unifiedDraw,a.pick=function(l,f,d){var v=this.pickOffset,m=this.pointCount;if(d<v||d>=v+m)return null;var c=d-v,b=this.points;return{object:this,pointId:c,dataCoord:[b[2*c],b[2*c+1]]}}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(p,x,y){x.exports=function(e,r,t,i){var n,h,s,a,l,f=r[0],d=r[1],v=r[2],m=r[3],c=t[0],b=t[1],g=t[2],w=t[3];return(h=f*c+d*b+v*g+m*w)<0&&(h=-h,c=-c,b=-b,g=-g,w=-w),1-h>1e-6?(n=Math.acos(h),s=Math.sin(n),a=Math.sin((1-i)*n)/s,l=Math.sin(i*n)/s):(a=1-i,l=i),e[0]=a*f+l*c,e[1]=a*d+l*b,e[2]=a*v+l*g,e[3]=a*m+l*w,e}},{}],125:[function(p,x,y){x.exports=function(e){return e||e===0?e.toString():""}},{}],126:[function(p,x,y){var e=p("vectorize-text");x.exports=function(t,i,n){var h=r[i];if(h||(h=r[i]={}),t in h)return h[t];var s={textAlign:"center",textBaseline:"middle",lineHeight:1,font:i,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},a=e(t,s);s.triangles=!1;var l,f,d=e(t,s);if(n&&n!==1){for(l=0;l<a.positions.length;++l)for(f=0;f<a.positions[l].length;++f)a.positions[l][f]/=n;for(l=0;l<d.positions.length;++l)for(f=0;f<d.positions[l].length;++f)d.positions[l][f]/=n}var v=[[1/0,1/0],[-1/0,-1/0]],m=d.positions.length;for(l=0;l<m;++l){var c=d.positions[l];for(f=0;f<2;++f)v[0][f]=Math.min(v[0][f],c[f]),v[1][f]=Math.max(v[1][f],c[f])}return h[t]=[a,d,v]};var r={}},{"vectorize-text":311}],127:[function(p,x,y){var e=p("gl-shader"),r=p("glslify"),t=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),i=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),n=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),h=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),s=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),a=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],l={vertex:t,fragment:h,attributes:a},f={vertex:i,fragment:h,attributes:a},d={vertex:n,fragment:h,attributes:a},v={vertex:t,fragment:s,attributes:a},m={vertex:i,fragment:s,attributes:a},c={vertex:n,fragment:s,attributes:a};function b(g,w){var _=e(g,w),T=_.attributes;return T.position.location=0,T.color.location=1,T.glyph.location=2,T.id.location=3,_}y.createPerspective=function(g){return b(g,l)},y.createOrtho=function(g){return b(g,f)},y.createProject=function(g){return b(g,d)},y.createPickPerspective=function(g){return b(g,v)},y.createPickOrtho=function(g){return b(g,m)},y.createPickProject=function(g){return b(g,c)}},{"gl-shader":132,glslify:231}],128:[function(p,x,y){var e=p("is-string-blank"),r=p("gl-buffer"),t=p("gl-vao"),i=p("typedarray-pool"),n=p("gl-mat4/multiply"),h=p("./lib/shaders"),s=p("./lib/glyphs"),a=p("./lib/get-simple-string"),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function f(Q,K){var Z=Q[0],$=Q[1],re=Q[2],R=Q[3];return Q[0]=K[0]*Z+K[4]*$+K[8]*re+K[12]*R,Q[1]=K[1]*Z+K[5]*$+K[9]*re+K[13]*R,Q[2]=K[2]*Z+K[6]*$+K[10]*re+K[14]*R,Q[3]=K[3]*Z+K[7]*$+K[11]*re+K[15]*R,Q}function d(Q,K,Z,$){return f($,$),f($,$),f($,$)}function v(Q,K){this.index=Q,this.dataCoordinate=this.position=K}function m(Q){return Q===!0||Q>1?1:Q}function c(Q,K,Z,$,re,R,N,U,te,j,Y,J){this.gl=Q,this.pixelRatio=1,this.shader=K,this.orthoShader=Z,this.projectShader=$,this.pointBuffer=re,this.colorBuffer=R,this.glyphBuffer=N,this.idBuffer=U,this.vao=te,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=j,this.pickOrthoShader=Y,this.pickProjectShader=J,this.points=[],this._selectResult=new v(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}x.exports=function(Q){var K=Q.gl,Z=h.createPerspective(K),$=h.createOrtho(K),re=h.createProject(K),R=h.createPickPerspective(K),N=h.createPickOrtho(K),U=h.createPickProject(K),te=r(K),j=r(K),Y=r(K),J=r(K),ee=t(K,[{buffer:te,size:3,type:K.FLOAT},{buffer:j,size:4,type:K.FLOAT},{buffer:Y,size:2,type:K.FLOAT},{buffer:J,size:4,type:K.UNSIGNED_BYTE,normalized:!0}]),ne=new c(K,Z,$,re,te,j,Y,J,ee,R,N,U);return ne.update(Q),ne};var b=c.prototype;b.pickSlots=1,b.setPickBase=function(Q){this.pickId=Q},b.isTransparent=function(){if(this.hasAlpha)return!0;for(var Q=0;Q<3;++Q)if(this.axesProject[Q]&&this.projectHasAlpha)return!0;return!1},b.isOpaque=function(){if(!this.hasAlpha)return!0;for(var Q=0;Q<3;++Q)if(this.axesProject[Q]&&!this.projectHasAlpha)return!0;return!1};var g=[0,0],w=[0,0,0],_=[0,0,0],T=[0,0,0,1],k=[0,0,0,1],L=l.slice(),M=[0,0,0],I=[[0,0,0],[0,0,0]];function P(Q){return Q[0]=Q[1]=Q[2]=0,Q}function S(Q,K){return Q[0]=K[0],Q[1]=K[1],Q[2]=K[2],Q[3]=1,Q}function E(Q,K,Z,$){return Q[0]=K[0],Q[1]=K[1],Q[2]=K[2],Q[Z]=$,Q}function D(Q,K,Z,$){var re,R=K.axesProject,N=K.gl,U=Q.uniforms,te=Z.model||l,j=Z.view||l,Y=Z.projection||l,J=K.axesBounds,ee=function(Te){for(var Me=I,Oe=0;Oe<2;++Oe)for(var Fe=0;Fe<3;++Fe)Me[Oe][Fe]=Math.max(Math.min(Te[Oe][Fe],1e8),-1e8);return Me}(K.clipBounds);re=K.axes&&K.axes.lastCubeProps?K.axes.lastCubeProps.axis:[1,1,1],g[0]=2/N.drawingBufferWidth,g[1]=2/N.drawingBufferHeight,Q.bind(),U.view=j,U.projection=Y,U.screenSize=g,U.highlightId=K.highlightId,U.highlightScale=K.highlightScale,U.clipBounds=ee,U.pickGroup=K.pickId/255,U.pixelRatio=$;for(var ne=0;ne<3;++ne)if(R[ne]){U.scale=K.projectScale[ne],U.opacity=K.projectOpacity[ne];for(var se=L,oe=0;oe<16;++oe)se[oe]=0;for(oe=0;oe<4;++oe)se[5*oe]=1;se[5*ne]=0,re[ne]<0?se[12+ne]=J[0][ne]:se[12+ne]=J[1][ne],n(se,te,se),U.model=se;var he=(ne+1)%3,le=(ne+2)%3,de=P(w),xe=P(_);de[he]=1,xe[le]=1;var we=d(0,0,0,S(T,de)),be=d(0,0,0,S(k,xe));if(Math.abs(we[1])>Math.abs(be[1])){var Ae=we;we=be,be=Ae,Ae=de,de=xe,xe=Ae;var fe=he;he=le,le=fe}we[0]<0&&(de[he]=-1),be[1]>0&&(xe[le]=-1);var me=0,ke=0;for(oe=0;oe<4;++oe)me+=Math.pow(te[4*he+oe],2),ke+=Math.pow(te[4*le+oe],2);de[he]/=Math.sqrt(me),xe[le]/=Math.sqrt(ke),U.axes[0]=de,U.axes[1]=xe,U.fragClipBounds[0]=E(M,ee[0],ne,-1e8),U.fragClipBounds[1]=E(M,ee[1],ne,1e8),K.vao.bind(),K.vao.draw(N.TRIANGLES,K.vertexCount),K.lineWidth>0&&(N.lineWidth(K.lineWidth*$),K.vao.draw(N.LINES,K.lineVertexCount,K.vertexCount)),K.vao.unbind()}}var F=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function H(Q,K,Z,$,re,R,N){var U=Z.gl;if((R===Z.projectHasAlpha||N)&&D(K,Z,$,re),R===Z.hasAlpha||N){Q.bind();var te=Q.uniforms;te.model=$.model||l,te.view=$.view||l,te.projection=$.projection||l,g[0]=2/U.drawingBufferWidth,g[1]=2/U.drawingBufferHeight,te.screenSize=g,te.highlightId=Z.highlightId,te.highlightScale=Z.highlightScale,te.fragClipBounds=F,te.clipBounds=Z.axes.bounds,te.opacity=Z.opacity,te.pickGroup=Z.pickId/255,te.pixelRatio=re,Z.vao.bind(),Z.vao.draw(U.TRIANGLES,Z.vertexCount),Z.lineWidth>0&&(U.lineWidth(Z.lineWidth*re),Z.vao.draw(U.LINES,Z.lineVertexCount,Z.vertexCount)),Z.vao.unbind()}}function V(Q,K,Z,$){var re;re=Array.isArray(Q)?K<Q.length?Q[K]:void 0:Q,re=a(re);var R=!0;e(re)&&(re="\u25BC",R=!1);var N=s(re,Z,$);return{mesh:N[0],lines:N[1],bounds:N[2],visible:R}}b.draw=function(Q){H(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,Q,this.pixelRatio,!1,!1)},b.drawTransparent=function(Q){H(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,Q,this.pixelRatio,!0,!1)},b.drawPick=function(Q){H(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,Q,1,!0,!0)},b.pick=function(Q){if(!Q||Q.id!==this.pickId)return null;var K=Q.value[2]+(Q.value[1]<<8)+(Q.value[0]<<16);if(K>=this.pointCount||K<0)return null;var Z=this.points[K],$=this._selectResult;$.index=K;for(var re=0;re<3;++re)$.position[re]=$.dataCoordinate[re]=Z[re];return $},b.highlight=function(Q){if(Q){var K=Q.index,Z=255&K,$=K>>8&255,re=K>>16&255;this.highlightId=[Z/255,$/255,re/255,0]}else this.highlightId=[1,1,1,1]},b.update=function(Q){if("perspective"in(Q=Q||{})&&(this.useOrtho=!Q.perspective),"orthographic"in Q&&(this.useOrtho=!!Q.orthographic),"lineWidth"in Q&&(this.lineWidth=Q.lineWidth),"project"in Q)if(Array.isArray(Q.project))this.axesProject=Q.project;else{var K=!!Q.project;this.axesProject=[K,K,K]}if("projectScale"in Q)if(Array.isArray(Q.projectScale))this.projectScale=Q.projectScale.slice();else{var Z=+Q.projectScale;this.projectScale=[Z,Z,Z]}if(this.projectHasAlpha=!1,"projectOpacity"in Q){Array.isArray(Q.projectOpacity)?this.projectOpacity=Q.projectOpacity.slice():(Z=+Q.projectOpacity,this.projectOpacity=[Z,Z,Z]);for(var $=0;$<3;++$)this.projectOpacity[$]=m(this.projectOpacity[$]),this.projectOpacity[$]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in Q&&(this.opacity=m(Q.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var re,R,N=Q.position,U=Q.font||"normal",te=Q.alignment||[0,0];if(te.length===2)re=te[0],R=te[1];else for(re=[],R=[],$=0;$<te.length;++$)re[$]=te[$][0],R[$]=te[$][1];var j=[1/0,1/0,1/0],Y=[-1/0,-1/0,-1/0],J=Q.glyph,ee=Q.color,ne=Q.size,se=Q.angle,oe=Q.lineColor,he=-1,le=0,de=0,xe=0;if(N.length){xe=N.length;e:for($=0;$<xe;++$){for(var we=N[$],be=0;be<3;++be)if(isNaN(we[be])||!isFinite(we[be]))continue e;var Ae=(nt=V(J,$,U,this.pixelRatio)).mesh,fe=nt.lines,me=nt.bounds;le+=3*Ae.cells.length,de+=2*fe.edges.length}}var ke=le+de,Te=i.mallocFloat(3*ke),Me=i.mallocFloat(4*ke),Oe=i.mallocFloat(2*ke),Fe=i.mallocUint32(ke);if(ke>0){var qe=0,et=le,ze=[0,0,0,1],Ue=[0,0,0,1],We=Array.isArray(ee)&&Array.isArray(ee[0]),Ze=Array.isArray(oe)&&Array.isArray(oe[0]);e:for($=0;$<xe;++$){for(he+=1,we=N[$],be=0;be<3;++be){if(isNaN(we[be])||!isFinite(we[be]))continue e;Y[be]=Math.max(Y[be],we[be]),j[be]=Math.min(j[be],we[be])}Ae=(nt=V(J,$,U,this.pixelRatio)).mesh,fe=nt.lines,me=nt.bounds;var nt,ft=nt.visible;if(ft)if(Array.isArray(ee)){if((xt=We?$<ee.length?ee[$]:[0,0,0,0]:ee).length===3){for(be=0;be<3;++be)ze[be]=xt[be];ze[3]=1}else if(xt.length===4){for(be=0;be<4;++be)ze[be]=xt[be];!this.hasAlpha&&xt[3]<1&&(this.hasAlpha=!0)}}else ze[0]=ze[1]=ze[2]=0,ze[3]=1;else ze=[1,1,1,0];if(ft)if(Array.isArray(oe)){var xt;if((xt=Ze?$<oe.length?oe[$]:[0,0,0,0]:oe).length===3){for(be=0;be<3;++be)Ue[be]=xt[be];Ue[be]=1}else if(xt.length===4){for(be=0;be<4;++be)Ue[be]=xt[be];!this.hasAlpha&&xt[3]<1&&(this.hasAlpha=!0)}}else Ue[0]=Ue[1]=Ue[2]=0,Ue[3]=1;else Ue=[1,1,1,0];var It=.5;ft?Array.isArray(ne)?It=$<ne.length?+ne[$]:12:ne?It=+ne:this.useOrtho&&(It=12):It=0;var Et=0;Array.isArray(se)?Et=$<se.length?+se[$]:0:se&&(Et=+se);var it=Math.cos(Et),rt=Math.sin(Et);for(we=N[$],be=0;be<3;++be)Y[be]=Math.max(Y[be],we[be]),j[be]=Math.min(j[be],we[be]);var At=re,Gt=R;At=0,Array.isArray(re)?At=$<re.length?re[$]:0:re&&(At=re),Gt=0,Array.isArray(R)?Gt=$<R.length?R[$]:0:R&&(Gt=R);var Qt=[At*=At>0?1-me[0][0]:At<0?1+me[1][0]:1,Gt*=Gt>0?1-me[0][1]:Gt<0?1+me[1][1]:1],Ve=Ae.cells||[],Ye=Ae.positions||[];for(be=0;be<Ve.length;++be)for(var Be=Ve[be],Je=0;Je<3;++Je){for(var Se=0;Se<3;++Se)Te[3*qe+Se]=we[Se];for(Se=0;Se<4;++Se)Me[4*qe+Se]=ze[Se];Fe[qe]=he;var Pe=Ye[Be[Je]];Oe[2*qe]=It*(it*Pe[0]-rt*Pe[1]+Qt[0]),Oe[2*qe+1]=It*(rt*Pe[0]+it*Pe[1]+Qt[1]),qe+=1}for(Ve=fe.edges,Ye=fe.positions,be=0;be<Ve.length;++be)for(Be=Ve[be],Je=0;Je<2;++Je){for(Se=0;Se<3;++Se)Te[3*et+Se]=we[Se];for(Se=0;Se<4;++Se)Me[4*et+Se]=Ue[Se];Fe[et]=he,Pe=Ye[Be[Je]],Oe[2*et]=It*(it*Pe[0]-rt*Pe[1]+Qt[0]),Oe[2*et+1]=It*(rt*Pe[0]+it*Pe[1]+Qt[1]),et+=1}}}this.bounds=[j,Y],this.points=N,this.pointCount=N.length,this.vertexCount=le,this.lineVertexCount=de,this.pointBuffer.update(Te),this.colorBuffer.update(Me),this.glyphBuffer.update(Oe),this.idBuffer.update(Fe),i.free(Te),i.free(Me),i.free(Oe),i.free(Fe)},b.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(p,x,y){var e=p("glslify");y.boxVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),y.boxFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:231}],130:[function(p,x,y){var e=p("gl-shader"),r=p("gl-buffer"),t=p("./lib/shaders");function i(h,s,a){this.plot=h,this.boxBuffer=s,this.boxShader=a,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}x.exports=function(h,s){var a=h.gl,l=r(a,[0,0,0,1,1,0,1,1]),f=e(a,t.boxVertex,t.boxFragment),d=new i(h,l,f);return d.update(s),h.addOverlay(d),d};var n=i.prototype;n.draw=function(){if(this.enabled){var h=this.plot,s=this.selectBox,a=this.borderWidth,l=(this.innerFill,this.innerColor),f=(this.outerFill,this.outerColor),d=this.borderColor,v=h.box,m=h.screenBox,c=h.dataBox,b=h.viewBox,g=h.pixelRatio,w=(s[0]-c[0])*(b[2]-b[0])/(c[2]-c[0])+b[0],_=(s[1]-c[1])*(b[3]-b[1])/(c[3]-c[1])+b[1],T=(s[2]-c[0])*(b[2]-b[0])/(c[2]-c[0])+b[0],k=(s[3]-c[1])*(b[3]-b[1])/(c[3]-c[1])+b[1];if(w=Math.max(w,b[0]),_=Math.max(_,b[1]),T=Math.min(T,b[2]),k=Math.min(k,b[3]),!(T<w||k<_)){v.bind();var L=m[2]-m[0],M=m[3]-m[1];if(this.outerFill&&(v.drawBox(0,0,L,_,f),v.drawBox(0,_,w,k,f),v.drawBox(0,k,L,M,f),v.drawBox(T,_,L,k,f)),this.innerFill&&v.drawBox(w,_,T,k,l),a>0){var I=a*g;v.drawBox(w-I,_-I,T+I,_+I,d),v.drawBox(w-I,k-I,T+I,k+I,d),v.drawBox(w-I,_-I,w+I,k+I,d),v.drawBox(T-I,_-I,T+I,k+I,d)}}}},n.update=function(h){h=h||{},this.innerFill=!!h.innerFill,this.outerFill=!!h.outerFill,this.innerColor=(h.innerColor||[0,0,0,.5]).slice(),this.outerColor=(h.outerColor||[0,0,0,.5]).slice(),this.borderColor=(h.borderColor||[0,0,0,1]).slice(),this.borderWidth=h.borderWidth||0,this.selectBox=(h.selectBox||this.selectBox).slice()},n.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(p,x,y){x.exports=function(a,l){var f=l[0],d=l[1],v=e(a,f,d,{}),m=r.mallocUint8(f*d*4);return new h(a,v,m)};var e=p("gl-fbo"),r=p("typedarray-pool"),t=p("ndarray"),i=p("bit-twiddle").nextPow2;function n(a,l,f,d,v){this.coord=[a,l],this.id=f,this.value=d,this.distance=v}function h(a,l,f){this.gl=a,this.fbo=l,this.buffer=f,this._readTimeout=null;var d=this;this._readCallback=function(){d.gl&&(l.bind(),a.readPixels(0,0,l.shape[0],l.shape[1],a.RGBA,a.UNSIGNED_BYTE,d.buffer),d._readTimeout=null)}}var s=h.prototype;Object.defineProperty(s,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(a){if(this.gl){this.fbo.shape=a;var l=this.fbo.shape[0],f=this.fbo.shape[1];if(f*l*4>this.buffer.length){r.free(this.buffer);for(var d=this.buffer=r.mallocUint8(i(f*l*4)),v=0;v<f*l*4;++v)d[v]=255}return a}}}),s.begin=function(){var a=this.gl;this.shape,a&&(this.fbo.bind(),a.clearColor(1,1,1,1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT))},s.end=function(){var a=this.gl;a&&(a.bindFramebuffer(a.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},s.query=function(a,l,f){if(!this.gl)return null;var d=this.fbo.shape.slice();a|=0,l|=0,typeof f!="number"&&(f=1);var v=0|Math.min(Math.max(a-f,0),d[0]),m=0|Math.min(Math.max(a+f,0),d[0]),c=0|Math.min(Math.max(l-f,0),d[1]),b=0|Math.min(Math.max(l+f,0),d[1]);if(m<=v||b<=c)return null;var g=[m-v,b-c],w=t(this.buffer,[g[0],g[1],4],[4,4*d[0],1],4*(v+d[0]*c)),_=function(L,M,I){for(var P=1e8,S=-1,E=-1,D=L.shape[0],F=L.shape[1],H=0;H<D;H++)for(var V=0;V<F;V++){var Q=L.get(H,V,0),K=L.get(H,V,1),Z=L.get(H,V,2),$=L.get(H,V,3);if(Q<255||K<255||Z<255||$<255){var re=M-H,R=I-V,N=re*re+R*R;N<P&&(P=N,S=H,E=V)}}return[S,E,P]}(w.hi(g[0],g[1],1),f,f),T=_[0],k=_[1];return T<0||Math.pow(this.radius,2)<_[2]?null:new n(T+v|0,k+c|0,w.get(T,k,0),[w.get(T,k,1),w.get(T,k,2),w.get(T,k,3)],Math.sqrt(_[2]))},s.dispose=function(){this.gl&&(this.fbo.dispose(),r.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(p,x,y){var e=p("./lib/create-uniforms"),r=p("./lib/create-attributes"),t=p("./lib/reflect"),i=p("./lib/shader-cache"),n=p("./lib/runtime-reflect"),h=p("./lib/GLError");function s(f){this.gl=f,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var a=s.prototype;function l(f,d){return f.name<d.name?-1:1}a.bind=function(){var f;this.program||this._relink();var d=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),v=this.gl.lastAttribCount;if(d>v)for(f=v;f<d;f++)this.gl.enableVertexAttribArray(f);else if(v>d)for(f=d;f<v;f++)this.gl.disableVertexAttribArray(f);this.gl.lastAttribCount=d,this.gl.useProgram(this.program)},a.dispose=function(){for(var f=this.gl.lastAttribCount,d=0;d<f;d++)this.gl.disableVertexAttribArray(d);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},a.update=function(f,d,v,m){if(!d||arguments.length===1){var c=f;f=c.vertex,d=c.fragment,v=c.uniforms,m=c.attributes}var b=this,g=b.gl,w=b._vref;b._vref=i.shader(g,g.VERTEX_SHADER,f),w&&w.dispose(),b.vertShader=b._vref.shader;var _=this._fref;if(b._fref=i.shader(g,g.FRAGMENT_SHADER,d),_&&_.dispose(),b.fragShader=b._fref.shader,!v||!m){var T=g.createProgram();if(g.attachShader(T,b.fragShader),g.attachShader(T,b.vertShader),g.linkProgram(T),!g.getProgramParameter(T,g.LINK_STATUS)){var k=g.getProgramInfoLog(T);throw new h(k,"Error linking program:"+k)}v=v||n.uniforms(g,T),m=m||n.attributes(g,T),g.deleteProgram(T)}(m=m.slice()).sort(l);var L,M=[],I=[],P=[];for(L=0;L<m.length;++L){var S=m[L];if(S.type.indexOf("mat")>=0){for(var E=0|S.type.charAt(S.type.length-1),D=new Array(E),F=0;F<E;++F)D[F]=P.length,I.push(S.name+"["+F+"]"),typeof S.location=="number"?P.push(S.location+F):Array.isArray(S.location)&&S.location.length===E&&typeof S.location[F]=="number"?P.push(0|S.location[F]):P.push(-1);M.push({name:S.name,type:S.type,locations:D})}else M.push({name:S.name,type:S.type,locations:[P.length]}),I.push(S.name),typeof S.location=="number"?P.push(0|S.location):P.push(-1)}var H=0;for(L=0;L<P.length;++L)if(P[L]<0){for(;P.indexOf(H)>=0;)H+=1;P[L]=H}var V=new Array(v.length);function Q(){b.program=i.program(g,b._vref,b._fref,I,P);for(var K=0;K<v.length;++K)V[K]=g.getUniformLocation(b.program,v[K].name)}Q(),b._relink=Q,b.types={uniforms:t(v),attributes:t(m)},b.attributes=r(g,b,M,P),Object.defineProperty(b,"uniforms",e(g,b,v,V))},x.exports=function(f,d,v,m,c){var b=new s(f);return b.update(d,v,m,c),b}},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(p,x,y){function e(r,t,i){this.shortMessage=t||"",this.longMessage=i||"",this.rawError=r||"",this.message="gl-shader: "+(t||r||"")+(i?`
`+i:""),this.stack=new Error().stack}e.prototype=new Error,e.prototype.name="GLError",e.prototype.constructor=e,x.exports=e},{}],134:[function(p,x,y){x.exports=function(s,a,l,f){for(var d={},v=0,m=l.length;v<m;++v){var c=l[v],b=c.name,g=c.type,w=c.locations;switch(g){case"bool":case"int":case"float":n(s,a,w[0],f,1,d,b);break;default:if(g.indexOf("vec")>=0){if((_=g.charCodeAt(g.length-1)-48)<2||_>4)throw new e("","Invalid data type for attribute "+b+": "+g);n(s,a,w[0],f,_,d,b)}else{if(!(g.indexOf("mat")>=0))throw new e("","Unknown data type for attribute "+b+": "+g);var _;if((_=g.charCodeAt(g.length-1)-48)<2||_>4)throw new e("","Invalid data type for attribute "+b+": "+g);h(s,a,w,f,_,d,b)}}}return d};var e=p("./GLError");function r(s,a,l,f,d,v){this._gl=s,this._wrapper=a,this._index=l,this._locations=f,this._dimension=d,this._constFunc=v}var t=r.prototype;t.pointer=function(s,a,l,f){var d=this._gl,v=this._locations[this._index];d.vertexAttribPointer(v,this._dimension,s||d.FLOAT,!!a,l||0,f||0),d.enableVertexAttribArray(v)},t.set=function(s,a,l,f){return this._constFunc(this._locations[this._index],s,a,l,f)},Object.defineProperty(t,"location",{get:function(){return this._locations[this._index]},set:function(s){return s!==this._locations[this._index]&&(this._locations[this._index]=0|s,this._wrapper.program=null),0|s}});var i=[function(s,a,l){return l.length===void 0?s.vertexAttrib1f(a,l):s.vertexAttrib1fv(a,l)},function(s,a,l,f){return l.length===void 0?s.vertexAttrib2f(a,l,f):s.vertexAttrib2fv(a,l)},function(s,a,l,f,d){return l.length===void 0?s.vertexAttrib3f(a,l,f,d):s.vertexAttrib3fv(a,l)},function(s,a,l,f,d,v){return l.length===void 0?s.vertexAttrib4f(a,l,f,d,v):s.vertexAttrib4fv(a,l)}];function n(s,a,l,f,d,v,m){var c=i[d],b=new r(s,a,l,f,d,c);Object.defineProperty(v,m,{set:function(g){return s.disableVertexAttribArray(f[l]),c(s,f[l],g),g},get:function(){return b},enumerable:!0})}function h(s,a,l,f,d,v,m){for(var c=new Array(d),b=new Array(d),g=0;g<d;++g)n(s,a,l[g],f,d,c,g),b[g]=c[g];Object.defineProperty(c,"location",{set:function(T){if(Array.isArray(T))for(var k=0;k<d;++k)b[k].location=T[k];else for(k=0;k<d;++k)b[k].location=T+k;return T},get:function(){for(var T=new Array(d),k=0;k<d;++k)T[k]=f[l[k]];return T},enumerable:!0}),c.pointer=function(T,k,L,M){T=T||s.FLOAT,k=!!k,L=L||d*d,M=M||0;for(var I=0;I<d;++I){var P=f[l[I]];s.vertexAttribPointer(P,d,T,k,L,M+I*d),s.enableVertexAttribArray(P)}};var w=new Array(d),_=s["vertexAttrib"+d+"fv"];Object.defineProperty(v,m,{set:function(T){for(var k=0;k<d;++k){var L=f[l[k]];if(s.disableVertexAttribArray(L),Array.isArray(T[0]))_.call(s,L,T[k]);else{for(var M=0;M<d;++M)w[M]=T[d*k+M];_.call(s,L,w)}}return T},get:function(){return c},enumerable:!0})}},{"./GLError":133}],135:[function(p,x,y){var e=p("./reflect"),r=p("./GLError");function t(n){return function(){return n}}function i(n,h){for(var s=new Array(n),a=0;a<n;++a)s[a]=h;return s}x.exports=function(n,h,s,a){function l(m){return function(c){for(var b=function F(H,V){if(typeof V!="object")return[[H,V]];var Q=[];for(var K in V){var Z=V[K],$=H;parseInt(K)+""===K?$+="["+K+"]":$+="."+K,typeof Z=="object"?Q.push.apply(Q,F($,Z)):Q.push([$,Z])}return Q}("",m),g=0;g<b.length;++g){var w=b[g],_=w[0],T=w[1];if(a[T]){var k=c;if(typeof _=="string"&&(_.indexOf(".")===0||_.indexOf("[")===0)){var L=_;if(_.indexOf(".")===0&&(L=_.slice(1)),L.indexOf("]")===L.length-1){var M=L.indexOf("["),I=L.slice(0,M),P=L.slice(M+1,L.length-1);k=I?c[I][P]:c[P]}else k=c[L]}var S,E=s[T].type;switch(E){case"bool":case"int":case"sampler2D":case"samplerCube":n.uniform1i(a[T],k);break;case"float":n.uniform1f(a[T],k);break;default:var D=E.indexOf("vec");if(!(0<=D&&D<=1&&E.length===4+D)){if(E.indexOf("mat")===0&&E.length===4){if((S=E.charCodeAt(E.length-1)-48)<2||S>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+E);n["uniformMatrix"+S+"fv"](a[T],!1,k);break}throw new r("","Unknown uniform data type for "+name+": "+E)}if((S=E.charCodeAt(E.length-1)-48)<2||S>4)throw new r("","Invalid data type");switch(E.charAt(0)){case"b":case"i":n["uniform"+S+"iv"](a[T],k);break;case"v":n["uniform"+S+"fv"](a[T],k);break;default:throw new r("","Unrecognized data type for vector "+name+": "+E)}}}}}}function f(m,c,b){if(typeof b=="object"){var g=d(b);Object.defineProperty(m,c,{get:t(g),set:l(b),enumerable:!0,configurable:!1})}else a[b]?Object.defineProperty(m,c,{get:(w=b,function(_,T,k){return _.getUniform(T.program,k[w])}),set:l(b),enumerable:!0,configurable:!1}):m[c]=function(_){switch(_){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var T=_.indexOf("vec");if(0<=T&&T<=1&&_.length===4+T){if((k=_.charCodeAt(_.length-1)-48)<2||k>4)throw new r("","Invalid data type");return _.charAt(0)==="b"?i(k,!1):i(k,0)}if(_.indexOf("mat")===0&&_.length===4){var k;if((k=_.charCodeAt(_.length-1)-48)<2||k>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+_);return i(k*k,0)}throw new r("","Unknown uniform data type for "+name+": "+_)}}(s[b].type);var w}function d(m){var c;if(Array.isArray(m)){c=new Array(m.length);for(var b=0;b<m.length;++b)f(c,b,m[b])}else for(var g in c={},m)f(c,g,m[g]);return c}var v=e(s,!0);return{get:t(d(v)),set:l(v),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(p,x,y){x.exports=function(e,r){for(var t={},i=0;i<e.length;++i)for(var n=e[i].name.split("."),h=t,s=0;s<n.length;++s){var a=n[s].split("[");if(a.length>1){a[0]in h||(h[a[0]]=[]),h=h[a[0]];for(var l=1;l<a.length;++l){var f=parseInt(a[l]);l<a.length-1||s<n.length-1?(f in h||(l<a.length-1?h[f]=[]:h[f]={}),h=h[f]):h[f]=r?i:e[i].type}}else s<n.length-1?(a[0]in h||(h[a[0]]={}),h=h[a[0]]):h[a[0]]=r?i:e[i].type}return t}},{}],137:[function(p,x,y){y.uniforms=function(i,n){for(var h=i.getProgramParameter(n,i.ACTIVE_UNIFORMS),s=[],a=0;a<h;++a){var l=i.getActiveUniform(n,a);if(l){var f=t(i,l.type);if(l.size>1)for(var d=0;d<l.size;++d)s.push({name:l.name.replace("[0]","["+d+"]"),type:f});else s.push({name:l.name,type:f})}}return s},y.attributes=function(i,n){for(var h=i.getProgramParameter(n,i.ACTIVE_ATTRIBUTES),s=[],a=0;a<h;++a){var l=i.getActiveAttrib(n,a);l&&s.push({name:l.name,type:t(i,l.type)})}return s};var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},r=null;function t(i,n){if(!r){var h=Object.keys(e);r={};for(var s=0;s<h.length;++s){var a=h[s];r[i[a]]=e[a]}}return r[n]}},{}],138:[function(p,x,y){y.shader=function(l,f,d){return a(l).getShaderReference(f,d)},y.program=function(l,f,d,v,m){return a(l).getProgram(f,d,v,m)};var e=p("./GLError"),r=p("gl-format-compiler-error"),t=new(typeof WeakMap=="undefined"?p("weakmap-shim"):WeakMap),i=0;function n(l,f,d,v,m,c,b){this.id=l,this.src=f,this.type=d,this.shader=v,this.count=c,this.programs=[],this.cache=b}function h(l){this.gl=l,this.shaders=[{},{}],this.programs={}}n.prototype.dispose=function(){if(--this.count==0){for(var l=this.cache,f=l.gl,d=this.programs,v=0,m=d.length;v<m;++v){var c=l.programs[d[v]];c&&(delete l.programs[v],f.deleteProgram(c))}f.deleteShader(this.shader),delete l.shaders[this.type===f.FRAGMENT_SHADER|0][this.src]}};var s=h.prototype;function a(l){var f=t.get(l);return f||(f=new h(l),t.set(l,f)),f}s.getShaderReference=function(l,f){var d=this.gl,v=this.shaders[l===d.FRAGMENT_SHADER|0],m=v[f];if(m&&d.isShader(m.shader))m.count+=1;else{var c=function(b,g,w){var _=b.createShader(g);if(b.shaderSource(_,w),b.compileShader(_),!b.getShaderParameter(_,b.COMPILE_STATUS)){var T=b.getShaderInfoLog(_);try{var k=r(T,w,g)}catch(L){throw console.warn("Failed to format compiler error: "+L),new e(T,`Error compiling shader:
`+T)}throw new e(T,k.short,k.long)}return _}(d,l,f);m=v[f]=new n(i++,f,l,c,[],1,this)}return m},s.getProgram=function(l,f,d,v){var m=[l.id,f.id,d.join(":"),v.join(":")].join("@"),c=this.programs[m];return c&&this.gl.isProgram(c)||(this.programs[m]=c=function(b,g,w,_,T){var k=b.createProgram();b.attachShader(k,g),b.attachShader(k,w);for(var L=0;L<_.length;++L)b.bindAttribLocation(k,T[L],_[L]);if(b.linkProgram(k),!b.getProgramParameter(k,b.LINK_STATUS)){var M=b.getProgramInfoLog(k);throw new e(M,"Error linking program: "+M)}return k}(this.gl,l.shader,f.shader,d,v),l.programs.push(m),f.programs.push(m)),c}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(p,x,y){function e(t){this.plot=t,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}x.exports=function(t,i){var n=new e(t);return n.update(i),t.addOverlay(n),n};var r=e.prototype;r.update=function(t){t=t||{},this.enable=(t.enable||[!0,!0,!1,!1]).slice(),this.width=(t.width||[1,1,1,1]).slice(),this.color=(t.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(i){return i.slice()}),this.center=(t.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},r.draw=function(){var t=this.enable,i=this.width,n=this.color,h=this.center,s=this.plot,a=s.line,l=s.dataBox,f=s.viewBox;if(a.bind(),l[0]<=h[0]&&h[0]<=l[2]&&l[1]<=h[1]&&h[1]<=l[3]){var d=f[0]+(h[0]-l[0])/(l[2]-l[0])*(f[2]-f[0]),v=f[1]+(h[1]-l[1])/(l[3]-l[1])*(f[3]-f[1]);t[0]&&a.drawLine(d,v,f[0],v,i[0],n[0]),t[1]&&a.drawLine(d,v,d,f[1],i[1],n[1]),t[2]&&a.drawLine(d,v,f[2],v,i[2],n[2]),t[3]&&a.drawLine(d,v,d,f[3],i[3],n[3])}},r.dispose=function(){this.plot.removeOverlay(this)}},{}],140:[function(p,x,y){var e=p("glslify"),r=p("gl-shader"),t=e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),i=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);x.exports=function(n){return r(n,t,i,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(p,x,y){var e=p("gl-buffer"),r=p("gl-vao"),t=p("./shaders/index");x.exports=function(f,d){var v=[];function m(_,T,k,L,M,I){var P=[_,T,k,0,0,0,1];P[L+3]=1,P[L]=M,v.push.apply(v,P),P[6]=-1,v.push.apply(v,P),P[L]=I,v.push.apply(v,P),v.push.apply(v,P),P[6]=1,v.push.apply(v,P),P[L]=M,v.push.apply(v,P)}m(0,0,0,0,0,1),m(0,0,0,1,0,1),m(0,0,0,2,0,1),m(1,0,0,1,-1,1),m(1,0,0,2,-1,1),m(0,1,0,0,-1,1),m(0,1,0,2,-1,1),m(0,0,1,0,-1,1),m(0,0,1,1,-1,1);var c=e(f,v),b=r(f,[{type:f.FLOAT,buffer:c,size:3,offset:0,stride:28},{type:f.FLOAT,buffer:c,size:3,offset:12,stride:28},{type:f.FLOAT,buffer:c,size:1,offset:24,stride:28}]),g=t(f);g.attributes.position.location=0,g.attributes.color.location=1,g.attributes.weight.location=2;var w=new n(f,c,b,g);return w.update(d),w};var i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function n(f,d,v,m){this.gl=f,this.buffer=d,this.vao=v,this.shader=m,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var h=n.prototype,s=[0,0,0],a=[0,0,0],l=[0,0];h.isTransparent=function(){return!1},h.drawTransparent=function(f){},h.draw=function(f){var d=this.gl,v=this.vao,m=this.shader;v.bind(),m.bind();var c,b=f.model||i,g=f.view||i,w=f.projection||i;this.axes&&(c=this.axes.lastCubeProps.axis);for(var _=s,T=a,k=0;k<3;++k)c&&c[k]<0?(_[k]=this.bounds[0][k],T[k]=this.bounds[1][k]):(_[k]=this.bounds[1][k],T[k]=this.bounds[0][k]);for(l[0]=d.drawingBufferWidth,l[1]=d.drawingBufferHeight,m.uniforms.model=b,m.uniforms.view=g,m.uniforms.projection=w,m.uniforms.coordinates=[this.position,_,T],m.uniforms.colors=this.colors,m.uniforms.screenShape=l,k=0;k<3;++k)m.uniforms.lineWidth=this.lineWidth[k]*this.pixelRatio,this.enabled[k]&&(v.draw(d.TRIANGLES,6,6*k),this.drawSides[k]&&v.draw(d.TRIANGLES,12,18+12*k));v.unbind()},h.update=function(f){f&&("bounds"in f&&(this.bounds=f.bounds),"position"in f&&(this.position=f.position),"lineWidth"in f&&(this.lineWidth=f.lineWidth),"colors"in f&&(this.colors=f.colors),"enabled"in f&&(this.enabled=f.enabled),"drawSides"in f&&(this.drawSides=f.drawSides))},h.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(p,x,y){var e=p("glslify"),r=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),t=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),i=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);y.meshShader={vertex:r,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},y.pickShader={vertex:i,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(p,x,y){var e=p("gl-vec3"),r=p("gl-vec4"),t=["xyz","xzy","yxz","yzx","zxy","zyx"],i=function(f,d,v,m){for(var c=0,b=0;b<f.length;b++)for(var g=f[b].velocities,w=0;w<g.length;w++)c=Math.max(c,e.length(g[w]));var _=f.map(function(F){return function(H,V,Q,K){for(var Z=H.points,$=H.velocities,re=H.divergences,R=[],N=[],U=[],te=[],j=[],Y=[],J=0,ee=0,ne=r.create(),se=r.create(),oe=0;oe<Z.length;oe++){var he=Z[oe],le=$[oe],de=re[oe];V===0&&(de=.05*Q),ee=e.length(le)/K,ne=r.create(),e.copy(ne,le),ne[3]=de;for(var xe=0;xe<8;xe++)j[xe]=[he[0],he[1],he[2],xe];if(te.length>0)for(xe=0;xe<8;xe++){var we=(xe+1)%8;R.push(te[xe],j[xe],j[we],j[we],te[we],te[xe]),U.push(se,ne,ne,ne,se,se),Y.push(J,ee,ee,ee,J,J);var be=R.length;N.push([be-6,be-5,be-4],[be-3,be-2,be-1])}var Ae=te;te=j,j=Ae;var fe=se;se=ne,ne=fe;var me=J;J=ee,ee=me}return{positions:R,cells:N,vectors:U,vertexIntensity:Y}}(F,v,m,c)}),T=[],k=[],L=[],M=[];for(b=0;b<_.length;b++){var I=_[b],P=T.length;for(T=T.concat(I.positions),L=L.concat(I.vectors),M=M.concat(I.vertexIntensity),w=0;w<I.cells.length;w++){var S=I.cells[w],E=[];k.push(E);for(var D=0;D<S.length;D++)E.push(S[D]+P)}}return{positions:T,cells:k,vectors:L,vertexIntensity:M,colormap:d}},n=function(f,d){var v,m=f.length;for(v=0;v<m;v++){var c=f[v];if(c===d)return v;if(c>d)return v-1}return v},h=function(f,d,v){return f<d?d:f>v?v:f},s=function(f){var d=1/0;f.sort(function(b,g){return b-g});for(var v=f.length,m=1;m<v;m++){var c=Math.abs(f[m]-f[m-1]);c<d&&(d=c)}return d};x.exports=function(f,d){var v=f.startingPositions,m=f.maxLength||1e3,c=f.tubeSize||1,b=f.absoluteTubeSize,g=f.gridFill||"+x+y+z",w={};g.indexOf("-x")!==-1&&(w.reversedX=!0),g.indexOf("-y")!==-1&&(w.reversedY=!0),g.indexOf("-z")!==-1&&(w.reversedZ=!0),w.filled=t.indexOf(g.replace(/-/g,"").replace(/\+/g,""));var _=f.getVelocity||function(oe){return function(he,le,de){var xe=le.vectors,we=le.meshgrid,be=he[0],Ae=he[1],fe=he[2],me=we[0].length,ke=we[1].length,Te=we[2].length,Me=n(we[0],be),Oe=n(we[1],Ae),Fe=n(we[2],fe),qe=Me+1,et=Oe+1,ze=Fe+1;if(Me=h(Me,0,me-1),qe=h(qe,0,me-1),Oe=h(Oe,0,ke-1),et=h(et,0,ke-1),Fe=h(Fe,0,Te-1),ze=h(ze,0,Te-1),Me<0||Oe<0||Fe<0||qe>me-1||et>ke-1||ze>Te-1)return e.create();var Ue,We,Ze,nt,ft,xt,It=we[0][Me],Et=we[0][qe],it=we[1][Oe],rt=we[1][et],At=we[2][Fe],Gt=(be-It)/(Et-It),Qt=(Ae-it)/(rt-it),Ve=(fe-At)/(we[2][ze]-At);switch(isFinite(Gt)||(Gt=.5),isFinite(Qt)||(Qt=.5),isFinite(Ve)||(Ve=.5),de.reversedX&&(Me=me-1-Me,qe=me-1-qe),de.reversedY&&(Oe=ke-1-Oe,et=ke-1-et),de.reversedZ&&(Fe=Te-1-Fe,ze=Te-1-ze),de.filled){case 5:ft=Fe,xt=ze,Ze=Oe*Te,nt=et*Te,Ue=Me*Te*ke,We=qe*Te*ke;break;case 4:ft=Fe,xt=ze,Ue=Me*Te,We=qe*Te,Ze=Oe*Te*me,nt=et*Te*me;break;case 3:Ze=Oe,nt=et,ft=Fe*ke,xt=ze*ke,Ue=Me*ke*Te,We=qe*ke*Te;break;case 2:Ze=Oe,nt=et,Ue=Me*ke,We=qe*ke,ft=Fe*ke*me,xt=ze*ke*me;break;case 1:Ue=Me,We=qe,ft=Fe*me,xt=ze*me,Ze=Oe*me*Te,nt=et*me*Te;break;default:Ue=Me,We=qe,Ze=Oe*me,nt=et*me,ft=Fe*me*ke,xt=ze*me*ke}var Ye=xe[Ue+Ze+ft],Be=xe[Ue+Ze+xt],Je=xe[Ue+nt+ft],Se=xe[Ue+nt+xt],Pe=xe[We+Ze+ft],De=xe[We+Ze+xt],Ie=xe[We+nt+ft],$e=xe[We+nt+xt],st=e.create(),dt=e.create(),ut=e.create(),Lt=e.create();e.lerp(st,Ye,Pe,Gt),e.lerp(dt,Be,De,Gt),e.lerp(ut,Je,Ie,Gt),e.lerp(Lt,Se,$e,Gt);var lt=e.create(),Ct=e.create();e.lerp(lt,st,ut,Qt),e.lerp(Ct,dt,Lt,Qt);var Pt=e.create();return e.lerp(Pt,lt,Ct,Ve),Pt}(oe,f,w)},T=f.getDivergence||function(oe,he){var le=e.create(),de=1e-4;e.add(le,oe,[de,0,0]);var xe=_(le);e.subtract(xe,xe,he),e.scale(xe,xe,1/de),e.add(le,oe,[0,de,0]);var we=_(le);e.subtract(we,we,he),e.scale(we,we,1/de),e.add(le,oe,[0,0,de]);var be=_(le);return e.subtract(be,be,he),e.scale(be,be,1/de),e.add(le,xe,we),e.add(le,le,be),le},k=[],L=d[0][0],M=d[0][1],I=d[0][2],P=d[1][0],S=d[1][1],E=d[1][2],D=function(oe){var he=oe[0],le=oe[1],de=oe[2];return!(he<L||he>P||le<M||le>S||de<I||de>E)},F=10*e.distance(d[0],d[1])/m,H=F*F,V=1,Q=0,K=v.length;K>1&&(V=function(oe){for(var he=[],le=[],de=[],xe={},we={},be={},Ae=oe.length,fe=0;fe<Ae;fe++){var me=oe[fe],ke=me[0],Te=me[1],Me=me[2];xe[ke]||(he.push(ke),xe[ke]=!0),we[Te]||(le.push(Te),we[Te]=!0),be[Me]||(de.push(Me),be[Me]=!0)}var Oe=s(he),Fe=s(le),qe=s(de),et=Math.min(Oe,Fe,qe);return isFinite(et)?et:1}(v));for(var Z=0;Z<K;Z++){var $=e.create();e.copy($,v[Z]);var re=[$],R=[],N=_($),U=$;R.push(N);var te=[],j=T($,N),Y=e.length(j);isFinite(Y)&&Y>Q&&(Q=Y),te.push(Y),k.push({points:re,velocities:R,divergences:te});for(var J=0;J<100*m&&re.length<m&&D($);){J++;var ee=e.clone(N),ne=e.squaredLength(ee);if(ne===0)break;ne>H&&e.scale(ee,ee,F/Math.sqrt(ne)),e.add(ee,ee,$),N=_(ee),e.squaredDistance(U,ee)-H>-1e-4*H&&(re.push(ee),U=ee,R.push(N),j=T(ee,N),Y=e.length(j),isFinite(Y)&&Y>Q&&(Q=Y),te.push(Y)),$=ee}}var se=i(k,f.colormap,Q,V);return b?se.tubeScale=b:(Q===0&&(Q=1),se.tubeScale=.5*c*V/Q),se};var a=p("./lib/shaders"),l=p("gl-cone3d").createMesh;x.exports.createTubeMesh=function(f,d){return l(f,d,{shaders:a,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(p,x,y){var e=p("gl-shader"),r=p("glslify"),t=r([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),i=r([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),n=r([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),h=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);y.createShader=function(s){var a=e(s,t,i,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return a.attributes.uv.location=0,a.attributes.f.location=1,a.attributes.normal.location=2,a},y.createPickShader=function(s){var a=e(s,t,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return a.attributes.uv.location=0,a.attributes.f.location=1,a.attributes.normal.location=2,a},y.createContourShader=function(s){var a=e(s,n,i,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return a.attributes.uv.location=0,a.attributes.f.location=1,a},y.createPickContourShader=function(s){var a=e(s,n,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return a.attributes.uv.location=0,a.attributes.f.location=1,a}},{"gl-shader":132,glslify:231}],145:[function(p,x,y){x.exports=function(N){var U=N.gl,te=g(U),j=_(U),Y=w(U),J=T(U),ee=r(U),ne=t(U,[{buffer:ee,size:4,stride:40,offset:0},{buffer:ee,size:3,stride:40,offset:16},{buffer:ee,size:3,stride:40,offset:28}]),se=r(U),oe=t(U,[{buffer:se,size:4,stride:20,offset:0},{buffer:se,size:1,stride:20,offset:16}]),he=r(U),le=t(U,[{buffer:he,size:2,type:U.FLOAT}]),de=i(U,1,256,U.RGBA,U.UNSIGNED_BYTE);de.minFilter=U.LINEAR,de.magFilter=U.LINEAR;var xe=new P(U,[0,0],[[0,0,0],[0,0,0]],te,j,ee,ne,de,Y,J,se,oe,he,le,[0,0,0]),we={levels:[[],[],[]]};for(var be in N)we[be]=N[be];return we.colormap=we.colormap||"jet",xe.update(we),xe};var e=p("bit-twiddle"),r=p("gl-buffer"),t=p("gl-vao"),i=p("gl-texture2d"),n=p("typedarray-pool"),h=p("colormap"),s=p("ndarray-ops"),a=p("ndarray-pack"),l=p("ndarray"),f=p("surface-nets"),d=p("gl-mat4/multiply"),v=p("gl-mat4/invert"),m=p("binary-search-bounds"),c=p("ndarray-gradient"),b=p("./lib/shaders"),g=b.createShader,w=b.createContourShader,_=b.createPickShader,T=b.createPickContourShader,k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],M=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function I(N,U,te,j,Y){this.position=N,this.index=U,this.uv=te,this.level=j,this.dataCoordinate=Y}(function(){for(var N=0;N<3;++N){var U=M[N],te=(N+2)%3;U[(N+1)%3+0]=1,U[te+3]=1,U[N+6]=1}})();function P(N,U,te,j,Y,J,ee,ne,se,oe,he,le,de,xe,we){this.gl=N,this.shape=U,this.bounds=te,this.objectOffset=we,this.intensityBounds=[],this._shader=j,this._pickShader=Y,this._coordinateBuffer=J,this._vao=ee,this._colorMap=ne,this._contourShader=se,this._contourPickShader=oe,this._contourBuffer=he,this._contourVAO=le,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new I([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=de,this._dynamicVAO=xe,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[l(n.mallocFloat(1024),[0,0]),l(n.mallocFloat(1024),[0,0]),l(n.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var S=P.prototype;S.genColormap=function(N,U){var te=!1,j=a([h({colormap:N,nshades:256,format:"rgba"}).map(function(Y,J){var ee=U?function(ne,se){if(!se||!se.length)return 1;for(var oe=0;oe<se.length;++oe){if(se.length<2)return 1;if(se[oe][0]===ne)return se[oe][1];if(se[oe][0]>ne&&oe>0){var he=(se[oe][0]-ne)/(se[oe][0]-se[oe-1][0]);return se[oe][1]*(1-he)+he*se[oe-1][1]}}return 1}(J/255,U):Y[3];return ee<1&&(te=!0),[Y[0],Y[1],Y[2],255*ee]})]);return s.divseq(j,255),this.hasAlphaScale=te,j},S.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},S.isOpaque=function(){return!this.isTransparent()},S.pickSlots=1,S.setPickBase=function(N){this.pickId=N};var E=[0,0,0],D={showSurface:!1,showContour:!1,projections:[k.slice(),k.slice(),k.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function F(N,U){var te,j,Y,J=U.axes&&U.axes.lastCubeProps.axis||E,ee=U.showSurface,ne=U.showContour;for(te=0;te<3;++te)for(ee=ee||U.surfaceProject[te],j=0;j<3;++j)ne=ne||U.contourProject[te][j];for(te=0;te<3;++te){var se=D.projections[te];for(j=0;j<16;++j)se[j]=0;for(j=0;j<4;++j)se[5*j]=1;se[5*te]=0,se[12+te]=U.axesBounds[+(J[te]>0)][te],d(se,N.model,se);var oe=D.clipBounds[te];for(Y=0;Y<2;++Y)for(j=0;j<3;++j)oe[Y][j]=N.clipBounds[Y][j];oe[0][te]=-1e8,oe[1][te]=1e8}return D.showSurface=ee,D.showContour=ne,D}var H={model:k,view:k,projection:k,inverseModel:k.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},V=k.slice(),Q=[1,0,0,0,1,0,0,0,1];function K(N,U){N=N||{};var te=this.gl;te.disable(te.CULL_FACE),this._colorMap.bind(0);var j=H;j.model=N.model||k,j.view=N.view||k,j.projection=N.projection||k,j.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],j.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],j.objectOffset=this.objectOffset,j.contourColor=this.contourColor[0],j.inverseModel=v(j.inverseModel,j.model);for(var Y=0;Y<2;++Y)for(var J=j.clipBounds[Y],ee=0;ee<3;++ee)J[ee]=Math.min(Math.max(this.clipBounds[Y][ee],-1e8),1e8);j.kambient=this.ambientLight,j.kdiffuse=this.diffuseLight,j.kspecular=this.specularLight,j.roughness=this.roughness,j.fresnel=this.fresnel,j.opacity=this.opacity,j.height=0,j.permutation=Q,j.vertexColor=this.vertexColor;var ne=V;for(d(ne,j.view,j.model),d(ne,j.projection,ne),v(ne,ne),Y=0;Y<3;++Y)j.eyePosition[Y]=ne[12+Y]/ne[15];var se=ne[15];for(Y=0;Y<3;++Y)se+=this.lightPosition[Y]*ne[4*Y+3];for(Y=0;Y<3;++Y){var oe=ne[12+Y];for(ee=0;ee<3;++ee)oe+=ne[4*ee+Y]*this.lightPosition[ee];j.lightPosition[Y]=oe/se}var he=F(j,this);if(he.showSurface){for(this._shader.bind(),this._shader.uniforms=j,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(te.TRIANGLES,this._vertexCount),Y=0;Y<3;++Y)this.surfaceProject[Y]&&this.vertexCount&&(this._shader.uniforms.model=he.projections[Y],this._shader.uniforms.clipBounds=he.clipBounds[Y],this._vao.draw(te.TRIANGLES,this._vertexCount));this._vao.unbind()}if(he.showContour){var le=this._contourShader;j.kambient=1,j.kdiffuse=0,j.kspecular=0,j.opacity=1,le.bind(),le.uniforms=j;var de=this._contourVAO;for(de.bind(),Y=0;Y<3;++Y)for(le.uniforms.permutation=M[Y],te.lineWidth(this.contourWidth[Y]*this.pixelRatio),ee=0;ee<this.contourLevels[Y].length;++ee)ee===this.highlightLevel[Y]?(le.uniforms.contourColor=this.highlightColor[Y],le.uniforms.contourTint=this.highlightTint[Y]):ee!==0&&ee-1!==this.highlightLevel[Y]||(le.uniforms.contourColor=this.contourColor[Y],le.uniforms.contourTint=this.contourTint[Y]),this._contourCounts[Y][ee]&&(le.uniforms.height=this.contourLevels[Y][ee],de.draw(te.LINES,this._contourCounts[Y][ee],this._contourOffsets[Y][ee]));for(Y=0;Y<3;++Y)for(le.uniforms.model=he.projections[Y],le.uniforms.clipBounds=he.clipBounds[Y],ee=0;ee<3;++ee)if(this.contourProject[Y][ee]){le.uniforms.permutation=M[ee],te.lineWidth(this.contourWidth[ee]*this.pixelRatio);for(var xe=0;xe<this.contourLevels[ee].length;++xe)xe===this.highlightLevel[ee]?(le.uniforms.contourColor=this.highlightColor[ee],le.uniforms.contourTint=this.highlightTint[ee]):xe!==0&&xe-1!==this.highlightLevel[ee]||(le.uniforms.contourColor=this.contourColor[ee],le.uniforms.contourTint=this.contourTint[ee]),this._contourCounts[ee][xe]&&(le.uniforms.height=this.contourLevels[ee][xe],de.draw(te.LINES,this._contourCounts[ee][xe],this._contourOffsets[ee][xe]))}for(de.unbind(),(de=this._dynamicVAO).bind(),Y=0;Y<3;++Y)if(this._dynamicCounts[Y]!==0)for(le.uniforms.model=j.model,le.uniforms.clipBounds=j.clipBounds,le.uniforms.permutation=M[Y],te.lineWidth(this.dynamicWidth[Y]*this.pixelRatio),le.uniforms.contourColor=this.dynamicColor[Y],le.uniforms.contourTint=this.dynamicTint[Y],le.uniforms.height=this.dynamicLevel[Y],de.draw(te.LINES,this._dynamicCounts[Y],this._dynamicOffsets[Y]),ee=0;ee<3;++ee)this.contourProject[ee][Y]&&(le.uniforms.model=he.projections[ee],le.uniforms.clipBounds=he.clipBounds[ee],de.draw(te.LINES,this._dynamicCounts[Y],this._dynamicOffsets[Y]));de.unbind()}}S.draw=function(N){return K.call(this,N,!1)},S.drawTransparent=function(N){return K.call(this,N,!0)};var Z={model:k,view:k,projection:k,inverseModel:k,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function $(N,U){return Array.isArray(N)?[U(N[0]),U(N[1]),U(N[2])]:[U(N),U(N),U(N)]}function re(N){return Array.isArray(N)?N.length===3?[N[0],N[1],N[2],1]:[N[0],N[1],N[2],N[3]]:[0,0,0,1]}function R(N){if(Array.isArray(N)){if(Array.isArray(N))return[re(N[0]),re(N[1]),re(N[2])];var U=re(N);return[U.slice(),U.slice(),U.slice()]}}S.drawPick=function(N){N=N||{};var U=this.gl;U.disable(U.CULL_FACE);var te=Z;te.model=N.model||k,te.view=N.view||k,te.projection=N.projection||k,te.shape=this._field[2].shape,te.pickId=this.pickId/255,te.lowerBound=this.bounds[0],te.upperBound=this.bounds[1],te.objectOffset=this.objectOffset,te.permutation=Q;for(var j=0;j<2;++j)for(var Y=te.clipBounds[j],J=0;J<3;++J)Y[J]=Math.min(Math.max(this.clipBounds[j][J],-1e8),1e8);var ee=F(te,this);if(ee.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=te,this._vao.bind(),this._vao.draw(U.TRIANGLES,this._vertexCount),j=0;j<3;++j)this.surfaceProject[j]&&(this._pickShader.uniforms.model=ee.projections[j],this._pickShader.uniforms.clipBounds=ee.clipBounds[j],this._vao.draw(U.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ee.showContour){var ne=this._contourPickShader;ne.bind(),ne.uniforms=te;var se=this._contourVAO;for(se.bind(),J=0;J<3;++J)for(U.lineWidth(this.contourWidth[J]*this.pixelRatio),ne.uniforms.permutation=M[J],j=0;j<this.contourLevels[J].length;++j)this._contourCounts[J][j]&&(ne.uniforms.height=this.contourLevels[J][j],se.draw(U.LINES,this._contourCounts[J][j],this._contourOffsets[J][j]));for(j=0;j<3;++j)for(ne.uniforms.model=ee.projections[j],ne.uniforms.clipBounds=ee.clipBounds[j],J=0;J<3;++J)if(this.contourProject[j][J]){ne.uniforms.permutation=M[J],U.lineWidth(this.contourWidth[J]*this.pixelRatio);for(var oe=0;oe<this.contourLevels[J].length;++oe)this._contourCounts[J][oe]&&(ne.uniforms.height=this.contourLevels[J][oe],se.draw(U.LINES,this._contourCounts[J][oe],this._contourOffsets[J][oe]))}se.unbind()}},S.pick=function(N){if(!N||N.id!==this.pickId)return null;var U=this._field[2].shape,te=this._pickResult,j=U[0]*(N.value[0]+(N.value[2]>>4)/16)/255,Y=Math.floor(j),J=j-Y,ee=U[1]*(N.value[1]+(15&N.value[2])/16)/255,ne=Math.floor(ee),se=ee-ne;Y+=1,ne+=1;var oe=te.position;oe[0]=oe[1]=oe[2]=0;for(var he=0;he<2;++he)for(var le=he?J:1-J,de=0;de<2;++de)for(var xe=Y+he,we=ne+de,be=le*(de?se:1-se),Ae=0;Ae<3;++Ae)oe[Ae]+=this._field[Ae].get(xe,we)*be;for(var fe=this._pickResult.level,me=0;me<3;++me)if(fe[me]=m.le(this.contourLevels[me],oe[me]),fe[me]<0)this.contourLevels[me].length>0&&(fe[me]=0);else if(fe[me]<this.contourLevels[me].length-1){var ke=this.contourLevels[me][fe[me]],Te=this.contourLevels[me][fe[me]+1];Math.abs(ke-oe[me])>Math.abs(Te-oe[me])&&(fe[me]+=1)}for(te.index[0]=J<.5?Y:Y+1,te.index[1]=se<.5?ne:ne+1,te.uv[0]=j/U[0],te.uv[1]=ee/U[1],Ae=0;Ae<3;++Ae)te.dataCoordinate[Ae]=this._field[Ae].get(te.index[0],te.index[1]);return te},S.padField=function(N,U){var te=U.shape.slice(),j=N.shape.slice();s.assign(N.lo(1,1).hi(te[0],te[1]),U),s.assign(N.lo(1).hi(te[0],1),U.hi(te[0],1)),s.assign(N.lo(1,j[1]-1).hi(te[0],1),U.lo(0,te[1]-1).hi(te[0],1)),s.assign(N.lo(0,1).hi(1,te[1]),U.hi(1)),s.assign(N.lo(j[0]-1,1).hi(1,te[1]),U.lo(te[0]-1)),N.set(0,0,U.get(0,0)),N.set(0,j[1]-1,U.get(0,te[1]-1)),N.set(j[0]-1,0,U.get(te[0]-1,0)),N.set(j[0]-1,j[1]-1,U.get(te[0]-1,te[1]-1))},S.update=function(N){N=N||{},this.objectOffset=N.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in N&&(this.contourWidth=$(N.contourWidth,Number)),"showContour"in N&&(this.showContour=$(N.showContour,Boolean)),"showSurface"in N&&(this.showSurface=!!N.showSurface),"contourTint"in N&&(this.contourTint=$(N.contourTint,Boolean)),"contourColor"in N&&(this.contourColor=R(N.contourColor)),"contourProject"in N&&(this.contourProject=$(N.contourProject,function(qt){return $(qt,Boolean)})),"surfaceProject"in N&&(this.surfaceProject=N.surfaceProject),"dynamicColor"in N&&(this.dynamicColor=R(N.dynamicColor)),"dynamicTint"in N&&(this.dynamicTint=$(N.dynamicTint,Number)),"dynamicWidth"in N&&(this.dynamicWidth=$(N.dynamicWidth,Number)),"opacity"in N&&(this.opacity=N.opacity),"opacityscale"in N&&(this.opacityscale=N.opacityscale),"colorBounds"in N&&(this.colorBounds=N.colorBounds),"vertexColor"in N&&(this.vertexColor=N.vertexColor?1:0),"colormap"in N&&this._colorMap.setPixels(this.genColormap(N.colormap,this.opacityscale));var U=N.field||N.coords&&N.coords[2]||null,te=!1;if(U||(U=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in N||"coords"in N){var j=(U.shape[0]+2)*(U.shape[1]+2);j>this._field[2].data.length&&(n.freeFloat(this._field[2].data),this._field[2].data=n.mallocFloat(e.nextPow2(j))),this._field[2]=l(this._field[2].data,[U.shape[0]+2,U.shape[1]+2]),this.padField(this._field[2],U),this.shape=U.shape.slice();for(var Y=this.shape,J=0;J<2;++J)this._field[2].size>this._field[J].data.length&&(n.freeFloat(this._field[J].data),this._field[J].data=n.mallocFloat(this._field[2].size)),this._field[J]=l(this._field[J].data,[Y[0]+2,Y[1]+2]);if(N.coords){var ee=N.coords;if(!Array.isArray(ee)||ee.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(J=0;J<2;++J){var ne=ee[J];for(de=0;de<2;++de)if(ne.shape[de]!==Y[de])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[J],ne)}}else if(N.ticks){var se=N.ticks;if(!Array.isArray(se)||se.length!==2)throw new Error("gl-surface: invalid ticks");for(J=0;J<2;++J){var oe=se[J];if((Array.isArray(oe)||oe.length)&&(oe=l(oe)),oe.shape[0]!==Y[J])throw new Error("gl-surface: invalid tick length");var he=l(oe.data,Y);he.stride[J]=oe.stride[0],he.stride[1^J]=0,this.padField(this._field[J],he)}}else{for(J=0;J<2;++J){var le=[0,0];le[J]=1,this._field[J]=l(this._field[J].data,[Y[0]+2,Y[1]+2],le,0)}this._field[0].set(0,0,0);for(var de=0;de<Y[0];++de)this._field[0].set(de+1,0,de);for(this._field[0].set(Y[0]+1,0,Y[0]-1),this._field[1].set(0,0,0),de=0;de<Y[1];++de)this._field[1].set(0,de+1,de);this._field[1].set(0,Y[1]+1,Y[1]-1)}var xe=this._field,we=l(n.mallocFloat(3*xe[2].size*2),[3,Y[0]+2,Y[1]+2,2]);for(J=0;J<3;++J)c(we.pick(J),xe[J],"mirror");var be=l(n.mallocFloat(3*xe[2].size),[Y[0]+2,Y[1]+2,3]);for(J=0;J<Y[0]+2;++J)for(de=0;de<Y[1]+2;++de){var Ae=we.get(0,J,de,0),fe=we.get(0,J,de,1),me=we.get(1,J,de,0),ke=we.get(1,J,de,1),Te=we.get(2,J,de,0),Me=we.get(2,J,de,1),Oe=me*Me-ke*Te,Fe=Te*fe-Me*Ae,qe=Ae*ke-fe*me,et=Math.sqrt(Oe*Oe+Fe*Fe+qe*qe);et<1e-8?(et=Math.max(Math.abs(Oe),Math.abs(Fe),Math.abs(qe)))<1e-8?(qe=1,Fe=Oe=0,et=1):et=1/et:et=1/Math.sqrt(et),be.set(J,de,0,Oe*et),be.set(J,de,1,Fe*et),be.set(J,de,2,qe*et)}n.free(we.data);var ze=[1/0,1/0,1/0],Ue=[-1/0,-1/0,-1/0],We=1/0,Ze=-1/0,nt=(Y[0]-1)*(Y[1]-1)*6,ft=n.mallocFloat(e.nextPow2(10*nt)),xt=0,It=0;for(J=0;J<Y[0]-1;++J)e:for(de=0;de<Y[1]-1;++de){for(var Et=0;Et<2;++Et)for(var it=0;it<2;++it)for(var rt=0;rt<3;++rt){var At=this._field[rt].get(1+J+Et,1+de+it);if(isNaN(At)||!isFinite(At))continue e}for(rt=0;rt<6;++rt){var Gt=J+L[rt][0],Qt=de+L[rt][1],Ve=this._field[0].get(Gt+1,Qt+1),Ye=this._field[1].get(Gt+1,Qt+1);At=this._field[2].get(Gt+1,Qt+1),Oe=be.get(Gt+1,Qt+1,0),Fe=be.get(Gt+1,Qt+1,1),qe=be.get(Gt+1,Qt+1,2),N.intensity&&(Be=N.intensity.get(Gt,Qt));var Be=N.intensity?N.intensity.get(Gt,Qt):At+this.objectOffset[2];ft[xt++]=Gt,ft[xt++]=Qt,ft[xt++]=Ve,ft[xt++]=Ye,ft[xt++]=At,ft[xt++]=0,ft[xt++]=Be,ft[xt++]=Oe,ft[xt++]=Fe,ft[xt++]=qe,ze[0]=Math.min(ze[0],Ve+this.objectOffset[0]),ze[1]=Math.min(ze[1],Ye+this.objectOffset[1]),ze[2]=Math.min(ze[2],At+this.objectOffset[2]),We=Math.min(We,Be),Ue[0]=Math.max(Ue[0],Ve+this.objectOffset[0]),Ue[1]=Math.max(Ue[1],Ye+this.objectOffset[1]),Ue[2]=Math.max(Ue[2],At+this.objectOffset[2]),Ze=Math.max(Ze,Be),It+=1}}for(N.intensityBounds&&(We=+N.intensityBounds[0],Ze=+N.intensityBounds[1]),J=6;J<xt;J+=10)ft[J]=(ft[J]-We)/(Ze-We);this._vertexCount=It,this._coordinateBuffer.update(ft.subarray(0,xt)),n.freeFloat(ft),n.free(be.data),this.bounds=[ze,Ue],this.intensity=N.intensity||this._field[2],this.intensityBounds[0]===We&&this.intensityBounds[1]===Ze||(te=!0),this.intensityBounds=[We,Ze]}if("levels"in N){var Je=N.levels;for(Je=Array.isArray(Je[0])?Je.slice():[[],[],Je],J=0;J<3;++J)Je[J]=Je[J].slice(),Je[J].sort(function(qt,Jt){return qt-Jt});for(J=0;J<3;++J)for(de=0;de<Je[J].length;++de)Je[J][de]-=this.objectOffset[J];e:for(J=0;J<3;++J){if(Je[J].length!==this.contourLevels[J].length){te=!0;break}for(de=0;de<Je[J].length;++de)if(Je[J][de]!==this.contourLevels[J][de]){te=!0;break e}}this.contourLevels=Je}if(te){xe=this._field,Y=this.shape;for(var Se=[],Pe=0;Pe<3;++Pe){var De=this.contourLevels[Pe],Ie=[],$e=[],st=[0,0,0];for(J=0;J<De.length;++J){var dt=f(this._field[Pe],De[J]);Ie.push(Se.length/5|0),It=0;e:for(de=0;de<dt.cells.length;++de){var ut=dt.cells[de];for(rt=0;rt<2;++rt){var Lt=dt.positions[ut[rt]],lt=Lt[0],Ct=0|Math.floor(lt),Pt=lt-Ct,Ke=Lt[1],mt=0|Math.floor(Ke),Dt=Ke-mt,Bt=!1;t:for(var Zt=0;Zt<3;++Zt){st[Zt]=0;var Re=(Pe+Zt+1)%3;for(Et=0;Et<2;++Et){var ct=Et?Pt:1-Pt;for(Gt=0|Math.min(Math.max(Ct+Et,0),Y[0]),it=0;it<2;++it){var wt=it?Dt:1-Dt;if(Qt=0|Math.min(Math.max(mt+it,0),Y[1]),At=Zt<2?this._field[Re].get(Gt,Qt):(this.intensity.get(Gt,Qt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(At)||isNaN(At)){Bt=!0;break t}var Rt=ct*wt;st[Zt]+=Rt*At}}}if(Bt){if(rt>0){for(var Vt=0;Vt<5;++Vt)Se.pop();It-=1}continue e}Se.push(st[0],st[1],Lt[0],Lt[1],st[2]),It+=1}}$e.push(It)}this._contourOffsets[Pe]=Ie,this._contourCounts[Pe]=$e}var rr=n.mallocFloat(Se.length);for(J=0;J<Se.length;++J)rr[J]=Se[J];this._contourBuffer.update(rr),n.freeFloat(rr)}},S.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var N=0;N<3;++N)n.freeFloat(this._field[N].data)},S.highlight=function(N){var U,te;if(!N)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(U=0;U<3;++U)this.enableHighlight[U]?this.highlightLevel[U]=N.level[U]:this.highlightLevel[U]=-1;for(te=this.snapToData?N.dataCoordinate:N.position,U=0;U<3;++U)te[U]-=this.objectOffset[U];if(this.enableDynamic[0]&&te[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&te[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&te[2]!==this.dynamicLevel[2]){for(var j=0,Y=this.shape,J=n.mallocFloat(12*Y[0]*Y[1]),ee=0;ee<3;++ee)if(this.enableDynamic[ee]){this.dynamicLevel[ee]=te[ee];var ne=(ee+1)%3,se=(ee+2)%3,oe=this._field[ee],he=this._field[ne],le=this._field[se],de=f(oe,te[ee]),xe=de.cells,we=de.positions;for(this._dynamicOffsets[ee]=j,U=0;U<xe.length;++U)for(var be=xe[U],Ae=0;Ae<2;++Ae){var fe=we[be[Ae]],me=+fe[0],ke=0|me,Te=0|Math.min(ke+1,Y[0]),Me=me-ke,Oe=1-Me,Fe=+fe[1],qe=0|Fe,et=0|Math.min(qe+1,Y[1]),ze=Fe-qe,Ue=1-ze,We=Oe*Ue,Ze=Oe*ze,nt=Me*Ue,ft=Me*ze,xt=We*he.get(ke,qe)+Ze*he.get(ke,et)+nt*he.get(Te,qe)+ft*he.get(Te,et),It=We*le.get(ke,qe)+Ze*le.get(ke,et)+nt*le.get(Te,qe)+ft*le.get(Te,et);if(isNaN(xt)||isNaN(It)){Ae&&(j-=1);break}J[2*j+0]=xt,J[2*j+1]=It,j+=1}this._dynamicCounts[ee]=j-this._dynamicOffsets[ee]}else this.dynamicLevel[ee]=NaN,this._dynamicCounts[ee]=0;this._dynamicBuffer.update(J.subarray(0,2*j)),n.freeFloat(J)}}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(p,x,y){var e=p("ndarray"),r=p("ndarray-ops"),t=p("typedarray-pool");x.exports=function(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(i||s(_),typeof arguments[1]=="number")return b(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return b(_,0|arguments[1][0],0|arguments[1][1],arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var T=arguments[1],k=a(T)?T:T.raw;if(k)return g(_,k,0|T.width,0|T.height,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(T.shape&&T.data&&T.stride)return w(_,T)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var i=null,n=null,h=null;function s(_){i=[_.LINEAR,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_NEAREST],n=[_.NEAREST,_.LINEAR,_.NEAREST_MIPMAP_NEAREST,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_LINEAR],h=[_.REPEAT,_.CLAMP_TO_EDGE,_.MIRRORED_REPEAT]}function a(_){return typeof HTMLCanvasElement!="undefined"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement!="undefined"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement!="undefined"&&_ instanceof HTMLVideoElement||typeof ImageData!="undefined"&&_ instanceof ImageData}var l=function(_,T){r.muls(_,T,255)};function f(_,T,k){var L=_.gl,M=L.getParameter(L.MAX_TEXTURE_SIZE);if(T<0||T>M||k<0||k>M)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[T,k],_.bind(),L.texImage2D(L.TEXTURE_2D,0,_.format,T,k,0,_.format,_.type,null),_._mipLevels=[0],_}function d(_,T,k,L,M,I){this.gl=_,this.handle=T,this.format=M,this.type=I,this._shape=[k,L],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var P=this,S=[this._wrapS,this._wrapT];Object.defineProperties(S,[{get:function(){return P._wrapS},set:function(D){return P.wrapS=D}},{get:function(){return P._wrapT},set:function(D){return P.wrapT=D}}]),this._wrapVector=S;var E=[this._shape[0],this._shape[1]];Object.defineProperties(E,[{get:function(){return P._shape[0]},set:function(D){return P.width=D}},{get:function(){return P._shape[1]},set:function(D){return P.height=D}}]),this._shapeVector=E}var v=d.prototype;function m(_,T){return _.length===3?T[2]===1&&T[1]===_[0]*_[2]&&T[0]===_[2]:T[0]===1&&T[1]===_[0]}function c(_){var T=_.createTexture();return _.bindTexture(_.TEXTURE_2D,T),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),T}function b(_,T,k,L,M){var I=_.getParameter(_.MAX_TEXTURE_SIZE);if(T<0||T>I||k<0||k>I)throw new Error("gl-texture2d: Invalid texture shape");if(M===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var P=c(_);return _.texImage2D(_.TEXTURE_2D,0,L,T,k,0,L,M,null),new d(_,P,T,k,L,M)}function g(_,T,k,L,M,I){var P=c(_);return _.texImage2D(_.TEXTURE_2D,0,M,M,I,T),new d(_,P,k,L,M,I)}function w(_,T){var k=T.dtype,L=T.shape.slice(),M=_.getParameter(_.MAX_TEXTURE_SIZE);if(L[0]<0||L[0]>M||L[1]<0||L[1]>M)throw new Error("gl-texture2d: Invalid texture size");var I=m(L,T.stride.slice()),P=0;k==="float32"?P=_.FLOAT:k==="float64"?(P=_.FLOAT,I=!1,k="float32"):k==="uint8"?P=_.UNSIGNED_BYTE:(P=_.UNSIGNED_BYTE,I=!1,k="uint8");var S,E,D=0;if(L.length===2)D=_.LUMINANCE,L=[L[0],L[1],1],T=e(T.data,L,[T.stride[0],T.stride[1],1],T.offset);else{if(L.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(L[2]===1)D=_.ALPHA;else if(L[2]===2)D=_.LUMINANCE_ALPHA;else if(L[2]===3)D=_.RGB;else{if(L[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");D=_.RGBA}}P!==_.FLOAT||_.getExtension("OES_texture_float")||(P=_.UNSIGNED_BYTE,I=!1);var F=T.size;if(I)S=T.offset===0&&T.data.length===F?T.data:T.data.subarray(T.offset,T.offset+F);else{var H=[L[2],L[2]*L[0],1];E=t.malloc(F,k);var V=e(E,L,H,0);k!=="float32"&&k!=="float64"||P!==_.UNSIGNED_BYTE?r.assign(V,T):l(V,T),S=E.subarray(0,F)}var Q=c(_);return _.texImage2D(_.TEXTURE_2D,0,D,L[0],L[1],0,D,P,S),I||t.free(E),new d(_,Q,L[0],L[1],D,P)}Object.defineProperties(v,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var T=this.gl;if(this.type===T.FLOAT&&i.indexOf(_)>=0&&(T.getExtension("OES_texture_float_linear")||(_=T.NEAREST)),n.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var T=this.gl;if(this.type===T.FLOAT&&i.indexOf(_)>=0&&(T.getExtension("OES_texture_float_linear")||(_=T.NEAREST)),n.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var T=this._anisoSamples;if(this._anisoSamples=0|Math.max(_,1),T!==this._anisoSamples){var k=this.gl.getExtension("EXT_texture_filter_anisotropic");k&&this.gl.texParameterf(this.gl.TEXTURE_2D,k.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),h.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),h.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),_.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var T=0;T<2;++T)if(h.indexOf(_[T])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var k=this.gl;return this.bind(),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,this._wrapS),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(Array.isArray(_)){if(_.length!==2)throw new Error("gl-texture2d: Invalid texture shape")}else _=[0|_,0|_];return f(this,0|_[0],0|_[1]),[0|_[0],0|_[1]]}},width:{get:function(){return this._shape[0]},set:function(_){return f(this,_|=0,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return _|=0,f(this,this._shape[0],_),_}}}),v.bind=function(_){var T=this.gl;return _!==void 0&&T.activeTexture(T.TEXTURE0+(0|_)),T.bindTexture(T.TEXTURE_2D,this.handle),_!==void 0?0|_:T.getParameter(T.ACTIVE_TEXTURE)-T.TEXTURE0},v.dispose=function(){this.gl.deleteTexture(this.handle)},v.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),T=0;_>0;++T,_>>>=1)this._mipLevels.indexOf(T)<0&&this._mipLevels.push(T)},v.setPixels=function(_,T,k,L){var M=this.gl;this.bind(),Array.isArray(T)?(L=k,k=0|T[1],T=0|T[0]):(T=T||0,k=k||0),L=L||0;var I=a(_)?_:_.raw;if(I)this._mipLevels.indexOf(L)<0?(M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,this.type,I),this._mipLevels.push(L)):M.texSubImage2D(M.TEXTURE_2D,L,T,k,this.format,this.type,I);else{if(!(_.shape&&_.stride&&_.data))throw new Error("gl-texture2d: Unsupported data type");if(_.shape.length<2||T+_.shape[1]>this._shape[1]>>>L||k+_.shape[0]>this._shape[0]>>>L||T<0||k<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");(function(P,S,E,D,F,H,V,Q){var K=Q.dtype,Z=Q.shape.slice();if(Z.length<2||Z.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var $=0,re=0,R=m(Z,Q.stride.slice());if(K==="float32"?$=P.FLOAT:K==="float64"?($=P.FLOAT,R=!1,K="float32"):K==="uint8"?$=P.UNSIGNED_BYTE:($=P.UNSIGNED_BYTE,R=!1,K="uint8"),Z.length===2)re=P.LUMINANCE,Z=[Z[0],Z[1],1],Q=e(Q.data,Z,[Q.stride[0],Q.stride[1],1],Q.offset);else{if(Z.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(Z[2]===1)re=P.ALPHA;else if(Z[2]===2)re=P.LUMINANCE_ALPHA;else if(Z[2]===3)re=P.RGB;else{if(Z[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");re=P.RGBA}Z[2]}if(re!==P.LUMINANCE&&re!==P.ALPHA||F!==P.LUMINANCE&&F!==P.ALPHA||(re=F),re!==F)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var N=Q.size,U=V.indexOf(D)<0;if(U&&V.push(D),$===H&&R)Q.offset===0&&Q.data.length===N?U?P.texImage2D(P.TEXTURE_2D,D,F,Z[0],Z[1],0,F,H,Q.data):P.texSubImage2D(P.TEXTURE_2D,D,S,E,Z[0],Z[1],F,H,Q.data):U?P.texImage2D(P.TEXTURE_2D,D,F,Z[0],Z[1],0,F,H,Q.data.subarray(Q.offset,Q.offset+N)):P.texSubImage2D(P.TEXTURE_2D,D,S,E,Z[0],Z[1],F,H,Q.data.subarray(Q.offset,Q.offset+N));else{var te;te=H===P.FLOAT?t.mallocFloat32(N):t.mallocUint8(N);var j=e(te,Z,[Z[2],Z[2]*Z[0],1]);$===P.FLOAT&&H===P.UNSIGNED_BYTE?l(j,Q):r.assign(j,Q),U?P.texImage2D(P.TEXTURE_2D,D,F,Z[0],Z[1],0,F,H,te.subarray(0,N)):P.texSubImage2D(P.TEXTURE_2D,D,S,E,Z[0],Z[1],F,H,te.subarray(0,N)),H===P.FLOAT?t.freeFloat32(te):t.freeUint8(te)}})(M,T,k,L,this.format,this.type,this._mipLevels,_)}}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(p,x,y){x.exports=function(e,r,t){r?r.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var i=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(t){if(t.length>i)throw new Error("gl-vao: Too many vertex attributes");for(var n=0;n<t.length;++n){var h=t[n];if(h.buffer){var s=h.buffer,a=h.size||4,l=h.type||e.FLOAT,f=!!h.normalized,d=h.stride||0,v=h.offset||0;s.bind(),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,a,l,f,d,v)}else{if(typeof h=="number")e.vertexAttrib1f(n,h);else if(h.length===1)e.vertexAttrib1f(n,h[0]);else if(h.length===2)e.vertexAttrib2f(n,h[0],h[1]);else if(h.length===3)e.vertexAttrib3f(n,h[0],h[1],h[2]);else{if(h.length!==4)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(n,h[0],h[1],h[2],h[3])}e.disableVertexAttribArray(n)}}for(;n<i;++n)e.disableVertexAttribArray(n)}else for(e.bindBuffer(e.ARRAY_BUFFER,null),n=0;n<i;++n)e.disableVertexAttribArray(n)}},{}],148:[function(p,x,y){var e=p("./do-bind.js");function r(t){this.gl=t,this._elements=null,this._attributes=null,this._elementsType=t.UNSIGNED_SHORT}r.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},r.prototype.update=function(t,i,n){this._elements=i,this._attributes=t,this._elementsType=n||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(t,i,n){n=n||0;var h=this.gl;this._elements?h.drawElements(t,i,this._elementsType,n):h.drawArrays(t,n,i)},x.exports=function(t){return new r(t)}},{"./do-bind.js":147}],149:[function(p,x,y){var e=p("./do-bind.js");function r(i,n,h,s,a,l){this.location=i,this.dimension=n,this.a=h,this.b=s,this.c=a,this.d=l}function t(i,n,h){this.gl=i,this._ext=n,this.handle=h,this._attribs=[],this._useElements=!1,this._elementsType=i.UNSIGNED_SHORT}r.prototype.bind=function(i){switch(this.dimension){case 1:i.vertexAttrib1f(this.location,this.a);break;case 2:i.vertexAttrib2f(this.location,this.a,this.b);break;case 3:i.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:i.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},t.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var i=0;i<this._attribs.length;++i)this._attribs[i].bind(this.gl)},t.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},t.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},t.prototype.update=function(i,n,h){if(this.bind(),e(this.gl,n,i),this.unbind(),this._attribs.length=0,i)for(var s=0;s<i.length;++s){var a=i[s];typeof a=="number"?this._attribs.push(new r(s,1,a)):Array.isArray(a)&&this._attribs.push(new r(s,a.length,a[0],a[1],a[2],a[3]))}this._useElements=!!n,this._elementsType=h||this.gl.UNSIGNED_SHORT},t.prototype.draw=function(i,n,h){h=h||0;var s=this.gl;this._useElements?s.drawElements(i,n,this._elementsType,h):s.drawArrays(i,h,n)},x.exports=function(i,n){return new t(i,n,n.createVertexArrayOES())}},{"./do-bind.js":147}],150:[function(p,x,y){var e=p("./lib/vao-native.js"),r=p("./lib/vao-emulated.js");function t(i){this.bindVertexArrayOES=i.bindVertexArray.bind(i),this.createVertexArrayOES=i.createVertexArray.bind(i),this.deleteVertexArrayOES=i.deleteVertexArray.bind(i)}x.exports=function(i,n,h,s){var a,l=i.createVertexArray?new t(i):i.getExtension("OES_vertex_array_object");return(a=l?e(i,l):r(i)).update(n,h,s),a}},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(p,x,y){x.exports=function(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e[2]=r[2]+t[2],e}},{}],152:[function(p,x,y){x.exports=function(i,n){var h=e(i[0],i[1],i[2]),s=e(n[0],n[1],n[2]);r(h,h),r(s,s);var a=t(h,s);return a>1?0:Math.acos(a)};var e=p("./fromValues"),r=p("./normalize"),t=p("./dot")},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(p,x,y){x.exports=function(e,r){return e[0]=Math.ceil(r[0]),e[1]=Math.ceil(r[1]),e[2]=Math.ceil(r[2]),e}},{}],154:[function(p,x,y){x.exports=function(e){var r=new Float32Array(3);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}},{}],155:[function(p,x,y){x.exports=function(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}},{}],156:[function(p,x,y){x.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},{}],157:[function(p,x,y){x.exports=function(e,r,t){var i=r[0],n=r[1],h=r[2],s=t[0],a=t[1],l=t[2];return e[0]=n*l-h*a,e[1]=h*s-i*l,e[2]=i*a-n*s,e}},{}],158:[function(p,x,y){x.exports=p("./distance")},{"./distance":159}],159:[function(p,x,y){x.exports=function(e,r){var t=r[0]-e[0],i=r[1]-e[1],n=r[2]-e[2];return Math.sqrt(t*t+i*i+n*n)}},{}],160:[function(p,x,y){x.exports=p("./divide")},{"./divide":161}],161:[function(p,x,y){x.exports=function(e,r,t){return e[0]=r[0]/t[0],e[1]=r[1]/t[1],e[2]=r[2]/t[2],e}},{}],162:[function(p,x,y){x.exports=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}},{}],163:[function(p,x,y){x.exports=1e-6},{}],164:[function(p,x,y){x.exports=function(r,t){var i=r[0],n=r[1],h=r[2],s=t[0],a=t[1],l=t[2];return Math.abs(i-s)<=e*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(n-a)<=e*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(h-l)<=e*Math.max(1,Math.abs(h),Math.abs(l))};var e=p("./epsilon")},{"./epsilon":163}],165:[function(p,x,y){x.exports=function(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]}},{}],166:[function(p,x,y){x.exports=function(e,r){return e[0]=Math.floor(r[0]),e[1]=Math.floor(r[1]),e[2]=Math.floor(r[2]),e}},{}],167:[function(p,x,y){x.exports=function(r,t,i,n,h,s){var a,l;for(t||(t=3),i||(i=0),l=n?Math.min(n*t+i,r.length):r.length,a=i;a<l;a+=t)e[0]=r[a],e[1]=r[a+1],e[2]=r[a+2],h(e,e,s),r[a]=e[0],r[a+1]=e[1],r[a+2]=e[2];return r};var e=p("./create")()},{"./create":156}],168:[function(p,x,y){x.exports=function(e,r,t){var i=new Float32Array(3);return i[0]=e,i[1]=r,i[2]=t,i}},{}],169:[function(p,x,y){x.exports={EPSILON:p("./epsilon"),create:p("./create"),clone:p("./clone"),angle:p("./angle"),fromValues:p("./fromValues"),copy:p("./copy"),set:p("./set"),equals:p("./equals"),exactEquals:p("./exactEquals"),add:p("./add"),subtract:p("./subtract"),sub:p("./sub"),multiply:p("./multiply"),mul:p("./mul"),divide:p("./divide"),div:p("./div"),min:p("./min"),max:p("./max"),floor:p("./floor"),ceil:p("./ceil"),round:p("./round"),scale:p("./scale"),scaleAndAdd:p("./scaleAndAdd"),distance:p("./distance"),dist:p("./dist"),squaredDistance:p("./squaredDistance"),sqrDist:p("./sqrDist"),length:p("./length"),len:p("./len"),squaredLength:p("./squaredLength"),sqrLen:p("./sqrLen"),negate:p("./negate"),inverse:p("./inverse"),normalize:p("./normalize"),dot:p("./dot"),cross:p("./cross"),lerp:p("./lerp"),random:p("./random"),transformMat4:p("./transformMat4"),transformMat3:p("./transformMat3"),transformQuat:p("./transformQuat"),rotateX:p("./rotateX"),rotateY:p("./rotateY"),rotateZ:p("./rotateZ"),forEach:p("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(p,x,y){x.exports=function(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e}},{}],171:[function(p,x,y){x.exports=p("./length")},{"./length":172}],172:[function(p,x,y){x.exports=function(e){var r=e[0],t=e[1],i=e[2];return Math.sqrt(r*r+t*t+i*i)}},{}],173:[function(p,x,y){x.exports=function(e,r,t,i){var n=r[0],h=r[1],s=r[2];return e[0]=n+i*(t[0]-n),e[1]=h+i*(t[1]-h),e[2]=s+i*(t[2]-s),e}},{}],174:[function(p,x,y){x.exports=function(e,r,t){return e[0]=Math.max(r[0],t[0]),e[1]=Math.max(r[1],t[1]),e[2]=Math.max(r[2],t[2]),e}},{}],175:[function(p,x,y){x.exports=function(e,r,t){return e[0]=Math.min(r[0],t[0]),e[1]=Math.min(r[1],t[1]),e[2]=Math.min(r[2],t[2]),e}},{}],176:[function(p,x,y){x.exports=p("./multiply")},{"./multiply":177}],177:[function(p,x,y){x.exports=function(e,r,t){return e[0]=r[0]*t[0],e[1]=r[1]*t[1],e[2]=r[2]*t[2],e}},{}],178:[function(p,x,y){x.exports=function(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e}},{}],179:[function(p,x,y){x.exports=function(e,r){var t=r[0],i=r[1],n=r[2],h=t*t+i*i+n*n;return h>0&&(h=1/Math.sqrt(h),e[0]=r[0]*h,e[1]=r[1]*h,e[2]=r[2]*h),e}},{}],180:[function(p,x,y){x.exports=function(e,r){r=r||1;var t=2*Math.random()*Math.PI,i=2*Math.random()-1,n=Math.sqrt(1-i*i)*r;return e[0]=Math.cos(t)*n,e[1]=Math.sin(t)*n,e[2]=i*r,e}},{}],181:[function(p,x,y){x.exports=function(e,r,t,i){var n=t[1],h=t[2],s=r[1]-n,a=r[2]-h,l=Math.sin(i),f=Math.cos(i);return e[0]=r[0],e[1]=n+s*f-a*l,e[2]=h+s*l+a*f,e}},{}],182:[function(p,x,y){x.exports=function(e,r,t,i){var n=t[0],h=t[2],s=r[0]-n,a=r[2]-h,l=Math.sin(i),f=Math.cos(i);return e[0]=n+a*l+s*f,e[1]=r[1],e[2]=h+a*f-s*l,e}},{}],183:[function(p,x,y){x.exports=function(e,r,t,i){var n=t[0],h=t[1],s=r[0]-n,a=r[1]-h,l=Math.sin(i),f=Math.cos(i);return e[0]=n+s*f-a*l,e[1]=h+s*l+a*f,e[2]=r[2],e}},{}],184:[function(p,x,y){x.exports=function(e,r){return e[0]=Math.round(r[0]),e[1]=Math.round(r[1]),e[2]=Math.round(r[2]),e}},{}],185:[function(p,x,y){x.exports=function(e,r,t){return e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t,e}},{}],186:[function(p,x,y){x.exports=function(e,r,t,i){return e[0]=r[0]+t[0]*i,e[1]=r[1]+t[1]*i,e[2]=r[2]+t[2]*i,e}},{}],187:[function(p,x,y){x.exports=function(e,r,t,i){return e[0]=r,e[1]=t,e[2]=i,e}},{}],188:[function(p,x,y){x.exports=p("./squaredDistance")},{"./squaredDistance":190}],189:[function(p,x,y){x.exports=p("./squaredLength")},{"./squaredLength":191}],190:[function(p,x,y){x.exports=function(e,r){var t=r[0]-e[0],i=r[1]-e[1],n=r[2]-e[2];return t*t+i*i+n*n}},{}],191:[function(p,x,y){x.exports=function(e){var r=e[0],t=e[1],i=e[2];return r*r+t*t+i*i}},{}],192:[function(p,x,y){x.exports=p("./subtract")},{"./subtract":193}],193:[function(p,x,y){x.exports=function(e,r,t){return e[0]=r[0]-t[0],e[1]=r[1]-t[1],e[2]=r[2]-t[2],e}},{}],194:[function(p,x,y){x.exports=function(e,r,t){var i=r[0],n=r[1],h=r[2];return e[0]=i*t[0]+n*t[3]+h*t[6],e[1]=i*t[1]+n*t[4]+h*t[7],e[2]=i*t[2]+n*t[5]+h*t[8],e}},{}],195:[function(p,x,y){x.exports=function(e,r,t){var i=r[0],n=r[1],h=r[2],s=t[3]*i+t[7]*n+t[11]*h+t[15];return s=s||1,e[0]=(t[0]*i+t[4]*n+t[8]*h+t[12])/s,e[1]=(t[1]*i+t[5]*n+t[9]*h+t[13])/s,e[2]=(t[2]*i+t[6]*n+t[10]*h+t[14])/s,e}},{}],196:[function(p,x,y){x.exports=function(e,r,t){var i=r[0],n=r[1],h=r[2],s=t[0],a=t[1],l=t[2],f=t[3],d=f*i+a*h-l*n,v=f*n+l*i-s*h,m=f*h+s*n-a*i,c=-s*i-a*n-l*h;return e[0]=d*f+c*-s+v*-l-m*-a,e[1]=v*f+c*-a+m*-s-d*-l,e[2]=m*f+c*-l+d*-a-v*-s,e}},{}],197:[function(p,x,y){x.exports=function(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e[2]=r[2]+t[2],e[3]=r[3]+t[3],e}},{}],198:[function(p,x,y){x.exports=function(e){var r=new Float32Array(4);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}},{}],199:[function(p,x,y){x.exports=function(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}},{}],200:[function(p,x,y){x.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},{}],201:[function(p,x,y){x.exports=function(e,r){var t=r[0]-e[0],i=r[1]-e[1],n=r[2]-e[2],h=r[3]-e[3];return Math.sqrt(t*t+i*i+n*n+h*h)}},{}],202:[function(p,x,y){x.exports=function(e,r,t){return e[0]=r[0]/t[0],e[1]=r[1]/t[1],e[2]=r[2]/t[2],e[3]=r[3]/t[3],e}},{}],203:[function(p,x,y){x.exports=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3]}},{}],204:[function(p,x,y){x.exports=function(e,r,t,i){var n=new Float32Array(4);return n[0]=e,n[1]=r,n[2]=t,n[3]=i,n}},{}],205:[function(p,x,y){x.exports={create:p("./create"),clone:p("./clone"),fromValues:p("./fromValues"),copy:p("./copy"),set:p("./set"),add:p("./add"),subtract:p("./subtract"),multiply:p("./multiply"),divide:p("./divide"),min:p("./min"),max:p("./max"),scale:p("./scale"),scaleAndAdd:p("./scaleAndAdd"),distance:p("./distance"),squaredDistance:p("./squaredDistance"),length:p("./length"),squaredLength:p("./squaredLength"),negate:p("./negate"),inverse:p("./inverse"),normalize:p("./normalize"),dot:p("./dot"),lerp:p("./lerp"),random:p("./random"),transformMat4:p("./transformMat4"),transformQuat:p("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(p,x,y){x.exports=function(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e[3]=1/r[3],e}},{}],207:[function(p,x,y){x.exports=function(e){var r=e[0],t=e[1],i=e[2],n=e[3];return Math.sqrt(r*r+t*t+i*i+n*n)}},{}],208:[function(p,x,y){x.exports=function(e,r,t,i){var n=r[0],h=r[1],s=r[2],a=r[3];return e[0]=n+i*(t[0]-n),e[1]=h+i*(t[1]-h),e[2]=s+i*(t[2]-s),e[3]=a+i*(t[3]-a),e}},{}],209:[function(p,x,y){x.exports=function(e,r,t){return e[0]=Math.max(r[0],t[0]),e[1]=Math.max(r[1],t[1]),e[2]=Math.max(r[2],t[2]),e[3]=Math.max(r[3],t[3]),e}},{}],210:[function(p,x,y){x.exports=function(e,r,t){return e[0]=Math.min(r[0],t[0]),e[1]=Math.min(r[1],t[1]),e[2]=Math.min(r[2],t[2]),e[3]=Math.min(r[3],t[3]),e}},{}],211:[function(p,x,y){x.exports=function(e,r,t){return e[0]=r[0]*t[0],e[1]=r[1]*t[1],e[2]=r[2]*t[2],e[3]=r[3]*t[3],e}},{}],212:[function(p,x,y){x.exports=function(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e[3]=-r[3],e}},{}],213:[function(p,x,y){x.exports=function(e,r){var t=r[0],i=r[1],n=r[2],h=r[3],s=t*t+i*i+n*n+h*h;return s>0&&(s=1/Math.sqrt(s),e[0]=t*s,e[1]=i*s,e[2]=n*s,e[3]=h*s),e}},{}],214:[function(p,x,y){var e=p("./normalize"),r=p("./scale");x.exports=function(t,i){return i=i||1,t[0]=Math.random(),t[1]=Math.random(),t[2]=Math.random(),t[3]=Math.random(),e(t,t),r(t,t,i),t}},{"./normalize":213,"./scale":215}],215:[function(p,x,y){x.exports=function(e,r,t){return e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t,e[3]=r[3]*t,e}},{}],216:[function(p,x,y){x.exports=function(e,r,t,i){return e[0]=r[0]+t[0]*i,e[1]=r[1]+t[1]*i,e[2]=r[2]+t[2]*i,e[3]=r[3]+t[3]*i,e}},{}],217:[function(p,x,y){x.exports=function(e,r,t,i,n){return e[0]=r,e[1]=t,e[2]=i,e[3]=n,e}},{}],218:[function(p,x,y){x.exports=function(e,r){var t=r[0]-e[0],i=r[1]-e[1],n=r[2]-e[2],h=r[3]-e[3];return t*t+i*i+n*n+h*h}},{}],219:[function(p,x,y){x.exports=function(e){var r=e[0],t=e[1],i=e[2],n=e[3];return r*r+t*t+i*i+n*n}},{}],220:[function(p,x,y){x.exports=function(e,r,t){return e[0]=r[0]-t[0],e[1]=r[1]-t[1],e[2]=r[2]-t[2],e[3]=r[3]-t[3],e}},{}],221:[function(p,x,y){x.exports=function(e,r,t){var i=r[0],n=r[1],h=r[2],s=r[3];return e[0]=t[0]*i+t[4]*n+t[8]*h+t[12]*s,e[1]=t[1]*i+t[5]*n+t[9]*h+t[13]*s,e[2]=t[2]*i+t[6]*n+t[10]*h+t[14]*s,e[3]=t[3]*i+t[7]*n+t[11]*h+t[15]*s,e}},{}],222:[function(p,x,y){x.exports=function(e,r,t){var i=r[0],n=r[1],h=r[2],s=t[0],a=t[1],l=t[2],f=t[3],d=f*i+a*h-l*n,v=f*n+l*i-s*h,m=f*h+s*n-a*i,c=-s*i-a*n-l*h;return e[0]=d*f+c*-s+v*-l-m*-a,e[1]=v*f+c*-a+m*-s-d*-l,e[2]=m*f+c*-l+d*-a-v*-s,e[3]=r[3],e}},{}],223:[function(p,x,y){var e=p("glsl-tokenizer"),r=p("atob-lite");x.exports=function(t){for(var i=Array.isArray(t)?t:e(t),n=0;n<i.length;n++){var h=i[n];if(h.type==="preprocessor"){var s=h.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(s&&s[2]){var a=s[1],l=s[2];return(a?r(l):l).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(p,x,y){x.exports=function(s){var a,l,f,d=0,v=0,m=999,c=[],b=[],g=1,w=0,_=0,T=!1,k=!1,L="",M=t,I=e;(s=s||{}).version==="300 es"&&(M=n,I=i);var P={},S={};for(d=0;d<M.length;d++)P[M[d]]=!0;for(d=0;d<I.length;d++)S[I[d]]=!0;return function(N){return b=[],N!==null?function(U){d=0,U.toString&&(U=U.toString());var te;for(L+=U.replace(/\r\n/g,`
`),f=L.length;a=L[d],d<f;){switch(te=d,m){case 0:d=V();break;case 1:case 2:d=H();break;case 3:d=Q();break;case 4:d=$();break;case 11:d=Z();break;case 5:d=re();break;case 9999:d=R();break;case 9:d=F();break;case 999:d=D()}if(te!==d)switch(L[te]){case`
`:w=0,++g;break;default:++w}}return v+=d,L=L.slice(d),b}(N):function(U){return c.length&&E(c.join("")),m=10,E("(eof)"),b}()};function E(N){N.length&&b.push({type:h[m],data:N,position:_,line:g,column:w})}function D(){return c=c.length?[]:c,l==="/"&&a==="*"?(_=v+d-1,m=0,l=a,d+1):l==="/"&&a==="/"?(_=v+d-1,m=1,l=a,d+1):a==="#"?(m=2,_=v+d,d):/\s/.test(a)?(m=9,_=v+d,d):(T=/\d/.test(a),k=/[^\w_]/.test(a),_=v+d,m=T?4:k?3:9999,d)}function F(){return/[^\s]/g.test(a)?(E(c.join("")),m=999,d):(c.push(a),l=a,d+1)}function H(){return a!=="\r"&&a!==`
`||l==="\\"?(c.push(a),l=a,d+1):(E(c.join("")),m=999,d)}function V(){return a==="/"&&l==="*"?(c.push(a),E(c.join("")),m=999,d+1):(c.push(a),l=a,d+1)}function Q(){if(l==="."&&/\d/.test(a))return m=5,d;if(l==="/"&&a==="*")return m=0,d;if(l==="/"&&a==="/")return m=1,d;if(a==="."&&c.length){for(;K(c););return m=5,d}if(a===";"||a===")"||a==="("){if(c.length)for(;K(c););return E(a),m=999,d+1}var N=c.length===2&&a!=="=";if(/[\w_\d\s]/.test(a)||N){for(;K(c););return m=999,d}return c.push(a),l=a,d+1}function K(N){for(var U,te,j=0;;){if(U=r.indexOf(N.slice(0,N.length+j).join("")),te=r[U],U===-1){if(j--+N.length>0)continue;te=N.slice(0,1).join("")}return E(te),_+=te.length,(c=c.slice(te.length)).length}}function Z(){return/[^a-fA-F0-9]/.test(a)?(E(c.join("")),m=999,d):(c.push(a),l=a,d+1)}function $(){return a==="."||/[eE]/.test(a)?(c.push(a),m=5,l=a,d+1):a==="x"&&c.length===1&&c[0]==="0"?(m=11,c.push(a),l=a,d+1):/[^\d]/.test(a)?(E(c.join("")),m=999,d):(c.push(a),l=a,d+1)}function re(){return a==="f"&&(c.push(a),l=a,d+=1),/[eE]/.test(a)?(c.push(a),l=a,d+1):(a!=="-"&&a!=="+"||!/[eE]/.test(l))&&/[^\d]/.test(a)?(E(c.join("")),m=999,d):(c.push(a),l=a,d+1)}function R(){if(/[^\d\w_]/.test(a)){var N=c.join("");return m=S[N]?8:P[N]?7:6,E(c.join("")),m=999,d}return c.push(a),l=a,d+1}};var e=p("./lib/literals"),r=p("./lib/operators"),t=p("./lib/builtins"),i=p("./lib/literals-300es"),n=p("./lib/builtins-300es"),h=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(p,x,y){var e=p("./builtins");e=e.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)}),x.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(p,x,y){x.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(p,x,y){var e=p("./literals");x.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(p,x,y){x.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(p,x,y){x.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(p,x,y){var e=p("./index");x.exports=function(r,t){var i=e(t),n=[];return n=(n=n.concat(i(r))).concat(i(null))}},{"./index":224}],231:[function(p,x,y){x.exports=function(e){typeof e=="string"&&(e=[e]);for(var r=[].slice.call(arguments,1),t=[],i=0;i<e.length-1;i++)t.push(e[i],r[i]||"");return t.push(e[i]),t.join("")}},{}],232:[function(p,x,y){var e=p("is-browser");x.exports=e&&function(){var r=!1;try{var t=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{r=!1}return r}()},{"is-browser":236}],233:[function(p,x,y){x.exports=function(l,f){var d=l.length;if(d===0)throw new Error("Must have at least d+1 points");var v=l[0].length;if(d<=v)throw new Error("Must input at least d+1 points");var m=l.slice(0,v+1),c=e.apply(void 0,m);if(c===0)throw new Error("Input not in general position");for(var b=new Array(v+1),g=0;g<=v;++g)b[g]=g;c<0&&(b[0]=1,b[1]=0);var w=new t(b,new Array(v+1),!1),_=w.adjacent,T=new Array(v+2);for(g=0;g<=v;++g){for(var k=b.slice(),L=0;L<=v;++L)L===g&&(k[L]=-1);var M=k[0];k[0]=k[1],k[1]=M;var I=new t(k,new Array(v+1),!0);_[g]=I,T[g]=I}for(T[v+1]=w,g=0;g<=v;++g){k=_[g].vertices;var P=_[g].adjacent;for(L=0;L<=v;++L){var S=k[L];if(S<0)P[L]=w;else for(var E=0;E<=v;++E)_[E].vertices.indexOf(S)<0&&(P[L]=_[E])}}var D=new s(v,m,T),F=!!f;for(g=v+1;g<d;++g)D.insert(l[g],F);return D.boundary()};var e=p("robust-orientation"),r=p("simplicial-complex").compareCells;function t(l,f,d){this.vertices=l,this.adjacent=f,this.boundary=d,this.lastVisited=-1}function i(l,f,d){this.vertices=l,this.cell=f,this.index=d}function n(l,f){return r(l.vertices,f.vertices)}t.prototype.flip=function(){var l=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=l;var f=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=f};var h=[];function s(l,f,d){this.dimension=l,this.vertices=f,this.simplices=d,this.interior=d.filter(function(b){return!b.boundary}),this.tuple=new Array(l+1);for(var v=0;v<=l;++v)this.tuple[v]=this.vertices[v];var m,c=h[l];c||(c=h[l]=((m=e[l+1])||(m=e),function(b){return function(){var g=this.tuple;return b.apply(this,g)}}(m))),this.orient=c}var a=s.prototype;a.handleBoundaryDegeneracy=function(l,f){var d=this.dimension,v=this.vertices.length-1,m=this.tuple,c=this.vertices,b=[l];for(l.lastVisited=-v;b.length>0;)for(var g=(l=b.pop()).adjacent,w=0;w<=d;++w){var _=g[w];if(_.boundary&&!(_.lastVisited<=-v)){for(var T=_.vertices,k=0;k<=d;++k){var L=T[k];m[k]=L<0?f:c[L]}var M=this.orient();if(M>0)return _;_.lastVisited=-v,M===0&&b.push(_)}}return null},a.walk=function(l,f){var d=this.vertices.length-1,v=this.dimension,m=this.vertices,c=this.tuple,b=f?this.interior.length*Math.random()|0:this.interior.length-1,g=this.interior[b];e:for(;!g.boundary;){for(var w=g.vertices,_=g.adjacent,T=0;T<=v;++T)c[T]=m[w[T]];for(g.lastVisited=d,T=0;T<=v;++T){var k=_[T];if(!(k.lastVisited>=d)){var L=c[T];c[T]=l;var M=this.orient();if(c[T]=L,M<0){g=k;continue e}k.boundary?k.lastVisited=-d:k.lastVisited=d}}return}return g},a.addPeaks=function(l,f){var d=this.vertices.length-1,v=this.dimension,m=this.vertices,c=this.tuple,b=this.interior,g=this.simplices,w=[f];f.lastVisited=d,f.vertices[f.vertices.indexOf(-1)]=d,f.boundary=!1,b.push(f);for(var _=[];w.length>0;){var T=(f=w.pop()).vertices,k=f.adjacent,L=T.indexOf(d);if(!(L<0)){for(var M=0;M<=v;++M)if(M!==L){var I=k[M];if(I.boundary&&!(I.lastVisited>=d)){var P=I.vertices;if(I.lastVisited!==-d){for(var S=0,E=0;E<=v;++E)P[E]<0?(S=E,c[E]=l):c[E]=m[P[E]];if(this.orient()>0){P[S]=d,I.boundary=!1,b.push(I),w.push(I),I.lastVisited=d;continue}I.lastVisited=-d}var D=I.adjacent,F=T.slice(),H=k.slice(),V=new t(F,H,!0);g.push(V);var Q=D.indexOf(f);if(!(Q<0))for(D[Q]=V,H[L]=I,F[M]=-1,H[M]=f,k[M]=V,V.flip(),E=0;E<=v;++E){var K=F[E];if(!(K<0||K===d)){for(var Z=new Array(v-1),$=0,re=0;re<=v;++re){var R=F[re];R<0||re===E||(Z[$++]=R)}_.push(new i(Z,V,E))}}}}}}for(_.sort(n),M=0;M+1<_.length;M+=2){var N=_[M],U=_[M+1],te=N.index,j=U.index;te<0||j<0||(N.cell.adjacent[N.index]=U.cell,U.cell.adjacent[U.index]=N.cell)}},a.insert=function(l,f){var d=this.vertices;d.push(l);var v=this.walk(l,f);if(v){for(var m=this.dimension,c=this.tuple,b=0;b<=m;++b){var g=v.vertices[b];c[b]=g<0?l:d[g]}var w=this.orient(c);w<0||(w!==0||(v=this.handleBoundaryDegeneracy(v,l)))&&this.addPeaks(l,v)}},a.boundary=function(){for(var l=this.dimension,f=[],d=this.simplices,v=d.length,m=0;m<v;++m){var c=d[m];if(c.boundary){for(var b=new Array(l),g=c.vertices,w=0,_=0,T=0;T<=l;++T)g[T]>=0?b[w++]=g[T]:_=1&T;if(_===(1&l)){var k=b[0];b[0]=b[1],b[1]=k}f.push(b)}}return f}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(p,x,y){var e=p("binary-search-bounds");function r(w,_,T,k,L){this.mid=w,this.left=_,this.right=T,this.leftPoints=k,this.rightPoints=L,this.count=(_?_.count:0)+(T?T.count:0)+k.length}x.exports=function(w){return!w||w.length===0?new b(null):new b(c(w))};var t=r.prototype;function i(w,_){w.mid=_.mid,w.left=_.left,w.right=_.right,w.leftPoints=_.leftPoints,w.rightPoints=_.rightPoints,w.count=_.count}function n(w,_){var T=c(_);w.mid=T.mid,w.left=T.left,w.right=T.right,w.leftPoints=T.leftPoints,w.rightPoints=T.rightPoints,w.count=T.count}function h(w,_){var T=w.intervals([]);T.push(_),n(w,T)}function s(w,_){var T=w.intervals([]),k=T.indexOf(_);return k<0?0:(T.splice(k,1),n(w,T),1)}function a(w,_,T){for(var k=0;k<w.length&&w[k][0]<=_;++k){var L=T(w[k]);if(L)return L}}function l(w,_,T){for(var k=w.length-1;k>=0&&w[k][1]>=_;--k){var L=T(w[k]);if(L)return L}}function f(w,_){for(var T=0;T<w.length;++T){var k=_(w[T]);if(k)return k}}function d(w,_){return w-_}function v(w,_){var T=w[0]-_[0];return T||w[1]-_[1]}function m(w,_){var T=w[1]-_[1];return T||w[0]-_[0]}function c(w){if(w.length===0)return null;for(var _=[],T=0;T<w.length;++T)_.push(w[T][0],w[T][1]);_.sort(d);var k=_[_.length>>1],L=[],M=[],I=[];for(T=0;T<w.length;++T){var P=w[T];P[1]<k?L.push(P):k<P[0]?M.push(P):I.push(P)}var S=I,E=I.slice();return S.sort(v),E.sort(m),new r(k,c(L),c(M),S,E)}function b(w){this.root=w}t.intervals=function(w){return w.push.apply(w,this.leftPoints),this.left&&this.left.intervals(w),this.right&&this.right.intervals(w),w},t.insert=function(w){var _=this.count-this.leftPoints.length;if(this.count+=1,w[1]<this.mid)this.left?4*(this.left.count+1)>3*(_+1)?h(this,w):this.left.insert(w):this.left=c([w]);else if(w[0]>this.mid)this.right?4*(this.right.count+1)>3*(_+1)?h(this,w):this.right.insert(w):this.right=c([w]);else{var T=e.ge(this.leftPoints,w,v),k=e.ge(this.rightPoints,w,m);this.leftPoints.splice(T,0,w),this.rightPoints.splice(k,0,w)}},t.remove=function(w){var _=this.count-this.leftPoints;if(w[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(_-1)?s(this,w):(M=this.left.remove(w))===2?(this.left=null,this.count-=1,1):(M===1&&(this.count-=1),M):0;if(w[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(_-1)?s(this,w):(M=this.right.remove(w))===2?(this.right=null,this.count-=1,1):(M===1&&(this.count-=1),M):0;if(this.count===1)return this.leftPoints[0]===w?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===w){if(this.left&&this.right){for(var T=this,k=this.left;k.right;)T=k,k=k.right;if(T===this)k.right=this.right;else{var L=this.left,M=this.right;T.count-=k.count,T.right=k.left,k.left=L,k.right=M}i(this,k),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?i(this,this.left):i(this,this.right);return 1}for(L=e.ge(this.leftPoints,w,v);L<this.leftPoints.length&&this.leftPoints[L][0]===w[0];++L)if(this.leftPoints[L]===w){for(this.count-=1,this.leftPoints.splice(L,1),M=e.ge(this.rightPoints,w,m);M<this.rightPoints.length&&this.rightPoints[M][1]===w[1];++M)if(this.rightPoints[M]===w)return this.rightPoints.splice(M,1),1}return 0},t.queryPoint=function(w,_){if(w<this.mid)return this.left&&(T=this.left.queryPoint(w,_))?T:a(this.leftPoints,w,_);if(w>this.mid){var T;return this.right&&(T=this.right.queryPoint(w,_))?T:l(this.rightPoints,w,_)}return f(this.leftPoints,_)},t.queryInterval=function(w,_,T){var k;return w<this.mid&&this.left&&(k=this.left.queryInterval(w,_,T))||_>this.mid&&this.right&&(k=this.right.queryInterval(w,_,T))?k:_<this.mid?a(this.leftPoints,_,T):w>this.mid?l(this.rightPoints,w,T):f(this.leftPoints,T)};var g=b.prototype;g.insert=function(w){this.root?this.root.insert(w):this.root=new r(w[0],null,null,[w],[w])},g.remove=function(w){if(this.root){var _=this.root.remove(w);return _===2&&(this.root=null),_!==0}return!1},g.queryPoint=function(w,_){if(this.root)return this.root.queryPoint(w,_)},g.queryInterval=function(w,_,T){if(w<=_&&this.root)return this.root.queryInterval(w,_,T)},Object.defineProperty(g,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(g,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":31}],235:[function(p,x,y){x.exports=function(e){for(var r=new Array(e),t=0;t<e;++t)r[t]=t;return r}},{}],236:[function(p,x,y){x.exports=!0},{}],237:[function(p,x,y){function e(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */x.exports=function(r){return r!=null&&(e(r)||function(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&e(t.slice(0,0))}(r)||!!r._isBuffer)}},{}],238:[function(p,x,y){x.exports=t,x.exports.isMobile=t,x.exports.default=t;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function t(i){i||(i={});var n=i.ua;if(n||typeof navigator=="undefined"||(n=navigator.userAgent),n&&n.headers&&typeof n.headers["user-agent"]=="string"&&(n=n.headers["user-agent"]),typeof n!="string")return!1;var h=i.tablet?r.test(n):e.test(n);return!h&&i.tablet&&i.featureDetect&&navigator&&navigator.maxTouchPoints>1&&n.indexOf("Macintosh")!==-1&&n.indexOf("Safari")!==-1&&(h=!0),h}},{}],239:[function(p,x,y){x.exports=function(e){for(var r,t=e.length,i=0;i<t;i++)if(((r=e.charCodeAt(i))<9||r>13)&&r!==32&&r!==133&&r!==160&&r!==5760&&r!==6158&&(r<8192||r>8205)&&r!==8232&&r!==8233&&r!==8239&&r!==8287&&r!==8288&&r!==12288&&r!==65279)return!1;return!0}},{}],240:[function(p,x,y){x.exports=function(e,r,t){return e*(1-t)+r*t}},{}],241:[function(p,x,y){var e=p("./normalize"),r=p("gl-mat4/create"),t=p("gl-mat4/clone"),i=p("gl-mat4/determinant"),n=p("gl-mat4/invert"),h=p("gl-mat4/transpose"),s={length:p("gl-vec3/length"),normalize:p("gl-vec3/normalize"),dot:p("gl-vec3/dot"),cross:p("gl-vec3/cross")},a=r(),l=r(),f=[0,0,0,0],d=[[0,0,0],[0,0,0],[0,0,0]],v=[0,0,0];function m(c,b,g,w,_){c[0]=b[0]*w+g[0]*_,c[1]=b[1]*w+g[1]*_,c[2]=b[2]*w+g[2]*_}x.exports=function(c,b,g,w,_,T){if(b||(b=[0,0,0]),g||(g=[0,0,0]),w||(w=[0,0,0]),_||(_=[0,0,0,1]),T||(T=[0,0,0,1]),!e(a,c)||(t(l,a),l[3]=0,l[7]=0,l[11]=0,l[15]=1,Math.abs(i(l)<1e-8)))return!1;var k,L,M,I,P,S,E,D=a[3],F=a[7],H=a[11],V=a[12],Q=a[13],K=a[14],Z=a[15];if(D!==0||F!==0||H!==0){if(f[0]=D,f[1]=F,f[2]=H,f[3]=Z,!n(l,l))return!1;h(l,l),k=_,M=l,I=(L=f)[0],P=L[1],S=L[2],E=L[3],k[0]=M[0]*I+M[4]*P+M[8]*S+M[12]*E,k[1]=M[1]*I+M[5]*P+M[9]*S+M[13]*E,k[2]=M[2]*I+M[6]*P+M[10]*S+M[14]*E,k[3]=M[3]*I+M[7]*P+M[11]*S+M[15]*E}else _[0]=_[1]=_[2]=0,_[3]=1;if(b[0]=V,b[1]=Q,b[2]=K,function(re,R){re[0][0]=R[0],re[0][1]=R[1],re[0][2]=R[2],re[1][0]=R[4],re[1][1]=R[5],re[1][2]=R[6],re[2][0]=R[8],re[2][1]=R[9],re[2][2]=R[10]}(d,a),g[0]=s.length(d[0]),s.normalize(d[0],d[0]),w[0]=s.dot(d[0],d[1]),m(d[1],d[1],d[0],1,-w[0]),g[1]=s.length(d[1]),s.normalize(d[1],d[1]),w[0]/=g[1],w[1]=s.dot(d[0],d[2]),m(d[2],d[2],d[0],1,-w[1]),w[2]=s.dot(d[1],d[2]),m(d[2],d[2],d[1],1,-w[2]),g[2]=s.length(d[2]),s.normalize(d[2],d[2]),w[1]/=g[2],w[2]/=g[2],s.cross(v,d[1],d[2]),s.dot(d[0],v)<0)for(var $=0;$<3;$++)g[$]*=-1,d[$][0]*=-1,d[$][1]*=-1,d[$][2]*=-1;return T[0]=.5*Math.sqrt(Math.max(1+d[0][0]-d[1][1]-d[2][2],0)),T[1]=.5*Math.sqrt(Math.max(1-d[0][0]+d[1][1]-d[2][2],0)),T[2]=.5*Math.sqrt(Math.max(1-d[0][0]-d[1][1]+d[2][2],0)),T[3]=.5*Math.sqrt(Math.max(1+d[0][0]+d[1][1]+d[2][2],0)),d[2][1]>d[1][2]&&(T[0]=-T[0]),d[0][2]>d[2][0]&&(T[1]=-T[1]),d[1][0]>d[0][1]&&(T[2]=-T[2]),!0}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(p,x,y){x.exports=function(e,r){var t=r[15];if(t===0)return!1;for(var i=1/t,n=0;n<16;n++)e[n]=r[n]*i;return!0}},{}],243:[function(p,x,y){var e=p("gl-vec3/lerp"),r=p("mat4-recompose"),t=p("mat4-decompose"),i=p("gl-mat4/determinant"),n=p("quat-slerp"),h=l(),s=l(),a=l();function l(){return{translate:f(),scale:f(1),skew:f(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function f(d){return[d||0,d||0,d||0]}x.exports=function(d,v,m,c){if(i(v)===0||i(m)===0)return!1;var b=t(v,h.translate,h.scale,h.skew,h.perspective,h.quaternion),g=t(m,s.translate,s.scale,s.skew,s.perspective,s.quaternion);return!(!b||!g)&&(e(a.translate,h.translate,s.translate,c),e(a.skew,h.skew,s.skew,c),e(a.scale,h.scale,s.scale,c),e(a.perspective,h.perspective,s.perspective,c),n(a.quaternion,h.quaternion,s.quaternion,c),r(d,a.translate,a.scale,a.skew,a.perspective,a.quaternion),!0)}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(p,x,y){var e={identity:p("gl-mat4/identity"),translate:p("gl-mat4/translate"),multiply:p("gl-mat4/multiply"),create:p("gl-mat4/create"),scale:p("gl-mat4/scale"),fromRotationTranslation:p("gl-mat4/fromRotationTranslation")},r=(e.create(),e.create());x.exports=function(t,i,n,h,s,a){return e.identity(t),e.fromRotationTranslation(t,a,i),t[3]=s[0],t[7]=s[1],t[11]=s[2],t[15]=s[3],e.identity(r),h[2]!==0&&(r[9]=h[2],e.multiply(t,t,r)),h[1]!==0&&(r[9]=0,r[8]=h[1],e.multiply(t,t,r)),h[0]!==0&&(r[8]=0,r[4]=h[0],e.multiply(t,t,r)),e.scale(t,t,n),t}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(p,x,y){var e=p("binary-search-bounds"),r=p("mat4-interpolate"),t=p("gl-mat4/invert"),i=p("gl-mat4/rotateX"),n=p("gl-mat4/rotateY"),h=p("gl-mat4/rotateZ"),s=p("gl-mat4/lookAt"),a=p("gl-mat4/translate"),l=(p("gl-mat4/scale"),p("gl-vec3/normalize")),f=[0,0,0];function d(c){this._components=c.slice(),this._time=[0],this.prevMatrix=c.slice(),this.nextMatrix=c.slice(),this.computedMatrix=c.slice(),this.computedInverse=c.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}x.exports=function(c){return new d((c=c||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var v=d.prototype;v.recalcMatrix=function(c){var b=this._time,g=e.le(b,c),w=this.computedMatrix;if(!(g<0)){var _=this._components;if(g===b.length-1)for(var T=16*g,k=0;k<16;++k)w[k]=_[T++];else{var L=b[g+1]-b[g],M=(T=16*g,this.prevMatrix),I=!0;for(k=0;k<16;++k)M[k]=_[T++];var P=this.nextMatrix;for(k=0;k<16;++k)P[k]=_[T++],I=I&&M[k]===P[k];if(L<1e-6||I)for(k=0;k<16;++k)w[k]=M[k];else r(w,M,P,(c-b[g])/L)}var S=this.computedUp;S[0]=w[1],S[1]=w[5],S[2]=w[9],l(S,S);var E=this.computedInverse;t(E,w);var D=this.computedEye,F=E[15];D[0]=E[12]/F,D[1]=E[13]/F,D[2]=E[14]/F;var H=this.computedCenter,V=Math.exp(this.computedRadius[0]);for(k=0;k<3;++k)H[k]=D[k]-w[2+4*k]*V}},v.idle=function(c){if(!(c<this.lastT())){for(var b=this._components,g=b.length-16,w=0;w<16;++w)b.push(b[g++]);this._time.push(c)}},v.flush=function(c){var b=e.gt(this._time,c)-2;b<0||(this._time.splice(0,b),this._components.splice(0,16*b))},v.lastT=function(){return this._time[this._time.length-1]},v.lookAt=function(c,b,g,w){this.recalcMatrix(c),b=b||this.computedEye,g=g||f,w=w||this.computedUp,this.setMatrix(c,s(this.computedMatrix,b,g,w));for(var _=0,T=0;T<3;++T)_+=Math.pow(g[T]-b[T],2);_=Math.log(Math.sqrt(_)),this.computedRadius[0]=_},v.rotate=function(c,b,g,w){this.recalcMatrix(c);var _=this.computedInverse;b&&n(_,_,b),g&&i(_,_,g),w&&h(_,_,w),this.setMatrix(c,t(this.computedMatrix,_))};var m=[0,0,0];v.pan=function(c,b,g,w){m[0]=-(b||0),m[1]=-(g||0),m[2]=-(w||0),this.recalcMatrix(c);var _=this.computedInverse;a(_,_,m),this.setMatrix(c,t(_,_))},v.translate=function(c,b,g,w){m[0]=b||0,m[1]=g||0,m[2]=w||0,this.recalcMatrix(c);var _=this.computedMatrix;a(_,_,m),this.setMatrix(c,_)},v.setMatrix=function(c,b){if(!(c<this.lastT())){this._time.push(c);for(var g=0;g<16;++g)this._components.push(b[g])}},v.setDistance=function(c,b){this.computedRadius[0]=b},v.setDistanceLimits=function(c,b){var g=this._limits;g[0]=c,g[1]=b},v.getDistanceLimits=function(c){var b=this._limits;return c?(c[0]=b[0],c[1]=b[1],c):b}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(p,x,y){x.exports=function(r){var t=r.length;if(t<3){for(var i=new Array(t),n=0;n<t;++n)i[n]=n;return t===2&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:i}var h=new Array(t);for(n=0;n<t;++n)h[n]=n;h.sort(function(b,g){var w=r[b][0]-r[g][0];return w||r[b][1]-r[g][1]});var s=[h[0],h[1]],a=[h[0],h[1]];for(n=2;n<t;++n){for(var l=h[n],f=r[l],d=s.length;d>1&&e(r[s[d-2]],r[s[d-1]],f)<=0;)d-=1,s.pop();for(s.push(l),d=a.length;d>1&&e(r[a[d-2]],r[a[d-1]],f)>=0;)d-=1,a.pop();a.push(l)}i=new Array(a.length+s.length-2);for(var v=0,m=(n=0,s.length);n<m;++n)i[v++]=s[n];for(var c=a.length-2;c>0;--c)i[v++]=a[c];return i};var e=p("robust-orientation")[3]},{"robust-orientation":284}],247:[function(p,x,y){x.exports=function(r,t){t||(t=r,r=window);var i=0,n=0,h=0,s={shift:!1,alt:!1,control:!1,meta:!1},a=!1;function l(T){var k=!1;return"altKey"in T&&(k=k||T.altKey!==s.alt,s.alt=!!T.altKey),"shiftKey"in T&&(k=k||T.shiftKey!==s.shift,s.shift=!!T.shiftKey),"ctrlKey"in T&&(k=k||T.ctrlKey!==s.control,s.control=!!T.ctrlKey),"metaKey"in T&&(k=k||T.metaKey!==s.meta,s.meta=!!T.metaKey),k}function f(T,k){var L=e.x(k),M=e.y(k);"buttons"in k&&(T=0|k.buttons),(T!==i||L!==n||M!==h||l(k))&&(i=0|T,n=L||0,h=M||0,t&&t(i,n,h,s))}function d(T){f(0,T)}function v(){(i||n||h||s.shift||s.alt||s.meta||s.control)&&(n=h=0,i=0,s.shift=s.alt=s.control=s.meta=!1,t&&t(0,0,0,s))}function m(T){l(T)&&t&&t(i,n,h,s)}function c(T){e.buttons(T)===0?f(0,T):f(i,T)}function b(T){f(i|e.buttons(T),T)}function g(T){f(i&~e.buttons(T),T)}function w(){a||(a=!0,r.addEventListener("mousemove",c),r.addEventListener("mousedown",b),r.addEventListener("mouseup",g),r.addEventListener("mouseleave",d),r.addEventListener("mouseenter",d),r.addEventListener("mouseout",d),r.addEventListener("mouseover",d),r.addEventListener("blur",v),r.addEventListener("keyup",m),r.addEventListener("keydown",m),r.addEventListener("keypress",m),r!==window&&(window.addEventListener("blur",v),window.addEventListener("keyup",m),window.addEventListener("keydown",m),window.addEventListener("keypress",m)))}w();var _={element:r};return Object.defineProperties(_,{enabled:{get:function(){return a},set:function(T){T?w():function(){!a||(a=!1,r.removeEventListener("mousemove",c),r.removeEventListener("mousedown",b),r.removeEventListener("mouseup",g),r.removeEventListener("mouseleave",d),r.removeEventListener("mouseenter",d),r.removeEventListener("mouseout",d),r.removeEventListener("mouseover",d),r.removeEventListener("blur",v),r.removeEventListener("keyup",m),r.removeEventListener("keydown",m),r.removeEventListener("keypress",m),r!==window&&(window.removeEventListener("blur",v),window.removeEventListener("keyup",m),window.removeEventListener("keydown",m),window.removeEventListener("keypress",m)))}()},enumerable:!0},buttons:{get:function(){return i},enumerable:!0},x:{get:function(){return n},enumerable:!0},y:{get:function(){return h},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),_};var e=p("mouse-event")},{"mouse-event":249}],248:[function(p,x,y){var e={left:0,top:0};x.exports=function(r,t,i){t=t||r.currentTarget||r.srcElement,Array.isArray(i)||(i=[0,0]);var n=r.clientX||0,h=r.clientY||0,s=(a=t,a===window||a===document||a===document.body?e:a.getBoundingClientRect()),a;return i[0]=n-s.left,i[1]=h-s.top,i}},{}],249:[function(p,x,y){function e(r){return r.target||r.srcElement||window}y.buttons=function(r){if(typeof r=="object"){if("buttons"in r)return r.buttons;if("which"in r){if((t=r.which)===2)return 4;if(t===3)return 2;if(t>0)return 1<<t-1}else if("button"in r){var t;if((t=r.button)===1)return 4;if(t===2)return 2;if(t>=0)return 1<<t}}return 0},y.element=e,y.x=function(r){if(typeof r=="object"){if("offsetX"in r)return r.offsetX;var t=e(r).getBoundingClientRect();return r.clientX-t.left}return 0},y.y=function(r){if(typeof r=="object"){if("offsetY"in r)return r.offsetY;var t=e(r).getBoundingClientRect();return r.clientY-t.top}return 0}},{}],250:[function(p,x,y){var e=p("to-px");x.exports=function(r,t,i){typeof r=="function"&&(i=!!t,t=r,r=window);var n=e("ex",r),h=function(s){i&&s.preventDefault();var a=s.deltaX||0,l=s.deltaY||0,f=s.deltaZ||0,d=1;switch(s.deltaMode){case 1:d=n;break;case 2:d=window.innerHeight}if(l*=d,f*=d,(a*=d)||l||f)return t(a,l,f,s)};return r.addEventListener("wheel",h),h}},{"to-px":304}],251:[function(p,x,y){var e=p("typedarray-pool");x.exports=function(t){function i(d){throw new Error("ndarray-extract-contour: "+d)}typeof t!="object"&&i("Must specify arguments");var n=t.order;Array.isArray(n)||i("Must specify order");var h=t.arrayArguments||1;h<1&&i("Must have at least one array argument");var s=t.scalarArguments||0;s<0&&i("Scalar arg count must be > 0"),typeof t.vertex!="function"&&i("Must specify vertex creation function"),typeof t.cell!="function"&&i("Must specify cell creation function"),typeof t.phase!="function"&&i("Must specify phase function");for(var a=t.getters||[],l=new Array(h),f=0;f<h;++f)a.indexOf(f)>=0?l[f]=!0:l[f]=!1;return function(d,v,m,c,b,g){var w=[g,b].join(",");return(0,r[w])(d,v,m,e.mallocUint32,e.freeUint32)}(t.vertex,t.cell,t.phase,0,n,l)};var r={"false,0,1":function(t,i,n,h,s){return function(a,l,f,d){var v,m=0|a.shape[0],c=0|a.shape[1],b=a.data,g=0|a.offset,w=0|a.stride[0],_=0|a.stride[1],T=g,k=0|-w,L=0,M=0|-_,I=0,P=-w-_|0,S=0,E=0|w,D=_-w*m|0,F=0,H=0,V=0,Q=2*m|0,K=h(Q),Z=h(Q),$=0,re=0,R=-1,N=-1,U=0,te=0|-m,j=0|m,Y=0,J=-m-1|0,ee=m-1|0,ne=0,se=0,oe=0;for(F=0;F<m;++F)K[$++]=n(b[T],l,f,d),T+=E;if(T+=D,c>0){if(H=1,K[$++]=n(b[T],l,f,d),T+=E,m>0)for(F=1,v=b[T],re=K[$]=n(v,l,f,d),U=K[$+R],Y=K[$+te],ne=K[$+J],re===U&&re===Y&&re===ne||(L=b[T+k],I=b[T+M],S=b[T+P],t(F,H,v,L,I,S,re,U,Y,ne,l,f,d),se=Z[$]=V++),$+=1,T+=E,F=2;F<m;++F)v=b[T],re=K[$]=n(v,l,f,d),U=K[$+R],Y=K[$+te],ne=K[$+J],re===U&&re===Y&&re===ne||(L=b[T+k],I=b[T+M],S=b[T+P],t(F,H,v,L,I,S,re,U,Y,ne,l,f,d),se=Z[$]=V++,ne!==U&&i(Z[$+R],se,S,L,ne,U,l,f,d)),$+=1,T+=E;for(T+=D,$=0,oe=R,R=N,N=oe,oe=te,te=j,j=oe,oe=J,J=ee,ee=oe,H=2;H<c;++H){if(K[$++]=n(b[T],l,f,d),T+=E,m>0)for(F=1,v=b[T],re=K[$]=n(v,l,f,d),U=K[$+R],Y=K[$+te],ne=K[$+J],re===U&&re===Y&&re===ne||(L=b[T+k],I=b[T+M],S=b[T+P],t(F,H,v,L,I,S,re,U,Y,ne,l,f,d),se=Z[$]=V++,ne!==Y&&i(Z[$+te],se,I,S,Y,ne,l,f,d)),$+=1,T+=E,F=2;F<m;++F)v=b[T],re=K[$]=n(v,l,f,d),U=K[$+R],Y=K[$+te],ne=K[$+J],re===U&&re===Y&&re===ne||(L=b[T+k],I=b[T+M],S=b[T+P],t(F,H,v,L,I,S,re,U,Y,ne,l,f,d),se=Z[$]=V++,ne!==Y&&i(Z[$+te],se,I,S,Y,ne,l,f,d),ne!==U&&i(Z[$+R],se,S,L,ne,U,l,f,d)),$+=1,T+=E;1&H&&($=0),oe=R,R=N,N=oe,oe=te,te=j,j=oe,oe=J,J=ee,ee=oe,T+=D}}s(Z),s(K)}},"false,1,0":function(t,i,n,h,s){return function(a,l,f,d){var v,m=0|a.shape[0],c=0|a.shape[1],b=a.data,g=0|a.offset,w=0|a.stride[0],_=0|a.stride[1],T=g,k=0|-w,L=0,M=0|-_,I=0,P=-w-_|0,S=0,E=0|_,D=w-_*c|0,F=0,H=0,V=0,Q=2*c|0,K=h(Q),Z=h(Q),$=0,re=0,R=-1,N=-1,U=0,te=0|-c,j=0|c,Y=0,J=-c-1|0,ee=c-1|0,ne=0,se=0,oe=0;for(H=0;H<c;++H)K[$++]=n(b[T],l,f,d),T+=E;if(T+=D,m>0){if(F=1,K[$++]=n(b[T],l,f,d),T+=E,c>0)for(H=1,v=b[T],re=K[$]=n(v,l,f,d),Y=K[$+te],U=K[$+R],ne=K[$+J],re===Y&&re===U&&re===ne||(L=b[T+k],I=b[T+M],S=b[T+P],t(F,H,v,L,I,S,re,Y,U,ne,l,f,d),se=Z[$]=V++),$+=1,T+=E,H=2;H<c;++H)v=b[T],re=K[$]=n(v,l,f,d),Y=K[$+te],U=K[$+R],ne=K[$+J],re===Y&&re===U&&re===ne||(L=b[T+k],I=b[T+M],S=b[T+P],t(F,H,v,L,I,S,re,Y,U,ne,l,f,d),se=Z[$]=V++,ne!==U&&i(Z[$+R],se,I,S,U,ne,l,f,d)),$+=1,T+=E;for(T+=D,$=0,oe=te,te=j,j=oe,oe=R,R=N,N=oe,oe=J,J=ee,ee=oe,F=2;F<m;++F){if(K[$++]=n(b[T],l,f,d),T+=E,c>0)for(H=1,v=b[T],re=K[$]=n(v,l,f,d),Y=K[$+te],U=K[$+R],ne=K[$+J],re===Y&&re===U&&re===ne||(L=b[T+k],I=b[T+M],S=b[T+P],t(F,H,v,L,I,S,re,Y,U,ne,l,f,d),se=Z[$]=V++,ne!==Y&&i(Z[$+te],se,S,L,ne,Y,l,f,d)),$+=1,T+=E,H=2;H<c;++H)v=b[T],re=K[$]=n(v,l,f,d),Y=K[$+te],U=K[$+R],ne=K[$+J],re===Y&&re===U&&re===ne||(L=b[T+k],I=b[T+M],S=b[T+P],t(F,H,v,L,I,S,re,Y,U,ne,l,f,d),se=Z[$]=V++,ne!==U&&i(Z[$+R],se,I,S,U,ne,l,f,d),ne!==Y&&i(Z[$+te],se,S,L,ne,Y,l,f,d)),$+=1,T+=E;1&F&&($=0),oe=te,te=j,j=oe,oe=R,R=N,N=oe,oe=J,J=ee,ee=oe,T+=D}}s(Z),s(K)}}}},{"typedarray-pool":308}],252:[function(p,x,y){var e=p("dup"),r={zero:function(m,c,b,g){var w=m[0];g|=0;var _=0,T=b[0];for(_=0;_<w;++_)c[g]=0,g+=T},fdTemplate1:function(m,c,b,g,w,_,T){var k=m[0],L=b[0],M=-1*L,I=L;g|=0,T|=0;var P=0,S=L,E=_[0];for(P=0;P<k;++P)w[T]=.5*(c[g+M]-c[g+I]),g+=S,T+=E},fdTemplate2:function(m,c,b,g,w,_,T,k,L,M){var I=m[0],P=m[1],S=b[0],E=b[1],D=_[0],F=_[1],H=L[0],V=L[1],Q=-1*S,K=S,Z=-1*E,$=E;g|=0,T|=0,M|=0;var re=0,R=0,N=E,U=S-P*E,te=F,j=D-P*F,Y=V,J=H-P*V;for(R=0;R<I;++R){for(re=0;re<P;++re)w[T]=.5*(c[g+Q]-c[g+K]),k[M]=.5*(c[g+Z]-c[g+$]),g+=N,T+=te,M+=Y;g+=U,T+=j,M+=J}}},t={cdiff:function(m){var c={};return function(b,g,w){var _=b.dtype,T=b.order,k=g.dtype,L=g.order,M=w.dtype,I=w.order,P=[_,T.join(),k,L.join(),M,I.join()].join(),S=c[P];return S||(c[P]=S=m([_,T,k,L,M,I])),S(b.shape.slice(0),b.data,b.stride,0|b.offset,g.data,g.stride,0|g.offset,w.data,w.stride,0|w.offset)}},zero:function(m){var c={};return function(b){var g=b.dtype,w=b.order,_=[g,w.join()].join(),T=c[_];return T||(c[_]=T=m([g,w])),T(b.shape.slice(0),b.data,b.stride,0|b.offset)}},fdTemplate1:function(m){var c={};return function(b,g){var w=b.dtype,_=b.order,T=g.dtype,k=g.order,L=[w,_.join(),T,k.join()].join(),M=c[L];return M||(c[L]=M=m([w,_,T,k])),M(b.shape.slice(0),b.data,b.stride,0|b.offset,g.data,g.stride,0|g.offset)}},fdTemplate2:function(m){var c={};return function(b,g,w){var _=b.dtype,T=b.order,k=g.dtype,L=g.order,M=w.dtype,I=w.order,P=[_,T.join(),k,L.join(),M,I.join()].join(),S=c[P];return S||(c[P]=S=m([_,T,k,L,M,I])),S(b.shape.slice(0),b.data,b.stride,0|b.offset,g.data,g.stride,0|g.offset,w.data,w.stride,0|w.offset)}}};function i(m){return(0,t[m.funcName])(n.bind(void 0,m))}function n(m){return r[m.funcName]}function h(m){return i({funcName:m.funcName})}var s={},a={},l=h({funcName:"cdiff"}),f=h({funcName:"zero"});function d(m){return m in s?s[m]:s[m]=h({funcName:"fdTemplate"+m})}function v(m,c,b,g){return function(w,_){var T=_.shape.slice();return T[0]>2&&T[1]>2&&g(_.pick(-1,-1).lo(1,1).hi(T[0]-2,T[1]-2),w.pick(-1,-1,0).lo(1,1).hi(T[0]-2,T[1]-2),w.pick(-1,-1,1).lo(1,1).hi(T[0]-2,T[1]-2)),T[1]>2&&(b(_.pick(0,-1).lo(1).hi(T[1]-2),w.pick(0,-1,1).lo(1).hi(T[1]-2)),c(w.pick(0,-1,0).lo(1).hi(T[1]-2))),T[1]>2&&(b(_.pick(T[0]-1,-1).lo(1).hi(T[1]-2),w.pick(T[0]-1,-1,1).lo(1).hi(T[1]-2)),c(w.pick(T[0]-1,-1,0).lo(1).hi(T[1]-2))),T[0]>2&&(b(_.pick(-1,0).lo(1).hi(T[0]-2),w.pick(-1,0,0).lo(1).hi(T[0]-2)),c(w.pick(-1,0,1).lo(1).hi(T[0]-2))),T[0]>2&&(b(_.pick(-1,T[1]-1).lo(1).hi(T[0]-2),w.pick(-1,T[1]-1,0).lo(1).hi(T[0]-2)),c(w.pick(-1,T[1]-1,1).lo(1).hi(T[0]-2))),w.set(0,0,0,0),w.set(0,0,1,0),w.set(T[0]-1,0,0,0),w.set(T[0]-1,0,1,0),w.set(0,T[1]-1,0,0),w.set(0,T[1]-1,1,0),w.set(T[0]-1,T[1]-1,0,0),w.set(T[0]-1,T[1]-1,1,0),w}}x.exports=function(m,c,b){return Array.isArray(b)||(b=e(c.dimension,typeof b=="string"?b:"clamp")),c.size===0?m:c.dimension===0?(m.set(0),m):function(g){var w=g.join();if(L=a[w])return L;for(var _=g.length,T=[l,f],k=1;k<=_;++k)T.push(d(k));var L=v.apply(void 0,T);return a[w]=L,L}(b)(m,c)}},{dup:65}],253:[function(p,x,y){function e(n,h){var s=Math.floor(h),a=h-s,l=0<=s&&s<n.shape[0],f=0<=s+1&&s+1<n.shape[0];return(1-a)*(l?+n.get(s):0)+a*(f?+n.get(s+1):0)}function r(n,h,s){var a=Math.floor(h),l=h-a,f=0<=a&&a<n.shape[0],d=0<=a+1&&a+1<n.shape[0],v=Math.floor(s),m=s-v,c=0<=v&&v<n.shape[1],b=0<=v+1&&v+1<n.shape[1],g=f&&c?n.get(a,v):0,w=f&&b?n.get(a,v+1):0;return(1-m)*((1-l)*g+l*(d&&c?n.get(a+1,v):0))+m*((1-l)*w+l*(d&&b?n.get(a+1,v+1):0))}function t(n,h,s,a){var l=Math.floor(h),f=h-l,d=0<=l&&l<n.shape[0],v=0<=l+1&&l+1<n.shape[0],m=Math.floor(s),c=s-m,b=0<=m&&m<n.shape[1],g=0<=m+1&&m+1<n.shape[1],w=Math.floor(a),_=a-w,T=0<=w&&w<n.shape[2],k=0<=w+1&&w+1<n.shape[2],L=d&&b&&T?n.get(l,m,w):0,M=d&&g&&T?n.get(l,m+1,w):0,I=v&&b&&T?n.get(l+1,m,w):0,P=v&&g&&T?n.get(l+1,m+1,w):0,S=d&&b&&k?n.get(l,m,w+1):0,E=d&&g&&k?n.get(l,m+1,w+1):0;return(1-_)*((1-c)*((1-f)*L+f*I)+c*((1-f)*M+f*P))+_*((1-c)*((1-f)*S+f*(v&&b&&k?n.get(l+1,m,w+1):0))+c*((1-f)*E+f*(v&&g&&k?n.get(l+1,m+1,w+1):0)))}function i(n){var h,s,a=0|n.shape.length,l=new Array(a),f=new Array(a),d=new Array(a),v=new Array(a);for(h=0;h<a;++h)s=+arguments[h+1],l[h]=Math.floor(s),f[h]=s-l[h],d[h]=0<=l[h]&&l[h]<n.shape[h],v[h]=0<=l[h]+1&&l[h]+1<n.shape[h];var m,c,b,g=0;e:for(h=0;h<1<<a;++h){for(c=1,b=n.offset,m=0;m<a;++m)if(h&1<<m){if(!v[m])continue e;c*=f[m],b+=n.stride[m]*(l[m]+1)}else{if(!d[m])continue e;c*=1-f[m],b+=n.stride[m]*l[m]}g+=c*n.data[b]}return g}x.exports=function(n,h,s,a){switch(n.shape.length){case 0:return 0;case 1:return e(n,h);case 2:return r(n,h,s);case 3:return t(n,h,s,a);default:return i.apply(void 0,arguments)}},x.exports.d1=e,x.exports.d2=r,x.exports.d3=t},{}],254:[function(p,x,y){var e={"float64,2,1,0":function(){return function(h,s,a,l,f){var d=h[0],v=h[1],m=h[2],c=a[0],b=a[1],g=a[2];l|=0;var w=0,_=0,T=0,k=g,L=b-m*g,M=c-v*b;for(T=0;T<d;++T){for(_=0;_<v;++_){for(w=0;w<m;++w)s[l]/=f,l+=k;l+=L}l+=M}}},"uint8,2,0,1,float64,2,1,0":function(){return function(h,s,a,l,f,d,v,m){for(var c=h[0],b=h[1],g=h[2],w=a[0],_=a[1],T=a[2],k=d[0],L=d[1],M=d[2],I=l|=0,P=v|=0,S=0|h[0];S>0;){S<64?(c=S,S=0):(c=64,S-=64);for(var E=0|h[1];E>0;){E<64?(b=E,E=0):(b=64,E-=64),l=I+S*w+E*_,v=P+S*k+E*L;var D=0,F=0,H=0,V=T,Q=w-g*T,K=_-c*w,Z=M,$=k-g*M,re=L-c*k;for(H=0;H<b;++H){for(F=0;F<c;++F){for(D=0;D<g;++D)s[l]=f[v]*m,l+=V,v+=Z;l+=Q,v+=$}l+=K,v+=re}}}}},"float32,1,0,float32,1,0":function(){return function(h,s,a,l,f,d,v){var m=h[0],c=h[1],b=a[0],g=a[1],w=d[0],_=d[1];l|=0,v|=0;var T=0,k=0,L=g,M=b-c*g,I=_,P=w-c*_;for(k=0;k<m;++k){for(T=0;T<c;++T)s[l]=f[v],l+=L,v+=I;l+=M,v+=P}}},"float32,1,0,float32,0,1":function(){return function(h,s,a,l,f,d,v){for(var m=h[0],c=h[1],b=a[0],g=a[1],w=d[0],_=d[1],T=l|=0,k=v|=0,L=0|h[1];L>0;){L<64?(c=L,L=0):(c=64,L-=64);for(var M=0|h[0];M>0;){M<64?(m=M,M=0):(m=64,M-=64),l=T+L*g+M*b,v=k+L*_+M*w;var I=0,P=0,S=g,E=b-c*g,D=_,F=w-c*_;for(P=0;P<m;++P){for(I=0;I<c;++I)s[l]=f[v],l+=S,v+=D;l+=E,v+=F}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(h,s,a,l,f,d,v){for(var m=h[0],c=h[1],b=h[2],g=a[0],w=a[1],_=a[2],T=d[0],k=d[1],L=d[2],M=l|=0,I=v|=0,P=0|h[2];P>0;){P<64?(b=P,P=0):(b=64,P-=64);for(var S=0|h[0];S>0;){S<64?(m=S,S=0):(m=64,S-=64);for(var E=0|h[1];E>0;){E<64?(c=E,E=0):(c=64,E-=64),l=M+P*_+S*g+E*w,v=I+P*L+S*T+E*k;var D=0,F=0,H=0,V=_,Q=g-b*_,K=w-m*g,Z=L,$=T-b*L,re=k-m*T;for(H=0;H<c;++H){for(F=0;F<m;++F){for(D=0;D<b;++D)s[l]=f[v],l+=V,v+=Z;l+=Q,v+=$}l+=K,v+=re}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(h,s,a,l,f,d,v){var m=h[0],c=h[1],b=h[2],g=a[0],w=a[1],_=a[2],T=d[0],k=d[1],L=d[2];l|=0,v|=0;var M=0,I=0,P=0,S=_,E=g-b*_,D=w-m*g,F=L,H=T-b*L,V=k-m*T;for(P=0;P<c;++P){for(I=0;I<m;++I){for(M=0;M<b;++M)s[l]=f[v],l+=S,v+=F;l+=E,v+=H}l+=D,v+=V}}}},r=function(h,s){var a=s.join(",");return(0,e[a])()},t={mul:function(h){var s={};return function(a,l,f){var d=a.dtype,v=a.order,m=l.dtype,c=l.order,b=f.dtype,g=f.order,w=[d,v.join(),m,c.join(),b,g.join()].join(),_=s[w];return _||(s[w]=_=h([d,v,m,c,b,g])),_(a.shape.slice(0),a.data,a.stride,0|a.offset,l.data,l.stride,0|l.offset,f.data,f.stride,0|f.offset)}},muls:function(h){var s={};return function(a,l,f){var d=a.dtype,v=a.order,m=l.dtype,c=l.order,b=[d,v.join(),m,c.join()].join(),g=s[b];return g||(s[b]=g=h([d,v,m,c])),g(a.shape.slice(0),a.data,a.stride,0|a.offset,l.data,l.stride,0|l.offset,f)}},mulseq:function(h){var s={};return function(a,l){var f=a.dtype,d=a.order,v=[f,d.join()].join(),m=s[v];return m||(s[v]=m=h([f,d])),m(a.shape.slice(0),a.data,a.stride,0|a.offset,l)}},div:function(h){var s={};return function(a,l,f){var d=a.dtype,v=a.order,m=l.dtype,c=l.order,b=f.dtype,g=f.order,w=[d,v.join(),m,c.join(),b,g.join()].join(),_=s[w];return _||(s[w]=_=h([d,v,m,c,b,g])),_(a.shape.slice(0),a.data,a.stride,0|a.offset,l.data,l.stride,0|l.offset,f.data,f.stride,0|f.offset)}},divs:function(h){var s={};return function(a,l,f){var d=a.dtype,v=a.order,m=l.dtype,c=l.order,b=[d,v.join(),m,c.join()].join(),g=s[b];return g||(s[b]=g=h([d,v,m,c])),g(a.shape.slice(0),a.data,a.stride,0|a.offset,l.data,l.stride,0|l.offset,f)}},divseq:function(h){var s={};return function(a,l){var f=a.dtype,d=a.order,v=[f,d.join()].join(),m=s[v];return m||(s[v]=m=h([f,d])),m(a.shape.slice(0),a.data,a.stride,0|a.offset,l)}},assign:function(h){var s={};return function(a,l){var f=a.dtype,d=a.order,v=l.dtype,m=l.order,c=[f,d.join(),v,m.join()].join(),b=s[c];return b||(s[c]=b=h([f,d,v,m])),b(a.shape.slice(0),a.data,a.stride,0|a.offset,l.data,l.stride,0|l.offset)}}};function i(h){return s={funcName:h.funcName},(0,t[s.funcName])(r.bind(void 0,s));var s}var n={mul:"*",div:"/"};(function(){for(var h in n)y[h]=i({funcName:h}),y[h+"s"]=i({funcName:h+"s"}),y[h+"seq"]=i({funcName:h+"seq"})})(),y.assign=i({funcName:"assign"})},{}],255:[function(p,x,y){var e=p("ndarray"),r=p("./doConvert.js");x.exports=function(t,i){for(var n=[],h=t,s=1;Array.isArray(h);)n.push(h.length),s*=h.length,h=h[0];return n.length===0?e():(i||(i=e(new Float64Array(s),n)),r(i,t),i)}},{"./doConvert.js":256,ndarray:259}],256:[function(p,x,y){var e,r=function(){return function(t,i,n,h,s){var a=t[0],l=t[1],f=t[2],d=n[0],v=n[1],m=n[2],c=[0,0,0];h|=0;var b=0,g=0,w=0,_=m,T=v-f*m,k=d-l*v;for(w=0;w<a;++w){for(g=0;g<l;++g){for(b=0;b<f;++b){var L,M=s;for(L=0;L<c.length-1;++L)M=M[c[L]];i[h]=M[c[c.length-1]],h+=_,++c[2]}h+=T,c[2]-=f,++c[1]}h+=k,c[1]-=l,++c[0]}}};x.exports=(e={funcName:"convert"},function(t){var i={};return function(n,h){var s=n.dtype,a=n.order,l=[s,a.join()].join(),f=i[l];return f||(i[l]=f=t([s,a])),f(n.shape.slice(0),n.data,n.stride,0|n.offset,h)}}(r.bind(void 0,e)))},{}],257:[function(p,x,y){var e=p("typedarray-pool");function r(h){switch(h){case"uint32":return[e.mallocUint32,e.freeUint32];default:return null}}var t={"uint32,1,0":function(h,s){return function(a,l,f,d,v,m,c,b,g,w,_){var T,k,L,M,I,P,S,E,D=a*v+d,F=h(b);for(T=a+1;T<=l;++T){for(k=T,L=D+=v,I=0,P=D,M=0;M<b;++M)F[I++]=f[P],P+=g;e:for(;k-- >a;){I=0,P=L-v;t:for(M=0;M<b;++M){if((S=f[P])<(E=F[I]))break e;if(S>E)break t;P+=w,I+=_}for(I=L,P=L-v,M=0;M<b;++M)f[I]=f[P],I+=g,P+=g;L-=v}for(I=L,P=0,M=0;M<b;++M)f[I]=F[P++],I+=g}s(F)}}},i={"uint32,1,0":function(h,s,a){return function l(f,d,v,m,c,b,g,w,_,T,k){var L,M,I,P,S,E,D,F,H,V,Q,K,Z,$,re,R,N,U,te,j,Y,J,ee,ne,se,oe=(d-f+1)/6|0,he=f+oe,le=d-oe,de=f+d>>1,xe=de-oe,we=de+oe,be=he,Ae=xe,fe=de,me=we,ke=le,Te=f+1,Me=d-1,Oe=!0,Fe=0,qe=0,et=0,ze=w,Ue=s(ze),We=s(ze);Q=c*be,K=c*Ae,se=m;e:for(V=0;V<w;++V){if(F=K+se,(et=v[D=Q+se]-v[F])>0){M=be,be=Ae,Ae=M;break e}if(et<0)break e;se+=T}Q=c*me,K=c*ke,se=m;e:for(V=0;V<w;++V){if(F=K+se,(et=v[D=Q+se]-v[F])>0){M=me,me=ke,ke=M;break e}if(et<0)break e;se+=T}Q=c*be,K=c*fe,se=m;e:for(V=0;V<w;++V){if(F=K+se,(et=v[D=Q+se]-v[F])>0){M=be,be=fe,fe=M;break e}if(et<0)break e;se+=T}Q=c*Ae,K=c*fe,se=m;e:for(V=0;V<w;++V){if(F=K+se,(et=v[D=Q+se]-v[F])>0){M=Ae,Ae=fe,fe=M;break e}if(et<0)break e;se+=T}Q=c*be,K=c*me,se=m;e:for(V=0;V<w;++V){if(F=K+se,(et=v[D=Q+se]-v[F])>0){M=be,be=me,me=M;break e}if(et<0)break e;se+=T}Q=c*fe,K=c*me,se=m;e:for(V=0;V<w;++V){if(F=K+se,(et=v[D=Q+se]-v[F])>0){M=fe,fe=me,me=M;break e}if(et<0)break e;se+=T}Q=c*Ae,K=c*ke,se=m;e:for(V=0;V<w;++V){if(F=K+se,(et=v[D=Q+se]-v[F])>0){M=Ae,Ae=ke,ke=M;break e}if(et<0)break e;se+=T}Q=c*Ae,K=c*fe,se=m;e:for(V=0;V<w;++V){if(F=K+se,(et=v[D=Q+se]-v[F])>0){M=Ae,Ae=fe,fe=M;break e}if(et<0)break e;se+=T}Q=c*me,K=c*ke,se=m;e:for(V=0;V<w;++V){if(F=K+se,(et=v[D=Q+se]-v[F])>0){M=me,me=ke,ke=M;break e}if(et<0)break e;se+=T}for(Q=c*be,K=c*Ae,Z=c*fe,$=c*me,re=c*ke,R=c*he,N=c*de,U=c*le,ne=0,se=m,V=0;V<w;++V)D=Q+se,F=K+se,H=Z+se,te=$+se,j=re+se,Y=R+se,J=N+se,ee=U+se,Ue[ne]=v[F],We[ne]=v[te],Oe=Oe&&Ue[ne]===We[ne],I=v[D],P=v[H],S=v[j],v[Y]=I,v[J]=P,v[ee]=S,++ne,se+=_;for(Q=c*xe,K=c*f,se=m,V=0;V<w;++V)F=K+se,v[D=Q+se]=v[F],se+=_;for(Q=c*we,K=c*d,se=m,V=0;V<w;++V)F=K+se,v[D=Q+se]=v[F],se+=_;if(Oe)for(E=Te;E<=Me;++E){for(D=m+E*c,ne=0,V=0;V<w&&(et=v[D]-Ue[ne])==0;++V)ne+=k,D+=T;if(et!==0)if(et<0){if(E!==Te)for(Q=c*E,K=c*Te,se=m,V=0;V<w;++V)F=K+se,L=v[D=Q+se],v[D]=v[F],v[F]=L,se+=_;++Te}else for(;;){for(D=m+Me*c,ne=0,V=0;V<w&&(et=v[D]-Ue[ne])==0;++V)ne+=k,D+=T;if(!(et>0)){if(et<0){for(Q=c*E,K=c*Te,Z=c*Me,se=m,V=0;V<w;++V)F=K+se,H=Z+se,L=v[D=Q+se],v[D]=v[F],v[F]=v[H],v[H]=L,se+=_;++Te,--Me;break}for(Q=c*E,K=c*Me,se=m,V=0;V<w;++V)F=K+se,L=v[D=Q+se],v[D]=v[F],v[F]=L,se+=_;--Me;break}Me--}}else for(E=Te;E<=Me;++E){for(D=m+E*c,ne=0,V=0;V<w&&(Fe=v[D]-Ue[ne])==0;++V)ne+=k,D+=T;if(Fe<0){if(E!==Te)for(Q=c*E,K=c*Te,se=m,V=0;V<w;++V)F=K+se,L=v[D=Q+se],v[D]=v[F],v[F]=L,se+=_;++Te}else{for(D=m+E*c,ne=0,V=0;V<w&&(qe=v[D]-We[ne])==0;++V)ne+=k,D+=T;if(qe>0)for(;;){for(D=m+Me*c,ne=0,V=0;V<w&&(et=v[D]-We[ne])==0;++V)ne+=k,D+=T;if(!(et>0)){for(D=m+Me*c,ne=0,V=0;V<w&&(et=v[D]-Ue[ne])==0;++V)ne+=k,D+=T;if(et<0){for(Q=c*E,K=c*Te,Z=c*Me,se=m,V=0;V<w;++V)F=K+se,H=Z+se,L=v[D=Q+se],v[D]=v[F],v[F]=v[H],v[H]=L,se+=_;++Te,--Me}else{for(Q=c*E,K=c*Me,se=m,V=0;V<w;++V)F=K+se,L=v[D=Q+se],v[D]=v[F],v[F]=L,se+=_;--Me}break}if(--Me<E)break}}}for(Q=c*f,K=c*(Te-1),ne=0,se=m,V=0;V<w;++V)F=K+se,v[D=Q+se]=v[F],v[F]=Ue[ne],++ne,se+=_;for(Q=c*d,K=c*(Me+1),ne=0,se=m,V=0;V<w;++V)F=K+se,v[D=Q+se]=v[F],v[F]=We[ne],++ne,se+=_;if(Te-2-f<=32?h(f,Te-2,v,m,c,b,g,w,_,T,k):l(f,Te-2,v,m,c,b,g,w,_,T,k),d-(Me+2)<=32?h(Me+2,d,v,m,c,b,g,w,_,T,k):l(Me+2,d,v,m,c,b,g,w,_,T,k),Oe)return a(Ue),void a(We);if(Te<he&&Me>le){e:for(;;){for(D=m+Te*c,ne=0,se=m,V=0;V<w;++V){if(v[D]!==Ue[ne])break e;++ne,D+=_}++Te}e:for(;;){for(D=m+Me*c,ne=0,se=m,V=0;V<w;++V){if(v[D]!==We[ne])break e;++ne,D+=_}--Me}for(E=Te;E<=Me;++E){for(D=m+E*c,ne=0,V=0;V<w&&(Fe=v[D]-Ue[ne])==0;++V)ne+=k,D+=T;if(Fe===0){if(E!==Te)for(Q=c*E,K=c*Te,se=m,V=0;V<w;++V)F=K+se,L=v[D=Q+se],v[D]=v[F],v[F]=L,se+=_;++Te}else{for(D=m+E*c,ne=0,V=0;V<w&&(qe=v[D]-We[ne])==0;++V)ne+=k,D+=T;if(qe===0)for(;;){for(D=m+Me*c,ne=0,V=0;V<w&&(et=v[D]-We[ne])==0;++V)ne+=k,D+=T;if(et!==0){for(D=m+Me*c,ne=0,V=0;V<w&&(et=v[D]-Ue[ne])==0;++V)ne+=k,D+=T;if(et<0){for(Q=c*E,K=c*Te,Z=c*Me,se=m,V=0;V<w;++V)F=K+se,H=Z+se,L=v[D=Q+se],v[D]=v[F],v[F]=v[H],v[H]=L,se+=_;++Te,--Me}else{for(Q=c*E,K=c*Me,se=m,V=0;V<w;++V)F=K+se,L=v[D=Q+se],v[D]=v[F],v[F]=L,se+=_;--Me}break}if(--Me<E)break}}}}a(Ue),a(We),Me-Te<=32?h(Te,Me,v,m,c,b,g,w,_,T,k):l(Te,Me,v,m,c,b,g,w,_,T,k)}}},n={"uint32,1,0":function(h,s){return function(a){var l=a.data,f=0|a.offset,d=a.shape,v=a.stride,m=0|v[0],c=0|d[0],b=0|v[1],g=0|d[1],w=b,_=b;c<=32?h(0,c-1,l,f,m,b,c,g,w,_,1):s(0,c-1,l,f,m,b,c,g,w,_,1)}}};x.exports=function(h,s){var a=[s,h].join(","),l=n[a],f=function(v,m){var c=r(m),b=[m,v].join(","),g=t[b];return c?g(c[0],c[1]):g()}(h,s),d=function(v,m,c){var b=r(m),g=[m,v].join(","),w=i[g];return v.length>1&&b?w(c,b[0],b[1]):w(c)}(h,s,f);return l(f,d)}},{"typedarray-pool":308}],258:[function(p,x,y){var e=p("./lib/compile_sort.js"),r={};x.exports=function(t){var i=t.order,n=t.dtype,h=[i,n].join(":"),s=r[h];return s||(r[h]=s=e(i,n)),s(t),t}},{"./lib/compile_sort.js":257}],259:[function(p,x,y){var e=p("is-buffer"),r=typeof Float64Array!="undefined";function t(a,l){return a[0]-l[0]}function i(){var a,l=this.stride,f=new Array(l.length);for(a=0;a<f.length;++a)f[a]=[Math.abs(l[a]),a];f.sort(t);var d=new Array(f.length);for(a=0;a<d.length;++a)d[a]=f[a][1];return d}var n={T:function(a){function l(d){this.data=d}var f=l.prototype;return f.dtype=a,f.index=function(){return-1},f.size=0,f.dimension=-1,f.shape=f.stride=f.order=[],f.lo=f.hi=f.transpose=f.step=function(){return new l(this.data)},f.get=f.set=function(){},f.pick=function(){return null},function(d){return new l(d)}},0:function(a,l){function f(v,m){this.data=v,this.offset=m}var d=f.prototype;return d.dtype=a,d.index=function(){return this.offset},d.dimension=0,d.size=1,d.shape=d.stride=d.order=[],d.lo=d.hi=d.transpose=d.step=function(){return new f(this.data,this.offset)},d.pick=function(){return l(this.data)},d.valueOf=d.get=function(){return a==="generic"?this.data.get(this.offset):this.data[this.offset]},d.set=function(v){return a==="generic"?this.data.set(this.offset,v):this.data[this.offset]=v},function(v,m,c,b){return new f(v,b)}},1:function(a,l,f){function d(m,c,b,g){this.data=m,this.shape=[c],this.stride=[b],this.offset=0|g}var v=d.prototype;return v.dtype=a,v.dimension=1,Object.defineProperty(v,"size",{get:function(){return this.shape[0]}}),v.order=[0],v.set=function(m,c){return a==="generic"?this.data.set(this.offset+this.stride[0]*m,c):this.data[this.offset+this.stride[0]*m]=c},v.get=function(m){return a==="generic"?this.data.get(this.offset+this.stride[0]*m):this.data[this.offset+this.stride[0]*m]},v.index=function(m){return this.offset+this.stride[0]*m},v.hi=function(m){return new d(this.data,typeof m!="number"||m<0?this.shape[0]:0|m,this.stride[0],this.offset)},v.lo=function(m){var c=this.offset,b=0,g=this.shape[0],w=this.stride[0];return typeof m=="number"&&m>=0&&(c+=w*(b=0|m),g-=b),new d(this.data,g,w,c)},v.step=function(m){var c=this.shape[0],b=this.stride[0],g=this.offset,w=0,_=Math.ceil;return typeof m=="number"&&((w=0|m)<0?(g+=b*(c-1),c=_(-c/w)):c=_(c/w),b*=w),new d(this.data,c,b,g)},v.transpose=function(m){m=m===void 0?0:0|m;var c=this.shape,b=this.stride;return new d(this.data,c[m],b[m],this.offset)},v.pick=function(m){var c=[],b=[],g=this.offset;return typeof m=="number"&&m>=0?g=g+this.stride[0]*m|0:(c.push(this.shape[0]),b.push(this.stride[0])),(0,l[c.length+1])(this.data,c,b,g)},function(m,c,b,g){return new d(m,c[0],b[0],g)}},2:function(a,l,f){function d(m,c,b,g,w,_){this.data=m,this.shape=[c,b],this.stride=[g,w],this.offset=0|_}var v=d.prototype;return v.dtype=a,v.dimension=2,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(v,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),v.set=function(m,c,b){return a==="generic"?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*c,b):this.data[this.offset+this.stride[0]*m+this.stride[1]*c]=b},v.get=function(m,c){return a==="generic"?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*c):this.data[this.offset+this.stride[0]*m+this.stride[1]*c]},v.index=function(m,c){return this.offset+this.stride[0]*m+this.stride[1]*c},v.hi=function(m,c){return new d(this.data,typeof m!="number"||m<0?this.shape[0]:0|m,typeof c!="number"||c<0?this.shape[1]:0|c,this.stride[0],this.stride[1],this.offset)},v.lo=function(m,c){var b=this.offset,g=0,w=this.shape[0],_=this.shape[1],T=this.stride[0],k=this.stride[1];return typeof m=="number"&&m>=0&&(b+=T*(g=0|m),w-=g),typeof c=="number"&&c>=0&&(b+=k*(g=0|c),_-=g),new d(this.data,w,_,T,k,b)},v.step=function(m,c){var b=this.shape[0],g=this.shape[1],w=this.stride[0],_=this.stride[1],T=this.offset,k=0,L=Math.ceil;return typeof m=="number"&&((k=0|m)<0?(T+=w*(b-1),b=L(-b/k)):b=L(b/k),w*=k),typeof c=="number"&&((k=0|c)<0?(T+=_*(g-1),g=L(-g/k)):g=L(g/k),_*=k),new d(this.data,b,g,w,_,T)},v.transpose=function(m,c){m=m===void 0?0:0|m,c=c===void 0?1:0|c;var b=this.shape,g=this.stride;return new d(this.data,b[m],b[c],g[m],g[c],this.offset)},v.pick=function(m,c){var b=[],g=[],w=this.offset;return typeof m=="number"&&m>=0?w=w+this.stride[0]*m|0:(b.push(this.shape[0]),g.push(this.stride[0])),typeof c=="number"&&c>=0?w=w+this.stride[1]*c|0:(b.push(this.shape[1]),g.push(this.stride[1])),(0,l[b.length+1])(this.data,b,g,w)},function(m,c,b,g){return new d(m,c[0],c[1],b[0],b[1],g)}},3:function(a,l,f){function d(m,c,b,g,w,_,T,k){this.data=m,this.shape=[c,b,g],this.stride=[w,_,T],this.offset=0|k}var v=d.prototype;return v.dtype=a,v.dimension=3,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(v,"order",{get:function(){var m=Math.abs(this.stride[0]),c=Math.abs(this.stride[1]),b=Math.abs(this.stride[2]);return m>c?c>b?[2,1,0]:m>b?[1,2,0]:[1,0,2]:m>b?[2,0,1]:b>c?[0,1,2]:[0,2,1]}}),v.set=function(m,c,b,g){return a==="generic"?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*c+this.stride[2]*b,g):this.data[this.offset+this.stride[0]*m+this.stride[1]*c+this.stride[2]*b]=g},v.get=function(m,c,b){return a==="generic"?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*c+this.stride[2]*b):this.data[this.offset+this.stride[0]*m+this.stride[1]*c+this.stride[2]*b]},v.index=function(m,c,b){return this.offset+this.stride[0]*m+this.stride[1]*c+this.stride[2]*b},v.hi=function(m,c,b){return new d(this.data,typeof m!="number"||m<0?this.shape[0]:0|m,typeof c!="number"||c<0?this.shape[1]:0|c,typeof b!="number"||b<0?this.shape[2]:0|b,this.stride[0],this.stride[1],this.stride[2],this.offset)},v.lo=function(m,c,b){var g=this.offset,w=0,_=this.shape[0],T=this.shape[1],k=this.shape[2],L=this.stride[0],M=this.stride[1],I=this.stride[2];return typeof m=="number"&&m>=0&&(g+=L*(w=0|m),_-=w),typeof c=="number"&&c>=0&&(g+=M*(w=0|c),T-=w),typeof b=="number"&&b>=0&&(g+=I*(w=0|b),k-=w),new d(this.data,_,T,k,L,M,I,g)},v.step=function(m,c,b){var g=this.shape[0],w=this.shape[1],_=this.shape[2],T=this.stride[0],k=this.stride[1],L=this.stride[2],M=this.offset,I=0,P=Math.ceil;return typeof m=="number"&&((I=0|m)<0?(M+=T*(g-1),g=P(-g/I)):g=P(g/I),T*=I),typeof c=="number"&&((I=0|c)<0?(M+=k*(w-1),w=P(-w/I)):w=P(w/I),k*=I),typeof b=="number"&&((I=0|b)<0?(M+=L*(_-1),_=P(-_/I)):_=P(_/I),L*=I),new d(this.data,g,w,_,T,k,L,M)},v.transpose=function(m,c,b){m=m===void 0?0:0|m,c=c===void 0?1:0|c,b=b===void 0?2:0|b;var g=this.shape,w=this.stride;return new d(this.data,g[m],g[c],g[b],w[m],w[c],w[b],this.offset)},v.pick=function(m,c,b){var g=[],w=[],_=this.offset;return typeof m=="number"&&m>=0?_=_+this.stride[0]*m|0:(g.push(this.shape[0]),w.push(this.stride[0])),typeof c=="number"&&c>=0?_=_+this.stride[1]*c|0:(g.push(this.shape[1]),w.push(this.stride[1])),typeof b=="number"&&b>=0?_=_+this.stride[2]*b|0:(g.push(this.shape[2]),w.push(this.stride[2])),(0,l[g.length+1])(this.data,g,w,_)},function(m,c,b,g){return new d(m,c[0],c[1],c[2],b[0],b[1],b[2],g)}},4:function(a,l,f){function d(m,c,b,g,w,_,T,k,L,M){this.data=m,this.shape=[c,b,g,w],this.stride=[_,T,k,L],this.offset=0|M}var v=d.prototype;return v.dtype=a,v.dimension=4,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(v,"order",{get:f}),v.set=function(m,c,b,g,w){return a==="generic"?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*c+this.stride[2]*b+this.stride[3]*g,w):this.data[this.offset+this.stride[0]*m+this.stride[1]*c+this.stride[2]*b+this.stride[3]*g]=w},v.get=function(m,c,b,g){return a==="generic"?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*c+this.stride[2]*b+this.stride[3]*g):this.data[this.offset+this.stride[0]*m+this.stride[1]*c+this.stride[2]*b+this.stride[3]*g]},v.index=function(m,c,b,g){return this.offset+this.stride[0]*m+this.stride[1]*c+this.stride[2]*b+this.stride[3]*g},v.hi=function(m,c,b,g){return new d(this.data,typeof m!="number"||m<0?this.shape[0]:0|m,typeof c!="number"||c<0?this.shape[1]:0|c,typeof b!="number"||b<0?this.shape[2]:0|b,typeof g!="number"||g<0?this.shape[3]:0|g,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},v.lo=function(m,c,b,g){var w=this.offset,_=0,T=this.shape[0],k=this.shape[1],L=this.shape[2],M=this.shape[3],I=this.stride[0],P=this.stride[1],S=this.stride[2],E=this.stride[3];return typeof m=="number"&&m>=0&&(w+=I*(_=0|m),T-=_),typeof c=="number"&&c>=0&&(w+=P*(_=0|c),k-=_),typeof b=="number"&&b>=0&&(w+=S*(_=0|b),L-=_),typeof g=="number"&&g>=0&&(w+=E*(_=0|g),M-=_),new d(this.data,T,k,L,M,I,P,S,E,w)},v.step=function(m,c,b,g){var w=this.shape[0],_=this.shape[1],T=this.shape[2],k=this.shape[3],L=this.stride[0],M=this.stride[1],I=this.stride[2],P=this.stride[3],S=this.offset,E=0,D=Math.ceil;return typeof m=="number"&&((E=0|m)<0?(S+=L*(w-1),w=D(-w/E)):w=D(w/E),L*=E),typeof c=="number"&&((E=0|c)<0?(S+=M*(_-1),_=D(-_/E)):_=D(_/E),M*=E),typeof b=="number"&&((E=0|b)<0?(S+=I*(T-1),T=D(-T/E)):T=D(T/E),I*=E),typeof g=="number"&&((E=0|g)<0?(S+=P*(k-1),k=D(-k/E)):k=D(k/E),P*=E),new d(this.data,w,_,T,k,L,M,I,P,S)},v.transpose=function(m,c,b,g){m=m===void 0?0:0|m,c=c===void 0?1:0|c,b=b===void 0?2:0|b,g=g===void 0?3:0|g;var w=this.shape,_=this.stride;return new d(this.data,w[m],w[c],w[b],w[g],_[m],_[c],_[b],_[g],this.offset)},v.pick=function(m,c,b,g){var w=[],_=[],T=this.offset;return typeof m=="number"&&m>=0?T=T+this.stride[0]*m|0:(w.push(this.shape[0]),_.push(this.stride[0])),typeof c=="number"&&c>=0?T=T+this.stride[1]*c|0:(w.push(this.shape[1]),_.push(this.stride[1])),typeof b=="number"&&b>=0?T=T+this.stride[2]*b|0:(w.push(this.shape[2]),_.push(this.stride[2])),typeof g=="number"&&g>=0?T=T+this.stride[3]*g|0:(w.push(this.shape[3]),_.push(this.stride[3])),(0,l[w.length+1])(this.data,w,_,T)},function(m,c,b,g){return new d(m,c[0],c[1],c[2],c[3],b[0],b[1],b[2],b[3],g)}},5:function(a,l,f){function d(m,c,b,g,w,_,T,k,L,M,I,P){this.data=m,this.shape=[c,b,g,w,_],this.stride=[T,k,L,M,I],this.offset=0|P}var v=d.prototype;return v.dtype=a,v.dimension=5,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(v,"order",{get:f}),v.set=function(m,c,b,g,w,_){return a==="generic"?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*c+this.stride[2]*b+this.stride[3]*g+this.stride[4]*w,_):this.data[this.offset+this.stride[0]*m+this.stride[1]*c+this.stride[2]*b+this.stride[3]*g+this.stride[4]*w]=_},v.get=function(m,c,b,g,w){return a==="generic"?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*c+this.stride[2]*b+this.stride[3]*g+this.stride[4]*w):this.data[this.offset+this.stride[0]*m+this.stride[1]*c+this.stride[2]*b+this.stride[3]*g+this.stride[4]*w]},v.index=function(m,c,b,g,w){return this.offset+this.stride[0]*m+this.stride[1]*c+this.stride[2]*b+this.stride[3]*g+this.stride[4]*w},v.hi=function(m,c,b,g,w){return new d(this.data,typeof m!="number"||m<0?this.shape[0]:0|m,typeof c!="number"||c<0?this.shape[1]:0|c,typeof b!="number"||b<0?this.shape[2]:0|b,typeof g!="number"||g<0?this.shape[3]:0|g,typeof w!="number"||w<0?this.shape[4]:0|w,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},v.lo=function(m,c,b,g,w){var _=this.offset,T=0,k=this.shape[0],L=this.shape[1],M=this.shape[2],I=this.shape[3],P=this.shape[4],S=this.stride[0],E=this.stride[1],D=this.stride[2],F=this.stride[3],H=this.stride[4];return typeof m=="number"&&m>=0&&(_+=S*(T=0|m),k-=T),typeof c=="number"&&c>=0&&(_+=E*(T=0|c),L-=T),typeof b=="number"&&b>=0&&(_+=D*(T=0|b),M-=T),typeof g=="number"&&g>=0&&(_+=F*(T=0|g),I-=T),typeof w=="number"&&w>=0&&(_+=H*(T=0|w),P-=T),new d(this.data,k,L,M,I,P,S,E,D,F,H,_)},v.step=function(m,c,b,g,w){var _=this.shape[0],T=this.shape[1],k=this.shape[2],L=this.shape[3],M=this.shape[4],I=this.stride[0],P=this.stride[1],S=this.stride[2],E=this.stride[3],D=this.stride[4],F=this.offset,H=0,V=Math.ceil;return typeof m=="number"&&((H=0|m)<0?(F+=I*(_-1),_=V(-_/H)):_=V(_/H),I*=H),typeof c=="number"&&((H=0|c)<0?(F+=P*(T-1),T=V(-T/H)):T=V(T/H),P*=H),typeof b=="number"&&((H=0|b)<0?(F+=S*(k-1),k=V(-k/H)):k=V(k/H),S*=H),typeof g=="number"&&((H=0|g)<0?(F+=E*(L-1),L=V(-L/H)):L=V(L/H),E*=H),typeof w=="number"&&((H=0|w)<0?(F+=D*(M-1),M=V(-M/H)):M=V(M/H),D*=H),new d(this.data,_,T,k,L,M,I,P,S,E,D,F)},v.transpose=function(m,c,b,g,w){m=m===void 0?0:0|m,c=c===void 0?1:0|c,b=b===void 0?2:0|b,g=g===void 0?3:0|g,w=w===void 0?4:0|w;var _=this.shape,T=this.stride;return new d(this.data,_[m],_[c],_[b],_[g],_[w],T[m],T[c],T[b],T[g],T[w],this.offset)},v.pick=function(m,c,b,g,w){var _=[],T=[],k=this.offset;return typeof m=="number"&&m>=0?k=k+this.stride[0]*m|0:(_.push(this.shape[0]),T.push(this.stride[0])),typeof c=="number"&&c>=0?k=k+this.stride[1]*c|0:(_.push(this.shape[1]),T.push(this.stride[1])),typeof b=="number"&&b>=0?k=k+this.stride[2]*b|0:(_.push(this.shape[2]),T.push(this.stride[2])),typeof g=="number"&&g>=0?k=k+this.stride[3]*g|0:(_.push(this.shape[3]),T.push(this.stride[3])),typeof w=="number"&&w>=0?k=k+this.stride[4]*w|0:(_.push(this.shape[4]),T.push(this.stride[4])),(0,l[_.length+1])(this.data,_,T,k)},function(m,c,b,g){return new d(m,c[0],c[1],c[2],c[3],c[4],b[0],b[1],b[2],b[3],b[4],g)}}};function h(a,l){var f=l===-1?"T":String(l),d=n[f];return l===-1?d(a):l===0?d(a,s[a][0]):d(a,s[a],i)}var s={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};x.exports=function(a,l,f,d){if(a===void 0)return(0,s.array[0])([]);typeof a=="number"&&(a=[a]),l===void 0&&(l=[a.length]);var v=l.length;if(f===void 0){f=new Array(v);for(var m=v-1,c=1;m>=0;--m)f[m]=c,c*=l[m]}if(d===void 0)for(d=0,m=0;m<v;++m)f[m]<0&&(d-=(l[m]-1)*f[m]);for(var b=function(w){if(e(w))return"buffer";if(r)switch(Object.prototype.toString.call(w)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(w)?"array":"generic"}(a),g=s[b];g.length<=v+1;)g.push(h(b,g.length-1));return(0,g[v+1])(a,l,f,d)}},{"is-buffer":237}],260:[function(p,x,y){var e=p("double-bits"),r=Math.pow(2,-1074);x.exports=function(t,i){if(isNaN(t)||isNaN(i))return NaN;if(t===i)return t;if(t===0)return i<0?-r:r;var n=e.hi(t),h=e.lo(t);return i>t==t>0?h===-1>>>0?(n+=1,h=0):h+=1:h===0?(h=-1>>>0,n-=1):h-=1,e.pack(h,n)}},{"double-bits":64}],261:[function(p,x,y){y.vertexNormals=function(e,r,t){for(var i=r.length,n=new Array(i),h=t===void 0?1e-6:t,s=0;s<i;++s)n[s]=[0,0,0];for(s=0;s<e.length;++s)for(var a=e[s],l=0,f=a[a.length-1],d=a[0],v=0;v<a.length;++v){l=f,f=d,d=a[(v+1)%a.length];for(var m=r[l],c=r[f],b=r[d],g=new Array(3),w=0,_=new Array(3),T=0,k=0;k<3;++k)g[k]=m[k]-c[k],w+=g[k]*g[k],_[k]=b[k]-c[k],T+=_[k]*_[k];if(w*T>h){var L=n[f],M=1/Math.sqrt(w*T);for(k=0;k<3;++k){var I=(k+1)%3,P=(k+2)%3;L[k]+=M*(_[I]*g[P]-_[P]*g[I])}}}for(s=0;s<i;++s){L=n[s];var S=0;for(k=0;k<3;++k)S+=L[k]*L[k];if(S>h)for(M=1/Math.sqrt(S),k=0;k<3;++k)L[k]*=M;else for(k=0;k<3;++k)L[k]=0}return n},y.faceNormals=function(e,r,t){for(var i=e.length,n=new Array(i),h=t===void 0?1e-6:t,s=0;s<i;++s){for(var a=e[s],l=new Array(3),f=0;f<3;++f)l[f]=r[a[f]];var d=new Array(3),v=new Array(3);for(f=0;f<3;++f)d[f]=l[1][f]-l[0][f],v[f]=l[2][f]-l[0][f];var m=new Array(3),c=0;for(f=0;f<3;++f){var b=(f+1)%3,g=(f+2)%3;m[f]=d[b]*v[g]-d[g]*v[b],c+=m[f]*m[f]}for(c=c>h?1/Math.sqrt(c):0,f=0;f<3;++f)m[f]*=c;n[s]=m}return n}},{}],262:[function(p,x,y){x.exports=function(e,r,t,i,n,h,s,a,l,f){var d=r+h+f;if(v>0){var v=Math.sqrt(d+1);e[0]=.5*(s-l)/v,e[1]=.5*(a-i)/v,e[2]=.5*(t-h)/v,e[3]=.5*v}else{var m=Math.max(r,h,f);v=Math.sqrt(2*m-d+1),r>=m?(e[0]=.5*v,e[1]=.5*(n+t)/v,e[2]=.5*(a+i)/v,e[3]=.5*(s-l)/v):h>=m?(e[0]=.5*(t+n)/v,e[1]=.5*v,e[2]=.5*(l+s)/v,e[3]=.5*(a-i)/v):(e[0]=.5*(i+a)/v,e[1]=.5*(s+l)/v,e[2]=.5*v,e[3]=.5*(t-n)/v)}return e}},{}],263:[function(p,x,y){x.exports=function(d){var v=(d=d||{}).center||[0,0,0],m=d.rotation||[0,0,0,1],c=d.radius||1;v=[].slice.call(v,0,3),a(m=[].slice.call(m,0,4),m);var b=new l(m,v,Math.log(c));return b.setDistanceLimits(d.zoomMin,d.zoomMax),("eye"in d||"up"in d)&&b.lookAt(0,d.eye,d.center,d.up),b};var e=p("filtered-vector"),r=p("gl-mat4/lookAt"),t=p("gl-mat4/fromQuat"),i=p("gl-mat4/invert"),n=p("./lib/quatFromFrame");function h(d,v,m){return Math.sqrt(Math.pow(d,2)+Math.pow(v,2)+Math.pow(m,2))}function s(d,v,m,c){return Math.sqrt(Math.pow(d,2)+Math.pow(v,2)+Math.pow(m,2)+Math.pow(c,2))}function a(d,v){var m=v[0],c=v[1],b=v[2],g=v[3],w=s(m,c,b,g);w>1e-6?(d[0]=m/w,d[1]=c/w,d[2]=b/w,d[3]=g/w):(d[0]=d[1]=d[2]=0,d[3]=1)}function l(d,v,m){this.radius=e([m]),this.center=e(v),this.rotation=e(d),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var f=l.prototype;f.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},f.recalcMatrix=function(d){this.radius.curve(d),this.center.curve(d),this.rotation.curve(d);var v=this.computedRotation;a(v,v);var m=this.computedMatrix;t(m,v);var c=this.computedCenter,b=this.computedEye,g=this.computedUp,w=Math.exp(this.computedRadius[0]);b[0]=c[0]+w*m[2],b[1]=c[1]+w*m[6],b[2]=c[2]+w*m[10],g[0]=m[1],g[1]=m[5],g[2]=m[9];for(var _=0;_<3;++_){for(var T=0,k=0;k<3;++k)T+=m[_+4*k]*b[k];m[12+_]=-T}},f.getMatrix=function(d,v){this.recalcMatrix(d);var m=this.computedMatrix;if(v){for(var c=0;c<16;++c)v[c]=m[c];return v}return m},f.idle=function(d){this.center.idle(d),this.radius.idle(d),this.rotation.idle(d)},f.flush=function(d){this.center.flush(d),this.radius.flush(d),this.rotation.flush(d)},f.pan=function(d,v,m,c){v=v||0,m=m||0,c=c||0,this.recalcMatrix(d);var b=this.computedMatrix,g=b[1],w=b[5],_=b[9],T=h(g,w,_);g/=T,w/=T,_/=T;var k=b[0],L=b[4],M=b[8],I=k*g+L*w+M*_,P=h(k-=g*I,L-=w*I,M-=_*I);k/=P,L/=P,M/=P,b[2],b[6],b[10];var S=k*v+g*m,E=L*v+w*m,D=M*v+_*m;this.center.move(d,S,E,D);var F=Math.exp(this.computedRadius[0]);F=Math.max(1e-4,F+c),this.radius.set(d,Math.log(F))},f.rotate=function(d,v,m,c){this.recalcMatrix(d),v=v||0,m=m||0;var b=this.computedMatrix,g=b[0],w=b[4],_=b[8],T=b[1],k=b[5],L=b[9],M=b[2],I=b[6],P=b[10],S=v*g+m*T,E=v*w+m*k,D=v*_+m*L,F=-(I*D-P*E),H=-(P*S-M*D),V=-(M*E-I*S),Q=Math.sqrt(Math.max(0,1-Math.pow(F,2)-Math.pow(H,2)-Math.pow(V,2))),K=s(F,H,V,Q);K>1e-6?(F/=K,H/=K,V/=K,Q/=K):(F=H=V=0,Q=1);var Z=this.computedRotation,$=Z[0],re=Z[1],R=Z[2],N=Z[3],U=$*Q+N*F+re*V-R*H,te=re*Q+N*H+R*F-$*V,j=R*Q+N*V+$*H-re*F,Y=N*Q-$*F-re*H-R*V;if(c){F=M,H=I,V=P;var J=Math.sin(c)/h(F,H,V);F*=J,H*=J,V*=J,Y=Y*(Q=Math.cos(v))-(U=U*Q+Y*F+te*V-j*H)*F-(te=te*Q+Y*H+j*F-U*V)*H-(j=j*Q+Y*V+U*H-te*F)*V}var ee=s(U,te,j,Y);ee>1e-6?(U/=ee,te/=ee,j/=ee,Y/=ee):(U=te=j=0,Y=1),this.rotation.set(d,U,te,j,Y)},f.lookAt=function(d,v,m,c){this.recalcMatrix(d),m=m||this.computedCenter,v=v||this.computedEye,c=c||this.computedUp;var b=this.computedMatrix;r(b,v,m,c);var g=this.computedRotation;n(g,b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]),a(g,g),this.rotation.set(d,g[0],g[1],g[2],g[3]);for(var w=0,_=0;_<3;++_)w+=Math.pow(m[_]-v[_],2);this.radius.set(d,.5*Math.log(Math.max(w,1e-6))),this.center.set(d,m[0],m[1],m[2])},f.translate=function(d,v,m,c){this.center.move(d,v||0,m||0,c||0)},f.setMatrix=function(d,v){var m=this.computedRotation;n(m,v[0],v[1],v[2],v[4],v[5],v[6],v[8],v[9],v[10]),a(m,m),this.rotation.set(d,m[0],m[1],m[2],m[3]);var c=this.computedMatrix;i(c,v);var b=c[15];if(Math.abs(b)>1e-6){var g=c[12]/b,w=c[13]/b,_=c[14]/b;this.recalcMatrix(d);var T=Math.exp(this.computedRadius[0]);this.center.set(d,g-c[2]*T,w-c[6]*T,_-c[10]*T),this.radius.idle(d)}else this.center.idle(d),this.radius.idle(d)},f.setDistance=function(d,v){v>0&&this.radius.set(d,Math.log(v))},f.setDistanceLimits=function(d,v){d=d>0?Math.log(d):-1/0,v=v>0?Math.log(v):1/0,v=Math.max(v,d),this.radius.bounds[0][0]=d,this.radius.bounds[1][0]=v},f.getDistanceLimits=function(d){var v=this.radius.bounds;return d?(d[0]=Math.exp(v[0][0]),d[1]=Math.exp(v[1][0]),d):[Math.exp(v[0][0]),Math.exp(v[1][0])]},f.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},f.fromJSON=function(d){var v=this.lastT(),m=d.center;m&&this.center.set(v,m[0],m[1],m[2]);var c=d.rotation;c&&this.rotation.set(v,c[0],c[1],c[2],c[3]);var b=d.distance;b&&b>0&&this.radius.set(v,Math.log(b)),this.setDistanceLimits(d.zoomMin,d.zoomMax)}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(p,x,y){var e=p("repeat-string");x.exports=function(r,t,i){return e(i=i!==void 0?i+"":" ",t)+r}},{"repeat-string":277}],265:[function(p,x,y){x.exports=function(e,r){r||(r=[0,""]),e=String(e);var t=parseFloat(e,10);return r[0]=t,r[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",r}},{}],266:[function(p,x,y){x.exports=function(r,t){for(var i=0|t.length,n=r.length,h=[new Array(i),new Array(i)],s=0;s<i;++s)h[0][s]=[],h[1][s]=[];for(s=0;s<n;++s){var a=r[s];h[0][a[0]].push(a),h[1][a[1]].push(a)}var l=[];for(s=0;s<i;++s)h[0][s].length+h[1][s].length===0&&l.push([s]);function f(w,_){var T=h[_][w[_]];T.splice(T.indexOf(w),1)}function d(w,_,T){for(var k,L,M,I=0;I<2;++I)if(h[I][_].length>0){k=h[I][_][0],M=I;break}L=k[1^M];for(var P=0;P<2;++P)for(var S=h[P][_],E=0;E<S.length;++E){var D=S[E],F=D[1^P];e(t[w],t[_],t[L],t[F])>0&&(k=D,L=F,M=P)}return T||k&&f(k,M),L}function v(w,_){var T=h[_][w][0],k=[w];f(T,_);for(var L=T[1^_];;){for(;L!==w;)k.push(L),L=d(k[k.length-2],L,!1);if(h[0][w].length+h[1][w].length===0)break;var M=k[k.length-1],I=w,P=k[1],S=d(M,I,!0);if(e(t[M],t[I],t[P],t[S])<0)break;k.push(w),L=d(M,I)}return k}function m(w,_){return _[1]===_[_.length-1]}for(s=0;s<i;++s)for(var c=0;c<2;++c){for(var b=[];h[c][s].length>0;){h[0][s].length;var g=v(s,c);m(0,g)?b.push.apply(b,g):(b.length>0&&l.push(b),b=g)}b.length>0&&l.push(b)}return l};var e=p("compare-angle")},{"compare-angle":54}],267:[function(p,x,y){x.exports=function(r,t){for(var i=e(r,t.length),n=new Array(t.length),h=new Array(t.length),s=[],a=0;a<t.length;++a){var l=i[a].length;h[a]=l,n[a]=!0,l<=1&&s.push(a)}for(;s.length>0;){var f=s.pop();n[f]=!1;var d=i[f];for(a=0;a<d.length;++a){var v=d[a];--h[v]==0&&s.push(v)}}var m=new Array(t.length),c=[];for(a=0;a<t.length;++a)n[a]?(f=c.length,m[a]=f,c.push(t[a])):m[a]=-1;var b=[];for(a=0;a<r.length;++a){var g=r[a];n[g[0]]&&n[g[1]]&&b.push([m[g[0]],m[g[1]]])}return[b,c]};var e=p("edges-to-adjacency-list")},{"edges-to-adjacency-list":66}],268:[function(p,x,y){x.exports=function(l,f){var d=s(l,f);l=d[0];for(var v=(f=d[1]).length,m=(l.length,e(l,f.length)),c=0;c<v;++c)if(m[c].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var b=r(l,f),g=(b=b.filter(function(oe){for(var he=oe.length,le=[0],de=0;de<he;++de){var xe=f[oe[de]],we=f[oe[(de+1)%he]],be=i(-xe[0],xe[1]),Ae=i(-xe[0],we[1]),fe=i(we[0],xe[1]),me=i(we[0],we[1]);le=n(le,n(n(be,Ae),n(fe,me)))}return le[le.length-1]>0})).length,w=new Array(g),_=new Array(g);for(c=0;c<g;++c){w[c]=c;var T=new Array(g),k=b[c].map(function(oe){return f[oe]}),L=t([k]),M=0;e:for(var I=0;I<g;++I)if(T[I]=0,c!==I){for(var P=(ne=b[I]).length,S=0;S<P;++S){var E=L(f[ne[S]]);if(E!==0){E<0&&(T[I]=1,M+=1);continue e}}T[I]=1,M+=1}_[c]=[M,c,T]}for(_.sort(function(oe,he){return he[0]-oe[0]}),c=0;c<g;++c){var D=(T=_[c])[1],F=T[2];for(I=0;I<g;++I)F[I]&&(w[I]=D)}var H=function(oe){for(var he=new Array(oe),le=0;le<oe;++le)he[le]=[];return he}(g);for(c=0;c<g;++c)H[c].push(w[c]),H[w[c]].push(c);var V={},Q=a(v,!1);for(c=0;c<g;++c)for(P=(ne=b[c]).length,I=0;I<P;++I){var K=ne[I],Z=ne[(I+1)%P],$=Math.min(K,Z)+":"+Math.max(K,Z);if($ in V){var re=V[$];H[re].push(c),H[c].push(re),Q[K]=Q[Z]=!0}else V[$]=c}function R(oe){for(var he=oe.length,le=0;le<he;++le)if(!Q[oe[le]])return!1;return!0}var N=[],U=a(g,-1);for(c=0;c<g;++c)w[c]!==c||R(b[c])?U[c]=-1:(N.push(c),U[c]=0);for(d=[];N.length>0;){var te=N.pop(),j=H[te];h(j,function(oe,he){return oe-he});var Y,J=j.length,ee=U[te];if(ee===0){var ne=b[te];Y=[ne]}for(c=0;c<J;++c){var se=j[c];U[se]>=0||(U[se]=1^ee,N.push(se),ee===0&&(R(ne=b[se])||(ne.reverse(),Y.push(ne))))}ee===0&&d.push(Y)}return d};var e=p("edges-to-adjacency-list"),r=p("planar-dual"),t=p("point-in-big-polygon"),i=p("two-product"),n=p("robust-sum"),h=p("uniq"),s=p("./lib/trim-leaves");function a(l,f){for(var d=new Array(l),v=0;v<l;++v)d[v]=f;return d}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(p,x,y){x.exports=function(a){for(var l=a.length,f=[],d=[],v=0;v<l;++v)for(var m=a[v],c=m.length,b=c-1,g=0;g<c;b=g++){var w=m[b],_=m[g];w[0]===_[0]?d.push([w,_]):f.push([w,_])}if(f.length===0)return d.length===0?s:(T=h(d),function(M){return T(M[0],M[1])?0:1});var T,k=r(f),L=function(M,I){return function(P){var S=i.le(I,P[0]);if(S<0)return 1;var E=M[S];if(!E){if(!(S>0&&I[S]===P[0]))return 1;E=M[S-1]}for(var D=1;E;){var F=E.key,H=e(P,F[0],F[1]);if(F[0][0]<F[1][0])if(H<0)E=E.left;else{if(!(H>0))return 0;D=-1,E=E.right}else if(H>0)E=E.left;else{if(!(H<0))return 0;D=1,E=E.right}}return D}}(k.slabs,k.coordinates);return d.length===0?L:function(M,I){return function(P){return M(P[0],P[1])?0:I(P)}}(h(d),L)};var e=p("robust-orientation")[3],r=p("slab-decomposition"),t=p("interval-tree-1d"),i=p("binary-search-bounds");function n(){return!0}function h(a){for(var l={},f=0;f<a.length;++f){var d=a[f],v=d[0][0],m=d[0][1],c=d[1][1],b=[Math.min(m,c),Math.max(m,c)];v in l?l[v].push(b):l[v]=[b]}var g={},w=Object.keys(l);for(f=0;f<w.length;++f){var _=l[w[f]];g[w[f]]=t(_)}return function(T){return function(k,L){var M=T[k];return!!M&&!!M.queryPoint(L,n)}}(g)}function s(a){return 1}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(p,x,y){var e=new Float64Array(4),r=new Float64Array(4),t=new Float64Array(4);x.exports=function(i,n,h,s,a){e.length<s.length&&(e=new Float64Array(s.length),r=new Float64Array(s.length),t=new Float64Array(s.length));for(var l=0;l<s.length;++l)e[l]=i[l]-s[l],r[l]=n[l]-i[l],t[l]=h[l]-i[l];var f=0,d=0,v=0,m=0,c=0,b=0;for(l=0;l<s.length;++l){var g=r[l],w=t[l],_=e[l];f+=g*g,d+=g*w,v+=w*w,m+=_*g,c+=_*w,b+=_*_}var T,k,L,M,I,P=Math.abs(f*v-d*d),S=d*c-v*m,E=d*m-f*c;if(S+E<=P)if(S<0)E<0&&m<0?(E=0,-m>=f?(S=1,T=f+2*m+b):T=m*(S=-m/f)+b):(S=0,c>=0?(E=0,T=b):-c>=v?(E=1,T=v+2*c+b):T=c*(E=-c/v)+b);else if(E<0)E=0,m>=0?(S=0,T=b):-m>=f?(S=1,T=f+2*m+b):T=m*(S=-m/f)+b;else{var D=1/P;T=(S*=D)*(f*S+d*(E*=D)+2*m)+E*(d*S+v*E+2*c)+b}else S<0?(L=v+c)>(k=d+m)?(M=L-k)>=(I=f-2*d+v)?(S=1,E=0,T=f+2*m+b):T=(S=M/I)*(f*S+d*(E=1-S)+2*m)+E*(d*S+v*E+2*c)+b:(S=0,L<=0?(E=1,T=v+2*c+b):c>=0?(E=0,T=b):T=c*(E=-c/v)+b):E<0?(L=f+m)>(k=d+c)?(M=L-k)>=(I=f-2*d+v)?(E=1,S=0,T=v+2*c+b):T=(S=1-(E=M/I))*(f*S+d*E+2*m)+E*(d*S+v*E+2*c)+b:(E=0,L<=0?(S=1,T=f+2*m+b):m>=0?(S=0,T=b):T=m*(S=-m/f)+b):(M=v+c-d-m)<=0?(S=0,E=1,T=v+2*c+b):M>=(I=f-2*d+v)?(S=1,E=0,T=f+2*m+b):T=(S=M/I)*(f*S+d*(E=1-S)+2*m)+E*(d*S+v*E+2*c)+b;var F=1-S-E;for(l=0;l<s.length;++l)a[l]=F*i[l]+S*n[l]+E*h[l];return T<0?0:T}},{}],271:[function(p,x,y){x.exports=p("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(p,x,y){var e=p("big-rat/add");x.exports=function(r,t){for(var i=r.length,n=new Array(i),h=0;h<i;++h)n[h]=e(r[h],t[h]);return n}},{"big-rat/add":15}],273:[function(p,x,y){x.exports=function(r){for(var t=new Array(r.length),i=0;i<r.length;++i)t[i]=e(r[i]);return t};var e=p("big-rat")},{"big-rat":18}],274:[function(p,x,y){var e=p("big-rat"),r=p("big-rat/mul");x.exports=function(t,i){for(var n=e(i),h=t.length,s=new Array(h),a=0;a<h;++a)s[a]=r(t[a],n);return s}},{"big-rat":18,"big-rat/mul":27}],275:[function(p,x,y){var e=p("big-rat/sub");x.exports=function(r,t){for(var i=r.length,n=new Array(i),h=0;h<i;++h)n[h]=e(r[h],t[h]);return n}},{"big-rat/sub":29}],276:[function(p,x,y){var e=p("compare-cell"),r=p("compare-oriented-cell"),t=p("cell-orientation");x.exports=function(i){i.sort(r);for(var n=i.length,h=0,s=0;s<n;++s){var a=i[s],l=t(a);if(l!==0){if(h>0){var f=i[h-1];if(e(a,f)===0&&t(f)!==l){h-=1;continue}}i[h++]=a}}return i.length=h,i}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(p,x,y){var e,r="";x.exports=function(t,i){if(typeof t!="string")throw new TypeError("expected a string");if(i===1)return t;if(i===2)return t+t;var n=t.length*i;if(e!==t||e===void 0)e=t,r="";else if(r.length>=n)return r.substr(0,n);for(;n>r.length&&i>1;)1&i&&(r+=t),i>>=1,t+=t;return r=(r+=t).substr(0,n)}},{}],278:[function(p,x,y){(function(e){(function(){x.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,o!==void 0?o:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],279:[function(p,x,y){x.exports=function(e){for(var r=e.length,t=e[e.length-1],i=r,n=r-2;n>=0;--n){var h=t,s=e[n];(l=s-((t=h+s)-h))&&(e[--i]=t,t=l)}var a=0;for(n=i;n<r;++n){var l;h=e[n],(l=(s=t)-((t=h+s)-h))&&(e[a++]=l)}return e[a++]=t,e.length=a,e}},{}],280:[function(p,x,y){var e=p("two-product"),r=p("robust-sum"),t=p("robust-scale"),i=p("robust-compress");function n(f,d,v,m){return function(c){return m(f(v(c[0][0],c[1][1]),v(-c[0][1],c[1][0])))}}function h(f,d,v,m){return function(c){return m(f(d(f(v(c[1][1],c[2][2]),v(-c[1][2],c[2][1])),c[0][0]),f(d(f(v(c[1][0],c[2][2]),v(-c[1][2],c[2][0])),-c[0][1]),d(f(v(c[1][0],c[2][1]),v(-c[1][1],c[2][0])),c[0][2]))))}}function s(f){return(f===2?n:f===3?h:void 0)(r,t,e,i)}var a=[function(){return[0]},function(f){return[f[0][0]]}];function l(f,d,v,m,c,b){return function(g){switch(g.length){case 0:return f(g);case 1:return d(g);case 2:return v(g);case 3:return m(g)}var w=c[g.length];return w||(w=c[g.length]=b(g.length)),w(g)}}(function(){for(;a.length<4;)a.push(s(a.length));x.exports=l.apply(void 0,a.concat([a,s]));for(var f=0;f<a.length;++f)x.exports[f]=a[f]})()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(p,x,y){var e=p("two-product"),r=p("robust-sum");x.exports=function(t,i){for(var n=e(t[0],i[0]),h=1;h<t.length;++h)n=r(n,e(t[h],i[h]));return n}},{"robust-sum":289,"two-product":306}],282:[function(p,x,y){var e=p("two-product"),r=p("robust-sum"),t=p("robust-subtract"),i=p("robust-scale");function n(m){return(m===3?h:m===4?s:m===5?a:l)(r,t,e,i)}function h(m,c,b,g){return function(w,_,T){var k=b(w[0],w[0]),L=g(k,_[0]),M=g(k,T[0]),I=b(_[0],_[0]),P=g(I,w[0]),S=g(I,T[0]),E=b(T[0],T[0]),D=g(E,w[0]),F=g(E,_[0]),H=m(c(F,S),c(P,L)),V=c(D,M),Q=c(H,V);return Q[Q.length-1]}}function s(m,c,b,g){return function(w,_,T,k){var L=m(b(w[0],w[0]),b(w[1],w[1])),M=g(L,_[0]),I=g(L,T[0]),P=g(L,k[0]),S=m(b(_[0],_[0]),b(_[1],_[1])),E=g(S,w[0]),D=g(S,T[0]),F=g(S,k[0]),H=m(b(T[0],T[0]),b(T[1],T[1])),V=g(H,w[0]),Q=g(H,_[0]),K=g(H,k[0]),Z=m(b(k[0],k[0]),b(k[1],k[1])),$=g(Z,w[0]),re=g(Z,_[0]),R=g(Z,T[0]),N=m(m(g(c(R,K),_[1]),m(g(c(re,F),-T[1]),g(c(Q,D),k[1]))),m(g(c(re,F),w[1]),m(g(c($,P),-_[1]),g(c(E,M),k[1])))),U=m(m(g(c(R,K),w[1]),m(g(c($,P),-T[1]),g(c(V,I),k[1]))),m(g(c(Q,D),w[1]),m(g(c(V,I),-_[1]),g(c(E,M),T[1])))),te=c(N,U);return te[te.length-1]}}function a(m,c,b,g){return function(w,_,T,k,L){var M=m(b(w[0],w[0]),m(b(w[1],w[1]),b(w[2],w[2]))),I=g(M,_[0]),P=g(M,T[0]),S=g(M,k[0]),E=g(M,L[0]),D=m(b(_[0],_[0]),m(b(_[1],_[1]),b(_[2],_[2]))),F=g(D,w[0]),H=g(D,T[0]),V=g(D,k[0]),Q=g(D,L[0]),K=m(b(T[0],T[0]),m(b(T[1],T[1]),b(T[2],T[2]))),Z=g(K,w[0]),$=g(K,_[0]),re=g(K,k[0]),R=g(K,L[0]),N=m(b(k[0],k[0]),m(b(k[1],k[1]),b(k[2],k[2]))),U=g(N,w[0]),te=g(N,_[0]),j=g(N,T[0]),Y=g(N,L[0]),J=m(b(L[0],L[0]),m(b(L[1],L[1]),b(L[2],L[2]))),ee=g(J,w[0]),ne=g(J,_[0]),se=g(J,T[0]),oe=g(J,k[0]),he=m(m(m(g(m(g(c(oe,Y),T[1]),m(g(c(se,R),-k[1]),g(c(j,re),L[1]))),_[2]),m(g(m(g(c(oe,Y),_[1]),m(g(c(ne,Q),-k[1]),g(c(te,V),L[1]))),-T[2]),g(m(g(c(se,R),_[1]),m(g(c(ne,Q),-T[1]),g(c($,H),L[1]))),k[2]))),m(g(m(g(c(j,re),_[1]),m(g(c(te,V),-T[1]),g(c($,H),k[1]))),-L[2]),m(g(m(g(c(oe,Y),_[1]),m(g(c(ne,Q),-k[1]),g(c(te,V),L[1]))),w[2]),g(m(g(c(oe,Y),w[1]),m(g(c(ee,E),-k[1]),g(c(U,S),L[1]))),-_[2])))),m(m(g(m(g(c(ne,Q),w[1]),m(g(c(ee,E),-_[1]),g(c(F,I),L[1]))),k[2]),m(g(m(g(c(te,V),w[1]),m(g(c(U,S),-_[1]),g(c(F,I),k[1]))),-L[2]),g(m(g(c(j,re),_[1]),m(g(c(te,V),-T[1]),g(c($,H),k[1]))),w[2]))),m(g(m(g(c(j,re),w[1]),m(g(c(U,S),-T[1]),g(c(Z,P),k[1]))),-_[2]),m(g(m(g(c(te,V),w[1]),m(g(c(U,S),-_[1]),g(c(F,I),k[1]))),T[2]),g(m(g(c($,H),w[1]),m(g(c(Z,P),-_[1]),g(c(F,I),T[1]))),-k[2]))))),le=m(m(m(g(m(g(c(oe,Y),T[1]),m(g(c(se,R),-k[1]),g(c(j,re),L[1]))),w[2]),g(m(g(c(oe,Y),w[1]),m(g(c(ee,E),-k[1]),g(c(U,S),L[1]))),-T[2])),m(g(m(g(c(se,R),w[1]),m(g(c(ee,E),-T[1]),g(c(Z,P),L[1]))),k[2]),g(m(g(c(j,re),w[1]),m(g(c(U,S),-T[1]),g(c(Z,P),k[1]))),-L[2]))),m(m(g(m(g(c(se,R),_[1]),m(g(c(ne,Q),-T[1]),g(c($,H),L[1]))),w[2]),g(m(g(c(se,R),w[1]),m(g(c(ee,E),-T[1]),g(c(Z,P),L[1]))),-_[2])),m(g(m(g(c(ne,Q),w[1]),m(g(c(ee,E),-_[1]),g(c(F,I),L[1]))),T[2]),g(m(g(c($,H),w[1]),m(g(c(Z,P),-_[1]),g(c(F,I),T[1]))),-L[2])))),de=c(he,le);return de[de.length-1]}}function l(m,c,b,g){return function(w,_,T,k,L,M){var I=m(m(b(w[0],w[0]),b(w[1],w[1])),m(b(w[2],w[2]),b(w[3],w[3]))),P=g(I,_[0]),S=g(I,T[0]),E=g(I,k[0]),D=g(I,L[0]),F=g(I,M[0]),H=m(m(b(_[0],_[0]),b(_[1],_[1])),m(b(_[2],_[2]),b(_[3],_[3]))),V=g(H,w[0]),Q=g(H,T[0]),K=g(H,k[0]),Z=g(H,L[0]),$=g(H,M[0]),re=m(m(b(T[0],T[0]),b(T[1],T[1])),m(b(T[2],T[2]),b(T[3],T[3]))),R=g(re,w[0]),N=g(re,_[0]),U=g(re,k[0]),te=g(re,L[0]),j=g(re,M[0]),Y=m(m(b(k[0],k[0]),b(k[1],k[1])),m(b(k[2],k[2]),b(k[3],k[3]))),J=g(Y,w[0]),ee=g(Y,_[0]),ne=g(Y,T[0]),se=g(Y,L[0]),oe=g(Y,M[0]),he=m(m(b(L[0],L[0]),b(L[1],L[1])),m(b(L[2],L[2]),b(L[3],L[3]))),le=g(he,w[0]),de=g(he,_[0]),xe=g(he,T[0]),we=g(he,k[0]),be=g(he,M[0]),Ae=m(m(b(M[0],M[0]),b(M[1],M[1])),m(b(M[2],M[2]),b(M[3],M[3]))),fe=g(Ae,w[0]),me=g(Ae,_[0]),ke=g(Ae,T[0]),Te=g(Ae,k[0]),Me=g(Ae,L[0]),Oe=m(m(m(g(m(m(g(m(g(c(Me,be),k[1]),m(g(c(Te,oe),-L[1]),g(c(we,se),M[1]))),T[2]),g(m(g(c(Me,be),T[1]),m(g(c(ke,j),-L[1]),g(c(xe,te),M[1]))),-k[2])),m(g(m(g(c(Te,oe),T[1]),m(g(c(ke,j),-k[1]),g(c(ne,U),M[1]))),L[2]),g(m(g(c(we,se),T[1]),m(g(c(xe,te),-k[1]),g(c(ne,U),L[1]))),-M[2]))),_[3]),m(g(m(m(g(m(g(c(Me,be),k[1]),m(g(c(Te,oe),-L[1]),g(c(we,se),M[1]))),_[2]),g(m(g(c(Me,be),_[1]),m(g(c(me,$),-L[1]),g(c(de,Z),M[1]))),-k[2])),m(g(m(g(c(Te,oe),_[1]),m(g(c(me,$),-k[1]),g(c(ee,K),M[1]))),L[2]),g(m(g(c(we,se),_[1]),m(g(c(de,Z),-k[1]),g(c(ee,K),L[1]))),-M[2]))),-T[3]),g(m(m(g(m(g(c(Me,be),T[1]),m(g(c(ke,j),-L[1]),g(c(xe,te),M[1]))),_[2]),g(m(g(c(Me,be),_[1]),m(g(c(me,$),-L[1]),g(c(de,Z),M[1]))),-T[2])),m(g(m(g(c(ke,j),_[1]),m(g(c(me,$),-T[1]),g(c(N,Q),M[1]))),L[2]),g(m(g(c(xe,te),_[1]),m(g(c(de,Z),-T[1]),g(c(N,Q),L[1]))),-M[2]))),k[3]))),m(m(g(m(m(g(m(g(c(Te,oe),T[1]),m(g(c(ke,j),-k[1]),g(c(ne,U),M[1]))),_[2]),g(m(g(c(Te,oe),_[1]),m(g(c(me,$),-k[1]),g(c(ee,K),M[1]))),-T[2])),m(g(m(g(c(ke,j),_[1]),m(g(c(me,$),-T[1]),g(c(N,Q),M[1]))),k[2]),g(m(g(c(ne,U),_[1]),m(g(c(ee,K),-T[1]),g(c(N,Q),k[1]))),-M[2]))),-L[3]),g(m(m(g(m(g(c(we,se),T[1]),m(g(c(xe,te),-k[1]),g(c(ne,U),L[1]))),_[2]),g(m(g(c(we,se),_[1]),m(g(c(de,Z),-k[1]),g(c(ee,K),L[1]))),-T[2])),m(g(m(g(c(xe,te),_[1]),m(g(c(de,Z),-T[1]),g(c(N,Q),L[1]))),k[2]),g(m(g(c(ne,U),_[1]),m(g(c(ee,K),-T[1]),g(c(N,Q),k[1]))),-L[2]))),M[3])),m(g(m(m(g(m(g(c(Me,be),k[1]),m(g(c(Te,oe),-L[1]),g(c(we,se),M[1]))),_[2]),g(m(g(c(Me,be),_[1]),m(g(c(me,$),-L[1]),g(c(de,Z),M[1]))),-k[2])),m(g(m(g(c(Te,oe),_[1]),m(g(c(me,$),-k[1]),g(c(ee,K),M[1]))),L[2]),g(m(g(c(we,se),_[1]),m(g(c(de,Z),-k[1]),g(c(ee,K),L[1]))),-M[2]))),w[3]),g(m(m(g(m(g(c(Me,be),k[1]),m(g(c(Te,oe),-L[1]),g(c(we,se),M[1]))),w[2]),g(m(g(c(Me,be),w[1]),m(g(c(fe,F),-L[1]),g(c(le,D),M[1]))),-k[2])),m(g(m(g(c(Te,oe),w[1]),m(g(c(fe,F),-k[1]),g(c(J,E),M[1]))),L[2]),g(m(g(c(we,se),w[1]),m(g(c(le,D),-k[1]),g(c(J,E),L[1]))),-M[2]))),-_[3])))),m(m(m(g(m(m(g(m(g(c(Me,be),_[1]),m(g(c(me,$),-L[1]),g(c(de,Z),M[1]))),w[2]),g(m(g(c(Me,be),w[1]),m(g(c(fe,F),-L[1]),g(c(le,D),M[1]))),-_[2])),m(g(m(g(c(me,$),w[1]),m(g(c(fe,F),-_[1]),g(c(V,P),M[1]))),L[2]),g(m(g(c(de,Z),w[1]),m(g(c(le,D),-_[1]),g(c(V,P),L[1]))),-M[2]))),k[3]),g(m(m(g(m(g(c(Te,oe),_[1]),m(g(c(me,$),-k[1]),g(c(ee,K),M[1]))),w[2]),g(m(g(c(Te,oe),w[1]),m(g(c(fe,F),-k[1]),g(c(J,E),M[1]))),-_[2])),m(g(m(g(c(me,$),w[1]),m(g(c(fe,F),-_[1]),g(c(V,P),M[1]))),k[2]),g(m(g(c(ee,K),w[1]),m(g(c(J,E),-_[1]),g(c(V,P),k[1]))),-M[2]))),-L[3])),m(g(m(m(g(m(g(c(we,se),_[1]),m(g(c(de,Z),-k[1]),g(c(ee,K),L[1]))),w[2]),g(m(g(c(we,se),w[1]),m(g(c(le,D),-k[1]),g(c(J,E),L[1]))),-_[2])),m(g(m(g(c(de,Z),w[1]),m(g(c(le,D),-_[1]),g(c(V,P),L[1]))),k[2]),g(m(g(c(ee,K),w[1]),m(g(c(J,E),-_[1]),g(c(V,P),k[1]))),-L[2]))),M[3]),g(m(m(g(m(g(c(Te,oe),T[1]),m(g(c(ke,j),-k[1]),g(c(ne,U),M[1]))),_[2]),g(m(g(c(Te,oe),_[1]),m(g(c(me,$),-k[1]),g(c(ee,K),M[1]))),-T[2])),m(g(m(g(c(ke,j),_[1]),m(g(c(me,$),-T[1]),g(c(N,Q),M[1]))),k[2]),g(m(g(c(ne,U),_[1]),m(g(c(ee,K),-T[1]),g(c(N,Q),k[1]))),-M[2]))),w[3]))),m(m(g(m(m(g(m(g(c(Te,oe),T[1]),m(g(c(ke,j),-k[1]),g(c(ne,U),M[1]))),w[2]),g(m(g(c(Te,oe),w[1]),m(g(c(fe,F),-k[1]),g(c(J,E),M[1]))),-T[2])),m(g(m(g(c(ke,j),w[1]),m(g(c(fe,F),-T[1]),g(c(R,S),M[1]))),k[2]),g(m(g(c(ne,U),w[1]),m(g(c(J,E),-T[1]),g(c(R,S),k[1]))),-M[2]))),-_[3]),g(m(m(g(m(g(c(Te,oe),_[1]),m(g(c(me,$),-k[1]),g(c(ee,K),M[1]))),w[2]),g(m(g(c(Te,oe),w[1]),m(g(c(fe,F),-k[1]),g(c(J,E),M[1]))),-_[2])),m(g(m(g(c(me,$),w[1]),m(g(c(fe,F),-_[1]),g(c(V,P),M[1]))),k[2]),g(m(g(c(ee,K),w[1]),m(g(c(J,E),-_[1]),g(c(V,P),k[1]))),-M[2]))),T[3])),m(g(m(m(g(m(g(c(ke,j),_[1]),m(g(c(me,$),-T[1]),g(c(N,Q),M[1]))),w[2]),g(m(g(c(ke,j),w[1]),m(g(c(fe,F),-T[1]),g(c(R,S),M[1]))),-_[2])),m(g(m(g(c(me,$),w[1]),m(g(c(fe,F),-_[1]),g(c(V,P),M[1]))),T[2]),g(m(g(c(N,Q),w[1]),m(g(c(R,S),-_[1]),g(c(V,P),T[1]))),-M[2]))),-k[3]),g(m(m(g(m(g(c(ne,U),_[1]),m(g(c(ee,K),-T[1]),g(c(N,Q),k[1]))),w[2]),g(m(g(c(ne,U),w[1]),m(g(c(J,E),-T[1]),g(c(R,S),k[1]))),-_[2])),m(g(m(g(c(ee,K),w[1]),m(g(c(J,E),-_[1]),g(c(V,P),k[1]))),T[2]),g(m(g(c(N,Q),w[1]),m(g(c(R,S),-_[1]),g(c(V,P),T[1]))),-k[2]))),M[3]))))),Fe=m(m(m(g(m(m(g(m(g(c(Me,be),k[1]),m(g(c(Te,oe),-L[1]),g(c(we,se),M[1]))),T[2]),g(m(g(c(Me,be),T[1]),m(g(c(ke,j),-L[1]),g(c(xe,te),M[1]))),-k[2])),m(g(m(g(c(Te,oe),T[1]),m(g(c(ke,j),-k[1]),g(c(ne,U),M[1]))),L[2]),g(m(g(c(we,se),T[1]),m(g(c(xe,te),-k[1]),g(c(ne,U),L[1]))),-M[2]))),w[3]),m(g(m(m(g(m(g(c(Me,be),k[1]),m(g(c(Te,oe),-L[1]),g(c(we,se),M[1]))),w[2]),g(m(g(c(Me,be),w[1]),m(g(c(fe,F),-L[1]),g(c(le,D),M[1]))),-k[2])),m(g(m(g(c(Te,oe),w[1]),m(g(c(fe,F),-k[1]),g(c(J,E),M[1]))),L[2]),g(m(g(c(we,se),w[1]),m(g(c(le,D),-k[1]),g(c(J,E),L[1]))),-M[2]))),-T[3]),g(m(m(g(m(g(c(Me,be),T[1]),m(g(c(ke,j),-L[1]),g(c(xe,te),M[1]))),w[2]),g(m(g(c(Me,be),w[1]),m(g(c(fe,F),-L[1]),g(c(le,D),M[1]))),-T[2])),m(g(m(g(c(ke,j),w[1]),m(g(c(fe,F),-T[1]),g(c(R,S),M[1]))),L[2]),g(m(g(c(xe,te),w[1]),m(g(c(le,D),-T[1]),g(c(R,S),L[1]))),-M[2]))),k[3]))),m(m(g(m(m(g(m(g(c(Te,oe),T[1]),m(g(c(ke,j),-k[1]),g(c(ne,U),M[1]))),w[2]),g(m(g(c(Te,oe),w[1]),m(g(c(fe,F),-k[1]),g(c(J,E),M[1]))),-T[2])),m(g(m(g(c(ke,j),w[1]),m(g(c(fe,F),-T[1]),g(c(R,S),M[1]))),k[2]),g(m(g(c(ne,U),w[1]),m(g(c(J,E),-T[1]),g(c(R,S),k[1]))),-M[2]))),-L[3]),g(m(m(g(m(g(c(we,se),T[1]),m(g(c(xe,te),-k[1]),g(c(ne,U),L[1]))),w[2]),g(m(g(c(we,se),w[1]),m(g(c(le,D),-k[1]),g(c(J,E),L[1]))),-T[2])),m(g(m(g(c(xe,te),w[1]),m(g(c(le,D),-T[1]),g(c(R,S),L[1]))),k[2]),g(m(g(c(ne,U),w[1]),m(g(c(J,E),-T[1]),g(c(R,S),k[1]))),-L[2]))),M[3])),m(g(m(m(g(m(g(c(Me,be),T[1]),m(g(c(ke,j),-L[1]),g(c(xe,te),M[1]))),_[2]),g(m(g(c(Me,be),_[1]),m(g(c(me,$),-L[1]),g(c(de,Z),M[1]))),-T[2])),m(g(m(g(c(ke,j),_[1]),m(g(c(me,$),-T[1]),g(c(N,Q),M[1]))),L[2]),g(m(g(c(xe,te),_[1]),m(g(c(de,Z),-T[1]),g(c(N,Q),L[1]))),-M[2]))),w[3]),g(m(m(g(m(g(c(Me,be),T[1]),m(g(c(ke,j),-L[1]),g(c(xe,te),M[1]))),w[2]),g(m(g(c(Me,be),w[1]),m(g(c(fe,F),-L[1]),g(c(le,D),M[1]))),-T[2])),m(g(m(g(c(ke,j),w[1]),m(g(c(fe,F),-T[1]),g(c(R,S),M[1]))),L[2]),g(m(g(c(xe,te),w[1]),m(g(c(le,D),-T[1]),g(c(R,S),L[1]))),-M[2]))),-_[3])))),m(m(m(g(m(m(g(m(g(c(Me,be),_[1]),m(g(c(me,$),-L[1]),g(c(de,Z),M[1]))),w[2]),g(m(g(c(Me,be),w[1]),m(g(c(fe,F),-L[1]),g(c(le,D),M[1]))),-_[2])),m(g(m(g(c(me,$),w[1]),m(g(c(fe,F),-_[1]),g(c(V,P),M[1]))),L[2]),g(m(g(c(de,Z),w[1]),m(g(c(le,D),-_[1]),g(c(V,P),L[1]))),-M[2]))),T[3]),g(m(m(g(m(g(c(ke,j),_[1]),m(g(c(me,$),-T[1]),g(c(N,Q),M[1]))),w[2]),g(m(g(c(ke,j),w[1]),m(g(c(fe,F),-T[1]),g(c(R,S),M[1]))),-_[2])),m(g(m(g(c(me,$),w[1]),m(g(c(fe,F),-_[1]),g(c(V,P),M[1]))),T[2]),g(m(g(c(N,Q),w[1]),m(g(c(R,S),-_[1]),g(c(V,P),T[1]))),-M[2]))),-L[3])),m(g(m(m(g(m(g(c(xe,te),_[1]),m(g(c(de,Z),-T[1]),g(c(N,Q),L[1]))),w[2]),g(m(g(c(xe,te),w[1]),m(g(c(le,D),-T[1]),g(c(R,S),L[1]))),-_[2])),m(g(m(g(c(de,Z),w[1]),m(g(c(le,D),-_[1]),g(c(V,P),L[1]))),T[2]),g(m(g(c(N,Q),w[1]),m(g(c(R,S),-_[1]),g(c(V,P),T[1]))),-L[2]))),M[3]),g(m(m(g(m(g(c(we,se),T[1]),m(g(c(xe,te),-k[1]),g(c(ne,U),L[1]))),_[2]),g(m(g(c(we,se),_[1]),m(g(c(de,Z),-k[1]),g(c(ee,K),L[1]))),-T[2])),m(g(m(g(c(xe,te),_[1]),m(g(c(de,Z),-T[1]),g(c(N,Q),L[1]))),k[2]),g(m(g(c(ne,U),_[1]),m(g(c(ee,K),-T[1]),g(c(N,Q),k[1]))),-L[2]))),w[3]))),m(m(g(m(m(g(m(g(c(we,se),T[1]),m(g(c(xe,te),-k[1]),g(c(ne,U),L[1]))),w[2]),g(m(g(c(we,se),w[1]),m(g(c(le,D),-k[1]),g(c(J,E),L[1]))),-T[2])),m(g(m(g(c(xe,te),w[1]),m(g(c(le,D),-T[1]),g(c(R,S),L[1]))),k[2]),g(m(g(c(ne,U),w[1]),m(g(c(J,E),-T[1]),g(c(R,S),k[1]))),-L[2]))),-_[3]),g(m(m(g(m(g(c(we,se),_[1]),m(g(c(de,Z),-k[1]),g(c(ee,K),L[1]))),w[2]),g(m(g(c(we,se),w[1]),m(g(c(le,D),-k[1]),g(c(J,E),L[1]))),-_[2])),m(g(m(g(c(de,Z),w[1]),m(g(c(le,D),-_[1]),g(c(V,P),L[1]))),k[2]),g(m(g(c(ee,K),w[1]),m(g(c(J,E),-_[1]),g(c(V,P),k[1]))),-L[2]))),T[3])),m(g(m(m(g(m(g(c(xe,te),_[1]),m(g(c(de,Z),-T[1]),g(c(N,Q),L[1]))),w[2]),g(m(g(c(xe,te),w[1]),m(g(c(le,D),-T[1]),g(c(R,S),L[1]))),-_[2])),m(g(m(g(c(de,Z),w[1]),m(g(c(le,D),-_[1]),g(c(V,P),L[1]))),T[2]),g(m(g(c(N,Q),w[1]),m(g(c(R,S),-_[1]),g(c(V,P),T[1]))),-L[2]))),-k[3]),g(m(m(g(m(g(c(ne,U),_[1]),m(g(c(ee,K),-T[1]),g(c(N,Q),k[1]))),w[2]),g(m(g(c(ne,U),w[1]),m(g(c(J,E),-T[1]),g(c(R,S),k[1]))),-_[2])),m(g(m(g(c(ee,K),w[1]),m(g(c(J,E),-_[1]),g(c(V,P),k[1]))),T[2]),g(m(g(c(N,Q),w[1]),m(g(c(R,S),-_[1]),g(c(V,P),T[1]))),-k[2]))),L[3]))))),qe=c(Oe,Fe);return qe[qe.length-1]}}var f=[function(){return 0},function(){return 0},function(){return 0}];function d(m){var c=f[m.length];return c||(c=f[m.length]=n(m.length)),c.apply(void 0,m)}function v(m,c,b,g,w,_,T,k){return function(L,M,I,P,S,E){switch(arguments.length){case 0:case 1:return 0;case 2:return g(L,M);case 3:return w(L,M,I);case 4:return _(L,M,I,P);case 5:return T(L,M,I,P,S);case 6:return k(L,M,I,P,S,E)}for(var D=new Array(arguments.length),F=0;F<arguments.length;++F)D[F]=arguments[F];return m(D)}}(function(){for(;f.length<=6;)f.push(n(f.length));x.exports=v.apply(void 0,[d].concat(f));for(var m=0;m<=6;++m)x.exports[m]=f[m]})()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(p,x,y){var e=p("robust-determinant");function r(s){var a=s===2?t:i;return a(s<3?e[s]:e)}function t(s){return function(a,l){return[s([[+l[0],+a[0][1]],[+l[1],+a[1][1]]]),s([[+a[0][0],+l[0]],[+a[1][0],+l[1]]]),s(a)]}}function i(s){return function(a,l){return[s([[+l[0],+a[0][1],+a[0][2]],[+l[1],+a[1][1],+a[1][2]],[+l[2],+a[2][1],+a[2][2]]]),s([[+a[0][0],+l[0],+a[0][2]],[+a[1][0],+l[1],+a[1][2]],[+a[2][0],+l[2],+a[2][2]]]),s([[+a[0][0],+a[0][1],+l[0]],[+a[1][0],+a[1][1],+l[1]],[+a[2][0],+a[2][1],+l[2]]]),s(a)]}}var n=[function(){return[[0]]},function(s,a){return[[a[0]],[s[0][0]]]}];function h(s,a,l,f,d,v){return function(m,c){switch(m.length){case 0:return s(m,c);case 1:return a(m,c);case 2:return l(m,c);case 3:return f(m,c)}var b=d[m.length];return b||(b=d[m.length]=v(m.length)),b(m,c)}}(function(){for(;n.length<=3;)n.push(r(n.length));x.exports=h.apply(void 0,n.concat([n,r]));for(var s=0;s<3;++s)x.exports[s]=n[s]})()},{"robust-determinant":280}],284:[function(p,x,y){var e=p("two-product"),r=p("robust-sum"),t=p("robust-scale"),i=p("robust-subtract");function n(c,b,g,w){return function(_,T,k){var L=c(c(b(T[1],k[0]),b(-k[1],T[0])),c(b(_[1],T[0]),b(-T[1],_[0]))),M=c(b(_[1],k[0]),b(-k[1],_[0])),I=w(L,M);return I[I.length-1]}}function h(c,b,g,w){return function(_,T,k,L){var M=c(c(g(c(b(k[1],L[0]),b(-L[1],k[0])),T[2]),c(g(c(b(T[1],L[0]),b(-L[1],T[0])),-k[2]),g(c(b(T[1],k[0]),b(-k[1],T[0])),L[2]))),c(g(c(b(T[1],L[0]),b(-L[1],T[0])),_[2]),c(g(c(b(_[1],L[0]),b(-L[1],_[0])),-T[2]),g(c(b(_[1],T[0]),b(-T[1],_[0])),L[2])))),I=c(c(g(c(b(k[1],L[0]),b(-L[1],k[0])),_[2]),c(g(c(b(_[1],L[0]),b(-L[1],_[0])),-k[2]),g(c(b(_[1],k[0]),b(-k[1],_[0])),L[2]))),c(g(c(b(T[1],k[0]),b(-k[1],T[0])),_[2]),c(g(c(b(_[1],k[0]),b(-k[1],_[0])),-T[2]),g(c(b(_[1],T[0]),b(-T[1],_[0])),k[2])))),P=w(M,I);return P[P.length-1]}}function s(c,b,g,w){return function(_,T,k,L,M){var I=c(c(c(g(c(g(c(b(L[1],M[0]),b(-M[1],L[0])),k[2]),c(g(c(b(k[1],M[0]),b(-M[1],k[0])),-L[2]),g(c(b(k[1],L[0]),b(-L[1],k[0])),M[2]))),T[3]),c(g(c(g(c(b(L[1],M[0]),b(-M[1],L[0])),T[2]),c(g(c(b(T[1],M[0]),b(-M[1],T[0])),-L[2]),g(c(b(T[1],L[0]),b(-L[1],T[0])),M[2]))),-k[3]),g(c(g(c(b(k[1],M[0]),b(-M[1],k[0])),T[2]),c(g(c(b(T[1],M[0]),b(-M[1],T[0])),-k[2]),g(c(b(T[1],k[0]),b(-k[1],T[0])),M[2]))),L[3]))),c(g(c(g(c(b(k[1],L[0]),b(-L[1],k[0])),T[2]),c(g(c(b(T[1],L[0]),b(-L[1],T[0])),-k[2]),g(c(b(T[1],k[0]),b(-k[1],T[0])),L[2]))),-M[3]),c(g(c(g(c(b(L[1],M[0]),b(-M[1],L[0])),T[2]),c(g(c(b(T[1],M[0]),b(-M[1],T[0])),-L[2]),g(c(b(T[1],L[0]),b(-L[1],T[0])),M[2]))),_[3]),g(c(g(c(b(L[1],M[0]),b(-M[1],L[0])),_[2]),c(g(c(b(_[1],M[0]),b(-M[1],_[0])),-L[2]),g(c(b(_[1],L[0]),b(-L[1],_[0])),M[2]))),-T[3])))),c(c(g(c(g(c(b(T[1],M[0]),b(-M[1],T[0])),_[2]),c(g(c(b(_[1],M[0]),b(-M[1],_[0])),-T[2]),g(c(b(_[1],T[0]),b(-T[1],_[0])),M[2]))),L[3]),c(g(c(g(c(b(T[1],L[0]),b(-L[1],T[0])),_[2]),c(g(c(b(_[1],L[0]),b(-L[1],_[0])),-T[2]),g(c(b(_[1],T[0]),b(-T[1],_[0])),L[2]))),-M[3]),g(c(g(c(b(k[1],L[0]),b(-L[1],k[0])),T[2]),c(g(c(b(T[1],L[0]),b(-L[1],T[0])),-k[2]),g(c(b(T[1],k[0]),b(-k[1],T[0])),L[2]))),_[3]))),c(g(c(g(c(b(k[1],L[0]),b(-L[1],k[0])),_[2]),c(g(c(b(_[1],L[0]),b(-L[1],_[0])),-k[2]),g(c(b(_[1],k[0]),b(-k[1],_[0])),L[2]))),-T[3]),c(g(c(g(c(b(T[1],L[0]),b(-L[1],T[0])),_[2]),c(g(c(b(_[1],L[0]),b(-L[1],_[0])),-T[2]),g(c(b(_[1],T[0]),b(-T[1],_[0])),L[2]))),k[3]),g(c(g(c(b(T[1],k[0]),b(-k[1],T[0])),_[2]),c(g(c(b(_[1],k[0]),b(-k[1],_[0])),-T[2]),g(c(b(_[1],T[0]),b(-T[1],_[0])),k[2]))),-L[3]))))),P=c(c(c(g(c(g(c(b(L[1],M[0]),b(-M[1],L[0])),k[2]),c(g(c(b(k[1],M[0]),b(-M[1],k[0])),-L[2]),g(c(b(k[1],L[0]),b(-L[1],k[0])),M[2]))),_[3]),g(c(g(c(b(L[1],M[0]),b(-M[1],L[0])),_[2]),c(g(c(b(_[1],M[0]),b(-M[1],_[0])),-L[2]),g(c(b(_[1],L[0]),b(-L[1],_[0])),M[2]))),-k[3])),c(g(c(g(c(b(k[1],M[0]),b(-M[1],k[0])),_[2]),c(g(c(b(_[1],M[0]),b(-M[1],_[0])),-k[2]),g(c(b(_[1],k[0]),b(-k[1],_[0])),M[2]))),L[3]),g(c(g(c(b(k[1],L[0]),b(-L[1],k[0])),_[2]),c(g(c(b(_[1],L[0]),b(-L[1],_[0])),-k[2]),g(c(b(_[1],k[0]),b(-k[1],_[0])),L[2]))),-M[3]))),c(c(g(c(g(c(b(k[1],M[0]),b(-M[1],k[0])),T[2]),c(g(c(b(T[1],M[0]),b(-M[1],T[0])),-k[2]),g(c(b(T[1],k[0]),b(-k[1],T[0])),M[2]))),_[3]),g(c(g(c(b(k[1],M[0]),b(-M[1],k[0])),_[2]),c(g(c(b(_[1],M[0]),b(-M[1],_[0])),-k[2]),g(c(b(_[1],k[0]),b(-k[1],_[0])),M[2]))),-T[3])),c(g(c(g(c(b(T[1],M[0]),b(-M[1],T[0])),_[2]),c(g(c(b(_[1],M[0]),b(-M[1],_[0])),-T[2]),g(c(b(_[1],T[0]),b(-T[1],_[0])),M[2]))),k[3]),g(c(g(c(b(T[1],k[0]),b(-k[1],T[0])),_[2]),c(g(c(b(_[1],k[0]),b(-k[1],_[0])),-T[2]),g(c(b(_[1],T[0]),b(-T[1],_[0])),k[2]))),-M[3])))),S=w(I,P);return S[S.length-1]}}function a(c){return(c===3?n:c===4?h:s)(r,e,t,i)}var l=a(3),f=a(4),d=[function(){return 0},function(){return 0},function(c,b){return b[0]-c[0]},function(c,b,g){var w,_=(c[1]-g[1])*(b[0]-g[0]),T=(c[0]-g[0])*(b[1]-g[1]),k=_-T;if(_>0){if(T<=0)return k;w=_+T}else{if(!(_<0)||T>=0)return k;w=-(_+T)}var L=33306690738754716e-32*w;return k>=L||k<=-L?k:l(c,b,g)},function(c,b,g,w){var _=c[0]-w[0],T=b[0]-w[0],k=g[0]-w[0],L=c[1]-w[1],M=b[1]-w[1],I=g[1]-w[1],P=c[2]-w[2],S=b[2]-w[2],E=g[2]-w[2],D=T*I,F=k*M,H=k*L,V=_*I,Q=_*M,K=T*L,Z=P*(D-F)+S*(H-V)+E*(Q-K),$=7771561172376103e-31*((Math.abs(D)+Math.abs(F))*Math.abs(P)+(Math.abs(H)+Math.abs(V))*Math.abs(S)+(Math.abs(Q)+Math.abs(K))*Math.abs(E));return Z>$||-Z>$?Z:f(c,b,g,w)}];function v(c){var b=d[c.length];return b||(b=d[c.length]=a(c.length)),b.apply(void 0,c)}function m(c,b,g,w,_,T,k){return function(L,M,I,P,S){switch(arguments.length){case 0:case 1:return 0;case 2:return w(L,M);case 3:return _(L,M,I);case 4:return T(L,M,I,P);case 5:return k(L,M,I,P,S)}for(var E=new Array(arguments.length),D=0;D<arguments.length;++D)E[D]=arguments[D];return c(E)}}(function(){for(;d.length<=5;)d.push(a(d.length));x.exports=m.apply(void 0,[v].concat(d));for(var c=0;c<=5;++c)x.exports[c]=d[c]})()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(p,x,y){var e=p("robust-sum"),r=p("robust-scale");x.exports=function(t,i){if(t.length===1)return r(i,t[0]);if(i.length===1)return r(t,i[0]);if(t.length===0||i.length===0)return[0];var n=[0];if(t.length<i.length)for(var h=0;h<t.length;++h)n=e(n,r(i,t[h]));else for(h=0;h<i.length;++h)n=e(n,r(t,i[h]));return n}},{"robust-scale":286,"robust-sum":289}],286:[function(p,x,y){var e=p("two-product"),r=p("two-sum");x.exports=function(t,i){var n=t.length;if(n===1){var h=e(t[0],i);return h[0]?h:[h[1]]}var s=new Array(2*n),a=[.1,.1],l=[.1,.1],f=0;e(t[0],i,a),a[0]&&(s[f++]=a[0]);for(var d=1;d<n;++d){e(t[d],i,l);var v=a[1];r(v,l[0],a),a[0]&&(s[f++]=a[0]);var m=l[1],c=a[1],b=m+c,g=c-(b-m);a[1]=b,g&&(s[f++]=g)}return a[1]&&(s[f++]=a[1]),f===0&&(s[f++]=0),s.length=f,s}},{"two-product":306,"two-sum":307}],287:[function(p,x,y){x.exports=function(r,t,i,n){var h=e(r,i,n),s=e(t,i,n);if(h>0&&s>0||h<0&&s<0)return!1;var a=e(i,r,t),l=e(n,r,t);return a>0&&l>0||a<0&&l<0?!1:h===0&&s===0&&a===0&&l===0?function(f,d,v,m){for(var c=0;c<2;++c){var b=f[c],g=d[c],w=Math.min(b,g),_=Math.max(b,g),T=v[c],k=m[c],L=Math.min(T,k);if(Math.max(T,k)<w||_<L)return!1}return!0}(r,t,i,n):!0};var e=p("robust-orientation")[3]},{"robust-orientation":284}],288:[function(p,x,y){x.exports=function(e,r){var t=0|e.length,i=0|r.length;if(t===1&&i===1)return function(I,P){var S=I+P,E=S-I,D=I-(S-E)+(P-E);return D?[D,S]:[S]}(e[0],-r[0]);var n,h,s=new Array(t+i),a=0,l=0,f=0,d=Math.abs,v=e[l],m=d(v),c=-r[f],b=d(c);m<b?(h=v,(l+=1)<t&&(v=e[l],m=d(v))):(h=c,(f+=1)<i&&(c=-r[f],b=d(c))),l<t&&m<b||f>=i?(n=v,(l+=1)<t&&(v=e[l],m=d(v))):(n=c,(f+=1)<i&&(c=-r[f],b=d(c)));for(var g,w,_=n+h,T=_-n,k=h-T,L=k,M=_;l<t&&f<i;)m<b?(n=v,(l+=1)<t&&(v=e[l],m=d(v))):(n=c,(f+=1)<i&&(c=-r[f],b=d(c))),(k=(h=L)-(T=(_=n+h)-n))&&(s[a++]=k),L=M-((g=M+_)-(w=g-M))+(_-w),M=g;for(;l<t;)(k=(h=L)-(T=(_=(n=v)+h)-n))&&(s[a++]=k),L=M-((g=M+_)-(w=g-M))+(_-w),M=g,(l+=1)<t&&(v=e[l]);for(;f<i;)(k=(h=L)-(T=(_=(n=c)+h)-n))&&(s[a++]=k),L=M-((g=M+_)-(w=g-M))+(_-w),M=g,(f+=1)<i&&(c=-r[f]);return L&&(s[a++]=L),M&&(s[a++]=M),a||(s[a++]=0),s.length=a,s}},{}],289:[function(p,x,y){x.exports=function(e,r){var t=0|e.length,i=0|r.length;if(t===1&&i===1)return function(I,P){var S=I+P,E=S-I,D=I-(S-E)+(P-E);return D?[D,S]:[S]}(e[0],r[0]);var n,h,s=new Array(t+i),a=0,l=0,f=0,d=Math.abs,v=e[l],m=d(v),c=r[f],b=d(c);m<b?(h=v,(l+=1)<t&&(v=e[l],m=d(v))):(h=c,(f+=1)<i&&(c=r[f],b=d(c))),l<t&&m<b||f>=i?(n=v,(l+=1)<t&&(v=e[l],m=d(v))):(n=c,(f+=1)<i&&(c=r[f],b=d(c)));for(var g,w,_=n+h,T=_-n,k=h-T,L=k,M=_;l<t&&f<i;)m<b?(n=v,(l+=1)<t&&(v=e[l],m=d(v))):(n=c,(f+=1)<i&&(c=r[f],b=d(c))),(k=(h=L)-(T=(_=n+h)-n))&&(s[a++]=k),L=M-((g=M+_)-(w=g-M))+(_-w),M=g;for(;l<t;)(k=(h=L)-(T=(_=(n=v)+h)-n))&&(s[a++]=k),L=M-((g=M+_)-(w=g-M))+(_-w),M=g,(l+=1)<t&&(v=e[l]);for(;f<i;)(k=(h=L)-(T=(_=(n=c)+h)-n))&&(s[a++]=k),L=M-((g=M+_)-(w=g-M))+(_-w),M=g,(f+=1)<i&&(c=r[f]);return L&&(s[a++]=L),M&&(s[a++]=M),a||(s[a++]=0),s.length=a,s}},{}],290:[function(p,x,y){x.exports=function(t){return r(e(t))};var e=p("boundary-cells"),r=p("reduce-simplicial-complex")},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(p,x,y){x.exports=function(n,h,s,a){if(s=s||0,a===void 0&&(a=function(g){for(var w=g.length,_=0,T=0;T<w;++T)_=0|Math.max(_,g[T].length);return _-1}(n)),n.length===0||a<1)return{cells:[],vertexIds:[],vertexWeights:[]};var l=function(g,w){for(var _=g.length,T=r.mallocUint8(_),k=0;k<_;++k)T[k]=g[k]<w|0;return T}(h,+s),f=function(g,w){for(var _=g.length,T=w*(w+1)/2*_|0,k=r.mallocUint32(2*T),L=0,M=0;M<_;++M)for(var I=g[M],P=(w=I.length,0);P<w;++P)for(var S=0;S<P;++S){var E=I[S],D=I[P];k[L++]=0|Math.min(E,D),k[L++]=0|Math.max(E,D)}t(e(k,[L/2|0,2]));var F=2;for(M=2;M<L;M+=2)k[M-2]===k[M]&&k[M-1]===k[M+1]||(k[F++]=k[M],k[F++]=k[M+1]);return e(k,[F/2|0,2])}(n,a),d=function(g,w,_,T){for(var k=g.data,L=g.shape[0],M=r.mallocDouble(L),I=0,P=0;P<L;++P){var S=k[2*P],E=k[2*P+1];if(_[S]!==_[E]){var D=w[S],F=w[E];k[2*I]=S,k[2*I+1]=E,M[I++]=(F-T)/(F-D)}}return g.shape[0]=I,e(M,[I])}(f,h,l,+s),v=function(g,w){var _=r.mallocInt32(2*w),T=g.shape[0],k=g.data;_[0]=0;for(var L=0,M=0;M<T;++M){var I=k[2*M];if(I!==L){for(_[2*L+1]=M;++L<I;)_[2*L]=M,_[2*L+1]=M;_[2*L]=M}}for(_[2*L+1]=T;++L<w;)_[2*L]=_[2*L+1]=T;return _}(f,0|h.length),m=i(a)(n,f.data,v,l),c=function(g){for(var w=0|g.shape[0],_=g.data,T=new Array(w),k=0;k<w;++k)T[k]=[_[2*k],_[2*k+1]];return T}(f),b=[].slice.call(d.data,0,d.shape[0]);return r.free(l),r.free(f.data),r.free(d.data),r.free(v),{cells:m,vertexIds:c,vertexWeights:b}};var e=p("ndarray"),r=p("typedarray-pool"),t=p("ndarray-sort"),i=p("./lib/codegen")},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(p,x,y){x.exports=function(r){return e[r]()};var e=[function(){return function(r,t,i,n){for(var h=r.length,s=0;s<h;++s)r[s].length;return[]}},function(){function r(t,i,n,h){for(var s=0|Math.min(n,h),a=0|Math.max(n,h),l=t[2*s],f=t[2*s+1];l<f;){var d=l+f>>1,v=i[2*d+1];if(v===a)return d;a<v?f=d:l=d+1}return l}return function(t,i,n,h){for(var s=t.length,a=[],l=0;l<s;++l){var f=t[l];if(f.length===2){var d=(h[f[0]]<<0)+(h[f[1]]<<1);if(d===0||d===3)continue;switch(d){case 0:break;case 1:a.push([r(n,i,f[0],f[1])]);break;case 2:a.push([r(n,i,f[1],f[0])])}}}return a}},function(){function r(t,i,n,h){for(var s=0|Math.min(n,h),a=0|Math.max(n,h),l=t[2*s],f=t[2*s+1];l<f;){var d=l+f>>1,v=i[2*d+1];if(v===a)return d;a<v?f=d:l=d+1}return l}return function(t,i,n,h){for(var s=t.length,a=[],l=0;l<s;++l){var f=t[l],d=f.length;if(d===3){if((v=(h[f[0]]<<0)+(h[f[1]]<<1)+(h[f[2]]<<2))==0||v===7)continue;switch(v){case 0:break;case 1:a.push([r(n,i,f[0],f[2]),r(n,i,f[0],f[1])]);break;case 2:a.push([r(n,i,f[1],f[0]),r(n,i,f[1],f[2])]);break;case 3:a.push([r(n,i,f[0],f[2]),r(n,i,f[1],f[2])]);break;case 4:a.push([r(n,i,f[2],f[1]),r(n,i,f[2],f[0])]);break;case 5:a.push([r(n,i,f[2],f[1]),r(n,i,f[0],f[1])]);break;case 6:a.push([r(n,i,f[1],f[0]),r(n,i,f[2],f[0])])}}else if(d===2){var v;if((v=(h[f[0]]<<0)+(h[f[1]]<<1))==0||v===3)continue;switch(v){case 0:break;case 1:a.push([r(n,i,f[0],f[1])]);break;case 2:a.push([r(n,i,f[1],f[0])])}}}return a}},function(){function r(t,i,n,h){for(var s=0|Math.min(n,h),a=0|Math.max(n,h),l=t[2*s],f=t[2*s+1];l<f;){var d=l+f>>1,v=i[2*d+1];if(v===a)return d;a<v?f=d:l=d+1}return l}return function(t,i,n,h){for(var s=t.length,a=[],l=0;l<s;++l){var f=t[l],d=f.length;if(d===4){if((v=(h[f[0]]<<0)+(h[f[1]]<<1)+(h[f[2]]<<2)+(h[f[3]]<<3))==0||v===15)continue;switch(v){case 0:break;case 1:a.push([r(n,i,f[0],f[1]),r(n,i,f[0],f[2]),r(n,i,f[0],f[3])]);break;case 2:a.push([r(n,i,f[1],f[2]),r(n,i,f[1],f[0]),r(n,i,f[1],f[3])]);break;case 3:a.push([r(n,i,f[1],f[2]),r(n,i,f[0],f[2]),r(n,i,f[0],f[3])],[r(n,i,f[1],f[3]),r(n,i,f[1],f[2]),r(n,i,f[0],f[3])]);break;case 4:a.push([r(n,i,f[2],f[0]),r(n,i,f[2],f[1]),r(n,i,f[2],f[3])]);break;case 5:a.push([r(n,i,f[0],f[1]),r(n,i,f[2],f[1]),r(n,i,f[0],f[3])],[r(n,i,f[2],f[1]),r(n,i,f[2],f[3]),r(n,i,f[0],f[3])]);break;case 6:a.push([r(n,i,f[2],f[0]),r(n,i,f[1],f[0]),r(n,i,f[1],f[3])],[r(n,i,f[2],f[3]),r(n,i,f[2],f[0]),r(n,i,f[1],f[3])]);break;case 7:a.push([r(n,i,f[0],f[3]),r(n,i,f[1],f[3]),r(n,i,f[2],f[3])]);break;case 8:a.push([r(n,i,f[3],f[1]),r(n,i,f[3],f[0]),r(n,i,f[3],f[2])]);break;case 9:a.push([r(n,i,f[3],f[1]),r(n,i,f[0],f[1]),r(n,i,f[0],f[2])],[r(n,i,f[3],f[2]),r(n,i,f[3],f[1]),r(n,i,f[0],f[2])]);break;case 10:a.push([r(n,i,f[1],f[0]),r(n,i,f[3],f[0]),r(n,i,f[1],f[2])],[r(n,i,f[3],f[0]),r(n,i,f[3],f[2]),r(n,i,f[1],f[2])]);break;case 11:a.push([r(n,i,f[1],f[2]),r(n,i,f[0],f[2]),r(n,i,f[3],f[2])]);break;case 12:a.push([r(n,i,f[3],f[0]),r(n,i,f[2],f[0]),r(n,i,f[2],f[1])],[r(n,i,f[3],f[1]),r(n,i,f[3],f[0]),r(n,i,f[2],f[1])]);break;case 13:a.push([r(n,i,f[0],f[1]),r(n,i,f[2],f[1]),r(n,i,f[3],f[1])]);break;case 14:a.push([r(n,i,f[2],f[0]),r(n,i,f[1],f[0]),r(n,i,f[3],f[0])])}}else if(d===3){if((v=(h[f[0]]<<0)+(h[f[1]]<<1)+(h[f[2]]<<2))==0||v===7)continue;switch(v){case 0:break;case 1:a.push([r(n,i,f[0],f[2]),r(n,i,f[0],f[1])]);break;case 2:a.push([r(n,i,f[1],f[0]),r(n,i,f[1],f[2])]);break;case 3:a.push([r(n,i,f[0],f[2]),r(n,i,f[1],f[2])]);break;case 4:a.push([r(n,i,f[2],f[1]),r(n,i,f[2],f[0])]);break;case 5:a.push([r(n,i,f[2],f[1]),r(n,i,f[0],f[1])]);break;case 6:a.push([r(n,i,f[1],f[0]),r(n,i,f[2],f[0])])}}else if(d===2){var v;if((v=(h[f[0]]<<0)+(h[f[1]]<<1))==0||v===3)continue;switch(v){case 0:break;case 1:a.push([r(n,i,f[0],f[1])]);break;case 2:a.push([r(n,i,f[1],f[0])])}}}return a}}]},{}],293:[function(p,x,y){var e=p("bit-twiddle"),r=p("union-find");function t(f,d){var v=f.length,m=f.length-d.length,c=Math.min;if(m)return m;switch(v){case 0:return 0;case 1:return f[0]-d[0];case 2:return(w=f[0]+f[1]-d[0]-d[1])||c(f[0],f[1])-c(d[0],d[1]);case 3:var b=f[0]+f[1],g=d[0]+d[1];if(w=b+f[2]-(g+d[2]))return w;var w,_=c(f[0],f[1]),T=c(d[0],d[1]);return(w=c(_,f[2])-c(T,d[2]))||c(_+f[2],b)-c(T+d[2],g);default:var k=f.slice(0);k.sort();var L=d.slice(0);L.sort();for(var M=0;M<v;++M)if(m=k[M]-L[M])return m;return 0}}function i(f,d){return t(f[0],d[0])}function n(f,d){if(d){for(var v=f.length,m=new Array(v),c=0;c<v;++c)m[c]=[f[c],d[c]];for(m.sort(i),c=0;c<v;++c)f[c]=m[c][0],d[c]=m[c][1];return f}return f.sort(t),f}function h(f){if(f.length===0)return[];for(var d=1,v=f.length,m=1;m<v;++m){var c=f[m];if(t(c,f[m-1])){if(m===d){d++;continue}f[d++]=c}}return f.length=d,f}function s(f,d){for(var v=0,m=f.length-1,c=-1;v<=m;){var b=v+m>>1,g=t(f[b],d);g<=0?(g===0&&(c=b),v=b+1):g>0&&(m=b-1)}return c}function a(f,d){for(var v=new Array(f.length),m=0,c=v.length;m<c;++m)v[m]=[];for(var b=[],g=(m=0,d.length);m<g;++m)for(var w=d[m],_=w.length,T=1,k=1<<_;T<k;++T){b.length=e.popCount(T);for(var L=0,M=0;M<_;++M)T&1<<M&&(b[L++]=w[M]);var I=s(f,b);if(!(I<0))for(;v[I++].push(m),!(I>=f.length||t(f[I],b)!==0););}return v}function l(f,d){if(d<0)return[];for(var v=[],m=(1<<d+1)-1,c=0;c<f.length;++c)for(var b=f[c],g=m;g<1<<b.length;g=e.nextCombination(g)){for(var w=new Array(d+1),_=0,T=0;T<b.length;++T)g&1<<T&&(w[_++]=b[T]);v.push(w)}return n(v)}y.dimension=function(f){for(var d=0,v=Math.max,m=0,c=f.length;m<c;++m)d=v(d,f[m].length);return d-1},y.countVertices=function(f){for(var d=-1,v=Math.max,m=0,c=f.length;m<c;++m)for(var b=f[m],g=0,w=b.length;g<w;++g)d=v(d,b[g]);return d+1},y.cloneCells=function(f){for(var d=new Array(f.length),v=0,m=f.length;v<m;++v)d[v]=f[v].slice(0);return d},y.compareCells=t,y.normalize=n,y.unique=h,y.findCell=s,y.incidence=a,y.dual=function(f,d){if(!d)return a(h(l(f,0)),f);for(var v=new Array(d),m=0;m<d;++m)v[m]=[];m=0;for(var c=f.length;m<c;++m)for(var b=f[m],g=0,w=b.length;g<w;++g)v[b[g]].push(m);return v},y.explode=function(f){for(var d=[],v=0,m=f.length;v<m;++v)for(var c=f[v],b=0|c.length,g=1,w=1<<b;g<w;++g){for(var _=[],T=0;T<b;++T)g>>>T&1&&_.push(c[T]);d.push(_)}return n(d)},y.skeleton=l,y.boundary=function(f){for(var d=[],v=0,m=f.length;v<m;++v)for(var c=f[v],b=0,g=c.length;b<g;++b){for(var w=new Array(c.length-1),_=0,T=0;_<g;++_)_!==b&&(w[T++]=c[_]);d.push(w)}return n(d)},y.connectedComponents=function(f,d){return d?function(v,m){for(var c=new r(m),b=0;b<v.length;++b)for(var g=v[b],w=0;w<g.length;++w)for(var _=w+1;_<g.length;++_)c.link(g[w],g[_]);var T=[],k=c.ranks;for(b=0;b<k.length;++b)k[b]=-1;for(b=0;b<v.length;++b){var L=c.find(v[b][0]);k[L]<0?(k[L]=T.length,T.push([v[b].slice(0)])):T[k[L]].push(v[b].slice(0))}return T}(f,d):function(v){for(var m=h(n(l(v,0))),c=new r(m.length),b=0;b<v.length;++b)for(var g=v[b],w=0;w<g.length;++w)for(var _=s(m,[g[w]]),T=w+1;T<g.length;++T)c.link(_,s(m,[g[T]]));var k=[],L=c.ranks;for(b=0;b<L.length;++b)L[b]=-1;for(b=0;b<v.length;++b){var M=c.find(s(m,[v[b][0]]));L[M]<0?(L[M]=k.length,k.push([v[b].slice(0)])):k[L[M]].push(v[b].slice(0))}return k}(f)}},{"bit-twiddle":32,"union-find":309}],294:[function(p,x,y){arguments[4][32][0].apply(y,arguments)},{dup:32}],295:[function(p,x,y){arguments[4][293][0].apply(y,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(p,x,y){function e(r){this.roots=new Array(r),this.ranks=new Array(r);for(var t=0;t<r;++t)this.roots[t]=t,this.ranks[t]=0}x.exports=e,e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var r=this.roots.length;return this.roots.push(r),this.ranks.push(0),r},e.prototype.find=function(r){for(var t=this.roots;t[r]!==r;){var i=t[r];t[r]=t[i],r=i}return r},e.prototype.link=function(r,t){var i=this.find(r),n=this.find(t);if(i!==n){var h=this.ranks,s=this.roots,a=h[i],l=h[n];a<l?s[i]=n:l<a?s[n]=i:(s[n]=i,++h[i])}}},{}],297:[function(p,x,y){x.exports=function(t,i,n){for(var h=i.length,s=t.length,a=new Array(h),l=new Array(h),f=new Array(h),d=new Array(h),v=0;v<h;++v)a[v]=l[v]=-1,f[v]=1/0,d[v]=!1;for(v=0;v<s;++v){var m=t[v];if(m.length!==2)throw new Error("Input must be a graph");var c=m[1],b=m[0];l[b]!==-1?l[b]=-2:l[b]=c,a[c]!==-1?a[c]=-2:a[c]=b}function g(K){if(d[K])return 1/0;var Z,$,re,R,N,U=a[K],te=l[K];return U<0||te<0?1/0:(Z=i[K],$=i[U],re=i[te],R=Math.abs(e(Z,$,re)),N=Math.sqrt(Math.pow($[0]-re[0],2)+Math.pow($[1]-re[1],2)),R/N)}function w(K,Z){var $=S[K],re=S[Z];S[K]=re,S[Z]=$,E[$]=Z,E[re]=K}function _(K){return f[S[K]]}function T(K){return 1&K?K-1>>1:(K>>1)-1}function k(K){for(var Z=_(K);;){var $=Z,re=2*K+1,R=2*(K+1),N=K;if(re<D){var U=_(re);U<$&&(N=re,$=U)}if(R<D&&_(R)<$&&(N=R),N===K)return K;w(K,N),K=N}}function L(K){for(var Z=_(K);K>0;){var $=T(K);if($>=0&&Z<_($)){w(K,$),K=$;continue}return K}}function M(){if(D>0){var K=S[0];return w(0,D-1),D-=1,k(0),K}return-1}function I(K,Z){var $=S[K];return f[$]===Z?K:(f[$]=-1/0,L(K),M(),f[$]=Z,L((D+=1)-1))}function P(K){if(!d[K]){d[K]=!0;var Z=a[K],$=l[K];a[$]>=0&&(a[$]=Z),l[Z]>=0&&(l[Z]=$),E[Z]>=0&&I(E[Z],g(Z)),E[$]>=0&&I(E[$],g($))}}var S=[],E=new Array(h);for(v=0;v<h;++v)(f[v]=g(v))<1/0?(E[v]=S.length,S.push(v)):E[v]=-1;var D=S.length;for(v=D>>1;v>=0;--v)k(v);for(;;){var F=M();if(F<0||f[F]>n)break;P(F)}var H=[];for(v=0;v<h;++v)d[v]||(E[v]=H.length,H.push(i[v].slice()));H.length;function V(K,Z){if(K[Z]<0)return Z;var $=Z,re=Z;do{var R=K[re];if(!d[re]||R<0||R===re||(R=K[re=R],!d[re]||R<0||R===re))break;re=R,$=K[$]}while($!==re);for(var N=Z;N!==re;N=K[N])K[N]=re;return re}var Q=[];return t.forEach(function(K){var Z=V(a,K[0]),$=V(l,K[1]);if(Z>=0&&$>=0&&Z!==$){var re=E[Z],R=E[$];re!==R&&Q.push([re,R])}}),r.unique(r.normalize(Q)),{positions:H,edges:Q}};var e=p("robust-orientation"),r=p("simplicial-complex")},{"robust-orientation":284,"simplicial-complex":295}],298:[function(p,x,y){x.exports=function(t,i){var n,h,s,a;if(i[0][0]<i[1][0])n=i[0],h=i[1];else{if(!(i[0][0]>i[1][0]))return r(i,t);n=i[1],h=i[0]}if(t[0][0]<t[1][0])s=t[0],a=t[1];else{if(!(t[0][0]>t[1][0]))return-r(t,i);s=t[1],a=t[0]}var l=e(n,h,a),f=e(n,h,s);if(l<0){if(f<=0)return l}else if(l>0){if(f>=0)return l}else if(f)return f;if(l=e(a,s,h),f=e(a,s,n),l<0){if(f<=0)return l}else if(l>0){if(f>=0)return l}else if(f)return f;return h[0]-a[0]};var e=p("robust-orientation");function r(t,i){var n,h,s,a;if(i[0][0]<i[1][0])n=i[0],h=i[1];else{if(!(i[0][0]>i[1][0])){var l=Math.min(t[0][1],t[1][1]),f=Math.max(t[0][1],t[1][1]),d=Math.min(i[0][1],i[1][1]),v=Math.max(i[0][1],i[1][1]);return f<d?f-d:l>v?l-v:f-v}n=i[1],h=i[0]}t[0][1]<t[1][1]?(s=t[0],a=t[1]):(s=t[1],a=t[0]);var m=e(h,n,s);return m||(m=e(h,n,a))||a-h}},{"robust-orientation":284}],299:[function(p,x,y){x.exports=function(f){for(var d=f.length,v=2*d,m=new Array(v),c=0;c<d;++c){var b=f[c],g=b[0][0]<b[1][0];m[2*c]=new l(b[0][0],b,g,c),m[2*c+1]=new l(b[1][0],b,!g,c)}m.sort(function(P,S){var E=P.x-S.x;return E||(E=P.create-S.create)||Math.min(P.segment[0][1],P.segment[1][1])-Math.min(S.segment[0][1],S.segment[1][1])});var w=r(i),_=[],T=[],k=[];for(c=0;c<v;){for(var L=m[c].x,M=[];c<v;){var I=m[c];if(I.x!==L)break;c+=1,I.segment[0][0]===I.x&&I.segment[1][0]===I.x?I.create&&(I.segment[0][1]<I.segment[1][1]?(M.push(new a(I.segment[0][1],I.index,!0,!0)),M.push(new a(I.segment[1][1],I.index,!1,!1))):(M.push(new a(I.segment[1][1],I.index,!0,!1)),M.push(new a(I.segment[0][1],I.index,!1,!0)))):w=I.create?w.insert(I.segment,I.index):w.remove(I.segment)}_.push(w.root),T.push(L),k.push(M)}return new n(_,T,k)};var e=p("binary-search-bounds"),r=p("functional-red-black-tree"),t=p("robust-orientation"),i=p("./lib/order-segments");function n(f,d,v){this.slabs=f,this.coordinates=d,this.horizontal=v}function h(f,d){return f.y-d}function s(f,d){for(var v=null;f;){var m,c,b=f.key;b[0][0]<b[1][0]?(m=b[0],c=b[1]):(m=b[1],c=b[0]);var g=t(m,c,d);if(g<0)f=f.left;else if(g>0)if(d[0]!==b[1][0])v=f,f=f.right;else{if(w=s(f.right,d))return w;f=f.left}else{if(d[0]!==b[1][0])return f;var w;if(w=s(f.right,d))return w;f=f.left}}return v}function a(f,d,v,m){this.y=f,this.index=d,this.start=v,this.closed=m}function l(f,d,v,m){this.x=f,this.segment=d,this.create=v,this.index=m}n.prototype.castUp=function(f){var d=e.le(this.coordinates,f[0]);if(d<0)return-1;this.slabs[d];var v=s(this.slabs[d],f),m=-1;if(v&&(m=v.value),this.coordinates[d]===f[0]){var c=null;if(v&&(c=v.key),d>0){var b=s(this.slabs[d-1],f);b&&(c?i(b.key,c)>0&&(c=b.key,m=b.value):(m=b.value,c=b.key))}var g=this.horizontal[d];if(g.length>0){var w=e.ge(g,f[1],h);if(w<g.length){var _=g[w];if(f[1]===_.y){if(_.closed)return _.index;for(;w<g.length-1&&g[w+1].y===f[1];)if((_=g[w+=1]).closed)return _.index;if(_.y===f[1]&&!_.start){if((w+=1)>=g.length)return m;_=g[w]}}if(_.start)if(c){var T=t(c[0],c[1],[f[0],_.y]);c[0][0]>c[1][0]&&(T=-T),T>0&&(m=_.index)}else m=_.index;else _.y!==f[1]&&(m=_.index)}}}return m}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(p,x,y){var e=p("robust-dot-product"),r=p("robust-sum");function t(n,h){var s=r(e(n,h),[h[h.length-1]]);return s[s.length-1]}function i(n,h,s,a){var l=-h/(a-h);l<0?l=0:l>1&&(l=1);for(var f=1-l,d=n.length,v=new Array(d),m=0;m<d;++m)v[m]=l*n[m]+f*s[m];return v}x.exports=function(n,h){for(var s=[],a=[],l=t(n[n.length-1],h),f=n[n.length-1],d=n[0],v=0;v<n.length;++v,f=d){var m=t(d=n[v],h);if(l<0&&m>0||l>0&&m<0){var c=i(f,m,d,l);s.push(c),a.push(c.slice())}m<0?a.push(d.slice()):m>0?s.push(d.slice()):(s.push(d.slice()),a.push(d.slice())),l=m}return{positive:s,negative:a}},x.exports.positive=function(n,h){for(var s=[],a=t(n[n.length-1],h),l=n[n.length-1],f=n[0],d=0;d<n.length;++d,l=f){var v=t(f=n[d],h);(a<0&&v>0||a>0&&v<0)&&s.push(i(l,v,f,a)),v>=0&&s.push(f.slice()),a=v}return s},x.exports.negative=function(n,h){for(var s=[],a=t(n[n.length-1],h),l=n[n.length-1],f=n[0],d=0;d<n.length;++d,l=f){var v=t(f=n[d],h);(a<0&&v>0||a>0&&v<0)&&s.push(i(l,v,f,a)),v<=0&&s.push(f.slice()),a=v}return s}},{"robust-dot-product":281,"robust-sum":289}],301:[function(p,x,y){(function(){var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function r(s){return i(h(s),arguments)}function t(s,a){return r.apply(null,[s].concat(a||[]))}function i(s,a){var l,f,d,v,m,c,b,g,w,_=1,T=s.length,k="";for(f=0;f<T;f++)if(typeof s[f]=="string")k+=s[f];else if(typeof s[f]=="object"){if((v=s[f]).keys)for(l=a[_],d=0;d<v.keys.length;d++){if(l==null)throw new Error(r('[sprintf] Cannot access property "%s" of undefined value "%s"',v.keys[d],v.keys[d-1]));l=l[v.keys[d]]}else l=v.param_no?a[v.param_no]:a[_++];if(e.not_type.test(v.type)&&e.not_primitive.test(v.type)&&l instanceof Function&&(l=l()),e.numeric_arg.test(v.type)&&typeof l!="number"&&isNaN(l))throw new TypeError(r("[sprintf] expecting number but found %T",l));switch(e.number.test(v.type)&&(g=l>=0),v.type){case"b":l=parseInt(l,10).toString(2);break;case"c":l=String.fromCharCode(parseInt(l,10));break;case"d":case"i":l=parseInt(l,10);break;case"j":l=JSON.stringify(l,null,v.width?parseInt(v.width):0);break;case"e":l=v.precision?parseFloat(l).toExponential(v.precision):parseFloat(l).toExponential();break;case"f":l=v.precision?parseFloat(l).toFixed(v.precision):parseFloat(l);break;case"g":l=v.precision?String(Number(l.toPrecision(v.precision))):parseFloat(l);break;case"o":l=(parseInt(l,10)>>>0).toString(8);break;case"s":l=String(l),l=v.precision?l.substring(0,v.precision):l;break;case"t":l=String(!!l),l=v.precision?l.substring(0,v.precision):l;break;case"T":l=Object.prototype.toString.call(l).slice(8,-1).toLowerCase(),l=v.precision?l.substring(0,v.precision):l;break;case"u":l=parseInt(l,10)>>>0;break;case"v":l=l.valueOf(),l=v.precision?l.substring(0,v.precision):l;break;case"x":l=(parseInt(l,10)>>>0).toString(16);break;case"X":l=(parseInt(l,10)>>>0).toString(16).toUpperCase()}e.json.test(v.type)?k+=l:(!e.number.test(v.type)||g&&!v.sign?w="":(w=g?"+":"-",l=l.toString().replace(e.sign,"")),c=v.pad_char?v.pad_char==="0"?"0":v.pad_char.charAt(1):" ",b=v.width-(w+l).length,m=v.width&&b>0?c.repeat(b):"",k+=v.align?w+l+m:c==="0"?w+m+l:m+w+l)}return k}var n=Object.create(null);function h(s){if(n[s])return n[s];for(var a,l=s,f=[],d=0;l;){if((a=e.text.exec(l))!==null)f.push(a[0]);else if((a=e.modulo.exec(l))!==null)f.push("%");else{if((a=e.placeholder.exec(l))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(a[2]){d|=1;var v=[],m=a[2],c=[];if((c=e.key.exec(m))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(v.push(c[1]);(m=m.substring(c[0].length))!=="";)if((c=e.key_access.exec(m))!==null)v.push(c[1]);else{if((c=e.index_access.exec(m))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");v.push(c[1])}a[2]=v}else d|=2;if(d===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");f.push({placeholder:a[0],param_no:a[1],keys:a[2],sign:a[3],pad_char:a[4],align:a[5],width:a[6],precision:a[7],type:a[8]})}l=l.substring(a[0].length)}return n[s]=f}y!==void 0&&(y.sprintf=r,y.vsprintf=t),typeof window!="undefined"&&(window.sprintf=r,window.vsprintf=t)})()},{}],302:[function(p,x,y){x.exports=function(n,h){if(n.dimension<=0)return{positions:[],cells:[]};if(n.dimension===1)return function(l,f){for(var d=r(l,f),v=d.length,m=new Array(v),c=new Array(v),b=0;b<v;++b)m[b]=[d[b]],c[b]=[b];return{positions:m,cells:c}}(n,h);var s=n.order.join()+"-"+n.dtype,a=i[s];return h=+h||0,a||(a=i[s]=function(l,f){var d=l.length+"d",v=t[d];if(v)return v(e,l,f)}(n.order,n.dtype)),a(n,h)};var e=p("ndarray-extract-contour"),r=p("zero-crossings"),t={"2d":function(n,h,s){var a=n({order:h,scalarArguments:3,getters:s==="generic"?[0]:void 0,phase:function(l,f,d,v){return l>v|0},vertex:function(l,f,d,v,m,c,b,g,w,_,T,k,L){var M=(b<<0)+(g<<1)+(w<<2)+(_<<3)|0;if(M!==0&&M!==15)switch(M){case 0:T.push([l-.5,f-.5]);break;case 1:T.push([l-.25-.25*(v+d-2*L)/(d-v),f-.25-.25*(m+d-2*L)/(d-m)]);break;case 2:T.push([l-.75-.25*(-v-d+2*L)/(v-d),f-.25-.25*(c+v-2*L)/(v-c)]);break;case 3:T.push([l-.5,f-.5-.5*(m+d+c+v-4*L)/(d-m+v-c)]);break;case 4:T.push([l-.25-.25*(c+m-2*L)/(m-c),f-.75-.25*(-m-d+2*L)/(m-d)]);break;case 5:T.push([l-.5-.5*(v+d+c+m-4*L)/(d-v+m-c),f-.5]);break;case 6:T.push([l-.5-.25*(-v-d+c+m)/(v-d+m-c),f-.5-.25*(-m-d+c+v)/(m-d+v-c)]);break;case 7:T.push([l-.75-.25*(c+m-2*L)/(m-c),f-.75-.25*(c+v-2*L)/(v-c)]);break;case 8:T.push([l-.75-.25*(-c-m+2*L)/(c-m),f-.75-.25*(-c-v+2*L)/(c-v)]);break;case 9:T.push([l-.5-.25*(v+d+-c-m)/(d-v+c-m),f-.5-.25*(m+d+-c-v)/(d-m+c-v)]);break;case 10:T.push([l-.5-.5*(-v-d-c-m+4*L)/(v-d+c-m),f-.5]);break;case 11:T.push([l-.25-.25*(-c-m+2*L)/(c-m),f-.75-.25*(m+d-2*L)/(d-m)]);break;case 12:T.push([l-.5,f-.5-.5*(-m-d-c-v+4*L)/(m-d+c-v)]);break;case 13:T.push([l-.75-.25*(v+d-2*L)/(d-v),f-.25-.25*(-c-v+2*L)/(c-v)]);break;case 14:T.push([l-.25-.25*(-v-d+2*L)/(v-d),f-.25-.25*(-m-d+2*L)/(m-d)]);break;case 15:T.push([l-.5,f-.5])}},cell:function(l,f,d,v,m,c,b,g,w){m?g.push([l,f]):g.push([f,l])}});return function(l,f){var d=[],v=[];return a(l,d,v,f),{positions:d,cells:v}}}},i={}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(p,x,y){(function(e){(function(){x.exports=function n(h,s,a){a=a||{};var l=i[h];l||(l=i[h]={" ":{data:new Float32Array(0),shape:.2}});var f=l[s];if(!f)if(s.length<=1||!/\d/.test(s))f=l[s]=function(L){for(var M=L.cells,I=L.positions,P=new Float32Array(6*M.length),S=0,E=0,D=0;D<M.length;++D)for(var F=M[D],H=0;H<3;++H){var V=I[F[H]];P[S++]=V[0],P[S++]=V[1]+1.4,E=Math.max(V[0],E)}return{data:P,shape:E}}(r(s,{triangles:!0,font:h,textAlign:a.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var d=s.split(/(\d|\s)/),v=new Array(d.length),m=0,c=0,b=0;b<d.length;++b)v[b]=n(h,d[b]),m+=v[b].data.length,c+=v[b].shape,b>0&&(c+=.02);var g=new Float32Array(m),w=0,_=-.5*c;for(b=0;b<v.length;++b){for(var T=v[b].data,k=0;k<T.length;k+=2)g[w++]=T[k]+_,g[w++]=T[k+1];_+=v[b].shape+.02}f=l[s]={data:g,shape:c}}return f};var r=p("vectorize-text"),t=window||e.global||{},i=t.__TEXT_CACHE||{};t.__TEXT_CACHE={}}).call(this)}).call(this,p("_process"))},{_process:5,"vectorize-text":311}],304:[function(p,x,y){var e=p("parse-unit");x.exports=t;function r(i,n){var h=e(getComputedStyle(i).getPropertyValue(n));return h[0]*t(h[1],i)}function t(i,n){switch(n=n||document.body,i=(i||"px").trim().toLowerCase(),n!==window&&n!==document||(n=document.body),i){case"%":return n.clientHeight/100;case"ch":case"ex":return function(h,s){var a=document.createElement("div");a.style["font-size"]="128"+h,s.appendChild(a);var l=r(a,"font-size")/128;return s.removeChild(a),l}(i,n);case"em":return r(n,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}},{"parse-unit":265}],305:[function(p,x,y){x.exports=function(m){var c=(m=m||{}).center||[0,0,0],b=m.up||[0,1,0],g=m.right||l(b),w=m.radius||1,_=m.theta||0,T=m.phi||0;if(c=[].slice.call(c,0,3),b=[].slice.call(b,0,3),n(b,b),g=[].slice.call(g,0,3),n(g,g),"eye"in m){var k=m.eye,L=[k[0]-c[0],k[1]-c[1],k[2]-c[2]];i(g,L,b),s(g[0],g[1],g[2])<1e-6?g=l(b):n(g,g),w=s(L[0],L[1],L[2]);var M=h(b,L)/w,I=h(g,L)/w;T=Math.acos(M),_=Math.acos(I)}return w=Math.log(w),new f(m.zoomMin,m.zoomMax,c,b,g,w,_,T)};var e=p("filtered-vector"),r=p("gl-mat4/invert"),t=p("gl-mat4/rotate"),i=p("gl-vec3/cross"),n=p("gl-vec3/normalize"),h=p("gl-vec3/dot");function s(m,c,b){return Math.sqrt(Math.pow(m,2)+Math.pow(c,2)+Math.pow(b,2))}function a(m){return Math.min(1,Math.max(-1,m))}function l(m){var c=Math.abs(m[0]),b=Math.abs(m[1]),g=Math.abs(m[2]),w=[0,0,0];c>Math.max(b,g)?w[2]=1:b>Math.max(c,g)?w[0]=1:w[1]=1;for(var _=0,T=0,k=0;k<3;++k)_+=m[k]*m[k],T+=w[k]*m[k];for(k=0;k<3;++k)w[k]-=T/_*m[k];return n(w,w),w}function f(m,c,b,g,w,_,T,k){this.center=e(b),this.up=e(g),this.right=e(w),this.radius=e([_]),this.angle=e([T,k]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(m,c),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var L=0;L<16;++L)this.computedMatrix[L]=.5;this.recalcMatrix(0)}var d=f.prototype;d.setDistanceLimits=function(m,c){m=m>0?Math.log(m):-1/0,c=c>0?Math.log(c):1/0,c=Math.max(c,m),this.radius.bounds[0][0]=m,this.radius.bounds[1][0]=c},d.getDistanceLimits=function(m){var c=this.radius.bounds[0];return m?(m[0]=Math.exp(c[0][0]),m[1]=Math.exp(c[1][0]),m):[Math.exp(c[0][0]),Math.exp(c[1][0])]},d.recalcMatrix=function(m){this.center.curve(m),this.up.curve(m),this.right.curve(m),this.radius.curve(m),this.angle.curve(m);for(var c=this.computedUp,b=this.computedRight,g=0,w=0,_=0;_<3;++_)w+=c[_]*b[_],g+=c[_]*c[_];var T=Math.sqrt(g),k=0;for(_=0;_<3;++_)b[_]-=c[_]*w/g,k+=b[_]*b[_],c[_]/=T;var L=Math.sqrt(k);for(_=0;_<3;++_)b[_]/=L;var M=this.computedToward;i(M,c,b),n(M,M);var I=Math.exp(this.computedRadius[0]),P=this.computedAngle[0],S=this.computedAngle[1],E=Math.cos(P),D=Math.sin(P),F=Math.cos(S),H=Math.sin(S),V=this.computedCenter,Q=E*F,K=D*F,Z=H,$=-E*H,re=-D*H,R=F,N=this.computedEye,U=this.computedMatrix;for(_=0;_<3;++_){var te=Q*b[_]+K*M[_]+Z*c[_];U[4*_+1]=$*b[_]+re*M[_]+R*c[_],U[4*_+2]=te,U[4*_+3]=0}var j=U[1],Y=U[5],J=U[9],ee=U[2],ne=U[6],se=U[10],oe=Y*se-J*ne,he=J*ee-j*se,le=j*ne-Y*ee,de=s(oe,he,le);for(oe/=de,he/=de,le/=de,U[0]=oe,U[4]=he,U[8]=le,_=0;_<3;++_)N[_]=V[_]+U[2+4*_]*I;for(_=0;_<3;++_){k=0;for(var xe=0;xe<3;++xe)k+=U[_+4*xe]*N[xe];U[12+_]=-k}U[15]=1},d.getMatrix=function(m,c){this.recalcMatrix(m);var b=this.computedMatrix;if(c){for(var g=0;g<16;++g)c[g]=b[g];return c}return b};var v=[0,0,0];d.rotate=function(m,c,b,g){if(this.angle.move(m,c,b),g){this.recalcMatrix(m);var w=this.computedMatrix;v[0]=w[2],v[1]=w[6],v[2]=w[10];for(var _=this.computedUp,T=this.computedRight,k=this.computedToward,L=0;L<3;++L)w[4*L]=_[L],w[4*L+1]=T[L],w[4*L+2]=k[L];for(t(w,w,g,v),L=0;L<3;++L)_[L]=w[4*L],T[L]=w[4*L+1];this.up.set(m,_[0],_[1],_[2]),this.right.set(m,T[0],T[1],T[2])}},d.pan=function(m,c,b,g){c=c||0,b=b||0,g=g||0,this.recalcMatrix(m);var w=this.computedMatrix,_=(Math.exp(this.computedRadius[0]),w[1]),T=w[5],k=w[9],L=s(_,T,k);_/=L,T/=L,k/=L;var M=w[0],I=w[4],P=w[8],S=M*_+I*T+P*k,E=s(M-=_*S,I-=T*S,P-=k*S),D=(M/=E)*c+_*b,F=(I/=E)*c+T*b,H=(P/=E)*c+k*b;this.center.move(m,D,F,H);var V=Math.exp(this.computedRadius[0]);V=Math.max(1e-4,V+g),this.radius.set(m,Math.log(V))},d.translate=function(m,c,b,g){this.center.move(m,c||0,b||0,g||0)},d.setMatrix=function(m,c,b,g){var w=1;typeof b=="number"&&(w=0|b),(w<0||w>3)&&(w=1);var _=(w+2)%3;c||(this.recalcMatrix(m),c=this.computedMatrix);var T=c[w],k=c[w+4],L=c[w+8];if(g){var M=Math.abs(T),I=Math.abs(k),P=Math.abs(L),S=Math.max(M,I,P);M===S?(T=T<0?-1:1,k=L=0):P===S?(L=L<0?-1:1,T=k=0):(k=k<0?-1:1,T=L=0)}else{var E=s(T,k,L);T/=E,k/=E,L/=E}var D,F,H=c[_],V=c[_+4],Q=c[_+8],K=H*T+V*k+Q*L,Z=s(H-=T*K,V-=k*K,Q-=L*K),$=k*(Q/=Z)-L*(V/=Z),re=L*(H/=Z)-T*Q,R=T*V-k*H,N=s($,re,R);if($/=N,re/=N,R/=N,this.center.jump(m,fe,me,ke),this.radius.idle(m),this.up.jump(m,T,k,L),this.right.jump(m,H,V,Q),w===2){var U=c[1],te=c[5],j=c[9],Y=U*H+te*V+j*Q,J=U*$+te*re+j*R;D=oe<0?-Math.PI/2:Math.PI/2,F=Math.atan2(J,Y)}else{var ee=c[2],ne=c[6],se=c[10],oe=ee*T+ne*k+se*L,he=ee*H+ne*V+se*Q,le=ee*$+ne*re+se*R;D=Math.asin(a(oe)),F=Math.atan2(le,he)}this.angle.jump(m,F,D),this.recalcMatrix(m);var de=c[2],xe=c[6],we=c[10],be=this.computedMatrix;r(be,c);var Ae=be[15],fe=be[12]/Ae,me=be[13]/Ae,ke=be[14]/Ae,Te=Math.exp(this.computedRadius[0]);this.center.jump(m,fe-de*Te,me-xe*Te,ke-we*Te)},d.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},d.idle=function(m){this.center.idle(m),this.up.idle(m),this.right.idle(m),this.radius.idle(m),this.angle.idle(m)},d.flush=function(m){this.center.flush(m),this.up.flush(m),this.right.flush(m),this.radius.flush(m),this.angle.flush(m)},d.setDistance=function(m,c){c>0&&this.radius.set(m,Math.log(c))},d.lookAt=function(m,c,b,g){this.recalcMatrix(m),c=c||this.computedEye,b=b||this.computedCenter;var w=(g=g||this.computedUp)[0],_=g[1],T=g[2],k=s(w,_,T);if(!(k<1e-6)){w/=k,_/=k,T/=k;var L=c[0]-b[0],M=c[1]-b[1],I=c[2]-b[2],P=s(L,M,I);if(!(P<1e-6)){L/=P,M/=P,I/=P;var S=this.computedRight,E=S[0],D=S[1],F=S[2],H=w*E+_*D+T*F,V=s(E-=H*w,D-=H*_,F-=H*T);if(!(V<.01&&(V=s(E=_*I-T*M,D=T*L-w*I,F=w*M-_*L))<1e-6)){E/=V,D/=V,F/=V,this.up.set(m,w,_,T),this.right.set(m,E,D,F),this.center.set(m,b[0],b[1],b[2]),this.radius.set(m,Math.log(P));var Q=_*F-T*D,K=T*E-w*F,Z=w*D-_*E,$=s(Q,K,Z),re=w*L+_*M+T*I,R=E*L+D*M+F*I,N=(Q/=$)*L+(K/=$)*M+(Z/=$)*I,U=Math.asin(a(re)),te=Math.atan2(N,R),j=this.angle._state,Y=j[j.length-1],J=j[j.length-2];Y%=2*Math.PI;var ee=Math.abs(Y+2*Math.PI-te),ne=Math.abs(Y-te),se=Math.abs(Y-2*Math.PI-te);ee<ne&&(Y+=2*Math.PI),se<ne&&(Y-=2*Math.PI),this.angle.jump(this.angle.lastT(),Y,J),this.angle.set(m,te,U)}}}}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(p,x,y){x.exports=function(r,t,i){var n=r*t,h=e*r,s=h-(h-r),a=r-s,l=e*t,f=l-(l-t),d=t-f,v=a*d-(n-s*f-a*f-s*d);return i?(i[0]=v,i[1]=n,i):[v,n]};var e=+(Math.pow(2,27)+1)},{}],307:[function(p,x,y){x.exports=function(e,r,t){var i=e+r,n=i-e,h=r-n,s=e-(i-n);return t?(t[0]=s+h,t[1]=i,t):[s+h,i]}},{}],308:[function(p,x,y){(function(e){(function(){var r=p("bit-twiddle"),t=p("dup"),i=p("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:t([32,0]),UINT16:t([32,0]),UINT32:t([32,0]),BIGUINT64:t([32,0]),INT8:t([32,0]),INT16:t([32,0]),INT32:t([32,0]),BIGINT64:t([32,0]),FLOAT:t([32,0]),DOUBLE:t([32,0]),DATA:t([32,0]),UINT8C:t([32,0]),BUFFER:t([32,0])});var n=typeof Uint8ClampedArray!="undefined",h=typeof BigUint64Array!="undefined",s=typeof BigInt64Array!="undefined",a=e.__TYPEDARRAY_POOL;a.UINT8C||(a.UINT8C=t([32,0])),a.BIGUINT64||(a.BIGUINT64=t([32,0])),a.BIGINT64||(a.BIGINT64=t([32,0])),a.BUFFER||(a.BUFFER=t([32,0]));var l=a.DATA,f=a.BUFFER;function d(E){if(E){var D=E.length||E.byteLength,F=r.log2(D);l[F].push(E)}}function v(E){E=r.nextPow2(E);var D=r.log2(E),F=l[D];return F.length>0?F.pop():new ArrayBuffer(E)}function m(E){return new Uint8Array(v(E),0,E)}function c(E){return new Uint16Array(v(2*E),0,E)}function b(E){return new Uint32Array(v(4*E),0,E)}function g(E){return new Int8Array(v(E),0,E)}function w(E){return new Int16Array(v(2*E),0,E)}function _(E){return new Int32Array(v(4*E),0,E)}function T(E){return new Float32Array(v(4*E),0,E)}function k(E){return new Float64Array(v(8*E),0,E)}function L(E){return n?new Uint8ClampedArray(v(E),0,E):m(E)}function M(E){return h?new BigUint64Array(v(8*E),0,E):null}function I(E){return s?new BigInt64Array(v(8*E),0,E):null}function P(E){return new DataView(v(E),0,E)}function S(E){E=r.nextPow2(E);var D=r.log2(E),F=f[D];return F.length>0?F.pop():new i(E)}y.free=function(E){if(i.isBuffer(E))f[r.log2(E.length)].push(E);else{if(Object.prototype.toString.call(E)!=="[object ArrayBuffer]"&&(E=E.buffer),!E)return;var D=E.length||E.byteLength,F=0|r.log2(D);l[F].push(E)}},y.freeUint8=y.freeUint16=y.freeUint32=y.freeBigUint64=y.freeInt8=y.freeInt16=y.freeInt32=y.freeBigInt64=y.freeFloat32=y.freeFloat=y.freeFloat64=y.freeDouble=y.freeUint8Clamped=y.freeDataView=function(E){d(E.buffer)},y.freeArrayBuffer=d,y.freeBuffer=function(E){f[r.log2(E.length)].push(E)},y.malloc=function(E,D){if(D===void 0||D==="arraybuffer")return v(E);switch(D){case"uint8":return m(E);case"uint16":return c(E);case"uint32":return b(E);case"int8":return g(E);case"int16":return w(E);case"int32":return _(E);case"float":case"float32":return T(E);case"double":case"float64":return k(E);case"uint8_clamped":return L(E);case"bigint64":return I(E);case"biguint64":return M(E);case"buffer":return S(E);case"data":case"dataview":return P(E);default:return null}return null},y.mallocArrayBuffer=v,y.mallocUint8=m,y.mallocUint16=c,y.mallocUint32=b,y.mallocInt8=g,y.mallocInt16=w,y.mallocInt32=_,y.mallocFloat32=y.mallocFloat=T,y.mallocFloat64=y.mallocDouble=k,y.mallocUint8Clamped=L,y.mallocBigUint64=M,y.mallocBigInt64=I,y.mallocDataView=P,y.mallocBuffer=S,y.clearCache=function(){for(var E=0;E<32;++E)a.UINT8[E].length=0,a.UINT16[E].length=0,a.UINT32[E].length=0,a.INT8[E].length=0,a.INT16[E].length=0,a.INT32[E].length=0,a.FLOAT[E].length=0,a.DOUBLE[E].length=0,a.BIGUINT64[E].length=0,a.BIGINT64[E].length=0,a.UINT8C[E].length=0,l[E].length=0,f[E].length=0}}).call(this)}).call(this,o!==void 0?o:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(p,x,y){function e(t){this.roots=new Array(t),this.ranks=new Array(t);for(var i=0;i<t;++i)this.roots[i]=i,this.ranks[i]=0}x.exports=e;var r=e.prototype;Object.defineProperty(r,"length",{get:function(){return this.roots.length}}),r.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},r.find=function(t){for(var i=t,n=this.roots;n[t]!==t;)t=n[t];for(;n[i]!==t;){var h=n[i];n[i]=t,i=h}return t},r.link=function(t,i){var n=this.find(t),h=this.find(i);if(n!==h){var s=this.ranks,a=this.roots,l=s[n],f=s[h];l<f?a[n]=h:f<l?a[h]=n:(a[h]=n,++s[n])}}},{}],310:[function(p,x,y){x.exports=function(e,r,t){return e.length===0?e:r?(t||e.sort(r),function(i,n){for(var h=1,s=i.length,a=i[0],l=i[0],f=1;f<s;++f)if(l=a,n(a=i[f],l)){if(f===h){h++;continue}i[h++]=a}return i.length=h,i}(e,r)):(t||e.sort(),function(i){for(var n=1,h=i.length,s=i[0],a=i[0],l=1;l<h;++l,a=s)if(a=s,(s=i[l])!==a){if(l===n){n++;continue}i[n++]=s}return i.length=n,i}(e))}},{}],311:[function(p,x,y){x.exports=function(i,n){return typeof n=="object"&&n!==null||(n={}),e(i,n.canvas||r,n.context||t,n)};var e=p("./lib/vtext"),r=null,t=null;typeof document!="undefined"&&((r=document.createElement("canvas")).width=8192,r.height=1024,t=r.getContext("2d"))},{"./lib/vtext":312}],312:[function(p,x,y){x.exports=function(d,v,m,c){var b=64,g=1.25,w={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return c&&(c.size&&c.size>0&&(b=c.size),c.lineSpacing&&c.lineSpacing>0&&(g=c.lineSpacing),c.styletags&&c.styletags.breaklines&&(w.breaklines=!!c.styletags.breaklines),c.styletags&&c.styletags.bolds&&(w.bolds=!!c.styletags.bolds),c.styletags&&c.styletags.italics&&(w.italics=!!c.styletags.italics),c.styletags&&c.styletags.subscripts&&(w.subscripts=!!c.styletags.subscripts),c.styletags&&c.styletags.superscripts&&(w.superscripts=!!c.styletags.superscripts)),m.font=[c.fontStyle,c.fontVariant,c.fontWeight,b+"px",c.font].filter(function(_){return _}).join(" "),m.textAlign="start",m.textBaseline="alphabetic",m.direction="ltr",f(function(_,T,k,L,M,I){k=k.replace(/\n/g,""),k=I.breaklines===!0?k.replace(/\<br\>/g,`
`):k.replace(/\<br\>/g," ");var P="",S=[];for(H=0;H<k.length;++H)S[H]=P;I.bolds===!0&&(S=s("b","b|",k,S)),I.italics===!0&&(S=s("i","i|",k,S)),I.superscripts===!0&&(S=s("sup","+1",k,S)),I.subscripts===!0&&(S=s("sub","-1",k,S));var E=[],D="";for(H=0;H<k.length;++H)S[H]!==null&&(D+=k[H],E.push(S[H]));var F,H,V,Q,K,Z=D.split(`
`),$=Z.length,re=Math.round(M*L),R=L,N=2*L,U=0,te=$*re+N;_.height<te&&(_.height=te),T.fillStyle="#000",T.fillRect(0,0,_.width,_.height),T.fillStyle="#fff";var j=0,Y="";function J(){if(Y!==""){var xe=T.measureText(Y).width;T.fillText(Y,R+V,N+Q),V+=xe}}function ee(){return Math.round(K)+"px "}function ne(xe,we){var be=""+T.font;if(I.subscripts===!0){var Ae=xe.indexOf("-"),fe=we.indexOf("-"),me=Ae>-1?parseInt(xe[1+Ae]):0,ke=fe>-1?parseInt(we[1+fe]):0;me!==ke&&(be=be.replace(ee(),"?px "),K*=Math.pow(.75,ke-me),be=be.replace("?px ",ee())),Q+=.25*re*(ke-me)}if(I.superscripts===!0){var Te=xe.indexOf("+"),Me=we.indexOf("+"),Oe=Te>-1?parseInt(xe[1+Te]):0,Fe=Me>-1?parseInt(we[1+Me]):0;Oe!==Fe&&(be=be.replace(ee(),"?px "),K*=Math.pow(.75,Fe-Oe),be=be.replace("?px ",ee())),Q-=.25*re*(Fe-Oe)}if(I.bolds===!0){var qe=xe.indexOf("b|")>-1,et=we.indexOf("b|")>-1;!qe&&et&&(be=ze?be.replace("italic ","italic bold "):"bold "+be),qe&&!et&&(be=be.replace("bold ",""))}if(I.italics===!0){var ze=xe.indexOf("i|")>-1,Ue=we.indexOf("i|")>-1;!ze&&Ue&&(be="italic "+be),ze&&!Ue&&(be=be.replace("italic ",""))}T.font=be}for(F=0;F<$;++F){var se=Z[F]+`
`;for(V=0,Q=F*re,K=L,Y="",H=0;H<se.length;++H){var oe=H+j<E.length?E[H+j]:E[E.length-1];P===oe?Y+=se[H]:(J(),Y=se[H],oe!==void 0&&(ne(P,oe),P=oe))}J(),j+=se.length;var he=0|Math.round(V+2*R);U<he&&(U=he)}var le=U,de=N+re*$;return r(T.getImageData(0,0,le,de).data,[de,le,4]).pick(-1,-1,0).transpose(1,0)}(v,m,d,b,g,w),c,b)},x.exports.processPixels=f;var e=p("surface-nets"),r=p("ndarray"),t=p("simplify-planar-graph"),i=p("clean-pslg"),n=p("cdt2d"),h=p("planar-graph-to-polyline");function s(d,v,m,c){for(var b="<"+d+">",g="</"+d+">",w=b.length,_=g.length,T=v[0]==="+"||v[0]==="-",k=0,L=-_;k>-1&&(k=m.indexOf(b,k))!==-1&&(L=m.indexOf(g,k+w))!==-1&&!(L<=k);){for(var M=k;M<L+_;++M)if(M<k+w||M>=L)c[M]=null,m=m.substr(0,M)+" "+m.substr(M+1);else if(c[M]!==null){var I=c[M].indexOf(v[0]);I===-1?c[M]+=v:T&&(c[M]=c[M].substr(0,I+1)+(1+parseInt(c[M][I+1]))+c[M].substr(I+2))}var P=k+w,S=m.substr(P,L-P).indexOf(b);k=S!==-1?S:L+_}return c}function a(d,v){var m=e(d,128);return v?t(m.cells,m.positions,.25):{edges:m.cells,positions:m.positions}}function l(d,v,m,c){var b=a(d,c),g=function(F,H,V){for(var Q=H.textAlign||"start",K=H.textBaseline||"alphabetic",Z=[1<<30,1<<30],$=[0,0],re=F.length,R=0;R<re;++R)for(var N=F[R],U=0;U<2;++U)Z[U]=0|Math.min(Z[U],N[U]),$[U]=0|Math.max($[U],N[U]);var te=0;switch(Q){case"center":te=-.5*(Z[0]+$[0]);break;case"right":case"end":te=-$[0];break;case"left":case"start":te=-Z[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+Q+"'")}var j=0;switch(K){case"hanging":case"top":j=-Z[1];break;case"middle":j=-.5*(Z[1]+$[1]);break;case"alphabetic":case"ideographic":j=-3*V;break;case"bottom":j=-$[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+K+"'")}var Y=1/V;return"lineHeight"in H?Y*=+H.lineHeight:"width"in H?Y=H.width/($[0]-Z[0]):"height"in H&&(Y=H.height/($[1]-Z[1])),F.map(function(J){return[Y*(J[0]+te),Y*(J[1]+j)]})}(b.positions,v,m),w=b.edges,_=v.orientation==="ccw";if(i(g,w),v.polygons||v.polygon||v.polyline){for(var T=h(w,g),k=new Array(T.length),L=0;L<T.length;++L){for(var M=T[L],I=new Array(M.length),P=0;P<M.length;++P){for(var S=M[P],E=new Array(S.length),D=0;D<S.length;++D)E[D]=g[S[D]].slice();_&&E.reverse(),I[P]=E}k[L]=I}return k}return v.triangles||v.triangulate||v.triangle?{cells:n(g,w,{delaunay:!1,exterior:!1,interior:!0}),positions:g}:{edges:w,positions:g}}function f(d,v,m){try{return l(d,v,m,!0)}catch{}try{return l(d,v,m,!1)}catch{}return v.polygons||v.polyline||v.polygon?[]:v.triangles||v.triangulate||v.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(p,x,y){(function(){if(typeof ses=="undefined"||!ses.ok||ses.ok()){typeof ses!="undefined"&&(ses.weakMapPermitHostObjects=b);var e=!1;if(typeof WeakMap=="function"){var r=WeakMap;if(!(typeof navigator!="undefined"&&/Firefox/.test(navigator.userAgent))){var t=new r,i=Object.freeze({});if(t.set(i,1),t.get(i)===1)return void(x.exports=WeakMap);e=!0}}var n=Object.getOwnPropertyNames,h=Object.defineProperty,s=Object.isExtensible,a="weakmap:ident:"+Math.random()+"___";if(typeof crypto!="undefined"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var l=new ArrayBuffer(25),f=new Uint8Array(l);crypto.getRandomValues(f),a="weakmap:rand:"+Array.prototype.map.call(f,function(k){return(k%36).toString(36)}).join("")+"___"}if(h(Object,"getOwnPropertyNames",{value:function(k){return n(k).filter(g)}}),"getPropertyNames"in Object){var d=Object.getPropertyNames;h(Object,"getPropertyNames",{value:function(k){return d(k).filter(g)}})}(function(){var k=Object.freeze;h(Object,"freeze",{value:function(I){return w(I),k(I)}});var L=Object.seal;h(Object,"seal",{value:function(I){return w(I),L(I)}});var M=Object.preventExtensions;h(Object,"preventExtensions",{value:function(I){return w(I),M(I)}})})();var v=!1,m=0,c=function(){this instanceof c||T();var k=[],L=[],M=m++;return Object.create(c.prototype,{get___:{value:_(function(I,P){var S,E=w(I);return E?M in E?E[M]:P:(S=k.indexOf(I))>=0?L[S]:P})},has___:{value:_(function(I){var P=w(I);return P?M in P:k.indexOf(I)>=0})},set___:{value:_(function(I,P){var S,E=w(I);return E?E[M]=P:(S=k.indexOf(I))>=0?L[S]=P:(S=k.length,L[S]=P,k[S]=I),this})},delete___:{value:_(function(I){var P,S,E=w(I);return E?M in E&&delete E[M]:!((P=k.indexOf(I))<0)&&(S=k.length-1,k[P]=void 0,L[P]=L[S],k[P]=k[S],k.length=S,L.length=S,!0)})}})};c.prototype=Object.create(Object.prototype,{get:{value:function(k,L){return this.get___(k,L)},writable:!0,configurable:!0},has:{value:function(k){return this.has___(k)},writable:!0,configurable:!0},set:{value:function(k,L){return this.set___(k,L)},writable:!0,configurable:!0},delete:{value:function(k){return this.delete___(k)},writable:!0,configurable:!0}}),typeof r=="function"?function(){function k(){this instanceof c||T();var L,M=new r,I=void 0,P=!1;return L=e?function(S,E){return M.set(S,E),M.has(S)||(I||(I=new c),I.set(S,E)),this}:function(S,E){if(P)try{M.set(S,E)}catch{I||(I=new c),I.set___(S,E)}else M.set(S,E);return this},Object.create(c.prototype,{get___:{value:_(function(S,E){return I?M.has(S)?M.get(S):I.get___(S,E):M.get(S,E)})},has___:{value:_(function(S){return M.has(S)||!!I&&I.has___(S)})},set___:{value:_(L)},delete___:{value:_(function(S){var E=!!M.delete(S);return I&&I.delete___(S)||E})},permitHostObjects___:{value:_(function(S){if(S!==b)throw new Error("bogus call to permitHostObjects___");P=!0})}})}e&&typeof Proxy!="undefined"&&(Proxy=void 0),k.prototype=c.prototype,x.exports=k,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy!="undefined"&&(Proxy=void 0),x.exports=c)}function b(k){k.permitHostObjects___&&k.permitHostObjects___(b)}function g(k){return!(k.substr(0,"weakmap:".length)=="weakmap:"&&k.substr(k.length-3)==="___")}function w(k){if(k!==Object(k))throw new TypeError("Not an object: "+k);var L=k[a];if(L&&L.key===k)return L;if(s(k)){L={key:k};try{return h(k,a,{value:L,writable:!1,enumerable:!1,configurable:!1}),L}catch{return}}}function _(k){return k.prototype=null,Object.freeze(k)}function T(){v||typeof console=="undefined"||(v=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}})()},{}],314:[function(p,x,y){var e=p("./hidden-store.js");x.exports=function(){var r={};return function(t){if((typeof t!="object"||t===null)&&typeof t!="function")throw new Error("Weakmap-shim: Key must be object");var i=t.valueOf(r);return i&&i.identity===r?i:e(t,r)}}},{"./hidden-store.js":315}],315:[function(p,x,y){x.exports=function(e,r){var t={identity:r},i=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(n){return n!==r?i.apply(this,arguments):t},writable:!0}),t}},{}],316:[function(p,x,y){var e=p("./create-store.js");x.exports=function(){var r=e();return{get:function(t,i){var n=r(t);return n.hasOwnProperty("value")?n.value:i},set:function(t,i){return r(t).value=i,this},has:function(t){return"value"in r(t)},delete:function(t){return delete r(t).value}}}},{"./create-store.js":314}],317:[function(p,x,y){var e,r=function(){return function(t,i,n,h,s,a){var l=t[0],f=n[0],d=[0],v=f;h|=0;var m=0,c=f;for(m=0;m<l;++m){var b=i[h]-a,g=i[h+v]-a;b>=0!=g>=0&&s.push(d[0]+.5+.5*(b+g)/(b-g)),h+=c,++d[0]}}};x.exports=(e={funcName:"zeroCrossings"},function(t){var i={};return function(n,h,s){var a=n.dtype,l=n.order,f=[a,l.join()].join(),d=i[f];return d||(i[f]=d=t([a,l])),d(n.shape.slice(0),n.data,n.stride,0|n.offset,h,s)}}(r.bind(void 0,e)))},{}],318:[function(p,x,y){x.exports=function(r,t){var i=[];return t=+t||0,e(r.hi(r.shape[0]-1),i,t),i};var e=p("./lib/zc-core")},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,typeof Ga!="undefined"?Ga:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[27])(27)})})(Jm);var $b=Mx(Jm.exports),Fp={exports:{}},Km=function(Ce,u){return function(){for(var W=new Array(arguments.length),o=0;o<W.length;o++)W[o]=arguments[o];return Ce.apply(u,W)}},Sx=Km,pc=Object.prototype.toString;function Bp(ve){return pc.call(ve)==="[object Array]"}function Np(ve){return typeof ve=="undefined"}function Ex(ve){return ve!==null&&!Np(ve)&&ve.constructor!==null&&!Np(ve.constructor)&&typeof ve.constructor.isBuffer=="function"&&ve.constructor.isBuffer(ve)}function Lx(ve){return pc.call(ve)==="[object ArrayBuffer]"}function Cx(ve){return typeof FormData!="undefined"&&ve instanceof FormData}function Px(ve){var Ce;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?Ce=ArrayBuffer.isView(ve):Ce=ve&&ve.buffer&&ve.buffer instanceof ArrayBuffer,Ce}function Ix(ve){return typeof ve=="string"}function Ox(ve){return typeof ve=="number"}function $m(ve){return ve!==null&&typeof ve=="object"}function Kf(ve){if(pc.call(ve)!=="[object Object]")return!1;var Ce=Object.getPrototypeOf(ve);return Ce===null||Ce===Object.prototype}function Dx(ve){return pc.call(ve)==="[object Date]"}function zx(ve){return pc.call(ve)==="[object File]"}function Rx(ve){return pc.call(ve)==="[object Blob]"}function Qm(ve){return pc.call(ve)==="[object Function]"}function Fx(ve){return $m(ve)&&Qm(ve.pipe)}function Bx(ve){return typeof URLSearchParams!="undefined"&&ve instanceof URLSearchParams}function Nx(ve){return ve.trim?ve.trim():ve.replace(/^\s+|\s+$/g,"")}function jx(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function jp(ve,Ce){if(!(ve===null||typeof ve=="undefined"))if(typeof ve!="object"&&(ve=[ve]),Bp(ve))for(var u=0,q=ve.length;u<q;u++)Ce.call(null,ve[u],u,ve);else for(var W in ve)Object.prototype.hasOwnProperty.call(ve,W)&&Ce.call(null,ve[W],W,ve)}function Up(){var ve={};function Ce(W,o){Kf(ve[o])&&Kf(W)?ve[o]=Up(ve[o],W):Kf(W)?ve[o]=Up({},W):Bp(W)?ve[o]=W.slice():ve[o]=W}for(var u=0,q=arguments.length;u<q;u++)jp(arguments[u],Ce);return ve}function Ux(ve,Ce,u){return jp(Ce,function(W,o){u&&typeof W=="function"?ve[o]=Sx(W,u):ve[o]=W}),ve}function Vx(ve){return ve.charCodeAt(0)===65279&&(ve=ve.slice(1)),ve}var Ps={isArray:Bp,isArrayBuffer:Lx,isBuffer:Ex,isFormData:Cx,isArrayBufferView:Px,isString:Ix,isNumber:Ox,isObject:$m,isPlainObject:Kf,isUndefined:Np,isDate:Dx,isFile:zx,isBlob:Rx,isFunction:Qm,isStream:Fx,isURLSearchParams:Bx,isStandardBrowserEnv:jx,forEach:jp,merge:Up,extend:Ux,trim:Nx,stripBOM:Vx},Qc=Ps;function eg(ve){return encodeURIComponent(ve).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var tg=function(Ce,u,q){if(!u)return Ce;var W;if(q)W=q(u);else if(Qc.isURLSearchParams(u))W=u.toString();else{var o=[];Qc.forEach(u,function(y,e){y===null||typeof y=="undefined"||(Qc.isArray(y)?e=e+"[]":y=[y],Qc.forEach(y,function(t){Qc.isDate(t)?t=t.toISOString():Qc.isObject(t)&&(t=JSON.stringify(t)),o.push(eg(e)+"="+eg(t))}))}),W=o.join("&")}if(W){var p=Ce.indexOf("#");p!==-1&&(Ce=Ce.slice(0,p)),Ce+=(Ce.indexOf("?")===-1?"?":"&")+W}return Ce},Hx=Ps;function $f(){this.handlers=[]}$f.prototype.use=function(Ce,u,q){return this.handlers.push({fulfilled:Ce,rejected:u,synchronous:q?q.synchronous:!1,runWhen:q?q.runWhen:null}),this.handlers.length-1};$f.prototype.eject=function(Ce){this.handlers[Ce]&&(this.handlers[Ce]=null)};$f.prototype.forEach=function(Ce){Hx.forEach(this.handlers,function(q){q!==null&&Ce(q)})};var qx=$f,Gx=Ps,Yx=function(Ce,u){Gx.forEach(Ce,function(W,o){o!==u&&o.toUpperCase()===u.toUpperCase()&&(Ce[u]=W,delete Ce[o])})},rg=function(Ce,u,q,W,o){return Ce.config=u,q&&(Ce.code=q),Ce.request=W,Ce.response=o,Ce.isAxiosError=!0,Ce.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},Ce},Wx=rg,ng=function(Ce,u,q,W,o){var p=new Error(Ce);return Wx(p,u,q,W,o)},Zx=ng,Xx=function(Ce,u,q){var W=q.config.validateStatus;!q.status||!W||W(q.status)?Ce(q):u(Zx("Request failed with status code "+q.status,q.config,null,q.request,q))},Qf=Ps,Jx=Qf.isStandardBrowserEnv()?function(){return{write:function(u,q,W,o,p,x){var y=[];y.push(u+"="+encodeURIComponent(q)),Qf.isNumber(W)&&y.push("expires="+new Date(W).toGMTString()),Qf.isString(o)&&y.push("path="+o),Qf.isString(p)&&y.push("domain="+p),x===!0&&y.push("secure"),document.cookie=y.join("; ")},read:function(u){var q=document.cookie.match(new RegExp("(^|;\\s*)("+u+")=([^;]*)"));return q?decodeURIComponent(q[3]):null},remove:function(u){this.write(u,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Kx=function(Ce){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(Ce)},$x=function(Ce,u){return u?Ce.replace(/\/+$/,"")+"/"+u.replace(/^\/+/,""):Ce},Qx=Kx,eb=$x,tb=function(Ce,u){return Ce&&!Qx(u)?eb(Ce,u):u},Vp=Ps,rb=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],nb=function(Ce){var u={},q,W,o;return Ce&&Vp.forEach(Ce.split(`
`),function(x){if(o=x.indexOf(":"),q=Vp.trim(x.substr(0,o)).toLowerCase(),W=Vp.trim(x.substr(o+1)),q){if(u[q]&&rb.indexOf(q)>=0)return;q==="set-cookie"?u[q]=(u[q]?u[q]:[]).concat([W]):u[q]=u[q]?u[q]+", "+W:W}}),u},ig=Ps,ib=ig.isStandardBrowserEnv()?function(){var Ce=/(msie|trident)/i.test(navigator.userAgent),u=document.createElement("a"),q;function W(o){var p=o;return Ce&&(u.setAttribute("href",p),p=u.href),u.setAttribute("href",p),{href:u.href,protocol:u.protocol?u.protocol.replace(/:$/,""):"",host:u.host,search:u.search?u.search.replace(/^\?/,""):"",hash:u.hash?u.hash.replace(/^#/,""):"",hostname:u.hostname,port:u.port,pathname:u.pathname.charAt(0)==="/"?u.pathname:"/"+u.pathname}}return q=W(window.location.href),function(p){var x=ig.isString(p)?W(p):p;return x.protocol===q.protocol&&x.host===q.host}}():function(){return function(){return!0}}();function Hp(ve){this.message=ve}Hp.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Hp.prototype.__CANCEL__=!0;var eh=Hp,th=Ps,ab=Xx,ob=Jx,sb=tg,lb=tb,cb=nb,ub=ib,qp=ng,fb=nh,hb=eh,ag=function(Ce){return new Promise(function(q,W){var o=Ce.data,p=Ce.headers,x=Ce.responseType,y;function e(){Ce.cancelToken&&Ce.cancelToken.unsubscribe(y),Ce.signal&&Ce.signal.removeEventListener("abort",y)}th.isFormData(o)&&delete p["Content-Type"];var r=new XMLHttpRequest;if(Ce.auth){var t=Ce.auth.username||"",i=Ce.auth.password?unescape(encodeURIComponent(Ce.auth.password)):"";p.Authorization="Basic "+btoa(t+":"+i)}var n=lb(Ce.baseURL,Ce.url);r.open(Ce.method.toUpperCase(),sb(n,Ce.params,Ce.paramsSerializer),!0),r.timeout=Ce.timeout;function h(){if(!!r){var a="getAllResponseHeaders"in r?cb(r.getAllResponseHeaders()):null,l=!x||x==="text"||x==="json"?r.responseText:r.response,f={data:l,status:r.status,statusText:r.statusText,headers:a,config:Ce,request:r};ab(function(v){q(v),e()},function(v){W(v),e()},f),r=null}}if("onloadend"in r?r.onloadend=h:r.onreadystatechange=function(){!r||r.readyState!==4||r.status===0&&!(r.responseURL&&r.responseURL.indexOf("file:")===0)||setTimeout(h)},r.onabort=function(){!r||(W(qp("Request aborted",Ce,"ECONNABORTED",r)),r=null)},r.onerror=function(){W(qp("Network Error",Ce,null,r)),r=null},r.ontimeout=function(){var l=Ce.timeout?"timeout of "+Ce.timeout+"ms exceeded":"timeout exceeded",f=Ce.transitional||fb.transitional;Ce.timeoutErrorMessage&&(l=Ce.timeoutErrorMessage),W(qp(l,Ce,f.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",r)),r=null},th.isStandardBrowserEnv()){var s=(Ce.withCredentials||ub(n))&&Ce.xsrfCookieName?ob.read(Ce.xsrfCookieName):void 0;s&&(p[Ce.xsrfHeaderName]=s)}"setRequestHeader"in r&&th.forEach(p,function(l,f){typeof o=="undefined"&&f.toLowerCase()==="content-type"?delete p[f]:r.setRequestHeader(f,l)}),th.isUndefined(Ce.withCredentials)||(r.withCredentials=!!Ce.withCredentials),x&&x!=="json"&&(r.responseType=Ce.responseType),typeof Ce.onDownloadProgress=="function"&&r.addEventListener("progress",Ce.onDownloadProgress),typeof Ce.onUploadProgress=="function"&&r.upload&&r.upload.addEventListener("progress",Ce.onUploadProgress),(Ce.cancelToken||Ce.signal)&&(y=function(a){!r||(W(!a||a&&a.type?new hb("canceled"):a),r.abort(),r=null)},Ce.cancelToken&&Ce.cancelToken.subscribe(y),Ce.signal&&(Ce.signal.aborted?y():Ce.signal.addEventListener("abort",y))),o||(o=null),r.send(o)})},Qo=Ps,og=Yx,pb=rg,db={"Content-Type":"application/x-www-form-urlencoded"};function sg(ve,Ce){!Qo.isUndefined(ve)&&Qo.isUndefined(ve["Content-Type"])&&(ve["Content-Type"]=Ce)}function mb(){var ve;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(ve=ag),ve}function gb(ve,Ce,u){if(Qo.isString(ve))try{return(Ce||JSON.parse)(ve),Qo.trim(ve)}catch(q){if(q.name!=="SyntaxError")throw q}return(u||JSON.stringify)(ve)}var rh={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:mb(),transformRequest:[function(Ce,u){return og(u,"Accept"),og(u,"Content-Type"),Qo.isFormData(Ce)||Qo.isArrayBuffer(Ce)||Qo.isBuffer(Ce)||Qo.isStream(Ce)||Qo.isFile(Ce)||Qo.isBlob(Ce)?Ce:Qo.isArrayBufferView(Ce)?Ce.buffer:Qo.isURLSearchParams(Ce)?(sg(u,"application/x-www-form-urlencoded;charset=utf-8"),Ce.toString()):Qo.isObject(Ce)||u&&u["Content-Type"]==="application/json"?(sg(u,"application/json"),gb(Ce)):Ce}],transformResponse:[function(Ce){var u=this.transitional||rh.transitional,q=u&&u.silentJSONParsing,W=u&&u.forcedJSONParsing,o=!q&&this.responseType==="json";if(o||W&&Qo.isString(Ce)&&Ce.length)try{return JSON.parse(Ce)}catch(p){if(o)throw p.name==="SyntaxError"?pb(p,this,"E_JSON_PARSE"):p}return Ce}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(Ce){return Ce>=200&&Ce<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Qo.forEach(["delete","get","head"],function(Ce){rh.headers[Ce]={}});Qo.forEach(["post","put","patch"],function(Ce){rh.headers[Ce]=Qo.merge(db)});var nh=rh,vb=Ps,yb=nh,xb=function(Ce,u,q){var W=this||yb;return vb.forEach(q,function(p){Ce=p.call(W,Ce,u)}),Ce},lg=function(Ce){return!!(Ce&&Ce.__CANCEL__)},cg=Ps,Gp=xb,bb=lg,_b=nh,wb=eh;function Yp(ve){if(ve.cancelToken&&ve.cancelToken.throwIfRequested(),ve.signal&&ve.signal.aborted)throw new wb("canceled")}var Tb=function(Ce){Yp(Ce),Ce.headers=Ce.headers||{},Ce.data=Gp.call(Ce,Ce.data,Ce.headers,Ce.transformRequest),Ce.headers=cg.merge(Ce.headers.common||{},Ce.headers[Ce.method]||{},Ce.headers),cg.forEach(["delete","get","head","post","put","patch","common"],function(W){delete Ce.headers[W]});var u=Ce.adapter||_b.adapter;return u(Ce).then(function(W){return Yp(Ce),W.data=Gp.call(Ce,W.data,W.headers,Ce.transformResponse),W},function(W){return bb(W)||(Yp(Ce),W&&W.response&&(W.response.data=Gp.call(Ce,W.response.data,W.response.headers,Ce.transformResponse))),Promise.reject(W)})},Is=Ps,ug=function(Ce,u){u=u||{};var q={};function W(r,t){return Is.isPlainObject(r)&&Is.isPlainObject(t)?Is.merge(r,t):Is.isPlainObject(t)?Is.merge({},t):Is.isArray(t)?t.slice():t}function o(r){if(Is.isUndefined(u[r])){if(!Is.isUndefined(Ce[r]))return W(void 0,Ce[r])}else return W(Ce[r],u[r])}function p(r){if(!Is.isUndefined(u[r]))return W(void 0,u[r])}function x(r){if(Is.isUndefined(u[r])){if(!Is.isUndefined(Ce[r]))return W(void 0,Ce[r])}else return W(void 0,u[r])}function y(r){if(r in u)return W(Ce[r],u[r]);if(r in Ce)return W(void 0,Ce[r])}var e={url:p,method:p,data:p,baseURL:x,transformRequest:x,transformResponse:x,paramsSerializer:x,timeout:x,timeoutMessage:x,withCredentials:x,adapter:x,responseType:x,xsrfCookieName:x,xsrfHeaderName:x,onUploadProgress:x,onDownloadProgress:x,decompress:x,maxContentLength:x,maxBodyLength:x,transport:x,httpAgent:x,httpsAgent:x,cancelToken:x,socketPath:x,responseEncoding:x,validateStatus:y};return Is.forEach(Object.keys(Ce).concat(Object.keys(u)),function(t){var i=e[t]||o,n=i(t);Is.isUndefined(n)&&i!==y||(q[t]=n)}),q},fg={version:"0.24.0"},kb=fg.version,Wp={};["object","boolean","number","function","string","symbol"].forEach(function(ve,Ce){Wp[ve]=function(q){return typeof q===ve||"a"+(Ce<1?"n ":" ")+ve}});var hg={};Wp.transitional=function(Ce,u,q){function W(o,p){return"[Axios v"+kb+"] Transitional option '"+o+"'"+p+(q?". "+q:"")}return function(o,p,x){if(Ce===!1)throw new Error(W(p," has been removed"+(u?" in "+u:"")));return u&&!hg[p]&&(hg[p]=!0,console.warn(W(p," has been deprecated since v"+u+" and will be removed in the near future"))),Ce?Ce(o,p,x):!0}};function Ab(ve,Ce,u){if(typeof ve!="object")throw new TypeError("options must be an object");for(var q=Object.keys(ve),W=q.length;W-- >0;){var o=q[W],p=Ce[o];if(p){var x=ve[o],y=x===void 0||p(x,o,ve);if(y!==!0)throw new TypeError("option "+o+" must be "+y);continue}if(u!==!0)throw Error("Unknown option "+o)}}var Mb={assertOptions:Ab,validators:Wp},pg=Ps,Sb=tg,dg=qx,mg=Tb,ih=ug,gg=Mb,eu=gg.validators;function Du(ve){this.defaults=ve,this.interceptors={request:new dg,response:new dg}}Du.prototype.request=function(Ce){typeof Ce=="string"?(Ce=arguments[1]||{},Ce.url=arguments[0]):Ce=Ce||{},Ce=ih(this.defaults,Ce),Ce.method?Ce.method=Ce.method.toLowerCase():this.defaults.method?Ce.method=this.defaults.method.toLowerCase():Ce.method="get";var u=Ce.transitional;u!==void 0&&gg.assertOptions(u,{silentJSONParsing:eu.transitional(eu.boolean),forcedJSONParsing:eu.transitional(eu.boolean),clarifyTimeoutError:eu.transitional(eu.boolean)},!1);var q=[],W=!0;this.interceptors.request.forEach(function(i){typeof i.runWhen=="function"&&i.runWhen(Ce)===!1||(W=W&&i.synchronous,q.unshift(i.fulfilled,i.rejected))});var o=[];this.interceptors.response.forEach(function(i){o.push(i.fulfilled,i.rejected)});var p;if(!W){var x=[mg,void 0];for(Array.prototype.unshift.apply(x,q),x=x.concat(o),p=Promise.resolve(Ce);x.length;)p=p.then(x.shift(),x.shift());return p}for(var y=Ce;q.length;){var e=q.shift(),r=q.shift();try{y=e(y)}catch(t){r(t);break}}try{p=mg(y)}catch(t){return Promise.reject(t)}for(;o.length;)p=p.then(o.shift(),o.shift());return p};Du.prototype.getUri=function(Ce){return Ce=ih(this.defaults,Ce),Sb(Ce.url,Ce.params,Ce.paramsSerializer).replace(/^\?/,"")};pg.forEach(["delete","get","head","options"],function(Ce){Du.prototype[Ce]=function(u,q){return this.request(ih(q||{},{method:Ce,url:u,data:(q||{}).data}))}});pg.forEach(["post","put","patch"],function(Ce){Du.prototype[Ce]=function(u,q,W){return this.request(ih(W||{},{method:Ce,url:u,data:q}))}});var Eb=Du,Lb=eh;function tu(ve){if(typeof ve!="function")throw new TypeError("executor must be a function.");var Ce;this.promise=new Promise(function(W){Ce=W});var u=this;this.promise.then(function(q){if(!!u._listeners){var W,o=u._listeners.length;for(W=0;W<o;W++)u._listeners[W](q);u._listeners=null}}),this.promise.then=function(q){var W,o=new Promise(function(p){u.subscribe(p),W=p}).then(q);return o.cancel=function(){u.unsubscribe(W)},o},ve(function(W){u.reason||(u.reason=new Lb(W),Ce(u.reason))})}tu.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};tu.prototype.subscribe=function(Ce){if(this.reason){Ce(this.reason);return}this._listeners?this._listeners.push(Ce):this._listeners=[Ce]};tu.prototype.unsubscribe=function(Ce){if(!!this._listeners){var u=this._listeners.indexOf(Ce);u!==-1&&this._listeners.splice(u,1)}};tu.source=function(){var Ce,u=new tu(function(W){Ce=W});return{token:u,cancel:Ce}};var Cb=tu,Pb=function(Ce){return function(q){return Ce.apply(null,q)}},Ib=function(Ce){return typeof Ce=="object"&&Ce.isAxiosError===!0},vg=Ps,Ob=Km,ah=Eb,Db=ug,zb=nh;function yg(ve){var Ce=new ah(ve),u=Ob(ah.prototype.request,Ce);return vg.extend(u,ah.prototype,Ce),vg.extend(u,Ce),u.create=function(W){return yg(Db(ve,W))},u}var ml=yg(zb);ml.Axios=ah;ml.Cancel=eh;ml.CancelToken=Cb;ml.isCancel=lg;ml.VERSION=fg.version;ml.all=function(Ce){return Promise.all(Ce)};ml.spread=Pb;ml.isAxiosError=Ib;Fp.exports=ml;Fp.exports.default=ml;var Qb=Fp.exports;function Zp(ve){return(Zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ce){return typeof Ce}:function(Ce){return Ce&&typeof Symbol=="function"&&Ce.constructor===Symbol&&Ce!==Symbol.prototype?"symbol":typeof Ce})(ve)}function zu(ve,Ce){if(!zu.installed){var u=xg(Ce)?Bb(Ce):Ce;if(Nb(u)){zu.installed=!0;var q=jb(ve);if(q){var W=q<3?Rb:Fb;Object.keys(u).forEach(function(o){W(ve,o,u[o])})}else console.error("[vue-axios] unknown Vue version")}else console.error("[vue-axios] configuration is invalid, expected options are either <axios_instance> or { <registration_key>: <axios_instance> }")}}function Rb(ve,Ce,u){Object.defineProperty(ve.prototype,Ce,{get:function(){return u}}),ve[Ce]=u}function Fb(ve,Ce,u){ve.config.globalProperties[Ce]=u,ve[Ce]=u}function xg(ve){return ve&&typeof ve.get=="function"&&typeof ve.post=="function"}function Bb(ve){return{axios:ve,$http:ve}}function Nb(ve){return Zp(ve)==="object"&&Object.keys(ve).every(function(Ce){return xg(ve[Ce])})}function jb(ve){return ve&&ve.version&&Number(ve.version.split(".")[0])}(typeof exports=="undefined"?"undefined":Zp(exports))=="object"?module.exports=zu:typeof define=="function"&&define.amd?define([],function(){return zu}):window.Vue&&window.axios&&window.Vue.use&&Vue.use(zu,window.axios);export{$b as P,Cy as a,Am as b,Yb as c,Jb as d,Zb as e,qb as f,Qb as g,hl as h,ms as i,Wb as j,Kb as k,zu as l,im as o,Hb as p,Vb as r,Ub as t,Uv as u,Xb as v,Gb as w};
